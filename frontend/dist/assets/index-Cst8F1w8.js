var o7=Object.defineProperty;var s7=(n,e,t)=>e in n?o7(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var vr=(n,e,t)=>s7(n,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=t(i);fetch(i.href,a)}})();var sX=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function LA(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Ev={exports:{}},L0={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f3;function l7(){if(f3)return L0;f3=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(r,i,a){var o=null;if(a!==void 0&&(o=""+a),i.key!==void 0&&(o=""+i.key),"key"in i){a={};for(var s in i)s!=="key"&&(a[s]=i[s])}else a=i;return i=a.ref,{$$typeof:n,type:r,key:o,ref:i!==void 0?i:null,props:a}}return L0.Fragment=e,L0.jsx=t,L0.jsxs=t,L0}var d3;function c7(){return d3||(d3=1,Ev.exports=l7()),Ev.exports}var v=c7(),Cv={exports:{}},yn={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var h3;function u7(){if(h3)return yn;h3=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),o=Symbol.for("react.context"),s=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),p=Symbol.iterator;function g(ee){return ee===null||typeof ee!="object"?null:(ee=p&&ee[p]||ee["@@iterator"],typeof ee=="function"?ee:null)}var m={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,_={};function C(ee,ie,$){this.props=ee,this.context=ie,this.refs=_,this.updater=$||m}C.prototype.isReactComponent={},C.prototype.setState=function(ee,ie){if(typeof ee!="object"&&typeof ee!="function"&&ee!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,ee,ie,"setState")},C.prototype.forceUpdate=function(ee){this.updater.enqueueForceUpdate(this,ee,"forceUpdate")};function S(){}S.prototype=C.prototype;function k(ee,ie,$){this.props=ee,this.context=ie,this.refs=_,this.updater=$||m}var M=k.prototype=new S;M.constructor=k,x(M,C.prototype),M.isPureReactComponent=!0;var P=Array.isArray,Y={H:null,A:null,T:null,S:null,V:null},z=Object.prototype.hasOwnProperty;function F(ee,ie,$,W,Q,J){return $=J.ref,{$$typeof:n,type:ee,key:ie,ref:$!==void 0?$:null,props:J}}function I(ee,ie){return F(ee.type,ie,void 0,void 0,void 0,ee.props)}function T(ee){return typeof ee=="object"&&ee!==null&&ee.$$typeof===n}function j(ee){var ie={"=":"=0",":":"=2"};return"$"+ee.replace(/[=:]/g,function($){return ie[$]})}var N=/\/+/g;function R(ee,ie){return typeof ee=="object"&&ee!==null&&ee.key!=null?j(""+ee.key):ie.toString(36)}function D(){}function L(ee){switch(ee.status){case"fulfilled":return ee.value;case"rejected":throw ee.reason;default:switch(typeof ee.status=="string"?ee.then(D,D):(ee.status="pending",ee.then(function(ie){ee.status==="pending"&&(ee.status="fulfilled",ee.value=ie)},function(ie){ee.status==="pending"&&(ee.status="rejected",ee.reason=ie)})),ee.status){case"fulfilled":return ee.value;case"rejected":throw ee.reason}}throw ee}function G(ee,ie,$,W,Q){var J=typeof ee;(J==="undefined"||J==="boolean")&&(ee=null);var he=!1;if(ee===null)he=!0;else switch(J){case"bigint":case"string":case"number":he=!0;break;case"object":switch(ee.$$typeof){case n:case e:he=!0;break;case d:return he=ee._init,G(he(ee._payload),ie,$,W,Q)}}if(he)return Q=Q(ee),he=W===""?"."+R(ee,0):W,P(Q)?($="",he!=null&&($=he.replace(N,"$&/")+"/"),G(Q,ie,$,"",function(Ie){return Ie})):Q!=null&&(T(Q)&&(Q=I(Q,$+(Q.key==null||ee&&ee.key===Q.key?"":(""+Q.key).replace(N,"$&/")+"/")+he)),ie.push(Q)),1;he=0;var be=W===""?".":W+":";if(P(ee))for(var _e=0;_e<ee.length;_e++)W=ee[_e],J=be+R(W,_e),he+=G(W,ie,$,J,Q);else if(_e=g(ee),typeof _e=="function")for(ee=_e.call(ee),_e=0;!(W=ee.next()).done;)W=W.value,J=be+R(W,_e++),he+=G(W,ie,$,J,Q);else if(J==="object"){if(typeof ee.then=="function")return G(L(ee),ie,$,W,Q);throw ie=String(ee),Error("Objects are not valid as a React child (found: "+(ie==="[object Object]"?"object with keys {"+Object.keys(ee).join(", ")+"}":ie)+"). If you meant to render a collection of children, use an array instead.")}return he}function U(ee,ie,$){if(ee==null)return ee;var W=[],Q=0;return G(ee,W,"","",function(J){return ie.call($,J,Q++)}),W}function H(ee){if(ee._status===-1){var ie=ee._result;ie=ie(),ie.then(function($){(ee._status===0||ee._status===-1)&&(ee._status=1,ee._result=$)},function($){(ee._status===0||ee._status===-1)&&(ee._status=2,ee._result=$)}),ee._status===-1&&(ee._status=0,ee._result=ie)}if(ee._status===1)return ee._result.default;throw ee._result}var te=typeof reportError=="function"?reportError:function(ee){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ie=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof ee=="object"&&ee!==null&&typeof ee.message=="string"?String(ee.message):String(ee),error:ee});if(!window.dispatchEvent(ie))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",ee);return}console.error(ee)};function se(){}return yn.Children={map:U,forEach:function(ee,ie,$){U(ee,function(){ie.apply(this,arguments)},$)},count:function(ee){var ie=0;return U(ee,function(){ie++}),ie},toArray:function(ee){return U(ee,function(ie){return ie})||[]},only:function(ee){if(!T(ee))throw Error("React.Children.only expected to receive a single React element child.");return ee}},yn.Component=C,yn.Fragment=t,yn.Profiler=i,yn.PureComponent=k,yn.StrictMode=r,yn.Suspense=c,yn.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Y,yn.__COMPILER_RUNTIME={__proto__:null,c:function(ee){return Y.H.useMemoCache(ee)}},yn.cache=function(ee){return function(){return ee.apply(null,arguments)}},yn.cloneElement=function(ee,ie,$){if(ee==null)throw Error("The argument must be a React element, but you passed "+ee+".");var W=x({},ee.props),Q=ee.key,J=void 0;if(ie!=null)for(he in ie.ref!==void 0&&(J=void 0),ie.key!==void 0&&(Q=""+ie.key),ie)!z.call(ie,he)||he==="key"||he==="__self"||he==="__source"||he==="ref"&&ie.ref===void 0||(W[he]=ie[he]);var he=arguments.length-2;if(he===1)W.children=$;else if(1<he){for(var be=Array(he),_e=0;_e<he;_e++)be[_e]=arguments[_e+2];W.children=be}return F(ee.type,Q,void 0,void 0,J,W)},yn.createContext=function(ee){return ee={$$typeof:o,_currentValue:ee,_currentValue2:ee,_threadCount:0,Provider:null,Consumer:null},ee.Provider=ee,ee.Consumer={$$typeof:a,_context:ee},ee},yn.createElement=function(ee,ie,$){var W,Q={},J=null;if(ie!=null)for(W in ie.key!==void 0&&(J=""+ie.key),ie)z.call(ie,W)&&W!=="key"&&W!=="__self"&&W!=="__source"&&(Q[W]=ie[W]);var he=arguments.length-2;if(he===1)Q.children=$;else if(1<he){for(var be=Array(he),_e=0;_e<he;_e++)be[_e]=arguments[_e+2];Q.children=be}if(ee&&ee.defaultProps)for(W in he=ee.defaultProps,he)Q[W]===void 0&&(Q[W]=he[W]);return F(ee,J,void 0,void 0,null,Q)},yn.createRef=function(){return{current:null}},yn.forwardRef=function(ee){return{$$typeof:s,render:ee}},yn.isValidElement=T,yn.lazy=function(ee){return{$$typeof:d,_payload:{_status:-1,_result:ee},_init:H}},yn.memo=function(ee,ie){return{$$typeof:f,type:ee,compare:ie===void 0?null:ie}},yn.startTransition=function(ee){var ie=Y.T,$={};Y.T=$;try{var W=ee(),Q=Y.S;Q!==null&&Q($,W),typeof W=="object"&&W!==null&&typeof W.then=="function"&&W.then(se,te)}catch(J){te(J)}finally{Y.T=ie}},yn.unstable_useCacheRefresh=function(){return Y.H.useCacheRefresh()},yn.use=function(ee){return Y.H.use(ee)},yn.useActionState=function(ee,ie,$){return Y.H.useActionState(ee,ie,$)},yn.useCallback=function(ee,ie){return Y.H.useCallback(ee,ie)},yn.useContext=function(ee){return Y.H.useContext(ee)},yn.useDebugValue=function(){},yn.useDeferredValue=function(ee,ie){return Y.H.useDeferredValue(ee,ie)},yn.useEffect=function(ee,ie,$){var W=Y.H;if(typeof $=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return W.useEffect(ee,ie)},yn.useId=function(){return Y.H.useId()},yn.useImperativeHandle=function(ee,ie,$){return Y.H.useImperativeHandle(ee,ie,$)},yn.useInsertionEffect=function(ee,ie){return Y.H.useInsertionEffect(ee,ie)},yn.useLayoutEffect=function(ee,ie){return Y.H.useLayoutEffect(ee,ie)},yn.useMemo=function(ee,ie){return Y.H.useMemo(ee,ie)},yn.useOptimistic=function(ee,ie){return Y.H.useOptimistic(ee,ie)},yn.useReducer=function(ee,ie,$){return Y.H.useReducer(ee,ie,$)},yn.useRef=function(ee){return Y.H.useRef(ee)},yn.useState=function(ee){return Y.H.useState(ee)},yn.useSyncExternalStore=function(ee,ie,$){return Y.H.useSyncExternalStore(ee,ie,$)},yn.useTransition=function(){return Y.H.useTransition()},yn.version="19.1.0",yn}var p3;function Im(){return p3||(p3=1,Cv.exports=u7()),Cv.exports}var le=Im();const Xn=LA(le);var Iv={exports:{}},P0={},Tv={exports:{}},Rv={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var g3;function f7(){return g3||(g3=1,function(n){function e(U,H){var te=U.length;U.push(H);e:for(;0<te;){var se=te-1>>>1,ee=U[se];if(0<i(ee,H))U[se]=H,U[te]=ee,te=se;else break e}}function t(U){return U.length===0?null:U[0]}function r(U){if(U.length===0)return null;var H=U[0],te=U.pop();if(te!==H){U[0]=te;e:for(var se=0,ee=U.length,ie=ee>>>1;se<ie;){var $=2*(se+1)-1,W=U[$],Q=$+1,J=U[Q];if(0>i(W,te))Q<ee&&0>i(J,W)?(U[se]=J,U[Q]=te,se=Q):(U[se]=W,U[$]=te,se=$);else if(Q<ee&&0>i(J,te))U[se]=J,U[Q]=te,se=Q;else break e}}return H}function i(U,H){var te=U.sortIndex-H.sortIndex;return te!==0?te:U.id-H.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var o=Date,s=o.now();n.unstable_now=function(){return o.now()-s}}var c=[],f=[],d=1,p=null,g=3,m=!1,x=!1,_=!1,C=!1,S=typeof setTimeout=="function"?setTimeout:null,k=typeof clearTimeout=="function"?clearTimeout:null,M=typeof setImmediate<"u"?setImmediate:null;function P(U){for(var H=t(f);H!==null;){if(H.callback===null)r(f);else if(H.startTime<=U)r(f),H.sortIndex=H.expirationTime,e(c,H);else break;H=t(f)}}function Y(U){if(_=!1,P(U),!x)if(t(c)!==null)x=!0,z||(z=!0,R());else{var H=t(f);H!==null&&G(Y,H.startTime-U)}}var z=!1,F=-1,I=5,T=-1;function j(){return C?!0:!(n.unstable_now()-T<I)}function N(){if(C=!1,z){var U=n.unstable_now();T=U;var H=!0;try{e:{x=!1,_&&(_=!1,k(F),F=-1),m=!0;var te=g;try{t:{for(P(U),p=t(c);p!==null&&!(p.expirationTime>U&&j());){var se=p.callback;if(typeof se=="function"){p.callback=null,g=p.priorityLevel;var ee=se(p.expirationTime<=U);if(U=n.unstable_now(),typeof ee=="function"){p.callback=ee,P(U),H=!0;break t}p===t(c)&&r(c),P(U)}else r(c);p=t(c)}if(p!==null)H=!0;else{var ie=t(f);ie!==null&&G(Y,ie.startTime-U),H=!1}}break e}finally{p=null,g=te,m=!1}H=void 0}}finally{H?R():z=!1}}}var R;if(typeof M=="function")R=function(){M(N)};else if(typeof MessageChannel<"u"){var D=new MessageChannel,L=D.port2;D.port1.onmessage=N,R=function(){L.postMessage(null)}}else R=function(){S(N,0)};function G(U,H){F=S(function(){U(n.unstable_now())},H)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(U){U.callback=null},n.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<U?Math.floor(1e3/U):5},n.unstable_getCurrentPriorityLevel=function(){return g},n.unstable_next=function(U){switch(g){case 1:case 2:case 3:var H=3;break;default:H=g}var te=g;g=H;try{return U()}finally{g=te}},n.unstable_requestPaint=function(){C=!0},n.unstable_runWithPriority=function(U,H){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var te=g;g=U;try{return H()}finally{g=te}},n.unstable_scheduleCallback=function(U,H,te){var se=n.unstable_now();switch(typeof te=="object"&&te!==null?(te=te.delay,te=typeof te=="number"&&0<te?se+te:se):te=se,U){case 1:var ee=-1;break;case 2:ee=250;break;case 5:ee=1073741823;break;case 4:ee=1e4;break;default:ee=5e3}return ee=te+ee,U={id:d++,callback:H,priorityLevel:U,startTime:te,expirationTime:ee,sortIndex:-1},te>se?(U.sortIndex=te,e(f,U),t(c)===null&&U===t(f)&&(_?(k(F),F=-1):_=!0,G(Y,te-se))):(U.sortIndex=ee,e(c,U),x||m||(x=!0,z||(z=!0,R()))),U},n.unstable_shouldYield=j,n.unstable_wrapCallback=function(U){var H=g;return function(){var te=g;g=H;try{return U.apply(this,arguments)}finally{g=te}}}}(Rv)),Rv}var m3;function d7(){return m3||(m3=1,Tv.exports=f7()),Tv.exports}var Nv={exports:{}},to={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var v3;function h7(){if(v3)return to;v3=1;var n=Im();function e(c){var f="https://react.dev/errors/"+c;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)f+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+c+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var r={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},i=Symbol.for("react.portal");function a(c,f,d){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:p==null?null:""+p,children:c,containerInfo:f,implementation:d}}var o=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function s(c,f){if(c==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return to.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,to.createPortal=function(c,f){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(e(299));return a(c,f,null,d)},to.flushSync=function(c){var f=o.T,d=r.p;try{if(o.T=null,r.p=2,c)return c()}finally{o.T=f,r.p=d,r.d.f()}},to.preconnect=function(c,f){typeof c=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,r.d.C(c,f))},to.prefetchDNS=function(c){typeof c=="string"&&r.d.D(c)},to.preinit=function(c,f){if(typeof c=="string"&&f&&typeof f.as=="string"){var d=f.as,p=s(d,f.crossOrigin),g=typeof f.integrity=="string"?f.integrity:void 0,m=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;d==="style"?r.d.S(c,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:p,integrity:g,fetchPriority:m}):d==="script"&&r.d.X(c,{crossOrigin:p,integrity:g,fetchPriority:m,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},to.preinitModule=function(c,f){if(typeof c=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var d=s(f.as,f.crossOrigin);r.d.M(c,{crossOrigin:d,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&r.d.M(c)},to.preload=function(c,f){if(typeof c=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var d=f.as,p=s(d,f.crossOrigin);r.d.L(c,d,{crossOrigin:p,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},to.preloadModule=function(c,f){if(typeof c=="string")if(f){var d=s(f.as,f.crossOrigin);r.d.m(c,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:d,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else r.d.m(c)},to.requestFormReset=function(c){r.d.r(c)},to.unstable_batchedUpdates=function(c,f){return c(f)},to.useFormState=function(c,f,d){return o.H.useFormState(c,f,d)},to.useFormStatus=function(){return o.H.useHostTransitionStatus()},to.version="19.1.0",to}var y3;function p7(){if(y3)return Nv.exports;y3=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Nv.exports=h7(),Nv.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var x3;function g7(){if(x3)return P0;x3=1;var n=d7(),e=Im(),t=p7();function r(l){var u="https://react.dev/errors/"+l;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var h=2;h<arguments.length;h++)u+="&args[]="+encodeURIComponent(arguments[h])}return"Minified React error #"+l+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(l){return!(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11)}function a(l){var u=l,h=l;if(l.alternate)for(;u.return;)u=u.return;else{l=u;do u=l,(u.flags&4098)!==0&&(h=u.return),l=u.return;while(l)}return u.tag===3?h:null}function o(l){if(l.tag===13){var u=l.memoizedState;if(u===null&&(l=l.alternate,l!==null&&(u=l.memoizedState)),u!==null)return u.dehydrated}return null}function s(l){if(a(l)!==l)throw Error(r(188))}function c(l){var u=l.alternate;if(!u){if(u=a(l),u===null)throw Error(r(188));return u!==l?null:l}for(var h=l,y=u;;){var A=h.return;if(A===null)break;var O=A.alternate;if(O===null){if(y=A.return,y!==null){h=y;continue}break}if(A.child===O.child){for(O=A.child;O;){if(O===h)return s(A),l;if(O===y)return s(A),u;O=O.sibling}throw Error(r(188))}if(h.return!==y.return)h=A,y=O;else{for(var Z=!1,ce=A.child;ce;){if(ce===h){Z=!0,h=A,y=O;break}if(ce===y){Z=!0,y=A,h=O;break}ce=ce.sibling}if(!Z){for(ce=O.child;ce;){if(ce===h){Z=!0,h=O,y=A;break}if(ce===y){Z=!0,y=O,h=A;break}ce=ce.sibling}if(!Z)throw Error(r(189))}}if(h.alternate!==y)throw Error(r(190))}if(h.tag!==3)throw Error(r(188));return h.stateNode.current===h?l:u}function f(l){var u=l.tag;if(u===5||u===26||u===27||u===6)return l;for(l=l.child;l!==null;){if(u=f(l),u!==null)return u;l=l.sibling}return null}var d=Object.assign,p=Symbol.for("react.element"),g=Symbol.for("react.transitional.element"),m=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),_=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),S=Symbol.for("react.provider"),k=Symbol.for("react.consumer"),M=Symbol.for("react.context"),P=Symbol.for("react.forward_ref"),Y=Symbol.for("react.suspense"),z=Symbol.for("react.suspense_list"),F=Symbol.for("react.memo"),I=Symbol.for("react.lazy"),T=Symbol.for("react.activity"),j=Symbol.for("react.memo_cache_sentinel"),N=Symbol.iterator;function R(l){return l===null||typeof l!="object"?null:(l=N&&l[N]||l["@@iterator"],typeof l=="function"?l:null)}var D=Symbol.for("react.client.reference");function L(l){if(l==null)return null;if(typeof l=="function")return l.$$typeof===D?null:l.displayName||l.name||null;if(typeof l=="string")return l;switch(l){case x:return"Fragment";case C:return"Profiler";case _:return"StrictMode";case Y:return"Suspense";case z:return"SuspenseList";case T:return"Activity"}if(typeof l=="object")switch(l.$$typeof){case m:return"Portal";case M:return(l.displayName||"Context")+".Provider";case k:return(l._context.displayName||"Context")+".Consumer";case P:var u=l.render;return l=l.displayName,l||(l=u.displayName||u.name||"",l=l!==""?"ForwardRef("+l+")":"ForwardRef"),l;case F:return u=l.displayName||null,u!==null?u:L(l.type)||"Memo";case I:u=l._payload,l=l._init;try{return L(l(u))}catch{}}return null}var G=Array.isArray,U=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,H=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,te={pending:!1,data:null,method:null,action:null},se=[],ee=-1;function ie(l){return{current:l}}function $(l){0>ee||(l.current=se[ee],se[ee]=null,ee--)}function W(l,u){ee++,se[ee]=l.current,l.current=u}var Q=ie(null),J=ie(null),he=ie(null),be=ie(null);function _e(l,u){switch(W(he,u),W(J,l),W(Q,null),u.nodeType){case 9:case 11:l=(l=u.documentElement)&&(l=l.namespaceURI)?Fw(l):0;break;default:if(l=u.tagName,u=u.namespaceURI)u=Fw(u),l=Uw(u,l);else switch(l){case"svg":l=1;break;case"math":l=2;break;default:l=0}}$(Q),W(Q,l)}function Ie(){$(Q),$(J),$(he)}function Oe(l){l.memoizedState!==null&&W(be,l);var u=Q.current,h=Uw(u,l.type);u!==h&&(W(J,l),W(Q,h))}function Ve(l){J.current===l&&($(Q),$(J)),be.current===l&&($(be),R0._currentValue=te)}var nt=Object.prototype.hasOwnProperty,ot=n.unstable_scheduleCallback,ft=n.unstable_cancelCallback,de=n.unstable_shouldYield,rt=n.unstable_requestPaint,dt=n.unstable_now,at=n.unstable_getCurrentPriorityLevel,Ee=n.unstable_ImmediatePriority,lt=n.unstable_UserBlockingPriority,Ye=n.unstable_NormalPriority,vt=n.unstable_LowPriority,ct=n.unstable_IdlePriority,it=n.log,Lt=n.unstable_setDisableYieldValue,ht=null,yt=null;function _t(l){if(typeof it=="function"&&Lt(l),yt&&typeof yt.setStrictMode=="function")try{yt.setStrictMode(ht,l)}catch{}}var ut=Math.clz32?Math.clz32:mn,xt=Math.log,mt=Math.LN2;function mn(l){return l>>>=0,l===0?32:31-(xt(l)/mt|0)|0}var Kt=256,Bt=4194304;function jt(l){var u=l&42;if(u!==0)return u;switch(l&-l){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return l&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return l}}function Vn(l,u,h){var y=l.pendingLanes;if(y===0)return 0;var A=0,O=l.suspendedLanes,Z=l.pingedLanes;l=l.warmLanes;var ce=y&134217727;return ce!==0?(y=ce&~O,y!==0?A=jt(y):(Z&=ce,Z!==0?A=jt(Z):h||(h=ce&~l,h!==0&&(A=jt(h))))):(ce=y&~O,ce!==0?A=jt(ce):Z!==0?A=jt(Z):h||(h=y&~l,h!==0&&(A=jt(h)))),A===0?0:u!==0&&u!==A&&(u&O)===0&&(O=A&-A,h=u&-u,O>=h||O===32&&(h&4194048)!==0)?u:A}function kt(l,u){return(l.pendingLanes&~(l.suspendedLanes&~l.pingedLanes)&u)===0}function Pn(l,u){switch(l){case 1:case 2:case 4:case 8:case 64:return u+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ft(){var l=Kt;return Kt<<=1,(Kt&4194048)===0&&(Kt=256),l}function Ht(){var l=Bt;return Bt<<=1,(Bt&62914560)===0&&(Bt=4194304),l}function Mn(l){for(var u=[],h=0;31>h;h++)u.push(l);return u}function Ut(l,u){l.pendingLanes|=u,u!==268435456&&(l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0)}function Tt(l,u,h,y,A,O){var Z=l.pendingLanes;l.pendingLanes=h,l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0,l.expiredLanes&=h,l.entangledLanes&=h,l.errorRecoveryDisabledLanes&=h,l.shellSuspendCounter=0;var ce=l.entanglements,xe=l.expirationTimes,Me=l.hiddenUpdates;for(h=Z&~h;0<h;){var Ge=31-ut(h),Ze=1<<Ge;ce[Ge]=0,xe[Ge]=-1;var Fe=Me[Ge];if(Fe!==null)for(Me[Ge]=null,Ge=0;Ge<Fe.length;Ge++){var Ue=Fe[Ge];Ue!==null&&(Ue.lane&=-536870913)}h&=~Ze}y!==0&&nn(l,y,0),O!==0&&A===0&&l.tag!==0&&(l.suspendedLanes|=O&~(Z&~u))}function nn(l,u,h){l.pendingLanes|=u,l.suspendedLanes&=~u;var y=31-ut(u);l.entangledLanes|=u,l.entanglements[y]=l.entanglements[y]|1073741824|h&4194090}function $i(l,u){var h=l.entangledLanes|=u;for(l=l.entanglements;h;){var y=31-ut(h),A=1<<y;A&u|l[y]&u&&(l[y]|=u),h&=~A}}function wr(l){switch(l){case 2:l=1;break;case 8:l=4;break;case 32:l=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:l=128;break;case 268435456:l=134217728;break;default:l=0}return l}function Yr(l){return l&=-l,2<l?8<l?(l&134217727)!==0?32:268435456:8:2}function Tr(){var l=H.p;return l!==0?l:(l=window.event,l===void 0?32:a3(l.type))}function Wt(l,u){var h=H.p;try{return H.p=l,u()}finally{H.p=h}}var qn=Math.random().toString(36).slice(2),fr="__reactFiber$"+qn,Kn="__reactProps$"+qn,Br="__reactContainer$"+qn,_r="__reactEvents$"+qn,yi="__reactListeners$"+qn,Lr="__reactHandles$"+qn,xs="__reactResources$"+qn,za="__reactMarker$"+qn;function Ui(l){delete l[fr],delete l[Kn],delete l[_r],delete l[yi],delete l[Lr]}function zi(l){var u=l[fr];if(u)return u;for(var h=l.parentNode;h;){if(u=h[Br]||h[fr]){if(h=u.alternate,u.child!==null||h!==null&&h.child!==null)for(l=Hw(l);l!==null;){if(h=l[fr])return h;l=Hw(l)}return u}l=h,h=l.parentNode}return null}function xi(l){if(l=l[fr]||l[Br]){var u=l.tag;if(u===5||u===6||u===13||u===26||u===27||u===3)return l}return null}function bi(l){var u=l.tag;if(u===5||u===26||u===27||u===6)return l.stateNode;throw Error(r(33))}function Ar(l){var u=l[xs];return u||(u=l[xs]={hoistableStyles:new Map,hoistableScripts:new Map}),u}function dr(l){l[za]=!0}var Va=new Set,No={};function aa(l,u){qa(l,u),qa(l+"Capture",u)}function qa(l,u){for(No[l]=u,l=0;l<u.length;l++)Va.add(u[l])}var Zs=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),fu={},ts={};function mc(l){return nt.call(ts,l)?!0:nt.call(fu,l)?!1:Zs.test(l)?ts[l]=!0:(fu[l]=!0,!1)}function ns(l,u,h){if(mc(u))if(h===null)l.removeAttribute(u);else{switch(typeof h){case"undefined":case"function":case"symbol":l.removeAttribute(u);return;case"boolean":var y=u.toLowerCase().slice(0,5);if(y!=="data-"&&y!=="aria-"){l.removeAttribute(u);return}}l.setAttribute(u,""+h)}}function oi(l,u,h){if(h===null)l.removeAttribute(u);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(u);return}l.setAttribute(u,""+h)}}function si(l,u,h,y){if(y===null)l.removeAttribute(h);else{switch(typeof y){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(h);return}l.setAttributeNS(u,h,""+y)}}var bs,jl;function Do(l){if(bs===void 0)try{throw Error()}catch(h){var u=h.stack.trim().match(/\n( *(at )?)/);bs=u&&u[1]||"",jl=-1<h.stack.indexOf(`
    at`)?" (<anonymous>)":-1<h.stack.indexOf("@")?"@unknown:0:0":""}return`
`+bs+l+jl}var Js=!1;function el(l,u){if(!l||Js)return"";Js=!0;var h=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var y={DetermineComponentFrameRoot:function(){try{if(u){var Ze=function(){throw Error()};if(Object.defineProperty(Ze.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Ze,[])}catch(Ue){var Fe=Ue}Reflect.construct(l,[],Ze)}else{try{Ze.call()}catch(Ue){Fe=Ue}l.call(Ze.prototype)}}else{try{throw Error()}catch(Ue){Fe=Ue}(Ze=l())&&typeof Ze.catch=="function"&&Ze.catch(function(){})}}catch(Ue){if(Ue&&Fe&&typeof Ue.stack=="string")return[Ue.stack,Fe.stack]}return[null,null]}};y.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var A=Object.getOwnPropertyDescriptor(y.DetermineComponentFrameRoot,"name");A&&A.configurable&&Object.defineProperty(y.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var O=y.DetermineComponentFrameRoot(),Z=O[0],ce=O[1];if(Z&&ce){var xe=Z.split(`
`),Me=ce.split(`
`);for(A=y=0;y<xe.length&&!xe[y].includes("DetermineComponentFrameRoot");)y++;for(;A<Me.length&&!Me[A].includes("DetermineComponentFrameRoot");)A++;if(y===xe.length||A===Me.length)for(y=xe.length-1,A=Me.length-1;1<=y&&0<=A&&xe[y]!==Me[A];)A--;for(;1<=y&&0<=A;y--,A--)if(xe[y]!==Me[A]){if(y!==1||A!==1)do if(y--,A--,0>A||xe[y]!==Me[A]){var Ge=`
`+xe[y].replace(" at new "," at ");return l.displayName&&Ge.includes("<anonymous>")&&(Ge=Ge.replace("<anonymous>",l.displayName)),Ge}while(1<=y&&0<=A);break}}}finally{Js=!1,Error.prepareStackTrace=h}return(h=l?l.displayName||l.name:"")?Do(h):""}function Ha(l){switch(l.tag){case 26:case 27:case 5:return Do(l.type);case 16:return Do("Lazy");case 13:return Do("Suspense");case 19:return Do("SuspenseList");case 0:case 15:return el(l.type,!1);case 11:return el(l.type.render,!1);case 1:return el(l.type,!0);case 31:return Do("Activity");default:return""}}function rs(l){try{var u="";do u+=Ha(l),l=l.return;while(l);return u}catch(h){return`
Error generating stack: `+h.message+`
`+h.stack}}function Gi(l){switch(typeof l){case"bigint":case"boolean":case"number":case"string":case"undefined":return l;case"object":return l;default:return""}}function Pr(l){var u=l.type;return(l=l.nodeName)&&l.toLowerCase()==="input"&&(u==="checkbox"||u==="radio")}function du(l){var u=Pr(l)?"checked":"value",h=Object.getOwnPropertyDescriptor(l.constructor.prototype,u),y=""+l[u];if(!l.hasOwnProperty(u)&&typeof h<"u"&&typeof h.get=="function"&&typeof h.set=="function"){var A=h.get,O=h.set;return Object.defineProperty(l,u,{configurable:!0,get:function(){return A.call(this)},set:function(Z){y=""+Z,O.call(this,Z)}}),Object.defineProperty(l,u,{enumerable:h.enumerable}),{getValue:function(){return y},setValue:function(Z){y=""+Z},stopTracking:function(){l._valueTracker=null,delete l[u]}}}}function ba(l){l._valueTracker||(l._valueTracker=du(l))}function ws(l){if(!l)return!1;var u=l._valueTracker;if(!u)return!0;var h=u.getValue(),y="";return l&&(y=Pr(l)?l.checked?"true":"false":l.value),l=y,l!==h?(u.setValue(l),!0):!1}function _s(l){if(l=l||(typeof document<"u"?document:void 0),typeof l>"u")return null;try{return l.activeElement||l.body}catch{return l.body}}var Wa=/[\n"\\]/g;function bn(l){return l.replace(Wa,function(u){return"\\"+u.charCodeAt(0).toString(16)+" "})}function li(l,u,h,y,A,O,Z,ce){l.name="",Z!=null&&typeof Z!="function"&&typeof Z!="symbol"&&typeof Z!="boolean"?l.type=Z:l.removeAttribute("type"),u!=null?Z==="number"?(u===0&&l.value===""||l.value!=u)&&(l.value=""+Gi(u)):l.value!==""+Gi(u)&&(l.value=""+Gi(u)):Z!=="submit"&&Z!=="reset"||l.removeAttribute("value"),u!=null?Ss(l,Z,Gi(u)):h!=null?Ss(l,Z,Gi(h)):y!=null&&l.removeAttribute("value"),A==null&&O!=null&&(l.defaultChecked=!!O),A!=null&&(l.checked=A&&typeof A!="function"&&typeof A!="symbol"),ce!=null&&typeof ce!="function"&&typeof ce!="symbol"&&typeof ce!="boolean"?l.name=""+Gi(ce):l.removeAttribute("name")}function As(l,u,h,y,A,O,Z,ce){if(O!=null&&typeof O!="function"&&typeof O!="symbol"&&typeof O!="boolean"&&(l.type=O),u!=null||h!=null){if(!(O!=="submit"&&O!=="reset"||u!=null))return;h=h!=null?""+Gi(h):"",u=u!=null?""+Gi(u):h,ce||u===l.value||(l.value=u),l.defaultValue=u}y=y??A,y=typeof y!="function"&&typeof y!="symbol"&&!!y,l.checked=ce?l.checked:!!y,l.defaultChecked=!!y,Z!=null&&typeof Z!="function"&&typeof Z!="symbol"&&typeof Z!="boolean"&&(l.name=Z)}function Ss(l,u,h){u==="number"&&_s(l.ownerDocument)===l||l.defaultValue===""+h||(l.defaultValue=""+h)}function is(l,u,h,y){if(l=l.options,u){u={};for(var A=0;A<h.length;A++)u["$"+h[A]]=!0;for(h=0;h<l.length;h++)A=u.hasOwnProperty("$"+l[h].value),l[h].selected!==A&&(l[h].selected=A),A&&y&&(l[h].defaultSelected=!0)}else{for(h=""+Gi(h),u=null,A=0;A<l.length;A++){if(l[A].value===h){l[A].selected=!0,y&&(l[A].defaultSelected=!0);return}u!==null||l[A].disabled||(u=l[A])}u!==null&&(u.selected=!0)}}function _n(l,u,h){if(u!=null&&(u=""+Gi(u),u!==l.value&&(l.value=u),h==null)){l.defaultValue!==u&&(l.defaultValue=u);return}l.defaultValue=h!=null?""+Gi(h):""}function Es(l,u,h,y){if(u==null){if(y!=null){if(h!=null)throw Error(r(92));if(G(y)){if(1<y.length)throw Error(r(93));y=y[0]}h=y}h==null&&(h=""),u=h}h=Gi(u),l.defaultValue=h,y=l.textContent,y===h&&y!==""&&y!==null&&(l.value=y)}function wa(l,u){if(u){var h=l.firstChild;if(h&&h===l.lastChild&&h.nodeType===3){h.nodeValue=u;return}}l.textContent=u}var Oo=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Cs(l,u,h){var y=u.indexOf("--")===0;h==null||typeof h=="boolean"||h===""?y?l.setProperty(u,""):u==="float"?l.cssFloat="":l[u]="":y?l.setProperty(u,h):typeof h!="number"||h===0||Oo.has(u)?u==="float"?l.cssFloat=h:l[u]=(""+h).trim():l[u]=h+"px"}function vc(l,u,h){if(u!=null&&typeof u!="object")throw Error(r(62));if(l=l.style,h!=null){for(var y in h)!h.hasOwnProperty(y)||u!=null&&u.hasOwnProperty(y)||(y.indexOf("--")===0?l.setProperty(y,""):y==="float"?l.cssFloat="":l[y]="");for(var A in u)y=u[A],u.hasOwnProperty(A)&&h[A]!==y&&Cs(l,A,y)}else for(var O in u)u.hasOwnProperty(O)&&Cs(l,O,u[O])}function yc(l){if(l.indexOf("-")===-1)return!1;switch(l){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Cf=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),xc=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function tl(l){return xc.test(""+l)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":l}var Ii=null;function $a(l){return l=l.target||l.srcElement||window,l.correspondingUseElement&&(l=l.correspondingUseElement),l.nodeType===3?l.parentNode:l}var _a=null,go=null;function bc(l){var u=xi(l);if(u&&(l=u.stateNode)){var h=l[Kn]||null;e:switch(l=u.stateNode,u.type){case"input":if(li(l,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name),u=h.name,h.type==="radio"&&u!=null){for(h=l;h.parentNode;)h=h.parentNode;for(h=h.querySelectorAll('input[name="'+bn(""+u)+'"][type="radio"]'),u=0;u<h.length;u++){var y=h[u];if(y!==l&&y.form===l.form){var A=y[Kn]||null;if(!A)throw Error(r(90));li(y,A.value,A.defaultValue,A.defaultValue,A.checked,A.defaultChecked,A.type,A.name)}}for(u=0;u<h.length;u++)y=h[u],y.form===l.form&&ws(y)}break e;case"textarea":_n(l,h.value,h.defaultValue);break e;case"select":u=h.value,u!=null&&is(l,!!h.multiple,u,!1)}}}var qt=!1;function hu(l,u,h){if(qt)return l(u,h);qt=!0;try{var y=l(u);return y}finally{if(qt=!1,(_a!==null||go!==null)&&(Np(),_a&&(u=_a,l=go,go=_a=null,bc(u),l)))for(u=0;u<l.length;u++)bc(l[u])}}function nl(l,u){var h=l.stateNode;if(h===null)return null;var y=h[Kn]||null;if(y===null)return null;h=y[u];e:switch(u){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(y=!y.disabled)||(l=l.type,y=!(l==="button"||l==="input"||l==="select"||l==="textarea")),l=!y;break e;default:l=!1}if(l)return null;if(h&&typeof h!="function")throw Error(r(231,u,typeof h));return h}var mo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),wi=!1;if(mo)try{var Aa={};Object.defineProperty(Aa,"passive",{get:function(){wi=!0}}),window.addEventListener("test",Aa,Aa),window.removeEventListener("test",Aa,Aa)}catch{wi=!1}var ko=null,Is=null,Ga=null;function rl(){if(Ga)return Ga;var l,u=Is,h=u.length,y,A="value"in ko?ko.value:ko.textContent,O=A.length;for(l=0;l<h&&u[l]===A[l];l++);var Z=h-l;for(y=1;y<=Z&&u[h-y]===A[O-y];y++);return Ga=A.slice(l,1<y?1-y:void 0)}function oa(l){var u=l.keyCode;return"charCode"in l?(l=l.charCode,l===0&&u===13&&(l=13)):l=u,l===10&&(l=13),32<=l||l===13?l:0}function Lo(){return!0}function vo(){return!1}function _i(l){function u(h,y,A,O,Z){this._reactName=h,this._targetInst=A,this.type=y,this.nativeEvent=O,this.target=Z,this.currentTarget=null;for(var ce in l)l.hasOwnProperty(ce)&&(h=l[ce],this[ce]=h?h(O):O[ce]);return this.isDefaultPrevented=(O.defaultPrevented!=null?O.defaultPrevented:O.returnValue===!1)?Lo:vo,this.isPropagationStopped=vo,this}return d(u.prototype,{preventDefault:function(){this.defaultPrevented=!0;var h=this.nativeEvent;h&&(h.preventDefault?h.preventDefault():typeof h.returnValue!="unknown"&&(h.returnValue=!1),this.isDefaultPrevented=Lo)},stopPropagation:function(){var h=this.nativeEvent;h&&(h.stopPropagation?h.stopPropagation():typeof h.cancelBubble!="unknown"&&(h.cancelBubble=!0),this.isPropagationStopped=Lo)},persist:function(){},isPersistent:Lo}),u}var jn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(l){return l.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ts=_i(jn),Rs=d({},jn,{view:0,detail:0}),Po=_i(Rs),Ns,as,Ya,yo=d({},Rs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:bt,button:0,buttons:0,relatedTarget:function(l){return l.relatedTarget===void 0?l.fromElement===l.srcElement?l.toElement:l.fromElement:l.relatedTarget},movementX:function(l){return"movementX"in l?l.movementX:(l!==Ya&&(Ya&&l.type==="mousemove"?(Ns=l.screenX-Ya.screenX,as=l.screenY-Ya.screenY):as=Ns=0,Ya=l),Ns)},movementY:function(l){return"movementY"in l?l.movementY:as}}),sa=_i(yo),wc=d({},yo,{dataTransfer:0}),pu=_i(wc),Sa=d({},Rs,{relatedTarget:0}),Xa=_i(Sa),Bl=d({},jn,{animationName:0,elapsedTime:0,pseudoElement:0}),Mo=_i(Bl),_c=d({},jn,{clipboardData:function(l){return"clipboardData"in l?l.clipboardData:window.clipboardData}}),B=_i(_c),ne=d({},jn,{data:0}),ve=_i(ne),we={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Te={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},$e={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ke(l){var u=this.nativeEvent;return u.getModifierState?u.getModifierState(l):(l=$e[l])?!!u[l]:!1}function bt(){return Ke}var Nt=d({},Rs,{key:function(l){if(l.key){var u=we[l.key]||l.key;if(u!=="Unidentified")return u}return l.type==="keypress"?(l=oa(l),l===13?"Enter":String.fromCharCode(l)):l.type==="keydown"||l.type==="keyup"?Te[l.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:bt,charCode:function(l){return l.type==="keypress"?oa(l):0},keyCode:function(l){return l.type==="keydown"||l.type==="keyup"?l.keyCode:0},which:function(l){return l.type==="keypress"?oa(l):l.type==="keydown"||l.type==="keyup"?l.keyCode:0}}),Gt=_i(Nt),on=d({},yo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),An=_i(on),Qn=d({},Rs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:bt}),Fr=_i(Qn),ir=d({},jn,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xr=_i(ir),Ur=d({},yo,{deltaX:function(l){return"deltaX"in l?l.deltaX:"wheelDeltaX"in l?-l.wheelDeltaX:0},deltaY:function(l){return"deltaY"in l?l.deltaY:"wheelDeltaY"in l?-l.wheelDeltaY:"wheelDelta"in l?-l.wheelDelta:0},deltaZ:0,deltaMode:0}),Kr=_i(Ur),zr=d({},jn,{newState:0,oldState:0}),Ka=_i(zr),jo=[9,13,27,32],Qa=mo&&"CompositionEvent"in window,w=null;mo&&"documentMode"in document&&(w=document.documentMode);var q=mo&&"TextEvent"in window&&!w,K=mo&&(!Qa||w&&8<w&&11>=w),fe=" ",Ne=!1;function Be(l,u){switch(l){case"keyup":return jo.indexOf(u.keyCode)!==-1;case"keydown":return u.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function st(l){return l=l.detail,typeof l=="object"&&"data"in l?l.data:null}var vn=!1;function Vr(l,u){switch(l){case"compositionend":return st(u);case"keypress":return u.which!==32?null:(Ne=!0,fe);case"textInput":return l=u.data,l===fe&&Ne?null:l;default:return null}}function wn(l,u){if(vn)return l==="compositionend"||!Qa&&Be(l,u)?(l=rl(),Ga=Is=ko=null,vn=!1,l):null;switch(l){case"paste":return null;case"keypress":if(!(u.ctrlKey||u.altKey||u.metaKey)||u.ctrlKey&&u.altKey){if(u.char&&1<u.char.length)return u.char;if(u.which)return String.fromCharCode(u.which)}return null;case"compositionend":return K&&u.locale!=="ko"?null:u.data;default:return null}}var Hn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function hr(l){var u=l&&l.nodeName&&l.nodeName.toLowerCase();return u==="input"?!!Hn[l.type]:u==="textarea"}function Za(l,u,h,y){_a?go?go.push(y):go=[y]:_a=y,u=Mp(u,"onChange"),0<u.length&&(h=new Ts("onChange","change",null,h,y),l.push({event:h,listeners:u}))}var Ai=null,ci=null;function os(l){Lw(l,0)}function Fl(l){var u=bi(l);if(ws(u))return l}function gu(l,u){if(l==="change")return u}var il=!1;if(mo){var al;if(mo){var Ea="oninput"in document;if(!Ea){var Ja=document.createElement("div");Ja.setAttribute("oninput","return;"),Ea=typeof Ja.oninput=="function"}al=Ea}else al=!1;il=al&&(!document.documentMode||9<document.documentMode)}function ol(){Ai&&(Ai.detachEvent("onpropertychange",Ds),ci=Ai=null)}function Ds(l){if(l.propertyName==="value"&&Fl(ci)){var u=[];Za(u,ci,l,$a(l)),hu(os,u)}}function Ul(l,u,h){l==="focusin"?(ol(),Ai=u,ci=h,Ai.attachEvent("onpropertychange",Ds)):l==="focusout"&&ol()}function If(l){if(l==="selectionchange"||l==="keyup"||l==="keydown")return Fl(ci)}function mu(l,u){if(l==="click")return Fl(u)}function ui(l,u){if(l==="input"||l==="change")return Fl(u)}function Ed(l,u){return l===u&&(l!==0||1/l===1/u)||l!==l&&u!==u}var Qr=typeof Object.is=="function"?Object.is:Ed;function eo(l,u){if(Qr(l,u))return!0;if(typeof l!="object"||l===null||typeof u!="object"||u===null)return!1;var h=Object.keys(l),y=Object.keys(u);if(h.length!==y.length)return!1;for(y=0;y<h.length;y++){var A=h[y];if(!nt.call(u,A)||!Qr(l[A],u[A]))return!1}return!0}function vu(l){for(;l&&l.firstChild;)l=l.firstChild;return l}function yu(l,u){var h=vu(l);l=0;for(var y;h;){if(h.nodeType===3){if(y=l+h.textContent.length,l<=u&&y>=u)return{node:h,offset:u-l};l=y}e:{for(;h;){if(h.nextSibling){h=h.nextSibling;break e}h=h.parentNode}h=void 0}h=vu(h)}}function xu(l,u){return l&&u?l===u?!0:l&&l.nodeType===3?!1:u&&u.nodeType===3?xu(l,u.parentNode):"contains"in l?l.contains(u):l.compareDocumentPosition?!!(l.compareDocumentPosition(u)&16):!1:!1}function bu(l){l=l!=null&&l.ownerDocument!=null&&l.ownerDocument.defaultView!=null?l.ownerDocument.defaultView:window;for(var u=_s(l.document);u instanceof l.HTMLIFrameElement;){try{var h=typeof u.contentWindow.location.href=="string"}catch{h=!1}if(h)l=u.contentWindow;else break;u=_s(l.document)}return u}function Os(l){var u=l&&l.nodeName&&l.nodeName.toLowerCase();return u&&(u==="input"&&(l.type==="text"||l.type==="search"||l.type==="tel"||l.type==="url"||l.type==="password")||u==="textarea"||l.contentEditable==="true")}var zl=mo&&"documentMode"in document&&11>=document.documentMode,xo=null,sl=null,Bo=null,ll=!1;function bo(l,u,h){var y=h.window===h?h.document:h.nodeType===9?h:h.ownerDocument;ll||xo==null||xo!==_s(y)||(y=xo,"selectionStart"in y&&Os(y)?y={start:y.selectionStart,end:y.selectionEnd}:(y=(y.ownerDocument&&y.ownerDocument.defaultView||window).getSelection(),y={anchorNode:y.anchorNode,anchorOffset:y.anchorOffset,focusNode:y.focusNode,focusOffset:y.focusOffset}),Bo&&eo(Bo,y)||(Bo=y,y=Mp(sl,"onSelect"),0<y.length&&(u=new Ts("onSelect","select",null,u,h),l.push({event:u,listeners:y}),u.target=xo)))}function la(l,u){var h={};return h[l.toLowerCase()]=u.toLowerCase(),h["Webkit"+l]="webkit"+u,h["Moz"+l]="moz"+u,h}var On={animationend:la("Animation","AnimationEnd"),animationiteration:la("Animation","AnimationIteration"),animationstart:la("Animation","AnimationStart"),transitionrun:la("Transition","TransitionRun"),transitionstart:la("Transition","TransitionStart"),transitioncancel:la("Transition","TransitionCancel"),transitionend:la("Transition","TransitionEnd")},ar={},Zr={};mo&&(Zr=document.createElement("div").style,"AnimationEvent"in window||(delete On.animationend.animation,delete On.animationiteration.animation,delete On.animationstart.animation),"TransitionEvent"in window||delete On.transitionend.transition);function Rr(l){if(ar[l])return ar[l];if(!On[l])return l;var u=On[l],h;for(h in u)if(u.hasOwnProperty(h)&&h in Zr)return ar[l]=u[h];return l}var ks=Rr("animationend"),wu=Rr("animationiteration"),Ac=Rr("animationstart"),Cd=Rr("transitionrun"),Z1=Rr("transitionstart"),J1=Rr("transitioncancel"),Xh=Rr("transitionend"),Kh=new Map,Id="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Id.push("scrollEnd");function Fo(l,u){Kh.set(l,u),aa(u,[l])}var _u=new WeakMap;function wo(l,u){if(typeof l=="object"&&l!==null){var h=_u.get(l);return h!==void 0?h:(u={value:l,source:u,stack:rs(u)},_u.set(l,u),u)}return{value:l,source:u,stack:rs(u)}}var _o=[],Sc=0,Td=0;function Tf(){for(var l=Sc,u=Td=Sc=0;u<l;){var h=_o[u];_o[u++]=null;var y=_o[u];_o[u++]=null;var A=_o[u];_o[u++]=null;var O=_o[u];if(_o[u++]=null,y!==null&&A!==null){var Z=y.pending;Z===null?A.next=A:(A.next=Z.next,Z.next=A),y.pending=A}O!==0&&Nd(h,A,O)}}function Rf(l,u,h,y){_o[Sc++]=l,_o[Sc++]=u,_o[Sc++]=h,_o[Sc++]=y,Td|=y,l.lanes|=y,l=l.alternate,l!==null&&(l.lanes|=y)}function Rd(l,u,h,y){return Rf(l,u,h,y),Cc(l)}function Ec(l,u){return Rf(l,null,null,u),Cc(l)}function Nd(l,u,h){l.lanes|=h;var y=l.alternate;y!==null&&(y.lanes|=h);for(var A=!1,O=l.return;O!==null;)O.childLanes|=h,y=O.alternate,y!==null&&(y.childLanes|=h),O.tag===22&&(l=O.stateNode,l===null||l._visibility&1||(A=!0)),l=O,O=O.return;return l.tag===3?(O=l.stateNode,A&&u!==null&&(A=31-ut(h),l=O.hiddenUpdates,y=l[A],y===null?l[A]=[u]:y.push(u),u.lane=h|536870912),O):null}function Cc(l){if(50<w0)throw w0=0,X2=null,Error(r(185));for(var u=l.return;u!==null;)l=u,u=l.return;return l.tag===3?l.stateNode:null}var Vi={};function Uo(l,u,h,y){this.tag=l,this.key=h,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=u,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=y,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ca(l,u,h,y){return new Uo(l,u,h,y)}function Au(l){return l=l.prototype,!(!l||!l.isReactComponent)}function Ls(l,u){var h=l.alternate;return h===null?(h=ca(l.tag,u,l.key,l.mode),h.elementType=l.elementType,h.type=l.type,h.stateNode=l.stateNode,h.alternate=l,l.alternate=h):(h.pendingProps=u,h.type=l.type,h.flags=0,h.subtreeFlags=0,h.deletions=null),h.flags=l.flags&65011712,h.childLanes=l.childLanes,h.lanes=l.lanes,h.child=l.child,h.memoizedProps=l.memoizedProps,h.memoizedState=l.memoizedState,h.updateQueue=l.updateQueue,u=l.dependencies,h.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext},h.sibling=l.sibling,h.index=l.index,h.ref=l.ref,h.refCleanup=l.refCleanup,h}function Nf(l,u){l.flags&=65011714;var h=l.alternate;return h===null?(l.childLanes=0,l.lanes=u,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=h.childLanes,l.lanes=h.lanes,l.child=h.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=h.memoizedProps,l.memoizedState=h.memoizedState,l.updateQueue=h.updateQueue,l.type=h.type,u=h.dependencies,l.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext}),l}function Ic(l,u,h,y,A,O){var Z=0;if(y=l,typeof l=="function")Au(l)&&(Z=1);else if(typeof l=="string")Z=GT(l,h,Q.current)?26:l==="html"||l==="head"||l==="body"?27:5;else e:switch(l){case T:return l=ca(31,h,u,A),l.elementType=T,l.lanes=O,l;case x:return cl(h.children,A,O,u);case _:Z=8,A|=24;break;case C:return l=ca(12,h,u,A|2),l.elementType=C,l.lanes=O,l;case Y:return l=ca(13,h,u,A),l.elementType=Y,l.lanes=O,l;case z:return l=ca(19,h,u,A),l.elementType=z,l.lanes=O,l;default:if(typeof l=="object"&&l!==null)switch(l.$$typeof){case S:case M:Z=10;break e;case k:Z=9;break e;case P:Z=11;break e;case F:Z=14;break e;case I:Z=16,y=null;break e}Z=29,h=Error(r(130,l===null?"null":typeof l,"")),y=null}return u=ca(Z,h,u,A),u.elementType=l,u.type=y,u.lanes=O,u}function cl(l,u,h,y){return l=ca(7,l,y,u),l.lanes=h,l}function Dd(l,u,h){return l=ca(6,l,null,u),l.lanes=h,l}function Df(l,u,h){return u=ca(4,l.children!==null?l.children:[],l.key,u),u.lanes=h,u.stateNode={containerInfo:l.containerInfo,pendingChildren:null,implementation:l.implementation},u}var Vl=[],ul=0,Su=null,Od=0,zo=[],Ao=0,Tc=null,fl=1,dl="";function Rc(l,u){Vl[ul++]=Od,Vl[ul++]=Su,Su=l,Od=u}function ep(l,u,h){zo[Ao++]=fl,zo[Ao++]=dl,zo[Ao++]=Tc,Tc=l;var y=fl;l=dl;var A=32-ut(y)-1;y&=~(1<<A),h+=1;var O=32-ut(u)+A;if(30<O){var Z=A-A%5;O=(y&(1<<Z)-1).toString(32),y>>=Z,A-=Z,fl=1<<32-ut(u)+A|h<<A|y,dl=O+l}else fl=1<<O|h<<A|y,dl=l}function Of(l){l.return!==null&&(Rc(l,1),ep(l,1,0))}function kf(l){for(;l===Su;)Su=Vl[--ul],Vl[ul]=null,Od=Vl[--ul],Vl[ul]=null;for(;l===Tc;)Tc=zo[--Ao],zo[Ao]=null,dl=zo[--Ao],zo[Ao]=null,fl=zo[--Ao],zo[Ao]=null}var Ti=null,Jr=null,Zn=!1,ql=null,Ps=!1,Qh=Error(r(519));function Nc(l){var u=Error(r(418,""));throw Eu(wo(u,l)),Qh}function tp(l){var u=l.stateNode,h=l.type,y=l.memoizedProps;switch(u[fr]=l,u[Kn]=y,h){case"dialog":Ln("cancel",u),Ln("close",u);break;case"iframe":case"object":case"embed":Ln("load",u);break;case"video":case"audio":for(h=0;h<A0.length;h++)Ln(A0[h],u);break;case"source":Ln("error",u);break;case"img":case"image":case"link":Ln("error",u),Ln("load",u);break;case"details":Ln("toggle",u);break;case"input":Ln("invalid",u),As(u,y.value,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name,!0),ba(u);break;case"select":Ln("invalid",u);break;case"textarea":Ln("invalid",u),Es(u,y.value,y.defaultValue,y.children),ba(u)}h=y.children,typeof h!="string"&&typeof h!="number"&&typeof h!="bigint"||u.textContent===""+h||y.suppressHydrationWarning===!0||Bw(u.textContent,h)?(y.popover!=null&&(Ln("beforetoggle",u),Ln("toggle",u)),y.onScroll!=null&&Ln("scroll",u),y.onScrollEnd!=null&&Ln("scrollend",u),y.onClick!=null&&(u.onclick=jp),u=!0):u=!1,u||Nc(l)}function hl(l){for(Ti=l.return;Ti;)switch(Ti.tag){case 5:case 13:Ps=!1;return;case 27:case 3:Ps=!0;return;default:Ti=Ti.return}}function Ca(l){if(l!==Ti)return!1;if(!Zn)return hl(l),Zn=!0,!1;var u=l.tag,h;if((h=u!==3&&u!==27)&&((h=u===5)&&(h=l.type,h=!(h!=="form"&&h!=="button")||fv(l.type,l.memoizedProps)),h=!h),h&&Jr&&Nc(l),hl(l),u===13){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(r(317));e:{for(l=l.nextSibling,u=0;l;){if(l.nodeType===8)if(h=l.data,h==="/$"){if(u===0){Jr=wl(l.nextSibling);break e}u--}else h!=="$"&&h!=="$!"&&h!=="$?"||u++;l=l.nextSibling}Jr=null}}else u===27?(u=Jr,zu(l.type)?(l=gv,gv=null,Jr=l):Jr=u):Jr=Ti?wl(l.stateNode.nextSibling):null;return!0}function So(){Jr=Ti=null,Zn=!1}function np(){var l=ql;return l!==null&&(qo===null?qo=l:qo.push.apply(qo,l),ql=null),l}function Eu(l){ql===null?ql=[l]:ql.push(l)}var Ms=ie(null),qi=null,pl=null;function Hl(l,u,h){W(Ms,u._currentValue),u._currentValue=h}function js(l){l._currentValue=Ms.current,$(Ms)}function kd(l,u,h){for(;l!==null;){var y=l.alternate;if((l.childLanes&u)!==u?(l.childLanes|=u,y!==null&&(y.childLanes|=u)):y!==null&&(y.childLanes&u)!==u&&(y.childLanes|=u),l===h)break;l=l.return}}function Ld(l,u,h,y){var A=l.child;for(A!==null&&(A.return=l);A!==null;){var O=A.dependencies;if(O!==null){var Z=A.child;O=O.firstContext;e:for(;O!==null;){var ce=O;O=A;for(var xe=0;xe<u.length;xe++)if(ce.context===u[xe]){O.lanes|=h,ce=O.alternate,ce!==null&&(ce.lanes|=h),kd(O.return,h,l),y||(Z=null);break e}O=ce.next}}else if(A.tag===18){if(Z=A.return,Z===null)throw Error(r(341));Z.lanes|=h,O=Z.alternate,O!==null&&(O.lanes|=h),kd(Z,h,l),Z=null}else Z=A.child;if(Z!==null)Z.return=A;else for(Z=A;Z!==null;){if(Z===l){Z=null;break}if(A=Z.sibling,A!==null){A.return=Z.return,Z=A;break}Z=Z.return}A=Z}}function Cu(l,u,h,y){l=null;for(var A=u,O=!1;A!==null;){if(!O){if((A.flags&524288)!==0)O=!0;else if((A.flags&262144)!==0)break}if(A.tag===10){var Z=A.alternate;if(Z===null)throw Error(r(387));if(Z=Z.memoizedProps,Z!==null){var ce=A.type;Qr(A.pendingProps.value,Z.value)||(l!==null?l.push(ce):l=[ce])}}else if(A===be.current){if(Z=A.alternate,Z===null)throw Error(r(387));Z.memoizedState.memoizedState!==A.memoizedState.memoizedState&&(l!==null?l.push(R0):l=[R0])}A=A.return}l!==null&&Ld(u,l,h,y),u.flags|=262144}function Pd(l){for(l=l.firstContext;l!==null;){if(!Qr(l.context._currentValue,l.memoizedValue))return!0;l=l.next}return!1}function Bs(l){qi=l,pl=null,l=l.dependencies,l!==null&&(l.firstContext=null)}function Ri(l){return Md(qi,l)}function Wl(l,u){return qi===null&&Bs(l),Md(l,u)}function Md(l,u){var h=u._currentValue;if(u={context:u,memoizedValue:h,next:null},pl===null){if(l===null)throw Error(r(308));pl=u,l.dependencies={lanes:0,firstContext:u},l.flags|=524288}else pl=pl.next=u;return h}var b2=typeof AbortController<"u"?AbortController:function(){var l=[],u=this.signal={aborted:!1,addEventListener:function(h,y){l.push(y)}};this.abort=function(){u.aborted=!0,l.forEach(function(h){return h()})}},rp=n.unstable_scheduleCallback,w2=n.unstable_NormalPriority,Ni={$$typeof:M,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Zh(){return{controller:new b2,data:new Map,refCount:0}}function Lf(l){l.refCount--,l.refCount===0&&rp(w2,function(){l.controller.abort()})}var Pf=null,Jh=0,Dc=0,gl=null;function _2(l,u){if(Pf===null){var h=Pf=[];Jh=0,Dc=nv(),gl={status:"pending",value:void 0,then:function(y){h.push(y)}}}return Jh++,u.then(ip,ip),u}function ip(){if(--Jh===0&&Pf!==null){gl!==null&&(gl.status="fulfilled");var l=Pf;Pf=null,Dc=0,gl=null;for(var u=0;u<l.length;u++)(0,l[u])()}}function ap(l,u){var h=[],y={status:"pending",value:null,reason:null,then:function(A){h.push(A)}};return l.then(function(){y.status="fulfilled",y.value=u;for(var A=0;A<h.length;A++)(0,h[A])(u)},function(A){for(y.status="rejected",y.reason=A,A=0;A<h.length;A++)(0,h[A])(void 0)}),y}var b=U.S;U.S=function(l,u){typeof u=="object"&&u!==null&&typeof u.then=="function"&&_2(l,u),b!==null&&b(l,u)};var E=ie(null);function V(){var l=E.current;return l!==null?l:Mr.pooledCache}function X(l,u){u===null?W(E,E.current):W(E,u.pool)}function re(){var l=V();return l===null?null:{parent:Ni._currentValue,pool:l}}var ae=Error(r(460)),oe=Error(r(474)),ue=Error(r(542)),pe={then:function(){}};function ye(l){return l=l.status,l==="fulfilled"||l==="rejected"}function Ae(){}function Pe(l,u,h){switch(h=l[h],h===void 0?l.push(u):h!==u&&(u.then(Ae,Ae),u=h),u.status){case"fulfilled":return u.value;case"rejected":throw l=u.reason,De(l),l;default:if(typeof u.status=="string")u.then(Ae,Ae);else{if(l=Mr,l!==null&&100<l.shellSuspendCounter)throw Error(r(482));l=u,l.status="pending",l.then(function(y){if(u.status==="pending"){var A=u;A.status="fulfilled",A.value=y}},function(y){if(u.status==="pending"){var A=u;A.status="rejected",A.reason=y}})}switch(u.status){case"fulfilled":return u.value;case"rejected":throw l=u.reason,De(l),l}throw me=u,ae}}var me=null;function Ce(){if(me===null)throw Error(r(459));var l=me;return me=null,l}function De(l){if(l===ae||l===ue)throw Error(r(483))}var ze=!1;function Le(l){l.updateQueue={baseState:l.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function He(l,u){l=l.updateQueue,u.updateQueue===l&&(u.updateQueue={baseState:l.baseState,firstBaseUpdate:l.firstBaseUpdate,lastBaseUpdate:l.lastBaseUpdate,shared:l.shared,callbacks:null})}function qe(l){return{lane:l,tag:0,payload:null,callback:null,next:null}}function tt(l,u,h){var y=l.updateQueue;if(y===null)return null;if(y=y.shared,(gr&2)!==0){var A=y.pending;return A===null?u.next=u:(u.next=A.next,A.next=u),y.pending=u,u=Cc(l),Nd(l,null,h),u}return Rf(l,y,u,h),Cc(l)}function Qe(l,u,h){if(u=u.updateQueue,u!==null&&(u=u.shared,(h&4194048)!==0)){var y=u.lanes;y&=l.pendingLanes,h|=y,u.lanes=h,$i(l,h)}}function Pt(l,u){var h=l.updateQueue,y=l.alternate;if(y!==null&&(y=y.updateQueue,h===y)){var A=null,O=null;if(h=h.firstBaseUpdate,h!==null){do{var Z={lane:h.lane,tag:h.tag,payload:h.payload,callback:null,next:null};O===null?A=O=Z:O=O.next=Z,h=h.next}while(h!==null);O===null?A=O=u:O=O.next=u}else A=O=u;h={baseState:y.baseState,firstBaseUpdate:A,lastBaseUpdate:O,shared:y.shared,callbacks:y.callbacks},l.updateQueue=h;return}l=h.lastBaseUpdate,l===null?h.firstBaseUpdate=u:l.next=u,h.lastBaseUpdate=u}var At=!1;function sn(){if(At){var l=gl;if(l!==null)throw l}}function Ct(l,u,h,y){At=!1;var A=l.updateQueue;ze=!1;var O=A.firstBaseUpdate,Z=A.lastBaseUpdate,ce=A.shared.pending;if(ce!==null){A.shared.pending=null;var xe=ce,Me=xe.next;xe.next=null,Z===null?O=Me:Z.next=Me,Z=xe;var Ge=l.alternate;Ge!==null&&(Ge=Ge.updateQueue,ce=Ge.lastBaseUpdate,ce!==Z&&(ce===null?Ge.firstBaseUpdate=Me:ce.next=Me,Ge.lastBaseUpdate=xe))}if(O!==null){var Ze=A.baseState;Z=0,Ge=Me=xe=null,ce=O;do{var Fe=ce.lane&-536870913,Ue=Fe!==ce.lane;if(Ue?($n&Fe)===Fe:(y&Fe)===Fe){Fe!==0&&Fe===Dc&&(At=!0),Ge!==null&&(Ge=Ge.next={lane:0,tag:ce.tag,payload:ce.payload,callback:null,next:null});e:{var an=l,Zt=ce;Fe=u;var Cr=h;switch(Zt.tag){case 1:if(an=Zt.payload,typeof an=="function"){Ze=an.call(Cr,Ze,Fe);break e}Ze=an;break e;case 3:an.flags=an.flags&-65537|128;case 0:if(an=Zt.payload,Fe=typeof an=="function"?an.call(Cr,Ze,Fe):an,Fe==null)break e;Ze=d({},Ze,Fe);break e;case 2:ze=!0}}Fe=ce.callback,Fe!==null&&(l.flags|=64,Ue&&(l.flags|=8192),Ue=A.callbacks,Ue===null?A.callbacks=[Fe]:Ue.push(Fe))}else Ue={lane:Fe,tag:ce.tag,payload:ce.payload,callback:ce.callback,next:null},Ge===null?(Me=Ge=Ue,xe=Ze):Ge=Ge.next=Ue,Z|=Fe;if(ce=ce.next,ce===null){if(ce=A.shared.pending,ce===null)break;Ue=ce,ce=Ue.next,Ue.next=null,A.lastBaseUpdate=Ue,A.shared.pending=null}}while(!0);Ge===null&&(xe=Ze),A.baseState=xe,A.firstBaseUpdate=Me,A.lastBaseUpdate=Ge,O===null&&(A.shared.lanes=0),ju|=Z,l.lanes=Z,l.memoizedState=Ze}}function In(l,u){if(typeof l!="function")throw Error(r(191,l));l.call(u)}function Si(l,u){var h=l.callbacks;if(h!==null)for(l.callbacks=null,l=0;l<h.length;l++)In(h[l],u)}var rn=ie(null),It=ie(0);function pt(l,u){l=Fc,W(It,l),W(rn,u),Fc=l|u.baseLanes}function qr(){W(It,Fc),W(rn,rn.current)}function ln(){Fc=It.current,$(rn),$(It)}var gn=0,Rt=null,un=null,Bn=null,Nr=!1,fi=!1,di=!1,ei=0,Sn=0,Fn=null,ti=0;function Qt(){throw Error(r(321))}function Di(l,u){if(u===null)return!1;for(var h=0;h<u.length&&h<l.length;h++)if(!Qr(l[h],u[h]))return!1;return!0}function Eo(l,u,h,y,A,O){return gn=O,Rt=u,u.memoizedState=null,u.updateQueue=null,u.lanes=0,U.H=l===null||l.memoizedState===null?yb:xb,di=!1,O=h(y,A),di=!1,fi&&(O=Ia(u,h,y,A)),ni(l),O}function ni(l){U.H=vp;var u=un!==null&&un.next!==null;if(gn=0,Bn=un=Rt=null,Nr=!1,Sn=0,Fn=null,u)throw Error(r(300));l===null||fa||(l=l.dependencies,l!==null&&Pd(l)&&(fa=!0))}function Ia(l,u,h,y){Rt=l;var A=0;do{if(fi&&(Fn=null),Sn=0,fi=!1,25<=A)throw Error(r(301));if(A+=1,Bn=un=null,l.updateQueue!=null){var O=l.updateQueue;O.lastEffect=null,O.events=null,O.stores=null,O.memoCache!=null&&(O.memoCache.index=0)}U.H=iT,O=u(h,y)}while(fi);return O}function pr(){var l=U.H,u=l.useState()[0];return u=typeof u.then=="function"?Xi(u):u,l=l.useState()[0],(un!==null?un.memoizedState:null)!==l&&(Rt.flags|=1024),u}function hi(){var l=ei!==0;return ei=0,l}function Ta(l,u,h){u.updateQueue=l.updateQueue,u.flags&=-2053,l.lanes&=~h}function Yi(l){if(Nr){for(l=l.memoizedState;l!==null;){var u=l.queue;u!==null&&(u.pending=null),l=l.next}Nr=!1}gn=0,Bn=un=Rt=null,fi=!1,Sn=ei=0,Fn=null}function Sr(){var l={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Bn===null?Rt.memoizedState=Bn=l:Bn=Bn.next=l,Bn}function Wn(){if(un===null){var l=Rt.alternate;l=l!==null?l.memoizedState:null}else l=un.next;var u=Bn===null?Rt.memoizedState:Bn.next;if(u!==null)Bn=u,un=l;else{if(l===null)throw Rt.alternate===null?Error(r(467)):Error(r(310));un=l,l={memoizedState:un.memoizedState,baseState:un.baseState,baseQueue:un.baseQueue,queue:un.queue,next:null},Bn===null?Rt.memoizedState=Bn=l:Bn=Bn.next=l}return Bn}function ua(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Xi(l){var u=Sn;return Sn+=1,Fn===null&&(Fn=[]),l=Pe(Fn,l,u),u=Rt,(Bn===null?u.memoizedState:Bn.next)===null&&(u=u.alternate,U.H=u===null||u.memoizedState===null?yb:xb),l}function or(l){if(l!==null&&typeof l=="object"){if(typeof l.then=="function")return Xi(l);if(l.$$typeof===M)return Ri(l)}throw Error(r(438,String(l)))}function Ra(l){var u=null,h=Rt.updateQueue;if(h!==null&&(u=h.memoCache),u==null){var y=Rt.alternate;y!==null&&(y=y.updateQueue,y!==null&&(y=y.memoCache,y!=null&&(u={data:y.data.map(function(A){return A.slice()}),index:0})))}if(u==null&&(u={data:[],index:0}),h===null&&(h=ua(),Rt.updateQueue=h),h.memoCache=u,h=u.data[u.index],h===void 0)for(h=u.data[u.index]=Array(l),y=0;y<l;y++)h[y]=j;return u.index++,h}function Oi(l,u){return typeof u=="function"?u(l):u}function Fs(l){var u=Wn();return ss(u,un,l)}function ss(l,u,h){var y=l.queue;if(y===null)throw Error(r(311));y.lastRenderedReducer=h;var A=l.baseQueue,O=y.pending;if(O!==null){if(A!==null){var Z=A.next;A.next=O.next,O.next=Z}u.baseQueue=A=O,y.pending=null}if(O=l.baseState,A===null)l.memoizedState=O;else{u=A.next;var ce=Z=null,xe=null,Me=u,Ge=!1;do{var Ze=Me.lane&-536870913;if(Ze!==Me.lane?($n&Ze)===Ze:(gn&Ze)===Ze){var Fe=Me.revertLane;if(Fe===0)xe!==null&&(xe=xe.next={lane:0,revertLane:0,action:Me.action,hasEagerState:Me.hasEagerState,eagerState:Me.eagerState,next:null}),Ze===Dc&&(Ge=!0);else if((gn&Fe)===Fe){Me=Me.next,Fe===Dc&&(Ge=!0);continue}else Ze={lane:0,revertLane:Me.revertLane,action:Me.action,hasEagerState:Me.hasEagerState,eagerState:Me.eagerState,next:null},xe===null?(ce=xe=Ze,Z=O):xe=xe.next=Ze,Rt.lanes|=Fe,ju|=Fe;Ze=Me.action,di&&h(O,Ze),O=Me.hasEagerState?Me.eagerState:h(O,Ze)}else Fe={lane:Ze,revertLane:Me.revertLane,action:Me.action,hasEagerState:Me.hasEagerState,eagerState:Me.eagerState,next:null},xe===null?(ce=xe=Fe,Z=O):xe=xe.next=Fe,Rt.lanes|=Ze,ju|=Ze;Me=Me.next}while(Me!==null&&Me!==u);if(xe===null?Z=O:xe.next=ce,!Qr(O,l.memoizedState)&&(fa=!0,Ge&&(h=gl,h!==null)))throw h;l.memoizedState=O,l.baseState=Z,l.baseQueue=xe,y.lastRenderedState=O}return A===null&&(y.lanes=0),[l.memoizedState,y.dispatch]}function ki(l){var u=Wn(),h=u.queue;if(h===null)throw Error(r(311));h.lastRenderedReducer=l;var y=h.dispatch,A=h.pending,O=u.memoizedState;if(A!==null){h.pending=null;var Z=A=A.next;do O=l(O,Z.action),Z=Z.next;while(Z!==A);Qr(O,u.memoizedState)||(fa=!0),u.memoizedState=O,u.baseQueue===null&&(u.baseState=O),h.lastRenderedState=O}return[O,y]}function Mf(l,u,h){var y=Rt,A=Wn(),O=Zn;if(O){if(h===void 0)throw Error(r(407));h=h()}else h=u();var Z=!Qr((un||A).memoizedState,h);Z&&(A.memoizedState=h,fa=!0),A=A.queue;var ce=Iu.bind(null,y,A,l);if(Nu(2048,8,ce,[l]),A.getSnapshot!==u||Z||Bn!==null&&Bn.memoizedState.tag&1){if(y.flags|=2048,vl(9,Uf(),jf.bind(null,y,A,h,u),null),Mr===null)throw Error(r(349));O||(gn&124)!==0||jd(y,u,h)}return h}function jd(l,u,h){l.flags|=16384,l={getSnapshot:u,value:h},u=Rt.updateQueue,u===null?(u=ua(),Rt.updateQueue=u,u.stores=[l]):(h=u.stores,h===null?u.stores=[l]:h.push(l))}function jf(l,u,h,y){u.value=h,u.getSnapshot=y,op(u)&&sp(l)}function Iu(l,u,h){return h(function(){op(u)&&sp(l)})}function op(l){var u=l.getSnapshot;l=l.value;try{var h=u();return!Qr(l,h)}catch{return!0}}function sp(l){var u=Ec(l,2);u!==null&&hs(u,l,2)}function Bf(l){var u=Sr();if(typeof l=="function"){var h=l;if(l=h(),di){_t(!0);try{h()}finally{_t(!1)}}}return u.memoizedState=u.baseState=l,u.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Oi,lastRenderedState:l},u}function ml(l,u,h,y){return l.baseState=h,ss(l,un,typeof y=="function"?y:Oi)}function A2(l,u,h,y,A){if(mp(l))throw Error(r(485));if(l=u.action,l!==null){var O={payload:A,action:l,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(Z){O.listeners.push(Z)}};U.T!==null?h(!0):O.isTransition=!1,y(O),h=u.pending,h===null?(O.next=u.pending=O,lp(u,O)):(O.next=h.next,u.pending=h.next=O)}}function lp(l,u){var h=u.action,y=u.payload,A=l.state;if(u.isTransition){var O=U.T,Z={};U.T=Z;try{var ce=h(A,y),xe=U.S;xe!==null&&xe(Z,ce),cp(l,u,ce)}catch(Me){Tu(l,u,Me)}finally{U.T=O}}else try{O=h(A,y),cp(l,u,O)}catch(Me){Tu(l,u,Me)}}function cp(l,u,h){h!==null&&typeof h=="object"&&typeof h.then=="function"?h.then(function(y){e0(l,u,y)},function(y){return Tu(l,u,y)}):e0(l,u,h)}function e0(l,u,h){u.status="fulfilled",u.value=h,t0(u),l.state=h,u=l.pending,u!==null&&(h=u.next,h===u?l.pending=null:(h=h.next,u.next=h,lp(l,h)))}function Tu(l,u,h){var y=l.pending;if(l.pending=null,y!==null){y=y.next;do u.status="rejected",u.reason=h,t0(u),u=u.next;while(u!==y)}l.action=null}function t0(l){l=l.listeners;for(var u=0;u<l.length;u++)(0,l[u])()}function n0(l,u){return u}function Ff(l,u){if(Zn){var h=Mr.formState;if(h!==null){e:{var y=Rt;if(Zn){if(Jr){t:{for(var A=Jr,O=Ps;A.nodeType!==8;){if(!O){A=null;break t}if(A=wl(A.nextSibling),A===null){A=null;break t}}O=A.data,A=O==="F!"||O==="F"?A:null}if(A){Jr=wl(A.nextSibling),y=A.data==="F!";break e}}Nc(y)}y=!1}y&&(u=h[0])}}return h=Sr(),h.memoizedState=h.baseState=u,y={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n0,lastRenderedState:u},h.queue=y,h=gb.bind(null,Rt,y),y.dispatch=h,y=Bf(!1),O=S2.bind(null,Rt,!1,y.queue),y=Sr(),A={state:u,dispatch:null,action:l,pending:null},y.queue=A,h=A2.bind(null,Rt,A,O,h),A.dispatch=h,y.memoizedState=l,[u,h,!1]}function Bd(l){var u=Wn();return Ru(u,un,l)}function Ru(l,u,h){if(u=ss(l,u,n0)[0],l=Fs(Oi)[0],typeof u=="object"&&u!==null&&typeof u.then=="function")try{var y=Xi(u)}catch(Z){throw Z===ae?ue:Z}else y=u;u=Wn();var A=u.queue,O=A.dispatch;return h!==u.memoizedState&&(Rt.flags|=2048,vl(9,Uf(),up.bind(null,A,h),null)),[y,O,l]}function up(l,u){l.action=u}function fp(l){var u=Wn(),h=un;if(h!==null)return Ru(u,h,l);Wn(),u=u.memoizedState,h=Wn();var y=h.queue.dispatch;return h.memoizedState=l,[u,y,!1]}function vl(l,u,h,y){return l={tag:l,create:h,deps:y,inst:u,next:null},u=Rt.updateQueue,u===null&&(u=ua(),Rt.updateQueue=u),h=u.lastEffect,h===null?u.lastEffect=l.next=l:(y=h.next,h.next=l,l.next=y,u.lastEffect=l),l}function Uf(){return{destroy:void 0,resource:void 0}}function Fd(){return Wn().memoizedState}function ls(l,u,h,y){var A=Sr();y=y===void 0?null:y,Rt.flags|=l,A.memoizedState=vl(1|u,Uf(),h,y)}function Nu(l,u,h,y){var A=Wn();y=y===void 0?null:y;var O=A.memoizedState.inst;un!==null&&y!==null&&Di(y,un.memoizedState.deps)?A.memoizedState=vl(u,O,h,y):(Rt.flags|=l,A.memoizedState=vl(1|u,O,h,y))}function r0(l,u){ls(8390656,8,l,u)}function dp(l,u){Nu(2048,8,l,u)}function i0(l,u){return Nu(4,2,l,u)}function Oc(l,u){return Nu(4,4,l,u)}function hp(l,u){if(typeof u=="function"){l=l();var h=u(l);return function(){typeof h=="function"?h():u(null)}}if(u!=null)return l=l(),u.current=l,function(){u.current=null}}function a0(l,u,h){h=h!=null?h.concat([l]):null,Nu(4,4,hp.bind(null,u,l),h)}function o0(){}function s0(l,u){var h=Wn();u=u===void 0?null:u;var y=h.memoizedState;return u!==null&&Di(u,y[1])?y[0]:(h.memoizedState=[l,u],l)}function pp(l,u){var h=Wn();u=u===void 0?null:u;var y=h.memoizedState;if(u!==null&&Di(u,y[1]))return y[0];if(y=l(),di){_t(!0);try{l()}finally{_t(!1)}}return h.memoizedState=[y,u],y}function kc(l,u,h){return h===void 0||(gn&1073741824)!==0?l.memoizedState=u:(l.memoizedState=h,l=fw(),Rt.lanes|=l,ju|=l,h)}function Ud(l,u,h,y){return Qr(h,u)?h:rn.current!==null?(l=kc(l,h,y),Qr(l,u)||(fa=!0),l):(gn&42)===0?(fa=!0,l.memoizedState=h):(l=fw(),Rt.lanes|=l,ju|=l,u)}function zf(l,u,h,y,A){var O=H.p;H.p=O!==0&&8>O?O:8;var Z=U.T,ce={};U.T=ce,S2(l,!1,u,h);try{var xe=A(),Me=U.S;if(Me!==null&&Me(ce,xe),xe!==null&&typeof xe=="object"&&typeof xe.then=="function"){var Ge=ap(xe,y);f0(l,u,Ge,ds(l))}else f0(l,u,y,ds(l))}catch(Ze){f0(l,u,{then:function(){},status:"rejected",reason:Ze},ds())}finally{H.p=O,U.T=Z}}function yl(){}function Us(l,u,h,y){if(l.tag!==5)throw Error(r(476));var A=xl(l).queue;zf(l,A,u,te,h===null?yl:function(){return Vf(l),h(y)})}function xl(l){var u=l.memoizedState;if(u!==null)return u;u={memoizedState:te,baseState:te,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Oi,lastRenderedState:te},next:null};var h={};return u.next={memoizedState:h,baseState:h,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Oi,lastRenderedState:h},next:null},l.memoizedState=u,l=l.alternate,l!==null&&(l.memoizedState=u),u}function Vf(l){var u=xl(l).next.queue;f0(l,u,{},ds())}function qf(){return Ri(R0)}function l0(){return Wn().memoizedState}function gp(){return Wn().memoizedState}function c0(l){for(var u=l.return;u!==null;){switch(u.tag){case 24:case 3:var h=ds();l=qe(h);var y=tt(u,l,h);y!==null&&(hs(y,u,h),Qe(y,u,h)),u={cache:Zh()},l.payload=u;return}u=u.return}}function u0(l,u,h){var y=ds();h={lane:y,revertLane:0,action:h,hasEagerState:!1,eagerState:null,next:null},mp(l)?mb(u,h):(h=Rd(l,u,h,y),h!==null&&(hs(h,l,y),vb(h,u,y)))}function gb(l,u,h){var y=ds();f0(l,u,h,y)}function f0(l,u,h,y){var A={lane:y,revertLane:0,action:h,hasEagerState:!1,eagerState:null,next:null};if(mp(l))mb(u,A);else{var O=l.alternate;if(l.lanes===0&&(O===null||O.lanes===0)&&(O=u.lastRenderedReducer,O!==null))try{var Z=u.lastRenderedState,ce=O(Z,h);if(A.hasEagerState=!0,A.eagerState=ce,Qr(ce,Z))return Rf(l,u,A,0),Mr===null&&Tf(),!1}catch{}finally{}if(h=Rd(l,u,A,y),h!==null)return hs(h,l,y),vb(h,u,y),!0}return!1}function S2(l,u,h,y){if(y={lane:2,revertLane:nv(),action:y,hasEagerState:!1,eagerState:null,next:null},mp(l)){if(u)throw Error(r(479))}else u=Rd(l,h,y,2),u!==null&&hs(u,l,2)}function mp(l){var u=l.alternate;return l===Rt||u!==null&&u===Rt}function mb(l,u){fi=Nr=!0;var h=l.pending;h===null?u.next=u:(u.next=h.next,h.next=u),l.pending=u}function vb(l,u,h){if((h&4194048)!==0){var y=u.lanes;y&=l.pendingLanes,h|=y,u.lanes=h,$i(l,h)}}var vp={readContext:Ri,use:or,useCallback:Qt,useContext:Qt,useEffect:Qt,useImperativeHandle:Qt,useLayoutEffect:Qt,useInsertionEffect:Qt,useMemo:Qt,useReducer:Qt,useRef:Qt,useState:Qt,useDebugValue:Qt,useDeferredValue:Qt,useTransition:Qt,useSyncExternalStore:Qt,useId:Qt,useHostTransitionStatus:Qt,useFormState:Qt,useActionState:Qt,useOptimistic:Qt,useMemoCache:Qt,useCacheRefresh:Qt},yb={readContext:Ri,use:or,useCallback:function(l,u){return Sr().memoizedState=[l,u===void 0?null:u],l},useContext:Ri,useEffect:r0,useImperativeHandle:function(l,u,h){h=h!=null?h.concat([l]):null,ls(4194308,4,hp.bind(null,u,l),h)},useLayoutEffect:function(l,u){return ls(4194308,4,l,u)},useInsertionEffect:function(l,u){ls(4,2,l,u)},useMemo:function(l,u){var h=Sr();u=u===void 0?null:u;var y=l();if(di){_t(!0);try{l()}finally{_t(!1)}}return h.memoizedState=[y,u],y},useReducer:function(l,u,h){var y=Sr();if(h!==void 0){var A=h(u);if(di){_t(!0);try{h(u)}finally{_t(!1)}}}else A=u;return y.memoizedState=y.baseState=A,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:l,lastRenderedState:A},y.queue=l,l=l.dispatch=u0.bind(null,Rt,l),[y.memoizedState,l]},useRef:function(l){var u=Sr();return l={current:l},u.memoizedState=l},useState:function(l){l=Bf(l);var u=l.queue,h=gb.bind(null,Rt,u);return u.dispatch=h,[l.memoizedState,h]},useDebugValue:o0,useDeferredValue:function(l,u){var h=Sr();return kc(h,l,u)},useTransition:function(){var l=Bf(!1);return l=zf.bind(null,Rt,l.queue,!0,!1),Sr().memoizedState=l,[!1,l]},useSyncExternalStore:function(l,u,h){var y=Rt,A=Sr();if(Zn){if(h===void 0)throw Error(r(407));h=h()}else{if(h=u(),Mr===null)throw Error(r(349));($n&124)!==0||jd(y,u,h)}A.memoizedState=h;var O={value:h,getSnapshot:u};return A.queue=O,r0(Iu.bind(null,y,O,l),[l]),y.flags|=2048,vl(9,Uf(),jf.bind(null,y,O,h,u),null),h},useId:function(){var l=Sr(),u=Mr.identifierPrefix;if(Zn){var h=dl,y=fl;h=(y&~(1<<32-ut(y)-1)).toString(32)+h,u=""+u+"R"+h,h=ei++,0<h&&(u+="H"+h.toString(32)),u+=""}else h=ti++,u=""+u+"r"+h.toString(32)+"";return l.memoizedState=u},useHostTransitionStatus:qf,useFormState:Ff,useActionState:Ff,useOptimistic:function(l){var u=Sr();u.memoizedState=u.baseState=l;var h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return u.queue=h,u=S2.bind(null,Rt,!0,h),h.dispatch=u,[l,u]},useMemoCache:Ra,useCacheRefresh:function(){return Sr().memoizedState=c0.bind(null,Rt)}},xb={readContext:Ri,use:or,useCallback:s0,useContext:Ri,useEffect:dp,useImperativeHandle:a0,useInsertionEffect:i0,useLayoutEffect:Oc,useMemo:pp,useReducer:Fs,useRef:Fd,useState:function(){return Fs(Oi)},useDebugValue:o0,useDeferredValue:function(l,u){var h=Wn();return Ud(h,un.memoizedState,l,u)},useTransition:function(){var l=Fs(Oi)[0],u=Wn().memoizedState;return[typeof l=="boolean"?l:Xi(l),u]},useSyncExternalStore:Mf,useId:l0,useHostTransitionStatus:qf,useFormState:Bd,useActionState:Bd,useOptimistic:function(l,u){var h=Wn();return ml(h,un,l,u)},useMemoCache:Ra,useCacheRefresh:gp},iT={readContext:Ri,use:or,useCallback:s0,useContext:Ri,useEffect:dp,useImperativeHandle:a0,useInsertionEffect:i0,useLayoutEffect:Oc,useMemo:pp,useReducer:ki,useRef:Fd,useState:function(){return ki(Oi)},useDebugValue:o0,useDeferredValue:function(l,u){var h=Wn();return un===null?kc(h,l,u):Ud(h,un.memoizedState,l,u)},useTransition:function(){var l=ki(Oi)[0],u=Wn().memoizedState;return[typeof l=="boolean"?l:Xi(l),u]},useSyncExternalStore:Mf,useId:l0,useHostTransitionStatus:qf,useFormState:fp,useActionState:fp,useOptimistic:function(l,u){var h=Wn();return un!==null?ml(h,un,l,u):(h.baseState=l,[l,h.queue.dispatch])},useMemoCache:Ra,useCacheRefresh:gp},zd=null,d0=0;function yp(l){var u=d0;return d0+=1,zd===null&&(zd=[]),Pe(zd,l,u)}function h0(l,u){u=u.props.ref,l.ref=u!==void 0?u:null}function xp(l,u){throw u.$$typeof===p?Error(r(525)):(l=Object.prototype.toString.call(u),Error(r(31,l==="[object Object]"?"object with keys {"+Object.keys(u).join(", ")+"}":l)))}function bb(l){var u=l._init;return u(l._payload)}function wb(l){function u(Re,Se){if(l){var ke=Re.deletions;ke===null?(Re.deletions=[Se],Re.flags|=16):ke.push(Se)}}function h(Re,Se){if(!l)return null;for(;Se!==null;)u(Re,Se),Se=Se.sibling;return null}function y(Re){for(var Se=new Map;Re!==null;)Re.key!==null?Se.set(Re.key,Re):Se.set(Re.index,Re),Re=Re.sibling;return Se}function A(Re,Se){return Re=Ls(Re,Se),Re.index=0,Re.sibling=null,Re}function O(Re,Se,ke){return Re.index=ke,l?(ke=Re.alternate,ke!==null?(ke=ke.index,ke<Se?(Re.flags|=67108866,Se):ke):(Re.flags|=67108866,Se)):(Re.flags|=1048576,Se)}function Z(Re){return l&&Re.alternate===null&&(Re.flags|=67108866),Re}function ce(Re,Se,ke,Xe){return Se===null||Se.tag!==6?(Se=Dd(ke,Re.mode,Xe),Se.return=Re,Se):(Se=A(Se,ke),Se.return=Re,Se)}function xe(Re,Se,ke,Xe){var Dt=ke.type;return Dt===x?Ge(Re,Se,ke.props.children,Xe,ke.key):Se!==null&&(Se.elementType===Dt||typeof Dt=="object"&&Dt!==null&&Dt.$$typeof===I&&bb(Dt)===Se.type)?(Se=A(Se,ke.props),h0(Se,ke),Se.return=Re,Se):(Se=Ic(ke.type,ke.key,ke.props,null,Re.mode,Xe),h0(Se,ke),Se.return=Re,Se)}function Me(Re,Se,ke,Xe){return Se===null||Se.tag!==4||Se.stateNode.containerInfo!==ke.containerInfo||Se.stateNode.implementation!==ke.implementation?(Se=Df(ke,Re.mode,Xe),Se.return=Re,Se):(Se=A(Se,ke.children||[]),Se.return=Re,Se)}function Ge(Re,Se,ke,Xe,Dt){return Se===null||Se.tag!==7?(Se=cl(ke,Re.mode,Xe,Dt),Se.return=Re,Se):(Se=A(Se,ke),Se.return=Re,Se)}function Ze(Re,Se,ke){if(typeof Se=="string"&&Se!==""||typeof Se=="number"||typeof Se=="bigint")return Se=Dd(""+Se,Re.mode,ke),Se.return=Re,Se;if(typeof Se=="object"&&Se!==null){switch(Se.$$typeof){case g:return ke=Ic(Se.type,Se.key,Se.props,null,Re.mode,ke),h0(ke,Se),ke.return=Re,ke;case m:return Se=Df(Se,Re.mode,ke),Se.return=Re,Se;case I:var Xe=Se._init;return Se=Xe(Se._payload),Ze(Re,Se,ke)}if(G(Se)||R(Se))return Se=cl(Se,Re.mode,ke,null),Se.return=Re,Se;if(typeof Se.then=="function")return Ze(Re,yp(Se),ke);if(Se.$$typeof===M)return Ze(Re,Wl(Re,Se),ke);xp(Re,Se)}return null}function Fe(Re,Se,ke,Xe){var Dt=Se!==null?Se.key:null;if(typeof ke=="string"&&ke!==""||typeof ke=="number"||typeof ke=="bigint")return Dt!==null?null:ce(Re,Se,""+ke,Xe);if(typeof ke=="object"&&ke!==null){switch(ke.$$typeof){case g:return ke.key===Dt?xe(Re,Se,ke,Xe):null;case m:return ke.key===Dt?Me(Re,Se,ke,Xe):null;case I:return Dt=ke._init,ke=Dt(ke._payload),Fe(Re,Se,ke,Xe)}if(G(ke)||R(ke))return Dt!==null?null:Ge(Re,Se,ke,Xe,null);if(typeof ke.then=="function")return Fe(Re,Se,yp(ke),Xe);if(ke.$$typeof===M)return Fe(Re,Se,Wl(Re,ke),Xe);xp(Re,ke)}return null}function Ue(Re,Se,ke,Xe,Dt){if(typeof Xe=="string"&&Xe!==""||typeof Xe=="number"||typeof Xe=="bigint")return Re=Re.get(ke)||null,ce(Se,Re,""+Xe,Dt);if(typeof Xe=="object"&&Xe!==null){switch(Xe.$$typeof){case g:return Re=Re.get(Xe.key===null?ke:Xe.key)||null,xe(Se,Re,Xe,Dt);case m:return Re=Re.get(Xe.key===null?ke:Xe.key)||null,Me(Se,Re,Xe,Dt);case I:var Tn=Xe._init;return Xe=Tn(Xe._payload),Ue(Re,Se,ke,Xe,Dt)}if(G(Xe)||R(Xe))return Re=Re.get(ke)||null,Ge(Se,Re,Xe,Dt,null);if(typeof Xe.then=="function")return Ue(Re,Se,ke,yp(Xe),Dt);if(Xe.$$typeof===M)return Ue(Re,Se,ke,Wl(Se,Xe),Dt);xp(Se,Xe)}return null}function an(Re,Se,ke,Xe){for(var Dt=null,Tn=null,zt=Se,Jt=Se=0,ha=null;zt!==null&&Jt<ke.length;Jt++){zt.index>Jt?(ha=zt,zt=null):ha=zt.sibling;var er=Fe(Re,zt,ke[Jt],Xe);if(er===null){zt===null&&(zt=ha);break}l&&zt&&er.alternate===null&&u(Re,zt),Se=O(er,Se,Jt),Tn===null?Dt=er:Tn.sibling=er,Tn=er,zt=ha}if(Jt===ke.length)return h(Re,zt),Zn&&Rc(Re,Jt),Dt;if(zt===null){for(;Jt<ke.length;Jt++)zt=Ze(Re,ke[Jt],Xe),zt!==null&&(Se=O(zt,Se,Jt),Tn===null?Dt=zt:Tn.sibling=zt,Tn=zt);return Zn&&Rc(Re,Jt),Dt}for(zt=y(zt);Jt<ke.length;Jt++)ha=Ue(zt,Re,Jt,ke[Jt],Xe),ha!==null&&(l&&ha.alternate!==null&&zt.delete(ha.key===null?Jt:ha.key),Se=O(ha,Se,Jt),Tn===null?Dt=ha:Tn.sibling=ha,Tn=ha);return l&&zt.forEach(function($u){return u(Re,$u)}),Zn&&Rc(Re,Jt),Dt}function Zt(Re,Se,ke,Xe){if(ke==null)throw Error(r(151));for(var Dt=null,Tn=null,zt=Se,Jt=Se=0,ha=null,er=ke.next();zt!==null&&!er.done;Jt++,er=ke.next()){zt.index>Jt?(ha=zt,zt=null):ha=zt.sibling;var $u=Fe(Re,zt,er.value,Xe);if($u===null){zt===null&&(zt=ha);break}l&&zt&&$u.alternate===null&&u(Re,zt),Se=O($u,Se,Jt),Tn===null?Dt=$u:Tn.sibling=$u,Tn=$u,zt=ha}if(er.done)return h(Re,zt),Zn&&Rc(Re,Jt),Dt;if(zt===null){for(;!er.done;Jt++,er=ke.next())er=Ze(Re,er.value,Xe),er!==null&&(Se=O(er,Se,Jt),Tn===null?Dt=er:Tn.sibling=er,Tn=er);return Zn&&Rc(Re,Jt),Dt}for(zt=y(zt);!er.done;Jt++,er=ke.next())er=Ue(zt,Re,Jt,er.value,Xe),er!==null&&(l&&er.alternate!==null&&zt.delete(er.key===null?Jt:er.key),Se=O(er,Se,Jt),Tn===null?Dt=er:Tn.sibling=er,Tn=er);return l&&zt.forEach(function(a7){return u(Re,a7)}),Zn&&Rc(Re,Jt),Dt}function Cr(Re,Se,ke,Xe){if(typeof ke=="object"&&ke!==null&&ke.type===x&&ke.key===null&&(ke=ke.props.children),typeof ke=="object"&&ke!==null){switch(ke.$$typeof){case g:e:{for(var Dt=ke.key;Se!==null;){if(Se.key===Dt){if(Dt=ke.type,Dt===x){if(Se.tag===7){h(Re,Se.sibling),Xe=A(Se,ke.props.children),Xe.return=Re,Re=Xe;break e}}else if(Se.elementType===Dt||typeof Dt=="object"&&Dt!==null&&Dt.$$typeof===I&&bb(Dt)===Se.type){h(Re,Se.sibling),Xe=A(Se,ke.props),h0(Xe,ke),Xe.return=Re,Re=Xe;break e}h(Re,Se);break}else u(Re,Se);Se=Se.sibling}ke.type===x?(Xe=cl(ke.props.children,Re.mode,Xe,ke.key),Xe.return=Re,Re=Xe):(Xe=Ic(ke.type,ke.key,ke.props,null,Re.mode,Xe),h0(Xe,ke),Xe.return=Re,Re=Xe)}return Z(Re);case m:e:{for(Dt=ke.key;Se!==null;){if(Se.key===Dt)if(Se.tag===4&&Se.stateNode.containerInfo===ke.containerInfo&&Se.stateNode.implementation===ke.implementation){h(Re,Se.sibling),Xe=A(Se,ke.children||[]),Xe.return=Re,Re=Xe;break e}else{h(Re,Se);break}else u(Re,Se);Se=Se.sibling}Xe=Df(ke,Re.mode,Xe),Xe.return=Re,Re=Xe}return Z(Re);case I:return Dt=ke._init,ke=Dt(ke._payload),Cr(Re,Se,ke,Xe)}if(G(ke))return an(Re,Se,ke,Xe);if(R(ke)){if(Dt=R(ke),typeof Dt!="function")throw Error(r(150));return ke=Dt.call(ke),Zt(Re,Se,ke,Xe)}if(typeof ke.then=="function")return Cr(Re,Se,yp(ke),Xe);if(ke.$$typeof===M)return Cr(Re,Se,Wl(Re,ke),Xe);xp(Re,ke)}return typeof ke=="string"&&ke!==""||typeof ke=="number"||typeof ke=="bigint"?(ke=""+ke,Se!==null&&Se.tag===6?(h(Re,Se.sibling),Xe=A(Se,ke),Xe.return=Re,Re=Xe):(h(Re,Se),Xe=Dd(ke,Re.mode,Xe),Xe.return=Re,Re=Xe),Z(Re)):h(Re,Se)}return function(Re,Se,ke,Xe){try{d0=0;var Dt=Cr(Re,Se,ke,Xe);return zd=null,Dt}catch(zt){if(zt===ae||zt===ue)throw zt;var Tn=ca(29,zt,null,Re.mode);return Tn.lanes=Xe,Tn.return=Re,Tn}finally{}}}var Vd=wb(!0),_b=wb(!1),zs=ie(null),$l=null;function Du(l){var u=l.alternate;W(Ki,Ki.current&1),W(zs,l),$l===null&&(u===null||rn.current!==null||u.memoizedState!==null)&&($l=l)}function Ab(l){if(l.tag===22){if(W(Ki,Ki.current),W(zs,l),$l===null){var u=l.alternate;u!==null&&u.memoizedState!==null&&($l=l)}}else Ou()}function Ou(){W(Ki,Ki.current),W(zs,zs.current)}function Lc(l){$(zs),$l===l&&($l=null),$(Ki)}var Ki=ie(0);function bp(l){for(var u=l;u!==null;){if(u.tag===13){var h=u.memoizedState;if(h!==null&&(h=h.dehydrated,h===null||h.data==="$?"||pv(h)))return u}else if(u.tag===19&&u.memoizedProps.revealOrder!==void 0){if((u.flags&128)!==0)return u}else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===l)break;for(;u.sibling===null;){if(u.return===null||u.return===l)return null;u=u.return}u.sibling.return=u.return,u=u.sibling}return null}function E2(l,u,h,y){u=l.memoizedState,h=h(y,u),h=h==null?u:d({},u,h),l.memoizedState=h,l.lanes===0&&(l.updateQueue.baseState=h)}var C2={enqueueSetState:function(l,u,h){l=l._reactInternals;var y=ds(),A=qe(y);A.payload=u,h!=null&&(A.callback=h),u=tt(l,A,y),u!==null&&(hs(u,l,y),Qe(u,l,y))},enqueueReplaceState:function(l,u,h){l=l._reactInternals;var y=ds(),A=qe(y);A.tag=1,A.payload=u,h!=null&&(A.callback=h),u=tt(l,A,y),u!==null&&(hs(u,l,y),Qe(u,l,y))},enqueueForceUpdate:function(l,u){l=l._reactInternals;var h=ds(),y=qe(h);y.tag=2,u!=null&&(y.callback=u),u=tt(l,y,h),u!==null&&(hs(u,l,h),Qe(u,l,h))}};function Sb(l,u,h,y,A,O,Z){return l=l.stateNode,typeof l.shouldComponentUpdate=="function"?l.shouldComponentUpdate(y,O,Z):u.prototype&&u.prototype.isPureReactComponent?!eo(h,y)||!eo(A,O):!0}function Eb(l,u,h,y){l=u.state,typeof u.componentWillReceiveProps=="function"&&u.componentWillReceiveProps(h,y),typeof u.UNSAFE_componentWillReceiveProps=="function"&&u.UNSAFE_componentWillReceiveProps(h,y),u.state!==l&&C2.enqueueReplaceState(u,u.state,null)}function Hf(l,u){var h=u;if("ref"in u){h={};for(var y in u)y!=="ref"&&(h[y]=u[y])}if(l=l.defaultProps){h===u&&(h=d({},h));for(var A in l)h[A]===void 0&&(h[A]=l[A])}return h}var wp=typeof reportError=="function"?reportError:function(l){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var u=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof l=="object"&&l!==null&&typeof l.message=="string"?String(l.message):String(l),error:l});if(!window.dispatchEvent(u))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",l);return}console.error(l)};function Cb(l){wp(l)}function Ib(l){console.error(l)}function Tb(l){wp(l)}function _p(l,u){try{var h=l.onUncaughtError;h(u.value,{componentStack:u.stack})}catch(y){setTimeout(function(){throw y})}}function Rb(l,u,h){try{var y=l.onCaughtError;y(h.value,{componentStack:h.stack,errorBoundary:u.tag===1?u.stateNode:null})}catch(A){setTimeout(function(){throw A})}}function I2(l,u,h){return h=qe(h),h.tag=3,h.payload={element:null},h.callback=function(){_p(l,u)},h}function Nb(l){return l=qe(l),l.tag=3,l}function Db(l,u,h,y){var A=h.type.getDerivedStateFromError;if(typeof A=="function"){var O=y.value;l.payload=function(){return A(O)},l.callback=function(){Rb(u,h,y)}}var Z=h.stateNode;Z!==null&&typeof Z.componentDidCatch=="function"&&(l.callback=function(){Rb(u,h,y),typeof A!="function"&&(Bu===null?Bu=new Set([this]):Bu.add(this));var ce=y.stack;this.componentDidCatch(y.value,{componentStack:ce!==null?ce:""})})}function aT(l,u,h,y,A){if(h.flags|=32768,y!==null&&typeof y=="object"&&typeof y.then=="function"){if(u=h.alternate,u!==null&&Cu(u,h,A,!0),h=zs.current,h!==null){switch(h.tag){case 13:return $l===null?Q2():h.alternate===null&&Ei===0&&(Ei=3),h.flags&=-257,h.flags|=65536,h.lanes=A,y===pe?h.flags|=16384:(u=h.updateQueue,u===null?h.updateQueue=new Set([y]):u.add(y),J2(l,y,A)),!1;case 22:return h.flags|=65536,y===pe?h.flags|=16384:(u=h.updateQueue,u===null?(u={transitions:null,markerInstances:null,retryQueue:new Set([y])},h.updateQueue=u):(h=u.retryQueue,h===null?u.retryQueue=new Set([y]):h.add(y)),J2(l,y,A)),!1}throw Error(r(435,h.tag))}return J2(l,y,A),Q2(),!1}if(Zn)return u=zs.current,u!==null?((u.flags&65536)===0&&(u.flags|=256),u.flags|=65536,u.lanes=A,y!==Qh&&(l=Error(r(422),{cause:y}),Eu(wo(l,h)))):(y!==Qh&&(u=Error(r(423),{cause:y}),Eu(wo(u,h))),l=l.current.alternate,l.flags|=65536,A&=-A,l.lanes|=A,y=wo(y,h),A=I2(l.stateNode,y,A),Pt(l,A),Ei!==4&&(Ei=2)),!1;var O=Error(r(520),{cause:y});if(O=wo(O,h),b0===null?b0=[O]:b0.push(O),Ei!==4&&(Ei=2),u===null)return!0;y=wo(y,h),h=u;do{switch(h.tag){case 3:return h.flags|=65536,l=A&-A,h.lanes|=l,l=I2(h.stateNode,y,l),Pt(h,l),!1;case 1:if(u=h.type,O=h.stateNode,(h.flags&128)===0&&(typeof u.getDerivedStateFromError=="function"||O!==null&&typeof O.componentDidCatch=="function"&&(Bu===null||!Bu.has(O))))return h.flags|=65536,A&=-A,h.lanes|=A,A=Nb(A),Db(A,l,h,y),Pt(h,A),!1}h=h.return}while(h!==null);return!1}var Ob=Error(r(461)),fa=!1;function Na(l,u,h,y){u.child=l===null?_b(u,null,h,y):Vd(u,l.child,h,y)}function kb(l,u,h,y,A){h=h.render;var O=u.ref;if("ref"in y){var Z={};for(var ce in y)ce!=="ref"&&(Z[ce]=y[ce])}else Z=y;return Bs(u),y=Eo(l,u,h,Z,O,A),ce=hi(),l!==null&&!fa?(Ta(l,u,A),Pc(l,u,A)):(Zn&&ce&&Of(u),u.flags|=1,Na(l,u,y,A),u.child)}function Lb(l,u,h,y,A){if(l===null){var O=h.type;return typeof O=="function"&&!Au(O)&&O.defaultProps===void 0&&h.compare===null?(u.tag=15,u.type=O,Pb(l,u,O,y,A)):(l=Ic(h.type,null,y,u,u.mode,A),l.ref=u.ref,l.return=u,u.child=l)}if(O=l.child,!P2(l,A)){var Z=O.memoizedProps;if(h=h.compare,h=h!==null?h:eo,h(Z,y)&&l.ref===u.ref)return Pc(l,u,A)}return u.flags|=1,l=Ls(O,y),l.ref=u.ref,l.return=u,u.child=l}function Pb(l,u,h,y,A){if(l!==null){var O=l.memoizedProps;if(eo(O,y)&&l.ref===u.ref)if(fa=!1,u.pendingProps=y=O,P2(l,A))(l.flags&131072)!==0&&(fa=!0);else return u.lanes=l.lanes,Pc(l,u,A)}return T2(l,u,h,y,A)}function Mb(l,u,h){var y=u.pendingProps,A=y.children,O=l!==null?l.memoizedState:null;if(y.mode==="hidden"){if((u.flags&128)!==0){if(y=O!==null?O.baseLanes|h:h,l!==null){for(A=u.child=l.child,O=0;A!==null;)O=O|A.lanes|A.childLanes,A=A.sibling;u.childLanes=O&~y}else u.childLanes=0,u.child=null;return jb(l,u,y,h)}if((h&536870912)!==0)u.memoizedState={baseLanes:0,cachePool:null},l!==null&&X(u,O!==null?O.cachePool:null),O!==null?pt(u,O):qr(),Ab(u);else return u.lanes=u.childLanes=536870912,jb(l,u,O!==null?O.baseLanes|h:h,h)}else O!==null?(X(u,O.cachePool),pt(u,O),Ou(),u.memoizedState=null):(l!==null&&X(u,null),qr(),Ou());return Na(l,u,A,h),u.child}function jb(l,u,h,y){var A=V();return A=A===null?null:{parent:Ni._currentValue,pool:A},u.memoizedState={baseLanes:h,cachePool:A},l!==null&&X(u,null),qr(),Ab(u),l!==null&&Cu(l,u,y,!0),null}function Ap(l,u){var h=u.ref;if(h===null)l!==null&&l.ref!==null&&(u.flags|=4194816);else{if(typeof h!="function"&&typeof h!="object")throw Error(r(284));(l===null||l.ref!==h)&&(u.flags|=4194816)}}function T2(l,u,h,y,A){return Bs(u),h=Eo(l,u,h,y,void 0,A),y=hi(),l!==null&&!fa?(Ta(l,u,A),Pc(l,u,A)):(Zn&&y&&Of(u),u.flags|=1,Na(l,u,h,A),u.child)}function Bb(l,u,h,y,A,O){return Bs(u),u.updateQueue=null,h=Ia(u,y,h,A),ni(l),y=hi(),l!==null&&!fa?(Ta(l,u,O),Pc(l,u,O)):(Zn&&y&&Of(u),u.flags|=1,Na(l,u,h,O),u.child)}function Fb(l,u,h,y,A){if(Bs(u),u.stateNode===null){var O=Vi,Z=h.contextType;typeof Z=="object"&&Z!==null&&(O=Ri(Z)),O=new h(y,O),u.memoizedState=O.state!==null&&O.state!==void 0?O.state:null,O.updater=C2,u.stateNode=O,O._reactInternals=u,O=u.stateNode,O.props=y,O.state=u.memoizedState,O.refs={},Le(u),Z=h.contextType,O.context=typeof Z=="object"&&Z!==null?Ri(Z):Vi,O.state=u.memoizedState,Z=h.getDerivedStateFromProps,typeof Z=="function"&&(E2(u,h,Z,y),O.state=u.memoizedState),typeof h.getDerivedStateFromProps=="function"||typeof O.getSnapshotBeforeUpdate=="function"||typeof O.UNSAFE_componentWillMount!="function"&&typeof O.componentWillMount!="function"||(Z=O.state,typeof O.componentWillMount=="function"&&O.componentWillMount(),typeof O.UNSAFE_componentWillMount=="function"&&O.UNSAFE_componentWillMount(),Z!==O.state&&C2.enqueueReplaceState(O,O.state,null),Ct(u,y,O,A),sn(),O.state=u.memoizedState),typeof O.componentDidMount=="function"&&(u.flags|=4194308),y=!0}else if(l===null){O=u.stateNode;var ce=u.memoizedProps,xe=Hf(h,ce);O.props=xe;var Me=O.context,Ge=h.contextType;Z=Vi,typeof Ge=="object"&&Ge!==null&&(Z=Ri(Ge));var Ze=h.getDerivedStateFromProps;Ge=typeof Ze=="function"||typeof O.getSnapshotBeforeUpdate=="function",ce=u.pendingProps!==ce,Ge||typeof O.UNSAFE_componentWillReceiveProps!="function"&&typeof O.componentWillReceiveProps!="function"||(ce||Me!==Z)&&Eb(u,O,y,Z),ze=!1;var Fe=u.memoizedState;O.state=Fe,Ct(u,y,O,A),sn(),Me=u.memoizedState,ce||Fe!==Me||ze?(typeof Ze=="function"&&(E2(u,h,Ze,y),Me=u.memoizedState),(xe=ze||Sb(u,h,xe,y,Fe,Me,Z))?(Ge||typeof O.UNSAFE_componentWillMount!="function"&&typeof O.componentWillMount!="function"||(typeof O.componentWillMount=="function"&&O.componentWillMount(),typeof O.UNSAFE_componentWillMount=="function"&&O.UNSAFE_componentWillMount()),typeof O.componentDidMount=="function"&&(u.flags|=4194308)):(typeof O.componentDidMount=="function"&&(u.flags|=4194308),u.memoizedProps=y,u.memoizedState=Me),O.props=y,O.state=Me,O.context=Z,y=xe):(typeof O.componentDidMount=="function"&&(u.flags|=4194308),y=!1)}else{O=u.stateNode,He(l,u),Z=u.memoizedProps,Ge=Hf(h,Z),O.props=Ge,Ze=u.pendingProps,Fe=O.context,Me=h.contextType,xe=Vi,typeof Me=="object"&&Me!==null&&(xe=Ri(Me)),ce=h.getDerivedStateFromProps,(Me=typeof ce=="function"||typeof O.getSnapshotBeforeUpdate=="function")||typeof O.UNSAFE_componentWillReceiveProps!="function"&&typeof O.componentWillReceiveProps!="function"||(Z!==Ze||Fe!==xe)&&Eb(u,O,y,xe),ze=!1,Fe=u.memoizedState,O.state=Fe,Ct(u,y,O,A),sn();var Ue=u.memoizedState;Z!==Ze||Fe!==Ue||ze||l!==null&&l.dependencies!==null&&Pd(l.dependencies)?(typeof ce=="function"&&(E2(u,h,ce,y),Ue=u.memoizedState),(Ge=ze||Sb(u,h,Ge,y,Fe,Ue,xe)||l!==null&&l.dependencies!==null&&Pd(l.dependencies))?(Me||typeof O.UNSAFE_componentWillUpdate!="function"&&typeof O.componentWillUpdate!="function"||(typeof O.componentWillUpdate=="function"&&O.componentWillUpdate(y,Ue,xe),typeof O.UNSAFE_componentWillUpdate=="function"&&O.UNSAFE_componentWillUpdate(y,Ue,xe)),typeof O.componentDidUpdate=="function"&&(u.flags|=4),typeof O.getSnapshotBeforeUpdate=="function"&&(u.flags|=1024)):(typeof O.componentDidUpdate!="function"||Z===l.memoizedProps&&Fe===l.memoizedState||(u.flags|=4),typeof O.getSnapshotBeforeUpdate!="function"||Z===l.memoizedProps&&Fe===l.memoizedState||(u.flags|=1024),u.memoizedProps=y,u.memoizedState=Ue),O.props=y,O.state=Ue,O.context=xe,y=Ge):(typeof O.componentDidUpdate!="function"||Z===l.memoizedProps&&Fe===l.memoizedState||(u.flags|=4),typeof O.getSnapshotBeforeUpdate!="function"||Z===l.memoizedProps&&Fe===l.memoizedState||(u.flags|=1024),y=!1)}return O=y,Ap(l,u),y=(u.flags&128)!==0,O||y?(O=u.stateNode,h=y&&typeof h.getDerivedStateFromError!="function"?null:O.render(),u.flags|=1,l!==null&&y?(u.child=Vd(u,l.child,null,A),u.child=Vd(u,null,h,A)):Na(l,u,h,A),u.memoizedState=O.state,l=u.child):l=Pc(l,u,A),l}function Ub(l,u,h,y){return So(),u.flags|=256,Na(l,u,h,y),u.child}var R2={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function N2(l){return{baseLanes:l,cachePool:re()}}function D2(l,u,h){return l=l!==null?l.childLanes&~h:0,u&&(l|=Vs),l}function zb(l,u,h){var y=u.pendingProps,A=!1,O=(u.flags&128)!==0,Z;if((Z=O)||(Z=l!==null&&l.memoizedState===null?!1:(Ki.current&2)!==0),Z&&(A=!0,u.flags&=-129),Z=(u.flags&32)!==0,u.flags&=-33,l===null){if(Zn){if(A?Du(u):Ou(),Zn){var ce=Jr,xe;if(xe=ce){e:{for(xe=ce,ce=Ps;xe.nodeType!==8;){if(!ce){ce=null;break e}if(xe=wl(xe.nextSibling),xe===null){ce=null;break e}}ce=xe}ce!==null?(u.memoizedState={dehydrated:ce,treeContext:Tc!==null?{id:fl,overflow:dl}:null,retryLane:536870912,hydrationErrors:null},xe=ca(18,null,null,0),xe.stateNode=ce,xe.return=u,u.child=xe,Ti=u,Jr=null,xe=!0):xe=!1}xe||Nc(u)}if(ce=u.memoizedState,ce!==null&&(ce=ce.dehydrated,ce!==null))return pv(ce)?u.lanes=32:u.lanes=536870912,null;Lc(u)}return ce=y.children,y=y.fallback,A?(Ou(),A=u.mode,ce=Sp({mode:"hidden",children:ce},A),y=cl(y,A,h,null),ce.return=u,y.return=u,ce.sibling=y,u.child=ce,A=u.child,A.memoizedState=N2(h),A.childLanes=D2(l,Z,h),u.memoizedState=R2,y):(Du(u),O2(u,ce))}if(xe=l.memoizedState,xe!==null&&(ce=xe.dehydrated,ce!==null)){if(O)u.flags&256?(Du(u),u.flags&=-257,u=k2(l,u,h)):u.memoizedState!==null?(Ou(),u.child=l.child,u.flags|=128,u=null):(Ou(),A=y.fallback,ce=u.mode,y=Sp({mode:"visible",children:y.children},ce),A=cl(A,ce,h,null),A.flags|=2,y.return=u,A.return=u,y.sibling=A,u.child=y,Vd(u,l.child,null,h),y=u.child,y.memoizedState=N2(h),y.childLanes=D2(l,Z,h),u.memoizedState=R2,u=A);else if(Du(u),pv(ce)){if(Z=ce.nextSibling&&ce.nextSibling.dataset,Z)var Me=Z.dgst;Z=Me,y=Error(r(419)),y.stack="",y.digest=Z,Eu({value:y,source:null,stack:null}),u=k2(l,u,h)}else if(fa||Cu(l,u,h,!1),Z=(h&l.childLanes)!==0,fa||Z){if(Z=Mr,Z!==null&&(y=h&-h,y=(y&42)!==0?1:wr(y),y=(y&(Z.suspendedLanes|h))!==0?0:y,y!==0&&y!==xe.retryLane))throw xe.retryLane=y,Ec(l,y),hs(Z,l,y),Ob;ce.data==="$?"||Q2(),u=k2(l,u,h)}else ce.data==="$?"?(u.flags|=192,u.child=l.child,u=null):(l=xe.treeContext,Jr=wl(ce.nextSibling),Ti=u,Zn=!0,ql=null,Ps=!1,l!==null&&(zo[Ao++]=fl,zo[Ao++]=dl,zo[Ao++]=Tc,fl=l.id,dl=l.overflow,Tc=u),u=O2(u,y.children),u.flags|=4096);return u}return A?(Ou(),A=y.fallback,ce=u.mode,xe=l.child,Me=xe.sibling,y=Ls(xe,{mode:"hidden",children:y.children}),y.subtreeFlags=xe.subtreeFlags&65011712,Me!==null?A=Ls(Me,A):(A=cl(A,ce,h,null),A.flags|=2),A.return=u,y.return=u,y.sibling=A,u.child=y,y=A,A=u.child,ce=l.child.memoizedState,ce===null?ce=N2(h):(xe=ce.cachePool,xe!==null?(Me=Ni._currentValue,xe=xe.parent!==Me?{parent:Me,pool:Me}:xe):xe=re(),ce={baseLanes:ce.baseLanes|h,cachePool:xe}),A.memoizedState=ce,A.childLanes=D2(l,Z,h),u.memoizedState=R2,y):(Du(u),h=l.child,l=h.sibling,h=Ls(h,{mode:"visible",children:y.children}),h.return=u,h.sibling=null,l!==null&&(Z=u.deletions,Z===null?(u.deletions=[l],u.flags|=16):Z.push(l)),u.child=h,u.memoizedState=null,h)}function O2(l,u){return u=Sp({mode:"visible",children:u},l.mode),u.return=l,l.child=u}function Sp(l,u){return l=ca(22,l,null,u),l.lanes=0,l.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},l}function k2(l,u,h){return Vd(u,l.child,null,h),l=O2(u,u.pendingProps.children),l.flags|=2,u.memoizedState=null,l}function Vb(l,u,h){l.lanes|=u;var y=l.alternate;y!==null&&(y.lanes|=u),kd(l.return,u,h)}function L2(l,u,h,y,A){var O=l.memoizedState;O===null?l.memoizedState={isBackwards:u,rendering:null,renderingStartTime:0,last:y,tail:h,tailMode:A}:(O.isBackwards=u,O.rendering=null,O.renderingStartTime=0,O.last=y,O.tail=h,O.tailMode=A)}function qb(l,u,h){var y=u.pendingProps,A=y.revealOrder,O=y.tail;if(Na(l,u,y.children,h),y=Ki.current,(y&2)!==0)y=y&1|2,u.flags|=128;else{if(l!==null&&(l.flags&128)!==0)e:for(l=u.child;l!==null;){if(l.tag===13)l.memoizedState!==null&&Vb(l,h,u);else if(l.tag===19)Vb(l,h,u);else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===u)break e;for(;l.sibling===null;){if(l.return===null||l.return===u)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}y&=1}switch(W(Ki,y),A){case"forwards":for(h=u.child,A=null;h!==null;)l=h.alternate,l!==null&&bp(l)===null&&(A=h),h=h.sibling;h=A,h===null?(A=u.child,u.child=null):(A=h.sibling,h.sibling=null),L2(u,!1,A,h,O);break;case"backwards":for(h=null,A=u.child,u.child=null;A!==null;){if(l=A.alternate,l!==null&&bp(l)===null){u.child=A;break}l=A.sibling,A.sibling=h,h=A,A=l}L2(u,!0,h,null,O);break;case"together":L2(u,!1,null,null,void 0);break;default:u.memoizedState=null}return u.child}function Pc(l,u,h){if(l!==null&&(u.dependencies=l.dependencies),ju|=u.lanes,(h&u.childLanes)===0)if(l!==null){if(Cu(l,u,h,!1),(h&u.childLanes)===0)return null}else return null;if(l!==null&&u.child!==l.child)throw Error(r(153));if(u.child!==null){for(l=u.child,h=Ls(l,l.pendingProps),u.child=h,h.return=u;l.sibling!==null;)l=l.sibling,h=h.sibling=Ls(l,l.pendingProps),h.return=u;h.sibling=null}return u.child}function P2(l,u){return(l.lanes&u)!==0?!0:(l=l.dependencies,!!(l!==null&&Pd(l)))}function oT(l,u,h){switch(u.tag){case 3:_e(u,u.stateNode.containerInfo),Hl(u,Ni,l.memoizedState.cache),So();break;case 27:case 5:Oe(u);break;case 4:_e(u,u.stateNode.containerInfo);break;case 10:Hl(u,u.type,u.memoizedProps.value);break;case 13:var y=u.memoizedState;if(y!==null)return y.dehydrated!==null?(Du(u),u.flags|=128,null):(h&u.child.childLanes)!==0?zb(l,u,h):(Du(u),l=Pc(l,u,h),l!==null?l.sibling:null);Du(u);break;case 19:var A=(l.flags&128)!==0;if(y=(h&u.childLanes)!==0,y||(Cu(l,u,h,!1),y=(h&u.childLanes)!==0),A){if(y)return qb(l,u,h);u.flags|=128}if(A=u.memoizedState,A!==null&&(A.rendering=null,A.tail=null,A.lastEffect=null),W(Ki,Ki.current),y)break;return null;case 22:case 23:return u.lanes=0,Mb(l,u,h);case 24:Hl(u,Ni,l.memoizedState.cache)}return Pc(l,u,h)}function Hb(l,u,h){if(l!==null)if(l.memoizedProps!==u.pendingProps)fa=!0;else{if(!P2(l,h)&&(u.flags&128)===0)return fa=!1,oT(l,u,h);fa=(l.flags&131072)!==0}else fa=!1,Zn&&(u.flags&1048576)!==0&&ep(u,Od,u.index);switch(u.lanes=0,u.tag){case 16:e:{l=u.pendingProps;var y=u.elementType,A=y._init;if(y=A(y._payload),u.type=y,typeof y=="function")Au(y)?(l=Hf(y,l),u.tag=1,u=Fb(null,u,y,l,h)):(u.tag=0,u=T2(null,u,y,l,h));else{if(y!=null){if(A=y.$$typeof,A===P){u.tag=11,u=kb(null,u,y,l,h);break e}else if(A===F){u.tag=14,u=Lb(null,u,y,l,h);break e}}throw u=L(y)||y,Error(r(306,u,""))}}return u;case 0:return T2(l,u,u.type,u.pendingProps,h);case 1:return y=u.type,A=Hf(y,u.pendingProps),Fb(l,u,y,A,h);case 3:e:{if(_e(u,u.stateNode.containerInfo),l===null)throw Error(r(387));y=u.pendingProps;var O=u.memoizedState;A=O.element,He(l,u),Ct(u,y,null,h);var Z=u.memoizedState;if(y=Z.cache,Hl(u,Ni,y),y!==O.cache&&Ld(u,[Ni],h,!0),sn(),y=Z.element,O.isDehydrated)if(O={element:y,isDehydrated:!1,cache:Z.cache},u.updateQueue.baseState=O,u.memoizedState=O,u.flags&256){u=Ub(l,u,y,h);break e}else if(y!==A){A=wo(Error(r(424)),u),Eu(A),u=Ub(l,u,y,h);break e}else{switch(l=u.stateNode.containerInfo,l.nodeType){case 9:l=l.body;break;default:l=l.nodeName==="HTML"?l.ownerDocument.body:l}for(Jr=wl(l.firstChild),Ti=u,Zn=!0,ql=null,Ps=!0,h=_b(u,null,y,h),u.child=h;h;)h.flags=h.flags&-3|4096,h=h.sibling}else{if(So(),y===A){u=Pc(l,u,h);break e}Na(l,u,y,h)}u=u.child}return u;case 26:return Ap(l,u),l===null?(h=Yw(u.type,null,u.pendingProps,null))?u.memoizedState=h:Zn||(h=u.type,l=u.pendingProps,y=Bp(he.current).createElement(h),y[fr]=u,y[Kn]=l,Oa(y,h,l),dr(y),u.stateNode=y):u.memoizedState=Yw(u.type,l.memoizedProps,u.pendingProps,l.memoizedState),null;case 27:return Oe(u),l===null&&Zn&&(y=u.stateNode=Ww(u.type,u.pendingProps,he.current),Ti=u,Ps=!0,A=Jr,zu(u.type)?(gv=A,Jr=wl(y.firstChild)):Jr=A),Na(l,u,u.pendingProps.children,h),Ap(l,u),l===null&&(u.flags|=4194304),u.child;case 5:return l===null&&Zn&&((A=y=Jr)&&(y=LT(y,u.type,u.pendingProps,Ps),y!==null?(u.stateNode=y,Ti=u,Jr=wl(y.firstChild),Ps=!1,A=!0):A=!1),A||Nc(u)),Oe(u),A=u.type,O=u.pendingProps,Z=l!==null?l.memoizedProps:null,y=O.children,fv(A,O)?y=null:Z!==null&&fv(A,Z)&&(u.flags|=32),u.memoizedState!==null&&(A=Eo(l,u,pr,null,null,h),R0._currentValue=A),Ap(l,u),Na(l,u,y,h),u.child;case 6:return l===null&&Zn&&((l=h=Jr)&&(h=PT(h,u.pendingProps,Ps),h!==null?(u.stateNode=h,Ti=u,Jr=null,l=!0):l=!1),l||Nc(u)),null;case 13:return zb(l,u,h);case 4:return _e(u,u.stateNode.containerInfo),y=u.pendingProps,l===null?u.child=Vd(u,null,y,h):Na(l,u,y,h),u.child;case 11:return kb(l,u,u.type,u.pendingProps,h);case 7:return Na(l,u,u.pendingProps,h),u.child;case 8:return Na(l,u,u.pendingProps.children,h),u.child;case 12:return Na(l,u,u.pendingProps.children,h),u.child;case 10:return y=u.pendingProps,Hl(u,u.type,y.value),Na(l,u,y.children,h),u.child;case 9:return A=u.type._context,y=u.pendingProps.children,Bs(u),A=Ri(A),y=y(A),u.flags|=1,Na(l,u,y,h),u.child;case 14:return Lb(l,u,u.type,u.pendingProps,h);case 15:return Pb(l,u,u.type,u.pendingProps,h);case 19:return qb(l,u,h);case 31:return y=u.pendingProps,h=u.mode,y={mode:y.mode,children:y.children},l===null?(h=Sp(y,h),h.ref=u.ref,u.child=h,h.return=u,u=h):(h=Ls(l.child,y),h.ref=u.ref,u.child=h,h.return=u,u=h),u;case 22:return Mb(l,u,h);case 24:return Bs(u),y=Ri(Ni),l===null?(A=V(),A===null&&(A=Mr,O=Zh(),A.pooledCache=O,O.refCount++,O!==null&&(A.pooledCacheLanes|=h),A=O),u.memoizedState={parent:y,cache:A},Le(u),Hl(u,Ni,A)):((l.lanes&h)!==0&&(He(l,u),Ct(u,null,null,h),sn()),A=l.memoizedState,O=u.memoizedState,A.parent!==y?(A={parent:y,cache:y},u.memoizedState=A,u.lanes===0&&(u.memoizedState=u.updateQueue.baseState=A),Hl(u,Ni,y)):(y=O.cache,Hl(u,Ni,y),y!==A.cache&&Ld(u,[Ni],h,!0))),Na(l,u,u.pendingProps.children,h),u.child;case 29:throw u.pendingProps}throw Error(r(156,u.tag))}function Mc(l){l.flags|=4}function Wb(l,u){if(u.type!=="stylesheet"||(u.state.loading&4)!==0)l.flags&=-16777217;else if(l.flags|=16777216,!Jw(u)){if(u=zs.current,u!==null&&(($n&4194048)===$n?$l!==null:($n&62914560)!==$n&&($n&536870912)===0||u!==$l))throw me=pe,oe;l.flags|=8192}}function Ep(l,u){u!==null&&(l.flags|=4),l.flags&16384&&(u=l.tag!==22?Ht():536870912,l.lanes|=u,$d|=u)}function p0(l,u){if(!Zn)switch(l.tailMode){case"hidden":u=l.tail;for(var h=null;u!==null;)u.alternate!==null&&(h=u),u=u.sibling;h===null?l.tail=null:h.sibling=null;break;case"collapsed":h=l.tail;for(var y=null;h!==null;)h.alternate!==null&&(y=h),h=h.sibling;y===null?u||l.tail===null?l.tail=null:l.tail.sibling=null:y.sibling=null}}function pi(l){var u=l.alternate!==null&&l.alternate.child===l.child,h=0,y=0;if(u)for(var A=l.child;A!==null;)h|=A.lanes|A.childLanes,y|=A.subtreeFlags&65011712,y|=A.flags&65011712,A.return=l,A=A.sibling;else for(A=l.child;A!==null;)h|=A.lanes|A.childLanes,y|=A.subtreeFlags,y|=A.flags,A.return=l,A=A.sibling;return l.subtreeFlags|=y,l.childLanes=h,u}function sT(l,u,h){var y=u.pendingProps;switch(kf(u),u.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return pi(u),null;case 1:return pi(u),null;case 3:return h=u.stateNode,y=null,l!==null&&(y=l.memoizedState.cache),u.memoizedState.cache!==y&&(u.flags|=2048),js(Ni),Ie(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(l===null||l.child===null)&&(Ca(u)?Mc(u):l===null||l.memoizedState.isDehydrated&&(u.flags&256)===0||(u.flags|=1024,np())),pi(u),null;case 26:return h=u.memoizedState,l===null?(Mc(u),h!==null?(pi(u),Wb(u,h)):(pi(u),u.flags&=-16777217)):h?h!==l.memoizedState?(Mc(u),pi(u),Wb(u,h)):(pi(u),u.flags&=-16777217):(l.memoizedProps!==y&&Mc(u),pi(u),u.flags&=-16777217),null;case 27:Ve(u),h=he.current;var A=u.type;if(l!==null&&u.stateNode!=null)l.memoizedProps!==y&&Mc(u);else{if(!y){if(u.stateNode===null)throw Error(r(166));return pi(u),null}l=Q.current,Ca(u)?tp(u):(l=Ww(A,y,h),u.stateNode=l,Mc(u))}return pi(u),null;case 5:if(Ve(u),h=u.type,l!==null&&u.stateNode!=null)l.memoizedProps!==y&&Mc(u);else{if(!y){if(u.stateNode===null)throw Error(r(166));return pi(u),null}if(l=Q.current,Ca(u))tp(u);else{switch(A=Bp(he.current),l){case 1:l=A.createElementNS("http://www.w3.org/2000/svg",h);break;case 2:l=A.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;default:switch(h){case"svg":l=A.createElementNS("http://www.w3.org/2000/svg",h);break;case"math":l=A.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;case"script":l=A.createElement("div"),l.innerHTML="<script><\/script>",l=l.removeChild(l.firstChild);break;case"select":l=typeof y.is=="string"?A.createElement("select",{is:y.is}):A.createElement("select"),y.multiple?l.multiple=!0:y.size&&(l.size=y.size);break;default:l=typeof y.is=="string"?A.createElement(h,{is:y.is}):A.createElement(h)}}l[fr]=u,l[Kn]=y;e:for(A=u.child;A!==null;){if(A.tag===5||A.tag===6)l.appendChild(A.stateNode);else if(A.tag!==4&&A.tag!==27&&A.child!==null){A.child.return=A,A=A.child;continue}if(A===u)break e;for(;A.sibling===null;){if(A.return===null||A.return===u)break e;A=A.return}A.sibling.return=A.return,A=A.sibling}u.stateNode=l;e:switch(Oa(l,h,y),h){case"button":case"input":case"select":case"textarea":l=!!y.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&Mc(u)}}return pi(u),u.flags&=-16777217,null;case 6:if(l&&u.stateNode!=null)l.memoizedProps!==y&&Mc(u);else{if(typeof y!="string"&&u.stateNode===null)throw Error(r(166));if(l=he.current,Ca(u)){if(l=u.stateNode,h=u.memoizedProps,y=null,A=Ti,A!==null)switch(A.tag){case 27:case 5:y=A.memoizedProps}l[fr]=u,l=!!(l.nodeValue===h||y!==null&&y.suppressHydrationWarning===!0||Bw(l.nodeValue,h)),l||Nc(u)}else l=Bp(l).createTextNode(y),l[fr]=u,u.stateNode=l}return pi(u),null;case 13:if(y=u.memoizedState,l===null||l.memoizedState!==null&&l.memoizedState.dehydrated!==null){if(A=Ca(u),y!==null&&y.dehydrated!==null){if(l===null){if(!A)throw Error(r(318));if(A=u.memoizedState,A=A!==null?A.dehydrated:null,!A)throw Error(r(317));A[fr]=u}else So(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;pi(u),A=!1}else A=np(),l!==null&&l.memoizedState!==null&&(l.memoizedState.hydrationErrors=A),A=!0;if(!A)return u.flags&256?(Lc(u),u):(Lc(u),null)}if(Lc(u),(u.flags&128)!==0)return u.lanes=h,u;if(h=y!==null,l=l!==null&&l.memoizedState!==null,h){y=u.child,A=null,y.alternate!==null&&y.alternate.memoizedState!==null&&y.alternate.memoizedState.cachePool!==null&&(A=y.alternate.memoizedState.cachePool.pool);var O=null;y.memoizedState!==null&&y.memoizedState.cachePool!==null&&(O=y.memoizedState.cachePool.pool),O!==A&&(y.flags|=2048)}return h!==l&&h&&(u.child.flags|=8192),Ep(u,u.updateQueue),pi(u),null;case 4:return Ie(),l===null&&ov(u.stateNode.containerInfo),pi(u),null;case 10:return js(u.type),pi(u),null;case 19:if($(Ki),A=u.memoizedState,A===null)return pi(u),null;if(y=(u.flags&128)!==0,O=A.rendering,O===null)if(y)p0(A,!1);else{if(Ei!==0||l!==null&&(l.flags&128)!==0)for(l=u.child;l!==null;){if(O=bp(l),O!==null){for(u.flags|=128,p0(A,!1),l=O.updateQueue,u.updateQueue=l,Ep(u,l),u.subtreeFlags=0,l=h,h=u.child;h!==null;)Nf(h,l),h=h.sibling;return W(Ki,Ki.current&1|2),u.child}l=l.sibling}A.tail!==null&&dt()>Tp&&(u.flags|=128,y=!0,p0(A,!1),u.lanes=4194304)}else{if(!y)if(l=bp(O),l!==null){if(u.flags|=128,y=!0,l=l.updateQueue,u.updateQueue=l,Ep(u,l),p0(A,!0),A.tail===null&&A.tailMode==="hidden"&&!O.alternate&&!Zn)return pi(u),null}else 2*dt()-A.renderingStartTime>Tp&&h!==536870912&&(u.flags|=128,y=!0,p0(A,!1),u.lanes=4194304);A.isBackwards?(O.sibling=u.child,u.child=O):(l=A.last,l!==null?l.sibling=O:u.child=O,A.last=O)}return A.tail!==null?(u=A.tail,A.rendering=u,A.tail=u.sibling,A.renderingStartTime=dt(),u.sibling=null,l=Ki.current,W(Ki,y?l&1|2:l&1),u):(pi(u),null);case 22:case 23:return Lc(u),ln(),y=u.memoizedState!==null,l!==null?l.memoizedState!==null!==y&&(u.flags|=8192):y&&(u.flags|=8192),y?(h&536870912)!==0&&(u.flags&128)===0&&(pi(u),u.subtreeFlags&6&&(u.flags|=8192)):pi(u),h=u.updateQueue,h!==null&&Ep(u,h.retryQueue),h=null,l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(h=l.memoizedState.cachePool.pool),y=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(y=u.memoizedState.cachePool.pool),y!==h&&(u.flags|=2048),l!==null&&$(E),null;case 24:return h=null,l!==null&&(h=l.memoizedState.cache),u.memoizedState.cache!==h&&(u.flags|=2048),js(Ni),pi(u),null;case 25:return null;case 30:return null}throw Error(r(156,u.tag))}function lT(l,u){switch(kf(u),u.tag){case 1:return l=u.flags,l&65536?(u.flags=l&-65537|128,u):null;case 3:return js(Ni),Ie(),l=u.flags,(l&65536)!==0&&(l&128)===0?(u.flags=l&-65537|128,u):null;case 26:case 27:case 5:return Ve(u),null;case 13:if(Lc(u),l=u.memoizedState,l!==null&&l.dehydrated!==null){if(u.alternate===null)throw Error(r(340));So()}return l=u.flags,l&65536?(u.flags=l&-65537|128,u):null;case 19:return $(Ki),null;case 4:return Ie(),null;case 10:return js(u.type),null;case 22:case 23:return Lc(u),ln(),l!==null&&$(E),l=u.flags,l&65536?(u.flags=l&-65537|128,u):null;case 24:return js(Ni),null;case 25:return null;default:return null}}function $b(l,u){switch(kf(u),u.tag){case 3:js(Ni),Ie();break;case 26:case 27:case 5:Ve(u);break;case 4:Ie();break;case 13:Lc(u);break;case 19:$(Ki);break;case 10:js(u.type);break;case 22:case 23:Lc(u),ln(),l!==null&&$(E);break;case 24:js(Ni)}}function g0(l,u){try{var h=u.updateQueue,y=h!==null?h.lastEffect:null;if(y!==null){var A=y.next;h=A;do{if((h.tag&l)===l){y=void 0;var O=h.create,Z=h.inst;y=O(),Z.destroy=y}h=h.next}while(h!==A)}}catch(ce){Dr(u,u.return,ce)}}function ku(l,u,h){try{var y=u.updateQueue,A=y!==null?y.lastEffect:null;if(A!==null){var O=A.next;y=O;do{if((y.tag&l)===l){var Z=y.inst,ce=Z.destroy;if(ce!==void 0){Z.destroy=void 0,A=u;var xe=h,Me=ce;try{Me()}catch(Ge){Dr(A,xe,Ge)}}}y=y.next}while(y!==O)}}catch(Ge){Dr(u,u.return,Ge)}}function Gb(l){var u=l.updateQueue;if(u!==null){var h=l.stateNode;try{Si(u,h)}catch(y){Dr(l,l.return,y)}}}function Yb(l,u,h){h.props=Hf(l.type,l.memoizedProps),h.state=l.memoizedState;try{h.componentWillUnmount()}catch(y){Dr(l,u,y)}}function m0(l,u){try{var h=l.ref;if(h!==null){switch(l.tag){case 26:case 27:case 5:var y=l.stateNode;break;case 30:y=l.stateNode;break;default:y=l.stateNode}typeof h=="function"?l.refCleanup=h(y):h.current=y}}catch(A){Dr(l,u,A)}}function Gl(l,u){var h=l.ref,y=l.refCleanup;if(h!==null)if(typeof y=="function")try{y()}catch(A){Dr(l,u,A)}finally{l.refCleanup=null,l=l.alternate,l!=null&&(l.refCleanup=null)}else if(typeof h=="function")try{h(null)}catch(A){Dr(l,u,A)}else h.current=null}function Xb(l){var u=l.type,h=l.memoizedProps,y=l.stateNode;try{e:switch(u){case"button":case"input":case"select":case"textarea":h.autoFocus&&y.focus();break e;case"img":h.src?y.src=h.src:h.srcSet&&(y.srcset=h.srcSet)}}catch(A){Dr(l,l.return,A)}}function M2(l,u,h){try{var y=l.stateNode;RT(y,l.type,h,u),y[Kn]=u}catch(A){Dr(l,l.return,A)}}function Kb(l){return l.tag===5||l.tag===3||l.tag===26||l.tag===27&&zu(l.type)||l.tag===4}function j2(l){e:for(;;){for(;l.sibling===null;){if(l.return===null||Kb(l.return))return null;l=l.return}for(l.sibling.return=l.return,l=l.sibling;l.tag!==5&&l.tag!==6&&l.tag!==18;){if(l.tag===27&&zu(l.type)||l.flags&2||l.child===null||l.tag===4)continue e;l.child.return=l,l=l.child}if(!(l.flags&2))return l.stateNode}}function B2(l,u,h){var y=l.tag;if(y===5||y===6)l=l.stateNode,u?(h.nodeType===9?h.body:h.nodeName==="HTML"?h.ownerDocument.body:h).insertBefore(l,u):(u=h.nodeType===9?h.body:h.nodeName==="HTML"?h.ownerDocument.body:h,u.appendChild(l),h=h._reactRootContainer,h!=null||u.onclick!==null||(u.onclick=jp));else if(y!==4&&(y===27&&zu(l.type)&&(h=l.stateNode,u=null),l=l.child,l!==null))for(B2(l,u,h),l=l.sibling;l!==null;)B2(l,u,h),l=l.sibling}function Cp(l,u,h){var y=l.tag;if(y===5||y===6)l=l.stateNode,u?h.insertBefore(l,u):h.appendChild(l);else if(y!==4&&(y===27&&zu(l.type)&&(h=l.stateNode),l=l.child,l!==null))for(Cp(l,u,h),l=l.sibling;l!==null;)Cp(l,u,h),l=l.sibling}function Qb(l){var u=l.stateNode,h=l.memoizedProps;try{for(var y=l.type,A=u.attributes;A.length;)u.removeAttributeNode(A[0]);Oa(u,y,h),u[fr]=l,u[Kn]=h}catch(O){Dr(l,l.return,O)}}var jc=!1,Li=!1,F2=!1,Zb=typeof WeakSet=="function"?WeakSet:Set,da=null;function cT(l,u){if(l=l.containerInfo,cv=Hp,l=bu(l),Os(l)){if("selectionStart"in l)var h={start:l.selectionStart,end:l.selectionEnd};else e:{h=(h=l.ownerDocument)&&h.defaultView||window;var y=h.getSelection&&h.getSelection();if(y&&y.rangeCount!==0){h=y.anchorNode;var A=y.anchorOffset,O=y.focusNode;y=y.focusOffset;try{h.nodeType,O.nodeType}catch{h=null;break e}var Z=0,ce=-1,xe=-1,Me=0,Ge=0,Ze=l,Fe=null;t:for(;;){for(var Ue;Ze!==h||A!==0&&Ze.nodeType!==3||(ce=Z+A),Ze!==O||y!==0&&Ze.nodeType!==3||(xe=Z+y),Ze.nodeType===3&&(Z+=Ze.nodeValue.length),(Ue=Ze.firstChild)!==null;)Fe=Ze,Ze=Ue;for(;;){if(Ze===l)break t;if(Fe===h&&++Me===A&&(ce=Z),Fe===O&&++Ge===y&&(xe=Z),(Ue=Ze.nextSibling)!==null)break;Ze=Fe,Fe=Ze.parentNode}Ze=Ue}h=ce===-1||xe===-1?null:{start:ce,end:xe}}else h=null}h=h||{start:0,end:0}}else h=null;for(uv={focusedElem:l,selectionRange:h},Hp=!1,da=u;da!==null;)if(u=da,l=u.child,(u.subtreeFlags&1024)!==0&&l!==null)l.return=u,da=l;else for(;da!==null;){switch(u=da,O=u.alternate,l=u.flags,u.tag){case 0:break;case 11:case 15:break;case 1:if((l&1024)!==0&&O!==null){l=void 0,h=u,A=O.memoizedProps,O=O.memoizedState,y=h.stateNode;try{var an=Hf(h.type,A,h.elementType===h.type);l=y.getSnapshotBeforeUpdate(an,O),y.__reactInternalSnapshotBeforeUpdate=l}catch(Zt){Dr(h,h.return,Zt)}}break;case 3:if((l&1024)!==0){if(l=u.stateNode.containerInfo,h=l.nodeType,h===9)hv(l);else if(h===1)switch(l.nodeName){case"HEAD":case"HTML":case"BODY":hv(l);break;default:l.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((l&1024)!==0)throw Error(r(163))}if(l=u.sibling,l!==null){l.return=u.return,da=l;break}da=u.return}}function Jb(l,u,h){var y=h.flags;switch(h.tag){case 0:case 11:case 15:Lu(l,h),y&4&&g0(5,h);break;case 1:if(Lu(l,h),y&4)if(l=h.stateNode,u===null)try{l.componentDidMount()}catch(Z){Dr(h,h.return,Z)}else{var A=Hf(h.type,u.memoizedProps);u=u.memoizedState;try{l.componentDidUpdate(A,u,l.__reactInternalSnapshotBeforeUpdate)}catch(Z){Dr(h,h.return,Z)}}y&64&&Gb(h),y&512&&m0(h,h.return);break;case 3:if(Lu(l,h),y&64&&(l=h.updateQueue,l!==null)){if(u=null,h.child!==null)switch(h.child.tag){case 27:case 5:u=h.child.stateNode;break;case 1:u=h.child.stateNode}try{Si(l,u)}catch(Z){Dr(h,h.return,Z)}}break;case 27:u===null&&y&4&&Qb(h);case 26:case 5:Lu(l,h),u===null&&y&4&&Xb(h),y&512&&m0(h,h.return);break;case 12:Lu(l,h);break;case 13:Lu(l,h),y&4&&nw(l,h),y&64&&(l=h.memoizedState,l!==null&&(l=l.dehydrated,l!==null&&(h=yT.bind(null,h),MT(l,h))));break;case 22:if(y=h.memoizedState!==null||jc,!y){u=u!==null&&u.memoizedState!==null||Li,A=jc;var O=Li;jc=y,(Li=u)&&!O?Pu(l,h,(h.subtreeFlags&8772)!==0):Lu(l,h),jc=A,Li=O}break;case 30:break;default:Lu(l,h)}}function ew(l){var u=l.alternate;u!==null&&(l.alternate=null,ew(u)),l.child=null,l.deletions=null,l.sibling=null,l.tag===5&&(u=l.stateNode,u!==null&&Ui(u)),l.stateNode=null,l.return=null,l.dependencies=null,l.memoizedProps=null,l.memoizedState=null,l.pendingProps=null,l.stateNode=null,l.updateQueue=null}var ri=null,Vo=!1;function Bc(l,u,h){for(h=h.child;h!==null;)tw(l,u,h),h=h.sibling}function tw(l,u,h){if(yt&&typeof yt.onCommitFiberUnmount=="function")try{yt.onCommitFiberUnmount(ht,h)}catch{}switch(h.tag){case 26:Li||Gl(h,u),Bc(l,u,h),h.memoizedState?h.memoizedState.count--:h.stateNode&&(h=h.stateNode,h.parentNode.removeChild(h));break;case 27:Li||Gl(h,u);var y=ri,A=Vo;zu(h.type)&&(ri=h.stateNode,Vo=!1),Bc(l,u,h),E0(h.stateNode),ri=y,Vo=A;break;case 5:Li||Gl(h,u);case 6:if(y=ri,A=Vo,ri=null,Bc(l,u,h),ri=y,Vo=A,ri!==null)if(Vo)try{(ri.nodeType===9?ri.body:ri.nodeName==="HTML"?ri.ownerDocument.body:ri).removeChild(h.stateNode)}catch(O){Dr(h,u,O)}else try{ri.removeChild(h.stateNode)}catch(O){Dr(h,u,O)}break;case 18:ri!==null&&(Vo?(l=ri,qw(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,h.stateNode),k0(l)):qw(ri,h.stateNode));break;case 4:y=ri,A=Vo,ri=h.stateNode.containerInfo,Vo=!0,Bc(l,u,h),ri=y,Vo=A;break;case 0:case 11:case 14:case 15:Li||ku(2,h,u),Li||ku(4,h,u),Bc(l,u,h);break;case 1:Li||(Gl(h,u),y=h.stateNode,typeof y.componentWillUnmount=="function"&&Yb(h,u,y)),Bc(l,u,h);break;case 21:Bc(l,u,h);break;case 22:Li=(y=Li)||h.memoizedState!==null,Bc(l,u,h),Li=y;break;default:Bc(l,u,h)}}function nw(l,u){if(u.memoizedState===null&&(l=u.alternate,l!==null&&(l=l.memoizedState,l!==null&&(l=l.dehydrated,l!==null))))try{k0(l)}catch(h){Dr(u,u.return,h)}}function uT(l){switch(l.tag){case 13:case 19:var u=l.stateNode;return u===null&&(u=l.stateNode=new Zb),u;case 22:return l=l.stateNode,u=l._retryCache,u===null&&(u=l._retryCache=new Zb),u;default:throw Error(r(435,l.tag))}}function U2(l,u){var h=uT(l);u.forEach(function(y){var A=xT.bind(null,l,y);h.has(y)||(h.add(y),y.then(A,A))})}function cs(l,u){var h=u.deletions;if(h!==null)for(var y=0;y<h.length;y++){var A=h[y],O=l,Z=u,ce=Z;e:for(;ce!==null;){switch(ce.tag){case 27:if(zu(ce.type)){ri=ce.stateNode,Vo=!1;break e}break;case 5:ri=ce.stateNode,Vo=!1;break e;case 3:case 4:ri=ce.stateNode.containerInfo,Vo=!0;break e}ce=ce.return}if(ri===null)throw Error(r(160));tw(O,Z,A),ri=null,Vo=!1,O=A.alternate,O!==null&&(O.return=null),A.return=null}if(u.subtreeFlags&13878)for(u=u.child;u!==null;)rw(u,l),u=u.sibling}var bl=null;function rw(l,u){var h=l.alternate,y=l.flags;switch(l.tag){case 0:case 11:case 14:case 15:cs(u,l),us(l),y&4&&(ku(3,l,l.return),g0(3,l),ku(5,l,l.return));break;case 1:cs(u,l),us(l),y&512&&(Li||h===null||Gl(h,h.return)),y&64&&jc&&(l=l.updateQueue,l!==null&&(y=l.callbacks,y!==null&&(h=l.shared.hiddenCallbacks,l.shared.hiddenCallbacks=h===null?y:h.concat(y))));break;case 26:var A=bl;if(cs(u,l),us(l),y&512&&(Li||h===null||Gl(h,h.return)),y&4){var O=h!==null?h.memoizedState:null;if(y=l.memoizedState,h===null)if(y===null)if(l.stateNode===null){e:{y=l.type,h=l.memoizedProps,A=A.ownerDocument||A;t:switch(y){case"title":O=A.getElementsByTagName("title")[0],(!O||O[za]||O[fr]||O.namespaceURI==="http://www.w3.org/2000/svg"||O.hasAttribute("itemprop"))&&(O=A.createElement(y),A.head.insertBefore(O,A.querySelector("head > title"))),Oa(O,y,h),O[fr]=l,dr(O),y=O;break e;case"link":var Z=Qw("link","href",A).get(y+(h.href||""));if(Z){for(var ce=0;ce<Z.length;ce++)if(O=Z[ce],O.getAttribute("href")===(h.href==null||h.href===""?null:h.href)&&O.getAttribute("rel")===(h.rel==null?null:h.rel)&&O.getAttribute("title")===(h.title==null?null:h.title)&&O.getAttribute("crossorigin")===(h.crossOrigin==null?null:h.crossOrigin)){Z.splice(ce,1);break t}}O=A.createElement(y),Oa(O,y,h),A.head.appendChild(O);break;case"meta":if(Z=Qw("meta","content",A).get(y+(h.content||""))){for(ce=0;ce<Z.length;ce++)if(O=Z[ce],O.getAttribute("content")===(h.content==null?null:""+h.content)&&O.getAttribute("name")===(h.name==null?null:h.name)&&O.getAttribute("property")===(h.property==null?null:h.property)&&O.getAttribute("http-equiv")===(h.httpEquiv==null?null:h.httpEquiv)&&O.getAttribute("charset")===(h.charSet==null?null:h.charSet)){Z.splice(ce,1);break t}}O=A.createElement(y),Oa(O,y,h),A.head.appendChild(O);break;default:throw Error(r(468,y))}O[fr]=l,dr(O),y=O}l.stateNode=y}else Zw(A,l.type,l.stateNode);else l.stateNode=Kw(A,y,l.memoizedProps);else O!==y?(O===null?h.stateNode!==null&&(h=h.stateNode,h.parentNode.removeChild(h)):O.count--,y===null?Zw(A,l.type,l.stateNode):Kw(A,y,l.memoizedProps)):y===null&&l.stateNode!==null&&M2(l,l.memoizedProps,h.memoizedProps)}break;case 27:cs(u,l),us(l),y&512&&(Li||h===null||Gl(h,h.return)),h!==null&&y&4&&M2(l,l.memoizedProps,h.memoizedProps);break;case 5:if(cs(u,l),us(l),y&512&&(Li||h===null||Gl(h,h.return)),l.flags&32){A=l.stateNode;try{wa(A,"")}catch(Ue){Dr(l,l.return,Ue)}}y&4&&l.stateNode!=null&&(A=l.memoizedProps,M2(l,A,h!==null?h.memoizedProps:A)),y&1024&&(F2=!0);break;case 6:if(cs(u,l),us(l),y&4){if(l.stateNode===null)throw Error(r(162));y=l.memoizedProps,h=l.stateNode;try{h.nodeValue=y}catch(Ue){Dr(l,l.return,Ue)}}break;case 3:if(zp=null,A=bl,bl=Fp(u.containerInfo),cs(u,l),bl=A,us(l),y&4&&h!==null&&h.memoizedState.isDehydrated)try{k0(u.containerInfo)}catch(Ue){Dr(l,l.return,Ue)}F2&&(F2=!1,iw(l));break;case 4:y=bl,bl=Fp(l.stateNode.containerInfo),cs(u,l),us(l),bl=y;break;case 12:cs(u,l),us(l);break;case 13:cs(u,l),us(l),l.child.flags&8192&&l.memoizedState!==null!=(h!==null&&h.memoizedState!==null)&&($2=dt()),y&4&&(y=l.updateQueue,y!==null&&(l.updateQueue=null,U2(l,y)));break;case 22:A=l.memoizedState!==null;var xe=h!==null&&h.memoizedState!==null,Me=jc,Ge=Li;if(jc=Me||A,Li=Ge||xe,cs(u,l),Li=Ge,jc=Me,us(l),y&8192)e:for(u=l.stateNode,u._visibility=A?u._visibility&-2:u._visibility|1,A&&(h===null||xe||jc||Li||Wf(l)),h=null,u=l;;){if(u.tag===5||u.tag===26){if(h===null){xe=h=u;try{if(O=xe.stateNode,A)Z=O.style,typeof Z.setProperty=="function"?Z.setProperty("display","none","important"):Z.display="none";else{ce=xe.stateNode;var Ze=xe.memoizedProps.style,Fe=Ze!=null&&Ze.hasOwnProperty("display")?Ze.display:null;ce.style.display=Fe==null||typeof Fe=="boolean"?"":(""+Fe).trim()}}catch(Ue){Dr(xe,xe.return,Ue)}}}else if(u.tag===6){if(h===null){xe=u;try{xe.stateNode.nodeValue=A?"":xe.memoizedProps}catch(Ue){Dr(xe,xe.return,Ue)}}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===l)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===l)break e;for(;u.sibling===null;){if(u.return===null||u.return===l)break e;h===u&&(h=null),u=u.return}h===u&&(h=null),u.sibling.return=u.return,u=u.sibling}y&4&&(y=l.updateQueue,y!==null&&(h=y.retryQueue,h!==null&&(y.retryQueue=null,U2(l,h))));break;case 19:cs(u,l),us(l),y&4&&(y=l.updateQueue,y!==null&&(l.updateQueue=null,U2(l,y)));break;case 30:break;case 21:break;default:cs(u,l),us(l)}}function us(l){var u=l.flags;if(u&2){try{for(var h,y=l.return;y!==null;){if(Kb(y)){h=y;break}y=y.return}if(h==null)throw Error(r(160));switch(h.tag){case 27:var A=h.stateNode,O=j2(l);Cp(l,O,A);break;case 5:var Z=h.stateNode;h.flags&32&&(wa(Z,""),h.flags&=-33);var ce=j2(l);Cp(l,ce,Z);break;case 3:case 4:var xe=h.stateNode.containerInfo,Me=j2(l);B2(l,Me,xe);break;default:throw Error(r(161))}}catch(Ge){Dr(l,l.return,Ge)}l.flags&=-3}u&4096&&(l.flags&=-4097)}function iw(l){if(l.subtreeFlags&1024)for(l=l.child;l!==null;){var u=l;iw(u),u.tag===5&&u.flags&1024&&u.stateNode.reset(),l=l.sibling}}function Lu(l,u){if(u.subtreeFlags&8772)for(u=u.child;u!==null;)Jb(l,u.alternate,u),u=u.sibling}function Wf(l){for(l=l.child;l!==null;){var u=l;switch(u.tag){case 0:case 11:case 14:case 15:ku(4,u,u.return),Wf(u);break;case 1:Gl(u,u.return);var h=u.stateNode;typeof h.componentWillUnmount=="function"&&Yb(u,u.return,h),Wf(u);break;case 27:E0(u.stateNode);case 26:case 5:Gl(u,u.return),Wf(u);break;case 22:u.memoizedState===null&&Wf(u);break;case 30:Wf(u);break;default:Wf(u)}l=l.sibling}}function Pu(l,u,h){for(h=h&&(u.subtreeFlags&8772)!==0,u=u.child;u!==null;){var y=u.alternate,A=l,O=u,Z=O.flags;switch(O.tag){case 0:case 11:case 15:Pu(A,O,h),g0(4,O);break;case 1:if(Pu(A,O,h),y=O,A=y.stateNode,typeof A.componentDidMount=="function")try{A.componentDidMount()}catch(Me){Dr(y,y.return,Me)}if(y=O,A=y.updateQueue,A!==null){var ce=y.stateNode;try{var xe=A.shared.hiddenCallbacks;if(xe!==null)for(A.shared.hiddenCallbacks=null,A=0;A<xe.length;A++)In(xe[A],ce)}catch(Me){Dr(y,y.return,Me)}}h&&Z&64&&Gb(O),m0(O,O.return);break;case 27:Qb(O);case 26:case 5:Pu(A,O,h),h&&y===null&&Z&4&&Xb(O),m0(O,O.return);break;case 12:Pu(A,O,h);break;case 13:Pu(A,O,h),h&&Z&4&&nw(A,O);break;case 22:O.memoizedState===null&&Pu(A,O,h),m0(O,O.return);break;case 30:break;default:Pu(A,O,h)}u=u.sibling}}function z2(l,u){var h=null;l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(h=l.memoizedState.cachePool.pool),l=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(l=u.memoizedState.cachePool.pool),l!==h&&(l!=null&&l.refCount++,h!=null&&Lf(h))}function V2(l,u){l=null,u.alternate!==null&&(l=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==l&&(u.refCount++,l!=null&&Lf(l))}function Yl(l,u,h,y){if(u.subtreeFlags&10256)for(u=u.child;u!==null;)aw(l,u,h,y),u=u.sibling}function aw(l,u,h,y){var A=u.flags;switch(u.tag){case 0:case 11:case 15:Yl(l,u,h,y),A&2048&&g0(9,u);break;case 1:Yl(l,u,h,y);break;case 3:Yl(l,u,h,y),A&2048&&(l=null,u.alternate!==null&&(l=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==l&&(u.refCount++,l!=null&&Lf(l)));break;case 12:if(A&2048){Yl(l,u,h,y),l=u.stateNode;try{var O=u.memoizedProps,Z=O.id,ce=O.onPostCommit;typeof ce=="function"&&ce(Z,u.alternate===null?"mount":"update",l.passiveEffectDuration,-0)}catch(xe){Dr(u,u.return,xe)}}else Yl(l,u,h,y);break;case 13:Yl(l,u,h,y);break;case 23:break;case 22:O=u.stateNode,Z=u.alternate,u.memoizedState!==null?O._visibility&2?Yl(l,u,h,y):v0(l,u):O._visibility&2?Yl(l,u,h,y):(O._visibility|=2,qd(l,u,h,y,(u.subtreeFlags&10256)!==0)),A&2048&&z2(Z,u);break;case 24:Yl(l,u,h,y),A&2048&&V2(u.alternate,u);break;default:Yl(l,u,h,y)}}function qd(l,u,h,y,A){for(A=A&&(u.subtreeFlags&10256)!==0,u=u.child;u!==null;){var O=l,Z=u,ce=h,xe=y,Me=Z.flags;switch(Z.tag){case 0:case 11:case 15:qd(O,Z,ce,xe,A),g0(8,Z);break;case 23:break;case 22:var Ge=Z.stateNode;Z.memoizedState!==null?Ge._visibility&2?qd(O,Z,ce,xe,A):v0(O,Z):(Ge._visibility|=2,qd(O,Z,ce,xe,A)),A&&Me&2048&&z2(Z.alternate,Z);break;case 24:qd(O,Z,ce,xe,A),A&&Me&2048&&V2(Z.alternate,Z);break;default:qd(O,Z,ce,xe,A)}u=u.sibling}}function v0(l,u){if(u.subtreeFlags&10256)for(u=u.child;u!==null;){var h=l,y=u,A=y.flags;switch(y.tag){case 22:v0(h,y),A&2048&&z2(y.alternate,y);break;case 24:v0(h,y),A&2048&&V2(y.alternate,y);break;default:v0(h,y)}u=u.sibling}}var y0=8192;function Hd(l){if(l.subtreeFlags&y0)for(l=l.child;l!==null;)ow(l),l=l.sibling}function ow(l){switch(l.tag){case 26:Hd(l),l.flags&y0&&l.memoizedState!==null&&XT(bl,l.memoizedState,l.memoizedProps);break;case 5:Hd(l);break;case 3:case 4:var u=bl;bl=Fp(l.stateNode.containerInfo),Hd(l),bl=u;break;case 22:l.memoizedState===null&&(u=l.alternate,u!==null&&u.memoizedState!==null?(u=y0,y0=16777216,Hd(l),y0=u):Hd(l));break;default:Hd(l)}}function sw(l){var u=l.alternate;if(u!==null&&(l=u.child,l!==null)){u.child=null;do u=l.sibling,l.sibling=null,l=u;while(l!==null)}}function x0(l){var u=l.deletions;if((l.flags&16)!==0){if(u!==null)for(var h=0;h<u.length;h++){var y=u[h];da=y,cw(y,l)}sw(l)}if(l.subtreeFlags&10256)for(l=l.child;l!==null;)lw(l),l=l.sibling}function lw(l){switch(l.tag){case 0:case 11:case 15:x0(l),l.flags&2048&&ku(9,l,l.return);break;case 3:x0(l);break;case 12:x0(l);break;case 22:var u=l.stateNode;l.memoizedState!==null&&u._visibility&2&&(l.return===null||l.return.tag!==13)?(u._visibility&=-3,Ip(l)):x0(l);break;default:x0(l)}}function Ip(l){var u=l.deletions;if((l.flags&16)!==0){if(u!==null)for(var h=0;h<u.length;h++){var y=u[h];da=y,cw(y,l)}sw(l)}for(l=l.child;l!==null;){switch(u=l,u.tag){case 0:case 11:case 15:ku(8,u,u.return),Ip(u);break;case 22:h=u.stateNode,h._visibility&2&&(h._visibility&=-3,Ip(u));break;default:Ip(u)}l=l.sibling}}function cw(l,u){for(;da!==null;){var h=da;switch(h.tag){case 0:case 11:case 15:ku(8,h,u);break;case 23:case 22:if(h.memoizedState!==null&&h.memoizedState.cachePool!==null){var y=h.memoizedState.cachePool.pool;y!=null&&y.refCount++}break;case 24:Lf(h.memoizedState.cache)}if(y=h.child,y!==null)y.return=h,da=y;else e:for(h=l;da!==null;){y=da;var A=y.sibling,O=y.return;if(ew(y),y===h){da=null;break e}if(A!==null){A.return=O,da=A;break e}da=O}}}var fT={getCacheForType:function(l){var u=Ri(Ni),h=u.data.get(l);return h===void 0&&(h=l(),u.data.set(l,h)),h}},dT=typeof WeakMap=="function"?WeakMap:Map,gr=0,Mr=null,kn=null,$n=0,mr=0,fs=null,Mu=!1,Wd=!1,q2=!1,Fc=0,Ei=0,ju=0,$f=0,H2=0,Vs=0,$d=0,b0=null,qo=null,W2=!1,$2=0,Tp=1/0,Rp=null,Bu=null,Da=0,Fu=null,Gd=null,Yd=0,G2=0,Y2=null,uw=null,w0=0,X2=null;function ds(){if((gr&2)!==0&&$n!==0)return $n&-$n;if(U.T!==null){var l=Dc;return l!==0?l:nv()}return Tr()}function fw(){Vs===0&&(Vs=($n&536870912)===0||Zn?Ft():536870912);var l=zs.current;return l!==null&&(l.flags|=32),Vs}function hs(l,u,h){(l===Mr&&(mr===2||mr===9)||l.cancelPendingCommit!==null)&&(Xd(l,0),Uu(l,$n,Vs,!1)),Ut(l,h),((gr&2)===0||l!==Mr)&&(l===Mr&&((gr&2)===0&&($f|=h),Ei===4&&Uu(l,$n,Vs,!1)),Xl(l))}function dw(l,u,h){if((gr&6)!==0)throw Error(r(327));var y=!h&&(u&124)===0&&(u&l.expiredLanes)===0||kt(l,u),A=y?gT(l,u):Z2(l,u,!0),O=y;do{if(A===0){Wd&&!y&&Uu(l,u,0,!1);break}else{if(h=l.current.alternate,O&&!hT(h)){A=Z2(l,u,!1),O=!1;continue}if(A===2){if(O=u,l.errorRecoveryDisabledLanes&O)var Z=0;else Z=l.pendingLanes&-536870913,Z=Z!==0?Z:Z&536870912?536870912:0;if(Z!==0){u=Z;e:{var ce=l;A=b0;var xe=ce.current.memoizedState.isDehydrated;if(xe&&(Xd(ce,Z).flags|=256),Z=Z2(ce,Z,!1),Z!==2){if(q2&&!xe){ce.errorRecoveryDisabledLanes|=O,$f|=O,A=4;break e}O=qo,qo=A,O!==null&&(qo===null?qo=O:qo.push.apply(qo,O))}A=Z}if(O=!1,A!==2)continue}}if(A===1){Xd(l,0),Uu(l,u,0,!0);break}e:{switch(y=l,O=A,O){case 0:case 1:throw Error(r(345));case 4:if((u&4194048)!==u)break;case 6:Uu(y,u,Vs,!Mu);break e;case 2:qo=null;break;case 3:case 5:break;default:throw Error(r(329))}if((u&62914560)===u&&(A=$2+300-dt(),10<A)){if(Uu(y,u,Vs,!Mu),Vn(y,0,!0)!==0)break e;y.timeoutHandle=zw(hw.bind(null,y,h,qo,Rp,W2,u,Vs,$f,$d,Mu,O,2,-0,0),A);break e}hw(y,h,qo,Rp,W2,u,Vs,$f,$d,Mu,O,0,-0,0)}}break}while(!0);Xl(l)}function hw(l,u,h,y,A,O,Z,ce,xe,Me,Ge,Ze,Fe,Ue){if(l.timeoutHandle=-1,Ze=u.subtreeFlags,(Ze&8192||(Ze&16785408)===16785408)&&(T0={stylesheets:null,count:0,unsuspend:YT},ow(u),Ze=KT(),Ze!==null)){l.cancelPendingCommit=Ze(bw.bind(null,l,u,O,h,y,A,Z,ce,xe,Ge,1,Fe,Ue)),Uu(l,O,Z,!Me);return}bw(l,u,O,h,y,A,Z,ce,xe)}function hT(l){for(var u=l;;){var h=u.tag;if((h===0||h===11||h===15)&&u.flags&16384&&(h=u.updateQueue,h!==null&&(h=h.stores,h!==null)))for(var y=0;y<h.length;y++){var A=h[y],O=A.getSnapshot;A=A.value;try{if(!Qr(O(),A))return!1}catch{return!1}}if(h=u.child,u.subtreeFlags&16384&&h!==null)h.return=u,u=h;else{if(u===l)break;for(;u.sibling===null;){if(u.return===null||u.return===l)return!0;u=u.return}u.sibling.return=u.return,u=u.sibling}}return!0}function Uu(l,u,h,y){u&=~H2,u&=~$f,l.suspendedLanes|=u,l.pingedLanes&=~u,y&&(l.warmLanes|=u),y=l.expirationTimes;for(var A=u;0<A;){var O=31-ut(A),Z=1<<O;y[O]=-1,A&=~Z}h!==0&&nn(l,h,u)}function Np(){return(gr&6)===0?(_0(0),!1):!0}function K2(){if(kn!==null){if(mr===0)var l=kn.return;else l=kn,pl=qi=null,Yi(l),zd=null,d0=0,l=kn;for(;l!==null;)$b(l.alternate,l),l=l.return;kn=null}}function Xd(l,u){var h=l.timeoutHandle;h!==-1&&(l.timeoutHandle=-1,DT(h)),h=l.cancelPendingCommit,h!==null&&(l.cancelPendingCommit=null,h()),K2(),Mr=l,kn=h=Ls(l.current,null),$n=u,mr=0,fs=null,Mu=!1,Wd=kt(l,u),q2=!1,$d=Vs=H2=$f=ju=Ei=0,qo=b0=null,W2=!1,(u&8)!==0&&(u|=u&32);var y=l.entangledLanes;if(y!==0)for(l=l.entanglements,y&=u;0<y;){var A=31-ut(y),O=1<<A;u|=l[A],y&=~O}return Fc=u,Tf(),h}function pw(l,u){Rt=null,U.H=vp,u===ae||u===ue?(u=Ce(),mr=3):u===oe?(u=Ce(),mr=4):mr=u===Ob?8:u!==null&&typeof u=="object"&&typeof u.then=="function"?6:1,fs=u,kn===null&&(Ei=1,_p(l,wo(u,l.current)))}function gw(){var l=U.H;return U.H=vp,l===null?vp:l}function mw(){var l=U.A;return U.A=fT,l}function Q2(){Ei=4,Mu||($n&4194048)!==$n&&zs.current!==null||(Wd=!0),(ju&134217727)===0&&($f&134217727)===0||Mr===null||Uu(Mr,$n,Vs,!1)}function Z2(l,u,h){var y=gr;gr|=2;var A=gw(),O=mw();(Mr!==l||$n!==u)&&(Rp=null,Xd(l,u)),u=!1;var Z=Ei;e:do try{if(mr!==0&&kn!==null){var ce=kn,xe=fs;switch(mr){case 8:K2(),Z=6;break e;case 3:case 2:case 9:case 6:zs.current===null&&(u=!0);var Me=mr;if(mr=0,fs=null,Kd(l,ce,xe,Me),h&&Wd){Z=0;break e}break;default:Me=mr,mr=0,fs=null,Kd(l,ce,xe,Me)}}pT(),Z=Ei;break}catch(Ge){pw(l,Ge)}while(!0);return u&&l.shellSuspendCounter++,pl=qi=null,gr=y,U.H=A,U.A=O,kn===null&&(Mr=null,$n=0,Tf()),Z}function pT(){for(;kn!==null;)vw(kn)}function gT(l,u){var h=gr;gr|=2;var y=gw(),A=mw();Mr!==l||$n!==u?(Rp=null,Tp=dt()+500,Xd(l,u)):Wd=kt(l,u);e:do try{if(mr!==0&&kn!==null){u=kn;var O=fs;t:switch(mr){case 1:mr=0,fs=null,Kd(l,u,O,1);break;case 2:case 9:if(ye(O)){mr=0,fs=null,yw(u);break}u=function(){mr!==2&&mr!==9||Mr!==l||(mr=7),Xl(l)},O.then(u,u);break e;case 3:mr=7;break e;case 4:mr=5;break e;case 7:ye(O)?(mr=0,fs=null,yw(u)):(mr=0,fs=null,Kd(l,u,O,7));break;case 5:var Z=null;switch(kn.tag){case 26:Z=kn.memoizedState;case 5:case 27:var ce=kn;if(!Z||Jw(Z)){mr=0,fs=null;var xe=ce.sibling;if(xe!==null)kn=xe;else{var Me=ce.return;Me!==null?(kn=Me,Dp(Me)):kn=null}break t}}mr=0,fs=null,Kd(l,u,O,5);break;case 6:mr=0,fs=null,Kd(l,u,O,6);break;case 8:K2(),Ei=6;break e;default:throw Error(r(462))}}mT();break}catch(Ge){pw(l,Ge)}while(!0);return pl=qi=null,U.H=y,U.A=A,gr=h,kn!==null?0:(Mr=null,$n=0,Tf(),Ei)}function mT(){for(;kn!==null&&!de();)vw(kn)}function vw(l){var u=Hb(l.alternate,l,Fc);l.memoizedProps=l.pendingProps,u===null?Dp(l):kn=u}function yw(l){var u=l,h=u.alternate;switch(u.tag){case 15:case 0:u=Bb(h,u,u.pendingProps,u.type,void 0,$n);break;case 11:u=Bb(h,u,u.pendingProps,u.type.render,u.ref,$n);break;case 5:Yi(u);default:$b(h,u),u=kn=Nf(u,Fc),u=Hb(h,u,Fc)}l.memoizedProps=l.pendingProps,u===null?Dp(l):kn=u}function Kd(l,u,h,y){pl=qi=null,Yi(u),zd=null,d0=0;var A=u.return;try{if(aT(l,A,u,h,$n)){Ei=1,_p(l,wo(h,l.current)),kn=null;return}}catch(O){if(A!==null)throw kn=A,O;Ei=1,_p(l,wo(h,l.current)),kn=null;return}u.flags&32768?(Zn||y===1?l=!0:Wd||($n&536870912)!==0?l=!1:(Mu=l=!0,(y===2||y===9||y===3||y===6)&&(y=zs.current,y!==null&&y.tag===13&&(y.flags|=16384))),xw(u,l)):Dp(u)}function Dp(l){var u=l;do{if((u.flags&32768)!==0){xw(u,Mu);return}l=u.return;var h=sT(u.alternate,u,Fc);if(h!==null){kn=h;return}if(u=u.sibling,u!==null){kn=u;return}kn=u=l}while(u!==null);Ei===0&&(Ei=5)}function xw(l,u){do{var h=lT(l.alternate,l);if(h!==null){h.flags&=32767,kn=h;return}if(h=l.return,h!==null&&(h.flags|=32768,h.subtreeFlags=0,h.deletions=null),!u&&(l=l.sibling,l!==null)){kn=l;return}kn=l=h}while(l!==null);Ei=6,kn=null}function bw(l,u,h,y,A,O,Z,ce,xe){l.cancelPendingCommit=null;do Op();while(Da!==0);if((gr&6)!==0)throw Error(r(327));if(u!==null){if(u===l.current)throw Error(r(177));if(O=u.lanes|u.childLanes,O|=Td,Tt(l,h,O,Z,ce,xe),l===Mr&&(kn=Mr=null,$n=0),Gd=u,Fu=l,Yd=h,G2=O,Y2=A,uw=y,(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?(l.callbackNode=null,l.callbackPriority=0,bT(Ye,function(){return Ew(),null})):(l.callbackNode=null,l.callbackPriority=0),y=(u.flags&13878)!==0,(u.subtreeFlags&13878)!==0||y){y=U.T,U.T=null,A=H.p,H.p=2,Z=gr,gr|=4;try{cT(l,u,h)}finally{gr=Z,H.p=A,U.T=y}}Da=1,ww(),_w(),Aw()}}function ww(){if(Da===1){Da=0;var l=Fu,u=Gd,h=(u.flags&13878)!==0;if((u.subtreeFlags&13878)!==0||h){h=U.T,U.T=null;var y=H.p;H.p=2;var A=gr;gr|=4;try{rw(u,l);var O=uv,Z=bu(l.containerInfo),ce=O.focusedElem,xe=O.selectionRange;if(Z!==ce&&ce&&ce.ownerDocument&&xu(ce.ownerDocument.documentElement,ce)){if(xe!==null&&Os(ce)){var Me=xe.start,Ge=xe.end;if(Ge===void 0&&(Ge=Me),"selectionStart"in ce)ce.selectionStart=Me,ce.selectionEnd=Math.min(Ge,ce.value.length);else{var Ze=ce.ownerDocument||document,Fe=Ze&&Ze.defaultView||window;if(Fe.getSelection){var Ue=Fe.getSelection(),an=ce.textContent.length,Zt=Math.min(xe.start,an),Cr=xe.end===void 0?Zt:Math.min(xe.end,an);!Ue.extend&&Zt>Cr&&(Z=Cr,Cr=Zt,Zt=Z);var Re=yu(ce,Zt),Se=yu(ce,Cr);if(Re&&Se&&(Ue.rangeCount!==1||Ue.anchorNode!==Re.node||Ue.anchorOffset!==Re.offset||Ue.focusNode!==Se.node||Ue.focusOffset!==Se.offset)){var ke=Ze.createRange();ke.setStart(Re.node,Re.offset),Ue.removeAllRanges(),Zt>Cr?(Ue.addRange(ke),Ue.extend(Se.node,Se.offset)):(ke.setEnd(Se.node,Se.offset),Ue.addRange(ke))}}}}for(Ze=[],Ue=ce;Ue=Ue.parentNode;)Ue.nodeType===1&&Ze.push({element:Ue,left:Ue.scrollLeft,top:Ue.scrollTop});for(typeof ce.focus=="function"&&ce.focus(),ce=0;ce<Ze.length;ce++){var Xe=Ze[ce];Xe.element.scrollLeft=Xe.left,Xe.element.scrollTop=Xe.top}}Hp=!!cv,uv=cv=null}finally{gr=A,H.p=y,U.T=h}}l.current=u,Da=2}}function _w(){if(Da===2){Da=0;var l=Fu,u=Gd,h=(u.flags&8772)!==0;if((u.subtreeFlags&8772)!==0||h){h=U.T,U.T=null;var y=H.p;H.p=2;var A=gr;gr|=4;try{Jb(l,u.alternate,u)}finally{gr=A,H.p=y,U.T=h}}Da=3}}function Aw(){if(Da===4||Da===3){Da=0,rt();var l=Fu,u=Gd,h=Yd,y=uw;(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?Da=5:(Da=0,Gd=Fu=null,Sw(l,l.pendingLanes));var A=l.pendingLanes;if(A===0&&(Bu=null),Yr(h),u=u.stateNode,yt&&typeof yt.onCommitFiberRoot=="function")try{yt.onCommitFiberRoot(ht,u,void 0,(u.current.flags&128)===128)}catch{}if(y!==null){u=U.T,A=H.p,H.p=2,U.T=null;try{for(var O=l.onRecoverableError,Z=0;Z<y.length;Z++){var ce=y[Z];O(ce.value,{componentStack:ce.stack})}}finally{U.T=u,H.p=A}}(Yd&3)!==0&&Op(),Xl(l),A=l.pendingLanes,(h&4194090)!==0&&(A&42)!==0?l===X2?w0++:(w0=0,X2=l):w0=0,_0(0)}}function Sw(l,u){(l.pooledCacheLanes&=u)===0&&(u=l.pooledCache,u!=null&&(l.pooledCache=null,Lf(u)))}function Op(l){return ww(),_w(),Aw(),Ew()}function Ew(){if(Da!==5)return!1;var l=Fu,u=G2;G2=0;var h=Yr(Yd),y=U.T,A=H.p;try{H.p=32>h?32:h,U.T=null,h=Y2,Y2=null;var O=Fu,Z=Yd;if(Da=0,Gd=Fu=null,Yd=0,(gr&6)!==0)throw Error(r(331));var ce=gr;if(gr|=4,lw(O.current),aw(O,O.current,Z,h),gr=ce,_0(0,!1),yt&&typeof yt.onPostCommitFiberRoot=="function")try{yt.onPostCommitFiberRoot(ht,O)}catch{}return!0}finally{H.p=A,U.T=y,Sw(l,u)}}function Cw(l,u,h){u=wo(h,u),u=I2(l.stateNode,u,2),l=tt(l,u,2),l!==null&&(Ut(l,2),Xl(l))}function Dr(l,u,h){if(l.tag===3)Cw(l,l,h);else for(;u!==null;){if(u.tag===3){Cw(u,l,h);break}else if(u.tag===1){var y=u.stateNode;if(typeof u.type.getDerivedStateFromError=="function"||typeof y.componentDidCatch=="function"&&(Bu===null||!Bu.has(y))){l=wo(h,l),h=Nb(2),y=tt(u,h,2),y!==null&&(Db(h,y,u,l),Ut(y,2),Xl(y));break}}u=u.return}}function J2(l,u,h){var y=l.pingCache;if(y===null){y=l.pingCache=new dT;var A=new Set;y.set(u,A)}else A=y.get(u),A===void 0&&(A=new Set,y.set(u,A));A.has(h)||(q2=!0,A.add(h),l=vT.bind(null,l,u,h),u.then(l,l))}function vT(l,u,h){var y=l.pingCache;y!==null&&y.delete(u),l.pingedLanes|=l.suspendedLanes&h,l.warmLanes&=~h,Mr===l&&($n&h)===h&&(Ei===4||Ei===3&&($n&62914560)===$n&&300>dt()-$2?(gr&2)===0&&Xd(l,0):H2|=h,$d===$n&&($d=0)),Xl(l)}function Iw(l,u){u===0&&(u=Ht()),l=Ec(l,u),l!==null&&(Ut(l,u),Xl(l))}function yT(l){var u=l.memoizedState,h=0;u!==null&&(h=u.retryLane),Iw(l,h)}function xT(l,u){var h=0;switch(l.tag){case 13:var y=l.stateNode,A=l.memoizedState;A!==null&&(h=A.retryLane);break;case 19:y=l.stateNode;break;case 22:y=l.stateNode._retryCache;break;default:throw Error(r(314))}y!==null&&y.delete(u),Iw(l,h)}function bT(l,u){return ot(l,u)}var kp=null,Qd=null,ev=!1,Lp=!1,tv=!1,Gf=0;function Xl(l){l!==Qd&&l.next===null&&(Qd===null?kp=Qd=l:Qd=Qd.next=l),Lp=!0,ev||(ev=!0,_T())}function _0(l,u){if(!tv&&Lp){tv=!0;do for(var h=!1,y=kp;y!==null;){if(l!==0){var A=y.pendingLanes;if(A===0)var O=0;else{var Z=y.suspendedLanes,ce=y.pingedLanes;O=(1<<31-ut(42|l)+1)-1,O&=A&~(Z&~ce),O=O&201326741?O&201326741|1:O?O|2:0}O!==0&&(h=!0,Dw(y,O))}else O=$n,O=Vn(y,y===Mr?O:0,y.cancelPendingCommit!==null||y.timeoutHandle!==-1),(O&3)===0||kt(y,O)||(h=!0,Dw(y,O));y=y.next}while(h);tv=!1}}function wT(){Tw()}function Tw(){Lp=ev=!1;var l=0;Gf!==0&&(NT()&&(l=Gf),Gf=0);for(var u=dt(),h=null,y=kp;y!==null;){var A=y.next,O=Rw(y,u);O===0?(y.next=null,h===null?kp=A:h.next=A,A===null&&(Qd=h)):(h=y,(l!==0||(O&3)!==0)&&(Lp=!0)),y=A}_0(l)}function Rw(l,u){for(var h=l.suspendedLanes,y=l.pingedLanes,A=l.expirationTimes,O=l.pendingLanes&-62914561;0<O;){var Z=31-ut(O),ce=1<<Z,xe=A[Z];xe===-1?((ce&h)===0||(ce&y)!==0)&&(A[Z]=Pn(ce,u)):xe<=u&&(l.expiredLanes|=ce),O&=~ce}if(u=Mr,h=$n,h=Vn(l,l===u?h:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),y=l.callbackNode,h===0||l===u&&(mr===2||mr===9)||l.cancelPendingCommit!==null)return y!==null&&y!==null&&ft(y),l.callbackNode=null,l.callbackPriority=0;if((h&3)===0||kt(l,h)){if(u=h&-h,u===l.callbackPriority)return u;switch(y!==null&&ft(y),Yr(h)){case 2:case 8:h=lt;break;case 32:h=Ye;break;case 268435456:h=ct;break;default:h=Ye}return y=Nw.bind(null,l),h=ot(h,y),l.callbackPriority=u,l.callbackNode=h,u}return y!==null&&y!==null&&ft(y),l.callbackPriority=2,l.callbackNode=null,2}function Nw(l,u){if(Da!==0&&Da!==5)return l.callbackNode=null,l.callbackPriority=0,null;var h=l.callbackNode;if(Op()&&l.callbackNode!==h)return null;var y=$n;return y=Vn(l,l===Mr?y:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),y===0?null:(dw(l,y,u),Rw(l,dt()),l.callbackNode!=null&&l.callbackNode===h?Nw.bind(null,l):null)}function Dw(l,u){if(Op())return null;dw(l,u,!0)}function _T(){OT(function(){(gr&6)!==0?ot(Ee,wT):Tw()})}function nv(){return Gf===0&&(Gf=Ft()),Gf}function Ow(l){return l==null||typeof l=="symbol"||typeof l=="boolean"?null:typeof l=="function"?l:tl(""+l)}function kw(l,u){var h=u.ownerDocument.createElement("input");return h.name=u.name,h.value=u.value,l.id&&h.setAttribute("form",l.id),u.parentNode.insertBefore(h,u),l=new FormData(l),h.parentNode.removeChild(h),l}function AT(l,u,h,y,A){if(u==="submit"&&h&&h.stateNode===A){var O=Ow((A[Kn]||null).action),Z=y.submitter;Z&&(u=(u=Z[Kn]||null)?Ow(u.formAction):Z.getAttribute("formAction"),u!==null&&(O=u,Z=null));var ce=new Ts("action","action",null,y,A);l.push({event:ce,listeners:[{instance:null,listener:function(){if(y.defaultPrevented){if(Gf!==0){var xe=Z?kw(A,Z):new FormData(A);Us(h,{pending:!0,data:xe,method:A.method,action:O},null,xe)}}else typeof O=="function"&&(ce.preventDefault(),xe=Z?kw(A,Z):new FormData(A),Us(h,{pending:!0,data:xe,method:A.method,action:O},O,xe))},currentTarget:A}]})}}for(var rv=0;rv<Id.length;rv++){var iv=Id[rv],ST=iv.toLowerCase(),ET=iv[0].toUpperCase()+iv.slice(1);Fo(ST,"on"+ET)}Fo(ks,"onAnimationEnd"),Fo(wu,"onAnimationIteration"),Fo(Ac,"onAnimationStart"),Fo("dblclick","onDoubleClick"),Fo("focusin","onFocus"),Fo("focusout","onBlur"),Fo(Cd,"onTransitionRun"),Fo(Z1,"onTransitionStart"),Fo(J1,"onTransitionCancel"),Fo(Xh,"onTransitionEnd"),qa("onMouseEnter",["mouseout","mouseover"]),qa("onMouseLeave",["mouseout","mouseover"]),qa("onPointerEnter",["pointerout","pointerover"]),qa("onPointerLeave",["pointerout","pointerover"]),aa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),aa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),aa("onBeforeInput",["compositionend","keypress","textInput","paste"]),aa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),aa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),aa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var A0="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),CT=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(A0));function Lw(l,u){u=(u&4)!==0;for(var h=0;h<l.length;h++){var y=l[h],A=y.event;y=y.listeners;e:{var O=void 0;if(u)for(var Z=y.length-1;0<=Z;Z--){var ce=y[Z],xe=ce.instance,Me=ce.currentTarget;if(ce=ce.listener,xe!==O&&A.isPropagationStopped())break e;O=ce,A.currentTarget=Me;try{O(A)}catch(Ge){wp(Ge)}A.currentTarget=null,O=xe}else for(Z=0;Z<y.length;Z++){if(ce=y[Z],xe=ce.instance,Me=ce.currentTarget,ce=ce.listener,xe!==O&&A.isPropagationStopped())break e;O=ce,A.currentTarget=Me;try{O(A)}catch(Ge){wp(Ge)}A.currentTarget=null,O=xe}}}}function Ln(l,u){var h=u[_r];h===void 0&&(h=u[_r]=new Set);var y=l+"__bubble";h.has(y)||(Pw(u,l,2,!1),h.add(y))}function av(l,u,h){var y=0;u&&(y|=4),Pw(h,l,y,u)}var Pp="_reactListening"+Math.random().toString(36).slice(2);function ov(l){if(!l[Pp]){l[Pp]=!0,Va.forEach(function(h){h!=="selectionchange"&&(CT.has(h)||av(h,!1,l),av(h,!0,l))});var u=l.nodeType===9?l:l.ownerDocument;u===null||u[Pp]||(u[Pp]=!0,av("selectionchange",!1,u))}}function Pw(l,u,h,y){switch(a3(u)){case 2:var A=JT;break;case 8:A=e7;break;default:A=bv}h=A.bind(null,u,h,l),A=void 0,!wi||u!=="touchstart"&&u!=="touchmove"&&u!=="wheel"||(A=!0),y?A!==void 0?l.addEventListener(u,h,{capture:!0,passive:A}):l.addEventListener(u,h,!0):A!==void 0?l.addEventListener(u,h,{passive:A}):l.addEventListener(u,h,!1)}function sv(l,u,h,y,A){var O=y;if((u&1)===0&&(u&2)===0&&y!==null)e:for(;;){if(y===null)return;var Z=y.tag;if(Z===3||Z===4){var ce=y.stateNode.containerInfo;if(ce===A)break;if(Z===4)for(Z=y.return;Z!==null;){var xe=Z.tag;if((xe===3||xe===4)&&Z.stateNode.containerInfo===A)return;Z=Z.return}for(;ce!==null;){if(Z=zi(ce),Z===null)return;if(xe=Z.tag,xe===5||xe===6||xe===26||xe===27){y=O=Z;continue e}ce=ce.parentNode}}y=y.return}hu(function(){var Me=O,Ge=$a(h),Ze=[];e:{var Fe=Kh.get(l);if(Fe!==void 0){var Ue=Ts,an=l;switch(l){case"keypress":if(oa(h)===0)break e;case"keydown":case"keyup":Ue=Gt;break;case"focusin":an="focus",Ue=Xa;break;case"focusout":an="blur",Ue=Xa;break;case"beforeblur":case"afterblur":Ue=Xa;break;case"click":if(h.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ue=sa;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ue=pu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ue=Fr;break;case ks:case wu:case Ac:Ue=Mo;break;case Xh:Ue=Xr;break;case"scroll":case"scrollend":Ue=Po;break;case"wheel":Ue=Kr;break;case"copy":case"cut":case"paste":Ue=B;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ue=An;break;case"toggle":case"beforetoggle":Ue=Ka}var Zt=(u&4)!==0,Cr=!Zt&&(l==="scroll"||l==="scrollend"),Re=Zt?Fe!==null?Fe+"Capture":null:Fe;Zt=[];for(var Se=Me,ke;Se!==null;){var Xe=Se;if(ke=Xe.stateNode,Xe=Xe.tag,Xe!==5&&Xe!==26&&Xe!==27||ke===null||Re===null||(Xe=nl(Se,Re),Xe!=null&&Zt.push(S0(Se,Xe,ke))),Cr)break;Se=Se.return}0<Zt.length&&(Fe=new Ue(Fe,an,null,h,Ge),Ze.push({event:Fe,listeners:Zt}))}}if((u&7)===0){e:{if(Fe=l==="mouseover"||l==="pointerover",Ue=l==="mouseout"||l==="pointerout",Fe&&h!==Ii&&(an=h.relatedTarget||h.fromElement)&&(zi(an)||an[Br]))break e;if((Ue||Fe)&&(Fe=Ge.window===Ge?Ge:(Fe=Ge.ownerDocument)?Fe.defaultView||Fe.parentWindow:window,Ue?(an=h.relatedTarget||h.toElement,Ue=Me,an=an?zi(an):null,an!==null&&(Cr=a(an),Zt=an.tag,an!==Cr||Zt!==5&&Zt!==27&&Zt!==6)&&(an=null)):(Ue=null,an=Me),Ue!==an)){if(Zt=sa,Xe="onMouseLeave",Re="onMouseEnter",Se="mouse",(l==="pointerout"||l==="pointerover")&&(Zt=An,Xe="onPointerLeave",Re="onPointerEnter",Se="pointer"),Cr=Ue==null?Fe:bi(Ue),ke=an==null?Fe:bi(an),Fe=new Zt(Xe,Se+"leave",Ue,h,Ge),Fe.target=Cr,Fe.relatedTarget=ke,Xe=null,zi(Ge)===Me&&(Zt=new Zt(Re,Se+"enter",an,h,Ge),Zt.target=ke,Zt.relatedTarget=Cr,Xe=Zt),Cr=Xe,Ue&&an)t:{for(Zt=Ue,Re=an,Se=0,ke=Zt;ke;ke=Zd(ke))Se++;for(ke=0,Xe=Re;Xe;Xe=Zd(Xe))ke++;for(;0<Se-ke;)Zt=Zd(Zt),Se--;for(;0<ke-Se;)Re=Zd(Re),ke--;for(;Se--;){if(Zt===Re||Re!==null&&Zt===Re.alternate)break t;Zt=Zd(Zt),Re=Zd(Re)}Zt=null}else Zt=null;Ue!==null&&Mw(Ze,Fe,Ue,Zt,!1),an!==null&&Cr!==null&&Mw(Ze,Cr,an,Zt,!0)}}e:{if(Fe=Me?bi(Me):window,Ue=Fe.nodeName&&Fe.nodeName.toLowerCase(),Ue==="select"||Ue==="input"&&Fe.type==="file")var Dt=gu;else if(hr(Fe))if(il)Dt=ui;else{Dt=If;var Tn=Ul}else Ue=Fe.nodeName,!Ue||Ue.toLowerCase()!=="input"||Fe.type!=="checkbox"&&Fe.type!=="radio"?Me&&yc(Me.elementType)&&(Dt=gu):Dt=mu;if(Dt&&(Dt=Dt(l,Me))){Za(Ze,Dt,h,Ge);break e}Tn&&Tn(l,Fe,Me),l==="focusout"&&Me&&Fe.type==="number"&&Me.memoizedProps.value!=null&&Ss(Fe,"number",Fe.value)}switch(Tn=Me?bi(Me):window,l){case"focusin":(hr(Tn)||Tn.contentEditable==="true")&&(xo=Tn,sl=Me,Bo=null);break;case"focusout":Bo=sl=xo=null;break;case"mousedown":ll=!0;break;case"contextmenu":case"mouseup":case"dragend":ll=!1,bo(Ze,h,Ge);break;case"selectionchange":if(zl)break;case"keydown":case"keyup":bo(Ze,h,Ge)}var zt;if(Qa)e:{switch(l){case"compositionstart":var Jt="onCompositionStart";break e;case"compositionend":Jt="onCompositionEnd";break e;case"compositionupdate":Jt="onCompositionUpdate";break e}Jt=void 0}else vn?Be(l,h)&&(Jt="onCompositionEnd"):l==="keydown"&&h.keyCode===229&&(Jt="onCompositionStart");Jt&&(K&&h.locale!=="ko"&&(vn||Jt!=="onCompositionStart"?Jt==="onCompositionEnd"&&vn&&(zt=rl()):(ko=Ge,Is="value"in ko?ko.value:ko.textContent,vn=!0)),Tn=Mp(Me,Jt),0<Tn.length&&(Jt=new ve(Jt,l,null,h,Ge),Ze.push({event:Jt,listeners:Tn}),zt?Jt.data=zt:(zt=st(h),zt!==null&&(Jt.data=zt)))),(zt=q?Vr(l,h):wn(l,h))&&(Jt=Mp(Me,"onBeforeInput"),0<Jt.length&&(Tn=new ve("onBeforeInput","beforeinput",null,h,Ge),Ze.push({event:Tn,listeners:Jt}),Tn.data=zt)),AT(Ze,l,Me,h,Ge)}Lw(Ze,u)})}function S0(l,u,h){return{instance:l,listener:u,currentTarget:h}}function Mp(l,u){for(var h=u+"Capture",y=[];l!==null;){var A=l,O=A.stateNode;if(A=A.tag,A!==5&&A!==26&&A!==27||O===null||(A=nl(l,h),A!=null&&y.unshift(S0(l,A,O)),A=nl(l,u),A!=null&&y.push(S0(l,A,O))),l.tag===3)return y;l=l.return}return[]}function Zd(l){if(l===null)return null;do l=l.return;while(l&&l.tag!==5&&l.tag!==27);return l||null}function Mw(l,u,h,y,A){for(var O=u._reactName,Z=[];h!==null&&h!==y;){var ce=h,xe=ce.alternate,Me=ce.stateNode;if(ce=ce.tag,xe!==null&&xe===y)break;ce!==5&&ce!==26&&ce!==27||Me===null||(xe=Me,A?(Me=nl(h,O),Me!=null&&Z.unshift(S0(h,Me,xe))):A||(Me=nl(h,O),Me!=null&&Z.push(S0(h,Me,xe)))),h=h.return}Z.length!==0&&l.push({event:u,listeners:Z})}var IT=/\r\n?/g,TT=/\u0000|\uFFFD/g;function jw(l){return(typeof l=="string"?l:""+l).replace(IT,`
`).replace(TT,"")}function Bw(l,u){return u=jw(u),jw(l)===u}function jp(){}function Er(l,u,h,y,A,O){switch(h){case"children":typeof y=="string"?u==="body"||u==="textarea"&&y===""||wa(l,y):(typeof y=="number"||typeof y=="bigint")&&u!=="body"&&wa(l,""+y);break;case"className":oi(l,"class",y);break;case"tabIndex":oi(l,"tabindex",y);break;case"dir":case"role":case"viewBox":case"width":case"height":oi(l,h,y);break;case"style":vc(l,y,O);break;case"data":if(u!=="object"){oi(l,"data",y);break}case"src":case"href":if(y===""&&(u!=="a"||h!=="href")){l.removeAttribute(h);break}if(y==null||typeof y=="function"||typeof y=="symbol"||typeof y=="boolean"){l.removeAttribute(h);break}y=tl(""+y),l.setAttribute(h,y);break;case"action":case"formAction":if(typeof y=="function"){l.setAttribute(h,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof O=="function"&&(h==="formAction"?(u!=="input"&&Er(l,u,"name",A.name,A,null),Er(l,u,"formEncType",A.formEncType,A,null),Er(l,u,"formMethod",A.formMethod,A,null),Er(l,u,"formTarget",A.formTarget,A,null)):(Er(l,u,"encType",A.encType,A,null),Er(l,u,"method",A.method,A,null),Er(l,u,"target",A.target,A,null)));if(y==null||typeof y=="symbol"||typeof y=="boolean"){l.removeAttribute(h);break}y=tl(""+y),l.setAttribute(h,y);break;case"onClick":y!=null&&(l.onclick=jp);break;case"onScroll":y!=null&&Ln("scroll",l);break;case"onScrollEnd":y!=null&&Ln("scrollend",l);break;case"dangerouslySetInnerHTML":if(y!=null){if(typeof y!="object"||!("__html"in y))throw Error(r(61));if(h=y.__html,h!=null){if(A.children!=null)throw Error(r(60));l.innerHTML=h}}break;case"multiple":l.multiple=y&&typeof y!="function"&&typeof y!="symbol";break;case"muted":l.muted=y&&typeof y!="function"&&typeof y!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(y==null||typeof y=="function"||typeof y=="boolean"||typeof y=="symbol"){l.removeAttribute("xlink:href");break}h=tl(""+y),l.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",h);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":y!=null&&typeof y!="function"&&typeof y!="symbol"?l.setAttribute(h,""+y):l.removeAttribute(h);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":y&&typeof y!="function"&&typeof y!="symbol"?l.setAttribute(h,""):l.removeAttribute(h);break;case"capture":case"download":y===!0?l.setAttribute(h,""):y!==!1&&y!=null&&typeof y!="function"&&typeof y!="symbol"?l.setAttribute(h,y):l.removeAttribute(h);break;case"cols":case"rows":case"size":case"span":y!=null&&typeof y!="function"&&typeof y!="symbol"&&!isNaN(y)&&1<=y?l.setAttribute(h,y):l.removeAttribute(h);break;case"rowSpan":case"start":y==null||typeof y=="function"||typeof y=="symbol"||isNaN(y)?l.removeAttribute(h):l.setAttribute(h,y);break;case"popover":Ln("beforetoggle",l),Ln("toggle",l),ns(l,"popover",y);break;case"xlinkActuate":si(l,"http://www.w3.org/1999/xlink","xlink:actuate",y);break;case"xlinkArcrole":si(l,"http://www.w3.org/1999/xlink","xlink:arcrole",y);break;case"xlinkRole":si(l,"http://www.w3.org/1999/xlink","xlink:role",y);break;case"xlinkShow":si(l,"http://www.w3.org/1999/xlink","xlink:show",y);break;case"xlinkTitle":si(l,"http://www.w3.org/1999/xlink","xlink:title",y);break;case"xlinkType":si(l,"http://www.w3.org/1999/xlink","xlink:type",y);break;case"xmlBase":si(l,"http://www.w3.org/XML/1998/namespace","xml:base",y);break;case"xmlLang":si(l,"http://www.w3.org/XML/1998/namespace","xml:lang",y);break;case"xmlSpace":si(l,"http://www.w3.org/XML/1998/namespace","xml:space",y);break;case"is":ns(l,"is",y);break;case"innerText":case"textContent":break;default:(!(2<h.length)||h[0]!=="o"&&h[0]!=="O"||h[1]!=="n"&&h[1]!=="N")&&(h=Cf.get(h)||h,ns(l,h,y))}}function lv(l,u,h,y,A,O){switch(h){case"style":vc(l,y,O);break;case"dangerouslySetInnerHTML":if(y!=null){if(typeof y!="object"||!("__html"in y))throw Error(r(61));if(h=y.__html,h!=null){if(A.children!=null)throw Error(r(60));l.innerHTML=h}}break;case"children":typeof y=="string"?wa(l,y):(typeof y=="number"||typeof y=="bigint")&&wa(l,""+y);break;case"onScroll":y!=null&&Ln("scroll",l);break;case"onScrollEnd":y!=null&&Ln("scrollend",l);break;case"onClick":y!=null&&(l.onclick=jp);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!No.hasOwnProperty(h))e:{if(h[0]==="o"&&h[1]==="n"&&(A=h.endsWith("Capture"),u=h.slice(2,A?h.length-7:void 0),O=l[Kn]||null,O=O!=null?O[h]:null,typeof O=="function"&&l.removeEventListener(u,O,A),typeof y=="function")){typeof O!="function"&&O!==null&&(h in l?l[h]=null:l.hasAttribute(h)&&l.removeAttribute(h)),l.addEventListener(u,y,A);break e}h in l?l[h]=y:y===!0?l.setAttribute(h,""):ns(l,h,y)}}}function Oa(l,u,h){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ln("error",l),Ln("load",l);var y=!1,A=!1,O;for(O in h)if(h.hasOwnProperty(O)){var Z=h[O];if(Z!=null)switch(O){case"src":y=!0;break;case"srcSet":A=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,u));default:Er(l,u,O,Z,h,null)}}A&&Er(l,u,"srcSet",h.srcSet,h,null),y&&Er(l,u,"src",h.src,h,null);return;case"input":Ln("invalid",l);var ce=O=Z=A=null,xe=null,Me=null;for(y in h)if(h.hasOwnProperty(y)){var Ge=h[y];if(Ge!=null)switch(y){case"name":A=Ge;break;case"type":Z=Ge;break;case"checked":xe=Ge;break;case"defaultChecked":Me=Ge;break;case"value":O=Ge;break;case"defaultValue":ce=Ge;break;case"children":case"dangerouslySetInnerHTML":if(Ge!=null)throw Error(r(137,u));break;default:Er(l,u,y,Ge,h,null)}}As(l,O,ce,xe,Me,Z,A,!1),ba(l);return;case"select":Ln("invalid",l),y=Z=O=null;for(A in h)if(h.hasOwnProperty(A)&&(ce=h[A],ce!=null))switch(A){case"value":O=ce;break;case"defaultValue":Z=ce;break;case"multiple":y=ce;default:Er(l,u,A,ce,h,null)}u=O,h=Z,l.multiple=!!y,u!=null?is(l,!!y,u,!1):h!=null&&is(l,!!y,h,!0);return;case"textarea":Ln("invalid",l),O=A=y=null;for(Z in h)if(h.hasOwnProperty(Z)&&(ce=h[Z],ce!=null))switch(Z){case"value":y=ce;break;case"defaultValue":A=ce;break;case"children":O=ce;break;case"dangerouslySetInnerHTML":if(ce!=null)throw Error(r(91));break;default:Er(l,u,Z,ce,h,null)}Es(l,y,A,O),ba(l);return;case"option":for(xe in h)if(h.hasOwnProperty(xe)&&(y=h[xe],y!=null))switch(xe){case"selected":l.selected=y&&typeof y!="function"&&typeof y!="symbol";break;default:Er(l,u,xe,y,h,null)}return;case"dialog":Ln("beforetoggle",l),Ln("toggle",l),Ln("cancel",l),Ln("close",l);break;case"iframe":case"object":Ln("load",l);break;case"video":case"audio":for(y=0;y<A0.length;y++)Ln(A0[y],l);break;case"image":Ln("error",l),Ln("load",l);break;case"details":Ln("toggle",l);break;case"embed":case"source":case"link":Ln("error",l),Ln("load",l);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Me in h)if(h.hasOwnProperty(Me)&&(y=h[Me],y!=null))switch(Me){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,u));default:Er(l,u,Me,y,h,null)}return;default:if(yc(u)){for(Ge in h)h.hasOwnProperty(Ge)&&(y=h[Ge],y!==void 0&&lv(l,u,Ge,y,h,void 0));return}}for(ce in h)h.hasOwnProperty(ce)&&(y=h[ce],y!=null&&Er(l,u,ce,y,h,null))}function RT(l,u,h,y){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var A=null,O=null,Z=null,ce=null,xe=null,Me=null,Ge=null;for(Ue in h){var Ze=h[Ue];if(h.hasOwnProperty(Ue)&&Ze!=null)switch(Ue){case"checked":break;case"value":break;case"defaultValue":xe=Ze;default:y.hasOwnProperty(Ue)||Er(l,u,Ue,null,y,Ze)}}for(var Fe in y){var Ue=y[Fe];if(Ze=h[Fe],y.hasOwnProperty(Fe)&&(Ue!=null||Ze!=null))switch(Fe){case"type":O=Ue;break;case"name":A=Ue;break;case"checked":Me=Ue;break;case"defaultChecked":Ge=Ue;break;case"value":Z=Ue;break;case"defaultValue":ce=Ue;break;case"children":case"dangerouslySetInnerHTML":if(Ue!=null)throw Error(r(137,u));break;default:Ue!==Ze&&Er(l,u,Fe,Ue,y,Ze)}}li(l,Z,ce,xe,Me,Ge,O,A);return;case"select":Ue=Z=ce=Fe=null;for(O in h)if(xe=h[O],h.hasOwnProperty(O)&&xe!=null)switch(O){case"value":break;case"multiple":Ue=xe;default:y.hasOwnProperty(O)||Er(l,u,O,null,y,xe)}for(A in y)if(O=y[A],xe=h[A],y.hasOwnProperty(A)&&(O!=null||xe!=null))switch(A){case"value":Fe=O;break;case"defaultValue":ce=O;break;case"multiple":Z=O;default:O!==xe&&Er(l,u,A,O,y,xe)}u=ce,h=Z,y=Ue,Fe!=null?is(l,!!h,Fe,!1):!!y!=!!h&&(u!=null?is(l,!!h,u,!0):is(l,!!h,h?[]:"",!1));return;case"textarea":Ue=Fe=null;for(ce in h)if(A=h[ce],h.hasOwnProperty(ce)&&A!=null&&!y.hasOwnProperty(ce))switch(ce){case"value":break;case"children":break;default:Er(l,u,ce,null,y,A)}for(Z in y)if(A=y[Z],O=h[Z],y.hasOwnProperty(Z)&&(A!=null||O!=null))switch(Z){case"value":Fe=A;break;case"defaultValue":Ue=A;break;case"children":break;case"dangerouslySetInnerHTML":if(A!=null)throw Error(r(91));break;default:A!==O&&Er(l,u,Z,A,y,O)}_n(l,Fe,Ue);return;case"option":for(var an in h)if(Fe=h[an],h.hasOwnProperty(an)&&Fe!=null&&!y.hasOwnProperty(an))switch(an){case"selected":l.selected=!1;break;default:Er(l,u,an,null,y,Fe)}for(xe in y)if(Fe=y[xe],Ue=h[xe],y.hasOwnProperty(xe)&&Fe!==Ue&&(Fe!=null||Ue!=null))switch(xe){case"selected":l.selected=Fe&&typeof Fe!="function"&&typeof Fe!="symbol";break;default:Er(l,u,xe,Fe,y,Ue)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Zt in h)Fe=h[Zt],h.hasOwnProperty(Zt)&&Fe!=null&&!y.hasOwnProperty(Zt)&&Er(l,u,Zt,null,y,Fe);for(Me in y)if(Fe=y[Me],Ue=h[Me],y.hasOwnProperty(Me)&&Fe!==Ue&&(Fe!=null||Ue!=null))switch(Me){case"children":case"dangerouslySetInnerHTML":if(Fe!=null)throw Error(r(137,u));break;default:Er(l,u,Me,Fe,y,Ue)}return;default:if(yc(u)){for(var Cr in h)Fe=h[Cr],h.hasOwnProperty(Cr)&&Fe!==void 0&&!y.hasOwnProperty(Cr)&&lv(l,u,Cr,void 0,y,Fe);for(Ge in y)Fe=y[Ge],Ue=h[Ge],!y.hasOwnProperty(Ge)||Fe===Ue||Fe===void 0&&Ue===void 0||lv(l,u,Ge,Fe,y,Ue);return}}for(var Re in h)Fe=h[Re],h.hasOwnProperty(Re)&&Fe!=null&&!y.hasOwnProperty(Re)&&Er(l,u,Re,null,y,Fe);for(Ze in y)Fe=y[Ze],Ue=h[Ze],!y.hasOwnProperty(Ze)||Fe===Ue||Fe==null&&Ue==null||Er(l,u,Ze,Fe,y,Ue)}var cv=null,uv=null;function Bp(l){return l.nodeType===9?l:l.ownerDocument}function Fw(l){switch(l){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Uw(l,u){if(l===0)switch(u){case"svg":return 1;case"math":return 2;default:return 0}return l===1&&u==="foreignObject"?0:l}function fv(l,u){return l==="textarea"||l==="noscript"||typeof u.children=="string"||typeof u.children=="number"||typeof u.children=="bigint"||typeof u.dangerouslySetInnerHTML=="object"&&u.dangerouslySetInnerHTML!==null&&u.dangerouslySetInnerHTML.__html!=null}var dv=null;function NT(){var l=window.event;return l&&l.type==="popstate"?l===dv?!1:(dv=l,!0):(dv=null,!1)}var zw=typeof setTimeout=="function"?setTimeout:void 0,DT=typeof clearTimeout=="function"?clearTimeout:void 0,Vw=typeof Promise=="function"?Promise:void 0,OT=typeof queueMicrotask=="function"?queueMicrotask:typeof Vw<"u"?function(l){return Vw.resolve(null).then(l).catch(kT)}:zw;function kT(l){setTimeout(function(){throw l})}function zu(l){return l==="head"}function qw(l,u){var h=u,y=0,A=0;do{var O=h.nextSibling;if(l.removeChild(h),O&&O.nodeType===8)if(h=O.data,h==="/$"){if(0<y&&8>y){h=y;var Z=l.ownerDocument;if(h&1&&E0(Z.documentElement),h&2&&E0(Z.body),h&4)for(h=Z.head,E0(h),Z=h.firstChild;Z;){var ce=Z.nextSibling,xe=Z.nodeName;Z[za]||xe==="SCRIPT"||xe==="STYLE"||xe==="LINK"&&Z.rel.toLowerCase()==="stylesheet"||h.removeChild(Z),Z=ce}}if(A===0){l.removeChild(O),k0(u);return}A--}else h==="$"||h==="$?"||h==="$!"?A++:y=h.charCodeAt(0)-48;else y=0;h=O}while(h);k0(u)}function hv(l){var u=l.firstChild;for(u&&u.nodeType===10&&(u=u.nextSibling);u;){var h=u;switch(u=u.nextSibling,h.nodeName){case"HTML":case"HEAD":case"BODY":hv(h),Ui(h);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(h.rel.toLowerCase()==="stylesheet")continue}l.removeChild(h)}}function LT(l,u,h,y){for(;l.nodeType===1;){var A=h;if(l.nodeName.toLowerCase()!==u.toLowerCase()){if(!y&&(l.nodeName!=="INPUT"||l.type!=="hidden"))break}else if(y){if(!l[za])switch(u){case"meta":if(!l.hasAttribute("itemprop"))break;return l;case"link":if(O=l.getAttribute("rel"),O==="stylesheet"&&l.hasAttribute("data-precedence"))break;if(O!==A.rel||l.getAttribute("href")!==(A.href==null||A.href===""?null:A.href)||l.getAttribute("crossorigin")!==(A.crossOrigin==null?null:A.crossOrigin)||l.getAttribute("title")!==(A.title==null?null:A.title))break;return l;case"style":if(l.hasAttribute("data-precedence"))break;return l;case"script":if(O=l.getAttribute("src"),(O!==(A.src==null?null:A.src)||l.getAttribute("type")!==(A.type==null?null:A.type)||l.getAttribute("crossorigin")!==(A.crossOrigin==null?null:A.crossOrigin))&&O&&l.hasAttribute("async")&&!l.hasAttribute("itemprop"))break;return l;default:return l}}else if(u==="input"&&l.type==="hidden"){var O=A.name==null?null:""+A.name;if(A.type==="hidden"&&l.getAttribute("name")===O)return l}else return l;if(l=wl(l.nextSibling),l===null)break}return null}function PT(l,u,h){if(u==="")return null;for(;l.nodeType!==3;)if((l.nodeType!==1||l.nodeName!=="INPUT"||l.type!=="hidden")&&!h||(l=wl(l.nextSibling),l===null))return null;return l}function pv(l){return l.data==="$!"||l.data==="$?"&&l.ownerDocument.readyState==="complete"}function MT(l,u){var h=l.ownerDocument;if(l.data!=="$?"||h.readyState==="complete")u();else{var y=function(){u(),h.removeEventListener("DOMContentLoaded",y)};h.addEventListener("DOMContentLoaded",y),l._reactRetry=y}}function wl(l){for(;l!=null;l=l.nextSibling){var u=l.nodeType;if(u===1||u===3)break;if(u===8){if(u=l.data,u==="$"||u==="$!"||u==="$?"||u==="F!"||u==="F")break;if(u==="/$")return null}}return l}var gv=null;function Hw(l){l=l.previousSibling;for(var u=0;l;){if(l.nodeType===8){var h=l.data;if(h==="$"||h==="$!"||h==="$?"){if(u===0)return l;u--}else h==="/$"&&u++}l=l.previousSibling}return null}function Ww(l,u,h){switch(u=Bp(h),l){case"html":if(l=u.documentElement,!l)throw Error(r(452));return l;case"head":if(l=u.head,!l)throw Error(r(453));return l;case"body":if(l=u.body,!l)throw Error(r(454));return l;default:throw Error(r(451))}}function E0(l){for(var u=l.attributes;u.length;)l.removeAttributeNode(u[0]);Ui(l)}var qs=new Map,$w=new Set;function Fp(l){return typeof l.getRootNode=="function"?l.getRootNode():l.nodeType===9?l:l.ownerDocument}var Uc=H.d;H.d={f:jT,r:BT,D:FT,C:UT,L:zT,m:VT,X:HT,S:qT,M:WT};function jT(){var l=Uc.f(),u=Np();return l||u}function BT(l){var u=xi(l);u!==null&&u.tag===5&&u.type==="form"?Vf(u):Uc.r(l)}var Jd=typeof document>"u"?null:document;function Gw(l,u,h){var y=Jd;if(y&&typeof u=="string"&&u){var A=bn(u);A='link[rel="'+l+'"][href="'+A+'"]',typeof h=="string"&&(A+='[crossorigin="'+h+'"]'),$w.has(A)||($w.add(A),l={rel:l,crossOrigin:h,href:u},y.querySelector(A)===null&&(u=y.createElement("link"),Oa(u,"link",l),dr(u),y.head.appendChild(u)))}}function FT(l){Uc.D(l),Gw("dns-prefetch",l,null)}function UT(l,u){Uc.C(l,u),Gw("preconnect",l,u)}function zT(l,u,h){Uc.L(l,u,h);var y=Jd;if(y&&l&&u){var A='link[rel="preload"][as="'+bn(u)+'"]';u==="image"&&h&&h.imageSrcSet?(A+='[imagesrcset="'+bn(h.imageSrcSet)+'"]',typeof h.imageSizes=="string"&&(A+='[imagesizes="'+bn(h.imageSizes)+'"]')):A+='[href="'+bn(l)+'"]';var O=A;switch(u){case"style":O=eh(l);break;case"script":O=th(l)}qs.has(O)||(l=d({rel:"preload",href:u==="image"&&h&&h.imageSrcSet?void 0:l,as:u},h),qs.set(O,l),y.querySelector(A)!==null||u==="style"&&y.querySelector(C0(O))||u==="script"&&y.querySelector(I0(O))||(u=y.createElement("link"),Oa(u,"link",l),dr(u),y.head.appendChild(u)))}}function VT(l,u){Uc.m(l,u);var h=Jd;if(h&&l){var y=u&&typeof u.as=="string"?u.as:"script",A='link[rel="modulepreload"][as="'+bn(y)+'"][href="'+bn(l)+'"]',O=A;switch(y){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":O=th(l)}if(!qs.has(O)&&(l=d({rel:"modulepreload",href:l},u),qs.set(O,l),h.querySelector(A)===null)){switch(y){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(h.querySelector(I0(O)))return}y=h.createElement("link"),Oa(y,"link",l),dr(y),h.head.appendChild(y)}}}function qT(l,u,h){Uc.S(l,u,h);var y=Jd;if(y&&l){var A=Ar(y).hoistableStyles,O=eh(l);u=u||"default";var Z=A.get(O);if(!Z){var ce={loading:0,preload:null};if(Z=y.querySelector(C0(O)))ce.loading=5;else{l=d({rel:"stylesheet",href:l,"data-precedence":u},h),(h=qs.get(O))&&mv(l,h);var xe=Z=y.createElement("link");dr(xe),Oa(xe,"link",l),xe._p=new Promise(function(Me,Ge){xe.onload=Me,xe.onerror=Ge}),xe.addEventListener("load",function(){ce.loading|=1}),xe.addEventListener("error",function(){ce.loading|=2}),ce.loading|=4,Up(Z,u,y)}Z={type:"stylesheet",instance:Z,count:1,state:ce},A.set(O,Z)}}}function HT(l,u){Uc.X(l,u);var h=Jd;if(h&&l){var y=Ar(h).hoistableScripts,A=th(l),O=y.get(A);O||(O=h.querySelector(I0(A)),O||(l=d({src:l,async:!0},u),(u=qs.get(A))&&vv(l,u),O=h.createElement("script"),dr(O),Oa(O,"link",l),h.head.appendChild(O)),O={type:"script",instance:O,count:1,state:null},y.set(A,O))}}function WT(l,u){Uc.M(l,u);var h=Jd;if(h&&l){var y=Ar(h).hoistableScripts,A=th(l),O=y.get(A);O||(O=h.querySelector(I0(A)),O||(l=d({src:l,async:!0,type:"module"},u),(u=qs.get(A))&&vv(l,u),O=h.createElement("script"),dr(O),Oa(O,"link",l),h.head.appendChild(O)),O={type:"script",instance:O,count:1,state:null},y.set(A,O))}}function Yw(l,u,h,y){var A=(A=he.current)?Fp(A):null;if(!A)throw Error(r(446));switch(l){case"meta":case"title":return null;case"style":return typeof h.precedence=="string"&&typeof h.href=="string"?(u=eh(h.href),h=Ar(A).hoistableStyles,y=h.get(u),y||(y={type:"style",instance:null,count:0,state:null},h.set(u,y)),y):{type:"void",instance:null,count:0,state:null};case"link":if(h.rel==="stylesheet"&&typeof h.href=="string"&&typeof h.precedence=="string"){l=eh(h.href);var O=Ar(A).hoistableStyles,Z=O.get(l);if(Z||(A=A.ownerDocument||A,Z={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},O.set(l,Z),(O=A.querySelector(C0(l)))&&!O._p&&(Z.instance=O,Z.state.loading=5),qs.has(l)||(h={rel:"preload",as:"style",href:h.href,crossOrigin:h.crossOrigin,integrity:h.integrity,media:h.media,hrefLang:h.hrefLang,referrerPolicy:h.referrerPolicy},qs.set(l,h),O||$T(A,l,h,Z.state))),u&&y===null)throw Error(r(528,""));return Z}if(u&&y!==null)throw Error(r(529,""));return null;case"script":return u=h.async,h=h.src,typeof h=="string"&&u&&typeof u!="function"&&typeof u!="symbol"?(u=th(h),h=Ar(A).hoistableScripts,y=h.get(u),y||(y={type:"script",instance:null,count:0,state:null},h.set(u,y)),y):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,l))}}function eh(l){return'href="'+bn(l)+'"'}function C0(l){return'link[rel="stylesheet"]['+l+"]"}function Xw(l){return d({},l,{"data-precedence":l.precedence,precedence:null})}function $T(l,u,h,y){l.querySelector('link[rel="preload"][as="style"]['+u+"]")?y.loading=1:(u=l.createElement("link"),y.preload=u,u.addEventListener("load",function(){return y.loading|=1}),u.addEventListener("error",function(){return y.loading|=2}),Oa(u,"link",h),dr(u),l.head.appendChild(u))}function th(l){return'[src="'+bn(l)+'"]'}function I0(l){return"script[async]"+l}function Kw(l,u,h){if(u.count++,u.instance===null)switch(u.type){case"style":var y=l.querySelector('style[data-href~="'+bn(h.href)+'"]');if(y)return u.instance=y,dr(y),y;var A=d({},h,{"data-href":h.href,"data-precedence":h.precedence,href:null,precedence:null});return y=(l.ownerDocument||l).createElement("style"),dr(y),Oa(y,"style",A),Up(y,h.precedence,l),u.instance=y;case"stylesheet":A=eh(h.href);var O=l.querySelector(C0(A));if(O)return u.state.loading|=4,u.instance=O,dr(O),O;y=Xw(h),(A=qs.get(A))&&mv(y,A),O=(l.ownerDocument||l).createElement("link"),dr(O);var Z=O;return Z._p=new Promise(function(ce,xe){Z.onload=ce,Z.onerror=xe}),Oa(O,"link",y),u.state.loading|=4,Up(O,h.precedence,l),u.instance=O;case"script":return O=th(h.src),(A=l.querySelector(I0(O)))?(u.instance=A,dr(A),A):(y=h,(A=qs.get(O))&&(y=d({},h),vv(y,A)),l=l.ownerDocument||l,A=l.createElement("script"),dr(A),Oa(A,"link",y),l.head.appendChild(A),u.instance=A);case"void":return null;default:throw Error(r(443,u.type))}else u.type==="stylesheet"&&(u.state.loading&4)===0&&(y=u.instance,u.state.loading|=4,Up(y,h.precedence,l));return u.instance}function Up(l,u,h){for(var y=h.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),A=y.length?y[y.length-1]:null,O=A,Z=0;Z<y.length;Z++){var ce=y[Z];if(ce.dataset.precedence===u)O=ce;else if(O!==A)break}O?O.parentNode.insertBefore(l,O.nextSibling):(u=h.nodeType===9?h.head:h,u.insertBefore(l,u.firstChild))}function mv(l,u){l.crossOrigin==null&&(l.crossOrigin=u.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=u.referrerPolicy),l.title==null&&(l.title=u.title)}function vv(l,u){l.crossOrigin==null&&(l.crossOrigin=u.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=u.referrerPolicy),l.integrity==null&&(l.integrity=u.integrity)}var zp=null;function Qw(l,u,h){if(zp===null){var y=new Map,A=zp=new Map;A.set(h,y)}else A=zp,y=A.get(h),y||(y=new Map,A.set(h,y));if(y.has(l))return y;for(y.set(l,null),h=h.getElementsByTagName(l),A=0;A<h.length;A++){var O=h[A];if(!(O[za]||O[fr]||l==="link"&&O.getAttribute("rel")==="stylesheet")&&O.namespaceURI!=="http://www.w3.org/2000/svg"){var Z=O.getAttribute(u)||"";Z=l+Z;var ce=y.get(Z);ce?ce.push(O):y.set(Z,[O])}}return y}function Zw(l,u,h){l=l.ownerDocument||l,l.head.insertBefore(h,u==="title"?l.querySelector("head > title"):null)}function GT(l,u,h){if(h===1||u.itemProp!=null)return!1;switch(l){case"meta":case"title":return!0;case"style":if(typeof u.precedence!="string"||typeof u.href!="string"||u.href==="")break;return!0;case"link":if(typeof u.rel!="string"||typeof u.href!="string"||u.href===""||u.onLoad||u.onError)break;switch(u.rel){case"stylesheet":return l=u.disabled,typeof u.precedence=="string"&&l==null;default:return!0}case"script":if(u.async&&typeof u.async!="function"&&typeof u.async!="symbol"&&!u.onLoad&&!u.onError&&u.src&&typeof u.src=="string")return!0}return!1}function Jw(l){return!(l.type==="stylesheet"&&(l.state.loading&3)===0)}var T0=null;function YT(){}function XT(l,u,h){if(T0===null)throw Error(r(475));var y=T0;if(u.type==="stylesheet"&&(typeof h.media!="string"||matchMedia(h.media).matches!==!1)&&(u.state.loading&4)===0){if(u.instance===null){var A=eh(h.href),O=l.querySelector(C0(A));if(O){l=O._p,l!==null&&typeof l=="object"&&typeof l.then=="function"&&(y.count++,y=Vp.bind(y),l.then(y,y)),u.state.loading|=4,u.instance=O,dr(O);return}O=l.ownerDocument||l,h=Xw(h),(A=qs.get(A))&&mv(h,A),O=O.createElement("link"),dr(O);var Z=O;Z._p=new Promise(function(ce,xe){Z.onload=ce,Z.onerror=xe}),Oa(O,"link",h),u.instance=O}y.stylesheets===null&&(y.stylesheets=new Map),y.stylesheets.set(u,l),(l=u.state.preload)&&(u.state.loading&3)===0&&(y.count++,u=Vp.bind(y),l.addEventListener("load",u),l.addEventListener("error",u))}}function KT(){if(T0===null)throw Error(r(475));var l=T0;return l.stylesheets&&l.count===0&&yv(l,l.stylesheets),0<l.count?function(u){var h=setTimeout(function(){if(l.stylesheets&&yv(l,l.stylesheets),l.unsuspend){var y=l.unsuspend;l.unsuspend=null,y()}},6e4);return l.unsuspend=u,function(){l.unsuspend=null,clearTimeout(h)}}:null}function Vp(){if(this.count--,this.count===0){if(this.stylesheets)yv(this,this.stylesheets);else if(this.unsuspend){var l=this.unsuspend;this.unsuspend=null,l()}}}var qp=null;function yv(l,u){l.stylesheets=null,l.unsuspend!==null&&(l.count++,qp=new Map,u.forEach(QT,l),qp=null,Vp.call(l))}function QT(l,u){if(!(u.state.loading&4)){var h=qp.get(l);if(h)var y=h.get(null);else{h=new Map,qp.set(l,h);for(var A=l.querySelectorAll("link[data-precedence],style[data-precedence]"),O=0;O<A.length;O++){var Z=A[O];(Z.nodeName==="LINK"||Z.getAttribute("media")!=="not all")&&(h.set(Z.dataset.precedence,Z),y=Z)}y&&h.set(null,y)}A=u.instance,Z=A.getAttribute("data-precedence"),O=h.get(Z)||y,O===y&&h.set(null,A),h.set(Z,A),this.count++,y=Vp.bind(this),A.addEventListener("load",y),A.addEventListener("error",y),O?O.parentNode.insertBefore(A,O.nextSibling):(l=l.nodeType===9?l.head:l,l.insertBefore(A,l.firstChild)),u.state.loading|=4}}var R0={$$typeof:M,Provider:null,Consumer:null,_currentValue:te,_currentValue2:te,_threadCount:0};function ZT(l,u,h,y,A,O,Z,ce){this.tag=1,this.containerInfo=l,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Mn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Mn(0),this.hiddenUpdates=Mn(null),this.identifierPrefix=y,this.onUncaughtError=A,this.onCaughtError=O,this.onRecoverableError=Z,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=ce,this.incompleteTransitions=new Map}function e3(l,u,h,y,A,O,Z,ce,xe,Me,Ge,Ze){return l=new ZT(l,u,h,Z,ce,xe,Me,Ze),u=1,O===!0&&(u|=24),O=ca(3,null,null,u),l.current=O,O.stateNode=l,u=Zh(),u.refCount++,l.pooledCache=u,u.refCount++,O.memoizedState={element:y,isDehydrated:h,cache:u},Le(O),l}function t3(l){return l?(l=Vi,l):Vi}function n3(l,u,h,y,A,O){A=t3(A),y.context===null?y.context=A:y.pendingContext=A,y=qe(u),y.payload={element:h},O=O===void 0?null:O,O!==null&&(y.callback=O),h=tt(l,y,u),h!==null&&(hs(h,l,u),Qe(h,l,u))}function r3(l,u){if(l=l.memoizedState,l!==null&&l.dehydrated!==null){var h=l.retryLane;l.retryLane=h!==0&&h<u?h:u}}function xv(l,u){r3(l,u),(l=l.alternate)&&r3(l,u)}function i3(l){if(l.tag===13){var u=Ec(l,67108864);u!==null&&hs(u,l,67108864),xv(l,67108864)}}var Hp=!0;function JT(l,u,h,y){var A=U.T;U.T=null;var O=H.p;try{H.p=2,bv(l,u,h,y)}finally{H.p=O,U.T=A}}function e7(l,u,h,y){var A=U.T;U.T=null;var O=H.p;try{H.p=8,bv(l,u,h,y)}finally{H.p=O,U.T=A}}function bv(l,u,h,y){if(Hp){var A=wv(y);if(A===null)sv(l,u,y,Wp,h),o3(l,y);else if(n7(A,l,u,h,y))y.stopPropagation();else if(o3(l,y),u&4&&-1<t7.indexOf(l)){for(;A!==null;){var O=xi(A);if(O!==null)switch(O.tag){case 3:if(O=O.stateNode,O.current.memoizedState.isDehydrated){var Z=jt(O.pendingLanes);if(Z!==0){var ce=O;for(ce.pendingLanes|=2,ce.entangledLanes|=2;Z;){var xe=1<<31-ut(Z);ce.entanglements[1]|=xe,Z&=~xe}Xl(O),(gr&6)===0&&(Tp=dt()+500,_0(0))}}break;case 13:ce=Ec(O,2),ce!==null&&hs(ce,O,2),Np(),xv(O,2)}if(O=wv(y),O===null&&sv(l,u,y,Wp,h),O===A)break;A=O}A!==null&&y.stopPropagation()}else sv(l,u,y,null,h)}}function wv(l){return l=$a(l),_v(l)}var Wp=null;function _v(l){if(Wp=null,l=zi(l),l!==null){var u=a(l);if(u===null)l=null;else{var h=u.tag;if(h===13){if(l=o(u),l!==null)return l;l=null}else if(h===3){if(u.stateNode.current.memoizedState.isDehydrated)return u.tag===3?u.stateNode.containerInfo:null;l=null}else u!==l&&(l=null)}}return Wp=l,null}function a3(l){switch(l){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(at()){case Ee:return 2;case lt:return 8;case Ye:case vt:return 32;case ct:return 268435456;default:return 32}default:return 32}}var Av=!1,Vu=null,qu=null,Hu=null,N0=new Map,D0=new Map,Wu=[],t7="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function o3(l,u){switch(l){case"focusin":case"focusout":Vu=null;break;case"dragenter":case"dragleave":qu=null;break;case"mouseover":case"mouseout":Hu=null;break;case"pointerover":case"pointerout":N0.delete(u.pointerId);break;case"gotpointercapture":case"lostpointercapture":D0.delete(u.pointerId)}}function O0(l,u,h,y,A,O){return l===null||l.nativeEvent!==O?(l={blockedOn:u,domEventName:h,eventSystemFlags:y,nativeEvent:O,targetContainers:[A]},u!==null&&(u=xi(u),u!==null&&i3(u)),l):(l.eventSystemFlags|=y,u=l.targetContainers,A!==null&&u.indexOf(A)===-1&&u.push(A),l)}function n7(l,u,h,y,A){switch(u){case"focusin":return Vu=O0(Vu,l,u,h,y,A),!0;case"dragenter":return qu=O0(qu,l,u,h,y,A),!0;case"mouseover":return Hu=O0(Hu,l,u,h,y,A),!0;case"pointerover":var O=A.pointerId;return N0.set(O,O0(N0.get(O)||null,l,u,h,y,A)),!0;case"gotpointercapture":return O=A.pointerId,D0.set(O,O0(D0.get(O)||null,l,u,h,y,A)),!0}return!1}function s3(l){var u=zi(l.target);if(u!==null){var h=a(u);if(h!==null){if(u=h.tag,u===13){if(u=o(h),u!==null){l.blockedOn=u,Wt(l.priority,function(){if(h.tag===13){var y=ds();y=wr(y);var A=Ec(h,y);A!==null&&hs(A,h,y),xv(h,y)}});return}}else if(u===3&&h.stateNode.current.memoizedState.isDehydrated){l.blockedOn=h.tag===3?h.stateNode.containerInfo:null;return}}}l.blockedOn=null}function $p(l){if(l.blockedOn!==null)return!1;for(var u=l.targetContainers;0<u.length;){var h=wv(l.nativeEvent);if(h===null){h=l.nativeEvent;var y=new h.constructor(h.type,h);Ii=y,h.target.dispatchEvent(y),Ii=null}else return u=xi(h),u!==null&&i3(u),l.blockedOn=h,!1;u.shift()}return!0}function l3(l,u,h){$p(l)&&h.delete(u)}function r7(){Av=!1,Vu!==null&&$p(Vu)&&(Vu=null),qu!==null&&$p(qu)&&(qu=null),Hu!==null&&$p(Hu)&&(Hu=null),N0.forEach(l3),D0.forEach(l3)}function Gp(l,u){l.blockedOn===u&&(l.blockedOn=null,Av||(Av=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,r7)))}var Yp=null;function c3(l){Yp!==l&&(Yp=l,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Yp===l&&(Yp=null);for(var u=0;u<l.length;u+=3){var h=l[u],y=l[u+1],A=l[u+2];if(typeof y!="function"){if(_v(y||h)===null)continue;break}var O=xi(h);O!==null&&(l.splice(u,3),u-=3,Us(O,{pending:!0,data:A,method:h.method,action:y},y,A))}}))}function k0(l){function u(xe){return Gp(xe,l)}Vu!==null&&Gp(Vu,l),qu!==null&&Gp(qu,l),Hu!==null&&Gp(Hu,l),N0.forEach(u),D0.forEach(u);for(var h=0;h<Wu.length;h++){var y=Wu[h];y.blockedOn===l&&(y.blockedOn=null)}for(;0<Wu.length&&(h=Wu[0],h.blockedOn===null);)s3(h),h.blockedOn===null&&Wu.shift();if(h=(l.ownerDocument||l).$$reactFormReplay,h!=null)for(y=0;y<h.length;y+=3){var A=h[y],O=h[y+1],Z=A[Kn]||null;if(typeof O=="function")Z||c3(h);else if(Z){var ce=null;if(O&&O.hasAttribute("formAction")){if(A=O,Z=O[Kn]||null)ce=Z.formAction;else if(_v(A)!==null)continue}else ce=Z.action;typeof ce=="function"?h[y+1]=ce:(h.splice(y,3),y-=3),c3(h)}}}function Sv(l){this._internalRoot=l}Xp.prototype.render=Sv.prototype.render=function(l){var u=this._internalRoot;if(u===null)throw Error(r(409));var h=u.current,y=ds();n3(h,y,l,u,null,null)},Xp.prototype.unmount=Sv.prototype.unmount=function(){var l=this._internalRoot;if(l!==null){this._internalRoot=null;var u=l.containerInfo;n3(l.current,2,null,l,null,null),Np(),u[Br]=null}};function Xp(l){this._internalRoot=l}Xp.prototype.unstable_scheduleHydration=function(l){if(l){var u=Tr();l={blockedOn:null,target:l,priority:u};for(var h=0;h<Wu.length&&u!==0&&u<Wu[h].priority;h++);Wu.splice(h,0,l),h===0&&s3(l)}};var u3=e.version;if(u3!=="19.1.0")throw Error(r(527,u3,"19.1.0"));H.findDOMNode=function(l){var u=l._reactInternals;if(u===void 0)throw typeof l.render=="function"?Error(r(188)):(l=Object.keys(l).join(","),Error(r(268,l)));return l=c(u),l=l!==null?f(l):null,l=l===null?null:l.stateNode,l};var i7={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:U,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Kp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Kp.isDisabled&&Kp.supportsFiber)try{ht=Kp.inject(i7),yt=Kp}catch{}}return P0.createRoot=function(l,u){if(!i(l))throw Error(r(299));var h=!1,y="",A=Cb,O=Ib,Z=Tb,ce=null;return u!=null&&(u.unstable_strictMode===!0&&(h=!0),u.identifierPrefix!==void 0&&(y=u.identifierPrefix),u.onUncaughtError!==void 0&&(A=u.onUncaughtError),u.onCaughtError!==void 0&&(O=u.onCaughtError),u.onRecoverableError!==void 0&&(Z=u.onRecoverableError),u.unstable_transitionCallbacks!==void 0&&(ce=u.unstable_transitionCallbacks)),u=e3(l,1,!1,null,null,h,y,A,O,Z,ce,null),l[Br]=u.current,ov(l),new Sv(u)},P0.hydrateRoot=function(l,u,h){if(!i(l))throw Error(r(299));var y=!1,A="",O=Cb,Z=Ib,ce=Tb,xe=null,Me=null;return h!=null&&(h.unstable_strictMode===!0&&(y=!0),h.identifierPrefix!==void 0&&(A=h.identifierPrefix),h.onUncaughtError!==void 0&&(O=h.onUncaughtError),h.onCaughtError!==void 0&&(Z=h.onCaughtError),h.onRecoverableError!==void 0&&(ce=h.onRecoverableError),h.unstable_transitionCallbacks!==void 0&&(xe=h.unstable_transitionCallbacks),h.formState!==void 0&&(Me=h.formState)),u=e3(l,1,!0,u,h??null,y,A,O,Z,ce,xe,Me),u.context=t3(null),h=u.current,y=ds(),y=wr(y),A=qe(y),A.callback=null,tt(h,A,y),h=y,u.current.lanes=h,Ut(u,h),Xl(u),l[Br]=u.current,ov(l),new Xp(u)},P0.version="19.1.0",P0}var b3;function PA(){if(b3)return Iv.exports;b3=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Iv.exports=g7(),Iv.exports}var m7=PA();const v7=LA(m7);var M0={},w3;function y7(){if(w3)return M0;w3=1,Object.defineProperty(M0,"__esModule",{value:!0}),M0.parse=o,M0.serialize=f;const n=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,t=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,r=/^[\u0020-\u003A\u003D-\u007E]*$/,i=Object.prototype.toString,a=(()=>{const g=function(){};return g.prototype=Object.create(null),g})();function o(g,m){const x=new a,_=g.length;if(_<2)return x;const C=(m==null?void 0:m.decode)||d;let S=0;do{const k=g.indexOf("=",S);if(k===-1)break;const M=g.indexOf(";",S),P=M===-1?_:M;if(k>P){S=g.lastIndexOf(";",k-1)+1;continue}const Y=s(g,S,k),z=c(g,k,Y),F=g.slice(Y,z);if(x[F]===void 0){let I=s(g,k+1,P),T=c(g,P,I);const j=C(g.slice(I,T));x[F]=j}S=P+1}while(S<_);return x}function s(g,m,x){do{const _=g.charCodeAt(m);if(_!==32&&_!==9)return m}while(++m<x);return x}function c(g,m,x){for(;m>x;){const _=g.charCodeAt(--m);if(_!==32&&_!==9)return m+1}return x}function f(g,m,x){const _=(x==null?void 0:x.encode)||encodeURIComponent;if(!n.test(g))throw new TypeError(`argument name is invalid: ${g}`);const C=_(m);if(!e.test(C))throw new TypeError(`argument val is invalid: ${m}`);let S=g+"="+C;if(!x)return S;if(x.maxAge!==void 0){if(!Number.isInteger(x.maxAge))throw new TypeError(`option maxAge is invalid: ${x.maxAge}`);S+="; Max-Age="+x.maxAge}if(x.domain){if(!t.test(x.domain))throw new TypeError(`option domain is invalid: ${x.domain}`);S+="; Domain="+x.domain}if(x.path){if(!r.test(x.path))throw new TypeError(`option path is invalid: ${x.path}`);S+="; Path="+x.path}if(x.expires){if(!p(x.expires)||!Number.isFinite(x.expires.valueOf()))throw new TypeError(`option expires is invalid: ${x.expires}`);S+="; Expires="+x.expires.toUTCString()}if(x.httpOnly&&(S+="; HttpOnly"),x.secure&&(S+="; Secure"),x.partitioned&&(S+="; Partitioned"),x.priority)switch(typeof x.priority=="string"?x.priority.toLowerCase():void 0){case"low":S+="; Priority=Low";break;case"medium":S+="; Priority=Medium";break;case"high":S+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${x.priority}`)}if(x.sameSite)switch(typeof x.sameSite=="string"?x.sameSite.toLowerCase():x.sameSite){case!0:case"strict":S+="; SameSite=Strict";break;case"lax":S+="; SameSite=Lax";break;case"none":S+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${x.sameSite}`)}return S}function d(g){if(g.indexOf("%")===-1)return g;try{return decodeURIComponent(g)}catch{return g}}function p(g){return i.call(g)==="[object Date]"}return M0}y7();var _3="popstate";function x7(n={}){function e(r,i){let{pathname:a,search:o,hash:s}=r.location;return ky("",{pathname:a,search:o,hash:s},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function t(r,i){return typeof i=="string"?i:f1(i)}return w7(e,t,null,n)}function gi(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function sc(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function b7(){return Math.random().toString(36).substring(2,10)}function A3(n,e){return{usr:n.state,key:n.key,idx:e}}function ky(n,e,t=null,r){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?jh(e):e,state:t,key:e&&e.key||r||b7()}}function f1({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function jh(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substring(r),n=n.substring(0,r)),n&&(e.pathname=n)}return e}function w7(n,e,t,r={}){let{window:i=document.defaultView,v5Compat:a=!1}=r,o=i.history,s="POP",c=null,f=d();f==null&&(f=0,o.replaceState({...o.state,idx:f},""));function d(){return(o.state||{idx:null}).idx}function p(){s="POP";let C=d(),S=C==null?null:C-f;f=C,c&&c({action:s,location:_.location,delta:S})}function g(C,S){s="PUSH";let k=ky(_.location,C,S);f=d()+1;let M=A3(k,f),P=_.createHref(k);try{o.pushState(M,"",P)}catch(Y){if(Y instanceof DOMException&&Y.name==="DataCloneError")throw Y;i.location.assign(P)}a&&c&&c({action:s,location:_.location,delta:1})}function m(C,S){s="REPLACE";let k=ky(_.location,C,S);f=d();let M=A3(k,f),P=_.createHref(k);o.replaceState(M,"",P),a&&c&&c({action:s,location:_.location,delta:0})}function x(C){return _7(C)}let _={get action(){return s},get location(){return n(i,o)},listen(C){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(_3,p),c=C,()=>{i.removeEventListener(_3,p),c=null}},createHref(C){return e(i,C)},createURL:x,encodeLocation(C){let S=x(C);return{pathname:S.pathname,search:S.search,hash:S.hash}},push:g,replace:m,go(C){return o.go(C)}};return _}function _7(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),gi(t,"No window.location.(origin|href) available to create URL");let r=typeof n=="string"?n:f1(n);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=t+r),new URL(r,t)}function MA(n,e,t="/"){return A7(n,e,t,!1)}function A7(n,e,t,r){let i=typeof e=="string"?jh(e):e,a=Qc(i.pathname||"/",t);if(a==null)return null;let o=jA(n);S7(o);let s=null;for(let c=0;s==null&&c<o.length;++c){let f=P7(a);s=k7(o[c],f,r)}return s}function jA(n,e=[],t=[],r=""){let i=(a,o,s)=>{let c={relativePath:s===void 0?a.path||"":s,caseSensitive:a.caseSensitive===!0,childrenIndex:o,route:a};c.relativePath.startsWith("/")&&(gi(c.relativePath.startsWith(r),`Absolute route path "${c.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),c.relativePath=c.relativePath.slice(r.length));let f=Yc([r,c.relativePath]),d=t.concat(c);a.children&&a.children.length>0&&(gi(a.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${f}".`),jA(a.children,e,d,f)),!(a.path==null&&!a.index)&&e.push({path:f,score:D7(f,a.index),routesMeta:d})};return n.forEach((a,o)=>{var s;if(a.path===""||!((s=a.path)!=null&&s.includes("?")))i(a,o);else for(let c of BA(a.path))i(a,o,c)}),e}function BA(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,i=t.endsWith("?"),a=t.replace(/\?$/,"");if(r.length===0)return i?[a,""]:[a];let o=BA(r.join("/")),s=[];return s.push(...o.map(c=>c===""?a:[a,c].join("/"))),i&&s.push(...o),s.map(c=>n.startsWith("/")&&c===""?"/":c)}function S7(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:O7(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}var E7=/^:[\w-]+$/,C7=3,I7=2,T7=1,R7=10,N7=-2,S3=n=>n==="*";function D7(n,e){let t=n.split("/"),r=t.length;return t.some(S3)&&(r+=N7),e&&(r+=I7),t.filter(i=>!S3(i)).reduce((i,a)=>i+(E7.test(a)?C7:a===""?T7:R7),r)}function O7(n,e){return n.length===e.length&&n.slice(0,-1).every((r,i)=>r===e[i])?n[n.length-1]-e[e.length-1]:0}function k7(n,e,t=!1){let{routesMeta:r}=n,i={},a="/",o=[];for(let s=0;s<r.length;++s){let c=r[s],f=s===r.length-1,d=a==="/"?e:e.slice(a.length)||"/",p=zg({path:c.relativePath,caseSensitive:c.caseSensitive,end:f},d),g=c.route;if(!p&&f&&t&&!r[r.length-1].route.index&&(p=zg({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},d)),!p)return null;Object.assign(i,p.params),o.push({params:i,pathname:Yc([a,p.pathname]),pathnameBase:F7(Yc([a,p.pathnameBase])),route:g}),p.pathnameBase!=="/"&&(a=Yc([a,p.pathnameBase]))}return o}function zg(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=L7(n.path,n.caseSensitive,n.end),i=e.match(t);if(!i)return null;let a=i[0],o=a.replace(/(.)\/+$/,"$1"),s=i.slice(1);return{params:r.reduce((f,{paramName:d,isOptional:p},g)=>{if(d==="*"){let x=s[g]||"";o=a.slice(0,a.length-x.length).replace(/(.)\/+$/,"$1")}const m=s[g];return p&&!m?f[d]=void 0:f[d]=(m||"").replace(/%2F/g,"/"),f},{}),pathname:a,pathnameBase:o,pattern:n}}function L7(n,e=!1,t=!0){sc(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let r=[],i="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,s,c)=>(r.push({paramName:s,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),i+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":n!==""&&n!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function P7(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return sc(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function Qc(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}function M7(n,e="/"){let{pathname:t,search:r="",hash:i=""}=typeof n=="string"?jh(n):n;return{pathname:t?t.startsWith("/")?t:j7(t,e):e,search:U7(r),hash:z7(i)}}function j7(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(i=>{i===".."?t.length>1&&t.pop():i!=="."&&t.push(i)}),t.length>1?t.join("/"):"/"}function Dv(n,e,t,r){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function B7(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function FA(n){let e=B7(n);return e.map((t,r)=>r===e.length-1?t.pathname:t.pathnameBase)}function UA(n,e,t,r=!1){let i;typeof n=="string"?i=jh(n):(i={...n},gi(!i.pathname||!i.pathname.includes("?"),Dv("?","pathname","search",i)),gi(!i.pathname||!i.pathname.includes("#"),Dv("#","pathname","hash",i)),gi(!i.search||!i.search.includes("#"),Dv("#","search","hash",i)));let a=n===""||i.pathname==="",o=a?"/":i.pathname,s;if(o==null)s=t;else{let p=e.length-1;if(!r&&o.startsWith("..")){let g=o.split("/");for(;g[0]==="..";)g.shift(),p-=1;i.pathname=g.join("/")}s=p>=0?e[p]:"/"}let c=M7(i,s),f=o&&o!=="/"&&o.endsWith("/"),d=(a||o===".")&&t.endsWith("/");return!c.pathname.endsWith("/")&&(f||d)&&(c.pathname+="/"),c}var Yc=n=>n.join("/").replace(/\/\/+/g,"/"),F7=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),U7=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,z7=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function V7(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}var zA=["POST","PUT","PATCH","DELETE"];new Set(zA);var q7=["GET",...zA];new Set(q7);var Bh=le.createContext(null);Bh.displayName="DataRouter";var Tm=le.createContext(null);Tm.displayName="DataRouterState";var VA=le.createContext({isTransitioning:!1});VA.displayName="ViewTransition";var H7=le.createContext(new Map);H7.displayName="Fetchers";var W7=le.createContext(null);W7.displayName="Await";var dc=le.createContext(null);dc.displayName="Navigation";var N1=le.createContext(null);N1.displayName="Location";var ou=le.createContext({outlet:null,matches:[],isDataRoute:!1});ou.displayName="Route";var Vx=le.createContext(null);Vx.displayName="RouteError";function $7(n,{relative:e}={}){gi(D1(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:r}=le.useContext(dc),{hash:i,pathname:a,search:o}=O1(n,{relative:e}),s=a;return t!=="/"&&(s=a==="/"?t:Yc([t,a])),r.createHref({pathname:s,search:o,hash:i})}function D1(){return le.useContext(N1)!=null}function su(){return gi(D1(),"useLocation() may be used only in the context of a <Router> component."),le.useContext(N1).location}var qA="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function HA(n){le.useContext(dc).static||le.useLayoutEffect(n)}function Rm(){let{isDataRoute:n}=le.useContext(ou);return n?aR():G7()}function G7(){gi(D1(),"useNavigate() may be used only in the context of a <Router> component.");let n=le.useContext(Bh),{basename:e,navigator:t}=le.useContext(dc),{matches:r}=le.useContext(ou),{pathname:i}=su(),a=JSON.stringify(FA(r)),o=le.useRef(!1);return HA(()=>{o.current=!0}),le.useCallback((c,f={})=>{if(sc(o.current,qA),!o.current)return;if(typeof c=="number"){t.go(c);return}let d=UA(c,JSON.parse(a),i,f.relative==="path");n==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:Yc([e,d.pathname])),(f.replace?t.replace:t.push)(d,f.state,f)},[e,t,a,i,n])}le.createContext(null);function O1(n,{relative:e}={}){let{matches:t}=le.useContext(ou),{pathname:r}=su(),i=JSON.stringify(FA(t));return le.useMemo(()=>UA(n,JSON.parse(i),r,e==="path"),[n,i,r,e])}function Y7(n,e){return WA(n,e)}function WA(n,e,t,r){var S;gi(D1(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=le.useContext(dc),{matches:a}=le.useContext(ou),o=a[a.length-1],s=o?o.params:{},c=o?o.pathname:"/",f=o?o.pathnameBase:"/",d=o&&o.route;{let k=d&&d.path||"";$A(c,!d||k.endsWith("*")||k.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${c}" (under <Route path="${k}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${k}"> to <Route path="${k==="/"?"*":`${k}/*`}">.`)}let p=su(),g;if(e){let k=typeof e=="string"?jh(e):e;gi(f==="/"||((S=k.pathname)==null?void 0:S.startsWith(f)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${f}" but pathname "${k.pathname}" was given in the \`location\` prop.`),g=k}else g=p;let m=g.pathname||"/",x=m;if(f!=="/"){let k=f.replace(/^\//,"").split("/");x="/"+m.replace(/^\//,"").split("/").slice(k.length).join("/")}let _=MA(n,{pathname:x});sc(d||_!=null,`No routes matched location "${g.pathname}${g.search}${g.hash}" `),sc(_==null||_[_.length-1].route.element!==void 0||_[_.length-1].route.Component!==void 0||_[_.length-1].route.lazy!==void 0,`Matched leaf route at location "${g.pathname}${g.search}${g.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let C=J7(_&&_.map(k=>Object.assign({},k,{params:Object.assign({},s,k.params),pathname:Yc([f,i.encodeLocation?i.encodeLocation(k.pathname).pathname:k.pathname]),pathnameBase:k.pathnameBase==="/"?f:Yc([f,i.encodeLocation?i.encodeLocation(k.pathnameBase).pathname:k.pathnameBase])})),a,t,r);return e&&C?le.createElement(N1.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...g},navigationType:"POP"}},C):C}function X7(){let n=iR(),e=V7(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},a={padding:"2px 4px",backgroundColor:r},o=null;return console.error("Error handled by React Router default ErrorBoundary:",n),o=le.createElement(le.Fragment,null,le.createElement("p",null," Hey developer "),le.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",le.createElement("code",{style:a},"ErrorBoundary")," or"," ",le.createElement("code",{style:a},"errorElement")," prop on your route.")),le.createElement(le.Fragment,null,le.createElement("h2",null,"Unexpected Application Error!"),le.createElement("h3",{style:{fontStyle:"italic"}},e),t?le.createElement("pre",{style:i},t):null,o)}var K7=le.createElement(X7,null),Q7=class extends le.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){console.error("React Router caught the following error during render",n,e)}render(){return this.state.error!==void 0?le.createElement(ou.Provider,{value:this.props.routeContext},le.createElement(Vx.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function Z7({routeContext:n,match:e,children:t}){let r=le.useContext(Bh);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),le.createElement(ou.Provider,{value:n},t)}function J7(n,e=[],t=null,r=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let i=n,a=t==null?void 0:t.errors;if(a!=null){let c=i.findIndex(f=>f.route.id&&(a==null?void 0:a[f.route.id])!==void 0);gi(c>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),i=i.slice(0,Math.min(i.length,c+1))}let o=!1,s=-1;if(t)for(let c=0;c<i.length;c++){let f=i[c];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(s=c),f.route.id){let{loaderData:d,errors:p}=t,g=f.route.loader&&!d.hasOwnProperty(f.route.id)&&(!p||p[f.route.id]===void 0);if(f.route.lazy||g){o=!0,s>=0?i=i.slice(0,s+1):i=[i[0]];break}}}return i.reduceRight((c,f,d)=>{let p,g=!1,m=null,x=null;t&&(p=a&&f.route.id?a[f.route.id]:void 0,m=f.route.errorElement||K7,o&&(s<0&&d===0?($A("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),g=!0,x=null):s===d&&(g=!0,x=f.route.hydrateFallbackElement||null)));let _=e.concat(i.slice(0,d+1)),C=()=>{let S;return p?S=m:g?S=x:f.route.Component?S=le.createElement(f.route.Component,null):f.route.element?S=f.route.element:S=c,le.createElement(Z7,{match:f,routeContext:{outlet:c,matches:_,isDataRoute:t!=null},children:S})};return t&&(f.route.ErrorBoundary||f.route.errorElement||d===0)?le.createElement(Q7,{location:t.location,revalidation:t.revalidation,component:m,error:p,children:C(),routeContext:{outlet:null,matches:_,isDataRoute:!0}}):C()},null)}function qx(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function eR(n){let e=le.useContext(Bh);return gi(e,qx(n)),e}function tR(n){let e=le.useContext(Tm);return gi(e,qx(n)),e}function nR(n){let e=le.useContext(ou);return gi(e,qx(n)),e}function Hx(n){let e=nR(n),t=e.matches[e.matches.length-1];return gi(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function rR(){return Hx("useRouteId")}function iR(){var r;let n=le.useContext(Vx),e=tR("useRouteError"),t=Hx("useRouteError");return n!==void 0?n:(r=e.errors)==null?void 0:r[t]}function aR(){let{router:n}=eR("useNavigate"),e=Hx("useNavigate"),t=le.useRef(!1);return HA(()=>{t.current=!0}),le.useCallback(async(i,a={})=>{sc(t.current,qA),t.current&&(typeof i=="number"?n.navigate(i):await n.navigate(i,{fromRouteId:e,...a}))},[n,e])}var E3={};function $A(n,e,t){!e&&!E3[n]&&(E3[n]=!0,sc(!1,t))}le.memo(oR);function oR({routes:n,future:e,state:t}){return WA(n,void 0,t,e)}function ka(n){gi(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function sR({basename:n="/",children:e=null,location:t,navigationType:r="POP",navigator:i,static:a=!1}){gi(!D1(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=n.replace(/^\/*/,"/"),s=le.useMemo(()=>({basename:o,navigator:i,static:a,future:{}}),[o,i,a]);typeof t=="string"&&(t=jh(t));let{pathname:c="/",search:f="",hash:d="",state:p=null,key:g="default"}=t,m=le.useMemo(()=>{let x=Qc(c,o);return x==null?null:{location:{pathname:x,search:f,hash:d,state:p,key:g},navigationType:r}},[o,c,f,d,p,g,r]);return sc(m!=null,`<Router basename="${o}"> is not able to match the URL "${c}${f}${d}" because it does not start with the basename, so the <Router> won't render anything.`),m==null?null:le.createElement(dc.Provider,{value:s},le.createElement(N1.Provider,{children:e,value:m}))}function lR({children:n,location:e}){return Y7(Ly(n),e)}function Ly(n,e=[]){let t=[];return le.Children.forEach(n,(r,i)=>{if(!le.isValidElement(r))return;let a=[...e,i];if(r.type===le.Fragment){t.push.apply(t,Ly(r.props.children,a));return}gi(r.type===ka,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),gi(!r.props.index||!r.props.children,"An index route cannot have child routes.");let o={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Ly(r.props.children,a)),t.push(o)}),t}var xg="get",bg="application/x-www-form-urlencoded";function Nm(n){return n!=null&&typeof n.tagName=="string"}function cR(n){return Nm(n)&&n.tagName.toLowerCase()==="button"}function uR(n){return Nm(n)&&n.tagName.toLowerCase()==="form"}function fR(n){return Nm(n)&&n.tagName.toLowerCase()==="input"}function dR(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function hR(n,e){return n.button===0&&(!e||e==="_self")&&!dR(n)}var Qp=null;function pR(){if(Qp===null)try{new FormData(document.createElement("form"),0),Qp=!1}catch{Qp=!0}return Qp}var gR=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Ov(n){return n!=null&&!gR.has(n)?(sc(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${bg}"`),null):n}function mR(n,e){let t,r,i,a,o;if(uR(n)){let s=n.getAttribute("action");r=s?Qc(s,e):null,t=n.getAttribute("method")||xg,i=Ov(n.getAttribute("enctype"))||bg,a=new FormData(n)}else if(cR(n)||fR(n)&&(n.type==="submit"||n.type==="image")){let s=n.form;if(s==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=n.getAttribute("formaction")||s.getAttribute("action");if(r=c?Qc(c,e):null,t=n.getAttribute("formmethod")||s.getAttribute("method")||xg,i=Ov(n.getAttribute("formenctype"))||Ov(s.getAttribute("enctype"))||bg,a=new FormData(s,n),!pR()){let{name:f,type:d,value:p}=n;if(d==="image"){let g=f?`${f}.`:"";a.append(`${g}x`,"0"),a.append(`${g}y`,"0")}else f&&a.append(f,p)}}else{if(Nm(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=xg,r=null,i=bg,o=n}return a&&i==="text/plain"&&(o=a,a=void 0),{action:r,method:t.toLowerCase(),encType:i,formData:a,body:o}}function Wx(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}async function vR(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function yR(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function xR(n,e,t){let r=await Promise.all(n.map(async i=>{let a=e.routes[i.route.id];if(a){let o=await vR(a,t);return o.links?o.links():[]}return[]}));return AR(r.flat(1).filter(yR).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function C3(n,e,t,r,i,a){let o=(c,f)=>t[f]?c.route.id!==t[f].route.id:!0,s=(c,f)=>{var d;return t[f].pathname!==c.pathname||((d=t[f].route.path)==null?void 0:d.endsWith("*"))&&t[f].params["*"]!==c.params["*"]};return a==="assets"?e.filter((c,f)=>o(c,f)||s(c,f)):a==="data"?e.filter((c,f)=>{var p;let d=r.routes[c.route.id];if(!d||!d.hasLoader)return!1;if(o(c,f)||s(c,f))return!0;if(c.route.shouldRevalidate){let g=c.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((p=t[0])==null?void 0:p.params)||{},nextUrl:new URL(n,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof g=="boolean")return g}return!0}):[]}function bR(n,e,{includeHydrateFallback:t}={}){return wR(n.map(r=>{let i=e.routes[r.route.id];if(!i)return[];let a=[i.module];return i.clientActionModule&&(a=a.concat(i.clientActionModule)),i.clientLoaderModule&&(a=a.concat(i.clientLoaderModule)),t&&i.hydrateFallbackModule&&(a=a.concat(i.hydrateFallbackModule)),i.imports&&(a=a.concat(i.imports)),a}).flat(1))}function wR(n){return[...new Set(n)]}function _R(n){let e={},t=Object.keys(n).sort();for(let r of t)e[r]=n[r];return e}function AR(n,e){let t=new Set;return new Set(e),n.reduce((r,i)=>{let a=JSON.stringify(_R(i));return t.has(a)||(t.add(a),r.push({key:a,link:i})),r},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var SR=new Set([100,101,204,205]);function ER(n,e){let t=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return t.pathname==="/"?t.pathname="_root.data":e&&Qc(t.pathname,e)==="/"?t.pathname=`${e.replace(/\/$/,"")}/_root.data`:t.pathname=`${t.pathname.replace(/\/$/,"")}.data`,t}function GA(){let n=le.useContext(Bh);return Wx(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function CR(){let n=le.useContext(Tm);return Wx(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var $x=le.createContext(void 0);$x.displayName="FrameworkContext";function YA(){let n=le.useContext($x);return Wx(n,"You must render this element inside a <HydratedRouter> element"),n}function IR(n,e){let t=le.useContext($x),[r,i]=le.useState(!1),[a,o]=le.useState(!1),{onFocus:s,onBlur:c,onMouseEnter:f,onMouseLeave:d,onTouchStart:p}=e,g=le.useRef(null);le.useEffect(()=>{if(n==="render"&&o(!0),n==="viewport"){let _=S=>{S.forEach(k=>{o(k.isIntersecting)})},C=new IntersectionObserver(_,{threshold:.5});return g.current&&C.observe(g.current),()=>{C.disconnect()}}},[n]),le.useEffect(()=>{if(r){let _=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(_)}}},[r]);let m=()=>{i(!0)},x=()=>{i(!1),o(!1)};return t?n!=="intent"?[a,g,{}]:[a,g,{onFocus:j0(s,m),onBlur:j0(c,x),onMouseEnter:j0(f,m),onMouseLeave:j0(d,x),onTouchStart:j0(p,m)}]:[!1,g,{}]}function j0(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function TR({page:n,...e}){let{router:t}=GA(),r=le.useMemo(()=>MA(t.routes,n,t.basename),[t.routes,n,t.basename]);return r?le.createElement(NR,{page:n,matches:r,...e}):null}function RR(n){let{manifest:e,routeModules:t}=YA(),[r,i]=le.useState([]);return le.useEffect(()=>{let a=!1;return xR(n,e,t).then(o=>{a||i(o)}),()=>{a=!0}},[n,e,t]),r}function NR({page:n,matches:e,...t}){let r=su(),{manifest:i,routeModules:a}=YA(),{basename:o}=GA(),{loaderData:s,matches:c}=CR(),f=le.useMemo(()=>C3(n,e,c,i,r,"data"),[n,e,c,i,r]),d=le.useMemo(()=>C3(n,e,c,i,r,"assets"),[n,e,c,i,r]),p=le.useMemo(()=>{if(n===r.pathname+r.search+r.hash)return[];let x=new Set,_=!1;if(e.forEach(S=>{var M;let k=i.routes[S.route.id];!k||!k.hasLoader||(!f.some(P=>P.route.id===S.route.id)&&S.route.id in s&&((M=a[S.route.id])!=null&&M.shouldRevalidate)||k.hasClientLoader?_=!0:x.add(S.route.id))}),x.size===0)return[];let C=ER(n,o);return _&&x.size>0&&C.searchParams.set("_routes",e.filter(S=>x.has(S.route.id)).map(S=>S.route.id).join(",")),[C.pathname+C.search]},[o,s,r,i,f,e,n,a]),g=le.useMemo(()=>bR(d,i),[d,i]),m=RR(d);return le.createElement(le.Fragment,null,p.map(x=>le.createElement("link",{key:x,rel:"prefetch",as:"fetch",href:x,...t})),g.map(x=>le.createElement("link",{key:x,rel:"modulepreload",href:x,...t})),m.map(({key:x,link:_})=>le.createElement("link",{key:x,..._})))}function DR(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var XA=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{XA&&(window.__reactRouterVersion="7.6.2")}catch{}function OR({basename:n,children:e,window:t}){let r=le.useRef();r.current==null&&(r.current=x7({window:t,v5Compat:!0}));let i=r.current,[a,o]=le.useState({action:i.action,location:i.location}),s=le.useCallback(c=>{le.startTransition(()=>o(c))},[o]);return le.useLayoutEffect(()=>i.listen(s),[i,s]),le.createElement(sR,{basename:n,children:e,location:a.location,navigationType:a.action,navigator:i})}var KA=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Rn=le.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:i,reloadDocument:a,replace:o,state:s,target:c,to:f,preventScrollReset:d,viewTransition:p,...g},m){let{basename:x}=le.useContext(dc),_=typeof f=="string"&&KA.test(f),C,S=!1;if(typeof f=="string"&&_&&(C=f,XA))try{let T=new URL(window.location.href),j=f.startsWith("//")?new URL(T.protocol+f):new URL(f),N=Qc(j.pathname,x);j.origin===T.origin&&N!=null?f=N+j.search+j.hash:S=!0}catch{sc(!1,`<Link to="${f}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let k=$7(f,{relative:i}),[M,P,Y]=IR(r,g),z=MR(f,{replace:o,state:s,target:c,preventScrollReset:d,relative:i,viewTransition:p});function F(T){e&&e(T),T.defaultPrevented||z(T)}let I=le.createElement("a",{...g,...Y,href:C||k,onClick:S||a?e:F,ref:DR(m,P),target:c,"data-discover":!_&&t==="render"?"true":void 0});return M&&!_?le.createElement(le.Fragment,null,I,le.createElement(TR,{page:k})):I});Rn.displayName="Link";var kR=le.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:i=!1,style:a,to:o,viewTransition:s,children:c,...f},d){let p=O1(o,{relative:f.relative}),g=su(),m=le.useContext(Tm),{navigator:x,basename:_}=le.useContext(dc),C=m!=null&&zR(p)&&s===!0,S=x.encodeLocation?x.encodeLocation(p).pathname:p.pathname,k=g.pathname,M=m&&m.navigation&&m.navigation.location?m.navigation.location.pathname:null;t||(k=k.toLowerCase(),M=M?M.toLowerCase():null,S=S.toLowerCase()),M&&_&&(M=Qc(M,_)||M);const P=S!=="/"&&S.endsWith("/")?S.length-1:S.length;let Y=k===S||!i&&k.startsWith(S)&&k.charAt(P)==="/",z=M!=null&&(M===S||!i&&M.startsWith(S)&&M.charAt(S.length)==="/"),F={isActive:Y,isPending:z,isTransitioning:C},I=Y?e:void 0,T;typeof r=="function"?T=r(F):T=[r,Y?"active":null,z?"pending":null,C?"transitioning":null].filter(Boolean).join(" ");let j=typeof a=="function"?a(F):a;return le.createElement(Rn,{...f,"aria-current":I,className:T,ref:d,style:j,to:o,viewTransition:s},typeof c=="function"?c(F):c)});kR.displayName="NavLink";var LR=le.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:r,replace:i,state:a,method:o=xg,action:s,onSubmit:c,relative:f,preventScrollReset:d,viewTransition:p,...g},m)=>{let x=FR(),_=UR(s,{relative:f}),C=o.toLowerCase()==="get"?"get":"post",S=typeof s=="string"&&KA.test(s),k=M=>{if(c&&c(M),M.defaultPrevented)return;M.preventDefault();let P=M.nativeEvent.submitter,Y=(P==null?void 0:P.getAttribute("formmethod"))||o;x(P||M.currentTarget,{fetcherKey:e,method:Y,navigate:t,replace:i,state:a,relative:f,preventScrollReset:d,viewTransition:p})};return le.createElement("form",{ref:m,method:C,action:_,onSubmit:r?c:k,...g,"data-discover":!S&&n==="render"?"true":void 0})});LR.displayName="Form";function PR(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function QA(n){let e=le.useContext(Bh);return gi(e,PR(n)),e}function MR(n,{target:e,replace:t,state:r,preventScrollReset:i,relative:a,viewTransition:o}={}){let s=Rm(),c=su(),f=O1(n,{relative:a});return le.useCallback(d=>{if(hR(d,e)){d.preventDefault();let p=t!==void 0?t:f1(c)===f1(f);s(n,{replace:p,state:r,preventScrollReset:i,relative:a,viewTransition:o})}},[c,s,f,t,r,e,n,i,a,o])}var jR=0,BR=()=>`__${String(++jR)}__`;function FR(){let{router:n}=QA("useSubmit"),{basename:e}=le.useContext(dc),t=rR();return le.useCallback(async(r,i={})=>{let{action:a,method:o,encType:s,formData:c,body:f}=mR(r,e);if(i.navigate===!1){let d=i.fetcherKey||BR();await n.fetch(d,t,i.action||a,{preventScrollReset:i.preventScrollReset,formData:c,body:f,formMethod:i.method||o,formEncType:i.encType||s,flushSync:i.flushSync})}else await n.navigate(i.action||a,{preventScrollReset:i.preventScrollReset,formData:c,body:f,formMethod:i.method||o,formEncType:i.encType||s,replace:i.replace,state:i.state,fromRouteId:t,flushSync:i.flushSync,viewTransition:i.viewTransition})},[n,e,t])}function UR(n,{relative:e}={}){let{basename:t}=le.useContext(dc),r=le.useContext(ou);gi(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),a={...O1(n||".",{relative:e})},o=su();if(n==null){a.search=o.search;let s=new URLSearchParams(a.search),c=s.getAll("index");if(c.some(d=>d==="")){s.delete("index"),c.filter(p=>p).forEach(p=>s.append("index",p));let d=s.toString();a.search=d?`?${d}`:""}}return(!n||n===".")&&i.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(a.pathname=a.pathname==="/"?t:Yc([t,a.pathname])),f1(a)}function zR(n,e={}){let t=le.useContext(VA);gi(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=QA("useViewTransitionState"),i=O1(n,{relative:e.relative});if(!t.isTransitioning)return!1;let a=Qc(t.currentLocation.pathname,r)||t.currentLocation.pathname,o=Qc(t.nextLocation.pathname,r)||t.nextLocation.pathname;return zg(i.pathname,o)!=null||zg(i.pathname,a)!=null}[...SR];const VR=()=>{};var I3={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZA=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},qR=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const a=n[t++];e[r++]=String.fromCharCode((i&31)<<6|a&63)}else if(i>239&&i<365){const a=n[t++],o=n[t++],s=n[t++],c=((i&7)<<18|(a&63)<<12|(o&63)<<6|s&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const a=n[t++],o=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(a&63)<<6|o&63)}}return e.join("")},JA={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const a=n[i],o=i+1<n.length,s=o?n[i+1]:0,c=i+2<n.length,f=c?n[i+2]:0,d=a>>2,p=(a&3)<<4|s>>4;let g=(s&15)<<2|f>>6,m=f&63;c||(m=64,o||(g=64)),r.push(t[d],t[p],t[g],t[m])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(ZA(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):qR(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const a=t[n.charAt(i++)],s=i<n.length?t[n.charAt(i)]:0;++i;const f=i<n.length?t[n.charAt(i)]:64;++i;const p=i<n.length?t[n.charAt(i)]:64;if(++i,a==null||s==null||f==null||p==null)throw new HR;const g=a<<2|s>>4;if(r.push(g),f!==64){const m=s<<4&240|f>>2;if(r.push(m),p!==64){const x=f<<6&192|p;r.push(x)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class HR extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const WR=function(n){const e=ZA(n);return JA.encodeByteArray(e,!0)},Vg=function(n){return WR(n).replace(/\./g,"")},e8=function(n){try{return JA.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $R(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GR=()=>$R().__FIREBASE_DEFAULTS__,YR=()=>{if(typeof process>"u"||typeof I3>"u")return;const n=I3.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},XR=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&e8(n[1]);return e&&JSON.parse(e)},Dm=()=>{try{return VR()||GR()||YR()||XR()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},t8=n=>{var e,t;return(t=(e=Dm())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},n8=n=>{const e=t8(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},r8=()=>{var n;return(n=Dm())===null||n===void 0?void 0:n.config},i8=n=>{var e;return(e=Dm())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KR{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fh(n){return n.endsWith(".cloudworkstations.dev")}async function Gx(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a8(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,a=n.sub||n.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Vg(JSON.stringify(t)),Vg(JSON.stringify(o)),""].join(".")}const t1={};function QR(){const n={prod:[],emulator:[]};for(const e of Object.keys(t1))t1[e]?n.emulator.push(e):n.prod.push(e);return n}function ZR(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let T3=!1;function Yx(n,e){if(typeof window>"u"||typeof document>"u"||!Fh(window.location.host)||t1[n]===e||t1[n]||T3)return;t1[n]=e;function t(g){return`__firebase__banner__${g}`}const r="__firebase__banner",a=QR().prod.length>0;function o(){const g=document.getElementById(r);g&&g.remove()}function s(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function c(g,m){g.setAttribute("width","24"),g.setAttribute("id",m),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function f(){const g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{T3=!0,o()},g}function d(g,m){g.setAttribute("id",m),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function p(){const g=ZR(r),m=t("text"),x=document.getElementById(m)||document.createElement("span"),_=t("learnmore"),C=document.getElementById(_)||document.createElement("a"),S=t("preprendIcon"),k=document.getElementById(S)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){const M=g.element;s(M),d(C,_);const P=f();c(k,S),M.append(k,x,C,P),document.body.appendChild(M)}a?(x.innerText="Preview backend disconnected.",k.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(k.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,x.innerText="Preview backend running in this workspace."),x.setAttribute("id",m)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ho(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function JR(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ho())}function eN(){var n;const e=(n=Dm())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function tN(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function o8(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function nN(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function rN(){const n=ho();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function iN(){return!eN()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function s8(){try{return typeof indexedDB=="object"}catch{return!1}}function l8(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var a;e(((a=i.error)===null||a===void 0?void 0:a.message)||"")}}catch(t){e(t)}})}function aN(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oN="FirebaseError";class Qs extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=oN,Object.setPrototypeOf(this,Qs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,xd.prototype.create)}}class xd{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,a=this.errors[e],o=a?sN(a,r):"Error",s=`${this.serviceName}: ${o} (${i}).`;return new Qs(i,s,r)}}function sN(n,e){return n.replace(lN,(t,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const lN=/\{\$([^}]+)}/g;function cN(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function df(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const a=n[i],o=e[i];if(R3(a)&&R3(o)){if(!df(a,o))return!1}else if(a!==o)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function R3(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k1(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function W0(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,a]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(a)}}),e}function $0(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function uN(n,e){const t=new fN(n,e);return t.subscribe.bind(t)}class fN{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");dN(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=kv),i.error===void 0&&(i.error=kv),i.complete===void 0&&(i.complete=kv);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function dN(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function kv(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hN=1e3,pN=2,gN=4*60*60*1e3,mN=.5;function N3(n,e=hN,t=pN){const r=e*Math.pow(t,n),i=Math.round(mN*r*(Math.random()-.5)*2);return Math.min(gN,r+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mi(n){return n&&n._delegate?n._delegate:n}class Xs{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kf="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vN{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new KR;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(a){if(i)return null;throw a}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(xN(e))try{this.getOrInitializeService({instanceIdentifier:Kf})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const a=this.getOrInitializeService({instanceIdentifier:i});r.resolve(a)}catch{}}}}clearInstance(e=Kf){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Kf){return this.instances.has(e)}getOptions(e=Kf){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[a,o]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(a);r===s&&o.resolve(i)}return i}onInit(e,t){var r;const i=this.normalizeInstanceIdentifier(t),a=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;a.add(e),this.onInitCallbacks.set(i,a);const o=this.instances.get(i);return o&&e(o,i),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:yN(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Kf){return this.component?this.component.multipleInstances?e:Kf:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function yN(n){return n===Kf?void 0:n}function xN(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bN{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new vN(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Un;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Un||(Un={}));const wN={debug:Un.DEBUG,verbose:Un.VERBOSE,info:Un.INFO,warn:Un.WARN,error:Un.ERROR,silent:Un.SILENT},_N=Un.INFO,AN={[Un.DEBUG]:"log",[Un.VERBOSE]:"log",[Un.INFO]:"info",[Un.WARN]:"warn",[Un.ERROR]:"error"},SN=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),i=AN[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Om{constructor(e){this.name=e,this._logLevel=_N,this._logHandler=SN,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Un))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?wN[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Un.DEBUG,...e),this._logHandler(this,Un.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Un.VERBOSE,...e),this._logHandler(this,Un.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Un.INFO,...e),this._logHandler(this,Un.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Un.WARN,...e),this._logHandler(this,Un.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Un.ERROR,...e),this._logHandler(this,Un.ERROR,...e)}}const EN=(n,e)=>e.some(t=>n instanceof t);let D3,O3;function CN(){return D3||(D3=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function IN(){return O3||(O3=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const c8=new WeakMap,Py=new WeakMap,u8=new WeakMap,Lv=new WeakMap,Xx=new WeakMap;function TN(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",a),n.removeEventListener("error",o)},a=()=>{t(of(n.result)),i()},o=()=>{r(n.error),i()};n.addEventListener("success",a),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&c8.set(t,n)}).catch(()=>{}),Xx.set(e,n),e}function RN(n){if(Py.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",a),n.removeEventListener("error",o),n.removeEventListener("abort",o)},a=()=>{t(),i()},o=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",a),n.addEventListener("error",o),n.addEventListener("abort",o)});Py.set(n,e)}let My={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Py.get(n);if(e==="objectStoreNames")return n.objectStoreNames||u8.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return of(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function NN(n){My=n(My)}function DN(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(Pv(this),e,...t);return u8.set(r,e.sort?e.sort():[e]),of(r)}:IN().includes(n)?function(...e){return n.apply(Pv(this),e),of(c8.get(this))}:function(...e){return of(n.apply(Pv(this),e))}}function ON(n){return typeof n=="function"?DN(n):(n instanceof IDBTransaction&&RN(n),EN(n,CN())?new Proxy(n,My):n)}function of(n){if(n instanceof IDBRequest)return TN(n);if(Lv.has(n))return Lv.get(n);const e=ON(n);return e!==n&&(Lv.set(n,e),Xx.set(e,n)),e}const Pv=n=>Xx.get(n);function f8(n,e,{blocked:t,upgrade:r,blocking:i,terminated:a}={}){const o=indexedDB.open(n,e),s=of(o);return r&&o.addEventListener("upgradeneeded",c=>{r(of(o.result),c.oldVersion,c.newVersion,of(o.transaction),c)}),t&&o.addEventListener("blocked",c=>t(c.oldVersion,c.newVersion,c)),s.then(c=>{a&&c.addEventListener("close",()=>a()),i&&c.addEventListener("versionchange",f=>i(f.oldVersion,f.newVersion,f))}).catch(()=>{}),s}const kN=["get","getKey","getAll","getAllKeys","count"],LN=["put","add","delete","clear"],Mv=new Map;function k3(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Mv.get(e))return Mv.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=LN.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||kN.includes(t)))return;const a=async function(o,...s){const c=this.transaction(o,i?"readwrite":"readonly");let f=c.store;return r&&(f=f.index(s.shift())),(await Promise.all([f[t](...s),i&&c.done]))[0]};return Mv.set(e,a),a}NN(n=>({...n,get:(e,t,r)=>k3(e,t)||n.get(e,t,r),has:(e,t)=>!!k3(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PN{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(MN(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function MN(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const jy="@firebase/app",L3="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zc=new Om("@firebase/app"),jN="@firebase/app-compat",BN="@firebase/analytics-compat",FN="@firebase/analytics",UN="@firebase/app-check-compat",zN="@firebase/app-check",VN="@firebase/auth",qN="@firebase/auth-compat",HN="@firebase/database",WN="@firebase/data-connect",$N="@firebase/database-compat",GN="@firebase/functions",YN="@firebase/functions-compat",XN="@firebase/installations",KN="@firebase/installations-compat",QN="@firebase/messaging",ZN="@firebase/messaging-compat",JN="@firebase/performance",e9="@firebase/performance-compat",t9="@firebase/remote-config",n9="@firebase/remote-config-compat",r9="@firebase/storage",i9="@firebase/storage-compat",a9="@firebase/firestore",o9="@firebase/ai",s9="@firebase/firestore-compat",l9="firebase",c9="11.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const By="[DEFAULT]",u9={[jy]:"fire-core",[jN]:"fire-core-compat",[FN]:"fire-analytics",[BN]:"fire-analytics-compat",[zN]:"fire-app-check",[UN]:"fire-app-check-compat",[VN]:"fire-auth",[qN]:"fire-auth-compat",[HN]:"fire-rtdb",[WN]:"fire-data-connect",[$N]:"fire-rtdb-compat",[GN]:"fire-fn",[YN]:"fire-fn-compat",[XN]:"fire-iid",[KN]:"fire-iid-compat",[QN]:"fire-fcm",[ZN]:"fire-fcm-compat",[JN]:"fire-perf",[e9]:"fire-perf-compat",[t9]:"fire-rc",[n9]:"fire-rc-compat",[r9]:"fire-gcs",[i9]:"fire-gcs-compat",[a9]:"fire-fst",[s9]:"fire-fst-compat",[o9]:"fire-vertex","fire-js":"fire-js",[l9]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qg=new Map,f9=new Map,Fy=new Map;function P3(n,e){try{n.container.addComponent(e)}catch(t){Zc.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Dl(n){const e=n.name;if(Fy.has(e))return Zc.debug(`There were multiple attempts to register component ${e}.`),!1;Fy.set(e,n);for(const t of qg.values())P3(t,n);for(const t of f9.values())P3(t,n);return!0}function wf(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function gs(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d9={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},sf=new xd("app","Firebase",d9);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h9{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Xs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw sf.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bd=c9;function d8(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r=Object.assign({name:By,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw sf.create("bad-app-name",{appName:String(i)});if(t||(t=r8()),!t)throw sf.create("no-options");const a=qg.get(i);if(a){if(df(t,a.options)&&df(r,a.config))return a;throw sf.create("duplicate-app",{appName:i})}const o=new bN(i);for(const c of Fy.values())o.addComponent(c);const s=new h9(t,r,o);return qg.set(i,s),s}function km(n=By){const e=qg.get(n);if(!e&&n===By&&r8())return d8();if(!e)throw sf.create("no-app",{appName:n});return e}function Xo(n,e,t){var r;let i=(r=u9[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);const a=i.match(/\s|\//),o=e.match(/\s|\//);if(a||o){const s=[`Unable to register library "${i}" with version "${e}":`];a&&s.push(`library name "${i}" contains illegal characters (whitespace or "/")`),a&&o&&s.push("and"),o&&s.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Zc.warn(s.join(" "));return}Dl(new Xs(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p9="firebase-heartbeat-database",g9=1,d1="firebase-heartbeat-store";let jv=null;function h8(){return jv||(jv=f8(p9,g9,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(d1)}catch(t){console.warn(t)}}}}).catch(n=>{throw sf.create("idb-open",{originalErrorMessage:n.message})})),jv}async function m9(n){try{const t=(await h8()).transaction(d1),r=await t.objectStore(d1).get(p8(n));return await t.done,r}catch(e){if(e instanceof Qs)Zc.warn(e.message);else{const t=sf.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Zc.warn(t.message)}}}async function M3(n,e){try{const r=(await h8()).transaction(d1,"readwrite");await r.objectStore(d1).put(e,p8(n)),await r.done}catch(t){if(t instanceof Qs)Zc.warn(t.message);else{const r=sf.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Zc.warn(r.message)}}}function p8(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v9=1024,y9=30;class x9{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new w9(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=j3();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(o=>o.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:i}),this._heartbeatsCache.heartbeats.length>y9){const o=_9(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Zc.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=j3(),{heartbeatsToSend:r,unsentEntries:i}=b9(this._heartbeatsCache.heartbeats),a=Vg(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(t){return Zc.warn(t),""}}}function j3(){return new Date().toISOString().substring(0,10)}function b9(n,e=v9){const t=[];let r=n.slice();for(const i of n){const a=t.find(o=>o.agent===i.agent);if(a){if(a.dates.push(i.date),B3(t)>e){a.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),B3(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class w9{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return s8()?l8().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await m9(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return M3(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return M3(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function B3(n){return Vg(JSON.stringify({version:2,heartbeats:n})).length}function _9(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A9(n){Dl(new Xs("platform-logger",e=>new PN(e),"PRIVATE")),Dl(new Xs("heartbeat",e=>new x9(e),"PRIVATE")),Xo(jy,L3,n),Xo(jy,L3,"esm2017"),Xo("fire-js","")}A9("");function Kx(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function g8(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const S9=g8,m8=new xd("auth","Firebase",g8());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hg=new Om("@firebase/auth");function E9(n,...e){Hg.logLevel<=Un.WARN&&Hg.warn(`Auth (${bd}): ${n}`,...e)}function wg(n,...e){Hg.logLevel<=Un.ERROR&&Hg.error(`Auth (${bd}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ol(n,...e){throw Qx(n,...e)}function nc(n,...e){return Qx(n,...e)}function v8(n,e,t){const r=Object.assign(Object.assign({},S9()),{[e]:t});return new xd("auth","Firebase",r).create(e,{appName:n.name})}function Xc(n){return v8(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Qx(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return m8.create(n,...e)}function en(n,e,...t){if(!n)throw Qx(e,...t)}function Wc(n){const e="INTERNAL ASSERTION FAILED: "+n;throw wg(e),new Error(e)}function Jc(n,e){n||Wc(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uy(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function C9(){return F3()==="http:"||F3()==="https:"}function F3(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I9(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(C9()||o8()||"connection"in navigator)?navigator.onLine:!0}function T9(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L1{constructor(e,t){this.shortDelay=e,this.longDelay=t,Jc(t>e,"Short delay should be less than long delay!"),this.isMobile=JR()||nN()}get(){return I9()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zx(n,e){Jc(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y8{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Wc("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Wc("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Wc("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R9={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N9=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],D9=new L1(3e4,6e4);function lu(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function cu(n,e,t,r,i={}){return x8(n,i,async()=>{let a={},o={};r&&(e==="GET"?o=r:a={body:JSON.stringify(r)});const s=k1(Object.assign({key:n.config.apiKey},o)).slice(1),c=await n._getAdditionalHeaders();c["Content-Type"]="application/json",n.languageCode&&(c["X-Firebase-Locale"]=n.languageCode);const f=Object.assign({method:e,headers:c},a);return tN()||(f.referrerPolicy="no-referrer"),n.emulatorConfig&&Fh(n.emulatorConfig.host)&&(f.credentials="include"),y8.fetch()(await b8(n,n.config.apiHost,t,s),f)})}async function x8(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},R9),e);try{const i=new k9(n),a=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();const o=await a.json();if("needConfirmation"in o)throw Zp(n,"account-exists-with-different-credential",o);if(a.ok&&!("errorMessage"in o))return o;{const s=a.ok?o.errorMessage:o.error.message,[c,f]=s.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Zp(n,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw Zp(n,"email-already-in-use",o);if(c==="USER_DISABLED")throw Zp(n,"user-disabled",o);const d=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw v8(n,d,f);Ol(n,d)}}catch(i){if(i instanceof Qs)throw i;Ol(n,"network-request-failed",{message:String(i)})}}async function P1(n,e,t,r,i={}){const a=await cu(n,e,t,r,i);return"mfaPendingCredential"in a&&Ol(n,"multi-factor-auth-required",{_serverResponse:a}),a}async function b8(n,e,t,r){const i=`${e}${t}?${r}`,a=n,o=a.config.emulator?Zx(n.config,i):`${n.config.apiScheme}://${i}`;return N9.includes(t)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(o).toString():o}function O9(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class k9{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(nc(this.auth,"network-request-failed")),D9.get())})}}function Zp(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=nc(n,e,r);return i.customData._tokenResponse=t,i}function U3(n){return n!==void 0&&n.enterprise!==void 0}class L9{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return O9(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function P9(n,e){return cu(n,"GET","/v2/recaptchaConfig",lu(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function M9(n,e){return cu(n,"POST","/v1/accounts:delete",e)}async function Wg(n,e){return cu(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n1(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function j9(n,e=!1){const t=mi(n),r=await t.getIdToken(e),i=Jx(r);en(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const a=typeof i.firebase=="object"?i.firebase:void 0,o=a==null?void 0:a.sign_in_provider;return{claims:i,token:r,authTime:n1(Bv(i.auth_time)),issuedAtTime:n1(Bv(i.iat)),expirationTime:n1(Bv(i.exp)),signInProvider:o||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function Bv(n){return Number(n)*1e3}function Jx(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return wg("JWT malformed, contained fewer than 3 sections"),null;try{const i=e8(t);return i?JSON.parse(i):(wg("Failed to decode base64 JWT payload"),null)}catch(i){return wg("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function z3(n){const e=Jx(n);return en(e,"internal-error"),en(typeof e.exp<"u","internal-error"),en(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function h1(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof Qs&&B9(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function B9({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F9{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zy{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=n1(this.lastLoginAt),this.creationTime=n1(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $g(n){var e;const t=n.auth,r=await n.getIdToken(),i=await h1(n,Wg(t,{idToken:r}));en(i==null?void 0:i.users.length,t,"internal-error");const a=i.users[0];n._notifyReloadListener(a);const o=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?w8(a.providerUserInfo):[],s=z9(n.providerData,o),c=n.isAnonymous,f=!(n.email&&a.passwordHash)&&!(s!=null&&s.length),d=c?f:!1,p={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:s,metadata:new zy(a.createdAt,a.lastLoginAt),isAnonymous:d};Object.assign(n,p)}async function U9(n){const e=mi(n);await $g(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function z9(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function w8(n){return n.map(e=>{var{providerId:t}=e,r=Kx(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function V9(n,e){const t=await x8(n,{},async()=>{const r=k1({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:a}=n.config,o=await b8(n,i,"/v1/token",`key=${a}`),s=await n._getAdditionalHeaders();return s["Content-Type"]="application/x-www-form-urlencoded",y8.fetch()(o,{method:"POST",headers:s,body:r})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function q9(n,e){return cu(n,"POST","/v2/accounts:revokeToken",lu(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xh{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){en(e.idToken,"internal-error"),en(typeof e.idToken<"u","internal-error"),en(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):z3(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){en(e.length!==0,"internal-error");const t=z3(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(en(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:i,expiresIn:a}=await V9(e,t);this.updateTokensAndExpiration(r,i,Number(a))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:a}=t,o=new xh;return r&&(en(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(en(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),a&&(en(typeof a=="number","internal-error",{appName:e}),o.expirationTime=a),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new xh,this.toJSON())}_performRefresh(){return Wc("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gu(n,e){en(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Tl{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,a=Kx(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new F9(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new zy(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await h1(this,this.stsTokenManager.getToken(this.auth,e));return en(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return j9(this,e)}reload(){return U9(this)}_assign(e){this!==e&&(en(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Tl(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){en(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await $g(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(gs(this.auth.app))return Promise.reject(Xc(this.auth));const e=await this.getIdToken();return await h1(this,M9(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,a,o,s,c,f,d;const p=(r=t.displayName)!==null&&r!==void 0?r:void 0,g=(i=t.email)!==null&&i!==void 0?i:void 0,m=(a=t.phoneNumber)!==null&&a!==void 0?a:void 0,x=(o=t.photoURL)!==null&&o!==void 0?o:void 0,_=(s=t.tenantId)!==null&&s!==void 0?s:void 0,C=(c=t._redirectEventId)!==null&&c!==void 0?c:void 0,S=(f=t.createdAt)!==null&&f!==void 0?f:void 0,k=(d=t.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:M,emailVerified:P,isAnonymous:Y,providerData:z,stsTokenManager:F}=t;en(M&&F,e,"internal-error");const I=xh.fromJSON(this.name,F);en(typeof M=="string",e,"internal-error"),Gu(p,e.name),Gu(g,e.name),en(typeof P=="boolean",e,"internal-error"),en(typeof Y=="boolean",e,"internal-error"),Gu(m,e.name),Gu(x,e.name),Gu(_,e.name),Gu(C,e.name),Gu(S,e.name),Gu(k,e.name);const T=new Tl({uid:M,auth:e,email:g,emailVerified:P,displayName:p,isAnonymous:Y,photoURL:x,phoneNumber:m,tenantId:_,stsTokenManager:I,createdAt:S,lastLoginAt:k});return z&&Array.isArray(z)&&(T.providerData=z.map(j=>Object.assign({},j))),C&&(T._redirectEventId=C),T}static async _fromIdTokenResponse(e,t,r=!1){const i=new xh;i.updateFromServerResponse(t);const a=new Tl({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await $g(a),a}static async _fromGetAccountInfoResponse(e,t,r){const i=t.users[0];en(i.localId!==void 0,"internal-error");const a=i.providerUserInfo!==void 0?w8(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(a!=null&&a.length),s=new xh;s.updateFromIdToken(r);const c=new Tl({uid:i.localId,auth:e,stsTokenManager:s,isAnonymous:o}),f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new zy(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(a!=null&&a.length)};return Object.assign(c,f),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V3=new Map;function $c(n){Jc(n instanceof Function,"Expected a class definition");let e=V3.get(n);return e?(Jc(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,V3.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _8{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}_8.type="NONE";const q3=_8;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _g(n,e,t){return`firebase:${n}:${e}:${t}`}class bh{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:a}=this.auth;this.fullUserKey=_g(this.userKey,i.apiKey,a),this.fullPersistenceKey=_g("persistence",i.apiKey,a),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Wg(this.auth,{idToken:e}).catch(()=>{});return t?Tl._fromGetAccountInfoResponse(this.auth,t,e):null}return Tl._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new bh($c(q3),e,r);const i=(await Promise.all(t.map(async f=>{if(await f._isAvailable())return f}))).filter(f=>f);let a=i[0]||$c(q3);const o=_g(r,e.config.apiKey,e.name);let s=null;for(const f of t)try{const d=await f._get(o);if(d){let p;if(typeof d=="string"){const g=await Wg(e,{idToken:d}).catch(()=>{});if(!g)break;p=await Tl._fromGetAccountInfoResponse(e,g,d)}else p=Tl._fromJSON(e,d);f!==a&&(s=p),a=f;break}}catch{}const c=i.filter(f=>f._shouldAllowMigration);return!a._shouldAllowMigration||!c.length?new bh(a,e,r):(a=c[0],s&&await a._set(o,s.toJSON()),await Promise.all(t.map(async f=>{if(f!==a)try{await f._remove(o)}catch{}})),new bh(a,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H3(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(C8(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(A8(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(T8(e))return"Blackberry";if(R8(e))return"Webos";if(S8(e))return"Safari";if((e.includes("chrome/")||E8(e))&&!e.includes("edge/"))return"Chrome";if(I8(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function A8(n=ho()){return/firefox\//i.test(n)}function S8(n=ho()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function E8(n=ho()){return/crios\//i.test(n)}function C8(n=ho()){return/iemobile/i.test(n)}function I8(n=ho()){return/android/i.test(n)}function T8(n=ho()){return/blackberry/i.test(n)}function R8(n=ho()){return/webos/i.test(n)}function e5(n=ho()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function H9(n=ho()){var e;return e5(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function W9(){return rN()&&document.documentMode===10}function N8(n=ho()){return e5(n)||I8(n)||R8(n)||T8(n)||/windows phone/i.test(n)||C8(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D8(n,e=[]){let t;switch(n){case"Browser":t=H3(ho());break;case"Worker":t=`${H3(ho())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${bd}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $9{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=a=>new Promise((o,s)=>{try{const c=e(a);o(c)}catch(c){s(c)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function G9(n,e={}){return cu(n,"GET","/v2/passwordPolicy",lu(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y9=6;class X9{constructor(e){var t,r,i,a;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=o.minPasswordLength)!==null&&t!==void 0?t:Y9,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(a=e.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,a,o,s;const c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(t=c.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(a=c.containsUppercaseLetter)!==null&&a!==void 0?a:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(s=c.containsNonAlphanumericCharacter)!==null&&s!==void 0?s:!0),c}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K9{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new W3(this),this.idTokenSubscription=new W3(this),this.beforeStateQueue=new $9(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=m8,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=$c(t)),this._initializationPromise=this.queue(async()=>{var r,i,a;if(!this._deleted&&(this.persistenceManager=await bh.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((a=this.currentUser)===null||a===void 0?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Wg(this,{idToken:e}),r=await Tl._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(gs(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(s=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(s,s))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,s=i==null?void 0:i._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===s)&&(c!=null&&c.user)&&(i=c.user,a=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return en(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await $g(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=T9()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(gs(this.app))return Promise.reject(Xc(this));const t=e?mi(e):null;return t&&en(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&en(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return gs(this.app)?Promise.reject(Xc(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return gs(this.app)?Promise.reject(Xc(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence($c(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await G9(this),t=new X9(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new xd("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await q9(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&$c(e)||this._popupRedirectResolver;en(t,this,"argument-error"),this.redirectPersistenceManager=await bh.create(this,[$c(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const a=typeof t=="function"?t:t.next.bind(t);let o=!1;const s=this._isInitialized?Promise.resolve():this._initializationPromise;if(en(s,this,"internal-error"),s.then(()=>{o||a(this.currentUser)}),typeof t=="function"){const c=e.addObserver(t,r,i);return()=>{o=!0,c()}}else{const c=e.addObserver(t);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return en(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=D8(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){var e;if(gs(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&E9(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function _f(n){return mi(n)}class W3{constructor(e){this.auth=e,this.observer=null,this.addObserver=uN(t=>this.observer=t)}get next(){return en(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Lm={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Q9(n){Lm=n}function O8(n){return Lm.loadJS(n)}function Z9(){return Lm.recaptchaEnterpriseScript}function J9(){return Lm.gapiScript}function eD(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class tD{constructor(){this.enterprise=new nD}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class nD{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const rD="recaptcha-enterprise",k8="NO_RECAPTCHA";class iD{constructor(e){this.type=rD,this.auth=_f(e)}async verify(e="verify",t=!1){async function r(a){if(!t){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(o,s)=>{P9(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)s(new Error("recaptcha Enterprise site key undefined"));else{const f=new L9(c);return a.tenantId==null?a._agentRecaptchaConfig=f:a._tenantRecaptchaConfigs[a.tenantId]=f,o(f.siteKey)}}).catch(c=>{s(c)})})}function i(a,o,s){const c=window.grecaptcha;U3(c)?c.enterprise.ready(()=>{c.enterprise.execute(a,{action:e}).then(f=>{o(f)}).catch(()=>{o(k8)})}):s(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new tD().execute("siteKey",{action:"verify"}):new Promise((a,o)=>{r(this.auth).then(s=>{if(!t&&U3(window.grecaptcha))i(s,a,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let c=Z9();c.length!==0&&(c+=s),O8(c).then(()=>{i(s,a,o)}).catch(f=>{o(f)})}}).catch(s=>{o(s)})})}}async function $3(n,e,t,r=!1,i=!1){const a=new iD(n);let o;if(i)o=k8;else try{o=await a.verify(t)}catch{o=await a.verify(t,!0)}const s=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in s){const c=s.phoneEnrollmentInfo.phoneNumber,f=s.phoneEnrollmentInfo.recaptchaToken;Object.assign(s,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:f,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in s){const c=s.phoneSignInInfo.recaptchaToken;Object.assign(s,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return s}return r?Object.assign(s,{captchaResp:o}):Object.assign(s,{captchaResponse:o}),Object.assign(s,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(s,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),s}async function Gg(n,e,t,r,i){var a;if(!((a=n._getRecaptchaConfig())===null||a===void 0)&&a.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await $3(n,e,t,t==="getOobCode");return r(n,o)}else return r(n,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const s=await $3(n,e,t,t==="getOobCode");return r(n,s)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aD(n,e){const t=wf(n,"auth");if(t.isInitialized()){const i=t.getImmediate(),a=t.getOptions();if(df(a,e??{}))return i;Ol(i,"already-initialized")}return t.initialize({options:e})}function oD(n,e){const t=(e==null?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map($c);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function sD(n,e,t){const r=_f(n);en(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,a=L8(e),{host:o,port:s}=lD(e),c=s===null?"":`:${s}`,f={url:`${a}//${o}${c}/`},d=Object.freeze({host:o,port:s,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){en(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),en(df(f,r.config.emulator)&&df(d,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=f,r.emulatorConfig=d,r.settings.appVerificationDisabledForTesting=!0,Fh(o)?(Gx(`${a}//${o}${c}`),Yx("Auth",!0)):cD()}function L8(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function lD(n){const e=L8(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const a=i[1];return{host:a,port:G3(r.substr(a.length+1))}}else{const[a,o]=r.split(":");return{host:a,port:G3(o)}}}function G3(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function cD(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t5{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Wc("not implemented")}_getIdTokenResponse(e){return Wc("not implemented")}_linkToIdToken(e,t){return Wc("not implemented")}_getReauthenticationResolver(e){return Wc("not implemented")}}async function uD(n,e){return cu(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fD(n,e){return P1(n,"POST","/v1/accounts:signInWithPassword",lu(n,e))}async function P8(n,e){return cu(n,"POST","/v1/accounts:sendOobCode",lu(n,e))}async function dD(n,e){return P8(n,e)}async function hD(n,e){return P8(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pD(n,e){return P1(n,"POST","/v1/accounts:signInWithEmailLink",lu(n,e))}async function gD(n,e){return P1(n,"POST","/v1/accounts:signInWithEmailLink",lu(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p1 extends t5{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new p1(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new p1(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Gg(e,t,"signInWithPassword",fD);case"emailLink":return pD(e,{email:this._email,oobCode:this._password});default:Ol(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Gg(e,r,"signUpPassword",uD);case"emailLink":return gD(e,{idToken:t,email:this._email,oobCode:this._password});default:Ol(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wh(n,e){return P1(n,"POST","/v1/accounts:signInWithIdp",lu(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mD="http://localhost";class ld extends t5{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new ld(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Ol("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=t,a=Kx(t,["providerId","signInMethod"]);if(!r||!i)return null;const o=new ld(r,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}_getIdTokenResponse(e){const t=this.buildRequest();return wh(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,wh(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,wh(e,t)}buildRequest(){const e={requestUri:mD,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=k1(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vD(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function yD(n){const e=W0($0(n)).link,t=e?W0($0(e)).deep_link_id:null,r=W0($0(n)).deep_link_id;return(r?W0($0(r)).link:null)||r||t||e||n}class n5{constructor(e){var t,r,i,a,o,s;const c=W0($0(e)),f=(t=c.apiKey)!==null&&t!==void 0?t:null,d=(r=c.oobCode)!==null&&r!==void 0?r:null,p=vD((i=c.mode)!==null&&i!==void 0?i:null);en(f&&d&&p,"argument-error"),this.apiKey=f,this.operation=p,this.code=d,this.continueUrl=(a=c.continueUrl)!==null&&a!==void 0?a:null,this.languageCode=(o=c.lang)!==null&&o!==void 0?o:null,this.tenantId=(s=c.tenantId)!==null&&s!==void 0?s:null}static parseLink(e){const t=yD(e);try{return new n5(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uh{constructor(){this.providerId=Uh.PROVIDER_ID}static credential(e,t){return p1._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=n5.parseLink(t);return en(r,"argument-error"),p1._fromEmailAndCode(e,r.code,r.tenantId)}}Uh.PROVIDER_ID="password";Uh.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Uh.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M8{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M1 extends M8{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ju extends M1{constructor(){super("facebook.com")}static credential(e){return ld._fromParams({providerId:Ju.PROVIDER_ID,signInMethod:Ju.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ju.credentialFromTaggedObject(e)}static credentialFromError(e){return Ju.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ju.credential(e.oauthAccessToken)}catch{return null}}}Ju.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ju.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ef extends M1{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return ld._fromParams({providerId:ef.PROVIDER_ID,signInMethod:ef.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return ef.credentialFromTaggedObject(e)}static credentialFromError(e){return ef.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return ef.credential(t,r)}catch{return null}}}ef.GOOGLE_SIGN_IN_METHOD="google.com";ef.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tf extends M1{constructor(){super("github.com")}static credential(e){return ld._fromParams({providerId:tf.PROVIDER_ID,signInMethod:tf.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return tf.credentialFromTaggedObject(e)}static credentialFromError(e){return tf.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return tf.credential(e.oauthAccessToken)}catch{return null}}}tf.GITHUB_SIGN_IN_METHOD="github.com";tf.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nf extends M1{constructor(){super("twitter.com")}static credential(e,t){return ld._fromParams({providerId:nf.PROVIDER_ID,signInMethod:nf.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return nf.credentialFromTaggedObject(e)}static credentialFromError(e){return nf.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return nf.credential(t,r)}catch{return null}}}nf.TWITTER_SIGN_IN_METHOD="twitter.com";nf.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xD(n,e){return P1(n,"POST","/v1/accounts:signUp",lu(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cd{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){const a=await Tl._fromIdTokenResponse(e,r,i),o=Y3(r);return new cd({user:a,providerId:o,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const i=Y3(r);return new cd({user:e,providerId:i,_tokenResponse:r,operationType:t})}}function Y3(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yg extends Qs{constructor(e,t,r,i){var a;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Yg.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new Yg(e,t,r,i)}}function j8(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?Yg._fromErrorAndOperation(n,a,e,r):a})}async function bD(n,e,t=!1){const r=await h1(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return cd._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wD(n,e,t=!1){const{auth:r}=n;if(gs(r.app))return Promise.reject(Xc(r));const i="reauthenticate";try{const a=await h1(n,j8(r,i,e,n),t);en(a.idToken,r,"internal-error");const o=Jx(a.idToken);en(o,r,"internal-error");const{sub:s}=o;return en(n.uid===s,r,"user-mismatch"),cd._forOperation(n,i,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&Ol(r,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function B8(n,e,t=!1){if(gs(n.app))return Promise.reject(Xc(n));const r="signIn",i=await j8(n,r,e),a=await cd._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(a.user),a}async function _D(n,e){return B8(_f(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function F8(n){const e=_f(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function AD(n,e,t){const r=_f(n);await Gg(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",hD)}async function SD(n,e,t){if(gs(n.app))return Promise.reject(Xc(n));const r=_f(n),o=await Gg(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",xD).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&F8(n),c}),s=await cd._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(s.user),s}function ED(n,e,t){return gs(n.app)?Promise.reject(Xc(n)):_D(mi(n),Uh.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&F8(n),r})}async function CD(n,e){const t=mi(n),i={requestType:"VERIFY_EMAIL",idToken:await n.getIdToken()},{email:a}=await dD(t.auth,i);a!==n.email&&await n.reload()}function ID(n,e,t,r){return mi(n).onIdTokenChanged(e,t,r)}function TD(n,e,t){return mi(n).beforeAuthStateChanged(e,t)}function RD(n,e,t,r){return mi(n).onAuthStateChanged(e,t,r)}function ND(n){return mi(n).signOut()}const Xg="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U8{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Xg,"1"),this.storage.removeItem(Xg),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DD=1e3,OD=10;class z8 extends U8{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=N8(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),i=this.localCache[t];r!==i&&e(t,i,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((o,s,c)=>{this.notifyListeners(o,c)});return}const r=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!t&&this.localCache[r]===o||this.notifyListeners(r,o)},a=this.storage.getItem(r);W9()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,OD):i()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},DD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}z8.type="LOCAL";const kD=z8;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V8 extends U8{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}V8.type="SESSION";const q8=V8;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LD(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pm{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;const r=new Pm(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:i,data:a}=t.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const s=Array.from(o).map(async f=>f(t.origin,a)),c=await LD(s);t.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:c})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Pm.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r5(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PD{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let a,o;return new Promise((s,c)=>{const f=r5("",20);i.port1.start();const d=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(p){const g=p;if(g.data.eventId===f)switch(g.data.status){case"ack":clearTimeout(d),a=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),s(g.data.response);break;default:clearTimeout(d),clearTimeout(a),c(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:f,data:t},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rc(){return window}function MD(n){rc().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H8(){return typeof rc().WorkerGlobalScope<"u"&&typeof rc().importScripts=="function"}async function jD(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function BD(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function FD(){return H8()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W8="firebaseLocalStorageDb",UD=1,Kg="firebaseLocalStorage",$8="fbase_key";class j1{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Mm(n,e){return n.transaction([Kg],e?"readwrite":"readonly").objectStore(Kg)}function zD(){const n=indexedDB.deleteDatabase(W8);return new j1(n).toPromise()}function Vy(){const n=indexedDB.open(W8,UD);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(Kg,{keyPath:$8})}catch(i){t(i)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(Kg)?e(r):(r.close(),await zD(),e(await Vy()))})})}async function X3(n,e,t){const r=Mm(n,!0).put({[$8]:e,value:t});return new j1(r).toPromise()}async function VD(n,e){const t=Mm(n,!1).get(e),r=await new j1(t).toPromise();return r===void 0?null:r.value}function K3(n,e){const t=Mm(n,!0).delete(e);return new j1(t).toPromise()}const qD=800,HD=3;class G8{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Vy(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>HD)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return H8()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Pm._getInstance(FD()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await jD(),!this.activeServiceWorker)return;this.sender=new PD(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((t=r[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||BD()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Vy();return await X3(e,Xg,"1"),await K3(e,Xg),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>X3(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>VD(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>K3(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const a=Mm(i,!1).getAll();return new j1(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:a}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(a)&&(this.notifyListeners(i,a),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),qD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}G8.type="LOCAL";const WD=G8;new L1(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $D(n,e){return e?$c(e):(en(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i5 extends t5{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return wh(e,this._buildIdpRequest())}_linkToIdToken(e,t){return wh(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return wh(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function GD(n){return B8(n.auth,new i5(n),n.bypassAuthState)}function YD(n){const{auth:e,user:t}=n;return en(t,e,"internal-error"),wD(t,new i5(n),n.bypassAuthState)}async function XD(n){const{auth:e,user:t}=n;return en(t,e,"internal-error"),bD(t,new i5(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y8{constructor(e,t,r,i,a=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:i,tenantId:a,error:o,type:s}=e;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:t,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(s)(c))}catch(f){this.reject(f)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return GD;case"linkViaPopup":case"linkViaRedirect":return XD;case"reauthViaPopup":case"reauthViaRedirect":return YD;default:Ol(this.auth,"internal-error")}}resolve(e){Jc(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Jc(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KD=new L1(2e3,1e4);class ph extends Y8{constructor(e,t,r,i,a){super(e,t,i,a),this.provider=r,this.authWindow=null,this.pollId=null,ph.currentPopupAction&&ph.currentPopupAction.cancel(),ph.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return en(e,this.auth,"internal-error"),e}async onExecution(){Jc(this.filter.length===1,"Popup operations only handle one event");const e=r5();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(nc(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(nc(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ph.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if(!((r=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(nc(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,KD.get())};e()}}ph.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QD="pendingRedirect",Ag=new Map;class ZD extends Y8{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=Ag.get(this.auth._key());if(!e){try{const r=await JD(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Ag.set(this.auth._key(),e)}return this.bypassAuthState||Ag.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function JD(n,e){const t=nO(e),r=tO(n);if(!await r._isAvailable())return!1;const i=await r._get(t)==="true";return await r._remove(t),i}function eO(n,e){Ag.set(n._key(),e)}function tO(n){return $c(n._redirectPersistence)}function nO(n){return _g(QD,n.config.apiKey,n.name)}async function rO(n,e,t=!1){if(gs(n.app))return Promise.reject(Xc(n));const r=_f(n),i=$D(r,e),o=await new ZD(r,i,t).execute();return o&&!t&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iO=10*60*1e3;class aO{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!oO(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!X8(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(nc(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=iO&&this.cachedEventUids.clear(),this.cachedEventUids.has(Q3(e))}saveEventToCache(e){this.cachedEventUids.add(Q3(e)),this.lastProcessedEventTime=Date.now()}}function Q3(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function X8({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function oO(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return X8(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sO(n,e={}){return cu(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lO=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,cO=/^https?/;async function uO(n){if(n.config.emulator)return;const{authorizedDomains:e}=await sO(n);for(const t of e)try{if(fO(t))return}catch{}Ol(n,"unauthorized-domain")}function fO(n){const e=Uy(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const o=new URL(n);return o.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&o.hostname===r}if(!cO.test(t))return!1;if(lO.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dO=new L1(3e4,6e4);function Z3(){const n=rc().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function hO(n){return new Promise((e,t)=>{var r,i,a;function o(){Z3(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Z3(),t(nc(n,"network-request-failed"))},timeout:dO.get()})}if(!((i=(r=rc().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((a=rc().gapi)===null||a===void 0)&&a.load)o();else{const s=eD("iframefcb");return rc()[s]=()=>{gapi.load?o():t(nc(n,"network-request-failed"))},O8(`${J9()}?onload=${s}`).catch(c=>t(c))}}).catch(e=>{throw Sg=null,e})}let Sg=null;function pO(n){return Sg=Sg||hO(n),Sg}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gO=new L1(5e3,15e3),mO="__/auth/iframe",vO="emulator/auth/iframe",yO={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},xO=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function bO(n){const e=n.config;en(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Zx(e,vO):`https://${n.config.authDomain}/${mO}`,r={apiKey:e.apiKey,appName:n.name,v:bd},i=xO.get(n.config.apiHost);i&&(r.eid=i);const a=n._getFrameworks();return a.length&&(r.fw=a.join(",")),`${t}?${k1(r).slice(1)}`}async function wO(n){const e=await pO(n),t=rc().gapi;return en(t,n,"internal-error"),e.open({where:document.body,url:bO(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:yO,dontclear:!0},r=>new Promise(async(i,a)=>{await r.restyle({setHideOnLeave:!1});const o=nc(n,"network-request-failed"),s=rc().setTimeout(()=>{a(o)},gO.get());function c(){rc().clearTimeout(s),i(r)}r.ping(c).then(c,()=>{a(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _O={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},AO=500,SO=600,EO="_blank",CO="http://localhost";class J3{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function IO(n,e,t,r=AO,i=SO){const a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let s="";const c=Object.assign(Object.assign({},_O),{width:r.toString(),height:i.toString(),top:a,left:o}),f=ho().toLowerCase();t&&(s=E8(f)?EO:t),A8(f)&&(e=e||CO,c.scrollbars="yes");const d=Object.entries(c).reduce((g,[m,x])=>`${g}${m}=${x},`,"");if(H9(f)&&s!=="_self")return TO(e||"",s),new J3(null);const p=window.open(e||"",s,d);en(p,n,"popup-blocked");try{p.focus()}catch{}return new J3(p)}function TO(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RO="__/auth/handler",NO="emulator/auth/handler",DO=encodeURIComponent("fac");async function e_(n,e,t,r,i,a){en(n.config.authDomain,n,"auth-domain-config-required"),en(n.config.apiKey,n,"invalid-api-key");const o={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:bd,eventId:i};if(e instanceof M8){e.setDefaultLanguage(n.languageCode),o.providerId=e.providerId||"",cN(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,p]of Object.entries({}))o[d]=p}if(e instanceof M1){const d=e.getScopes().filter(p=>p!=="");d.length>0&&(o.scopes=d.join(","))}n.tenantId&&(o.tid=n.tenantId);const s=o;for(const d of Object.keys(s))s[d]===void 0&&delete s[d];const c=await n._getAppCheckToken(),f=c?`#${DO}=${encodeURIComponent(c)}`:"";return`${OO(n)}?${k1(s).slice(1)}${f}`}function OO({config:n}){return n.emulator?Zx(n,NO):`https://${n.authDomain}/${RO}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fv="webStorageSupport";class kO{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=q8,this._completeRedirectFn=rO,this._overrideRedirectResult=eO}async _openPopup(e,t,r,i){var a;Jc((a=this.eventManagers[e._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const o=await e_(e,t,r,Uy(),i);return IO(e,o,r5())}async _openRedirect(e,t,r,i){await this._originValidation(e);const a=await e_(e,t,r,Uy(),i);return MD(a),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:a}=this.eventManagers[t];return i?Promise.resolve(i):(Jc(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await wO(e),r=new aO(e);return t.register("authEvent",i=>(en(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Fv,{type:Fv},i=>{var a;const o=(a=i==null?void 0:i[0])===null||a===void 0?void 0:a[Fv];o!==void 0&&t(!!o),Ol(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=uO(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return N8()||S8()||e5()}}const LO=kO;var t_="@firebase/auth",n_="1.10.6";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PO{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){en(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MO(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function jO(n){Dl(new Xs("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:o,authDomain:s}=r.options;en(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:o,authDomain:s,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:D8(n)},f=new K9(r,i,a,c);return oD(f,t),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Dl(new Xs("auth-internal",e=>{const t=_f(e.getProvider("auth").getImmediate());return(r=>new PO(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Xo(t_,n_,MO(n)),Xo(t_,n_,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BO=5*60,FO=i8("authIdTokenMaxAge")||BO;let r_=null;const UO=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>FO)return;const i=t==null?void 0:t.token;r_!==i&&(r_=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function zO(n=km()){const e=wf(n,"auth");if(e.isInitialized())return e.getImmediate();const t=aD(n,{popupRedirectResolver:LO,persistence:[WD,kD,q8]}),r=i8("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(r,location.origin);if(location.origin===a.origin){const o=UO(a.toString());TD(t,o,()=>o(t.currentUser)),ID(t,s=>o(s))}}const i=t8("auth");return i&&sD(t,`http://${i}`),t}function VO(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}Q9({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{const a=nc("internal-error");a.customData=i,t(a)},r.type="text/javascript",r.charset="UTF-8",VO().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});jO("Browser");var i_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var lf,K8;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(F,I){function T(){}T.prototype=I.prototype,F.D=I.prototype,F.prototype=new T,F.prototype.constructor=F,F.C=function(j,N,R){for(var D=Array(arguments.length-2),L=2;L<arguments.length;L++)D[L-2]=arguments[L];return I.prototype[N].apply(j,D)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(F,I,T){T||(T=0);var j=Array(16);if(typeof I=="string")for(var N=0;16>N;++N)j[N]=I.charCodeAt(T++)|I.charCodeAt(T++)<<8|I.charCodeAt(T++)<<16|I.charCodeAt(T++)<<24;else for(N=0;16>N;++N)j[N]=I[T++]|I[T++]<<8|I[T++]<<16|I[T++]<<24;I=F.g[0],T=F.g[1],N=F.g[2];var R=F.g[3],D=I+(R^T&(N^R))+j[0]+3614090360&4294967295;I=T+(D<<7&4294967295|D>>>25),D=R+(N^I&(T^N))+j[1]+3905402710&4294967295,R=I+(D<<12&4294967295|D>>>20),D=N+(T^R&(I^T))+j[2]+606105819&4294967295,N=R+(D<<17&4294967295|D>>>15),D=T+(I^N&(R^I))+j[3]+3250441966&4294967295,T=N+(D<<22&4294967295|D>>>10),D=I+(R^T&(N^R))+j[4]+4118548399&4294967295,I=T+(D<<7&4294967295|D>>>25),D=R+(N^I&(T^N))+j[5]+1200080426&4294967295,R=I+(D<<12&4294967295|D>>>20),D=N+(T^R&(I^T))+j[6]+2821735955&4294967295,N=R+(D<<17&4294967295|D>>>15),D=T+(I^N&(R^I))+j[7]+4249261313&4294967295,T=N+(D<<22&4294967295|D>>>10),D=I+(R^T&(N^R))+j[8]+1770035416&4294967295,I=T+(D<<7&4294967295|D>>>25),D=R+(N^I&(T^N))+j[9]+2336552879&4294967295,R=I+(D<<12&4294967295|D>>>20),D=N+(T^R&(I^T))+j[10]+4294925233&4294967295,N=R+(D<<17&4294967295|D>>>15),D=T+(I^N&(R^I))+j[11]+2304563134&4294967295,T=N+(D<<22&4294967295|D>>>10),D=I+(R^T&(N^R))+j[12]+1804603682&4294967295,I=T+(D<<7&4294967295|D>>>25),D=R+(N^I&(T^N))+j[13]+4254626195&4294967295,R=I+(D<<12&4294967295|D>>>20),D=N+(T^R&(I^T))+j[14]+2792965006&4294967295,N=R+(D<<17&4294967295|D>>>15),D=T+(I^N&(R^I))+j[15]+1236535329&4294967295,T=N+(D<<22&4294967295|D>>>10),D=I+(N^R&(T^N))+j[1]+4129170786&4294967295,I=T+(D<<5&4294967295|D>>>27),D=R+(T^N&(I^T))+j[6]+3225465664&4294967295,R=I+(D<<9&4294967295|D>>>23),D=N+(I^T&(R^I))+j[11]+643717713&4294967295,N=R+(D<<14&4294967295|D>>>18),D=T+(R^I&(N^R))+j[0]+3921069994&4294967295,T=N+(D<<20&4294967295|D>>>12),D=I+(N^R&(T^N))+j[5]+3593408605&4294967295,I=T+(D<<5&4294967295|D>>>27),D=R+(T^N&(I^T))+j[10]+38016083&4294967295,R=I+(D<<9&4294967295|D>>>23),D=N+(I^T&(R^I))+j[15]+3634488961&4294967295,N=R+(D<<14&4294967295|D>>>18),D=T+(R^I&(N^R))+j[4]+3889429448&4294967295,T=N+(D<<20&4294967295|D>>>12),D=I+(N^R&(T^N))+j[9]+568446438&4294967295,I=T+(D<<5&4294967295|D>>>27),D=R+(T^N&(I^T))+j[14]+3275163606&4294967295,R=I+(D<<9&4294967295|D>>>23),D=N+(I^T&(R^I))+j[3]+4107603335&4294967295,N=R+(D<<14&4294967295|D>>>18),D=T+(R^I&(N^R))+j[8]+1163531501&4294967295,T=N+(D<<20&4294967295|D>>>12),D=I+(N^R&(T^N))+j[13]+2850285829&4294967295,I=T+(D<<5&4294967295|D>>>27),D=R+(T^N&(I^T))+j[2]+4243563512&4294967295,R=I+(D<<9&4294967295|D>>>23),D=N+(I^T&(R^I))+j[7]+1735328473&4294967295,N=R+(D<<14&4294967295|D>>>18),D=T+(R^I&(N^R))+j[12]+2368359562&4294967295,T=N+(D<<20&4294967295|D>>>12),D=I+(T^N^R)+j[5]+4294588738&4294967295,I=T+(D<<4&4294967295|D>>>28),D=R+(I^T^N)+j[8]+2272392833&4294967295,R=I+(D<<11&4294967295|D>>>21),D=N+(R^I^T)+j[11]+1839030562&4294967295,N=R+(D<<16&4294967295|D>>>16),D=T+(N^R^I)+j[14]+4259657740&4294967295,T=N+(D<<23&4294967295|D>>>9),D=I+(T^N^R)+j[1]+2763975236&4294967295,I=T+(D<<4&4294967295|D>>>28),D=R+(I^T^N)+j[4]+1272893353&4294967295,R=I+(D<<11&4294967295|D>>>21),D=N+(R^I^T)+j[7]+4139469664&4294967295,N=R+(D<<16&4294967295|D>>>16),D=T+(N^R^I)+j[10]+3200236656&4294967295,T=N+(D<<23&4294967295|D>>>9),D=I+(T^N^R)+j[13]+681279174&4294967295,I=T+(D<<4&4294967295|D>>>28),D=R+(I^T^N)+j[0]+3936430074&4294967295,R=I+(D<<11&4294967295|D>>>21),D=N+(R^I^T)+j[3]+3572445317&4294967295,N=R+(D<<16&4294967295|D>>>16),D=T+(N^R^I)+j[6]+76029189&4294967295,T=N+(D<<23&4294967295|D>>>9),D=I+(T^N^R)+j[9]+3654602809&4294967295,I=T+(D<<4&4294967295|D>>>28),D=R+(I^T^N)+j[12]+3873151461&4294967295,R=I+(D<<11&4294967295|D>>>21),D=N+(R^I^T)+j[15]+530742520&4294967295,N=R+(D<<16&4294967295|D>>>16),D=T+(N^R^I)+j[2]+3299628645&4294967295,T=N+(D<<23&4294967295|D>>>9),D=I+(N^(T|~R))+j[0]+4096336452&4294967295,I=T+(D<<6&4294967295|D>>>26),D=R+(T^(I|~N))+j[7]+1126891415&4294967295,R=I+(D<<10&4294967295|D>>>22),D=N+(I^(R|~T))+j[14]+2878612391&4294967295,N=R+(D<<15&4294967295|D>>>17),D=T+(R^(N|~I))+j[5]+4237533241&4294967295,T=N+(D<<21&4294967295|D>>>11),D=I+(N^(T|~R))+j[12]+1700485571&4294967295,I=T+(D<<6&4294967295|D>>>26),D=R+(T^(I|~N))+j[3]+2399980690&4294967295,R=I+(D<<10&4294967295|D>>>22),D=N+(I^(R|~T))+j[10]+4293915773&4294967295,N=R+(D<<15&4294967295|D>>>17),D=T+(R^(N|~I))+j[1]+2240044497&4294967295,T=N+(D<<21&4294967295|D>>>11),D=I+(N^(T|~R))+j[8]+1873313359&4294967295,I=T+(D<<6&4294967295|D>>>26),D=R+(T^(I|~N))+j[15]+4264355552&4294967295,R=I+(D<<10&4294967295|D>>>22),D=N+(I^(R|~T))+j[6]+2734768916&4294967295,N=R+(D<<15&4294967295|D>>>17),D=T+(R^(N|~I))+j[13]+1309151649&4294967295,T=N+(D<<21&4294967295|D>>>11),D=I+(N^(T|~R))+j[4]+4149444226&4294967295,I=T+(D<<6&4294967295|D>>>26),D=R+(T^(I|~N))+j[11]+3174756917&4294967295,R=I+(D<<10&4294967295|D>>>22),D=N+(I^(R|~T))+j[2]+718787259&4294967295,N=R+(D<<15&4294967295|D>>>17),D=T+(R^(N|~I))+j[9]+3951481745&4294967295,F.g[0]=F.g[0]+I&4294967295,F.g[1]=F.g[1]+(N+(D<<21&4294967295|D>>>11))&4294967295,F.g[2]=F.g[2]+N&4294967295,F.g[3]=F.g[3]+R&4294967295}r.prototype.u=function(F,I){I===void 0&&(I=F.length);for(var T=I-this.blockSize,j=this.B,N=this.h,R=0;R<I;){if(N==0)for(;R<=T;)i(this,F,R),R+=this.blockSize;if(typeof F=="string"){for(;R<I;)if(j[N++]=F.charCodeAt(R++),N==this.blockSize){i(this,j),N=0;break}}else for(;R<I;)if(j[N++]=F[R++],N==this.blockSize){i(this,j),N=0;break}}this.h=N,this.o+=I},r.prototype.v=function(){var F=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);F[0]=128;for(var I=1;I<F.length-8;++I)F[I]=0;var T=8*this.o;for(I=F.length-8;I<F.length;++I)F[I]=T&255,T/=256;for(this.u(F),F=Array(16),I=T=0;4>I;++I)for(var j=0;32>j;j+=8)F[T++]=this.g[I]>>>j&255;return F};function a(F,I){var T=s;return Object.prototype.hasOwnProperty.call(T,F)?T[F]:T[F]=I(F)}function o(F,I){this.h=I;for(var T=[],j=!0,N=F.length-1;0<=N;N--){var R=F[N]|0;j&&R==I||(T[N]=R,j=!1)}this.g=T}var s={};function c(F){return-128<=F&&128>F?a(F,function(I){return new o([I|0],0>I?-1:0)}):new o([F|0],0>F?-1:0)}function f(F){if(isNaN(F)||!isFinite(F))return p;if(0>F)return C(f(-F));for(var I=[],T=1,j=0;F>=T;j++)I[j]=F/T|0,T*=4294967296;return new o(I,0)}function d(F,I){if(F.length==0)throw Error("number format error: empty string");if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(F.charAt(0)=="-")return C(d(F.substring(1),I));if(0<=F.indexOf("-"))throw Error('number format error: interior "-" character');for(var T=f(Math.pow(I,8)),j=p,N=0;N<F.length;N+=8){var R=Math.min(8,F.length-N),D=parseInt(F.substring(N,N+R),I);8>R?(R=f(Math.pow(I,R)),j=j.j(R).add(f(D))):(j=j.j(T),j=j.add(f(D)))}return j}var p=c(0),g=c(1),m=c(16777216);n=o.prototype,n.m=function(){if(_(this))return-C(this).m();for(var F=0,I=1,T=0;T<this.g.length;T++){var j=this.i(T);F+=(0<=j?j:4294967296+j)*I,I*=4294967296}return F},n.toString=function(F){if(F=F||10,2>F||36<F)throw Error("radix out of range: "+F);if(x(this))return"0";if(_(this))return"-"+C(this).toString(F);for(var I=f(Math.pow(F,6)),T=this,j="";;){var N=P(T,I).g;T=S(T,N.j(I));var R=((0<T.g.length?T.g[0]:T.h)>>>0).toString(F);if(T=N,x(T))return R+j;for(;6>R.length;)R="0"+R;j=R+j}},n.i=function(F){return 0>F?0:F<this.g.length?this.g[F]:this.h};function x(F){if(F.h!=0)return!1;for(var I=0;I<F.g.length;I++)if(F.g[I]!=0)return!1;return!0}function _(F){return F.h==-1}n.l=function(F){return F=S(this,F),_(F)?-1:x(F)?0:1};function C(F){for(var I=F.g.length,T=[],j=0;j<I;j++)T[j]=~F.g[j];return new o(T,~F.h).add(g)}n.abs=function(){return _(this)?C(this):this},n.add=function(F){for(var I=Math.max(this.g.length,F.g.length),T=[],j=0,N=0;N<=I;N++){var R=j+(this.i(N)&65535)+(F.i(N)&65535),D=(R>>>16)+(this.i(N)>>>16)+(F.i(N)>>>16);j=D>>>16,R&=65535,D&=65535,T[N]=D<<16|R}return new o(T,T[T.length-1]&-2147483648?-1:0)};function S(F,I){return F.add(C(I))}n.j=function(F){if(x(this)||x(F))return p;if(_(this))return _(F)?C(this).j(C(F)):C(C(this).j(F));if(_(F))return C(this.j(C(F)));if(0>this.l(m)&&0>F.l(m))return f(this.m()*F.m());for(var I=this.g.length+F.g.length,T=[],j=0;j<2*I;j++)T[j]=0;for(j=0;j<this.g.length;j++)for(var N=0;N<F.g.length;N++){var R=this.i(j)>>>16,D=this.i(j)&65535,L=F.i(N)>>>16,G=F.i(N)&65535;T[2*j+2*N]+=D*G,k(T,2*j+2*N),T[2*j+2*N+1]+=R*G,k(T,2*j+2*N+1),T[2*j+2*N+1]+=D*L,k(T,2*j+2*N+1),T[2*j+2*N+2]+=R*L,k(T,2*j+2*N+2)}for(j=0;j<I;j++)T[j]=T[2*j+1]<<16|T[2*j];for(j=I;j<2*I;j++)T[j]=0;return new o(T,0)};function k(F,I){for(;(F[I]&65535)!=F[I];)F[I+1]+=F[I]>>>16,F[I]&=65535,I++}function M(F,I){this.g=F,this.h=I}function P(F,I){if(x(I))throw Error("division by zero");if(x(F))return new M(p,p);if(_(F))return I=P(C(F),I),new M(C(I.g),C(I.h));if(_(I))return I=P(F,C(I)),new M(C(I.g),I.h);if(30<F.g.length){if(_(F)||_(I))throw Error("slowDivide_ only works with positive integers.");for(var T=g,j=I;0>=j.l(F);)T=Y(T),j=Y(j);var N=z(T,1),R=z(j,1);for(j=z(j,2),T=z(T,2);!x(j);){var D=R.add(j);0>=D.l(F)&&(N=N.add(T),R=D),j=z(j,1),T=z(T,1)}return I=S(F,N.j(I)),new M(N,I)}for(N=p;0<=F.l(I);){for(T=Math.max(1,Math.floor(F.m()/I.m())),j=Math.ceil(Math.log(T)/Math.LN2),j=48>=j?1:Math.pow(2,j-48),R=f(T),D=R.j(I);_(D)||0<D.l(F);)T-=j,R=f(T),D=R.j(I);x(R)&&(R=g),N=N.add(R),F=S(F,D)}return new M(N,F)}n.A=function(F){return P(this,F).h},n.and=function(F){for(var I=Math.max(this.g.length,F.g.length),T=[],j=0;j<I;j++)T[j]=this.i(j)&F.i(j);return new o(T,this.h&F.h)},n.or=function(F){for(var I=Math.max(this.g.length,F.g.length),T=[],j=0;j<I;j++)T[j]=this.i(j)|F.i(j);return new o(T,this.h|F.h)},n.xor=function(F){for(var I=Math.max(this.g.length,F.g.length),T=[],j=0;j<I;j++)T[j]=this.i(j)^F.i(j);return new o(T,this.h^F.h)};function Y(F){for(var I=F.g.length+1,T=[],j=0;j<I;j++)T[j]=F.i(j)<<1|F.i(j-1)>>>31;return new o(T,F.h)}function z(F,I){var T=I>>5;I%=32;for(var j=F.g.length-T,N=[],R=0;R<j;R++)N[R]=0<I?F.i(R+T)>>>I|F.i(R+T+1)<<32-I:F.i(R+T);return new o(N,F.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,K8=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=f,o.fromString=d,lf=o}).apply(typeof i_<"u"?i_:typeof self<"u"?self:typeof window<"u"?window:{});var Jp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Q8,G0,Z8,Eg,qy,J8,eS,tS;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(w,q,K){return w==Array.prototype||w==Object.prototype||(w[q]=K.value),w};function t(w){w=[typeof globalThis=="object"&&globalThis,w,typeof window=="object"&&window,typeof self=="object"&&self,typeof Jp=="object"&&Jp];for(var q=0;q<w.length;++q){var K=w[q];if(K&&K.Math==Math)return K}throw Error("Cannot find global object")}var r=t(this);function i(w,q){if(q)e:{var K=r;w=w.split(".");for(var fe=0;fe<w.length-1;fe++){var Ne=w[fe];if(!(Ne in K))break e;K=K[Ne]}w=w[w.length-1],fe=K[w],q=q(fe),q!=fe&&q!=null&&e(K,w,{configurable:!0,writable:!0,value:q})}}function a(w,q){w instanceof String&&(w+="");var K=0,fe=!1,Ne={next:function(){if(!fe&&K<w.length){var Be=K++;return{value:q(Be,w[Be]),done:!1}}return fe=!0,{done:!0,value:void 0}}};return Ne[Symbol.iterator]=function(){return Ne},Ne}i("Array.prototype.values",function(w){return w||function(){return a(this,function(q,K){return K})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},s=this||self;function c(w){var q=typeof w;return q=q!="object"?q:w?Array.isArray(w)?"array":q:"null",q=="array"||q=="object"&&typeof w.length=="number"}function f(w){var q=typeof w;return q=="object"&&w!=null||q=="function"}function d(w,q,K){return w.call.apply(w.bind,arguments)}function p(w,q,K){if(!w)throw Error();if(2<arguments.length){var fe=Array.prototype.slice.call(arguments,2);return function(){var Ne=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(Ne,fe),w.apply(q,Ne)}}return function(){return w.apply(q,arguments)}}function g(w,q,K){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:p,g.apply(null,arguments)}function m(w,q){var K=Array.prototype.slice.call(arguments,1);return function(){var fe=K.slice();return fe.push.apply(fe,arguments),w.apply(this,fe)}}function x(w,q){function K(){}K.prototype=q.prototype,w.aa=q.prototype,w.prototype=new K,w.prototype.constructor=w,w.Qb=function(fe,Ne,Be){for(var st=Array(arguments.length-2),vn=2;vn<arguments.length;vn++)st[vn-2]=arguments[vn];return q.prototype[Ne].apply(fe,st)}}function _(w){const q=w.length;if(0<q){const K=Array(q);for(let fe=0;fe<q;fe++)K[fe]=w[fe];return K}return[]}function C(w,q){for(let K=1;K<arguments.length;K++){const fe=arguments[K];if(c(fe)){const Ne=w.length||0,Be=fe.length||0;w.length=Ne+Be;for(let st=0;st<Be;st++)w[Ne+st]=fe[st]}else w.push(fe)}}class S{constructor(q,K){this.i=q,this.j=K,this.h=0,this.g=null}get(){let q;return 0<this.h?(this.h--,q=this.g,this.g=q.next,q.next=null):q=this.i(),q}}function k(w){return/^[\s\xa0]*$/.test(w)}function M(){var w=s.navigator;return w&&(w=w.userAgent)?w:""}function P(w){return P[" "](w),w}P[" "]=function(){};var Y=M().indexOf("Gecko")!=-1&&!(M().toLowerCase().indexOf("webkit")!=-1&&M().indexOf("Edge")==-1)&&!(M().indexOf("Trident")!=-1||M().indexOf("MSIE")!=-1)&&M().indexOf("Edge")==-1;function z(w,q,K){for(const fe in w)q.call(K,w[fe],fe,w)}function F(w,q){for(const K in w)q.call(void 0,w[K],K,w)}function I(w){const q={};for(const K in w)q[K]=w[K];return q}const T="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function j(w,q){let K,fe;for(let Ne=1;Ne<arguments.length;Ne++){fe=arguments[Ne];for(K in fe)w[K]=fe[K];for(let Be=0;Be<T.length;Be++)K=T[Be],Object.prototype.hasOwnProperty.call(fe,K)&&(w[K]=fe[K])}}function N(w){var q=1;w=w.split(":");const K=[];for(;0<q&&w.length;)K.push(w.shift()),q--;return w.length&&K.push(w.join(":")),K}function R(w){s.setTimeout(()=>{throw w},0)}function D(){var w=se;let q=null;return w.g&&(q=w.g,w.g=w.g.next,w.g||(w.h=null),q.next=null),q}class L{constructor(){this.h=this.g=null}add(q,K){const fe=G.get();fe.set(q,K),this.h?this.h.next=fe:this.g=fe,this.h=fe}}var G=new S(()=>new U,w=>w.reset());class U{constructor(){this.next=this.g=this.h=null}set(q,K){this.h=q,this.g=K,this.next=null}reset(){this.next=this.g=this.h=null}}let H,te=!1,se=new L,ee=()=>{const w=s.Promise.resolve(void 0);H=()=>{w.then(ie)}};var ie=()=>{for(var w;w=D();){try{w.h.call(w.g)}catch(K){R(K)}var q=G;q.j(w),100>q.h&&(q.h++,w.next=q.g,q.g=w)}te=!1};function $(){this.s=this.s,this.C=this.C}$.prototype.s=!1,$.prototype.ma=function(){this.s||(this.s=!0,this.N())},$.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function W(w,q){this.type=w,this.g=this.target=q,this.defaultPrevented=!1}W.prototype.h=function(){this.defaultPrevented=!0};var Q=function(){if(!s.addEventListener||!Object.defineProperty)return!1;var w=!1,q=Object.defineProperty({},"passive",{get:function(){w=!0}});try{const K=()=>{};s.addEventListener("test",K,q),s.removeEventListener("test",K,q)}catch{}return w}();function J(w,q){if(W.call(this,w?w.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,w){var K=this.type=w.type,fe=w.changedTouches&&w.changedTouches.length?w.changedTouches[0]:null;if(this.target=w.target||w.srcElement,this.g=q,q=w.relatedTarget){if(Y){e:{try{P(q.nodeName);var Ne=!0;break e}catch{}Ne=!1}Ne||(q=null)}}else K=="mouseover"?q=w.fromElement:K=="mouseout"&&(q=w.toElement);this.relatedTarget=q,fe?(this.clientX=fe.clientX!==void 0?fe.clientX:fe.pageX,this.clientY=fe.clientY!==void 0?fe.clientY:fe.pageY,this.screenX=fe.screenX||0,this.screenY=fe.screenY||0):(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0),this.button=w.button,this.key=w.key||"",this.ctrlKey=w.ctrlKey,this.altKey=w.altKey,this.shiftKey=w.shiftKey,this.metaKey=w.metaKey,this.pointerId=w.pointerId||0,this.pointerType=typeof w.pointerType=="string"?w.pointerType:he[w.pointerType]||"",this.state=w.state,this.i=w,w.defaultPrevented&&J.aa.h.call(this)}}x(J,W);var he={2:"touch",3:"pen",4:"mouse"};J.prototype.h=function(){J.aa.h.call(this);var w=this.i;w.preventDefault?w.preventDefault():w.returnValue=!1};var be="closure_listenable_"+(1e6*Math.random()|0),_e=0;function Ie(w,q,K,fe,Ne){this.listener=w,this.proxy=null,this.src=q,this.type=K,this.capture=!!fe,this.ha=Ne,this.key=++_e,this.da=this.fa=!1}function Oe(w){w.da=!0,w.listener=null,w.proxy=null,w.src=null,w.ha=null}function Ve(w){this.src=w,this.g={},this.h=0}Ve.prototype.add=function(w,q,K,fe,Ne){var Be=w.toString();w=this.g[Be],w||(w=this.g[Be]=[],this.h++);var st=ot(w,q,fe,Ne);return-1<st?(q=w[st],K||(q.fa=!1)):(q=new Ie(q,this.src,Be,!!fe,Ne),q.fa=K,w.push(q)),q};function nt(w,q){var K=q.type;if(K in w.g){var fe=w.g[K],Ne=Array.prototype.indexOf.call(fe,q,void 0),Be;(Be=0<=Ne)&&Array.prototype.splice.call(fe,Ne,1),Be&&(Oe(q),w.g[K].length==0&&(delete w.g[K],w.h--))}}function ot(w,q,K,fe){for(var Ne=0;Ne<w.length;++Ne){var Be=w[Ne];if(!Be.da&&Be.listener==q&&Be.capture==!!K&&Be.ha==fe)return Ne}return-1}var ft="closure_lm_"+(1e6*Math.random()|0),de={};function rt(w,q,K,fe,Ne){if(Array.isArray(q)){for(var Be=0;Be<q.length;Be++)rt(w,q[Be],K,fe,Ne);return null}return K=Lt(K),w&&w[be]?w.K(q,K,f(fe)?!!fe.capture:!1,Ne):dt(w,q,K,!1,fe,Ne)}function dt(w,q,K,fe,Ne,Be){if(!q)throw Error("Invalid event type");var st=f(Ne)?!!Ne.capture:!!Ne,vn=ct(w);if(vn||(w[ft]=vn=new Ve(w)),K=vn.add(q,K,fe,st,Be),K.proxy)return K;if(fe=at(),K.proxy=fe,fe.src=w,fe.listener=K,w.addEventListener)Q||(Ne=st),Ne===void 0&&(Ne=!1),w.addEventListener(q.toString(),fe,Ne);else if(w.attachEvent)w.attachEvent(Ye(q.toString()),fe);else if(w.addListener&&w.removeListener)w.addListener(fe);else throw Error("addEventListener and attachEvent are unavailable.");return K}function at(){function w(K){return q.call(w.src,w.listener,K)}const q=vt;return w}function Ee(w,q,K,fe,Ne){if(Array.isArray(q))for(var Be=0;Be<q.length;Be++)Ee(w,q[Be],K,fe,Ne);else fe=f(fe)?!!fe.capture:!!fe,K=Lt(K),w&&w[be]?(w=w.i,q=String(q).toString(),q in w.g&&(Be=w.g[q],K=ot(Be,K,fe,Ne),-1<K&&(Oe(Be[K]),Array.prototype.splice.call(Be,K,1),Be.length==0&&(delete w.g[q],w.h--)))):w&&(w=ct(w))&&(q=w.g[q.toString()],w=-1,q&&(w=ot(q,K,fe,Ne)),(K=-1<w?q[w]:null)&&lt(K))}function lt(w){if(typeof w!="number"&&w&&!w.da){var q=w.src;if(q&&q[be])nt(q.i,w);else{var K=w.type,fe=w.proxy;q.removeEventListener?q.removeEventListener(K,fe,w.capture):q.detachEvent?q.detachEvent(Ye(K),fe):q.addListener&&q.removeListener&&q.removeListener(fe),(K=ct(q))?(nt(K,w),K.h==0&&(K.src=null,q[ft]=null)):Oe(w)}}}function Ye(w){return w in de?de[w]:de[w]="on"+w}function vt(w,q){if(w.da)w=!0;else{q=new J(q,this);var K=w.listener,fe=w.ha||w.src;w.fa&&lt(w),w=K.call(fe,q)}return w}function ct(w){return w=w[ft],w instanceof Ve?w:null}var it="__closure_events_fn_"+(1e9*Math.random()>>>0);function Lt(w){return typeof w=="function"?w:(w[it]||(w[it]=function(q){return w.handleEvent(q)}),w[it])}function ht(){$.call(this),this.i=new Ve(this),this.M=this,this.F=null}x(ht,$),ht.prototype[be]=!0,ht.prototype.removeEventListener=function(w,q,K,fe){Ee(this,w,q,K,fe)};function yt(w,q){var K,fe=w.F;if(fe)for(K=[];fe;fe=fe.F)K.push(fe);if(w=w.M,fe=q.type||q,typeof q=="string")q=new W(q,w);else if(q instanceof W)q.target=q.target||w;else{var Ne=q;q=new W(fe,w),j(q,Ne)}if(Ne=!0,K)for(var Be=K.length-1;0<=Be;Be--){var st=q.g=K[Be];Ne=_t(st,fe,!0,q)&&Ne}if(st=q.g=w,Ne=_t(st,fe,!0,q)&&Ne,Ne=_t(st,fe,!1,q)&&Ne,K)for(Be=0;Be<K.length;Be++)st=q.g=K[Be],Ne=_t(st,fe,!1,q)&&Ne}ht.prototype.N=function(){if(ht.aa.N.call(this),this.i){var w=this.i,q;for(q in w.g){for(var K=w.g[q],fe=0;fe<K.length;fe++)Oe(K[fe]);delete w.g[q],w.h--}}this.F=null},ht.prototype.K=function(w,q,K,fe){return this.i.add(String(w),q,!1,K,fe)},ht.prototype.L=function(w,q,K,fe){return this.i.add(String(w),q,!0,K,fe)};function _t(w,q,K,fe){if(q=w.i.g[String(q)],!q)return!0;q=q.concat();for(var Ne=!0,Be=0;Be<q.length;++Be){var st=q[Be];if(st&&!st.da&&st.capture==K){var vn=st.listener,Vr=st.ha||st.src;st.fa&&nt(w.i,st),Ne=vn.call(Vr,fe)!==!1&&Ne}}return Ne&&!fe.defaultPrevented}function ut(w,q,K){if(typeof w=="function")K&&(w=g(w,K));else if(w&&typeof w.handleEvent=="function")w=g(w.handleEvent,w);else throw Error("Invalid listener argument");return 2147483647<Number(q)?-1:s.setTimeout(w,q||0)}function xt(w){w.g=ut(()=>{w.g=null,w.i&&(w.i=!1,xt(w))},w.l);const q=w.h;w.h=null,w.m.apply(null,q)}class mt extends ${constructor(q,K){super(),this.m=q,this.l=K,this.h=null,this.i=!1,this.g=null}j(q){this.h=arguments,this.g?this.i=!0:xt(this)}N(){super.N(),this.g&&(s.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function mn(w){$.call(this),this.h=w,this.g={}}x(mn,$);var Kt=[];function Bt(w){z(w.g,function(q,K){this.g.hasOwnProperty(K)&&lt(q)},w),w.g={}}mn.prototype.N=function(){mn.aa.N.call(this),Bt(this)},mn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var jt=s.JSON.stringify,Vn=s.JSON.parse,kt=class{stringify(w){return s.JSON.stringify(w,void 0)}parse(w){return s.JSON.parse(w,void 0)}};function Pn(){}Pn.prototype.h=null;function Ft(w){return w.h||(w.h=w.i())}function Ht(){}var Mn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ut(){W.call(this,"d")}x(Ut,W);function Tt(){W.call(this,"c")}x(Tt,W);var nn={},$i=null;function wr(){return $i=$i||new ht}nn.La="serverreachability";function Yr(w){W.call(this,nn.La,w)}x(Yr,W);function Tr(w){const q=wr();yt(q,new Yr(q))}nn.STAT_EVENT="statevent";function Wt(w,q){W.call(this,nn.STAT_EVENT,w),this.stat=q}x(Wt,W);function qn(w){const q=wr();yt(q,new Wt(q,w))}nn.Ma="timingevent";function fr(w,q){W.call(this,nn.Ma,w),this.size=q}x(fr,W);function Kn(w,q){if(typeof w!="function")throw Error("Fn must not be null and must be a function");return s.setTimeout(function(){w()},q)}function Br(){this.g=!0}Br.prototype.xa=function(){this.g=!1};function _r(w,q,K,fe,Ne,Be){w.info(function(){if(w.g)if(Be)for(var st="",vn=Be.split("&"),Vr=0;Vr<vn.length;Vr++){var wn=vn[Vr].split("=");if(1<wn.length){var Hn=wn[0];wn=wn[1];var hr=Hn.split("_");st=2<=hr.length&&hr[1]=="type"?st+(Hn+"="+wn+"&"):st+(Hn+"=redacted&")}}else st=null;else st=Be;return"XMLHTTP REQ ("+fe+") [attempt "+Ne+"]: "+q+`
`+K+`
`+st})}function yi(w,q,K,fe,Ne,Be,st){w.info(function(){return"XMLHTTP RESP ("+fe+") [ attempt "+Ne+"]: "+q+`
`+K+`
`+Be+" "+st})}function Lr(w,q,K,fe){w.info(function(){return"XMLHTTP TEXT ("+q+"): "+za(w,K)+(fe?" "+fe:"")})}function xs(w,q){w.info(function(){return"TIMEOUT: "+q})}Br.prototype.info=function(){};function za(w,q){if(!w.g)return q;if(!q)return null;try{var K=JSON.parse(q);if(K){for(w=0;w<K.length;w++)if(Array.isArray(K[w])){var fe=K[w];if(!(2>fe.length)){var Ne=fe[1];if(Array.isArray(Ne)&&!(1>Ne.length)){var Be=Ne[0];if(Be!="noop"&&Be!="stop"&&Be!="close")for(var st=1;st<Ne.length;st++)Ne[st]=""}}}}return jt(K)}catch{return q}}var Ui={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},zi={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},xi;function bi(){}x(bi,Pn),bi.prototype.g=function(){return new XMLHttpRequest},bi.prototype.i=function(){return{}},xi=new bi;function Ar(w,q,K,fe){this.j=w,this.i=q,this.l=K,this.R=fe||1,this.U=new mn(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new dr}function dr(){this.i=null,this.g="",this.h=!1}var Va={},No={};function aa(w,q,K){w.L=1,w.v=Es(li(q)),w.m=K,w.P=!0,qa(w,null)}function qa(w,q){w.F=Date.now(),ts(w),w.A=li(w.v);var K=w.A,fe=w.R;Array.isArray(fe)||(fe=[String(fe)]),bc(K.i,"t",fe),w.C=0,K=w.j.J,w.h=new dr,w.g=Xr(w.j,K?q:null,!w.m),0<w.O&&(w.M=new mt(g(w.Y,w,w.g),w.O)),q=w.U,K=w.g,fe=w.ca;var Ne="readystatechange";Array.isArray(Ne)||(Ne&&(Kt[0]=Ne.toString()),Ne=Kt);for(var Be=0;Be<Ne.length;Be++){var st=rt(K,Ne[Be],fe||q.handleEvent,!1,q.h||q);if(!st)break;q.g[st.key]=st}q=w.H?I(w.H):{},w.m?(w.u||(w.u="POST"),q["Content-Type"]="application/x-www-form-urlencoded",w.g.ea(w.A,w.u,w.m,q)):(w.u="GET",w.g.ea(w.A,w.u,null,q)),Tr(),_r(w.i,w.u,w.A,w.l,w.R,w.m)}Ar.prototype.ca=function(w){w=w.target;const q=this.M;q&&sa(w)==3?q.j():this.Y(w)},Ar.prototype.Y=function(w){try{if(w==this.g)e:{const hr=sa(this.g);var q=this.g.Ba();const Za=this.g.Z();if(!(3>hr)&&(hr!=3||this.g&&(this.h.h||this.g.oa()||wc(this.g)))){this.J||hr!=4||q==7||(q==8||0>=Za?Tr(3):Tr(2)),ns(this);var K=this.g.Z();this.X=K;t:if(Zs(this)){var fe=wc(this.g);w="";var Ne=fe.length,Be=sa(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){si(this),oi(this);var st="";break t}this.h.i=new s.TextDecoder}for(q=0;q<Ne;q++)this.h.h=!0,w+=this.h.i.decode(fe[q],{stream:!(Be&&q==Ne-1)});fe.length=0,this.h.g+=w,this.C=0,st=this.h.g}else st=this.g.oa();if(this.o=K==200,yi(this.i,this.u,this.A,this.l,this.R,hr,K),this.o){if(this.T&&!this.K){t:{if(this.g){var vn,Vr=this.g;if((vn=Vr.g?Vr.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!k(vn)){var wn=vn;break t}}wn=null}if(K=wn)Lr(this.i,this.l,K,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,bs(this,K);else{this.o=!1,this.s=3,qn(12),si(this),oi(this);break e}}if(this.P){K=!0;let Ai;for(;!this.J&&this.C<st.length;)if(Ai=fu(this,st),Ai==No){hr==4&&(this.s=4,qn(14),K=!1),Lr(this.i,this.l,null,"[Incomplete Response]");break}else if(Ai==Va){this.s=4,qn(15),Lr(this.i,this.l,st,"[Invalid Chunk]"),K=!1;break}else Lr(this.i,this.l,Ai,null),bs(this,Ai);if(Zs(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),hr!=4||st.length!=0||this.h.h||(this.s=1,qn(16),K=!1),this.o=this.o&&K,!K)Lr(this.i,this.l,st,"[Invalid Chunked Response]"),si(this),oi(this);else if(0<st.length&&!this.W){this.W=!0;var Hn=this.j;Hn.g==this&&Hn.ba&&!Hn.M&&(Hn.j.info("Great, no buffering proxy detected. Bytes received: "+st.length),bt(Hn),Hn.M=!0,qn(11))}}else Lr(this.i,this.l,st,null),bs(this,st);hr==4&&si(this),this.o&&!this.J&&(hr==4?on(this.j,this):(this.o=!1,ts(this)))}else pu(this.g),K==400&&0<st.indexOf("Unknown SID")?(this.s=3,qn(12)):(this.s=0,qn(13)),si(this),oi(this)}}}catch{}finally{}};function Zs(w){return w.g?w.u=="GET"&&w.L!=2&&w.j.Ca:!1}function fu(w,q){var K=w.C,fe=q.indexOf(`
`,K);return fe==-1?No:(K=Number(q.substring(K,fe)),isNaN(K)?Va:(fe+=1,fe+K>q.length?No:(q=q.slice(fe,fe+K),w.C=fe+K,q)))}Ar.prototype.cancel=function(){this.J=!0,si(this)};function ts(w){w.S=Date.now()+w.I,mc(w,w.I)}function mc(w,q){if(w.B!=null)throw Error("WatchDog timer not null");w.B=Kn(g(w.ba,w),q)}function ns(w){w.B&&(s.clearTimeout(w.B),w.B=null)}Ar.prototype.ba=function(){this.B=null;const w=Date.now();0<=w-this.S?(xs(this.i,this.A),this.L!=2&&(Tr(),qn(17)),si(this),this.s=2,oi(this)):mc(this,this.S-w)};function oi(w){w.j.G==0||w.J||on(w.j,w)}function si(w){ns(w);var q=w.M;q&&typeof q.ma=="function"&&q.ma(),w.M=null,Bt(w.U),w.g&&(q=w.g,w.g=null,q.abort(),q.ma())}function bs(w,q){try{var K=w.j;if(K.G!=0&&(K.g==w||Ha(K.h,w))){if(!w.K&&Ha(K.h,w)&&K.G==3){try{var fe=K.Da.g.parse(q)}catch{fe=null}if(Array.isArray(fe)&&fe.length==3){var Ne=fe;if(Ne[0]==0){e:if(!K.u){if(K.g)if(K.g.F+3e3<w.F)Gt(K),Mo(K);else break e;Ke(K),qn(18)}}else K.za=Ne[1],0<K.za-K.T&&37500>Ne[2]&&K.F&&K.v==0&&!K.C&&(K.C=Kn(g(K.Za,K),6e3));if(1>=el(K.h)&&K.ca){try{K.ca()}catch{}K.ca=void 0}}else Qn(K,11)}else if((w.K||K.g==w)&&Gt(K),!k(q))for(Ne=K.Da.g.parse(q),q=0;q<Ne.length;q++){let wn=Ne[q];if(K.T=wn[0],wn=wn[1],K.G==2)if(wn[0]=="c"){K.K=wn[1],K.ia=wn[2];const Hn=wn[3];Hn!=null&&(K.la=Hn,K.j.info("VER="+K.la));const hr=wn[4];hr!=null&&(K.Aa=hr,K.j.info("SVER="+K.Aa));const Za=wn[5];Za!=null&&typeof Za=="number"&&0<Za&&(fe=1.5*Za,K.L=fe,K.j.info("backChannelRequestTimeoutMs_="+fe)),fe=K;const Ai=w.g;if(Ai){const ci=Ai.g?Ai.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ci){var Be=fe.h;Be.g||ci.indexOf("spdy")==-1&&ci.indexOf("quic")==-1&&ci.indexOf("h2")==-1||(Be.j=Be.l,Be.g=new Set,Be.h&&(rs(Be,Be.h),Be.h=null))}if(fe.D){const os=Ai.g?Ai.g.getResponseHeader("X-HTTP-Session-Id"):null;os&&(fe.ya=os,_n(fe.I,fe.D,os))}}K.G=3,K.l&&K.l.ua(),K.ba&&(K.R=Date.now()-w.F,K.j.info("Handshake RTT: "+K.R+"ms")),fe=K;var st=w;if(fe.qa=ir(fe,fe.J?fe.ia:null,fe.W),st.K){Gi(fe.h,st);var vn=st,Vr=fe.L;Vr&&(vn.I=Vr),vn.B&&(ns(vn),ts(vn)),fe.g=st}else $e(fe);0<K.i.length&&B(K)}else wn[0]!="stop"&&wn[0]!="close"||Qn(K,7);else K.G==3&&(wn[0]=="stop"||wn[0]=="close"?wn[0]=="stop"?Qn(K,7):Bl(K):wn[0]!="noop"&&K.l&&K.l.ta(wn),K.v=0)}}Tr(4)}catch{}}var jl=class{constructor(w,q){this.g=w,this.map=q}};function Do(w){this.l=w||10,s.PerformanceNavigationTiming?(w=s.performance.getEntriesByType("navigation"),w=0<w.length&&(w[0].nextHopProtocol=="hq"||w[0].nextHopProtocol=="h2")):w=!!(s.chrome&&s.chrome.loadTimes&&s.chrome.loadTimes()&&s.chrome.loadTimes().wasFetchedViaSpdy),this.j=w?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Js(w){return w.h?!0:w.g?w.g.size>=w.j:!1}function el(w){return w.h?1:w.g?w.g.size:0}function Ha(w,q){return w.h?w.h==q:w.g?w.g.has(q):!1}function rs(w,q){w.g?w.g.add(q):w.h=q}function Gi(w,q){w.h&&w.h==q?w.h=null:w.g&&w.g.has(q)&&w.g.delete(q)}Do.prototype.cancel=function(){if(this.i=Pr(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const w of this.g.values())w.cancel();this.g.clear()}};function Pr(w){if(w.h!=null)return w.i.concat(w.h.D);if(w.g!=null&&w.g.size!==0){let q=w.i;for(const K of w.g.values())q=q.concat(K.D);return q}return _(w.i)}function du(w){if(w.V&&typeof w.V=="function")return w.V();if(typeof Map<"u"&&w instanceof Map||typeof Set<"u"&&w instanceof Set)return Array.from(w.values());if(typeof w=="string")return w.split("");if(c(w)){for(var q=[],K=w.length,fe=0;fe<K;fe++)q.push(w[fe]);return q}q=[],K=0;for(fe in w)q[K++]=w[fe];return q}function ba(w){if(w.na&&typeof w.na=="function")return w.na();if(!w.V||typeof w.V!="function"){if(typeof Map<"u"&&w instanceof Map)return Array.from(w.keys());if(!(typeof Set<"u"&&w instanceof Set)){if(c(w)||typeof w=="string"){var q=[];w=w.length;for(var K=0;K<w;K++)q.push(K);return q}q=[],K=0;for(const fe in w)q[K++]=fe;return q}}}function ws(w,q){if(w.forEach&&typeof w.forEach=="function")w.forEach(q,void 0);else if(c(w)||typeof w=="string")Array.prototype.forEach.call(w,q,void 0);else for(var K=ba(w),fe=du(w),Ne=fe.length,Be=0;Be<Ne;Be++)q.call(void 0,fe[Be],K&&K[Be],w)}var _s=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Wa(w,q){if(w){w=w.split("&");for(var K=0;K<w.length;K++){var fe=w[K].indexOf("="),Ne=null;if(0<=fe){var Be=w[K].substring(0,fe);Ne=w[K].substring(fe+1)}else Be=w[K];q(Be,Ne?decodeURIComponent(Ne.replace(/\+/g," ")):"")}}}function bn(w){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,w instanceof bn){this.h=w.h,As(this,w.j),this.o=w.o,this.g=w.g,Ss(this,w.s),this.l=w.l;var q=w.i,K=new Ii;K.i=q.i,q.g&&(K.g=new Map(q.g),K.h=q.h),is(this,K),this.m=w.m}else w&&(q=String(w).match(_s))?(this.h=!1,As(this,q[1]||"",!0),this.o=wa(q[2]||""),this.g=wa(q[3]||"",!0),Ss(this,q[4]),this.l=wa(q[5]||"",!0),is(this,q[6]||"",!0),this.m=wa(q[7]||"")):(this.h=!1,this.i=new Ii(null,this.h))}bn.prototype.toString=function(){var w=[],q=this.j;q&&w.push(Oo(q,vc,!0),":");var K=this.g;return(K||q=="file")&&(w.push("//"),(q=this.o)&&w.push(Oo(q,vc,!0),"@"),w.push(encodeURIComponent(String(K)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),K=this.s,K!=null&&w.push(":",String(K))),(K=this.l)&&(this.g&&K.charAt(0)!="/"&&w.push("/"),w.push(Oo(K,K.charAt(0)=="/"?Cf:yc,!0))),(K=this.i.toString())&&w.push("?",K),(K=this.m)&&w.push("#",Oo(K,tl)),w.join("")};function li(w){return new bn(w)}function As(w,q,K){w.j=K?wa(q,!0):q,w.j&&(w.j=w.j.replace(/:$/,""))}function Ss(w,q){if(q){if(q=Number(q),isNaN(q)||0>q)throw Error("Bad port number "+q);w.s=q}else w.s=null}function is(w,q,K){q instanceof Ii?(w.i=q,hu(w.i,w.h)):(K||(q=Oo(q,xc)),w.i=new Ii(q,w.h))}function _n(w,q,K){w.i.set(q,K)}function Es(w){return _n(w,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),w}function wa(w,q){return w?q?decodeURI(w.replace(/%25/g,"%2525")):decodeURIComponent(w):""}function Oo(w,q,K){return typeof w=="string"?(w=encodeURI(w).replace(q,Cs),K&&(w=w.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),w):null}function Cs(w){return w=w.charCodeAt(0),"%"+(w>>4&15).toString(16)+(w&15).toString(16)}var vc=/[#\/\?@]/g,yc=/[#\?:]/g,Cf=/[#\?]/g,xc=/[#\?@]/g,tl=/#/g;function Ii(w,q){this.h=this.g=null,this.i=w||null,this.j=!!q}function $a(w){w.g||(w.g=new Map,w.h=0,w.i&&Wa(w.i,function(q,K){w.add(decodeURIComponent(q.replace(/\+/g," ")),K)}))}n=Ii.prototype,n.add=function(w,q){$a(this),this.i=null,w=qt(this,w);var K=this.g.get(w);return K||this.g.set(w,K=[]),K.push(q),this.h+=1,this};function _a(w,q){$a(w),q=qt(w,q),w.g.has(q)&&(w.i=null,w.h-=w.g.get(q).length,w.g.delete(q))}function go(w,q){return $a(w),q=qt(w,q),w.g.has(q)}n.forEach=function(w,q){$a(this),this.g.forEach(function(K,fe){K.forEach(function(Ne){w.call(q,Ne,fe,this)},this)},this)},n.na=function(){$a(this);const w=Array.from(this.g.values()),q=Array.from(this.g.keys()),K=[];for(let fe=0;fe<q.length;fe++){const Ne=w[fe];for(let Be=0;Be<Ne.length;Be++)K.push(q[fe])}return K},n.V=function(w){$a(this);let q=[];if(typeof w=="string")go(this,w)&&(q=q.concat(this.g.get(qt(this,w))));else{w=Array.from(this.g.values());for(let K=0;K<w.length;K++)q=q.concat(w[K])}return q},n.set=function(w,q){return $a(this),this.i=null,w=qt(this,w),go(this,w)&&(this.h-=this.g.get(w).length),this.g.set(w,[q]),this.h+=1,this},n.get=function(w,q){return w?(w=this.V(w),0<w.length?String(w[0]):q):q};function bc(w,q,K){_a(w,q),0<K.length&&(w.i=null,w.g.set(qt(w,q),_(K)),w.h+=K.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const w=[],q=Array.from(this.g.keys());for(var K=0;K<q.length;K++){var fe=q[K];const Be=encodeURIComponent(String(fe)),st=this.V(fe);for(fe=0;fe<st.length;fe++){var Ne=Be;st[fe]!==""&&(Ne+="="+encodeURIComponent(String(st[fe]))),w.push(Ne)}}return this.i=w.join("&")};function qt(w,q){return q=String(q),w.j&&(q=q.toLowerCase()),q}function hu(w,q){q&&!w.j&&($a(w),w.i=null,w.g.forEach(function(K,fe){var Ne=fe.toLowerCase();fe!=Ne&&(_a(this,fe),bc(this,Ne,K))},w)),w.j=q}function nl(w,q){const K=new Br;if(s.Image){const fe=new Image;fe.onload=m(wi,K,"TestLoadImage: loaded",!0,q,fe),fe.onerror=m(wi,K,"TestLoadImage: error",!1,q,fe),fe.onabort=m(wi,K,"TestLoadImage: abort",!1,q,fe),fe.ontimeout=m(wi,K,"TestLoadImage: timeout",!1,q,fe),s.setTimeout(function(){fe.ontimeout&&fe.ontimeout()},1e4),fe.src=w}else q(!1)}function mo(w,q){const K=new Br,fe=new AbortController,Ne=setTimeout(()=>{fe.abort(),wi(K,"TestPingServer: timeout",!1,q)},1e4);fetch(w,{signal:fe.signal}).then(Be=>{clearTimeout(Ne),Be.ok?wi(K,"TestPingServer: ok",!0,q):wi(K,"TestPingServer: server error",!1,q)}).catch(()=>{clearTimeout(Ne),wi(K,"TestPingServer: error",!1,q)})}function wi(w,q,K,fe,Ne){try{Ne&&(Ne.onload=null,Ne.onerror=null,Ne.onabort=null,Ne.ontimeout=null),fe(K)}catch{}}function Aa(){this.g=new kt}function ko(w,q,K){const fe=K||"";try{ws(w,function(Ne,Be){let st=Ne;f(Ne)&&(st=jt(Ne)),q.push(fe+Be+"="+encodeURIComponent(st))})}catch(Ne){throw q.push(fe+"type="+encodeURIComponent("_badmap")),Ne}}function Is(w){this.l=w.Ub||null,this.j=w.eb||!1}x(Is,Pn),Is.prototype.g=function(){return new Ga(this.l,this.j)},Is.prototype.i=function(w){return function(){return w}}({});function Ga(w,q){ht.call(this),this.D=w,this.o=q,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}x(Ga,ht),n=Ga.prototype,n.open=function(w,q){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=w,this.A=q,this.readyState=1,Lo(this)},n.send=function(w){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const q={headers:this.u,method:this.B,credentials:this.m,cache:void 0};w&&(q.body=w),(this.D||s).fetch(new Request(this.A,q)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,oa(this)),this.readyState=0},n.Sa=function(w){if(this.g&&(this.l=w,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=w.headers,this.readyState=2,Lo(this)),this.g&&(this.readyState=3,Lo(this),this.g)))if(this.responseType==="arraybuffer")w.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof s.ReadableStream<"u"&&"body"in w){if(this.j=w.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;rl(this)}else w.text().then(this.Ra.bind(this),this.ga.bind(this))};function rl(w){w.j.read().then(w.Pa.bind(w)).catch(w.ga.bind(w))}n.Pa=function(w){if(this.g){if(this.o&&w.value)this.response.push(w.value);else if(!this.o){var q=w.value?w.value:new Uint8Array(0);(q=this.v.decode(q,{stream:!w.done}))&&(this.response=this.responseText+=q)}w.done?oa(this):Lo(this),this.readyState==3&&rl(this)}},n.Ra=function(w){this.g&&(this.response=this.responseText=w,oa(this))},n.Qa=function(w){this.g&&(this.response=w,oa(this))},n.ga=function(){this.g&&oa(this)};function oa(w){w.readyState=4,w.l=null,w.j=null,w.v=null,Lo(w)}n.setRequestHeader=function(w,q){this.u.append(w,q)},n.getResponseHeader=function(w){return this.h&&this.h.get(w.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const w=[],q=this.h.entries();for(var K=q.next();!K.done;)K=K.value,w.push(K[0]+": "+K[1]),K=q.next();return w.join(`\r
`)};function Lo(w){w.onreadystatechange&&w.onreadystatechange.call(w)}Object.defineProperty(Ga.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(w){this.m=w?"include":"same-origin"}});function vo(w){let q="";return z(w,function(K,fe){q+=fe,q+=":",q+=K,q+=`\r
`}),q}function _i(w,q,K){e:{for(fe in K){var fe=!1;break e}fe=!0}fe||(K=vo(K),typeof w=="string"?K!=null&&encodeURIComponent(String(K)):_n(w,q,K))}function jn(w){ht.call(this),this.headers=new Map,this.o=w||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}x(jn,ht);var Ts=/^https?$/i,Rs=["POST","PUT"];n=jn.prototype,n.Ha=function(w){this.J=w},n.ea=function(w,q,K,fe){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+w);q=q?q.toUpperCase():"GET",this.D=w,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():xi.g(),this.v=this.o?Ft(this.o):Ft(xi),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(q,String(w),!0),this.B=!1}catch(Be){Po(this,Be);return}if(w=K||"",K=new Map(this.headers),fe)if(Object.getPrototypeOf(fe)===Object.prototype)for(var Ne in fe)K.set(Ne,fe[Ne]);else if(typeof fe.keys=="function"&&typeof fe.get=="function")for(const Be of fe.keys())K.set(Be,fe.get(Be));else throw Error("Unknown input type for opt_headers: "+String(fe));fe=Array.from(K.keys()).find(Be=>Be.toLowerCase()=="content-type"),Ne=s.FormData&&w instanceof s.FormData,!(0<=Array.prototype.indexOf.call(Rs,q,void 0))||fe||Ne||K.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Be,st]of K)this.g.setRequestHeader(Be,st);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{yo(this),this.u=!0,this.g.send(w),this.u=!1}catch(Be){Po(this,Be)}};function Po(w,q){w.h=!1,w.g&&(w.j=!0,w.g.abort(),w.j=!1),w.l=q,w.m=5,Ns(w),Ya(w)}function Ns(w){w.A||(w.A=!0,yt(w,"complete"),yt(w,"error"))}n.abort=function(w){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=w||7,yt(this,"complete"),yt(this,"abort"),Ya(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ya(this,!0)),jn.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?as(this):this.bb())},n.bb=function(){as(this)};function as(w){if(w.h&&typeof o<"u"&&(!w.v[1]||sa(w)!=4||w.Z()!=2)){if(w.u&&sa(w)==4)ut(w.Ea,0,w);else if(yt(w,"readystatechange"),sa(w)==4){w.h=!1;try{const st=w.Z();e:switch(st){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var q=!0;break e;default:q=!1}var K;if(!(K=q)){var fe;if(fe=st===0){var Ne=String(w.D).match(_s)[1]||null;!Ne&&s.self&&s.self.location&&(Ne=s.self.location.protocol.slice(0,-1)),fe=!Ts.test(Ne?Ne.toLowerCase():"")}K=fe}if(K)yt(w,"complete"),yt(w,"success");else{w.m=6;try{var Be=2<sa(w)?w.g.statusText:""}catch{Be=""}w.l=Be+" ["+w.Z()+"]",Ns(w)}}finally{Ya(w)}}}}function Ya(w,q){if(w.g){yo(w);const K=w.g,fe=w.v[0]?()=>{}:null;w.g=null,w.v=null,q||yt(w,"ready");try{K.onreadystatechange=fe}catch{}}}function yo(w){w.I&&(s.clearTimeout(w.I),w.I=null)}n.isActive=function(){return!!this.g};function sa(w){return w.g?w.g.readyState:0}n.Z=function(){try{return 2<sa(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(w){if(this.g){var q=this.g.responseText;return w&&q.indexOf(w)==0&&(q=q.substring(w.length)),Vn(q)}};function wc(w){try{if(!w.g)return null;if("response"in w.g)return w.g.response;switch(w.H){case"":case"text":return w.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in w.g)return w.g.mozResponseArrayBuffer}return null}catch{return null}}function pu(w){const q={};w=(w.g&&2<=sa(w)&&w.g.getAllResponseHeaders()||"").split(`\r
`);for(let fe=0;fe<w.length;fe++){if(k(w[fe]))continue;var K=N(w[fe]);const Ne=K[0];if(K=K[1],typeof K!="string")continue;K=K.trim();const Be=q[Ne]||[];q[Ne]=Be,Be.push(K)}F(q,function(fe){return fe.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Sa(w,q,K){return K&&K.internalChannelParams&&K.internalChannelParams[w]||q}function Xa(w){this.Aa=0,this.i=[],this.j=new Br,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Sa("failFast",!1,w),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Sa("baseRetryDelayMs",5e3,w),this.cb=Sa("retryDelaySeedMs",1e4,w),this.Wa=Sa("forwardChannelMaxRetries",2,w),this.wa=Sa("forwardChannelRequestTimeoutMs",2e4,w),this.pa=w&&w.xmlHttpFactory||void 0,this.Xa=w&&w.Tb||void 0,this.Ca=w&&w.useFetchStreams||!1,this.L=void 0,this.J=w&&w.supportsCrossDomainXhr||!1,this.K="",this.h=new Do(w&&w.concurrentRequestLimit),this.Da=new Aa,this.P=w&&w.fastHandshake||!1,this.O=w&&w.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=w&&w.Rb||!1,w&&w.xa&&this.j.xa(),w&&w.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&w&&w.detectBufferingProxy||!1,this.ja=void 0,w&&w.longPollingTimeout&&0<w.longPollingTimeout&&(this.ja=w.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Xa.prototype,n.la=8,n.G=1,n.connect=function(w,q,K,fe){qn(0),this.W=w,this.H=q||{},K&&fe!==void 0&&(this.H.OSID=K,this.H.OAID=fe),this.F=this.X,this.I=ir(this,null,this.W),B(this)};function Bl(w){if(_c(w),w.G==3){var q=w.U++,K=li(w.I);if(_n(K,"SID",w.K),_n(K,"RID",q),_n(K,"TYPE","terminate"),we(w,K),q=new Ar(w,w.j,q),q.L=2,q.v=Es(li(K)),K=!1,s.navigator&&s.navigator.sendBeacon)try{K=s.navigator.sendBeacon(q.v.toString(),"")}catch{}!K&&s.Image&&(new Image().src=q.v,K=!0),K||(q.g=Xr(q.j,null),q.g.ea(q.v)),q.F=Date.now(),ts(q)}Fr(w)}function Mo(w){w.g&&(bt(w),w.g.cancel(),w.g=null)}function _c(w){Mo(w),w.u&&(s.clearTimeout(w.u),w.u=null),Gt(w),w.h.cancel(),w.s&&(typeof w.s=="number"&&s.clearTimeout(w.s),w.s=null)}function B(w){if(!Js(w.h)&&!w.s){w.s=!0;var q=w.Ga;H||ee(),te||(H(),te=!0),se.add(q,w),w.B=0}}function ne(w,q){return el(w.h)>=w.h.j-(w.s?1:0)?!1:w.s?(w.i=q.D.concat(w.i),!0):w.G==1||w.G==2||w.B>=(w.Va?0:w.Wa)?!1:(w.s=Kn(g(w.Ga,w,q),An(w,w.B)),w.B++,!0)}n.Ga=function(w){if(this.s)if(this.s=null,this.G==1){if(!w){this.U=Math.floor(1e5*Math.random()),w=this.U++;const Ne=new Ar(this,this.j,w);let Be=this.o;if(this.S&&(Be?(Be=I(Be),j(Be,this.S)):Be=this.S),this.m!==null||this.O||(Ne.H=Be,Be=null),this.P)e:{for(var q=0,K=0;K<this.i.length;K++){t:{var fe=this.i[K];if("__data__"in fe.map&&(fe=fe.map.__data__,typeof fe=="string")){fe=fe.length;break t}fe=void 0}if(fe===void 0)break;if(q+=fe,4096<q){q=K;break e}if(q===4096||K===this.i.length-1){q=K+1;break e}}q=1e3}else q=1e3;q=Te(this,Ne,q),K=li(this.I),_n(K,"RID",w),_n(K,"CVER",22),this.D&&_n(K,"X-HTTP-Session-Id",this.D),we(this,K),Be&&(this.O?q="headers="+encodeURIComponent(String(vo(Be)))+"&"+q:this.m&&_i(K,this.m,Be)),rs(this.h,Ne),this.Ua&&_n(K,"TYPE","init"),this.P?(_n(K,"$req",q),_n(K,"SID","null"),Ne.T=!0,aa(Ne,K,null)):aa(Ne,K,q),this.G=2}}else this.G==3&&(w?ve(this,w):this.i.length==0||Js(this.h)||ve(this))};function ve(w,q){var K;q?K=q.l:K=w.U++;const fe=li(w.I);_n(fe,"SID",w.K),_n(fe,"RID",K),_n(fe,"AID",w.T),we(w,fe),w.m&&w.o&&_i(fe,w.m,w.o),K=new Ar(w,w.j,K,w.B+1),w.m===null&&(K.H=w.o),q&&(w.i=q.D.concat(w.i)),q=Te(w,K,1e3),K.I=Math.round(.5*w.wa)+Math.round(.5*w.wa*Math.random()),rs(w.h,K),aa(K,fe,q)}function we(w,q){w.H&&z(w.H,function(K,fe){_n(q,fe,K)}),w.l&&ws({},function(K,fe){_n(q,fe,K)})}function Te(w,q,K){K=Math.min(w.i.length,K);var fe=w.l?g(w.l.Na,w.l,w):null;e:{var Ne=w.i;let Be=-1;for(;;){const st=["count="+K];Be==-1?0<K?(Be=Ne[0].g,st.push("ofs="+Be)):Be=0:st.push("ofs="+Be);let vn=!0;for(let Vr=0;Vr<K;Vr++){let wn=Ne[Vr].g;const Hn=Ne[Vr].map;if(wn-=Be,0>wn)Be=Math.max(0,Ne[Vr].g-100),vn=!1;else try{ko(Hn,st,"req"+wn+"_")}catch{fe&&fe(Hn)}}if(vn){fe=st.join("&");break e}}}return w=w.i.splice(0,K),q.D=w,fe}function $e(w){if(!w.g&&!w.u){w.Y=1;var q=w.Fa;H||ee(),te||(H(),te=!0),se.add(q,w),w.v=0}}function Ke(w){return w.g||w.u||3<=w.v?!1:(w.Y++,w.u=Kn(g(w.Fa,w),An(w,w.v)),w.v++,!0)}n.Fa=function(){if(this.u=null,Nt(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var w=2*this.R;this.j.info("BP detection timer enabled: "+w),this.A=Kn(g(this.ab,this),w)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,qn(10),Mo(this),Nt(this))};function bt(w){w.A!=null&&(s.clearTimeout(w.A),w.A=null)}function Nt(w){w.g=new Ar(w,w.j,"rpc",w.Y),w.m===null&&(w.g.H=w.o),w.g.O=0;var q=li(w.qa);_n(q,"RID","rpc"),_n(q,"SID",w.K),_n(q,"AID",w.T),_n(q,"CI",w.F?"0":"1"),!w.F&&w.ja&&_n(q,"TO",w.ja),_n(q,"TYPE","xmlhttp"),we(w,q),w.m&&w.o&&_i(q,w.m,w.o),w.L&&(w.g.I=w.L);var K=w.g;w=w.ia,K.L=1,K.v=Es(li(q)),K.m=null,K.P=!0,qa(K,w)}n.Za=function(){this.C!=null&&(this.C=null,Mo(this),Ke(this),qn(19))};function Gt(w){w.C!=null&&(s.clearTimeout(w.C),w.C=null)}function on(w,q){var K=null;if(w.g==q){Gt(w),bt(w),w.g=null;var fe=2}else if(Ha(w.h,q))K=q.D,Gi(w.h,q),fe=1;else return;if(w.G!=0){if(q.o)if(fe==1){K=q.m?q.m.length:0,q=Date.now()-q.F;var Ne=w.B;fe=wr(),yt(fe,new fr(fe,K)),B(w)}else $e(w);else if(Ne=q.s,Ne==3||Ne==0&&0<q.X||!(fe==1&&ne(w,q)||fe==2&&Ke(w)))switch(K&&0<K.length&&(q=w.h,q.i=q.i.concat(K)),Ne){case 1:Qn(w,5);break;case 4:Qn(w,10);break;case 3:Qn(w,6);break;default:Qn(w,2)}}}function An(w,q){let K=w.Ta+Math.floor(Math.random()*w.cb);return w.isActive()||(K*=2),K*q}function Qn(w,q){if(w.j.info("Error code "+q),q==2){var K=g(w.fb,w),fe=w.Xa;const Ne=!fe;fe=new bn(fe||"//www.google.com/images/cleardot.gif"),s.location&&s.location.protocol=="http"||As(fe,"https"),Es(fe),Ne?nl(fe.toString(),K):mo(fe.toString(),K)}else qn(2);w.G=0,w.l&&w.l.sa(q),Fr(w),_c(w)}n.fb=function(w){w?(this.j.info("Successfully pinged google.com"),qn(2)):(this.j.info("Failed to ping google.com"),qn(1))};function Fr(w){if(w.G=0,w.ka=[],w.l){const q=Pr(w.h);(q.length!=0||w.i.length!=0)&&(C(w.ka,q),C(w.ka,w.i),w.h.i.length=0,_(w.i),w.i.length=0),w.l.ra()}}function ir(w,q,K){var fe=K instanceof bn?li(K):new bn(K);if(fe.g!="")q&&(fe.g=q+"."+fe.g),Ss(fe,fe.s);else{var Ne=s.location;fe=Ne.protocol,q=q?q+"."+Ne.hostname:Ne.hostname,Ne=+Ne.port;var Be=new bn(null);fe&&As(Be,fe),q&&(Be.g=q),Ne&&Ss(Be,Ne),K&&(Be.l=K),fe=Be}return K=w.D,q=w.ya,K&&q&&_n(fe,K,q),_n(fe,"VER",w.la),we(w,fe),fe}function Xr(w,q,K){if(q&&!w.J)throw Error("Can't create secondary domain capable XhrIo object.");return q=w.Ca&&!w.pa?new jn(new Is({eb:K})):new jn(w.pa),q.Ha(w.J),q}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ur(){}n=Ur.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Kr(){}Kr.prototype.g=function(w,q){return new zr(w,q)};function zr(w,q){ht.call(this),this.g=new Xa(q),this.l=w,this.h=q&&q.messageUrlParams||null,w=q&&q.messageHeaders||null,q&&q.clientProtocolHeaderRequired&&(w?w["X-Client-Protocol"]="webchannel":w={"X-Client-Protocol":"webchannel"}),this.g.o=w,w=q&&q.initMessageHeaders||null,q&&q.messageContentType&&(w?w["X-WebChannel-Content-Type"]=q.messageContentType:w={"X-WebChannel-Content-Type":q.messageContentType}),q&&q.va&&(w?w["X-WebChannel-Client-Profile"]=q.va:w={"X-WebChannel-Client-Profile":q.va}),this.g.S=w,(w=q&&q.Sb)&&!k(w)&&(this.g.m=w),this.v=q&&q.supportsCrossDomainXhr||!1,this.u=q&&q.sendRawJson||!1,(q=q&&q.httpSessionIdParam)&&!k(q)&&(this.g.D=q,w=this.h,w!==null&&q in w&&(w=this.h,q in w&&delete w[q])),this.j=new Qa(this)}x(zr,ht),zr.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},zr.prototype.close=function(){Bl(this.g)},zr.prototype.o=function(w){var q=this.g;if(typeof w=="string"){var K={};K.__data__=w,w=K}else this.u&&(K={},K.__data__=jt(w),w=K);q.i.push(new jl(q.Ya++,w)),q.G==3&&B(q)},zr.prototype.N=function(){this.g.l=null,delete this.j,Bl(this.g),delete this.g,zr.aa.N.call(this)};function Ka(w){Ut.call(this),w.__headers__&&(this.headers=w.__headers__,this.statusCode=w.__status__,delete w.__headers__,delete w.__status__);var q=w.__sm__;if(q){e:{for(const K in q){w=K;break e}w=void 0}(this.i=w)&&(w=this.i,q=q!==null&&w in q?q[w]:void 0),this.data=q}else this.data=w}x(Ka,Ut);function jo(){Tt.call(this),this.status=1}x(jo,Tt);function Qa(w){this.g=w}x(Qa,Ur),Qa.prototype.ua=function(){yt(this.g,"a")},Qa.prototype.ta=function(w){yt(this.g,new Ka(w))},Qa.prototype.sa=function(w){yt(this.g,new jo)},Qa.prototype.ra=function(){yt(this.g,"b")},Kr.prototype.createWebChannel=Kr.prototype.g,zr.prototype.send=zr.prototype.o,zr.prototype.open=zr.prototype.m,zr.prototype.close=zr.prototype.close,tS=function(){return new Kr},eS=function(){return wr()},J8=nn,qy={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ui.NO_ERROR=0,Ui.TIMEOUT=8,Ui.HTTP_ERROR=6,Eg=Ui,zi.COMPLETE="complete",Z8=zi,Ht.EventType=Mn,Mn.OPEN="a",Mn.CLOSE="b",Mn.ERROR="c",Mn.MESSAGE="d",ht.prototype.listen=ht.prototype.K,G0=Ht,jn.prototype.listenOnce=jn.prototype.L,jn.prototype.getLastError=jn.prototype.Ka,jn.prototype.getLastErrorCode=jn.prototype.Ba,jn.prototype.getStatus=jn.prototype.Z,jn.prototype.getResponseJson=jn.prototype.Oa,jn.prototype.getResponseText=jn.prototype.oa,jn.prototype.send=jn.prototype.ea,jn.prototype.setWithCredentials=jn.prototype.Ha,Q8=jn}).apply(typeof Jp<"u"?Jp:typeof self<"u"?self:typeof window<"u"?window:{});const a_="@firebase/firestore",o_="4.7.17";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let co=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};co.UNAUTHENTICATED=new co(null),co.GOOGLE_CREDENTIALS=new co("google-credentials-uid"),co.FIRST_PARTY=new co("first-party-uid"),co.MOCK_USER=new co("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zh="11.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ud=new Om("@firebase/firestore");function lh(){return ud.logLevel}function St(n,...e){if(ud.logLevel<=Un.DEBUG){const t=e.map(a5);ud.debug(`Firestore (${zh}): ${n}`,...t)}}function eu(n,...e){if(ud.logLevel<=Un.ERROR){const t=e.map(a5);ud.error(`Firestore (${zh}): ${n}`,...t)}}function Th(n,...e){if(ud.logLevel<=Un.WARN){const t=e.map(a5);ud.warn(`Firestore (${zh}): ${n}`,...t)}}function a5(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tn(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,nS(n,r,t)}function nS(n,e,t){let r=`FIRESTORE (${zh}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw eu(r),new Error(r)}function ur(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||nS(e,i,r)}function pn(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Je={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Et extends Qs{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kc{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rS{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class qO{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(co.UNAUTHENTICATED))}shutdown(){}}class HO{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class WO{constructor(e){this.t=e,this.currentUser=co.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){ur(this.o===void 0,42304);let r=this.i;const i=c=>this.i!==r?(r=this.i,t(c)):Promise.resolve();let a=new Kc;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new Kc,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const c=a;e.enqueueRetryable(async()=>{await c.promise,await i(this.currentUser)})},s=c=>{St("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>s(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?s(c):(St("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Kc)}},0),o()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(St("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ur(typeof r.accessToken=="string",31837,{l:r}),new rS(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ur(e===null||typeof e=="string",2055,{h:e}),new co(e)}}class $O{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=co.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class GO{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new $O(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(co.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class s_{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class YO{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,gs(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){ur(this.o===void 0,3512);const r=a=>{a.error!=null&&St("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const o=a.token!==this.m;return this.m=a.token,St("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const i=a=>{St("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(a=>i(a)),setTimeout(()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?i(a):St("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new s_(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(ur(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new s_(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XO(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iS(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aS{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=XO(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<t&&(r+=e.charAt(i[a]%62))}return r}}function Cn(n,e){return n<e?-1:n>e?1:0}function Hy(n,e){let t=0;for(;t<n.length&&t<e.length;){const r=n.codePointAt(t),i=e.codePointAt(t);if(r!==i){if(r<128&&i<128)return Cn(r,i);{const a=iS(),o=KO(a.encode(l_(n,t)),a.encode(l_(e,t)));return o!==0?o:Cn(r,i)}}t+=r>65535?2:1}return Cn(n.length,e.length)}function l_(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function KO(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return Cn(n[t],e[t]);return Cn(n.length,e.length)}function Rh(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c_=-62135596800,u_=1e6;class Fi{static now(){return Fi.fromMillis(Date.now())}static fromDate(e){return Fi.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*u_);return new Fi(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Et(Je.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Et(Je.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<c_)throw new Et(Je.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Et(Je.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/u_}_compareTo(e){return this.seconds===e.seconds?Cn(this.nanoseconds,e.nanoseconds):Cn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-c_;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fn{static fromTimestamp(e){return new fn(e)}static min(){return new fn(new Fi(0,0))}static max(){return new fn(new Fi(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f_="__name__";class Zl{constructor(e,t,r){t===void 0?t=0:t>e.length&&tn(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&tn(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return Zl.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Zl?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const a=Zl.compareSegments(e.get(i),t.get(i));if(a!==0)return a}return Cn(e.length,t.length)}static compareSegments(e,t){const r=Zl.isNumericId(e),i=Zl.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?Zl.extractNumericId(e).compare(Zl.extractNumericId(t)):Hy(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return lf.fromString(e.substring(4,e.length-2))}}class $r extends Zl{construct(e,t,r){return new $r(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Et(Je.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new $r(t)}static emptyPath(){return new $r([])}}const QO=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ba extends Zl{construct(e,t,r){return new Ba(e,t,r)}static isValidIdentifier(e){return QO.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ba.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===f_}static keyField(){return new Ba([f_])}static fromServerFormat(e){const t=[];let r="",i=0;const a=()=>{if(r.length===0)throw new Et(Je.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let o=!1;for(;i<e.length;){const s=e[i];if(s==="\\"){if(i+1===e.length)throw new Et(Je.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new Et(Je.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else s==="`"?(o=!o,i++):s!=="."||o?(r+=s,i++):(a(),i++)}if(a(),o)throw new Et(Je.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ba(t)}static emptyPath(){return new Ba([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{constructor(e){this.path=e}static fromPath(e){return new $t($r.fromString(e))}static fromName(e){return new $t($r.fromString(e).popFirst(5))}static empty(){return new $t($r.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&$r.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return $r.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new $t(new $r(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g1=-1;function ZO(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=fn.fromTimestamp(r===1e9?new Fi(t+1,0):new Fi(t,r));return new hf(i,$t.empty(),e)}function JO(n){return new hf(n.readTime,n.key,g1)}class hf{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new hf(fn.min(),$t.empty(),g1)}static max(){return new hf(fn.max(),$t.empty(),g1)}}function ek(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=$t.comparator(n.documentKey,e.documentKey),t!==0?t:Cn(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tk="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class nk{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vh(n){if(n.code!==Je.FAILED_PRECONDITION||n.message!==tk)throw n;St("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class et{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&tn(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new et((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof et?t:et.resolve(t)}catch(t){return et.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):et.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):et.reject(t)}static resolve(e){return new et((t,r)=>{t(e)})}static reject(e){return new et((t,r)=>{r(e)})}static waitFor(e){return new et((t,r)=>{let i=0,a=0,o=!1;e.forEach(s=>{++i,s.next(()=>{++a,o&&a===i&&t()},c=>r(c))}),o=!0,a===i&&t()})}static or(e){let t=et.resolve(!1);for(const r of e)t=t.next(i=>i?et.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,a)=>{r.push(t.call(this,i,a))}),this.waitFor(r)}static mapArray(e,t){return new et((r,i)=>{const a=e.length,o=new Array(a);let s=0;for(let c=0;c<a;c++){const f=c;t(e[f]).next(d=>{o[f]=d,++s,s===a&&r(o)},d=>i(d))}})}static doWhile(e,t){return new et((r,i)=>{const a=()=>{e()===!0?t().next(()=>{a()},i):r()};a()})}}function rk(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function qh(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jm{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ue(r),this.ce=r=>t.writeSequenceNumber(r))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}jm.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o5=-1;function Bm(n){return n==null}function Qg(n){return n===0&&1/n==-1/0}function ik(n){return typeof n=="number"&&Number.isInteger(n)&&!Qg(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oS="";function ak(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=d_(e)),e=ok(n.get(t),e);return d_(e)}function ok(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const a=n.charAt(i);switch(a){case"\0":t+="";break;case oS:t+="";break;default:t+=a}}return t}function d_(n){return n+oS+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h_(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Af(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function sS(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vi{constructor(e,t){this.comparator=e,this.root=t||Ma.EMPTY}insert(e,t){return new vi(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ma.BLACK,null,null))}remove(e){return new vi(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ma.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new eg(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new eg(this.root,e,this.comparator,!1)}getReverseIterator(){return new eg(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new eg(this.root,e,this.comparator,!0)}}class eg{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ma{constructor(e,t,r,i,a){this.key=e,this.value=t,this.color=r??Ma.RED,this.left=i??Ma.EMPTY,this.right=a??Ma.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,a){return new Ma(e??this.key,t??this.value,r??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,t,r),null):a===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Ma.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return Ma.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ma.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ma.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw tn(43730,{key:this.key,value:this.value});if(this.right.isRed())throw tn(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw tn(27949);return e+(this.isRed()?0:1)}}Ma.EMPTY=null,Ma.RED=!0,Ma.BLACK=!1;Ma.EMPTY=new class{constructor(){this.size=0}get key(){throw tn(57766)}get value(){throw tn(16141)}get color(){throw tn(16727)}get left(){throw tn(29726)}get right(){throw tn(36894)}copy(e,t,r,i,a){return this}insert(e,t,r){return new Ma(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ra{constructor(e){this.comparator=e,this.data=new vi(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new p_(this.data.getIterator())}getIteratorFrom(e){return new p_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof ra)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(this.comparator(i,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new ra(this.comparator);return t.data=e,t}}class p_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ms{constructor(e){this.fields=e,e.sort(Ba.comparator)}static empty(){return new ms([])}unionWith(e){let t=new ra(Ba.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new ms(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Rh(this.fields,e.fields,(t,r)=>t.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lS extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ua{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(i){try{return atob(i)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new lS("Invalid base64 string: "+a):a}}(e);return new Ua(t)}static fromUint8Array(e){const t=function(i){let a="";for(let o=0;o<i.length;++o)a+=String.fromCharCode(i[o]);return a}(e);return new Ua(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Cn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ua.EMPTY_BYTE_STRING=new Ua("");const sk=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function pf(n){if(ur(!!n,39018),typeof n=="string"){let e=0;const t=sk.exec(n);if(ur(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Pi(n.seconds),nanos:Pi(n.nanos)}}function Pi(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function gf(n){return typeof n=="string"?Ua.fromBase64String(n):Ua.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cS="server_timestamp",uS="__type__",fS="__previous_value__",dS="__local_write_time__";function s5(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[uS])===null||t===void 0?void 0:t.stringValue)===cS}function Fm(n){const e=n.mapValue.fields[fS];return s5(e)?Fm(e):e}function m1(n){const e=pf(n.mapValue.fields[dS].timestampValue);return new Fi(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lk{constructor(e,t,r,i,a,o,s,c,f,d){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=s,this.longPollingOptions=c,this.useFetchStreams=f,this.isUsingEmulator=d}}const Zg="(default)";class v1{constructor(e,t){this.projectId=e,this.database=t||Zg}static empty(){return new v1("","")}get isDefaultDatabase(){return this.database===Zg}isEqual(e){return e instanceof v1&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hS="__type__",ck="__max__",tg={mapValue:{}},pS="__vector__",Jg="value";function mf(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?s5(n)?4:fk(n)?9007199254740991:uk(n)?10:11:tn(28295,{value:n})}function lc(n,e){if(n===e)return!0;const t=mf(n);if(t!==mf(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return m1(n).isEqual(m1(e));case 3:return function(i,a){if(typeof i.timestampValue=="string"&&typeof a.timestampValue=="string"&&i.timestampValue.length===a.timestampValue.length)return i.timestampValue===a.timestampValue;const o=pf(i.timestampValue),s=pf(a.timestampValue);return o.seconds===s.seconds&&o.nanos===s.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,a){return gf(i.bytesValue).isEqual(gf(a.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,a){return Pi(i.geoPointValue.latitude)===Pi(a.geoPointValue.latitude)&&Pi(i.geoPointValue.longitude)===Pi(a.geoPointValue.longitude)}(n,e);case 2:return function(i,a){if("integerValue"in i&&"integerValue"in a)return Pi(i.integerValue)===Pi(a.integerValue);if("doubleValue"in i&&"doubleValue"in a){const o=Pi(i.doubleValue),s=Pi(a.doubleValue);return o===s?Qg(o)===Qg(s):isNaN(o)&&isNaN(s)}return!1}(n,e);case 9:return Rh(n.arrayValue.values||[],e.arrayValue.values||[],lc);case 10:case 11:return function(i,a){const o=i.mapValue.fields||{},s=a.mapValue.fields||{};if(h_(o)!==h_(s))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(s[c]===void 0||!lc(o[c],s[c])))return!1;return!0}(n,e);default:return tn(52216,{left:n})}}function y1(n,e){return(n.values||[]).find(t=>lc(t,e))!==void 0}function Nh(n,e){if(n===e)return 0;const t=mf(n),r=mf(e);if(t!==r)return Cn(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Cn(n.booleanValue,e.booleanValue);case 2:return function(a,o){const s=Pi(a.integerValue||a.doubleValue),c=Pi(o.integerValue||o.doubleValue);return s<c?-1:s>c?1:s===c?0:isNaN(s)?isNaN(c)?0:-1:1}(n,e);case 3:return g_(n.timestampValue,e.timestampValue);case 4:return g_(m1(n),m1(e));case 5:return Hy(n.stringValue,e.stringValue);case 6:return function(a,o){const s=gf(a),c=gf(o);return s.compareTo(c)}(n.bytesValue,e.bytesValue);case 7:return function(a,o){const s=a.split("/"),c=o.split("/");for(let f=0;f<s.length&&f<c.length;f++){const d=Cn(s[f],c[f]);if(d!==0)return d}return Cn(s.length,c.length)}(n.referenceValue,e.referenceValue);case 8:return function(a,o){const s=Cn(Pi(a.latitude),Pi(o.latitude));return s!==0?s:Cn(Pi(a.longitude),Pi(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return m_(n.arrayValue,e.arrayValue);case 10:return function(a,o){var s,c,f,d;const p=a.fields||{},g=o.fields||{},m=(s=p[Jg])===null||s===void 0?void 0:s.arrayValue,x=(c=g[Jg])===null||c===void 0?void 0:c.arrayValue,_=Cn(((f=m==null?void 0:m.values)===null||f===void 0?void 0:f.length)||0,((d=x==null?void 0:x.values)===null||d===void 0?void 0:d.length)||0);return _!==0?_:m_(m,x)}(n.mapValue,e.mapValue);case 11:return function(a,o){if(a===tg.mapValue&&o===tg.mapValue)return 0;if(a===tg.mapValue)return 1;if(o===tg.mapValue)return-1;const s=a.fields||{},c=Object.keys(s),f=o.fields||{},d=Object.keys(f);c.sort(),d.sort();for(let p=0;p<c.length&&p<d.length;++p){const g=Hy(c[p],d[p]);if(g!==0)return g;const m=Nh(s[c[p]],f[d[p]]);if(m!==0)return m}return Cn(c.length,d.length)}(n.mapValue,e.mapValue);default:throw tn(23264,{Pe:t})}}function g_(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Cn(n,e);const t=pf(n),r=pf(e),i=Cn(t.seconds,r.seconds);return i!==0?i:Cn(t.nanos,r.nanos)}function m_(n,e){const t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){const a=Nh(t[i],r[i]);if(a)return a}return Cn(t.length,r.length)}function Dh(n){return Wy(n)}function Wy(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=pf(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return gf(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return $t.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(const a of t.values||[])i?i=!1:r+=",",r+=Wy(a);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let i="{",a=!0;for(const o of r)a?a=!1:i+=",",i+=`${o}:${Wy(t.fields[o])}`;return i+"}"}(n.mapValue):tn(61005,{value:n})}function Cg(n){switch(mf(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Fm(n);return e?16+Cg(e):16;case 5:return 2*n.stringValue.length;case 6:return gf(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,a)=>i+Cg(a),0)}(n.arrayValue);case 10:case 11:return function(r){let i=0;return Af(r.fields,(a,o)=>{i+=a.length+Cg(o)}),i}(n.mapValue);default:throw tn(13486,{value:n})}}function v_(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function $y(n){return!!n&&"integerValue"in n}function l5(n){return!!n&&"arrayValue"in n}function y_(n){return!!n&&"nullValue"in n}function x_(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Ig(n){return!!n&&"mapValue"in n}function uk(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[hS])===null||t===void 0?void 0:t.stringValue)===pS}function r1(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Af(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=r1(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=r1(n.arrayValue.values[t]);return e}return Object.assign({},n)}function fk(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===ck}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Go{constructor(e){this.value=e}static empty(){return new Go({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Ig(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=r1(t)}setAll(e){let t=Ba.emptyPath(),r={},i=[];e.forEach((o,s)=>{if(!t.isImmediateParentOf(s)){const c=this.getFieldsMap(t);this.applyChanges(c,r,i),r={},i=[],t=s.popLast()}o?r[s.lastSegment()]=r1(o):i.push(s.lastSegment())});const a=this.getFieldsMap(t);this.applyChanges(a,r,i)}delete(e){const t=this.field(e.popLast());Ig(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return lc(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Ig(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Af(t,(i,a)=>e[i]=a);for(const i of r)delete e[i]}clone(){return new Go(r1(this.value))}}function gS(n){const e=[];return Af(n.fields,(t,r)=>{const i=new Ba([t]);if(Ig(r)){const a=gS(r.mapValue).fields;if(a.length===0)e.push(i);else for(const o of a)e.push(i.child(o))}else e.push(i)}),new ms(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uo{constructor(e,t,r,i,a,o,s){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=a,this.data=o,this.documentState=s}static newInvalidDocument(e){return new uo(e,0,fn.min(),fn.min(),fn.min(),Go.empty(),0)}static newFoundDocument(e,t,r,i){return new uo(e,1,t,fn.min(),r,i,0)}static newNoDocument(e,t){return new uo(e,2,t,fn.min(),fn.min(),Go.empty(),0)}static newUnknownDocument(e,t){return new uo(e,3,t,fn.min(),fn.min(),Go.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(fn.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Go.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Go.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=fn.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof uo&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new uo(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class em{constructor(e,t){this.position=e,this.inclusive=t}}function b_(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const a=e[i],o=n.position[i];if(a.field.isKeyField()?r=$t.comparator($t.fromName(o.referenceValue),t.key):r=Nh(o,t.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function w_(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!lc(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x1{constructor(e,t="asc"){this.field=e,this.dir=t}}function dk(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mS{}class Wi extends mS{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new pk(e,t,r):t==="array-contains"?new vk(e,r):t==="in"?new yk(e,r):t==="not-in"?new xk(e,r):t==="array-contains-any"?new bk(e,r):new Wi(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new gk(e,r):new mk(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Nh(t,this.value)):t!==null&&mf(this.value)===mf(t)&&this.matchesComparison(Nh(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return tn(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class kl extends mS{constructor(e,t){super(),this.filters=e,this.op=t,this.Te=null}static create(e,t){return new kl(e,t)}matches(e){return vS(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function vS(n){return n.op==="and"}function yS(n){return hk(n)&&vS(n)}function hk(n){for(const e of n.filters)if(e instanceof kl)return!1;return!0}function Gy(n){if(n instanceof Wi)return n.field.canonicalString()+n.op.toString()+Dh(n.value);if(yS(n))return n.filters.map(e=>Gy(e)).join(",");{const e=n.filters.map(t=>Gy(t)).join(",");return`${n.op}(${e})`}}function xS(n,e){return n instanceof Wi?function(r,i){return i instanceof Wi&&r.op===i.op&&r.field.isEqual(i.field)&&lc(r.value,i.value)}(n,e):n instanceof kl?function(r,i){return i instanceof kl&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((a,o,s)=>a&&xS(o,i.filters[s]),!0):!1}(n,e):void tn(19439)}function bS(n){return n instanceof Wi?function(t){return`${t.field.canonicalString()} ${t.op} ${Dh(t.value)}`}(n):n instanceof kl?function(t){return t.op.toString()+" {"+t.getFilters().map(bS).join(" ,")+"}"}(n):"Filter"}class pk extends Wi{constructor(e,t,r){super(e,t,r),this.key=$t.fromName(r.referenceValue)}matches(e){const t=$t.comparator(e.key,this.key);return this.matchesComparison(t)}}class gk extends Wi{constructor(e,t){super(e,"in",t),this.keys=wS("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class mk extends Wi{constructor(e,t){super(e,"not-in",t),this.keys=wS("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function wS(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>$t.fromName(r.referenceValue))}class vk extends Wi{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return l5(t)&&y1(t.arrayValue,this.value)}}class yk extends Wi{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&y1(this.value.arrayValue,t)}}class xk extends Wi{constructor(e,t){super(e,"not-in",t)}matches(e){if(y1(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!y1(this.value.arrayValue,t)}}class bk extends Wi{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!l5(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>y1(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wk{constructor(e,t=null,r=[],i=[],a=null,o=null,s=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=s,this.Ie=null}}function __(n,e=null,t=[],r=[],i=null,a=null,o=null){return new wk(n,e,t,r,i,a,o)}function c5(n){const e=pn(n);if(e.Ie===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>Gy(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(a){return a.field.canonicalString()+a.dir}(r)).join(","),Bm(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Dh(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Dh(r)).join(",")),e.Ie=t}return e.Ie}function u5(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!dk(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!xS(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!w_(n.startAt,e.startAt)&&w_(n.endAt,e.endAt)}function Yy(n){return $t.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hh{constructor(e,t=null,r=[],i=[],a=null,o="F",s=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=s,this.endAt=c,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function _k(n,e,t,r,i,a,o,s){return new Hh(n,e,t,r,i,a,o,s)}function Um(n){return new Hh(n)}function A_(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function _S(n){return n.collectionGroup!==null}function i1(n){const e=pn(n);if(e.Ee===null){e.Ee=[];const t=new Set;for(const a of e.explicitOrderBy)e.Ee.push(a),t.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let s=new ra(Ba.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(f=>{f.isInequality()&&(s=s.add(f.field))})}),s})(e).forEach(a=>{t.has(a.canonicalString())||a.isKeyField()||e.Ee.push(new x1(a,r))}),t.has(Ba.keyField().canonicalString())||e.Ee.push(new x1(Ba.keyField(),r))}return e.Ee}function ic(n){const e=pn(n);return e.de||(e.de=Ak(e,i1(n))),e.de}function Ak(n,e){if(n.limitType==="F")return __(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{const a=i.dir==="desc"?"asc":"desc";return new x1(i.field,a)});const t=n.endAt?new em(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new em(n.startAt.position,n.startAt.inclusive):null;return __(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function Xy(n,e){const t=n.filters.concat([e]);return new Hh(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Ky(n,e,t){return new Hh(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function zm(n,e){return u5(ic(n),ic(e))&&n.limitType===e.limitType}function AS(n){return`${c5(ic(n))}|lt:${n.limitType}`}function ch(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>bS(i)).join(", ")}]`),Bm(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>Dh(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>Dh(i)).join(",")),`Target(${r})`}(ic(n))}; limitType=${n.limitType})`}function Vm(n,e){return e.isFoundDocument()&&function(r,i){const a=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):$t.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)}(n,e)&&function(r,i){for(const a of i1(r))if(!a.field.isKeyField()&&i.data.field(a.field)===null)return!1;return!0}(n,e)&&function(r,i){for(const a of r.filters)if(!a.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(o,s,c){const f=b_(o,s,c);return o.inclusive?f<=0:f<0}(r.startAt,i1(r),i)||r.endAt&&!function(o,s,c){const f=b_(o,s,c);return o.inclusive?f>=0:f>0}(r.endAt,i1(r),i))}(n,e)}function Sk(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function SS(n){return(e,t)=>{let r=!1;for(const i of i1(n)){const a=Ek(i,e,t);if(a!==0)return a;r=r||i.field.isKeyField()}return 0}}function Ek(n,e,t){const r=n.field.isKeyField()?$t.comparator(e.key,t.key):function(a,o,s){const c=o.data.field(a),f=s.data.field(a);return c!==null&&f!==null?Nh(c,f):tn(42886)}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return tn(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wd{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[i,a]of r)if(this.equalsFn(i,e))return a}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Af(this.inner,(t,r)=>{for(const[i,a]of r)e(i,a)})}isEmpty(){return sS(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ck=new vi($t.comparator);function tu(){return Ck}const ES=new vi($t.comparator);function Y0(...n){let e=ES;for(const t of n)e=e.insert(t.key,t);return e}function CS(n){let e=ES;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function ed(){return a1()}function IS(){return a1()}function a1(){return new wd(n=>n.toString(),(n,e)=>n.isEqual(e))}const Ik=new vi($t.comparator),Tk=new ra($t.comparator);function zn(...n){let e=Tk;for(const t of n)e=e.add(t);return e}const Rk=new ra(Cn);function Nk(){return Rk}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f5(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Qg(e)?"-0":e}}function TS(n){return{integerValue:""+n}}function Dk(n,e){return ik(e)?TS(e):f5(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qm{constructor(){this._=void 0}}function Ok(n,e,t){return n instanceof b1?function(i,a){const o={fields:{[uS]:{stringValue:cS},[dS]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return a&&s5(a)&&(a=Fm(a)),a&&(o.fields[fS]=a),{mapValue:o}}(t,e):n instanceof w1?NS(n,e):n instanceof _1?DS(n,e):function(i,a){const o=RS(i,a),s=S_(o)+S_(i.Re);return $y(o)&&$y(i.Re)?TS(s):f5(i.serializer,s)}(n,e)}function kk(n,e,t){return n instanceof w1?NS(n,e):n instanceof _1?DS(n,e):t}function RS(n,e){return n instanceof tm?function(r){return $y(r)||function(a){return!!a&&"doubleValue"in a}(r)}(e)?e:{integerValue:0}:null}class b1 extends qm{}class w1 extends qm{constructor(e){super(),this.elements=e}}function NS(n,e){const t=OS(e);for(const r of n.elements)t.some(i=>lc(i,r))||t.push(r);return{arrayValue:{values:t}}}class _1 extends qm{constructor(e){super(),this.elements=e}}function DS(n,e){let t=OS(e);for(const r of n.elements)t=t.filter(i=>!lc(i,r));return{arrayValue:{values:t}}}class tm extends qm{constructor(e,t){super(),this.serializer=e,this.Re=t}}function S_(n){return Pi(n.integerValue||n.doubleValue)}function OS(n){return l5(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lk{constructor(e,t){this.field=e,this.transform=t}}function Pk(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof w1&&i instanceof w1||r instanceof _1&&i instanceof _1?Rh(r.elements,i.elements,lc):r instanceof tm&&i instanceof tm?lc(r.Re,i.Re):r instanceof b1&&i instanceof b1}(n.transform,e.transform)}class Mk{constructor(e,t){this.version=e,this.transformResults=t}}class $s{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new $s}static exists(e){return new $s(void 0,e)}static updateTime(e){return new $s(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Tg(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Hm{}function kS(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new d5(n.key,$s.none()):new B1(n.key,n.data,$s.none());{const t=n.data,r=Go.empty();let i=new ra(Ba.comparator);for(let a of e.fields)if(!i.has(a)){let o=t.field(a);o===null&&a.length>1&&(a=a.popLast(),o=t.field(a)),o===null?r.delete(a):r.set(a,o),i=i.add(a)}return new Sf(n.key,r,new ms(i.toArray()),$s.none())}}function jk(n,e,t){n instanceof B1?function(i,a,o){const s=i.value.clone(),c=C_(i.fieldTransforms,a,o.transformResults);s.setAll(c),a.convertToFoundDocument(o.version,s).setHasCommittedMutations()}(n,e,t):n instanceof Sf?function(i,a,o){if(!Tg(i.precondition,a))return void a.convertToUnknownDocument(o.version);const s=C_(i.fieldTransforms,a,o.transformResults),c=a.data;c.setAll(LS(i)),c.setAll(s),a.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(n,e,t):function(i,a,o){a.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,t)}function o1(n,e,t,r){return n instanceof B1?function(a,o,s,c){if(!Tg(a.precondition,o))return s;const f=a.value.clone(),d=I_(a.fieldTransforms,c,o);return f.setAll(d),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),null}(n,e,t,r):n instanceof Sf?function(a,o,s,c){if(!Tg(a.precondition,o))return s;const f=I_(a.fieldTransforms,c,o),d=o.data;return d.setAll(LS(a)),d.setAll(f),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),s===null?null:s.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(p=>p.field))}(n,e,t,r):function(a,o,s){return Tg(a.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):s}(n,e,t)}function Bk(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),a=RS(r.transform,i||null);a!=null&&(t===null&&(t=Go.empty()),t.set(r.field,a))}return t||null}function E_(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Rh(r,i,(a,o)=>Pk(a,o))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class B1 extends Hm{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Sf extends Hm{constructor(e,t,r,i,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function LS(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function C_(n,e,t){const r=new Map;ur(n.length===t.length,32656,{Ve:t.length,me:n.length});for(let i=0;i<t.length;i++){const a=n[i],o=a.transform,s=e.data.field(a.field);r.set(a.field,kk(o,s,t[i]))}return r}function I_(n,e,t){const r=new Map;for(const i of n){const a=i.transform,o=t.data.field(i.field);r.set(i.field,Ok(a,o,e))}return r}class d5 extends Hm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Fk extends Hm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uk{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&jk(a,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=o1(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=o1(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=IS();return this.mutations.forEach(i=>{const a=e.get(i.key),o=a.overlayedDocument;let s=this.applyToLocalView(o,a.mutatedFields);s=t.has(i.key)?null:s;const c=kS(o,s);c!==null&&r.set(i.key,c),o.isValidDocument()||o.convertToNoDocument(fn.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),zn())}isEqual(e){return this.batchId===e.batchId&&Rh(this.mutations,e.mutations,(t,r)=>E_(t,r))&&Rh(this.baseMutations,e.baseMutations,(t,r)=>E_(t,r))}}class h5{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){ur(e.mutations.length===r.length,58842,{fe:e.mutations.length,ge:r.length});let i=function(){return Ik}();const a=e.mutations;for(let o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new h5(e,t,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zk{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vk{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Hi,Gn;function qk(n){switch(n){case Je.OK:return tn(64938);case Je.CANCELLED:case Je.UNKNOWN:case Je.DEADLINE_EXCEEDED:case Je.RESOURCE_EXHAUSTED:case Je.INTERNAL:case Je.UNAVAILABLE:case Je.UNAUTHENTICATED:return!1;case Je.INVALID_ARGUMENT:case Je.NOT_FOUND:case Je.ALREADY_EXISTS:case Je.PERMISSION_DENIED:case Je.FAILED_PRECONDITION:case Je.ABORTED:case Je.OUT_OF_RANGE:case Je.UNIMPLEMENTED:case Je.DATA_LOSS:return!0;default:return tn(15467,{code:n})}}function PS(n){if(n===void 0)return eu("GRPC error has no .code"),Je.UNKNOWN;switch(n){case Hi.OK:return Je.OK;case Hi.CANCELLED:return Je.CANCELLED;case Hi.UNKNOWN:return Je.UNKNOWN;case Hi.DEADLINE_EXCEEDED:return Je.DEADLINE_EXCEEDED;case Hi.RESOURCE_EXHAUSTED:return Je.RESOURCE_EXHAUSTED;case Hi.INTERNAL:return Je.INTERNAL;case Hi.UNAVAILABLE:return Je.UNAVAILABLE;case Hi.UNAUTHENTICATED:return Je.UNAUTHENTICATED;case Hi.INVALID_ARGUMENT:return Je.INVALID_ARGUMENT;case Hi.NOT_FOUND:return Je.NOT_FOUND;case Hi.ALREADY_EXISTS:return Je.ALREADY_EXISTS;case Hi.PERMISSION_DENIED:return Je.PERMISSION_DENIED;case Hi.FAILED_PRECONDITION:return Je.FAILED_PRECONDITION;case Hi.ABORTED:return Je.ABORTED;case Hi.OUT_OF_RANGE:return Je.OUT_OF_RANGE;case Hi.UNIMPLEMENTED:return Je.UNIMPLEMENTED;case Hi.DATA_LOSS:return Je.DATA_LOSS;default:return tn(39323,{code:n})}}(Gn=Hi||(Hi={}))[Gn.OK=0]="OK",Gn[Gn.CANCELLED=1]="CANCELLED",Gn[Gn.UNKNOWN=2]="UNKNOWN",Gn[Gn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Gn[Gn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Gn[Gn.NOT_FOUND=5]="NOT_FOUND",Gn[Gn.ALREADY_EXISTS=6]="ALREADY_EXISTS",Gn[Gn.PERMISSION_DENIED=7]="PERMISSION_DENIED",Gn[Gn.UNAUTHENTICATED=16]="UNAUTHENTICATED",Gn[Gn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Gn[Gn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Gn[Gn.ABORTED=10]="ABORTED",Gn[Gn.OUT_OF_RANGE=11]="OUT_OF_RANGE",Gn[Gn.UNIMPLEMENTED=12]="UNIMPLEMENTED",Gn[Gn.INTERNAL=13]="INTERNAL",Gn[Gn.UNAVAILABLE=14]="UNAVAILABLE",Gn[Gn.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hk=new lf([4294967295,4294967295],0);function T_(n){const e=iS().encode(n),t=new K8;return t.update(e),new Uint8Array(t.digest())}function R_(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new lf([t,r],0),new lf([i,a],0)]}class p5{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new X0(`Invalid padding: ${t}`);if(r<0)throw new X0(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new X0(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new X0(`Invalid padding when bitmap length is 0: ${t}`);this.pe=8*e.length-t,this.ye=lf.fromNumber(this.pe)}we(e,t,r){let i=e.add(t.multiply(lf.fromNumber(r)));return i.compare(Hk)===1&&(i=new lf([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ye).toNumber()}be(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;const t=T_(e),[r,i]=R_(t);for(let a=0;a<this.hashCount;a++){const o=this.we(r,i,a);if(!this.be(o))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),o=new p5(a,i,t);return r.forEach(s=>o.insert(s)),o}insert(e){if(this.pe===0)return;const t=T_(e),[r,i]=R_(t);for(let a=0;a<this.hashCount;a++){const o=this.we(r,i,a);this.Se(o)}}Se(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class X0 extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wm{constructor(e,t,r,i,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,F1.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Wm(fn.min(),i,new vi(Cn),tu(),zn())}}class F1{constructor(e,t,r,i,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new F1(r,t,zn(),zn(),zn())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rg{constructor(e,t,r,i){this.De=e,this.removedTargetIds=t,this.key=r,this.ve=i}}class MS{constructor(e,t){this.targetId=e,this.Ce=t}}class jS{constructor(e,t,r=Ua.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class N_{constructor(){this.Fe=0,this.Me=D_(),this.xe=Ua.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=zn(),t=zn(),r=zn();return this.Me.forEach((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:tn(38017,{changeType:a})}}),new F1(this.xe,this.Oe,e,t,r)}Qe(){this.Ne=!1,this.Me=D_()}$e(e,t){this.Ne=!0,this.Me=this.Me.insert(e,t)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,ur(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class Wk{constructor(e){this.ze=e,this.je=new Map,this.He=tu(),this.Je=ng(),this.Ye=ng(),this.Ze=new vi(Cn)}Xe(e){for(const t of e.De)e.ve&&e.ve.isFoundDocument()?this.et(t,e.ve):this.tt(t,e.key,e.ve);for(const t of e.removedTargetIds)this.tt(t,e.key,e.ve)}nt(e){this.forEachTarget(e,t=>{const r=this.rt(t);switch(e.state){case 0:this.it(t)&&r.ke(e.resumeToken);break;case 1:r.We(),r.Be||r.Qe(),r.ke(e.resumeToken);break;case 2:r.We(),r.Be||this.removeTarget(t);break;case 3:this.it(t)&&(r.Ge(),r.ke(e.resumeToken));break;case 4:this.it(t)&&(this.st(t),r.ke(e.resumeToken));break;default:tn(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.je.forEach((r,i)=>{this.it(i)&&t(i)})}ot(e){const t=e.targetId,r=e.Ce.count,i=this._t(t);if(i){const a=i.target;if(Yy(a))if(r===0){const o=new $t(a.path);this.tt(t,o,uo.newNoDocument(o,fn.min()))}else ur(r===1,20013,{expectedCount:r});else{const o=this.ut(t);if(o!==r){const s=this.ct(e),c=s?this.lt(s,e,o):1;if(c!==0){this.st(t);const f=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,f)}}}}}ct(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:a=0}=t;let o,s;try{o=gf(r).toUint8Array()}catch(c){if(c instanceof lS)return Th("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{s=new p5(o,i,a)}catch(c){return Th(c instanceof X0?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return s.pe===0?null:s}lt(e,t,r){return t.Ce.count===r-this.Tt(e,t.targetId)?0:2}Tt(e,t){const r=this.ze.getRemoteKeysForTarget(t);let i=0;return r.forEach(a=>{const o=this.ze.Pt(),s=`projects/${o.projectId}/databases/${o.database}/documents/${a.path.canonicalString()}`;e.mightContain(s)||(this.tt(t,a,null),i++)}),i}It(e){const t=new Map;this.je.forEach((a,o)=>{const s=this._t(o);if(s){if(a.current&&Yy(s.target)){const c=new $t(s.target.path);this.Et(c).has(o)||this.dt(o,c)||this.tt(o,c,uo.newNoDocument(c,e))}a.Le&&(t.set(o,a.qe()),a.Qe())}});let r=zn();this.Ye.forEach((a,o)=>{let s=!0;o.forEachWhile(c=>{const f=this._t(c);return!f||f.purpose==="TargetPurposeLimboResolution"||(s=!1,!1)}),s&&(r=r.add(a))}),this.He.forEach((a,o)=>o.setReadTime(e));const i=new Wm(e,t,this.Ze,this.He,r);return this.He=tu(),this.Je=ng(),this.Ye=ng(),this.Ze=new vi(Cn),i}et(e,t){if(!this.it(e))return;const r=this.dt(e,t.key)?2:0;this.rt(e).$e(t.key,r),this.He=this.He.insert(t.key,t),this.Je=this.Je.insert(t.key,this.Et(t.key).add(e)),this.Ye=this.Ye.insert(t.key,this.At(t.key).add(e))}tt(e,t,r){if(!this.it(e))return;const i=this.rt(e);this.dt(e,t)?i.$e(t,1):i.Ue(t),this.Ye=this.Ye.insert(t,this.At(t).delete(e)),this.Ye=this.Ye.insert(t,this.At(t).add(e)),r&&(this.He=this.He.insert(t,r))}removeTarget(e){this.je.delete(e)}ut(e){const t=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let t=this.je.get(e);return t||(t=new N_,this.je.set(e,t)),t}At(e){let t=this.Ye.get(e);return t||(t=new ra(Cn),this.Ye=this.Ye.insert(e,t)),t}Et(e){let t=this.Je.get(e);return t||(t=new ra(Cn),this.Je=this.Je.insert(e,t)),t}it(e){const t=this._t(e)!==null;return t||St("WatchChangeAggregator","Detected inactive target",e),t}_t(e){const t=this.je.get(e);return t&&t.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new N_),this.ze.getRemoteKeysForTarget(e).forEach(t=>{this.tt(e,t,null)})}dt(e,t){return this.ze.getRemoteKeysForTarget(e).has(t)}}function ng(){return new vi($t.comparator)}function D_(){return new vi($t.comparator)}const $k={asc:"ASCENDING",desc:"DESCENDING"},Gk={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Yk={and:"AND",or:"OR"};class Xk{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Qy(n,e){return n.useProto3Json||Bm(e)?e:{value:e}}function nm(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function BS(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function Kk(n,e){return nm(n,e.toTimestamp())}function ac(n){return ur(!!n,49232),fn.fromTimestamp(function(t){const r=pf(t);return new Fi(r.seconds,r.nanos)}(n))}function g5(n,e){return Zy(n,e).canonicalString()}function Zy(n,e){const t=function(i){return new $r(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function FS(n){const e=$r.fromString(n);return ur(HS(e),10190,{key:e.toString()}),e}function Jy(n,e){return g5(n.databaseId,e.path)}function Uv(n,e){const t=FS(e);if(t.get(1)!==n.databaseId.projectId)throw new Et(Je.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Et(Je.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new $t(zS(t))}function US(n,e){return g5(n.databaseId,e)}function Qk(n){const e=FS(n);return e.length===4?$r.emptyPath():zS(e)}function ex(n){return new $r(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function zS(n){return ur(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function O_(n,e,t){return{name:Jy(n,e),fields:t.value.mapValue.fields}}function Zk(n,e){let t;if("targetChange"in e){e.targetChange;const r=function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:tn(39313,{state:f})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],a=function(f,d){return f.useProto3Json?(ur(d===void 0||typeof d=="string",58123),Ua.fromBase64String(d||"")):(ur(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),Ua.fromUint8Array(d||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,s=o&&function(f){const d=f.code===void 0?Je.UNKNOWN:PS(f.code);return new Et(d,f.message||"")}(o);t=new jS(r,i,a,s||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Uv(n,r.document.name),a=ac(r.document.updateTime),o=r.document.createTime?ac(r.document.createTime):fn.min(),s=new Go({mapValue:{fields:r.document.fields}}),c=uo.newFoundDocument(i,a,o,s),f=r.targetIds||[],d=r.removedTargetIds||[];t=new Rg(f,d,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Uv(n,r.document),a=r.readTime?ac(r.readTime):fn.min(),o=uo.newNoDocument(i,a),s=r.removedTargetIds||[];t=new Rg([],s,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Uv(n,r.document),a=r.removedTargetIds||[];t=new Rg([],a,i,null)}else{if(!("filter"in e))return tn(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:a}=r,o=new Vk(i,a),s=r.targetId;t=new MS(s,o)}}return t}function Jk(n,e){let t;if(e instanceof B1)t={update:O_(n,e.key,e.value)};else if(e instanceof d5)t={delete:Jy(n,e.key)};else if(e instanceof Sf)t={update:O_(n,e.key,e.data),updateMask:lL(e.fieldMask)};else{if(!(e instanceof Fk))return tn(16599,{ft:e.type});t={verify:Jy(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(a,o){const s=o.transform;if(s instanceof b1)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(s instanceof w1)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:s.elements}};if(s instanceof _1)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:s.elements}};if(s instanceof tm)return{fieldPath:o.field.canonicalString(),increment:s.Re};throw tn(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,a){return a.updateTime!==void 0?{updateTime:Kk(i,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:tn(27497)}(n,e.precondition)),t}function eL(n,e){return n&&n.length>0?(ur(e!==void 0,14353),n.map(t=>function(i,a){let o=i.updateTime?ac(i.updateTime):ac(a);return o.isEqual(fn.min())&&(o=ac(a)),new Mk(o,i.transformResults||[])}(t,e))):[]}function tL(n,e){return{documents:[US(n,e.path)]}}function nL(n,e){const t={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=US(n,i);const a=function(f){if(f.length!==0)return qS(kl.create(f,"and"))}(e.filters);a&&(t.structuredQuery.where=a);const o=function(f){if(f.length!==0)return f.map(d=>function(g){return{field:uh(g.field),direction:aL(g.dir)}}(d))}(e.orderBy);o&&(t.structuredQuery.orderBy=o);const s=Qy(n,e.limit);return s!==null&&(t.structuredQuery.limit=s),e.startAt&&(t.structuredQuery.startAt=function(f){return{before:f.inclusive,values:f.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(f){return{before:!f.inclusive,values:f.position}}(e.endAt)),{gt:t,parent:i}}function rL(n){let e=Qk(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){ur(r===1,65062);const d=t.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let a=[];t.where&&(a=function(p){const g=VS(p);return g instanceof kl&&yS(g)?g.getFilters():[g]}(t.where));let o=[];t.orderBy&&(o=function(p){return p.map(g=>function(x){return new x1(fh(x.field),function(C){switch(C){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(x.direction))}(g))}(t.orderBy));let s=null;t.limit&&(s=function(p){let g;return g=typeof p=="object"?p.value:p,Bm(g)?null:g}(t.limit));let c=null;t.startAt&&(c=function(p){const g=!!p.before,m=p.values||[];return new em(m,g)}(t.startAt));let f=null;return t.endAt&&(f=function(p){const g=!p.before,m=p.values||[];return new em(m,g)}(t.endAt)),_k(e,i,o,a,s,"F",c,f)}function iL(n,e){const t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return tn(28987,{purpose:i})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function VS(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=fh(t.unaryFilter.field);return Wi.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=fh(t.unaryFilter.field);return Wi.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=fh(t.unaryFilter.field);return Wi.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=fh(t.unaryFilter.field);return Wi.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return tn(61313);default:return tn(60726)}}(n):n.fieldFilter!==void 0?function(t){return Wi.create(fh(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return tn(58110);default:return tn(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return kl.create(t.compositeFilter.filters.map(r=>VS(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return tn(1026)}}(t.compositeFilter.op))}(n):tn(30097,{filter:n})}function aL(n){return $k[n]}function oL(n){return Gk[n]}function sL(n){return Yk[n]}function uh(n){return{fieldPath:n.canonicalString()}}function fh(n){return Ba.fromServerFormat(n.fieldPath)}function qS(n){return n instanceof Wi?function(t){if(t.op==="=="){if(x_(t.value))return{unaryFilter:{field:uh(t.field),op:"IS_NAN"}};if(y_(t.value))return{unaryFilter:{field:uh(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(x_(t.value))return{unaryFilter:{field:uh(t.field),op:"IS_NOT_NAN"}};if(y_(t.value))return{unaryFilter:{field:uh(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:uh(t.field),op:oL(t.op),value:t.value}}}(n):n instanceof kl?function(t){const r=t.getFilters().map(i=>qS(i));return r.length===1?r[0]:{compositeFilter:{op:sL(t.op),filters:r}}}(n):tn(54877,{filter:n})}function lL(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function HS(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rf{constructor(e,t,r,i,a=fn.min(),o=fn.min(),s=Ua.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s,this.expectedCount=c}withSequenceNumber(e){return new rf(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new rf(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new rf(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new rf(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cL{constructor(e){this.wt=e}}function uL(n){const e=rL({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Ky(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fL{constructor(){this.Cn=new dL}addToCollectionParentIndex(e,t){return this.Cn.add(t),et.resolve()}getCollectionParents(e,t){return et.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return et.resolve()}deleteFieldIndex(e,t){return et.resolve()}deleteAllFieldIndexes(e){return et.resolve()}createTargetIndexes(e,t){return et.resolve()}getDocumentsMatchingTarget(e,t){return et.resolve(null)}getIndexType(e,t){return et.resolve(0)}getFieldIndexes(e,t){return et.resolve([])}getNextCollectionGroupToUpdate(e){return et.resolve(null)}getMinOffset(e,t){return et.resolve(hf.min())}getMinOffsetFromCollectionGroup(e,t){return et.resolve(hf.min())}updateCollectionGroup(e,t,r){return et.resolve()}updateIndexEntries(e,t){return et.resolve()}}class dL{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new ra($r.comparator),a=!i.has(r);return this.index[t]=i.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new ra($r.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},WS=41943040;class Wo{static withCacheSize(e){return new Wo(e,Wo.DEFAULT_COLLECTION_PERCENTILE,Wo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Wo.DEFAULT_COLLECTION_PERCENTILE=10,Wo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Wo.DEFAULT=new Wo(WS,Wo.DEFAULT_COLLECTION_PERCENTILE,Wo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Wo.DISABLED=new Wo(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oh{constructor(e){this.ur=e}next(){return this.ur+=2,this.ur}static cr(){return new Oh(0)}static lr(){return new Oh(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L_="LruGarbageCollector",hL=1048576;function P_([n,e],[t,r]){const i=Cn(n,t);return i===0?Cn(e,r):i}class pL{constructor(e){this.Er=e,this.buffer=new ra(P_),this.dr=0}Ar(){return++this.dr}Rr(e){const t=[e,this.Ar()];if(this.buffer.size<this.Er)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();P_(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class gL{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Vr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.mr(6e4)}stop(){this.Vr&&(this.Vr.cancel(),this.Vr=null)}get started(){return this.Vr!==null}mr(e){St(L_,`Garbage collection scheduled in ${e}ms`),this.Vr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Vr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){qh(t)?St(L_,"Ignoring IndexedDB error during garbage collection: ",t):await Vh(t)}await this.mr(3e5)})}}class mL{constructor(e,t){this.gr=e,this.params=t}calculateTargetCount(e,t){return this.gr.pr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return et.resolve(jm.le);const r=new pL(t);return this.gr.forEachTarget(e,i=>r.Rr(i.sequenceNumber)).next(()=>this.gr.yr(e,i=>r.Rr(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.gr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.gr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(St("LruGarbageCollector","Garbage collection skipped; disabled"),et.resolve(k_)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(St("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),k_):this.wr(e,t))}getCacheSize(e){return this.gr.getCacheSize(e)}wr(e,t){let r,i,a,o,s,c,f;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(St("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,o=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,s=Date.now(),this.removeTargets(e,r,t))).next(p=>(a=p,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(f=Date.now(),lh()<=Un.DEBUG&&St("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-d}ms
	Determined least recently used ${i} in `+(s-o)+`ms
	Removed ${a} targets in `+(c-s)+`ms
	Removed ${p} documents in `+(f-c)+`ms
Total Duration: ${f-d}ms`),et.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:p})))}}function vL(n,e){return new mL(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yL{constructor(){this.changes=new wd(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,uo.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?et.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xL{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bL{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&o1(r.mutation,i,ms.empty(),Fi.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,zn()).next(()=>r))}getLocalViewOfDocuments(e,t,r=zn()){const i=ed();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(a=>{let o=Y0();return a.forEach((s,c)=>{o=o.insert(s,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){const r=ed();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,zn()))}populateOverlays(e,t,r){const i=[];return r.forEach(a=>{t.has(a)||i.push(a)}),this.documentOverlayCache.getOverlays(e,i).next(a=>{a.forEach((o,s)=>{t.set(o,s)})})}computeViews(e,t,r,i){let a=tu();const o=a1(),s=function(){return a1()}();return t.forEach((c,f)=>{const d=r.get(f.key);i.has(f.key)&&(d===void 0||d.mutation instanceof Sf)?a=a.insert(f.key,f):d!==void 0?(o.set(f.key,d.mutation.getFieldMask()),o1(d.mutation,f,d.mutation.getFieldMask(),Fi.now())):o.set(f.key,ms.empty())}),this.recalculateAndSaveOverlays(e,a).next(c=>(c.forEach((f,d)=>o.set(f,d)),t.forEach((f,d)=>{var p;return s.set(f,new xL(d,(p=o.get(f))!==null&&p!==void 0?p:null))}),s))}recalculateAndSaveOverlays(e,t){const r=a1();let i=new vi((o,s)=>o-s),a=zn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(const s of o)s.keys().forEach(c=>{const f=t.get(c);if(f===null)return;let d=r.get(c)||ms.empty();d=s.applyToLocalView(f,d),r.set(c,d);const p=(i.get(s.batchId)||zn()).add(c);i=i.insert(s.batchId,p)})}).next(()=>{const o=[],s=i.getReverseIterator();for(;s.hasNext();){const c=s.getNext(),f=c.key,d=c.value,p=IS();d.forEach(g=>{if(!a.has(g)){const m=kS(t.get(g),r.get(g));m!==null&&p.set(g,m),a=a.add(g)}}),o.push(this.documentOverlayCache.saveOverlays(e,f,p))}return et.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(o){return $t.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):_S(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(a=>{const o=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-a.size):et.resolve(ed());let s=g1,c=a;return o.next(f=>et.forEach(f,(d,p)=>(s<p.largestBatchId&&(s=p.largestBatchId),a.get(d)?et.resolve():this.remoteDocumentCache.getEntry(e,d).next(g=>{c=c.insert(d,g)}))).next(()=>this.populateOverlays(e,f,a)).next(()=>this.computeViews(e,c,f,zn())).next(d=>({batchId:s,changes:CS(d)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new $t(t)).next(r=>{let i=Y0();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const a=t.collectionGroup;let o=Y0();return this.indexManager.getCollectionParents(e,a).next(s=>et.forEach(s,c=>{const f=function(p,g){return new Hh(g,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(t,c.child(a));return this.getDocumentsMatchingCollectionQuery(e,f,r,i).next(d=>{d.forEach((p,g)=>{o=o.insert(p,g)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r,i){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(a=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,a,i))).next(o=>{a.forEach((c,f)=>{const d=f.getKey();o.get(d)===null&&(o=o.insert(d,uo.newInvalidDocument(d)))});let s=Y0();return o.forEach((c,f)=>{const d=a.get(c);d!==void 0&&o1(d.mutation,f,ms.empty(),Fi.now()),Vm(t,f)&&(s=s.insert(c,f))}),s})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wL{constructor(e){this.serializer=e,this.kr=new Map,this.qr=new Map}getBundleMetadata(e,t){return et.resolve(this.kr.get(t))}saveBundleMetadata(e,t){return this.kr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:ac(i.createTime)}}(t)),et.resolve()}getNamedQuery(e,t){return et.resolve(this.qr.get(t))}saveNamedQuery(e,t){return this.qr.set(t.name,function(i){return{name:i.name,query:uL(i.bundledQuery),readTime:ac(i.readTime)}}(t)),et.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _L{constructor(){this.overlays=new vi($t.comparator),this.Qr=new Map}getOverlay(e,t){return et.resolve(this.overlays.get(t))}getOverlays(e,t){const r=ed();return et.forEach(t,i=>this.getOverlay(e,i).next(a=>{a!==null&&r.set(i,a)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,a)=>{this.St(e,t,a)}),et.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.Qr.get(r);return i!==void 0&&(i.forEach(a=>this.overlays=this.overlays.remove(a)),this.Qr.delete(r)),et.resolve()}getOverlaysForCollection(e,t,r){const i=ed(),a=t.length+1,o=new $t(t.child("")),s=this.overlays.getIteratorFrom(o);for(;s.hasNext();){const c=s.getNext().value,f=c.getKey();if(!t.isPrefixOf(f.path))break;f.path.length===a&&c.largestBatchId>r&&i.set(c.getKey(),c)}return et.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let a=new vi((f,d)=>f-d);const o=this.overlays.getIterator();for(;o.hasNext();){const f=o.getNext().value;if(f.getKey().getCollectionGroup()===t&&f.largestBatchId>r){let d=a.get(f.largestBatchId);d===null&&(d=ed(),a=a.insert(f.largestBatchId,d)),d.set(f.getKey(),f)}}const s=ed(),c=a.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((f,d)=>s.set(f,d)),!(s.size()>=i)););return et.resolve(s)}St(e,t,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.Qr.get(i.largestBatchId).delete(r.key);this.Qr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new zk(t,r));let a=this.Qr.get(t);a===void 0&&(a=zn(),this.Qr.set(t,a)),this.Qr.set(t,a.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AL{constructor(){this.sessionToken=Ua.EMPTY_BYTE_STRING}getSessionToken(e){return et.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,et.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m5{constructor(){this.$r=new ra(ma.Ur),this.Kr=new ra(ma.Wr)}isEmpty(){return this.$r.isEmpty()}addReference(e,t){const r=new ma(e,t);this.$r=this.$r.add(r),this.Kr=this.Kr.add(r)}Gr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.zr(new ma(e,t))}jr(e,t){e.forEach(r=>this.removeReference(r,t))}Hr(e){const t=new $t(new $r([])),r=new ma(t,e),i=new ma(t,e+1),a=[];return this.Kr.forEachInRange([r,i],o=>{this.zr(o),a.push(o.key)}),a}Jr(){this.$r.forEach(e=>this.zr(e))}zr(e){this.$r=this.$r.delete(e),this.Kr=this.Kr.delete(e)}Yr(e){const t=new $t(new $r([])),r=new ma(t,e),i=new ma(t,e+1);let a=zn();return this.Kr.forEachInRange([r,i],o=>{a=a.add(o.key)}),a}containsKey(e){const t=new ma(e,0),r=this.$r.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class ma{constructor(e,t){this.key=e,this.Zr=t}static Ur(e,t){return $t.comparator(e.key,t.key)||Cn(e.Zr,t.Zr)}static Wr(e,t){return Cn(e.Zr,t.Zr)||$t.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SL{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.nr=1,this.Xr=new ra(ma.Ur)}checkEmpty(e){return et.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){const a=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new Uk(a,t,r,i);this.mutationQueue.push(o);for(const s of i)this.Xr=this.Xr.add(new ma(s.key,a)),this.indexManager.addToCollectionParentIndex(e,s.key.path.popLast());return et.resolve(o)}lookupMutationBatch(e,t){return et.resolve(this.ei(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=this.ti(r),a=i<0?0:i;return et.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return et.resolve(this.mutationQueue.length===0?o5:this.nr-1)}getAllMutationBatches(e){return et.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new ma(t,0),i=new ma(t,Number.POSITIVE_INFINITY),a=[];return this.Xr.forEachInRange([r,i],o=>{const s=this.ei(o.Zr);a.push(s)}),et.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new ra(Cn);return t.forEach(i=>{const a=new ma(i,0),o=new ma(i,Number.POSITIVE_INFINITY);this.Xr.forEachInRange([a,o],s=>{r=r.add(s.Zr)})}),et.resolve(this.ni(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let a=r;$t.isDocumentKey(a)||(a=a.child(""));const o=new ma(new $t(a),0);let s=new ra(Cn);return this.Xr.forEachWhile(c=>{const f=c.key.path;return!!r.isPrefixOf(f)&&(f.length===i&&(s=s.add(c.Zr)),!0)},o),et.resolve(this.ni(s))}ni(e){const t=[];return e.forEach(r=>{const i=this.ei(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){ur(this.ri(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Xr;return et.forEach(t.mutations,i=>{const a=new ma(i.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Xr=r})}sr(e){}containsKey(e,t){const r=new ma(t,0),i=this.Xr.firstAfterOrEqual(r);return et.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,et.resolve()}ri(e,t){return this.ti(e)}ti(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}ei(e){const t=this.ti(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EL{constructor(e){this.ii=e,this.docs=function(){return new vi($t.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),a=i?i.size:0,o=this.ii(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return et.resolve(r?r.document.mutableCopy():uo.newInvalidDocument(t))}getEntries(e,t){let r=tu();return t.forEach(i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():uo.newInvalidDocument(i))}),et.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let a=tu();const o=t.path,s=new $t(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(s);for(;c.hasNext();){const{key:f,value:{document:d}}=c.getNext();if(!o.isPrefixOf(f.path))break;f.path.length>o.length+1||ek(JO(d),r)<=0||(i.has(d.key)||Vm(t,d))&&(a=a.insert(d.key,d.mutableCopy()))}return et.resolve(a)}getAllFromCollectionGroup(e,t,r,i){tn(9500)}si(e,t){return et.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new CL(this)}getSize(e){return et.resolve(this.size)}}class CL extends yL{constructor(e){super(),this.Br=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Br.addEntry(e,i)):this.Br.removeEntry(r)}),et.waitFor(t)}getFromCache(e,t){return this.Br.getEntry(e,t)}getAllFromCache(e,t){return this.Br.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IL{constructor(e){this.persistence=e,this.oi=new wd(t=>c5(t),u5),this.lastRemoteSnapshotVersion=fn.min(),this.highestTargetId=0,this._i=0,this.ai=new m5,this.targetCount=0,this.ui=Oh.cr()}forEachTarget(e,t){return this.oi.forEach((r,i)=>t(i)),et.resolve()}getLastRemoteSnapshotVersion(e){return et.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return et.resolve(this._i)}allocateTargetId(e){return this.highestTargetId=this.ui.next(),et.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this._i&&(this._i=t),et.resolve()}Tr(e){this.oi.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ui=new Oh(t),this.highestTargetId=t),e.sequenceNumber>this._i&&(this._i=e.sequenceNumber)}addTargetData(e,t){return this.Tr(t),this.targetCount+=1,et.resolve()}updateTargetData(e,t){return this.Tr(t),et.resolve()}removeTargetData(e,t){return this.oi.delete(t.target),this.ai.Hr(t.targetId),this.targetCount-=1,et.resolve()}removeTargets(e,t,r){let i=0;const a=[];return this.oi.forEach((o,s)=>{s.sequenceNumber<=t&&r.get(s.targetId)===null&&(this.oi.delete(o),a.push(this.removeMatchingKeysForTargetId(e,s.targetId)),i++)}),et.waitFor(a).next(()=>i)}getTargetCount(e){return et.resolve(this.targetCount)}getTargetData(e,t){const r=this.oi.get(t)||null;return et.resolve(r)}addMatchingKeys(e,t,r){return this.ai.Gr(t,r),et.resolve()}removeMatchingKeys(e,t,r){this.ai.jr(t,r);const i=this.persistence.referenceDelegate,a=[];return i&&t.forEach(o=>{a.push(i.markPotentiallyOrphaned(e,o))}),et.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.ai.Hr(t),et.resolve()}getMatchingKeysForTargetId(e,t){const r=this.ai.Yr(t);return et.resolve(r)}containsKey(e,t){return et.resolve(this.ai.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $S{constructor(e,t){this.ci={},this.overlays={},this.li=new jm(0),this.hi=!1,this.hi=!0,this.Pi=new AL,this.referenceDelegate=e(this),this.Ti=new IL(this),this.indexManager=new fL,this.remoteDocumentCache=function(i){return new EL(i)}(r=>this.referenceDelegate.Ii(r)),this.serializer=new cL(t),this.Ei=new wL(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.hi=!1,Promise.resolve()}get started(){return this.hi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new _L,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ci[e.toKey()];return r||(r=new SL(t,this.referenceDelegate),this.ci[e.toKey()]=r),r}getGlobalsCache(){return this.Pi}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ei}runTransaction(e,t,r){St("MemoryPersistence","Starting transaction:",e);const i=new TL(this.li.next());return this.referenceDelegate.di(),r(i).next(a=>this.referenceDelegate.Ai(i).next(()=>a)).toPromise().then(a=>(i.raiseOnCommittedEvent(),a))}Ri(e,t){return et.or(Object.values(this.ci).map(r=>()=>r.containsKey(e,t)))}}class TL extends nk{constructor(e){super(),this.currentSequenceNumber=e}}class v5{constructor(e){this.persistence=e,this.Vi=new m5,this.mi=null}static fi(e){return new v5(e)}get gi(){if(this.mi)return this.mi;throw tn(60996)}addReference(e,t,r){return this.Vi.addReference(r,t),this.gi.delete(r.toString()),et.resolve()}removeReference(e,t,r){return this.Vi.removeReference(r,t),this.gi.add(r.toString()),et.resolve()}markPotentiallyOrphaned(e,t){return this.gi.add(t.toString()),et.resolve()}removeTarget(e,t){this.Vi.Hr(t.targetId).forEach(i=>this.gi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(a=>this.gi.add(a.toString()))}).next(()=>r.removeTargetData(e,t))}di(){this.mi=new Set}Ai(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return et.forEach(this.gi,r=>{const i=$t.fromPath(r);return this.pi(e,i).next(a=>{a||t.removeEntry(i,fn.min())})}).next(()=>(this.mi=null,t.apply(e)))}updateLimboDocument(e,t){return this.pi(e,t).next(r=>{r?this.gi.delete(t.toString()):this.gi.add(t.toString())})}Ii(e){return 0}pi(e,t){return et.or([()=>et.resolve(this.Vi.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ri(e,t)])}}class rm{constructor(e,t){this.persistence=e,this.yi=new wd(r=>ak(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=vL(this,t)}static fi(e,t){return new rm(e,t)}di(){}Ai(e){return et.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}pr(e){const t=this.br(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}br(e){let t=0;return this.yr(e,r=>{t++}).next(()=>t)}yr(e,t){return et.forEach(this.yi,(r,i)=>this.Dr(e,r,i).next(a=>a?et.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const i=this.persistence.getRemoteDocumentCache(),a=i.newChangeBuffer();return i.si(e,o=>this.Dr(e,o,t).next(s=>{s||(r++,a.removeEntry(o,fn.min()))})).next(()=>a.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.yi.set(t,e.currentSequenceNumber),et.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.yi.set(r,e.currentSequenceNumber),et.resolve()}removeReference(e,t,r){return this.yi.set(r,e.currentSequenceNumber),et.resolve()}updateLimboDocument(e,t){return this.yi.set(t,e.currentSequenceNumber),et.resolve()}Ii(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Cg(e.data.value)),t}Dr(e,t,r){return et.or([()=>this.persistence.Ri(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const i=this.yi.get(t);return et.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y5{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.ds=r,this.As=i}static Rs(e,t){let r=zn(),i=zn();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new y5(e,t.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RL{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NL{constructor(){this.Vs=!1,this.fs=!1,this.gs=100,this.ps=function(){return iN()?8:rk(ho())>0?6:4}()}initialize(e,t){this.ys=e,this.indexManager=t,this.Vs=!0}getDocumentsMatchingQuery(e,t,r,i){const a={result:null};return this.ws(e,t).next(o=>{a.result=o}).next(()=>{if(!a.result)return this.bs(e,t,i,r).next(o=>{a.result=o})}).next(()=>{if(a.result)return;const o=new RL;return this.Ss(e,t,o).next(s=>{if(a.result=s,this.fs)return this.Ds(e,t,o,s.size)})}).next(()=>a.result)}Ds(e,t,r,i){return r.documentReadCount<this.gs?(lh()<=Un.DEBUG&&St("QueryEngine","SDK will not create cache indexes for query:",ch(t),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),et.resolve()):(lh()<=Un.DEBUG&&St("QueryEngine","Query:",ch(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.ps*i?(lh()<=Un.DEBUG&&St("QueryEngine","The SDK decides to create cache indexes for query:",ch(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ic(t))):et.resolve())}ws(e,t){if(A_(t))return et.resolve(null);let r=ic(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=Ky(t,null,"F"),r=ic(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(a=>{const o=zn(...a);return this.ys.getDocuments(e,o).next(s=>this.indexManager.getMinOffset(e,r).next(c=>{const f=this.vs(t,s);return this.Cs(t,f,o,c.readTime)?this.ws(e,Ky(t,null,"F")):this.Fs(e,f,t,c)}))})))}bs(e,t,r,i){return A_(t)||i.isEqual(fn.min())?et.resolve(null):this.ys.getDocuments(e,r).next(a=>{const o=this.vs(t,a);return this.Cs(t,o,r,i)?et.resolve(null):(lh()<=Un.DEBUG&&St("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),ch(t)),this.Fs(e,o,t,ZO(i,g1)).next(s=>s))})}vs(e,t){let r=new ra(SS(e));return t.forEach((i,a)=>{Vm(e,a)&&(r=r.add(a))}),r}Cs(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const a=e.limitType==="F"?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Ss(e,t,r){return lh()<=Un.DEBUG&&St("QueryEngine","Using full collection scan to execute query:",ch(t)),this.ys.getDocumentsMatchingQuery(e,t,hf.min(),r)}Fs(e,t,r,i){return this.ys.getDocumentsMatchingQuery(e,r,i).next(a=>(t.forEach(o=>{a=a.insert(o.key,o)}),a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x5="LocalStore",DL=3e8;class OL{constructor(e,t,r,i){this.persistence=e,this.Ms=t,this.serializer=i,this.xs=new vi(Cn),this.Os=new wd(a=>c5(a),u5),this.Ns=new Map,this.Bs=e.getRemoteDocumentCache(),this.Ti=e.getTargetCache(),this.Ei=e.getBundleCache(),this.Ls(r)}Ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new bL(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.xs))}}function kL(n,e,t,r){return new OL(n,e,t,r)}async function GS(n,e){const t=pn(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(a=>(i=a,t.Ls(e),t.mutationQueue.getAllMutationBatches(r))).next(a=>{const o=[],s=[];let c=zn();for(const f of i){o.push(f.batchId);for(const d of f.mutations)c=c.add(d.key)}for(const f of a){s.push(f.batchId);for(const d of f.mutations)c=c.add(d.key)}return t.localDocuments.getDocuments(r,c).next(f=>({ks:f,removedBatchIds:o,addedBatchIds:s}))})})}function LL(n,e){const t=pn(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),a=t.Bs.newChangeBuffer({trackRemovals:!0});return function(s,c,f,d){const p=f.batch,g=p.keys();let m=et.resolve();return g.forEach(x=>{m=m.next(()=>d.getEntry(c,x)).next(_=>{const C=f.docVersions.get(x);ur(C!==null,48541),_.version.compareTo(C)<0&&(p.applyToRemoteDocument(_,f),_.isValidDocument()&&(_.setReadTime(f.commitVersion),d.addEntry(_)))})}),m.next(()=>s.mutationQueue.removeMutationBatch(c,p))}(t,r,e,a).next(()=>a.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(s){let c=zn();for(let f=0;f<s.mutationResults.length;++f)s.mutationResults[f].transformResults.length>0&&(c=c.add(s.batch.mutations[f].key));return c}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function YS(n){const e=pn(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ti.getLastRemoteSnapshotVersion(t))}function PL(n,e){const t=pn(n),r=e.snapshotVersion;let i=t.xs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const o=t.Bs.newChangeBuffer({trackRemovals:!0});i=t.xs;const s=[];e.targetChanges.forEach((d,p)=>{const g=i.get(p);if(!g)return;s.push(t.Ti.removeMatchingKeys(a,d.removedDocuments,p).next(()=>t.Ti.addMatchingKeys(a,d.addedDocuments,p)));let m=g.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(p)!==null?m=m.withResumeToken(Ua.EMPTY_BYTE_STRING,fn.min()).withLastLimboFreeSnapshotVersion(fn.min()):d.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(d.resumeToken,r)),i=i.insert(p,m),function(_,C,S){return _.resumeToken.approximateByteSize()===0||C.snapshotVersion.toMicroseconds()-_.snapshotVersion.toMicroseconds()>=DL?!0:S.addedDocuments.size+S.modifiedDocuments.size+S.removedDocuments.size>0}(g,m,d)&&s.push(t.Ti.updateTargetData(a,m))});let c=tu(),f=zn();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&s.push(t.persistence.referenceDelegate.updateLimboDocument(a,d))}),s.push(ML(a,o,e.documentUpdates).next(d=>{c=d.qs,f=d.Qs})),!r.isEqual(fn.min())){const d=t.Ti.getLastRemoteSnapshotVersion(a).next(p=>t.Ti.setTargetsMetadata(a,a.currentSequenceNumber,r));s.push(d)}return et.waitFor(s).next(()=>o.apply(a)).next(()=>t.localDocuments.getLocalViewOfDocuments(a,c,f)).next(()=>c)}).then(a=>(t.xs=i,a))}function ML(n,e,t){let r=zn(),i=zn();return t.forEach(a=>r=r.add(a)),e.getEntries(n,r).next(a=>{let o=tu();return t.forEach((s,c)=>{const f=a.get(s);c.isFoundDocument()!==f.isFoundDocument()&&(i=i.add(s)),c.isNoDocument()&&c.version.isEqual(fn.min())?(e.removeEntry(s,c.readTime),o=o.insert(s,c)):!f.isValidDocument()||c.version.compareTo(f.version)>0||c.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(c),o=o.insert(s,c)):St(x5,"Ignoring outdated watch update for ",s,". Current version:",f.version," Watch version:",c.version)}),{qs:o,Qs:i}})}function jL(n,e){const t=pn(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=o5),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function BL(n,e){const t=pn(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Ti.getTargetData(r,e).next(a=>a?(i=a,et.resolve(i)):t.Ti.allocateTargetId(r).next(o=>(i=new rf(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.Ti.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.xs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.xs=t.xs.insert(r.targetId,r),t.Os.set(e,r.targetId)),r})}async function tx(n,e,t){const r=pn(n),i=r.xs.get(e),a=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",a,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!qh(o))throw o;St(x5,`Failed to update sequence numbers for target ${e}: ${o}`)}r.xs=r.xs.remove(e),r.Os.delete(i.target)}function M_(n,e,t){const r=pn(n);let i=fn.min(),a=zn();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,f,d){const p=pn(c),g=p.Os.get(d);return g!==void 0?et.resolve(p.xs.get(g)):p.Ti.getTargetData(f,d)}(r,o,ic(e)).next(s=>{if(s)return i=s.lastLimboFreeSnapshotVersion,r.Ti.getMatchingKeysForTargetId(o,s.targetId).next(c=>{a=c})}).next(()=>r.Ms.getDocumentsMatchingQuery(o,e,t?i:fn.min(),t?a:zn())).next(s=>(FL(r,Sk(e),s),{documents:s,$s:a})))}function FL(n,e,t){let r=n.Ns.get(e)||fn.min();t.forEach((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),n.Ns.set(e,r)}class j_{constructor(){this.activeTargetIds=Nk()}js(e){this.activeTargetIds=this.activeTargetIds.add(e)}Hs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}zs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class UL{constructor(){this.xo=new j_,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.xo.js(e),this.Oo[e]||"not-current"}updateQueryState(e,t,r){this.Oo[e]=t}removeLocalQueryTarget(e){this.xo.Hs(e)}isLocalQueryTarget(e){return this.xo.activeTargetIds.has(e)}clearQueryState(e){delete this.Oo[e]}getAllActiveQueryTargets(){return this.xo.activeTargetIds}isActiveQueryTarget(e){return this.xo.activeTargetIds.has(e)}start(){return this.xo=new j_,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zL{No(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B_="ConnectivityMonitor";class F_{constructor(){this.Bo=()=>this.Lo(),this.ko=()=>this.qo(),this.Qo=[],this.$o()}No(e){this.Qo.push(e)}shutdown(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}$o(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}Lo(){St(B_,"Network connectivity changed: AVAILABLE");for(const e of this.Qo)e(0)}qo(){St(B_,"Network connectivity changed: UNAVAILABLE");for(const e of this.Qo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let rg=null;function nx(){return rg===null?rg=function(){return 268435456+Math.round(2147483648*Math.random())}():rg++,"0x"+rg.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zv="RestConnection",VL={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class qL{get Uo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Ko=t+"://"+e.host,this.Wo=`projects/${r}/databases/${i}`,this.Go=this.databaseId.database===Zg?`project_id=${r}`:`project_id=${r}&database_id=${i}`}zo(e,t,r,i,a){const o=nx(),s=this.jo(e,t.toUriEncodedString());St(zv,`Sending RPC '${e}' ${o}:`,s,r);const c={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(c,i,a);const{host:f}=new URL(s),d=Fh(f);return this.Jo(e,s,c,r,d).then(p=>(St(zv,`Received RPC '${e}' ${o}: `,p),p),p=>{throw Th(zv,`RPC '${e}' ${o} failed with error: `,p,"url: ",s,"request:",r),p})}Yo(e,t,r,i,a,o){return this.zo(e,t,r,i,a)}Ho(e,t,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+zh}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,a)=>e[a]=i),r&&r.headers.forEach((i,a)=>e[a]=i)}jo(e,t){const r=VL[e];return`${this.Ko}/v1/${t}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HL{constructor(e){this.Zo=e.Zo,this.Xo=e.Xo}e_(e){this.t_=e}n_(e){this.r_=e}i_(e){this.s_=e}onMessage(e){this.o_=e}close(){this.Xo()}send(e){this.Zo(e)}__(){this.t_()}a_(){this.r_()}u_(e){this.s_(e)}c_(e){this.o_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const no="WebChannelConnection";class WL extends qL{constructor(e){super(e),this.l_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,i,a){const o=nx();return new Promise((s,c)=>{const f=new Q8;f.setWithCredentials(!0),f.listenOnce(Z8.COMPLETE,()=>{try{switch(f.getLastErrorCode()){case Eg.NO_ERROR:const p=f.getResponseJson();St(no,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(p)),s(p);break;case Eg.TIMEOUT:St(no,`RPC '${e}' ${o} timed out`),c(new Et(Je.DEADLINE_EXCEEDED,"Request time out"));break;case Eg.HTTP_ERROR:const g=f.getStatus();if(St(no,`RPC '${e}' ${o} failed with status:`,g,"response text:",f.getResponseText()),g>0){let m=f.getResponseJson();Array.isArray(m)&&(m=m[0]);const x=m==null?void 0:m.error;if(x&&x.status&&x.message){const _=function(S){const k=S.toLowerCase().replace(/_/g,"-");return Object.values(Je).indexOf(k)>=0?k:Je.UNKNOWN}(x.status);c(new Et(_,x.message))}else c(new Et(Je.UNKNOWN,"Server responded with status "+f.getStatus()))}else c(new Et(Je.UNAVAILABLE,"Connection failed."));break;default:tn(9055,{h_:e,streamId:o,P_:f.getLastErrorCode(),T_:f.getLastError()})}}finally{St(no,`RPC '${e}' ${o} completed.`)}});const d=JSON.stringify(i);St(no,`RPC '${e}' ${o} sending request:`,i),f.send(t,"POST",d,r,15)})}I_(e,t,r){const i=nx(),a=[this.Ko,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=tS(),s=eS(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(c.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Ho(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;const d=a.join("");St(no,`Creating RPC '${e}' stream ${i}: ${d}`,c);const p=o.createWebChannel(d,c);this.E_(p);let g=!1,m=!1;const x=new HL({Zo:C=>{m?St(no,`Not sending because RPC '${e}' stream ${i} is closed:`,C):(g||(St(no,`Opening RPC '${e}' stream ${i} transport.`),p.open(),g=!0),St(no,`RPC '${e}' stream ${i} sending:`,C),p.send(C))},Xo:()=>p.close()}),_=(C,S,k)=>{C.listen(S,M=>{try{k(M)}catch(P){setTimeout(()=>{throw P},0)}})};return _(p,G0.EventType.OPEN,()=>{m||(St(no,`RPC '${e}' stream ${i} transport opened.`),x.__())}),_(p,G0.EventType.CLOSE,()=>{m||(m=!0,St(no,`RPC '${e}' stream ${i} transport closed`),x.u_(),this.d_(p))}),_(p,G0.EventType.ERROR,C=>{m||(m=!0,Th(no,`RPC '${e}' stream ${i} transport errored. Name:`,C.name,"Message:",C.message),x.u_(new Et(Je.UNAVAILABLE,"The operation could not be completed")))}),_(p,G0.EventType.MESSAGE,C=>{var S;if(!m){const k=C.data[0];ur(!!k,16349);const M=k,P=(M==null?void 0:M.error)||((S=M[0])===null||S===void 0?void 0:S.error);if(P){St(no,`RPC '${e}' stream ${i} received error:`,P);const Y=P.status;let z=function(T){const j=Hi[T];if(j!==void 0)return PS(j)}(Y),F=P.message;z===void 0&&(z=Je.INTERNAL,F="Unknown error status: "+Y+" with message "+P.message),m=!0,x.u_(new Et(z,F)),p.close()}else St(no,`RPC '${e}' stream ${i} received:`,k),x.c_(k)}}),_(s,J8.STAT_EVENT,C=>{C.stat===qy.PROXY?St(no,`RPC '${e}' stream ${i} detected buffering proxy`):C.stat===qy.NOPROXY&&St(no,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{x.a_()},0),x}terminate(){this.l_.forEach(e=>e.close()),this.l_=[]}E_(e){this.l_.push(e)}d_(e){this.l_=this.l_.filter(t=>t===e)}}function Vv(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $m(n){return new Xk(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XS{constructor(e,t,r=1e3,i=1.5,a=6e4){this.xi=e,this.timerId=t,this.A_=r,this.R_=i,this.V_=a,this.m_=0,this.f_=null,this.g_=Date.now(),this.reset()}reset(){this.m_=0}p_(){this.m_=this.V_}y_(e){this.cancel();const t=Math.floor(this.m_+this.w_()),r=Math.max(0,Date.now()-this.g_),i=Math.max(0,t-r);i>0&&St("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.m_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.f_=this.xi.enqueueAfterDelay(this.timerId,i,()=>(this.g_=Date.now(),e())),this.m_*=this.R_,this.m_<this.A_&&(this.m_=this.A_),this.m_>this.V_&&(this.m_=this.V_)}b_(){this.f_!==null&&(this.f_.skipDelay(),this.f_=null)}cancel(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}w_(){return(Math.random()-.5)*this.m_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U_="PersistentStream";class KS{constructor(e,t,r,i,a,o,s,c){this.xi=e,this.S_=r,this.D_=i,this.connection=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=s,this.listener=c,this.state=0,this.v_=0,this.C_=null,this.F_=null,this.stream=null,this.M_=0,this.x_=new XS(e,t)}O_(){return this.state===1||this.state===5||this.N_()}N_(){return this.state===2||this.state===3}start(){this.M_=0,this.state!==4?this.auth():this.B_()}async stop(){this.O_()&&await this.close(0)}L_(){this.state=0,this.x_.reset()}k_(){this.N_()&&this.C_===null&&(this.C_=this.xi.enqueueAfterDelay(this.S_,6e4,()=>this.q_()))}Q_(e){this.U_(),this.stream.send(e)}async q_(){if(this.N_())return this.close(0)}U_(){this.C_&&(this.C_.cancel(),this.C_=null)}K_(){this.F_&&(this.F_.cancel(),this.F_=null)}async close(e,t){this.U_(),this.K_(),this.x_.cancel(),this.v_++,e!==4?this.x_.reset():t&&t.code===Je.RESOURCE_EXHAUSTED?(eu(t.toString()),eu("Using maximum backoff delay to prevent overloading the backend."),this.x_.p_()):t&&t.code===Je.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.i_(t)}W_(){}auth(){this.state=1;const e=this.G_(this.v_),t=this.v_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.v_===t&&this.z_(r,i)},r=>{e(()=>{const i=new Et(Je.UNKNOWN,"Fetching auth token failed: "+r.message);return this.j_(i)})})}z_(e,t){const r=this.G_(this.v_);this.stream=this.H_(e,t),this.stream.e_(()=>{r(()=>this.listener.e_())}),this.stream.n_(()=>{r(()=>(this.state=2,this.F_=this.xi.enqueueAfterDelay(this.D_,1e4,()=>(this.N_()&&(this.state=3),Promise.resolve())),this.listener.n_()))}),this.stream.i_(i=>{r(()=>this.j_(i))}),this.stream.onMessage(i=>{r(()=>++this.M_==1?this.J_(i):this.onNext(i))})}B_(){this.state=5,this.x_.y_(async()=>{this.state=0,this.start()})}j_(e){return St(U_,`close with error: ${e}`),this.stream=null,this.close(4,e)}G_(e){return t=>{this.xi.enqueueAndForget(()=>this.v_===e?t():(St(U_,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class $L extends KS{constructor(e,t,r,i,a,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.serializer=a}H_(e,t){return this.connection.I_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.x_.reset();const t=Zk(this.serializer,e),r=function(a){if(!("targetChange"in a))return fn.min();const o=a.targetChange;return o.targetIds&&o.targetIds.length?fn.min():o.readTime?ac(o.readTime):fn.min()}(e);return this.listener.Y_(t,r)}Z_(e){const t={};t.database=ex(this.serializer),t.addTarget=function(a,o){let s;const c=o.target;if(s=Yy(c)?{documents:tL(a,c)}:{query:nL(a,c).gt},s.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){s.resumeToken=BS(a,o.resumeToken);const f=Qy(a,o.expectedCount);f!==null&&(s.expectedCount=f)}else if(o.snapshotVersion.compareTo(fn.min())>0){s.readTime=nm(a,o.snapshotVersion.toTimestamp());const f=Qy(a,o.expectedCount);f!==null&&(s.expectedCount=f)}return s}(this.serializer,e);const r=iL(this.serializer,e);r&&(t.labels=r),this.Q_(t)}X_(e){const t={};t.database=ex(this.serializer),t.removeTarget=e,this.Q_(t)}}class GL extends KS{constructor(e,t,r,i,a,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,o),this.serializer=a}get ea(){return this.M_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.ea&&this.ta([])}H_(e,t){return this.connection.I_("Write",e,t)}J_(e){return ur(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ur(!e.writeResults||e.writeResults.length===0,55816),this.listener.na()}onNext(e){ur(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.x_.reset();const t=eL(e.writeResults,e.commitTime),r=ac(e.commitTime);return this.listener.ra(r,t)}ia(){const e={};e.database=ex(this.serializer),this.Q_(e)}ta(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Jk(this.serializer,r))};this.Q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YL{}class XL extends YL{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.sa=!1}oa(){if(this.sa)throw new Et(Je.FAILED_PRECONDITION,"The client has already been terminated.")}zo(e,t,r,i){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,o])=>this.connection.zo(e,Zy(t,r),i,a,o)).catch(a=>{throw a.name==="FirebaseError"?(a.code===Je.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Et(Je.UNKNOWN,a.toString())})}Yo(e,t,r,i,a){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Yo(e,Zy(t,r),i,o,s,a)).catch(o=>{throw o.name==="FirebaseError"?(o.code===Je.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Et(Je.UNKNOWN,o.toString())})}terminate(){this.sa=!0,this.connection.terminate()}}class KL{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this._a=0,this.aa=null,this.ua=!0}ca(){this._a===0&&(this.la("Unknown"),this.aa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.aa=null,this.ha("Backend didn't respond within 10 seconds."),this.la("Offline"),Promise.resolve())))}Pa(e){this.state==="Online"?this.la("Unknown"):(this._a++,this._a>=1&&(this.Ta(),this.ha(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.la("Offline")))}set(e){this.Ta(),this._a=0,e==="Online"&&(this.ua=!1),this.la(e)}la(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ha(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ua?(eu(t),this.ua=!1):St("OnlineStateTracker",t)}Ta(){this.aa!==null&&(this.aa.cancel(),this.aa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fd="RemoteStore";class QL{constructor(e,t,r,i,a){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ia=[],this.Ea=new Map,this.da=new Set,this.Aa=[],this.Ra=a,this.Ra.No(o=>{r.enqueueAndForget(async()=>{_d(this)&&(St(fd,"Restarting streams for network reachability change."),await async function(c){const f=pn(c);f.da.add(4),await U1(f),f.Va.set("Unknown"),f.da.delete(4),await Gm(f)}(this))})}),this.Va=new KL(r,i)}}async function Gm(n){if(_d(n))for(const e of n.Aa)await e(!0)}async function U1(n){for(const e of n.Aa)await e(!1)}function QS(n,e){const t=pn(n);t.Ea.has(e.targetId)||(t.Ea.set(e.targetId,e),A5(t)?_5(t):Wh(t).N_()&&w5(t,e))}function b5(n,e){const t=pn(n),r=Wh(t);t.Ea.delete(e),r.N_()&&ZS(t,e),t.Ea.size===0&&(r.N_()?r.k_():_d(t)&&t.Va.set("Unknown"))}function w5(n,e){if(n.ma.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(fn.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Wh(n).Z_(e)}function ZS(n,e){n.ma.Ke(e),Wh(n).X_(e)}function _5(n){n.ma=new Wk({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>n.Ea.get(e)||null,Pt:()=>n.datastore.serializer.databaseId}),Wh(n).start(),n.Va.ca()}function A5(n){return _d(n)&&!Wh(n).O_()&&n.Ea.size>0}function _d(n){return pn(n).da.size===0}function JS(n){n.ma=void 0}async function ZL(n){n.Va.set("Online")}async function JL(n){n.Ea.forEach((e,t)=>{w5(n,e)})}async function eP(n,e){JS(n),A5(n)?(n.Va.Pa(e),_5(n)):n.Va.set("Unknown")}async function tP(n,e,t){if(n.Va.set("Online"),e instanceof jS&&e.state===2&&e.cause)try{await async function(i,a){const o=a.cause;for(const s of a.targetIds)i.Ea.has(s)&&(await i.remoteSyncer.rejectListen(s,o),i.Ea.delete(s),i.ma.removeTarget(s))}(n,e)}catch(r){St(fd,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await im(n,r)}else if(e instanceof Rg?n.ma.Xe(e):e instanceof MS?n.ma.ot(e):n.ma.nt(e),!t.isEqual(fn.min()))try{const r=await YS(n.localStore);t.compareTo(r)>=0&&await function(a,o){const s=a.ma.It(o);return s.targetChanges.forEach((c,f)=>{if(c.resumeToken.approximateByteSize()>0){const d=a.Ea.get(f);d&&a.Ea.set(f,d.withResumeToken(c.resumeToken,o))}}),s.targetMismatches.forEach((c,f)=>{const d=a.Ea.get(c);if(!d)return;a.Ea.set(c,d.withResumeToken(Ua.EMPTY_BYTE_STRING,d.snapshotVersion)),ZS(a,c);const p=new rf(d.target,c,f,d.sequenceNumber);w5(a,p)}),a.remoteSyncer.applyRemoteEvent(s)}(n,t)}catch(r){St(fd,"Failed to raise snapshot:",r),await im(n,r)}}async function im(n,e,t){if(!qh(e))throw e;n.da.add(1),await U1(n),n.Va.set("Offline"),t||(t=()=>YS(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{St(fd,"Retrying IndexedDB access"),await t(),n.da.delete(1),await Gm(n)})}function eE(n,e){return e().catch(t=>im(n,t,e))}async function Ym(n){const e=pn(n),t=vf(e);let r=e.Ia.length>0?e.Ia[e.Ia.length-1].batchId:o5;for(;nP(e);)try{const i=await jL(e.localStore,r);if(i===null){e.Ia.length===0&&t.k_();break}r=i.batchId,rP(e,i)}catch(i){await im(e,i)}tE(e)&&nE(e)}function nP(n){return _d(n)&&n.Ia.length<10}function rP(n,e){n.Ia.push(e);const t=vf(n);t.N_()&&t.ea&&t.ta(e.mutations)}function tE(n){return _d(n)&&!vf(n).O_()&&n.Ia.length>0}function nE(n){vf(n).start()}async function iP(n){vf(n).ia()}async function aP(n){const e=vf(n);for(const t of n.Ia)e.ta(t.mutations)}async function oP(n,e,t){const r=n.Ia.shift(),i=h5.from(r,e,t);await eE(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),await Ym(n)}async function sP(n,e){e&&vf(n).ea&&await async function(r,i){if(function(o){return qk(o)&&o!==Je.ABORTED}(i.code)){const a=r.Ia.shift();vf(r).L_(),await eE(r,()=>r.remoteSyncer.rejectFailedWrite(a.batchId,i)),await Ym(r)}}(n,e),tE(n)&&nE(n)}async function z_(n,e){const t=pn(n);t.asyncQueue.verifyOperationInProgress(),St(fd,"RemoteStore received new credentials");const r=_d(t);t.da.add(3),await U1(t),r&&t.Va.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.da.delete(3),await Gm(t)}async function lP(n,e){const t=pn(n);e?(t.da.delete(2),await Gm(t)):e||(t.da.add(2),await U1(t),t.Va.set("Unknown"))}function Wh(n){return n.fa||(n.fa=function(t,r,i){const a=pn(t);return a.oa(),new $L(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)}(n.datastore,n.asyncQueue,{e_:ZL.bind(null,n),n_:JL.bind(null,n),i_:eP.bind(null,n),Y_:tP.bind(null,n)}),n.Aa.push(async e=>{e?(n.fa.L_(),A5(n)?_5(n):n.Va.set("Unknown")):(await n.fa.stop(),JS(n))})),n.fa}function vf(n){return n.ga||(n.ga=function(t,r,i){const a=pn(t);return a.oa(),new GL(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)}(n.datastore,n.asyncQueue,{e_:()=>Promise.resolve(),n_:iP.bind(null,n),i_:sP.bind(null,n),na:aP.bind(null,n),ra:oP.bind(null,n)}),n.Aa.push(async e=>{e?(n.ga.L_(),await Ym(n)):(await n.ga.stop(),n.Ia.length>0&&(St(fd,`Stopping write stream with ${n.Ia.length} pending writes`),n.Ia=[]))})),n.ga}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S5{constructor(e,t,r,i,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new Kc,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,a){const o=Date.now()+r,s=new S5(e,t,o,i,a);return s.start(r),s}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Et(Je.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function E5(n,e){if(eu("AsyncQueue",`${e}: ${n}`),qh(n))return new Et(Je.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _h{static emptySet(e){return new _h(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||$t.comparator(t.key,r.key):(t,r)=>$t.comparator(t.key,r.key),this.keyedMap=Y0(),this.sortedSet=new vi(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof _h)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new _h;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V_{constructor(){this.pa=new vi($t.comparator)}track(e){const t=e.doc.key,r=this.pa.get(t);r?e.type!==0&&r.type===3?this.pa=this.pa.insert(t,e):e.type===3&&r.type!==1?this.pa=this.pa.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.pa=this.pa.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.pa=this.pa.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.pa=this.pa.remove(t):e.type===1&&r.type===2?this.pa=this.pa.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.pa=this.pa.insert(t,{type:2,doc:e.doc}):tn(63341,{Vt:e,ya:r}):this.pa=this.pa.insert(t,e)}wa(){const e=[];return this.pa.inorderTraversal((t,r)=>{e.push(r)}),e}}class kh{constructor(e,t,r,i,a,o,s,c,f){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=c,this.hasCachedResults=f}static fromInitialDocuments(e,t,r,i,a){const o=[];return t.forEach(s=>{o.push({type:0,doc:s})}),new kh(e,t,_h.emptySet(t),o,r,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&zm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cP{constructor(){this.ba=void 0,this.Sa=[]}Da(){return this.Sa.some(e=>e.va())}}class uP{constructor(){this.queries=q_(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){const i=pn(t),a=i.queries;i.queries=q_(),a.forEach((o,s)=>{for(const c of s.Sa)c.onError(r)})})(this,new Et(Je.ABORTED,"Firestore shutting down"))}}function q_(){return new wd(n=>AS(n),zm)}async function C5(n,e){const t=pn(n);let r=3;const i=e.query;let a=t.queries.get(i);a?!a.Da()&&e.va()&&(r=2):(a=new cP,r=e.va()?0:1);try{switch(r){case 0:a.ba=await t.onListen(i,!0);break;case 1:a.ba=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(o){const s=E5(o,`Initialization of query '${ch(e.query)}' failed`);return void e.onError(s)}t.queries.set(i,a),a.Sa.push(e),e.Fa(t.onlineState),a.ba&&e.Ma(a.ba)&&T5(t)}async function I5(n,e){const t=pn(n),r=e.query;let i=3;const a=t.queries.get(r);if(a){const o=a.Sa.indexOf(e);o>=0&&(a.Sa.splice(o,1),a.Sa.length===0?i=e.va()?0:1:!a.Da()&&e.va()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function fP(n,e){const t=pn(n);let r=!1;for(const i of e){const a=i.query,o=t.queries.get(a);if(o){for(const s of o.Sa)s.Ma(i)&&(r=!0);o.ba=i}}r&&T5(t)}function dP(n,e,t){const r=pn(n),i=r.queries.get(e);if(i)for(const a of i.Sa)a.onError(t);r.queries.delete(e)}function T5(n){n.Ca.forEach(e=>{e.next()})}var rx,H_;(H_=rx||(rx={})).xa="default",H_.Cache="cache";class R5{constructor(e,t,r){this.query=e,this.Oa=t,this.Na=!1,this.Ba=null,this.onlineState="Unknown",this.options=r||{}}Ma(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new kh(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Na?this.La(e)&&(this.Oa.next(e),t=!0):this.ka(e,this.onlineState)&&(this.qa(e),t=!0),this.Ba=e,t}onError(e){this.Oa.error(e)}Fa(e){this.onlineState=e;let t=!1;return this.Ba&&!this.Na&&this.ka(this.Ba,e)&&(this.qa(this.Ba),t=!0),t}ka(e,t){if(!e.fromCache||!this.va())return!0;const r=t!=="Offline";return(!this.options.Qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}La(e){if(e.docChanges.length>0)return!0;const t=this.Ba&&this.Ba.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}qa(e){e=kh.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Na=!0,this.Oa.next(e)}va(){return this.options.source!==rx.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rE{constructor(e){this.key=e}}class iE{constructor(e){this.key=e}}class hP{constructor(e,t){this.query=e,this.Ha=t,this.Ja=null,this.hasCachedResults=!1,this.current=!1,this.Ya=zn(),this.mutatedKeys=zn(),this.Za=SS(e),this.Xa=new _h(this.Za)}get eu(){return this.Ha}tu(e,t){const r=t?t.nu:new V_,i=t?t.Xa:this.Xa;let a=t?t.mutatedKeys:this.mutatedKeys,o=i,s=!1;const c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,f=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((d,p)=>{const g=i.get(d),m=Vm(this.query,p)?p:null,x=!!g&&this.mutatedKeys.has(g.key),_=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let C=!1;g&&m?g.data.isEqual(m.data)?x!==_&&(r.track({type:3,doc:m}),C=!0):this.ru(g,m)||(r.track({type:2,doc:m}),C=!0,(c&&this.Za(m,c)>0||f&&this.Za(m,f)<0)&&(s=!0)):!g&&m?(r.track({type:0,doc:m}),C=!0):g&&!m&&(r.track({type:1,doc:g}),C=!0,(c||f)&&(s=!0)),C&&(m?(o=o.add(m),a=_?a.add(d):a.delete(d)):(o=o.delete(d),a=a.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),a=a.delete(d.key),r.track({type:1,doc:d})}return{Xa:o,nu:r,Cs:s,mutatedKeys:a}}ru(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const a=this.Xa;this.Xa=e.Xa,this.mutatedKeys=e.mutatedKeys;const o=e.nu.wa();o.sort((d,p)=>function(m,x){const _=C=>{switch(C){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return tn(20277,{Vt:C})}};return _(m)-_(x)}(d.type,p.type)||this.Za(d.doc,p.doc)),this.iu(r),i=i!=null&&i;const s=t&&!i?this.su():[],c=this.Ya.size===0&&this.current&&!i?1:0,f=c!==this.Ja;return this.Ja=c,o.length!==0||f?{snapshot:new kh(this.query,e.Xa,a,o,e.mutatedKeys,c===0,f,!1,!!r&&r.resumeToken.approximateByteSize()>0),ou:s}:{ou:s}}Fa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Xa:this.Xa,nu:new V_,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{ou:[]}}_u(e){return!this.Ha.has(e)&&!!this.Xa.has(e)&&!this.Xa.get(e).hasLocalMutations}iu(e){e&&(e.addedDocuments.forEach(t=>this.Ha=this.Ha.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ha=this.Ha.delete(t)),this.current=e.current)}su(){if(!this.current)return[];const e=this.Ya;this.Ya=zn(),this.Xa.forEach(r=>{this._u(r.key)&&(this.Ya=this.Ya.add(r.key))});const t=[];return e.forEach(r=>{this.Ya.has(r)||t.push(new iE(r))}),this.Ya.forEach(r=>{e.has(r)||t.push(new rE(r))}),t}au(e){this.Ha=e.$s,this.Ya=zn();const t=this.tu(e.documents);return this.applyChanges(t,!0)}uu(){return kh.fromInitialDocuments(this.query,this.Xa,this.mutatedKeys,this.Ja===0,this.hasCachedResults)}}const N5="SyncEngine";class pP{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class gP{constructor(e){this.key=e,this.cu=!1}}class mP{constructor(e,t,r,i,a,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.lu={},this.hu=new wd(s=>AS(s),zm),this.Pu=new Map,this.Tu=new Set,this.Iu=new vi($t.comparator),this.Eu=new Map,this.du=new m5,this.Au={},this.Ru=new Map,this.Vu=Oh.lr(),this.onlineState="Unknown",this.mu=void 0}get isPrimaryClient(){return this.mu===!0}}async function vP(n,e,t=!0){const r=uE(n);let i;const a=r.hu.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),i=a.view.uu()):i=await aE(r,e,t,!0),i}async function yP(n,e){const t=uE(n);await aE(t,e,!0,!1)}async function aE(n,e,t,r){const i=await BL(n.localStore,ic(e)),a=i.targetId,o=n.sharedClientState.addLocalQueryTarget(a,t);let s;return r&&(s=await xP(n,e,a,o==="current",i.resumeToken)),n.isPrimaryClient&&t&&QS(n.remoteStore,i),s}async function xP(n,e,t,r,i){n.fu=(p,g,m)=>async function(_,C,S,k){let M=C.view.tu(S);M.Cs&&(M=await M_(_.localStore,C.query,!1).then(({documents:F})=>C.view.tu(F,M)));const P=k&&k.targetChanges.get(C.targetId),Y=k&&k.targetMismatches.get(C.targetId)!=null,z=C.view.applyChanges(M,_.isPrimaryClient,P,Y);return $_(_,C.targetId,z.ou),z.snapshot}(n,p,g,m);const a=await M_(n.localStore,e,!0),o=new hP(e,a.$s),s=o.tu(a.documents),c=F1.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),f=o.applyChanges(s,n.isPrimaryClient,c);$_(n,t,f.ou);const d=new pP(e,t,o);return n.hu.set(e,d),n.Pu.has(t)?n.Pu.get(t).push(e):n.Pu.set(t,[e]),f.snapshot}async function bP(n,e,t){const r=pn(n),i=r.hu.get(e),a=r.Pu.get(i.targetId);if(a.length>1)return r.Pu.set(i.targetId,a.filter(o=>!zm(o,e))),void r.hu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await tx(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&b5(r.remoteStore,i.targetId),ix(r,i.targetId)}).catch(Vh)):(ix(r,i.targetId),await tx(r.localStore,i.targetId,!0))}async function wP(n,e){const t=pn(n),r=t.hu.get(e),i=t.Pu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),b5(t.remoteStore,r.targetId))}async function _P(n,e,t){const r=RP(n);try{const i=await function(o,s){const c=pn(o),f=Fi.now(),d=s.reduce((m,x)=>m.add(x.key),zn());let p,g;return c.persistence.runTransaction("Locally write mutations","readwrite",m=>{let x=tu(),_=zn();return c.Bs.getEntries(m,d).next(C=>{x=C,x.forEach((S,k)=>{k.isValidDocument()||(_=_.add(S))})}).next(()=>c.localDocuments.getOverlayedDocuments(m,x)).next(C=>{p=C;const S=[];for(const k of s){const M=Bk(k,p.get(k.key).overlayedDocument);M!=null&&S.push(new Sf(k.key,M,gS(M.value.mapValue),$s.exists(!0)))}return c.mutationQueue.addMutationBatch(m,f,S,s)}).next(C=>{g=C;const S=C.applyToLocalDocumentSet(p,_);return c.documentOverlayCache.saveOverlays(m,C.batchId,S)})}).then(()=>({batchId:g.batchId,changes:CS(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,s,c){let f=o.Au[o.currentUser.toKey()];f||(f=new vi(Cn)),f=f.insert(s,c),o.Au[o.currentUser.toKey()]=f}(r,i.batchId,t),await z1(r,i.changes),await Ym(r.remoteStore)}catch(i){const a=E5(i,"Failed to persist write");t.reject(a)}}async function oE(n,e){const t=pn(n);try{const r=await PL(t.localStore,e);e.targetChanges.forEach((i,a)=>{const o=t.Eu.get(a);o&&(ur(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?o.cu=!0:i.modifiedDocuments.size>0?ur(o.cu,14607):i.removedDocuments.size>0&&(ur(o.cu,42227),o.cu=!1))}),await z1(t,r,e)}catch(r){await Vh(r)}}function W_(n,e,t){const r=pn(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const i=[];r.hu.forEach((a,o)=>{const s=o.view.Fa(e);s.snapshot&&i.push(s.snapshot)}),function(o,s){const c=pn(o);c.onlineState=s;let f=!1;c.queries.forEach((d,p)=>{for(const g of p.Sa)g.Fa(s)&&(f=!0)}),f&&T5(c)}(r.eventManager,e),i.length&&r.lu.Y_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function AP(n,e,t){const r=pn(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Eu.get(e),a=i&&i.key;if(a){let o=new vi($t.comparator);o=o.insert(a,uo.newNoDocument(a,fn.min()));const s=zn().add(a),c=new Wm(fn.min(),new Map,new vi(Cn),o,s);await oE(r,c),r.Iu=r.Iu.remove(a),r.Eu.delete(e),D5(r)}else await tx(r.localStore,e,!1).then(()=>ix(r,e,t)).catch(Vh)}async function SP(n,e){const t=pn(n),r=e.batch.batchId;try{const i=await LL(t.localStore,e);lE(t,r,null),sE(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await z1(t,i)}catch(i){await Vh(i)}}async function EP(n,e,t){const r=pn(n);try{const i=await function(o,s){const c=pn(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",f=>{let d;return c.mutationQueue.lookupMutationBatch(f,s).next(p=>(ur(p!==null,37113),d=p.keys(),c.mutationQueue.removeMutationBatch(f,p))).next(()=>c.mutationQueue.performConsistencyCheck(f)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(f,d,s)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,d)).next(()=>c.localDocuments.getDocuments(f,d))})}(r.localStore,e);lE(r,e,t),sE(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await z1(r,i)}catch(i){await Vh(i)}}function sE(n,e){(n.Ru.get(e)||[]).forEach(t=>{t.resolve()}),n.Ru.delete(e)}function lE(n,e,t){const r=pn(n);let i=r.Au[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(t?a.reject(t):a.resolve(),i=i.remove(e)),r.Au[r.currentUser.toKey()]=i}}function ix(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Pu.get(e))n.hu.delete(r),t&&n.lu.gu(r,t);n.Pu.delete(e),n.isPrimaryClient&&n.du.Hr(e).forEach(r=>{n.du.containsKey(r)||cE(n,r)})}function cE(n,e){n.Tu.delete(e.path.canonicalString());const t=n.Iu.get(e);t!==null&&(b5(n.remoteStore,t),n.Iu=n.Iu.remove(e),n.Eu.delete(t),D5(n))}function $_(n,e,t){for(const r of t)r instanceof rE?(n.du.addReference(r.key,e),CP(n,r)):r instanceof iE?(St(N5,"Document no longer in limbo: "+r.key),n.du.removeReference(r.key,e),n.du.containsKey(r.key)||cE(n,r.key)):tn(19791,{pu:r})}function CP(n,e){const t=e.key,r=t.path.canonicalString();n.Iu.get(t)||n.Tu.has(r)||(St(N5,"New document in limbo: "+t),n.Tu.add(r),D5(n))}function D5(n){for(;n.Tu.size>0&&n.Iu.size<n.maxConcurrentLimboResolutions;){const e=n.Tu.values().next().value;n.Tu.delete(e);const t=new $t($r.fromString(e)),r=n.Vu.next();n.Eu.set(r,new gP(t)),n.Iu=n.Iu.insert(t,r),QS(n.remoteStore,new rf(ic(Um(t.path)),r,"TargetPurposeLimboResolution",jm.le))}}async function z1(n,e,t){const r=pn(n),i=[],a=[],o=[];r.hu.isEmpty()||(r.hu.forEach((s,c)=>{o.push(r.fu(c,e,t).then(f=>{var d;if((f||t)&&r.isPrimaryClient){const p=f?!f.fromCache:(d=t==null?void 0:t.targetChanges.get(c.targetId))===null||d===void 0?void 0:d.current;r.sharedClientState.updateQueryState(c.targetId,p?"current":"not-current")}if(f){i.push(f);const p=y5.Rs(c.targetId,f);a.push(p)}}))}),await Promise.all(o),r.lu.Y_(i),await async function(c,f){const d=pn(c);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>et.forEach(f,g=>et.forEach(g.ds,m=>d.persistence.referenceDelegate.addReference(p,g.targetId,m)).next(()=>et.forEach(g.As,m=>d.persistence.referenceDelegate.removeReference(p,g.targetId,m)))))}catch(p){if(!qh(p))throw p;St(x5,"Failed to update sequence numbers: "+p)}for(const p of f){const g=p.targetId;if(!p.fromCache){const m=d.xs.get(g),x=m.snapshotVersion,_=m.withLastLimboFreeSnapshotVersion(x);d.xs=d.xs.insert(g,_)}}}(r.localStore,a))}async function IP(n,e){const t=pn(n);if(!t.currentUser.isEqual(e)){St(N5,"User change. New user:",e.toKey());const r=await GS(t.localStore,e);t.currentUser=e,function(a,o){a.Ru.forEach(s=>{s.forEach(c=>{c.reject(new Et(Je.CANCELLED,o))})}),a.Ru.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await z1(t,r.ks)}}function TP(n,e){const t=pn(n),r=t.Eu.get(e);if(r&&r.cu)return zn().add(r.key);{let i=zn();const a=t.Pu.get(e);if(!a)return i;for(const o of a){const s=t.hu.get(o);i=i.unionWith(s.view.eu)}return i}}function uE(n){const e=pn(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=oE.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=TP.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=AP.bind(null,e),e.lu.Y_=fP.bind(null,e.eventManager),e.lu.gu=dP.bind(null,e.eventManager),e}function RP(n){const e=pn(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=SP.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=EP.bind(null,e),e}class am{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=$m(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Su(e),await this.persistence.start(),this.localStore=this.Du(e),this.gcScheduler=this.vu(e,this.localStore),this.indexBackfillerScheduler=this.Cu(e,this.localStore)}vu(e,t){return null}Cu(e,t){return null}Du(e){return kL(this.persistence,new NL,e.initialUser,this.serializer)}Su(e){return new $S(v5.fi,this.serializer)}bu(e){return new UL}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}am.provider={build:()=>new am};class NP extends am{constructor(e){super(),this.cacheSizeBytes=e}vu(e,t){ur(this.persistence.referenceDelegate instanceof rm,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new gL(r,e.asyncQueue,t)}Su(e){const t=this.cacheSizeBytes!==void 0?Wo.withCacheSize(this.cacheSizeBytes):Wo.DEFAULT;return new $S(r=>rm.fi(r,t),this.serializer)}}class ax{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>W_(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=IP.bind(null,this.syncEngine),await lP(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new uP}()}createDatastore(e){const t=$m(e.databaseInfo.databaseId),r=function(a){return new WL(a)}(e.databaseInfo);return function(a,o,s,c){return new XL(a,o,s,c)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,i,a,o,s){return new QL(r,i,a,o,s)}(this.localStore,this.datastore,e.asyncQueue,t=>W_(this.syncEngine,t,0),function(){return F_.C()?new F_:new zL}())}createSyncEngine(e,t){return function(i,a,o,s,c,f,d){const p=new mP(i,a,o,s,c,f);return d&&(p.mu=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(i){const a=pn(i);St(fd,"RemoteStore shutting down."),a.da.add(5),await U1(a),a.Ra.shutdown(),a.Va.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}ax.provider={build:()=>new ax};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O5{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Mu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Mu(this.observer.error,e):eu("Uncaught Error in snapshot listener:",e.toString()))}xu(){this.muted=!0}Mu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yf="FirestoreClient";class DP{constructor(e,t,r,i,a){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=co.UNAUTHENTICATED,this.clientId=aS.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,async o=>{St(yf,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(St(yf,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Kc;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=E5(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function qv(n,e){n.asyncQueue.verifyOperationInProgress(),St(yf,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async i=>{r.isEqual(i)||(await GS(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function G_(n,e){n.asyncQueue.verifyOperationInProgress();const t=await OP(n);St(yf,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>z_(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>z_(e.remoteStore,i)),n._onlineComponents=e}async function OP(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){St(yf,"Using user provided OfflineComponentProvider");try{await qv(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(i){return i.name==="FirebaseError"?i.code===Je.FAILED_PRECONDITION||i.code===Je.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;Th("Error using user provided cache. Falling back to memory cache: "+t),await qv(n,new am)}}else St(yf,"Using default OfflineComponentProvider"),await qv(n,new NP(void 0));return n._offlineComponents}async function fE(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(St(yf,"Using user provided OnlineComponentProvider"),await G_(n,n._uninitializedComponentsProvider._online)):(St(yf,"Using default OnlineComponentProvider"),await G_(n,new ax))),n._onlineComponents}function kP(n){return fE(n).then(e=>e.syncEngine)}async function om(n){const e=await fE(n),t=e.eventManager;return t.onListen=vP.bind(null,e.syncEngine),t.onUnlisten=bP.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=yP.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=wP.bind(null,e.syncEngine),t}function LP(n,e,t={}){const r=new Kc;return n.asyncQueue.enqueueAndForget(async()=>function(a,o,s,c,f){const d=new O5({next:g=>{d.xu(),o.enqueueAndForget(()=>I5(a,p));const m=g.docs.has(s);!m&&g.fromCache?f.reject(new Et(Je.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&g.fromCache&&c&&c.source==="server"?f.reject(new Et(Je.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):f.resolve(g)},error:g=>f.reject(g)}),p=new R5(Um(s.path),d,{includeMetadataChanges:!0,Qa:!0});return C5(a,p)}(await om(n),n.asyncQueue,e,t,r)),r.promise}function PP(n,e,t={}){const r=new Kc;return n.asyncQueue.enqueueAndForget(async()=>function(a,o,s,c,f){const d=new O5({next:g=>{d.xu(),o.enqueueAndForget(()=>I5(a,p)),g.fromCache&&c.source==="server"?f.reject(new Et(Je.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(g)},error:g=>f.reject(g)}),p=new R5(s,d,{includeMetadataChanges:!0,Qa:!0});return C5(a,p)}(await om(n),n.asyncQueue,e,t,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dE(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y_=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hE(n,e,t){if(!t)throw new Et(Je.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function MP(n,e,t,r){if(e===!0&&r===!0)throw new Et(Je.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function X_(n){if(!$t.isDocumentKey(n))throw new Et(Je.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function K_(n){if($t.isDocumentKey(n))throw new Et(Je.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Xm(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":tn(12329,{type:typeof n})}function Ko(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Et(Je.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Xm(n);throw new Et(Je.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pE="firestore.googleapis.com",Q_=!0;class Z_{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Et(Je.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=pE,this.ssl=Q_}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:Q_;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=WS;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<hL)throw new Et(Je.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}MP("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=dE((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new Et(Je.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new Et(Je.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new Et(Je.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Km{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Z_({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Et(Je.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Et(Je.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Z_(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new qO;switch(r.type){case"firstParty":return new GO(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Et(Je.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=Y_.get(t);r&&(St("ComponentProvider","Removing Datastore"),Y_.delete(t),r.terminate())}(this),Promise.resolve()}}function jP(n,e,t,r={}){var i;n=Ko(n,Km);const a=Fh(e),o=n._getSettings(),s=Object.assign(Object.assign({},o),{emulatorOptions:n._getEmulatorOptions()}),c=`${e}:${t}`;a&&(Gx(`https://${c}`),Yx("Firestore",!0)),o.host!==pE&&o.host!==c&&Th("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const f=Object.assign(Object.assign({},o),{host:c,ssl:a,emulatorOptions:r});if(!df(f,s)&&(n._setSettings(f),r.mockUserToken)){let d,p;if(typeof r.mockUserToken=="string")d=r.mockUserToken,p=co.MOCK_USER;else{d=a8(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);const g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new Et(Je.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new co(g)}n._authCredentials=new HO(new rS(d,p))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ef{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ef(this.firestore,e,this._query)}}class fo{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new cf(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new fo(this.firestore,e,this._key)}}class cf extends Ef{constructor(e,t,r){super(e,t,Um(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new fo(this.firestore,null,new $t(e))}withConverter(e){return new cf(this.firestore,e,this._path)}}function hn(n,e,...t){if(n=mi(n),hE("collection","path",e),n instanceof Km){const r=$r.fromString(e,...t);return K_(r),new cf(n,null,r)}{if(!(n instanceof fo||n instanceof cf))throw new Et(Je.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child($r.fromString(e,...t));return K_(r),new cf(n.firestore,null,r)}}function rr(n,e,...t){if(n=mi(n),arguments.length===1&&(e=aS.newId()),hE("doc","path",e),n instanceof Km){const r=$r.fromString(e,...t);return X_(r),new fo(n,null,new $t(r))}{if(!(n instanceof fo||n instanceof cf))throw new Et(Je.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child($r.fromString(e,...t));return X_(r),new fo(n.firestore,n instanceof cf?n.converter:null,new $t(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J_="AsyncQueue";class e4{constructor(e=Promise.resolve()){this.Ju=[],this.Yu=!1,this.Zu=[],this.Xu=null,this.ec=!1,this.tc=!1,this.nc=[],this.x_=new XS(this,"async_queue_retry"),this.rc=()=>{const r=Vv();r&&St(J_,"Visibility state changed to "+r.visibilityState),this.x_.b_()},this.sc=e;const t=Vv();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.rc)}get isShuttingDown(){return this.Yu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.oc(),this._c(e)}enterRestrictedMode(e){if(!this.Yu){this.Yu=!0,this.tc=e||!1;const t=Vv();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.rc)}}enqueue(e){if(this.oc(),this.Yu)return new Promise(()=>{});const t=new Kc;return this._c(()=>this.Yu&&this.tc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ju.push(e),this.ac()))}async ac(){if(this.Ju.length!==0){try{await this.Ju[0](),this.Ju.shift(),this.x_.reset()}catch(e){if(!qh(e))throw e;St(J_,"Operation failed with retryable error: "+e)}this.Ju.length>0&&this.x_.y_(()=>this.ac())}}_c(e){const t=this.sc.then(()=>(this.ec=!0,e().catch(r=>{throw this.Xu=r,this.ec=!1,eu("INTERNAL UNHANDLED ERROR: ",t4(r)),r}).then(r=>(this.ec=!1,r))));return this.sc=t,t}enqueueAfterDelay(e,t,r){this.oc(),this.nc.indexOf(e)>-1&&(t=0);const i=S5.createAndSchedule(this,e,t,r,a=>this.uc(a));return this.Zu.push(i),i}oc(){this.Xu&&tn(47125,{cc:t4(this.Xu)})}verifyOperationInProgress(){}async lc(){let e;do e=this.sc,await e;while(e!==this.sc)}hc(e){for(const t of this.Zu)if(t.timerId===e)return!0;return!1}Pc(e){return this.lc().then(()=>{this.Zu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Zu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.lc()})}Tc(e){this.nc.push(e)}uc(e){const t=this.Zu.indexOf(e);this.Zu.splice(t,1)}}function t4(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n4(n){return function(t,r){if(typeof t!="object"||t===null)return!1;const i=t;for(const a of r)if(a in i&&typeof i[a]=="function")return!0;return!1}(n,["next","error","complete"])}class nu extends Km{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new e4,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new e4(e),this._firestoreClient=void 0,await e}}}function BP(n,e){const t=typeof n=="object"?n:km(),r=typeof n=="string"?n:Zg,i=wf(t,"firestore").getImmediate({identifier:r});if(!i._initialized){const a=n8("firestore");a&&jP(i,...a)}return i}function Qm(n){if(n._terminated)throw new Et(Je.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||FP(n),n._firestoreClient}function FP(n){var e,t,r;const i=n._freezeSettings(),a=function(s,c,f,d){return new lk(s,c,f,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,dE(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new DP(n._authCredentials,n._appCheckCredentials,n._queue,a,n._componentsProvider&&function(s){const c=s==null?void 0:s._online.build();return{_offline:s==null?void 0:s._offline.build(c),_online:c}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lh{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Lh(Ua.fromBase64String(e))}catch(t){throw new Et(Je.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Lh(Ua.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zm{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Et(Je.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ba(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jm{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k5{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Et(Je.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Et(Je.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Cn(this._lat,e._lat)||Cn(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L5{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==i[a])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UP=/^__.*__$/;class zP{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Sf(e,this.data,this.fieldMask,t,this.fieldTransforms):new B1(e,this.data,t,this.fieldTransforms)}}class gE{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Sf(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function mE(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw tn(40011,{Ic:n})}}class P5{constructor(e,t,r,i,a,o){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,a===void 0&&this.Ec(),this.fieldTransforms=a||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ic(){return this.settings.Ic}dc(e){return new P5(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ac(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.dc({path:r,Rc:!1});return i.Vc(e),i}mc(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.dc({path:r,Rc:!1});return i.Ec(),i}fc(e){return this.dc({path:void 0,Rc:!0})}gc(e){return sm(e,this.settings.methodName,this.settings.yc||!1,this.path,this.settings.wc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Ec(){if(this.path)for(let e=0;e<this.path.length;e++)this.Vc(this.path.get(e))}Vc(e){if(e.length===0)throw this.gc("Document fields must not be empty");if(mE(this.Ic)&&UP.test(e))throw this.gc('Document fields cannot begin and end with "__"')}}class VP{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||$m(e)}bc(e,t,r,i=!1){return new P5({Ic:e,methodName:t,wc:r,path:Ba.emptyPath(),Rc:!1,yc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function e2(n){const e=n._freezeSettings(),t=$m(n._databaseId);return new VP(n._databaseId,!!e.ignoreUndefinedProperties,t)}function vE(n,e,t,r,i,a={}){const o=n.bc(a.merge||a.mergeFields?2:0,e,t,i);j5("Data must be an object, but it was:",o,r);const s=yE(r,o);let c,f;if(a.merge)c=new ms(o.fieldMask),f=o.fieldTransforms;else if(a.mergeFields){const d=[];for(const p of a.mergeFields){const g=ox(e,p,t);if(!o.contains(g))throw new Et(Je.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);bE(d,g)||d.push(g)}c=new ms(d),f=o.fieldTransforms.filter(p=>c.covers(p.field))}else c=null,f=o.fieldTransforms;return new zP(new Go(s),c,f)}class t2 extends Jm{_toFieldTransform(e){if(e.Ic!==2)throw e.Ic===1?e.gc(`${this._methodName}() can only appear at the top level of your update data`):e.gc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof t2}}class M5 extends Jm{_toFieldTransform(e){return new Lk(e.path,new b1)}isEqual(e){return e instanceof M5}}function qP(n,e,t,r){const i=n.bc(1,e,t);j5("Data must be an object, but it was:",i,r);const a=[],o=Go.empty();Af(r,(c,f)=>{const d=B5(e,c,t);f=mi(f);const p=i.mc(d);if(f instanceof t2)a.push(d);else{const g=V1(f,p);g!=null&&(a.push(d),o.set(d,g))}});const s=new ms(a);return new gE(o,s,i.fieldTransforms)}function HP(n,e,t,r,i,a){const o=n.bc(1,e,t),s=[ox(e,r,t)],c=[i];if(a.length%2!=0)throw new Et(Je.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<a.length;g+=2)s.push(ox(e,a[g])),c.push(a[g+1]);const f=[],d=Go.empty();for(let g=s.length-1;g>=0;--g)if(!bE(f,s[g])){const m=s[g];let x=c[g];x=mi(x);const _=o.mc(m);if(x instanceof t2)f.push(m);else{const C=V1(x,_);C!=null&&(f.push(m),d.set(m,C))}}const p=new ms(f);return new gE(d,p,o.fieldTransforms)}function WP(n,e,t,r=!1){return V1(t,n.bc(r?4:3,e))}function V1(n,e){if(xE(n=mi(n)))return j5("Unsupported field value:",e,n),yE(n,e);if(n instanceof Jm)return function(r,i){if(!mE(i.Ic))throw i.gc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.gc(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(i);a&&i.fieldTransforms.push(a)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Rc&&e.Ic!==4)throw e.gc("Nested arrays are not supported");return function(r,i){const a=[];let o=0;for(const s of r){let c=V1(s,i.fc(o));c==null&&(c={nullValue:"NULL_VALUE"}),a.push(c),o++}return{arrayValue:{values:a}}}(n,e)}return function(r,i){if((r=mi(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Dk(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=Fi.fromDate(r);return{timestampValue:nm(i.serializer,a)}}if(r instanceof Fi){const a=new Fi(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:nm(i.serializer,a)}}if(r instanceof k5)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Lh)return{bytesValue:BS(i.serializer,r._byteString)};if(r instanceof fo){const a=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(a))throw i.gc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:g5(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof L5)return function(o,s){return{mapValue:{fields:{[hS]:{stringValue:pS},[Jg]:{arrayValue:{values:o.toArray().map(f=>{if(typeof f!="number")throw s.gc("VectorValues must only contain numeric values.");return f5(s.serializer,f)})}}}}}}(r,i);throw i.gc(`Unsupported field value: ${Xm(r)}`)}(n,e)}function yE(n,e){const t={};return sS(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Af(n,(r,i)=>{const a=V1(i,e.Ac(r));a!=null&&(t[r]=a)}),{mapValue:{fields:t}}}function xE(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Fi||n instanceof k5||n instanceof Lh||n instanceof fo||n instanceof Jm||n instanceof L5)}function j5(n,e,t){if(!xE(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){const r=Xm(t);throw r==="an object"?e.gc(n+" a custom object"):e.gc(n+" "+r)}}function ox(n,e,t){if((e=mi(e))instanceof Zm)return e._internalPath;if(typeof e=="string")return B5(n,e);throw sm("Field path arguments must be of type string or ",n,!1,void 0,t)}const $P=new RegExp("[~\\*/\\[\\]]");function B5(n,e,t){if(e.search($P)>=0)throw sm(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Zm(...e.split("."))._internalPath}catch{throw sm(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function sm(n,e,t,r,i){const a=r&&!r.isEmpty(),o=i!==void 0;let s=`Function ${e}() called with invalid data`;t&&(s+=" (via `toFirestore()`)"),s+=". ";let c="";return(a||o)&&(c+=" (found",a&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new Et(Je.INVALID_ARGUMENT,s+n+c)}function bE(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wE{constructor(e,t,r,i,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new fo(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new GP(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(n2("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class GP extends wE{data(){return super.data()}}function n2(n,e){return typeof e=="string"?B5(n,e):e instanceof Zm?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _E(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new Et(Je.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class F5{}class AE extends F5{}function Nl(n,e,...t){let r=[];e instanceof F5&&r.push(e),r=r.concat(t),function(a){const o=a.filter(c=>c instanceof U5).length,s=a.filter(c=>c instanceof r2).length;if(o>1||o>0&&s>0)throw new Et(Je.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class r2 extends AE{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new r2(e,t,r)}_apply(e){const t=this._parse(e);return EE(e._query,t),new Ef(e.firestore,e.converter,Xy(e._query,t))}_parse(e){const t=e2(e.firestore);return function(a,o,s,c,f,d,p){let g;if(f.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new Et(Je.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){i4(p,d);const x=[];for(const _ of p)x.push(r4(c,a,_));g={arrayValue:{values:x}}}else g=r4(c,a,p)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||i4(p,d),g=WP(s,o,p,d==="in"||d==="not-in");return Wi.create(f,d,g)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function ru(n,e,t){const r=e,i=n2("where",n);return r2._create(i,r,t)}class U5 extends F5{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new U5(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:kl.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(i,a){let o=i;const s=a.getFlattenedFilters();for(const c of s)EE(o,c),o=Xy(o,c)}(e._query,t),new Ef(e.firestore,e.converter,Xy(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class z5 extends AE{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new z5(e,t)}_apply(e){const t=function(i,a,o){if(i.startAt!==null)throw new Et(Je.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new Et(Je.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new x1(a,o)}(e._query,this._field,this._direction);return new Ef(e.firestore,e.converter,function(i,a){const o=i.explicitOrderBy.concat([a]);return new Hh(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}}function SE(n,e="asc"){const t=e,r=n2("orderBy",n);return z5._create(r,t)}function r4(n,e,t){if(typeof(t=mi(t))=="string"){if(t==="")throw new Et(Je.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!_S(e)&&t.indexOf("/")!==-1)throw new Et(Je.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child($r.fromString(t));if(!$t.isDocumentKey(r))throw new Et(Je.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return v_(n,new $t(r))}if(t instanceof fo)return v_(n,t._key);throw new Et(Je.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Xm(t)}.`)}function i4(n,e){if(!Array.isArray(n)||n.length===0)throw new Et(Je.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function EE(n,e){const t=function(i,a){for(const o of i)for(const s of o.getFlattenedFilters())if(a.indexOf(s.op)>=0)return s.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new Et(Je.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Et(Je.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class YP{convertValue(e,t="none"){switch(mf(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Pi(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(gf(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw tn(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Af(e,(i,a)=>{r[i]=this.convertValue(a,t)}),r}convertVectorValue(e){var t,r,i;const a=(i=(r=(t=e.fields)===null||t===void 0?void 0:t[Jg].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>Pi(o.doubleValue));return new L5(a)}convertGeoPoint(e){return new k5(Pi(e.latitude),Pi(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Fm(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(m1(e));default:return null}}convertTimestamp(e){const t=pf(e);return new Fi(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=$r.fromString(e);ur(HS(r),9688,{name:e});const i=new v1(r.get(1),r.get(3)),a=new $t(r.popFirst(5));return i.isEqual(t)||eu(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CE(n,e,t){let r;return r=n?n.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K0{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class IE extends wE{constructor(e,t,r,i,a,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Ng(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(n2("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class Ng extends IE{data(e={}){return super.data(e)}}class TE{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new K0(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Ng(this._firestore,this._userDataWriter,r.key,r,new K0(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Et(Je.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,a){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(s=>{const c=new Ng(i._firestore,i._userDataWriter,s.doc.key,s.doc,new K0(i._snapshot.mutatedKeys.has(s.doc.key),i._snapshot.fromCache),i.query.converter);return s.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(s=>a||s.type!==3).map(s=>{const c=new Ng(i._firestore,i._userDataWriter,s.doc.key,s.doc,new K0(i._snapshot.mutatedKeys.has(s.doc.key),i._snapshot.fromCache),i.query.converter);let f=-1,d=-1;return s.type!==0&&(f=o.indexOf(s.doc.key),o=o.delete(s.doc.key)),s.type!==1&&(o=o.add(s.doc),d=o.indexOf(s.doc.key)),{type:XP(s.type),doc:c,oldIndex:f,newIndex:d}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function XP(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return tn(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ph(n){n=Ko(n,fo);const e=Ko(n.firestore,nu);return LP(Qm(e),n._key).then(t=>RE(e,n,t))}class V5 extends YP{constructor(e){super(),this.firestore=e}convertBytes(e){return new Lh(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new fo(this.firestore,null,t)}}function nr(n){n=Ko(n,Ef);const e=Ko(n.firestore,nu),t=Qm(e),r=new V5(e);return _E(n._query),PP(t,n._query).then(i=>new TE(e,r,n,i))}function q5(n,e,t){n=Ko(n,fo);const r=Ko(n.firestore,nu),i=CE(n.converter,e);return i2(r,[vE(e2(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,$s.none())])}function ia(n,e,t,...r){n=Ko(n,fo);const i=Ko(n.firestore,nu),a=e2(i);let o;return o=typeof(e=mi(e))=="string"||e instanceof Zm?HP(a,"updateDoc",n._key,e,t,r):qP(a,"updateDoc",n._key,e),i2(i,[o.toMutation(n._key,$s.exists(!0))])}function $h(n){return i2(Ko(n.firestore,nu),[new d5(n._key,$s.none())])}function dd(n,e){const t=Ko(n.firestore,nu),r=rr(n),i=CE(n.converter,e);return i2(t,[vE(e2(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,$s.exists(!1))]).then(()=>r)}function q1(n,...e){var t,r,i;n=mi(n);let a={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||n4(e[o])||(a=e[o],o++);const s={includeMetadataChanges:a.includeMetadataChanges,source:a.source};if(n4(e[o])){const p=e[o];e[o]=(t=p.next)===null||t===void 0?void 0:t.bind(p),e[o+1]=(r=p.error)===null||r===void 0?void 0:r.bind(p),e[o+2]=(i=p.complete)===null||i===void 0?void 0:i.bind(p)}let c,f,d;if(n instanceof fo)f=Ko(n.firestore,nu),d=Um(n._key.path),c={next:p=>{e[o]&&e[o](RE(f,n,p))},error:e[o+1],complete:e[o+2]};else{const p=Ko(n,Ef);f=Ko(p.firestore,nu),d=p._query;const g=new V5(f);c={next:m=>{e[o]&&e[o](new TE(f,g,p,m))},error:e[o+1],complete:e[o+2]},_E(n._query)}return function(g,m,x,_){const C=new O5(_),S=new R5(m,C,x);return g.asyncQueue.enqueueAndForget(async()=>C5(await om(g),S)),()=>{C.xu(),g.asyncQueue.enqueueAndForget(async()=>I5(await om(g),S))}}(Qm(f),d,s,c)}function i2(n,e){return function(r,i){const a=new Kc;return r.asyncQueue.enqueueAndForget(async()=>_P(await kP(r),i,a)),a.promise}(Qm(n),e)}function RE(n,e,t){const r=t.docs.get(e._key),i=new V5(n);return new IE(n,i,e._key,r,new K0(t.hasPendingWrites,t.fromCache),e.converter)}function kr(){return new M5("serverTimestamp")}(function(e,t=!0){(function(i){zh=i})(bd),Dl(new Xs("firestore",(r,{instanceIdentifier:i,options:a})=>{const o=r.getProvider("app").getImmediate(),s=new nu(new WO(r.getProvider("auth-internal")),new YO(o,r.getProvider("app-check-internal")),function(f,d){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new Et(Je.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new v1(f.options.projectId,d)}(o,i),o);return a=Object.assign({useFetchStreams:t},a),s._setSettings(a),s},"PUBLIC").setMultipleInstances(!0)),Xo(a_,o_,e),Xo(a_,o_,"esm2017")})();var KP="firebase",QP="11.9.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Xo(KP,QP,"app");const NE="@firebase/installations",H5="0.6.17";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DE=1e4,OE=`w:${H5}`,kE="FIS_v2",ZP="https://firebaseinstallations.googleapis.com/v1",JP=60*60*1e3,eM="installations",tM="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nM={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},hd=new xd(eM,tM,nM);function LE(n){return n instanceof Qs&&n.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PE({projectId:n}){return`${ZP}/projects/${n}/installations`}function ME(n){return{token:n.token,requestStatus:2,expiresIn:iM(n.expiresIn),creationTime:Date.now()}}async function jE(n,e){const r=(await e.json()).error;return hd.create("request-failed",{requestName:n,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function BE({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function rM(n,{refreshToken:e}){const t=BE(n);return t.append("Authorization",aM(e)),t}async function FE(n){const e=await n();return e.status>=500&&e.status<600?n():e}function iM(n){return Number(n.replace("s","000"))}function aM(n){return`${kE} ${n}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oM({appConfig:n,heartbeatServiceProvider:e},{fid:t}){const r=PE(n),i=BE(n),a=e.getImmediate({optional:!0});if(a){const f=await a.getHeartbeatsHeader();f&&i.append("x-firebase-client",f)}const o={fid:t,authVersion:kE,appId:n.appId,sdkVersion:OE},s={method:"POST",headers:i,body:JSON.stringify(o)},c=await FE(()=>fetch(r,s));if(c.ok){const f=await c.json();return{fid:f.fid||t,registrationStatus:2,refreshToken:f.refreshToken,authToken:ME(f.authToken)}}else throw await jE("Create Installation",c)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UE(n){return new Promise(e=>{setTimeout(e,n)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sM(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lM=/^[cdef][\w-]{21}$/,sx="";function cM(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const t=uM(n);return lM.test(t)?t:sx}catch{return sx}}function uM(n){return sM(n).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a2(n){return`${n.appName}!${n.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zE=new Map;function VE(n,e){const t=a2(n);qE(t,e),fM(t,e)}function qE(n,e){const t=zE.get(n);if(t)for(const r of t)r(e)}function fM(n,e){const t=dM();t&&t.postMessage({key:n,fid:e}),hM()}let td=null;function dM(){return!td&&"BroadcastChannel"in self&&(td=new BroadcastChannel("[Firebase] FID Change"),td.onmessage=n=>{qE(n.data.key,n.data.fid)}),td}function hM(){zE.size===0&&td&&(td.close(),td=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pM="firebase-installations-database",gM=1,pd="firebase-installations-store";let Hv=null;function W5(){return Hv||(Hv=f8(pM,gM,{upgrade:(n,e)=>{switch(e){case 0:n.createObjectStore(pd)}}})),Hv}async function lm(n,e){const t=a2(n),i=(await W5()).transaction(pd,"readwrite"),a=i.objectStore(pd),o=await a.get(t);return await a.put(e,t),await i.done,(!o||o.fid!==e.fid)&&VE(n,e.fid),e}async function HE(n){const e=a2(n),r=(await W5()).transaction(pd,"readwrite");await r.objectStore(pd).delete(e),await r.done}async function o2(n,e){const t=a2(n),i=(await W5()).transaction(pd,"readwrite"),a=i.objectStore(pd),o=await a.get(t),s=e(o);return s===void 0?await a.delete(t):await a.put(s,t),await i.done,s&&(!o||o.fid!==s.fid)&&VE(n,s.fid),s}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $5(n){let e;const t=await o2(n.appConfig,r=>{const i=mM(r),a=vM(n,i);return e=a.registrationPromise,a.installationEntry});return t.fid===sx?{installationEntry:await e}:{installationEntry:t,registrationPromise:e}}function mM(n){const e=n||{fid:cM(),registrationStatus:0};return WE(e)}function vM(n,e){if(e.registrationStatus===0){if(!navigator.onLine){const i=Promise.reject(hd.create("app-offline"));return{installationEntry:e,registrationPromise:i}}const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=yM(n,t);return{installationEntry:t,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:xM(n)}:{installationEntry:e}}async function yM(n,e){try{const t=await oM(n,e);return lm(n.appConfig,t)}catch(t){throw LE(t)&&t.customData.serverCode===409?await HE(n.appConfig):await lm(n.appConfig,{fid:e.fid,registrationStatus:0}),t}}async function xM(n){let e=await a4(n.appConfig);for(;e.registrationStatus===1;)await UE(100),e=await a4(n.appConfig);if(e.registrationStatus===0){const{installationEntry:t,registrationPromise:r}=await $5(n);return r||t}return e}function a4(n){return o2(n,e=>{if(!e)throw hd.create("installation-not-found");return WE(e)})}function WE(n){return bM(n)?{fid:n.fid,registrationStatus:0}:n}function bM(n){return n.registrationStatus===1&&n.registrationTime+DE<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wM({appConfig:n,heartbeatServiceProvider:e},t){const r=_M(n,t),i=rM(n,t),a=e.getImmediate({optional:!0});if(a){const f=await a.getHeartbeatsHeader();f&&i.append("x-firebase-client",f)}const o={installation:{sdkVersion:OE,appId:n.appId}},s={method:"POST",headers:i,body:JSON.stringify(o)},c=await FE(()=>fetch(r,s));if(c.ok){const f=await c.json();return ME(f)}else throw await jE("Generate Auth Token",c)}function _M(n,{fid:e}){return`${PE(n)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function G5(n,e=!1){let t;const r=await o2(n.appConfig,a=>{if(!$E(a))throw hd.create("not-registered");const o=a.authToken;if(!e&&EM(o))return a;if(o.requestStatus===1)return t=AM(n,e),a;{if(!navigator.onLine)throw hd.create("app-offline");const s=IM(a);return t=SM(n,s),s}});return t?await t:r.authToken}async function AM(n,e){let t=await o4(n.appConfig);for(;t.authToken.requestStatus===1;)await UE(100),t=await o4(n.appConfig);const r=t.authToken;return r.requestStatus===0?G5(n,e):r}function o4(n){return o2(n,e=>{if(!$E(e))throw hd.create("not-registered");const t=e.authToken;return TM(t)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function SM(n,e){try{const t=await wM(n,e),r=Object.assign(Object.assign({},e),{authToken:t});return await lm(n.appConfig,r),t}catch(t){if(LE(t)&&(t.customData.serverCode===401||t.customData.serverCode===404))await HE(n.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await lm(n.appConfig,r)}throw t}}function $E(n){return n!==void 0&&n.registrationStatus===2}function EM(n){return n.requestStatus===2&&!CM(n)}function CM(n){const e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+JP}function IM(n){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},n),{authToken:e})}function TM(n){return n.requestStatus===1&&n.requestTime+DE<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RM(n){const e=n,{installationEntry:t,registrationPromise:r}=await $5(e);return r?r.catch(console.error):G5(e).catch(console.error),t.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NM(n,e=!1){const t=n;return await DM(t),(await G5(t,e)).token}async function DM(n){const{registrationPromise:e}=await $5(n);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OM(n){if(!n||!n.options)throw Wv("App Configuration");if(!n.name)throw Wv("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!n.options[t])throw Wv(t);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}function Wv(n){return hd.create("missing-app-config-values",{valueName:n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GE="installations",kM="installations-internal",LM=n=>{const e=n.getProvider("app").getImmediate(),t=OM(e),r=wf(e,"heartbeat");return{app:e,appConfig:t,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},PM=n=>{const e=n.getProvider("app").getImmediate(),t=wf(e,GE).getImmediate();return{getId:()=>RM(t),getToken:i=>NM(t,i)}};function MM(){Dl(new Xs(GE,LM,"PUBLIC")),Dl(new Xs(kM,PM,"PRIVATE"))}MM();Xo(NE,H5);Xo(NE,H5,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cm="analytics",jM="firebase_id",BM="origin",FM=60*1e3,UM="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Y5="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qo=new Om("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zM={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},ys=new xd("analytics","Analytics",zM);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VM(n){if(!n.startsWith(Y5)){const e=ys.create("invalid-gtag-resource",{gtagURL:n});return Qo.warn(e.message),""}return n}function YE(n){return Promise.all(n.map(e=>e.catch(t=>t)))}function qM(n,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(n,e)),t}function HM(n,e){const t=qM("firebase-js-sdk-policy",{createScriptURL:VM}),r=document.createElement("script"),i=`${Y5}?l=${n}&id=${e}`;r.src=t?t==null?void 0:t.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function WM(n){let e=[];return Array.isArray(window[n])?e=window[n]:window[n]=e,e}async function $M(n,e,t,r,i,a){const o=r[i];try{if(o)await e[o];else{const c=(await YE(t)).find(f=>f.measurementId===i);c&&await e[c.appId]}}catch(s){Qo.error(s)}n("config",i,a)}async function GM(n,e,t,r,i){try{let a=[];if(i&&i.send_to){let o=i.send_to;Array.isArray(o)||(o=[o]);const s=await YE(t);for(const c of o){const f=s.find(p=>p.measurementId===c),d=f&&e[f.appId];if(d)a.push(d);else{a=[];break}}}a.length===0&&(a=Object.values(e)),await Promise.all(a),n("event",r,i||{})}catch(a){Qo.error(a)}}function YM(n,e,t,r){async function i(a,...o){try{if(a==="event"){const[s,c]=o;await GM(n,e,t,s,c)}else if(a==="config"){const[s,c]=o;await $M(n,e,t,r,s,c)}else if(a==="consent"){const[s,c]=o;n("consent",s,c)}else if(a==="get"){const[s,c,f]=o;n("get",s,c,f)}else if(a==="set"){const[s]=o;n("set",s)}else n(a,...o)}catch(s){Qo.error(s)}}return i}function XM(n,e,t,r,i){let a=function(...o){window[r].push(arguments)};return window[i]&&typeof window[i]=="function"&&(a=window[i]),window[i]=YM(a,n,e,t),{gtagCore:a,wrappedGtag:window[i]}}function KM(n){const e=window.document.getElementsByTagName("script");for(const t of Object.values(e))if(t.src&&t.src.includes(Y5)&&t.src.includes(n))return t;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QM=30,ZM=1e3;class JM{constructor(e={},t=ZM){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const XE=new JM;function ej(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}async function tj(n){var e;const{appId:t,apiKey:r}=n,i={method:"GET",headers:ej(r)},a=UM.replace("{app-id}",t),o=await fetch(a,i);if(o.status!==200&&o.status!==304){let s="";try{const c=await o.json();!((e=c.error)===null||e===void 0)&&e.message&&(s=c.error.message)}catch{}throw ys.create("config-fetch-failed",{httpStatus:o.status,responseMessage:s})}return o.json()}async function nj(n,e=XE,t){const{appId:r,apiKey:i,measurementId:a}=n.options;if(!r)throw ys.create("no-app-id");if(!i){if(a)return{measurementId:a,appId:r};throw ys.create("no-api-key")}const o=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},s=new aj;return setTimeout(async()=>{s.abort()},FM),KE({appId:r,apiKey:i,measurementId:a},o,s,e)}async function KE(n,{throttleEndTimeMillis:e,backoffCount:t},r,i=XE){var a;const{appId:o,measurementId:s}=n;try{await rj(r,e)}catch(c){if(s)return Qo.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${s} provided in the "measurementId" field in the local Firebase config. [${c==null?void 0:c.message}]`),{appId:o,measurementId:s};throw c}try{const c=await tj(n);return i.deleteThrottleMetadata(o),c}catch(c){const f=c;if(!ij(f)){if(i.deleteThrottleMetadata(o),s)return Qo.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${s} provided in the "measurementId" field in the local Firebase config. [${f==null?void 0:f.message}]`),{appId:o,measurementId:s};throw c}const d=Number((a=f==null?void 0:f.customData)===null||a===void 0?void 0:a.httpStatus)===503?N3(t,i.intervalMillis,QM):N3(t,i.intervalMillis),p={throttleEndTimeMillis:Date.now()+d,backoffCount:t+1};return i.setThrottleMetadata(o,p),Qo.debug(`Calling attemptFetch again in ${d} millis`),KE(n,p,r,i)}}function rj(n,e){return new Promise((t,r)=>{const i=Math.max(e-Date.now(),0),a=setTimeout(t,i);n.addEventListener(()=>{clearTimeout(a),r(ys.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function ij(n){if(!(n instanceof Qs)||!n.customData)return!1;const e=Number(n.customData.httpStatus);return e===429||e===500||e===503||e===504}class aj{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function oj(n,e,t,r,i){if(i&&i.global){n("event",t,r);return}else{const a=await e,o=Object.assign(Object.assign({},r),{send_to:a});n("event",t,o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sj(){if(s8())try{await l8()}catch(n){return Qo.warn(ys.create("indexeddb-unavailable",{errorInfo:n==null?void 0:n.toString()}).message),!1}else return Qo.warn(ys.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function lj(n,e,t,r,i,a,o){var s;const c=nj(n);c.then(m=>{t[m.measurementId]=m.appId,n.options.measurementId&&m.measurementId!==n.options.measurementId&&Qo.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${m.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(m=>Qo.error(m)),e.push(c);const f=sj().then(m=>{if(m)return r.getId()}),[d,p]=await Promise.all([c,f]);KM(a)||HM(a,d.measurementId),i("js",new Date);const g=(s=o==null?void 0:o.config)!==null&&s!==void 0?s:{};return g[BM]="firebase",g.update=!0,p!=null&&(g[jM]=p),i("config",d.measurementId,g),d.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cj{constructor(e){this.app=e}_delete(){return delete s1[this.app.options.appId],Promise.resolve()}}let s1={},s4=[];const l4={};let $v="dataLayer",uj="gtag",c4,QE,u4=!1;function fj(){const n=[];if(o8()&&n.push("This is a browser extension environment."),aN()||n.push("Cookies are not available."),n.length>0){const e=n.map((r,i)=>`(${i+1}) ${r}`).join(" "),t=ys.create("invalid-analytics-context",{errorInfo:e});Qo.warn(t.message)}}function dj(n,e,t){fj();const r=n.options.appId;if(!r)throw ys.create("no-app-id");if(!n.options.apiKey)if(n.options.measurementId)Qo.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw ys.create("no-api-key");if(s1[r]!=null)throw ys.create("already-exists",{id:r});if(!u4){WM($v);const{wrappedGtag:a,gtagCore:o}=XM(s1,s4,l4,$v,uj);QE=a,c4=o,u4=!0}return s1[r]=lj(n,s4,l4,e,c4,$v,t),new cj(n)}function hj(n=km()){n=mi(n);const e=wf(n,cm);return e.isInitialized()?e.getImmediate():pj(n)}function pj(n,e={}){const t=wf(n,cm);if(t.isInitialized()){const i=t.getImmediate();if(df(e,t.getOptions()))return i;throw ys.create("already-initialized")}return t.initialize({options:e})}function gj(n,e,t,r){n=mi(n),oj(QE,s1[n.app.options.appId],e,t,r).catch(i=>Qo.error(i))}const f4="@firebase/analytics",d4="0.10.16";function mj(){Dl(new Xs(cm,(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();return dj(r,i,t)},"PUBLIC")),Dl(new Xs("analytics-internal",n,"PRIVATE")),Xo(f4,d4),Xo(f4,d4,"esm2017");function n(e){try{const t=e.getProvider(cm).getImmediate();return{logEvent:(r,i,a)=>gj(t,r,i,a)}}catch(t){throw ys.create("interop-component-reg-failed",{reason:t})}}}mj();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZE="firebasestorage.googleapis.com",vj="storageBucket",yj=2*60*1e3,xj=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hc extends Qs{constructor(e,t,r=0){super(Gv(e),`Firebase Storage: ${t} (${Gv(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,hc.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Gv(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var cc;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(cc||(cc={}));function Gv(n){return"storage/"+n}function bj(){const n="An unknown error occurred, please check the error payload for server response.";return new hc(cc.UNKNOWN,n)}function wj(){return new hc(cc.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function _j(){return new hc(cc.CANCELED,"User canceled the upload/download.")}function Aj(n){return new hc(cc.INVALID_URL,"Invalid URL '"+n+"'.")}function Sj(n){return new hc(cc.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function h4(n){return new hc(cc.INVALID_ARGUMENT,n)}function JE(){return new hc(cc.APP_DELETED,"The Firebase app was deleted.")}function Ej(n){return new hc(cc.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rl{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=Rl.makeFromUrl(e,t)}catch{return new Rl(e,"")}if(r.path==="")return r;throw Sj(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)";function a(P){P.path.charAt(P.path.length-1)==="/"&&(P.path_=P.path_.slice(0,-1))}const o="(/(.*))?$",s=new RegExp("^gs://"+i+o,"i"),c={bucket:1,path:3};function f(P){P.path_=decodeURIComponent(P.path)}const d="v[A-Za-z0-9_]+",p=t.replace(/[.]/g,"\\."),g="(/([^?#]*).*)?$",m=new RegExp(`^https?://${p}/${d}/b/${i}/o${g}`,"i"),x={bucket:1,path:3},_=t===ZE?"(?:storage.googleapis.com|storage.cloud.google.com)":t,C="([^?#]*)",S=new RegExp(`^https?://${_}/${i}/${C}`,"i"),M=[{regex:s,indices:c,postModify:a},{regex:m,indices:x,postModify:f},{regex:S,indices:{bucket:1,path:2},postModify:f}];for(let P=0;P<M.length;P++){const Y=M[P],z=Y.regex.exec(e);if(z){const F=z[Y.indices.bucket];let I=z[Y.indices.path];I||(I=""),r=new Rl(F,I),Y.postModify(r);break}}if(r==null)throw Aj(e);return r}}class Cj{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ij(n,e,t){let r=1,i=null,a=null,o=!1,s=0;function c(){return s===2}let f=!1;function d(...C){f||(f=!0,e.apply(null,C))}function p(C){i=setTimeout(()=>{i=null,n(m,c())},C)}function g(){a&&clearTimeout(a)}function m(C,...S){if(f){g();return}if(C){g(),d.call(null,C,...S);return}if(c()||o){g(),d.call(null,C,...S);return}r<64&&(r*=2);let M;s===1?(s=2,M=0):M=(r+Math.random())*1e3,p(M)}let x=!1;function _(C){x||(x=!0,g(),!f&&(i!==null?(C||(s=2),clearTimeout(i),p(0)):C||(s=1)))}return p(0),a=setTimeout(()=>{o=!0,_(!0)},t),_}function Tj(n){n(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rj(n){return n!==void 0}function p4(n,e,t,r){if(r<e)throw h4(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw h4(`Invalid value for '${n}'. Expected ${t} or less.`)}function Nj(n){const e=encodeURIComponent;let t="?";for(const r in n)if(n.hasOwnProperty(r)){const i=e(r)+"="+e(n[r]);t=t+i+"&"}return t=t.slice(0,-1),t}var um;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(um||(um={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dj(n,e){const t=n>=500&&n<600,i=[408,429].indexOf(n)!==-1,a=e.indexOf(n)!==-1;return t||i||a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oj{constructor(e,t,r,i,a,o,s,c,f,d,p,g=!0,m=!1){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=o,this.callback_=s,this.errorCallback_=c,this.timeout_=f,this.progressCallback_=d,this.connectionFactory_=p,this.retry=g,this.isUsingEmulator=m,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((x,_)=>{this.resolve_=x,this.reject_=_,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new ig(!1,null,!0));return}const a=this.connectionFactory_();this.pendingConnection_=a;const o=s=>{const c=s.loaded,f=s.lengthComputable?s.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,f)};this.progressCallback_!==null&&a.addUploadProgressListener(o),a.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&a.removeUploadProgressListener(o),this.pendingConnection_=null;const s=a.getErrorCode()===um.NO_ERROR,c=a.getStatus();if(!s||Dj(c,this.additionalRetryCodes_)&&this.retry){const d=a.getErrorCode()===um.ABORT;r(!1,new ig(!1,null,d));return}const f=this.successCodes_.indexOf(c)!==-1;r(!0,new ig(f,a))})},t=(r,i)=>{const a=this.resolve_,o=this.reject_,s=i.connection;if(i.wasSuccessCode)try{const c=this.callback_(s,s.getResponse());Rj(c)?a(c):a()}catch(c){o(c)}else if(s!==null){const c=bj();c.serverResponse=s.getErrorText(),this.errorCallback_?o(this.errorCallback_(s,c)):o(c)}else if(i.canceled){const c=this.appDelete_?JE():_j();o(c)}else{const c=wj();o(c)}};this.canceled_?t(!1,new ig(!1,null,!0)):this.backoffId_=Ij(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&Tj(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class ig{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function kj(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function Lj(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function Pj(n,e){e&&(n["X-Firebase-GMPID"]=e)}function Mj(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function jj(n,e,t,r,i,a,o=!0,s=!1){const c=Nj(n.urlParams),f=n.url+c,d=Object.assign({},n.headers);return Pj(d,e),kj(d,t),Lj(d,a),Mj(d,r),new Oj(f,n.method,d,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,o,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bj(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function Fj(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fm{constructor(e,t){this._service=e,t instanceof Rl?this._location=t:this._location=Rl.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new fm(e,t)}get root(){const e=new Rl(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Fj(this._location.path)}get storage(){return this._service}get parent(){const e=Bj(this._location.path);if(e===null)return null;const t=new Rl(this._location.bucket,e);return new fm(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw Ej(e)}}function g4(n,e){const t=e==null?void 0:e[vj];return t==null?null:Rl.makeFromBucketSpec(t,n)}function Uj(n,e,t,r={}){n.host=`${e}:${t}`;const i=Fh(e);i&&(Gx(`https://${n.host}`),Yx("Storage",!0)),n._isUsingEmulator=!0,n._protocol=i?"https":"http";const{mockUserToken:a}=r;a&&(n._overrideAuthToken=typeof a=="string"?a:a8(a,n.app.options.projectId))}class zj{constructor(e,t,r,i,a,o=!1){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=a,this._isUsingEmulator=o,this._bucket=null,this._host=ZE,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=yj,this._maxUploadRetryTime=xj,this._requests=new Set,i!=null?this._bucket=Rl.makeFromBucketSpec(i,this._host):this._bucket=g4(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Rl.makeFromBucketSpec(this._url,e):this._bucket=g4(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){p4("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){p4("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(gs(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new fm(this,e)}_makeRequest(e,t,r,i,a=!0){if(this._deleted)return new Cj(JE());{const o=jj(e,this._appId,r,i,t,this._firebaseVersion,a,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,t){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,i).getPromise()}}const m4="@firebase/storage",v4="0.13.12";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eC="storage";function Vj(n=km(),e){n=mi(n);const r=wf(n,eC).getImmediate({identifier:e}),i=n8("storage");return i&&qj(r,...i),r}function qj(n,e,t,r={}){Uj(n,e,t,r)}function Hj(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new zj(t,r,i,e,bd)}function Wj(){Dl(new Xs(eC,Hj,"PUBLIC").setMultipleInstances(!0)),Xo(m4,v4,""),Xo(m4,v4,"esm2017")}Wj();const $j={apiKey:"AIzaSyD2okbjcvN3V4Qpd4deo59qZZNNRBIWX58",authDomain:"gmach-inventory-system.firebaseapp.com",projectId:"gmach-inventory-system",storageBucket:"gmach-inventory-system.appspot.com",messagingSenderId:"687472851540",appId:"1:687472851540:web:f846506cccaaefc1e74bc1",measurementId:"G-ZM8S3K7E2V"},s2=d8($j);hj(s2);const A1=zO(s2),wt=BP(s2);Vj(s2);const tC=le.createContext(),nC=({children:n})=>{const[e,t]=le.useState(null),[r,i]=le.useState(!0);return le.useEffect(()=>{const a=RD(A1,async s=>{if(s&&s.emailVerified){const c=await Ph(rr(wt,"users",s.uid));if(c.exists()){const f=c.data();t({uid:s.uid,email:s.email,username:f.username,role:f.role})}}else t(null)});return(async()=>{const s=await Ph(rr(wt,"settings","onlineOrdering"));if(s.exists()){const c=s.data();i(c.enabled===!0)}})(),()=>a()},[]),v.jsx(tC.Provider,{value:{user:e,setUser:t,onlineOrderingEnabled:r,setOnlineOrderingEnabled:i},children:n})},Zo=()=>le.useContext(tC);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gj=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Yj=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()),y4=n=>{const e=Yj(n);return e.charAt(0).toUpperCase()+e.slice(1)},rC=(...n)=>n.filter((e,t,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===t).join(" ").trim(),Xj=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Kj={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qj=le.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:i="",children:a,iconNode:o,...s},c)=>le.createElement("svg",{ref:c,...Kj,width:e,height:e,stroke:n,strokeWidth:r?Number(t)*24/Number(e):t,className:rC("lucide",i),...!a&&!Xj(s)&&{"aria-hidden":"true"},...s},[...o.map(([f,d])=>le.createElement(f,d)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xn=(n,e)=>{const t=le.forwardRef(({className:r,...i},a)=>le.createElement(Qj,{ref:a,iconNode:e,className:rC(`lucide-${Gj(y4(n))}`,`lucide-${n}`,r),...i}));return t.displayName=y4(n),t};/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zj=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],Jj=xn("arrow-right",Zj);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eB=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]],tB=xn("ban",eB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nB=[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]],rB=xn("banknote",nB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iB=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],oc=xn("bell",iB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aB=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],uc=xn("calendar",aB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oB=[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]],sB=xn("car",oB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lB=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],cB=xn("chart-column",lB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uB=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],iC=xn("check",uB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fB=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],dB=xn("chevron-down",fB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hB=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],H1=xn("chevron-left",hB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pB=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],W1=xn("chevron-right",pB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gB=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],mB=xn("chevron-up",gB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vB=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],yB=xn("circle-alert",vB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xB=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],xf=xn("circle-check-big",xB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bB=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],$1=xn("circle-x",bB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wB=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"m9 14 2 2 4-4",key:"df797q"}]],x4=xn("clipboard-check",wB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _B=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],gd=xn("clock",_B);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AB=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],SB=xn("copy",AB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EB=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],CB=xn("download",EB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IB=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]],X5=xn("ellipsis",IB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TB=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],RB=xn("eye-off",TB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NB=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],l2=xn("eye",NB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DB=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],OB=xn("info",DB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kB=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],LB=xn("mail",kB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PB=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],aC=xn("map-pin",PB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MB=[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]],jB=xn("map",MB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BB=[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]],FB=xn("message-circle",BB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UB=[["path",{d:"m14 10 7-7",key:"oa77jy"}],["path",{d:"M20 10h-6V4",key:"mjg0md"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M4 14h6v6",key:"rmj7iw"}]],zB=xn("minimize-2",UB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VB=[["path",{d:"M5 12h14",key:"1ays0h"}]],qB=xn("minus",VB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HB=[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]],WB=xn("navigation",HB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $B=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],Gs=xn("package",$B);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GB=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],id=xn("phone",GB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YB=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],oC=xn("plus",YB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XB=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],c2=xn("save",XB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KB=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],lx=xn("search",KB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QB=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],ZB=xn("smartphone",QB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JB=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],K5=xn("square-pen",JB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eF=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],Q5=xn("trash-2",eF);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tF=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],sC=xn("triangle-alert",tF);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nF=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],lC=xn("user",nF);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rF=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],uu=xn("x",rF),iF=()=>{const{user:n,setUser:e}=Zo(),t=Rm(),r=su(),[i,a]=le.useState(!1),[o,s]=le.useState(null),[c,f]=le.useState(null),[d,p]=le.useState(!1);le.useEffect(()=>{const U=rr(wt,"settings","onlineOrdering"),H=q1(U,te=>{te.exists()&&s(te.data().enabled)},te=>{console.error("    :",te)});return()=>H()},[]),le.useEffect(()=>{const U=()=>{f(window.innerWidth<=768)};return U(),window.addEventListener("resize",U),()=>window.removeEventListener("resize",U)},[]);const g=()=>{p(!0)},m=async()=>{try{await ND(A1),e(null),p(!1),t("/login")}catch(U){alert(" : "+U.message)}},x=()=>{p(!1)},_=()=>{a(!1)},C=U=>{switch(U){case"MainAdmin":return" ";case"GmachAdmin":return" ";default:return""}},S=U=>r.pathname===U,k=U=>({...z,backgroundColor:S(U)?"#0056b3":"transparent",color:S(U)?"white":"#0056b3",borderRadius:S(U)?"6px":"0",fontWeight:S(U)?"600":"500",transition:"all 0.3s ease"}),M=()=>!n||n.role==="User",P=()=>!n||n.role==="User";if(c===null)return null;const Y={backgroundColor:"white",padding:"10px 0",direction:"rtl",borderBottom:"1px solid rgba(255, 255, 255, 0.2)",position:"relative",zIndex:1e3,boxShadow:"0 2px 10px rgba(0, 0, 0, 0.1)"},z={padding:"12px 16px",textDecoration:"none",color:"#0056b3",fontWeight:"500",fontSize:"16px",display:"block"},F={position:"absolute",top:"10px",left:c?"20px":"auto",right:c?"auto":"20px",display:"flex",alignItems:"center",gap:"10px",fontWeight:"bold",color:"#333"},I={backgroundColor:"#e74c3c",color:"white",border:"none",padding:"5px 10px",borderRadius:"4px",cursor:"pointer",fontSize:"14px"},T={position:"fixed",top:0,right:0,bottom:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.3)",zIndex:999},j={position:"fixed",top:0,right:i?0:"-70%",height:"100%",width:"70%",backgroundColor:"#ffffff",background:"#ffffff",backgroundImage:"none",boxShadow:"0 0 12px rgba(0,0,0,0.25)",padding:"20px",display:"flex",flexDirection:"column",gap:"10px",transition:"right 0.3s ease",zIndex:1e3},N={display:"flex",justifyContent:"center",gap:"10px",padding:"10px 0"},R={position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e4},D={backgroundColor:"white",padding:"20px",borderRadius:"8px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)",textAlign:"center",maxWidth:"300px",width:"90%"},L={backgroundColor:"#e74c3c",color:"white",border:"none",padding:"8px 16px",borderRadius:"4px",cursor:"pointer",margin:"0 5px",fontSize:"14px"},G={backgroundColor:"#6c757d",color:"white",border:"none",padding:"8px 16px",borderRadius:"4px",cursor:"pointer",margin:"0 5px",fontSize:"14px"};return v.jsxs(v.Fragment,{children:[v.jsx("style",{children:`
          .mobile-sidebar-force-white {
            background: white !important;
            background-color: white !important;
            background-image: none !important;
            backdrop-filter: none !important;
          }
        `}),v.jsxs("div",{style:Y,children:[c&&v.jsx("button",{onClick:()=>a(!0),style:{fontSize:"24px",background:"none",border:"none",cursor:"pointer",padding:"0 1rem"},children:""}),!c&&v.jsxs("div",{style:N,children:[v.jsx(Rn,{to:"/",style:k("/"),children:" "}),P()&&v.jsx(Rn,{to:"/about",style:k("/about"),children:""}),v.jsx(Rn,{to:"/catalog",style:k("/catalog"),children:" "}),!n&&v.jsx(Rn,{to:"/borrowing-guidelines",style:k("/borrowing-guidelines"),children:" "}),(n==null?void 0:n.role)==="User"&&v.jsxs(v.Fragment,{children:[v.jsx(Rn,{to:"/my-orders",style:k("/my-orders"),children:" "}),o&&v.jsx(Rn,{to:"/request",style:k("/request"),children:" "}),v.jsx(Rn,{to:"/borrowing-guidelines",style:k("/borrowing-guidelines"),children:" "})]}),((n==null?void 0:n.role)==="GmachAdmin"||(n==null?void 0:n.role)==="MainAdmin")&&v.jsxs(v.Fragment,{children:[v.jsx(Rn,{to:"/new-loan",style:k("/new-loan"),children:" "}),o&&v.jsx(Rn,{to:"/requests",style:k("/requests"),children:" "}),v.jsx(Rn,{to:"/Calendar",style:k("/Calendar"),children:" "}),v.jsx(Rn,{to:"/history",style:k("/history"),children:" "})]}),(n==null?void 0:n.role)==="MainAdmin"&&v.jsxs(v.Fragment,{children:[v.jsx(Rn,{to:"/manage-product",style:k("/manage-product"),children:" "}),v.jsx(Rn,{to:"/manage-users",style:k("/manage-users"),children:" "}),v.jsx(Rn,{to:"/alerts",style:k("/alerts"),children:" "})]}),((n==null?void 0:n.role)==="GmachAdmin"||(n==null?void 0:n.role)==="MainAdmin")&&v.jsx(Rn,{to:"/borrowing-guidelines",style:k("/borrowing-guidelines"),children:" "}),M()&&v.jsx(Rn,{to:"/donations",style:k("/donations"),children:""}),!n&&v.jsxs(v.Fragment,{children:[v.jsx(Rn,{to:"/login",style:{...k("/login"),marginRight:"20px",backgroundColor:"#2b6cb0",color:"white",borderRadius:"6px",fontWeight:"600"},children:""}),v.jsx(Rn,{to:"/register",style:{...k("/register"),backgroundColor:"transparent",color:"#2b6cb0",border:"2px solid #2b6cb0",borderRadius:"6px",fontWeight:"600"},children:""})]})]}),i&&c&&v.jsxs(v.Fragment,{children:[v.jsx("div",{style:T,onClick:_}),v.jsxs("div",{style:j,className:"mobile-sidebar-force-white",children:[v.jsx(Rn,{to:"/",style:k("/"),onClick:_,children:" "}),P()&&v.jsx(Rn,{to:"/about",style:k("/about"),onClick:_,children:""}),v.jsx(Rn,{to:"/catalog",style:k("/catalog"),onClick:_,children:" "}),!n&&v.jsx(Rn,{to:"/borrowing-guidelines",style:k("/borrowing-guidelines"),onClick:_,children:" "}),(n==null?void 0:n.role)==="User"&&v.jsxs(v.Fragment,{children:[v.jsx(Rn,{to:"/my-orders",style:k("/my-orders"),onClick:_,children:" "}),o&&v.jsx(Rn,{to:"/request",style:k("/request"),onClick:_,children:" "}),v.jsx(Rn,{to:"/borrowing-guidelines",style:k("/borrowing-guidelines"),onClick:_,children:" "})]}),((n==null?void 0:n.role)==="GmachAdmin"||(n==null?void 0:n.role)==="MainAdmin")&&v.jsxs(v.Fragment,{children:[v.jsx(Rn,{to:"/new-loan",style:k("/new-loan"),onClick:_,children:" "}),o&&v.jsx(Rn,{to:"/requests",style:k("/requests"),onClick:_,children:" "}),v.jsx(Rn,{to:"/Calendar",style:k("/Calendar"),onClick:_,children:" "}),v.jsx(Rn,{to:"/history",style:k("/history"),onClick:_,children:" "})]}),(n==null?void 0:n.role)==="MainAdmin"&&v.jsxs(v.Fragment,{children:[v.jsx(Rn,{to:"/manage-product",style:k("/manage-product"),onClick:_,children:" "}),v.jsx(Rn,{to:"/manage-users",style:k("/manage-users"),onClick:_,children:" "}),v.jsx(Rn,{to:"/alerts",style:k("/alerts"),onClick:_,children:" "})]}),((n==null?void 0:n.role)==="GmachAdmin"||(n==null?void 0:n.role)==="MainAdmin")&&v.jsx(Rn,{to:"/borrowing-guidelines",style:k("/borrowing-guidelines"),onClick:_,children:" "}),M()&&v.jsx(Rn,{to:"/donations",style:k("/donations"),onClick:_,children:""}),!n&&v.jsxs("div",{style:{marginTop:"20px",paddingTop:"20px",borderTop:"1px solid #e2e8f0"},children:[v.jsx(Rn,{to:"/login",style:{...k("/login"),backgroundColor:"#2b6cb0",color:"white",borderRadius:"6px",fontWeight:"600",textAlign:"center",marginBottom:"10px"},onClick:_,children:""}),v.jsx(Rn,{to:"/register",style:{...k("/register"),backgroundColor:"transparent",color:"#2b6cb0",border:"2px solid #2b6cb0",borderRadius:"6px",fontWeight:"600",textAlign:"center"},onClick:_,children:""})]})]})]}),n&&v.jsxs("div",{style:F,children:[" ",n.username," (",C(n.role),")",v.jsx("button",{style:I,onClick:g,children:""})]})]}),d&&v.jsx("div",{style:R,children:v.jsxs("div",{style:D,children:[v.jsx("h3",{style:{marginBottom:"15px",color:"#333"},children:" "}),v.jsx("p",{style:{marginBottom:"20px",color:"#666"},children:"    ?"}),v.jsxs("div",{children:[v.jsx("button",{style:L,onClick:m,children:", "}),v.jsx("button",{style:G,onClick:x,children:""})]})]})})]})},aF="/assets/GmachPic-D1t0vS9u.jpeg",oF=()=>{const{user:n}=Zo(),[e,t]=le.useState(!1),[r,i]=le.useState(!1),[a,o]=le.useState("phone"),[s,c]=le.useState("fade-in"),f=le.useRef(null),d="054-257-5886",p="0542575886",g="054-4473-388",m="0544473388",x="972542575886";if(le.useEffect(()=>{const z=F=>{f.current&&!f.current.contains(F.target)&&e&&k()};return e&&document.addEventListener("mousedown",z),()=>{document.removeEventListener("mousedown",z)}},[e]),le.useEffect(()=>{const z=()=>{e&&k()};return window.addEventListener("hoursBubbleOpened",z),window.addEventListener("navigationBubbleOpened",z),()=>{window.removeEventListener("hoursBubbleOpened",z),window.removeEventListener("navigationBubbleOpened",z)}},[e]),n&&n.role!=="User")return null;const _=()=>{window.open(`tel:${p}`,"_self")},C=()=>{window.open(`tel:${m}`,"_self")},S=()=>{const z=encodeURIComponent(",       "),F=`https://wa.me/${x}?text=${z}`;window.open(F,"_blank")},k=()=>{i(!0),c("fade-out"),setTimeout(()=>{o("phone"),c("fade-in")},150),setTimeout(()=>{t(!1),i(!1)},250)},M=()=>{e?k():(window.dispatchEvent(new CustomEvent("contactBubbleOpened")),t(!0),c("fade-out"),setTimeout(()=>{o("close"),c("fade-in")},150))},P={contactBubble:{position:"fixed",bottom:"160px",right:"20px",zIndex:900,fontFamily:"Assistant, Heebo, -apple-system, BlinkMacSystemFont, Segoe UI, Roboto, sans-serif"},contactBubbleMobile:{position:"fixed",bottom:"160px",right:"20px",left:"auto",zIndex:900,fontFamily:"Assistant, Heebo, -apple-system, BlinkMacSystemFont, Segoe UI, Roboto, sans-serif"},bubbleMain:{background:"linear-gradient(135deg, #2563eb 0%, #3b82f6 100%)",color:"white",borderRadius:"50px",boxShadow:"0 8px 25px rgba(37, 99, 235, 0.3)",cursor:"pointer",transition:"all 0.4s cubic-bezier(0.4, 0, 0.2, 1)",border:"none",display:"flex",alignItems:"center",gap:"8px",padding:"12px 20px",fontWeight:"500",fontSize:"14px",overflow:"hidden",position:"relative",minWidth:"56px",minHeight:"56px"},bubbleMainCollapsed:{width:"56px",height:"56px",padding:"0",justifyContent:"center",borderRadius:"50%"},bubbleContent:{display:"flex",alignItems:"center",gap:"8px",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},bubbleContentFadeOut:{opacity:0,transform:"scale(0.8)"},expandedMenu:{position:"absolute",bottom:"70px",right:"70px",background:"white",borderRadius:"12px",boxShadow:"0 10px 40px rgba(0, 0, 0, 0.15)",padding:"16px",minWidth:"260px",border:"1px solid #e5e7eb",animation:"slideUp 0.3s ease"},expandedMenuClosing:{animation:"slideDown 0.25s ease forwards"},menuItem:{display:"flex",alignItems:"center",gap:"12px",padding:"12px",borderRadius:"8px",cursor:"pointer",transition:"background-color 0.2s",border:"none",width:"100%",textAlign:"right",background:"none",color:"#374151",fontSize:"14px",marginBottom:"4px"},menuItemPhone:{color:"#2563eb"},menuItemPhone2:{color:"#7c3aed"},menuItemWhatsapp:{color:"#10b981"},menuHeader:{textAlign:"center",marginBottom:"12px",color:"#1f2937",fontWeight:"600",fontSize:"16px"}},Y=window.innerWidth<=768;return v.jsxs(v.Fragment,{children:[v.jsx("style",{children:`
          @keyframes slideUp {
            from {
              opacity: 0;
              transform: translateY(10px) scale(0.95);
            }
            to {
              opacity: 1;
              transform: translateY(0) scale(1);
            }
          }

          @keyframes slideDown {
            from {
              opacity: 1;
              transform: translateY(0) scale(1);
            }
            to {
              opacity: 0;
              transform: translateY(10px) scale(0.95);
            }
          }

          @keyframes pulse {
            0% {
              box-shadow: 0 8px 25px rgba(37, 99, 235, 0.3);
            }
            50% {
              box-shadow: 0 8px 25px rgba(37, 99, 235, 0.5);
            }
            100% {
              box-shadow: 0 8px 25px rgba(37, 99, 235, 0.3);
            }
          }

          .contact-bubble-pulse {
            animation: pulse 2s infinite;
          }

          .contact-bubble-hover:hover {
            transform: translateY(-2px);
            box-shadow: 0 12px 35px rgba(37, 99, 235, 0.4);
            background: linear-gradient(135deg, #1d4ed8 0%, #2563eb 100%);
          }

          .menu-item-hover:hover {
            background-color: #f3f4f6;
          }
        `}),v.jsxs("div",{ref:f,style:Y?P.contactBubbleMobile:P.contactBubble,children:[(e||r)&&v.jsxs("div",{style:{...P.expandedMenu,...r?P.expandedMenuClosing:{}},dir:"rtl",children:[v.jsx("div",{style:P.menuHeader,children:" "}),v.jsxs("button",{onClick:_,style:{...P.menuItem,...P.menuItemPhone},className:"menu-item-hover",children:[v.jsx(id,{size:20}),v.jsxs("div",{children:[v.jsx("div",{style:{fontWeight:"500"},children:" "}),v.jsx("div",{style:{fontSize:"12px",color:"#6b7280"},children:d})]})]}),v.jsxs("button",{onClick:C,style:{...P.menuItem,...P.menuItemPhone2},className:"menu-item-hover",children:[v.jsx(id,{size:20}),v.jsxs("div",{children:[v.jsx("div",{style:{fontWeight:"500"},children:' "'}),v.jsx("div",{style:{fontSize:"12px",color:"#6b7280"},children:g})]})]}),v.jsxs("button",{onClick:S,style:{...P.menuItem,...P.menuItemWhatsapp},className:"menu-item-hover",children:[v.jsx(FB,{size:20}),v.jsxs("div",{children:[v.jsx("div",{style:{fontWeight:"500"},children:"WhatsApp"}),v.jsx("div",{style:{fontSize:"12px",color:"#6b7280"},children:"  "})]})]})]}),v.jsx("button",{onClick:M,style:{...P.bubbleMain,...e?{}:P.bubbleMainCollapsed},className:`contact-bubble-hover ${e?"":"contact-bubble-pulse"}`,"aria-label":" ",children:v.jsx("div",{style:{...P.bubbleContent,...s==="fade-out"?P.bubbleContentFadeOut:{}},children:a==="close"?v.jsxs(v.Fragment,{children:[v.jsx(uu,{size:20}),v.jsx("span",{children:""})," "]}):v.jsx(id,{size:24})})})]})]})},sF=()=>{const{user:n}=Zo(),[e,t]=le.useState(!1),[r,i]=le.useState(!1),[a,o]=le.useState("clock"),[s,c]=le.useState("fade-in"),f=le.useRef(null);le.useEffect(()=>{const x=_=>{f.current&&!f.current.contains(_.target)&&e&&d()};return e&&document.addEventListener("mousedown",x),()=>{document.removeEventListener("mousedown",x)}},[e]),le.useEffect(()=>{const x=()=>{e&&d()};return window.addEventListener("contactBubbleOpened",x),window.addEventListener("navigationBubbleOpened",x),()=>{window.removeEventListener("contactBubbleOpened",x),window.removeEventListener("navigationBubbleOpened",x)}},[e]);const d=()=>{i(!0),c("fade-out"),setTimeout(()=>{o("clock"),c("fade-in")},150),setTimeout(()=>{t(!1),i(!1)},250)},p=()=>{e?d():(window.dispatchEvent(new CustomEvent("hoursBubbleOpened")),t(!0),c("fade-out"),setTimeout(()=>{o("close"),c("fade-in")},150))};if(n&&n.role!=="User")return null;const g={hoursBubble:{position:"fixed",bottom:"20px",right:"20px",zIndex:900,fontFamily:"Assistant, Heebo, -apple-system, BlinkMacSystemFont, Segoe UI, Roboto, sans-serif"},bubbleMain:{background:"linear-gradient(135deg, #10b981 0%, #059669 100%)",color:"white",borderRadius:"50px",boxShadow:"0 8px 25px rgba(16, 185, 129, 0.3)",cursor:"pointer",transition:"all 0.4s cubic-bezier(0.4, 0, 0.2, 1)",border:"none",display:"flex",alignItems:"center",gap:"8px",padding:"16px 24px",fontWeight:"600",fontSize:"16px",overflow:"hidden",position:"relative",whiteSpace:"nowrap",minWidth:"160px"},bubbleContent:{display:"flex",alignItems:"center",gap:"8px",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},bubbleContentFadeOut:{opacity:0,transform:"scale(0.8)"},expandedMenu:{position:"absolute",bottom:"70px",right:"130px",background:"white",borderRadius:"16px",boxShadow:"0 15px 40px rgba(0, 0, 0, 0.2)",padding:"24px",minWidth:"320px",border:"3px solid #e5e7eb",color:"#1f2937",textAlign:"center",zIndex:901},expandedMenuClosing:{animation:"slideDown 0.25s ease forwards"},menuHeader:{textAlign:"center",marginBottom:"16px",color:"#1f2937",fontWeight:"800",fontSize:"18px",display:"flex",alignItems:"center",justifyContent:"center",gap:"10px"},hoursContent:{lineHeight:"1.7",textAlign:"center"},hoursSection:{marginBottom:"12px",paddingBottom:"12px",borderBottom:"2px solid #e5e7eb"},hoursSectionLast:{marginBottom:"0",paddingBottom:"0",borderBottom:"none"},hoursTitle:{fontWeight:"700",color:"#374151",marginBottom:"6px",fontSize:"16px"},hoursDays:{color:"#6b7280",fontSize:"15px",marginBottom:"4px"},hoursTime:{fontWeight:"700",color:"#059669",fontSize:"16px"},hoursTimeDetail:{fontSize:"15px",marginBottom:"4px"}},m=window.innerWidth<=768;return v.jsxs(v.Fragment,{children:[v.jsx("style",{children:`
          @keyframes slideUp {
            from {
              opacity: 0;
              transform: translateY(10px) scale(0.95);
            }
            to {
              opacity: 1;
              transform: translateY(0) scale(1);
            }
          }

          @keyframes slideDown {
            from {
              opacity: 1;
              transform: translateY(0) scale(1);
            }
            to {
              opacity: 0;
              transform: translateY(10px) scale(0.95);
            }
          }

          @keyframes pulse {
            0% {
              box-shadow: 0 8px 25px rgba(16, 185, 129, 0.3);
            }
            50% {
              box-shadow: 0 8px 25px rgba(16, 185, 129, 0.5);
            }
            100% {
              box-shadow: 0 8px 25px rgba(16, 185, 129, 0.3);
            }
          }

          .hours-bubble-pulse {
            animation: pulse 2s infinite;
          }

          .hours-bubble-hover:hover {
            transform: translateY(-2px);
            box-shadow: 0 12px 35px rgba(16, 185, 129, 0.4);
            background: linear-gradient(135deg, #059669 0%, #047857 100%);
          }

          .expanded-menu-animation {
            animation: slideUp 0.3s ease;
          }

          @media (max-width: 768px) {
            .hours-bubble-mobile {
              bottom: 20px !important;
              right: 20px !important;
            }
            
            .expanded-menu-hours-mobile {
              width: 300px !important;
              right: 120px !important; /*     */
              bottom: 65px !important;
              padding: 20px !important;
              border-radius: 12px !important;
              min-width: 280px !important;
            }
            
            .bubble-main-hours-mobile {
              padding: 12px 18px !important;
              font-size: 14px !important;
              min-height: 48px !important;
            }
          }
        `}),v.jsxs("div",{ref:f,style:g.hoursBubble,className:m?"hours-bubble-mobile":"",children:[(e||r)&&v.jsxs("div",{style:{...g.expandedMenu,...r?g.expandedMenuClosing:{}},className:`expanded-menu-animation ${m?"expanded-menu-hours-mobile":""}`,dir:"rtl",children:[v.jsx("div",{style:g.menuHeader,children:"  "}),v.jsxs("div",{style:g.hoursContent,children:[v.jsxs("div",{style:{...g.hoursSection},children:[v.jsx("div",{style:g.hoursTitle,children:" "}),v.jsx("div",{style:g.hoursDays,children:", , "}),v.jsx("div",{style:g.hoursTime,children:"21:00 - 20:30"})]}),v.jsxs("div",{style:{...g.hoursSection,...g.hoursSectionLast},children:[v.jsx("div",{style:g.hoursTitle,children:" "}),v.jsxs("div",{style:g.hoursTimeDetail,children:[v.jsx("span",{style:{fontWeight:"700"},children:":"}),v.jsx("span",{style:{color:"#059669",fontWeight:"700",marginRight:"10px"},children:"21:30 - 21:00"})]}),v.jsxs("div",{style:g.hoursTimeDetail,children:[v.jsx("span",{style:{fontWeight:"700"},children:":"}),v.jsx("span",{style:{color:"#059669",fontWeight:"700",marginRight:"10px"},children:"20:30 - 20:00"})]})]})]})]}),v.jsx("button",{onClick:p,style:g.bubbleMain,className:`hours-bubble-hover ${m?"bubble-main-hours-mobile":""} ${e?"":"hours-bubble-pulse"}`,"aria-label":" ",children:v.jsx("div",{style:{...g.bubbleContent,...s==="fade-out"?g.bubbleContentFadeOut:{}},children:a==="close"?v.jsxs(v.Fragment,{children:[v.jsx(uu,{size:20}),e&&v.jsx("span",{children:""})]}):v.jsxs(v.Fragment,{children:[v.jsx(gd,{size:20}),v.jsx("span",{children:" "})]})})})]})]})},lF=()=>{const{user:n}=Zo(),[e,t]=le.useState(!1),[r,i]=le.useState(!1),[a,o]=le.useState("navigation"),[s,c]=le.useState("fade-in"),f=le.useRef(null);le.useEffect(()=>{const C=S=>{f.current&&!f.current.contains(S.target)&&e&&g()};return e&&document.addEventListener("mousedown",C),()=>{document.removeEventListener("mousedown",C)}},[e]),le.useEffect(()=>{const C=()=>{e&&g()};return window.addEventListener("contactBubbleOpened",C),window.addEventListener("hoursBubbleOpened",C),()=>{window.removeEventListener("contactBubbleOpened",C),window.removeEventListener("navigationBubbleOpened",C)}},[e]);const d=()=>{window.open("https://www.google.com/maps/place/31%C2%B047'20.2%22N+34%C2%B047'59.5%22E/@31.7876206,34.8006596,16.5z/data=!4m4!3m3!8m2!3d31.7889462!4d34.79986?hl=en-US&entry=ttu&g_ep=EgoyMDI1MDYzMC4wIKXMDSoASAFQAw%3D%3D","_blank")},p=()=>{window.open("https://waze.com/ul?ll=31.7889462,34.79986","_blank")},g=()=>{i(!0),c("fade-out"),setTimeout(()=>{o("navigation"),c("fade-in")},150),setTimeout(()=>{t(!1),i(!1)},250)},m=()=>{e?g():(window.dispatchEvent(new CustomEvent("navigationBubbleOpened")),t(!0),c("fade-out"),setTimeout(()=>{o("close"),c("fade-in")},150))};if(n&&n.role!=="User")return null;const x={navigationBubble:{position:"fixed",bottom:"90px",right:"20px",zIndex:900,fontFamily:"Assistant, Heebo, -apple-system, BlinkMacSystemFont, Segoe UI, Roboto, sans-serif"},bubbleMain:{background:"linear-gradient(135deg, #7c3aed 0%, #8b5cf6 100%)",color:"white",borderRadius:"50px",boxShadow:"0 8px 25px rgba(124, 58, 237, 0.3)",cursor:"pointer",transition:"all 0.4s cubic-bezier(0.4, 0, 0.2, 1)",border:"none",display:"flex",alignItems:"center",gap:"8px",padding:"16px 24px",fontWeight:"600",fontSize:"16px",overflow:"hidden",position:"relative",whiteSpace:"nowrap",minWidth:"120px"},bubbleContent:{display:"flex",alignItems:"center",gap:"8px",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},bubbleContentFadeOut:{opacity:0,transform:"scale(0.8)"},expandedMenu:{position:"absolute",bottom:"70px",right:"70px",background:"white",borderRadius:"16px",boxShadow:"0 15px 40px rgba(0, 0, 0, 0.2)",padding:"16px",minWidth:"260px",border:"3px solid #e5e7eb",color:"#1f2937",zIndex:901},expandedMenuClosing:{animation:"slideDown 0.25s ease forwards"},menuItem:{display:"flex",alignItems:"center",gap:"12px",padding:"12px 16px",borderRadius:"12px",cursor:"pointer",transition:"all 0.2s ease",border:"none",width:"100%",textAlign:"right",background:"none",color:"white",fontSize:"14px",marginBottom:"8px",fontWeight:"600",textDecoration:"none"},menuItemGoogleMaps:{background:"linear-gradient(135deg, #3b82f6, #2563eb)",boxShadow:"0 6px 20px rgba(59, 130, 246, 0.3)"},menuItemWaze:{background:"linear-gradient(135deg, #f59e0b, #d97706)",boxShadow:"0 6px 20px rgba(245, 158, 11, 0.3)"},locationInfo:{background:"rgba(255, 255, 255, 0.95)",backdropFilter:"blur(10px)",color:"#374151",padding:"12px 16px",borderRadius:"15px",fontSize:"12px",fontWeight:"600",boxShadow:"0 6px 20px rgba(0, 0, 0, 0.1)",border:"1px solid rgba(255, 255, 255, 0.6)",textAlign:"center",marginTop:"8px"}},_=window.innerWidth<=768;return v.jsxs(v.Fragment,{children:[v.jsx("style",{children:`
          @keyframes slideUp {
            from {
              opacity: 0;
              transform: translateY(10px) scale(0.95);
            }
            to {
              opacity: 1;
              transform: translateY(0) scale(1);
            }
          }

          @keyframes slideDown {
            from {
              opacity: 1;
              transform: translateY(0) scale(1);
            }
            to {
              opacity: 0;
              transform: translateY(10px) scale(0.95);
            }
          }

          @keyframes pulse {
            0% {
              box-shadow: 0 8px 25px rgba(124, 58, 237, 0.3);
            }
            50% {
              box-shadow: 0 8px 25px rgba(124, 58, 237, 0.5);
            }
            100% {
              box-shadow: 0 8px 25px rgba(124, 58, 237, 0.3);
            }
          }

          .navigation-bubble-pulse {
            animation: pulse 2s infinite;
          }

          .navigation-bubble-hover:hover {
            transform: translateY(-2px);
            box-shadow: 0 12px 35px rgba(124, 58, 237, 0.4);
            background: linear-gradient(135deg, #6d28d9 0%, #7c3aed 100%);
          }

          .menu-item-google-hover:hover {
            transform: scale(1.05);
            box-shadow: 0 8px 25px rgba(59, 130, 246, 0.4);
          }

          .menu-item-waze-hover:hover {
            transform: scale(1.05);
            box-shadow: 0 8px 25px rgba(245, 158, 11, 0.4);
          }

          .expanded-menu-navigation {
            animation: slideUp 0.3s ease;
          }

          @media (max-width: 768px) {
            .navigation-bubble-mobile {
              bottom: 90px !important;
              right: 20px !important;
            }
            
            .expanded-menu-mobile {
              width: 240px !important;
              right: 70px !important;
              bottom: 65px !important;
              padding: 14px !important;
              border-radius: 12px !important;
              min-width: 240px !important;
            }
            
            .bubble-main-mobile {
              padding: 12px 18px !important;
              font-size: 14px !important;
              min-height: 48px !important;
            }
          }
        `}),v.jsxs("div",{ref:f,style:x.navigationBubble,className:_?"navigation-bubble-mobile":"",children:[(e||r)&&v.jsxs("div",{style:{...x.expandedMenu,...r?x.expandedMenuClosing:{}},className:`expanded-menu-navigation ${_?"expanded-menu-mobile":""}`,dir:"rtl",children:[v.jsxs("button",{onClick:d,style:{...x.menuItem,...x.menuItemGoogleMaps},className:"menu-item-google-hover",children:[v.jsx(jB,{size:20}),v.jsx("span",{children:" Google Maps"})]}),v.jsxs("button",{onClick:p,style:{...x.menuItem,...x.menuItemWaze},className:"menu-item-waze-hover",children:[v.jsx(sB,{size:20}),v.jsx("span",{children:" Waze"})]}),v.jsx("div",{style:x.locationInfo,children:v.jsx("strong",{children:"  "})})]}),v.jsx("button",{onClick:m,style:x.bubbleMain,className:`navigation-bubble-hover ${_?"bubble-main-mobile":""} ${e?"":"navigation-bubble-pulse"}`,"aria-label":"",children:v.jsx("div",{style:{...x.bubbleContent,...s==="fade-out"?x.bubbleContentFadeOut:{}},children:a==="close"?v.jsxs(v.Fragment,{children:[v.jsx(uu,{size:20}),e&&v.jsx("span",{children:""})]}):v.jsxs(v.Fragment,{children:[v.jsx(WB,{size:20}),v.jsx("span",{children:""})]})})})]})]})},cF=()=>{const[n,e]=le.useState([]),[t,r]=le.useState(new Set),[i,a]=le.useState(!0),[o,s]=le.useState(!1),[c,f]=le.useState(3);le.useEffect(()=>{const P=sessionStorage.getItem("dismissedAlerts");P&&r(new Set(JSON.parse(P)));const Y=Nl(hn(wt,"alerts"),SE("createdAt","desc")),z=q1(Y,F=>{const I=[];F.docs.forEach(T=>{const j={id:T.id,...T.data()};if(j.isActive)if(j.expirationDate){const N=new Date,R=j.expirationDate.toDate?j.expirationDate.toDate():new Date(j.expirationDate);N<=R&&I.push(j)}else I.push(j)}),e(I),a(!1)});return()=>z()},[]),le.useEffect(()=>{const P=()=>{const Y=window.innerWidth<=768;f(Y?2:3)};return P(),window.addEventListener("resize",P),()=>window.removeEventListener("resize",P)},[]);const d=P=>{const Y=new Set([...t,P]);r(Y),sessionStorage.setItem("dismissedAlerts",JSON.stringify([...Y]))},p=()=>{r(new Set),sessionStorage.removeItem("dismissedAlerts")},g=P=>{const Y={filter:"drop-shadow(0 1px 2px rgba(0,0,0,0.1))",flexShrink:0};switch(P){case"warning":return v.jsx(sC,{size:20,style:{...Y,color:"#d97706"}});case"success":return v.jsx(xf,{size:20,style:{...Y,color:"#059669"}});case"info":return v.jsx(OB,{size:20,style:{...Y,color:"#2563eb"}});default:return v.jsx(oc,{size:20,style:{...Y,color:"#6b7280"}})}},m=(P,Y=!1)=>{const z={position:"relative",padding:Y?"12px 16px":"16px 20px",marginBottom:"8px",borderRadius:"12px",display:"flex",alignItems:"flex-start",justifyContent:"space-between",direction:"rtl",fontFamily:'"Assistant", "Heebo", system-ui, sans-serif',fontSize:Y?"14px":"15px",fontWeight:"500",boxShadow:"0 2px 8px rgba(0,0,0,0.08)",border:"1px solid rgba(255,255,255,0.2)",overflow:"hidden",transition:"all 0.2s ease",cursor:"default"},F={warning:{background:"rgba(255, 255, 255, 0.98)",color:"#b45309",borderLeft:"3px solid #f59e0b"},success:{background:"rgba(255, 255, 255, 0.98)",color:"#047857",borderLeft:"3px solid #10b981"},info:{background:"rgba(255, 255, 255, 0.98)",color:"#1d4ed8",borderLeft:"3px solid #3b82f6"},default:{background:"rgba(255, 255, 255, 0.98)",color:"#374151",borderLeft:"3px solid #6b7280"}};return{...z,...F[P]||F.default}},x=P=>{switch(P){case"warning":return"";case"success":return"";case"info":return"";default:return""}},_=n.filter(P=>!t.has(P.id)),C=n.length-_.length;if(i)return v.jsx("div",{style:{position:"sticky",top:0,zIndex:500,height:"0px",overflow:"hidden"}});if(_.length===0&&C>0)return v.jsx("div",{style:{position:"sticky",top:0,zIndex:500,background:"rgba(255, 255, 255, 0.95)",backdropFilter:"blur(10px)",padding:"8px 16px",borderBottom:"1px solid rgba(0,0,0,0.08)",textAlign:"center"},children:v.jsxs("button",{onClick:p,style:{background:"linear-gradient(135deg, #f3f4f6 0%, #e5e7eb 100%)",border:"1px solid #d1d5db",borderRadius:"8px",padding:"8px 16px",cursor:"pointer",fontSize:"13px",fontWeight:"500",color:"#374151",display:"flex",alignItems:"center",gap:"6px",margin:"0 auto",transition:"all 0.2s ease",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},onMouseOver:P=>{P.target.style.background="linear-gradient(135deg, #e5e7eb 0%, #d1d5db 100%)",P.target.style.transform="translateY(-1px)"},onMouseOut:P=>{P.target.style.background="linear-gradient(135deg, #f3f4f6 0%, #e5e7eb 100%)",P.target.style.transform="translateY(0)"},children:[v.jsx(oc,{size:14})," ",C," ",C===1?"":""," ",C===1?"":""]})});if(_.length===0)return null;const S=o?_.slice(0,c):_,k=_.length>c,M=k||C>0;return v.jsxs(v.Fragment,{children:[v.jsx("style",{jsx:!0,children:`
                .alert-container {
                    opacity: 1;
                    transform: translateY(0);
                }
                
                .alert-banner:hover {
                    box-shadow: 0 4px 12px rgba(0,0,0,0.12);
                }
                
                .dismiss-button:hover {
                    background-color: rgba(0,0,0,0.15) !important;
                }
                
                .collapse-button:hover {
                    background-color: rgba(59, 130, 246, 0.1) !important;
                }
                
                /* Mobile optimizations */
                @media (max-width: 768px) {
                    .alert-banner:hover {
                        box-shadow: 0 2px 8px rgba(0,0,0,0.08) !important;
                    }
                }
            `}),v.jsxs("div",{style:{position:"sticky",top:0,zIndex:500,background:"rgba(255, 255, 255, 0.95)",backdropFilter:"blur(10px)",padding:"12px 16px 8px 16px",borderBottom:"1px solid rgba(0,0,0,0.08)",maxHeight:"50vh",overflowY:k&&!o?"auto":"visible"},className:"alert-container",children:[M&&v.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px",padding:"8px 12px",background:"rgba(59, 130, 246, 0.05)",borderRadius:"8px",border:"1px solid rgba(59, 130, 246, 0.1)"},children:[v.jsxs("div",{style:{fontSize:"13px",color:"#2563eb",fontWeight:"600",display:"flex",alignItems:"center",gap:"6px"},children:[v.jsx(oc,{size:14}),_.length,"  ",C>0&&v.jsxs("span",{style:{fontSize:"11px",color:"#6b7280",fontWeight:"400"},children:[" ",C," ",C===1?"":""]})]}),v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",flexWrap:"wrap"},children:[C>0&&v.jsxs("button",{onClick:p,style:{background:"none",border:"1px solid rgba(59, 130, 246, 0.2)",color:"#2563eb",cursor:"pointer",padding:"3px 8px",borderRadius:"4px",fontSize:"11px",fontWeight:"500",transition:"all 0.2s ease",whiteSpace:"nowrap"},onMouseOver:P=>{P.target.style.backgroundColor="rgba(59, 130, 246, 0.1)"},onMouseOut:P=>{P.target.style.backgroundColor="transparent"},title:` ${C}  `,children:["  (",C,")"]}),k&&v.jsx("button",{onClick:()=>s(!o),style:{background:"none",border:"none",color:"#2563eb",cursor:"pointer",padding:"4px",borderRadius:"4px",display:"flex",alignItems:"center",gap:"4px",fontSize:"12px",fontWeight:"500",transition:"background-color 0.2s ease",whiteSpace:"nowrap"},className:"collapse-button",children:o?v.jsxs(v.Fragment,{children:[" ",v.jsx(dB,{size:14})]}):v.jsxs(v.Fragment,{children:["",v.jsx(mB,{size:14})]})})]})]}),S.map((P,Y)=>{const z=k&&Y>=c-1;return v.jsxs("div",{style:m(P.type,z),className:"alert-banner",children:[v.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"12px",flex:1,minWidth:0},children:[v.jsx("div",{style:{padding:"4px 6px",backgroundColor:"rgba(0,0,0,0.04)",borderRadius:"6px",marginTop:"1px"},children:g(P.type)}),v.jsxs("div",{style:{flex:1,minWidth:0},children:[v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:P.title?"6px":"2px",flexWrap:"wrap"},children:[v.jsx("span",{style:{padding:"2px 8px",backgroundColor:"rgba(0,0,0,0.06)",borderRadius:"10px",fontSize:"10px",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.3px"},children:x(P.type)}),P.title&&v.jsx("h3",{style:{margin:0,fontSize:z?"15px":"16px",fontWeight:"600",lineHeight:"1.2"},children:P.title})]}),v.jsx("div",{style:{fontSize:z?"13px":"14px",lineHeight:"1.4",fontWeight:"500",wordBreak:"break-word",color:"inherit"},children:P.message}),!z&&P.createdAt&&v.jsxs("div",{style:{marginTop:"6px",fontSize:"11px",opacity:.7,display:"flex",alignItems:"center",gap:"4px"},children:[v.jsx(gd,{size:11}),P.createdAt.toDate().toLocaleDateString("he-IL",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})]})]})]}),v.jsx("button",{onClick:()=>d(P.id),style:{backgroundColor:"rgba(0,0,0,0.08)",border:"none",borderRadius:"6px",cursor:"pointer",padding:"6px",display:"flex",alignItems:"center",justifyContent:"center",transition:"background-color 0.2s ease",marginTop:"1px",flexShrink:0},className:"dismiss-button",title:" ",children:v.jsx(uu,{size:16,style:{color:"currentColor"}})})]},P.id)}),o&&k&&v.jsxs("div",{style:{textAlign:"center",padding:"8px",fontSize:"12px",color:"#6b7280",backgroundColor:"rgba(0,0,0,0.02)",borderRadius:"6px",marginTop:"4px"},children:[" ",_.length-c," ..."]})]})]})},uF="/assets/1-C0fYk9e0.jpg",fF="/assets/2-D1YHjbfq.jpg",dF="/assets/3-9zdlhfJf.jpg",hF="/assets/4-BAjrNR16.jpg",pF="/assets/5-CswG83Xw.jpg",gF="/assets/6-ChleApYI.jpg",mF="/assets/7-C0oDsTci.jpg",vF="/assets/9-BFtDqp3_.jpg",yF="/assets/10-Dw-XIxLk.jpg",xF="/assets/11-CA5zm9C5.jpg",bF="/assets/12-CI7MWke0.jpg",wF=()=>{const{user:n}=Zo(),e=[uF,fF,dF,hF,pF,gF,mF,vF,yF,xF,bF];return v.jsxs(v.Fragment,{children:[v.jsx(cF,{}),v.jsx("div",{style:{minHeight:"100vh",background:"transparent",width:"100%",overflowX:"hidden"},children:v.jsxs("div",{style:{maxWidth:"1200px",margin:"0 auto",padding:"1rem",width:"100%",boxSizing:"border-box"},children:[v.jsxs("div",{style:{textAlign:"center",marginBottom:"2rem",padding:"0 0.5rem"},className:"fade-in",children:[v.jsx("div",{style:{marginBottom:"1.5rem"},children:v.jsx("img",{src:aF,alt:"  ",style:{margin:"0 auto",height:"clamp(250px, 35vw, 450px)",width:"auto",objectFit:"contain",filter:"drop-shadow(0 15px 35px rgba(0,0,0,0.15))",borderRadius:"20px"}})}),v.jsx("h1",{style:{fontFamily:'"Assistant", "Heebo", system-ui, sans-serif',fontSize:"clamp(28px, 6vw, 52px)",fontWeight:"700",color:"#059669",marginBottom:"1.5rem",textShadow:"0 3px 6px rgba(0,0,0,0.12)",letterSpacing:"0.5px",lineHeight:"1.2",padding:"0 0.5rem"},children:'"  '}),v.jsx("p",{style:{fontFamily:'"Assistant", "Heebo", system-ui, sans-serif',fontSize:"clamp(18px, 3.5vw, 28px)",color:"#374151",maxWidth:"900px",margin:"0 auto",lineHeight:"1.7",fontWeight:"500",padding:"0 1rem"},children:",   , ,   "})]}),v.jsx("div",{style:{marginBottom:"4rem",width:"100%",overflowX:"hidden"},className:"slide-in-left",children:v.jsx("div",{style:{position:"relative",width:"100%",margin:"0 auto",padding:"0 0.5rem"},children:v.jsx("div",{style:{position:"relative",overflow:"hidden",borderRadius:"15px",boxShadow:"0 15px 40px rgba(0,0,0,0.12)",background:"rgba(255,255,255,0.9)",backdropFilter:"blur(10px)",border:"1px solid rgba(255,255,255,0.8)",height:"clamp(250px, 35vw, 400px)",width:"100%",maskImage:"linear-gradient(to right, transparent 0%, black 8%, black 92%, transparent 100%)"},children:v.jsx("div",{style:{display:"flex",height:"100%",animation:"panoramaSlide 45s linear infinite",gap:"clamp(8px, 2vw, 16px)",willChange:"transform"},children:e.concat(e).map((t,r)=>v.jsx("div",{style:{flexShrink:0,width:"clamp(180px, 18vw, 300px)",height:"100%",borderRadius:"12px",overflow:"hidden",boxShadow:"0 4px 16px rgba(0,0,0,0.1)",transition:"transform 0.3s ease"},children:v.jsx("img",{src:t,alt:` ${r%e.length+1}`,style:{width:"100%",height:"100%",objectFit:"cover",display:"block"}})},`img-${r}`))})})})}),v.jsx("div",{className:"fade-in",style:{padding:"0 0.5rem",width:"100%",boxSizing:"border-box"},children:v.jsx("div",{style:{background:"linear-gradient(135deg, rgba(255,255,255,0.95), rgba(255,255,255,0.85))",backdropFilter:"blur(10px)",borderRadius:"15px",boxShadow:"0 10px 25px rgba(0,0,0,0.1)",padding:"clamp(1rem, 3vw, 1.5rem)",border:"1px solid rgba(255,255,255,0.6)",width:"100%",maxWidth:"900px",margin:"0 auto",boxSizing:"border-box"},children:v.jsx("iframe",{src:"https://www.google.com/maps?q=31.7889462,34.79986&output=embed",width:"100%",height:"350",style:{borderRadius:"15px",border:"none",width:"100%",display:"block"},allowFullScreen:"",loading:"lazy",title:' "'})})})]})}),v.jsx("style",{children:`
        * {
          box-sizing: border-box;
        }
        
        body {
          overflow-x: hidden;
        }
        
        @keyframes panoramaSlide {
          0% {
            transform: translateX(0);
          }
          100% {
            transform: translateX(calc(-${e.length} * (clamp(180px, 18vw, 300px) + clamp(8px, 2vw, 16px))));
          }
        }
        
        /*     */
        .fade-in {
          animation: fadeIn 1s ease-out;
        }
        
        .slide-in-left {
          animation: slideInLeft 1.2s ease-out;
        }
        
        @keyframes fadeIn {
          from { opacity: 0; transform: translateY(20px); }
          to { opacity: 1; transform: translateY(0); }
        }
        
        @keyframes slideInLeft {
          from { opacity: 0; transform: translateX(-30px); }
          to { opacity: 1; transform: translateX(0); }
        }
        
        /*    */
        @media (max-width: 480px) {
          .panorama-container {
            height: 180px !important;
          }
          
          iframe {
            height: 220px !important;
          }
        }
        
        /*    */
        @media (min-width: 481px) and (max-width: 768px) {
          .panorama-container {
            height: 250px !important;
          }
          
          iframe {
            height: 280px !important;
          }
        }
        
        /*   */
        @media (min-width: 769px) and (max-width: 1024px) {
          .panorama-container {
            height: 300px !important;
          }
          
          iframe {
            height: 320px !important;
          }
        }
        
        /*    */
        html, body {
          overflow-x: hidden;
          max-width: 100vw;
        }
      `}),v.jsx(sF,{}),v.jsx(lF,{}),v.jsx(oF,{})]})},_F=()=>v.jsxs(v.Fragment,{children:[v.jsx(v.Fragment,{}),v.jsx("div",{style:{minHeight:"100vh",background:"transparent",padding:"2rem 0"},children:v.jsxs("div",{style:{maxWidth:"900px",margin:"0 auto",padding:"0 1rem"},children:[v.jsx("div",{style:{textAlign:"center",marginBottom:"3rem"},className:"fade-in",children:v.jsx("h1",{style:{fontFamily:'"Assistant", "Heebo", system-ui, sans-serif',fontSize:"clamp(28px, 5vw, 42px)",fontWeight:"800",color:"#059669",marginBottom:"1rem",textShadow:"0 2px 4px rgba(0,0,0,0.1)",letterSpacing:"0.5px"},children:' "  '})}),v.jsx("div",{className:"fade-in",style:{marginBottom:"3rem"},children:v.jsx("div",{style:{background:"rgba(255,255,255,0.9)",backdropFilter:"blur(10px)",borderRadius:"20px",boxShadow:"0 15px 40px rgba(0,0,0,0.1)",padding:"clamp(1.5rem, 4vw, 3rem)",border:"1px solid rgba(255,255,255,0.5)",margin:"0 auto"},children:v.jsxs("div",{style:{fontFamily:'"Assistant", "Heebo", system-ui, sans-serif',fontSize:"clamp(16px, 2.2vw, 20px)",lineHeight:"1.8",color:"#374151",textAlign:"justify",direction:"rtl"},children:[v.jsxs("p",{style:{marginBottom:"1.5rem"},children:[v.jsx("strong",{style:{color:"#059669",fontSize:"1.1em"},children:'"    "    2013.'}),'"    ,     ,  ,   .']}),v.jsxs("p",{style:{marginBottom:"1.5rem"},children:['"  ',v.jsx("strong",{style:{color:"#c2185b"},children:'     ,   ",    "'}),",    ."]}),v.jsxs("p",{style:{marginBottom:"1.5rem"},children:['"              ',v.jsx("strong",{children:", , ,  ,  "}),"."]}),v.jsxs("p",{style:{marginBottom:"1.5rem"},children:['"              " ',v.jsx("strong",{style:{color:"#059669"},children:"         "}),"."]}),v.jsxs("p",{style:{marginBottom:"1.5rem"},children:['"  " ',v.jsx("strong",{children:"  "}),",   - , ,      ."]}),v.jsxs("p",{style:{marginBottom:"1.5rem"},children:['"  ',v.jsx("strong",{style:{color:"#c2185b"},children:"   "}),",     .    ."]}),v.jsx("p",{style:{marginBottom:"1.5rem"},children:"  ."}),v.jsx("div",{style:{textAlign:"center",marginTop:"2rem",padding:"1.5rem",background:"linear-gradient(135deg, rgba(5, 150, 105, 0.1), rgba(139, 92, 246, 0.1))",borderRadius:"12px",border:"1px solid rgba(5, 150, 105, 0.2)"},children:v.jsx("p",{style:{fontSize:"clamp(18px, 3vw, 24px)",fontWeight:"700",color:"#059669",textShadow:"0 1px 2px rgba(0,0,0,0.1)",margin:0},children:"  ! "})})]})})})]})})]}),AF=()=>{const[n,e]=le.useState(""),[t,r]=le.useState(""),[i,a]=le.useState(""),{setUser:o}=Zo(),s=Rm(),c=async()=>{if(!n||!n.includes("@")){a("     ");return}try{await AD(A1,n),a("    ")}catch(p){a("    : "+p.message)}},f=async p=>{p.preventDefault(),a("");let g=n;if(!n.includes("@"))try{const m=Nl(hn(wt,"users"),ru("username","==",n)),x=await nr(m);if(!x.empty)g=x.docs[0].data().email;else{a("   ");return}}catch{a("     ");return}try{const x=(await ED(A1,g,t)).user;if(!x.emailVerified){a("      ");return}const _=rr(wt,"users",x.uid),C=await Ph(_);if(C.exists()){const S=C.data();o({uid:x.uid,email:x.email,username:S.username,role:S.role}),s("/")}else a("     ")}catch(m){switch(m.code){case"auth/invalid-credential":case"auth/wrong-password":a(" ");break;case"auth/user-not-found":a("  ");break;default:a(": "+m.message)}}},d={container:{display:"flex",justifyContent:"center",alignItems:"center",height:"80vh",background:"transparent"},form:{backgroundColor:"#fff",padding:"2rem",borderRadius:"12px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.1)",display:"flex",flexDirection:"column",width:"300px"},title:{textAlign:"center",marginBottom:"1.5rem",color:"#333"},input:{marginBottom:"1rem",padding:"0.8rem",fontSize:"1rem",borderRadius:"6px",border:"1px solid #ccc"},button:{backgroundColor:"#007bff",color:"white",border:"none",padding:"0.8rem",fontSize:"1rem",borderRadius:"6px",cursor:"pointer",transition:"background-color 0.3s ease"},error:{color:"red",marginBottom:"1rem",fontSize:"0.9rem",textAlign:"center"}};return v.jsx("div",{style:d.container,children:v.jsxs("form",{onSubmit:f,style:d.form,children:[v.jsx("h2",{style:d.title,children:""}),v.jsx("input",{type:"text",placeholder:"   ",value:n,onChange:p=>e(p.target.value),style:d.input,required:!0}),v.jsx("input",{type:"password",placeholder:"",value:t,onChange:p=>r(p.target.value),style:d.input,required:!0}),i&&v.jsx("div",{style:d.error,children:i}),v.jsx("button",{type:"submit",style:d.button,children:""}),v.jsx("button",{type:"button",onClick:c,style:{marginTop:"0.5rem",backgroundColor:"transparent",border:"none",color:"#007bff",textDecoration:"underline",cursor:"pointer",fontSize:"0.9rem"},children:" ?"})]})})},SF=()=>{const[n,e]=le.useState(""),[t,r]=le.useState(""),[i,a]=le.useState(""),[o,s]=le.useState(""),c=p=>p.length>=8&&/[a-zA-Z]/.test(p),f=async p=>{if(p.preventDefault(),!c(i)){s("    8      A-Z / a-z");return}try{const m=(await SD(A1,n,i)).user;await q5(rr(wt,"users",m.uid),{email:n,username:t,role:"User"}),await CD(m),alert(" !    .")}catch(g){s(g.message)}},d={container:{display:"flex",justifyContent:"center",alignItems:"center",height:"80vh",background:"transparent"},form:{backgroundColor:"#fff",padding:"2rem",borderRadius:"12px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.1)",display:"flex",flexDirection:"column",width:"300px"},title:{textAlign:"center",marginBottom:"1.5rem",color:"#333"},input:{marginBottom:"1rem",padding:"0.8rem",fontSize:"1rem",borderRadius:"6px",border:"1px solid #ccc"},button:{backgroundColor:"#007bff",color:"white",border:"none",padding:"0.8rem",fontSize:"1rem",borderRadius:"6px",cursor:"pointer",transition:"background-color 0.3s ease"},error:{color:"red",marginBottom:"1rem",fontSize:"0.9rem",textAlign:"center"}};return v.jsx("div",{style:d.container,children:v.jsxs("form",{onSubmit:f,style:d.form,children:[v.jsx("h2",{style:d.title,children:""}),v.jsx("input",{type:"text",placeholder:" ",value:t,onChange:p=>r(p.target.value),style:d.input,required:!0}),v.jsx("input",{type:"email",placeholder:"",value:n,onChange:p=>e(p.target.value),style:d.input,required:!0}),v.jsx("input",{type:"password",placeholder:"",value:i,onChange:p=>a(p.target.value),style:d.input,required:!0}),o&&v.jsx("div",{style:d.error,children:o}),v.jsx("button",{type:"submit",style:d.button,children:""})]})})},EF=({form:n,errors:e,handleChange:t,handleConfirm:r,handleClear:i,setShowCatalogPopup:a,saving:o,isLoadingClientData:s=!1})=>{const c=[{label:" ",name:"phone",required:!0},{label:" ",name:"volunteerName",required:!0},{label:" ",name:"clientName",required:!0},{label:" ",name:"address",required:!0},{label:"",name:"email",required:!1},{label:" ",name:"eventType",required:!0},{label:"  ",name:"pickupDate",type:"date",required:!0},{label:" ",name:"eventDate",type:"date",required:!0},{label:"  ",name:"returnDate",type:"date",required:!0}];return v.jsxs("div",{className:"loan-form-box",children:[v.jsx("h2",{style:{textAlign:"center"},children:" "}),c.map(({label:f,name:d,type:p="text",required:g})=>v.jsxs("div",{style:{marginBottom:"1.5rem",textAlign:"center"},children:[v.jsxs("label",{htmlFor:d,style:{display:"block",marginBottom:"0.3rem",maxWidth:"400px",margin:"0 auto",textAlign:"right"},children:[f,g&&" *",s&&(d==="clientName"||d==="address"||d==="email")&&v.jsx("span",{style:{marginRight:"0.5rem",color:"#2196f3"},children:""})]}),v.jsxs("div",{style:{position:"relative"},children:[v.jsx("input",{id:d,type:p,name:d,value:n[d],onChange:t,disabled:s&&(d==="clientName"||d==="address"||d==="email"),inputMode:d==="phone"?"numeric":void 0,pattern:d==="phone"?"[0-9]*":void 0,min:p==="date"?d==="pickupDate"?new Date().toISOString().split("T")[0]:d==="eventDate"||d==="returnDate"?n.pickupDate||new Date().toISOString().split("T")[0]:void 0:void 0,style:{display:"block",width:"100%",maxWidth:"400px",margin:"0 auto",padding:"10px",border:e[d]?"1px solid red":"1px solid #ccc",borderRadius:"6px",fontSize:"1rem",backgroundColor:s&&(d==="clientName"||d==="address"||d==="email")?"#f5f5f5":"white",opacity:s&&(d==="clientName"||d==="address"||d==="email")?.7:1},placeholder:s&&(d==="clientName"||d==="address"||d==="email")?"...":""}),s&&d==="phone"&&v.jsx("div",{style:{position:"absolute",left:"10px",top:"50%",transform:"translateY(-50%)",color:"#2196f3"},children:v.jsx("div",{style:{width:"16px",height:"16px",border:"2px solid #e3f2fd",borderTop:"2px solid #2196f3",borderRadius:"50%",animation:"spin 1s linear infinite"}})})]}),e[d]&&v.jsx("div",{style:{color:"red",fontSize:"0.85rem",maxWidth:"400px",margin:"0.3rem auto 0",textAlign:"right"},children:e[d]})]},d)),v.jsx("div",{style:{display:"flex",justifyContent:"center",marginBottom:"1.5rem"},children:v.jsx("button",{className:"btn btn-blue",onClick:()=>a(!0),children:" "})}),v.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"10px"},children:[v.jsx("button",{className:"btn btn-green",onClick:r,disabled:o||s,children:o?"...":" "}),v.jsx("button",{className:"btn btn-red",onClick:i,disabled:o||s,children:" "})]}),v.jsx("style",{jsx:!0,children:`
        @keyframes spin {
          0% { transform: translateY(-50%) rotate(0deg); }
          100% { transform: translateY(-50%) rotate(360deg); }
        }
      `})]})};function CF(n,e){var t=Object.setPrototypeOf;t?t(n,e):n.__proto__=e}function IF(n,e){e===void 0&&(e=n.constructor);var t=Error.captureStackTrace;t&&t(n,e)}var TF=function(){var n=function(t,r){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(i[o]=a[o])},n(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),RF=function(n){TF(e,n);function e(t,r){var i=this.constructor,a=n.call(this,t,r)||this;return Object.defineProperty(a,"name",{value:i.name,enumerable:!1,configurable:!0}),CF(a,i.prototype),IF(a),a}return e}(Error),NF=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Jo=function(n){NF(e,n);function e(t){t===void 0&&(t=void 0);var r=n.call(this,t)||this;return r.message=t,r}return e.prototype.getKind=function(){var t=this.constructor;return t.kind},e.kind="Exception",e}(RF),DF=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Sl=function(n){DF(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="ArgumentException",e}(Jo),OF=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Xt=function(n){OF(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="IllegalArgumentException",e}(Jo),kF=function(){function n(e){if(this.binarizer=e,e===null)throw new Xt("Binarizer must be non-null.")}return n.prototype.getWidth=function(){return this.binarizer.getWidth()},n.prototype.getHeight=function(){return this.binarizer.getHeight()},n.prototype.getBlackRow=function(e,t){return this.binarizer.getBlackRow(e,t)},n.prototype.getBlackMatrix=function(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix},n.prototype.isCropSupported=function(){return this.binarizer.getLuminanceSource().isCropSupported()},n.prototype.crop=function(e,t,r,i){var a=this.binarizer.getLuminanceSource().crop(e,t,r,i);return new n(this.binarizer.createBinarizer(a))},n.prototype.isRotateSupported=function(){return this.binarizer.getLuminanceSource().isRotateSupported()},n.prototype.rotateCounterClockwise=function(){var e=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new n(this.binarizer.createBinarizer(e))},n.prototype.rotateCounterClockwise45=function(){var e=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new n(this.binarizer.createBinarizer(e))},n.prototype.toString=function(){try{return this.getBlackMatrix().toString()}catch{return""}},n}(),LF=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),ya=function(n){LF(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.getChecksumInstance=function(){return new e},e.kind="ChecksumException",e}(Jo),PF=function(){function n(e){this.source=e}return n.prototype.getLuminanceSource=function(){return this.source},n.prototype.getWidth=function(){return this.source.getWidth()},n.prototype.getHeight=function(){return this.source.getHeight()},n}(),jr=function(){function n(){}return n.arraycopy=function(e,t,r,i,a){for(;a--;)r[i++]=e[t++]},n.currentTimeMillis=function(){return Date.now()},n}(),MF=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Z5=function(n){MF(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="IndexOutOfBoundsException",e}(Jo),jF=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),b4=function(n){jF(e,n);function e(t,r){t===void 0&&(t=void 0),r===void 0&&(r=void 0);var i=n.call(this,r)||this;return i.index=t,i.message=r,i}return e.kind="ArrayIndexOutOfBoundsException",e}(Z5),BF=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ta=function(){function n(){}return n.fill=function(e,t){for(var r=0,i=e.length;r<i;r++)e[r]=t},n.fillWithin=function(e,t,r,i){n.rangeCheck(e.length,t,r);for(var a=t;a<r;a++)e[a]=i},n.rangeCheck=function(e,t,r){if(t>r)throw new Xt("fromIndex("+t+") > toIndex("+r+")");if(t<0)throw new b4(t);if(r>e)throw new b4(r)},n.asList=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e},n.create=function(e,t,r){var i=Array.from({length:e});return i.map(function(a){return Array.from({length:t}).fill(r)})},n.createInt32Array=function(e,t,r){var i=Array.from({length:e});return i.map(function(a){return Int32Array.from({length:t}).fill(r)})},n.equals=function(e,t){if(!e||!t||!e.length||!t.length||e.length!==t.length)return!1;for(var r=0,i=e.length;r<i;r++)if(e[r]!==t[r])return!1;return!0},n.hashCode=function(e){var t,r;if(e===null)return 0;var i=1;try{for(var a=BF(e),o=a.next();!o.done;o=a.next()){var s=o.value;i=31*i+s}}catch(c){t={error:c}}finally{try{o&&!o.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}return i},n.fillUint8Array=function(e,t){for(var r=0;r!==e.length;r++)e[r]=t},n.copyOf=function(e,t){return e.slice(0,t)},n.copyOfUint8Array=function(e,t){if(e.length<=t){var r=new Uint8Array(t);return r.set(e),r}return e.slice(0,t)},n.copyOfRange=function(e,t,r){var i=r-t,a=new Int32Array(i);return jr.arraycopy(e,t,a,0,i),a},n.binarySearch=function(e,t,r){r===void 0&&(r=n.numberComparator);for(var i=0,a=e.length-1;i<=a;){var o=a+i>>1,s=r(t,e[o]);if(s>0)i=o+1;else if(s<0)a=o-1;else return o}return-i-1},n.numberComparator=function(e,t){return e-t},n}(),Nn=function(){function n(){}return n.numberOfTrailingZeros=function(e){var t;if(e===0)return 32;var r=31;return t=e<<16,t!==0&&(r-=16,e=t),t=e<<8,t!==0&&(r-=8,e=t),t=e<<4,t!==0&&(r-=4,e=t),t=e<<2,t!==0&&(r-=2,e=t),r-(e<<1>>>31)},n.numberOfLeadingZeros=function(e){if(e===0)return 32;var t=1;return e>>>16||(t+=16,e<<=16),e>>>24||(t+=8,e<<=8),e>>>28||(t+=4,e<<=4),e>>>30||(t+=2,e<<=2),t-=e>>>31,t},n.toHexString=function(e){return e.toString(16)},n.toBinaryString=function(e){return String(parseInt(String(e),2))},n.bitCount=function(e){return e=e-(e>>>1&1431655765),e=(e&858993459)+(e>>>2&858993459),e=e+(e>>>4)&252645135,e=e+(e>>>8),e=e+(e>>>16),e&63},n.truncDivision=function(e,t){return Math.trunc(e/t)},n.parseInt=function(e,t){return t===void 0&&(t=void 0),parseInt(e,t)},n.MIN_VALUE_32_BITS=-2147483648,n.MAX_VALUE=Number.MAX_SAFE_INTEGER,n}(),xa=function(){function n(e,t){e===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=e,t==null?this.bits=n.makeArray(e):this.bits=t)}return n.prototype.getSize=function(){return this.size},n.prototype.getSizeInBytes=function(){return Math.floor((this.size+7)/8)},n.prototype.ensureCapacity=function(e){if(e>this.bits.length*32){var t=n.makeArray(e);jr.arraycopy(this.bits,0,t,0,this.bits.length),this.bits=t}},n.prototype.get=function(e){return(this.bits[Math.floor(e/32)]&1<<(e&31))!==0},n.prototype.set=function(e){this.bits[Math.floor(e/32)]|=1<<(e&31)},n.prototype.flip=function(e){this.bits[Math.floor(e/32)]^=1<<(e&31)},n.prototype.getNextSet=function(e){var t=this.size;if(e>=t)return t;var r=this.bits,i=Math.floor(e/32),a=r[i];a&=~((1<<(e&31))-1);for(var o=r.length;a===0;){if(++i===o)return t;a=r[i]}var s=i*32+Nn.numberOfTrailingZeros(a);return s>t?t:s},n.prototype.getNextUnset=function(e){var t=this.size;if(e>=t)return t;var r=this.bits,i=Math.floor(e/32),a=~r[i];a&=~((1<<(e&31))-1);for(var o=r.length;a===0;){if(++i===o)return t;a=~r[i]}var s=i*32+Nn.numberOfTrailingZeros(a);return s>t?t:s},n.prototype.setBulk=function(e,t){this.bits[Math.floor(e/32)]=t},n.prototype.setRange=function(e,t){if(t<e||e<0||t>this.size)throw new Xt;if(t!==e){t--;for(var r=Math.floor(e/32),i=Math.floor(t/32),a=this.bits,o=r;o<=i;o++){var s=o>r?0:e&31,c=o<i?31:t&31,f=(2<<c)-(1<<s);a[o]|=f}}},n.prototype.clear=function(){for(var e=this.bits.length,t=this.bits,r=0;r<e;r++)t[r]=0},n.prototype.isRange=function(e,t,r){if(t<e||e<0||t>this.size)throw new Xt;if(t===e)return!0;t--;for(var i=Math.floor(e/32),a=Math.floor(t/32),o=this.bits,s=i;s<=a;s++){var c=s>i?0:e&31,f=s<a?31:t&31,d=(2<<f)-(1<<c)&4294967295;if((o[s]&d)!==(r?d:0))return!1}return!0},n.prototype.appendBit=function(e){this.ensureCapacity(this.size+1),e&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++},n.prototype.appendBits=function(e,t){if(t<0||t>32)throw new Xt("Num bits must be between 0 and 32");this.ensureCapacity(this.size+t);for(var r=t;r>0;r--)this.appendBit((e>>r-1&1)===1)},n.prototype.appendBitArray=function(e){var t=e.size;this.ensureCapacity(this.size+t);for(var r=0;r<t;r++)this.appendBit(e.get(r))},n.prototype.xor=function(e){if(this.size!==e.size)throw new Xt("Sizes don't match");for(var t=this.bits,r=0,i=t.length;r<i;r++)t[r]^=e.bits[r]},n.prototype.toBytes=function(e,t,r,i){for(var a=0;a<i;a++){for(var o=0,s=0;s<8;s++)this.get(e)&&(o|=1<<7-s),e++;t[r+a]=o}},n.prototype.getBitArray=function(){return this.bits},n.prototype.reverse=function(){for(var e=new Int32Array(this.bits.length),t=Math.floor((this.size-1)/32),r=t+1,i=this.bits,a=0;a<r;a++){var o=i[a];o=o>>1&1431655765|(o&1431655765)<<1,o=o>>2&858993459|(o&858993459)<<2,o=o>>4&252645135|(o&252645135)<<4,o=o>>8&16711935|(o&16711935)<<8,o=o>>16&65535|(o&65535)<<16,e[t-a]=o}if(this.size!==r*32){for(var s=r*32-this.size,c=e[0]>>>s,a=1;a<r;a++){var f=e[a];c|=f<<32-s,e[a-1]=c,c=f>>>s}e[r-1]=c}this.bits=e},n.makeArray=function(e){return new Int32Array(Math.floor((e+31)/32))},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.size===t.size&&ta.equals(this.bits,t.bits)},n.prototype.hashCode=function(){return 31*this.size+ta.hashCode(this.bits)},n.prototype.toString=function(){for(var e="",t=0,r=this.size;t<r;t++)(t&7)===0&&(e+=" "),e+=this.get(t)?"X":".";return e},n.prototype.clone=function(){return new n(this.size,this.bits.slice())},n.prototype.toArray=function(){for(var e=[],t=0,r=this.size;t<r;t++)e.push(this.get(t));return e},n}(),cx;(function(n){n[n.OTHER=0]="OTHER",n[n.PURE_BARCODE=1]="PURE_BARCODE",n[n.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",n[n.TRY_HARDER=3]="TRY_HARDER",n[n.CHARACTER_SET=4]="CHARACTER_SET",n[n.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",n[n.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",n[n.ENABLE_CODE_39_EXTENDED_MODE=7]="ENABLE_CODE_39_EXTENDED_MODE",n[n.ASSUME_GS1=8]="ASSUME_GS1",n[n.RETURN_CODABAR_START_END=9]="RETURN_CODABAR_START_END",n[n.NEED_RESULT_POINT_CALLBACK=10]="NEED_RESULT_POINT_CALLBACK",n[n.ALLOWED_EAN_EXTENSIONS=11]="ALLOWED_EAN_EXTENSIONS"})(cx||(cx={}));const ai=cx;var FF=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),gt=function(n){FF(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.getFormatInstance=function(){return new e},e.kind="FormatException",e}(Jo),UF=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},yr;(function(n){n[n.Cp437=0]="Cp437",n[n.ISO8859_1=1]="ISO8859_1",n[n.ISO8859_2=2]="ISO8859_2",n[n.ISO8859_3=3]="ISO8859_3",n[n.ISO8859_4=4]="ISO8859_4",n[n.ISO8859_5=5]="ISO8859_5",n[n.ISO8859_6=6]="ISO8859_6",n[n.ISO8859_7=7]="ISO8859_7",n[n.ISO8859_8=8]="ISO8859_8",n[n.ISO8859_9=9]="ISO8859_9",n[n.ISO8859_10=10]="ISO8859_10",n[n.ISO8859_11=11]="ISO8859_11",n[n.ISO8859_13=12]="ISO8859_13",n[n.ISO8859_14=13]="ISO8859_14",n[n.ISO8859_15=14]="ISO8859_15",n[n.ISO8859_16=15]="ISO8859_16",n[n.SJIS=16]="SJIS",n[n.Cp1250=17]="Cp1250",n[n.Cp1251=18]="Cp1251",n[n.Cp1252=19]="Cp1252",n[n.Cp1256=20]="Cp1256",n[n.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",n[n.UTF8=22]="UTF8",n[n.ASCII=23]="ASCII",n[n.Big5=24]="Big5",n[n.GB18030=25]="GB18030",n[n.EUC_KR=26]="EUC_KR"})(yr||(yr={}));var ea=function(){function n(e,t,r){for(var i,a,o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];this.valueIdentifier=e,this.name=r,typeof t=="number"?this.values=Int32Array.from([t]):this.values=t,this.otherEncodingNames=o,n.VALUE_IDENTIFIER_TO_ECI.set(e,this),n.NAME_TO_ECI.set(r,this);for(var c=this.values,f=0,d=c.length;f!==d;f++){var p=c[f];n.VALUES_TO_ECI.set(p,this)}try{for(var g=UF(o),m=g.next();!m.done;m=g.next()){var x=m.value;n.NAME_TO_ECI.set(x,this)}}catch(_){i={error:_}}finally{try{m&&!m.done&&(a=g.return)&&a.call(g)}finally{if(i)throw i.error}}}return n.prototype.getValueIdentifier=function(){return this.valueIdentifier},n.prototype.getName=function(){return this.name},n.prototype.getValue=function(){return this.values[0]},n.getCharacterSetECIByValue=function(e){if(e<0||e>=900)throw new gt("incorect value");var t=n.VALUES_TO_ECI.get(e);if(t===void 0)throw new gt("incorect value");return t},n.getCharacterSetECIByName=function(e){var t=n.NAME_TO_ECI.get(e);if(t===void 0)throw new gt("incorect value");return t},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.getName()===t.getName()},n.VALUE_IDENTIFIER_TO_ECI=new Map,n.VALUES_TO_ECI=new Map,n.NAME_TO_ECI=new Map,n.Cp437=new n(yr.Cp437,Int32Array.from([0,2]),"Cp437"),n.ISO8859_1=new n(yr.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),n.ISO8859_2=new n(yr.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),n.ISO8859_3=new n(yr.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),n.ISO8859_4=new n(yr.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),n.ISO8859_5=new n(yr.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),n.ISO8859_6=new n(yr.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),n.ISO8859_7=new n(yr.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),n.ISO8859_8=new n(yr.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),n.ISO8859_9=new n(yr.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),n.ISO8859_10=new n(yr.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),n.ISO8859_11=new n(yr.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),n.ISO8859_13=new n(yr.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),n.ISO8859_14=new n(yr.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),n.ISO8859_15=new n(yr.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),n.ISO8859_16=new n(yr.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),n.SJIS=new n(yr.SJIS,20,"SJIS","Shift_JIS"),n.Cp1250=new n(yr.Cp1250,21,"Cp1250","windows-1250"),n.Cp1251=new n(yr.Cp1251,22,"Cp1251","windows-1251"),n.Cp1252=new n(yr.Cp1252,23,"Cp1252","windows-1252"),n.Cp1256=new n(yr.Cp1256,24,"Cp1256","windows-1256"),n.UnicodeBigUnmarked=new n(yr.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),n.UTF8=new n(yr.UTF8,26,"UTF8","UTF-8"),n.ASCII=new n(yr.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),n.Big5=new n(yr.Big5,28,"Big5"),n.GB18030=new n(yr.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),n.EUC_KR=new n(yr.EUC_KR,30,"EUC_KR","EUC-KR"),n}(),zF=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Dg=function(n){zF(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="UnsupportedOperationException",e}(Jo),Ys=function(){function n(){}return n.decode=function(e,t){var r=this.encodingName(t);return this.customDecoder?this.customDecoder(e,r):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(r)?this.decodeFallback(e,r):new TextDecoder(r).decode(e)},n.shouldDecodeOnFallback=function(e){return!n.isBrowser()&&e==="ISO-8859-1"},n.encode=function(e,t){var r=this.encodingName(t);return this.customEncoder?this.customEncoder(e,r):typeof TextEncoder>"u"?this.encodeFallback(e):new TextEncoder().encode(e)},n.isBrowser=function(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"},n.encodingName=function(e){return typeof e=="string"?e:e.getName()},n.encodingCharacterSet=function(e){return e instanceof ea?e:ea.getCharacterSetECIByName(e)},n.decodeFallback=function(e,t){var r=this.encodingCharacterSet(t);if(n.isDecodeFallbackSupported(r)){for(var i="",a=0,o=e.length;a<o;a++){var s=e[a].toString(16);s.length<2&&(s="0"+s),i+="%"+s}return decodeURIComponent(i)}if(r.equals(ea.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(e.buffer));throw new Dg("Encoding "+this.encodingName(t)+" not supported by fallback.")},n.isDecodeFallbackSupported=function(e){return e.equals(ea.UTF8)||e.equals(ea.ISO8859_1)||e.equals(ea.ASCII)},n.encodeFallback=function(e){for(var t=btoa(unescape(encodeURIComponent(e))),r=t.split(""),i=[],a=0;a<r.length;a++)i.push(r[a].charCodeAt(0));return new Uint8Array(i)},n}(),Yn=function(){function n(){}return n.castAsNonUtf8Char=function(e,t){t===void 0&&(t=null);var r=t?t.getName():this.ISO88591;return Ys.decode(new Uint8Array([e]),r)},n.guessEncoding=function(e,t){if(t!=null&&t.get(ai.CHARACTER_SET)!==void 0)return t.get(ai.CHARACTER_SET).toString();for(var r=e.length,i=!0,a=!0,o=!0,s=0,c=0,f=0,d=0,p=0,g=0,m=0,x=0,_=0,C=0,S=0,k=e.length>3&&e[0]===239&&e[1]===187&&e[2]===191,M=0;M<r&&(i||a||o);M++){var P=e[M]&255;o&&(s>0?(P&128)===0?o=!1:s--:(P&128)!==0&&((P&64)===0?o=!1:(s++,(P&32)===0?c++:(s++,(P&16)===0?f++:(s++,(P&8)===0?d++:o=!1))))),i&&(P>127&&P<160?i=!1:P>159&&(P<192||P===215||P===247)&&S++),a&&(p>0?P<64||P===127||P>252?a=!1:p--:P===128||P===160||P>239?a=!1:P>160&&P<224?(g++,x=0,m++,m>_&&(_=m)):P>127?(p++,m=0,x++,x>C&&(C=x)):(m=0,x=0))}return o&&s>0&&(o=!1),a&&p>0&&(a=!1),o&&(k||c+f+d>0)?n.UTF8:a&&(n.ASSUME_SHIFT_JIS||_>=3||C>=3)?n.SHIFT_JIS:i&&a?_===2&&g===2||S*10>=r?n.SHIFT_JIS:n.ISO88591:i?n.ISO88591:a?n.SHIFT_JIS:o?n.UTF8:n.PLATFORM_DEFAULT_ENCODING},n.format=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var i=-1;function a(s,c,f,d,p,g){if(s==="%%")return"%";if(t[++i]!==void 0){s=d?parseInt(d.substr(1)):void 0;var m=p?parseInt(p.substr(1)):void 0,x;switch(g){case"s":x=t[i];break;case"c":x=t[i][0];break;case"f":x=parseFloat(t[i]).toFixed(s);break;case"p":x=parseFloat(t[i]).toPrecision(s);break;case"e":x=parseFloat(t[i]).toExponential(s);break;case"x":x=parseInt(t[i]).toString(m||16);break;case"d":x=parseFloat(parseInt(t[i],m||10).toPrecision(s)).toFixed(0);break}x=typeof x=="object"?JSON.stringify(x):(+x).toString(m);for(var _=parseInt(f),C=f&&f[0]+""=="0"?"0":" ";x.length<_;)x=c!==void 0?x+C:C+x;return x}}var o=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(o,a)},n.getBytes=function(e,t){return Ys.encode(e,t)},n.getCharCode=function(e,t){return t===void 0&&(t=0),e.charCodeAt(t)},n.getCharAt=function(e){return String.fromCharCode(e)},n.SHIFT_JIS=ea.SJIS.getName(),n.GB2312="GB2312",n.ISO88591=ea.ISO8859_1.getName(),n.EUC_JP="EUC_JP",n.UTF8=ea.UTF8.getName(),n.PLATFORM_DEFAULT_ENCODING=n.UTF8,n.ASSUME_SHIFT_JIS=!1,n}(),En=function(){function n(e){e===void 0&&(e=""),this.value=e}return n.prototype.enableDecoding=function(e){return this.encoding=e,this},n.prototype.append=function(e){return typeof e=="string"?this.value+=e.toString():this.encoding?this.value+=Yn.castAsNonUtf8Char(e,this.encoding):this.value+=String.fromCharCode(e),this},n.prototype.appendChars=function(e,t,r){for(var i=t;t<t+r;i++)this.append(e[i]);return this},n.prototype.length=function(){return this.value.length},n.prototype.charAt=function(e){return this.value.charAt(e)},n.prototype.deleteCharAt=function(e){this.value=this.value.substr(0,e)+this.value.substring(e+1)},n.prototype.setCharAt=function(e,t){this.value=this.value.substr(0,e)+t+this.value.substr(e+1)},n.prototype.substring=function(e,t){return this.value.substring(e,t)},n.prototype.setLengthToZero=function(){this.value=""},n.prototype.toString=function(){return this.value},n.prototype.insert=function(e,t){this.value=this.value.substring(0,e)+t+this.value.substring(e)},n}(),fc=function(){function n(e,t,r,i){if(this.width=e,this.height=t,this.rowSize=r,this.bits=i,t==null&&(t=e),this.height=t,e<1||t<1)throw new Xt("Both dimensions must be greater than 0");r==null&&(r=Math.floor((e+31)/32)),this.rowSize=r,i==null&&(this.bits=new Int32Array(this.rowSize*this.height))}return n.parseFromBooleanArray=function(e){for(var t=e.length,r=e[0].length,i=new n(r,t),a=0;a<t;a++)for(var o=e[a],s=0;s<r;s++)o[s]&&i.set(s,a);return i},n.parseFromString=function(e,t,r){if(e===null)throw new Xt("stringRepresentation cannot be null");for(var i=new Array(e.length),a=0,o=0,s=-1,c=0,f=0;f<e.length;)if(e.charAt(f)===`
`||e.charAt(f)==="\r"){if(a>o){if(s===-1)s=a-o;else if(a-o!==s)throw new Xt("row lengths do not match");o=a,c++}f++}else if(e.substring(f,f+t.length)===t)f+=t.length,i[a]=!0,a++;else if(e.substring(f,f+r.length)===r)f+=r.length,i[a]=!1,a++;else throw new Xt("illegal character encountered: "+e.substring(f));if(a>o){if(s===-1)s=a-o;else if(a-o!==s)throw new Xt("row lengths do not match");c++}for(var d=new n(s,c),p=0;p<a;p++)i[p]&&d.set(Math.floor(p%s),Math.floor(p/s));return d},n.prototype.get=function(e,t){var r=t*this.rowSize+Math.floor(e/32);return(this.bits[r]>>>(e&31)&1)!==0},n.prototype.set=function(e,t){var r=t*this.rowSize+Math.floor(e/32);this.bits[r]|=1<<(e&31)&4294967295},n.prototype.unset=function(e,t){var r=t*this.rowSize+Math.floor(e/32);this.bits[r]&=~(1<<(e&31)&4294967295)},n.prototype.flip=function(e,t){var r=t*this.rowSize+Math.floor(e/32);this.bits[r]^=1<<(e&31)&4294967295},n.prototype.xor=function(e){if(this.width!==e.getWidth()||this.height!==e.getHeight()||this.rowSize!==e.getRowSize())throw new Xt("input matrix dimensions do not match");for(var t=new xa(Math.floor(this.width/32)+1),r=this.rowSize,i=this.bits,a=0,o=this.height;a<o;a++)for(var s=a*r,c=e.getRow(a,t).getBitArray(),f=0;f<r;f++)i[s+f]^=c[f]},n.prototype.clear=function(){for(var e=this.bits,t=e.length,r=0;r<t;r++)e[r]=0},n.prototype.setRegion=function(e,t,r,i){if(t<0||e<0)throw new Xt("Left and top must be nonnegative");if(i<1||r<1)throw new Xt("Height and width must be at least 1");var a=e+r,o=t+i;if(o>this.height||a>this.width)throw new Xt("The region must fit inside the matrix");for(var s=this.rowSize,c=this.bits,f=t;f<o;f++)for(var d=f*s,p=e;p<a;p++)c[d+Math.floor(p/32)]|=1<<(p&31)&4294967295},n.prototype.getRow=function(e,t){t==null||t.getSize()<this.width?t=new xa(this.width):t.clear();for(var r=this.rowSize,i=this.bits,a=e*r,o=0;o<r;o++)t.setBulk(o*32,i[a+o]);return t},n.prototype.setRow=function(e,t){jr.arraycopy(t.getBitArray(),0,this.bits,e*this.rowSize,this.rowSize)},n.prototype.rotate180=function(){for(var e=this.getWidth(),t=this.getHeight(),r=new xa(e),i=new xa(e),a=0,o=Math.floor((t+1)/2);a<o;a++)r=this.getRow(a,r),i=this.getRow(t-1-a,i),r.reverse(),i.reverse(),this.setRow(a,i),this.setRow(t-1-a,r)},n.prototype.getEnclosingRectangle=function(){for(var e=this.width,t=this.height,r=this.rowSize,i=this.bits,a=e,o=t,s=-1,c=-1,f=0;f<t;f++)for(var d=0;d<r;d++){var p=i[f*r+d];if(p!==0){if(f<o&&(o=f),f>c&&(c=f),d*32<a){for(var g=0;(p<<31-g&4294967295)===0;)g++;d*32+g<a&&(a=d*32+g)}if(d*32+31>s){for(var g=31;!(p>>>g);)g--;d*32+g>s&&(s=d*32+g)}}}return s<a||c<o?null:Int32Array.from([a,o,s-a+1,c-o+1])},n.prototype.getTopLeftOnBit=function(){for(var e=this.rowSize,t=this.bits,r=0;r<t.length&&t[r]===0;)r++;if(r===t.length)return null;for(var i=r/e,a=r%e*32,o=t[r],s=0;(o<<31-s&4294967295)===0;)s++;return a+=s,Int32Array.from([a,i])},n.prototype.getBottomRightOnBit=function(){for(var e=this.rowSize,t=this.bits,r=t.length-1;r>=0&&t[r]===0;)r--;if(r<0)return null;for(var i=Math.floor(r/e),a=Math.floor(r%e)*32,o=t[r],s=31;!(o>>>s);)s--;return a+=s,Int32Array.from([a,i])},n.prototype.getWidth=function(){return this.width},n.prototype.getHeight=function(){return this.height},n.prototype.getRowSize=function(){return this.rowSize},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.width===t.width&&this.height===t.height&&this.rowSize===t.rowSize&&ta.equals(this.bits,t.bits)},n.prototype.hashCode=function(){var e=this.width;return e=31*e+this.width,e=31*e+this.height,e=31*e+this.rowSize,e=31*e+ta.hashCode(this.bits),e},n.prototype.toString=function(e,t,r){return e===void 0&&(e="X "),t===void 0&&(t="  "),r===void 0&&(r=`
`),this.buildToString(e,t,r)},n.prototype.buildToString=function(e,t,r){for(var i=new En,a=0,o=this.height;a<o;a++){for(var s=0,c=this.width;s<c;s++)i.append(this.get(s,a)?e:t);i.append(r)}return i.toString()},n.prototype.clone=function(){return new n(this.width,this.height,this.rowSize,this.bits.slice())},n}(),VF=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),We=function(n){VF(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.getNotFoundInstance=function(){return new e},e.kind="NotFoundException",e}(Jo),qF=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),HF=function(n){qF(e,n);function e(t){var r=n.call(this,t)||this;return r.luminances=e.EMPTY,r.buckets=new Int32Array(e.LUMINANCE_BUCKETS),r}return e.prototype.getBlackRow=function(t,r){var i=this.getLuminanceSource(),a=i.getWidth();r==null||r.getSize()<a?r=new xa(a):r.clear(),this.initArrays(a);for(var o=i.getRow(t,this.luminances),s=this.buckets,c=0;c<a;c++)s[(o[c]&255)>>e.LUMINANCE_SHIFT]++;var f=e.estimateBlackPoint(s);if(a<3)for(var c=0;c<a;c++)(o[c]&255)<f&&r.set(c);else for(var d=o[0]&255,p=o[1]&255,c=1;c<a-1;c++){var g=o[c+1]&255;(p*4-d-g)/2<f&&r.set(c),d=p,p=g}return r},e.prototype.getBlackMatrix=function(){var t=this.getLuminanceSource(),r=t.getWidth(),i=t.getHeight(),a=new fc(r,i);this.initArrays(r);for(var o=this.buckets,s=1;s<5;s++)for(var c=Math.floor(i*s/5),f=t.getRow(c,this.luminances),d=Math.floor(r*4/5),p=Math.floor(r/5);p<d;p++){var g=f[p]&255;o[g>>e.LUMINANCE_SHIFT]++}for(var m=e.estimateBlackPoint(o),x=t.getMatrix(),s=0;s<i;s++)for(var _=s*r,p=0;p<r;p++){var g=x[_+p]&255;g<m&&a.set(p,s)}return a},e.prototype.createBinarizer=function(t){return new e(t)},e.prototype.initArrays=function(t){this.luminances.length<t&&(this.luminances=new Uint8ClampedArray(t));for(var r=this.buckets,i=0;i<e.LUMINANCE_BUCKETS;i++)r[i]=0},e.estimateBlackPoint=function(t){for(var r=t.length,i=0,a=0,o=0,s=0;s<r;s++)t[s]>o&&(a=s,o=t[s]),t[s]>i&&(i=t[s]);for(var c=0,f=0,s=0;s<r;s++){var d=s-a,p=t[s]*d*d;p>f&&(c=s,f=p)}if(a>c){var g=a;a=c,c=g}if(c-a<=r/16)throw new We;for(var m=c-1,x=-1,s=c-1;s>a;s--){var _=s-a,p=_*_*(c-s)*(i-t[s]);p>x&&(m=s,x=p)}return m<<e.LUMINANCE_SHIFT},e.LUMINANCE_BITS=5,e.LUMINANCE_SHIFT=8-e.LUMINANCE_BITS,e.LUMINANCE_BUCKETS=1<<e.LUMINANCE_BITS,e.EMPTY=Uint8ClampedArray.from([0]),e}(PF),WF=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),$F=function(n){WF(e,n);function e(t){var r=n.call(this,t)||this;return r.matrix=null,r}return e.prototype.getBlackMatrix=function(){if(this.matrix!==null)return this.matrix;var t=this.getLuminanceSource(),r=t.getWidth(),i=t.getHeight();if(r>=e.MINIMUM_DIMENSION&&i>=e.MINIMUM_DIMENSION){var a=t.getMatrix(),o=r>>e.BLOCK_SIZE_POWER;(r&e.BLOCK_SIZE_MASK)!==0&&o++;var s=i>>e.BLOCK_SIZE_POWER;(i&e.BLOCK_SIZE_MASK)!==0&&s++;var c=e.calculateBlackPoints(a,o,s,r,i),f=new fc(r,i);e.calculateThresholdForBlock(a,o,s,r,i,c,f),this.matrix=f}else this.matrix=n.prototype.getBlackMatrix.call(this);return this.matrix},e.prototype.createBinarizer=function(t){return new e(t)},e.calculateThresholdForBlock=function(t,r,i,a,o,s,c){for(var f=o-e.BLOCK_SIZE,d=a-e.BLOCK_SIZE,p=0;p<i;p++){var g=p<<e.BLOCK_SIZE_POWER;g>f&&(g=f);for(var m=e.cap(p,2,i-3),x=0;x<r;x++){var _=x<<e.BLOCK_SIZE_POWER;_>d&&(_=d);for(var C=e.cap(x,2,r-3),S=0,k=-2;k<=2;k++){var M=s[m+k];S+=M[C-2]+M[C-1]+M[C]+M[C+1]+M[C+2]}var P=S/25;e.thresholdBlock(t,_,g,P,a,c)}}},e.cap=function(t,r,i){return t<r?r:t>i?i:t},e.thresholdBlock=function(t,r,i,a,o,s){for(var c=0,f=i*o+r;c<e.BLOCK_SIZE;c++,f+=o)for(var d=0;d<e.BLOCK_SIZE;d++)(t[f+d]&255)<=a&&s.set(r+d,i+c)},e.calculateBlackPoints=function(t,r,i,a,o){for(var s=o-e.BLOCK_SIZE,c=a-e.BLOCK_SIZE,f=new Array(i),d=0;d<i;d++){f[d]=new Int32Array(r);var p=d<<e.BLOCK_SIZE_POWER;p>s&&(p=s);for(var g=0;g<r;g++){var m=g<<e.BLOCK_SIZE_POWER;m>c&&(m=c);for(var x=0,_=255,C=0,S=0,k=p*a+m;S<e.BLOCK_SIZE;S++,k+=a){for(var M=0;M<e.BLOCK_SIZE;M++){var P=t[k+M]&255;x+=P,P<_&&(_=P),P>C&&(C=P)}if(C-_>e.MIN_DYNAMIC_RANGE)for(S++,k+=a;S<e.BLOCK_SIZE;S++,k+=a)for(var M=0;M<e.BLOCK_SIZE;M++)x+=t[k+M]&255}var Y=x>>e.BLOCK_SIZE_POWER*2;if(C-_<=e.MIN_DYNAMIC_RANGE&&(Y=_/2,d>0&&g>0)){var z=(f[d-1][g]+2*f[d][g-1]+f[d-1][g-1])/4;_<z&&(Y=z)}f[d][g]=Y}}return f},e.BLOCK_SIZE_POWER=3,e.BLOCK_SIZE=1<<e.BLOCK_SIZE_POWER,e.BLOCK_SIZE_MASK=e.BLOCK_SIZE-1,e.MINIMUM_DIMENSION=e.BLOCK_SIZE*5,e.MIN_DYNAMIC_RANGE=24,e}(HF),u2=function(){function n(e,t){this.width=e,this.height=t}return n.prototype.getWidth=function(){return this.width},n.prototype.getHeight=function(){return this.height},n.prototype.isCropSupported=function(){return!1},n.prototype.crop=function(e,t,r,i){throw new Dg("This luminance source does not support cropping.")},n.prototype.isRotateSupported=function(){return!1},n.prototype.rotateCounterClockwise=function(){throw new Dg("This luminance source does not support rotation by 90 degrees.")},n.prototype.rotateCounterClockwise45=function(){throw new Dg("This luminance source does not support rotation by 45 degrees.")},n.prototype.toString=function(){for(var e=new Uint8ClampedArray(this.width),t=new En,r=0;r<this.height;r++){for(var i=this.getRow(r,e),a=0;a<this.width;a++){var o=i[a]&255,s=void 0;o<64?s="#":o<128?s="+":o<192?s=".":s=" ",t.append(s)}t.append(`
`)}return t.toString()},n}(),GF=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),J5=function(n){GF(e,n);function e(t){var r=n.call(this,t.getWidth(),t.getHeight())||this;return r.delegate=t,r}return e.prototype.getRow=function(t,r){for(var i=this.delegate.getRow(t,r),a=this.getWidth(),o=0;o<a;o++)i[o]=255-(i[o]&255);return i},e.prototype.getMatrix=function(){for(var t=this.delegate.getMatrix(),r=this.getWidth()*this.getHeight(),i=new Uint8ClampedArray(r),a=0;a<r;a++)i[a]=255-(t[a]&255);return i},e.prototype.isCropSupported=function(){return this.delegate.isCropSupported()},e.prototype.crop=function(t,r,i,a){return new e(this.delegate.crop(t,r,i,a))},e.prototype.isRotateSupported=function(){return this.delegate.isRotateSupported()},e.prototype.invert=function(){return this.delegate},e.prototype.rotateCounterClockwise=function(){return new e(this.delegate.rotateCounterClockwise())},e.prototype.rotateCounterClockwise45=function(){return new e(this.delegate.rotateCounterClockwise45())},e}(u2),YF=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),XF=function(n){YF(e,n);function e(t,r){r===void 0&&(r=!1);var i=n.call(this,t.width,t.height)||this;return i.canvas=t,i.tempCanvasElement=null,i.buffer=e.makeBufferFromCanvasImageData(t,r),i}return e.makeBufferFromCanvasImageData=function(t,r){r===void 0&&(r=!1);var i=t.getContext("2d").getImageData(0,0,t.width,t.height);return e.toGrayscaleBuffer(i.data,t.width,t.height,r)},e.toGrayscaleBuffer=function(t,r,i,a){a===void 0&&(a=!1);var o=new Uint8ClampedArray(r*i);if(e.FRAME_INDEX=!e.FRAME_INDEX,e.FRAME_INDEX||!a)for(var s=0,c=0,f=t.length;s<f;s+=4,c++){var d=void 0,p=t[s+3];if(p===0)d=255;else{var g=t[s],m=t[s+1],x=t[s+2];d=306*g+601*m+117*x+512>>10}o[c]=d}else for(var s=0,c=0,_=t.length;s<_;s+=4,c++){var d=void 0,p=t[s+3];if(p===0)d=255;else{var g=t[s],m=t[s+1],x=t[s+2];d=306*g+601*m+117*x+512>>10}o[c]=255-d}return o},e.prototype.getRow=function(t,r){if(t<0||t>=this.getHeight())throw new Xt("Requested row is outside the image: "+t);var i=this.getWidth(),a=t*i;return r===null?r=this.buffer.slice(a,a+i):(r.length<i&&(r=new Uint8ClampedArray(i)),r.set(this.buffer.slice(a,a+i))),r},e.prototype.getMatrix=function(){return this.buffer},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(t,r,i,a){return n.prototype.crop.call(this,t,r,i,a),this},e.prototype.isRotateSupported=function(){return!0},e.prototype.rotateCounterClockwise=function(){return this.rotate(-90),this},e.prototype.rotateCounterClockwise45=function(){return this.rotate(-45),this},e.prototype.getTempCanvasElement=function(){if(this.tempCanvasElement===null){var t=this.canvas.ownerDocument.createElement("canvas");t.width=this.canvas.width,t.height=this.canvas.height,this.tempCanvasElement=t}return this.tempCanvasElement},e.prototype.rotate=function(t){var r=this.getTempCanvasElement(),i=r.getContext("2d"),a=t*e.DEGREE_TO_RADIANS,o=this.canvas.width,s=this.canvas.height,c=Math.ceil(Math.abs(Math.cos(a))*o+Math.abs(Math.sin(a))*s),f=Math.ceil(Math.abs(Math.sin(a))*o+Math.abs(Math.cos(a))*s);return r.width=c,r.height=f,i.translate(c/2,f/2),i.rotate(a),i.drawImage(this.canvas,o/-2,s/-2),this.buffer=e.makeBufferFromCanvasImageData(r),this},e.prototype.invert=function(){return new J5(this)},e.DEGREE_TO_RADIANS=Math.PI/180,e.FRAME_INDEX=!0,e}(u2),KF=function(){function n(e,t,r){this.deviceId=e,this.label=t,this.kind="videoinput",this.groupId=r||void 0}return n.prototype.toJSON=function(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}},n}(),Co=function(n,e,t,r){function i(a){return a instanceof t?a:new t(function(o){o(a)})}return new(t||(t=Promise))(function(a,o){function s(d){try{f(r.next(d))}catch(p){o(p)}}function c(d){try{f(r.throw(d))}catch(p){o(p)}}function f(d){d.done?a(d.value):i(d.value).then(s,c)}f((r=r.apply(n,e||[])).next())})},Io=function(n,e){var t={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,i,a,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(f){return function(d){return c([f,d])}}function c(f){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,i&&(a=f[0]&2?i.return:f[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,f[1])).done)return a;switch(i=0,a&&(f=[f[0]&2,a.value]),f[0]){case 0:case 1:a=f;break;case 4:return t.label++,{value:f[1],done:!1};case 5:t.label++,i=f[1],f=[0];continue;case 7:f=t.ops.pop(),t.trys.pop();continue;default:if(a=t.trys,!(a=a.length>0&&a[a.length-1])&&(f[0]===6||f[0]===2)){t=0;continue}if(f[0]===3&&(!a||f[1]>a[0]&&f[1]<a[3])){t.label=f[1];break}if(f[0]===6&&t.label<a[1]){t.label=a[1],a=f;break}if(a&&t.label<a[2]){t.label=a[2],t.ops.push(f);break}a[2]&&t.ops.pop(),t.trys.pop();continue}f=e.call(n,t)}catch(d){f=[6,d],i=0}finally{r=a=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}},QF=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Gh=function(){function n(e,t,r){t===void 0&&(t=500),this.reader=e,this.timeBetweenScansMillis=t,this._hints=r,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}return Object.defineProperty(n.prototype,"hasNavigator",{get:function(){return typeof navigator<"u"},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isMediaDevicesSuported",{get:function(){return this.hasNavigator&&!!navigator.mediaDevices},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"canEnumerateDevices",{get:function(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"timeBetweenDecodingAttempts",{get:function(){return this._timeBetweenDecodingAttempts},set:function(e){this._timeBetweenDecodingAttempts=e<0?0:e},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"hints",{get:function(){return this._hints},set:function(e){this._hints=e||null},enumerable:!1,configurable:!0}),n.prototype.listVideoInputDevices=function(){return Co(this,void 0,void 0,function(){var e,t,r,i,a,o,s,c,f,d,p,g;return Io(this,function(m){switch(m.label){case 0:if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");return[4,navigator.mediaDevices.enumerateDevices()];case 1:e=m.sent(),t=[];try{for(r=QF(e),i=r.next();!i.done;i=r.next())a=i.value,o=a.kind==="video"?"videoinput":a.kind,o==="videoinput"&&(s=a.deviceId||a.id,c=a.label||"Video device "+(t.length+1),f=a.groupId,d={deviceId:s,label:c,kind:o,groupId:f},t.push(d))}catch(x){p={error:x}}finally{try{i&&!i.done&&(g=r.return)&&g.call(r)}finally{if(p)throw p.error}}return[2,t]}})})},n.prototype.getVideoInputDevices=function(){return Co(this,void 0,void 0,function(){var e;return Io(this,function(t){switch(t.label){case 0:return[4,this.listVideoInputDevices()];case 1:return e=t.sent(),[2,e.map(function(r){return new KF(r.deviceId,r.label)})]}})})},n.prototype.findDeviceById=function(e){return Co(this,void 0,void 0,function(){var t;return Io(this,function(r){switch(r.label){case 0:return[4,this.listVideoInputDevices()];case 1:return t=r.sent(),t?[2,t.find(function(i){return i.deviceId===e})]:[2,null]}})})},n.prototype.decodeFromInputVideoDevice=function(e,t){return Co(this,void 0,void 0,function(){return Io(this,function(r){switch(r.label){case 0:return[4,this.decodeOnceFromVideoDevice(e,t)];case 1:return[2,r.sent()]}})})},n.prototype.decodeOnceFromVideoDevice=function(e,t){return Co(this,void 0,void 0,function(){var r,i;return Io(this,function(a){switch(a.label){case 0:return this.reset(),e?r={deviceId:{exact:e}}:r={facingMode:"environment"},i={video:r},[4,this.decodeOnceFromConstraints(i,t)];case 1:return[2,a.sent()]}})})},n.prototype.decodeOnceFromConstraints=function(e,t){return Co(this,void 0,void 0,function(){var r;return Io(this,function(i){switch(i.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return r=i.sent(),[4,this.decodeOnceFromStream(r,t)];case 2:return[2,i.sent()]}})})},n.prototype.decodeOnceFromStream=function(e,t){return Co(this,void 0,void 0,function(){var r,i;return Io(this,function(a){switch(a.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,t)];case 1:return r=a.sent(),[4,this.decodeOnce(r)];case 2:return i=a.sent(),[2,i]}})})},n.prototype.decodeFromInputVideoDeviceContinuously=function(e,t,r){return Co(this,void 0,void 0,function(){return Io(this,function(i){switch(i.label){case 0:return[4,this.decodeFromVideoDevice(e,t,r)];case 1:return[2,i.sent()]}})})},n.prototype.decodeFromVideoDevice=function(e,t,r){return Co(this,void 0,void 0,function(){var i,a;return Io(this,function(o){switch(o.label){case 0:return e?i={deviceId:{exact:e}}:i={facingMode:"environment"},a={video:i},[4,this.decodeFromConstraints(a,t,r)];case 1:return[2,o.sent()]}})})},n.prototype.decodeFromConstraints=function(e,t,r){return Co(this,void 0,void 0,function(){var i;return Io(this,function(a){switch(a.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return i=a.sent(),[4,this.decodeFromStream(i,t,r)];case 2:return[2,a.sent()]}})})},n.prototype.decodeFromStream=function(e,t,r){return Co(this,void 0,void 0,function(){var i;return Io(this,function(a){switch(a.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,t)];case 1:return i=a.sent(),[4,this.decodeContinuously(i,r)];case 2:return[2,a.sent()]}})})},n.prototype.stopAsyncDecode=function(){this._stopAsyncDecode=!0},n.prototype.stopContinuousDecode=function(){this._stopContinuousDecode=!0},n.prototype.attachStreamToVideo=function(e,t){return Co(this,void 0,void 0,function(){var r;return Io(this,function(i){switch(i.label){case 0:return r=this.prepareVideoElement(t),this.addVideoSource(r,e),this.videoElement=r,this.stream=e,[4,this.playVideoOnLoadAsync(r)];case 1:return i.sent(),[2,r]}})})},n.prototype.playVideoOnLoadAsync=function(e){var t=this;return new Promise(function(r,i){return t.playVideoOnLoad(e,function(){return r()})})},n.prototype.playVideoOnLoad=function(e,t){var r=this;this.videoEndedListener=function(){return r.stopStreams()},this.videoCanPlayListener=function(){return r.tryPlayVideo(e)},e.addEventListener("ended",this.videoEndedListener),e.addEventListener("canplay",this.videoCanPlayListener),e.addEventListener("playing",t),this.tryPlayVideo(e)},n.prototype.isVideoPlaying=function(e){return e.currentTime>0&&!e.paused&&!e.ended&&e.readyState>2},n.prototype.tryPlayVideo=function(e){return Co(this,void 0,void 0,function(){return Io(this,function(t){switch(t.label){case 0:if(this.isVideoPlaying(e))return console.warn("Trying to play video that is already playing."),[2];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,e.play()];case 2:return t.sent(),[3,4];case 3:return t.sent(),console.warn("It was not possible to play the video."),[3,4];case 4:return[2]}})})},n.prototype.getMediaElement=function(e,t){var r=document.getElementById(e);if(!r)throw new Sl("element with id '"+e+"' not found");if(r.nodeName.toLowerCase()!==t.toLowerCase())throw new Sl("element with id '"+e+"' must be an "+t+" element");return r},n.prototype.decodeFromImage=function(e,t){if(!e&&!t)throw new Sl("either imageElement with a src set or an url must be provided");return t&&!e?this.decodeFromImageUrl(t):this.decodeFromImageElement(e)},n.prototype.decodeFromVideo=function(e,t){if(!e&&!t)throw new Sl("Either an element with a src set or an URL must be provided");return t&&!e?this.decodeFromVideoUrl(t):this.decodeFromVideoElement(e)},n.prototype.decodeFromVideoContinuously=function(e,t,r){if(e===void 0&&t===void 0)throw new Sl("Either an element with a src set or an URL must be provided");return t&&!e?this.decodeFromVideoUrlContinuously(t,r):this.decodeFromVideoElementContinuously(e,r)},n.prototype.decodeFromImageElement=function(e){if(!e)throw new Sl("An image element must be provided.");this.reset();var t=this.prepareImageElement(e);this.imageElement=t;var r;return this.isImageLoaded(t)?r=this.decodeOnce(t,!1,!0):r=this._decodeOnLoadImage(t),r},n.prototype.decodeFromVideoElement=function(e){var t=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideo(t)},n.prototype.decodeFromVideoElementContinuously=function(e,t){var r=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideoContinuously(r,t)},n.prototype._decodeFromVideoElementSetup=function(e){if(!e)throw new Sl("A video element must be provided.");this.reset();var t=this.prepareVideoElement(e);return this.videoElement=t,t},n.prototype.decodeFromImageUrl=function(e){if(!e)throw new Sl("An URL must be provided.");this.reset();var t=this.prepareImageElement();this.imageElement=t;var r=this._decodeOnLoadImage(t);return t.src=e,r},n.prototype.decodeFromVideoUrl=function(e){if(!e)throw new Sl("An URL must be provided.");this.reset();var t=this.prepareVideoElement(),r=this.decodeFromVideoElement(t);return t.src=e,r},n.prototype.decodeFromVideoUrlContinuously=function(e,t){if(!e)throw new Sl("An URL must be provided.");this.reset();var r=this.prepareVideoElement(),i=this.decodeFromVideoElementContinuously(r,t);return r.src=e,i},n.prototype._decodeOnLoadImage=function(e){var t=this;return new Promise(function(r,i){t.imageLoadedListener=function(){return t.decodeOnce(e,!1,!0).then(r,i)},e.addEventListener("load",t.imageLoadedListener)})},n.prototype._decodeOnLoadVideo=function(e){return Co(this,void 0,void 0,function(){return Io(this,function(t){switch(t.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return t.sent(),[4,this.decodeOnce(e)];case 2:return[2,t.sent()]}})})},n.prototype._decodeOnLoadVideoContinuously=function(e,t){return Co(this,void 0,void 0,function(){return Io(this,function(r){switch(r.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return r.sent(),this.decodeContinuously(e,t),[2]}})})},n.prototype.isImageLoaded=function(e){return!(!e.complete||e.naturalWidth===0)},n.prototype.prepareImageElement=function(e){var t;return typeof e>"u"&&(t=document.createElement("img"),t.width=200,t.height=200),typeof e=="string"&&(t=this.getMediaElement(e,"img")),e instanceof HTMLImageElement&&(t=e),t},n.prototype.prepareVideoElement=function(e){var t;return!e&&typeof document<"u"&&(t=document.createElement("video"),t.width=200,t.height=200),typeof e=="string"&&(t=this.getMediaElement(e,"video")),e instanceof HTMLVideoElement&&(t=e),t.setAttribute("autoplay","true"),t.setAttribute("muted","true"),t.setAttribute("playsinline","true"),t},n.prototype.decodeOnce=function(e,t,r){var i=this;t===void 0&&(t=!0),r===void 0&&(r=!0),this._stopAsyncDecode=!1;var a=function(o,s){if(i._stopAsyncDecode){s(new We("Video stream has ended before any code could be detected.")),i._stopAsyncDecode=void 0;return}try{var c=i.decode(e);o(c)}catch(g){var f=t&&g instanceof We,d=g instanceof ya||g instanceof gt,p=d&&r;if(f||p)return setTimeout(a,i._timeBetweenDecodingAttempts,o,s);s(g)}};return new Promise(function(o,s){return a(o,s)})},n.prototype.decodeContinuously=function(e,t){var r=this;this._stopContinuousDecode=!1;var i=function(){if(r._stopContinuousDecode){r._stopContinuousDecode=void 0;return}try{var a=r.decode(e);t(a,null),setTimeout(i,r.timeBetweenScansMillis)}catch(c){t(null,c);var o=c instanceof ya||c instanceof gt,s=c instanceof We;(o||s)&&setTimeout(i,r._timeBetweenDecodingAttempts)}};i()},n.prototype.decode=function(e){var t=this.createBinaryBitmap(e);return this.decodeBitmap(t)},n.prototype.createBinaryBitmap=function(e){this.getCaptureCanvasContext(e);var t=!1;e instanceof HTMLVideoElement?(this.drawFrameOnCanvas(e),t=!0):this.drawImageOnCanvas(e);var r=this.getCaptureCanvas(e),i=new XF(r,t),a=new $F(i);return new kF(a)},n.prototype.getCaptureCanvasContext=function(e){if(!this.captureCanvasContext){var t=this.getCaptureCanvas(e),r=void 0;try{r=t.getContext("2d",{willReadFrequently:!0})}catch{r=t.getContext("2d")}this.captureCanvasContext=r}return this.captureCanvasContext},n.prototype.getCaptureCanvas=function(e){if(!this.captureCanvas){var t=this.createCaptureCanvas(e);this.captureCanvas=t}return this.captureCanvas},n.prototype.drawFrameOnCanvas=function(e,t,r){t===void 0&&(t={sx:0,sy:0,sWidth:e.videoWidth,sHeight:e.videoHeight,dx:0,dy:0,dWidth:e.videoWidth,dHeight:e.videoHeight}),r===void 0&&(r=this.captureCanvasContext),r.drawImage(e,t.sx,t.sy,t.sWidth,t.sHeight,t.dx,t.dy,t.dWidth,t.dHeight)},n.prototype.drawImageOnCanvas=function(e,t,r){t===void 0&&(t={sx:0,sy:0,sWidth:e.naturalWidth,sHeight:e.naturalHeight,dx:0,dy:0,dWidth:e.naturalWidth,dHeight:e.naturalHeight}),r===void 0&&(r=this.captureCanvasContext),r.drawImage(e,t.sx,t.sy,t.sWidth,t.sHeight,t.dx,t.dy,t.dWidth,t.dHeight)},n.prototype.decodeBitmap=function(e){return this.reader.decode(e,this._hints)},n.prototype.createCaptureCanvas=function(e){if(typeof document>"u")return this._destroyCaptureCanvas(),null;var t=document.createElement("canvas"),r,i;return typeof e<"u"&&(e instanceof HTMLVideoElement?(r=e.videoWidth,i=e.videoHeight):e instanceof HTMLImageElement&&(r=e.naturalWidth||e.width,i=e.naturalHeight||e.height)),t.style.width=r+"px",t.style.height=i+"px",t.width=r,t.height=i,t},n.prototype.stopStreams=function(){this.stream&&(this.stream.getVideoTracks().forEach(function(e){return e.stop()}),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()},n.prototype.reset=function(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()},n.prototype._destroyVideoElement=function(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)},n.prototype._destroyImageElement=function(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)},n.prototype._destroyCaptureCanvas=function(){this.captureCanvasContext=void 0,this.captureCanvas=void 0},n.prototype.addVideoSource=function(e,t){try{e.srcObject=t}catch{e.src=URL.createObjectURL(t)}},n.prototype.cleanVideoSource=function(e){try{e.srcObject=null}catch{e.src=""}this.videoElement.removeAttribute("src")},n}(),po=function(){function n(e,t,r,i,a,o){r===void 0&&(r=t==null?0:8*t.length),o===void 0&&(o=jr.currentTimeMillis()),this.text=e,this.rawBytes=t,this.numBits=r,this.resultPoints=i,this.format=a,this.timestamp=o,this.text=e,this.rawBytes=t,r==null?this.numBits=t==null?0:8*t.length:this.numBits=r,this.resultPoints=i,this.format=a,this.resultMetadata=null,o==null?this.timestamp=jr.currentTimeMillis():this.timestamp=o}return n.prototype.getText=function(){return this.text},n.prototype.getRawBytes=function(){return this.rawBytes},n.prototype.getNumBits=function(){return this.numBits},n.prototype.getResultPoints=function(){return this.resultPoints},n.prototype.getBarcodeFormat=function(){return this.format},n.prototype.getResultMetadata=function(){return this.resultMetadata},n.prototype.putMetadata=function(e,t){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(e,t)},n.prototype.putAllMetadata=function(e){e!==null&&(this.resultMetadata===null?this.resultMetadata=e:this.resultMetadata=new Map(e))},n.prototype.addResultPoints=function(e){var t=this.resultPoints;if(t===null)this.resultPoints=e;else if(e!==null&&e.length>0){var r=new Array(t.length+e.length);jr.arraycopy(t,0,r,0,t.length),jr.arraycopy(e,0,r,t.length,e.length),this.resultPoints=r}},n.prototype.getTimestamp=function(){return this.timestamp},n.prototype.toString=function(){return this.text},n}(),ux;(function(n){n[n.AZTEC=0]="AZTEC",n[n.CODABAR=1]="CODABAR",n[n.CODE_39=2]="CODE_39",n[n.CODE_93=3]="CODE_93",n[n.CODE_128=4]="CODE_128",n[n.DATA_MATRIX=5]="DATA_MATRIX",n[n.EAN_8=6]="EAN_8",n[n.EAN_13=7]="EAN_13",n[n.ITF=8]="ITF",n[n.MAXICODE=9]="MAXICODE",n[n.PDF_417=10]="PDF_417",n[n.QR_CODE=11]="QR_CODE",n[n.RSS_14=12]="RSS_14",n[n.RSS_EXPANDED=13]="RSS_EXPANDED",n[n.UPC_A=14]="UPC_A",n[n.UPC_E=15]="UPC_E",n[n.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(ux||(ux={}));const Yt=ux;var fx;(function(n){n[n.OTHER=0]="OTHER",n[n.ORIENTATION=1]="ORIENTATION",n[n.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",n[n.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",n[n.ISSUE_NUMBER=4]="ISSUE_NUMBER",n[n.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",n[n.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",n[n.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",n[n.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",n[n.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",n[n.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(fx||(fx={}));const Fa=fx;var f2=function(){function n(e,t,r,i,a,o){a===void 0&&(a=-1),o===void 0&&(o=-1),this.rawBytes=e,this.text=t,this.byteSegments=r,this.ecLevel=i,this.structuredAppendSequenceNumber=a,this.structuredAppendParity=o,this.numBits=e==null?0:8*e.length}return n.prototype.getRawBytes=function(){return this.rawBytes},n.prototype.getNumBits=function(){return this.numBits},n.prototype.setNumBits=function(e){this.numBits=e},n.prototype.getText=function(){return this.text},n.prototype.getByteSegments=function(){return this.byteSegments},n.prototype.getECLevel=function(){return this.ecLevel},n.prototype.getErrorsCorrected=function(){return this.errorsCorrected},n.prototype.setErrorsCorrected=function(e){this.errorsCorrected=e},n.prototype.getErasures=function(){return this.erasures},n.prototype.setErasures=function(e){this.erasures=e},n.prototype.getOther=function(){return this.other},n.prototype.setOther=function(e){this.other=e},n.prototype.hasStructuredAppend=function(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0},n.prototype.getStructuredAppendParity=function(){return this.structuredAppendParity},n.prototype.getStructuredAppendSequenceNumber=function(){return this.structuredAppendSequenceNumber},n}(),Q0=function(){function n(){}return n.prototype.exp=function(e){return this.expTable[e]},n.prototype.log=function(e){if(e===0)throw new Xt;return this.logTable[e]},n.addOrSubtract=function(e,t){return e^t},n}(),uf=function(){function n(e,t){if(t.length===0)throw new Xt;this.field=e;var r=t.length;if(r>1&&t[0]===0){for(var i=1;i<r&&t[i]===0;)i++;i===r?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(r-i),jr.arraycopy(t,i,this.coefficients,0,this.coefficients.length))}else this.coefficients=t}return n.prototype.getCoefficients=function(){return this.coefficients},n.prototype.getDegree=function(){return this.coefficients.length-1},n.prototype.isZero=function(){return this.coefficients[0]===0},n.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},n.prototype.evaluateAt=function(e){if(e===0)return this.getCoefficient(0);var t=this.coefficients,r;if(e===1){r=0;for(var i=0,a=t.length;i!==a;i++){var o=t[i];r=Q0.addOrSubtract(r,o)}return r}r=t[0];for(var s=t.length,c=this.field,i=1;i<s;i++)r=Q0.addOrSubtract(c.multiply(e,r),t[i]);return r},n.prototype.addOrSubtract=function(e){if(!this.field.equals(e.field))throw new Xt("GenericGFPolys do not have same GenericGF field");if(this.isZero())return e;if(e.isZero())return this;var t=this.coefficients,r=e.coefficients;if(t.length>r.length){var i=t;t=r,r=i}var a=new Int32Array(r.length),o=r.length-t.length;jr.arraycopy(r,0,a,0,o);for(var s=o;s<r.length;s++)a[s]=Q0.addOrSubtract(t[s-o],r[s]);return new n(this.field,a)},n.prototype.multiply=function(e){if(!this.field.equals(e.field))throw new Xt("GenericGFPolys do not have same GenericGF field");if(this.isZero()||e.isZero())return this.field.getZero();for(var t=this.coefficients,r=t.length,i=e.coefficients,a=i.length,o=new Int32Array(r+a-1),s=this.field,c=0;c<r;c++)for(var f=t[c],d=0;d<a;d++)o[c+d]=Q0.addOrSubtract(o[c+d],s.multiply(f,i[d]));return new n(s,o)},n.prototype.multiplyScalar=function(e){if(e===0)return this.field.getZero();if(e===1)return this;for(var t=this.coefficients.length,r=this.field,i=new Int32Array(t),a=this.coefficients,o=0;o<t;o++)i[o]=r.multiply(a[o],e);return new n(r,i)},n.prototype.multiplyByMonomial=function(e,t){if(e<0)throw new Xt;if(t===0)return this.field.getZero();for(var r=this.coefficients,i=r.length,a=new Int32Array(i+e),o=this.field,s=0;s<i;s++)a[s]=o.multiply(r[s],t);return new n(o,a)},n.prototype.divide=function(e){if(!this.field.equals(e.field))throw new Xt("GenericGFPolys do not have same GenericGF field");if(e.isZero())throw new Xt("Divide by 0");for(var t=this.field,r=t.getZero(),i=this,a=e.getCoefficient(e.getDegree()),o=t.inverse(a);i.getDegree()>=e.getDegree()&&!i.isZero();){var s=i.getDegree()-e.getDegree(),c=t.multiply(i.getCoefficient(i.getDegree()),o),f=e.multiplyByMonomial(s,c),d=t.buildMonomial(s,c);r=r.addOrSubtract(d),i=i.addOrSubtract(f)}return[r,i]},n.prototype.toString=function(){for(var e="",t=this.getDegree();t>=0;t--){var r=this.getCoefficient(t);if(r!==0){if(r<0?(e+=" - ",r=-r):e.length>0&&(e+=" + "),t===0||r!==1){var i=this.field.log(r);i===0?e+="1":i===1?e+="a":(e+="a^",e+=i)}t!==0&&(t===1?e+="x":(e+="x^",e+=t))}}return e},n}(),ZF=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),cC=function(n){ZF(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="ArithmeticException",e}(Jo),JF=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Yo=function(n){JF(e,n);function e(t,r,i){var a=n.call(this)||this;a.primitive=t,a.size=r,a.generatorBase=i;for(var o=new Int32Array(r),s=1,c=0;c<r;c++)o[c]=s,s*=2,s>=r&&(s^=t,s&=r-1);a.expTable=o;for(var f=new Int32Array(r),c=0;c<r-1;c++)f[o[c]]=c;return a.logTable=f,a.zero=new uf(a,Int32Array.from([0])),a.one=new uf(a,Int32Array.from([1])),a}return e.prototype.getZero=function(){return this.zero},e.prototype.getOne=function(){return this.one},e.prototype.buildMonomial=function(t,r){if(t<0)throw new Xt;if(r===0)return this.zero;var i=new Int32Array(t+1);return i[0]=r,new uf(this,i)},e.prototype.inverse=function(t){if(t===0)throw new cC;return this.expTable[this.size-this.logTable[t]-1]},e.prototype.multiply=function(t,r){return t===0||r===0?0:this.expTable[(this.logTable[t]+this.logTable[r])%(this.size-1)]},e.prototype.getSize=function(){return this.size},e.prototype.getGeneratorBase=function(){return this.generatorBase},e.prototype.toString=function(){return"GF(0x"+Nn.toHexString(this.primitive)+","+this.size+")"},e.prototype.equals=function(t){return t===this},e.AZTEC_DATA_12=new e(4201,4096,1),e.AZTEC_DATA_10=new e(1033,1024,1),e.AZTEC_DATA_6=new e(67,64,1),e.AZTEC_PARAM=new e(19,16,1),e.QR_CODE_FIELD_256=new e(285,256,0),e.DATA_MATRIX_FIELD_256=new e(301,256,1),e.AZTEC_DATA_8=e.DATA_MATRIX_FIELD_256,e.MAXICODE_FIELD_64=e.AZTEC_DATA_6,e}(Q0),eU=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),ag=function(n){eU(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="ReedSolomonException",e}(Jo),tU=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),G1=function(n){tU(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="IllegalStateException",e}(Jo),d2=function(){function n(e){this.field=e}return n.prototype.decode=function(e,t){for(var r=this.field,i=new uf(r,e),a=new Int32Array(t),o=!0,s=0;s<t;s++){var c=i.evaluateAt(r.exp(s+r.getGeneratorBase()));a[a.length-1-s]=c,c!==0&&(o=!1)}if(!o)for(var f=new uf(r,a),d=this.runEuclideanAlgorithm(r.buildMonomial(t,1),f,t),p=d[0],g=d[1],m=this.findErrorLocations(p),x=this.findErrorMagnitudes(g,m),s=0;s<m.length;s++){var _=e.length-1-r.log(m[s]);if(_<0)throw new ag("Bad error location");e[_]=Yo.addOrSubtract(e[_],x[s])}},n.prototype.runEuclideanAlgorithm=function(e,t,r){if(e.getDegree()<t.getDegree()){var i=e;e=t,t=i}for(var a=this.field,o=e,s=t,c=a.getZero(),f=a.getOne();s.getDegree()>=(r/2|0);){var d=o,p=c;if(o=s,c=f,o.isZero())throw new ag("r_{i-1} was zero");s=d;for(var g=a.getZero(),m=o.getCoefficient(o.getDegree()),x=a.inverse(m);s.getDegree()>=o.getDegree()&&!s.isZero();){var _=s.getDegree()-o.getDegree(),C=a.multiply(s.getCoefficient(s.getDegree()),x);g=g.addOrSubtract(a.buildMonomial(_,C)),s=s.addOrSubtract(o.multiplyByMonomial(_,C))}if(f=g.multiply(c).addOrSubtract(p),s.getDegree()>=o.getDegree())throw new G1("Division algorithm failed to reduce polynomial?")}var S=f.getCoefficient(0);if(S===0)throw new ag("sigmaTilde(0) was zero");var k=a.inverse(S),M=f.multiplyScalar(k),P=s.multiplyScalar(k);return[M,P]},n.prototype.findErrorLocations=function(e){var t=e.getDegree();if(t===1)return Int32Array.from([e.getCoefficient(1)]);for(var r=new Int32Array(t),i=0,a=this.field,o=1;o<a.getSize()&&i<t;o++)e.evaluateAt(o)===0&&(r[i]=a.inverse(o),i++);if(i!==t)throw new ag("Error locator degree does not match number of roots");return r},n.prototype.findErrorMagnitudes=function(e,t){for(var r=t.length,i=new Int32Array(r),a=this.field,o=0;o<r;o++){for(var s=a.inverse(t[o]),c=1,f=0;f<r;f++)if(o!==f){var d=a.multiply(t[f],s),p=(d&1)===0?d|1:d&-2;c=a.multiply(c,p)}i[o]=a.multiply(e.evaluateAt(s),a.inverse(c)),a.getGeneratorBase()!==0&&(i[o]=a.multiply(i[o],s))}return i},n}(),La;(function(n){n[n.UPPER=0]="UPPER",n[n.LOWER=1]="LOWER",n[n.MIXED=2]="MIXED",n[n.DIGIT=3]="DIGIT",n[n.PUNCT=4]="PUNCT",n[n.BINARY=5]="BINARY"})(La||(La={}));var w4=function(){function n(){}return n.prototype.decode=function(e){this.ddata=e;var t=e.getBits(),r=this.extractBits(t),i=this.correctBits(r),a=n.convertBoolArrayToByteArray(i),o=n.getEncodedData(i),s=new f2(a,o,null,null);return s.setNumBits(i.length),s},n.highLevelDecode=function(e){return this.getEncodedData(e)},n.getEncodedData=function(e){for(var t=e.length,r=La.UPPER,i=La.UPPER,a="",o=0;o<t;)if(i===La.BINARY){if(t-o<5)break;var s=n.readCode(e,o,5);if(o+=5,s===0){if(t-o<11)break;s=n.readCode(e,o,11)+31,o+=11}for(var c=0;c<s;c++){if(t-o<8){o=t;break}var f=n.readCode(e,o,8);a+=Yn.castAsNonUtf8Char(f),o+=8}i=r}else{var d=i===La.DIGIT?4:5;if(t-o<d)break;var f=n.readCode(e,o,d);o+=d;var p=n.getCharacter(i,f);p.startsWith("CTRL_")?(r=i,i=n.getTable(p.charAt(5)),p.charAt(6)==="L"&&(r=i)):(a+=p,i=r)}return a},n.getTable=function(e){switch(e){case"L":return La.LOWER;case"P":return La.PUNCT;case"M":return La.MIXED;case"D":return La.DIGIT;case"B":return La.BINARY;case"U":default:return La.UPPER}},n.getCharacter=function(e,t){switch(e){case La.UPPER:return n.UPPER_TABLE[t];case La.LOWER:return n.LOWER_TABLE[t];case La.MIXED:return n.MIXED_TABLE[t];case La.PUNCT:return n.PUNCT_TABLE[t];case La.DIGIT:return n.DIGIT_TABLE[t];default:throw new G1("Bad table")}},n.prototype.correctBits=function(e){var t,r;this.ddata.getNbLayers()<=2?(r=6,t=Yo.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(r=8,t=Yo.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(r=10,t=Yo.AZTEC_DATA_10):(r=12,t=Yo.AZTEC_DATA_12);var i=this.ddata.getNbDatablocks(),a=e.length/r;if(a<i)throw new gt;for(var o=e.length%r,s=new Int32Array(a),c=0;c<a;c++,o+=r)s[c]=n.readCode(e,o,r);try{var f=new d2(t);f.decode(s,a-i)}catch(C){throw new gt(C)}for(var d=(1<<r)-1,p=0,c=0;c<i;c++){var g=s[c];if(g===0||g===d)throw new gt;(g===1||g===d-1)&&p++}for(var m=new Array(i*r-p),x=0,c=0;c<i;c++){var g=s[c];if(g===1||g===d-1)m.fill(g>1,x,x+r-1),x+=r-1;else for(var _=r-1;_>=0;--_)m[x++]=(g&1<<_)!==0}return m},n.prototype.extractBits=function(e){var t=this.ddata.isCompact(),r=this.ddata.getNbLayers(),i=(t?11:14)+r*4,a=new Int32Array(i),o=new Array(this.totalBitsInLayer(r,t));if(t)for(var s=0;s<a.length;s++)a[s]=s;else for(var c=i+1+2*Nn.truncDivision(Nn.truncDivision(i,2)-1,15),f=i/2,d=Nn.truncDivision(c,2),s=0;s<f;s++){var p=s+Nn.truncDivision(s,15);a[f-s-1]=d-p-1,a[f+s]=d+p+1}for(var s=0,g=0;s<r;s++){for(var m=(r-s)*4+(t?9:12),x=s*2,_=i-1-x,C=0;C<m;C++)for(var S=C*2,k=0;k<2;k++)o[g+S+k]=e.get(a[x+k],a[x+C]),o[g+2*m+S+k]=e.get(a[x+C],a[_-k]),o[g+4*m+S+k]=e.get(a[_-k],a[_-C]),o[g+6*m+S+k]=e.get(a[_-C],a[x+k]);g+=m*8}return o},n.readCode=function(e,t,r){for(var i=0,a=t;a<t+r;a++)i<<=1,e[a]&&(i|=1);return i},n.readByte=function(e,t){var r=e.length-t;return r>=8?n.readCode(e,t,8):n.readCode(e,t,r)<<8-r},n.convertBoolArrayToByteArray=function(e){for(var t=new Uint8Array((e.length+7)/8),r=0;r<t.length;r++)t[r]=n.readByte(e,8*r);return t},n.prototype.totalBitsInLayer=function(e,t){return((t?88:112)+16*e)*e},n.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],n.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],n.MIXED_TABLE=["CTRL_PS"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~","","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],n.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],n.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"],n}(),tr=function(){function n(){}return n.round=function(e){return isNaN(e)?0:e<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:e>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:e+(e<0?-.5:.5)|0},n.distance=function(e,t,r,i){var a=e-r,o=t-i;return Math.sqrt(a*a+o*o)},n.sum=function(e){for(var t=0,r=0,i=e.length;r!==i;r++){var a=e[r];t+=a}return t},n}(),dx=function(){function n(){}return n.floatToIntBits=function(e){return e},n.MAX_VALUE=Number.MAX_SAFE_INTEGER,n}(),Mt=function(){function n(e,t){this.x=e,this.y=t}return n.prototype.getX=function(){return this.x},n.prototype.getY=function(){return this.y},n.prototype.equals=function(e){if(e instanceof n){var t=e;return this.x===t.x&&this.y===t.y}return!1},n.prototype.hashCode=function(){return 31*dx.floatToIntBits(this.x)+dx.floatToIntBits(this.y)},n.prototype.toString=function(){return"("+this.x+","+this.y+")"},n.orderBestPatterns=function(e){var t=this.distance(e[0],e[1]),r=this.distance(e[1],e[2]),i=this.distance(e[0],e[2]),a,o,s;if(r>=t&&r>=i?(o=e[0],a=e[1],s=e[2]):i>=r&&i>=t?(o=e[1],a=e[0],s=e[2]):(o=e[2],a=e[0],s=e[1]),this.crossProductZ(a,o,s)<0){var c=a;a=s,s=c}e[0]=a,e[1]=o,e[2]=s},n.distance=function(e,t){return tr.distance(e.x,e.y,t.x,t.y)},n.crossProductZ=function(e,t,r){var i=t.x,a=t.y;return(r.x-i)*(e.y-a)-(r.y-a)*(e.x-i)},n}(),eb=function(){function n(e,t){this.bits=e,this.points=t}return n.prototype.getBits=function(){return this.bits},n.prototype.getPoints=function(){return this.points},n}(),nU=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),rU=function(n){nU(e,n);function e(t,r,i,a,o){var s=n.call(this,t,r)||this;return s.compact=i,s.nbDatablocks=a,s.nbLayers=o,s}return e.prototype.getNbLayers=function(){return this.nbLayers},e.prototype.getNbDatablocks=function(){return this.nbDatablocks},e.prototype.isCompact=function(){return this.compact},e}(eb),hx=function(){function n(e,t,r,i){this.image=e,this.height=e.getHeight(),this.width=e.getWidth(),t==null&&(t=n.INIT_SIZE),r==null&&(r=e.getWidth()/2|0),i==null&&(i=e.getHeight()/2|0);var a=t/2|0;if(this.leftInit=r-a,this.rightInit=r+a,this.upInit=i-a,this.downInit=i+a,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new We}return n.prototype.detect=function(){for(var e=this.leftInit,t=this.rightInit,r=this.upInit,i=this.downInit,a=!1,o=!0,s=!1,c=!1,f=!1,d=!1,p=!1,g=this.width,m=this.height;o;){o=!1;for(var x=!0;(x||!c)&&t<g;)x=this.containsBlackPoint(r,i,t,!1),x?(t++,o=!0,c=!0):c||t++;if(t>=g){a=!0;break}for(var _=!0;(_||!f)&&i<m;)_=this.containsBlackPoint(e,t,i,!0),_?(i++,o=!0,f=!0):f||i++;if(i>=m){a=!0;break}for(var C=!0;(C||!d)&&e>=0;)C=this.containsBlackPoint(r,i,e,!1),C?(e--,o=!0,d=!0):d||e--;if(e<0){a=!0;break}for(var S=!0;(S||!p)&&r>=0;)S=this.containsBlackPoint(e,t,r,!0),S?(r--,o=!0,p=!0):p||r--;if(r<0){a=!0;break}o&&(s=!0)}if(!a&&s){for(var k=t-e,M=null,P=1;M===null&&P<k;P++)M=this.getBlackPointOnSegment(e,i-P,e+P,i);if(M==null)throw new We;for(var Y=null,P=1;Y===null&&P<k;P++)Y=this.getBlackPointOnSegment(e,r+P,e+P,r);if(Y==null)throw new We;for(var z=null,P=1;z===null&&P<k;P++)z=this.getBlackPointOnSegment(t,r+P,t-P,r);if(z==null)throw new We;for(var F=null,P=1;F===null&&P<k;P++)F=this.getBlackPointOnSegment(t,i-P,t-P,i);if(F==null)throw new We;return this.centerEdges(F,M,z,Y)}else throw new We},n.prototype.getBlackPointOnSegment=function(e,t,r,i){for(var a=tr.round(tr.distance(e,t,r,i)),o=(r-e)/a,s=(i-t)/a,c=this.image,f=0;f<a;f++){var d=tr.round(e+f*o),p=tr.round(t+f*s);if(c.get(d,p))return new Mt(d,p)}return null},n.prototype.centerEdges=function(e,t,r,i){var a=e.getX(),o=e.getY(),s=t.getX(),c=t.getY(),f=r.getX(),d=r.getY(),p=i.getX(),g=i.getY(),m=n.CORR;return a<this.width/2?[new Mt(p-m,g+m),new Mt(s+m,c+m),new Mt(f-m,d-m),new Mt(a+m,o-m)]:[new Mt(p+m,g+m),new Mt(s+m,c-m),new Mt(f-m,d+m),new Mt(a-m,o-m)]},n.prototype.containsBlackPoint=function(e,t,r,i){var a=this.image;if(i){for(var o=e;o<=t;o++)if(a.get(o,r))return!0}else for(var s=e;s<=t;s++)if(a.get(r,s))return!0;return!1},n.INIT_SIZE=10,n.CORR=1,n}(),_4=function(){function n(){}return n.checkAndNudgePoints=function(e,t){for(var r=e.getWidth(),i=e.getHeight(),a=!0,o=0;o<t.length&&a;o+=2){var s=Math.floor(t[o]),c=Math.floor(t[o+1]);if(s<-1||s>r||c<-1||c>i)throw new We;a=!1,s===-1?(t[o]=0,a=!0):s===r&&(t[o]=r-1,a=!0),c===-1?(t[o+1]=0,a=!0):c===i&&(t[o+1]=i-1,a=!0)}a=!0;for(var o=t.length-2;o>=0&&a;o-=2){var s=Math.floor(t[o]),c=Math.floor(t[o+1]);if(s<-1||s>r||c<-1||c>i)throw new We;a=!1,s===-1?(t[o]=0,a=!0):s===r&&(t[o]=r-1,a=!0),c===-1?(t[o+1]=0,a=!0):c===i&&(t[o+1]=i-1,a=!0)}},n}(),uC=function(){function n(e,t,r,i,a,o,s,c,f){this.a11=e,this.a21=t,this.a31=r,this.a12=i,this.a22=a,this.a32=o,this.a13=s,this.a23=c,this.a33=f}return n.quadrilateralToQuadrilateral=function(e,t,r,i,a,o,s,c,f,d,p,g,m,x,_,C){var S=n.quadrilateralToSquare(e,t,r,i,a,o,s,c),k=n.squareToQuadrilateral(f,d,p,g,m,x,_,C);return k.times(S)},n.prototype.transformPoints=function(e){for(var t=e.length,r=this.a11,i=this.a12,a=this.a13,o=this.a21,s=this.a22,c=this.a23,f=this.a31,d=this.a32,p=this.a33,g=0;g<t;g+=2){var m=e[g],x=e[g+1],_=a*m+c*x+p;e[g]=(r*m+o*x+f)/_,e[g+1]=(i*m+s*x+d)/_}},n.prototype.transformPointsWithValues=function(e,t){for(var r=this.a11,i=this.a12,a=this.a13,o=this.a21,s=this.a22,c=this.a23,f=this.a31,d=this.a32,p=this.a33,g=e.length,m=0;m<g;m++){var x=e[m],_=t[m],C=a*x+c*_+p;e[m]=(r*x+o*_+f)/C,t[m]=(i*x+s*_+d)/C}},n.squareToQuadrilateral=function(e,t,r,i,a,o,s,c){var f=e-r+a-s,d=t-i+o-c;if(f===0&&d===0)return new n(r-e,a-r,e,i-t,o-i,t,0,0,1);var p=r-a,g=s-a,m=i-o,x=c-o,_=p*x-g*m,C=(f*x-g*d)/_,S=(p*d-f*m)/_;return new n(r-e+C*r,s-e+S*s,e,i-t+C*i,c-t+S*c,t,C,S,1)},n.quadrilateralToSquare=function(e,t,r,i,a,o,s,c){return n.squareToQuadrilateral(e,t,r,i,a,o,s,c).buildAdjoint()},n.prototype.buildAdjoint=function(){return new n(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)},n.prototype.times=function(e){return new n(this.a11*e.a11+this.a21*e.a12+this.a31*e.a13,this.a11*e.a21+this.a21*e.a22+this.a31*e.a23,this.a11*e.a31+this.a21*e.a32+this.a31*e.a33,this.a12*e.a11+this.a22*e.a12+this.a32*e.a13,this.a12*e.a21+this.a22*e.a22+this.a32*e.a23,this.a12*e.a31+this.a22*e.a32+this.a32*e.a33,this.a13*e.a11+this.a23*e.a12+this.a33*e.a13,this.a13*e.a21+this.a23*e.a22+this.a33*e.a23,this.a13*e.a31+this.a23*e.a32+this.a33*e.a33)},n}(),iU=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),aU=function(n){iU(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.sampleGrid=function(t,r,i,a,o,s,c,f,d,p,g,m,x,_,C,S,k,M,P){var Y=uC.quadrilateralToQuadrilateral(a,o,s,c,f,d,p,g,m,x,_,C,S,k,M,P);return this.sampleGridWithTransform(t,r,i,Y)},e.prototype.sampleGridWithTransform=function(t,r,i,a){if(r<=0||i<=0)throw new We;for(var o=new fc(r,i),s=new Float32Array(2*r),c=0;c<i;c++){for(var f=s.length,d=c+.5,p=0;p<f;p+=2)s[p]=p/2+.5,s[p+1]=d;a.transformPoints(s),_4.checkAndNudgePoints(t,s);try{for(var p=0;p<f;p+=2)t.get(Math.floor(s[p]),Math.floor(s[p+1]))&&o.set(p/2,c)}catch{throw new We}}return o},e}(_4),tb=function(){function n(){}return n.setGridSampler=function(e){n.gridSampler=e},n.getInstance=function(){return n.gridSampler},n.gridSampler=new aU,n}(),Ho=function(){function n(e,t){this.x=e,this.y=t}return n.prototype.toResultPoint=function(){return new Mt(this.getX(),this.getY())},n.prototype.getX=function(){return this.x},n.prototype.getY=function(){return this.y},n}(),oU=function(){function n(e){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=e}return n.prototype.detect=function(){return this.detectMirror(!1)},n.prototype.detectMirror=function(e){var t=this.getMatrixCenter(),r=this.getBullsEyeCorners(t);if(e){var i=r[0];r[0]=r[2],r[2]=i}this.extractParameters(r);var a=this.sampleGrid(this.image,r[this.shift%4],r[(this.shift+1)%4],r[(this.shift+2)%4],r[(this.shift+3)%4]),o=this.getMatrixCornerPoints(r);return new rU(a,o,this.compact,this.nbDataBlocks,this.nbLayers)},n.prototype.extractParameters=function(e){if(!this.isValidPoint(e[0])||!this.isValidPoint(e[1])||!this.isValidPoint(e[2])||!this.isValidPoint(e[3]))throw new We;var t=2*this.nbCenterLayers,r=new Int32Array([this.sampleLine(e[0],e[1],t),this.sampleLine(e[1],e[2],t),this.sampleLine(e[2],e[3],t),this.sampleLine(e[3],e[0],t)]);this.shift=this.getRotation(r,t);for(var i=0,a=0;a<4;a++){var o=r[(this.shift+a)%4];this.compact?(i<<=7,i+=o>>1&127):(i<<=10,i+=(o>>2&992)+(o>>1&31))}var s=this.getCorrectedParameterData(i,this.compact);this.compact?(this.nbLayers=(s>>6)+1,this.nbDataBlocks=(s&63)+1):(this.nbLayers=(s>>11)+1,this.nbDataBlocks=(s&2047)+1)},n.prototype.getRotation=function(e,t){var r=0;e.forEach(function(a,o,s){var c=(a>>t-2<<1)+(a&1);r=(r<<3)+c}),r=((r&1)<<11)+(r>>1);for(var i=0;i<4;i++)if(Nn.bitCount(r^this.EXPECTED_CORNER_BITS[i])<=2)return i;throw new We},n.prototype.getCorrectedParameterData=function(e,t){var r,i;t?(r=7,i=2):(r=10,i=4);for(var a=r-i,o=new Int32Array(r),s=r-1;s>=0;--s)o[s]=e&15,e>>=4;try{var c=new d2(Yo.AZTEC_PARAM);c.decode(o,a)}catch{throw new We}for(var f=0,s=0;s<i;s++)f=(f<<4)+o[s];return f},n.prototype.getBullsEyeCorners=function(e){var t=e,r=e,i=e,a=e,o=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){var s=this.getFirstDifferent(t,o,1,-1),c=this.getFirstDifferent(r,o,1,1),f=this.getFirstDifferent(i,o,-1,1),d=this.getFirstDifferent(a,o,-1,-1);if(this.nbCenterLayers>2){var p=this.distancePoint(d,s)*this.nbCenterLayers/(this.distancePoint(a,t)*(this.nbCenterLayers+2));if(p<.75||p>1.25||!this.isWhiteOrBlackRectangle(s,c,f,d))break}t=s,r=c,i=f,a=d,o=!o}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new We;this.compact=this.nbCenterLayers===5;var g=new Mt(t.getX()+.5,t.getY()-.5),m=new Mt(r.getX()+.5,r.getY()+.5),x=new Mt(i.getX()-.5,i.getY()+.5),_=new Mt(a.getX()-.5,a.getY()-.5);return this.expandSquare([g,m,x,_],2*this.nbCenterLayers-3,2*this.nbCenterLayers)},n.prototype.getMatrixCenter=function(){var e,t,r,i;try{var a=new hx(this.image).detect();e=a[0],t=a[1],r=a[2],i=a[3]}catch{var o=this.image.getWidth()/2,s=this.image.getHeight()/2;e=this.getFirstDifferent(new Ho(o+7,s-7),!1,1,-1).toResultPoint(),t=this.getFirstDifferent(new Ho(o+7,s+7),!1,1,1).toResultPoint(),r=this.getFirstDifferent(new Ho(o-7,s+7),!1,-1,1).toResultPoint(),i=this.getFirstDifferent(new Ho(o-7,s-7),!1,-1,-1).toResultPoint()}var c=tr.round((e.getX()+i.getX()+t.getX()+r.getX())/4),f=tr.round((e.getY()+i.getY()+t.getY()+r.getY())/4);try{var a=new hx(this.image,15,c,f).detect();e=a[0],t=a[1],r=a[2],i=a[3]}catch{e=this.getFirstDifferent(new Ho(c+7,f-7),!1,1,-1).toResultPoint(),t=this.getFirstDifferent(new Ho(c+7,f+7),!1,1,1).toResultPoint(),r=this.getFirstDifferent(new Ho(c-7,f+7),!1,-1,1).toResultPoint(),i=this.getFirstDifferent(new Ho(c-7,f-7),!1,-1,-1).toResultPoint()}return c=tr.round((e.getX()+i.getX()+t.getX()+r.getX())/4),f=tr.round((e.getY()+i.getY()+t.getY()+r.getY())/4),new Ho(c,f)},n.prototype.getMatrixCornerPoints=function(e){return this.expandSquare(e,2*this.nbCenterLayers,this.getDimension())},n.prototype.sampleGrid=function(e,t,r,i,a){var o=tb.getInstance(),s=this.getDimension(),c=s/2-this.nbCenterLayers,f=s/2+this.nbCenterLayers;return o.sampleGrid(e,s,s,c,c,f,c,f,f,c,f,t.getX(),t.getY(),r.getX(),r.getY(),i.getX(),i.getY(),a.getX(),a.getY())},n.prototype.sampleLine=function(e,t,r){for(var i=0,a=this.distanceResultPoint(e,t),o=a/r,s=e.getX(),c=e.getY(),f=o*(t.getX()-e.getX())/a,d=o*(t.getY()-e.getY())/a,p=0;p<r;p++)this.image.get(tr.round(s+p*f),tr.round(c+p*d))&&(i|=1<<r-p-1);return i},n.prototype.isWhiteOrBlackRectangle=function(e,t,r,i){var a=3;e=new Ho(e.getX()-a,e.getY()+a),t=new Ho(t.getX()-a,t.getY()-a),r=new Ho(r.getX()+a,r.getY()-a),i=new Ho(i.getX()+a,i.getY()+a);var o=this.getColor(i,e);if(o===0)return!1;var s=this.getColor(e,t);return s!==o||(s=this.getColor(t,r),s!==o)?!1:(s=this.getColor(r,i),s===o)},n.prototype.getColor=function(e,t){for(var r=this.distancePoint(e,t),i=(t.getX()-e.getX())/r,a=(t.getY()-e.getY())/r,o=0,s=e.getX(),c=e.getY(),f=this.image.get(e.getX(),e.getY()),d=Math.ceil(r),p=0;p<d;p++)s+=i,c+=a,this.image.get(tr.round(s),tr.round(c))!==f&&o++;var g=o/r;return g>.1&&g<.9?0:g<=.1===f?1:-1},n.prototype.getFirstDifferent=function(e,t,r,i){for(var a=e.getX()+r,o=e.getY()+i;this.isValid(a,o)&&this.image.get(a,o)===t;)a+=r,o+=i;for(a-=r,o-=i;this.isValid(a,o)&&this.image.get(a,o)===t;)a+=r;for(a-=r;this.isValid(a,o)&&this.image.get(a,o)===t;)o+=i;return o-=i,new Ho(a,o)},n.prototype.expandSquare=function(e,t,r){var i=r/(2*t),a=e[0].getX()-e[2].getX(),o=e[0].getY()-e[2].getY(),s=(e[0].getX()+e[2].getX())/2,c=(e[0].getY()+e[2].getY())/2,f=new Mt(s+i*a,c+i*o),d=new Mt(s-i*a,c-i*o);a=e[1].getX()-e[3].getX(),o=e[1].getY()-e[3].getY(),s=(e[1].getX()+e[3].getX())/2,c=(e[1].getY()+e[3].getY())/2;var p=new Mt(s+i*a,c+i*o),g=new Mt(s-i*a,c-i*o),m=[f,p,d,g];return m},n.prototype.isValid=function(e,t){return e>=0&&e<this.image.getWidth()&&t>0&&t<this.image.getHeight()},n.prototype.isValidPoint=function(e){var t=tr.round(e.getX()),r=tr.round(e.getY());return this.isValid(t,r)},n.prototype.distancePoint=function(e,t){return tr.distance(e.getX(),e.getY(),t.getX(),t.getY())},n.prototype.distanceResultPoint=function(e,t){return tr.distance(e.getX(),e.getY(),t.getX(),t.getY())},n.prototype.getDimension=function(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(Nn.truncDivision(this.nbLayers-4,8)+1)+15},n}(),px=function(){function n(){}return n.prototype.decode=function(e,t){t===void 0&&(t=null);var r=null,i=new oU(e.getBlackMatrix()),a=null,o=null;try{var s=i.detectMirror(!1);a=s.getPoints(),this.reportFoundResultPoints(t,a),o=new w4().decode(s)}catch(p){r=p}if(o==null)try{var s=i.detectMirror(!0);a=s.getPoints(),this.reportFoundResultPoints(t,a),o=new w4().decode(s)}catch(p){throw r??p}var c=new po(o.getText(),o.getRawBytes(),o.getNumBits(),a,Yt.AZTEC,jr.currentTimeMillis()),f=o.getByteSegments();f!=null&&c.putMetadata(Fa.BYTE_SEGMENTS,f);var d=o.getECLevel();return d!=null&&c.putMetadata(Fa.ERROR_CORRECTION_LEVEL,d),c},n.prototype.reportFoundResultPoints=function(e,t){if(e!=null){var r=e.get(ai.NEED_RESULT_POINT_CALLBACK);r!=null&&t.forEach(function(i,a,o){r.foundPossibleResultPoint(i)})}},n.prototype.reset=function(){},n}(),sU=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();(function(n){sU(e,n);function e(t){return t===void 0&&(t=500),n.call(this,new px,t)||this}return e})(Gh);var na=function(){function n(){}return n.prototype.decode=function(e,t){try{return this.doDecode(e,t)}catch{var r=t&&t.get(ai.TRY_HARDER)===!0;if(r&&e.isRotateSupported()){var i=e.rotateCounterClockwise(),a=this.doDecode(i,t),o=a.getResultMetadata(),s=270;o!==null&&o.get(Fa.ORIENTATION)===!0&&(s=s+o.get(Fa.ORIENTATION)%360),a.putMetadata(Fa.ORIENTATION,s);var c=a.getResultPoints();if(c!==null)for(var f=i.getHeight(),d=0;d<c.length;d++)c[d]=new Mt(f-c[d].getY()-1,c[d].getX());return a}else throw new We}},n.prototype.reset=function(){},n.prototype.doDecode=function(e,t){var r=e.getWidth(),i=e.getHeight(),a=new xa(r),o=t&&t.get(ai.TRY_HARDER)===!0,s=Math.max(1,i>>(o?8:5)),c;o?c=i:c=15;for(var f=Math.trunc(i/2),d=0;d<c;d++){var p=Math.trunc((d+1)/2),g=(d&1)===0,m=f+s*(g?p:-p);if(m<0||m>=i)break;try{a=e.getBlackRow(m,a)}catch{continue}for(var x=function(k){if(k===1&&(a.reverse(),t&&t.get(ai.NEED_RESULT_POINT_CALLBACK)===!0)){var M=new Map;t.forEach(function(z,F){return M.set(F,z)}),M.delete(ai.NEED_RESULT_POINT_CALLBACK),t=M}try{var P=_.decodeRow(m,a,t);if(k===1){P.putMetadata(Fa.ORIENTATION,180);var Y=P.getResultPoints();Y!==null&&(Y[0]=new Mt(r-Y[0].getX()-1,Y[0].getY()),Y[1]=new Mt(r-Y[1].getX()-1,Y[1].getY()))}return{value:P}}catch{}},_=this,C=0;C<2;C++){var S=x(C);if(typeof S=="object")return S.value}}throw new We},n.recordPattern=function(e,t,r){for(var i=r.length,a=0;a<i;a++)r[a]=0;var o=e.getSize();if(t>=o)throw new We;for(var s=!e.get(t),c=0,f=t;f<o;){if(e.get(f)!==s)r[c]++;else{if(++c===i)break;r[c]=1,s=!s}f++}if(!(c===i||c===i-1&&f===o))throw new We},n.recordPatternInReverse=function(e,t,r){for(var i=r.length,a=e.get(t);t>0&&i>=0;)e.get(--t)!==a&&(i--,a=!a);if(i>=0)throw new We;n.recordPattern(e,t+1,r)},n.patternMatchVariance=function(e,t,r){for(var i=e.length,a=0,o=0,s=0;s<i;s++)a+=e[s],o+=t[s];if(a<o)return Number.POSITIVE_INFINITY;var c=a/o;r*=c;for(var f=0,d=0;d<i;d++){var p=e[d],g=t[d]*c,m=p>g?p-g:g-p;if(m>r)return Number.POSITIVE_INFINITY;f+=m}return f/a},n}(),lU=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),A4=function(n){lU(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.findStartPattern=function(t){for(var r=t.getSize(),i=t.getNextSet(0),a=0,o=Int32Array.from([0,0,0,0,0,0]),s=i,c=!1,f=6,d=i;d<r;d++)if(t.get(d)!==c)o[a]++;else{if(a===f-1){for(var p=e.MAX_AVG_VARIANCE,g=-1,m=e.CODE_START_A;m<=e.CODE_START_C;m++){var x=na.patternMatchVariance(o,e.CODE_PATTERNS[m],e.MAX_INDIVIDUAL_VARIANCE);x<p&&(p=x,g=m)}if(g>=0&&t.isRange(Math.max(0,s-(d-s)/2),s,!1))return Int32Array.from([s,d,g]);s+=o[0]+o[1],o=o.slice(2,o.length),o[a-1]=0,o[a]=0,a--}else a++;o[a]=1,c=!c}throw new We},e.decodeCode=function(t,r,i){na.recordPattern(t,i,r);for(var a=e.MAX_AVG_VARIANCE,o=-1,s=0;s<e.CODE_PATTERNS.length;s++){var c=e.CODE_PATTERNS[s],f=this.patternMatchVariance(r,c,e.MAX_INDIVIDUAL_VARIANCE);f<a&&(a=f,o=s)}if(o>=0)return o;throw new We},e.prototype.decodeRow=function(t,r,i){var a=i&&i.get(ai.ASSUME_GS1)===!0,o=e.findStartPattern(r),s=o[2],c=0,f=new Uint8Array(20);f[c++]=s;var d;switch(s){case e.CODE_START_A:d=e.CODE_CODE_A;break;case e.CODE_START_B:d=e.CODE_CODE_B;break;case e.CODE_START_C:d=e.CODE_CODE_C;break;default:throw new gt}for(var p=!1,g=!1,m="",x=o[0],_=o[1],C=Int32Array.from([0,0,0,0,0,0]),S=0,k=0,M=s,P=0,Y=!0,z=!1,F=!1;!p;){var I=g;switch(g=!1,S=k,k=e.decodeCode(r,C,_),f[c++]=k,k!==e.CODE_STOP&&(Y=!0),k!==e.CODE_STOP&&(P++,M+=P*k),x=_,_+=C.reduce(function(H,te){return H+te},0),k){case e.CODE_START_A:case e.CODE_START_B:case e.CODE_START_C:throw new gt}switch(d){case e.CODE_CODE_A:if(k<64)F===z?m+=String.fromCharCode(32+k):m+=String.fromCharCode(32+k+128),F=!1;else if(k<96)F===z?m+=String.fromCharCode(k-64):m+=String.fromCharCode(k+64),F=!1;else switch(k!==e.CODE_STOP&&(Y=!1),k){case e.CODE_FNC_1:a&&(m.length===0?m+="]C1":m+="");break;case e.CODE_FNC_2:case e.CODE_FNC_3:break;case e.CODE_FNC_4_A:!z&&F?(z=!0,F=!1):z&&F?(z=!1,F=!1):F=!0;break;case e.CODE_SHIFT:g=!0,d=e.CODE_CODE_B;break;case e.CODE_CODE_B:d=e.CODE_CODE_B;break;case e.CODE_CODE_C:d=e.CODE_CODE_C;break;case e.CODE_STOP:p=!0;break}break;case e.CODE_CODE_B:if(k<96)F===z?m+=String.fromCharCode(32+k):m+=String.fromCharCode(32+k+128),F=!1;else switch(k!==e.CODE_STOP&&(Y=!1),k){case e.CODE_FNC_1:a&&(m.length===0?m+="]C1":m+="");break;case e.CODE_FNC_2:case e.CODE_FNC_3:break;case e.CODE_FNC_4_B:!z&&F?(z=!0,F=!1):z&&F?(z=!1,F=!1):F=!0;break;case e.CODE_SHIFT:g=!0,d=e.CODE_CODE_A;break;case e.CODE_CODE_A:d=e.CODE_CODE_A;break;case e.CODE_CODE_C:d=e.CODE_CODE_C;break;case e.CODE_STOP:p=!0;break}break;case e.CODE_CODE_C:if(k<100)k<10&&(m+="0"),m+=k;else switch(k!==e.CODE_STOP&&(Y=!1),k){case e.CODE_FNC_1:a&&(m.length===0?m+="]C1":m+="");break;case e.CODE_CODE_A:d=e.CODE_CODE_A;break;case e.CODE_CODE_B:d=e.CODE_CODE_B;break;case e.CODE_STOP:p=!0;break}break}I&&(d=d===e.CODE_CODE_A?e.CODE_CODE_B:e.CODE_CODE_A)}var T=_-x;if(_=r.getNextUnset(_),!r.isRange(_,Math.min(r.getSize(),_+(_-x)/2),!1))throw new We;if(M-=P*S,M%103!==S)throw new ya;var j=m.length;if(j===0)throw new We;j>0&&Y&&(d===e.CODE_CODE_C?m=m.substring(0,j-2):m=m.substring(0,j-1));for(var N=(o[1]+o[0])/2,R=x+T/2,D=f.length,L=new Uint8Array(D),G=0;G<D;G++)L[G]=f[G];var U=[new Mt(N,t),new Mt(R,t)];return new po(m,L,0,U,Yt.CODE_128,new Date().getTime())},e.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],e.MAX_AVG_VARIANCE=.25,e.MAX_INDIVIDUAL_VARIANCE=.7,e.CODE_SHIFT=98,e.CODE_CODE_C=99,e.CODE_CODE_B=100,e.CODE_CODE_A=101,e.CODE_FNC_1=102,e.CODE_FNC_2=97,e.CODE_FNC_3=96,e.CODE_FNC_4_A=101,e.CODE_FNC_4_B=100,e.CODE_START_A=103,e.CODE_START_B=104,e.CODE_START_C=105,e.CODE_STOP=106,e}(na),cU=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Yv=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},S4=function(n){cU(e,n);function e(t,r){t===void 0&&(t=!1),r===void 0&&(r=!1);var i=n.call(this)||this;return i.usingCheckDigit=t,i.extendedMode=r,i.decodeRowResult="",i.counters=new Int32Array(9),i}return e.prototype.decodeRow=function(t,r,i){var a,o,s,c,f=this.counters;f.fill(0),this.decodeRowResult="";var d=e.findAsteriskPattern(r,f),p=r.getNextSet(d[1]),g=r.getSize(),m,x;do{e.recordPattern(r,p,f);var _=e.toNarrowWidePattern(f);if(_<0)throw new We;m=e.patternToChar(_),this.decodeRowResult+=m,x=p;try{for(var C=(a=void 0,Yv(f)),S=C.next();!S.done;S=C.next()){var k=S.value;p+=k}}catch(D){a={error:D}}finally{try{S&&!S.done&&(o=C.return)&&o.call(C)}finally{if(a)throw a.error}}p=r.getNextSet(p)}while(m!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var M=0;try{for(var P=Yv(f),Y=P.next();!Y.done;Y=P.next()){var k=Y.value;M+=k}}catch(D){s={error:D}}finally{try{Y&&!Y.done&&(c=P.return)&&c.call(P)}finally{if(s)throw s.error}}var z=p-x-M;if(p!==g&&z*2<M)throw new We;if(this.usingCheckDigit){for(var F=this.decodeRowResult.length-1,I=0,T=0;T<F;T++)I+=e.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(T));if(this.decodeRowResult.charAt(F)!==e.ALPHABET_STRING.charAt(I%43))throw new ya;this.decodeRowResult=this.decodeRowResult.substring(0,F)}if(this.decodeRowResult.length===0)throw new We;var j;this.extendedMode?j=e.decodeExtended(this.decodeRowResult):j=this.decodeRowResult;var N=(d[1]+d[0])/2,R=x+M/2;return new po(j,null,0,[new Mt(N,t),new Mt(R,t)],Yt.CODE_39,new Date().getTime())},e.findAsteriskPattern=function(t,r){for(var i=t.getSize(),a=t.getNextSet(0),o=0,s=a,c=!1,f=r.length,d=a;d<i;d++)if(t.get(d)!==c)r[o]++;else{if(o===f-1){if(this.toNarrowWidePattern(r)===e.ASTERISK_ENCODING&&t.isRange(Math.max(0,s-Math.floor((d-s)/2)),s,!1))return[s,d];s+=r[0]+r[1],r.copyWithin(0,2,2+o-1),r[o-1]=0,r[o]=0,o--}else o++;r[o]=1,c=!c}throw new We},e.toNarrowWidePattern=function(t){var r,i,a=t.length,o=0,s;do{var c=2147483647;try{for(var f=(r=void 0,Yv(t)),d=f.next();!d.done;d=f.next()){var p=d.value;p<c&&p>o&&(c=p)}}catch(_){r={error:_}}finally{try{d&&!d.done&&(i=f.return)&&i.call(f)}finally{if(r)throw r.error}}o=c,s=0;for(var g=0,m=0,x=0;x<a;x++){var p=t[x];p>o&&(m|=1<<a-1-x,s++,g+=p)}if(s===3){for(var x=0;x<a&&s>0;x++){var p=t[x];if(p>o&&(s--,p*2>=g))return-1}return m}}while(s>3);return-1},e.patternToChar=function(t){for(var r=0;r<e.CHARACTER_ENCODINGS.length;r++)if(e.CHARACTER_ENCODINGS[r]===t)return e.ALPHABET_STRING.charAt(r);if(t===e.ASTERISK_ENCODING)return"*";throw new We},e.decodeExtended=function(t){for(var r=t.length,i="",a=0;a<r;a++){var o=t.charAt(a);if(o==="+"||o==="$"||o==="%"||o==="/"){var s=t.charAt(a+1),c="\0";switch(o){case"+":if(s>="A"&&s<="Z")c=String.fromCharCode(s.charCodeAt(0)+32);else throw new gt;break;case"$":if(s>="A"&&s<="Z")c=String.fromCharCode(s.charCodeAt(0)-64);else throw new gt;break;case"%":if(s>="A"&&s<="E")c=String.fromCharCode(s.charCodeAt(0)-38);else if(s>="F"&&s<="J")c=String.fromCharCode(s.charCodeAt(0)-11);else if(s>="K"&&s<="O")c=String.fromCharCode(s.charCodeAt(0)+16);else if(s>="P"&&s<="T")c=String.fromCharCode(s.charCodeAt(0)+43);else if(s==="U")c="\0";else if(s==="V")c="@";else if(s==="W")c="`";else if(s==="X"||s==="Y"||s==="Z")c="";else throw new gt;break;case"/":if(s>="A"&&s<="O")c=String.fromCharCode(s.charCodeAt(0)-32);else if(s==="Z")c=":";else throw new gt;break}i+=c,a++}else i+=o}return i},e.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",e.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],e.ASTERISK_ENCODING=148,e}(na),uU=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Xv=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},E4=function(n){uU(e,n);function e(){var t=n.call(this)||this;return t.decodeRowResult="",t.counters=new Int32Array(6),t}return e.prototype.decodeRow=function(t,r,i){var a,o,s,c,f=this.findAsteriskPattern(r),d=r.getNextSet(f[1]),p=r.getSize(),g=this.counters;g.fill(0),this.decodeRowResult="";var m,x;do{e.recordPattern(r,d,g);var _=this.toPattern(g);if(_<0)throw new We;m=this.patternToChar(_),this.decodeRowResult+=m,x=d;try{for(var C=(a=void 0,Xv(g)),S=C.next();!S.done;S=C.next()){var k=S.value;d+=k}}catch(T){a={error:T}}finally{try{S&&!S.done&&(o=C.return)&&o.call(C)}finally{if(a)throw a.error}}d=r.getNextSet(d)}while(m!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var M=0;try{for(var P=Xv(g),Y=P.next();!Y.done;Y=P.next()){var k=Y.value;M+=k}}catch(T){s={error:T}}finally{try{Y&&!Y.done&&(c=P.return)&&c.call(P)}finally{if(s)throw s.error}}if(d===p||!r.get(d))throw new We;if(this.decodeRowResult.length<2)throw new We;this.checkChecksums(this.decodeRowResult),this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-2);var z=this.decodeExtended(this.decodeRowResult),F=(f[1]+f[0])/2,I=x+M/2;return new po(z,null,0,[new Mt(F,t),new Mt(I,t)],Yt.CODE_93,new Date().getTime())},e.prototype.findAsteriskPattern=function(t){var r=t.getSize(),i=t.getNextSet(0);this.counters.fill(0);for(var a=this.counters,o=i,s=!1,c=a.length,f=0,d=i;d<r;d++)if(t.get(d)!==s)a[f]++;else{if(f===c-1){if(this.toPattern(a)===e.ASTERISK_ENCODING)return new Int32Array([o,d]);o+=a[0]+a[1],a.copyWithin(0,2,2+f-1),a[f-1]=0,a[f]=0,f--}else f++;a[f]=1,s=!s}throw new We},e.prototype.toPattern=function(t){var r,i,a=0;try{for(var o=Xv(t),s=o.next();!s.done;s=o.next()){var c=s.value;a+=c}}catch(x){r={error:x}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}for(var f=0,d=t.length,p=0;p<d;p++){var g=Math.round(t[p]*9/a);if(g<1||g>4)return-1;if((p&1)===0)for(var m=0;m<g;m++)f=f<<1|1;else f<<=g}return f},e.prototype.patternToChar=function(t){for(var r=0;r<e.CHARACTER_ENCODINGS.length;r++)if(e.CHARACTER_ENCODINGS[r]===t)return e.ALPHABET_STRING.charAt(r);throw new We},e.prototype.decodeExtended=function(t){for(var r=t.length,i="",a=0;a<r;a++){var o=t.charAt(a);if(o>="a"&&o<="d"){if(a>=r-1)throw new gt;var s=t.charAt(a+1),c="\0";switch(o){case"d":if(s>="A"&&s<="Z")c=String.fromCharCode(s.charCodeAt(0)+32);else throw new gt;break;case"a":if(s>="A"&&s<="Z")c=String.fromCharCode(s.charCodeAt(0)-64);else throw new gt;break;case"b":if(s>="A"&&s<="E")c=String.fromCharCode(s.charCodeAt(0)-38);else if(s>="F"&&s<="J")c=String.fromCharCode(s.charCodeAt(0)-11);else if(s>="K"&&s<="O")c=String.fromCharCode(s.charCodeAt(0)+16);else if(s>="P"&&s<="T")c=String.fromCharCode(s.charCodeAt(0)+43);else if(s==="U")c="\0";else if(s==="V")c="@";else if(s==="W")c="`";else if(s>="X"&&s<="Z")c="";else throw new gt;break;case"c":if(s>="A"&&s<="O")c=String.fromCharCode(s.charCodeAt(0)-32);else if(s==="Z")c=":";else throw new gt;break}i+=c,a++}else i+=o}return i},e.prototype.checkChecksums=function(t){var r=t.length;this.checkOneChecksum(t,r-2,20),this.checkOneChecksum(t,r-1,15)},e.prototype.checkOneChecksum=function(t,r,i){for(var a=1,o=0,s=r-1;s>=0;s--)o+=a*e.ALPHABET_STRING.indexOf(t.charAt(s)),++a>i&&(a=1);if(t.charAt(r)!==e.ALPHABET_STRING[o%47])throw new ya},e.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%abcd*",e.CHARACTER_ENCODINGS=[276,328,324,322,296,292,290,336,274,266,424,420,418,404,402,394,360,356,354,308,282,344,332,326,300,278,436,434,428,422,406,410,364,358,310,314,302,468,466,458,366,374,430,294,474,470,306,350],e.ASTERISK_ENCODING=e.CHARACTER_ENCODINGS[47],e}(na),fU=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),dU=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},C4=function(n){fU(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.narrowLineWidth=-1,t}return e.prototype.decodeRow=function(t,r,i){var a,o,s=this.decodeStart(r),c=this.decodeEnd(r),f=new En;e.decodeMiddle(r,s[1],c[0],f);var d=f.toString(),p=null;i!=null&&(p=i.get(ai.ALLOWED_LENGTHS)),p==null&&(p=e.DEFAULT_ALLOWED_LENGTHS);var g=d.length,m=!1,x=0;try{for(var _=dU(p),C=_.next();!C.done;C=_.next()){var S=C.value;if(g===S){m=!0;break}S>x&&(x=S)}}catch(P){a={error:P}}finally{try{C&&!C.done&&(o=_.return)&&o.call(_)}finally{if(a)throw a.error}}if(!m&&g>x&&(m=!0),!m)throw new gt;var k=[new Mt(s[1],t),new Mt(c[0],t)],M=new po(d,null,0,k,Yt.ITF,new Date().getTime());return M},e.decodeMiddle=function(t,r,i,a){var o=new Int32Array(10),s=new Int32Array(5),c=new Int32Array(5);for(o.fill(0),s.fill(0),c.fill(0);r<i;){na.recordPattern(t,r,o);for(var f=0;f<5;f++){var d=2*f;s[f]=o[d],c[f]=o[d+1]}var p=e.decodeDigit(s);a.append(p.toString()),p=this.decodeDigit(c),a.append(p.toString()),o.forEach(function(g){r+=g})}},e.prototype.decodeStart=function(t){var r=e.skipWhiteSpace(t),i=e.findGuardPattern(t,r,e.START_PATTERN);return this.narrowLineWidth=(i[1]-i[0])/4,this.validateQuietZone(t,i[0]),i},e.prototype.validateQuietZone=function(t,r){var i=this.narrowLineWidth*10;i=i<r?i:r;for(var a=r-1;i>0&&a>=0&&!t.get(a);a--)i--;if(i!==0)throw new We},e.skipWhiteSpace=function(t){var r=t.getSize(),i=t.getNextSet(0);if(i===r)throw new We;return i},e.prototype.decodeEnd=function(t){t.reverse();try{var r=e.skipWhiteSpace(t),i=void 0;try{i=e.findGuardPattern(t,r,e.END_PATTERN_REVERSED[0])}catch(o){o instanceof We&&(i=e.findGuardPattern(t,r,e.END_PATTERN_REVERSED[1]))}this.validateQuietZone(t,i[0]);var a=i[0];return i[0]=t.getSize()-i[1],i[1]=t.getSize()-a,i}finally{t.reverse()}},e.findGuardPattern=function(t,r,i){var a=i.length,o=new Int32Array(a),s=t.getSize(),c=!1,f=0,d=r;o.fill(0);for(var p=r;p<s;p++)if(t.get(p)!==c)o[f]++;else{if(f===a-1){if(na.patternMatchVariance(o,i,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return[d,p];d+=o[0]+o[1],jr.arraycopy(o,2,o,0,f-1),o[f-1]=0,o[f]=0,f--}else f++;o[f]=1,c=!c}throw new We},e.decodeDigit=function(t){for(var r=e.MAX_AVG_VARIANCE,i=-1,a=e.PATTERNS.length,o=0;o<a;o++){var s=e.PATTERNS[o],c=na.patternMatchVariance(t,s,e.MAX_INDIVIDUAL_VARIANCE);c<r?(r=c,i=o):c===r&&(i=-1)}if(i>=0)return i%10;throw new We},e.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],e.MAX_AVG_VARIANCE=.38,e.MAX_INDIVIDUAL_VARIANCE=.5,e.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],e.START_PATTERN=Int32Array.from([1,1,1,1]),e.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])],e}(na),hU=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Mh=function(n){hU(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.decodeRowStringBuffer="",t}return e.findStartGuardPattern=function(t){for(var r=!1,i,a=0,o=Int32Array.from([0,0,0]);!r;){o=Int32Array.from([0,0,0]),i=e.findGuardPattern(t,a,!1,this.START_END_PATTERN,o);var s=i[0];a=i[1];var c=s-(a-s);c>=0&&(r=t.isRange(c,s,!1))}return i},e.checkChecksum=function(t){return e.checkStandardUPCEANChecksum(t)},e.checkStandardUPCEANChecksum=function(t){var r=t.length;if(r===0)return!1;var i=parseInt(t.charAt(r-1),10);return e.getStandardUPCEANChecksum(t.substring(0,r-1))===i},e.getStandardUPCEANChecksum=function(t){for(var r=t.length,i=0,a=r-1;a>=0;a-=2){var o=t.charAt(a).charCodeAt(0)-48;if(o<0||o>9)throw new gt;i+=o}i*=3;for(var a=r-2;a>=0;a-=2){var o=t.charAt(a).charCodeAt(0)-48;if(o<0||o>9)throw new gt;i+=o}return(1e3-i)%10},e.decodeEnd=function(t,r){return e.findGuardPattern(t,r,!1,e.START_END_PATTERN,new Int32Array(e.START_END_PATTERN.length).fill(0))},e.findGuardPatternWithoutCounters=function(t,r,i,a){return this.findGuardPattern(t,r,i,a,new Int32Array(a.length))},e.findGuardPattern=function(t,r,i,a,o){var s=t.getSize();r=i?t.getNextUnset(r):t.getNextSet(r);for(var c=0,f=r,d=a.length,p=i,g=r;g<s;g++)if(t.get(g)!==p)o[c]++;else{if(c===d-1){if(na.patternMatchVariance(o,a,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return Int32Array.from([f,g]);f+=o[0]+o[1];for(var m=o.slice(2,o.length),x=0;x<c-1;x++)o[x]=m[x];o[c-1]=0,o[c]=0,c--}else c++;o[c]=1,p=!p}throw new We},e.decodeDigit=function(t,r,i,a){this.recordPattern(t,i,r);for(var o=this.MAX_AVG_VARIANCE,s=-1,c=a.length,f=0;f<c;f++){var d=a[f],p=na.patternMatchVariance(r,d,e.MAX_INDIVIDUAL_VARIANCE);p<o&&(o=p,s=f)}if(s>=0)return s;throw new We},e.MAX_AVG_VARIANCE=.48,e.MAX_INDIVIDUAL_VARIANCE=.7,e.START_END_PATTERN=Int32Array.from([1,1,1]),e.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),e.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),e.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])],e}(na),pU=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},gU=function(){function n(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return n.prototype.decodeRow=function(e,t,r){var i=this.decodeRowStringBuffer,a=this.decodeMiddle(t,r,i),o=i.toString(),s=n.parseExtensionString(o),c=[new Mt((r[0]+r[1])/2,e),new Mt(a,e)],f=new po(o,null,0,c,Yt.UPC_EAN_EXTENSION,new Date().getTime());return s!=null&&f.putAllMetadata(s),f},n.prototype.decodeMiddle=function(e,t,r){var i,a,o=this.decodeMiddleCounters;o[0]=0,o[1]=0,o[2]=0,o[3]=0;for(var s=e.getSize(),c=t[1],f=0,d=0;d<5&&c<s;d++){var p=Mh.decodeDigit(e,o,c,Mh.L_AND_G_PATTERNS);r+=String.fromCharCode(48+p%10);try{for(var g=(i=void 0,pU(o)),m=g.next();!m.done;m=g.next()){var x=m.value;c+=x}}catch(C){i={error:C}}finally{try{m&&!m.done&&(a=g.return)&&a.call(g)}finally{if(i)throw i.error}}p>=10&&(f|=1<<4-d),d!==4&&(c=e.getNextSet(c),c=e.getNextUnset(c))}if(r.length!==5)throw new We;var _=this.determineCheckDigit(f);if(n.extensionChecksum(r.toString())!==_)throw new We;return c},n.extensionChecksum=function(e){for(var t=e.length,r=0,i=t-2;i>=0;i-=2)r+=e.charAt(i).charCodeAt(0)-48;r*=3;for(var i=t-1;i>=0;i-=2)r+=e.charAt(i).charCodeAt(0)-48;return r*=3,r%10},n.prototype.determineCheckDigit=function(e){for(var t=0;t<10;t++)if(e===this.CHECK_DIGIT_ENCODINGS[t])return t;throw new We},n.parseExtensionString=function(e){if(e.length!==5)return null;var t=n.parseExtension5String(e);return t==null?null:new Map([[Fa.SUGGESTED_PRICE,t]])},n.parseExtension5String=function(e){var t;switch(e.charAt(0)){case"0":t="";break;case"5":t="$";break;case"9":switch(e){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}t="";break;default:t="";break}var r=parseInt(e.substring(1)),i=(r/100).toString(),a=r%100,o=a<10?"0"+a:a.toString();return t+i+"."+o},n}(),mU=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},vU=function(){function n(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return n.prototype.decodeRow=function(e,t,r){var i=this.decodeRowStringBuffer,a=this.decodeMiddle(t,r,i),o=i.toString(),s=n.parseExtensionString(o),c=[new Mt((r[0]+r[1])/2,e),new Mt(a,e)],f=new po(o,null,0,c,Yt.UPC_EAN_EXTENSION,new Date().getTime());return s!=null&&f.putAllMetadata(s),f},n.prototype.decodeMiddle=function(e,t,r){var i,a,o=this.decodeMiddleCounters;o[0]=0,o[1]=0,o[2]=0,o[3]=0;for(var s=e.getSize(),c=t[1],f=0,d=0;d<2&&c<s;d++){var p=Mh.decodeDigit(e,o,c,Mh.L_AND_G_PATTERNS);r+=String.fromCharCode(48+p%10);try{for(var g=(i=void 0,mU(o)),m=g.next();!m.done;m=g.next()){var x=m.value;c+=x}}catch(_){i={error:_}}finally{try{m&&!m.done&&(a=g.return)&&a.call(g)}finally{if(i)throw i.error}}p>=10&&(f|=1<<1-d),d!==1&&(c=e.getNextSet(c),c=e.getNextUnset(c))}if(r.length!==2)throw new We;if(parseInt(r.toString())%4!==f)throw new We;return c},n.parseExtensionString=function(e){return e.length!==2?null:new Map([[Fa.ISSUE_NUMBER,parseInt(e)]])},n}(),yU=function(){function n(){}return n.decodeRow=function(e,t,r){var i=Mh.findGuardPattern(t,r,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{var a=new gU;return a.decodeRow(e,t,i)}catch{var o=new vU;return o.decodeRow(e,t,i)}},n.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]),n}(),xU=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Ji=function(n){xU(e,n);function e(){var t=n.call(this)||this;t.decodeRowStringBuffer="",e.L_AND_G_PATTERNS=e.L_PATTERNS.map(function(s){return Int32Array.from(s)});for(var r=10;r<20;r++){for(var i=e.L_PATTERNS[r-10],a=new Int32Array(i.length),o=0;o<i.length;o++)a[o]=i[i.length-o-1];e.L_AND_G_PATTERNS[r]=a}return t}return e.prototype.decodeRow=function(t,r,i){var a=e.findStartGuardPattern(r),o=i==null?null:i.get(ai.NEED_RESULT_POINT_CALLBACK);if(o!=null){var s=new Mt((a[0]+a[1])/2,t);o.foundPossibleResultPoint(s)}var c=this.decodeMiddle(r,a,this.decodeRowStringBuffer),f=c.rowOffset,d=c.resultString;if(o!=null){var p=new Mt(f,t);o.foundPossibleResultPoint(p)}var g=e.decodeEnd(r,f);if(o!=null){var m=new Mt((g[0]+g[1])/2,t);o.foundPossibleResultPoint(m)}var x=g[1],_=x+(x-g[0]);if(_>=r.getSize()||!r.isRange(x,_,!1))throw new We;var C=d.toString();if(C.length<8)throw new gt;if(!e.checkChecksum(C))throw new ya;var S=(a[1]+a[0])/2,k=(g[1]+g[0])/2,M=this.getBarcodeFormat(),P=[new Mt(S,t),new Mt(k,t)],Y=new po(C,null,0,P,M,new Date().getTime()),z=0;try{var F=yU.decodeRow(t,r,g[1]);Y.putMetadata(Fa.UPC_EAN_EXTENSION,F.getText()),Y.putAllMetadata(F.getResultMetadata()),Y.addResultPoints(F.getResultPoints()),z=F.getText().length}catch{}var I=i==null?null:i.get(ai.ALLOWED_EAN_EXTENSIONS);if(I!=null){var T=!1;for(var j in I)if(z.toString()===j){T=!0;break}if(!T)throw new We}return M===Yt.EAN_13||Yt.UPC_A,Y},e.checkChecksum=function(t){return e.checkStandardUPCEANChecksum(t)},e.checkStandardUPCEANChecksum=function(t){var r=t.length;if(r===0)return!1;var i=parseInt(t.charAt(r-1),10);return e.getStandardUPCEANChecksum(t.substring(0,r-1))===i},e.getStandardUPCEANChecksum=function(t){for(var r=t.length,i=0,a=r-1;a>=0;a-=2){var o=t.charAt(a).charCodeAt(0)-48;if(o<0||o>9)throw new gt;i+=o}i*=3;for(var a=r-2;a>=0;a-=2){var o=t.charAt(a).charCodeAt(0)-48;if(o<0||o>9)throw new gt;i+=o}return(1e3-i)%10},e.decodeEnd=function(t,r){return e.findGuardPattern(t,r,!1,e.START_END_PATTERN,new Int32Array(e.START_END_PATTERN.length).fill(0))},e}(Mh),bU=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),I4=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},gx=function(n){bU(e,n);function e(){var t=n.call(this)||this;return t.decodeMiddleCounters=Int32Array.from([0,0,0,0]),t}return e.prototype.decodeMiddle=function(t,r,i){var a,o,s,c,f=this.decodeMiddleCounters;f[0]=0,f[1]=0,f[2]=0,f[3]=0;for(var d=t.getSize(),p=r[1],g=0,m=0;m<6&&p<d;m++){var x=Ji.decodeDigit(t,f,p,Ji.L_AND_G_PATTERNS);i+=String.fromCharCode(48+x%10);try{for(var _=(a=void 0,I4(f)),C=_.next();!C.done;C=_.next()){var S=C.value;p+=S}}catch(Y){a={error:Y}}finally{try{C&&!C.done&&(o=_.return)&&o.call(_)}finally{if(a)throw a.error}}x>=10&&(g|=1<<5-m)}i=e.determineFirstDigit(i,g);var k=Ji.findGuardPattern(t,p,!0,Ji.MIDDLE_PATTERN,new Int32Array(Ji.MIDDLE_PATTERN.length).fill(0));p=k[1];for(var m=0;m<6&&p<d;m++){var x=Ji.decodeDigit(t,f,p,Ji.L_PATTERNS);i+=String.fromCharCode(48+x);try{for(var M=(s=void 0,I4(f)),P=M.next();!P.done;P=M.next()){var S=P.value;p+=S}}catch(F){s={error:F}}finally{try{P&&!P.done&&(c=M.return)&&c.call(M)}finally{if(s)throw s.error}}}return{rowOffset:p,resultString:i}},e.prototype.getBarcodeFormat=function(){return Yt.EAN_13},e.determineFirstDigit=function(t,r){for(var i=0;i<10;i++)if(r===this.FIRST_DIGIT_ENCODINGS[i])return t=String.fromCharCode(48+i)+t,t;throw new We},e.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26],e}(Ji),wU=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),T4=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},R4=function(n){wU(e,n);function e(){var t=n.call(this)||this;return t.decodeMiddleCounters=Int32Array.from([0,0,0,0]),t}return e.prototype.decodeMiddle=function(t,r,i){var a,o,s,c,f=this.decodeMiddleCounters;f[0]=0,f[1]=0,f[2]=0,f[3]=0;for(var d=t.getSize(),p=r[1],g=0;g<4&&p<d;g++){var m=Ji.decodeDigit(t,f,p,Ji.L_PATTERNS);i+=String.fromCharCode(48+m);try{for(var x=(a=void 0,T4(f)),_=x.next();!_.done;_=x.next()){var C=_.value;p+=C}}catch(P){a={error:P}}finally{try{_&&!_.done&&(o=x.return)&&o.call(x)}finally{if(a)throw a.error}}}var S=Ji.findGuardPattern(t,p,!0,Ji.MIDDLE_PATTERN,new Int32Array(Ji.MIDDLE_PATTERN.length).fill(0));p=S[1];for(var g=0;g<4&&p<d;g++){var m=Ji.decodeDigit(t,f,p,Ji.L_PATTERNS);i+=String.fromCharCode(48+m);try{for(var k=(s=void 0,T4(f)),M=k.next();!M.done;M=k.next()){var C=M.value;p+=C}}catch(z){s={error:z}}finally{try{M&&!M.done&&(c=k.return)&&c.call(k)}finally{if(s)throw s.error}}}return{rowOffset:p,resultString:i}},e.prototype.getBarcodeFormat=function(){return Yt.EAN_8},e}(Ji),_U=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),N4=function(n){_U(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.ean13Reader=new gx,t}return e.prototype.getBarcodeFormat=function(){return Yt.UPC_A},e.prototype.decode=function(t,r){return this.maybeReturnResult(this.ean13Reader.decode(t))},e.prototype.decodeRow=function(t,r,i){return this.maybeReturnResult(this.ean13Reader.decodeRow(t,r,i))},e.prototype.decodeMiddle=function(t,r,i){return this.ean13Reader.decodeMiddle(t,r,i)},e.prototype.maybeReturnResult=function(t){var r=t.getText();if(r.charAt(0)==="0"){var i=new po(r.substring(1),null,null,t.getResultPoints(),Yt.UPC_A);return t.getResultMetadata()!=null&&i.putAllMetadata(t.getResultMetadata()),i}else throw new We},e.prototype.reset=function(){this.ean13Reader.reset()},e}(Ji),AU=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),SU=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},D4=function(n){AU(e,n);function e(){var t=n.call(this)||this;return t.decodeMiddleCounters=new Int32Array(4),t}return e.prototype.decodeMiddle=function(t,r,i){var a,o,s=this.decodeMiddleCounters.map(function(C){return C});s[0]=0,s[1]=0,s[2]=0,s[3]=0;for(var c=t.getSize(),f=r[1],d=0,p=0;p<6&&f<c;p++){var g=e.decodeDigit(t,s,f,e.L_AND_G_PATTERNS);i+=String.fromCharCode(48+g%10);try{for(var m=(a=void 0,SU(s)),x=m.next();!x.done;x=m.next()){var _=x.value;f+=_}}catch(C){a={error:C}}finally{try{x&&!x.done&&(o=m.return)&&o.call(m)}finally{if(a)throw a.error}}g>=10&&(d|=1<<5-p)}return e.determineNumSysAndCheckDigit(new En(i),d),f},e.prototype.decodeEnd=function(t,r){return e.findGuardPatternWithoutCounters(t,r,!0,e.MIDDLE_END_PATTERN)},e.prototype.checkChecksum=function(t){return Ji.checkChecksum(e.convertUPCEtoUPCA(t))},e.determineNumSysAndCheckDigit=function(t,r){for(var i=0;i<=1;i++)for(var a=0;a<10;a++)if(r===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[i][a]){t.insert(0,"0"+i),t.append("0"+a);return}throw We.getNotFoundInstance()},e.prototype.getBarcodeFormat=function(){return Yt.UPC_E},e.convertUPCEtoUPCA=function(t){var r=t.slice(1,7).split("").map(function(o){return o.charCodeAt(0)}),i=new En;i.append(t.charAt(0));var a=r[5];switch(a){case 0:case 1:case 2:i.appendChars(r,0,2),i.append(a),i.append("0000"),i.appendChars(r,2,3);break;case 3:i.appendChars(r,0,3),i.append("00000"),i.appendChars(r,3,2);break;case 4:i.appendChars(r,0,4),i.append("00000"),i.append(r[4]);break;default:i.appendChars(r,0,5),i.append("0000"),i.append(a);break}return t.length>=8&&i.append(t.charAt(7)),i.toString()},e.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),e.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,1])],e}(Ji),EU=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),O4=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Kv=function(n){EU(e,n);function e(t){var r=n.call(this)||this,i=t==null?null:t.get(ai.POSSIBLE_FORMATS),a=[];return i!=null&&(i.indexOf(Yt.EAN_13)>-1&&a.push(new gx),i.indexOf(Yt.UPC_A)>-1&&a.push(new N4),i.indexOf(Yt.EAN_8)>-1&&a.push(new R4),i.indexOf(Yt.UPC_E)>-1&&a.push(new D4)),a.length===0&&(a.push(new gx),a.push(new N4),a.push(new R4),a.push(new D4)),r.readers=a,r}return e.prototype.decodeRow=function(t,r,i){var a,o;try{for(var s=O4(this.readers),c=s.next();!c.done;c=s.next()){var f=c.value;try{var d=f.decodeRow(t,r,i),p=d.getBarcodeFormat()===Yt.EAN_13&&d.getText().charAt(0)==="0",g=i==null?null:i.get(ai.POSSIBLE_FORMATS),m=g==null||g.includes(Yt.UPC_A);if(p&&m){var x=d.getRawBytes(),_=new po(d.getText().substring(1),x,x?x.length:null,d.getResultPoints(),Yt.UPC_A);return _.putAllMetadata(d.getResultMetadata()),_}return d}catch{}}}catch(C){a={error:C}}finally{try{c&&!c.done&&(o=s.return)&&o.call(s)}finally{if(a)throw a.error}}throw new We},e.prototype.reset=function(){var t,r;try{for(var i=O4(this.readers),a=i.next();!a.done;a=i.next()){var o=a.value;o.reset()}}catch(s){t={error:s}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}},e}(na),CU=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),IU=function(n){CU(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.CODA_BAR_CHAR_SET={nnnnnww:"0",nnnnwwn:"1",nnnwnnw:"2",wwnnnnn:"3",nnwnnwn:"4",wnnnnwn:"5",nwnnnnw:"6",nwnnwnn:"7",nwwnnnn:"8",wnnwnnn:"9",nnnwwnn:"-",nnwwnnn:"$",wnnnwnw:":",wnwnnnw:"/",wnwnwnn:".",nnwwwww:"+",nnwwnwn:"A",nwnwnnw:"B",nnnwnww:"C",nnnwwwn:"D"},t}return e.prototype.decodeRow=function(t,r,i){var a=this.getValidRowData(r);if(!a)throw new We;var o=this.codaBarDecodeRow(a.row);if(!o)throw new We;return new po(o,null,0,[new Mt(a.left,t),new Mt(a.right,t)],Yt.CODABAR,new Date().getTime())},e.prototype.getValidRowData=function(t){var r=t.toArray(),i=r.indexOf(!0);if(i===-1)return null;var a=r.lastIndexOf(!0);if(a<=i)return null;r=r.slice(i,a+1);for(var o=[],s=r[0],c=1,f=1;f<r.length;f++)r[f]===s?c++:(s=r[f],o.push(c),c=1);return o.push(c),o.length<23&&(o.length+1)%8!==0?null:{row:o,left:i,right:a}},e.prototype.codaBarDecodeRow=function(t){for(var r=[],i=Math.ceil(t.reduce(function(c,f){return(c+f)/2},0));t.length>0;){var a=t.splice(0,8).splice(0,7),o=a.map(function(c){return c<i?"n":"w"}).join("");if(this.CODA_BAR_CHAR_SET[o]===void 0)return null;r.push(this.CODA_BAR_CHAR_SET[o])}var s=r.join("");return this.validCodaBarString(s)?s:null},e.prototype.validCodaBarString=function(t){var r=/^[A-D].{1,}[A-D]$/;return r.test(t)},e}(na),TU=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),RU=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Qf=function(n){TU(e,n);function e(){var t=n.call(this)||this;return t.decodeFinderCounters=new Int32Array(4),t.dataCharacterCounters=new Int32Array(8),t.oddRoundingErrors=new Array(4),t.evenRoundingErrors=new Array(4),t.oddCounts=new Array(t.dataCharacterCounters.length/2),t.evenCounts=new Array(t.dataCharacterCounters.length/2),t}return e.prototype.getDecodeFinderCounters=function(){return this.decodeFinderCounters},e.prototype.getDataCharacterCounters=function(){return this.dataCharacterCounters},e.prototype.getOddRoundingErrors=function(){return this.oddRoundingErrors},e.prototype.getEvenRoundingErrors=function(){return this.evenRoundingErrors},e.prototype.getOddCounts=function(){return this.oddCounts},e.prototype.getEvenCounts=function(){return this.evenCounts},e.prototype.parseFinderValue=function(t,r){for(var i=0;i<r.length;i++)if(na.patternMatchVariance(t,r[i],e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return i;throw new We},e.count=function(t){return tr.sum(new Int32Array(t))},e.increment=function(t,r){for(var i=0,a=r[0],o=1;o<t.length;o++)r[o]>a&&(a=r[o],i=o);t[i]++},e.decrement=function(t,r){for(var i=0,a=r[0],o=1;o<t.length;o++)r[o]<a&&(a=r[o],i=o);t[i]--},e.isFinderPattern=function(t){var r,i,a=t[0]+t[1],o=a+t[2]+t[3],s=a/o;if(s>=e.MIN_FINDER_PATTERN_RATIO&&s<=e.MAX_FINDER_PATTERN_RATIO){var c=Number.MAX_SAFE_INTEGER,f=Number.MIN_SAFE_INTEGER;try{for(var d=RU(t),p=d.next();!p.done;p=d.next()){var g=p.value;g>f&&(f=g),g<c&&(c=g)}}catch(m){r={error:m}}finally{try{p&&!p.done&&(i=d.return)&&i.call(d)}finally{if(r)throw r.error}}return f<10*c}return!1},e.MAX_AVG_VARIANCE=.2,e.MAX_INDIVIDUAL_VARIANCE=.45,e.MIN_FINDER_PATTERN_RATIO=9.5/12,e.MAX_FINDER_PATTERN_RATIO=12.5/14,e}(na),dm=function(){function n(e,t){this.value=e,this.checksumPortion=t}return n.prototype.getValue=function(){return this.value},n.prototype.getChecksumPortion=function(){return this.checksumPortion},n.prototype.toString=function(){return this.value+"("+this.checksumPortion+")"},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.value===t.value&&this.checksumPortion===t.checksumPortion},n.prototype.hashCode=function(){return this.value^this.checksumPortion},n}(),fC=function(){function n(e,t,r,i,a){this.value=e,this.startEnd=t,this.value=e,this.startEnd=t,this.resultPoints=new Array,this.resultPoints.push(new Mt(r,a)),this.resultPoints.push(new Mt(i,a))}return n.prototype.getValue=function(){return this.value},n.prototype.getStartEnd=function(){return this.startEnd},n.prototype.getResultPoints=function(){return this.resultPoints},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.value===t.value},n.prototype.hashCode=function(){return this.value},n}(),NU=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},gh=function(){function n(){}return n.getRSSvalue=function(e,t,r){var i,a,o=0;try{for(var s=NU(e),c=s.next();!c.done;c=s.next()){var f=c.value;o+=f}}catch(k){i={error:k}}finally{try{c&&!c.done&&(a=s.return)&&a.call(s)}finally{if(i)throw i.error}}for(var d=0,p=0,g=e.length,m=0;m<g-1;m++){var x=void 0;for(x=1,p|=1<<m;x<e[m];x++,p&=~(1<<m)){var _=n.combins(o-x-1,g-m-2);if(r&&p===0&&o-x-(g-m-1)>=g-m-1&&(_-=n.combins(o-x-(g-m),g-m-2)),g-m-1>1){for(var C=0,S=o-x-(g-m-2);S>t;S--)C+=n.combins(o-x-S-1,g-m-3);_-=C*(g-1-m)}else o-x>t&&_--;d+=_}o-=x}return d},n.combins=function(e,t){var r,i;e-t>t?(i=t,r=e-t):(i=e-t,r=t);for(var a=1,o=1,s=e;s>r;s--)a*=s,o<=i&&(a/=o,o++);for(;o<=i;)a/=o,o++;return a},n}(),DU=function(){function n(){}return n.buildBitArray=function(e){var t=e.length*2-1;e[e.length-1].getRightChar()==null&&(t-=1);for(var r=12*t,i=new xa(r),a=0,o=e[0],s=o.getRightChar().getValue(),c=11;c>=0;--c)(s&1<<c)!==0&&i.set(a),a++;for(var c=1;c<e.length;++c){for(var f=e[c],d=f.getLeftChar().getValue(),p=11;p>=0;--p)(d&1<<p)!==0&&i.set(a),a++;if(f.getRightChar()!==null)for(var g=f.getRightChar().getValue(),p=11;p>=0;--p)(g&1<<p)!==0&&i.set(a),a++}return i},n}(),Yf=function(){function n(e,t){t?this.decodedInformation=null:(this.finished=e,this.decodedInformation=t)}return n.prototype.getDecodedInformation=function(){return this.decodedInformation},n.prototype.isFinished=function(){return this.finished},n}(),nb=function(){function n(e){this.newPosition=e}return n.prototype.getNewPosition=function(){return this.newPosition},n}(),OU=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),_l=function(n){OU(e,n);function e(t,r){var i=n.call(this,t)||this;return i.value=r,i}return e.prototype.getValue=function(){return this.value},e.prototype.isFNC1=function(){return this.value===e.FNC1},e.FNC1="$",e}(nb),kU=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Xf=function(n){kU(e,n);function e(t,r,i){var a=n.call(this,t)||this;return i?(a.remaining=!0,a.remainingValue=a.remainingValue):(a.remaining=!1,a.remainingValue=0),a.newString=r,a}return e.prototype.getNewString=function(){return this.newString},e.prototype.isRemaining=function(){return this.remaining},e.prototype.getRemainingValue=function(){return this.remainingValue},e}(nb),LU=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),nh=function(n){LU(e,n);function e(t,r,i){var a=n.call(this,t)||this;if(r<0||r>10||i<0||i>10)throw new gt;return a.firstDigit=r,a.secondDigit=i,a}return e.prototype.getFirstDigit=function(){return this.firstDigit},e.prototype.getSecondDigit=function(){return this.secondDigit},e.prototype.getValue=function(){return this.firstDigit*10+this.secondDigit},e.prototype.isFirstDigitFNC1=function(){return this.firstDigit===e.FNC1},e.prototype.isSecondDigitFNC1=function(){return this.secondDigit===e.FNC1},e.prototype.isAnyFNC1=function(){return this.firstDigit===e.FNC1||this.secondDigit===e.FNC1},e.FNC1=10,e}(nb),og=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},PU=function(){function n(){}return n.parseFieldsInGeneralPurpose=function(e){var t,r,i,a,o,s,c,f;if(!e)return null;if(e.length<2)throw new We;var d=e.substring(0,2);try{for(var p=og(n.TWO_DIGIT_DATA_LENGTH),g=p.next();!g.done;g=p.next()){var m=g.value;if(m[0]===d)return m[1]===n.VARIABLE_LENGTH?n.processVariableAI(2,m[2],e):n.processFixedAI(2,m[1],e)}}catch(z){t={error:z}}finally{try{g&&!g.done&&(r=p.return)&&r.call(p)}finally{if(t)throw t.error}}if(e.length<3)throw new We;var x=e.substring(0,3);try{for(var _=og(n.THREE_DIGIT_DATA_LENGTH),C=_.next();!C.done;C=_.next()){var m=C.value;if(m[0]===x)return m[1]===n.VARIABLE_LENGTH?n.processVariableAI(3,m[2],e):n.processFixedAI(3,m[1],e)}}catch(z){i={error:z}}finally{try{C&&!C.done&&(a=_.return)&&a.call(_)}finally{if(i)throw i.error}}try{for(var S=og(n.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH),k=S.next();!k.done;k=S.next()){var m=k.value;if(m[0]===x)return m[1]===n.VARIABLE_LENGTH?n.processVariableAI(4,m[2],e):n.processFixedAI(4,m[1],e)}}catch(z){o={error:z}}finally{try{k&&!k.done&&(s=S.return)&&s.call(S)}finally{if(o)throw o.error}}if(e.length<4)throw new We;var M=e.substring(0,4);try{for(var P=og(n.FOUR_DIGIT_DATA_LENGTH),Y=P.next();!Y.done;Y=P.next()){var m=Y.value;if(m[0]===M)return m[1]===n.VARIABLE_LENGTH?n.processVariableAI(4,m[2],e):n.processFixedAI(4,m[1],e)}}catch(z){c={error:z}}finally{try{Y&&!Y.done&&(f=P.return)&&f.call(P)}finally{if(c)throw c.error}}throw new We},n.processFixedAI=function(e,t,r){if(r.length<e)throw new We;var i=r.substring(0,e);if(r.length<e+t)throw new We;var a=r.substring(e,e+t),o=r.substring(e+t),s="("+i+")"+a,c=n.parseFieldsInGeneralPurpose(o);return c==null?s:s+c},n.processVariableAI=function(e,t,r){var i=r.substring(0,e),a;r.length<e+t?a=r.length:a=e+t;var o=r.substring(e,a),s=r.substring(a),c="("+i+")"+o,f=n.parseFieldsInGeneralPurpose(s);return f==null?c:c+f},n.VARIABLE_LENGTH=[],n.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",n.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",n.VARIABLE_LENGTH,20],["22",n.VARIABLE_LENGTH,29],["30",n.VARIABLE_LENGTH,8],["37",n.VARIABLE_LENGTH,8],["90",n.VARIABLE_LENGTH,30],["91",n.VARIABLE_LENGTH,30],["92",n.VARIABLE_LENGTH,30],["93",n.VARIABLE_LENGTH,30],["94",n.VARIABLE_LENGTH,30],["95",n.VARIABLE_LENGTH,30],["96",n.VARIABLE_LENGTH,30],["97",n.VARIABLE_LENGTH,3],["98",n.VARIABLE_LENGTH,30],["99",n.VARIABLE_LENGTH,30]],n.THREE_DIGIT_DATA_LENGTH=[["240",n.VARIABLE_LENGTH,30],["241",n.VARIABLE_LENGTH,30],["242",n.VARIABLE_LENGTH,6],["250",n.VARIABLE_LENGTH,30],["251",n.VARIABLE_LENGTH,30],["253",n.VARIABLE_LENGTH,17],["254",n.VARIABLE_LENGTH,20],["400",n.VARIABLE_LENGTH,30],["401",n.VARIABLE_LENGTH,30],["402",17],["403",n.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",n.VARIABLE_LENGTH,20],["421",n.VARIABLE_LENGTH,15],["422",3],["423",n.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],n.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",n.VARIABLE_LENGTH,15],["391",n.VARIABLE_LENGTH,18],["392",n.VARIABLE_LENGTH,15],["393",n.VARIABLE_LENGTH,18],["703",n.VARIABLE_LENGTH,30]],n.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",n.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",n.VARIABLE_LENGTH,20],["8003",n.VARIABLE_LENGTH,30],["8004",n.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",n.VARIABLE_LENGTH,30],["8008",n.VARIABLE_LENGTH,12],["8018",18],["8020",n.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",n.VARIABLE_LENGTH,70],["8200",n.VARIABLE_LENGTH,70]],n}(),Og=function(){function n(e){this.buffer=new En,this.information=e}return n.prototype.decodeAllCodes=function(e,t){var r=t,i=null;do{var a=this.decodeGeneralPurposeField(r,i),o=PU.parseFieldsInGeneralPurpose(a.getNewString());if(o!=null&&e.append(o),a.isRemaining()?i=""+a.getRemainingValue():i=null,r===a.getNewPosition())break;r=a.getNewPosition()}while(!0);return e.toString()},n.prototype.isStillNumeric=function(e){if(e+7>this.information.getSize())return e+4<=this.information.getSize();for(var t=e;t<e+3;++t)if(this.information.get(t))return!0;return this.information.get(e+3)},n.prototype.decodeNumeric=function(e){if(e+7>this.information.getSize()){var t=this.extractNumericValueFromBitArray(e,4);return t===0?new nh(this.information.getSize(),nh.FNC1,nh.FNC1):new nh(this.information.getSize(),t-1,nh.FNC1)}var r=this.extractNumericValueFromBitArray(e,7),i=(r-8)/11,a=(r-8)%11;return new nh(e+7,i,a)},n.prototype.extractNumericValueFromBitArray=function(e,t){return n.extractNumericValueFromBitArray(this.information,e,t)},n.extractNumericValueFromBitArray=function(e,t,r){for(var i=0,a=0;a<r;++a)e.get(t+a)&&(i|=1<<r-a-1);return i},n.prototype.decodeGeneralPurposeField=function(e,t){this.buffer.setLengthToZero(),t!=null&&this.buffer.append(t),this.current.setPosition(e);var r=this.parseBlocks();return r!=null&&r.isRemaining()?new Xf(this.current.getPosition(),this.buffer.toString(),r.getRemainingValue()):new Xf(this.current.getPosition(),this.buffer.toString())},n.prototype.parseBlocks=function(){var e,t;do{var r=this.current.getPosition();this.current.isAlpha()?(t=this.parseAlphaBlock(),e=t.isFinished()):this.current.isIsoIec646()?(t=this.parseIsoIec646Block(),e=t.isFinished()):(t=this.parseNumericBlock(),e=t.isFinished());var i=r!==this.current.getPosition();if(!i&&!e)break}while(!e);return t.getDecodedInformation()},n.prototype.parseNumericBlock=function(){for(;this.isStillNumeric(this.current.getPosition());){var e=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFirstDigitFNC1()){var t=void 0;return e.isSecondDigitFNC1()?t=new Xf(this.current.getPosition(),this.buffer.toString()):t=new Xf(this.current.getPosition(),this.buffer.toString(),e.getSecondDigit()),new Yf(!0,t)}if(this.buffer.append(e.getFirstDigit()),e.isSecondDigitFNC1()){var t=new Xf(this.current.getPosition(),this.buffer.toString());return new Yf(!0,t)}this.buffer.append(e.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new Yf(!1)},n.prototype.parseIsoIec646Block=function(){for(;this.isStillIsoIec646(this.current.getPosition());){var e=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var t=new Xf(this.current.getPosition(),this.buffer.toString());return new Yf(!0,t)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new Yf(!1)},n.prototype.parseAlphaBlock=function(){for(;this.isStillAlpha(this.current.getPosition());){var e=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var t=new Xf(this.current.getPosition(),this.buffer.toString());return new Yf(!0,t)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new Yf(!1)},n.prototype.isStillIsoIec646=function(e){if(e+5>this.information.getSize())return!1;var t=this.extractNumericValueFromBitArray(e,5);if(t>=5&&t<16)return!0;if(e+7>this.information.getSize())return!1;var r=this.extractNumericValueFromBitArray(e,7);if(r>=64&&r<116)return!0;if(e+8>this.information.getSize())return!1;var i=this.extractNumericValueFromBitArray(e,8);return i>=232&&i<253},n.prototype.decodeIsoIec646=function(e){var t=this.extractNumericValueFromBitArray(e,5);if(t===15)return new _l(e+5,_l.FNC1);if(t>=5&&t<15)return new _l(e+5,"0"+(t-5));var r=this.extractNumericValueFromBitArray(e,7);if(r>=64&&r<90)return new _l(e+7,""+(r+1));if(r>=90&&r<116)return new _l(e+7,""+(r+7));var i=this.extractNumericValueFromBitArray(e,8),a;switch(i){case 232:a="!";break;case 233:a='"';break;case 234:a="%";break;case 235:a="&";break;case 236:a="'";break;case 237:a="(";break;case 238:a=")";break;case 239:a="*";break;case 240:a="+";break;case 241:a=",";break;case 242:a="-";break;case 243:a=".";break;case 244:a="/";break;case 245:a=":";break;case 246:a=";";break;case 247:a="<";break;case 248:a="=";break;case 249:a=">";break;case 250:a="?";break;case 251:a="_";break;case 252:a=" ";break;default:throw new gt}return new _l(e+8,a)},n.prototype.isStillAlpha=function(e){if(e+5>this.information.getSize())return!1;var t=this.extractNumericValueFromBitArray(e,5);if(t>=5&&t<16)return!0;if(e+6>this.information.getSize())return!1;var r=this.extractNumericValueFromBitArray(e,6);return r>=16&&r<63},n.prototype.decodeAlphanumeric=function(e){var t=this.extractNumericValueFromBitArray(e,5);if(t===15)return new _l(e+5,_l.FNC1);if(t>=5&&t<15)return new _l(e+5,"0"+(t-5));var r=this.extractNumericValueFromBitArray(e,6);if(r>=32&&r<58)return new _l(e+6,""+(r+33));var i;switch(r){case 58:i="*";break;case 59:i=",";break;case 60:i="-";break;case 61:i=".";break;case 62:i="/";break;default:throw new G1("Decoding invalid alphanumeric value: "+r)}return new _l(e+6,i)},n.prototype.isAlphaTo646ToAlphaLatch=function(e){if(e+1>this.information.getSize())return!1;for(var t=0;t<5&&t+e<this.information.getSize();++t)if(t===2){if(!this.information.get(e+2))return!1}else if(this.information.get(e+t))return!1;return!0},n.prototype.isAlphaOr646ToNumericLatch=function(e){if(e+3>this.information.getSize())return!1;for(var t=e;t<e+3;++t)if(this.information.get(t))return!1;return!0},n.prototype.isNumericToAlphaNumericLatch=function(e){if(e+1>this.information.getSize())return!1;for(var t=0;t<4&&t+e<this.information.getSize();++t)if(this.information.get(e+t))return!1;return!0},n}(),dC=function(){function n(e){this.information=e,this.generalDecoder=new Og(e)}return n.prototype.getInformation=function(){return this.information},n.prototype.getGeneralDecoder=function(){return this.generalDecoder},n}(),MU=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Cl=function(n){MU(e,n);function e(t){return n.call(this,t)||this}return e.prototype.encodeCompressedGtin=function(t,r){t.append("(01)");var i=t.length();t.append("9"),this.encodeCompressedGtinWithoutAI(t,r,i)},e.prototype.encodeCompressedGtinWithoutAI=function(t,r,i){for(var a=0;a<4;++a){var o=this.getGeneralDecoder().extractNumericValueFromBitArray(r+10*a,10);o/100===0&&t.append("0"),o/10===0&&t.append("0"),t.append(o)}e.appendCheckDigit(t,i)},e.appendCheckDigit=function(t,r){for(var i=0,a=0;a<13;a++){var o=t.charAt(a+r).charCodeAt(0)-48;i+=(a&1)===0?3*o:o}i=10-i%10,i===10&&(i=0),t.append(i)},e.GTIN_SIZE=40,e}(dC),jU=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),BU=function(n){jU(e,n);function e(t){return n.call(this,t)||this}return e.prototype.parseInformation=function(){var t=new En;t.append("(01)");var r=t.length(),i=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE,4);return t.append(i),this.encodeCompressedGtinWithoutAI(t,e.HEADER_SIZE+4,r),this.getGeneralDecoder().decodeAllCodes(t,e.HEADER_SIZE+44)},e.HEADER_SIZE=4,e}(Cl),FU=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),UU=function(n){FU(e,n);function e(t){return n.call(this,t)||this}return e.prototype.parseInformation=function(){var t=new En;return this.getGeneralDecoder().decodeAllCodes(t,e.HEADER_SIZE)},e.HEADER_SIZE=5,e}(dC),zU=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),kg=function(n){zU(e,n);function e(t){return n.call(this,t)||this}return e.prototype.encodeCompressedWeight=function(t,r,i){var a=this.getGeneralDecoder().extractNumericValueFromBitArray(r,i);this.addWeightCode(t,a);for(var o=this.checkWeight(a),s=1e5,c=0;c<5;++c)o/s===0&&t.append("0"),s/=10;t.append(o)},e}(Cl),VU=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),hC=function(n){VU(e,n);function e(t){return n.call(this,t)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()!==e.HEADER_SIZE+kg.GTIN_SIZE+e.WEIGHT_SIZE)throw new We;var t=new En;return this.encodeCompressedGtin(t,e.HEADER_SIZE),this.encodeCompressedWeight(t,e.HEADER_SIZE+kg.GTIN_SIZE,e.WEIGHT_SIZE),t.toString()},e.HEADER_SIZE=5,e.WEIGHT_SIZE=15,e}(kg),qU=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),HU=function(n){qU(e,n);function e(t){return n.call(this,t)||this}return e.prototype.addWeightCode=function(t,r){t.append("(3103)")},e.prototype.checkWeight=function(t){return t},e}(hC),WU=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),$U=function(n){WU(e,n);function e(t){return n.call(this,t)||this}return e.prototype.addWeightCode=function(t,r){r<1e4?t.append("(3202)"):t.append("(3203)")},e.prototype.checkWeight=function(t){return t<1e4?t:t-1e4},e}(hC),GU=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),YU=function(n){GU(e,n);function e(t){return n.call(this,t)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()<e.HEADER_SIZE+Cl.GTIN_SIZE)throw new We;var t=new En;this.encodeCompressedGtin(t,e.HEADER_SIZE);var r=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+Cl.GTIN_SIZE,e.LAST_DIGIT_SIZE);t.append("(392"),t.append(r),t.append(")");var i=this.getGeneralDecoder().decodeGeneralPurposeField(e.HEADER_SIZE+Cl.GTIN_SIZE+e.LAST_DIGIT_SIZE,null);return t.append(i.getNewString()),t.toString()},e.HEADER_SIZE=8,e.LAST_DIGIT_SIZE=2,e}(Cl),XU=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),KU=function(n){XU(e,n);function e(t){return n.call(this,t)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()<e.HEADER_SIZE+Cl.GTIN_SIZE)throw new We;var t=new En;this.encodeCompressedGtin(t,e.HEADER_SIZE);var r=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+Cl.GTIN_SIZE,e.LAST_DIGIT_SIZE);t.append("(393"),t.append(r),t.append(")");var i=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+Cl.GTIN_SIZE+e.LAST_DIGIT_SIZE,e.FIRST_THREE_DIGITS_SIZE);i/100===0&&t.append("0"),i/10===0&&t.append("0"),t.append(i);var a=this.getGeneralDecoder().decodeGeneralPurposeField(e.HEADER_SIZE+Cl.GTIN_SIZE+e.LAST_DIGIT_SIZE+e.FIRST_THREE_DIGITS_SIZE,null);return t.append(a.getNewString()),t.toString()},e.HEADER_SIZE=8,e.LAST_DIGIT_SIZE=2,e.FIRST_THREE_DIGITS_SIZE=10,e}(Cl),QU=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Yu=function(n){QU(e,n);function e(t,r,i){var a=n.call(this,t)||this;return a.dateCode=i,a.firstAIdigits=r,a}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()!==e.HEADER_SIZE+e.GTIN_SIZE+e.WEIGHT_SIZE+e.DATE_SIZE)throw new We;var t=new En;return this.encodeCompressedGtin(t,e.HEADER_SIZE),this.encodeCompressedWeight(t,e.HEADER_SIZE+e.GTIN_SIZE,e.WEIGHT_SIZE),this.encodeCompressedDate(t,e.HEADER_SIZE+e.GTIN_SIZE+e.WEIGHT_SIZE),t.toString()},e.prototype.encodeCompressedDate=function(t,r){var i=this.getGeneralDecoder().extractNumericValueFromBitArray(r,e.DATE_SIZE);if(i!==38400){t.append("("),t.append(this.dateCode),t.append(")");var a=i%32;i/=32;var o=i%12+1;i/=12;var s=i;s/10===0&&t.append("0"),t.append(s),o/10===0&&t.append("0"),t.append(o),a/10===0&&t.append("0"),t.append(a)}},e.prototype.addWeightCode=function(t,r){t.append("("),t.append(this.firstAIdigits),t.append(r/1e5),t.append(")")},e.prototype.checkWeight=function(t){return t%1e5},e.HEADER_SIZE=8,e.WEIGHT_SIZE=20,e.DATE_SIZE=16,e}(kg);function ZU(n){try{if(n.get(1))return new BU(n);if(!n.get(2))return new UU(n);var e=Og.extractNumericValueFromBitArray(n,1,4);switch(e){case 4:return new HU(n);case 5:return new $U(n)}var t=Og.extractNumericValueFromBitArray(n,1,5);switch(t){case 12:return new YU(n);case 13:return new KU(n)}var r=Og.extractNumericValueFromBitArray(n,1,7);switch(r){case 56:return new Yu(n,"310","11");case 57:return new Yu(n,"320","11");case 58:return new Yu(n,"310","13");case 59:return new Yu(n,"320","13");case 60:return new Yu(n,"310","15");case 61:return new Yu(n,"320","15");case 62:return new Yu(n,"310","17");case 63:return new Yu(n,"320","17")}}catch(i){throw console.log(i),new G1("unknown decoder: "+n)}}var k4=function(){function n(e,t,r,i){this.leftchar=e,this.rightchar=t,this.finderpattern=r,this.maybeLast=i}return n.prototype.mayBeLast=function(){return this.maybeLast},n.prototype.getLeftChar=function(){return this.leftchar},n.prototype.getRightChar=function(){return this.rightchar},n.prototype.getFinderPattern=function(){return this.finderpattern},n.prototype.mustBeLast=function(){return this.rightchar==null},n.prototype.toString=function(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"},n.equals=function(e,t){return e instanceof n?n.equalsOrNull(e.leftchar,t.leftchar)&&n.equalsOrNull(e.rightchar,t.rightchar)&&n.equalsOrNull(e.finderpattern,t.finderpattern):!1},n.equalsOrNull=function(e,t){return e===null?t===null:n.equals(e,t)},n.prototype.hashCode=function(){var e=this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue();return e},n}(),JU=function(){function n(e,t,r){this.pairs=e,this.rowNumber=t,this.wasReversed=r}return n.prototype.getPairs=function(){return this.pairs},n.prototype.getRowNumber=function(){return this.rowNumber},n.prototype.isReversed=function(){return this.wasReversed},n.prototype.isEquivalent=function(e){return this.checkEqualitity(this,e)},n.prototype.toString=function(){return"{ "+this.pairs+" }"},n.prototype.equals=function(e,t){return e instanceof n?this.checkEqualitity(e,t)&&e.wasReversed===t.wasReversed:!1},n.prototype.checkEqualitity=function(e,t){if(!(!e||!t)){var r;return e.forEach(function(i,a){t.forEach(function(o){i.getLeftChar().getValue()===o.getLeftChar().getValue()&&i.getRightChar().getValue()===o.getRightChar().getValue()&&i.getFinderPatter().getValue()===o.getFinderPatter().getValue()&&(r=!0)})}),r}},n}(),ez=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Xu=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},tz=function(n){ez(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.pairs=new Array(e.MAX_PAIRS),t.rows=new Array,t.startEnd=[2],t}return e.prototype.decodeRow=function(t,r,i){this.pairs.length=0,this.startFromEven=!1;try{return e.constructResult(this.decodeRow2pairs(t,r))}catch{}return this.pairs.length=0,this.startFromEven=!0,e.constructResult(this.decodeRow2pairs(t,r))},e.prototype.reset=function(){this.pairs.length=0,this.rows.length=0},e.prototype.decodeRow2pairs=function(t,r){for(var i=!1;!i;)try{this.pairs.push(this.retrieveNextPair(r,this.pairs,t))}catch(s){if(s instanceof We){if(!this.pairs.length)throw new We;i=!0}}if(this.checkChecksum())return this.pairs;var a;if(this.rows.length?a=!0:a=!1,this.storeRow(t,!1),a){var o=this.checkRowsBoolean(!1);if(o!=null||(o=this.checkRowsBoolean(!0),o!=null))return o}throw new We},e.prototype.checkRowsBoolean=function(t){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,t&&(this.rows=this.rows.reverse());var r=null;try{r=this.checkRows(new Array,0)}catch(i){console.log(i)}return t&&(this.rows=this.rows.reverse()),r},e.prototype.checkRows=function(t,r){for(var i,a,o=r;o<this.rows.length;o++){var s=this.rows[o];this.pairs.length=0;try{for(var c=(i=void 0,Xu(t)),f=c.next();!f.done;f=c.next()){var d=f.value;this.pairs.push(d.getPairs())}}catch(g){i={error:g}}finally{try{f&&!f.done&&(a=c.return)&&a.call(c)}finally{if(i)throw i.error}}if(this.pairs.push(s.getPairs()),!!e.isValidSequence(this.pairs)){if(this.checkChecksum())return this.pairs;var p=new Array(t);p.push(s);try{return this.checkRows(p,o+1)}catch(g){console.log(g)}}}throw new We},e.isValidSequence=function(t){var r,i;try{for(var a=Xu(e.FINDER_PATTERN_SEQUENCES),o=a.next();!o.done;o=a.next()){var s=o.value;if(!(t.length>s.length)){for(var c=!0,f=0;f<t.length;f++)if(t[f].getFinderPattern().getValue()!==s[f]){c=!1;break}if(c)return!0}}}catch(d){r={error:d}}finally{try{o&&!o.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}return!1},e.prototype.storeRow=function(t,r){for(var i=0,a=!1,o=!1;i<this.rows.length;){var s=this.rows[i];if(s.getRowNumber()>t){o=s.isEquivalent(this.pairs);break}a=s.isEquivalent(this.pairs),i++}o||a||e.isPartialRow(this.pairs,this.rows)||(this.rows.push(i,new JU(this.pairs,t,r)),this.removePartialRows(this.pairs,this.rows))},e.prototype.removePartialRows=function(t,r){var i,a,o,s,c,f;try{for(var d=Xu(r),p=d.next();!p.done;p=d.next()){var g=p.value;if(g.getPairs().length!==t.length){var m=!0;try{for(var x=(o=void 0,Xu(g.getPairs())),_=x.next();!_.done;_=x.next()){var C=_.value,S=!1;try{for(var k=(c=void 0,Xu(t)),M=k.next();!M.done;M=k.next()){var P=M.value;if(k4.equals(C,P)){S=!0;break}}}catch(Y){c={error:Y}}finally{try{M&&!M.done&&(f=k.return)&&f.call(k)}finally{if(c)throw c.error}}S||(m=!1)}}catch(Y){o={error:Y}}finally{try{_&&!_.done&&(s=x.return)&&s.call(x)}finally{if(o)throw o.error}}}}}catch(Y){i={error:Y}}finally{try{p&&!p.done&&(a=d.return)&&a.call(d)}finally{if(i)throw i.error}}},e.isPartialRow=function(t,r){var i,a,o,s,c,f;try{for(var d=Xu(r),p=d.next();!p.done;p=d.next()){var g=p.value,m=!0;try{for(var x=(o=void 0,Xu(t)),_=x.next();!_.done;_=x.next()){var C=_.value,S=!1;try{for(var k=(c=void 0,Xu(g.getPairs())),M=k.next();!M.done;M=k.next()){var P=M.value;if(C.equals(P)){S=!0;break}}}catch(Y){c={error:Y}}finally{try{M&&!M.done&&(f=k.return)&&f.call(k)}finally{if(c)throw c.error}}if(!S){m=!1;break}}}catch(Y){o={error:Y}}finally{try{_&&!_.done&&(s=x.return)&&s.call(x)}finally{if(o)throw o.error}}if(m)return!0}}catch(Y){i={error:Y}}finally{try{p&&!p.done&&(a=d.return)&&a.call(d)}finally{if(i)throw i.error}}return!1},e.prototype.getRows=function(){return this.rows},e.constructResult=function(t){var r=DU.buildBitArray(t),i=ZU(r),a=i.parseInformation(),o=t[0].getFinderPattern().getResultPoints(),s=t[t.length-1].getFinderPattern().getResultPoints(),c=[o[0],o[1],s[0],s[1]];return new po(a,null,null,c,Yt.RSS_EXPANDED,null)},e.prototype.checkChecksum=function(){var t=this.pairs.get(0),r=t.getLeftChar(),i=t.getRightChar();if(i===null)return!1;for(var a=i.getChecksumPortion(),o=2,s=1;s<this.pairs.size();++s){var c=this.pairs.get(s);a+=c.getLeftChar().getChecksumPortion(),o++;var f=c.getRightChar();f!=null&&(a+=f.getChecksumPortion(),o++)}a%=211;var d=211*(o-4)+a;return d===r.getValue()},e.getNextSecondBar=function(t,r){var i;return t.get(r)?(i=t.getNextUnset(r),i=t.getNextSet(i)):(i=t.getNextSet(r),i=t.getNextUnset(i)),i},e.prototype.retrieveNextPair=function(t,r,i){var a=r.length%2===0;this.startFromEven&&(a=!a);var o,s=!0,c=-1;do this.findNextPair(t,r,c),o=this.parseFoundFinderPattern(t,i,a),o===null?c=e.getNextSecondBar(t,this.startEnd[0]):s=!1;while(s);var f=this.decodeDataCharacter(t,o,a,!0);if(!this.isEmptyPair(r)&&r[r.length-1].mustBeLast())throw new We;var d;try{d=this.decodeDataCharacter(t,o,a,!1)}catch(p){d=null,console.log(p)}return new k4(f,d,o,!0)},e.prototype.isEmptyPair=function(t){return t.length===0},e.prototype.findNextPair=function(t,r,i){var a=this.getDecodeFinderCounters();a[0]=0,a[1]=0,a[2]=0,a[3]=0;var o=t.getSize(),s;if(i>=0)s=i;else if(this.isEmptyPair(r))s=0;else{var c=r[r.length-1];s=c.getFinderPattern().getStartEnd()[1]}var f=r.length%2!==0;this.startFromEven&&(f=!f);for(var d=!1;s<o&&(d=!t.get(s),!!d);)s++;for(var p=0,g=s,m=s;m<o;m++)if(t.get(m)!==d)a[p]++;else{if(p===3){if(f&&e.reverseCounters(a),e.isFinderPattern(a)){this.startEnd[0]=g,this.startEnd[1]=m;return}f&&e.reverseCounters(a),g+=a[0]+a[1],a[0]=a[2],a[1]=a[3],a[2]=0,a[3]=0,p--}else p++;a[p]=1,d=!d}throw new We},e.reverseCounters=function(t){for(var r=t.length,i=0;i<r/2;++i){var a=t[i];t[i]=t[r-i-1],t[r-i-1]=a}},e.prototype.parseFoundFinderPattern=function(t,r,i){var a,o,s;if(i){for(var c=this.startEnd[0]-1;c>=0&&!t.get(c);)c--;c++,a=this.startEnd[0]-c,o=c,s=this.startEnd[1]}else o=this.startEnd[0],s=t.getNextUnset(this.startEnd[1]+1),a=s-this.startEnd[1];var f=this.getDecodeFinderCounters();jr.arraycopy(f,0,f,1,f.length-1),f[0]=a;var d;try{d=this.parseFinderValue(f,e.FINDER_PATTERNS)}catch{return null}return new fC(d,[o,s],o,s,r)},e.prototype.decodeDataCharacter=function(t,r,i,a){for(var o=this.getDataCharacterCounters(),s=0;s<o.length;s++)o[s]=0;if(a)e.recordPatternInReverse(t,r.getStartEnd()[0],o);else{e.recordPattern(t,r.getStartEnd()[1],o);for(var c=0,f=o.length-1;c<f;c++,f--){var d=o[c];o[c]=o[f],o[f]=d}}var p=17,g=tr.sum(new Int32Array(o))/p,m=(r.getStartEnd()[1]-r.getStartEnd()[0])/15;if(Math.abs(g-m)/m>.3)throw new We;for(var x=this.getOddCounts(),_=this.getEvenCounts(),C=this.getOddRoundingErrors(),S=this.getEvenRoundingErrors(),c=0;c<o.length;c++){var k=1*o[c]/g,M=k+.5;if(M<1){if(k<.3)throw new We;M=1}else if(M>8){if(k>8.7)throw new We;M=8}var P=c/2;(c&1)===0?(x[P]=M,C[P]=k-M):(_[P]=M,S[P]=k-M)}this.adjustOddEvenCounts(p);for(var Y=4*r.getValue()+(i?0:2)+(a?0:1)-1,z=0,F=0,c=x.length-1;c>=0;c--){if(e.isNotA1left(r,i,a)){var I=e.WEIGHTS[Y][2*c];F+=x[c]*I}z+=x[c]}for(var T=0,c=_.length-1;c>=0;c--)if(e.isNotA1left(r,i,a)){var I=e.WEIGHTS[Y][2*c+1];T+=_[c]*I}var j=F+T;if((z&1)!==0||z>13||z<4)throw new We;var N=(13-z)/2,R=e.SYMBOL_WIDEST[N],D=9-R,L=gh.getRSSvalue(x,R,!0),G=gh.getRSSvalue(_,D,!1),U=e.EVEN_TOTAL_SUBSET[N],H=e.GSUM[N],te=L*U+G+H;return new dm(te,j)},e.isNotA1left=function(t,r,i){return!(t.getValue()===0&&r&&i)},e.prototype.adjustOddEvenCounts=function(t){var r=tr.sum(new Int32Array(this.getOddCounts())),i=tr.sum(new Int32Array(this.getEvenCounts())),a=!1,o=!1;r>13?o=!0:r<4&&(a=!0);var s=!1,c=!1;i>13?c=!0:i<4&&(s=!0);var f=r+i-t,d=(r&1)===1,p=(i&1)===0;if(f===1)if(d){if(p)throw new We;o=!0}else{if(!p)throw new We;c=!0}else if(f===-1)if(d){if(p)throw new We;a=!0}else{if(!p)throw new We;s=!0}else if(f===0){if(d){if(!p)throw new We;r<i?(a=!0,c=!0):(o=!0,s=!0)}else if(p)throw new We}else throw new We;if(a){if(o)throw new We;e.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(o&&e.decrement(this.getOddCounts(),this.getOddRoundingErrors()),s){if(c)throw new We;e.increment(this.getEvenCounts(),this.getOddRoundingErrors())}c&&e.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},e.SYMBOL_WIDEST=[7,5,4,3,1],e.EVEN_TOTAL_SUBSET=[4,20,52,104,204],e.GSUM=[0,348,1388,2948,3988],e.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],e.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],e.FINDER_PAT_A=0,e.FINDER_PAT_B=1,e.FINDER_PAT_C=2,e.FINDER_PAT_D=3,e.FINDER_PAT_E=4,e.FINDER_PAT_F=5,e.FINDER_PATTERN_SEQUENCES=[[e.FINDER_PAT_A,e.FINDER_PAT_A],[e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B],[e.FINDER_PAT_A,e.FINDER_PAT_C,e.FINDER_PAT_B,e.FINDER_PAT_D],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_C],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_D,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_D],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_E],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F]],e.MAX_PAIRS=11,e}(Qf),nz=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),rz=function(n){nz(e,n);function e(t,r,i){var a=n.call(this,t,r)||this;return a.count=0,a.finderPattern=i,a}return e.prototype.getFinderPattern=function(){return this.finderPattern},e.prototype.getCount=function(){return this.count},e.prototype.incrementCount=function(){this.count++},e}(dm),iz=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Qv=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},L4=function(n){iz(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.possibleLeftPairs=[],t.possibleRightPairs=[],t}return e.prototype.decodeRow=function(t,r,i){var a,o,s,c,f=this.decodePair(r,!1,t,i);e.addOrTally(this.possibleLeftPairs,f),r.reverse();var d=this.decodePair(r,!0,t,i);e.addOrTally(this.possibleRightPairs,d),r.reverse();try{for(var p=Qv(this.possibleLeftPairs),g=p.next();!g.done;g=p.next()){var m=g.value;if(m.getCount()>1)try{for(var x=(s=void 0,Qv(this.possibleRightPairs)),_=x.next();!_.done;_=x.next()){var C=_.value;if(C.getCount()>1&&e.checkChecksum(m,C))return e.constructResult(m,C)}}catch(S){s={error:S}}finally{try{_&&!_.done&&(c=x.return)&&c.call(x)}finally{if(s)throw s.error}}}}catch(S){a={error:S}}finally{try{g&&!g.done&&(o=p.return)&&o.call(p)}finally{if(a)throw a.error}}throw new We},e.addOrTally=function(t,r){var i,a;if(r!=null){var o=!1;try{for(var s=Qv(t),c=s.next();!c.done;c=s.next()){var f=c.value;if(f.getValue()===r.getValue()){f.incrementCount(),o=!0;break}}}catch(d){i={error:d}}finally{try{c&&!c.done&&(a=s.return)&&a.call(s)}finally{if(i)throw i.error}}o||t.push(r)}},e.prototype.reset=function(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0},e.constructResult=function(t,r){for(var i=4537077*t.getValue()+r.getValue(),a=new String(i).toString(),o=new En,s=13-a.length;s>0;s--)o.append("0");o.append(a);for(var c=0,s=0;s<13;s++){var f=o.charAt(s).charCodeAt(0)-48;c+=(s&1)===0?3*f:f}c=10-c%10,c===10&&(c=0),o.append(c.toString());var d=t.getFinderPattern().getResultPoints(),p=r.getFinderPattern().getResultPoints();return new po(o.toString(),null,0,[d[0],d[1],p[0],p[1]],Yt.RSS_14,new Date().getTime())},e.checkChecksum=function(t,r){var i=(t.getChecksumPortion()+16*r.getChecksumPortion())%79,a=9*t.getFinderPattern().getValue()+r.getFinderPattern().getValue();return a>72&&a--,a>8&&a--,i===a},e.prototype.decodePair=function(t,r,i,a){try{var o=this.findFinderPattern(t,r),s=this.parseFoundFinderPattern(t,i,r,o),c=a==null?null:a.get(ai.NEED_RESULT_POINT_CALLBACK);if(c!=null){var f=(o[0]+o[1])/2;r&&(f=t.getSize()-1-f),c.foundPossibleResultPoint(new Mt(f,i))}var d=this.decodeDataCharacter(t,s,!0),p=this.decodeDataCharacter(t,s,!1);return new rz(1597*d.getValue()+p.getValue(),d.getChecksumPortion()+4*p.getChecksumPortion(),s)}catch{return null}},e.prototype.decodeDataCharacter=function(t,r,i){for(var a=this.getDataCharacterCounters(),o=0;o<a.length;o++)a[o]=0;if(i)na.recordPatternInReverse(t,r.getStartEnd()[0],a);else{na.recordPattern(t,r.getStartEnd()[1]+1,a);for(var s=0,c=a.length-1;s<c;s++,c--){var f=a[s];a[s]=a[c],a[c]=f}}for(var d=i?16:15,p=tr.sum(new Int32Array(a))/d,g=this.getOddCounts(),m=this.getEvenCounts(),x=this.getOddRoundingErrors(),_=this.getEvenRoundingErrors(),s=0;s<a.length;s++){var C=a[s]/p,S=Math.floor(C+.5);S<1?S=1:S>8&&(S=8);var k=Math.floor(s/2);(s&1)===0?(g[k]=S,x[k]=C-S):(m[k]=S,_[k]=C-S)}this.adjustOddEvenCounts(i,d);for(var M=0,P=0,s=g.length-1;s>=0;s--)P*=9,P+=g[s],M+=g[s];for(var Y=0,z=0,s=m.length-1;s>=0;s--)Y*=9,Y+=m[s],z+=m[s];var F=P+3*Y;if(i){if((M&1)!==0||M>12||M<4)throw new We;var I=(12-M)/2,T=e.OUTSIDE_ODD_WIDEST[I],j=9-T,N=gh.getRSSvalue(g,T,!1),R=gh.getRSSvalue(m,j,!0),D=e.OUTSIDE_EVEN_TOTAL_SUBSET[I],L=e.OUTSIDE_GSUM[I];return new dm(N*D+R+L,F)}else{if((z&1)!==0||z>10||z<4)throw new We;var I=(10-z)/2,T=e.INSIDE_ODD_WIDEST[I],j=9-T,N=gh.getRSSvalue(g,T,!0),R=gh.getRSSvalue(m,j,!1),G=e.INSIDE_ODD_TOTAL_SUBSET[I],L=e.INSIDE_GSUM[I];return new dm(R*G+N+L,F)}},e.prototype.findFinderPattern=function(t,r){var i=this.getDecodeFinderCounters();i[0]=0,i[1]=0,i[2]=0,i[3]=0;for(var a=t.getSize(),o=!1,s=0;s<a&&(o=!t.get(s),r!==o);)s++;for(var c=0,f=s,d=s;d<a;d++)if(t.get(d)!==o)i[c]++;else{if(c===3){if(Qf.isFinderPattern(i))return[f,d];f+=i[0]+i[1],i[0]=i[2],i[1]=i[3],i[2]=0,i[3]=0,c--}else c++;i[c]=1,o=!o}throw new We},e.prototype.parseFoundFinderPattern=function(t,r,i,a){for(var o=t.get(a[0]),s=a[0]-1;s>=0&&o!==t.get(s);)s--;s++;var c=a[0]-s,f=this.getDecodeFinderCounters(),d=new Int32Array(f.length);jr.arraycopy(f,0,d,1,f.length-1),d[0]=c;var p=this.parseFinderValue(d,e.FINDER_PATTERNS),g=s,m=a[1];return i&&(g=t.getSize()-1-g,m=t.getSize()-1-m),new fC(p,[s,a[1]],g,m,r)},e.prototype.adjustOddEvenCounts=function(t,r){var i=tr.sum(new Int32Array(this.getOddCounts())),a=tr.sum(new Int32Array(this.getEvenCounts())),o=!1,s=!1,c=!1,f=!1;t?(i>12?s=!0:i<4&&(o=!0),a>12?f=!0:a<4&&(c=!0)):(i>11?s=!0:i<5&&(o=!0),a>10?f=!0:a<4&&(c=!0));var d=i+a-r,p=(i&1)===(t?1:0),g=(a&1)===1;if(d===1)if(p){if(g)throw new We;s=!0}else{if(!g)throw new We;f=!0}else if(d===-1)if(p){if(g)throw new We;o=!0}else{if(!g)throw new We;c=!0}else if(d===0){if(p){if(!g)throw new We;i<a?(o=!0,f=!0):(s=!0,c=!0)}else if(g)throw new We}else throw new We;if(o){if(s)throw new We;Qf.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(s&&Qf.decrement(this.getOddCounts(),this.getOddRoundingErrors()),c){if(f)throw new We;Qf.increment(this.getEvenCounts(),this.getOddRoundingErrors())}f&&Qf.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},e.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],e.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],e.OUTSIDE_GSUM=[0,161,961,2015,2715],e.INSIDE_GSUM=[0,336,1036,1516],e.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],e.INSIDE_ODD_WIDEST=[2,4,6,8],e.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])],e}(Qf),az=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Z0=function(n){az(e,n);function e(t){var r=n.call(this)||this;r.readers=[];var i=t?t.get(ai.POSSIBLE_FORMATS):null,a=t&&t.get(ai.ASSUME_CODE_39_CHECK_DIGIT)!==void 0,o=t&&t.get(ai.ENABLE_CODE_39_EXTENDED_MODE)!==void 0;return i&&((i.includes(Yt.EAN_13)||i.includes(Yt.UPC_A)||i.includes(Yt.EAN_8)||i.includes(Yt.UPC_E))&&r.readers.push(new Kv(t)),i.includes(Yt.CODE_39)&&r.readers.push(new S4(a,o)),i.includes(Yt.CODE_93)&&r.readers.push(new E4),i.includes(Yt.CODE_128)&&r.readers.push(new A4),i.includes(Yt.ITF)&&r.readers.push(new C4),i.includes(Yt.CODABAR)&&r.readers.push(new IU),i.includes(Yt.RSS_14)&&r.readers.push(new L4),i.includes(Yt.RSS_EXPANDED)&&(console.warn("RSS Expanded reader IS NOT ready for production yet! use at your own risk."),r.readers.push(new tz))),r.readers.length===0&&(r.readers.push(new Kv(t)),r.readers.push(new S4),r.readers.push(new E4),r.readers.push(new Kv(t)),r.readers.push(new A4),r.readers.push(new C4),r.readers.push(new L4)),r}return e.prototype.decodeRow=function(t,r,i){for(var a=0;a<this.readers.length;a++)try{return this.readers[a].decodeRow(t,r,i)}catch{}throw new We},e.prototype.reset=function(){this.readers.forEach(function(t){return t.reset()})},e}(na),oz=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();(function(n){oz(e,n);function e(t,r){return t===void 0&&(t=500),n.call(this,new Z0(r),t,r)||this}return e})(Gh);var P4=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},cr=function(){function n(e,t,r){this.ecCodewords=e,this.ecBlocks=[t],r&&this.ecBlocks.push(r)}return n.prototype.getECCodewords=function(){return this.ecCodewords},n.prototype.getECBlocks=function(){return this.ecBlocks},n}(),sr=function(){function n(e,t){this.count=e,this.dataCodewords=t}return n.prototype.getCount=function(){return this.count},n.prototype.getDataCodewords=function(){return this.dataCodewords},n}(),sz=function(){function n(e,t,r,i,a,o){var s,c;this.versionNumber=e,this.symbolSizeRows=t,this.symbolSizeColumns=r,this.dataRegionSizeRows=i,this.dataRegionSizeColumns=a,this.ecBlocks=o;var f=0,d=o.getECCodewords(),p=o.getECBlocks();try{for(var g=P4(p),m=g.next();!m.done;m=g.next()){var x=m.value;f+=x.getCount()*(x.getDataCodewords()+d)}}catch(_){s={error:_}}finally{try{m&&!m.done&&(c=g.return)&&c.call(g)}finally{if(s)throw s.error}}this.totalCodewords=f}return n.prototype.getVersionNumber=function(){return this.versionNumber},n.prototype.getSymbolSizeRows=function(){return this.symbolSizeRows},n.prototype.getSymbolSizeColumns=function(){return this.symbolSizeColumns},n.prototype.getDataRegionSizeRows=function(){return this.dataRegionSizeRows},n.prototype.getDataRegionSizeColumns=function(){return this.dataRegionSizeColumns},n.prototype.getTotalCodewords=function(){return this.totalCodewords},n.prototype.getECBlocks=function(){return this.ecBlocks},n.getVersionForDimensions=function(e,t){var r,i;if((e&1)!==0||(t&1)!==0)throw new gt;try{for(var a=P4(n.VERSIONS),o=a.next();!o.done;o=a.next()){var s=o.value;if(s.symbolSizeRows===e&&s.symbolSizeColumns===t)return s}}catch(c){r={error:c}}finally{try{o&&!o.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}throw new gt},n.prototype.toString=function(){return""+this.versionNumber},n.buildVersions=function(){return[new n(1,10,10,8,8,new cr(5,new sr(1,3))),new n(2,12,12,10,10,new cr(7,new sr(1,5))),new n(3,14,14,12,12,new cr(10,new sr(1,8))),new n(4,16,16,14,14,new cr(12,new sr(1,12))),new n(5,18,18,16,16,new cr(14,new sr(1,18))),new n(6,20,20,18,18,new cr(18,new sr(1,22))),new n(7,22,22,20,20,new cr(20,new sr(1,30))),new n(8,24,24,22,22,new cr(24,new sr(1,36))),new n(9,26,26,24,24,new cr(28,new sr(1,44))),new n(10,32,32,14,14,new cr(36,new sr(1,62))),new n(11,36,36,16,16,new cr(42,new sr(1,86))),new n(12,40,40,18,18,new cr(48,new sr(1,114))),new n(13,44,44,20,20,new cr(56,new sr(1,144))),new n(14,48,48,22,22,new cr(68,new sr(1,174))),new n(15,52,52,24,24,new cr(42,new sr(2,102))),new n(16,64,64,14,14,new cr(56,new sr(2,140))),new n(17,72,72,16,16,new cr(36,new sr(4,92))),new n(18,80,80,18,18,new cr(48,new sr(4,114))),new n(19,88,88,20,20,new cr(56,new sr(4,144))),new n(20,96,96,22,22,new cr(68,new sr(4,174))),new n(21,104,104,24,24,new cr(56,new sr(6,136))),new n(22,120,120,18,18,new cr(68,new sr(6,175))),new n(23,132,132,20,20,new cr(62,new sr(8,163))),new n(24,144,144,22,22,new cr(62,new sr(8,156),new sr(2,155))),new n(25,8,18,6,16,new cr(7,new sr(1,5))),new n(26,8,32,6,14,new cr(11,new sr(1,10))),new n(27,12,26,10,24,new cr(14,new sr(1,16))),new n(28,12,36,10,16,new cr(18,new sr(1,22))),new n(29,16,36,14,16,new cr(24,new sr(1,32))),new n(30,16,48,14,22,new cr(28,new sr(1,49)))]},n.VERSIONS=n.buildVersions(),n}(),lz=function(){function n(e){var t=e.getHeight();if(t<8||t>144||(t&1)!==0)throw new gt;this.version=n.readVersion(e),this.mappingBitMatrix=this.extractDataRegion(e),this.readMappingMatrix=new fc(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}return n.prototype.getVersion=function(){return this.version},n.readVersion=function(e){var t=e.getHeight(),r=e.getWidth();return sz.getVersionForDimensions(t,r)},n.prototype.readCodewords=function(){var e=new Int8Array(this.version.getTotalCodewords()),t=0,r=4,i=0,a=this.mappingBitMatrix.getHeight(),o=this.mappingBitMatrix.getWidth(),s=!1,c=!1,f=!1,d=!1;do if(r===a&&i===0&&!s)e[t++]=this.readCorner1(a,o)&255,r-=2,i+=2,s=!0;else if(r===a-2&&i===0&&(o&3)!==0&&!c)e[t++]=this.readCorner2(a,o)&255,r-=2,i+=2,c=!0;else if(r===a+4&&i===2&&(o&7)===0&&!f)e[t++]=this.readCorner3(a,o)&255,r-=2,i+=2,f=!0;else if(r===a-2&&i===0&&(o&7)===4&&!d)e[t++]=this.readCorner4(a,o)&255,r-=2,i+=2,d=!0;else{do r<a&&i>=0&&!this.readMappingMatrix.get(i,r)&&(e[t++]=this.readUtah(r,i,a,o)&255),r-=2,i+=2;while(r>=0&&i<o);r+=1,i+=3;do r>=0&&i<o&&!this.readMappingMatrix.get(i,r)&&(e[t++]=this.readUtah(r,i,a,o)&255),r+=2,i-=2;while(r<a&&i>=0);r+=3,i+=1}while(r<a||i<o);if(t!==this.version.getTotalCodewords())throw new gt;return e},n.prototype.readModule=function(e,t,r,i){return e<0&&(e+=r,t+=4-(r+4&7)),t<0&&(t+=i,e+=4-(i+4&7)),this.readMappingMatrix.set(t,e),this.mappingBitMatrix.get(t,e)},n.prototype.readUtah=function(e,t,r,i){var a=0;return this.readModule(e-2,t-2,r,i)&&(a|=1),a<<=1,this.readModule(e-2,t-1,r,i)&&(a|=1),a<<=1,this.readModule(e-1,t-2,r,i)&&(a|=1),a<<=1,this.readModule(e-1,t-1,r,i)&&(a|=1),a<<=1,this.readModule(e-1,t,r,i)&&(a|=1),a<<=1,this.readModule(e,t-2,r,i)&&(a|=1),a<<=1,this.readModule(e,t-1,r,i)&&(a|=1),a<<=1,this.readModule(e,t,r,i)&&(a|=1),a},n.prototype.readCorner1=function(e,t){var r=0;return this.readModule(e-1,0,e,t)&&(r|=1),r<<=1,this.readModule(e-1,1,e,t)&&(r|=1),r<<=1,this.readModule(e-1,2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-1,e,t)&&(r|=1),r<<=1,this.readModule(1,t-1,e,t)&&(r|=1),r<<=1,this.readModule(2,t-1,e,t)&&(r|=1),r<<=1,this.readModule(3,t-1,e,t)&&(r|=1),r},n.prototype.readCorner2=function(e,t){var r=0;return this.readModule(e-3,0,e,t)&&(r|=1),r<<=1,this.readModule(e-2,0,e,t)&&(r|=1),r<<=1,this.readModule(e-1,0,e,t)&&(r|=1),r<<=1,this.readModule(0,t-4,e,t)&&(r|=1),r<<=1,this.readModule(0,t-3,e,t)&&(r|=1),r<<=1,this.readModule(0,t-2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-1,e,t)&&(r|=1),r<<=1,this.readModule(1,t-1,e,t)&&(r|=1),r},n.prototype.readCorner3=function(e,t){var r=0;return this.readModule(e-1,0,e,t)&&(r|=1),r<<=1,this.readModule(e-1,t-1,e,t)&&(r|=1),r<<=1,this.readModule(0,t-3,e,t)&&(r|=1),r<<=1,this.readModule(0,t-2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-1,e,t)&&(r|=1),r<<=1,this.readModule(1,t-3,e,t)&&(r|=1),r<<=1,this.readModule(1,t-2,e,t)&&(r|=1),r<<=1,this.readModule(1,t-1,e,t)&&(r|=1),r},n.prototype.readCorner4=function(e,t){var r=0;return this.readModule(e-3,0,e,t)&&(r|=1),r<<=1,this.readModule(e-2,0,e,t)&&(r|=1),r<<=1,this.readModule(e-1,0,e,t)&&(r|=1),r<<=1,this.readModule(0,t-2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-1,e,t)&&(r|=1),r<<=1,this.readModule(1,t-1,e,t)&&(r|=1),r<<=1,this.readModule(2,t-1,e,t)&&(r|=1),r<<=1,this.readModule(3,t-1,e,t)&&(r|=1),r},n.prototype.extractDataRegion=function(e){var t=this.version.getSymbolSizeRows(),r=this.version.getSymbolSizeColumns();if(e.getHeight()!==t)throw new Xt("Dimension of bitMatrix must match the version size");for(var i=this.version.getDataRegionSizeRows(),a=this.version.getDataRegionSizeColumns(),o=t/i|0,s=r/a|0,c=o*i,f=s*a,d=new fc(f,c),p=0;p<o;++p)for(var g=p*i,m=0;m<s;++m)for(var x=m*a,_=0;_<i;++_)for(var C=p*(i+2)+1+_,S=g+_,k=0;k<a;++k){var M=m*(a+2)+1+k;if(e.get(M,C)){var P=x+k;d.set(P,S)}}return d},n}(),M4=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},cz=function(){function n(e,t){this.numDataCodewords=e,this.codewords=t}return n.getDataBlocks=function(e,t){var r,i,a,o,s=t.getECBlocks(),c=0,f=s.getECBlocks();try{for(var d=M4(f),p=d.next();!p.done;p=d.next()){var g=p.value;c+=g.getCount()}}catch(L){r={error:L}}finally{try{p&&!p.done&&(i=d.return)&&i.call(d)}finally{if(r)throw r.error}}var m=new Array(c),x=0;try{for(var _=M4(f),C=_.next();!C.done;C=_.next())for(var g=C.value,S=0;S<g.getCount();S++){var k=g.getDataCodewords(),M=s.getECCodewords()+k;m[x++]=new n(k,new Uint8Array(M))}}catch(L){a={error:L}}finally{try{C&&!C.done&&(o=_.return)&&o.call(_)}finally{if(a)throw a.error}}for(var P=m[0].codewords.length,Y=P-s.getECCodewords(),z=Y-1,F=0,S=0;S<z;S++)for(var I=0;I<x;I++)m[I].codewords[S]=e[F++];for(var T=t.getVersionNumber()===24,j=T?8:x,I=0;I<j;I++)m[I].codewords[Y-1]=e[F++];for(var N=m[0].codewords.length,S=Y;S<N;S++)for(var I=0;I<x;I++){var R=T?(I+8)%x:I,D=T&&R>7?S-1:S;m[R].codewords[D]=e[F++]}if(F!==e.length)throw new Xt;return m},n.prototype.getNumDataCodewords=function(){return this.numDataCodewords},n.prototype.getCodewords=function(){return this.codewords},n}(),pC=function(){function n(e){this.bytes=e,this.byteOffset=0,this.bitOffset=0}return n.prototype.getBitOffset=function(){return this.bitOffset},n.prototype.getByteOffset=function(){return this.byteOffset},n.prototype.readBits=function(e){if(e<1||e>32||e>this.available())throw new Xt(""+e);var t=0,r=this.bitOffset,i=this.byteOffset,a=this.bytes;if(r>0){var o=8-r,s=e<o?e:o,c=o-s,f=255>>8-s<<c;t=(a[i]&f)>>c,e-=s,r+=s,r===8&&(r=0,i++)}if(e>0){for(;e>=8;)t=t<<8|a[i]&255,i++,e-=8;if(e>0){var c=8-e,f=255>>c<<c;t=t<<e|(a[i]&f)>>c,r+=e}}return this.bitOffset=r,this.byteOffset=i,t},n.prototype.available=function(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset},n}(),Qi;(function(n){n[n.PAD_ENCODE=0]="PAD_ENCODE",n[n.ASCII_ENCODE=1]="ASCII_ENCODE",n[n.C40_ENCODE=2]="C40_ENCODE",n[n.TEXT_ENCODE=3]="TEXT_ENCODE",n[n.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",n[n.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",n[n.BASE256_ENCODE=6]="BASE256_ENCODE"})(Qi||(Qi={}));var uz=function(){function n(){}return n.decode=function(e){var t=new pC(e),r=new En,i=new En,a=new Array,o=Qi.ASCII_ENCODE;do if(o===Qi.ASCII_ENCODE)o=this.decodeAsciiSegment(t,r,i);else{switch(o){case Qi.C40_ENCODE:this.decodeC40Segment(t,r);break;case Qi.TEXT_ENCODE:this.decodeTextSegment(t,r);break;case Qi.ANSIX12_ENCODE:this.decodeAnsiX12Segment(t,r);break;case Qi.EDIFACT_ENCODE:this.decodeEdifactSegment(t,r);break;case Qi.BASE256_ENCODE:this.decodeBase256Segment(t,r,a);break;default:throw new gt}o=Qi.ASCII_ENCODE}while(o!==Qi.PAD_ENCODE&&t.available()>0);return i.length()>0&&r.append(i.toString()),new f2(e,r.toString(),a.length===0?null:a,null)},n.decodeAsciiSegment=function(e,t,r){var i=!1;do{var a=e.readBits(8);if(a===0)throw new gt;if(a<=128)return i&&(a+=128),t.append(String.fromCharCode(a-1)),Qi.ASCII_ENCODE;if(a===129)return Qi.PAD_ENCODE;if(a<=229){var o=a-130;o<10&&t.append("0"),t.append(""+o)}else switch(a){case 230:return Qi.C40_ENCODE;case 231:return Qi.BASE256_ENCODE;case 232:t.append("");break;case 233:case 234:break;case 235:i=!0;break;case 236:t.append("[)>05"),r.insert(0,"");break;case 237:t.append("[)>06"),r.insert(0,"");break;case 238:return Qi.ANSIX12_ENCODE;case 239:return Qi.TEXT_ENCODE;case 240:return Qi.EDIFACT_ENCODE;case 241:break;default:if(a!==254||e.available()!==0)throw new gt;break}}while(e.available()>0);return Qi.ASCII_ENCODE},n.decodeC40Segment=function(e,t){var r=!1,i=[],a=0;do{if(e.available()===8)return;var o=e.readBits(8);if(o===254)return;this.parseTwoBytes(o,e.readBits(8),i);for(var s=0;s<3;s++){var c=i[s];switch(a){case 0:if(c<3)a=c+1;else if(c<this.C40_BASIC_SET_CHARS.length){var f=this.C40_BASIC_SET_CHARS[c];r?(t.append(String.fromCharCode(f.charCodeAt(0)+128)),r=!1):t.append(f)}else throw new gt;break;case 1:r?(t.append(String.fromCharCode(c+128)),r=!1):t.append(String.fromCharCode(c)),a=0;break;case 2:if(c<this.C40_SHIFT2_SET_CHARS.length){var f=this.C40_SHIFT2_SET_CHARS[c];r?(t.append(String.fromCharCode(f.charCodeAt(0)+128)),r=!1):t.append(f)}else switch(c){case 27:t.append("");break;case 30:r=!0;break;default:throw new gt}a=0;break;case 3:r?(t.append(String.fromCharCode(c+224)),r=!1):t.append(String.fromCharCode(c+96)),a=0;break;default:throw new gt}}}while(e.available()>0)},n.decodeTextSegment=function(e,t){var r=!1,i=[],a=0;do{if(e.available()===8)return;var o=e.readBits(8);if(o===254)return;this.parseTwoBytes(o,e.readBits(8),i);for(var s=0;s<3;s++){var c=i[s];switch(a){case 0:if(c<3)a=c+1;else if(c<this.TEXT_BASIC_SET_CHARS.length){var f=this.TEXT_BASIC_SET_CHARS[c];r?(t.append(String.fromCharCode(f.charCodeAt(0)+128)),r=!1):t.append(f)}else throw new gt;break;case 1:r?(t.append(String.fromCharCode(c+128)),r=!1):t.append(String.fromCharCode(c)),a=0;break;case 2:if(c<this.TEXT_SHIFT2_SET_CHARS.length){var f=this.TEXT_SHIFT2_SET_CHARS[c];r?(t.append(String.fromCharCode(f.charCodeAt(0)+128)),r=!1):t.append(f)}else switch(c){case 27:t.append("");break;case 30:r=!0;break;default:throw new gt}a=0;break;case 3:if(c<this.TEXT_SHIFT3_SET_CHARS.length){var f=this.TEXT_SHIFT3_SET_CHARS[c];r?(t.append(String.fromCharCode(f.charCodeAt(0)+128)),r=!1):t.append(f),a=0}else throw new gt;break;default:throw new gt}}}while(e.available()>0)},n.decodeAnsiX12Segment=function(e,t){var r=[];do{if(e.available()===8)return;var i=e.readBits(8);if(i===254)return;this.parseTwoBytes(i,e.readBits(8),r);for(var a=0;a<3;a++){var o=r[a];switch(o){case 0:t.append("\r");break;case 1:t.append("*");break;case 2:t.append(">");break;case 3:t.append(" ");break;default:if(o<14)t.append(String.fromCharCode(o+44));else if(o<40)t.append(String.fromCharCode(o+51));else throw new gt;break}}}while(e.available()>0)},n.parseTwoBytes=function(e,t,r){var i=(e<<8)+t-1,a=Math.floor(i/1600);r[0]=a,i-=a*1600,a=Math.floor(i/40),r[1]=a,r[2]=i-a*40},n.decodeEdifactSegment=function(e,t){do{if(e.available()<=16)return;for(var r=0;r<4;r++){var i=e.readBits(6);if(i===31){var a=8-e.getBitOffset();a!==8&&e.readBits(a);return}(i&32)===0&&(i|=64),t.append(String.fromCharCode(i))}}while(e.available()>0)},n.decodeBase256Segment=function(e,t,r){var i=1+e.getByteOffset(),a=this.unrandomize255State(e.readBits(8),i++),o;if(a===0?o=e.available()/8|0:a<250?o=a:o=250*(a-249)+this.unrandomize255State(e.readBits(8),i++),o<0)throw new gt;for(var s=new Uint8Array(o),c=0;c<o;c++){if(e.available()<8)throw new gt;s[c]=this.unrandomize255State(e.readBits(8),i++)}r.push(s);try{t.append(Ys.decode(s,Yn.ISO88591))}catch(f){throw new G1("Platform does not support required encoding: "+f.message)}},n.unrandomize255State=function(e,t){var r=149*t%255+1,i=e-r;return i>=0?i:i+256},n.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],n.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],n.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],n.TEXT_SHIFT2_SET_CHARS=n.C40_SHIFT2_SET_CHARS,n.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""],n}(),fz=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},dz=function(){function n(){this.rsDecoder=new d2(Yo.DATA_MATRIX_FIELD_256)}return n.prototype.decode=function(e){var t,r,i=new lz(e),a=i.getVersion(),o=i.readCodewords(),s=cz.getDataBlocks(o,a),c=0;try{for(var f=fz(s),d=f.next();!d.done;d=f.next()){var p=d.value;c+=p.getNumDataCodewords()}}catch(M){t={error:M}}finally{try{d&&!d.done&&(r=f.return)&&r.call(f)}finally{if(t)throw t.error}}for(var g=new Uint8Array(c),m=s.length,x=0;x<m;x++){var _=s[x],C=_.getCodewords(),S=_.getNumDataCodewords();this.correctErrors(C,S);for(var k=0;k<S;k++)g[k*m+x]=C[k]}return uz.decode(g)},n.prototype.correctErrors=function(e,t){var r=new Int32Array(e);try{this.rsDecoder.decode(r,e.length-t)}catch{throw new ya}for(var i=0;i<t;i++)e[i]=r[i]},n}(),hz=function(){function n(e){this.image=e,this.rectangleDetector=new hx(this.image)}return n.prototype.detect=function(){var e=this.rectangleDetector.detect(),t=this.detectSolid1(e);if(t=this.detectSolid2(t),t[3]=this.correctTopRight(t),!t[3])throw new We;t=this.shiftToModuleCenter(t);var r=t[0],i=t[1],a=t[2],o=t[3],s=this.transitionsBetween(r,o)+1,c=this.transitionsBetween(a,o)+1;(s&1)===1&&(s+=1),(c&1)===1&&(c+=1),4*s<7*c&&4*c<7*s&&(s=c=Math.max(s,c));var f=n.sampleGrid(this.image,r,i,a,o,s,c);return new eb(f,[r,i,a,o])},n.shiftPoint=function(e,t,r){var i=(t.getX()-e.getX())/(r+1),a=(t.getY()-e.getY())/(r+1);return new Mt(e.getX()+i,e.getY()+a)},n.moveAway=function(e,t,r){var i=e.getX(),a=e.getY();return i<t?i-=1:i+=1,a<r?a-=1:a+=1,new Mt(i,a)},n.prototype.detectSolid1=function(e){var t=e[0],r=e[1],i=e[3],a=e[2],o=this.transitionsBetween(t,r),s=this.transitionsBetween(r,i),c=this.transitionsBetween(i,a),f=this.transitionsBetween(a,t),d=o,p=[a,t,r,i];return d>s&&(d=s,p[0]=t,p[1]=r,p[2]=i,p[3]=a),d>c&&(d=c,p[0]=r,p[1]=i,p[2]=a,p[3]=t),d>f&&(p[0]=i,p[1]=a,p[2]=t,p[3]=r),p},n.prototype.detectSolid2=function(e){var t=e[0],r=e[1],i=e[2],a=e[3],o=this.transitionsBetween(t,a),s=n.shiftPoint(r,i,(o+1)*4),c=n.shiftPoint(i,r,(o+1)*4),f=this.transitionsBetween(s,t),d=this.transitionsBetween(c,a);return f<d?(e[0]=t,e[1]=r,e[2]=i,e[3]=a):(e[0]=r,e[1]=i,e[2]=a,e[3]=t),e},n.prototype.correctTopRight=function(e){var t=e[0],r=e[1],i=e[2],a=e[3],o=this.transitionsBetween(t,a),s=this.transitionsBetween(r,a),c=n.shiftPoint(t,r,(s+1)*4),f=n.shiftPoint(i,r,(o+1)*4);o=this.transitionsBetween(c,a),s=this.transitionsBetween(f,a);var d=new Mt(a.getX()+(i.getX()-r.getX())/(o+1),a.getY()+(i.getY()-r.getY())/(o+1)),p=new Mt(a.getX()+(t.getX()-r.getX())/(s+1),a.getY()+(t.getY()-r.getY())/(s+1));if(!this.isValid(d))return this.isValid(p)?p:null;if(!this.isValid(p))return d;var g=this.transitionsBetween(c,d)+this.transitionsBetween(f,d),m=this.transitionsBetween(c,p)+this.transitionsBetween(f,p);return g>m?d:p},n.prototype.shiftToModuleCenter=function(e){var t=e[0],r=e[1],i=e[2],a=e[3],o=this.transitionsBetween(t,a)+1,s=this.transitionsBetween(i,a)+1,c=n.shiftPoint(t,r,s*4),f=n.shiftPoint(i,r,o*4);o=this.transitionsBetween(c,a)+1,s=this.transitionsBetween(f,a)+1,(o&1)===1&&(o+=1),(s&1)===1&&(s+=1);var d=(t.getX()+r.getX()+i.getX()+a.getX())/4,p=(t.getY()+r.getY()+i.getY()+a.getY())/4;t=n.moveAway(t,d,p),r=n.moveAway(r,d,p),i=n.moveAway(i,d,p),a=n.moveAway(a,d,p);var g,m;return c=n.shiftPoint(t,r,s*4),c=n.shiftPoint(c,a,o*4),g=n.shiftPoint(r,t,s*4),g=n.shiftPoint(g,i,o*4),f=n.shiftPoint(i,a,s*4),f=n.shiftPoint(f,r,o*4),m=n.shiftPoint(a,i,s*4),m=n.shiftPoint(m,t,o*4),[c,g,f,m]},n.prototype.isValid=function(e){return e.getX()>=0&&e.getX()<this.image.getWidth()&&e.getY()>0&&e.getY()<this.image.getHeight()},n.sampleGrid=function(e,t,r,i,a,o,s){var c=tb.getInstance();return c.sampleGrid(e,o,s,.5,.5,o-.5,.5,o-.5,s-.5,.5,s-.5,t.getX(),t.getY(),a.getX(),a.getY(),i.getX(),i.getY(),r.getX(),r.getY())},n.prototype.transitionsBetween=function(e,t){var r=Math.trunc(e.getX()),i=Math.trunc(e.getY()),a=Math.trunc(t.getX()),o=Math.trunc(t.getY()),s=Math.abs(o-i)>Math.abs(a-r);if(s){var c=r;r=i,i=c,c=a,a=o,o=c}for(var f=Math.abs(a-r),d=Math.abs(o-i),p=-f/2,g=i<o?1:-1,m=r<a?1:-1,x=0,_=this.image.get(s?i:r,s?r:i),C=r,S=i;C!==a;C+=m){var k=this.image.get(s?S:C,s?C:S);if(k!==_&&(x++,_=k),p+=d,p>0){if(S===o)break;S+=g,p-=f}}return x},n}(),mx=function(){function n(){this.decoder=new dz}return n.prototype.decode=function(e,t){t===void 0&&(t=null);var r,i;if(t!=null&&t.has(ai.PURE_BARCODE)){var a=n.extractPureBits(e.getBlackMatrix());r=this.decoder.decode(a),i=n.NO_POINTS}else{var o=new hz(e.getBlackMatrix()).detect();r=this.decoder.decode(o.getBits()),i=o.getPoints()}var s=r.getRawBytes(),c=new po(r.getText(),s,8*s.length,i,Yt.DATA_MATRIX,jr.currentTimeMillis()),f=r.getByteSegments();f!=null&&c.putMetadata(Fa.BYTE_SEGMENTS,f);var d=r.getECLevel();return d!=null&&c.putMetadata(Fa.ERROR_CORRECTION_LEVEL,d),c},n.prototype.reset=function(){},n.extractPureBits=function(e){var t=e.getTopLeftOnBit(),r=e.getBottomRightOnBit();if(t==null||r==null)throw new We;var i=this.moduleSize(t,e),a=t[1],o=r[1],s=t[0],c=r[0],f=(c-s+1)/i,d=(o-a+1)/i;if(f<=0||d<=0)throw new We;var p=i/2;a+=p,s+=p;for(var g=new fc(f,d),m=0;m<d;m++)for(var x=a+m*i,_=0;_<f;_++)e.get(s+_*i,x)&&g.set(_,m);return g},n.moduleSize=function(e,t){for(var r=t.getWidth(),i=e[0],a=e[1];i<r&&t.get(i,a);)i++;if(i===r)throw new We;var o=i-e[0];if(o===0)throw new We;return o},n.NO_POINTS=[],n}(),pz=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();(function(n){pz(e,n);function e(t){return t===void 0&&(t=500),n.call(this,new mx,t)||this}return e})(Gh);var mh;(function(n){n[n.L=0]="L",n[n.M=1]="M",n[n.Q=2]="Q",n[n.H=3]="H"})(mh||(mh={}));var gz=function(){function n(e,t,r){this.value=e,this.stringValue=t,this.bits=r,n.FOR_BITS.set(r,this),n.FOR_VALUE.set(e,this)}return n.prototype.getValue=function(){return this.value},n.prototype.getBits=function(){return this.bits},n.fromString=function(e){switch(e){case"L":return n.L;case"M":return n.M;case"Q":return n.Q;case"H":return n.H;default:throw new Sl(e+"not available")}},n.prototype.toString=function(){return this.stringValue},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.value===t.value},n.forBits=function(e){if(e<0||e>=n.FOR_BITS.size)throw new Xt;return n.FOR_BITS.get(e)},n.FOR_BITS=new Map,n.FOR_VALUE=new Map,n.L=new n(mh.L,"L",1),n.M=new n(mh.M,"M",0),n.Q=new n(mh.Q,"Q",3),n.H=new n(mh.H,"H",2),n}(),mz=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},gC=function(){function n(e){this.errorCorrectionLevel=gz.forBits(e>>3&3),this.dataMask=e&7}return n.numBitsDiffering=function(e,t){return Nn.bitCount(e^t)},n.decodeFormatInformation=function(e,t){var r=n.doDecodeFormatInformation(e,t);return r!==null?r:n.doDecodeFormatInformation(e^n.FORMAT_INFO_MASK_QR,t^n.FORMAT_INFO_MASK_QR)},n.doDecodeFormatInformation=function(e,t){var r,i,a=Number.MAX_SAFE_INTEGER,o=0;try{for(var s=mz(n.FORMAT_INFO_DECODE_LOOKUP),c=s.next();!c.done;c=s.next()){var f=c.value,d=f[0];if(d===e||d===t)return new n(f[1]);var p=n.numBitsDiffering(e,d);p<a&&(o=f[1],a=p),e!==t&&(p=n.numBitsDiffering(t,d),p<a&&(o=f[1],a=p))}}catch(g){r={error:g}}finally{try{c&&!c.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}return a<=3?new n(o):null},n.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},n.prototype.getDataMask=function(){return this.dataMask},n.prototype.hashCode=function(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.errorCorrectionLevel===t.errorCorrectionLevel&&this.dataMask===t.dataMask},n.FORMAT_INFO_MASK_QR=21522,n.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])],n}(),vz=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},je=function(){function n(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this.ecCodewordsPerBlock=e,this.ecBlocks=t}return n.prototype.getECCodewordsPerBlock=function(){return this.ecCodewordsPerBlock},n.prototype.getNumBlocks=function(){var e,t,r=0,i=this.ecBlocks;try{for(var a=vz(i),o=a.next();!o.done;o=a.next()){var s=o.value;r+=s.getCount()}}catch(c){e={error:c}}finally{try{o&&!o.done&&(t=a.return)&&t.call(a)}finally{if(e)throw e.error}}return r},n.prototype.getTotalECCodewords=function(){return this.ecCodewordsPerBlock*this.getNumBlocks()},n.prototype.getECBlocks=function(){return this.ecBlocks},n}(),ge=function(){function n(e,t){this.count=e,this.dataCodewords=t}return n.prototype.getCount=function(){return this.count},n.prototype.getDataCodewords=function(){return this.dataCodewords},n}(),yz=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ad=function(){function n(e,t){for(var r,i,a=[],o=2;o<arguments.length;o++)a[o-2]=arguments[o];this.versionNumber=e,this.alignmentPatternCenters=t,this.ecBlocks=a;var s=0,c=a[0].getECCodewordsPerBlock(),f=a[0].getECBlocks();try{for(var d=yz(f),p=d.next();!p.done;p=d.next()){var g=p.value;s+=g.getCount()*(g.getDataCodewords()+c)}}catch(m){r={error:m}}finally{try{p&&!p.done&&(i=d.return)&&i.call(d)}finally{if(r)throw r.error}}this.totalCodewords=s}return n.prototype.getVersionNumber=function(){return this.versionNumber},n.prototype.getAlignmentPatternCenters=function(){return this.alignmentPatternCenters},n.prototype.getTotalCodewords=function(){return this.totalCodewords},n.prototype.getDimensionForVersion=function(){return 17+4*this.versionNumber},n.prototype.getECBlocksForLevel=function(e){return this.ecBlocks[e.getValue()]},n.getProvisionalVersionForDimension=function(e){if(e%4!==1)throw new gt;try{return this.getVersionForNumber((e-17)/4)}catch{throw new gt}},n.getVersionForNumber=function(e){if(e<1||e>40)throw new Xt;return n.VERSIONS[e-1]},n.decodeVersionInformation=function(e){for(var t=Number.MAX_SAFE_INTEGER,r=0,i=0;i<n.VERSION_DECODE_INFO.length;i++){var a=n.VERSION_DECODE_INFO[i];if(a===e)return n.getVersionForNumber(i+7);var o=gC.numBitsDiffering(e,a);o<t&&(r=i+7,t=o)}return t<=3?n.getVersionForNumber(r):null},n.prototype.buildFunctionPattern=function(){var e=this.getDimensionForVersion(),t=new fc(e);t.setRegion(0,0,9,9),t.setRegion(e-8,0,8,9),t.setRegion(0,e-8,9,8);for(var r=this.alignmentPatternCenters.length,i=0;i<r;i++)for(var a=this.alignmentPatternCenters[i]-2,o=0;o<r;o++)i===0&&(o===0||o===r-1)||i===r-1&&o===0||t.setRegion(this.alignmentPatternCenters[o]-2,a,5,5);return t.setRegion(6,9,1,e-17),t.setRegion(9,6,e-17,1),this.versionNumber>6&&(t.setRegion(e-11,0,3,6),t.setRegion(0,e-11,6,3)),t},n.prototype.toString=function(){return""+this.versionNumber},n.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),n.VERSIONS=[new n(1,new Int32Array(0),new je(7,new ge(1,19)),new je(10,new ge(1,16)),new je(13,new ge(1,13)),new je(17,new ge(1,9))),new n(2,Int32Array.from([6,18]),new je(10,new ge(1,34)),new je(16,new ge(1,28)),new je(22,new ge(1,22)),new je(28,new ge(1,16))),new n(3,Int32Array.from([6,22]),new je(15,new ge(1,55)),new je(26,new ge(1,44)),new je(18,new ge(2,17)),new je(22,new ge(2,13))),new n(4,Int32Array.from([6,26]),new je(20,new ge(1,80)),new je(18,new ge(2,32)),new je(26,new ge(2,24)),new je(16,new ge(4,9))),new n(5,Int32Array.from([6,30]),new je(26,new ge(1,108)),new je(24,new ge(2,43)),new je(18,new ge(2,15),new ge(2,16)),new je(22,new ge(2,11),new ge(2,12))),new n(6,Int32Array.from([6,34]),new je(18,new ge(2,68)),new je(16,new ge(4,27)),new je(24,new ge(4,19)),new je(28,new ge(4,15))),new n(7,Int32Array.from([6,22,38]),new je(20,new ge(2,78)),new je(18,new ge(4,31)),new je(18,new ge(2,14),new ge(4,15)),new je(26,new ge(4,13),new ge(1,14))),new n(8,Int32Array.from([6,24,42]),new je(24,new ge(2,97)),new je(22,new ge(2,38),new ge(2,39)),new je(22,new ge(4,18),new ge(2,19)),new je(26,new ge(4,14),new ge(2,15))),new n(9,Int32Array.from([6,26,46]),new je(30,new ge(2,116)),new je(22,new ge(3,36),new ge(2,37)),new je(20,new ge(4,16),new ge(4,17)),new je(24,new ge(4,12),new ge(4,13))),new n(10,Int32Array.from([6,28,50]),new je(18,new ge(2,68),new ge(2,69)),new je(26,new ge(4,43),new ge(1,44)),new je(24,new ge(6,19),new ge(2,20)),new je(28,new ge(6,15),new ge(2,16))),new n(11,Int32Array.from([6,30,54]),new je(20,new ge(4,81)),new je(30,new ge(1,50),new ge(4,51)),new je(28,new ge(4,22),new ge(4,23)),new je(24,new ge(3,12),new ge(8,13))),new n(12,Int32Array.from([6,32,58]),new je(24,new ge(2,92),new ge(2,93)),new je(22,new ge(6,36),new ge(2,37)),new je(26,new ge(4,20),new ge(6,21)),new je(28,new ge(7,14),new ge(4,15))),new n(13,Int32Array.from([6,34,62]),new je(26,new ge(4,107)),new je(22,new ge(8,37),new ge(1,38)),new je(24,new ge(8,20),new ge(4,21)),new je(22,new ge(12,11),new ge(4,12))),new n(14,Int32Array.from([6,26,46,66]),new je(30,new ge(3,115),new ge(1,116)),new je(24,new ge(4,40),new ge(5,41)),new je(20,new ge(11,16),new ge(5,17)),new je(24,new ge(11,12),new ge(5,13))),new n(15,Int32Array.from([6,26,48,70]),new je(22,new ge(5,87),new ge(1,88)),new je(24,new ge(5,41),new ge(5,42)),new je(30,new ge(5,24),new ge(7,25)),new je(24,new ge(11,12),new ge(7,13))),new n(16,Int32Array.from([6,26,50,74]),new je(24,new ge(5,98),new ge(1,99)),new je(28,new ge(7,45),new ge(3,46)),new je(24,new ge(15,19),new ge(2,20)),new je(30,new ge(3,15),new ge(13,16))),new n(17,Int32Array.from([6,30,54,78]),new je(28,new ge(1,107),new ge(5,108)),new je(28,new ge(10,46),new ge(1,47)),new je(28,new ge(1,22),new ge(15,23)),new je(28,new ge(2,14),new ge(17,15))),new n(18,Int32Array.from([6,30,56,82]),new je(30,new ge(5,120),new ge(1,121)),new je(26,new ge(9,43),new ge(4,44)),new je(28,new ge(17,22),new ge(1,23)),new je(28,new ge(2,14),new ge(19,15))),new n(19,Int32Array.from([6,30,58,86]),new je(28,new ge(3,113),new ge(4,114)),new je(26,new ge(3,44),new ge(11,45)),new je(26,new ge(17,21),new ge(4,22)),new je(26,new ge(9,13),new ge(16,14))),new n(20,Int32Array.from([6,34,62,90]),new je(28,new ge(3,107),new ge(5,108)),new je(26,new ge(3,41),new ge(13,42)),new je(30,new ge(15,24),new ge(5,25)),new je(28,new ge(15,15),new ge(10,16))),new n(21,Int32Array.from([6,28,50,72,94]),new je(28,new ge(4,116),new ge(4,117)),new je(26,new ge(17,42)),new je(28,new ge(17,22),new ge(6,23)),new je(30,new ge(19,16),new ge(6,17))),new n(22,Int32Array.from([6,26,50,74,98]),new je(28,new ge(2,111),new ge(7,112)),new je(28,new ge(17,46)),new je(30,new ge(7,24),new ge(16,25)),new je(24,new ge(34,13))),new n(23,Int32Array.from([6,30,54,78,102]),new je(30,new ge(4,121),new ge(5,122)),new je(28,new ge(4,47),new ge(14,48)),new je(30,new ge(11,24),new ge(14,25)),new je(30,new ge(16,15),new ge(14,16))),new n(24,Int32Array.from([6,28,54,80,106]),new je(30,new ge(6,117),new ge(4,118)),new je(28,new ge(6,45),new ge(14,46)),new je(30,new ge(11,24),new ge(16,25)),new je(30,new ge(30,16),new ge(2,17))),new n(25,Int32Array.from([6,32,58,84,110]),new je(26,new ge(8,106),new ge(4,107)),new je(28,new ge(8,47),new ge(13,48)),new je(30,new ge(7,24),new ge(22,25)),new je(30,new ge(22,15),new ge(13,16))),new n(26,Int32Array.from([6,30,58,86,114]),new je(28,new ge(10,114),new ge(2,115)),new je(28,new ge(19,46),new ge(4,47)),new je(28,new ge(28,22),new ge(6,23)),new je(30,new ge(33,16),new ge(4,17))),new n(27,Int32Array.from([6,34,62,90,118]),new je(30,new ge(8,122),new ge(4,123)),new je(28,new ge(22,45),new ge(3,46)),new je(30,new ge(8,23),new ge(26,24)),new je(30,new ge(12,15),new ge(28,16))),new n(28,Int32Array.from([6,26,50,74,98,122]),new je(30,new ge(3,117),new ge(10,118)),new je(28,new ge(3,45),new ge(23,46)),new je(30,new ge(4,24),new ge(31,25)),new je(30,new ge(11,15),new ge(31,16))),new n(29,Int32Array.from([6,30,54,78,102,126]),new je(30,new ge(7,116),new ge(7,117)),new je(28,new ge(21,45),new ge(7,46)),new je(30,new ge(1,23),new ge(37,24)),new je(30,new ge(19,15),new ge(26,16))),new n(30,Int32Array.from([6,26,52,78,104,130]),new je(30,new ge(5,115),new ge(10,116)),new je(28,new ge(19,47),new ge(10,48)),new je(30,new ge(15,24),new ge(25,25)),new je(30,new ge(23,15),new ge(25,16))),new n(31,Int32Array.from([6,30,56,82,108,134]),new je(30,new ge(13,115),new ge(3,116)),new je(28,new ge(2,46),new ge(29,47)),new je(30,new ge(42,24),new ge(1,25)),new je(30,new ge(23,15),new ge(28,16))),new n(32,Int32Array.from([6,34,60,86,112,138]),new je(30,new ge(17,115)),new je(28,new ge(10,46),new ge(23,47)),new je(30,new ge(10,24),new ge(35,25)),new je(30,new ge(19,15),new ge(35,16))),new n(33,Int32Array.from([6,30,58,86,114,142]),new je(30,new ge(17,115),new ge(1,116)),new je(28,new ge(14,46),new ge(21,47)),new je(30,new ge(29,24),new ge(19,25)),new je(30,new ge(11,15),new ge(46,16))),new n(34,Int32Array.from([6,34,62,90,118,146]),new je(30,new ge(13,115),new ge(6,116)),new je(28,new ge(14,46),new ge(23,47)),new je(30,new ge(44,24),new ge(7,25)),new je(30,new ge(59,16),new ge(1,17))),new n(35,Int32Array.from([6,30,54,78,102,126,150]),new je(30,new ge(12,121),new ge(7,122)),new je(28,new ge(12,47),new ge(26,48)),new je(30,new ge(39,24),new ge(14,25)),new je(30,new ge(22,15),new ge(41,16))),new n(36,Int32Array.from([6,24,50,76,102,128,154]),new je(30,new ge(6,121),new ge(14,122)),new je(28,new ge(6,47),new ge(34,48)),new je(30,new ge(46,24),new ge(10,25)),new je(30,new ge(2,15),new ge(64,16))),new n(37,Int32Array.from([6,28,54,80,106,132,158]),new je(30,new ge(17,122),new ge(4,123)),new je(28,new ge(29,46),new ge(14,47)),new je(30,new ge(49,24),new ge(10,25)),new je(30,new ge(24,15),new ge(46,16))),new n(38,Int32Array.from([6,32,58,84,110,136,162]),new je(30,new ge(4,122),new ge(18,123)),new je(28,new ge(13,46),new ge(32,47)),new je(30,new ge(48,24),new ge(14,25)),new je(30,new ge(42,15),new ge(32,16))),new n(39,Int32Array.from([6,26,54,82,110,138,166]),new je(30,new ge(20,117),new ge(4,118)),new je(28,new ge(40,47),new ge(7,48)),new je(30,new ge(43,24),new ge(22,25)),new je(30,new ge(10,15),new ge(67,16))),new n(40,Int32Array.from([6,30,58,86,114,142,170]),new je(30,new ge(19,118),new ge(6,119)),new je(28,new ge(18,47),new ge(31,48)),new je(30,new ge(34,24),new ge(34,25)),new je(30,new ge(20,15),new ge(61,16)))],n}(),pa;(function(n){n[n.DATA_MASK_000=0]="DATA_MASK_000",n[n.DATA_MASK_001=1]="DATA_MASK_001",n[n.DATA_MASK_010=2]="DATA_MASK_010",n[n.DATA_MASK_011=3]="DATA_MASK_011",n[n.DATA_MASK_100=4]="DATA_MASK_100",n[n.DATA_MASK_101=5]="DATA_MASK_101",n[n.DATA_MASK_110=6]="DATA_MASK_110",n[n.DATA_MASK_111=7]="DATA_MASK_111"})(pa||(pa={}));var j4=function(){function n(e,t){this.value=e,this.isMasked=t}return n.prototype.unmaskBitMatrix=function(e,t){for(var r=0;r<t;r++)for(var i=0;i<t;i++)this.isMasked(r,i)&&e.flip(i,r)},n.values=new Map([[pa.DATA_MASK_000,new n(pa.DATA_MASK_000,function(e,t){return(e+t&1)===0})],[pa.DATA_MASK_001,new n(pa.DATA_MASK_001,function(e,t){return(e&1)===0})],[pa.DATA_MASK_010,new n(pa.DATA_MASK_010,function(e,t){return t%3===0})],[pa.DATA_MASK_011,new n(pa.DATA_MASK_011,function(e,t){return(e+t)%3===0})],[pa.DATA_MASK_100,new n(pa.DATA_MASK_100,function(e,t){return(Math.floor(e/2)+Math.floor(t/3)&1)===0})],[pa.DATA_MASK_101,new n(pa.DATA_MASK_101,function(e,t){return e*t%6===0})],[pa.DATA_MASK_110,new n(pa.DATA_MASK_110,function(e,t){return e*t%6<3})],[pa.DATA_MASK_111,new n(pa.DATA_MASK_111,function(e,t){return(e+t+e*t%3&1)===0})]]),n}(),xz=function(){function n(e){var t=e.getHeight();if(t<21||(t&3)!==1)throw new gt;this.bitMatrix=e}return n.prototype.readFormatInformation=function(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;for(var e=0,t=0;t<6;t++)e=this.copyBit(t,8,e);e=this.copyBit(7,8,e),e=this.copyBit(8,8,e),e=this.copyBit(8,7,e);for(var r=5;r>=0;r--)e=this.copyBit(8,r,e);for(var i=this.bitMatrix.getHeight(),a=0,o=i-7,r=i-1;r>=o;r--)a=this.copyBit(8,r,a);for(var t=i-8;t<i;t++)a=this.copyBit(t,8,a);if(this.parsedFormatInfo=gC.decodeFormatInformation(e,a),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new gt},n.prototype.readVersion=function(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;var e=this.bitMatrix.getHeight(),t=Math.floor((e-17)/4);if(t<=6)return ad.getVersionForNumber(t);for(var r=0,i=e-11,a=5;a>=0;a--)for(var o=e-9;o>=i;o--)r=this.copyBit(o,a,r);var s=ad.decodeVersionInformation(r);if(s!==null&&s.getDimensionForVersion()===e)return this.parsedVersion=s,s;r=0;for(var o=5;o>=0;o--)for(var a=e-9;a>=i;a--)r=this.copyBit(o,a,r);if(s=ad.decodeVersionInformation(r),s!==null&&s.getDimensionForVersion()===e)return this.parsedVersion=s,s;throw new gt},n.prototype.copyBit=function(e,t,r){var i=this.isMirror?this.bitMatrix.get(t,e):this.bitMatrix.get(e,t);return i?r<<1|1:r<<1},n.prototype.readCodewords=function(){var e=this.readFormatInformation(),t=this.readVersion(),r=j4.values.get(e.getDataMask()),i=this.bitMatrix.getHeight();r.unmaskBitMatrix(this.bitMatrix,i);for(var a=t.buildFunctionPattern(),o=!0,s=new Uint8Array(t.getTotalCodewords()),c=0,f=0,d=0,p=i-1;p>0;p-=2){p===6&&p--;for(var g=0;g<i;g++)for(var m=o?i-1-g:g,x=0;x<2;x++)a.get(p-x,m)||(d++,f<<=1,this.bitMatrix.get(p-x,m)&&(f|=1),d===8&&(s[c++]=f,d=0,f=0));o=!o}if(c!==t.getTotalCodewords())throw new gt;return s},n.prototype.remask=function(){if(this.parsedFormatInfo!==null){var e=j4.values.get(this.parsedFormatInfo.getDataMask()),t=this.bitMatrix.getHeight();e.unmaskBitMatrix(this.bitMatrix,t)}},n.prototype.setMirror=function(e){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=e},n.prototype.mirror=function(){for(var e=this.bitMatrix,t=0,r=e.getWidth();t<r;t++)for(var i=t+1,a=e.getHeight();i<a;i++)e.get(t,i)!==e.get(i,t)&&(e.flip(i,t),e.flip(t,i))},n}(),B4=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},bz=function(){function n(e,t){this.numDataCodewords=e,this.codewords=t}return n.getDataBlocks=function(e,t,r){var i,a,o,s;if(e.length!==t.getTotalCodewords())throw new Xt;var c=t.getECBlocksForLevel(r),f=0,d=c.getECBlocks();try{for(var p=B4(d),g=p.next();!g.done;g=p.next()){var m=g.value;f+=m.getCount()}}catch(D){i={error:D}}finally{try{g&&!g.done&&(a=p.return)&&a.call(p)}finally{if(i)throw i.error}}var x=new Array(f),_=0;try{for(var C=B4(d),S=C.next();!S.done;S=C.next())for(var m=S.value,k=0;k<m.getCount();k++){var M=m.getDataCodewords(),P=c.getECCodewordsPerBlock()+M;x[_++]=new n(M,new Uint8Array(P))}}catch(D){o={error:D}}finally{try{S&&!S.done&&(s=C.return)&&s.call(C)}finally{if(o)throw o.error}}for(var Y=x[0].codewords.length,z=x.length-1;z>=0;){var F=x[z].codewords.length;if(F===Y)break;z--}z++;for(var I=Y-c.getECCodewordsPerBlock(),T=0,k=0;k<I;k++)for(var j=0;j<_;j++)x[j].codewords[k]=e[T++];for(var j=z;j<_;j++)x[j].codewords[I]=e[T++];for(var N=x[0].codewords.length,k=I;k<N;k++)for(var j=0;j<_;j++){var R=j<z?k:k+1;x[j].codewords[R]=e[T++]}return x},n.prototype.getNumDataCodewords=function(){return this.numDataCodewords},n.prototype.getCodewords=function(){return this.codewords},n}(),Hs;(function(n){n[n.TERMINATOR=0]="TERMINATOR",n[n.NUMERIC=1]="NUMERIC",n[n.ALPHANUMERIC=2]="ALPHANUMERIC",n[n.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",n[n.BYTE=4]="BYTE",n[n.ECI=5]="ECI",n[n.KANJI=6]="KANJI",n[n.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",n[n.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",n[n.HANZI=9]="HANZI"})(Hs||(Hs={}));var Wr=function(){function n(e,t,r,i){this.value=e,this.stringValue=t,this.characterCountBitsForVersions=r,this.bits=i,n.FOR_BITS.set(i,this),n.FOR_VALUE.set(e,this)}return n.forBits=function(e){var t=n.FOR_BITS.get(e);if(t===void 0)throw new Xt;return t},n.prototype.getCharacterCountBits=function(e){var t=e.getVersionNumber(),r;return t<=9?r=0:t<=26?r=1:r=2,this.characterCountBitsForVersions[r]},n.prototype.getValue=function(){return this.value},n.prototype.getBits=function(){return this.bits},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.value===t.value},n.prototype.toString=function(){return this.stringValue},n.FOR_BITS=new Map,n.FOR_VALUE=new Map,n.TERMINATOR=new n(Hs.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),n.NUMERIC=new n(Hs.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),n.ALPHANUMERIC=new n(Hs.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),n.STRUCTURED_APPEND=new n(Hs.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),n.BYTE=new n(Hs.BYTE,"BYTE",Int32Array.from([8,16,16]),4),n.ECI=new n(Hs.ECI,"ECI",Int32Array.from([0,0,0]),7),n.KANJI=new n(Hs.KANJI,"KANJI",Int32Array.from([8,10,12]),8),n.FNC1_FIRST_POSITION=new n(Hs.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),n.FNC1_SECOND_POSITION=new n(Hs.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),n.HANZI=new n(Hs.HANZI,"HANZI",Int32Array.from([8,10,12]),13),n}(),wz=function(){function n(){}return n.decode=function(e,t,r,i){var a=new pC(e),o=new En,s=new Array,c=-1,f=-1;try{var d=null,p=!1,g=void 0;do{if(a.available()<4)g=Wr.TERMINATOR;else{var m=a.readBits(4);g=Wr.forBits(m)}switch(g){case Wr.TERMINATOR:break;case Wr.FNC1_FIRST_POSITION:case Wr.FNC1_SECOND_POSITION:p=!0;break;case Wr.STRUCTURED_APPEND:if(a.available()<16)throw new gt;c=a.readBits(8),f=a.readBits(8);break;case Wr.ECI:var x=n.parseECIValue(a);if(d=ea.getCharacterSetECIByValue(x),d===null)throw new gt;break;case Wr.HANZI:var _=a.readBits(4),C=a.readBits(g.getCharacterCountBits(t));_===n.GB2312_SUBSET&&n.decodeHanziSegment(a,o,C);break;default:var S=a.readBits(g.getCharacterCountBits(t));switch(g){case Wr.NUMERIC:n.decodeNumericSegment(a,o,S);break;case Wr.ALPHANUMERIC:n.decodeAlphanumericSegment(a,o,S,p);break;case Wr.BYTE:n.decodeByteSegment(a,o,S,d,s,i);break;case Wr.KANJI:n.decodeKanjiSegment(a,o,S);break;default:throw new gt}break}}while(g!==Wr.TERMINATOR)}catch{throw new gt}return new f2(e,o.toString(),s.length===0?null:s,r===null?null:r.toString(),c,f)},n.decodeHanziSegment=function(e,t,r){if(r*13>e.available())throw new gt;for(var i=new Uint8Array(2*r),a=0;r>0;){var o=e.readBits(13),s=o/96<<8&4294967295|o%96;s<959?s+=41377:s+=42657,i[a]=s>>8&255,i[a+1]=s&255,a+=2,r--}try{t.append(Ys.decode(i,Yn.GB2312))}catch(c){throw new gt(c)}},n.decodeKanjiSegment=function(e,t,r){if(r*13>e.available())throw new gt;for(var i=new Uint8Array(2*r),a=0;r>0;){var o=e.readBits(13),s=o/192<<8&4294967295|o%192;s<7936?s+=33088:s+=49472,i[a]=s>>8,i[a+1]=s,a+=2,r--}try{t.append(Ys.decode(i,Yn.SHIFT_JIS))}catch(c){throw new gt(c)}},n.decodeByteSegment=function(e,t,r,i,a,o){if(8*r>e.available())throw new gt;for(var s=new Uint8Array(r),c=0;c<r;c++)s[c]=e.readBits(8);var f;i===null?f=Yn.guessEncoding(s,o):f=i.getName();try{t.append(Ys.decode(s,f))}catch(d){throw new gt(d)}a.push(s)},n.toAlphaNumericChar=function(e){if(e>=n.ALPHANUMERIC_CHARS.length)throw new gt;return n.ALPHANUMERIC_CHARS[e]},n.decodeAlphanumericSegment=function(e,t,r,i){for(var a=t.length();r>1;){if(e.available()<11)throw new gt;var o=e.readBits(11);t.append(n.toAlphaNumericChar(Math.floor(o/45))),t.append(n.toAlphaNumericChar(o%45)),r-=2}if(r===1){if(e.available()<6)throw new gt;t.append(n.toAlphaNumericChar(e.readBits(6)))}if(i)for(var s=a;s<t.length();s++)t.charAt(s)==="%"&&(s<t.length()-1&&t.charAt(s+1)==="%"?t.deleteCharAt(s+1):t.setCharAt(s,""))},n.decodeNumericSegment=function(e,t,r){for(;r>=3;){if(e.available()<10)throw new gt;var i=e.readBits(10);if(i>=1e3)throw new gt;t.append(n.toAlphaNumericChar(Math.floor(i/100))),t.append(n.toAlphaNumericChar(Math.floor(i/10)%10)),t.append(n.toAlphaNumericChar(i%10)),r-=3}if(r===2){if(e.available()<7)throw new gt;var a=e.readBits(7);if(a>=100)throw new gt;t.append(n.toAlphaNumericChar(Math.floor(a/10))),t.append(n.toAlphaNumericChar(a%10))}else if(r===1){if(e.available()<4)throw new gt;var o=e.readBits(4);if(o>=10)throw new gt;t.append(n.toAlphaNumericChar(o))}},n.parseECIValue=function(e){var t=e.readBits(8);if((t&128)===0)return t&127;if((t&192)===128){var r=e.readBits(8);return(t&63)<<8&4294967295|r}if((t&224)===192){var i=e.readBits(16);return(t&31)<<16&4294967295|i}throw new gt},n.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",n.GB2312_SUBSET=1,n}(),mC=function(){function n(e){this.mirrored=e}return n.prototype.isMirrored=function(){return this.mirrored},n.prototype.applyMirroredCorrection=function(e){if(!(!this.mirrored||e===null||e.length<3)){var t=e[0];e[0]=e[2],e[2]=t}},n}(),F4=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},_z=function(){function n(){this.rsDecoder=new d2(Yo.QR_CODE_FIELD_256)}return n.prototype.decodeBooleanArray=function(e,t){return this.decodeBitMatrix(fc.parseFromBooleanArray(e),t)},n.prototype.decodeBitMatrix=function(e,t){var r=new xz(e),i=null;try{return this.decodeBitMatrixParser(r,t)}catch(o){i=o}try{r.remask(),r.setMirror(!0),r.readVersion(),r.readFormatInformation(),r.mirror();var a=this.decodeBitMatrixParser(r,t);return a.setOther(new mC(!0)),a}catch(o){throw i!==null?i:o}},n.prototype.decodeBitMatrixParser=function(e,t){var r,i,a,o,s=e.readVersion(),c=e.readFormatInformation().getErrorCorrectionLevel(),f=e.readCodewords(),d=bz.getDataBlocks(f,s,c),p=0;try{for(var g=F4(d),m=g.next();!m.done;m=g.next()){var x=m.value;p+=x.getNumDataCodewords()}}catch(z){r={error:z}}finally{try{m&&!m.done&&(i=g.return)&&i.call(g)}finally{if(r)throw r.error}}var _=new Uint8Array(p),C=0;try{for(var S=F4(d),k=S.next();!k.done;k=S.next()){var x=k.value,M=x.getCodewords(),P=x.getNumDataCodewords();this.correctErrors(M,P);for(var Y=0;Y<P;Y++)_[C++]=M[Y]}}catch(z){a={error:z}}finally{try{k&&!k.done&&(o=S.return)&&o.call(S)}finally{if(a)throw a.error}}return wz.decode(_,s,c,t)},n.prototype.correctErrors=function(e,t){var r=new Int32Array(e);try{this.rsDecoder.decode(r,e.length-t)}catch{throw new ya}for(var i=0;i<t;i++)e[i]=r[i]},n}(),Az=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Sz=function(n){Az(e,n);function e(t,r,i){var a=n.call(this,t,r)||this;return a.estimatedModuleSize=i,a}return e.prototype.aboutEquals=function(t,r,i){if(Math.abs(r-this.getY())<=t&&Math.abs(i-this.getX())<=t){var a=Math.abs(t-this.estimatedModuleSize);return a<=1||a<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(t,r,i){var a=(this.getX()+r)/2,o=(this.getY()+t)/2,s=(this.estimatedModuleSize+i)/2;return new e(a,o,s)},e}(Mt),Ez=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Cz=function(){function n(e,t,r,i,a,o,s){this.image=e,this.startX=t,this.startY=r,this.width=i,this.height=a,this.moduleSize=o,this.resultPointCallback=s,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}return n.prototype.find=function(){for(var e=this.startX,t=this.height,r=this.width,i=e+r,a=this.startY+t/2,o=new Int32Array(3),s=this.image,c=0;c<t;c++){var f=a+((c&1)===0?Math.floor((c+1)/2):-Math.floor((c+1)/2));o[0]=0,o[1]=0,o[2]=0;for(var d=e;d<i&&!s.get(d,f);)d++;for(var p=0;d<i;){if(s.get(d,f))if(p===1)o[1]++;else if(p===2){if(this.foundPatternCross(o)){var g=this.handlePossibleCenter(o,f,d);if(g!==null)return g}o[0]=o[2],o[1]=1,o[2]=0,p=1}else o[++p]++;else p===1&&p++,o[p]++;d++}if(this.foundPatternCross(o)){var g=this.handlePossibleCenter(o,f,i);if(g!==null)return g}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new We},n.centerFromEnd=function(e,t){return t-e[2]-e[1]/2},n.prototype.foundPatternCross=function(e){for(var t=this.moduleSize,r=t/2,i=0;i<3;i++)if(Math.abs(t-e[i])>=r)return!1;return!0},n.prototype.crossCheckVertical=function(e,t,r,i){var a=this.image,o=a.getHeight(),s=this.crossCheckStateCount;s[0]=0,s[1]=0,s[2]=0;for(var c=e;c>=0&&a.get(t,c)&&s[1]<=r;)s[1]++,c--;if(c<0||s[1]>r)return NaN;for(;c>=0&&!a.get(t,c)&&s[0]<=r;)s[0]++,c--;if(s[0]>r)return NaN;for(c=e+1;c<o&&a.get(t,c)&&s[1]<=r;)s[1]++,c++;if(c===o||s[1]>r)return NaN;for(;c<o&&!a.get(t,c)&&s[2]<=r;)s[2]++,c++;if(s[2]>r)return NaN;var f=s[0]+s[1]+s[2];return 5*Math.abs(f-i)>=2*i?NaN:this.foundPatternCross(s)?n.centerFromEnd(s,c):NaN},n.prototype.handlePossibleCenter=function(e,t,r){var i,a,o=e[0]+e[1]+e[2],s=n.centerFromEnd(e,r),c=this.crossCheckVertical(t,s,2*e[1],o);if(!isNaN(c)){var f=(e[0]+e[1]+e[2])/3;try{for(var d=Ez(this.possibleCenters),p=d.next();!p.done;p=d.next()){var g=p.value;if(g.aboutEquals(f,c,s))return g.combineEstimate(c,s,f)}}catch(x){i={error:x}}finally{try{p&&!p.done&&(a=d.return)&&a.call(d)}finally{if(i)throw i.error}}var m=new Sz(s,c,f);this.possibleCenters.push(m),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(m)}return null},n}(),Iz=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Tz=function(n){Iz(e,n);function e(t,r,i,a){var o=n.call(this,t,r)||this;return o.estimatedModuleSize=i,o.count=a,a===void 0&&(o.count=1),o}return e.prototype.getEstimatedModuleSize=function(){return this.estimatedModuleSize},e.prototype.getCount=function(){return this.count},e.prototype.aboutEquals=function(t,r,i){if(Math.abs(r-this.getY())<=t&&Math.abs(i-this.getX())<=t){var a=Math.abs(t-this.estimatedModuleSize);return a<=1||a<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(t,r,i){var a=this.count+1,o=(this.count*this.getX()+r)/a,s=(this.count*this.getY()+t)/a,c=(this.count*this.estimatedModuleSize+i)/a;return new e(o,s,c,a)},e}(Mt),Rz=function(){function n(e){this.bottomLeft=e[0],this.topLeft=e[1],this.topRight=e[2]}return n.prototype.getBottomLeft=function(){return this.bottomLeft},n.prototype.getTopLeft=function(){return this.topLeft},n.prototype.getTopRight=function(){return this.topRight},n}(),B0=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Nz=function(){function n(e,t){this.image=e,this.resultPointCallback=t,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=t}return n.prototype.getImage=function(){return this.image},n.prototype.getPossibleCenters=function(){return this.possibleCenters},n.prototype.find=function(e){var t=e!=null&&e.get(ai.TRY_HARDER)!==void 0,r=e!=null&&e.get(ai.PURE_BARCODE)!==void 0,i=this.image,a=i.getHeight(),o=i.getWidth(),s=Math.floor(3*a/(4*n.MAX_MODULES));(s<n.MIN_SKIP||t)&&(s=n.MIN_SKIP);for(var c=!1,f=new Int32Array(5),d=s-1;d<a&&!c;d+=s){f[0]=0,f[1]=0,f[2]=0,f[3]=0,f[4]=0;for(var p=0,g=0;g<o;g++)if(i.get(g,d))(p&1)===1&&p++,f[p]++;else if((p&1)===0)if(p===4)if(n.foundPatternCross(f)){var m=this.handlePossibleCenter(f,d,g,r);if(m===!0)if(s=2,this.hasSkipped===!0)c=this.haveMultiplyConfirmedCenters();else{var x=this.findRowSkip();x>f[2]&&(d+=x-f[2]-s,g=o-1)}else{f[0]=f[2],f[1]=f[3],f[2]=f[4],f[3]=1,f[4]=0,p=3;continue}p=0,f[0]=0,f[1]=0,f[2]=0,f[3]=0,f[4]=0}else f[0]=f[2],f[1]=f[3],f[2]=f[4],f[3]=1,f[4]=0,p=3;else f[++p]++;else f[p]++;if(n.foundPatternCross(f)){var m=this.handlePossibleCenter(f,d,o,r);m===!0&&(s=f[0],this.hasSkipped&&(c=this.haveMultiplyConfirmedCenters()))}}var _=this.selectBestPatterns();return Mt.orderBestPatterns(_),new Rz(_)},n.centerFromEnd=function(e,t){return t-e[4]-e[3]-e[2]/2},n.foundPatternCross=function(e){for(var t=0,r=0;r<5;r++){var i=e[r];if(i===0)return!1;t+=i}if(t<7)return!1;var a=t/7,o=a/2;return Math.abs(a-e[0])<o&&Math.abs(a-e[1])<o&&Math.abs(3*a-e[2])<3*o&&Math.abs(a-e[3])<o&&Math.abs(a-e[4])<o},n.prototype.getCrossCheckStateCount=function(){var e=this.crossCheckStateCount;return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e},n.prototype.crossCheckDiagonal=function(e,t,r,i){for(var a=this.getCrossCheckStateCount(),o=0,s=this.image;e>=o&&t>=o&&s.get(t-o,e-o);)a[2]++,o++;if(e<o||t<o)return!1;for(;e>=o&&t>=o&&!s.get(t-o,e-o)&&a[1]<=r;)a[1]++,o++;if(e<o||t<o||a[1]>r)return!1;for(;e>=o&&t>=o&&s.get(t-o,e-o)&&a[0]<=r;)a[0]++,o++;if(a[0]>r)return!1;var c=s.getHeight(),f=s.getWidth();for(o=1;e+o<c&&t+o<f&&s.get(t+o,e+o);)a[2]++,o++;if(e+o>=c||t+o>=f)return!1;for(;e+o<c&&t+o<f&&!s.get(t+o,e+o)&&a[3]<r;)a[3]++,o++;if(e+o>=c||t+o>=f||a[3]>=r)return!1;for(;e+o<c&&t+o<f&&s.get(t+o,e+o)&&a[4]<r;)a[4]++,o++;if(a[4]>=r)return!1;var d=a[0]+a[1]+a[2]+a[3]+a[4];return Math.abs(d-i)<2*i&&n.foundPatternCross(a)},n.prototype.crossCheckVertical=function(e,t,r,i){for(var a=this.image,o=a.getHeight(),s=this.getCrossCheckStateCount(),c=e;c>=0&&a.get(t,c);)s[2]++,c--;if(c<0)return NaN;for(;c>=0&&!a.get(t,c)&&s[1]<=r;)s[1]++,c--;if(c<0||s[1]>r)return NaN;for(;c>=0&&a.get(t,c)&&s[0]<=r;)s[0]++,c--;if(s[0]>r)return NaN;for(c=e+1;c<o&&a.get(t,c);)s[2]++,c++;if(c===o)return NaN;for(;c<o&&!a.get(t,c)&&s[3]<r;)s[3]++,c++;if(c===o||s[3]>=r)return NaN;for(;c<o&&a.get(t,c)&&s[4]<r;)s[4]++,c++;if(s[4]>=r)return NaN;var f=s[0]+s[1]+s[2]+s[3]+s[4];return 5*Math.abs(f-i)>=2*i?NaN:n.foundPatternCross(s)?n.centerFromEnd(s,c):NaN},n.prototype.crossCheckHorizontal=function(e,t,r,i){for(var a=this.image,o=a.getWidth(),s=this.getCrossCheckStateCount(),c=e;c>=0&&a.get(c,t);)s[2]++,c--;if(c<0)return NaN;for(;c>=0&&!a.get(c,t)&&s[1]<=r;)s[1]++,c--;if(c<0||s[1]>r)return NaN;for(;c>=0&&a.get(c,t)&&s[0]<=r;)s[0]++,c--;if(s[0]>r)return NaN;for(c=e+1;c<o&&a.get(c,t);)s[2]++,c++;if(c===o)return NaN;for(;c<o&&!a.get(c,t)&&s[3]<r;)s[3]++,c++;if(c===o||s[3]>=r)return NaN;for(;c<o&&a.get(c,t)&&s[4]<r;)s[4]++,c++;if(s[4]>=r)return NaN;var f=s[0]+s[1]+s[2]+s[3]+s[4];return 5*Math.abs(f-i)>=i?NaN:n.foundPatternCross(s)?n.centerFromEnd(s,c):NaN},n.prototype.handlePossibleCenter=function(e,t,r,i){var a=e[0]+e[1]+e[2]+e[3]+e[4],o=n.centerFromEnd(e,r),s=this.crossCheckVertical(t,Math.floor(o),e[2],a);if(!isNaN(s)&&(o=this.crossCheckHorizontal(Math.floor(o),Math.floor(s),e[2],a),!isNaN(o)&&(!i||this.crossCheckDiagonal(Math.floor(s),Math.floor(o),e[2],a)))){for(var c=a/7,f=!1,d=this.possibleCenters,p=0,g=d.length;p<g;p++){var m=d[p];if(m.aboutEquals(c,s,o)){d[p]=m.combineEstimate(s,o,c),f=!0;break}}if(!f){var x=new Tz(o,s,c);d.push(x),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(x)}return!0}return!1},n.prototype.findRowSkip=function(){var e,t,r=this.possibleCenters.length;if(r<=1)return 0;var i=null;try{for(var a=B0(this.possibleCenters),o=a.next();!o.done;o=a.next()){var s=o.value;if(s.getCount()>=n.CENTER_QUORUM)if(i==null)i=s;else return this.hasSkipped=!0,Math.floor((Math.abs(i.getX()-s.getX())-Math.abs(i.getY()-s.getY()))/2)}}catch(c){e={error:c}}finally{try{o&&!o.done&&(t=a.return)&&t.call(a)}finally{if(e)throw e.error}}return 0},n.prototype.haveMultiplyConfirmedCenters=function(){var e,t,r,i,a=0,o=0,s=this.possibleCenters.length;try{for(var c=B0(this.possibleCenters),f=c.next();!f.done;f=c.next()){var d=f.value;d.getCount()>=n.CENTER_QUORUM&&(a++,o+=d.getEstimatedModuleSize())}}catch(_){e={error:_}}finally{try{f&&!f.done&&(t=c.return)&&t.call(c)}finally{if(e)throw e.error}}if(a<3)return!1;var p=o/s,g=0;try{for(var m=B0(this.possibleCenters),x=m.next();!x.done;x=m.next()){var d=x.value;g+=Math.abs(d.getEstimatedModuleSize()-p)}}catch(_){r={error:_}}finally{try{x&&!x.done&&(i=m.return)&&i.call(m)}finally{if(r)throw r.error}}return g<=.05*o},n.prototype.selectBestPatterns=function(){var e,t,r,i,a=this.possibleCenters.length;if(a<3)throw new We;var o=this.possibleCenters,s;if(a>3){var c=0,f=0;try{for(var d=B0(this.possibleCenters),p=d.next();!p.done;p=d.next()){var g=p.value,m=g.getEstimatedModuleSize();c+=m,f+=m*m}}catch(Y){e={error:Y}}finally{try{p&&!p.done&&(t=d.return)&&t.call(d)}finally{if(e)throw e.error}}s=c/a;var x=Math.sqrt(f/a-s*s);o.sort(function(Y,z){var F=Math.abs(z.getEstimatedModuleSize()-s),I=Math.abs(Y.getEstimatedModuleSize()-s);return F<I?-1:F>I?1:0});for(var _=Math.max(.2*s,x),C=0;C<o.length&&o.length>3;C++){var S=o[C];Math.abs(S.getEstimatedModuleSize()-s)>_&&(o.splice(C,1),C--)}}if(o.length>3){var c=0;try{for(var k=B0(o),M=k.next();!M.done;M=k.next()){var P=M.value;c+=P.getEstimatedModuleSize()}}catch(z){r={error:z}}finally{try{M&&!M.done&&(i=k.return)&&i.call(k)}finally{if(r)throw r.error}}s=c/o.length,o.sort(function(z,F){if(F.getCount()===z.getCount()){var I=Math.abs(F.getEstimatedModuleSize()-s),T=Math.abs(z.getEstimatedModuleSize()-s);return I<T?1:I>T?-1:0}else return F.getCount()-z.getCount()}),o.splice(3)}return[o[0],o[1],o[2]]},n.CENTER_QUORUM=2,n.MIN_SKIP=3,n.MAX_MODULES=57,n}(),Dz=function(){function n(e){this.image=e}return n.prototype.getImage=function(){return this.image},n.prototype.getResultPointCallback=function(){return this.resultPointCallback},n.prototype.detect=function(e){this.resultPointCallback=e==null?null:e.get(ai.NEED_RESULT_POINT_CALLBACK);var t=new Nz(this.image,this.resultPointCallback),r=t.find(e);return this.processFinderPatternInfo(r)},n.prototype.processFinderPatternInfo=function(e){var t=e.getTopLeft(),r=e.getTopRight(),i=e.getBottomLeft(),a=this.calculateModuleSize(t,r,i);if(a<1)throw new We("No pattern found in proccess finder.");var o=n.computeDimension(t,r,i,a),s=ad.getProvisionalVersionForDimension(o),c=s.getDimensionForVersion()-7,f=null;if(s.getAlignmentPatternCenters().length>0)for(var d=r.getX()-t.getX()+i.getX(),p=r.getY()-t.getY()+i.getY(),g=1-3/c,m=Math.floor(t.getX()+g*(d-t.getX())),x=Math.floor(t.getY()+g*(p-t.getY())),_=4;_<=16;_<<=1)try{f=this.findAlignmentInRegion(a,m,x,_);break}catch(M){if(!(M instanceof We))throw M}var C=n.createTransform(t,r,i,f,o),S=n.sampleGrid(this.image,C,o),k;return f===null?k=[i,t,r]:k=[i,t,r,f],new eb(S,k)},n.createTransform=function(e,t,r,i,a){var o=a-3.5,s,c,f,d;return i!==null?(s=i.getX(),c=i.getY(),f=o-3,d=f):(s=t.getX()-e.getX()+r.getX(),c=t.getY()-e.getY()+r.getY(),f=o,d=o),uC.quadrilateralToQuadrilateral(3.5,3.5,o,3.5,f,d,3.5,o,e.getX(),e.getY(),t.getX(),t.getY(),s,c,r.getX(),r.getY())},n.sampleGrid=function(e,t,r){var i=tb.getInstance();return i.sampleGridWithTransform(e,r,r,t)},n.computeDimension=function(e,t,r,i){var a=tr.round(Mt.distance(e,t)/i),o=tr.round(Mt.distance(e,r)/i),s=Math.floor((a+o)/2)+7;switch(s&3){case 0:s++;break;case 2:s--;break;case 3:throw new We("Dimensions could be not found.")}return s},n.prototype.calculateModuleSize=function(e,t,r){return(this.calculateModuleSizeOneWay(e,t)+this.calculateModuleSizeOneWay(e,r))/2},n.prototype.calculateModuleSizeOneWay=function(e,t){var r=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(e.getX()),Math.floor(e.getY()),Math.floor(t.getX()),Math.floor(t.getY())),i=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(t.getX()),Math.floor(t.getY()),Math.floor(e.getX()),Math.floor(e.getY()));return isNaN(r)?i/7:isNaN(i)?r/7:(r+i)/14},n.prototype.sizeOfBlackWhiteBlackRunBothWays=function(e,t,r,i){var a=this.sizeOfBlackWhiteBlackRun(e,t,r,i),o=1,s=e-(r-e);s<0?(o=e/(e-s),s=0):s>=this.image.getWidth()&&(o=(this.image.getWidth()-1-e)/(s-e),s=this.image.getWidth()-1);var c=Math.floor(t-(i-t)*o);return o=1,c<0?(o=t/(t-c),c=0):c>=this.image.getHeight()&&(o=(this.image.getHeight()-1-t)/(c-t),c=this.image.getHeight()-1),s=Math.floor(e+(s-e)*o),a+=this.sizeOfBlackWhiteBlackRun(e,t,s,c),a-1},n.prototype.sizeOfBlackWhiteBlackRun=function(e,t,r,i){var a=Math.abs(i-t)>Math.abs(r-e);if(a){var o=e;e=t,t=o,o=r,r=i,i=o}for(var s=Math.abs(r-e),c=Math.abs(i-t),f=-s/2,d=e<r?1:-1,p=t<i?1:-1,g=0,m=r+d,x=e,_=t;x!==m;x+=d){var C=a?_:x,S=a?x:_;if(g===1===this.image.get(C,S)){if(g===2)return tr.distance(x,_,e,t);g++}if(f+=c,f>0){if(_===i)break;_+=p,f-=s}}return g===2?tr.distance(r+d,i,e,t):NaN},n.prototype.findAlignmentInRegion=function(e,t,r,i){var a=Math.floor(i*e),o=Math.max(0,t-a),s=Math.min(this.image.getWidth()-1,t+a);if(s-o<e*3)throw new We("Alignment top exceeds estimated module size.");var c=Math.max(0,r-a),f=Math.min(this.image.getHeight()-1,r+a);if(f-c<e*3)throw new We("Alignment bottom exceeds estimated module size.");var d=new Cz(this.image,o,c,s-o,f-c,e,this.resultPointCallback);return d.find()},n}(),vx=function(){function n(){this.decoder=new _z}return n.prototype.getDecoder=function(){return this.decoder},n.prototype.decode=function(e,t){var r,i;if(t!=null&&t.get(ai.PURE_BARCODE)!==void 0){var a=n.extractPureBits(e.getBlackMatrix());r=this.decoder.decodeBitMatrix(a,t),i=n.NO_POINTS}else{var o=new Dz(e.getBlackMatrix()).detect(t);r=this.decoder.decodeBitMatrix(o.getBits(),t),i=o.getPoints()}r.getOther()instanceof mC&&r.getOther().applyMirroredCorrection(i);var s=new po(r.getText(),r.getRawBytes(),void 0,i,Yt.QR_CODE,void 0),c=r.getByteSegments();c!==null&&s.putMetadata(Fa.BYTE_SEGMENTS,c);var f=r.getECLevel();return f!==null&&s.putMetadata(Fa.ERROR_CORRECTION_LEVEL,f),r.hasStructuredAppend()&&(s.putMetadata(Fa.STRUCTURED_APPEND_SEQUENCE,r.getStructuredAppendSequenceNumber()),s.putMetadata(Fa.STRUCTURED_APPEND_PARITY,r.getStructuredAppendParity())),s},n.prototype.reset=function(){},n.extractPureBits=function(e){var t=e.getTopLeftOnBit(),r=e.getBottomRightOnBit();if(t===null||r===null)throw new We;var i=this.moduleSize(t,e),a=t[1],o=r[1],s=t[0],c=r[0];if(s>=c||a>=o)throw new We;if(o-a!==c-s&&(c=s+(o-a),c>=e.getWidth()))throw new We;var f=Math.round((c-s+1)/i),d=Math.round((o-a+1)/i);if(f<=0||d<=0)throw new We;if(d!==f)throw new We;var p=Math.floor(i/2);a+=p,s+=p;var g=s+Math.floor((f-1)*i)-c;if(g>0){if(g>p)throw new We;s-=g}var m=a+Math.floor((d-1)*i)-o;if(m>0){if(m>p)throw new We;a-=m}for(var x=new fc(f,d),_=0;_<d;_++)for(var C=a+Math.floor(_*i),S=0;S<f;S++)e.get(s+Math.floor(S*i),C)&&x.set(S,_);return x},n.moduleSize=function(e,t){for(var r=t.getHeight(),i=t.getWidth(),a=e[0],o=e[1],s=!0,c=0;a<i&&o<r;){if(s!==t.get(a,o)){if(++c===5)break;s=!s}a++,o++}if(a===i||o===r)throw new We;return(a-e[0])/7},n.NO_POINTS=new Array,n}(),Oz=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Jn=function(){function n(){}return n.prototype.PDF417Common=function(){},n.getBitCountSum=function(e){return tr.sum(e)},n.toIntArray=function(e){var t,r;if(e==null||!e.length)return n.EMPTY_INT_ARRAY;var i=new Int32Array(e.length),a=0;try{for(var o=Oz(e),s=o.next();!s.done;s=o.next()){var c=s.value;i[a++]=c}}catch(f){t={error:f}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}return i},n.getCodeword=function(e){var t=ta.binarySearch(n.SYMBOL_TABLE,e&262143);return t<0?-1:(n.CODEWORD_TABLE[t]-1)%n.NUMBER_OF_CODEWORDS},n.NUMBER_OF_CODEWORDS=929,n.MAX_CODEWORDS_IN_BARCODE=n.NUMBER_OF_CODEWORDS-1,n.MIN_ROWS_IN_BARCODE=3,n.MAX_ROWS_IN_BARCODE=90,n.MODULES_IN_CODEWORD=17,n.MODULES_IN_STOP_PATTERN=18,n.BARS_IN_MODULE=8,n.EMPTY_INT_ARRAY=new Int32Array([]),n.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),n.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]),n}(),kz=function(){function n(e,t){this.bits=e,this.points=t}return n.prototype.getBits=function(){return this.bits},n.prototype.getPoints=function(){return this.points},n}(),Lz=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Pz=function(){function n(){}return n.detectMultiple=function(e,t,r){var i=e.getBlackMatrix(),a=n.detect(r,i);return a.length||(i=i.clone(),i.rotate180(),a=n.detect(r,i)),new kz(i,a)},n.detect=function(e,t){for(var r,i,a=new Array,o=0,s=0,c=!1;o<t.getHeight();){var f=n.findVertices(t,o,s);if(f[0]==null&&f[3]==null){if(!c)break;c=!1,s=0;try{for(var d=(r=void 0,Lz(a)),p=d.next();!p.done;p=d.next()){var g=p.value;g[1]!=null&&(o=Math.trunc(Math.max(o,g[1].getY()))),g[3]!=null&&(o=Math.max(o,Math.trunc(g[3].getY())))}}catch(m){r={error:m}}finally{try{p&&!p.done&&(i=d.return)&&i.call(d)}finally{if(r)throw r.error}}o+=n.ROW_STEP;continue}if(c=!0,a.push(f),!e)break;f[2]!=null?(s=Math.trunc(f[2].getX()),o=Math.trunc(f[2].getY())):(s=Math.trunc(f[4].getX()),o=Math.trunc(f[4].getY()))}return a},n.findVertices=function(e,t,r){var i=e.getHeight(),a=e.getWidth(),o=new Array(8);return n.copyToResult(o,n.findRowsWithPattern(e,i,a,t,r,n.START_PATTERN),n.INDEXES_START_PATTERN),o[4]!=null&&(r=Math.trunc(o[4].getX()),t=Math.trunc(o[4].getY())),n.copyToResult(o,n.findRowsWithPattern(e,i,a,t,r,n.STOP_PATTERN),n.INDEXES_STOP_PATTERN),o},n.copyToResult=function(e,t,r){for(var i=0;i<r.length;i++)e[r[i]]=t[i]},n.findRowsWithPattern=function(e,t,r,i,a,o){for(var s=new Array(4),c=!1,f=new Int32Array(o.length);i<t;i+=n.ROW_STEP){var d=n.findGuardPattern(e,a,i,r,!1,o,f);if(d!=null){for(;i>0;){var p=n.findGuardPattern(e,a,--i,r,!1,o,f);if(p!=null)d=p;else{i++;break}}s[0]=new Mt(d[0],i),s[1]=new Mt(d[1],i),c=!0;break}}var g=i+1;if(c){for(var m=0,p=Int32Array.from([Math.trunc(s[0].getX()),Math.trunc(s[1].getX())]);g<t;g++){var d=n.findGuardPattern(e,p[0],g,r,!1,o,f);if(d!=null&&Math.abs(p[0]-d[0])<n.MAX_PATTERN_DRIFT&&Math.abs(p[1]-d[1])<n.MAX_PATTERN_DRIFT)p=d,m=0;else{if(m>n.SKIPPED_ROW_COUNT_MAX)break;m++}}g-=m+1,s[2]=new Mt(p[0],g),s[3]=new Mt(p[1],g)}return g-i<n.BARCODE_MIN_HEIGHT&&ta.fill(s,null),s},n.findGuardPattern=function(e,t,r,i,a,o,s){ta.fillWithin(s,0,s.length,0);for(var c=t,f=0;e.get(c,r)&&c>0&&f++<n.MAX_PIXEL_DRIFT;)c--;for(var d=c,p=0,g=o.length,m=a;d<i;d++){var x=e.get(d,r);if(x!==m)s[p]++;else{if(p===g-1){if(n.patternMatchVariance(s,o,n.MAX_INDIVIDUAL_VARIANCE)<n.MAX_AVG_VARIANCE)return new Int32Array([c,d]);c+=s[0]+s[1],jr.arraycopy(s,2,s,0,p-1),s[p-1]=0,s[p]=0,p--}else p++;s[p]=1,m=!m}}return p===g-1&&n.patternMatchVariance(s,o,n.MAX_INDIVIDUAL_VARIANCE)<n.MAX_AVG_VARIANCE?new Int32Array([c,d-1]):null},n.patternMatchVariance=function(e,t,r){for(var i=e.length,a=0,o=0,s=0;s<i;s++)a+=e[s],o+=t[s];if(a<o)return 1/0;var c=a/o;r*=c;for(var f=0,d=0;d<i;d++){var p=e[d],g=t[d]*c,m=p>g?p-g:g-p;if(m>r)return 1/0;f+=m}return f/a},n.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),n.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),n.MAX_AVG_VARIANCE=.42,n.MAX_INDIVIDUAL_VARIANCE=.8,n.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),n.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),n.MAX_PIXEL_DRIFT=3,n.MAX_PATTERN_DRIFT=5,n.SKIPPED_ROW_COUNT_MAX=25,n.ROW_STEP=5,n.BARCODE_MIN_HEIGHT=10,n}(),Mz=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},nd=function(){function n(e,t){if(t.length===0)throw new Xt;this.field=e;var r=t.length;if(r>1&&t[0]===0){for(var i=1;i<r&&t[i]===0;)i++;i===r?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(r-i),jr.arraycopy(t,i,this.coefficients,0,this.coefficients.length))}else this.coefficients=t}return n.prototype.getCoefficients=function(){return this.coefficients},n.prototype.getDegree=function(){return this.coefficients.length-1},n.prototype.isZero=function(){return this.coefficients[0]===0},n.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},n.prototype.evaluateAt=function(e){var t,r;if(e===0)return this.getCoefficient(0);if(e===1){var i=0;try{for(var a=Mz(this.coefficients),o=a.next();!o.done;o=a.next()){var s=o.value;i=this.field.add(i,s)}}catch(p){t={error:p}}finally{try{o&&!o.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}return i}for(var c=this.coefficients[0],f=this.coefficients.length,d=1;d<f;d++)c=this.field.add(this.field.multiply(e,c),this.coefficients[d]);return c},n.prototype.add=function(e){if(!this.field.equals(e.field))throw new Xt("ModulusPolys do not have same ModulusGF field");if(this.isZero())return e;if(e.isZero())return this;var t=this.coefficients,r=e.coefficients;if(t.length>r.length){var i=t;t=r,r=i}var a=new Int32Array(r.length),o=r.length-t.length;jr.arraycopy(r,0,a,0,o);for(var s=o;s<r.length;s++)a[s]=this.field.add(t[s-o],r[s]);return new n(this.field,a)},n.prototype.subtract=function(e){if(!this.field.equals(e.field))throw new Xt("ModulusPolys do not have same ModulusGF field");return e.isZero()?this:this.add(e.negative())},n.prototype.multiply=function(e){return e instanceof n?this.multiplyOther(e):this.multiplyScalar(e)},n.prototype.multiplyOther=function(e){if(!this.field.equals(e.field))throw new Xt("ModulusPolys do not have same ModulusGF field");if(this.isZero()||e.isZero())return new n(this.field,new Int32Array([0]));for(var t=this.coefficients,r=t.length,i=e.coefficients,a=i.length,o=new Int32Array(r+a-1),s=0;s<r;s++)for(var c=t[s],f=0;f<a;f++)o[s+f]=this.field.add(o[s+f],this.field.multiply(c,i[f]));return new n(this.field,o)},n.prototype.negative=function(){for(var e=this.coefficients.length,t=new Int32Array(e),r=0;r<e;r++)t[r]=this.field.subtract(0,this.coefficients[r]);return new n(this.field,t)},n.prototype.multiplyScalar=function(e){if(e===0)return new n(this.field,new Int32Array([0]));if(e===1)return this;for(var t=this.coefficients.length,r=new Int32Array(t),i=0;i<t;i++)r[i]=this.field.multiply(this.coefficients[i],e);return new n(this.field,r)},n.prototype.multiplyByMonomial=function(e,t){if(e<0)throw new Xt;if(t===0)return new n(this.field,new Int32Array([0]));for(var r=this.coefficients.length,i=new Int32Array(r+e),a=0;a<r;a++)i[a]=this.field.multiply(this.coefficients[a],t);return new n(this.field,i)},n.prototype.toString=function(){for(var e=new En,t=this.getDegree();t>=0;t--){var r=this.getCoefficient(t);r!==0&&(r<0?(e.append(" - "),r=-r):e.length()>0&&e.append(" + "),(t===0||r!==1)&&e.append(r),t!==0&&(t===1?e.append("x"):(e.append("x^"),e.append(t))))}return e.toString()},n}(),jz=function(){function n(){}return n.prototype.add=function(e,t){return(e+t)%this.modulus},n.prototype.subtract=function(e,t){return(this.modulus+e-t)%this.modulus},n.prototype.exp=function(e){return this.expTable[e]},n.prototype.log=function(e){if(e===0)throw new Xt;return this.logTable[e]},n.prototype.inverse=function(e){if(e===0)throw new cC;return this.expTable[this.modulus-this.logTable[e]-1]},n.prototype.multiply=function(e,t){return e===0||t===0?0:this.expTable[(this.logTable[e]+this.logTable[t])%(this.modulus-1)]},n.prototype.getSize=function(){return this.modulus},n.prototype.equals=function(e){return e===this},n}(),Bz=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Fz=function(n){Bz(e,n);function e(t,r){var i=n.call(this)||this;i.modulus=t,i.expTable=new Int32Array(t),i.logTable=new Int32Array(t);for(var a=1,o=0;o<t;o++)i.expTable[o]=a,a=a*r%t;for(var o=0;o<t-1;o++)i.logTable[i.expTable[o]]=o;return i.zero=new nd(i,new Int32Array([0])),i.one=new nd(i,new Int32Array([1])),i}return e.prototype.getZero=function(){return this.zero},e.prototype.getOne=function(){return this.one},e.prototype.buildMonomial=function(t,r){if(t<0)throw new Xt;if(r===0)return this.zero;var i=new Int32Array(t+1);return i[0]=r,new nd(this,i)},e.PDF417_GF=new e(Jn.NUMBER_OF_CODEWORDS,3),e}(jz),Uz=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},zz=function(){function n(){this.field=Fz.PDF417_GF}return n.prototype.decode=function(e,t,r){for(var i,a,o=new nd(this.field,e),s=new Int32Array(t),c=!1,f=t;f>0;f--){var d=o.evaluateAt(this.field.exp(f));s[t-f]=d,d!==0&&(c=!0)}if(!c)return 0;var p=this.field.getOne();if(r!=null)try{for(var g=Uz(r),m=g.next();!m.done;m=g.next()){var x=m.value,_=this.field.exp(e.length-1-x),C=new nd(this.field,new Int32Array([this.field.subtract(0,_),1]));p=p.multiply(C)}}catch(I){i={error:I}}finally{try{m&&!m.done&&(a=g.return)&&a.call(g)}finally{if(i)throw i.error}}for(var S=new nd(this.field,s),k=this.runEuclideanAlgorithm(this.field.buildMonomial(t,1),S,t),M=k[0],P=k[1],Y=this.findErrorLocations(M),z=this.findErrorMagnitudes(P,M,Y),f=0;f<Y.length;f++){var F=e.length-1-this.field.log(Y[f]);if(F<0)throw ya.getChecksumInstance();e[F]=this.field.subtract(e[F],z[f])}return Y.length},n.prototype.runEuclideanAlgorithm=function(e,t,r){if(e.getDegree()<t.getDegree()){var i=e;e=t,t=i}for(var a=e,o=t,s=this.field.getZero(),c=this.field.getOne();o.getDegree()>=Math.round(r/2);){var f=a,d=s;if(a=o,s=c,a.isZero())throw ya.getChecksumInstance();o=f;for(var p=this.field.getZero(),g=a.getCoefficient(a.getDegree()),m=this.field.inverse(g);o.getDegree()>=a.getDegree()&&!o.isZero();){var x=o.getDegree()-a.getDegree(),_=this.field.multiply(o.getCoefficient(o.getDegree()),m);p=p.add(this.field.buildMonomial(x,_)),o=o.subtract(a.multiplyByMonomial(x,_))}c=p.multiply(s).subtract(d).negative()}var C=c.getCoefficient(0);if(C===0)throw ya.getChecksumInstance();var S=this.field.inverse(C),k=c.multiply(S),M=o.multiply(S);return[k,M]},n.prototype.findErrorLocations=function(e){for(var t=e.getDegree(),r=new Int32Array(t),i=0,a=1;a<this.field.getSize()&&i<t;a++)e.evaluateAt(a)===0&&(r[i]=this.field.inverse(a),i++);if(i!==t)throw ya.getChecksumInstance();return r},n.prototype.findErrorMagnitudes=function(e,t,r){for(var i=t.getDegree(),a=new Int32Array(i),o=1;o<=i;o++)a[i-o]=this.field.multiply(o,t.getCoefficient(o));for(var s=new nd(this.field,a),c=r.length,f=new Int32Array(c),o=0;o<c;o++){var d=this.field.inverse(r[o]),p=this.field.subtract(0,e.evaluateAt(d)),g=this.field.inverse(s.evaluateAt(d));f[o]=this.field.multiply(p,g)}return f},n}(),yx=function(){function n(e,t,r,i,a){e instanceof n?this.constructor_2(e):this.constructor_1(e,t,r,i,a)}return n.prototype.constructor_1=function(e,t,r,i,a){var o=t==null||r==null,s=i==null||a==null;if(o&&s)throw new We;o?(t=new Mt(0,i.getY()),r=new Mt(0,a.getY())):s&&(i=new Mt(e.getWidth()-1,t.getY()),a=new Mt(e.getWidth()-1,r.getY())),this.image=e,this.topLeft=t,this.bottomLeft=r,this.topRight=i,this.bottomRight=a,this.minX=Math.trunc(Math.min(t.getX(),r.getX())),this.maxX=Math.trunc(Math.max(i.getX(),a.getX())),this.minY=Math.trunc(Math.min(t.getY(),i.getY())),this.maxY=Math.trunc(Math.max(r.getY(),a.getY()))},n.prototype.constructor_2=function(e){this.image=e.image,this.topLeft=e.getTopLeft(),this.bottomLeft=e.getBottomLeft(),this.topRight=e.getTopRight(),this.bottomRight=e.getBottomRight(),this.minX=e.getMinX(),this.maxX=e.getMaxX(),this.minY=e.getMinY(),this.maxY=e.getMaxY()},n.merge=function(e,t){return e==null?t:t==null?e:new n(e.image,e.topLeft,e.bottomLeft,t.topRight,t.bottomRight)},n.prototype.addMissingRows=function(e,t,r){var i=this.topLeft,a=this.bottomLeft,o=this.topRight,s=this.bottomRight;if(e>0){var c=r?this.topLeft:this.topRight,f=Math.trunc(c.getY()-e);f<0&&(f=0);var d=new Mt(c.getX(),f);r?i=d:o=d}if(t>0){var p=r?this.bottomLeft:this.bottomRight,g=Math.trunc(p.getY()+t);g>=this.image.getHeight()&&(g=this.image.getHeight()-1);var m=new Mt(p.getX(),g);r?a=m:s=m}return new n(this.image,i,a,o,s)},n.prototype.getMinX=function(){return this.minX},n.prototype.getMaxX=function(){return this.maxX},n.prototype.getMinY=function(){return this.minY},n.prototype.getMaxY=function(){return this.maxY},n.prototype.getTopLeft=function(){return this.topLeft},n.prototype.getTopRight=function(){return this.topRight},n.prototype.getBottomLeft=function(){return this.bottomLeft},n.prototype.getBottomRight=function(){return this.bottomRight},n}(),Vz=function(){function n(e,t,r,i){this.columnCount=e,this.errorCorrectionLevel=i,this.rowCountUpperPart=t,this.rowCountLowerPart=r,this.rowCount=t+r}return n.prototype.getColumnCount=function(){return this.columnCount},n.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},n.prototype.getRowCount=function(){return this.rowCount},n.prototype.getRowCountUpperPart=function(){return this.rowCountUpperPart},n.prototype.getRowCountLowerPart=function(){return this.rowCountLowerPart},n}(),rb=function(){function n(){this.buffer=""}return n.form=function(e,t){var r=-1;function i(o,s,c,f,d,p){if(o==="%%")return"%";if(t[++r]!==void 0){o=f?parseInt(f.substr(1)):void 0;var g=d?parseInt(d.substr(1)):void 0,m;switch(p){case"s":m=t[r];break;case"c":m=t[r][0];break;case"f":m=parseFloat(t[r]).toFixed(o);break;case"p":m=parseFloat(t[r]).toPrecision(o);break;case"e":m=parseFloat(t[r]).toExponential(o);break;case"x":m=parseInt(t[r]).toString(g||16);break;case"d":m=parseFloat(parseInt(t[r],g||10).toPrecision(o)).toFixed(0);break}m=typeof m=="object"?JSON.stringify(m):(+m).toString(g);for(var x=parseInt(c),_=c&&c[0]+""=="0"?"0":" ";m.length<x;)m=s!==void 0?m+_:_+m;return m}}var a=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(a,i)},n.prototype.format=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this.buffer+=n.form(e,t)},n.prototype.toString=function(){return this.buffer},n}(),qz=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},vC=function(){function n(e){this.boundingBox=new yx(e),this.codewords=new Array(e.getMaxY()-e.getMinY()+1)}return n.prototype.getCodewordNearby=function(e){var t=this.getCodeword(e);if(t!=null)return t;for(var r=1;r<n.MAX_NEARBY_DISTANCE;r++){var i=this.imageRowToCodewordIndex(e)-r;if(i>=0&&(t=this.codewords[i],t!=null)||(i=this.imageRowToCodewordIndex(e)+r,i<this.codewords.length&&(t=this.codewords[i],t!=null)))return t}return null},n.prototype.imageRowToCodewordIndex=function(e){return e-this.boundingBox.getMinY()},n.prototype.setCodeword=function(e,t){this.codewords[this.imageRowToCodewordIndex(e)]=t},n.prototype.getCodeword=function(e){return this.codewords[this.imageRowToCodewordIndex(e)]},n.prototype.getBoundingBox=function(){return this.boundingBox},n.prototype.getCodewords=function(){return this.codewords},n.prototype.toString=function(){var e,t,r=new rb,i=0;try{for(var a=qz(this.codewords),o=a.next();!o.done;o=a.next()){var s=o.value;if(s==null){r.format("%3d:    |   %n",i++);continue}r.format("%3d: %3d|%3d%n",i++,s.getRowNumber(),s.getValue())}}catch(c){e={error:c}}finally{try{o&&!o.done&&(t=a.return)&&t.call(a)}finally{if(e)throw e.error}}return r.toString()},n.MAX_NEARBY_DISTANCE=5,n}(),Hz=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Wz=function(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,a=[],o;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(o)throw o.error}}return a},J0=function(){function n(){this.values=new Map}return n.prototype.setValue=function(e){e=Math.trunc(e);var t=this.values.get(e);t==null&&(t=0),t++,this.values.set(e,t)},n.prototype.getValue=function(){var e,t,r=-1,i=new Array,a=function(p,g){var m={getKey:function(){return p},getValue:function(){return g}};m.getValue()>r?(r=m.getValue(),i=[],i.push(m.getKey())):m.getValue()===r&&i.push(m.getKey())};try{for(var o=Hz(this.values.entries()),s=o.next();!s.done;s=o.next()){var c=Wz(s.value,2),f=c[0],d=c[1];a(f,d)}}catch(p){e={error:p}}finally{try{s&&!s.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}return Jn.toIntArray(i)},n.prototype.getConfidence=function(e){return this.values.get(e)},n}(),$z=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Zv=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},U4=function(n){$z(e,n);function e(t,r){var i=n.call(this,t)||this;return i._isLeft=r,i}return e.prototype.setRowNumbers=function(){var t,r;try{for(var i=Zv(this.getCodewords()),a=i.next();!a.done;a=i.next()){var o=a.value;o!=null&&o.setRowNumberAsRowIndicatorColumn()}}catch(s){t={error:s}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}},e.prototype.adjustCompleteIndicatorColumnRowNumbers=function(t){var r=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(r,t);for(var i=this.getBoundingBox(),a=this._isLeft?i.getTopLeft():i.getTopRight(),o=this._isLeft?i.getBottomLeft():i.getBottomRight(),s=this.imageRowToCodewordIndex(Math.trunc(a.getY())),c=this.imageRowToCodewordIndex(Math.trunc(o.getY())),f=-1,d=1,p=0,g=s;g<c;g++)if(r[g]!=null){var m=r[g],x=m.getRowNumber()-f;if(x===0)p++;else if(x===1)d=Math.max(d,p),p=1,f=m.getRowNumber();else if(x<0||m.getRowNumber()>=t.getRowCount()||x>g)r[g]=null;else{var _=void 0;d>2?_=(d-2)*x:_=x;for(var C=_>=g,S=1;S<=_&&!C;S++)C=r[g-S]!=null;C?r[g]=null:(f=m.getRowNumber(),p=1)}}},e.prototype.getRowHeights=function(){var t,r,i=this.getBarcodeMetadata();if(i==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(i);var a=new Int32Array(i.getRowCount());try{for(var o=Zv(this.getCodewords()),s=o.next();!s.done;s=o.next()){var c=s.value;if(c!=null){var f=c.getRowNumber();if(f>=a.length)continue;a[f]++}}}catch(d){t={error:d}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}return a},e.prototype.adjustIncompleteIndicatorColumnRowNumbers=function(t){for(var r=this.getBoundingBox(),i=this._isLeft?r.getTopLeft():r.getTopRight(),a=this._isLeft?r.getBottomLeft():r.getBottomRight(),o=this.imageRowToCodewordIndex(Math.trunc(i.getY())),s=this.imageRowToCodewordIndex(Math.trunc(a.getY())),c=this.getCodewords(),f=-1,d=o;d<s;d++)if(c[d]!=null){var p=c[d];p.setRowNumberAsRowIndicatorColumn();var g=p.getRowNumber()-f;g===0||(g===1?f=p.getRowNumber():p.getRowNumber()>=t.getRowCount()?c[d]=null:f=p.getRowNumber())}},e.prototype.getBarcodeMetadata=function(){var t,r,i=this.getCodewords(),a=new J0,o=new J0,s=new J0,c=new J0;try{for(var f=Zv(i),d=f.next();!d.done;d=f.next()){var p=d.value;if(p!=null){p.setRowNumberAsRowIndicatorColumn();var g=p.getValue()%30,m=p.getRowNumber();switch(this._isLeft||(m+=2),m%3){case 0:o.setValue(g*3+1);break;case 1:c.setValue(g/3),s.setValue(g%3);break;case 2:a.setValue(g+1);break}}}}catch(_){t={error:_}}finally{try{d&&!d.done&&(r=f.return)&&r.call(f)}finally{if(t)throw t.error}}if(a.getValue().length===0||o.getValue().length===0||s.getValue().length===0||c.getValue().length===0||a.getValue()[0]<1||o.getValue()[0]+s.getValue()[0]<Jn.MIN_ROWS_IN_BARCODE||o.getValue()[0]+s.getValue()[0]>Jn.MAX_ROWS_IN_BARCODE)return null;var x=new Vz(a.getValue()[0],o.getValue()[0],s.getValue()[0],c.getValue()[0]);return this.removeIncorrectCodewords(i,x),x},e.prototype.removeIncorrectCodewords=function(t,r){for(var i=0;i<t.length;i++){var a=t[i];if(t[i]!=null){var o=a.getValue()%30,s=a.getRowNumber();if(s>r.getRowCount()){t[i]=null;continue}switch(this._isLeft||(s+=2),s%3){case 0:o*3+1!==r.getRowCountUpperPart()&&(t[i]=null);break;case 1:(Math.trunc(o/3)!==r.getErrorCorrectionLevel()||o%3!==r.getRowCountLowerPart())&&(t[i]=null);break;case 2:o+1!==r.getColumnCount()&&(t[i]=null);break}}}},e.prototype.isLeft=function(){return this._isLeft},e.prototype.toString=function(){return"IsLeft: "+this._isLeft+`
`+n.prototype.toString.call(this)},e}(vC),Gz=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Yz=function(){function n(e,t){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=e,this.barcodeColumnCount=e.getColumnCount(),this.boundingBox=t,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}return n.prototype.getDetectionResultColumns=function(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);var e=Jn.MAX_CODEWORDS_IN_BARCODE,t;do t=e,e=this.adjustRowNumbersAndGetCount();while(e>0&&e<t);return this.detectionResultColumns},n.prototype.adjustIndicatorColumnRowNumbers=function(e){e!=null&&e.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)},n.prototype.adjustRowNumbersAndGetCount=function(){var e=this.adjustRowNumbersByRow();if(e===0)return 0;for(var t=1;t<this.barcodeColumnCount+1;t++)for(var r=this.detectionResultColumns[t].getCodewords(),i=0;i<r.length;i++)r[i]!=null&&(r[i].hasValidRowNumber()||this.adjustRowNumbers(t,i,r));return e},n.prototype.adjustRowNumbersByRow=function(){this.adjustRowNumbersFromBothRI();var e=this.adjustRowNumbersFromLRI();return e+this.adjustRowNumbersFromRRI()},n.prototype.adjustRowNumbersFromBothRI=function(){if(!(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)){for(var e=this.detectionResultColumns[0].getCodewords(),t=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),r=0;r<e.length;r++)if(e[r]!=null&&t[r]!=null&&e[r].getRowNumber()===t[r].getRowNumber())for(var i=1;i<=this.barcodeColumnCount;i++){var a=this.detectionResultColumns[i].getCodewords()[r];a!=null&&(a.setRowNumber(e[r].getRowNumber()),a.hasValidRowNumber()||(this.detectionResultColumns[i].getCodewords()[r]=null))}}},n.prototype.adjustRowNumbersFromRRI=function(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;for(var e=0,t=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),r=0;r<t.length;r++)if(t[r]!=null)for(var i=t[r].getRowNumber(),a=0,o=this.barcodeColumnCount+1;o>0&&a<this.ADJUST_ROW_NUMBER_SKIP;o--){var s=this.detectionResultColumns[o].getCodewords()[r];s!=null&&(a=n.adjustRowNumberIfValid(i,a,s),s.hasValidRowNumber()||e++)}return e},n.prototype.adjustRowNumbersFromLRI=function(){if(this.detectionResultColumns[0]==null)return 0;for(var e=0,t=this.detectionResultColumns[0].getCodewords(),r=0;r<t.length;r++)if(t[r]!=null)for(var i=t[r].getRowNumber(),a=0,o=1;o<this.barcodeColumnCount+1&&a<this.ADJUST_ROW_NUMBER_SKIP;o++){var s=this.detectionResultColumns[o].getCodewords()[r];s!=null&&(a=n.adjustRowNumberIfValid(i,a,s),s.hasValidRowNumber()||e++)}return e},n.adjustRowNumberIfValid=function(e,t,r){return r==null||r.hasValidRowNumber()||(r.isValidRowNumber(e)?(r.setRowNumber(e),t=0):++t),t},n.prototype.adjustRowNumbers=function(e,t,r){var i,a;if(this.detectionResultColumns[e-1]!=null){var o=r[t],s=this.detectionResultColumns[e-1].getCodewords(),c=s;this.detectionResultColumns[e+1]!=null&&(c=this.detectionResultColumns[e+1].getCodewords());var f=new Array(14);f[2]=s[t],f[3]=c[t],t>0&&(f[0]=r[t-1],f[4]=s[t-1],f[5]=c[t-1]),t>1&&(f[8]=r[t-2],f[10]=s[t-2],f[11]=c[t-2]),t<r.length-1&&(f[1]=r[t+1],f[6]=s[t+1],f[7]=c[t+1]),t<r.length-2&&(f[9]=r[t+2],f[12]=s[t+2],f[13]=c[t+2]);try{for(var d=Gz(f),p=d.next();!p.done;p=d.next()){var g=p.value;if(n.adjustRowNumber(o,g))return}}catch(m){i={error:m}}finally{try{p&&!p.done&&(a=d.return)&&a.call(d)}finally{if(i)throw i.error}}}},n.adjustRowNumber=function(e,t){return t==null?!1:t.hasValidRowNumber()&&t.getBucket()===e.getBucket()?(e.setRowNumber(t.getRowNumber()),!0):!1},n.prototype.getBarcodeColumnCount=function(){return this.barcodeColumnCount},n.prototype.getBarcodeRowCount=function(){return this.barcodeMetadata.getRowCount()},n.prototype.getBarcodeECLevel=function(){return this.barcodeMetadata.getErrorCorrectionLevel()},n.prototype.setBoundingBox=function(e){this.boundingBox=e},n.prototype.getBoundingBox=function(){return this.boundingBox},n.prototype.setDetectionResultColumn=function(e,t){this.detectionResultColumns[e]=t},n.prototype.getDetectionResultColumn=function(e){return this.detectionResultColumns[e]},n.prototype.toString=function(){var e=this.detectionResultColumns[0];e==null&&(e=this.detectionResultColumns[this.barcodeColumnCount+1]);for(var t=new rb,r=0;r<e.getCodewords().length;r++){t.format("CW %3d:",r);for(var i=0;i<this.barcodeColumnCount+2;i++){if(this.detectionResultColumns[i]==null){t.format("    |   ");continue}var a=this.detectionResultColumns[i].getCodewords()[r];if(a==null){t.format("    |   ");continue}t.format(" %3d|%3d",a.getRowNumber(),a.getValue())}t.format("%n")}return t.toString()},n}(),Xz=function(){function n(e,t,r,i){this.rowNumber=n.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(e),this.endX=Math.trunc(t),this.bucket=Math.trunc(r),this.value=Math.trunc(i)}return n.prototype.hasValidRowNumber=function(){return this.isValidRowNumber(this.rowNumber)},n.prototype.isValidRowNumber=function(e){return e!==n.BARCODE_ROW_UNKNOWN&&this.bucket===e%3*3},n.prototype.setRowNumberAsRowIndicatorColumn=function(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))},n.prototype.getWidth=function(){return this.endX-this.startX},n.prototype.getStartX=function(){return this.startX},n.prototype.getEndX=function(){return this.endX},n.prototype.getBucket=function(){return this.bucket},n.prototype.getValue=function(){return this.value},n.prototype.getRowNumber=function(){return this.rowNumber},n.prototype.setRowNumber=function(e){this.rowNumber=e},n.prototype.toString=function(){return this.rowNumber+"|"+this.value},n.BARCODE_ROW_UNKNOWN=-1,n}(),Kz=function(){function n(){}return n.initialize=function(){for(var e=0;e<Jn.SYMBOL_TABLE.length;e++)for(var t=Jn.SYMBOL_TABLE[e],r=t&1,i=0;i<Jn.BARS_IN_MODULE;i++){for(var a=0;(t&1)===r;)a+=1,t>>=1;r=t&1,n.RATIOS_TABLE[e]||(n.RATIOS_TABLE[e]=new Array(Jn.BARS_IN_MODULE)),n.RATIOS_TABLE[e][Jn.BARS_IN_MODULE-i-1]=Math.fround(a/Jn.MODULES_IN_CODEWORD)}this.bSymbolTableReady=!0},n.getDecodedValue=function(e){var t=n.getDecodedCodewordValue(n.sampleBitCounts(e));return t!==-1?t:n.getClosestDecodedValue(e)},n.sampleBitCounts=function(e){for(var t=tr.sum(e),r=new Int32Array(Jn.BARS_IN_MODULE),i=0,a=0,o=0;o<Jn.MODULES_IN_CODEWORD;o++){var s=t/(2*Jn.MODULES_IN_CODEWORD)+o*t/Jn.MODULES_IN_CODEWORD;a+e[i]<=s&&(a+=e[i],i++),r[i]++}return r},n.getDecodedCodewordValue=function(e){var t=n.getBitValue(e);return Jn.getCodeword(t)===-1?-1:t},n.getBitValue=function(e){for(var t=0,r=0;r<e.length;r++)for(var i=0;i<e[r];i++)t=t<<1|(r%2===0?1:0);return Math.trunc(t)},n.getClosestDecodedValue=function(e){var t=tr.sum(e),r=new Array(Jn.BARS_IN_MODULE);if(t>1)for(var i=0;i<r.length;i++)r[i]=Math.fround(e[i]/t);var a=dx.MAX_VALUE,o=-1;this.bSymbolTableReady||n.initialize();for(var s=0;s<n.RATIOS_TABLE.length;s++){for(var c=0,f=n.RATIOS_TABLE[s],d=0;d<Jn.BARS_IN_MODULE;d++){var p=Math.fround(f[d]-r[d]);if(c+=Math.fround(p*p),c>=a)break}c<a&&(a=c,o=Jn.SYMBOL_TABLE[s])}return o},n.bSymbolTableReady=!1,n.RATIOS_TABLE=new Array(Jn.SYMBOL_TABLE.length).map(function(e){return new Array(Jn.BARS_IN_MODULE)}),n}(),Qz=function(){function n(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}return n.prototype.getSegmentIndex=function(){return this.segmentIndex},n.prototype.setSegmentIndex=function(e){this.segmentIndex=e},n.prototype.getFileId=function(){return this.fileId},n.prototype.setFileId=function(e){this.fileId=e},n.prototype.getOptionalData=function(){return this.optionalData},n.prototype.setOptionalData=function(e){this.optionalData=e},n.prototype.isLastSegment=function(){return this.lastSegment},n.prototype.setLastSegment=function(e){this.lastSegment=e},n.prototype.getSegmentCount=function(){return this.segmentCount},n.prototype.setSegmentCount=function(e){this.segmentCount=e},n.prototype.getSender=function(){return this.sender||null},n.prototype.setSender=function(e){this.sender=e},n.prototype.getAddressee=function(){return this.addressee||null},n.prototype.setAddressee=function(e){this.addressee=e},n.prototype.getFileName=function(){return this.fileName},n.prototype.setFileName=function(e){this.fileName=e},n.prototype.getFileSize=function(){return this.fileSize},n.prototype.setFileSize=function(e){this.fileSize=e},n.prototype.getChecksum=function(){return this.checksum},n.prototype.setChecksum=function(e){this.checksum=e},n.prototype.getTimestamp=function(){return this.timestamp},n.prototype.setTimestamp=function(e){this.timestamp=e},n}(),z4=function(){function n(){}return n.parseLong=function(e,t){return t===void 0&&(t=void 0),parseInt(e,t)},n}(),Zz=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Jz=function(n){Zz(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="NullPointerException",e}(Jo),eV=function(){function n(){}return n.prototype.writeBytes=function(e){this.writeBytesOffset(e,0,e.length)},n.prototype.writeBytesOffset=function(e,t,r){if(e==null)throw new Jz;if(t<0||t>e.length||r<0||t+r>e.length||t+r<0)throw new Z5;if(r===0)return;for(var i=0;i<r;i++)this.write(e[t+i])},n.prototype.flush=function(){},n.prototype.close=function(){},n}(),tV=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),nV=function(n){tV(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e}(Jo),rV=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),iV=function(n){rV(e,n);function e(t){t===void 0&&(t=32);var r=n.call(this)||this;if(r.count=0,t<0)throw new Xt("Negative initial size: "+t);return r.buf=new Uint8Array(t),r}return e.prototype.ensureCapacity=function(t){t-this.buf.length>0&&this.grow(t)},e.prototype.grow=function(t){var r=this.buf.length,i=r<<1;if(i-t<0&&(i=t),i<0){if(t<0)throw new nV;i=Nn.MAX_VALUE}this.buf=ta.copyOfUint8Array(this.buf,i)},e.prototype.write=function(t){this.ensureCapacity(this.count+1),this.buf[this.count]=t,this.count+=1},e.prototype.writeBytesOffset=function(t,r,i){if(r<0||r>t.length||i<0||r+i-t.length>0)throw new Z5;this.ensureCapacity(this.count+i),jr.arraycopy(t,r,this.buf,this.count,i),this.count+=i},e.prototype.writeTo=function(t){t.writeBytesOffset(this.buf,0,this.count)},e.prototype.reset=function(){this.count=0},e.prototype.toByteArray=function(){return ta.copyOfUint8Array(this.buf,this.count)},e.prototype.size=function(){return this.count},e.prototype.toString=function(t){return t?typeof t=="string"?this.toString_string(t):this.toString_number(t):this.toString_void()},e.prototype.toString_void=function(){return new String(this.buf).toString()},e.prototype.toString_string=function(t){return new String(this.buf).toString()},e.prototype.toString_number=function(t){return new String(this.buf).toString()},e.prototype.close=function(){},e}(eV),Ir;(function(n){n[n.ALPHA=0]="ALPHA",n[n.LOWER=1]="LOWER",n[n.MIXED=2]="MIXED",n[n.PUNCT=3]="PUNCT",n[n.ALPHA_SHIFT=4]="ALPHA_SHIFT",n[n.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(Ir||(Ir={}));function yC(){if(typeof window<"u")return window.BigInt||null;if(typeof global<"u")return global.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}var sg;function Zu(n){if(typeof sg>"u"&&(sg=yC()),sg===null)throw new Error("BigInt is not supported!");return sg(n)}function aV(){var n=[];n[0]=Zu(1);var e=Zu(900);n[1]=e;for(var t=2;t<16;t++)n[t]=n[t-1]*e;return n}var oV=function(){function n(){}return n.decode=function(e,t){var r=new En(""),i=ea.ISO8859_1;r.enableDecoding(i);for(var a=1,o=e[a++],s=new Qz;a<e[0];){switch(o){case n.TEXT_COMPACTION_MODE_LATCH:a=n.textCompaction(e,a,r);break;case n.BYTE_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:a=n.byteCompaction(o,e,i,a,r);break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(e[a++]);break;case n.NUMERIC_COMPACTION_MODE_LATCH:a=n.numericCompaction(e,a,r);break;case n.ECI_CHARSET:ea.getCharacterSetECIByValue(e[a++]);break;case n.ECI_GENERAL_PURPOSE:a+=2;break;case n.ECI_USER_DEFINED:a++;break;case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:a=n.decodeMacroBlock(e,a,s);break;case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:throw new gt;default:a--,a=n.textCompaction(e,a,r);break}if(a<e.length)o=e[a++];else throw gt.getFormatInstance()}if(r.length()===0)throw gt.getFormatInstance();var c=new f2(null,r.toString(),null,t);return c.setOther(s),c},n.decodeMacroBlock=function(e,t,r){if(t+n.NUMBER_OF_SEQUENCE_CODEWORDS>e[0])throw gt.getFormatInstance();for(var i=new Int32Array(n.NUMBER_OF_SEQUENCE_CODEWORDS),a=0;a<n.NUMBER_OF_SEQUENCE_CODEWORDS;a++,t++)i[a]=e[t];r.setSegmentIndex(Nn.parseInt(n.decodeBase900toBase10(i,n.NUMBER_OF_SEQUENCE_CODEWORDS)));var o=new En;t=n.textCompaction(e,t,o),r.setFileId(o.toString());var s=-1;for(e[t]===n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(s=t+1);t<e[0];)switch(e[t]){case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(t++,e[t]){case n.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:var c=new En;t=n.textCompaction(e,t+1,c),r.setFileName(c.toString());break;case n.MACRO_PDF417_OPTIONAL_FIELD_SENDER:var f=new En;t=n.textCompaction(e,t+1,f),r.setSender(f.toString());break;case n.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:var d=new En;t=n.textCompaction(e,t+1,d),r.setAddressee(d.toString());break;case n.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:var p=new En;t=n.numericCompaction(e,t+1,p),r.setSegmentCount(Nn.parseInt(p.toString()));break;case n.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:var g=new En;t=n.numericCompaction(e,t+1,g),r.setTimestamp(z4.parseLong(g.toString()));break;case n.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:var m=new En;t=n.numericCompaction(e,t+1,m),r.setChecksum(Nn.parseInt(m.toString()));break;case n.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:var x=new En;t=n.numericCompaction(e,t+1,x),r.setFileSize(z4.parseLong(x.toString()));break;default:throw gt.getFormatInstance()}break;case n.MACRO_PDF417_TERMINATOR:t++,r.setLastSegment(!0);break;default:throw gt.getFormatInstance()}if(s!==-1){var _=t-s;r.isLastSegment()&&_--,r.setOptionalData(ta.copyOfRange(e,s,s+_))}return t},n.textCompaction=function(e,t,r){for(var i=new Int32Array((e[0]-t)*2),a=new Int32Array((e[0]-t)*2),o=0,s=!1;t<e[0]&&!s;){var c=e[t++];if(c<n.TEXT_COMPACTION_MODE_LATCH)i[o]=c/30,i[o+1]=c%30,o+=2;else switch(c){case n.TEXT_COMPACTION_MODE_LATCH:i[o++]=n.TEXT_COMPACTION_MODE_LATCH;break;case n.BYTE_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:case n.NUMERIC_COMPACTION_MODE_LATCH:case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:t--,s=!0;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i[o]=n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,c=e[t++],a[o]=c,o++;break}}return n.decodeTextCompaction(i,a,o,r),t},n.decodeTextCompaction=function(e,t,r,i){for(var a=Ir.ALPHA,o=Ir.ALPHA,s=0;s<r;){var c=e[s],f="";switch(a){case Ir.ALPHA:if(c<26)f=String.fromCharCode(65+c);else switch(c){case 26:f=" ";break;case n.LL:a=Ir.LOWER;break;case n.ML:a=Ir.MIXED;break;case n.PS:o=a,a=Ir.PUNCT_SHIFT;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[s]);break;case n.TEXT_COMPACTION_MODE_LATCH:a=Ir.ALPHA;break}break;case Ir.LOWER:if(c<26)f=String.fromCharCode(97+c);else switch(c){case 26:f=" ";break;case n.AS:o=a,a=Ir.ALPHA_SHIFT;break;case n.ML:a=Ir.MIXED;break;case n.PS:o=a,a=Ir.PUNCT_SHIFT;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[s]);break;case n.TEXT_COMPACTION_MODE_LATCH:a=Ir.ALPHA;break}break;case Ir.MIXED:if(c<n.PL)f=n.MIXED_CHARS[c];else switch(c){case n.PL:a=Ir.PUNCT;break;case 26:f=" ";break;case n.LL:a=Ir.LOWER;break;case n.AL:a=Ir.ALPHA;break;case n.PS:o=a,a=Ir.PUNCT_SHIFT;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[s]);break;case n.TEXT_COMPACTION_MODE_LATCH:a=Ir.ALPHA;break}break;case Ir.PUNCT:if(c<n.PAL)f=n.PUNCT_CHARS[c];else switch(c){case n.PAL:a=Ir.ALPHA;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[s]);break;case n.TEXT_COMPACTION_MODE_LATCH:a=Ir.ALPHA;break}break;case Ir.ALPHA_SHIFT:if(a=o,c<26)f=String.fromCharCode(65+c);else switch(c){case 26:f=" ";break;case n.TEXT_COMPACTION_MODE_LATCH:a=Ir.ALPHA;break}break;case Ir.PUNCT_SHIFT:if(a=o,c<n.PAL)f=n.PUNCT_CHARS[c];else switch(c){case n.PAL:a=Ir.ALPHA;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[s]);break;case n.TEXT_COMPACTION_MODE_LATCH:a=Ir.ALPHA;break}break}f!==""&&i.append(f),s++}},n.byteCompaction=function(e,t,r,i,a){var o=new iV,s=0,c=0,f=!1;switch(e){case n.BYTE_COMPACTION_MODE_LATCH:for(var d=new Int32Array(6),p=t[i++];i<t[0]&&!f;)switch(d[s++]=p,c=900*c+p,p=t[i++],p){case n.TEXT_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH:case n.NUMERIC_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:i--,f=!0;break;default:if(s%5===0&&s>0){for(var g=0;g<6;++g)o.write(Number(Zu(c)>>Zu(8*(5-g))));c=0,s=0}break}i===t[0]&&p<n.TEXT_COMPACTION_MODE_LATCH&&(d[s++]=p);for(var m=0;m<s;m++)o.write(d[m]);break;case n.BYTE_COMPACTION_MODE_LATCH_6:for(;i<t[0]&&!f;){var x=t[i++];if(x<n.TEXT_COMPACTION_MODE_LATCH)s++,c=900*c+x;else switch(x){case n.TEXT_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH:case n.NUMERIC_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:i--,f=!0;break}if(s%5===0&&s>0){for(var g=0;g<6;++g)o.write(Number(Zu(c)>>Zu(8*(5-g))));c=0,s=0}}break}return a.append(Ys.decode(o.toByteArray(),r)),i},n.numericCompaction=function(e,t,r){for(var i=0,a=!1,o=new Int32Array(n.MAX_NUMERIC_CODEWORDS);t<e[0]&&!a;){var s=e[t++];if(t===e[0]&&(a=!0),s<n.TEXT_COMPACTION_MODE_LATCH)o[i]=s,i++;else switch(s){case n.TEXT_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:t--,a=!0;break}(i%n.MAX_NUMERIC_CODEWORDS===0||s===n.NUMERIC_COMPACTION_MODE_LATCH||a)&&i>0&&(r.append(n.decodeBase900toBase10(o,i)),i=0)}return t},n.decodeBase900toBase10=function(e,t){for(var r=Zu(0),i=0;i<t;i++)r+=n.EXP900[t-i-1]*Zu(e[i]);var a=r.toString();if(a.charAt(0)!=="1")throw new gt;return a.substring(1)},n.TEXT_COMPACTION_MODE_LATCH=900,n.BYTE_COMPACTION_MODE_LATCH=901,n.NUMERIC_COMPACTION_MODE_LATCH=902,n.BYTE_COMPACTION_MODE_LATCH_6=924,n.ECI_USER_DEFINED=925,n.ECI_GENERAL_PURPOSE=926,n.ECI_CHARSET=927,n.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,n.MACRO_PDF417_TERMINATOR=922,n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,n.MAX_NUMERIC_CODEWORDS=15,n.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,n.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,n.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,n.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,n.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,n.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,n.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,n.PL=25,n.LL=27,n.AS=27,n.ML=28,n.AL=28,n.PS=29,n.PAL=29,n.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,n.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",n.EXP900=yC()?aV():[],n.NUMBER_OF_SEQUENCE_CODEWORDS=2,n}(),F0=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},sV=function(){function n(){}return n.decode=function(e,t,r,i,a,o,s){for(var c=new yx(e,t,r,i,a),f=null,d=null,p,g=!0;;g=!1){if(t!=null&&(f=n.getRowIndicatorColumn(e,c,t,!0,o,s)),i!=null&&(d=n.getRowIndicatorColumn(e,c,i,!1,o,s)),p=n.merge(f,d),p==null)throw We.getNotFoundInstance();var m=p.getBoundingBox();if(g&&m!=null&&(m.getMinY()<c.getMinY()||m.getMaxY()>c.getMaxY()))c=m;else break}p.setBoundingBox(c);var x=p.getBarcodeColumnCount()+1;p.setDetectionResultColumn(0,f),p.setDetectionResultColumn(x,d);for(var _=f!=null,C=1;C<=x;C++){var S=_?C:x-C;if(p.getDetectionResultColumn(S)===void 0){var k=void 0;S===0||S===x?k=new U4(c,S===0):k=new vC(c),p.setDetectionResultColumn(S,k);for(var M=-1,P=M,Y=c.getMinY();Y<=c.getMaxY();Y++){if(M=n.getStartColumn(p,S,Y,_),M<0||M>c.getMaxX()){if(P===-1)continue;M=P}var z=n.detectCodeword(e,c.getMinX(),c.getMaxX(),_,M,Y,o,s);z!=null&&(k.setCodeword(Y,z),P=M,o=Math.min(o,z.getWidth()),s=Math.max(s,z.getWidth()))}}}return n.createDecoderResult(p)},n.merge=function(e,t){if(e==null&&t==null)return null;var r=n.getBarcodeMetadata(e,t);if(r==null)return null;var i=yx.merge(n.adjustBoundingBox(e),n.adjustBoundingBox(t));return new Yz(r,i)},n.adjustBoundingBox=function(e){var t,r;if(e==null)return null;var i=e.getRowHeights();if(i==null)return null;var a=n.getMax(i),o=0;try{for(var s=F0(i),c=s.next();!c.done;c=s.next()){var f=c.value;if(o+=a-f,f>0)break}}catch(m){t={error:m}}finally{try{c&&!c.done&&(r=s.return)&&r.call(s)}finally{if(t)throw t.error}}for(var d=e.getCodewords(),p=0;o>0&&d[p]==null;p++)o--;for(var g=0,p=i.length-1;p>=0&&(g+=a-i[p],!(i[p]>0));p--);for(var p=d.length-1;g>0&&d[p]==null;p--)g--;return e.getBoundingBox().addMissingRows(o,g,e.isLeft())},n.getMax=function(e){var t,r,i=-1;try{for(var a=F0(e),o=a.next();!o.done;o=a.next()){var s=o.value;i=Math.max(i,s)}}catch(c){t={error:c}}finally{try{o&&!o.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}return i},n.getBarcodeMetadata=function(e,t){var r;if(e==null||(r=e.getBarcodeMetadata())==null)return t==null?null:t.getBarcodeMetadata();var i;return t==null||(i=t.getBarcodeMetadata())==null?r:r.getColumnCount()!==i.getColumnCount()&&r.getErrorCorrectionLevel()!==i.getErrorCorrectionLevel()&&r.getRowCount()!==i.getRowCount()?null:r},n.getRowIndicatorColumn=function(e,t,r,i,a,o){for(var s=new U4(t,i),c=0;c<2;c++)for(var f=c===0?1:-1,d=Math.trunc(Math.trunc(r.getX())),p=Math.trunc(Math.trunc(r.getY()));p<=t.getMaxY()&&p>=t.getMinY();p+=f){var g=n.detectCodeword(e,0,e.getWidth(),i,d,p,a,o);g!=null&&(s.setCodeword(p,g),i?d=g.getStartX():d=g.getEndX())}return s},n.adjustCodewordCount=function(e,t){var r=t[0][1],i=r.getValue(),a=e.getBarcodeColumnCount()*e.getBarcodeRowCount()-n.getNumberOfECCodeWords(e.getBarcodeECLevel());if(i.length===0){if(a<1||a>Jn.MAX_CODEWORDS_IN_BARCODE)throw We.getNotFoundInstance();r.setValue(a)}else i[0]!==a&&r.setValue(a)},n.createDecoderResult=function(e){var t=n.createBarcodeMatrix(e);n.adjustCodewordCount(e,t);for(var r=new Array,i=new Int32Array(e.getBarcodeRowCount()*e.getBarcodeColumnCount()),a=[],o=new Array,s=0;s<e.getBarcodeRowCount();s++)for(var c=0;c<e.getBarcodeColumnCount();c++){var f=t[s][c+1].getValue(),d=s*e.getBarcodeColumnCount()+c;f.length===0?r.push(d):f.length===1?i[d]=f[0]:(o.push(d),a.push(f))}for(var p=new Array(a.length),g=0;g<p.length;g++)p[g]=a[g];return n.createDecoderResultFromAmbiguousValues(e.getBarcodeECLevel(),i,Jn.toIntArray(r),Jn.toIntArray(o),p)},n.createDecoderResultFromAmbiguousValues=function(e,t,r,i,a){for(var o=new Int32Array(i.length),s=100;s-- >0;){for(var c=0;c<o.length;c++)t[i[c]]=a[c][o[c]];try{return n.decodeCodewords(t,e,r)}catch(d){var f=d instanceof ya;if(!f)throw d}if(o.length===0)throw ya.getChecksumInstance();for(var c=0;c<o.length;c++)if(o[c]<a[c].length-1){o[c]++;break}else if(o[c]=0,c===o.length-1)throw ya.getChecksumInstance()}throw ya.getChecksumInstance()},n.createBarcodeMatrix=function(e){for(var t,r,i,a,o=Array.from({length:e.getBarcodeRowCount()},function(){return new Array(e.getBarcodeColumnCount()+2)}),s=0;s<o.length;s++)for(var c=0;c<o[s].length;c++)o[s][c]=new J0;var f=0;try{for(var d=F0(e.getDetectionResultColumns()),p=d.next();!p.done;p=d.next()){var g=p.value;if(g!=null)try{for(var m=(i=void 0,F0(g.getCodewords())),x=m.next();!x.done;x=m.next()){var _=x.value;if(_!=null){var C=_.getRowNumber();if(C>=0){if(C>=o.length)continue;o[C][f].setValue(_.getValue())}}}}catch(S){i={error:S}}finally{try{x&&!x.done&&(a=m.return)&&a.call(m)}finally{if(i)throw i.error}}f++}}catch(S){t={error:S}}finally{try{p&&!p.done&&(r=d.return)&&r.call(d)}finally{if(t)throw t.error}}return o},n.isValidBarcodeColumn=function(e,t){return t>=0&&t<=e.getBarcodeColumnCount()+1},n.getStartColumn=function(e,t,r,i){var a,o,s=i?1:-1,c=null;if(n.isValidBarcodeColumn(e,t-s)&&(c=e.getDetectionResultColumn(t-s).getCodeword(r)),c!=null)return i?c.getEndX():c.getStartX();if(c=e.getDetectionResultColumn(t).getCodewordNearby(r),c!=null)return i?c.getStartX():c.getEndX();if(n.isValidBarcodeColumn(e,t-s)&&(c=e.getDetectionResultColumn(t-s).getCodewordNearby(r)),c!=null)return i?c.getEndX():c.getStartX();for(var f=0;n.isValidBarcodeColumn(e,t-s);){t-=s;try{for(var d=(a=void 0,F0(e.getDetectionResultColumn(t).getCodewords())),p=d.next();!p.done;p=d.next()){var g=p.value;if(g!=null)return(i?g.getEndX():g.getStartX())+s*f*(g.getEndX()-g.getStartX())}}catch(m){a={error:m}}finally{try{p&&!p.done&&(o=d.return)&&o.call(d)}finally{if(a)throw a.error}}f++}return i?e.getBoundingBox().getMinX():e.getBoundingBox().getMaxX()},n.detectCodeword=function(e,t,r,i,a,o,s,c){a=n.adjustCodewordStartColumn(e,t,r,i,a,o);var f=n.getModuleBitCount(e,t,r,i,a,o);if(f==null)return null;var d,p=tr.sum(f);if(i)d=a+p;else{for(var g=0;g<f.length/2;g++){var m=f[g];f[g]=f[f.length-1-g],f[f.length-1-g]=m}d=a,a=d-p}if(!n.checkCodewordSkew(p,s,c))return null;var x=Kz.getDecodedValue(f),_=Jn.getCodeword(x);return _===-1?null:new Xz(a,d,n.getCodewordBucketNumber(x),_)},n.getModuleBitCount=function(e,t,r,i,a,o){for(var s=a,c=new Int32Array(8),f=0,d=i?1:-1,p=i;(i?s<r:s>=t)&&f<c.length;)e.get(s,o)===p?(c[f]++,s+=d):(f++,p=!p);return f===c.length||s===(i?r:t)&&f===c.length-1?c:null},n.getNumberOfECCodeWords=function(e){return 2<<e},n.adjustCodewordStartColumn=function(e,t,r,i,a,o){for(var s=a,c=i?-1:1,f=0;f<2;f++){for(;(i?s>=t:s<r)&&i===e.get(s,o);){if(Math.abs(a-s)>n.CODEWORD_SKEW_SIZE)return a;s+=c}c=-c,i=!i}return s},n.checkCodewordSkew=function(e,t,r){return t-n.CODEWORD_SKEW_SIZE<=e&&e<=r+n.CODEWORD_SKEW_SIZE},n.decodeCodewords=function(e,t,r){if(e.length===0)throw gt.getFormatInstance();var i=1<<t+1,a=n.correctErrors(e,r,i);n.verifyCodewordCount(e,i);var o=oV.decode(e,""+t);return o.setErrorsCorrected(a),o.setErasures(r.length),o},n.correctErrors=function(e,t,r){if(t!=null&&t.length>r/2+n.MAX_ERRORS||r<0||r>n.MAX_EC_CODEWORDS)throw ya.getChecksumInstance();return n.errorCorrection.decode(e,r,t)},n.verifyCodewordCount=function(e,t){if(e.length<4)throw gt.getFormatInstance();var r=e[0];if(r>e.length)throw gt.getFormatInstance();if(r===0)if(t<e.length)e[0]=e.length-t;else throw gt.getFormatInstance()},n.getBitCountForCodeword=function(e){for(var t=new Int32Array(8),r=0,i=t.length-1;!((e&1)!==r&&(r=e&1,i--,i<0));)t[i]++,e>>=1;return t},n.getCodewordBucketNumber=function(e){return e instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(e):this.getCodewordBucketNumber_number(e)},n.getCodewordBucketNumber_number=function(e){return n.getCodewordBucketNumber(n.getBitCountForCodeword(e))},n.getCodewordBucketNumber_Int32Array=function(e){return(e[0]-e[2]+e[4]-e[6]+9)%9},n.toString=function(e){for(var t=new rb,r=0;r<e.length;r++){t.format("Row %2d: ",r);for(var i=0;i<e[r].length;i++){var a=e[r][i];a.getValue().length===0?t.format("        ",null):t.format("%4d(%2d)",a.getValue()[0],a.getConfidence(a.getValue()[0]))}t.format("%n")}return t.toString()},n.CODEWORD_SKEW_SIZE=2,n.MAX_ERRORS=3,n.MAX_EC_CODEWORDS=512,n.errorCorrection=new zz,n}(),lV=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},xx=function(){function n(){}return n.prototype.decode=function(e,t){t===void 0&&(t=null);var r=n.decode(e,t,!1);if(r==null||r.length===0||r[0]==null)throw We.getNotFoundInstance();return r[0]},n.prototype.decodeMultiple=function(e,t){t===void 0&&(t=null);try{return n.decode(e,t,!0)}catch(r){throw r instanceof gt||r instanceof ya?We.getNotFoundInstance():r}},n.decode=function(e,t,r){var i,a,o=new Array,s=Pz.detectMultiple(e,t,r);try{for(var c=lV(s.getPoints()),f=c.next();!f.done;f=c.next()){var d=f.value,p=sV.decode(s.getBits(),d[4],d[5],d[6],d[7],n.getMinCodewordWidth(d),n.getMaxCodewordWidth(d)),g=new po(p.getText(),p.getRawBytes(),void 0,d,Yt.PDF_417);g.putMetadata(Fa.ERROR_CORRECTION_LEVEL,p.getECLevel());var m=p.getOther();m!=null&&g.putMetadata(Fa.PDF417_EXTRA_METADATA,m),o.push(g)}}catch(x){i={error:x}}finally{try{f&&!f.done&&(a=c.return)&&a.call(c)}finally{if(i)throw i.error}}return o.map(function(x){return x})},n.getMaxWidth=function(e,t){return e==null||t==null?0:Math.trunc(Math.abs(e.getX()-t.getX()))},n.getMinWidth=function(e,t){return e==null||t==null?Nn.MAX_VALUE:Math.trunc(Math.abs(e.getX()-t.getX()))},n.getMaxCodewordWidth=function(e){return Math.floor(Math.max(Math.max(n.getMaxWidth(e[0],e[4]),n.getMaxWidth(e[6],e[2])*Jn.MODULES_IN_CODEWORD/Jn.MODULES_IN_STOP_PATTERN),Math.max(n.getMaxWidth(e[1],e[5]),n.getMaxWidth(e[7],e[3])*Jn.MODULES_IN_CODEWORD/Jn.MODULES_IN_STOP_PATTERN)))},n.getMinCodewordWidth=function(e){return Math.floor(Math.min(Math.min(n.getMinWidth(e[0],e[4]),n.getMinWidth(e[6],e[2])*Jn.MODULES_IN_CODEWORD/Jn.MODULES_IN_STOP_PATTERN),Math.min(n.getMinWidth(e[1],e[5]),n.getMinWidth(e[7],e[3])*Jn.MODULES_IN_CODEWORD/Jn.MODULES_IN_STOP_PATTERN)))},n.prototype.reset=function(){},n}(),cV=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),V4=function(n){cV(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="ReaderException",e}(Jo),q4=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},uV=function(){function n(){}return n.prototype.decode=function(e,t){return this.setHints(t),this.decodeInternal(e)},n.prototype.decodeWithState=function(e){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(e)},n.prototype.setHints=function(e){this.hints=e;var t=e!=null&&e.get(ai.TRY_HARDER)!==void 0,r=e==null?null:e.get(ai.POSSIBLE_FORMATS),i=new Array;if(r!=null){var a=r.some(function(o){return o===Yt.UPC_A||o===Yt.UPC_E||o===Yt.EAN_13||o===Yt.EAN_8||o===Yt.CODABAR||o===Yt.CODE_39||o===Yt.CODE_93||o===Yt.CODE_128||o===Yt.ITF||o===Yt.RSS_14||o===Yt.RSS_EXPANDED});a&&!t&&i.push(new Z0(e)),r.includes(Yt.QR_CODE)&&i.push(new vx),r.includes(Yt.DATA_MATRIX)&&i.push(new mx),r.includes(Yt.AZTEC)&&i.push(new px),r.includes(Yt.PDF_417)&&i.push(new xx),a&&t&&i.push(new Z0(e))}i.length===0&&(t||i.push(new Z0(e)),i.push(new vx),i.push(new mx),i.push(new px),i.push(new xx),t&&i.push(new Z0(e))),this.readers=i},n.prototype.reset=function(){var e,t;if(this.readers!==null)try{for(var r=q4(this.readers),i=r.next();!i.done;i=r.next()){var a=i.value;a.reset()}}catch(o){e={error:o}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}},n.prototype.decodeInternal=function(e){var t,r;if(this.readers===null)throw new V4("No readers where selected, nothing can be read.");try{for(var i=q4(this.readers),a=i.next();!a.done;a=i.next()){var o=a.value;try{return o.decode(e,this.hints)}catch(s){if(s instanceof V4)continue}}}catch(s){t={error:s}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}throw new We("No MultiFormat Readers were able to detect the code.")},n}(),fV=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),dV=function(n){fV(e,n);function e(t,r){t===void 0&&(t=null),r===void 0&&(r=500);var i=this,a=new uV;return a.setHints(t),i=n.call(this,a,r)||this,i}return e.prototype.decodeBitmap=function(t){return this.reader.decodeWithState(t)},e}(Gh),hV=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();(function(n){hV(e,n);function e(t){return t===void 0&&(t=500),n.call(this,new xx,t)||this}return e})(Gh);var pV=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();(function(n){pV(e,n);function e(t){return t===void 0&&(t=500),n.call(this,new vx,t)||this}return e})(Gh);var bx;(function(n){n[n.ERROR_CORRECTION=0]="ERROR_CORRECTION",n[n.CHARACTER_SET=1]="CHARACTER_SET",n[n.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",n[n.DATA_MATRIX_COMPACT=3]="DATA_MATRIX_COMPACT",n[n.MIN_SIZE=4]="MIN_SIZE",n[n.MAX_SIZE=5]="MAX_SIZE",n[n.MARGIN=6]="MARGIN",n[n.PDF417_COMPACT=7]="PDF417_COMPACT",n[n.PDF417_COMPACTION=8]="PDF417_COMPACTION",n[n.PDF417_DIMENSIONS=9]="PDF417_DIMENSIONS",n[n.AZTEC_LAYERS=10]="AZTEC_LAYERS",n[n.QR_VERSION=11]="QR_VERSION",n[n.GS1_FORMAT=12]="GS1_FORMAT",n[n.FORCE_C40=13]="FORCE_C40"})(bx||(bx={}));const lg=bx;var xC=function(){function n(e){this.field=e,this.cachedGenerators=[],this.cachedGenerators.push(new uf(e,Int32Array.from([1])))}return n.prototype.buildGenerator=function(e){var t=this.cachedGenerators;if(e>=t.length)for(var r=t[t.length-1],i=this.field,a=t.length;a<=e;a++){var o=r.multiply(new uf(i,Int32Array.from([1,i.exp(a-1+i.getGeneratorBase())])));t.push(o),r=o}return t[e]},n.prototype.encode=function(e,t){if(t===0)throw new Xt("No error correction bytes");var r=e.length-t;if(r<=0)throw new Xt("No data bytes provided");var i=this.buildGenerator(t),a=new Int32Array(r);jr.arraycopy(e,0,a,0,r);var o=new uf(this.field,a);o=o.multiplyByMonomial(t,1);for(var s=o.divide(i)[1],c=s.getCoefficients(),f=t-c.length,d=0;d<f;d++)e[r+d]=0;jr.arraycopy(c,0,e,r+f,c.length)},n}(),e1=function(){function n(){}return n.applyMaskPenaltyRule1=function(e){return n.applyMaskPenaltyRule1Internal(e,!0)+n.applyMaskPenaltyRule1Internal(e,!1)},n.applyMaskPenaltyRule2=function(e){for(var t=0,r=e.getArray(),i=e.getWidth(),a=e.getHeight(),o=0;o<a-1;o++)for(var s=r[o],c=0;c<i-1;c++){var f=s[c];f===s[c+1]&&f===r[o+1][c]&&f===r[o+1][c+1]&&t++}return n.N2*t},n.applyMaskPenaltyRule3=function(e){for(var t=0,r=e.getArray(),i=e.getWidth(),a=e.getHeight(),o=0;o<a;o++)for(var s=0;s<i;s++){var c=r[o];s+6<i&&c[s]===1&&c[s+1]===0&&c[s+2]===1&&c[s+3]===1&&c[s+4]===1&&c[s+5]===0&&c[s+6]===1&&(n.isWhiteHorizontal(c,s-4,s)||n.isWhiteHorizontal(c,s+7,s+11))&&t++,o+6<a&&r[o][s]===1&&r[o+1][s]===0&&r[o+2][s]===1&&r[o+3][s]===1&&r[o+4][s]===1&&r[o+5][s]===0&&r[o+6][s]===1&&(n.isWhiteVertical(r,s,o-4,o)||n.isWhiteVertical(r,s,o+7,o+11))&&t++}return t*n.N3},n.isWhiteHorizontal=function(e,t,r){t=Math.max(t,0),r=Math.min(r,e.length);for(var i=t;i<r;i++)if(e[i]===1)return!1;return!0},n.isWhiteVertical=function(e,t,r,i){r=Math.max(r,0),i=Math.min(i,e.length);for(var a=r;a<i;a++)if(e[a][t]===1)return!1;return!0},n.applyMaskPenaltyRule4=function(e){for(var t=0,r=e.getArray(),i=e.getWidth(),a=e.getHeight(),o=0;o<a;o++)for(var s=r[o],c=0;c<i;c++)s[c]===1&&t++;var f=e.getHeight()*e.getWidth(),d=Math.floor(Math.abs(t*2-f)*10/f);return d*n.N4},n.getDataMaskBit=function(e,t,r){var i,a;switch(e){case 0:i=r+t&1;break;case 1:i=r&1;break;case 2:i=t%3;break;case 3:i=(r+t)%3;break;case 4:i=Math.floor(r/2)+Math.floor(t/3)&1;break;case 5:a=r*t,i=(a&1)+a%3;break;case 6:a=r*t,i=(a&1)+a%3&1;break;case 7:a=r*t,i=a%3+(r+t&1)&1;break;default:throw new Xt("Invalid mask pattern: "+e)}return i===0},n.applyMaskPenaltyRule1Internal=function(e,t){for(var r=0,i=t?e.getHeight():e.getWidth(),a=t?e.getWidth():e.getHeight(),o=e.getArray(),s=0;s<i;s++){for(var c=0,f=-1,d=0;d<a;d++){var p=t?o[s][d]:o[d][s];p===f?c++:(c>=5&&(r+=n.N1+(c-5)),c=1,f=p)}c>=5&&(r+=n.N1+(c-5))}return r},n.N1=3,n.N2=3,n.N3=40,n.N4=10,n}(),gV=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},mV=function(){function n(e,t){this.width=e,this.height=t;for(var r=new Array(t),i=0;i!==t;i++)r[i]=new Uint8Array(e);this.bytes=r}return n.prototype.getHeight=function(){return this.height},n.prototype.getWidth=function(){return this.width},n.prototype.get=function(e,t){return this.bytes[t][e]},n.prototype.getArray=function(){return this.bytes},n.prototype.setNumber=function(e,t,r){this.bytes[t][e]=r},n.prototype.setBoolean=function(e,t,r){this.bytes[t][e]=r?1:0},n.prototype.clear=function(e){var t,r;try{for(var i=gV(this.bytes),a=i.next();!a.done;a=i.next()){var o=a.value;ta.fill(o,e)}}catch(s){t={error:s}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;if(this.width!==t.width||this.height!==t.height)return!1;for(var r=0,i=this.height;r<i;++r)for(var a=this.bytes[r],o=t.bytes[r],s=0,c=this.width;s<c;++s)if(a[s]!==o[s])return!1;return!0},n.prototype.toString=function(){for(var e=new En,t=0,r=this.height;t<r;++t){for(var i=this.bytes[t],a=0,o=this.width;a<o;++a)switch(i[a]){case 0:e.append(" 0");break;case 1:e.append(" 1");break;default:e.append("  ");break}e.append(`
`)}return e.toString()},n}(),wx=function(){function n(){this.maskPattern=-1}return n.prototype.getMode=function(){return this.mode},n.prototype.getECLevel=function(){return this.ecLevel},n.prototype.getVersion=function(){return this.version},n.prototype.getMaskPattern=function(){return this.maskPattern},n.prototype.getMatrix=function(){return this.matrix},n.prototype.toString=function(){var e=new En;return e.append(`<<
`),e.append(" mode: "),e.append(this.mode?this.mode.toString():"null"),e.append(`
 ecLevel: `),e.append(this.ecLevel?this.ecLevel.toString():"null"),e.append(`
 version: `),e.append(this.version?this.version.toString():"null"),e.append(`
 maskPattern: `),e.append(this.maskPattern.toString()),this.matrix?(e.append(`
 matrix:
`),e.append(this.matrix.toString())):e.append(`
 matrix: null
`),e.append(`>>
`),e.toString()},n.prototype.setMode=function(e){this.mode=e},n.prototype.setECLevel=function(e){this.ecLevel=e},n.prototype.setVersion=function(e){this.version=e},n.prototype.setMaskPattern=function(e){this.maskPattern=e},n.prototype.setMatrix=function(e){this.matrix=e},n.isValidMaskPattern=function(e){return e>=0&&e<n.NUM_MASK_PATTERNS},n.NUM_MASK_PATTERNS=8,n}(),vV=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Hr=function(n){vV(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="WriterException",e}(Jo),H4=function(){function n(){}return n.clearMatrix=function(e){e.clear(255)},n.buildMatrix=function(e,t,r,i,a){n.clearMatrix(a),n.embedBasicPatterns(r,a),n.embedTypeInfo(t,i,a),n.maybeEmbedVersionInfo(r,a),n.embedDataBits(e,i,a)},n.embedBasicPatterns=function(e,t){n.embedPositionDetectionPatternsAndSeparators(t),n.embedDarkDotAtLeftBottomCorner(t),n.maybeEmbedPositionAdjustmentPatterns(e,t),n.embedTimingPatterns(t)},n.embedTypeInfo=function(e,t,r){var i=new xa;n.makeTypeInfoBits(e,t,i);for(var a=0,o=i.getSize();a<o;++a){var s=i.get(i.getSize()-1-a),c=n.TYPE_INFO_COORDINATES[a],f=c[0],d=c[1];if(r.setBoolean(f,d,s),a<8){var p=r.getWidth()-a-1,g=8;r.setBoolean(p,g,s)}else{var p=8,g=r.getHeight()-7+(a-8);r.setBoolean(p,g,s)}}},n.maybeEmbedVersionInfo=function(e,t){if(!(e.getVersionNumber()<7)){var r=new xa;n.makeVersionInfoBits(e,r);for(var i=6*3-1,a=0;a<6;++a)for(var o=0;o<3;++o){var s=r.get(i);i--,t.setBoolean(a,t.getHeight()-11+o,s),t.setBoolean(t.getHeight()-11+o,a,s)}}},n.embedDataBits=function(e,t,r){for(var i=0,a=-1,o=r.getWidth()-1,s=r.getHeight()-1;o>0;){for(o===6&&(o-=1);s>=0&&s<r.getHeight();){for(var c=0;c<2;++c){var f=o-c;if(n.isEmpty(r.get(f,s))){var d=void 0;i<e.getSize()?(d=e.get(i),++i):d=!1,t!==255&&e1.getDataMaskBit(t,f,s)&&(d=!d),r.setBoolean(f,s,d)}}s+=a}a=-a,s+=a,o-=2}if(i!==e.getSize())throw new Hr("Not all bits consumed: "+i+"/"+e.getSize())},n.findMSBSet=function(e){return 32-Nn.numberOfLeadingZeros(e)},n.calculateBCHCode=function(e,t){if(t===0)throw new Xt("0 polynomial");var r=n.findMSBSet(t);for(e<<=r-1;n.findMSBSet(e)>=r;)e^=t<<n.findMSBSet(e)-r;return e},n.makeTypeInfoBits=function(e,t,r){if(!wx.isValidMaskPattern(t))throw new Hr("Invalid mask pattern");var i=e.getBits()<<3|t;r.appendBits(i,5);var a=n.calculateBCHCode(i,n.TYPE_INFO_POLY);r.appendBits(a,10);var o=new xa;if(o.appendBits(n.TYPE_INFO_MASK_PATTERN,15),r.xor(o),r.getSize()!==15)throw new Hr("should not happen but we got: "+r.getSize())},n.makeVersionInfoBits=function(e,t){t.appendBits(e.getVersionNumber(),6);var r=n.calculateBCHCode(e.getVersionNumber(),n.VERSION_INFO_POLY);if(t.appendBits(r,12),t.getSize()!==18)throw new Hr("should not happen but we got: "+t.getSize())},n.isEmpty=function(e){return e===255},n.embedTimingPatterns=function(e){for(var t=8;t<e.getWidth()-8;++t){var r=(t+1)%2;n.isEmpty(e.get(t,6))&&e.setNumber(t,6,r),n.isEmpty(e.get(6,t))&&e.setNumber(6,t,r)}},n.embedDarkDotAtLeftBottomCorner=function(e){if(e.get(8,e.getHeight()-8)===0)throw new Hr;e.setNumber(8,e.getHeight()-8,1)},n.embedHorizontalSeparationPattern=function(e,t,r){for(var i=0;i<8;++i){if(!n.isEmpty(r.get(e+i,t)))throw new Hr;r.setNumber(e+i,t,0)}},n.embedVerticalSeparationPattern=function(e,t,r){for(var i=0;i<7;++i){if(!n.isEmpty(r.get(e,t+i)))throw new Hr;r.setNumber(e,t+i,0)}},n.embedPositionAdjustmentPattern=function(e,t,r){for(var i=0;i<5;++i)for(var a=n.POSITION_ADJUSTMENT_PATTERN[i],o=0;o<5;++o)r.setNumber(e+o,t+i,a[o])},n.embedPositionDetectionPattern=function(e,t,r){for(var i=0;i<7;++i)for(var a=n.POSITION_DETECTION_PATTERN[i],o=0;o<7;++o)r.setNumber(e+o,t+i,a[o])},n.embedPositionDetectionPatternsAndSeparators=function(e){var t=n.POSITION_DETECTION_PATTERN[0].length;n.embedPositionDetectionPattern(0,0,e),n.embedPositionDetectionPattern(e.getWidth()-t,0,e),n.embedPositionDetectionPattern(0,e.getWidth()-t,e);var r=8;n.embedHorizontalSeparationPattern(0,r-1,e),n.embedHorizontalSeparationPattern(e.getWidth()-r,r-1,e),n.embedHorizontalSeparationPattern(0,e.getWidth()-r,e);var i=7;n.embedVerticalSeparationPattern(i,0,e),n.embedVerticalSeparationPattern(e.getHeight()-i-1,0,e),n.embedVerticalSeparationPattern(i,e.getHeight()-i,e)},n.maybeEmbedPositionAdjustmentPatterns=function(e,t){if(!(e.getVersionNumber()<2))for(var r=e.getVersionNumber()-1,i=n.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[r],a=0,o=i.length;a!==o;a++){var s=i[a];if(s>=0)for(var c=0;c!==o;c++){var f=i[c];f>=0&&n.isEmpty(t.get(f,s))&&n.embedPositionAdjustmentPattern(f-2,s-2,t)}}},n.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),n.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),n.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),n.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),n.VERSION_INFO_POLY=7973,n.TYPE_INFO_POLY=1335,n.TYPE_INFO_MASK_PATTERN=21522,n}(),yV=function(){function n(e,t){this.dataBytes=e,this.errorCorrectionBytes=t}return n.prototype.getDataBytes=function(){return this.dataBytes},n.prototype.getErrorCorrectionBytes=function(){return this.errorCorrectionBytes},n}(),W4=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};(function(){function n(){}return n.calculateMaskPenalty=function(e){return e1.applyMaskPenaltyRule1(e)+e1.applyMaskPenaltyRule2(e)+e1.applyMaskPenaltyRule3(e)+e1.applyMaskPenaltyRule4(e)},n.encode=function(e,t,r){r===void 0&&(r=null);var i=n.DEFAULT_BYTE_MODE_ENCODING,a=r!==null&&r.get(lg.CHARACTER_SET)!==void 0;a&&(i=r.get(lg.CHARACTER_SET).toString());var o=this.chooseMode(e,i),s=new xa;if(o===Wr.BYTE&&(a||n.DEFAULT_BYTE_MODE_ENCODING!==i)){var c=ea.getCharacterSetECIByName(i);c!==void 0&&this.appendECI(c,s)}this.appendModeInfo(o,s);var f=new xa;this.appendBytes(e,o,f,i);var d;if(r!==null&&r.get(lg.QR_VERSION)!==void 0){var p=Number.parseInt(r.get(lg.QR_VERSION).toString(),10);d=ad.getVersionForNumber(p);var g=this.calculateBitsNeeded(o,s,f,d);if(!this.willFit(g,d,t))throw new Hr("Data too big for requested version")}else d=this.recommendVersion(t,o,s,f);var m=new xa;m.appendBitArray(s);var x=o===Wr.BYTE?f.getSizeInBytes():e.length;this.appendLengthInfo(x,d,o,m),m.appendBitArray(f);var _=d.getECBlocksForLevel(t),C=d.getTotalCodewords()-_.getTotalECCodewords();this.terminateBits(C,m);var S=this.interleaveWithECBytes(m,d.getTotalCodewords(),C,_.getNumBlocks()),k=new wx;k.setECLevel(t),k.setMode(o),k.setVersion(d);var M=d.getDimensionForVersion(),P=new mV(M,M),Y=this.chooseMaskPattern(S,t,d,P);return k.setMaskPattern(Y),H4.buildMatrix(S,t,d,Y,P),k.setMatrix(P),k},n.recommendVersion=function(e,t,r,i){var a=this.calculateBitsNeeded(t,r,i,ad.getVersionForNumber(1)),o=this.chooseVersion(a,e),s=this.calculateBitsNeeded(t,r,i,o);return this.chooseVersion(s,e)},n.calculateBitsNeeded=function(e,t,r,i){return t.getSize()+e.getCharacterCountBits(i)+r.getSize()},n.getAlphanumericCode=function(e){return e<n.ALPHANUMERIC_TABLE.length?n.ALPHANUMERIC_TABLE[e]:-1},n.chooseMode=function(e,t){if(t===void 0&&(t=null),ea.SJIS.getName()===t&&this.isOnlyDoubleByteKanji(e))return Wr.KANJI;for(var r=!1,i=!1,a=0,o=e.length;a<o;++a){var s=e.charAt(a);if(n.isDigit(s))r=!0;else if(this.getAlphanumericCode(s.charCodeAt(0))!==-1)i=!0;else return Wr.BYTE}return i?Wr.ALPHANUMERIC:r?Wr.NUMERIC:Wr.BYTE},n.isOnlyDoubleByteKanji=function(e){var t;try{t=Ys.encode(e,ea.SJIS)}catch{return!1}var r=t.length;if(r%2!==0)return!1;for(var i=0;i<r;i+=2){var a=t[i]&255;if((a<129||a>159)&&(a<224||a>235))return!1}return!0},n.chooseMaskPattern=function(e,t,r,i){for(var a=Number.MAX_SAFE_INTEGER,o=-1,s=0;s<wx.NUM_MASK_PATTERNS;s++){H4.buildMatrix(e,t,r,s,i);var c=this.calculateMaskPenalty(i);c<a&&(a=c,o=s)}return o},n.chooseVersion=function(e,t){for(var r=1;r<=40;r++){var i=ad.getVersionForNumber(r);if(n.willFit(e,i,t))return i}throw new Hr("Data too big")},n.willFit=function(e,t,r){var i=t.getTotalCodewords(),a=t.getECBlocksForLevel(r),o=a.getTotalECCodewords(),s=i-o,c=(e+7)/8;return s>=c},n.terminateBits=function(e,t){var r=e*8;if(t.getSize()>r)throw new Hr("data bits cannot fit in the QR Code"+t.getSize()+" > "+r);for(var i=0;i<4&&t.getSize()<r;++i)t.appendBit(!1);var a=t.getSize()&7;if(a>0)for(var i=a;i<8;i++)t.appendBit(!1);for(var o=e-t.getSizeInBytes(),i=0;i<o;++i)t.appendBits((i&1)===0?236:17,8);if(t.getSize()!==r)throw new Hr("Bits size does not equal capacity")},n.getNumDataBytesAndNumECBytesForBlockID=function(e,t,r,i,a,o){if(i>=r)throw new Hr("Block ID too large");var s=e%r,c=r-s,f=Math.floor(e/r),d=f+1,p=Math.floor(t/r),g=p+1,m=f-p,x=d-g;if(m!==x)throw new Hr("EC bytes mismatch");if(r!==c+s)throw new Hr("RS blocks mismatch");if(e!==(p+m)*c+(g+x)*s)throw new Hr("Total bytes mismatch");i<c?(a[0]=p,o[0]=m):(a[0]=g,o[0]=x)},n.interleaveWithECBytes=function(e,t,r,i){var a,o,s,c;if(e.getSizeInBytes()!==r)throw new Hr("Number of bits and data bytes does not match");for(var f=0,d=0,p=0,g=new Array,m=0;m<i;++m){var x=new Int32Array(1),_=new Int32Array(1);n.getNumDataBytesAndNumECBytesForBlockID(t,r,i,m,x,_);var C=x[0],S=new Uint8Array(C);e.toBytes(8*f,S,0,C);var k=n.generateECBytes(S,_[0]);g.push(new yV(S,k)),d=Math.max(d,C),p=Math.max(p,k.length),f+=x[0]}if(r!==f)throw new Hr("Data bytes does not match offset");for(var M=new xa,m=0;m<d;++m)try{for(var P=(a=void 0,W4(g)),Y=P.next();!Y.done;Y=P.next()){var z=Y.value,S=z.getDataBytes();m<S.length&&M.appendBits(S[m],8)}}catch(j){a={error:j}}finally{try{Y&&!Y.done&&(o=P.return)&&o.call(P)}finally{if(a)throw a.error}}for(var m=0;m<p;++m)try{for(var F=(s=void 0,W4(g)),I=F.next();!I.done;I=F.next()){var z=I.value,k=z.getErrorCorrectionBytes();m<k.length&&M.appendBits(k[m],8)}}catch(j){s={error:j}}finally{try{I&&!I.done&&(c=F.return)&&c.call(F)}finally{if(s)throw s.error}}if(t!==M.getSizeInBytes())throw new Hr("Interleaving error: "+t+" and "+M.getSizeInBytes()+" differ.");return M},n.generateECBytes=function(e,t){for(var r=e.length,i=new Int32Array(r+t),a=0;a<r;a++)i[a]=e[a]&255;new xC(Yo.QR_CODE_FIELD_256).encode(i,t);for(var o=new Uint8Array(t),a=0;a<t;a++)o[a]=i[r+a];return o},n.appendModeInfo=function(e,t){t.appendBits(e.getBits(),4)},n.appendLengthInfo=function(e,t,r,i){var a=r.getCharacterCountBits(t);if(e>=1<<a)throw new Hr(e+" is bigger than "+((1<<a)-1));i.appendBits(e,a)},n.appendBytes=function(e,t,r,i){switch(t){case Wr.NUMERIC:n.appendNumericBytes(e,r);break;case Wr.ALPHANUMERIC:n.appendAlphanumericBytes(e,r);break;case Wr.BYTE:n.append8BitBytes(e,r,i);break;case Wr.KANJI:n.appendKanjiBytes(e,r);break;default:throw new Hr("Invalid mode: "+t)}},n.getDigit=function(e){return e.charCodeAt(0)-48},n.isDigit=function(e){var t=n.getDigit(e);return t>=0&&t<=9},n.appendNumericBytes=function(e,t){for(var r=e.length,i=0;i<r;){var a=n.getDigit(e.charAt(i));if(i+2<r){var o=n.getDigit(e.charAt(i+1)),s=n.getDigit(e.charAt(i+2));t.appendBits(a*100+o*10+s,10),i+=3}else if(i+1<r){var o=n.getDigit(e.charAt(i+1));t.appendBits(a*10+o,7),i+=2}else t.appendBits(a,4),i++}},n.appendAlphanumericBytes=function(e,t){for(var r=e.length,i=0;i<r;){var a=n.getAlphanumericCode(e.charCodeAt(i));if(a===-1)throw new Hr;if(i+1<r){var o=n.getAlphanumericCode(e.charCodeAt(i+1));if(o===-1)throw new Hr;t.appendBits(a*45+o,11),i+=2}else t.appendBits(a,6),i++}},n.append8BitBytes=function(e,t,r){var i;try{i=Ys.encode(e,r)}catch(c){throw new Hr(c)}for(var a=0,o=i.length;a!==o;a++){var s=i[a];t.appendBits(s,8)}},n.appendKanjiBytes=function(e,t){var r;try{r=Ys.encode(e,ea.SJIS)}catch(p){throw new Hr(p)}for(var i=r.length,a=0;a<i;a+=2){var o=r[a]&255,s=r[a+1]&255,c=o<<8&4294967295|s,f=-1;if(c>=33088&&c<=40956?f=c-33088:c>=57408&&c<=60351&&(f=c-49472),f===-1)throw new Hr("Invalid byte sequence");var d=(f>>8)*192+(f&255);t.appendBits(d,13)}},n.appendECI=function(e,t){t.appendBits(Wr.ECI.getBits(),4),t.appendBits(e.getValue(),8)},n.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),n.DEFAULT_BYTE_MODE_ENCODING=ea.UTF8.getName(),n})();var xV=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();(function(n){xV(e,n);function e(t,r,i,a,o,s,c,f){var d=n.call(this,s,c)||this;if(d.yuvData=t,d.dataWidth=r,d.dataHeight=i,d.left=a,d.top=o,a+s>r||o+c>i)throw new Xt("Crop rectangle does not fit within image data.");return f&&d.reverseHorizontal(s,c),d}return e.prototype.getRow=function(t,r){if(t<0||t>=this.getHeight())throw new Xt("Requested row is outside the image: "+t);var i=this.getWidth();(r==null||r.length<i)&&(r=new Uint8ClampedArray(i));var a=(t+this.top)*this.dataWidth+this.left;return jr.arraycopy(this.yuvData,a,r,0,i),r},e.prototype.getMatrix=function(){var t=this.getWidth(),r=this.getHeight();if(t===this.dataWidth&&r===this.dataHeight)return this.yuvData;var i=t*r,a=new Uint8ClampedArray(i),o=this.top*this.dataWidth+this.left;if(t===this.dataWidth)return jr.arraycopy(this.yuvData,o,a,0,i),a;for(var s=0;s<r;s++){var c=s*t;jr.arraycopy(this.yuvData,o,a,c,t),o+=this.dataWidth}return a},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(t,r,i,a){return new e(this.yuvData,this.dataWidth,this.dataHeight,this.left+t,this.top+r,i,a,!1)},e.prototype.renderThumbnail=function(){for(var t=this.getWidth()/e.THUMBNAIL_SCALE_FACTOR,r=this.getHeight()/e.THUMBNAIL_SCALE_FACTOR,i=new Int32Array(t*r),a=this.yuvData,o=this.top*this.dataWidth+this.left,s=0;s<r;s++){for(var c=s*t,f=0;f<t;f++){var d=a[o+f*e.THUMBNAIL_SCALE_FACTOR]&255;i[c+f]=4278190080|d*65793}o+=this.dataWidth*e.THUMBNAIL_SCALE_FACTOR}return i},e.prototype.getThumbnailWidth=function(){return this.getWidth()/e.THUMBNAIL_SCALE_FACTOR},e.prototype.getThumbnailHeight=function(){return this.getHeight()/e.THUMBNAIL_SCALE_FACTOR},e.prototype.reverseHorizontal=function(t,r){for(var i=this.yuvData,a=0,o=this.top*this.dataWidth+this.left;a<r;a++,o+=this.dataWidth)for(var s=o+t/2,c=o,f=o+t-1;c<s;c++,f--){var d=i[c];i[c]=i[f],i[f]=d}},e.prototype.invert=function(){return new J5(this)},e.THUMBNAIL_SCALE_FACTOR=2,e})(u2);var bV=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();(function(n){bV(e,n);function e(t,r,i,a,o,s,c){var f=n.call(this,r,i)||this;if(f.dataWidth=a,f.dataHeight=o,f.left=s,f.top=c,t.BYTES_PER_ELEMENT===4){for(var d=r*i,p=new Uint8ClampedArray(d),g=0;g<d;g++){var m=t[g],x=m>>16&255,_=m>>7&510,C=m&255;p[g]=(x+_+C)/4&255}f.luminances=p}else f.luminances=t;if(a===void 0&&(f.dataWidth=r),o===void 0&&(f.dataHeight=i),s===void 0&&(f.left=0),c===void 0&&(f.top=0),f.left+r>f.dataWidth||f.top+i>f.dataHeight)throw new Xt("Crop rectangle does not fit within image data.");return f}return e.prototype.getRow=function(t,r){if(t<0||t>=this.getHeight())throw new Xt("Requested row is outside the image: "+t);var i=this.getWidth();(r==null||r.length<i)&&(r=new Uint8ClampedArray(i));var a=(t+this.top)*this.dataWidth+this.left;return jr.arraycopy(this.luminances,a,r,0,i),r},e.prototype.getMatrix=function(){var t=this.getWidth(),r=this.getHeight();if(t===this.dataWidth&&r===this.dataHeight)return this.luminances;var i=t*r,a=new Uint8ClampedArray(i),o=this.top*this.dataWidth+this.left;if(t===this.dataWidth)return jr.arraycopy(this.luminances,o,a,0,i),a;for(var s=0;s<r;s++){var c=s*t;jr.arraycopy(this.luminances,o,a,c,t),o+=this.dataWidth}return a},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(t,r,i,a){return new e(this.luminances,i,a,this.dataWidth,this.dataHeight,this.left+t,this.top+r)},e.prototype.invert=function(){return new J5(this)},e})(u2);var wV=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),_V=function(n){wV(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.forName=function(t){return this.getCharacterSetECIByName(t)},e}(ea),AV=function(){function n(){}return n.ISO_8859_1=ea.ISO8859_1,n}(),_x,SV=301,EV=function(n,e){for(var t=1,r=0;r<255;r++)e[r]=t,n[t]=r,t*=2,t>=256&&(t^=SV);return{LOG:n,ALOG:e}};_x=EV([],[]),_x.LOG;_x.ALOG;var $4;(function(n){n[n.FORCE_NONE=0]="FORCE_NONE",n[n.FORCE_SQUARE=1]="FORCE_SQUARE",n[n.FORCE_RECTANGLE=2]="FORCE_RECTANGLE"})($4||($4={}));var G4=129,bC=230,CV=231,IV=235,TV=236,RV=237,NV=238,DV=239,OV=240,Jv=254,kV=254,Y4="[)>05",X4="[)>06",K4="",xr=0,Pa=1,To=2,Zi=3,ga=4,lo=5,LV=function(){function n(){}return n.prototype.getEncodingMode=function(){return xr},n.prototype.encode=function(e){var t=Il.determineConsecutiveDigitCount(e.getMessage(),e.pos);if(t>=2)e.writeCodeword(this.encodeASCIIDigits(e.getMessage().charCodeAt(e.pos),e.getMessage().charCodeAt(e.pos+1))),e.pos+=2;else{var r=e.getCurrentChar(),i=Il.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(i!==this.getEncodingMode())switch(i){case lo:e.writeCodeword(CV),e.signalEncoderChange(lo);return;case Pa:e.writeCodeword(bC),e.signalEncoderChange(Pa);return;case Zi:e.writeCodeword(NV),e.signalEncoderChange(Zi);break;case To:e.writeCodeword(DV),e.signalEncoderChange(To);break;case ga:e.writeCodeword(OV),e.signalEncoderChange(ga);break;default:throw new Error("Illegal mode: "+i)}else Il.isExtendedASCII(r)?(e.writeCodeword(IV),e.writeCodeword(r-128+1),e.pos++):(e.writeCodeword(r+1),e.pos++)}},n.prototype.encodeASCIIDigits=function(e,t){if(Il.isDigit(e)&&Il.isDigit(t)){var r=(e-48)*10+(t-48);return r+130}throw new Error("not digits: "+e+t)},n}(),PV=function(){function n(){}return n.prototype.getEncodingMode=function(){return lo},n.prototype.encode=function(e){var t=new En;for(t.append(0);e.hasMoreCharacters();){var r=e.getCurrentChar();t.append(r),e.pos++;var i=Il.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(i!==this.getEncodingMode()){e.signalEncoderChange(xr);break}}var a=t.length()-1,o=1,s=e.getCodewordCount()+a+o;e.updateSymbolInfo(s);var c=e.getSymbolInfo().getDataCapacity()-s>0;if(e.hasMoreCharacters()||c)if(a<=249)t.setCharAt(0,Yn.getCharAt(a));else if(a<=1555)t.setCharAt(0,Yn.getCharAt(Math.floor(a/250)+249)),t.insert(1,Yn.getCharAt(a%250));else throw new Error("Message length not in valid ranges: "+a);for(var f=0,r=t.length();f<r;f++)e.writeCodeword(this.randomize255State(t.charAt(f).charCodeAt(0),e.getCodewordCount()+1))},n.prototype.randomize255State=function(e,t){var r=149*t%255+1,i=e+r;return i<=255?i:i-256},n}(),ib=function(){function n(){}return n.prototype.getEncodingMode=function(){return Pa},n.prototype.encodeMaximal=function(e){for(var t=new En,r=0,i=e.pos,a=0;e.hasMoreCharacters();){var o=e.getCurrentChar();e.pos++,r=this.encodeChar(o,t),t.length()%3===0&&(i=e.pos,a=t.length())}if(a!==t.length()){var s=Math.floor(t.length()/3*2),c=Math.floor(e.getCodewordCount()+s+1);e.updateSymbolInfo(c);var f=e.getSymbolInfo().getDataCapacity()-c,d=Math.floor(t.length()%3);(d===2&&f!==2||d===1&&(r>3||f!==1))&&(e.pos=i)}t.length()>0&&e.writeCodeword(bC),this.handleEOD(e,t)},n.prototype.encode=function(e){for(var t=new En;e.hasMoreCharacters();){var r=e.getCurrentChar();e.pos++;var i=this.encodeChar(r,t),a=Math.floor(t.length()/3)*2,o=e.getCodewordCount()+a;e.updateSymbolInfo(o);var s=e.getSymbolInfo().getDataCapacity()-o;if(!e.hasMoreCharacters()){var c=new En;for(t.length()%3===2&&s!==2&&(i=this.backtrackOneCharacter(e,t,c,i));t.length()%3===1&&(i>3||s!==1);)i=this.backtrackOneCharacter(e,t,c,i);break}var f=t.length();if(f%3===0){var d=Il.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(d!==this.getEncodingMode()){e.signalEncoderChange(xr);break}}}this.handleEOD(e,t)},n.prototype.backtrackOneCharacter=function(e,t,r,i){var a=t.length(),o=t.toString().substring(0,a-i);t.setLengthToZero(),t.append(o),e.pos--;var s=e.getCurrentChar();return i=this.encodeChar(s,r),e.resetSymbolInfo(),i},n.prototype.writeNextTriplet=function(e,t){e.writeCodewords(this.encodeToCodewords(t.toString()));var r=t.toString().substring(3);t.setLengthToZero(),t.append(r)},n.prototype.handleEOD=function(e,t){var r=Math.floor(t.length()/3*2),i=t.length()%3,a=e.getCodewordCount()+r;e.updateSymbolInfo(a);var o=e.getSymbolInfo().getDataCapacity()-a;if(i===2){for(t.append("\0");t.length()>=3;)this.writeNextTriplet(e,t);e.hasMoreCharacters()&&e.writeCodeword(Jv)}else if(o===1&&i===1){for(;t.length()>=3;)this.writeNextTriplet(e,t);e.hasMoreCharacters()&&e.writeCodeword(Jv),e.pos--}else if(i===0){for(;t.length()>=3;)this.writeNextTriplet(e,t);(o>0||e.hasMoreCharacters())&&e.writeCodeword(Jv)}else throw new Error("Unexpected case. Please report!");e.signalEncoderChange(xr)},n.prototype.encodeChar=function(e,t){if(e===32)return t.append(3),1;if(e>=48&&e<=57)return t.append(e-48+4),1;if(e>=65&&e<=90)return t.append(e-65+14),1;if(e<32)return t.append(0),t.append(e),2;if(e<=47)return t.append(1),t.append(e-33),2;if(e<=64)return t.append(1),t.append(e-58+15),2;if(e<=95)return t.append(1),t.append(e-91+22),2;if(e<=127)return t.append(2),t.append(e-96),2;t.append("1");var r=2;return r+=this.encodeChar(e-128,t),r},n.prototype.encodeToCodewords=function(e){var t=1600*e.charCodeAt(0)+40*e.charCodeAt(1)+e.charCodeAt(2)+1,r=t/256,i=t%256,a=new En;return a.append(r),a.append(i),a.toString()},n}(),MV=function(){function n(){}return n.prototype.getEncodingMode=function(){return ga},n.prototype.encode=function(e){for(var t=new En;e.hasMoreCharacters();){var r=e.getCurrentChar();this.encodeChar(r,t),e.pos++;var i=t.length();if(i>=4){e.writeCodewords(this.encodeToCodewords(t.toString()));var a=t.toString().substring(4);t.setLengthToZero(),t.append(a);var o=Il.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(o!==this.getEncodingMode()){e.signalEncoderChange(xr);break}}}t.append(Yn.getCharAt(31)),this.handleEOD(e,t)},n.prototype.handleEOD=function(e,t){try{var r=t.length();if(r===0)return;if(r===1){e.updateSymbolInfo();var i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount(),a=e.getRemainingCharacters();if(a>i&&(e.updateSymbolInfo(e.getCodewordCount()+1),i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount()),a<=i&&i<=2)return}if(r>4)throw new Error("Count must not exceed 4");var o=r-1,s=this.encodeToCodewords(t.toString()),c=!e.hasMoreCharacters(),f=c&&o<=2;if(o<=2){e.updateSymbolInfo(e.getCodewordCount()+o);var i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount();i>=3&&(f=!1,e.updateSymbolInfo(e.getCodewordCount()+s.length))}f?(e.resetSymbolInfo(),e.pos-=o):e.writeCodewords(s)}finally{e.signalEncoderChange(xr)}},n.prototype.encodeChar=function(e,t){e>=32&&e<=63?t.append(e):e>=64&&e<=94?t.append(Yn.getCharAt(e-64)):Il.illegalCharacter(Yn.getCharAt(e))},n.prototype.encodeToCodewords=function(e){var t=e.length;if(t===0)throw new Error("StringBuilder must not be empty");var r=e.charAt(0).charCodeAt(0),i=t>=2?e.charAt(1).charCodeAt(0):0,a=t>=3?e.charAt(2).charCodeAt(0):0,o=t>=4?e.charAt(3).charCodeAt(0):0,s=(r<<18)+(i<<12)+(a<<6)+o,c=s>>16&255,f=s>>8&255,d=s&255,p=new En;return p.append(c),t>=2&&p.append(f),t>=3&&p.append(d),p.toString()},n}(),jV=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),BV=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},lr=function(){function n(e,t,r,i,a,o,s,c){s===void 0&&(s=0),c===void 0&&(c=0),this.rectangular=e,this.dataCapacity=t,this.errorCodewords=r,this.matrixWidth=i,this.matrixHeight=a,this.dataRegions=o,this.rsBlockData=s,this.rsBlockError=c}return n.lookup=function(e,t,r,i,a){var o,s;t===void 0&&(t=0),r===void 0&&(r=null),i===void 0&&(i=null),a===void 0&&(a=!0);try{for(var c=BV(UV),f=c.next();!f.done;f=c.next()){var d=f.value;if(!(t===1&&d.rectangular)&&!(t===2&&!d.rectangular)&&!(r!=null&&(d.getSymbolWidth()<r.getWidth()||d.getSymbolHeight()<r.getHeight()))&&!(i!=null&&(d.getSymbolWidth()>i.getWidth()||d.getSymbolHeight()>i.getHeight()))&&e<=d.dataCapacity)return d}}catch(p){o={error:p}}finally{try{f&&!f.done&&(s=c.return)&&s.call(c)}finally{if(o)throw o.error}}if(a)throw new Error("Can't find a symbol arrangement that matches the message. Data codewords: "+e);return null},n.prototype.getHorizontalDataRegions=function(){switch(this.dataRegions){case 1:return 1;case 2:case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},n.prototype.getVerticalDataRegions=function(){switch(this.dataRegions){case 1:case 2:return 1;case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},n.prototype.getSymbolDataWidth=function(){return this.getHorizontalDataRegions()*this.matrixWidth},n.prototype.getSymbolDataHeight=function(){return this.getVerticalDataRegions()*this.matrixHeight},n.prototype.getSymbolWidth=function(){return this.getSymbolDataWidth()+this.getHorizontalDataRegions()*2},n.prototype.getSymbolHeight=function(){return this.getSymbolDataHeight()+this.getVerticalDataRegions()*2},n.prototype.getCodewordCount=function(){return this.dataCapacity+this.errorCodewords},n.prototype.getInterleavedBlockCount=function(){return this.rsBlockData?this.dataCapacity/this.rsBlockData:1},n.prototype.getDataCapacity=function(){return this.dataCapacity},n.prototype.getErrorCodewords=function(){return this.errorCodewords},n.prototype.getDataLengthForInterleavedBlock=function(e){return this.rsBlockData},n.prototype.getErrorLengthForInterleavedBlock=function(e){return this.rsBlockError},n}(),FV=function(n){jV(e,n);function e(){return n.call(this,!1,1558,620,22,22,36,-1,62)||this}return e.prototype.getInterleavedBlockCount=function(){return 10},e.prototype.getDataLengthForInterleavedBlock=function(t){return t<=8?156:155},e}(lr),UV=[new lr(!1,3,5,8,8,1),new lr(!1,5,7,10,10,1),new lr(!0,5,7,16,6,1),new lr(!1,8,10,12,12,1),new lr(!0,10,11,14,6,2),new lr(!1,12,12,14,14,1),new lr(!0,16,14,24,10,1),new lr(!1,18,14,16,16,1),new lr(!1,22,18,18,18,1),new lr(!0,22,18,16,10,2),new lr(!1,30,20,20,20,1),new lr(!0,32,24,16,14,2),new lr(!1,36,24,22,22,1),new lr(!1,44,28,24,24,1),new lr(!0,49,28,22,14,2),new lr(!1,62,36,14,14,4),new lr(!1,86,42,16,16,4),new lr(!1,114,48,18,18,4),new lr(!1,144,56,20,20,4),new lr(!1,174,68,22,22,4),new lr(!1,204,84,24,24,4,102,42),new lr(!1,280,112,14,14,16,140,56),new lr(!1,368,144,16,16,16,92,36),new lr(!1,456,192,18,18,16,114,48),new lr(!1,576,224,20,20,16,144,56),new lr(!1,696,272,22,22,16,174,68),new lr(!1,816,336,24,24,16,136,56),new lr(!1,1050,408,18,18,36,175,68),new lr(!1,1304,496,20,20,36,163,62),new FV],zV=function(){function n(e){this.msg=e,this.pos=0,this.skipAtEnd=0;for(var t=e.split("").map(function(s){return s.charCodeAt(0)}),r=new En,i=0,a=t.length;i<a;i++){var o=String.fromCharCode(t[i]&255);if(o==="?"&&e.charAt(i)!=="?")throw new Error("Message contains characters outside ISO-8859-1 encoding.");r.append(o)}this.msg=r.toString(),this.shape=0,this.codewords=new En,this.newEncoding=-1}return n.prototype.setSymbolShape=function(e){this.shape=e},n.prototype.setSizeConstraints=function(e,t){this.minSize=e,this.maxSize=t},n.prototype.getMessage=function(){return this.msg},n.prototype.setSkipAtEnd=function(e){this.skipAtEnd=e},n.prototype.getCurrentChar=function(){return this.msg.charCodeAt(this.pos)},n.prototype.getCurrent=function(){return this.msg.charCodeAt(this.pos)},n.prototype.getCodewords=function(){return this.codewords},n.prototype.writeCodewords=function(e){this.codewords.append(e)},n.prototype.writeCodeword=function(e){this.codewords.append(e)},n.prototype.getCodewordCount=function(){return this.codewords.length()},n.prototype.getNewEncoding=function(){return this.newEncoding},n.prototype.signalEncoderChange=function(e){this.newEncoding=e},n.prototype.resetEncoderSignal=function(){this.newEncoding=-1},n.prototype.hasMoreCharacters=function(){return this.pos<this.getTotalMessageCharCount()},n.prototype.getTotalMessageCharCount=function(){return this.msg.length-this.skipAtEnd},n.prototype.getRemainingCharacters=function(){return this.getTotalMessageCharCount()-this.pos},n.prototype.getSymbolInfo=function(){return this.symbolInfo},n.prototype.updateSymbolInfo=function(e){e===void 0&&(e=this.getCodewordCount()),(this.symbolInfo==null||e>this.symbolInfo.getDataCapacity())&&(this.symbolInfo=lr.lookup(e,this.shape,this.minSize,this.maxSize,!0))},n.prototype.resetSymbolInfo=function(){this.symbolInfo=null},n}(),VV=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),qV=function(n){VV(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getEncodingMode=function(){return Zi},e.prototype.encode=function(t){for(var r=new En;t.hasMoreCharacters();){var i=t.getCurrentChar();t.pos++,this.encodeChar(i,r);var a=r.length();if(a%3===0){this.writeNextTriplet(t,r);var o=Il.lookAheadTest(t.getMessage(),t.pos,this.getEncodingMode());if(o!==this.getEncodingMode()){t.signalEncoderChange(xr);break}}}this.handleEOD(t,r)},e.prototype.encodeChar=function(t,r){switch(t){case 13:r.append(0);break;case 42:r.append(1);break;case 62:r.append(2);break;case 32:r.append(3);break;default:t>=48&&t<=57?r.append(t-48+4):t>=65&&t<=90?r.append(t-65+14):Il.illegalCharacter(Yn.getCharAt(t));break}return 1},e.prototype.handleEOD=function(t,r){t.updateSymbolInfo();var i=t.getSymbolInfo().getDataCapacity()-t.getCodewordCount(),a=r.length();t.pos-=a,(t.getRemainingCharacters()>1||i>1||t.getRemainingCharacters()!==i)&&t.writeCodeword(kV),t.getNewEncoding()<0&&t.signalEncoderChange(xr)},e}(ib),HV=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),WV=function(n){HV(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getEncodingMode=function(){return To},e.prototype.encodeChar=function(t,r){if(t===32)return r.append(3),1;if(t>=48&&t<=57)return r.append(t-48+4),1;if(t>=97&&t<=122)return r.append(t-97+14),1;if(t<32)return r.append(0),r.append(t),2;if(t<=47)return r.append(1),r.append(t-33),2;if(t<=64)return r.append(1),r.append(t-58+15),2;if(t>=91&&t<=95)return r.append(1),r.append(t-91+22),2;if(t===96)return r.append(2),r.append(0),2;if(t<=90)return r.append(2),r.append(t-65+1),2;if(t<=127)return r.append(2),r.append(t-123+27),2;r.append("1");var i=2;return i+=this.encodeChar(t-128,r),i},e}(ib),Il=function(){function n(){}return n.randomize253State=function(e){var t=149*e%253+1,r=G4+t;return r<=254?r:r-254},n.encodeHighLevel=function(e,t,r,i,a){t===void 0&&(t=0),r===void 0&&(r=null),i===void 0&&(i=null),a===void 0&&(a=!1);var o=new ib,s=[new LV,o,new WV,new qV,new MV,new PV],c=new zV(e);c.setSymbolShape(t),c.setSizeConstraints(r,i),e.startsWith(Y4)&&e.endsWith(K4)?(c.writeCodeword(TV),c.setSkipAtEnd(2),c.pos+=Y4.length):e.startsWith(X4)&&e.endsWith(K4)&&(c.writeCodeword(RV),c.setSkipAtEnd(2),c.pos+=X4.length);var f=xr;for(a&&(o.encodeMaximal(c),f=c.getNewEncoding(),c.resetEncoderSignal());c.hasMoreCharacters();)s[f].encode(c),c.getNewEncoding()>=0&&(f=c.getNewEncoding(),c.resetEncoderSignal());var d=c.getCodewordCount();c.updateSymbolInfo();var p=c.getSymbolInfo().getDataCapacity();d<p&&f!==xr&&f!==lo&&f!==ga&&c.writeCodeword("");var g=c.getCodewords();for(g.length()<p&&g.append(G4);g.length()<p;)g.append(this.randomize253State(g.length()+1));return c.getCodewords().toString()},n.lookAheadTest=function(e,t,r){var i=this.lookAheadTestIntern(e,t,r);if(r===Zi&&i===Zi){for(var a=Math.min(t+3,e.length),o=t;o<a;o++)if(!this.isNativeX12(e.charCodeAt(o)))return xr}else if(r===ga&&i===ga){for(var a=Math.min(t+4,e.length),o=t;o<a;o++)if(!this.isNativeEDIFACT(e.charCodeAt(o)))return xr}return i},n.lookAheadTestIntern=function(e,t,r){if(t>=e.length)return r;var i;r===xr?i=[0,1,1,1,1,1.25]:(i=[1,2,2,2,2,2.25],i[r]=0);for(var a=0,o=new Uint8Array(6),s=[];;){if(t+a===e.length){ta.fill(o,0),ta.fill(s,0);var c=this.findMinimums(i,s,Nn.MAX_VALUE,o),f=this.getMinimumCount(o);if(s[xr]===c)return xr;if(f===1){if(o[lo]>0)return lo;if(o[ga]>0)return ga;if(o[To]>0)return To;if(o[Zi]>0)return Zi}return Pa}var d=e.charCodeAt(t+a);if(a++,this.isDigit(d)?i[xr]+=.5:this.isExtendedASCII(d)?(i[xr]=Math.ceil(i[xr]),i[xr]+=2):(i[xr]=Math.ceil(i[xr]),i[xr]++),this.isNativeC40(d)?i[Pa]+=2/3:this.isExtendedASCII(d)?i[Pa]+=8/3:i[Pa]+=4/3,this.isNativeText(d)?i[To]+=2/3:this.isExtendedASCII(d)?i[To]+=8/3:i[To]+=4/3,this.isNativeX12(d)?i[Zi]+=2/3:this.isExtendedASCII(d)?i[Zi]+=13/3:i[Zi]+=10/3,this.isNativeEDIFACT(d)?i[ga]+=3/4:this.isExtendedASCII(d)?i[ga]+=17/4:i[ga]+=13/4,this.isSpecialB256(d)?i[lo]+=4:i[lo]++,a>=4){if(ta.fill(o,0),ta.fill(s,0),this.findMinimums(i,s,Nn.MAX_VALUE,o),s[xr]<this.min(s[lo],s[Pa],s[To],s[Zi],s[ga]))return xr;if(s[lo]<s[xr]||s[lo]+1<this.min(s[Pa],s[To],s[Zi],s[ga]))return lo;if(s[ga]+1<this.min(s[lo],s[Pa],s[To],s[Zi],s[xr]))return ga;if(s[To]+1<this.min(s[lo],s[Pa],s[ga],s[Zi],s[xr]))return To;if(s[Zi]+1<this.min(s[lo],s[Pa],s[ga],s[To],s[xr]))return Zi;if(s[Pa]+1<this.min(s[xr],s[lo],s[ga],s[To])){if(s[Pa]<s[Zi])return Pa;if(s[Pa]===s[Zi]){for(var p=t+a+1;p<e.length;){var g=e.charCodeAt(p);if(this.isX12TermSep(g))return Zi;if(!this.isNativeX12(g))break;p++}return Pa}}}}},n.min=function(e,t,r,i,a){var o=Math.min(e,Math.min(t,Math.min(r,i)));return a===void 0?o:Math.min(o,a)},n.findMinimums=function(e,t,r,i){for(var a=0;a<6;a++){var o=t[a]=Math.ceil(e[a]);r>o&&(r=o,ta.fill(i,0)),r===o&&(i[a]=i[a]+1)}return r},n.getMinimumCount=function(e){for(var t=0,r=0;r<6;r++)t+=e[r];return t||0},n.isDigit=function(e){return e>=48&&e<=57},n.isExtendedASCII=function(e){return e>=128&&e<=255},n.isNativeC40=function(e){return e===32||e>=48&&e<=57||e>=65&&e<=90},n.isNativeText=function(e){return e===32||e>=48&&e<=57||e>=97&&e<=122},n.isNativeX12=function(e){return this.isX12TermSep(e)||e===32||e>=48&&e<=57||e>=65&&e<=90},n.isX12TermSep=function(e){return e===13||e===42||e===62},n.isNativeEDIFACT=function(e){return e>=32&&e<=94},n.isSpecialB256=function(e){return!1},n.determineConsecutiveDigitCount=function(e,t){t===void 0&&(t=0);for(var r=e.length,i=t;i<r&&this.isDigit(e.charCodeAt(i));)i++;return i-t},n.illegalCharacter=function(e){var t=Nn.toHexString(e.charCodeAt(0));throw t="0000".substring(0,4-t.length)+t,new Error("Illegal character: "+e+" (0x"+t+")")},n}(),ey=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Q4=function(){function n(e){this.charset=e,this.name=e.name}return n.prototype.canEncode=function(e){try{return Ys.encode(e,this.charset)!=null}catch{return!1}},n}(),$V=function(){function n(e,t,r){var i,a,o,s,c,f;this.ENCODERS=["IBM437","ISO-8859-2","ISO-8859-3","ISO-8859-4","ISO-8859-5","ISO-8859-6","ISO-8859-7","ISO-8859-8","ISO-8859-9","ISO-8859-10","ISO-8859-11","ISO-8859-13","ISO-8859-14","ISO-8859-15","ISO-8859-16","windows-1250","windows-1251","windows-1252","windows-1256","Shift_JIS"].map(function(T){return new Q4(_V.forName(T))}),this.encoders=[];var d=[];d.push(new Q4(AV.ISO_8859_1));for(var p=t!=null&&t.name.startsWith("UTF"),g=0;g<e.length;g++){var m=!1;try{for(var x=(i=void 0,ey(d)),_=x.next();!_.done;_=x.next()){var C=_.value,S=e.charAt(g),k=S.charCodeAt(0);if(k===r||C.canEncode(S)){m=!0;break}}}catch(T){i={error:T}}finally{try{_&&!_.done&&(a=x.return)&&a.call(x)}finally{if(i)throw i.error}}if(!m)try{for(var M=(o=void 0,ey(this.ENCODERS)),P=M.next();!P.done;P=M.next()){var C=P.value;if(C.canEncode(e.charAt(g))){d.push(C),m=!0;break}}}catch(T){o={error:T}}finally{try{P&&!P.done&&(s=M.return)&&s.call(M)}finally{if(o)throw o.error}}m||(p=!0)}if(d.length===1&&!p)this.encoders=[d[0]];else{this.encoders=[];var Y=0;try{for(var z=ey(d),F=z.next();!F.done;F=z.next()){var C=F.value;this.encoders[Y++]=C}}catch(T){c={error:T}}finally{try{F&&!F.done&&(f=z.return)&&f.call(z)}finally{if(c)throw c.error}}}var I=-1;if(t!=null){for(var g=0;g<this.encoders.length;g++)if(this.encoders[g]!=null&&t.name===this.encoders[g].name){I=g;break}}this.priorityEncoderIndex=I}return n.prototype.length=function(){return this.encoders.length},n.prototype.getCharsetName=function(e){if(!(e<this.length()))throw new Error("index must be less than length");return this.encoders[e].name},n.prototype.getCharset=function(e){if(!(e<this.length()))throw new Error("index must be less than length");return this.encoders[e].charset},n.prototype.getECIValue=function(e){return this.encoders[e].charset.getValueIdentifier()},n.prototype.getPriorityEncoderIndex=function(){return this.priorityEncoderIndex},n.prototype.canEncode=function(e,t){if(!(t<this.length()))throw new Error("index must be less than length");return!0},n.prototype.encode=function(e,t){if(!(t<this.length()))throw new Error("index must be less than length");return Ys.encode(Yn.getCharAt(e),this.encoders[t].name)},n}(),GV=3,YV=function(){function n(e,t,r){this.fnc1=r;var i=new $V(e,t,r);if(i.length()===1)for(var a=0;a<this.bytes.length;a++){var o=e.charAt(a).charCodeAt(0);this.bytes[a]=o===r?1e3:o}else this.bytes=this.encodeMinimally(e,i,r)}return n.prototype.getFNC1Character=function(){return this.fnc1},n.prototype.length=function(){return this.bytes.length},n.prototype.haveNCharacters=function(e,t){if(e+t-1>=this.bytes.length)return!1;for(var r=0;r<t;r++)if(this.isECI(e+r))return!1;return!0},n.prototype.charAt=function(e){if(e<0||e>=this.length())throw new Error(""+e);if(this.isECI(e))throw new Error("value at "+e+" is not a character but an ECI");return this.isFNC1(e)?this.fnc1:this.bytes[e]},n.prototype.subSequence=function(e,t){if(e<0||e>t||t>this.length())throw new Error(""+e);for(var r=new En,i=e;i<t;i++){if(this.isECI(i))throw new Error("value at "+i+" is not a character but an ECI");r.append(this.charAt(i))}return r.toString()},n.prototype.isECI=function(e){if(e<0||e>=this.length())throw new Error(""+e);return this.bytes[e]>255&&this.bytes[e]<=999},n.prototype.isFNC1=function(e){if(e<0||e>=this.length())throw new Error(""+e);return this.bytes[e]===1e3},n.prototype.getECIValue=function(e){if(e<0||e>=this.length())throw new Error(""+e);if(!this.isECI(e))throw new Error("value at "+e+" is not an ECI but a character");return this.bytes[e]-256},n.prototype.addEdge=function(e,t,r){(e[t][r.encoderIndex]==null||e[t][r.encoderIndex].cachedTotalSize>r.cachedTotalSize)&&(e[t][r.encoderIndex]=r)},n.prototype.addEdges=function(e,t,r,i,a,o){var s=e.charAt(i).charCodeAt(0),c=0,f=t.length();t.getPriorityEncoderIndex()>=0&&(s===o||t.canEncode(s,t.getPriorityEncoderIndex()))&&(c=t.getPriorityEncoderIndex(),f=c+1);for(var d=c;d<f;d++)(s===o||t.canEncode(s,d))&&this.addEdge(r,i+1,new Z4(s,t,d,a,o))},n.prototype.encodeMinimally=function(e,t,r){var i=e.length,a=new Z4[i+1][t.length()];this.addEdges(e,t,a,0,null,r);for(var o=1;o<=i;o++){for(var s=0;s<t.length();s++)a[o][s]!=null&&o<i&&this.addEdges(e,t,a,o,a[o][s],r);for(var s=0;s<t.length();s++)a[o-1][s]=null}for(var c=-1,f=Nn.MAX_VALUE,s=0;s<t.length();s++)if(a[i][s]!=null){var d=a[i][s];d.cachedTotalSize<f&&(f=d.cachedTotalSize,c=s)}if(c<0)throw new Error('Failed to encode "'+e+'"');for(var p=[],g=a[i][c];g!=null;){if(g.isFNC1())p.unshift(1e3);else for(var m=t.encode(g.c,g.encoderIndex),o=m.length-1;o>=0;o--)p.unshift(m[o]&255);var x=g.previous===null?0:g.previous.encoderIndex;x!==g.encoderIndex&&p.unshift(256+t.getECIValue(g.encoderIndex)),g=g.previous}for(var _=[],o=0;o<_.length;o++)_[o]=p[o];return _},n}(),Z4=function(){function n(e,t,r,i,a){this.c=e,this.encoderSet=t,this.encoderIndex=r,this.previous=i,this.fnc1=a,this.c=e===a?1e3:e;var o=this.isFNC1()?1:t.encode(e,r).length,s=i===null?0:i.encoderIndex;s!==r&&(o+=GV),i!=null&&(o+=i.cachedTotalSize),this.cachedTotalSize=o}return n.prototype.isFNC1=function(){return this.c===1e3},n}(),XV=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();var J4;(function(n){n[n.ASCII=0]="ASCII",n[n.C40=1]="C40",n[n.TEXT=2]="TEXT",n[n.X12=3]="X12",n[n.EDF=4]="EDF",n[n.B256=5]="B256"})(J4||(J4={}));(function(n){XV(e,n);function e(t,r,i,a,o){var s=n.call(this,t,r,i)||this;return s.shape=a,s.macroId=o,s}return e.prototype.getMacroId=function(){return this.macroId},e.prototype.getShapeHint=function(){return this.shape},e})(YV);var KV=function(){function n(){}return n.prototype.isCompact=function(){return this.compact},n.prototype.setCompact=function(e){this.compact=e},n.prototype.getSize=function(){return this.size},n.prototype.setSize=function(e){this.size=e},n.prototype.getLayers=function(){return this.layers},n.prototype.setLayers=function(e){this.layers=e},n.prototype.getCodeWords=function(){return this.codeWords},n.prototype.setCodeWords=function(e){this.codeWords=e},n.prototype.getMatrix=function(){return this.matrix},n.prototype.setMatrix=function(e){this.matrix=e},n}(),e6=function(){function n(){}return n.singletonList=function(e){return[e]},n.min=function(e,t){return e.sort(t)[0]},n}(),QV=function(){function n(e){this.previous=e}return n.prototype.getPrevious=function(){return this.previous},n}(),ZV=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),ab=function(n){ZV(e,n);function e(t,r,i){var a=n.call(this,t)||this;return a.value=r,a.bitCount=i,a}return e.prototype.appendTo=function(t,r){t.appendBits(this.value,this.bitCount)},e.prototype.add=function(t,r){return new e(this,t,r)},e.prototype.addBinaryShift=function(t,r){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new e(this,t,r)},e.prototype.toString=function(){var t=this.value&(1<<this.bitCount)-1;return t|=1<<this.bitCount,"<"+Nn.toBinaryString(t|1<<this.bitCount).substring(1)+">"},e}(QV),JV=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),eq=function(n){JV(e,n);function e(t,r,i){var a=n.call(this,t,0,0)||this;return a.binaryShiftStart=r,a.binaryShiftByteCount=i,a}return e.prototype.appendTo=function(t,r){for(var i=0;i<this.binaryShiftByteCount;i++)(i===0||i===31&&this.binaryShiftByteCount<=62)&&(t.appendBits(31,5),this.binaryShiftByteCount>62?t.appendBits(this.binaryShiftByteCount-31,16):i===0?t.appendBits(Math.min(this.binaryShiftByteCount,31),5):t.appendBits(this.binaryShiftByteCount-31,5)),t.appendBits(r[this.binaryShiftStart+i],8)},e.prototype.addBinaryShift=function(t,r){return new e(this,t,r)},e.prototype.toString=function(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"},e}(ab);function tq(n,e,t){return new eq(n,e,t)}function U0(n,e,t){return new ab(n,e,t)}var nq=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],ff=0,hm=1,Ws=2,wC=3,ec=4,rq=new ab(null,0,0),ty=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])],iq=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};function aq(n){var e,t;try{for(var r=iq(n),i=r.next();!i.done;i=r.next()){var a=i.value;ta.fill(a,-1)}}catch(o){e={error:o}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}return n[ff][ec]=0,n[hm][ec]=0,n[hm][ff]=28,n[wC][ec]=0,n[Ws][ec]=0,n[Ws][ff]=15,n}var _C=aq(ta.createInt32Array(6,6)),oq=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},sq=function(){function n(e,t,r,i){this.token=e,this.mode=t,this.binaryShiftByteCount=r,this.bitCount=i}return n.prototype.getMode=function(){return this.mode},n.prototype.getToken=function(){return this.token},n.prototype.getBinaryShiftByteCount=function(){return this.binaryShiftByteCount},n.prototype.getBitCount=function(){return this.bitCount},n.prototype.latchAndAppend=function(e,t){var r=this.bitCount,i=this.token;if(e!==this.mode){var a=ty[this.mode][e];i=U0(i,a&65535,a>>16),r+=a>>16}var o=e===Ws?4:5;return i=U0(i,t,o),new n(i,e,0,r+o)},n.prototype.shiftAndAppend=function(e,t){var r=this.token,i=this.mode===Ws?4:5;return r=U0(r,_C[this.mode][e],i),r=U0(r,t,5),new n(r,this.mode,0,this.bitCount+i+5)},n.prototype.addBinaryShiftChar=function(e){var t=this.token,r=this.mode,i=this.bitCount;if(this.mode===ec||this.mode===Ws){var a=ty[r][ff];t=U0(t,a&65535,a>>16),i+=a>>16,r=ff}var o=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,s=new n(t,r,this.binaryShiftByteCount+1,i+o);return s.binaryShiftByteCount===2078&&(s=s.endBinaryShift(e+1)),s},n.prototype.endBinaryShift=function(e){if(this.binaryShiftByteCount===0)return this;var t=this.token;return t=tq(t,e-this.binaryShiftByteCount,this.binaryShiftByteCount),new n(t,this.mode,0,this.bitCount)},n.prototype.isBetterThanOrEqualTo=function(e){var t=this.bitCount+(ty[this.mode][e.mode]>>16);return this.binaryShiftByteCount<e.binaryShiftByteCount?t+=n.calculateBinaryShiftCost(e)-n.calculateBinaryShiftCost(this):this.binaryShiftByteCount>e.binaryShiftByteCount&&e.binaryShiftByteCount>0&&(t+=10),t<=e.bitCount},n.prototype.toBitArray=function(e){for(var t,r,i=[],a=this.endBinaryShift(e.length).token;a!==null;a=a.getPrevious())i.unshift(a);var o=new xa;try{for(var s=oq(i),c=s.next();!c.done;c=s.next()){var f=c.value;f.appendTo(o,e)}}catch(d){t={error:d}}finally{try{c&&!c.done&&(r=s.return)&&r.call(s)}finally{if(t)throw t.error}}return o},n.prototype.toString=function(){return Yn.format("%s bits=%d bytes=%d",nq[this.mode],this.bitCount,this.binaryShiftByteCount)},n.calculateBinaryShiftCost=function(e){return e.binaryShiftByteCount>62?21:e.binaryShiftByteCount>31?20:e.binaryShiftByteCount>0?10:0},n.INITIAL_STATE=new n(rq,ff,0,0),n}();function lq(n){var e=Yn.getCharCode(" "),t=Yn.getCharCode("."),r=Yn.getCharCode(",");n[ff][e]=1;for(var i=Yn.getCharCode("Z"),a=Yn.getCharCode("A"),o=a;o<=i;o++)n[ff][o]=o-a+2;n[hm][e]=1;for(var s=Yn.getCharCode("z"),c=Yn.getCharCode("a"),o=c;o<=s;o++)n[hm][o]=o-c+2;n[Ws][e]=1;for(var f=Yn.getCharCode("9"),d=Yn.getCharCode("0"),o=d;o<=f;o++)n[Ws][o]=o-d+2;n[Ws][r]=12,n[Ws][t]=13;for(var p=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""],g=0;g<p.length;g++)n[wC][Yn.getCharCode(p[g])]=g;for(var m=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"],g=0;g<m.length;g++)Yn.getCharCode(m[g])>0&&(n[ec][Yn.getCharCode(m[g])]=g);return n}var ny=lq(ta.createInt32Array(5,256)),cg=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},cq=function(){function n(e){this.text=e}return n.prototype.encode=function(){for(var e=Yn.getCharCode(" "),t=Yn.getCharCode(`
`),r=e6.singletonList(sq.INITIAL_STATE),i=0;i<this.text.length;i++){var a=void 0,o=i+1<this.text.length?this.text[i+1]:0;switch(this.text[i]){case Yn.getCharCode("\r"):a=o===t?2:0;break;case Yn.getCharCode("."):a=o===e?3:0;break;case Yn.getCharCode(","):a=o===e?4:0;break;case Yn.getCharCode(":"):a=o===e?5:0;break;default:a=0}a>0?(r=n.updateStateListForPair(r,i,a),i++):r=this.updateStateListForChar(r,i)}var s=e6.min(r,function(c,f){return c.getBitCount()-f.getBitCount()});return s.toBitArray(this.text)},n.prototype.updateStateListForChar=function(e,t){var r,i,a=[];try{for(var o=cg(e),s=o.next();!s.done;s=o.next()){var c=s.value;this.updateStateForChar(c,t,a)}}catch(f){r={error:f}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}return n.simplifyStates(a)},n.prototype.updateStateForChar=function(e,t,r){for(var i=this.text[t]&255,a=ny[e.getMode()][i]>0,o=null,s=0;s<=ec;s++){var c=ny[s][i];if(c>0){if(o==null&&(o=e.endBinaryShift(t)),!a||s===e.getMode()||s===Ws){var f=o.latchAndAppend(s,c);r.push(f)}if(!a&&_C[e.getMode()][s]>=0){var d=o.shiftAndAppend(s,c);r.push(d)}}}if(e.getBinaryShiftByteCount()>0||ny[e.getMode()][i]===0){var p=e.addBinaryShiftChar(t);r.push(p)}},n.updateStateListForPair=function(e,t,r){var i,a,o=[];try{for(var s=cg(e),c=s.next();!c.done;c=s.next()){var f=c.value;this.updateStateForPair(f,t,r,o)}}catch(d){i={error:d}}finally{try{c&&!c.done&&(a=s.return)&&a.call(s)}finally{if(i)throw i.error}}return this.simplifyStates(o)},n.updateStateForPair=function(e,t,r,i){var a=e.endBinaryShift(t);if(i.push(a.latchAndAppend(ec,r)),e.getMode()!==ec&&i.push(a.shiftAndAppend(ec,r)),r===3||r===4){var o=a.latchAndAppend(Ws,16-r).latchAndAppend(Ws,1);i.push(o)}if(e.getBinaryShiftByteCount()>0){var s=e.addBinaryShiftChar(t).addBinaryShiftChar(t+1);i.push(s)}},n.simplifyStates=function(e){var t,r,i,a,o=[];try{for(var s=cg(e),c=s.next();!c.done;c=s.next()){var f=c.value,d=!0,p=function(C){if(C.isBetterThanOrEqualTo(f))return d=!1,"break";f.isBetterThanOrEqualTo(C)&&(o=o.filter(function(S){return S!==C}))};try{for(var g=(i=void 0,cg(o)),m=g.next();!m.done;m=g.next()){var x=m.value,_=p(x);if(_==="break")break}}catch(C){i={error:C}}finally{try{m&&!m.done&&(a=g.return)&&a.call(g)}finally{if(i)throw i.error}}d&&o.push(f)}}catch(C){t={error:C}}finally{try{c&&!c.done&&(r=s.return)&&r.call(s)}finally{if(t)throw t.error}}return o},n}(),uq=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};(function(){function n(){}return n.encodeBytes=function(e){return n.encode(e,n.DEFAULT_EC_PERCENT,n.DEFAULT_AZTEC_LAYERS)},n.encode=function(e,t,r){var i=new cq(e).encode(),a=Nn.truncDivision(i.getSize()*t,100)+11,o=i.getSize()+a,s,c,f,d,p;if(r!==n.DEFAULT_AZTEC_LAYERS){if(s=r<0,c=Math.abs(r),c>(s?n.MAX_NB_BITS_COMPACT:n.MAX_NB_BITS))throw new Xt(Yn.format("Illegal value %s for layers",r));f=n.totalBitsInLayer(c,s),d=n.WORD_SIZE[c];var g=f-f%d;if(p=n.stuffBits(i,d),p.getSize()+a>g)throw new Xt("Data to large for user specified layer");if(s&&p.getSize()>d*64)throw new Xt("Data to large for user specified layer")}else{d=0,p=null;for(var m=0;;m++){if(m>n.MAX_NB_BITS)throw new Xt("Data too large for an Aztec code");if(s=m<=3,c=s?m+1:m,f=n.totalBitsInLayer(c,s),!(o>f)){(p==null||d!==n.WORD_SIZE[c])&&(d=n.WORD_SIZE[c],p=n.stuffBits(i,d));var g=f-f%d;if(!(s&&p.getSize()>d*64)&&p.getSize()+a<=g)break}}}var x=n.generateCheckWords(p,f,d),_=p.getSize()/d,C=n.generateModeMessage(s,c,_),S=(s?11:14)+c*4,k=new Int32Array(S),M;if(s){M=S;for(var m=0;m<k.length;m++)k[m]=m}else{M=S+1+2*Nn.truncDivision(Nn.truncDivision(S,2)-1,15);for(var P=Nn.truncDivision(S,2),Y=Nn.truncDivision(M,2),m=0;m<P;m++){var z=m+Nn.truncDivision(m,15);k[P-m-1]=Y-z-1,k[P+m]=Y+z+1}}for(var F=new fc(M),m=0,I=0;m<c;m++){for(var T=(c-m)*4+(s?9:12),j=0;j<T;j++)for(var N=j*2,R=0;R<2;R++)x.get(I+N+R)&&F.set(k[m*2+R],k[m*2+j]),x.get(I+T*2+N+R)&&F.set(k[m*2+j],k[S-1-m*2-R]),x.get(I+T*4+N+R)&&F.set(k[S-1-m*2-R],k[S-1-m*2-j]),x.get(I+T*6+N+R)&&F.set(k[S-1-m*2-j],k[m*2+R]);I+=T*8}if(n.drawModeMessage(F,s,M,C),s)n.drawBullsEye(F,Nn.truncDivision(M,2),5);else{n.drawBullsEye(F,Nn.truncDivision(M,2),7);for(var m=0,j=0;m<Nn.truncDivision(S,2)-1;m+=15,j+=16)for(var R=Nn.truncDivision(M,2)&1;R<M;R+=2)F.set(Nn.truncDivision(M,2)-j,R),F.set(Nn.truncDivision(M,2)+j,R),F.set(R,Nn.truncDivision(M,2)-j),F.set(R,Nn.truncDivision(M,2)+j)}var D=new KV;return D.setCompact(s),D.setSize(M),D.setLayers(c),D.setCodeWords(_),D.setMatrix(F),D},n.drawBullsEye=function(e,t,r){for(var i=0;i<r;i+=2)for(var a=t-i;a<=t+i;a++)e.set(a,t-i),e.set(a,t+i),e.set(t-i,a),e.set(t+i,a);e.set(t-r,t-r),e.set(t-r+1,t-r),e.set(t-r,t-r+1),e.set(t+r,t-r),e.set(t+r,t-r+1),e.set(t+r,t+r-1)},n.generateModeMessage=function(e,t,r){var i=new xa;return e?(i.appendBits(t-1,2),i.appendBits(r-1,6),i=n.generateCheckWords(i,28,4)):(i.appendBits(t-1,5),i.appendBits(r-1,11),i=n.generateCheckWords(i,40,4)),i},n.drawModeMessage=function(e,t,r,i){var a=Nn.truncDivision(r,2);if(t)for(var o=0;o<7;o++){var s=a-3+o;i.get(o)&&e.set(s,a-5),i.get(o+7)&&e.set(a+5,s),i.get(20-o)&&e.set(s,a+5),i.get(27-o)&&e.set(a-5,s)}else for(var o=0;o<10;o++){var s=a-5+o+Nn.truncDivision(o,5);i.get(o)&&e.set(s,a-7),i.get(o+10)&&e.set(a+7,s),i.get(29-o)&&e.set(s,a+7),i.get(39-o)&&e.set(a-7,s)}},n.generateCheckWords=function(e,t,r){var i,a,o=e.getSize()/r,s=new xC(n.getGF(r)),c=Nn.truncDivision(t,r),f=n.bitsToWords(e,r,c);s.encode(f,c-o);var d=t%r,p=new xa;p.appendBits(0,d);try{for(var g=uq(Array.from(f)),m=g.next();!m.done;m=g.next()){var x=m.value;p.appendBits(x,r)}}catch(_){i={error:_}}finally{try{m&&!m.done&&(a=g.return)&&a.call(g)}finally{if(i)throw i.error}}return p},n.bitsToWords=function(e,t,r){var i=new Int32Array(r),a,o;for(a=0,o=e.getSize()/t;a<o;a++){for(var s=0,c=0;c<t;c++)s|=e.get(a*t+c)?1<<t-c-1:0;i[a]=s}return i},n.getGF=function(e){switch(e){case 4:return Yo.AZTEC_PARAM;case 6:return Yo.AZTEC_DATA_6;case 8:return Yo.AZTEC_DATA_8;case 10:return Yo.AZTEC_DATA_10;case 12:return Yo.AZTEC_DATA_12;default:throw new Xt("Unsupported word size "+e)}},n.stuffBits=function(e,t){for(var r=new xa,i=e.getSize(),a=(1<<t)-2,o=0;o<i;o+=t){for(var s=0,c=0;c<t;c++)(o+c>=i||e.get(o+c))&&(s|=1<<t-1-c);(s&a)===a?(r.appendBits(s&a,t),o--):(s&a)===0?(r.appendBits(s|1,t),o--):r.appendBits(s,t)}return r},n.totalBitsInLayer=function(e,t){return((t?88:112)+16*e)*e},n.DEFAULT_EC_PERCENT=33,n.DEFAULT_AZTEC_LAYERS=0,n.MAX_NB_BITS=32,n.MAX_NB_BITS_COMPACT=4,n.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]),n})();const fq=({onScanSuccess:n,onClose:e})=>{const t=le.useRef(null),r=le.useRef(null);return le.useEffect(()=>{const i=new dV;return r.current=i,i.decodeFromVideoDevice(null,t.current,a=>{a&&(i.reset(),n(a.getText()))}),()=>{try{i.reset()}catch{}}},[n]),v.jsxs("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"#000000e6",zIndex:9999,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:[v.jsx("video",{ref:t,style:{width:"90%",maxWidth:"500px",borderRadius:"12px",border:"3px solid white"},muted:!0,autoPlay:!0,playsInline:!0}),v.jsx("button",{onClick:()=>{var i;(i=r.current)==null||i.reset(),e()},style:{marginTop:"1rem",padding:"10px 20px",backgroundColor:"#dc3545",color:"#fff",border:"none",borderRadius:"6px",fontSize:"16px",cursor:"pointer"},children:" "})]})};function dq(n){const e=[...new Set(n)].sort((t,r)=>t-r);for(let t=1;t<=e.length+1;t++)if(!e.includes(t))return t}async function hq(n,e=""){const t=rr(wt,"items",n),r=await Ph(t);if(!r.exists())throw new Error("Item not found");const{ItemId:i,...a}=r.data();await dd(hn(wt,"deletedItems"),{...a,deletedAt:kr(),deletedBy:e}),await $h(t)}async function pq(n,e=""){const t=rr(wt,"deletedItems",n),r=await Ph(t);if(!r.exists())throw new Error("Deleted item not found");const i=r.data(),o=(await nr(hn(wt,"items"))).docs.map(c=>c.data().ItemId).filter(c=>typeof c=="number"),s=dq(o);await q5(rr(hn(wt,"items")),{...i,ItemId:s,createdAt:kr(),updatedAt:kr(),createdBy:e,updatedBy:e,isActive:!0}),await $h(t)}async function gq(n){const e=Nl(hn(wt,"items"),ru("ItemId","==",Number(n))),t=await nr(e);if(!t.empty){const r=t.docs[0];return{id:r.id,...r.data()}}throw new Error("     ")}const mq=({item:n,onConfirm:e,onCancel:t})=>{const[r,i]=le.useState(1),a=r>=1&&r<=n.quantity;return v.jsx("div",{className:"modal-overlay",children:v.jsxs("div",{className:"modal-box",dir:"rtl",children:[v.jsx("h3",{style:{textAlign:"center"},children:n.name}),v.jsx("img",{src:n.imageUrl,alt:n.name,style:{width:"100%",maxHeight:"200px",objectFit:"cover"}}),v.jsxs("p",{children:[" : ",n.ItemId]}),v.jsxs("p",{children:[" : ",n.quantity]}),v.jsxs("div",{style:{marginTop:"1rem"},children:[v.jsx("label",{children:" :"}),v.jsx("input",{type:"number",value:r,min:1,max:n.quantity,onChange:o=>i(+o.target.value),style:{width:"100%",padding:"10px",marginTop:"0.5rem",border:a?"1px solid #ccc":"2px solid red"}}),!a&&v.jsxs("p",{style:{color:"red",marginTop:"0.5rem"},children:["  .    1 ",n.quantity]})]}),v.jsxs("div",{style:{marginTop:"1.5rem",display:"flex",justifyContent:"space-between"},children:[v.jsx("button",{className:"btn btn-red",onClick:t,children:""}),v.jsx("button",{className:"btn btn-green",onClick:()=>e(r),disabled:!a,children:""})]})]})})},vq=({currentPage:n,totalItems:e,itemsPerPage:t,onPageChange:r,className:i=""})=>{const a=Math.ceil(e/t),o=window.innerWidth<=768;if(a<=1)return null;const c=(()=>{const p=o?5:7,g=Math.floor(p/2);let m=Math.max(1,n-g),x=Math.min(a,m+p-1);x-m+1<p&&(m=Math.max(1,x-p+1));const _=[];m>1&&(_.push(1),m>2&&_.push("..."));for(let C=m;C<=x;C++)_.push(C);return x<a&&(x<a-1&&_.push("..."),_.push(a)),_})(),f=(n-1)*t+1,d=Math.min(n*t,e);return v.jsxs("div",{className:`pagination-container ${i}`,style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"1rem",margin:"1.5rem 0",direction:"rtl"},children:[v.jsxs("div",{style:{fontSize:o?"0.875rem":"1rem",color:"#6b7280",textAlign:"center"},children:[" ",f,"-",d,"  ",e," "]}),v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:o?"0.25rem":"0.5rem",flexWrap:"wrap",justifyContent:"center"},children:[v.jsx("button",{onClick:()=>r(n-1),disabled:n===1,style:{display:"flex",alignItems:"center",justifyContent:"center",width:o?"36px":"40px",height:o?"36px":"40px",border:"1px solid #d1d5db",borderRadius:"8px",background:n===1?"#f9fafb":"white",color:n===1?"#9ca3af":"#374151",cursor:n===1?"not-allowed":"pointer",transition:"all 0.2s ease"},children:v.jsx(W1,{size:o?16:20})}),c.map((p,g)=>{if(p==="...")return v.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",width:o?"36px":"40px",height:o?"36px":"40px",color:"#9ca3af"},children:v.jsx(X5,{size:o?16:20})},`dots-${g}`);const m=p===n;return v.jsx("button",{onClick:()=>r(p),style:{display:"flex",alignItems:"center",justifyContent:"center",width:o?"36px":"40px",height:o?"36px":"40px",border:m?"2px solid #3b82f6":"1px solid #d1d5db",borderRadius:"8px",background:m?"#3b82f6":"white",color:m?"white":"#374151",cursor:"pointer",transition:"all 0.2s ease",fontWeight:m?"bold":"normal",fontSize:o?"14px":"16px"},children:p},p)}),v.jsx("button",{onClick:()=>r(n+1),disabled:n===a,style:{display:"flex",alignItems:"center",justifyContent:"center",width:o?"36px":"40px",height:o?"36px":"40px",border:"1px solid #d1d5db",borderRadius:"8px",background:n===a?"#f9fafb":"white",color:n===a?"#9ca3af":"#374151",cursor:n===a?"not-allowed":"pointer",transition:"all 0.2s ease"},children:v.jsx(H1,{size:o?16:20})})]})]})},AC=({showCatalogPopup:n,setShowCatalogPopup:e,searchTerm:t,setSearchTerm:r,searchIdTerm:i,setSearchIdTerm:a,availableItems:o,toggleSelectItem:s,changeQty:c,form:f,loadingItems:d,setAvailableItems:p,hideBarcodeScanner:g=!1})=>{const[m,x]=le.useState(!1),[_,C]=le.useState(null),[S,k]=le.useState([]),[M,P]=le.useState(1),[Y,z]=le.useState(window.innerWidth<=768),F=Y?6:8;if(le.useEffect(()=>{const ie=()=>{const $=window.innerWidth<=768;$!==Y&&(z($),P(1))};return window.addEventListener("resize",ie),()=>window.removeEventListener("resize",ie)},[Y]),le.useEffect(()=>{P(1)},[t,i]),le.useEffect(()=>{n&&(console.log(" Modal ,  local state  :",o.length),k([...o]))},[n,o]),!n)return null;const I=async ie=>{console.log("  :",ie);try{const $=await gq(ie);console.log("   :",$);const W=o.find(J=>J.ItemId===$.ItemId||J.id===$.id);if(console.log("    :",W),!W){console.log("        "),alert("     "),x(!1);return}if(S.some(J=>(J.ItemId===$.ItemId||J.id===$.id)&&J.selected)){console.log("    "),alert("   "),x(!1);return}W.quantity>0?(console.log("  ,   "),C(W),x(!1)):(console.log("      "),alert("     "),x(!1))}catch($){console.error("   :",$),alert($.message),x(!1)}},T=ie=>{console.log("    :",ie),k($=>$.map(W=>W.id===ie?{...W,selected:!W.selected,selectedQty:W.selected?0:1}:W))},j=(ie,$)=>{let W=parseInt($)||0;W>ie.quantity&&(W=ie.quantity),W<0&&(W=0),console.log("   ",ie.name,":",W),k(Q=>Q.map(J=>J.id===ie.id?{...J,selectedQty:W,selected:W>0}:J))},N=()=>{console.log("    state ..."),S.forEach(ie=>{const $=o.find(W=>W.id===ie.id);$&&(ie.selected!==$.selected&&s(ie.id),ie.selectedQty!==$.selectedQty&&c(ie.id,ie.selectedQty))})},R=()=>{console.log("    ..."),N(),e(!1)},D=(ie="unknown")=>{console.log("     - :",ie),e(!1)},L=ie=>{ie.target===ie.currentTarget?(console.log("   overlay -  "),D("overlay-click")):console.log("    -  ")},G=t.toLowerCase(),U=i.trim().toLowerCase(),H=S.filter(ie=>ie.name.toLowerCase().includes(G)&&(U===""||String(ie.ItemId||ie.itemId||"").toLowerCase()===U)),te=(M-1)*F,se=te+F,ee=H.slice(te,se);return console.log("  :",{totalItems:S.length,filteredItems:H.length,currentPageItems:ee.length,currentPage:M,itemsPerPage:F}),v.jsxs("div",{className:"modal-overlay",onClick:L,children:[v.jsxs("div",{className:"modal-box",dir:"rtl",onClick:ie=>ie.stopPropagation(),children:[v.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[!g&&v.jsx("button",{style:{width:"180px"},className:"btn btn-gray",onClick:()=>{console.log("   ..."),x(!0)},children:" "}),v.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem",width:g?"100%":"60%"},children:[v.jsx("input",{type:"text",placeholder:"   ...",value:t,onChange:ie=>r(ie.target.value),style:{padding:"8px",border:"1px solid #ccc",borderRadius:"6px"}}),v.jsx("input",{type:"text",placeholder:"    ...",value:i,onChange:ie=>a(ie.target.value),style:{padding:"8px",border:"1px solid #ccc",borderRadius:"6px"}})]})]}),v.jsxs("h3",{style:{textAlign:"center",marginBottom:"1rem"},children:["  (",f.pickupDate,"  ",f.returnDate,")"]}),d?v.jsx("p",{style:{textAlign:"center"},children:" "}):v.jsxs(v.Fragment,{children:[v.jsx("div",{className:"modal-grid",children:ee.length===0?v.jsx("div",{style:{gridColumn:"1 / -1",textAlign:"center",padding:"2rem",color:"#6b7280"},children:t?`    "${t}"`:"   "}):ee.map(ie=>v.jsxs("div",{className:`item-card ${ie.selected?"selected":""}`,children:[v.jsx("img",{src:ie.imageUrl||"/no-image-available.png",alt:ie.name,className:"item-image"}),v.jsx("h4",{children:ie.name}),v.jsxs("p",{children:[": ",ie.quantity]}),v.jsxs("p",{children:[" : ",ie.ItemId]}),v.jsxs("div",{style:{margin:"0.5rem 0"},children:[v.jsx("label",{style:{marginBottom:"0.3rem",display:"block"},children:":"}),v.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"5px"},children:[v.jsx("button",{onClick:()=>j(ie,Math.max(0,ie.selectedQty-1)),disabled:ie.selectedQty<=0,style:{width:"30px",height:"30px",borderRadius:"50%",border:"1px solid #ccc",backgroundColor:ie.selectedQty<=0?"#f5f5f5":"#fff",cursor:ie.selectedQty<=0?"not-allowed":"pointer",fontSize:"16px",fontWeight:"bold",color:ie.selectedQty<=0?"#ccc":"#333"},children:"-"}),v.jsx("input",{type:"number",min:0,max:ie.quantity,value:ie.selectedQty,onChange:$=>j(ie,$.target.value),onBlur:$=>{(parseInt($.target.value)||0)>ie.quantity&&j(ie,ie.quantity)},style:{width:"50px",height:"30px",padding:"5px",textAlign:"center",borderRadius:"6px",border:ie.selectedQty>ie.quantity?"2px solid red":"1px solid #ccc",backgroundColor:ie.selectedQty>0?"#e3f2fd":"#fff",fontSize:"14px",fontWeight:"bold",appearance:"textfield",MozAppearance:"textfield"}}),v.jsx("button",{onClick:()=>j(ie,Math.min(ie.quantity,ie.selectedQty+1)),disabled:ie.selectedQty>=ie.quantity,style:{width:"30px",height:"30px",borderRadius:"50%",border:"1px solid #ccc",backgroundColor:ie.selectedQty>=ie.quantity?"#f5f5f5":"#fff",cursor:ie.selectedQty>=ie.quantity?"not-allowed":"pointer",fontSize:"16px",fontWeight:"bold",color:ie.selectedQty>=ie.quantity?"#ccc":"#333"},children:"+"})]}),ie.selectedQty>ie.quantity&&v.jsxs("div",{style:{color:"red",fontSize:"0.8rem",marginTop:"0.2rem"},children:[": ",ie.quantity]})]}),v.jsx("button",{onClick:()=>T(ie.id),className:`btn ${ie.selected?"btn-red":"btn-blue"}`,style:{width:"100%",marginTop:"0.5rem"},children:ie.selected?"  ":"  "})]},ie.id))}),v.jsx(vq,{currentPage:M,totalItems:H.length,itemsPerPage:F,onPageChange:P})]}),v.jsxs("div",{className:"modal-actions",children:[v.jsx("button",{className:"btn btn-blue",onClick:()=>{console.log("    "),R()},children:" "}),v.jsx("button",{className:"btn btn-gray",onClick:()=>{console.log("    "),D("cancel-button")},children:" "})]})]}),!g&&m&&v.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:1e4,backgroundColor:"rgba(0, 0, 0, 0.8)"},onClick:ie=>{console.log("    "),ie.stopPropagation()},children:v.jsx(fq,{onScanSuccess:I,onClose:()=>{console.log("   "),x(!1)}})}),!g&&_&&v.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:10001,backgroundColor:"rgba(0, 0, 0, 0.7)"},onClick:ie=>{console.log("      "),ie.stopPropagation()},children:v.jsx(mq,{item:_,onCancel:()=>{console.log("   "),C(null),x(!1)},onConfirm:ie=>{console.log("    :",_.name,":",ie),k(W=>{const Q=W.map(J=>J.id===_.id||J.ItemId===_.ItemId?(console.log("   -localItems:",J.name," :",ie),{...J,selected:!0,selectedQty:ie}):J);return console.log(" localItems  :",Q.filter(J=>J.selected)),Q}),C(null),console.log("    ,     ");const $=S.findIndex(W=>W.id===_.id||W.ItemId===_.ItemId);if($>=0){const W=Math.ceil(($+1)/F);console.log("  ",W,"    "),P(W)}}})})]})},SC={async findClientByPhone(n){try{if(console.log("     :",n),!n||n.length<10)return{found:!1};const e=n.replace(/[\s\-]/g,""),t=Nl(hn(wt,"orders"),ru("phone","==",e)),r=await nr(t);if(r.empty)return console.log("      "),{found:!1};const i=r.docs.map(o=>({id:o.id,...o.data()}));i.sort((o,s)=>{var d,p;const c=((d=o.createdAt)==null?void 0:d.seconds)||0;return(((p=s.createdAt)==null?void 0:p.seconds)||0)-c});const a=i[0];return console.log("  :",{clientName:a.clientName,address:a.address,email:a.email}),{found:!0,clientData:{clientName:a.clientName||"",address:a.address||"",email:a.email||""}}}catch(e){return console.error("    :",e),{found:!1}}}},Hc={async getClosedDates(){try{const e=(await nr(hn(wt,"closedDates"))).docs.map(t=>({id:t.id,...t.data()}));return console.log("   :",e.map(t=>({id:t.id,date:t.date}))),e}catch(n){return console.error("    :",n),[]}},async addClosedDate(n,e,t=" "){try{const r=this.formatDateToString(n);if(!r)return console.error("   :",n),!1;console.log(`   : ${r} (: ${n})`);const i=rr(wt,"closedDates",r);return await q5(i,{date:r,reason:t,createdBy:e,createdAt:kr()}),console.log("    :",r),!0}catch(r){return console.error("    :",r),!1}},async removeClosedDate(n){try{const e=this.formatDateToString(n);if(!e)return console.error("   :",n),!1;console.log(`   : ${e} (: ${n})`);const t=rr(wt,"closedDates",e);return await $h(t),console.log("    :",e),!0}catch(e){return console.error("    :",e),!1}},isDateClosed(n,e=null){try{const t=this.formatDateToString(n);if(!t)return console.warn("     :",n),!1;if(e&&Array.isArray(e)){const r=e.some(i=>{const a=i.date||i.id,o=a===t;return o&&console.log(`   : ${a} === ${t}`),o});return console.log(`   ${t} - : ${r}`),r}return console.log(`   ${t} -   `),!1}catch(t){return console.error("    :",t),!1}},formatDateToString(n){try{let e;if(typeof n=="string"){if(n.match(/^\d{4}-\d{2}-\d{2}$/))return console.log(`    : ${n}`),n;e=new Date(n+"T00:00:00")}else if(n instanceof Date)e=new Date(n);else return console.warn("   :",n),"";if(isNaN(e.getTime()))return console.warn("     :",n),"";const t=e.getFullYear(),r=String(e.getMonth()+1).padStart(2,"0"),i=String(e.getDate()).padStart(2,"0"),a=`${t}-${r}-${i}`;return console.log(`  : ${n}  ${a}`),a}catch(e){return console.error("   :",e,n),""}},canCloseDateValidation(n,e=[]){const t=new Date().toISOString().split("T")[0];return this.formatDateToString(n)<t?{valid:!1,reason:"    "}:e&&e.length>0&&e.filter(a=>a.type!==" ").length>0?{valid:!1,reason:"   "}:{valid:!0,reason:" "}},async addMultipleClosedDates(n,e,t=" "){const r={success:[],failed:[]};console.log("    :",n);for(const i of n)try{await this.addClosedDate(i,e,t)?r.success.push(i):r.failed.push(i)}catch(a){console.error(`   ${i}:`,a),r.failed.push(i)}return console.log("   :",r),r},validateOrderDates(n,e,t){const r={};return n&&this.isDateClosed(n,t)&&(r.pickupDate="      "),e&&this.isDateClosed(e,t)&&(r.returnDate="      "),{isValid:Object.keys(r).length===0,errors:r}}},yq=({onOrderCreated:n})=>{const[e,t]=le.useState({volunteerName:"",clientName:"",address:"",phone:"",email:"",eventType:"",pickupDate:"",eventDate:"",returnDate:""}),[r,i]=le.useState({}),[a,o]=le.useState(!1),[s,c]=le.useState([]),[f,d]=le.useState(!1),[p,g]=le.useState(""),[m,x]=le.useState(""),[_,C]=le.useState(!1),[S,k]=le.useState(!1),[M,P]=le.useState([]);le.useEffect(()=>{Y()},[]);const Y=async()=>{try{const R=await Hc.getClosedDates();P(R),console.log("     :",R.length)}catch(R){console.error("    :",R)}},z=async R=>{const{name:D,value:L}=R.target;if(t(G=>({...G,[D]:L})),D==="phone"&&L.length===10&&/^\d{10}$/.test(L)){k(!0);try{const G=await SC.findClientByPhone(L);G.found&&(t(U=>({...U,phone:L,clientName:G.clientData.clientName,address:G.clientData.address,email:G.clientData.email})),alert(`  !   :
: ${G.clientData.clientName}
: ${G.clientData.address}`))}catch(G){console.error("   :",G)}finally{k(!1)}}},F=()=>{const R={},D=new Date().toISOString().split("T")[0],{pickupDate:L,eventDate:G,returnDate:U}=e;e.volunteerName!==void 0&&!e.volunteerName.trim()&&(R.volunteerName=" "),e.clientName.trim()||(R.clientName=" "),e.address.trim()||(R.address=" "),e.phone.trim()?/^\d{10}$/.test(e.phone)||(R.phone="   "):R.phone=" ",e.eventType.trim()||(R.eventType=" "),L||(R.pickupDate=" "),G||(R.eventDate=" "),U||(R.returnDate=" "),L&&L<D&&(R.pickupDate="    "),G&&L&&G<L&&(R.eventDate="      "),U&&L&&U<=L&&(R.returnDate="  ");const H=Hc.validateOrderDates(L,U,M);return H.isValid||Object.assign(R,H.errors),console.log("  :",{pickupDate:L,returnDate:U,closedDatesCount:M.length,validation:H,errors:R}),i(R),Object.keys(R).length===0},I=()=>{window.confirm("      ?")&&(t({volunteerName:"",clientName:"",address:"",phone:"",email:"",eventType:"",pickupDate:"",eventDate:"",returnDate:""}),i({}),c([]),g(""),x(""),o(!1))},T=async()=>{if(!F())return;const D=(await nr(hn(wt,"orders"))).docs.map(U=>U.data().simpleId).filter(U=>typeof U=="number"),L=D.length>0?Math.max(...D)+1:1,G=s.filter(U=>U.selected).map(U=>({id:U.id,ItemId:U.ItemId,name:U.name,quantity:U.selectedQty,imageUrl:U.imageUrl}));C(!0);try{const U=await dd(hn(wt,"orders"),{...e,items:G,status:"open",simpleId:L,createdAt:kr()});await ia(U,{orderId:U.id}),t({volunteerName:"",clientName:"",address:"",phone:"",email:"",eventType:"",pickupDate:"",eventDate:"",returnDate:""}),c([]),g(""),x(""),o(!1),alert(` ! ' : ${L}`),n&&await n()}catch(U){console.error(" :",U),alert("  ")}C(!1)};le.useEffect(()=>{if(!a)return;(async()=>{d(!0);const D=L=>L?L.toDate?L.toDate():typeof L=="string"?new Date(L):L:null;try{const G=(await nr(hn(wt,"items"))).docs.map(W=>({id:W.id,...W.data()})).filter(W=>W.isDeleted!==!0),U=await nr(hn(wt,"orders")),H=D(e.pickupDate),te=D(e.returnDate),se=U.docs.map(W=>W.data()).filter(W=>{const Q=D(W.pickupDate),J=D(W.returnDate);return W.status==="open"&&Q&&J&&H&&te&&J>=H&&Q<=te}),ee={};se.forEach(W=>{var Q;(Q=W.items)==null||Q.forEach(J=>{ee[J.id]=(ee[J.id]||0)+J.quantity})});const ie={};s.forEach(W=>{W.selected&&W.selectedQty>0&&(ie[W.id]={selected:W.selected,selectedQty:W.selectedQty})});const $=G.map(W=>{const Q=(W.quantity||0)-(ee[W.id]||0),J=ie[W.id];return{...W,quantity:Q,selected:J?J.selected:!1,selectedQty:J?J.selectedQty:0}}).filter(W=>W.quantity>0);c($)}catch(L){console.error("  :",L),c([])}d(!1)})()},[a,e.pickupDate,e.returnDate]);const j=R=>{c(D=>D.map(L=>L.id===R?{...L,selected:!L.selected,selectedQty:L.selected?0:1}:L))},N=(R,D)=>{c(L=>L.map(G=>G.id===R?{...G,selected:D>0,selectedQty:D}:G))};return v.jsxs("div",{className:"new-loan-container",children:[v.jsx(EF,{form:e,errors:r,handleChange:z,handleConfirm:T,handleClear:I,setShowCatalogPopup:o,saving:_,isLoadingClientData:S}),v.jsx(AC,{showCatalogPopup:a,setShowCatalogPopup:o,searchTerm:p,setSearchTerm:g,searchIdTerm:m,setSearchIdTerm:x,setAvailableItems:c,availableItems:s,toggleSelectItem:j,changeQty:N,form:e,loadingItems:f})]})},xq=({onRequestSubmitted:n})=>{const{user:e}=Zo(),[t,r]=le.useState({clientName:"",address:"",phone:"",email:"",eventType:"",pickupDate:"",eventDate:"",returnDate:""}),[i,a]=le.useState({}),[o,s]=le.useState(!1),[c,f]=le.useState([]),[d,p]=le.useState(!1),[g,m]=le.useState(""),[x,_]=le.useState(!1),[C,S]=le.useState(!1),[k,M]=le.useState([]);le.useEffect(()=>{P()},[]);const P=async()=>{try{const D=await Hc.getClosedDates();M(D),console.log("     :",D.length)}catch(D){console.error("    :",D)}},Y=le.useCallback(async D=>{const{name:L,value:G}=D.target;if(r(U=>({...U,[L]:G})),L==="phone"&&G.length===10&&/^\d{10}$/.test(G)){S(!0);try{const U=await SC.findClientByPhone(G);U.found&&(r(H=>({...H,phone:G,clientName:U.clientData.clientName,address:U.clientData.address,email:U.clientData.email})),alert(`  !   :
: ${U.clientData.clientName}
: ${U.clientData.address}`))}catch(U){console.error("   :",U)}finally{S(!1)}}},[]),z=()=>{const D={},L=new Date().toISOString().split("T")[0],{pickupDate:G,eventDate:U,returnDate:H}=t;t.volunteerName!==void 0&&!t.volunteerName.trim()&&(D.volunteerName=" "),t.clientName.trim()||(D.clientName=" "),t.address.trim()||(D.address=" "),t.phone.trim()?/^\d{10}$/.test(t.phone)||(D.phone="   "):D.phone=" ",t.eventType.trim()||(D.eventType=" "),G||(D.pickupDate=" "),U||(D.eventDate=" "),H||(D.returnDate=" "),G&&G<L&&(D.pickupDate="    "),U&&G&&U<G&&(D.eventDate="      "),H&&G&&H<=G&&(D.returnDate="  ");const te=Hc.validateOrderDates(G,H,k);return te.isValid||Object.assign(D,te.errors),console.log("  :",{pickupDate:G,returnDate:H,closedDatesCount:k.length,validation:te,errors:D}),a(D),Object.keys(D).length===0},F=()=>{window.confirm("      ?")&&(r({clientName:"",address:"",phone:"",email:"",eventType:"",pickupDate:"",eventDate:"",returnDate:""}),a({}),f([]),m(""),s(!1))},I=async()=>{if(!z())return;const D=c.filter(L=>L.selected).map(L=>({id:L.id,ItemId:L.ItemId,name:L.name,quantity:L.selectedQty,imageUrl:L.imageUrl}));if(D.length===0){alert("    ");return}_(!0);try{await dd(hn(wt,"orderRequests"),{...t,items:D,status:"pending",requestedBy:e.uid,requestedByUsername:e.username,requestedByEmail:e.email,requestedAt:kr(),approvedBy:null,approvedAt:null}),r({clientName:"",address:"",phone:"",email:"",eventType:"",pickupDate:"",eventDate:"",returnDate:""}),f([]),m(""),s(!1),alert("   !     ."),n&&await n()}catch(L){console.error("  :",L),alert("  .   .")}_(!1)},T=Xn.useRef([]);le.useEffect(()=>{if(!o)return;(async()=>{p(!0);const L=G=>G?G.toDate?G.toDate():typeof G=="string"?new Date(G):G:null;try{const U=(await nr(hn(wt,"items"))).docs.map(Q=>({id:Q.id,...Q.data()})).filter(Q=>Q.isDeleted!==!0),H=await nr(hn(wt,"orders")),te=L(t.pickupDate),se=L(t.returnDate),ee=H.docs.map(Q=>Q.data()).filter(Q=>{const J=L(Q.pickupDate),he=L(Q.returnDate);return Q.status==="open"&&J&&he&&te&&se&&he>=te&&J<=se}),ie={};ee.forEach(Q=>{var J;(J=Q.items)==null||J.forEach(he=>{ie[he.id]=(ie[he.id]||0)+he.quantity})});const $={};T.current.forEach(Q=>{Q.selected&&Q.selectedQty>0&&($[Q.id]={selected:Q.selected,selectedQty:Q.selectedQty})});const W=U.map(Q=>{const J=(Q.quantity||0)-(ie[Q.id]||0),he=$[Q.id];return{...Q,quantity:J,selected:he?he.selected:!1,selectedQty:he?he.selectedQty:0}}).filter(Q=>Q.quantity>0);T.current=W,f(W)}catch(G){console.error("  :",G),f([])}p(!1)})()},[o,t.pickupDate,t.returnDate]);const j=D=>{f(L=>{const G=L.map(U=>U.id===D?{...U,selected:!U.selected,selectedQty:U.selected?0:1}:U);return T.current=G,G})},N=(D,L)=>{f(G=>{const U=G.map(H=>H.id===D?{...H,selected:L>0,selectedQty:L}:H);return T.current=U,U})},R=[{label:" ",name:"phone",required:!0},{label:" ",name:"clientName",required:!0},{label:" ",name:"address",required:!0},{label:"",name:"email",required:!1},{label:" ",name:"eventType",required:!0},{label:"  ",name:"pickupDate",type:"date",required:!0},{label:" ",name:"eventDate",type:"date",required:!0},{label:"  ",name:"returnDate",type:"date",required:!0}];return v.jsxs("div",{className:"new-loan-container",children:[v.jsxs("div",{className:"loan-form-box",children:[v.jsx("h2",{style:{textAlign:"center"},children:"  "}),v.jsx("p",{style:{textAlign:"center",color:"#666",marginBottom:"2rem"},children:"      "}),R.map(({label:D,name:L,type:G="text",required:U})=>v.jsxs("div",{style:{marginBottom:"1.5rem",textAlign:"center"},children:[v.jsxs("label",{htmlFor:L,style:{display:"block",marginBottom:"0.3rem",maxWidth:"400px",margin:"0 auto",textAlign:"right"},children:[D,U&&" *",C&&(L==="clientName"||L==="address"||L==="email")&&v.jsx("span",{style:{marginRight:"0.5rem",color:"#4caf50"},children:""})]}),v.jsxs("div",{style:{position:"relative"},children:[v.jsx("input",{id:L,type:G,name:L,value:t[L]||"",onChange:Y,autoComplete:"off",disabled:C&&(L==="clientName"||L==="address"||L==="email"),min:G==="date"?L==="pickupDate"?new Date().toISOString().split("T")[0]:L==="eventDate"||L==="returnDate"?t.pickupDate||new Date().toISOString().split("T")[0]:void 0:void 0,style:{display:"block",width:"100%",maxWidth:"400px",margin:"0 auto",padding:"10px",border:i[L]?"1px solid red":"1px solid #ccc",borderRadius:"6px",fontSize:"1rem",backgroundColor:C&&(L==="clientName"||L==="address"||L==="email")?"#f5f5f5":"white",opacity:C&&(L==="clientName"||L==="address"||L==="email")?.7:1},placeholder:C&&(L==="clientName"||L==="address"||L==="email")?"...":""}),C&&L==="phone"&&v.jsx("div",{style:{position:"absolute",left:"10px",top:"50%",transform:"translateY(-50%)",color:"#4caf50"},children:v.jsx("div",{style:{width:"16px",height:"16px",border:"2px solid #e8f5e8",borderTop:"2px solid #4caf50",borderRadius:"50%",animation:"spin 1s linear infinite"}})})]}),i[L]&&v.jsx("div",{style:{color:"red",fontSize:"0.85rem",maxWidth:"400px",margin:"0.3rem auto 0",textAlign:"right"},children:i[L]})]},L)),v.jsx("div",{style:{display:"flex",justifyContent:"center",marginBottom:"1.5rem"},children:v.jsx("button",{className:"btn btn-blue",onClick:()=>s(!0),disabled:C,children:" "})}),v.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"10px"},children:[v.jsx("button",{className:"btn btn-green",onClick:I,disabled:x||C,children:x?" ...":"   "}),v.jsx("button",{className:"btn btn-red",onClick:F,disabled:x||C,children:""})]}),v.jsx("style",{jsx:!0,children:`
          @keyframes spin {
            0% { transform: translateY(-50%) rotate(0deg); }
            100% { transform: translateY(-50%) rotate(360deg); }
          }
        `})]}),v.jsx(AC,{showCatalogPopup:o,setShowCatalogPopup:s,searchTerm:g,setSearchTerm:m,setAvailableItems:f,availableItems:c,toggleSelectItem:j,changeQty:N,form:t,loadingItems:d,hideBarcodeScanner:!0})]})},bq=()=>{const{user:n}=Zo(),[e,t]=le.useState([]),[r,i]=le.useState(!0),[a,o]=le.useState(null),[s,c]=le.useState(null),f=async()=>{try{i(!0);const _=(await nr(hn(wt,"orderRequests"))).docs.map(C=>({id:C.id,...C.data()})).filter(C=>C.status==="pending").sort((C,S)=>{var P,Y;const k=((P=C.requestedAt)==null?void 0:P.seconds)||0;return(((Y=S.requestedAt)==null?void 0:Y.seconds)||0)-k});t(_)}catch(x){console.error("  :",x)}finally{i(!1)}};le.useEffect(()=>{f()},[]);const d=async x=>{if(window.confirm(`        ${x.clientName}?`)){c(x.id),console.log("   :",x);try{console.log("    ...");const _=await nr(hn(wt,"items")),C=await nr(hn(wt,"orders")),S=L=>L?L.toDate?L.toDate():typeof L=="string"?new Date(L):L:null,k=S(x.pickupDate),M=S(x.returnDate),P=C.docs.map(L=>L.data()).filter(L=>{const G=S(L.pickupDate),U=S(L.returnDate);return L.status==="open"&&G&&U&&k&&M&&U>=k&&G<=M}),Y={};P.forEach(L=>{var G;(G=L.items)==null||G.forEach(U=>{Y[U.id]=(Y[U.id]||0)+U.quantity})});const z=_.docs.map(L=>({id:L.id,...L.data()}));console.log("   ...",x.items);let F=!0,I=[];for(const L of x.items){console.log(`  : ${L.name}`,L);const G=z.find(H=>H.id===L.id);if(!G){console.log(`    : ${L.name}`),F=!1,I.push(`${L.name} (  )`);continue}const U=(G.quantity||0)-(Y[L.id]||0);console.log(` ${L.name}: =${G.quantity}, =${Y[L.id]||0}, =${U}, =${L.quantity}`),L.quantity>U&&(F=!1,I.push(`${L.name} (: ${U}, : ${L.quantity})`))}if(!F){console.log("    :",I),alert(`     -   :
${I.join(`
`)}`),c(null);return}console.log("   ,   ..."),console.log("    ...");const j=(await nr(hn(wt,"orders"))).docs.map(L=>L.data().simpleId).filter(L=>typeof L=="number"),N=j.length>0?Math.max(...j)+1:1;console.log("   :",N),console.log("   ..."),console.log("  :",n);const R={clientName:x.clientName,address:x.address,phone:x.phone,email:x.email,eventType:x.eventType,pickupDate:x.pickupDate,eventDate:x.eventDate,returnDate:x.returnDate,items:x.items,simpleId:N,status:"open",volunteerName:` " ${(n==null?void 0:n.username)||(n==null?void 0:n.email)||""}`,createdAt:kr(),approvedBy:(n==null?void 0:n.uid)||"unknown",approvedByUsername:(n==null?void 0:n.username)||(n==null?void 0:n.email)||"",approvedAt:kr(),orderId:null};console.log("   :",R);const D=await dd(hn(wt,"orders"),R);console.log("    ID:",D.id),await ia(D,{orderId:D.id}),console.log("  orderId "),console.log("    ..."),await ia(rr(wt,"orderRequests",x.id),{status:"approved",approvedBy:(n==null?void 0:n.uid)||"unknown",approvedByUsername:(n==null?void 0:n.username)||(n==null?void 0:n.email)||"",approvedAt:kr(),orderId:D.id}),console.log("    !"),alert(`   !  : ${N}`),await f()}catch(_){console.error("   :",_),console.error("Stack trace:",_.stack),alert(`  : ${_.message}`)}finally{c(null)}}},p=async x=>{const _=prompt(`      ${x.clientName}?
(   )`);if(_!==null){c(x.id),console.log("   :",x.id,":",_);try{console.log("    ..."),console.log("  :",n),await ia(rr(wt,"orderRequests",x.id),{status:"rejected",rejectedBy:(n==null?void 0:n.uid)||"unknown",rejectedByUsername:(n==null?void 0:n.username)||(n==null?void 0:n.email)||"",rejectedAt:kr(),rejectionReason:_}),console.log("   "),alert("  .   ."),await f()}catch(C){console.error("   :",C),console.error("Stack trace:",C.stack),alert(`  : ${C.message}`)}finally{c(null)}}},g=x=>new Date(x).toLocaleDateString("he-IL"),m=x=>x?(x.seconds?new Date(x.seconds*1e3):new Date(x)).toLocaleString("he-IL"):"";return r?v.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"50vh",direction:"rtl"},children:v.jsxs("div",{style:{textAlign:"center"},children:[v.jsx("div",{style:{width:"40px",height:"40px",border:"4px solid #e5e7eb",borderTop:"4px solid #3b82f6",borderRadius:"50%",animation:"spin 1s linear infinite",margin:"0 auto 1rem"}}),v.jsx("p",{children:" ..."})]})}):v.jsxs("div",{style:{padding:"2rem",maxWidth:"1200px",margin:"0 auto",direction:"rtl"},children:[v.jsxs("div",{style:{background:"linear-gradient(to right, #20b2aa, #48d1cc)",color:"white",padding:"2rem",borderRadius:"12px",marginBottom:"2rem",textAlign:"center"},children:[v.jsx("h1",{style:{fontSize:"2rem",fontWeight:"bold",margin:0},children:"  "}),v.jsx("p",{style:{fontSize:"1.1rem",opacity:.9,margin:"0.5rem 0 0 0"},children:"   "})]}),e.length===0?v.jsxs("div",{style:{background:"white",padding:"3rem",borderRadius:"12px",textAlign:"center",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[v.jsx(Gs,{size:64,style:{color:"#d1d5db",marginBottom:"1rem"}}),v.jsx("h3",{style:{fontSize:"1.5rem",color:"#6b7280",margin:"0 0 0.5rem 0"},children:"  "}),v.jsx("p",{style:{color:"#9ca3af"},children:"      "})]}):v.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(350px, 1fr))",gap:"1.5rem"},children:e.map(x=>{var _;return v.jsxs("div",{style:{background:"white",border:"1px solid #e5e7eb",borderRadius:"12px",padding:"1.5rem",boxShadow:"0 2px 8px rgba(0,0,0,0.1)",transition:"transform 0.2s ease, box-shadow 0.2s ease"},onMouseEnter:C=>{C.currentTarget.style.transform="translateY(-2px)",C.currentTarget.style.boxShadow="0 4px 16px rgba(0,0,0,0.15)"},onMouseLeave:C=>{C.currentTarget.style.transform="translateY(0)",C.currentTarget.style.boxShadow="0 2px 8px rgba(0,0,0,0.1)"},children:[v.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"1rem",paddingBottom:"1rem",borderBottom:"1px solid #f3f4f6"},children:[v.jsxs("div",{children:[v.jsx("h3",{style:{fontSize:"1.25rem",fontWeight:"bold",margin:0,color:"#1f2937"},children:x.clientName}),v.jsxs("p",{style:{fontSize:"0.875rem",color:"#6b7280",margin:"0.25rem 0 0 0"},children:[": ",m(x.requestedAt)]})]}),v.jsx("div",{style:{background:"#fef3c7",color:"#92400e",padding:"0.25rem 0.75rem",borderRadius:"20px",fontSize:"0.75rem",fontWeight:"bold"},children:""})]}),v.jsxs("div",{style:{display:"grid",gap:"0.75rem",marginBottom:"1.5rem"},children:[v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[v.jsx(lC,{size:16,style:{color:"#6b7280"}}),v.jsxs("span",{style:{fontSize:"0.875rem"},children:[": ",x.requestedByUsername]})]}),v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[v.jsx(id,{size:16,style:{color:"#6b7280"}}),v.jsx("span",{style:{fontSize:"0.875rem"},children:x.phone})]}),v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[v.jsx(aC,{size:16,style:{color:"#6b7280"}}),v.jsx("span",{style:{fontSize:"0.875rem"},children:x.address})]}),v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[v.jsx(uc,{size:16,style:{color:"#6b7280"}}),v.jsxs("span",{style:{fontSize:"0.875rem"},children:[g(x.pickupDate),"  ",g(x.returnDate)]})]}),v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[v.jsx(Gs,{size:16,style:{color:"#6b7280"}}),v.jsxs("span",{style:{fontSize:"0.875rem"},children:[(_=x.items)==null?void 0:_.reduce((C,S)=>C+S.quantity,0)," "]})]})]}),v.jsxs("div",{style:{display:"flex",gap:"0.75rem",justifyContent:"center"},children:[v.jsxs("button",{onClick:()=>o(x),style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 1rem",background:"#3b82f6",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"0.875rem",fontWeight:"500"},children:[v.jsx(l2,{size:16})," "]}),v.jsxs("button",{onClick:()=>d(x),disabled:s===x.id,style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 1rem",background:s===x.id?"#9ca3af":"#10b981",color:"white",border:"none",borderRadius:"6px",cursor:s===x.id?"not-allowed":"pointer",fontSize:"0.875rem",fontWeight:"500"},children:[v.jsx(xf,{size:16}),s===x.id?"...":""]}),v.jsxs("button",{onClick:()=>p(x),disabled:s===x.id,style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 1rem",background:s===x.id?"#9ca3af":"#ef4444",color:"white",border:"none",borderRadius:"6px",cursor:s===x.id?"not-allowed":"pointer",fontSize:"0.875rem",fontWeight:"500"},children:[v.jsx($1,{size:16}),""]})]})]},x.id)})}),a&&v.jsx(wq,{request:a,onClose:()=>o(null),onApprove:()=>{o(null),d(a)},onReject:()=>{o(null),p(a)},processing:s===a.id}),v.jsx("style",{children:`
        @keyframes spin {
          0% { transform: rotate(0deg); }
          100% { transform: rotate(360deg); }
        }
      `})]})},wq=({request:n,onClose:e,onApprove:t,onReject:r,processing:i})=>{var s,c;const a=f=>new Date(f).toLocaleDateString("he-IL"),o=f=>{f.target===f.currentTarget&&e()};return v.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",padding:"1rem",zIndex:9999},onClick:o,children:v.jsxs("div",{style:{background:"white",borderRadius:"12px",width:"100%",maxWidth:"42rem",maxHeight:"90vh",overflow:"hidden",direction:"rtl"},onClick:f=>f.stopPropagation(),children:[v.jsxs("div",{style:{background:"#1f2937",color:"white",padding:"1.5rem",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[v.jsxs("h2",{style:{fontSize:"1.5rem",fontWeight:"bold",margin:0},children:["  - ",n.clientName]}),v.jsx("button",{onClick:e,style:{background:"none",border:"none",color:"white",fontSize:"1.5rem",cursor:"pointer"},children:""})]}),v.jsxs("div",{style:{padding:"1.5rem",overflowY:"auto",maxHeight:"calc(90vh - 180px)"},children:[v.jsxs("div",{style:{marginBottom:"2rem"},children:[v.jsx("h3",{style:{fontSize:"1.25rem",fontWeight:"600",marginBottom:"1rem",color:"#1f2937"},children:" "}),v.jsxs("div",{style:{background:"#f9fafb",padding:"1rem",borderRadius:"8px",display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem"},children:[v.jsxs("div",{children:[v.jsx("span",{style:{fontSize:"0.875rem",color:"#6b7280",display:"block"},children:" "}),v.jsx("span",{style:{fontWeight:"bold"},children:n.clientName})]}),v.jsxs("div",{children:[v.jsx("span",{style:{fontSize:"0.875rem",color:"#6b7280",display:"block"},children:""}),v.jsx("span",{style:{fontWeight:"bold"},children:n.phone})]}),v.jsxs("div",{children:[v.jsx("span",{style:{fontSize:"0.875rem",color:"#6b7280",display:"block"},children:""}),v.jsx("span",{style:{fontWeight:"bold"},children:n.address})]}),v.jsxs("div",{children:[v.jsx("span",{style:{fontSize:"0.875rem",color:"#6b7280",display:"block"},children:""}),v.jsx("span",{style:{fontWeight:"bold"},children:n.email||" "})]}),v.jsxs("div",{children:[v.jsx("span",{style:{fontSize:"0.875rem",color:"#6b7280",display:"block"},children:" "}),v.jsx("span",{style:{fontWeight:"bold"},children:n.eventType})]}),v.jsxs("div",{children:[v.jsx("span",{style:{fontSize:"0.875rem",color:"#6b7280",display:"block"},children:""}),v.jsxs("span",{style:{fontWeight:"bold"},children:[a(n.pickupDate),"  ",a(n.returnDate)]})]})]})]}),v.jsxs("div",{children:[v.jsxs("h3",{style:{fontSize:"1.25rem",fontWeight:"600",marginBottom:"1rem",color:"#1f2937"},children:["  (",((s=n.items)==null?void 0:s.length)||0,")"]}),v.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:(c=n.items)==null?void 0:c.map((f,d)=>v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",padding:"1rem",background:"#f9fafb",borderRadius:"8px",border:"1px solid #e5e7eb"},children:[v.jsx("img",{src:f.imageUrl||"/no-image-available.png",alt:f.name,style:{width:"3rem",height:"3rem",objectFit:"cover",borderRadius:"6px",border:"1px solid #e5e7eb"}}),v.jsxs("div",{style:{flex:1},children:[v.jsx("h4",{style:{fontSize:"1rem",fontWeight:"500",margin:0,color:"#1f2937"},children:f.name}),v.jsxs("p",{style:{fontSize:"0.875rem",color:"#6b7280",margin:"0.25rem 0 0 0"},children:[": ",f.ItemId]})]}),v.jsxs("div",{style:{background:"#3b82f6",color:"white",padding:"0.5rem 1rem",borderRadius:"20px",fontSize:"0.875rem",fontWeight:"bold"},children:["",f.quantity]})]},d))})]})]}),v.jsxs("div",{style:{background:"#f9fafb",padding:"1rem 1.5rem",borderTop:"1px solid #e5e7eb",display:"flex",justifyContent:"center",gap:"1rem"},children:[v.jsxs("button",{onClick:t,disabled:i,style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.75rem 1.5rem",background:i?"#9ca3af":"#10b981",color:"white",border:"none",borderRadius:"8px",cursor:i?"not-allowed":"pointer",fontSize:"1rem",fontWeight:"500"},children:[v.jsx(xf,{size:20}),i?"...":" "]}),v.jsxs("button",{onClick:r,disabled:i,style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.75rem 1.5rem",background:i?"#9ca3af":"#ef4444",color:"white",border:"none",borderRadius:"8px",cursor:i?"not-allowed":"pointer",fontSize:"1rem",fontWeight:"500"},children:[v.jsx($1,{size:20})," "]}),v.jsx("button",{onClick:e,style:{padding:"0.75rem 1.5rem",background:"#6b7280",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"1rem",fontWeight:"500"},children:""})]})]})})},_q=()=>{const{user:n}=Zo(),[e,t]=le.useState([]),[r,i]=le.useState(!0),[a,o]=le.useState(null),[s,c]=le.useState(null),f=async()=>{if(!(n!=null&&n.uid)){console.log("   :",n),i(!1);return}try{i(!0),console.log("    :",n.uid);const x=Nl(hn(wt,"orderRequests"),ru("requestedBy","==",n.uid));console.log("   -orderRequests...");const _=await nr(x);console.log(" ",_.size,"");const C=_.docs.map(k=>{const M={id:k.id,type:"request",...k.data()};return console.log("  :",M),M});console.log(' "  :',C.length);const S=[...C].sort((k,M)=>{var z,F,I,T;const P=((z=k.requestedAt)==null?void 0:z.seconds)||((F=k.createdAt)==null?void 0:F.seconds)||0;return(((I=M.requestedAt)==null?void 0:I.seconds)||((T=M.createdAt)==null?void 0:T.seconds)||0)-P});console.log("  :",S),t(S)}catch(x){console.error("   :",x),console.error("Stack trace:",x.stack)}finally{i(!1)}},d=async x=>{const _=p(x).text;if(window.confirm(`      ?

:
 : ${x.clientName}
 : ${_}
 : ${g(x.pickupDate)}

    .`)){c(x.id),console.log("  :",x.id);try{await $h(rr(wt,"orderRequests",x.id)),console.log("   "),t(C=>C.filter(S=>S.id!==x.id)),alert("     ")}catch(C){console.error("   :",C),alert(`  : ${C.message}`)}finally{c(null)}}};le.useEffect(()=>{console.log("  :",n),n!=null&&n.uid?(console.log("   ..."),f()):(console.log("   ..."),i(!1))},[n]);const p=x=>{switch(x.status){case"pending":return{text:" ",color:"#f59e0b",bgColor:"#fef3c7",icon:v.jsx(gd,{size:16})};case"approved":return{text:"",color:"#10b981",bgColor:"#d1fae5",icon:v.jsx(xf,{size:16})};case"rejected":return{text:"",color:"#ef4444",bgColor:"#fee2e2",icon:v.jsx($1,{size:16})};default:return{text:" ",color:"#6b7280",bgColor:"#f3f4f6",icon:v.jsx(Gs,{size:16})}}},g=x=>new Date(x).toLocaleDateString("he-IL"),m=x=>x?(x.seconds?new Date(x.seconds*1e3):new Date(x)).toLocaleString("he-IL"):"";return r?v.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"50vh",direction:"rtl"},children:v.jsxs("div",{style:{textAlign:"center"},children:[v.jsx("div",{style:{width:"40px",height:"40px",border:"4px solid #e5e7eb",borderTop:"4px solid #3b82f6",borderRadius:"50%",animation:"spin 1s linear infinite",margin:"0 auto 1rem"}}),v.jsx("p",{children:" ..."})]})}):v.jsxs("div",{style:{padding:"2rem",maxWidth:"1200px",margin:"0 auto",direction:"rtl"},children:[v.jsxs("div",{style:{background:"linear-gradient(to right, #3b82f6, #1e40af)",color:"white",padding:"2rem",borderRadius:"12px",marginBottom:"2rem",textAlign:"center"},children:[v.jsx("h1",{style:{fontSize:"2rem",fontWeight:"bold",margin:0},children:"  "}),v.jsx("p",{style:{fontSize:"1.1rem",opacity:.9,margin:"0.5rem 0 0 0"},children:"     "})]}),v.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem",marginBottom:"2rem"},children:[v.jsxs("div",{style:{background:"#fef3c7",padding:"1.5rem",borderRadius:"12px",textAlign:"center",border:"1px solid #fde68a"},children:[v.jsx("div",{style:{fontSize:"2rem",fontWeight:"bold",color:"#92400e"},children:e.filter(x=>x.status==="pending").length}),v.jsx("div",{style:{color:"#92400e",fontSize:"0.875rem"},children:" "})]}),v.jsxs("div",{style:{background:"#d1fae5",padding:"1.5rem",borderRadius:"12px",textAlign:"center",border:"1px solid #a7f3d0"},children:[v.jsx("div",{style:{fontSize:"2rem",fontWeight:"bold",color:"#065f46"},children:e.filter(x=>x.status==="approved").length}),v.jsx("div",{style:{color:"#065f46",fontSize:"0.875rem"},children:""})]}),v.jsxs("div",{style:{background:"#fee2e2",padding:"1.5rem",borderRadius:"12px",textAlign:"center",border:"1px solid #fecaca"},children:[v.jsx("div",{style:{fontSize:"2rem",fontWeight:"bold",color:"#991b1b"},children:e.filter(x=>x.status==="rejected").length}),v.jsx("div",{style:{color:"#991b1b",fontSize:"0.875rem"},children:""})]}),v.jsxs("div",{style:{background:"#eff6ff",padding:"1.5rem",borderRadius:"12px",textAlign:"center",border:"1px solid #dbeafe"},children:[v.jsx("div",{style:{fontSize:"2rem",fontWeight:"bold",color:"#1e40af"},children:e.length}),v.jsx("div",{style:{color:"#1e40af",fontSize:"0.875rem"},children:'" '})]})]}),e.length===0?v.jsxs("div",{style:{background:"white",padding:"3rem",borderRadius:"12px",textAlign:"center",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[v.jsx(Gs,{size:64,style:{color:"#d1d5db",marginBottom:"1rem"}}),v.jsx("h3",{style:{fontSize:"1.5rem",color:"#6b7280",margin:"0 0 0.5rem 0"},children:"  "}),v.jsx("p",{style:{color:"#9ca3af",marginBottom:"1.5rem"},children:"    "}),v.jsx("a",{href:"/request",style:{display:"inline-block",background:"#3b82f6",color:"white",padding:"0.75rem 1.5rem",borderRadius:"8px",textDecoration:"none",fontWeight:"500"},children:"    "})]}):v.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(350px, 1fr))",gap:"1.5rem"},children:e.map(x=>{var C;const _=p(x);return v.jsxs("div",{style:{background:"white",border:"1px solid #e5e7eb",borderRadius:"12px",padding:"1.5rem",boxShadow:"0 2px 8px rgba(0,0,0,0.1)",transition:"transform 0.2s ease, box-shadow 0.2s ease"},onMouseEnter:S=>{S.currentTarget.style.transform="translateY(-2px)",S.currentTarget.style.boxShadow="0 4px 16px rgba(0,0,0,0.15)"},onMouseLeave:S=>{S.currentTarget.style.transform="translateY(0)",S.currentTarget.style.boxShadow="0 2px 8px rgba(0,0,0,0.1)"},children:[v.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"1rem",paddingBottom:"1rem",borderBottom:"1px solid #f3f4f6"},children:[v.jsxs("div",{children:[v.jsx("h3",{style:{fontSize:"1.25rem",fontWeight:"bold",margin:0,color:"#1f2937"},children:x.clientName}),v.jsxs("p",{style:{fontSize:"0.875rem",color:"#6b7280",margin:"0.25rem 0 0 0"},children:[": ",m(x.requestedAt)]})]}),v.jsxs("div",{style:{background:_.bgColor,color:_.color,padding:"0.25rem 0.75rem",borderRadius:"20px",fontSize:"0.75rem",fontWeight:"bold",display:"flex",alignItems:"center",gap:"0.25rem"},children:[_.icon,_.text]})]}),v.jsxs("div",{style:{display:"grid",gap:"0.75rem",marginBottom:"1.5rem"},children:[v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[v.jsx(id,{size:16,style:{color:"#6b7280"}}),v.jsx("span",{style:{fontSize:"0.875rem"},children:x.phone})]}),v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[v.jsx(aC,{size:16,style:{color:"#6b7280"}}),v.jsx("span",{style:{fontSize:"0.875rem"},children:x.address})]}),v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[v.jsx(uc,{size:16,style:{color:"#6b7280"}}),v.jsxs("span",{style:{fontSize:"0.875rem"},children:[g(x.pickupDate),"  ",g(x.returnDate)]})]}),v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[v.jsx(Gs,{size:16,style:{color:"#6b7280"}}),v.jsxs("span",{style:{fontSize:"0.875rem"},children:[(C=x.items)==null?void 0:C.reduce((S,k)=>S+k.quantity,0)," "]})]}),x.status==="rejected"&&x.rejectionReason&&v.jsxs("div",{style:{background:"#fef2f2",border:"1px solid #fecaca",borderRadius:"6px",padding:"0.75rem",marginTop:"0.5rem"},children:[v.jsx("div",{style:{fontSize:"0.75rem",color:"#991b1b",fontWeight:"bold",marginBottom:"0.25rem"},children:" :"}),v.jsx("div",{style:{fontSize:"0.875rem",color:"#7f1d1d"},children:x.rejectionReason})]})]}),v.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"0.5rem"},children:[v.jsxs("button",{onClick:()=>o(x),style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 1rem",background:"#3b82f6",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"0.875rem",fontWeight:"500"},children:[v.jsx(l2,{size:16})," "]}),v.jsxs("button",{onClick:()=>d(x),disabled:s===x.id,style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 1rem",background:s===x.id?"#9ca3af":"#ef4444",color:"white",border:"none",borderRadius:"6px",cursor:s===x.id?"not-allowed":"pointer",fontSize:"0.875rem",fontWeight:"500",opacity:s===x.id?.6:1},children:[v.jsx(Q5,{size:16}),s===x.id?"...":""]})]})]},x.id)})}),a&&v.jsx(Aq,{order:a,onClose:()=>o(null)}),v.jsx("style",{children:`
        @keyframes spin {
          0% { transform: rotate(0deg); }
          100% { transform: rotate(360deg); }
        }
      `})]})},Aq=({order:n,onClose:e})=>{var o,s;const t=c=>{switch(c.status){case"pending":return{text:" ",color:"#f59e0b",bgColor:"#fef3c7",icon:v.jsx(gd,{size:20})};case"approved":return{text:"",color:"#10b981",bgColor:"#d1fae5",icon:v.jsx(xf,{size:20})};case"rejected":return{text:"",color:"#ef4444",bgColor:"#fee2e2",icon:v.jsx($1,{size:20})};default:return{text:" ",color:"#6b7280",bgColor:"#f3f4f6",icon:v.jsx(Gs,{size:20})}}},r=c=>new Date(c).toLocaleDateString("he-IL"),i=t(n),a=c=>{c.target===c.currentTarget&&e()};return v.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",padding:"1rem",zIndex:9999},onClick:a,children:v.jsxs("div",{style:{background:"white",borderRadius:"12px",width:"100%",maxWidth:"42rem",maxHeight:"90vh",overflow:"hidden",direction:"rtl"},onClick:c=>c.stopPropagation(),children:[v.jsxs("div",{style:{background:i.color,color:"white",padding:"1.5rem",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[i.icon,v.jsxs("div",{children:[v.jsxs("h2",{style:{fontSize:"1.5rem",fontWeight:"bold",margin:0},children:[" - ",n.clientName]}),v.jsx("p",{style:{fontSize:"0.875rem",margin:"0.25rem 0 0 0",opacity:.9},children:i.text})]})]}),v.jsx("button",{onClick:e,style:{background:"none",border:"none",color:"white",fontSize:"1.5rem",cursor:"pointer"},children:""})]}),v.jsxs("div",{style:{padding:"1.5rem",overflowY:"auto",maxHeight:"calc(90vh - 180px)"},children:[v.jsxs("div",{style:{marginBottom:"2rem"},children:[v.jsx("h3",{style:{fontSize:"1.25rem",fontWeight:"600",marginBottom:"1rem",color:"#1f2937"},children:" "}),v.jsxs("div",{style:{background:"#f9fafb",padding:"1rem",borderRadius:"8px",display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem"},children:[v.jsxs("div",{children:[v.jsx("span",{style:{fontSize:"0.875rem",color:"#6b7280",display:"block"},children:" "}),v.jsx("span",{style:{fontWeight:"bold"},children:n.clientName})]}),v.jsxs("div",{children:[v.jsx("span",{style:{fontSize:"0.875rem",color:"#6b7280",display:"block"},children:""}),v.jsx("span",{style:{fontWeight:"bold"},children:n.phone})]}),v.jsxs("div",{children:[v.jsx("span",{style:{fontSize:"0.875rem",color:"#6b7280",display:"block"},children:""}),v.jsx("span",{style:{fontWeight:"bold"},children:n.address})]}),v.jsxs("div",{children:[v.jsx("span",{style:{fontSize:"0.875rem",color:"#6b7280",display:"block"},children:""}),v.jsx("span",{style:{fontWeight:"bold"},children:n.email||" "})]}),v.jsxs("div",{children:[v.jsx("span",{style:{fontSize:"0.875rem",color:"#6b7280",display:"block"},children:" "}),v.jsx("span",{style:{fontWeight:"bold"},children:n.eventType})]}),v.jsxs("div",{children:[v.jsx("span",{style:{fontSize:"0.875rem",color:"#6b7280",display:"block"},children:""}),v.jsxs("span",{style:{fontWeight:"bold"},children:[r(n.pickupDate),"  ",r(n.returnDate)]})]})]})]}),v.jsxs("div",{children:[v.jsxs("h3",{style:{fontSize:"1.25rem",fontWeight:"600",marginBottom:"1rem",color:"#1f2937"},children:[" (",((o=n.items)==null?void 0:o.length)||0,")"]}),v.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:(s=n.items)==null?void 0:s.map((c,f)=>v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",padding:"1rem",background:"#f9fafb",borderRadius:"8px",border:"1px solid #e5e7eb"},children:[v.jsx("img",{src:c.imageUrl||"/no-image-available.png",alt:c.name,style:{width:"3rem",height:"3rem",objectFit:"cover",borderRadius:"6px",border:"1px solid #e5e7eb"}}),v.jsxs("div",{style:{flex:1},children:[v.jsx("h4",{style:{fontSize:"1rem",fontWeight:"500",margin:0,color:"#1f2937"},children:c.name}),v.jsxs("p",{style:{fontSize:"0.875rem",color:"#6b7280",margin:"0.25rem 0 0 0"},children:[": ",c.ItemId]})]}),v.jsxs("div",{style:{background:"#3b82f6",color:"white",padding:"0.5rem 1rem",borderRadius:"20px",fontSize:"0.875rem",fontWeight:"bold"},children:["",c.quantity]})]},f))})]}),n.status==="rejected"&&n.rejectionReason&&v.jsxs("div",{style:{marginTop:"2rem",background:"#fef2f2",border:"1px solid #fecaca",borderRadius:"8px",padding:"1rem"},children:[v.jsx("h4",{style:{fontSize:"1rem",fontWeight:"bold",color:"#991b1b",margin:"0 0 0.5rem 0"},children:" :"}),v.jsx("p",{style:{fontSize:"0.875rem",color:"#7f1d1d",margin:0},children:n.rejectionReason})]})]}),v.jsx("div",{style:{background:"#f9fafb",padding:"1rem 1.5rem",borderTop:"1px solid #e5e7eb",display:"flex",justifyContent:"center"},children:v.jsx("button",{onClick:e,style:{padding:"0.75rem 1.5rem",background:"#6b7280",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"1rem",fontWeight:"500"},children:""})})]})})},Sq=["","","","","","","","","","","",""],Eq=["","","","","","",""],Cq=n=>new Date(n.getFullYear(),n.getMonth()+1,0).getDate(),Iq=n=>new Date(n.getFullYear(),n.getMonth(),1).getDay(),Tq=({currentDate:n,events:e=[],setCurrentDate:t,setSelectedEvents:r,setSelectedDate:i,setShowReport:a,fetchItemsAndOrders:o})=>{const{user:s}=Zo(),[c,f]=le.useState([]),[d,p]=le.useState(!1),[g,m]=le.useState(new Set),[x,_]=le.useState(!1),[C,S]=le.useState(new Set);le.useEffect(()=>{k()},[]);const k=async()=>{try{const W=await Hc.getClosedDates();console.log("  :",W.map(Q=>({id:Q.id,date:Q.date}))),f(W)}catch(W){console.error("   :",W)}},M=()=>{if(!s)return console.log("  "),!1;const W=s.role==="MainAdmin";return console.log("  :",W,":",s.role),W},P=(W,Q,J)=>{const he=new Date(W,Q,J),be=he.getFullYear(),_e=String(he.getMonth()+1).padStart(2,"0"),Ie=String(he.getDate()).padStart(2,"0");return`${be}-${_e}-${Ie}`},Y=W=>{if(!Array.isArray(e))return[];const Q=P(n.getFullYear(),n.getMonth(),W);return e.filter(J=>J.date?Hc.formatDateToString(J.date)===Q:!1)},z=W=>Y(W).some(J=>e.some(be=>be.orderId===J.orderId&&be.availabilityStatus==="CONFLICT")),F=W=>Y(W).some(J=>J.isOverdue),I=W=>{const Q=P(n.getFullYear(),n.getMonth(),W);return Hc.isDateClosed(Q,c)},T=W=>{const Q=new Date(n.getFullYear(),n.getMonth(),W),J=new Date;return J.setHours(0,0,0,0),Q.setHours(0,0,0,0),Q<J?!1:!Y(W).some(_e=>_e.type!==" ")},j=W=>{const Q=new Date(n.getFullYear(),n.getMonth(),W),J=new Date;return J.setHours(0,0,0,0),Q.setHours(0,0,0,0),Q<J},N=W=>{const Q=new Date(n.getFullYear(),n.getMonth(),W),J=new Date;return Q.getDate()===J.getDate()&&Q.getMonth()===J.getMonth()&&Q.getFullYear()===J.getFullYear()},R=()=>{if(g.size>0)return!0;const W=new Set(c.map(Q=>Q.date||Q.id));if(W.size!==C.size)return!0;for(const Q of W)if(!C.has(Q))return!0;return!1},D=W=>{if(d){L(W);return}const Q=Y(W);Q.length>0&&Q.every(he=>he.type===" ")||Q.length>0&&(r(Q),i(new Date(n.getFullYear(),n.getMonth(),W)),a(!0))},L=async W=>{console.log(`   ${W}  `);const Q=I(W);if(console.log(` : ${Q},  : ${d}`),Q){const be=P(n.getFullYear(),n.getMonth(),W);console.log(`   ${be} -   +   `),f(_e=>{const Ie=_e.filter(Oe=>Oe.date!==be&&Oe.id!==be);return console.log(` :  ${_e.length-Ie.length} `),Ie}),await G(be),console.log(`   ${W} -  : ${d}`);return}if(!T(W)){j(W)?alert("     "):alert("      ");return}const J=P(n.getFullYear(),n.getMonth(),W);console.log(`   ${J} `);const he=new Set(g);he.has(J)?(he.delete(J),console.log(` : ${J}`)):(he.add(J),console.log(` : ${J}`)),m(he),console.log(`"  : ${he.size} `)},G=async W=>{try{console.log(`   : ${W}`),await Hc.removeClosedDate(W)?(console.log(`  ${W}  -   `),await k(),console.log("   -   ")):(await k(),alert("  "))}catch(Q){console.error("   :",Q),await k(),alert("  ")}},U=()=>{console.log("  "),p(!0),m(new Set);const W=new Set(c.map(Q=>Q.date||Q.id));S(W),console.log("  ,   :",W)},H=()=>{console.log("  "),p(!1),m(new Set),S(new Set),console.log("  ")},te=async()=>{_(!0);try{if(g.size>0){const W=Array.from(g);console.log("  :",W);const Q=await Hc.addMultipleClosedDates(W,s.uid,"  -    ");Q.success.length>0&&(alert(`${Q.success.length}   `),await k(),o&&await o()),Q.failed.length>0&&alert(`${Q.failed.length}    `)}else console.log("   (  ),   "),alert("  !"),o&&await o();p(!1),m(new Set),S(new Set)}catch(W){console.error("  :",W),alert("  ")}finally{_(!1)}},se=W=>{const Q=Y(W),J=new Map;return Q.forEach(he=>{J.has(he.orderId)||J.set(he.orderId,{...he,allEventsForOrder:Q.filter(be=>be.orderId===he.orderId)})}),Array.from(J.values())},ee=Cq(n),ie=Iq(n),$=[];console.log("CalendarGrid -   :",n.getMonth()+1,":",n.getFullYear()),console.log(" :",ee," :",ie);for(let W=0;W<ie;W++)$.push(v.jsx("div",{className:"day-cell empty"},`empty-${W}`));for(let W=1;W<=ee;W++){const Q=Y(W),J=se(W),he=Q.filter(Ee=>Ee.type===""),be=Q.filter(Ee=>Ee.type===""),_e=Q.length>0,Ie=J.length,Oe=I(W),Ve=T(W),nt=j(W),ot=N(W),ft=z(W),de=F(W),rt=P(n.getFullYear(),n.getMonth(),W),dt=g.has(rt);let at="day-cell";_e&&(at+=" has-events"),he.length>0&&(at+=" pickup-day"),be.length>0&&(at+=" return-day"),Oe&&(at+=" closed-day"),nt&&(at+=" past-day"),ot&&(at+=" today"),d&&(Ve||Oe)&&(at+=" can-manage"),dt&&(at+=" selected-for-closure"),ft&&(at+=" availability-conflict"),de&&(at+=" overdue-orders"),W===4&&n.getMonth()===6&&console.log(" 4  -  :",{day:W,month:n.getMonth()+1,year:n.getFullYear(),dateStr:rt,hasEvents:_e,hasConflicts:ft,hasOverdue:de,dayClasses:at}),$.push(v.jsxs("div",{className:at,onClick:()=>D(W),"data-day":W,"data-month":n.getMonth()+1,style:{cursor:d?Ve||Oe?"pointer":"not-allowed":Q.some(Ee=>Ee.type!==" ")?"pointer":"default"},children:[v.jsx("span",{className:"day-number",children:W}),ot&&v.jsx("div",{className:"today-indicator",title:"",children:""}),Oe&&v.jsx("div",{className:"closed-indicator",title:"  -  :   ",children:""}),de&&!Oe&&v.jsx("div",{className:"overdue-indicator",title:"   ",children:""}),ft&&!Oe&&!de&&v.jsx("div",{className:"conflict-indicator",title:"  -  ",children:v.jsx(oc,{size:16,style:{color:"#9333ea"}})}),d&&(Ve||Oe)&&v.jsx("div",{className:"closure-selector",title:Oe?"  ":"  ",children:Oe?"":dt?"":""}),!Oe&&v.jsxs("div",{className:"event-icons",children:[he.length>0&&v.jsxs("div",{className:`event-tag pickup-tag ${de?"overdue":ft?"conflict":""}`,title:" ",children:[" ",he.length>1&&he.length]}),be.length>0&&v.jsxs("div",{className:`event-tag return-tag ${de?"overdue":ft?"conflict":""}`,title:" ",children:[" ",be.length>1&&be.length]})]}),!Oe&&Ie>0&&v.jsx("div",{className:`event-count ${de?"overdue":ft?"conflict":""}`,title:`${Ie} `,children:Ie})]},W))}return v.jsxs("div",{className:"calendar-container",children:[v.jsxs("div",{className:"calendar-header",children:[v.jsx("button",{onClick:()=>t(new Date(n.getFullYear(),n.getMonth()-1,1)),children:v.jsx(W1,{size:20})}),v.jsxs("h2",{className:"calendar-title",children:[v.jsx(uc,{size:24})," ",Sq[n.getMonth()]," ",n.getFullYear()]}),v.jsx("button",{onClick:()=>t(new Date(n.getFullYear(),n.getMonth()+1,1)),children:v.jsx(H1,{size:20})})]}),M()&&v.jsx("div",{className:"calendar-controls",children:d?v.jsxs("div",{className:"edit-controls",children:[v.jsxs("span",{className:"edit-mode-indicator",children:["  :         (",g.size," )"]}),v.jsxs("div",{className:"edit-buttons",children:[v.jsxs("button",{className:"btn-save",onClick:te,disabled:x||!R(),children:[v.jsx(c2,{size:16}),x?"...":""]}),v.jsxs("button",{className:"btn-cancel",onClick:H,disabled:x,children:[v.jsx(uu,{size:16}),""]})]})]}):v.jsx("div",{className:"control-buttons",children:v.jsxs("button",{className:"btn-edit-dates",onClick:U,title:" ",children:[v.jsx(tB,{size:18})," "]})})}),v.jsx("div",{className:"day-names",children:Eq.map(W=>v.jsx("div",{className:"day-name",children:W},W))}),v.jsx("div",{className:"calendar-grid",children:$}),v.jsxs("div",{className:"calendar-footer",children:[v.jsxs("div",{className:"calendar-legend",children:[v.jsx("span",{className:"legend-item",children:"  "}),v.jsx("span",{className:"legend-item",children:"  "}),c.length>0&&v.jsxs("span",{className:"legend-item",children:["   (",c.length,")"]}),v.jsx("span",{className:"legend-item",children:"   "}),v.jsx("span",{className:"legend-item",children:"  "}),d&&v.jsx("span",{className:"legend-item",children:"      "}),v.jsx("span",{className:"legend-item",children:" "})]}),v.jsxs("div",{className:"calendar-stats",children:['         " : ',Array.isArray(e)?e.length:0,c.length>0&&`   : ${c.length}`]}),(!Array.isArray(e)||e.length===0)&&v.jsx("div",{className:"warning",children:"   -     "})]})]})};class Y1{constructor(e=0,t="Network Error"){this.status=e,this.text=t}}const Rq=()=>{if(!(typeof localStorage>"u"))return{get:n=>Promise.resolve(localStorage.getItem(n)),set:(n,e)=>Promise.resolve(localStorage.setItem(n,e)),remove:n=>Promise.resolve(localStorage.removeItem(n))}},ja={origin:"https://api.emailjs.com",blockHeadless:!1,storageProvider:Rq()},ob=n=>n?typeof n=="string"?{publicKey:n}:n.toString()==="[object Object]"?n:{}:{},Nq=(n,e="https://api.emailjs.com")=>{if(!n)return;const t=ob(n);ja.publicKey=t.publicKey,ja.blockHeadless=t.blockHeadless,ja.storageProvider=t.storageProvider,ja.blockList=t.blockList,ja.limitRate=t.limitRate,ja.origin=t.origin||e},EC=async(n,e,t={})=>{const r=await fetch(ja.origin+n,{method:"POST",headers:t,body:e}),i=await r.text(),a=new Y1(r.status,i);if(r.ok)return a;throw a},CC=(n,e,t)=>{if(!n||typeof n!="string")throw"The public key is required. Visit https://dashboard.emailjs.com/admin/account";if(!e||typeof e!="string")throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!t||typeof t!="string")throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates"},Dq=n=>{if(n&&n.toString()!=="[object Object]")throw"The template params have to be the object. Visit https://www.emailjs.com/docs/sdk/send/"},IC=n=>n.webdriver||!n.languages||n.languages.length===0,TC=()=>new Y1(451,"Unavailable For Headless Browser"),Oq=(n,e)=>{if(!Array.isArray(n))throw"The BlockList list has to be an array";if(typeof e!="string")throw"The BlockList watchVariable has to be a string"},kq=n=>{var e;return!((e=n.list)!=null&&e.length)||!n.watchVariable},Lq=(n,e)=>n instanceof FormData?n.get(e):n[e],RC=(n,e)=>{if(kq(n))return!1;Oq(n.list,n.watchVariable);const t=Lq(e,n.watchVariable);return typeof t!="string"?!1:n.list.includes(t)},NC=()=>new Y1(403,"Forbidden"),Pq=(n,e)=>{if(typeof n!="number"||n<0)throw"The LimitRate throttle has to be a positive number";if(e&&typeof e!="string")throw"The LimitRate ID has to be a non-empty string"},Mq=async(n,e,t)=>{const r=Number(await t.get(n)||0);return e-Date.now()+r},DC=async(n,e,t)=>{if(!e.throttle||!t)return!1;Pq(e.throttle,e.id);const r=e.id||n;return await Mq(r,e.throttle,t)>0?!0:(await t.set(r,Date.now().toString()),!1)},OC=()=>new Y1(429,"Too Many Requests"),jq=async(n,e,t,r)=>{const i=ob(r),a=i.publicKey||ja.publicKey,o=i.blockHeadless||ja.blockHeadless,s=i.storageProvider||ja.storageProvider,c={...ja.blockList,...i.blockList},f={...ja.limitRate,...i.limitRate};return o&&IC(navigator)?Promise.reject(TC()):(CC(a,n,e),Dq(t),t&&RC(c,t)?Promise.reject(NC()):await DC(location.pathname,f,s)?Promise.reject(OC()):EC("/api/v1.0/email/send",JSON.stringify({lib_version:"4.4.1",user_id:a,service_id:n,template_id:e,template_params:t}),{"Content-type":"application/json"}))},Bq=n=>{if(!n||n.nodeName!=="FORM")throw"The 3rd parameter is expected to be the HTML form element or the style selector of the form"},Fq=n=>typeof n=="string"?document.querySelector(n):n,Uq=async(n,e,t,r)=>{const i=ob(r),a=i.publicKey||ja.publicKey,o=i.blockHeadless||ja.blockHeadless,s=ja.storageProvider||i.storageProvider,c={...ja.blockList,...i.blockList},f={...ja.limitRate,...i.limitRate};if(o&&IC(navigator))return Promise.reject(TC());const d=Fq(t);CC(a,n,e),Bq(d);const p=new FormData(d);return RC(c,p)?Promise.reject(NC()):await DC(location.pathname,f,s)?Promise.reject(OC()):(p.append("lib_version","4.4.1"),p.append("service_id",n),p.append("template_id",e),p.append("user_id",a),EC("/api/v1.0/email/send-form",p))},sb={init:Nq,send:jq,sendForm:Uq,EmailJSResponseStatus:Y1},S1={serviceId:"service_zbzqfa3",reminderTemplateId:"template_02cqfdn",confirmationTemplateId:"template_lv2sc1p",publicKey:"gJHtAe_l22dY8tKju"};sb.init(S1.publicKey);const pm=n=>n?new Date(n).toLocaleDateString("he-IL",{year:"numeric",month:"long",day:"numeric",weekday:"long"}):"",zq=async(n,e)=>{var t,r;try{console.log(` Sending manual pickup email for order ${e}`);const i={to_email:n.email,to_name:n.clientName,client_name:n.clientName,pickup_date:pm(n.pickupDate),return_date:pm(n.returnDate),volunteer_name:" ",volunteer_phone:"054-2575886",organization_name:"  ",items_list:((t=n.items)==null?void 0:t.map(o=>` ${o.name} - : ${o.quantity}`).join(`
`))||"  ",total_items:((r=n.items)==null?void 0:r.reduce((o,s)=>o+s.quantity,0))||0,event_type:n.eventType||"",order_id:e,pickup_location:n.pickupLocation||"  ",special_instructions:n.specialInstructions||"  "},a=await sb.send(S1.serviceId,S1.confirmationTemplateId,i);return console.log(" Manual pickup email sent successfully:",a),await ia(rr(wt,"orders",e),{manualEmailSent:!0,manualEmailSentAt:Fi.now(),manualEmailResult:{status:a.status,text:a.text,sentAt:new Date().toISOString(),sentBy:"admin"}}),{success:!0,result:a}}catch(i){return console.error(` Failed to send manual pickup email for order ${e}:`,i),{success:!1,error:i.message}}},Vq=async(n,e)=>{var t,r;try{console.log(` Sending reminder email for order ${e}`);const i={to_email:n.email,to_name:n.clientName,client_name:n.clientName,return_date:pm(n.returnDate),volunteer_name:n.volunteerName||" ",volunteer_phone:"054-2575886",organization_name:"  ",items_list:((t=n.items)==null?void 0:t.map(o=>` ${o.name} - : ${o.quantity}`).join(`
`))||"  ",total_items:((r=n.items)==null?void 0:r.reduce((o,s)=>o+s.quantity,0))||0,event_type:n.eventType||"",pickup_date:pm(n.pickupDate),order_id:e},a=await sb.send(S1.serviceId,S1.reminderTemplateId,i);return console.log(" Reminder email sent successfully:",a),await ia(rr(wt,"orders",e),{reminderSent:!0,reminderSentAt:Fi.now(),emailSentResult:{status:a.status,text:a.text,sentAt:new Date().toISOString()}}),{success:!0,result:a}}catch(i){return console.error(` Failed to send reminder for order ${e}:`,i),{success:!1,error:i.message}}},kC=async()=>{const n=new Date,e=new Date(n);e.setDate(n.getDate()+2);const t=e.toISOString().split("T")[0];console.log(` Checking emails for reminder date: ${t}`);const r={reminders:{sent:0,alreadySent:0,errors:[]},totalFound:0};try{console.log(" Checking for reminders...");const i=Nl(hn(wt,"orders"),ru("status","in",["active","confirmed","picked_up","open"]),ru("returnDate","==",t)),a=await nr(i);r.totalFound=a.size;for(const c of a.docs){const f=c.data(),d=c.id;if(f.reminderSent)r.reminders.alreadySent++;else{const p=await Vq(f,d);p.success?r.reminders.sent++:r.reminders.errors.push({orderId:d,email:f.email,clientName:f.clientName,error:p.error})}}const o=r.reminders.sent,s=r.reminders.errors.length;return console.log(" Email check results:",{reminders:r.reminders,totalSent:o,totalErrors:s}),{...r,totalSent:o,totalErrors:s,message:o>0?` : ${o}  `:"    "}}catch(i){return console.error(" Error in email check:",i),{reminders:{sent:0,alreadySent:0,errors:[]},totalFound:0,totalSent:0,totalErrors:1,errors:[{error:i.message}],message:"  "}}},qq=({show:n,selectedDate:e,selectedEvents:t,allItems:r,setShowReport:i,setShowItemsModal:a,setEditItemModal:o,fetchItemsAndOrders:s,onStartReturnInspection:c})=>{const[f,d]=le.useState(null),[p,g]=le.useState(new Set);if(le.useEffect(()=>(n?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[n]),!n)return null;const m=async R=>{try{return await $h(rr(wt,"orders",R)),!0}catch(D){throw console.error("Error deleting order:",D),D}},x=R=>{const D=new Date;D.setHours(0,0,0,0);const L=new Date(R.returnDate);L.setHours(0,0,0,0);const G=D>L,U=G?Math.ceil((D-L)/(1e3*60*60*24)):0;return{isOverdue:G,overdueDays:U}},_=R=>{const D=new Date(R.pickupDate),L=new Date;return D.setHours(0,0,0,0),L.setHours(0,0,0,0),D.getTime()===L.getTime()},C=R=>R.events.some(D=>D.type===""),S=R=>{const D=R.manualEmailSent===!0,L=p.has(R.orderId);return D||L},k=R=>R.email&&_(R)&&C(R)&&!S(R),M=async R=>{if(k(R)){d(R.orderId);try{console.log(" Sending manual pickup email for order:",R.orderId);const D=await zq({email:R.email,clientName:R.clientName,phone:R.phone,items:R.items||[],pickupDate:R.pickupDate,returnDate:R.returnDate,eventType:R.eventType||"",pickupLocation:R.pickupLocation||"  ",specialInstructions:R.specialInstructions||"  "},R.orderId);if(console.log(" Email send result:",D),D.success)g(L=>new Set([...L,R.orderId])),console.log(" Email sent successfully, refreshing data..."),s&&await s(),alert("   !");else throw new Error(D.error||"Unknown error")}catch(D){console.error("   :",D),alert(`   : ${D.message}`)}finally{d(null)}}},P=R=>f===R.orderId?"...":S(R)?" ":_(R)?"  ":"  ",Y=R=>R.email?C(R)?S(R)?"     ":_(R)?"    ":`    : ${new Date(R.pickupDate).toLocaleDateString("he-IL")}`:"      ( )":"     ",F=(R=>{const D=new Map;return R.forEach(L=>{D.has(L.orderId)||D.set(L.orderId,{orderId:L.orderId,clientName:L.clientName,phone:L.phone,email:L.email,items:L.items,pickupDate:L.pickupDate,returnDate:L.returnDate,manualEmailSent:L.manualEmailSent||!1,availabilityStatus:L.availabilityStatus,availabilityConflicts:L.availabilityConflicts||[],needsAttention:L.needsAttention,events:[]}),D.get(L.orderId).events.push(L)}),Array.from(D.values())})(t),I=F.some(R=>R.availabilityStatus==="CONFLICT"&&R.availabilityConflicts.length>0),T=F.some(R=>{const{isOverdue:D}=x(R);return D}),j=async R=>{if(R&&window.confirm("      ?"))try{await m(R),await s(),i(!1),alert("  .")}catch(D){console.error(D),alert(" .  .")}},N=R=>{R.target===R.currentTarget&&i(!1)};return v.jsxs(v.Fragment,{children:[v.jsx("style",{jsx:!0,global:!0,children:`
        .modal-overlay {
          position: fixed !important;
          top: 0 !important;
          left: 0 !important;
          right: 0 !important;
          bottom: 0 !important;
          background-color: rgba(0, 0, 0, 0.5) !important;
          display: flex !important;
          align-items: center !important;
          justify-content: center !important;
          padding: 1rem !important;
          z-index: 99999 !important;
        }
        
        .modal-content {
          background: white !important;
          border-radius: 12px !important;
          box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25) !important;
          width: 100% !important;
          max-width: 32rem !important;
          max-height: 90vh !important;
          overflow: hidden !important;
          position: relative !important;
          z-index: 100000 !important;
        }
        
        .availability-warning {
          background: linear-gradient(135deg, #f3e8ff 0%, #e9d5ff 100%) !important;
          border: 2px solid #9333ea !important;
          border-radius: 8px !important;
          padding: 1rem !important;
          margin-bottom: 1rem !important;
          animation: warningPulse 2s ease-in-out infinite !important;
        }
        
        @keyframes warningPulse {
          0%, 100% { box-shadow: 0 0 0 0 rgba(147, 51, 234, 0.4); }
          50% { box-shadow: 0 0 0 8px rgba(147, 51, 234, 0.1); }
        }

        @keyframes bellRing {
          0%, 100% { transform: rotate(0deg); }
          10%, 30%, 50%, 70%, 90% { transform: rotate(-10deg); }
          20%, 40%, 60%, 80% { transform: rotate(10deg); }
        }

        @keyframes spin {
          0% { transform: rotate(0deg); }
          100% { transform: rotate(360deg); }
        }

        @keyframes pulse {
          0%, 100% { opacity: 1; }
          50% { opacity: 0.7; }
        }
        
        @media (min-width: 768px) {
          .modal-content {
            max-width: 42rem !important;
          }
        }
      `}),v.jsx("div",{className:"modal-overlay",onClick:N,children:v.jsxs("div",{className:"modal-content",dir:"rtl",onClick:R=>R.stopPropagation(),style:{display:"flex",flexDirection:"column",maxHeight:"90vh"},children:[v.jsxs("div",{style:{background:T?"linear-gradient(to right, #dc2626, #b91c1c)":I?"linear-gradient(to right, #9333ea, #7c3aed)":"linear-gradient(to right, #2563eb, #1d4ed8)",color:"white",padding:"1.5rem"},children:[v.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[T?v.jsx("span",{style:{fontSize:"24px"},children:""}):I?v.jsx(oc,{size:24,style:{animation:"bellRing 2s infinite"}}):v.jsx(uc,{size:24}),v.jsx("h3",{style:{fontSize:"1.25rem",fontWeight:"bold",margin:0},children:T?"    ":I?"    ":`  ${e==null?void 0:e.toLocaleDateString("he-IL")}`})]}),v.jsx("button",{onClick:()=>i(!1),style:{background:"none",border:"none",color:"white",fontSize:"1.5rem",cursor:"pointer",padding:"0.25rem"},children:""})]}),v.jsxs("div",{style:{marginTop:"0.5rem",color:T?"#fecaca":I?"#e9d5ff":"#bfdbfe"},children:[F.length," ",F.length!==1?"":"",T&&"     ",I&&!T&&"    "]})]}),I&&!T&&v.jsxs("div",{className:"availability-warning",children:[v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.75rem"},children:[v.jsx(oc,{size:20,style:{color:"#9333ea"}}),v.jsx("h4",{style:{fontSize:"1rem",fontWeight:"bold",margin:0,color:"#581c87"},children:"  !"})]}),v.jsx("p",{style:{fontSize:"0.875rem",color:"#4c1d95",margin:"0 0 0.75rem 0",lineHeight:"1.4"},children:'        .   " "  .'}),v.jsx("div",{style:{background:"rgba(243, 232, 255, 0.7)",padding:"0.5rem",borderRadius:"6px",fontSize:"0.8rem",color:"#4c1d95"},children:"     "})]}),v.jsx("div",{style:{padding:"1.5rem",paddingBottom:"2.5rem",overflowY:"auto",flex:1,minHeight:0},children:v.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:F.map((R,D)=>{const L=R.availabilityStatus==="CONFLICT"&&R.availabilityConflicts.length>0,{isOverdue:G,overdueDays:U}=x(R);return v.jsxs("div",{style:{border:G?"2px solid #dc2626":L?"2px solid #9333ea":"1px solid #e5e7eb",borderRadius:"8px",background:G?"#fef2f2":L?"#faf5ff":"white",boxShadow:G?"0 4px 12px rgba(220, 38, 38, 0.15)":L?"0 4px 12px rgba(147, 51, 234, 0.15)":"0 1px 3px 0 rgba(0, 0, 0, 0.1)"},children:[G&&v.jsxs("div",{style:{background:"linear-gradient(135deg, #fee2e2 0%, #fecaca 100%)",padding:"0.75rem",borderBottom:"1px solid #f87171",borderTopLeftRadius:"6px",borderTopRightRadius:"6px"},children:[v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem"},children:[v.jsx("span",{style:{fontSize:"18px"},children:""}),v.jsx("span",{style:{fontSize:"0.875rem",fontWeight:"bold",color:"#dc2626"},children:"   !"})]}),v.jsxs("div",{style:{fontSize:"0.8rem",color:"#b91c1c"},children:["  ",U," ",U>1?"":"","   : ",new Date(R.returnDate).toLocaleDateString("he-IL")]})]}),L&&!G&&v.jsxs("div",{style:{background:"linear-gradient(135deg, #f3e8ff 0%, #e9d5ff 100%)",padding:"0.75rem",borderBottom:"1px solid #c084fc",borderTopLeftRadius:"6px",borderTopRightRadius:"6px"},children:[v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem"},children:[v.jsx(oc,{size:16,style:{color:"#9333ea"}}),v.jsx("span",{style:{fontSize:"0.875rem",fontWeight:"bold",color:"#581c87"},children:"   :"})]}),v.jsx("div",{style:{fontSize:"0.8rem",color:"#4c1d95"},children:R.availabilityConflicts.map((H,te)=>v.jsxs("div",{style:{marginBottom:"0.25rem"},children:[" ",v.jsxs("strong",{children:[H.itemName,":"]})," ",H.message]},te))})]}),v.jsxs("div",{style:{padding:"1rem",borderBottom:L||G?"none":"1px solid #f3f4f6"},children:[v.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"0.75rem"},children:v.jsxs("div",{style:{flex:1},children:[v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem"},children:[v.jsx("h4",{style:{fontSize:"1.125rem",fontWeight:"bold",color:G?"#dc2626":L?"#581c87":"#1f2937",margin:0},children:R.clientName}),v.jsx("span",{style:{padding:"0.25rem 0.75rem",borderRadius:"9999px",fontSize:"0.75rem",fontWeight:"500",background:G?"#dc2626":L?"#9333ea":"#3b82f6",color:"white"},children:G?`  ${U} `:L?"  ":` #${D+1}`})]}),v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",fontSize:"0.875rem",color:G?"#b91c1c":L?"#4c1d95":"#4b5563",marginBottom:"0.5rem"},children:[v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[v.jsx(id,{size:16}),v.jsx("span",{children:R.phone})]}),v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[v.jsx(uc,{size:16}),v.jsxs("span",{children:[new Date(R.pickupDate).toLocaleDateString("he-IL")," - ",new Date(R.returnDate).toLocaleDateString("he-IL")]})]})]}),v.jsx("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap",marginBottom:"0.75rem"},children:R.events.map((H,te)=>v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem",padding:"0.25rem 0.5rem",borderRadius:"12px",fontSize:"0.75rem",fontWeight:"500",background:G?"#dc2626":L?"#9333ea":H.type===""?"#10b981":H.type===""?"#f59e0b":"#3b82f6",color:"white",border:G||L?"1px solid rgba(255,255,255,0.3)":"none"},children:[v.jsx("span",{children:H.icon}),v.jsx("span",{children:H.description}),H.isMultiDay&&v.jsxs("span",{style:{fontSize:"0.65rem",opacity:.8},children:["( ",H.dayNumber,"/",H.totalDays,")"]})]},te))})]})}),R.items&&R.items.length>0&&v.jsxs("div",{style:{marginBottom:"1rem"},children:[v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem"},children:[v.jsx(Gs,{size:16,style:{color:G?"#dc2626":L?"#9333ea":"#6b7280"}}),v.jsxs("span",{style:{fontSize:"0.875rem",fontWeight:"500",color:G?"#dc2626":L?"#581c87":"#374151"},children:[" (",R.items.reduce((H,te)=>H+(te.quantity||1),0),")"]})]}),v.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem"},children:[R.items.slice(0,3).map((H,te)=>{const se=L&&R.availabilityConflicts.some(ee=>ee.itemName===H.name);return v.jsxs("div",{style:{background:G?"#fee2e2":se?"#f3e8ff":"#f9fafb",padding:"0.25rem 0.75rem",borderRadius:"9999px",fontSize:"0.75rem",color:G?"#dc2626":se?"#581c87":"#4b5563",border:G?"1px solid #f87171":se?"1px solid #c084fc":"1px solid #e5e7eb",fontWeight:G||se?"bold":"normal"},children:[G?" ":se?" ":"",H.name," ",H.quantity>1?`(${H.quantity})`:""]},te)}),R.items.length>3&&v.jsxs("div",{style:{background:G?"#fee2e2":L?"#f3e8ff":"#eff6ff",padding:"0.25rem 0.75rem",borderRadius:"9999px",fontSize:"0.75rem",color:G?"#dc2626":L?"#581c87":"#2563eb",border:G?"1px solid #f87171":L?"1px solid #c084fc":"1px solid #dbeafe"},children:["+",R.items.length-3," "]})]})]})]}),v.jsx("div",{style:{padding:"1rem",background:G?"#fef2f2":L?"#faf5ff":"#f9fafb"},children:v.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"0.75rem",flexWrap:"wrap"},children:[G&&c&&v.jsxs("button",{onClick:()=>c(R.orderId),style:{display:"flex",alignItems:"center",gap:"0.5rem",background:"#dc2626",color:"white",padding:"0.5rem 1rem",borderRadius:"8px",border:"none",cursor:"pointer",fontSize:"0.875rem",fontWeight:"bold",boxShadow:"0 4px 12px rgba(220, 38, 38, 0.25)",animation:"pulse 2s infinite"},children:[v.jsx(x4,{size:16}),"  - !"]}),R.email&&_(R)&&C(R)&&v.jsx("button",{onClick:()=>M(R),disabled:f===R.orderId||S(R),style:{display:"flex",alignItems:"center",gap:"0.5rem",background:f===R.orderId?"#f59e0b":S(R)?"#22c55e":"#7c3aed",color:"white",padding:"0.5rem 1rem",borderRadius:"8px",border:"none",cursor:f===R.orderId||S(R)?"not-allowed":"pointer",fontSize:"0.875rem",opacity:S(R)?.8:1,fontWeight:S(R)?"bold":"normal"},title:Y(R),children:f===R.orderId?v.jsxs(v.Fragment,{children:[v.jsx("div",{style:{width:"1rem",height:"1rem",border:"2px solid #ffffff",borderTop:"2px solid transparent",borderRadius:"50%",animation:"spin 1s linear infinite"}}),"..."]}):v.jsxs(v.Fragment,{children:[v.jsx(LB,{size:16}),P(R)]})}),R.events.some(H=>H.icon===""||H.icon==="")&&v.jsxs("button",{onClick:()=>o({open:!0,eventId:`${R.orderId}-edit`,items:R.items.map(H=>({...H}))}),style:{display:"flex",alignItems:"center",gap:"0.5rem",background:G?"#dc2626":L?"#9333ea":"#2563eb",color:"white",padding:"0.5rem 1rem",borderRadius:"8px",border:"none",cursor:"pointer",fontSize:"0.875rem",fontWeight:G||L?"bold":"normal",boxShadow:G||L?"0 4px 12px rgba(147, 51, 234, 0.25)":"none",animation:G||L?"pulse 2s infinite":"none"},children:[v.jsx(K5,{size:16}),G||L?"  - !":" "]}),v.jsxs("button",{onClick:()=>{const H=t.filter(te=>te.orderId===R.orderId);a(H)},style:{display:"flex",alignItems:"center",gap:"0.5rem",background:"#059669",color:"white",padding:"0.5rem 1rem",borderRadius:"8px",border:"none",cursor:"pointer",fontSize:"0.875rem"},children:[v.jsx(l2,{size:16})," "]}),R.events.some(H=>H.icon==="")&&v.jsxs("button",{onClick:()=>j(R.orderId),style:{display:"flex",alignItems:"center",gap:"0.5rem",background:"#dc2626",color:"white",padding:"0.5rem 1rem",borderRadius:"8px",border:"none",cursor:"pointer",fontSize:"0.875rem"},children:[v.jsx(Q5,{size:16}),""]}),c&&R.events.some(H=>H.type==="")&&!G&&v.jsxs("button",{onClick:()=>c(R.orderId),style:{display:"flex",alignItems:"center",gap:"0.5rem",background:"#f59e0b",color:"white",padding:"0.5rem 1rem",borderRadius:"8px",border:"none",cursor:"pointer",fontSize:"0.875rem"},children:[v.jsx(x4,{size:16})," "]})]})})]},R.orderId)})})}),v.jsx("div",{style:{background:T?"#fef2f2":I?"#faf5ff":"#f9fafb",padding:"1rem 1.5rem",borderTop:T?"1px solid #f87171":I?"1px solid #d8b4fe":"1px solid #e5e7eb"},children:v.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[v.jsxs("div",{style:{fontSize:"0.875rem",color:T?"#dc2626":I?"#581c87":"#4b5563"},children:['" ',F.reduce((R,D)=>{var L;return R+(((L=D.items)==null?void 0:L.reduce((G,U)=>G+(U.quantity||1),0))||0)},0)," ",T&&"      ",I&&!T&&"     "]}),v.jsx("button",{onClick:()=>i(!1),style:{background:T?"#dc2626":I?"#9333ea":"#2563eb",color:"white",padding:"0.5rem 1.5rem",borderRadius:"8px",border:"none",cursor:"pointer"},children:""})]})})]})})]})},Hq=({show:n,setShow:e,selectedEvents:t,allItems:r})=>{var o;if(le.useEffect(()=>(n?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[n]),!n)return null;const i=((o=t==null?void 0:t[0])==null?void 0:o.items)||[],a=s=>{s.target===s.currentTarget&&e(!1)};return v.jsxs(v.Fragment,{children:[v.jsx("style",{jsx:!0,global:!0,children:`
        .items-modal-overlay {
          position: fixed !important;
          top: 0 !important;
          left: 0 !important;
          right: 0 !important;
          bottom: 0 !important;
          background-color: rgba(0, 0, 0, 0.5) !important;
          display: flex !important;
          align-items: center !important;
          justify-content: center !important;
          padding: 1rem !important;
          z-index: 99999 !important;
        }
        
        .items-modal-content {
          background: white !important;
          border-radius: 12px !important;
          box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25) !important;
          width: 100% !important;
          max-width: 28rem !important;
          max-height: 90vh !important;
          overflow: hidden !important;
          position: relative !important;
          z-index: 100000 !important;
        }
      `}),v.jsx("div",{className:"items-modal-overlay",onClick:a,children:v.jsxs("div",{className:"items-modal-content",dir:"rtl",onClick:s=>s.stopPropagation(),children:[v.jsxs("div",{style:{background:"linear-gradient(to right, #059669, #047857)",color:"white",padding:"1.5rem"},children:[v.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[v.jsx(Gs,{size:24}),v.jsx("h2",{style:{fontSize:"1.25rem",fontWeight:"bold",margin:0},children:" "})]}),v.jsx("button",{onClick:()=>e(!1),style:{background:"none",border:"none",color:"white",fontSize:"1.5rem",cursor:"pointer",padding:"0.25rem"},children:v.jsx(uu,{size:20})})]}),v.jsxs("div",{style:{marginTop:"0.5rem",color:"#a7f3d0"},children:[i.length," ",i.length!==1?"":""," "]})]}),v.jsx("div",{style:{padding:"1.5rem",overflowY:"auto",maxHeight:"calc(90vh - 180px)"},children:i.length>0?v.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:i.map((s,c)=>(r.find(f=>f.name===s.name),v.jsx("div",{style:{border:"1px solid #e5e7eb",borderRadius:"8px",padding:"1rem",background:"#f9fafb"},children:v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[s.imageUrl&&v.jsx("img",{src:s.imageUrl,alt:s.name,style:{width:"4rem",height:"4rem",objectFit:"cover",borderRadius:"8px",border:"2px solid #e5e7eb"}}),v.jsxs("div",{style:{flex:1},children:[v.jsx("div",{style:{fontSize:"1.125rem",fontWeight:"bold",color:"#1f2937",marginBottom:"0.25rem"},children:s.name}),v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",fontSize:"0.875rem",color:"#6b7280"},children:[v.jsxs("span",{children:[v.jsx("strong",{children:":"})," ",s.quantity]}),v.jsxs("span",{children:[v.jsx("strong",{children:" :"}),v.jsx("code",{style:{background:"#f3f4f6",padding:"0.125rem 0.375rem",borderRadius:"4px",marginRight:"0.25rem"},children:s.itemId||" "})]})]})]}),v.jsxs("div",{style:{background:"#2563eb",color:"white",padding:"0.5rem 1rem",borderRadius:"20px",fontSize:"0.875rem",fontWeight:"bold"},children:["",s.quantity]})]})},c)))}):v.jsxs("div",{style:{textAlign:"center",padding:"2rem",color:"#6b7280"},children:[v.jsx(Gs,{size:48,style:{color:"#d1d5db",marginBottom:"1rem"}}),v.jsx("p",{children:"   "})]})}),v.jsx("div",{style:{background:"#f9fafb",padding:"1rem 1.5rem",borderTop:"1px solid #e5e7eb"},children:v.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[v.jsxs("div",{style:{fontSize:"0.875rem",color:"#4b5563"},children:['" : ',i.reduce((s,c)=>s+(c.quantity||1),0)]}),v.jsx("button",{onClick:()=>e(!1),style:{background:"#059669",color:"white",padding:"0.5rem 1.5rem",borderRadius:"8px",border:"none",cursor:"pointer",fontWeight:"500"},children:""})]})})]})})]})},Wq=({show:n,data:e,setData:t,allItems:r,setShowReport:i,fetchItemsAndOrders:a,allEvents:o})=>{const[s,c]=le.useState({items:[]}),[f,d]=le.useState(!1),[p,g]=le.useState(""),[m,x]=le.useState(""),[_,C]=le.useState({pickupDate:null,returnDate:null}),[S,k]=le.useState(new Set);if(le.useEffect(()=>(n?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[n]),le.useEffect(()=>{if(n&&e.eventId&&o.length>0){console.log(" Initializing edit modal");const D=e.eventId.split("-")[0],L=o.filter(G=>G.orderId===D);if(L.length>0){const G=L[0];C({pickupDate:new Date(G.pickupDate),returnDate:new Date(G.returnDate)});const U=new Set;G.availabilityConflicts&&G.availabilityConflicts.length>0&&G.availabilityConflicts.forEach(H=>{U.add(H.itemName)}),k(U),console.log(" Order dates:",{pickup:G.pickupDate,return:G.returnDate}),console.log(" Problematic items:",Array.from(U))}c({items:[...e.items||[]]})}},[n,e,o]),!n)return null;const M=D=>{var ie,$;const L=r.find(W=>W.name===D);if(!L)return console.warn(` Stock not found for ${D}`),0;const G=L.quantity||0,U=(ie=e.eventId)==null?void 0:ie.split("-")[0];if(!_.pickupDate||!_.returnDate)return console.warn(" Missing pickup/return dates for current order."),G;console.log(` Checking "${D}" availability from ${_.pickupDate.toDateString()} to ${_.returnDate.toDateString()}`),console.log(` Total stock from database: ${G}`);let H=0;const te=new Set;o.forEach(W=>{if(W.orderId===U||te.has(`${W.orderId}-${D}`))return;const Q=new Date(W.pickupDate),J=new Date(W.returnDate);if(Q<=_.returnDate&&J>=_.pickupDate&&W.items){const be=W.items.find(_e=>_e.name===D);be&&(console.log(` Overlapping Order ID: ${W.orderId}`),console.log(`    Dates: ${Q.toDateString()} - ${J.toDateString()}`),console.log(`    Reserved: ${be.quantity}`),H+=be.quantity||0,te.add(`${W.orderId}-${D}`))}});const se=(($=s.items.find(W=>W.name===D))==null?void 0:$.quantity)||0,ee=G-H-se;return console.log(` Available: ${ee} = ${G} - ${H} - ${se} (already in order)`),Math.max(0,ee)},P=D=>{console.log(" Trying to add item:",D.name);const L=M(D.name);if(L<=0){alert(`    -${D.name}. : ${L}`);return}const G=s.items.findIndex(U=>U.name===D.name);if(G>=0){const U=[...s.items];U[G]={...U[G],quantity:U[G].quantity+1},c({...s,items:U})}else{const U={name:D.name,quantity:1,ItemId:D.ItemId||D.itemId||D.id,itemId:D.ItemId||D.itemId||D.id,id:D.id,imageUrl:D.imageUrl||""};c({...s,items:[...s.items,U]})}},Y=(D,L)=>{var te;if(console.log(` Updating ${D} to quantity: ${L}`),L<=0){c({...s,items:s.items.filter(se=>se.name!==D)});return}const G=((te=s.items.find(se=>se.name===D))==null?void 0:te.quantity)||0,U=M(D)+G;if(L>U){alert(`    ${L} -${D}. : ${U}`);return}const H=s.items.map(se=>se.name===D?{...se,quantity:L}:se);c({...s,items:H})},z=D=>{console.log(" Removing item:",D),c({...s,items:s.items.filter(L=>L.name!==D)})},F=async()=>{var D;try{d(!0);const L=(D=e.eventId)==null?void 0:D.split("-")[0];if(!L)throw new Error(":    ");console.log(" Saving items:",s.items);const G=s.items.map(U=>({...U,ItemId:U.ItemId||U.itemId||U.id,itemId:U.ItemId||U.itemId||U.id}));await ia(rr(wt,"orders",L),{items:G,availabilityStatus:"OK",availabilityConflicts:[],needsAttention:!1,lastAvailabilityCheck:kr()}),await a(),t({open:!1,eventId:null,items:[]}),i(!1),alert("   !")}catch(L){console.error("  :",L),alert(L.message||" .  .")}finally{d(!1)}},I=()=>{t({open:!1,eventId:null,items:[]})},T=p.toLowerCase(),j=m.trim().toLowerCase(),N=r.filter(D=>D.name.toLowerCase().includes(T)&&(j===""||String(D.ItemId||D.itemId||"").toLowerCase()===j)),R=D=>{D.target===D.currentTarget&&I()};return v.jsxs(v.Fragment,{children:[v.jsx("style",{jsx:!0,global:!0,children:`
        .edit-modal-overlay {
          position: fixed !important;
          top: 0 !important;
          left: 0 !important;
          right: 0 !important;
          bottom: 0 !important;
          background-color: rgba(0, 0, 0, 0.5) !important;
          display: flex !important;
          align-items: flex-start !important;
          justify-content: center !important;
          padding: 0.5rem !important;
          z-index: 99999 !important;
          overflow-x: hidden !important;
          padding-top: 1rem !important;
        }
        
        .edit-modal-content {
          background: white !important;
          border-radius: 12px !important;
          box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25) !important;
          width: 100% !important;
          max-width: 56rem !important;
          max-height: 96vh !important;
          overflow: hidden !important;
          position: relative !important;
          z-index: 100000 !important;
          display: flex !important;
          flex-direction: column !important;
        }

        .problematic-item {
          border: 2px solid #9333ea !important;
          background: linear-gradient(135deg, #faf5ff 0%, #f3e8ff 100%) !important;
          animation: problemPulse 3s ease-in-out infinite !important;
        }

        @keyframes problemPulse {
          0%, 100% { box-shadow: 0 0 0 0 rgba(147, 51, 234, 0.4); }
          50% { box-shadow: 0 0 0 4px rgba(147, 51, 234, 0.1); }
        }

        .problematic-item-indicator {
          background: #9333ea !important;
          color: white !important;
          padding: 0.25rem 0.5rem !important;
          border-radius: 4px !important;
          font-size: 0.75rem !important;
          font-weight: bold !important;
          margin-left: 0.5rem !important;
        }

        @keyframes warningPulse {
          0%, 100% { box-shadow: 0 0 0 0 rgba(147, 51, 234, 0.4); }
          50% { box-shadow: 0 0 0 8px rgba(147, 51, 234, 0.1); }
        }

        @keyframes bellRing {
          0%, 100% { transform: rotate(0deg); }
          10%, 30%, 50%, 70%, 90% { transform: rotate(-10deg); }
          20%, 40%, 60%, 80% { transform: rotate(10deg); }
        }

        @media (max-width: 768px) {
          .edit-modal-overlay {
            padding: 0.25rem !important;
            padding-top: 0.5rem !important;
          }
          
          .edit-modal-content {
            max-height: 98vh !important;
            border-radius: 8px !important;
          }
          
          .modal-footer-mobile {
            flex-direction: column !important;
            gap: 0.5rem !important;
          }
          
          .modal-footer-mobile button {
            width: 100% !important;
          }
        }

        @keyframes spin {
          0% { transform: rotate(0deg); }
          100% { transform: rotate(360deg); }
        }
      `}),v.jsx("div",{className:"edit-modal-overlay",onClick:R,children:v.jsxs("div",{className:"edit-modal-content",dir:"rtl",onClick:D=>D.stopPropagation(),children:[v.jsxs("div",{style:{background:S.size>0?"linear-gradient(to right, #9333ea, #7c3aed)":"linear-gradient(to right, #2563eb, #1d4ed8)",color:"white",padding:"1rem",flexShrink:0},children:[v.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[S.size>0?v.jsx(oc,{size:24,style:{animation:"bellRing 2s infinite"}}):v.jsx(K5,{size:24}),v.jsx("h3",{style:{fontSize:"1.25rem",fontWeight:"bold",margin:0},children:S.size>0?"   -   ":" "})]}),v.jsx("button",{onClick:I,style:{background:"none",border:"none",color:"white",fontSize:"1.5rem",cursor:"pointer",padding:"0.25rem"},children:""})]}),_.pickupDate&&_.returnDate&&v.jsxs("div",{style:{marginTop:"0.5rem",fontSize:"0.875rem",color:S.size>0?"#e9d5ff":"#bfdbfe"},children:["  : ",_.pickupDate.toLocaleDateString("he-IL")," - ",_.returnDate.toLocaleDateString("he-IL"),S.size>0&&v.jsxs("div",{style:{marginTop:"0.25rem",fontWeight:"bold"},children:[" ",S.size,"   "]})]})]}),v.jsxs("div",{style:{padding:"1rem",overflowY:"auto",flex:1},children:[S.size>0&&v.jsxs("div",{style:{background:"linear-gradient(135deg, #f3e8ff 0%, #e9d5ff 100%)",border:"2px solid #9333ea",borderRadius:"8px",padding:"1rem",marginBottom:"1.5rem",animation:"warningPulse 2s ease-in-out infinite"},children:[v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem"},children:[v.jsx(oc,{size:20,style:{color:"#9333ea"}}),v.jsxs("h4",{style:{fontSize:"1rem",fontWeight:"bold",margin:0,color:"#581c87"},children:[" ",S.size,"    !"]})]}),v.jsx("p",{style:{fontSize:"0.875rem",color:"#4c1d95",margin:"0 0 0.5rem 0"},children:"       .          ."}),v.jsxs("div",{style:{background:"rgba(243, 232, 255, 0.7)",padding:"0.5rem",borderRadius:"6px",fontSize:"0.8rem",color:"#4c1d95"},children:["  : ",Array.from(S).join(", ")]})]}),v.jsxs("div",{style:{marginBottom:"1.5rem"},children:[v.jsxs("h4",{style:{fontSize:"1.125rem",fontWeight:"600",marginBottom:"1rem",color:"#1f2937"},children:["   (",s.items.length,")"]}),s.items.length>0?v.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:s.items.map((D,L)=>{const G=r.find(se=>se.name===D.name),H=M(D.name)+D.quantity,te=S.has(D.name);return v.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",background:te?"#faf5ff":"#f9fafb",padding:"0.75rem",borderRadius:"8px",border:te?"2px solid #9333ea":"1px solid #e5e7eb"},className:te?"problematic-item":"",children:[te&&v.jsx("div",{className:"problematic-item-indicator",children:" "}),v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",flex:1,minWidth:0},children:[(G==null?void 0:G.imageUrl)&&v.jsx("img",{src:G.imageUrl,alt:D.name,style:{width:"4.5rem",height:"4.5rem",objectFit:"cover",borderRadius:"6px",flexShrink:0,border:te?"2px solid #9333ea":"none"}}),v.jsxs("div",{style:{minWidth:0,flex:1},children:[v.jsxs("div",{style:{fontWeight:"500",color:te?"#581c87":"#1f2937",fontSize:"0.9rem"},children:[te&&" ",D.name]}),v.jsxs("div",{style:{fontSize:"0.75rem",color:"#6b7280"},children:[": ",(G==null?void 0:G.ItemId)||(G==null?void 0:G.itemId)||" "]}),v.jsxs("div",{style:{fontSize:"0.7rem",color:te?"#9333ea":"#059669",fontWeight:te?"bold":"500"},children:[": ",H,te&&" ( !)"]})]})]}),v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.4rem",flexShrink:0},children:[v.jsx("button",{onClick:()=>Y(D.name,D.quantity-1),style:{background:"#ef4444",color:"white",width:"1.8rem",height:"1.8rem",borderRadius:"50%",border:"none",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},disabled:f,children:v.jsx(qB,{size:12})}),v.jsx("span",{style:{width:"1.5rem",textAlign:"center",fontWeight:"500",fontSize:"0.9rem",color:te?"#9333ea":"#1f2937"},children:D.quantity}),v.jsx("button",{onClick:()=>Y(D.name,D.quantity+1),style:{background:D.quantity>=H?"#9ca3af":"#10b981",color:"white",width:"1.8rem",height:"1.8rem",borderRadius:"50%",border:"none",cursor:D.quantity>=H?"not-allowed":"pointer",display:"flex",alignItems:"center",justifyContent:"center"},disabled:f||D.quantity>=H,children:v.jsx(oC,{size:12})}),v.jsx("button",{onClick:()=>z(D.name),style:{background:te?"#9333ea":"#ef4444",color:"white",padding:"0.2rem 0.5rem",borderRadius:"6px",border:"none",cursor:"pointer",marginRight:"0.3rem",fontSize:"0.75rem",fontWeight:te?"bold":"normal"},disabled:f,children:te?" ":""})]})]},L)})}):v.jsx("div",{style:{textAlign:"center",padding:"1rem",color:"#6b7280"},children:"  "})]}),v.jsxs("div",{children:[v.jsx("h4",{style:{fontSize:"1.125rem",fontWeight:"600",marginBottom:"1rem",color:"#1f2937"},children:"  "}),v.jsx("div",{style:{marginBottom:"1rem"},children:v.jsxs("div",{style:{position:"relative"},children:[v.jsx(lx,{size:18,style:{position:"absolute",right:"0.75rem",top:"50%",transform:"translateY(-50%)",color:"#6b7280"}}),v.jsx("input",{type:"text",placeholder:"   ...",value:p,onChange:D=>g(D.target.value),style:{width:"100%",padding:"0.75rem 2.8rem 0.75rem 0.75rem",border:"1px solid #d1d5db",borderRadius:"8px",fontSize:"16px",boxSizing:"border-box"},disabled:f})]})}),v.jsx("div",{style:{marginBottom:"1rem"},children:v.jsxs("div",{style:{position:"relative"},children:[v.jsx(lx,{size:18,style:{position:"absolute",right:"0.75rem",top:"50%",transform:"translateY(-50%)",color:"#6b7280"}}),v.jsx("input",{type:"text",placeholder:"    ...",value:m,onChange:D=>x(D.target.value),style:{width:"100%",padding:"0.75rem 2.8rem 0.75rem 0.75rem",border:"1px solid #d1d5db",borderRadius:"8px",fontSize:"16px",boxSizing:"border-box"},disabled:f})]})}),v.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(220px, 1fr))",gap:"1rem",maxHeight:"12rem",overflowY:"auto",overflowX:"hidden"},children:N.map((D,L)=>{var ee;const G=s.items.some(ie=>ie.name===D.name),U=G?(ee=s.items.find(ie=>ie.name===D.name))==null?void 0:ee.quantity:0,H=M(D.name),te=U<H+U,se=S.has(D.name);return v.jsx("div",{onClick:()=>!f&&te&&P(D),style:{padding:"0.6rem",borderRadius:"8px",border:G?se?"2px solid #9333ea":"2px solid #3b82f6":"1px solid #e5e7eb",background:G?se?"#faf5ff":"#eff6ff":"white",cursor:f||!te?"not-allowed":"pointer",transition:"all 0.2s",opacity:f||!te?.6:1},children:v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[D.imageUrl&&v.jsx("img",{src:D.imageUrl,alt:D.name,style:{width:"6rem",height:"6rem",objectFit:"cover",borderRadius:"6px",flexShrink:0,border:se?"1px solid #9333ea":"none"}}),v.jsxs("div",{style:{flex:1,minWidth:0},children:[v.jsxs("div",{style:{fontWeight:"500",fontSize:"0.8rem",color:se?"#581c87":"#1f2937",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:[se&&" ",D.name]}),v.jsxs("div",{style:{fontSize:"0.7rem",color:"#6b7280"},children:[": ",D.itemId||D.ItemId]}),v.jsxs("div",{style:{fontSize:"0.65rem",color:H>0?"#059669":"#dc2626",fontWeight:"500"},children:[": ",H]}),G&&v.jsxs("div",{style:{fontSize:"0.65rem",color:se?"#9333ea":"#2563eb",fontWeight:"500"},children:[": ",U,se&&" (!)"]})]})]})},L)})})]})]}),v.jsx("div",{style:{background:S.size>0?"#faf5ff":"#f9fafb",padding:"1rem",borderTop:S.size>0?"1px solid #d8b4fe":"1px solid #e5e7eb",flexShrink:0},children:v.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},className:"modal-footer-mobile",children:[v.jsxs("div",{style:{fontSize:"0.875rem",color:S.size>0?"#581c87":"#4b5563"},children:['" : ',s.items.reduce((D,L)=>D+L.quantity,0),S.size>0&&`   ${S.size} `]}),v.jsxs("div",{style:{display:"flex",gap:"0.75rem"},className:"modal-footer-mobile",children:[v.jsx("button",{onClick:I,disabled:f,style:{background:"#6b7280",color:"white",padding:"0.5rem 1.5rem",borderRadius:"8px",border:"none",cursor:f?"not-allowed":"pointer",fontSize:"0.875rem",opacity:f?.6:1},children:""}),v.jsx("button",{onClick:F,disabled:f||s.items.length===0,style:{background:s.items.length===0?"#9ca3af":S.size>0?"#9333ea":"#2563eb",color:"white",padding:"0.5rem 1.5rem",borderRadius:"8px",border:"none",cursor:s.items.length===0||f?"not-allowed":"pointer",fontSize:"0.875rem",display:"flex",alignItems:"center",gap:"0.5rem",fontWeight:S.size>0?"bold":"normal"},children:f?v.jsxs(v.Fragment,{children:[v.jsx("div",{style:{width:"1rem",height:"1rem",border:"2px solid #ffffff",borderTop:"2px solid transparent",borderRadius:"50%",animation:"spin 1s linear infinite"}}),"..."]}):v.jsxs(v.Fragment,{children:[v.jsx(c2,{size:16}),S.size>0?"  ":" "]})})]})]})})]})})]})};class $q{static async checkAllActiveOrders(){try{console.log("      ...");const[e,t]=await Promise.all([this.getAllActiveOrders(),this.getAllItems()]);console.log(`  ${e.length}   -${t.length}  `);const r=[];for(const i of e){const a=await this.checkOrderAvailability(i,e,t);a.length>0&&r.push({order:i,conflicts:a})}return console.log(`  ${r.length}    `),await this.updateOrdersWithConflicts(r),{success:!0,totalOrders:e.length,problematicOrders:r.length,conflicts:r}}catch(e){return console.error("   :",e),{success:!1,error:e.message}}}static async getAllActiveOrders(){return(await nr(hn(wt,"orders"))).docs.map(t=>({id:t.id,...t.data()})).filter(t=>t.status==="open").sort((t,r)=>new Date(t.pickupDate)-new Date(r.pickupDate))}static async getAllItems(){return(await nr(hn(wt,"items"))).docs.map(t=>({id:t.id,...t.data()})).filter(t=>t.isDeleted!==!0)}static async checkOrderAvailability(e,t,r){const i=[];if(!e.items||!e.pickupDate||!e.returnDate)return i;const a=new Date(e.pickupDate),o=new Date(e.returnDate);for(const s of e.items){const c=r.find(d=>d.id===s.id||d.name===s.name);if(!c){i.push({itemName:s.name,itemId:s.ItemId||s.itemId,requested:s.quantity,available:0,issue:"ITEM_NOT_FOUND",message:"   "});continue}const f=this.calculateAvailableQuantity(c,e,t,a,o);s.quantity>f&&i.push({itemName:s.name,itemId:c.ItemId,requested:s.quantity,available:f,totalStock:c.quantity,issue:"INSUFFICIENT_STOCK",message:`: ${s.quantity}, : ${f}`})}return i}static calculateAvailableQuantity(e,t,r,i,a){const o=e.quantity||0;let s=0;for(const c of r){if(c.id===t.id||!c.pickupDate||!c.returnDate||!c.items)continue;const f=new Date(c.pickupDate);if(new Date(c.returnDate)>=i&&f<=a){const g=c.items.find(m=>m.id===e.id||m.name===e.name);g&&(s+=g.quantity||0)}}return Math.max(0,o-s)}static async updateOrdersWithConflicts(e){const t=[];for(const{order:r,conflicts:i}of e)try{const a={availabilityStatus:"CONFLICT",availabilityConflicts:i,conflictDetectedAt:new Date().toISOString(),needsAttention:!0,lastAvailabilityCheck:kr()};t.push(ia(rr(wt,"orders",r.id),a)),console.log(`   ${r.simpleId||r.id}  ${i.length}  `)}catch(a){console.error(`    ${r.id}:`,a)}t.length>0&&(await Promise.all(t),console.log(`  ${t.length}    `))}static async clearAvailabilityConflict(e){try{await ia(rr(wt,"orders",e),{availabilityStatus:"OK",availabilityConflicts:[],needsAttention:!1,lastAvailabilityCheck:kr()}),console.log(`     ${e}`)}catch(t){console.error("    :",t)}}static async runAfterOrderClosure(e){console.log(`       ${e}`);const t=await this.checkAllActiveOrders();return t.success&&t.problematicOrders>0?(console.log(`  ${t.problematicOrders}      `),{shouldShowAlert:!0,message:` ${t.problematicOrders}       `,conflicts:t.conflicts}):{shouldShowAlert:!1}}static async quickCheckOrder(e){try{const[t,r]=await Promise.all([this.getAllActiveOrders(),this.getAllItems()]),i=t.find(o=>o.id===e);if(!i)return{hasConflicts:!1};const a=await this.checkOrderAvailability(i,t,r);return{hasConflicts:a.length>0,conflicts:a}}catch(t){return console.error("   :",t),{hasConflicts:!1,error:t.message}}}}const Gq=({show:n,order:e,onClose:t,onCompleteInspection:r,allItems:i=[],updateItemQuantities:a})=>{const[o,s]=le.useState([]),[c,f]=le.useState(new Set),[d,p]=le.useState(""),[g,m]=le.useState(!1),[x,_]=le.useState(null);if(le.useEffect(()=>{if(n&&(e!=null&&e.items)){const z=e.items.map(F=>({itemId:F.id||F.itemId,name:F.name,quantityExpected:F.quantity||1,quantityReturned:F.quantity||1,isFullyReturned:!0,condition:"good",damageDescription:"",repairCost:0,notes:""}));s(z),f(new Set),p(""),_(null)}},[n,e]),le.useEffect(()=>(n?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[n]),!n||!e)return null;const C=(z,F,I)=>{s(T=>T.map((j,N)=>{if(N===z){const R={...j,[F]:I};return R.isFullyReturned=I>=j.quantityExpected,I<j.quantityExpected?R.condition="lost":R.condition==="lost"&&(R.condition="good"),R}return j})),f(T=>{const j=new Set(T);return j.delete(z),j})},S=z=>{f(F=>new Set([...F,z]))},k=()=>o.length>0&&c.size===o.length,M=async()=>{if(!k()){alert("       ");return}const z=o.reduce((j,N)=>j+N.quantityExpected,0),F=o.reduce((j,N)=>j+N.quantityReturned,0),I=Math.round(F/z*100),T=`       ?

:
  : ${z}/${z}
  : ${F}/${z}
  : ${I}%

    .`;if(window.confirm(T))try{m(!0);const j=o.reduce((U,H)=>U+H.quantityExpected,0),N=o.reduce((U,H)=>U+H.quantityReturned,0),R=o.filter(U=>U.condition==="damaged").length,D=o.reduce((U,H)=>U+(H.repairCost||0),0),L={totalItemsExpected:j,totalItemsReturned:N,totalDamages:R,totalRepairCost:D,managerNotes:d,customerNotified:!1,customerAgreedToCharges:!1};for(const U of o){const H=i.find(te=>te.id===U.itemId||te.name===U.name);if(H){let te=0;const se=U.quantityExpected-U.quantityReturned,ee=U.condition==="damaged"?U.quantityReturned:0;te=se+ee;const ie=H.quantity-te,$=Math.max(0,ie);te>0&&await ia(rr(wt,"items",H.id),{quantity:$,lastUpdated:kr()})}}await r(e.id,o,L),a&&await a(),console.log("       ...");const G=await $q.runAfterOrderClosure(e.id);if(G.shouldShowAlert){console.log("   :",G),_(G),m(!1);return}t()}catch(j){console.error("Error completing return inspection:",j),alert("   .  .")}finally{m(!1)}},P=()=>{_(null),t()},Y=z=>{z.target===z.currentTarget&&window.confirm("        ?")&&t()};return v.jsxs(v.Fragment,{children:[v.jsx("style",{jsx:!0,global:!0,children:`
        .return-inspection-overlay {
          position: fixed !important;
          top: 0 !important;
          left: 0 !important;
          right: 0 !important;
          bottom: 0 !important;
          background-color: rgba(0, 0, 0, 0.7) !important;
          display: flex !important;
          align-items: flex-start !important;
          justify-content: center !important;
          padding: 0.5rem !important;
          z-index: 99999 !important;
          overflow-x: hidden !important;
          padding-top: 1rem !important;
        }
        
        .return-inspection-content {
          background: white !important;
          border-radius: 12px !important;
          box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25) !important;
          width: 100% !important;
          max-width: 56rem !important;
          max-height: 96vh !important;
          overflow: hidden !important;
          position: relative !important;
          z-index: 100000 !important;
          display: flex !important;
          flex-direction: column !important;
        }

        .availability-alert {
          background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%) !important;
          border: 2px solid #f59e0b !important;
          border-radius: 12px !important;
          padding: 1.5rem !important;
          margin: 1rem !important;
          box-shadow: 0 8px 25px rgba(245, 158, 11, 0.2) !important;
        }

        @media (max-width: 768px) {
          .return-inspection-overlay {
            padding: 0.25rem !important;
            padding-top: 0.5rem !important;
          }
          
          .return-inspection-content {
            max-height: 98vh !important;
            border-radius: 8px !important;
          }
          
          .footer-mobile {
            flex-direction: column !important;
            gap: 0.5rem !important;
            align-items: stretch !important;
          }
          
          .footer-mobile button {
            width: 100% !important;
          }
          
          .footer-mobile .summary-text {
            text-align: center !important;
            margin-bottom: 0.5rem !important;
          }

          .availability-alert {
            margin: 0.5rem !important;
            padding: 1rem !important;
          }
        }

        @keyframes spin {
          0% { transform: rotate(0deg); }
          100% { transform: rotate(360deg); }
        }

        @keyframes slideDown {
          0% { transform: translateY(-10px); opacity: 0; }
          100% { transform: translateY(0); opacity: 1; }
        }

        @keyframes pulse {
          0%, 100% { transform: scale(1); }
          50% { transform: scale(1.05); }
        }
      `}),v.jsx("div",{className:"return-inspection-overlay",onClick:Y,children:v.jsxs("div",{className:"return-inspection-content",dir:"rtl",onClick:z=>z.stopPropagation(),children:[x&&v.jsxs("div",{className:"availability-alert",style:{animation:"slideDown 0.3s ease-out"},children:[v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"1rem"},children:[v.jsx(sC,{size:24,style:{color:"#f59e0b",animation:"pulse 2s infinite"}}),v.jsx("h3",{style:{fontSize:"1.125rem",fontWeight:"bold",margin:0,color:"#92400e"},children:"     !"})]}),v.jsx("p",{style:{color:"#92400e",marginBottom:"1rem",fontSize:"0.95rem",lineHeight:"1.5"},children:x.message}),x.conflicts&&x.conflicts.length>0&&v.jsxs("div",{style:{marginBottom:"1rem"},children:[v.jsx("h4",{style:{fontSize:"1rem",fontWeight:"600",color:"#92400e",marginBottom:"0.5rem"},children:"  :"}),v.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:[x.conflicts.slice(0,3).map((z,F)=>v.jsxs("div",{style:{background:"rgba(254, 243, 199, 0.5)",padding:"0.75rem",borderRadius:"8px",border:"1px solid #fbbf24"},children:[v.jsxs("div",{style:{fontWeight:"600",fontSize:"0.9rem",color:"#92400e"},children:[" #",z.order.simpleId||z.order.id]}),v.jsxs("div",{style:{fontSize:"0.85rem",color:"#78350f",marginTop:"0.25rem"},children:[z.conflicts.length,"    "]})]},F)),x.conflicts.length>3&&v.jsxs("div",{style:{textAlign:"center",fontSize:"0.85rem",color:"#92400e",fontStyle:"italic"},children:[" ",x.conflicts.length-3,"  ..."]})]})]}),v.jsxs("div",{style:{background:"rgba(254, 243, 199, 0.7)",padding:"0.75rem",borderRadius:"8px",fontSize:"0.9rem",color:"#78350f",marginBottom:"1rem"},children:[" ",v.jsx("strong",{children:" :"}),'   ,     (  ),   " "      .']}),v.jsx("button",{onClick:P,style:{background:"linear-gradient(135deg, #f59e0b 0%, #d97706 100%)",color:"white",border:"none",borderRadius:"8px",padding:"0.75rem 1.5rem",fontSize:"0.9rem",fontWeight:"600",cursor:"pointer",width:"100%",boxShadow:"0 4px 12px rgba(245, 158, 11, 0.3)",transition:"all 0.2s ease"},onMouseOver:z=>z.target.style.transform="translateY(-1px)",onMouseOut:z=>z.target.style.transform="translateY(0)",children:" -      "})]}),v.jsxs("div",{style:{background:"linear-gradient(to right, #fb923c, #f97316)",color:"white",padding:"1rem",flexShrink:0},children:[v.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[v.jsx(xf,{size:24}),v.jsxs("div",{children:[v.jsx("h2",{style:{fontSize:"1.25rem",fontWeight:"bold",margin:0},children:"  "}),v.jsxs("div",{style:{fontSize:"0.875rem",marginTop:"0.25rem",opacity:.9},children:[": ",e.clientName,"  ",e.phone]})]})]}),v.jsx("button",{onClick:t,style:{background:"none",border:"none",color:"white",fontSize:"1.5rem",cursor:"pointer",padding:"0.25rem"},children:""})]}),v.jsxs("div",{style:{marginTop:"1rem",background:"rgba(255, 255, 255, 0.2)",borderRadius:"8px",padding:"0.75rem"},children:[v.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",fontSize:"0.875rem"},children:[v.jsx("span",{children:" "}),v.jsxs("span",{style:{fontWeight:"bold"},children:[c.size,"/",o.length,"  "]})]}),v.jsx("div",{style:{marginTop:"0.5rem",background:"rgba(255, 255, 255, 0.3)",borderRadius:"4px",height:"6px",overflow:"hidden"},children:v.jsx("div",{style:{background:"#10b981",height:"100%",width:`${o.length>0?c.size/o.length*100:0}%`,transition:"width 0.3s ease"}})})]})]}),v.jsxs("div",{style:{padding:"1rem",overflowY:"auto",flex:1},children:[v.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:o.map((z,F)=>{var T,j;return c.has(F)?null:v.jsx("div",{style:{border:"1px solid #e5e7eb",borderRadius:"12px",padding:"1rem",background:"#ffffff",boxShadow:"0 2px 8px rgba(0,0,0,0.1)",transition:"all 0.3s ease"},children:v.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[v.jsx("img",{src:((T=e.items.find(N=>N.id===z.itemId))==null?void 0:T.imageUrl)||"/no-image-available.png",alt:z.name,style:{width:"40px",height:"40px",objectFit:"cover",borderRadius:"8px",border:"1px solid #e5e7eb",flexShrink:0}}),v.jsxs("div",{style:{minWidth:0,flex:1},children:[v.jsx("h4",{style:{fontSize:"1rem",fontWeight:"bold",margin:0,color:"#1f2937"},children:z.name}),v.jsxs("div",{style:{fontSize:"0.75rem",color:"#6b7280",marginTop:"0.25rem"},children:[": ",z.ItemId||((j=e.items.find(N=>N.id===z.itemId))==null?void 0:j.ItemId)||z.itemId]}),v.jsxs("div",{style:{fontSize:"0.75rem",color:"#6b7280"},children:[" : ",z.quantityExpected]})]})]}),v.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",gap:"1rem"},children:[v.jsx("span",{style:{fontSize:"0.875rem",fontWeight:"500",color:"#374151"},children:" :"}),v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[v.jsx("button",{onClick:()=>{const N=Math.max(0,z.quantityReturned-1);C(F,"quantityReturned",N)},disabled:z.quantityReturned<=0,style:{background:z.quantityReturned<=0?"#d1d5db":"#ef4444",color:"white",border:"none",borderRadius:"50%",width:"36px",height:"36px",fontSize:"18px",fontWeight:"bold",cursor:z.quantityReturned<=0?"not-allowed":"pointer",display:"flex",alignItems:"center",justifyContent:"center",opacity:z.quantityReturned<=0?.6:1},children:"-"}),v.jsx("span",{style:{fontSize:"1.5rem",fontWeight:"bold",minWidth:"40px",textAlign:"center",color:"#1f2937"},children:z.quantityReturned}),v.jsx("button",{onClick:()=>{const N=Math.min(z.quantityExpected,z.quantityReturned+1);C(F,"quantityReturned",N)},disabled:z.quantityReturned>=z.quantityExpected,style:{background:z.quantityReturned>=z.quantityExpected?"#d1d5db":"#10b981",color:"white",border:"none",borderRadius:"50%",width:"36px",height:"36px",fontSize:"18px",fontWeight:"bold",cursor:z.quantityReturned>=z.quantityExpected?"not-allowed":"pointer",display:"flex",alignItems:"center",justifyContent:"center",opacity:z.quantityReturned>=z.quantityExpected?.6:1},children:"+"}),v.jsxs("button",{onClick:()=>S(F),style:{background:"#3b82f6",color:"white",border:"none",borderRadius:"8px",padding:"0.5rem 1rem",fontSize:"0.875rem",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",gap:"0.5rem",marginRight:"1rem"},children:[v.jsx(iC,{size:16}),""]})]})]}),z.quantityReturned<z.quantityExpected&&v.jsx("div",{style:{padding:"0.5rem",background:"#fef3c7",borderRadius:"6px",textAlign:"center"},children:v.jsxs("span",{style:{fontSize:"0.875rem",color:"#92400e",fontWeight:"500"},children:["  ",z.quantityExpected-z.quantityReturned," "]})})]})},F)})}),c.size>0&&v.jsxs("div",{style:{marginTop:"2rem",background:"#f0f9ff",border:"1px solid #0ea5e9",borderRadius:"12px",padding:"1rem"},children:[v.jsxs("h3",{style:{fontSize:"1rem",fontWeight:"bold",color:"#0369a1",margin:"0 0 1rem 0",display:"flex",alignItems:"center",gap:"0.5rem"},children:[v.jsx(xf,{size:20}),"  (",c.size,"/",o.length,")"]}),v.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:Array.from(c).map(z=>{const F=o[z];return v.jsxs("div",{style:{background:"white",border:"1px solid #bae6fd",borderRadius:"8px",padding:"0.75rem",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[v.jsx("span",{style:{fontSize:"0.875rem",color:"#1f2937"},children:F.name}),v.jsxs("span",{style:{fontSize:"0.875rem",color:"#059669",fontWeight:"500"},children:[" : ",F.quantityReturned]})]},z)})})]})]}),v.jsx("div",{style:{background:"#f9fafb",padding:"1rem",borderTop:"1px solid #e5e7eb",flexShrink:0},children:v.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},className:"footer-mobile",children:[v.jsx("div",{style:{fontSize:"0.875rem",color:"#6b7280"},className:"summary-text",children:k()?"   -    ":`     (${c.size}/${o.length})`}),v.jsxs("div",{style:{display:"flex",gap:"0.75rem"},className:"footer-mobile",children:[v.jsx("button",{onClick:t,disabled:g,style:{background:"#6b7280",color:"white",padding:"0.75rem 1.5rem",borderRadius:"8px",border:"none",cursor:g?"not-allowed":"pointer",fontSize:"0.875rem",opacity:g?.6:1},children:""}),v.jsx("button",{onClick:M,disabled:g||!k(),style:{background:k()?"#f59e0b":"#9ca3af",color:"white",padding:"0.75rem 1.5rem",borderRadius:"8px",border:"none",cursor:g||!k()?"not-allowed":"pointer",fontSize:"0.875rem",display:"flex",alignItems:"center",gap:"0.5rem",opacity:g||!k()?.6:1,justifyContent:"center"},children:g?v.jsxs(v.Fragment,{children:[v.jsx("div",{style:{width:"1rem",height:"1rem",border:"2px solid #ffffff",borderTop:"2px solid transparent",borderRadius:"50%",animation:"spin 1s linear infinite"}}),"..."]}):v.jsxs(v.Fragment,{children:[v.jsx(c2,{size:16}),"  "]})})]})]})})]})})]})},Yq=({allItems:n,itemsMap:e,events:t,setAllItems:r,setItemsMap:i,setEvents:a,fetchItemsAndOrders:o})=>{const[s,c]=le.useState(new Date),[f,d]=le.useState([]),[p,g]=le.useState(!1),[m,x]=le.useState(null),[_,C]=le.useState(!1),[S,k]=le.useState({open:!1,eventId:null,items:[]}),[M,P]=le.useState({show:!1,order:null}),Y=async I=>{try{const T=t.filter(j=>j.orderId===I);if(T.length>0){const j={id:I,clientName:T[0].clientName,phone:T[0].phone,items:T[0].items,pickupDate:T[0].pickupDate,returnDate:T[0].returnDate};P({show:!0,order:j}),g(!1)}}catch(T){console.error("Error initializing return inspection:",T),alert("   .  .")}},z=async I=>{try{const T={status:"closed","returnInspection.inspectionStatus":"completed","returnInspection.inspectedBy":" ","returnInspection.inspectionDate":kr(),"returnInspection.managerNotes":"     ","returnInspection.totalItemsReturned":0,"returnInspection.totalDamages":0,"returnInspection.totalRepairCost":0,closedAt:kr(),manuallyClosedAt:kr()};await ia(rr(wt,"orders",I),T),await o(),g(!1),alert("    !")}catch(T){console.error("Error manually closing order:",T),alert("  .  .")}},F=async(I,T,j)=>{try{const N={status:"closed",returnInspection:{inspectionStatus:"completed",inspectedBy:" ",inspectionDate:kr(),itemInspections:T.map(R=>({itemId:R.itemId,name:R.name,quantityExpected:R.quantityExpected,quantityReturned:R.quantityReturned,condition:R.condition,damageDescription:R.damageDescription||"",repairCost:R.repairCost||0,notes:R.notes||"",inspectedAt:new Date().toISOString()})),totalItemsReturned:j.totalItemsReturned,totalItemsExpected:j.totalItemsExpected,totalDamages:j.totalDamages,totalRepairCost:j.totalRepairCost,managerNotes:j.managerNotes,customerNotified:j.customerNotified,customerAgreedToCharges:j.customerAgreedToCharges},closedAt:kr()};await ia(rr(wt,"orders",I),N),await o(),P({show:!1,order:null}),alert("   !   .")}catch(N){console.error("Error completing return inspection:",N),alert("   .  .")}};return v.jsxs("div",{className:"mt-6",children:[v.jsx(Tq,{currentDate:s,events:t,setCurrentDate:c,setSelectedEvents:d,setSelectedDate:x,setShowReport:g,fetchItemsAndOrders:o}),v.jsx(qq,{show:p,selectedDate:m,selectedEvents:f,allItems:n,setShowReport:g,setShowItemsModal:C,setEditItemModal:k,fetchItemsAndOrders:o,onStartReturnInspection:Y,onCloseOrderManually:z}),v.jsx(Hq,{show:!!_,setShow:()=>C(!1),selectedEvents:_,allItems:n}),v.jsx(Wq,{show:S.open,data:S,setData:k,allItems:n,setShowReport:g,fetchItemsAndOrders:o,allEvents:t}),v.jsx(Gq,{show:M.show,order:M.order,onClose:()=>P({show:!1,order:null}),onCompleteInspection:F,allItems:n,updateItemQuantities:o})]})},Ax=n=>{const e=new Date(n);return e.setHours(0,0,0,0),e},Xq=async(n,e)=>{const t=Ax(new Date);for(const r of n.docs){const i=r.data();!i.pickupDate||i.stockUpdated||Ax(new Date(i.pickupDate))>t||await ia(rr(e,"orders",r.id),{stockUpdated:!0})}},Kq=(n,e)=>{const t=Ax(new Date);return n.docs.flatMap(r=>{const i=r.data();if(i.status==="closed")return[];const a=(s=[])=>s.map(c=>{const f=e.find(d=>d.id===c.id);return{...c,imageUrl:(f==null?void 0:f.imageUrl)||null,itemId:(f==null?void 0:f.itemId)||" "}}),o=[];if(i.pickupDate&&i.returnDate){const s=new Date(i.pickupDate),c=new Date(i.returnDate);s.setHours(0,0,0,0),c.setHours(0,0,0,0);const f=t>c,d=f?Math.ceil((t-c)/(1e3*60*60*24)):0,p=Math.ceil((c-s)/(1e3*60*60*24));for(let g=0;g<=p;g++){if(g!==0&&g!==p)continue;const m=new Date(s);m.setDate(s.getDate()+g);let x,_,C;g===0?(x="",_="",C=" "):g===p&&(x="",_="",C=" "),o.push({id:`${r.id}-${m.toISOString().slice(0,10)}`,orderId:r.id,date:new Date(m),clientName:i.clientName,phone:i.phone,email:i.email,manualEmailSent:i.manualEmailSent||!1,manualEmailSentAt:i.manualEmailSentAt||null,type:x,icon:_,description:C,items:a(i.items),pickupDate:i.pickupDate,returnDate:i.returnDate,dayNumber:g+1,totalDays:p+1,isMultiDay:p>0,isOverdue:f,overdueDays:d,availabilityStatus:i.availabilityStatus||"OK",availabilityConflicts:i.availabilityConflicts||[],needsAttention:i.needsAttention||!1,eventType:i.eventType||"",pickupLocation:i.pickupLocation||"  ",specialInstructions:i.specialInstructions||"  "})}}return o})},Qq=async(n,e,t,r)=>{try{console.log(" Fetching items and orders...");const a=(await nr(hn(n,"items"))).docs.map(f=>{const d=f.data();return{id:f.id,itemId:d.ItemId,name:d.name,imageUrl:d.imageUrl,quantity:d.quantity||0,isDeleted:d.isDeleted||!1}}).filter(f=>!f.isDeleted);console.log(" Items loaded with quantities:",a.map(f=>({name:f.name,quantity:f.quantity}))),e(a);const o={};a.forEach(f=>{o[f.name]=f.imageUrl||null}),t(o);const s=await nr(hn(n,"orders"));console.log(" Orders loaded:",s.docs.length),await Xq(s,n);const c=Kq(s,a);console.log(" Events built:",c.length),r(c),console.log(" Data refresh completed")}catch(i){console.error("    :",i)}},Zq=()=>{const[n,e]=le.useState([]),[t,r]=le.useState({}),[i,a]=le.useState([]),[o,s]=le.useState(!0),[c,f]=le.useState(null),[d,p]=le.useState(new Date),g=async()=>{try{s(!0),f(null),await Qq(wt,e,r,a)}catch(m){console.error("Error fetching calendar data:",m),f("   .   .")}finally{s(!1)}};return le.useEffect(()=>{g()},[]),o?v.jsxs(v.Fragment,{children:[v.jsx("style",{jsx:!0,children:`
          @keyframes highlightFlash {
            0%, 100% { 
              transform: scale(1);
              box-shadow: 0 0 0 0 rgba(147, 51, 234, 0.8);
            }
            25% { 
              transform: scale(1.05);
              box-shadow: 0 0 0 10px rgba(147, 51, 234, 0.4);
            }
            50% { 
              transform: scale(1.08);
              box-shadow: 0 0 0 20px rgba(147, 51, 234, 0.2);
            }
            75% { 
              transform: scale(1.05);
              box-shadow: 0 0 0 10px rgba(147, 51, 234, 0.4);
            }
          }
        `}),v.jsx("div",{className:"flex justify-center items-center min-h-screen",children:v.jsxs("div",{className:"text-center",children:[v.jsx("div",{className:"spinner-border animate-spin inline-block w-8 h-8 border-4 rounded-full border-blue-600 border-t-transparent"}),v.jsx("p",{className:"mt-4 text-gray-600",children:"  ..."})]})})]}):c?v.jsx("div",{className:"flex justify-center items-center min-h-screen",children:v.jsxs("div",{className:"text-center",children:[v.jsx("p",{className:"text-red-600 mb-4",children:c}),v.jsx("button",{onClick:g,className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:" "})]})}):v.jsxs(v.Fragment,{children:[v.jsx("style",{jsx:!0,global:!0,children:`
        @keyframes highlightFlash {
          0% { 
            transform: scale(1);
            box-shadow: 0 0 0 0 rgba(147, 51, 234, 1);
            border-color: #9333ea !important;
            background: linear-gradient(135deg, #f3e8ff 0%, #e9d5ff 100%) !important;
          }
          15% { 
            transform: scale(1.1);
            box-shadow: 0 0 0 15px rgba(147, 51, 234, 0.6);
            border-color: #7c3aed !important;
            background: linear-gradient(135deg, #e9d5ff 0%, #c4b5fd 100%) !important;
          }
          30% { 
            transform: scale(1.15);
            box-shadow: 0 0 0 25px rgba(147, 51, 234, 0.4);
            border-color: #6d28d9 !important;
            background: linear-gradient(135deg, #c4b5fd 0%, #a78bfa 100%) !important;
          }
          50% { 
            transform: scale(1.12);
            box-shadow: 0 0 0 30px rgba(147, 51, 234, 0.2);
            border-color: #5b21b6 !important;
            background: linear-gradient(135deg, #a78bfa 0%, #8b5cf6 100%) !important;
          }
          70% { 
            transform: scale(1.08);
            box-shadow: 0 0 0 20px rgba(147, 51, 234, 0.3);
            border-color: #7c3aed !important;
            background: linear-gradient(135deg, #c4b5fd 0%, #a78bfa 100%) !important;
          }
          85% { 
            transform: scale(1.05);
            box-shadow: 0 0 0 10px rgba(147, 51, 234, 0.5);
            border-color: #9333ea !important;
            background: linear-gradient(135deg, #e9d5ff 0%, #c4b5fd 100%) !important;
          }
          100% { 
            transform: scale(1);
            box-shadow: 0 0 0 0 rgba(147, 51, 234, 0.8);
            border-color: #9333ea !important;
            background: linear-gradient(135deg, #f3e8ff 0%, #e9d5ff 100%) !important;
          }
        }
        
        /*      */
        .day-cell[style*="highlightFlash"] {
          position: relative !important;
          z-index: 1000 !important;
        }
        
        .day-cell[style*="highlightFlash"] .day-number {
          color: #581c87 !important;
          font-weight: bold !important;
          font-size: 1.2rem !important;
        }
      `}),v.jsx("div",{className:"container mx-auto px-4",children:v.jsx(Yq,{allItems:n,itemsMap:t,events:i,setAllItems:e,setItemsMap:r,setEvents:a,fetchItemsAndOrders:g,currentDate:d,setCurrentDate:p})})]})};function LC(n){var e,t,r="";if(typeof n=="string"||typeof n=="number")r+=n;else if(typeof n=="object")if(Array.isArray(n)){var i=n.length;for(e=0;e<i;e++)n[e]&&(t=LC(n[e]))&&(r&&(r+=" "),r+=t)}else for(t in n)n[t]&&(r&&(r+=" "),r+=t);return r}function od(){for(var n,e,t=0,r="",i=arguments.length;t<i;t++)(n=arguments[t])&&(e=LC(n))&&(r&&(r+=" "),r+=e);return r}function Jq(n){if(typeof document>"u")return;let e=document.head||document.getElementsByTagName("head")[0],t=document.createElement("style");t.type="text/css",e.firstChild?e.insertBefore(t,e.firstChild):e.appendChild(t),t.styleSheet?t.styleSheet.cssText=n:t.appendChild(document.createTextNode(n))}Jq(`:root{--toastify-color-light: #fff;--toastify-color-dark: #121212;--toastify-color-info: #3498db;--toastify-color-success: #07bc0c;--toastify-color-warning: #f1c40f;--toastify-color-error: hsl(6, 78%, 57%);--toastify-color-transparent: rgba(255, 255, 255, .7);--toastify-icon-color-info: var(--toastify-color-info);--toastify-icon-color-success: var(--toastify-color-success);--toastify-icon-color-warning: var(--toastify-color-warning);--toastify-icon-color-error: var(--toastify-color-error);--toastify-container-width: fit-content;--toastify-toast-width: 320px;--toastify-toast-offset: 16px;--toastify-toast-top: max(var(--toastify-toast-offset), env(safe-area-inset-top));--toastify-toast-right: max(var(--toastify-toast-offset), env(safe-area-inset-right));--toastify-toast-left: max(var(--toastify-toast-offset), env(safe-area-inset-left));--toastify-toast-bottom: max(var(--toastify-toast-offset), env(safe-area-inset-bottom));--toastify-toast-background: #fff;--toastify-toast-padding: 14px;--toastify-toast-min-height: 64px;--toastify-toast-max-height: 800px;--toastify-toast-bd-radius: 6px;--toastify-toast-shadow: 0px 4px 12px rgba(0, 0, 0, .1);--toastify-font-family: sans-serif;--toastify-z-index: 9999;--toastify-text-color-light: #757575;--toastify-text-color-dark: #fff;--toastify-text-color-info: #fff;--toastify-text-color-success: #fff;--toastify-text-color-warning: #fff;--toastify-text-color-error: #fff;--toastify-spinner-color: #616161;--toastify-spinner-color-empty-area: #e0e0e0;--toastify-color-progress-light: linear-gradient(to right, #4cd964, #5ac8fa, #007aff, #34aadc, #5856d6, #ff2d55);--toastify-color-progress-dark: #bb86fc;--toastify-color-progress-info: var(--toastify-color-info);--toastify-color-progress-success: var(--toastify-color-success);--toastify-color-progress-warning: var(--toastify-color-warning);--toastify-color-progress-error: var(--toastify-color-error);--toastify-color-progress-bgo: .2}.Toastify__toast-container{z-index:var(--toastify-z-index);-webkit-transform:translate3d(0,0,var(--toastify-z-index));position:fixed;width:var(--toastify-container-width);box-sizing:border-box;color:#fff;display:flex;flex-direction:column}.Toastify__toast-container--top-left{top:var(--toastify-toast-top);left:var(--toastify-toast-left)}.Toastify__toast-container--top-center{top:var(--toastify-toast-top);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--top-right{top:var(--toastify-toast-top);right:var(--toastify-toast-right);align-items:end}.Toastify__toast-container--bottom-left{bottom:var(--toastify-toast-bottom);left:var(--toastify-toast-left)}.Toastify__toast-container--bottom-center{bottom:var(--toastify-toast-bottom);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--bottom-right{bottom:var(--toastify-toast-bottom);right:var(--toastify-toast-right);align-items:end}.Toastify__toast{--y: 0;position:relative;touch-action:none;width:var(--toastify-toast-width);min-height:var(--toastify-toast-min-height);box-sizing:border-box;margin-bottom:1rem;padding:var(--toastify-toast-padding);border-radius:var(--toastify-toast-bd-radius);box-shadow:var(--toastify-toast-shadow);max-height:var(--toastify-toast-max-height);font-family:var(--toastify-font-family);z-index:0;display:flex;flex:1 auto;align-items:center;word-break:break-word}@media only screen and (max-width: 480px){.Toastify__toast-container{width:100vw;left:env(safe-area-inset-left);margin:0}.Toastify__toast-container--top-left,.Toastify__toast-container--top-center,.Toastify__toast-container--top-right{top:env(safe-area-inset-top);transform:translate(0)}.Toastify__toast-container--bottom-left,.Toastify__toast-container--bottom-center,.Toastify__toast-container--bottom-right{bottom:env(safe-area-inset-bottom);transform:translate(0)}.Toastify__toast-container--rtl{right:env(safe-area-inset-right);left:initial}.Toastify__toast{--toastify-toast-width: 100%;margin-bottom:0;border-radius:0}}.Toastify__toast-container[data-stacked=true]{width:var(--toastify-toast-width)}.Toastify__toast--stacked{position:absolute;width:100%;transform:translate3d(0,var(--y),0) scale(var(--s));transition:transform .3s}.Toastify__toast--stacked[data-collapsed] .Toastify__toast-body,.Toastify__toast--stacked[data-collapsed] .Toastify__close-button{transition:opacity .1s}.Toastify__toast--stacked[data-collapsed=false]{overflow:visible}.Toastify__toast--stacked[data-collapsed=true]:not(:last-child)>*{opacity:0}.Toastify__toast--stacked:after{content:"";position:absolute;left:0;right:0;height:calc(var(--g) * 1px);bottom:100%}.Toastify__toast--stacked[data-pos=top]{top:0}.Toastify__toast--stacked[data-pos=bot]{bottom:0}.Toastify__toast--stacked[data-pos=bot].Toastify__toast--stacked:before{transform-origin:top}.Toastify__toast--stacked[data-pos=top].Toastify__toast--stacked:before{transform-origin:bottom}.Toastify__toast--stacked:before{content:"";position:absolute;left:0;right:0;bottom:0;height:100%;transform:scaleY(3);z-index:-1}.Toastify__toast--rtl{direction:rtl}.Toastify__toast--close-on-click{cursor:pointer}.Toastify__toast-icon{margin-inline-end:10px;width:22px;flex-shrink:0;display:flex}.Toastify--animate{animation-fill-mode:both;animation-duration:.5s}.Toastify--animate-icon{animation-fill-mode:both;animation-duration:.3s}.Toastify__toast-theme--dark{background:var(--toastify-color-dark);color:var(--toastify-text-color-dark)}.Toastify__toast-theme--light,.Toastify__toast-theme--colored.Toastify__toast--default{background:var(--toastify-color-light);color:var(--toastify-text-color-light)}.Toastify__toast-theme--colored.Toastify__toast--info{color:var(--toastify-text-color-info);background:var(--toastify-color-info)}.Toastify__toast-theme--colored.Toastify__toast--success{color:var(--toastify-text-color-success);background:var(--toastify-color-success)}.Toastify__toast-theme--colored.Toastify__toast--warning{color:var(--toastify-text-color-warning);background:var(--toastify-color-warning)}.Toastify__toast-theme--colored.Toastify__toast--error{color:var(--toastify-text-color-error);background:var(--toastify-color-error)}.Toastify__progress-bar-theme--light{background:var(--toastify-color-progress-light)}.Toastify__progress-bar-theme--dark{background:var(--toastify-color-progress-dark)}.Toastify__progress-bar--info{background:var(--toastify-color-progress-info)}.Toastify__progress-bar--success{background:var(--toastify-color-progress-success)}.Toastify__progress-bar--warning{background:var(--toastify-color-progress-warning)}.Toastify__progress-bar--error{background:var(--toastify-color-progress-error)}.Toastify__progress-bar-theme--colored.Toastify__progress-bar--info,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--success,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--warning,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--error{background:var(--toastify-color-transparent)}.Toastify__close-button{color:#fff;position:absolute;top:6px;right:6px;background:transparent;outline:none;border:none;padding:0;cursor:pointer;opacity:.7;transition:.3s ease;z-index:1}.Toastify__toast--rtl .Toastify__close-button{left:6px;right:unset}.Toastify__close-button--light{color:#000;opacity:.3}.Toastify__close-button>svg{fill:currentColor;height:16px;width:14px}.Toastify__close-button:hover,.Toastify__close-button:focus{opacity:1}@keyframes Toastify__trackProgress{0%{transform:scaleX(1)}to{transform:scaleX(0)}}.Toastify__progress-bar{position:absolute;bottom:0;left:0;width:100%;height:100%;z-index:1;opacity:.7;transform-origin:left}.Toastify__progress-bar--animated{animation:Toastify__trackProgress linear 1 forwards}.Toastify__progress-bar--controlled{transition:transform .2s}.Toastify__progress-bar--rtl{right:0;left:initial;transform-origin:right;border-bottom-left-radius:initial}.Toastify__progress-bar--wrp{position:absolute;overflow:hidden;bottom:0;left:0;width:100%;height:5px;border-bottom-left-radius:var(--toastify-toast-bd-radius);border-bottom-right-radius:var(--toastify-toast-bd-radius)}.Toastify__progress-bar--wrp[data-hidden=true]{opacity:0}.Toastify__progress-bar--bg{opacity:var(--toastify-color-progress-bgo);width:100%;height:100%}.Toastify__spinner{width:20px;height:20px;box-sizing:border-box;border:2px solid;border-radius:100%;border-color:var(--toastify-spinner-color-empty-area);border-right-color:var(--toastify-spinner-color);animation:Toastify__spin .65s linear infinite}@keyframes Toastify__bounceInRight{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(3000px,0,0)}60%{opacity:1;transform:translate3d(-25px,0,0)}75%{transform:translate3d(10px,0,0)}90%{transform:translate3d(-5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutRight{20%{opacity:1;transform:translate3d(-20px,var(--y),0)}to{opacity:0;transform:translate3d(2000px,var(--y),0)}}@keyframes Toastify__bounceInLeft{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(-3000px,0,0)}60%{opacity:1;transform:translate3d(25px,0,0)}75%{transform:translate3d(-10px,0,0)}90%{transform:translate3d(5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutLeft{20%{opacity:1;transform:translate3d(20px,var(--y),0)}to{opacity:0;transform:translate3d(-2000px,var(--y),0)}}@keyframes Toastify__bounceInUp{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,3000px,0)}60%{opacity:1;transform:translate3d(0,-20px,0)}75%{transform:translate3d(0,10px,0)}90%{transform:translate3d(0,-5px,0)}to{transform:translateZ(0)}}@keyframes Toastify__bounceOutUp{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,-2000px,0)}}@keyframes Toastify__bounceInDown{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,-3000px,0)}60%{opacity:1;transform:translate3d(0,25px,0)}75%{transform:translate3d(0,-10px,0)}90%{transform:translate3d(0,5px,0)}to{transform:none}}@keyframes Toastify__bounceOutDown{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,2000px,0)}}.Toastify__bounce-enter--top-left,.Toastify__bounce-enter--bottom-left{animation-name:Toastify__bounceInLeft}.Toastify__bounce-enter--top-right,.Toastify__bounce-enter--bottom-right{animation-name:Toastify__bounceInRight}.Toastify__bounce-enter--top-center{animation-name:Toastify__bounceInDown}.Toastify__bounce-enter--bottom-center{animation-name:Toastify__bounceInUp}.Toastify__bounce-exit--top-left,.Toastify__bounce-exit--bottom-left{animation-name:Toastify__bounceOutLeft}.Toastify__bounce-exit--top-right,.Toastify__bounce-exit--bottom-right{animation-name:Toastify__bounceOutRight}.Toastify__bounce-exit--top-center{animation-name:Toastify__bounceOutUp}.Toastify__bounce-exit--bottom-center{animation-name:Toastify__bounceOutDown}@keyframes Toastify__zoomIn{0%{opacity:0;transform:scale3d(.3,.3,.3)}50%{opacity:1}}@keyframes Toastify__zoomOut{0%{opacity:1}50%{opacity:0;transform:translate3d(0,var(--y),0) scale3d(.3,.3,.3)}to{opacity:0}}.Toastify__zoom-enter{animation-name:Toastify__zoomIn}.Toastify__zoom-exit{animation-name:Toastify__zoomOut}@keyframes Toastify__flipIn{0%{transform:perspective(400px) rotateX(90deg);animation-timing-function:ease-in;opacity:0}40%{transform:perspective(400px) rotateX(-20deg);animation-timing-function:ease-in}60%{transform:perspective(400px) rotateX(10deg);opacity:1}80%{transform:perspective(400px) rotateX(-5deg)}to{transform:perspective(400px)}}@keyframes Toastify__flipOut{0%{transform:translate3d(0,var(--y),0) perspective(400px)}30%{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(-20deg);opacity:1}to{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(90deg);opacity:0}}.Toastify__flip-enter{animation-name:Toastify__flipIn}.Toastify__flip-exit{animation-name:Toastify__flipOut}@keyframes Toastify__slideInRight{0%{transform:translate3d(110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInLeft{0%{transform:translate3d(-110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInUp{0%{transform:translate3d(0,110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInDown{0%{transform:translate3d(0,-110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideOutRight{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(110%,var(--y),0)}}@keyframes Toastify__slideOutLeft{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(-110%,var(--y),0)}}@keyframes Toastify__slideOutDown{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,500px,0)}}@keyframes Toastify__slideOutUp{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,-500px,0)}}.Toastify__slide-enter--top-left,.Toastify__slide-enter--bottom-left{animation-name:Toastify__slideInLeft}.Toastify__slide-enter--top-right,.Toastify__slide-enter--bottom-right{animation-name:Toastify__slideInRight}.Toastify__slide-enter--top-center{animation-name:Toastify__slideInDown}.Toastify__slide-enter--bottom-center{animation-name:Toastify__slideInUp}.Toastify__slide-exit--top-left,.Toastify__slide-exit--bottom-left{animation-name:Toastify__slideOutLeft;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-right,.Toastify__slide-exit--bottom-right{animation-name:Toastify__slideOutRight;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-center{animation-name:Toastify__slideOutUp;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--bottom-center{animation-name:Toastify__slideOutDown;animation-timing-function:ease-in;animation-duration:.3s}@keyframes Toastify__spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}
`);var X1=n=>typeof n=="number"&&!isNaN(n),md=n=>typeof n=="string",iu=n=>typeof n=="function",eH=n=>md(n)||X1(n),Sx=n=>md(n)||iu(n)?n:null,tH=(n,e)=>n===!1||X1(n)&&n>0?n:e,Ex=n=>le.isValidElement(n)||md(n)||iu(n)||X1(n);function nH(n,e,t=300){let{scrollHeight:r,style:i}=n;requestAnimationFrame(()=>{i.minHeight="initial",i.height=r+"px",i.transition=`all ${t}ms`,requestAnimationFrame(()=>{i.height="0",i.padding="0",i.margin="0",setTimeout(e,t)})})}function rH({enter:n,exit:e,appendPosition:t=!1,collapse:r=!0,collapseDuration:i=300}){return function({children:a,position:o,preventExitTransition:s,done:c,nodeRef:f,isIn:d,playToast:p}){let g=t?`${n}--${o}`:n,m=t?`${e}--${o}`:e,x=le.useRef(0);return le.useLayoutEffect(()=>{let _=f.current,C=g.split(" "),S=k=>{k.target===f.current&&(p(),_.removeEventListener("animationend",S),_.removeEventListener("animationcancel",S),x.current===0&&k.type!=="animationcancel"&&_.classList.remove(...C))};_.classList.add(...C),_.addEventListener("animationend",S),_.addEventListener("animationcancel",S)},[]),le.useEffect(()=>{let _=f.current,C=()=>{_.removeEventListener("animationend",C),r?nH(_,c,i):c()};d||(s?C():(x.current=1,_.className+=` ${m}`,_.addEventListener("animationend",C)))},[d]),Xn.createElement(Xn.Fragment,null,a)}}function t6(n,e){return{content:PC(n.content,n.props),containerId:n.props.containerId,id:n.props.toastId,theme:n.props.theme,type:n.props.type,data:n.props.data||{},isLoading:n.props.isLoading,icon:n.props.icon,reason:n.removalReason,status:e}}function PC(n,e,t=!1){return le.isValidElement(n)&&!md(n.type)?le.cloneElement(n,{closeToast:e.closeToast,toastProps:e,data:e.data,isPaused:t}):iu(n)?n({closeToast:e.closeToast,toastProps:e,data:e.data,isPaused:t}):n}function iH({closeToast:n,theme:e,ariaLabel:t="close"}){return Xn.createElement("button",{className:`Toastify__close-button Toastify__close-button--${e}`,type:"button",onClick:r=>{r.stopPropagation(),n(!0)},"aria-label":t},Xn.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},Xn.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}function aH({delay:n,isRunning:e,closeToast:t,type:r="default",hide:i,className:a,controlledProgress:o,progress:s,rtl:c,isIn:f,theme:d}){let p=i||o&&s===0,g={animationDuration:`${n}ms`,animationPlayState:e?"running":"paused"};o&&(g.transform=`scaleX(${s})`);let m=od("Toastify__progress-bar",o?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated",`Toastify__progress-bar-theme--${d}`,`Toastify__progress-bar--${r}`,{"Toastify__progress-bar--rtl":c}),x=iu(a)?a({rtl:c,type:r,defaultClassName:m}):od(m,a),_={[o&&s>=1?"onTransitionEnd":"onAnimationEnd"]:o&&s<1?null:()=>{f&&t()}};return Xn.createElement("div",{className:"Toastify__progress-bar--wrp","data-hidden":p},Xn.createElement("div",{className:`Toastify__progress-bar--bg Toastify__progress-bar-theme--${d} Toastify__progress-bar--${r}`}),Xn.createElement("div",{role:"progressbar","aria-hidden":p?"true":"false","aria-label":"notification timer",className:x,style:g,..._}))}var oH=1,MC=()=>`${oH++}`;function sH(n,e,t){let r=1,i=0,a=[],o=[],s=e,c=new Map,f=new Set,d=k=>(f.add(k),()=>f.delete(k)),p=()=>{o=Array.from(c.values()),f.forEach(k=>k())},g=({containerId:k,toastId:M,updateId:P})=>{let Y=k?k!==n:n!==1,z=c.has(M)&&P==null;return Y||z},m=(k,M)=>{c.forEach(P=>{var Y;(M==null||M===P.props.toastId)&&((Y=P.toggle)==null||Y.call(P,k))})},x=k=>{var M,P;(P=(M=k.props)==null?void 0:M.onClose)==null||P.call(M,k.removalReason),k.isActive=!1},_=k=>{if(k==null)c.forEach(x);else{let M=c.get(k);M&&x(M)}p()},C=()=>{i-=a.length,a=[]},S=k=>{var M,P;let{toastId:Y,updateId:z}=k.props,F=z==null;k.staleId&&c.delete(k.staleId),k.isActive=!0,c.set(Y,k),p(),t(t6(k,F?"added":"updated")),F&&((P=(M=k.props).onOpen)==null||P.call(M))};return{id:n,props:s,observe:d,toggle:m,removeToast:_,toasts:c,clearQueue:C,buildToast:(k,M)=>{if(g(M))return;let{toastId:P,updateId:Y,data:z,staleId:F,delay:I}=M,T=Y==null;T&&i++;let j={...s,style:s.toastStyle,key:r++,...Object.fromEntries(Object.entries(M).filter(([R,D])=>D!=null)),toastId:P,updateId:Y,data:z,isIn:!1,className:Sx(M.className||s.toastClassName),progressClassName:Sx(M.progressClassName||s.progressClassName),autoClose:M.isLoading?!1:tH(M.autoClose,s.autoClose),closeToast(R){c.get(P).removalReason=R,_(P)},deleteToast(){let R=c.get(P);if(R!=null){if(t(t6(R,"removed")),c.delete(P),i--,i<0&&(i=0),a.length>0){S(a.shift());return}p()}}};j.closeButton=s.closeButton,M.closeButton===!1||Ex(M.closeButton)?j.closeButton=M.closeButton:M.closeButton===!0&&(j.closeButton=Ex(s.closeButton)?s.closeButton:!0);let N={content:k,props:j,staleId:F};s.limit&&s.limit>0&&i>s.limit&&T?a.push(N):X1(I)?setTimeout(()=>{S(N)},I):S(N)},setProps(k){s=k},setToggle:(k,M)=>{let P=c.get(k);P&&(P.toggle=M)},isToastActive:k=>{var M;return(M=c.get(k))==null?void 0:M.isActive},getSnapshot:()=>o}}var Ro=new Map,E1=[],Cx=new Set,lH=n=>Cx.forEach(e=>e(n)),jC=()=>Ro.size>0;function cH(){E1.forEach(n=>FC(n.content,n.options)),E1=[]}var uH=(n,{containerId:e})=>{var t;return(t=Ro.get(e||1))==null?void 0:t.toasts.get(n)};function BC(n,e){var t;if(e)return!!((t=Ro.get(e))!=null&&t.isToastActive(n));let r=!1;return Ro.forEach(i=>{i.isToastActive(n)&&(r=!0)}),r}function fH(n){if(!jC()){E1=E1.filter(e=>n!=null&&e.options.toastId!==n);return}if(n==null||eH(n))Ro.forEach(e=>{e.removeToast(n)});else if(n&&("containerId"in n||"id"in n)){let e=Ro.get(n.containerId);e?e.removeToast(n.id):Ro.forEach(t=>{t.removeToast(n.id)})}}var dH=(n={})=>{Ro.forEach(e=>{e.props.limit&&(!n.containerId||e.id===n.containerId)&&e.clearQueue()})};function FC(n,e){Ex(n)&&(jC()||E1.push({content:n,options:e}),Ro.forEach(t=>{t.buildToast(n,e)}))}function hH(n){var e;(e=Ro.get(n.containerId||1))==null||e.setToggle(n.id,n.fn)}function UC(n,e){Ro.forEach(t=>{(e==null||!(e!=null&&e.containerId)||(e==null?void 0:e.containerId)===t.id)&&t.toggle(n,e==null?void 0:e.id)})}function pH(n){let e=n.containerId||1;return{subscribe(t){let r=sH(e,n,lH);Ro.set(e,r);let i=r.observe(t);return cH(),()=>{i(),Ro.delete(e)}},setProps(t){var r;(r=Ro.get(e))==null||r.setProps(t)},getSnapshot(){var t;return(t=Ro.get(e))==null?void 0:t.getSnapshot()}}}function gH(n){return Cx.add(n),()=>{Cx.delete(n)}}function mH(n){return n&&(md(n.toastId)||X1(n.toastId))?n.toastId:MC()}function K1(n,e){return FC(n,e),e.toastId}function h2(n,e){return{...e,type:e&&e.type||n,toastId:mH(e)}}function p2(n){return(e,t)=>K1(e,h2(n,t))}function Dn(n,e){return K1(n,h2("default",e))}Dn.loading=(n,e)=>K1(n,h2("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...e}));function vH(n,{pending:e,error:t,success:r},i){let a;e&&(a=md(e)?Dn.loading(e,i):Dn.loading(e.render,{...i,...e}));let o={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},s=(f,d,p)=>{if(d==null){Dn.dismiss(a);return}let g={type:f,...o,...i,data:p},m=md(d)?{render:d}:d;return a?Dn.update(a,{...g,...m}):Dn(m.render,{...g,...m}),p},c=iu(n)?n():n;return c.then(f=>s("success",r,f)).catch(f=>s("error",t,f)),c}Dn.promise=vH;Dn.success=p2("success");Dn.info=p2("info");Dn.error=p2("error");Dn.warning=p2("warning");Dn.warn=Dn.warning;Dn.dark=(n,e)=>K1(n,h2("default",{theme:"dark",...e}));function yH(n){fH(n)}Dn.dismiss=yH;Dn.clearWaitingQueue=dH;Dn.isActive=BC;Dn.update=(n,e={})=>{let t=uH(n,e);if(t){let{props:r,content:i}=t,a={delay:100,...r,...e,toastId:e.toastId||n,updateId:MC()};a.toastId!==n&&(a.staleId=n);let o=a.render||i;delete a.render,K1(o,a)}};Dn.done=n=>{Dn.update(n,{progress:1})};Dn.onChange=gH;Dn.play=n=>UC(!0,n);Dn.pause=n=>UC(!1,n);function xH(n){var e;let{subscribe:t,getSnapshot:r,setProps:i}=le.useRef(pH(n)).current;i(n);let a=(e=le.useSyncExternalStore(t,r,r))==null?void 0:e.slice();function o(s){if(!a)return[];let c=new Map;return n.newestOnTop&&a.reverse(),a.forEach(f=>{let{position:d}=f.props;c.has(d)||c.set(d,[]),c.get(d).push(f)}),Array.from(c,f=>s(f[0],f[1]))}return{getToastToRender:o,isToastActive:BC,count:a==null?void 0:a.length}}function bH(n){let[e,t]=le.useState(!1),[r,i]=le.useState(!1),a=le.useRef(null),o=le.useRef({start:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,didMove:!1}).current,{autoClose:s,pauseOnHover:c,closeToast:f,onClick:d,closeOnClick:p}=n;hH({id:n.toastId,containerId:n.containerId,fn:t}),le.useEffect(()=>{if(n.pauseOnFocusLoss)return g(),()=>{m()}},[n.pauseOnFocusLoss]);function g(){document.hasFocus()||S(),window.addEventListener("focus",C),window.addEventListener("blur",S)}function m(){window.removeEventListener("focus",C),window.removeEventListener("blur",S)}function x(F){if(n.draggable===!0||n.draggable===F.pointerType){k();let I=a.current;o.canCloseOnClick=!0,o.canDrag=!0,I.style.transition="none",n.draggableDirection==="x"?(o.start=F.clientX,o.removalDistance=I.offsetWidth*(n.draggablePercent/100)):(o.start=F.clientY,o.removalDistance=I.offsetHeight*(n.draggablePercent===80?n.draggablePercent*1.5:n.draggablePercent)/100)}}function _(F){let{top:I,bottom:T,left:j,right:N}=a.current.getBoundingClientRect();F.nativeEvent.type!=="touchend"&&n.pauseOnHover&&F.clientX>=j&&F.clientX<=N&&F.clientY>=I&&F.clientY<=T?S():C()}function C(){t(!0)}function S(){t(!1)}function k(){o.didMove=!1,document.addEventListener("pointermove",P),document.addEventListener("pointerup",Y)}function M(){document.removeEventListener("pointermove",P),document.removeEventListener("pointerup",Y)}function P(F){let I=a.current;if(o.canDrag&&I){o.didMove=!0,e&&S(),n.draggableDirection==="x"?o.delta=F.clientX-o.start:o.delta=F.clientY-o.start,o.start!==F.clientX&&(o.canCloseOnClick=!1);let T=n.draggableDirection==="x"?`${o.delta}px, var(--y)`:`0, calc(${o.delta}px + var(--y))`;I.style.transform=`translate3d(${T},0)`,I.style.opacity=`${1-Math.abs(o.delta/o.removalDistance)}`}}function Y(){M();let F=a.current;if(o.canDrag&&o.didMove&&F){if(o.canDrag=!1,Math.abs(o.delta)>o.removalDistance){i(!0),n.closeToast(!0),n.collapseAll();return}F.style.transition="transform 0.2s, opacity 0.2s",F.style.removeProperty("transform"),F.style.removeProperty("opacity")}}let z={onPointerDown:x,onPointerUp:_};return s&&c&&(z.onMouseEnter=S,n.stacked||(z.onMouseLeave=C)),p&&(z.onClick=F=>{d&&d(F),o.canCloseOnClick&&f(!0)}),{playToast:C,pauseToast:S,isRunning:e,preventExitTransition:r,toastRef:a,eventHandlers:z}}var wH=typeof window<"u"?le.useLayoutEffect:le.useEffect,g2=({theme:n,type:e,isLoading:t,...r})=>Xn.createElement("svg",{viewBox:"0 0 24 24",width:"100%",height:"100%",fill:n==="colored"?"currentColor":`var(--toastify-icon-color-${e})`,...r});function _H(n){return Xn.createElement(g2,{...n},Xn.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))}function AH(n){return Xn.createElement(g2,{...n},Xn.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))}function SH(n){return Xn.createElement(g2,{...n},Xn.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))}function EH(n){return Xn.createElement(g2,{...n},Xn.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))}function CH(){return Xn.createElement("div",{className:"Toastify__spinner"})}var Ix={info:AH,warning:_H,success:SH,error:EH,spinner:CH},IH=n=>n in Ix;function TH({theme:n,type:e,isLoading:t,icon:r}){let i=null,a={theme:n,type:e};return r===!1||(iu(r)?i=r({...a,isLoading:t}):le.isValidElement(r)?i=le.cloneElement(r,a):t?i=Ix.spinner():IH(e)&&(i=Ix[e](a))),i}var RH=n=>{let{isRunning:e,preventExitTransition:t,toastRef:r,eventHandlers:i,playToast:a}=bH(n),{closeButton:o,children:s,autoClose:c,onClick:f,type:d,hideProgressBar:p,closeToast:g,transition:m,position:x,className:_,style:C,progressClassName:S,updateId:k,role:M,progress:P,rtl:Y,toastId:z,deleteToast:F,isIn:I,isLoading:T,closeOnClick:j,theme:N,ariaLabel:R}=n,D=od("Toastify__toast",`Toastify__toast-theme--${N}`,`Toastify__toast--${d}`,{"Toastify__toast--rtl":Y},{"Toastify__toast--close-on-click":j}),L=iu(_)?_({rtl:Y,position:x,type:d,defaultClassName:D}):od(D,_),G=TH(n),U=!!P||!c,H={closeToast:g,type:d,theme:N},te=null;return o===!1||(iu(o)?te=o(H):le.isValidElement(o)?te=le.cloneElement(o,H):te=iH(H)),Xn.createElement(m,{isIn:I,done:F,position:x,preventExitTransition:t,nodeRef:r,playToast:a},Xn.createElement("div",{id:z,tabIndex:0,onClick:f,"data-in":I,className:L,...i,style:C,ref:r,...I&&{role:M,"aria-label":R}},G!=null&&Xn.createElement("div",{className:od("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!T})},G),PC(s,n,!e),te,!n.customProgressBar&&Xn.createElement(aH,{...k&&!U?{key:`p-${k}`}:{},rtl:Y,theme:N,delay:c,isRunning:e,isIn:I,closeToast:g,hide:p,type:d,className:S,controlledProgress:U,progress:P||0})))},NH=(n,e=!1)=>({enter:`Toastify--animate Toastify__${n}-enter`,exit:`Toastify--animate Toastify__${n}-exit`,appendPosition:e}),DH=rH(NH("bounce",!0)),OH={position:"top-right",transition:DH,autoClose:5e3,closeButton:!0,pauseOnHover:!0,pauseOnFocusLoss:!0,draggable:"touch",draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light","aria-label":"Notifications Alt+T",hotKeys:n=>n.altKey&&n.code==="KeyT"};function kH(n){let e={...OH,...n},t=n.stacked,[r,i]=le.useState(!0),a=le.useRef(null),{getToastToRender:o,isToastActive:s,count:c}=xH(e),{className:f,style:d,rtl:p,containerId:g,hotKeys:m}=e;function x(C){let S=od("Toastify__toast-container",`Toastify__toast-container--${C}`,{"Toastify__toast-container--rtl":p});return iu(f)?f({position:C,rtl:p,defaultClassName:S}):od(S,Sx(f))}function _(){t&&(i(!0),Dn.play())}return wH(()=>{var C;if(t){let S=a.current.querySelectorAll('[data-in="true"]'),k=12,M=(C=e.position)==null?void 0:C.includes("top"),P=0,Y=0;Array.from(S).reverse().forEach((z,F)=>{let I=z;I.classList.add("Toastify__toast--stacked"),F>0&&(I.dataset.collapsed=`${r}`),I.dataset.pos||(I.dataset.pos=M?"top":"bot");let T=P*(r?.2:1)+(r?0:k*F);I.style.setProperty("--y",`${M?T:T*-1}px`),I.style.setProperty("--g",`${k}`),I.style.setProperty("--s",`${1-(r?Y:0)}`),P+=I.offsetHeight,Y+=.025})}},[r,c,t]),le.useEffect(()=>{function C(S){var k;let M=a.current;m(S)&&((k=M.querySelector('[tabIndex="0"]'))==null||k.focus(),i(!1),Dn.pause()),S.key==="Escape"&&(document.activeElement===M||M!=null&&M.contains(document.activeElement))&&(i(!0),Dn.play())}return document.addEventListener("keydown",C),()=>{document.removeEventListener("keydown",C)}},[m]),Xn.createElement("section",{ref:a,className:"Toastify",id:g,onMouseEnter:()=>{t&&(i(!1),Dn.pause())},onMouseLeave:_,"aria-live":"polite","aria-atomic":"false","aria-relevant":"additions text","aria-label":e["aria-label"]},o((C,S)=>{let k=S.length?{...d}:{...d,pointerEvents:"none"};return Xn.createElement("div",{tabIndex:-1,className:x(C),"data-stacked":t,style:k,key:`c-${C}`},S.map(({content:M,props:P})=>Xn.createElement(RH,{...P,stacked:t,collapseAll:_,isIn:s(P.toastId,P.containerId),key:`t-${P.key}`},M)))}))}var rh={},ry={exports:{}},iy,n6;function LH(){if(n6)return iy;n6=1;var n="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return iy=n,iy}var ay,r6;function PH(){if(r6)return ay;r6=1;var n=LH();function e(){}function t(){}return t.resetWarningCache=e,ay=function(){function r(o,s,c,f,d,p){if(p!==n){var g=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw g.name="Invariant Violation",g}}r.isRequired=r;function i(){return r}var a={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:i,element:r,elementType:r,instanceOf:i,node:r,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:t,resetWarningCache:e};return a.PropTypes=a,a},ay}var i6;function MH(){return i6||(i6=1,ry.exports=PH()()),ry.exports}var a6;function jH(){if(a6)return rh;a6=1,Object.defineProperty(rh,"__esModule",{value:!0}),rh.default=void 0;var n=Object.assign||function(F){for(var I=1;I<arguments.length;I++){var T=arguments[I];for(var j in T)Object.prototype.hasOwnProperty.call(T,j)&&(F[j]=T[j])}return F},e=function(){function F(I,T){for(var j=0;j<T.length;j++){var N=T[j];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(I,N.key,N)}}return function(I,T,j){return T&&F(I.prototype,T),j&&F(I,j),I}}(),t,r;rh.confirmAlert=z;var i=Im(),a=f(i),o=MH(),s=f(o),c=PA();function f(F){return F&&F.__esModule?F:{default:F}}function d(F,I){if(!(F instanceof I))throw new TypeError("Cannot call a class as a function")}function p(F,I){if(!F)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return I&&(typeof I=="object"||typeof I=="function")?I:F}function g(F,I){if(typeof I!="function"&&I!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof I);F.prototype=Object.create(I&&I.prototype,{constructor:{value:F,enumerable:!1,writable:!0,configurable:!0}}),I&&(Object.setPrototypeOf?Object.setPrototypeOf(F,I):F.__proto__=I)}var m=(r=t=function(F){g(I,F);function I(){var T,j,N,R;d(this,I);for(var D=arguments.length,L=Array(D),G=0;G<D;G++)L[G]=arguments[G];return R=(j=(N=p(this,(T=I.__proto__||Object.getPrototypeOf(I)).call.apply(T,[this].concat(L))),N),N.handleClickButton=function(U){U.onClick&&U.onClick(),N.close()},N.handleClickOverlay=function(U){var H=N.props,te=H.closeOnClickOutside,se=H.onClickOutside,ee=U.target===N.overlay;te&&ee&&(se(),N.close()),U.stopPropagation()},N.close=function(){var U=N.props.afterClose;Y(),M(N.props),S(U)},N.keyboard=function(U){var H=N.props,te=H.closeOnEscape,se=H.onKeypressEscape,ee=H.onkeyPress,ie=H.keyCodeForClose,$=U.keyCode,W=$===27;ie.includes($)&&N.close(),te&&W&&(se(U),N.close()),ee&&ee()},N.componentDidMount=function(){document.addEventListener("keydown",N.keyboard,!1)},N.componentWillUnmount=function(){document.removeEventListener("keydown",N.keyboard,!1),N.props.willUnmount()},N.renderCustomUI=function(){var U=N.props,H=U.title,te=U.message,se=U.buttons,ee=U.customUI,ie={title:H,message:te,buttons:se,onClose:N.close};return ee(ie)},j),p(N,R)}return e(I,[{key:"render",value:function(){var j=this,N=this.props,R=N.title,D=N.message,L=N.buttons,G=N.childrenElement,U=N.customUI,H=N.overlayClassName;return a.default.createElement("div",{className:"react-confirm-alert-overlay "+H,ref:function(se){return j.overlay=se},onClick:this.handleClickOverlay},a.default.createElement("div",{className:"react-confirm-alert"},U?this.renderCustomUI():a.default.createElement("div",{className:"react-confirm-alert-body"},R&&a.default.createElement("h1",null,R),D,G(),a.default.createElement("div",{className:"react-confirm-alert-button-group"},L.map(function(te,se){return a.default.createElement("button",n({key:se,className:te.className},te,{onClick:function(ie){return j.handleClickButton(te)}}),te.label)})))))}}]),I}(i.Component),t.propTypes={title:s.default.string,message:s.default.string,buttons:s.default.array.isRequired,childrenElement:s.default.func,customUI:s.default.func,closeOnClickOutside:s.default.bool,closeOnEscape:s.default.bool,keyCodeForClose:s.default.arrayOf(s.default.number),willUnmount:s.default.func,afterClose:s.default.func,onClickOutside:s.default.func,onKeypressEscape:s.default.func,onkeyPress:s.default.func,overlayClassName:s.default.string},t.defaultProps={buttons:[{label:"Cancel",onClick:function(){return null},className:null},{label:"Confirm",onClick:function(){return null},className:null}],childrenElement:function(){return null},closeOnClickOutside:!0,closeOnEscape:!0,keyCodeForClose:[],willUnmount:function(){return null},afterClose:function(){return null},onClickOutside:function(){return null},onKeypressEscape:function(){return null}},r);rh.default=m;var x=null,_="react-confirm-alert";function C(){var F=document.getElementById("react-confirm-alert-firm-svg");if(!F){var I="http://www.w3.org/2000/svg",T=document.createElementNS(I,"feGaussianBlur");T.setAttribute("stdDeviation","0.3");var j=document.createElementNS(I,"filter");j.setAttribute("id","gaussian-blur"),j.appendChild(T);var N=document.createElementNS(I,"svg");N.setAttribute("id","react-confirm-alert-firm-svg"),N.setAttribute("class","react-confirm-alert-svg"),N.appendChild(j),document.body.appendChild(N)}}function S(F){var I=document.getElementById("react-confirm-alert-firm-svg");I&&I.parentNode.removeChild(I),document.body.children[0].classList.remove("react-confirm-alert-blur"),F()}function k(F){var I=document.getElementById(F.targetId||_);F.targetId&&!I&&console.error("React Confirm Alert:","Can not get element id (#"+F.targetId+")"),I?(x=(0,c.createRoot)(I),x.render(a.default.createElement(m,F))):(document.body.children[0].classList.add("react-confirm-alert-blur"),I=document.createElement("div"),I.id=_,document.body.appendChild(I),x=(0,c.createRoot)(I),x.render(a.default.createElement(m,F)))}function M(F){var I=document.getElementById(F.targetId||_);I&&x.unmount(I)}function P(){document.body.classList.add("react-confirm-alert-body-element")}function Y(){document.body.classList.remove("react-confirm-alert-body-element")}function z(F){P(),C(),k(F)}return rh}var BH=jH();function FH(n,e){return e.forEach(function(t){t&&typeof t!="string"&&!Array.isArray(t)&&Object.keys(t).forEach(function(r){if(r!=="default"&&!(r in n)){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}})}),Object.freeze(n)}function zC(n,e){return new Promise(function(t,r){let i;return UH(n).then(function(a){try{return i=a,t(new Blob([e.slice(0,2),i,e.slice(2)],{type:"image/jpeg"}))}catch(o){return r(o)}},r)})}const UH=n=>new Promise((e,t)=>{const r=new FileReader;r.addEventListener("load",({target:{result:i}})=>{const a=new DataView(i);let o=0;if(a.getUint16(o)!==65496)return t("not a valid JPEG");for(o+=2;;){const s=a.getUint16(o);if(s===65498)break;const c=a.getUint16(o+2);if(s===65505&&a.getUint32(o+4)===1165519206){const f=o+10;let d;switch(a.getUint16(f)){case 18761:d=!0;break;case 19789:d=!1;break;default:return t("TIFF header contains invalid endian")}if(a.getUint16(f+2,d)!==42)return t("TIFF header contains invalid version");const p=a.getUint32(f+4,d),g=f+p+2+12*a.getUint16(f+p,d);for(let m=f+p+2;m<g;m+=12)if(a.getUint16(m,d)==274){if(a.getUint16(m+2,d)!==3)return t("Orientation data type is invalid");if(a.getUint32(m+4,d)!==1)return t("Orientation data count is invalid");a.setUint16(m+8,1,d);break}return e(i.slice(o,o+2+c))}o+=2+c}return e(new Blob)}),r.readAsArrayBuffer(n)});var gm={},zH={get exports(){return gm},set exports(n){gm=n}};(function(n){var e,t,r={};zH.exports=r,r.parse=function(i,a){for(var o=r.bin.readUshort,s=r.bin.readUint,c=0,f={},d=new Uint8Array(i),p=d.length-4;s(d,p)!=101010256;)p--;c=p,c+=4;var g=o(d,c+=4);o(d,c+=2);var m=s(d,c+=2),x=s(d,c+=4);c+=4,c=x;for(var _=0;_<g;_++){s(d,c),c+=4,c+=4,c+=4,s(d,c+=4),m=s(d,c+=4);var C=s(d,c+=4),S=o(d,c+=4),k=o(d,c+2),M=o(d,c+4);c+=6;var P=s(d,c+=8);c+=4,c+=S+k+M,r._readLocal(d,P,f,m,C,a)}return f},r._readLocal=function(i,a,o,s,c,f){var d=r.bin.readUshort,p=r.bin.readUint;p(i,a),d(i,a+=4),d(i,a+=2);var g=d(i,a+=2);p(i,a+=2),p(i,a+=4),a+=4;var m=d(i,a+=8),x=d(i,a+=2);a+=2;var _=r.bin.readUTF8(i,a,m);if(a+=m,a+=x,f)o[_]={size:c,csize:s};else{var C=new Uint8Array(i.buffer,a);if(g==0)o[_]=new Uint8Array(C.buffer.slice(a,a+s));else{if(g!=8)throw"unknown compression method: "+g;var S=new Uint8Array(c);r.inflateRaw(C,S),o[_]=S}}},r.inflateRaw=function(i,a){return r.F.inflate(i,a)},r.inflate=function(i,a){return i[0],i[1],r.inflateRaw(new Uint8Array(i.buffer,i.byteOffset+2,i.length-6),a)},r.deflate=function(i,a){a==null&&(a={level:6});var o=0,s=new Uint8Array(50+Math.floor(1.1*i.length));s[o]=120,s[o+1]=156,o+=2,o=r.F.deflateRaw(i,s,o,a.level);var c=r.adler(i,0,i.length);return s[o+0]=c>>>24&255,s[o+1]=c>>>16&255,s[o+2]=c>>>8&255,s[o+3]=c>>>0&255,new Uint8Array(s.buffer,0,o+4)},r.deflateRaw=function(i,a){a==null&&(a={level:6});var o=new Uint8Array(50+Math.floor(1.1*i.length)),s=r.F.deflateRaw(i,o,s,a.level);return new Uint8Array(o.buffer,0,s)},r.encode=function(i,a){a==null&&(a=!1);var o=0,s=r.bin.writeUint,c=r.bin.writeUshort,f={};for(var d in i){var p=!r._noNeed(d)&&!a,g=i[d],m=r.crc.crc(g,0,g.length);f[d]={cpr:p,usize:g.length,crc:m,file:p?r.deflateRaw(g):g}}for(var d in f)o+=f[d].file.length+30+46+2*r.bin.sizeUTF8(d);o+=22;var x=new Uint8Array(o),_=0,C=[];for(var d in f){var S=f[d];C.push(_),_=r._writeHeader(x,_,d,S,0)}var k=0,M=_;for(var d in f)S=f[d],C.push(_),_=r._writeHeader(x,_,d,S,1,C[k++]);var P=_-M;return s(x,_,101010256),_+=4,c(x,_+=4,k),c(x,_+=2,k),s(x,_+=2,P),s(x,_+=4,M),_+=4,_+=2,x.buffer},r._noNeed=function(i){var a=i.split(".").pop().toLowerCase();return"png,jpg,jpeg,zip".indexOf(a)!=-1},r._writeHeader=function(i,a,o,s,c,f){var d=r.bin.writeUint,p=r.bin.writeUshort,g=s.file;return d(i,a,c==0?67324752:33639248),a+=4,c==1&&(a+=2),p(i,a,20),p(i,a+=2,0),p(i,a+=2,s.cpr?8:0),d(i,a+=2,0),d(i,a+=4,s.crc),d(i,a+=4,g.length),d(i,a+=4,s.usize),p(i,a+=4,r.bin.sizeUTF8(o)),p(i,a+=2,0),a+=2,c==1&&(a+=2,a+=2,d(i,a+=6,f),a+=4),a+=r.bin.writeUTF8(i,a,o),c==0&&(i.set(g,a),a+=g.length),a},r.crc={table:function(){for(var i=new Uint32Array(256),a=0;a<256;a++){for(var o=a,s=0;s<8;s++)1&o?o=3988292384^o>>>1:o>>>=1;i[a]=o}return i}(),update:function(i,a,o,s){for(var c=0;c<s;c++)i=r.crc.table[255&(i^a[o+c])]^i>>>8;return i},crc:function(i,a,o){return 4294967295^r.crc.update(4294967295,i,a,o)}},r.adler=function(i,a,o){for(var s=1,c=0,f=a,d=a+o;f<d;){for(var p=Math.min(f+5552,d);f<p;)c+=s+=i[f++];s%=65521,c%=65521}return c<<16|s},r.bin={readUshort:function(i,a){return i[a]|i[a+1]<<8},writeUshort:function(i,a,o){i[a]=255&o,i[a+1]=o>>8&255},readUint:function(i,a){return 16777216*i[a+3]+(i[a+2]<<16|i[a+1]<<8|i[a])},writeUint:function(i,a,o){i[a]=255&o,i[a+1]=o>>8&255,i[a+2]=o>>16&255,i[a+3]=o>>24&255},readASCII:function(i,a,o){for(var s="",c=0;c<o;c++)s+=String.fromCharCode(i[a+c]);return s},writeASCII:function(i,a,o){for(var s=0;s<o.length;s++)i[a+s]=o.charCodeAt(s)},pad:function(i){return i.length<2?"0"+i:i},readUTF8:function(i,a,o){for(var s,c="",f=0;f<o;f++)c+="%"+r.bin.pad(i[a+f].toString(16));try{s=decodeURIComponent(c)}catch{return r.bin.readASCII(i,a,o)}return s},writeUTF8:function(i,a,o){for(var s=o.length,c=0,f=0;f<s;f++){var d=o.charCodeAt(f);if((4294967168&d)==0)i[a+c]=d,c++;else if((4294965248&d)==0)i[a+c]=192|d>>6,i[a+c+1]=128|d>>0&63,c+=2;else if((4294901760&d)==0)i[a+c]=224|d>>12,i[a+c+1]=128|d>>6&63,i[a+c+2]=128|d>>0&63,c+=3;else{if((4292870144&d)!=0)throw"e";i[a+c]=240|d>>18,i[a+c+1]=128|d>>12&63,i[a+c+2]=128|d>>6&63,i[a+c+3]=128|d>>0&63,c+=4}}return c},sizeUTF8:function(i){for(var a=i.length,o=0,s=0;s<a;s++){var c=i.charCodeAt(s);if((4294967168&c)==0)o++;else if((4294965248&c)==0)o+=2;else if((4294901760&c)==0)o+=3;else{if((4292870144&c)!=0)throw"e";o+=4}}return o}},r.F={},r.F.deflateRaw=function(i,a,o,s){var c=[[0,0,0,0,0],[4,4,8,4,0],[4,5,16,8,0],[4,6,16,16,0],[4,10,16,32,0],[8,16,32,32,0],[8,16,128,128,0],[8,32,128,256,0],[32,128,258,1024,1],[32,258,258,4096,1]][s],f=r.F.U,d=r.F._goodIndex;r.F._hash;var p=r.F._putsE,g=0,m=o<<3,x=0,_=i.length;if(s==0){for(;g<_;)p(a,m,g+(N=Math.min(65535,_-g))==_?1:0),m=r.F._copyExact(i,g,N,a,m+8),g+=N;return m>>>3}var C=f.lits,S=f.strt,k=f.prev,M=0,P=0,Y=0,z=0,F=0,I=0;for(_>2&&(S[I=r.F._hash(i,0)]=0),g=0;g<_;g++){if(F=I,g+1<_-2){I=r.F._hash(i,g+1);var T=g+1&32767;k[T]=S[I],S[I]=T}if(x<=g){(M>14e3||P>26697)&&_-g>100&&(x<g&&(C[M]=g-x,M+=2,x=g),m=r.F._writeBlock(g==_-1||x==_?1:0,C,M,z,i,Y,g-Y,a,m),M=P=z=0,Y=g);var j=0;g<_-2&&(j=r.F._bestMatch(i,g,k,F,Math.min(c[2],_-g),c[3]));var N=j>>>16,R=65535&j;if(j!=0){R=65535&j;var D=d(N=j>>>16,f.of0);f.lhst[257+D]++;var L=d(R,f.df0);f.dhst[L]++,z+=f.exb[D]+f.dxb[L],C[M]=N<<23|g-x,C[M+1]=R<<16|D<<8|L,M+=2,x=g+N}else f.lhst[i[g]]++;P++}}for(Y==g&&i.length!=0||(x<g&&(C[M]=g-x,M+=2,x=g),m=r.F._writeBlock(1,C,M,z,i,Y,g-Y,a,m),M=0,P=0,M=P=z=0,Y=g);(7&m)!=0;)m++;return m>>>3},r.F._bestMatch=function(i,a,o,s,c,f){var d=32767&a,p=o[d],g=d-p+32768&32767;if(p==d||s!=r.F._hash(i,a-g))return 0;for(var m=0,x=0,_=Math.min(32767,a);g<=_&&--f!=0&&p!=d;){if(m==0||i[a+m]==i[a+m-g]){var C=r.F._howLong(i,a,g);if(C>m){if(x=g,(m=C)>=c)break;g+2<C&&(C=g+2);for(var S=0,k=0;k<C-2;k++){var M=a-g+k+32768&32767,P=M-o[M]+32768&32767;P>S&&(S=P,p=M)}}}g+=(d=p)-(p=o[d])+32768&32767}return m<<16|x},r.F._howLong=function(i,a,o){if(i[a]!=i[a-o]||i[a+1]!=i[a+1-o]||i[a+2]!=i[a+2-o])return 0;var s=a,c=Math.min(i.length,a+258);for(a+=3;a<c&&i[a]==i[a-o];)a++;return a-s},r.F._hash=function(i,a){return(i[a]<<8|i[a+1])+(i[a+2]<<4)&65535},r.saved=0,r.F._writeBlock=function(i,a,o,s,c,f,d,p,g){var m,x,_,C,S,k,M,P,Y,z=r.F.U,F=r.F._putsF,I=r.F._putsE;z.lhst[256]++,x=(m=r.F.getTrees())[0],_=m[1],C=m[2],S=m[3],k=m[4],M=m[5],P=m[6],Y=m[7];var T=32+((g+3&7)==0?0:8-(g+3&7))+(d<<3),j=s+r.F.contSize(z.fltree,z.lhst)+r.F.contSize(z.fdtree,z.dhst),N=s+r.F.contSize(z.ltree,z.lhst)+r.F.contSize(z.dtree,z.dhst);N+=14+3*M+r.F.contSize(z.itree,z.ihst)+(2*z.ihst[16]+3*z.ihst[17]+7*z.ihst[18]);for(var R=0;R<286;R++)z.lhst[R]=0;for(R=0;R<30;R++)z.dhst[R]=0;for(R=0;R<19;R++)z.ihst[R]=0;var D=T<j&&T<N?0:j<N?1:2;if(F(p,g,i),F(p,g+1,D),g+=3,D==0){for(;(7&g)!=0;)g++;g=r.F._copyExact(c,f,d,p,g)}else{var L,G;if(D==1&&(L=z.fltree,G=z.fdtree),D==2){r.F.makeCodes(z.ltree,x),r.F.revCodes(z.ltree,x),r.F.makeCodes(z.dtree,_),r.F.revCodes(z.dtree,_),r.F.makeCodes(z.itree,C),r.F.revCodes(z.itree,C),L=z.ltree,G=z.dtree,I(p,g,S-257),I(p,g+=5,k-1),I(p,g+=5,M-4),g+=4;for(var U=0;U<M;U++)I(p,g+3*U,z.itree[1+(z.ordr[U]<<1)]);g+=3*M,g=r.F._codeTiny(P,z.itree,p,g),g=r.F._codeTiny(Y,z.itree,p,g)}for(var H=f,te=0;te<o;te+=2){for(var se=a[te],ee=se>>>23,ie=H+(8388607&se);H<ie;)g=r.F._writeLit(c[H++],L,p,g);if(ee!=0){var $=a[te+1],W=$>>16,Q=$>>8&255,J=255&$;I(p,g=r.F._writeLit(257+Q,L,p,g),ee-z.of0[Q]),g+=z.exb[Q],F(p,g=r.F._writeLit(J,G,p,g),W-z.df0[J]),g+=z.dxb[J],H+=ee}}g=r.F._writeLit(256,L,p,g)}return g},r.F._copyExact=function(i,a,o,s,c){var f=c>>>3;return s[f]=o,s[f+1]=o>>>8,s[f+2]=255-s[f],s[f+3]=255-s[f+1],f+=4,s.set(new Uint8Array(i.buffer,a,o),f),c+(o+4<<3)},r.F.getTrees=function(){for(var i=r.F.U,a=r.F._hufTree(i.lhst,i.ltree,15),o=r.F._hufTree(i.dhst,i.dtree,15),s=[],c=r.F._lenCodes(i.ltree,s),f=[],d=r.F._lenCodes(i.dtree,f),p=0;p<s.length;p+=2)i.ihst[s[p]]++;for(p=0;p<f.length;p+=2)i.ihst[f[p]]++;for(var g=r.F._hufTree(i.ihst,i.itree,7),m=19;m>4&&i.itree[1+(i.ordr[m-1]<<1)]==0;)m--;return[a,o,g,c,d,m,s,f]},r.F.getSecond=function(i){for(var a=[],o=0;o<i.length;o+=2)a.push(i[o+1]);return a},r.F.nonZero=function(i){for(var a="",o=0;o<i.length;o+=2)i[o+1]!=0&&(a+=(o>>1)+",");return a},r.F.contSize=function(i,a){for(var o=0,s=0;s<a.length;s++)o+=a[s]*i[1+(s<<1)];return o},r.F._codeTiny=function(i,a,o,s){for(var c=0;c<i.length;c+=2){var f=i[c],d=i[c+1];s=r.F._writeLit(f,a,o,s);var p=f==16?2:f==17?3:7;f>15&&(r.F._putsE(o,s,d,p),s+=p)}return s},r.F._lenCodes=function(i,a){for(var o=i.length;o!=2&&i[o-1]==0;)o-=2;for(var s=0;s<o;s+=2){var c=i[s+1],f=s+3<o?i[s+3]:-1,d=s+5<o?i[s+5]:-1,p=s==0?-1:i[s-1];if(c==0&&f==c&&d==c){for(var g=s+5;g+2<o&&i[g+2]==c;)g+=2;(m=Math.min(g+1-s>>>1,138))<11?a.push(17,m-3):a.push(18,m-11),s+=2*m-2}else if(c==p&&f==c&&d==c){for(g=s+5;g+2<o&&i[g+2]==c;)g+=2;var m=Math.min(g+1-s>>>1,6);a.push(16,m-3),s+=2*m-2}else a.push(c,0)}return o>>>1},r.F._hufTree=function(i,a,o){var s=[],c=i.length,f=a.length,d=0;for(d=0;d<f;d+=2)a[d]=0,a[d+1]=0;for(d=0;d<c;d++)i[d]!=0&&s.push({lit:d,f:i[d]});var p=s.length,g=s.slice(0);if(p==0)return 0;if(p==1){var m=s[0].lit;return g=m==0?1:0,a[1+(m<<1)]=1,a[1+(g<<1)]=1,1}s.sort(function(P,Y){return P.f-Y.f});var x=s[0],_=s[1],C=0,S=1,k=2;for(s[0]={lit:-1,f:x.f+_.f,l:x,r:_,d:0};S!=p-1;)x=C!=S&&(k==p||s[C].f<s[k].f)?s[C++]:s[k++],_=C!=S&&(k==p||s[C].f<s[k].f)?s[C++]:s[k++],s[S++]={lit:-1,f:x.f+_.f,l:x,r:_};var M=r.F.setDepth(s[S-1],0);for(M>o&&(r.F.restrictDepth(g,o,M),M=o),d=0;d<p;d++)a[1+(g[d].lit<<1)]=g[d].d;return M},r.F.setDepth=function(i,a){return i.lit!=-1?(i.d=a,a):Math.max(r.F.setDepth(i.l,a+1),r.F.setDepth(i.r,a+1))},r.F.restrictDepth=function(i,a,o){var s=0,c=1<<o-a,f=0;for(i.sort(function(p,g){return g.d==p.d?p.f-g.f:g.d-p.d}),s=0;s<i.length&&i[s].d>a;s++){var d=i[s].d;i[s].d=a,f+=c-(1<<o-d)}for(f>>>=o-a;f>0;)(d=i[s].d)<a?(i[s].d++,f-=1<<a-d-1):s++;for(;s>=0;s--)i[s].d==a&&f<0&&(i[s].d--,f++);f!=0&&console.log("debt left")},r.F._goodIndex=function(i,a){var o=0;return a[16|o]<=i&&(o|=16),a[8|o]<=i&&(o|=8),a[4|o]<=i&&(o|=4),a[2|o]<=i&&(o|=2),a[1|o]<=i&&(o|=1),o},r.F._writeLit=function(i,a,o,s){return r.F._putsF(o,s,a[i<<1]),s+a[1+(i<<1)]},r.F.inflate=function(i,a){var o=Uint8Array;if(i[0]==3&&i[1]==0)return a||new o(0);var s=r.F,c=s._bitsF,f=s._bitsE,d=s._decodeTiny,p=s.makeCodes,g=s.codes2map,m=s._get17,x=s.U,_=a==null;_&&(a=new o(i.length>>>2<<3));for(var C,S,k=0,M=0,P=0,Y=0,z=0,F=0,I=0,T=0,j=0;k==0;)if(k=c(i,j,1),M=c(i,j+1,2),j+=3,M!=0){if(_&&(a=r.F._check(a,T+(1<<17))),M==1&&(C=x.flmap,S=x.fdmap,F=511,I=31),M==2){P=f(i,j,5)+257,Y=f(i,j+5,5)+1,z=f(i,j+10,4)+4,j+=14;for(var N=0;N<38;N+=2)x.itree[N]=0,x.itree[N+1]=0;var R=1;for(N=0;N<z;N++){var D=f(i,j+3*N,3);x.itree[1+(x.ordr[N]<<1)]=D,D>R&&(R=D)}j+=3*z,p(x.itree,R),g(x.itree,R,x.imap),C=x.lmap,S=x.dmap,j=d(x.imap,(1<<R)-1,P+Y,i,j,x.ttree);var L=s._copyOut(x.ttree,0,P,x.ltree);F=(1<<L)-1;var G=s._copyOut(x.ttree,P,Y,x.dtree);I=(1<<G)-1,p(x.ltree,L),g(x.ltree,L,C),p(x.dtree,G),g(x.dtree,G,S)}for(;;){var U=C[m(i,j)&F];j+=15&U;var H=U>>>4;if(!(H>>>8))a[T++]=H;else{if(H==256)break;var te=T+H-254;if(H>264){var se=x.ldef[H-257];te=T+(se>>>3)+f(i,j,7&se),j+=7&se}var ee=S[m(i,j)&I];j+=15&ee;var ie=ee>>>4,$=x.ddef[ie],W=($>>>4)+c(i,j,15&$);for(j+=15&$,_&&(a=r.F._check(a,T+(1<<17)));T<te;)a[T]=a[T++-W],a[T]=a[T++-W],a[T]=a[T++-W],a[T]=a[T++-W];T=te}}}else{(7&j)!=0&&(j+=8-(7&j));var Q=4+(j>>>3),J=i[Q-4]|i[Q-3]<<8;_&&(a=r.F._check(a,T+J)),a.set(new o(i.buffer,i.byteOffset+Q,J),T),j=Q+J<<3,T+=J}return a.length==T?a:a.slice(0,T)},r.F._check=function(i,a){var o=i.length;if(a<=o)return i;var s=new Uint8Array(Math.max(o<<1,a));return s.set(i,0),s},r.F._decodeTiny=function(i,a,o,s,c,f){for(var d=r.F._bitsE,p=r.F._get17,g=0;g<o;){var m=i[p(s,c)&a];c+=15&m;var x=m>>>4;if(x<=15)f[g]=x,g++;else{var _=0,C=0;x==16?(C=3+d(s,c,2),c+=2,_=f[g-1]):x==17?(C=3+d(s,c,3),c+=3):x==18&&(C=11+d(s,c,7),c+=7);for(var S=g+C;g<S;)f[g]=_,g++}}return c},r.F._copyOut=function(i,a,o,s){for(var c=0,f=0,d=s.length>>>1;f<o;){var p=i[f+a];s[f<<1]=0,s[1+(f<<1)]=p,p>c&&(c=p),f++}for(;f<d;)s[f<<1]=0,s[1+(f<<1)]=0,f++;return c},r.F.makeCodes=function(i,a){for(var o,s,c,f,d=r.F.U,p=i.length,g=d.bl_count,m=0;m<=a;m++)g[m]=0;for(m=1;m<p;m+=2)g[i[m]]++;var x=d.next_code;for(o=0,g[0]=0,s=1;s<=a;s++)o=o+g[s-1]<<1,x[s]=o;for(c=0;c<p;c+=2)(f=i[c+1])!=0&&(i[c]=x[f],x[f]++)},r.F.codes2map=function(i,a,o){for(var s=i.length,c=r.F.U.rev15,f=0;f<s;f+=2)if(i[f+1]!=0)for(var d=f>>1,p=i[f+1],g=d<<4|p,m=a-p,x=i[f]<<m,_=x+(1<<m);x!=_;)o[c[x]>>>15-a]=g,x++},r.F.revCodes=function(i,a){for(var o=r.F.U.rev15,s=15-a,c=0;c<i.length;c+=2){var f=i[c]<<a-i[c+1];i[c]=o[f]>>>s}},r.F._putsE=function(i,a,o){o<<=7&a;var s=a>>>3;i[s]|=o,i[s+1]|=o>>>8},r.F._putsF=function(i,a,o){o<<=7&a;var s=a>>>3;i[s]|=o,i[s+1]|=o>>>8,i[s+2]|=o>>>16},r.F._bitsE=function(i,a,o){return(i[a>>>3]|i[1+(a>>>3)]<<8)>>>(7&a)&(1<<o)-1},r.F._bitsF=function(i,a,o){return(i[a>>>3]|i[1+(a>>>3)]<<8|i[2+(a>>>3)]<<16)>>>(7&a)&(1<<o)-1},r.F._get17=function(i,a){return(i[a>>>3]|i[1+(a>>>3)]<<8|i[2+(a>>>3)]<<16)>>>(7&a)},r.F._get25=function(i,a){return(i[a>>>3]|i[1+(a>>>3)]<<8|i[2+(a>>>3)]<<16|i[3+(a>>>3)]<<24)>>>(7&a)},r.F.U=(e=Uint16Array,t=Uint32Array,{next_code:new e(16),bl_count:new e(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new e(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new t(32),flmap:new e(512),fltree:[],fdmap:new e(32),fdtree:[],lmap:new e(32768),ltree:[],ttree:[],dmap:new e(32768),dtree:[],imap:new e(512),itree:[],rev15:new e(32768),lhst:new t(286),dhst:new t(30),ihst:new t(19),lits:new t(15e3),strt:new e(65536),prev:new e(32768)}),function(){for(var i=r.F.U,a=0;a<32768;a++){var o=a;o=(4278255360&(o=(4042322160&(o=(3435973836&(o=(2863311530&o)>>>1|(1431655765&o)<<1))>>>2|(858993459&o)<<2))>>>4|(252645135&o)<<4))>>>8|(16711935&o)<<8,i.rev15[a]=(o>>>16|o<<16)>>>17}function s(c,f,d){for(;f--!=0;)c.push(0,d)}for(a=0;a<32;a++)i.ldef[a]=i.of0[a]<<3|i.exb[a],i.ddef[a]=i.df0[a]<<4|i.dxb[a];s(i.fltree,144,8),s(i.fltree,112,9),s(i.fltree,24,7),s(i.fltree,8,8),r.F.makeCodes(i.fltree,9),r.F.codes2map(i.fltree,9,i.flmap),r.F.revCodes(i.fltree,9),s(i.fdtree,32,5),r.F.makeCodes(i.fdtree,5),r.F.codes2map(i.fdtree,5,i.fdmap),r.F.revCodes(i.fdtree,5),s(i.itree,19,0),s(i.ltree,286,0),s(i.dtree,30,0),s(i.ttree,320,0)}()})();var VH=FH({__proto__:null,default:gm},[gm]);const El=function(){var n={nextZero(d,p){for(;d[p]!=0;)p++;return p},readUshort:(d,p)=>d[p]<<8|d[p+1],writeUshort(d,p,g){d[p]=g>>8&255,d[p+1]=255&g},readUint:(d,p)=>16777216*d[p]+(d[p+1]<<16|d[p+2]<<8|d[p+3]),writeUint(d,p,g){d[p]=g>>24&255,d[p+1]=g>>16&255,d[p+2]=g>>8&255,d[p+3]=255&g},readASCII(d,p,g){let m="";for(let x=0;x<g;x++)m+=String.fromCharCode(d[p+x]);return m},writeASCII(d,p,g){for(let m=0;m<g.length;m++)d[p+m]=g.charCodeAt(m)},readBytes(d,p,g){const m=[];for(let x=0;x<g;x++)m.push(d[p+x]);return m},pad:d=>d.length<2?`0${d}`:d,readUTF8(d,p,g){let m,x="";for(let _=0;_<g;_++)x+=`%${n.pad(d[p+_].toString(16))}`;try{m=decodeURIComponent(x)}catch{return n.readASCII(d,p,g)}return m}};function e(d,p,g,m){const x=p*g,_=a(m),C=Math.ceil(p*_/8),S=new Uint8Array(4*x),k=new Uint32Array(S.buffer),{ctype:M}=m,{depth:P}=m,Y=n.readUshort;if(M==6){const se=x<<2;if(P==8)for(var z=0;z<se;z+=4)S[z]=d[z],S[z+1]=d[z+1],S[z+2]=d[z+2],S[z+3]=d[z+3];if(P==16)for(z=0;z<se;z++)S[z]=d[z<<1]}else if(M==2){const se=m.tabs.tRNS;if(se==null){if(P==8)for(z=0;z<x;z++){var F=3*z;k[z]=255<<24|d[F+2]<<16|d[F+1]<<8|d[F]}if(P==16)for(z=0;z<x;z++)F=6*z,k[z]=255<<24|d[F+4]<<16|d[F+2]<<8|d[F]}else{var I=se[0];const ee=se[1],ie=se[2];if(P==8)for(z=0;z<x;z++){var T=z<<2;F=3*z,k[z]=255<<24|d[F+2]<<16|d[F+1]<<8|d[F],d[F]==I&&d[F+1]==ee&&d[F+2]==ie&&(S[T+3]=0)}if(P==16)for(z=0;z<x;z++)T=z<<2,F=6*z,k[z]=255<<24|d[F+4]<<16|d[F+2]<<8|d[F],Y(d,F)==I&&Y(d,F+2)==ee&&Y(d,F+4)==ie&&(S[T+3]=0)}}else if(M==3){const se=m.tabs.PLTE,ee=m.tabs.tRNS,ie=ee?ee.length:0;if(P==1)for(var j=0;j<g;j++){var N=j*C,R=j*p;for(z=0;z<p;z++){T=R+z<<2;var D=3*(L=d[N+(z>>3)]>>7-((7&z)<<0)&1);S[T]=se[D],S[T+1]=se[D+1],S[T+2]=se[D+2],S[T+3]=L<ie?ee[L]:255}}if(P==2)for(j=0;j<g;j++)for(N=j*C,R=j*p,z=0;z<p;z++)T=R+z<<2,D=3*(L=d[N+(z>>2)]>>6-((3&z)<<1)&3),S[T]=se[D],S[T+1]=se[D+1],S[T+2]=se[D+2],S[T+3]=L<ie?ee[L]:255;if(P==4)for(j=0;j<g;j++)for(N=j*C,R=j*p,z=0;z<p;z++)T=R+z<<2,D=3*(L=d[N+(z>>1)]>>4-((1&z)<<2)&15),S[T]=se[D],S[T+1]=se[D+1],S[T+2]=se[D+2],S[T+3]=L<ie?ee[L]:255;if(P==8)for(z=0;z<x;z++){var L;T=z<<2,D=3*(L=d[z]),S[T]=se[D],S[T+1]=se[D+1],S[T+2]=se[D+2],S[T+3]=L<ie?ee[L]:255}}else if(M==4){if(P==8)for(z=0;z<x;z++){T=z<<2;var G=d[U=z<<1];S[T]=G,S[T+1]=G,S[T+2]=G,S[T+3]=d[U+1]}if(P==16)for(z=0;z<x;z++){var U;T=z<<2,G=d[U=z<<2],S[T]=G,S[T+1]=G,S[T+2]=G,S[T+3]=d[U+2]}}else if(M==0)for(I=m.tabs.tRNS?m.tabs.tRNS:-1,j=0;j<g;j++){const se=j*C,ee=j*p;if(P==1)for(var H=0;H<p;H++){var te=(G=255*(d[se+(H>>>3)]>>>7-(7&H)&1))==255*I?0:255;k[ee+H]=te<<24|G<<16|G<<8|G}else if(P==2)for(H=0;H<p;H++)te=(G=85*(d[se+(H>>>2)]>>>6-((3&H)<<1)&3))==85*I?0:255,k[ee+H]=te<<24|G<<16|G<<8|G;else if(P==4)for(H=0;H<p;H++)te=(G=17*(d[se+(H>>>1)]>>>4-((1&H)<<2)&15))==17*I?0:255,k[ee+H]=te<<24|G<<16|G<<8|G;else if(P==8)for(H=0;H<p;H++)te=(G=d[se+H])==I?0:255,k[ee+H]=te<<24|G<<16|G<<8|G;else if(P==16)for(H=0;H<p;H++)G=d[se+(H<<1)],te=Y(d,se+(H<<1))==I?0:255,k[ee+H]=te<<24|G<<16|G<<8|G}return S}function t(d,p,g,m){const x=a(d),_=Math.ceil(g*x/8),C=new Uint8Array((_+1+d.interlace)*m);return p=d.tabs.CgBI?i(p,C):r(p,C),d.interlace==0?p=o(p,d,0,g,m):d.interlace==1&&(p=function(k,M){const P=M.width,Y=M.height,z=a(M),F=z>>3,I=Math.ceil(P*z/8),T=new Uint8Array(Y*I);let j=0;const N=[0,0,4,0,2,0,1],R=[0,4,0,2,0,1,0],D=[8,8,8,4,4,2,2],L=[8,8,4,4,2,2,1];let G=0;for(;G<7;){const H=D[G],te=L[G];let se=0,ee=0,ie=N[G];for(;ie<Y;)ie+=H,ee++;let $=R[G];for(;$<P;)$+=te,se++;const W=Math.ceil(se*z/8);o(k,M,j,se,ee);let Q=0,J=N[G];for(;J<Y;){let he=R[G],be=j+Q*W<<3;for(;he<P;){var U;if(z==1&&(U=(U=k[be>>3])>>7-(7&be)&1,T[J*I+(he>>3)]|=U<<7-((7&he)<<0)),z==2&&(U=(U=k[be>>3])>>6-(7&be)&3,T[J*I+(he>>2)]|=U<<6-((3&he)<<1)),z==4&&(U=(U=k[be>>3])>>4-(7&be)&15,T[J*I+(he>>1)]|=U<<4-((1&he)<<2)),z>=8){const _e=J*I+he*F;for(let Ie=0;Ie<F;Ie++)T[_e+Ie]=k[(be>>3)+Ie]}be+=z,he+=te}Q++,J+=H}se*ee!=0&&(j+=ee*(1+W)),G+=1}return T}(p,d)),p}function r(d,p){return i(new Uint8Array(d.buffer,2,d.length-6),p)}var i=function(){const d={H:{}};return d.H.N=function(p,g){const m=Uint8Array;let x,_,C=0,S=0,k=0,M=0,P=0,Y=0,z=0,F=0,I=0;if(p[0]==3&&p[1]==0)return g||new m(0);const T=d.H,j=T.b,N=T.e,R=T.R,D=T.n,L=T.A,G=T.Z,U=T.m,H=g==null;for(H&&(g=new m(p.length>>>2<<5));C==0;)if(C=j(p,I,1),S=j(p,I+1,2),I+=3,S!=0){if(H&&(g=d.H.W(g,F+(1<<17))),S==1&&(x=U.J,_=U.h,Y=511,z=31),S==2){k=N(p,I,5)+257,M=N(p,I+5,5)+1,P=N(p,I+10,4)+4,I+=14;let se=1;for(var te=0;te<38;te+=2)U.Q[te]=0,U.Q[te+1]=0;for(te=0;te<P;te++){const $=N(p,I+3*te,3);U.Q[1+(U.X[te]<<1)]=$,$>se&&(se=$)}I+=3*P,D(U.Q,se),L(U.Q,se,U.u),x=U.w,_=U.d,I=R(U.u,(1<<se)-1,k+M,p,I,U.v);const ee=T.V(U.v,0,k,U.C);Y=(1<<ee)-1;const ie=T.V(U.v,k,M,U.D);z=(1<<ie)-1,D(U.C,ee),L(U.C,ee,x),D(U.D,ie),L(U.D,ie,_)}for(;;){const se=x[G(p,I)&Y];I+=15&se;const ee=se>>>4;if(!(ee>>>8))g[F++]=ee;else{if(ee==256)break;{let ie=F+ee-254;if(ee>264){const he=U.q[ee-257];ie=F+(he>>>3)+N(p,I,7&he),I+=7&he}const $=_[G(p,I)&z];I+=15&$;const W=$>>>4,Q=U.c[W],J=(Q>>>4)+j(p,I,15&Q);for(I+=15&Q;F<ie;)g[F]=g[F++-J],g[F]=g[F++-J],g[F]=g[F++-J],g[F]=g[F++-J];F=ie}}}}else{(7&I)!=0&&(I+=8-(7&I));const se=4+(I>>>3),ee=p[se-4]|p[se-3]<<8;H&&(g=d.H.W(g,F+ee)),g.set(new m(p.buffer,p.byteOffset+se,ee),F),I=se+ee<<3,F+=ee}return g.length==F?g:g.slice(0,F)},d.H.W=function(p,g){const m=p.length;if(g<=m)return p;const x=new Uint8Array(m<<1);return x.set(p,0),x},d.H.R=function(p,g,m,x,_,C){const S=d.H.e,k=d.H.Z;let M=0;for(;M<m;){const P=p[k(x,_)&g];_+=15&P;const Y=P>>>4;if(Y<=15)C[M]=Y,M++;else{let z=0,F=0;Y==16?(F=3+S(x,_,2),_+=2,z=C[M-1]):Y==17?(F=3+S(x,_,3),_+=3):Y==18&&(F=11+S(x,_,7),_+=7);const I=M+F;for(;M<I;)C[M]=z,M++}}return _},d.H.V=function(p,g,m,x){let _=0,C=0;const S=x.length>>>1;for(;C<m;){const k=p[C+g];x[C<<1]=0,x[1+(C<<1)]=k,k>_&&(_=k),C++}for(;C<S;)x[C<<1]=0,x[1+(C<<1)]=0,C++;return _},d.H.n=function(p,g){const m=d.H.m,x=p.length;let _,C,S,k;const M=m.j;for(var P=0;P<=g;P++)M[P]=0;for(P=1;P<x;P+=2)M[p[P]]++;const Y=m.K;for(_=0,M[0]=0,C=1;C<=g;C++)_=_+M[C-1]<<1,Y[C]=_;for(S=0;S<x;S+=2)k=p[S+1],k!=0&&(p[S]=Y[k],Y[k]++)},d.H.A=function(p,g,m){const x=p.length,_=d.H.m.r;for(let C=0;C<x;C+=2)if(p[C+1]!=0){const S=C>>1,k=p[C+1],M=S<<4|k,P=g-k;let Y=p[C]<<P;const z=Y+(1<<P);for(;Y!=z;)m[_[Y]>>>15-g]=M,Y++}},d.H.l=function(p,g){const m=d.H.m.r,x=15-g;for(let _=0;_<p.length;_+=2){const C=p[_]<<g-p[_+1];p[_]=m[C]>>>x}},d.H.M=function(p,g,m){m<<=7&g;const x=g>>>3;p[x]|=m,p[x+1]|=m>>>8},d.H.I=function(p,g,m){m<<=7&g;const x=g>>>3;p[x]|=m,p[x+1]|=m>>>8,p[x+2]|=m>>>16},d.H.e=function(p,g,m){return(p[g>>>3]|p[1+(g>>>3)]<<8)>>>(7&g)&(1<<m)-1},d.H.b=function(p,g,m){return(p[g>>>3]|p[1+(g>>>3)]<<8|p[2+(g>>>3)]<<16)>>>(7&g)&(1<<m)-1},d.H.Z=function(p,g){return(p[g>>>3]|p[1+(g>>>3)]<<8|p[2+(g>>>3)]<<16)>>>(7&g)},d.H.i=function(p,g){return(p[g>>>3]|p[1+(g>>>3)]<<8|p[2+(g>>>3)]<<16|p[3+(g>>>3)]<<24)>>>(7&g)},d.H.m=function(){const p=Uint16Array,g=Uint32Array;return{K:new p(16),j:new p(16),X:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],T:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],q:new p(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],z:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],c:new g(32),J:new p(512),_:[],h:new p(32),$:[],w:new p(32768),C:[],v:[],d:new p(32768),D:[],u:new p(512),Q:[],r:new p(32768),s:new g(286),Y:new g(30),a:new g(19),t:new g(15e3),k:new p(65536),g:new p(32768)}}(),function(){const p=d.H.m;for(var g=0;g<32768;g++){let x=g;x=(2863311530&x)>>>1|(1431655765&x)<<1,x=(3435973836&x)>>>2|(858993459&x)<<2,x=(4042322160&x)>>>4|(252645135&x)<<4,x=(4278255360&x)>>>8|(16711935&x)<<8,p.r[g]=(x>>>16|x<<16)>>>17}function m(x,_,C){for(;_--!=0;)x.push(0,C)}for(g=0;g<32;g++)p.q[g]=p.S[g]<<3|p.T[g],p.c[g]=p.p[g]<<4|p.z[g];m(p._,144,8),m(p._,112,9),m(p._,24,7),m(p._,8,8),d.H.n(p._,9),d.H.A(p._,9,p.J),d.H.l(p._,9),m(p.$,32,5),d.H.n(p.$,5),d.H.A(p.$,5,p.h),d.H.l(p.$,5),m(p.Q,19,0),m(p.C,286,0),m(p.D,30,0),m(p.v,320,0)}(),d.H.N}();function a(d){return[1,null,3,1,2,null,4][d.ctype]*d.depth}function o(d,p,g,m,x){let _=a(p);const C=Math.ceil(m*_/8);let S,k;_=Math.ceil(_/8);let M=d[g],P=0;if(M>1&&(d[g]=[0,0,1][M-2]),M==3)for(P=_;P<C;P++)d[P+1]=d[P+1]+(d[P+1-_]>>>1)&255;for(let Y=0;Y<x;Y++)if(S=g+Y*C,k=S+Y+1,M=d[k-1],P=0,M==0)for(;P<C;P++)d[S+P]=d[k+P];else if(M==1){for(;P<_;P++)d[S+P]=d[k+P];for(;P<C;P++)d[S+P]=d[k+P]+d[S+P-_]}else if(M==2)for(;P<C;P++)d[S+P]=d[k+P]+d[S+P-C];else if(M==3){for(;P<_;P++)d[S+P]=d[k+P]+(d[S+P-C]>>>1);for(;P<C;P++)d[S+P]=d[k+P]+(d[S+P-C]+d[S+P-_]>>>1)}else{for(;P<_;P++)d[S+P]=d[k+P]+s(0,d[S+P-C],0);for(;P<C;P++)d[S+P]=d[k+P]+s(d[S+P-_],d[S+P-C],d[S+P-_-C])}return d}function s(d,p,g){const m=d+p-g,x=m-d,_=m-p,C=m-g;return x*x<=_*_&&x*x<=C*C?d:_*_<=C*C?p:g}function c(d,p,g){g.width=n.readUint(d,p),p+=4,g.height=n.readUint(d,p),p+=4,g.depth=d[p],p++,g.ctype=d[p],p++,g.compress=d[p],p++,g.filter=d[p],p++,g.interlace=d[p],p++}function f(d,p,g,m,x,_,C,S,k){const M=Math.min(p,x),P=Math.min(g,_);let Y=0,z=0;for(let G=0;G<P;G++)for(let U=0;U<M;U++)if(C>=0&&S>=0?(Y=G*p+U<<2,z=(S+G)*x+C+U<<2):(Y=(-S+G)*p-C+U<<2,z=G*x+U<<2),k==0)m[z]=d[Y],m[z+1]=d[Y+1],m[z+2]=d[Y+2],m[z+3]=d[Y+3];else if(k==1){var F=d[Y+3]*.00392156862745098,I=d[Y]*F,T=d[Y+1]*F,j=d[Y+2]*F,N=m[z+3]*(1/255),R=m[z]*N,D=m[z+1]*N,L=m[z+2]*N;const H=1-F,te=F+N*H,se=te==0?0:1/te;m[z+3]=255*te,m[z+0]=(I+R*H)*se,m[z+1]=(T+D*H)*se,m[z+2]=(j+L*H)*se}else if(k==2)F=d[Y+3],I=d[Y],T=d[Y+1],j=d[Y+2],N=m[z+3],R=m[z],D=m[z+1],L=m[z+2],F==N&&I==R&&T==D&&j==L?(m[z]=0,m[z+1]=0,m[z+2]=0,m[z+3]=0):(m[z]=I,m[z+1]=T,m[z+2]=j,m[z+3]=F);else if(k==3){if(F=d[Y+3],I=d[Y],T=d[Y+1],j=d[Y+2],N=m[z+3],R=m[z],D=m[z+1],L=m[z+2],F==N&&I==R&&T==D&&j==L)continue;if(F<220&&N>20)return!1}return!0}return{decode:function(p){const g=new Uint8Array(p);let m=8;const x=n,_=x.readUshort,C=x.readUint,S={tabs:{},frames:[]},k=new Uint8Array(g.length);let M,P=0,Y=0;const z=[137,80,78,71,13,10,26,10];for(var F=0;F<8;F++)if(g[F]!=z[F])throw"The input is not a PNG file!";for(;m<g.length;){const G=x.readUint(g,m);m+=4;const U=x.readASCII(g,m,4);if(m+=4,U=="IHDR")c(g,m,S);else if(U=="iCCP"){for(var I=m;g[I]!=0;)I++;x.readASCII(g,m,I-m),g[I+1];const H=g.slice(I+2,m+G);let te=null;try{te=r(H)}catch{te=i(H)}S.tabs[U]=te}else if(U=="CgBI")S.tabs[U]=g.slice(m,m+4);else if(U=="IDAT"){for(F=0;F<G;F++)k[P+F]=g[m+F];P+=G}else if(U=="acTL")S.tabs[U]={num_frames:C(g,m),num_plays:C(g,m+4)},M=new Uint8Array(g.length);else if(U=="fcTL"){Y!=0&&((L=S.frames[S.frames.length-1]).data=t(S,M.slice(0,Y),L.rect.width,L.rect.height),Y=0);const H={x:C(g,m+12),y:C(g,m+16),width:C(g,m+4),height:C(g,m+8)};let te=_(g,m+22);te=_(g,m+20)/(te==0?100:te);const se={rect:H,delay:Math.round(1e3*te),dispose:g[m+24],blend:g[m+25]};S.frames.push(se)}else if(U=="fdAT"){for(F=0;F<G-4;F++)M[Y+F]=g[m+F+4];Y+=G-4}else if(U=="pHYs")S.tabs[U]=[x.readUint(g,m),x.readUint(g,m+4),g[m+8]];else if(U=="cHRM")for(S.tabs[U]=[],F=0;F<8;F++)S.tabs[U].push(x.readUint(g,m+4*F));else if(U=="tEXt"||U=="zTXt"){S.tabs[U]==null&&(S.tabs[U]={});var T=x.nextZero(g,m),j=x.readASCII(g,m,T-m),N=m+G-T-1;if(U=="tEXt")D=x.readASCII(g,T+1,N);else{var R=r(g.slice(T+2,T+2+N));D=x.readUTF8(R,0,R.length)}S.tabs[U][j]=D}else if(U=="iTXt"){S.tabs[U]==null&&(S.tabs[U]={}),T=0,I=m,T=x.nextZero(g,I),j=x.readASCII(g,I,T-I);const H=g[I=T+1];var D;g[I+1],I+=2,T=x.nextZero(g,I),x.readASCII(g,I,T-I),I=T+1,T=x.nextZero(g,I),x.readUTF8(g,I,T-I),N=G-((I=T+1)-m),H==0?D=x.readUTF8(g,I,N):(R=r(g.slice(I,I+N)),D=x.readUTF8(R,0,R.length)),S.tabs[U][j]=D}else if(U=="PLTE")S.tabs[U]=x.readBytes(g,m,G);else if(U=="hIST"){const H=S.tabs.PLTE.length/3;for(S.tabs[U]=[],F=0;F<H;F++)S.tabs[U].push(_(g,m+2*F))}else if(U=="tRNS")S.ctype==3?S.tabs[U]=x.readBytes(g,m,G):S.ctype==0?S.tabs[U]=_(g,m):S.ctype==2&&(S.tabs[U]=[_(g,m),_(g,m+2),_(g,m+4)]);else if(U=="gAMA")S.tabs[U]=x.readUint(g,m)/1e5;else if(U=="sRGB")S.tabs[U]=g[m];else if(U=="bKGD")S.ctype==0||S.ctype==4?S.tabs[U]=[_(g,m)]:S.ctype==2||S.ctype==6?S.tabs[U]=[_(g,m),_(g,m+2),_(g,m+4)]:S.ctype==3&&(S.tabs[U]=g[m]);else if(U=="IEND")break;m+=G,x.readUint(g,m),m+=4}var L;return Y!=0&&((L=S.frames[S.frames.length-1]).data=t(S,M.slice(0,Y),L.rect.width,L.rect.height)),S.data=t(S,k,S.width,S.height),delete S.compress,delete S.interlace,delete S.filter,S},toRGBA8:function(p){const g=p.width,m=p.height;if(p.tabs.acTL==null)return[e(p.data,g,m,p).buffer];const x=[];p.frames[0].data==null&&(p.frames[0].data=p.data);const _=g*m*4,C=new Uint8Array(_),S=new Uint8Array(_),k=new Uint8Array(_);for(let P=0;P<p.frames.length;P++){const Y=p.frames[P],z=Y.rect.x,F=Y.rect.y,I=Y.rect.width,T=Y.rect.height,j=e(Y.data,I,T,p);if(P!=0)for(var M=0;M<_;M++)k[M]=C[M];if(Y.blend==0?f(j,I,T,C,g,m,z,F,0):Y.blend==1&&f(j,I,T,C,g,m,z,F,1),x.push(C.buffer.slice(0)),Y.dispose!=0){if(Y.dispose==1)f(S,I,T,C,g,m,z,F,0);else if(Y.dispose==2)for(M=0;M<_;M++)C[M]=k[M]}}return x},_paeth:s,_copyTile:f,_bin:n}}();(function(){const{_copyTile:n}=El,{_bin:e}=El,t=El._paeth;var r={table:function(){const I=new Uint32Array(256);for(let T=0;T<256;T++){let j=T;for(let N=0;N<8;N++)1&j?j=3988292384^j>>>1:j>>>=1;I[T]=j}return I}(),update(I,T,j,N){for(let R=0;R<N;R++)I=r.table[255&(I^T[j+R])]^I>>>8;return I},crc:(I,T,j)=>4294967295^r.update(4294967295,I,T,j)};function i(I,T,j,N){T[j]+=I[0]*N>>4,T[j+1]+=I[1]*N>>4,T[j+2]+=I[2]*N>>4,T[j+3]+=I[3]*N>>4}function a(I){return Math.max(0,Math.min(255,I))}function o(I,T){const j=I[0]-T[0],N=I[1]-T[1],R=I[2]-T[2],D=I[3]-T[3];return j*j+N*N+R*R+D*D}function s(I,T,j,N,R,D,L){L==null&&(L=1);const G=N.length,U=[];for(var H=0;H<G;H++){const J=N[H];U.push([J>>>0&255,J>>>8&255,J>>>16&255,J>>>24&255])}for(H=0;H<G;H++){let J=4294967295;for(var te=0,se=0;se<G;se++){var ee=o(U[H],U[se]);se!=H&&ee<J&&(J=ee,te=se)}}const ie=new Uint32Array(R.buffer),$=new Int16Array(T*j*4),W=[0,8,2,10,12,4,14,6,3,11,1,9,15,7,13,5];for(H=0;H<W.length;H++)W[H]=255*((W[H]+.5)/16-.5);for(let J=0;J<j;J++)for(let he=0;he<T;he++){var Q;H=4*(J*T+he),L!=2?Q=[a(I[H]+$[H]),a(I[H+1]+$[H+1]),a(I[H+2]+$[H+2]),a(I[H+3]+$[H+3])]:(ee=W[4*(3&J)+(3&he)],Q=[a(I[H]+ee),a(I[H+1]+ee),a(I[H+2]+ee),a(I[H+3]+ee)]),te=0;let be=16777215;for(se=0;se<G;se++){const Oe=o(Q,U[se]);Oe<be&&(be=Oe,te=se)}const _e=U[te],Ie=[Q[0]-_e[0],Q[1]-_e[1],Q[2]-_e[2],Q[3]-_e[3]];L==1&&(he!=T-1&&i(Ie,$,H+4,7),J!=j-1&&(he!=0&&i(Ie,$,H+4*T-4,3),i(Ie,$,H+4*T,5),he!=T-1&&i(Ie,$,H+4*T+4,1))),D[H>>2]=te,ie[H>>2]=N[te]}}function c(I,T,j,N,R){R==null&&(R={});const{crc:D}=r,L=e.writeUint,G=e.writeUshort,U=e.writeASCII;let H=8;const te=I.frames.length>1;let se,ee=!1,ie=33+(te?20:0);if(R.sRGB!=null&&(ie+=13),R.pHYs!=null&&(ie+=21),R.iCCP!=null&&(se=pako.deflate(R.iCCP),ie+=21+se.length+4),I.ctype==3){for(var $=I.plte.length,W=0;W<$;W++)I.plte[W]>>>24!=255&&(ee=!0);ie+=8+3*$+4+(ee?8+1*$+4:0)}for(var Q=0;Q<I.frames.length;Q++)te&&(ie+=38),ie+=(_e=I.frames[Q]).cimg.length+12,Q!=0&&(ie+=4);ie+=12;const J=new Uint8Array(ie),he=[137,80,78,71,13,10,26,10];for(W=0;W<8;W++)J[W]=he[W];if(L(J,H,13),H+=4,U(J,H,"IHDR"),H+=4,L(J,H,T),H+=4,L(J,H,j),H+=4,J[H]=I.depth,H++,J[H]=I.ctype,H++,J[H]=0,H++,J[H]=0,H++,J[H]=0,H++,L(J,H,D(J,H-17,17)),H+=4,R.sRGB!=null&&(L(J,H,1),H+=4,U(J,H,"sRGB"),H+=4,J[H]=R.sRGB,H++,L(J,H,D(J,H-5,5)),H+=4),R.iCCP!=null){const Ie=13+se.length;L(J,H,Ie),H+=4,U(J,H,"iCCP"),H+=4,U(J,H,"ICC profile"),H+=11,H+=2,J.set(se,H),H+=se.length,L(J,H,D(J,H-(Ie+4),Ie+4)),H+=4}if(R.pHYs!=null&&(L(J,H,9),H+=4,U(J,H,"pHYs"),H+=4,L(J,H,R.pHYs[0]),H+=4,L(J,H,R.pHYs[1]),H+=4,J[H]=R.pHYs[2],H++,L(J,H,D(J,H-13,13)),H+=4),te&&(L(J,H,8),H+=4,U(J,H,"acTL"),H+=4,L(J,H,I.frames.length),H+=4,L(J,H,R.loop!=null?R.loop:0),H+=4,L(J,H,D(J,H-12,12)),H+=4),I.ctype==3){for(L(J,H,3*($=I.plte.length)),H+=4,U(J,H,"PLTE"),H+=4,W=0;W<$;W++){const Ie=3*W,Oe=I.plte[W],Ve=255&Oe,nt=Oe>>>8&255,ot=Oe>>>16&255;J[H+Ie+0]=Ve,J[H+Ie+1]=nt,J[H+Ie+2]=ot}if(H+=3*$,L(J,H,D(J,H-3*$-4,3*$+4)),H+=4,ee){for(L(J,H,$),H+=4,U(J,H,"tRNS"),H+=4,W=0;W<$;W++)J[H+W]=I.plte[W]>>>24&255;H+=$,L(J,H,D(J,H-$-4,$+4)),H+=4}}let be=0;for(Q=0;Q<I.frames.length;Q++){var _e=I.frames[Q];te&&(L(J,H,26),H+=4,U(J,H,"fcTL"),H+=4,L(J,H,be++),H+=4,L(J,H,_e.rect.width),H+=4,L(J,H,_e.rect.height),H+=4,L(J,H,_e.rect.x),H+=4,L(J,H,_e.rect.y),H+=4,G(J,H,N[Q]),H+=2,G(J,H,1e3),H+=2,J[H]=_e.dispose,H++,J[H]=_e.blend,H++,L(J,H,D(J,H-30,30)),H+=4);const Ie=_e.cimg;L(J,H,($=Ie.length)+(Q==0?0:4)),H+=4;const Oe=H;U(J,H,Q==0?"IDAT":"fdAT"),H+=4,Q!=0&&(L(J,H,be++),H+=4),J.set(Ie,H),H+=$,L(J,H,D(J,Oe,H-Oe)),H+=4}return L(J,H,0),H+=4,U(J,H,"IEND"),H+=4,L(J,H,D(J,H-4,4)),H+=4,J.buffer}function f(I,T,j){for(let N=0;N<I.frames.length;N++){const R=I.frames[N];R.rect.width;const D=R.rect.height,L=new Uint8Array(D*R.bpl+D);R.cimg=m(R.img,D,R.bpp,R.bpl,L,T,j)}}function d(I,T,j,N,R){const D=R[0],L=R[1],G=R[2],U=R[3],H=R[4],te=R[5];let se=6,ee=8,ie=255;for(var $=0;$<I.length;$++){const rt=new Uint8Array(I[$]);for(var W=rt.length,Q=0;Q<W;Q+=4)ie&=rt[Q+3]}const J=ie!=255,he=function(dt,at,Ee,lt,Ye,vt){const ct=[];for(var it=0;it<dt.length;it++){const xt=new Uint8Array(dt[it]),mt=new Uint32Array(xt.buffer);var Lt;let mn=0,Kt=0,Bt=at,jt=Ee,Vn=lt?1:0;if(it!=0){const kt=vt||lt||it==1||ct[it-2].dispose!=0?1:2;let Pn=0,Ft=1e9;for(let Ht=0;Ht<kt;Ht++){var ht=new Uint8Array(dt[it-1-Ht]);const Mn=new Uint32Array(dt[it-1-Ht]);let Ut=at,Tt=Ee,nn=-1,$i=-1;for(let Yr=0;Yr<Ee;Yr++)for(let Tr=0;Tr<at;Tr++)mt[_t=Yr*at+Tr]!=Mn[_t]&&(Tr<Ut&&(Ut=Tr),Tr>nn&&(nn=Tr),Yr<Tt&&(Tt=Yr),Yr>$i&&($i=Yr));nn==-1&&(Ut=Tt=nn=$i=0),Ye&&((1&Ut)==1&&Ut--,(1&Tt)==1&&Tt--);const wr=(nn-Ut+1)*($i-Tt+1);wr<Ft&&(Ft=wr,Pn=Ht,mn=Ut,Kt=Tt,Bt=nn-Ut+1,jt=$i-Tt+1)}ht=new Uint8Array(dt[it-1-Pn]),Pn==1&&(ct[it-1].dispose=2),Lt=new Uint8Array(Bt*jt*4),n(ht,at,Ee,Lt,Bt,jt,-mn,-Kt,0),Vn=n(xt,at,Ee,Lt,Bt,jt,-mn,-Kt,3)?1:0,Vn==1?g(xt,at,Ee,Lt,{x:mn,y:Kt,width:Bt,height:jt}):n(xt,at,Ee,Lt,Bt,jt,-mn,-Kt,0)}else Lt=xt.slice(0);ct.push({rect:{x:mn,y:Kt,width:Bt,height:jt},img:Lt,blend:Vn,dispose:0})}if(lt)for(it=0;it<ct.length;it++){if((ut=ct[it]).blend==1)continue;const xt=ut.rect,mt=ct[it-1].rect,mn=Math.min(xt.x,mt.x),Kt=Math.min(xt.y,mt.y),Bt={x:mn,y:Kt,width:Math.max(xt.x+xt.width,mt.x+mt.width)-mn,height:Math.max(xt.y+xt.height,mt.y+mt.height)-Kt};ct[it-1].dispose=1,it-1!=0&&p(dt,at,Ee,ct,it-1,Bt,Ye),p(dt,at,Ee,ct,it,Bt,Ye)}let yt=0;if(dt.length!=1)for(var _t=0;_t<ct.length;_t++){var ut;yt+=(ut=ct[_t]).rect.width*ut.rect.height}return ct}(I,T,j,D,L,G),be={},_e=[],Ie=[];if(N!=0){const rt=[];for(Q=0;Q<he.length;Q++)rt.push(he[Q].img.buffer);const dt=function(Ye){let vt=0;for(var ct=0;ct<Ye.length;ct++)vt+=Ye[ct].byteLength;const it=new Uint8Array(vt);let Lt=0;for(ct=0;ct<Ye.length;ct++){const ht=new Uint8Array(Ye[ct]),yt=ht.length;for(let _t=0;_t<yt;_t+=4){let ut=ht[_t],xt=ht[_t+1],mt=ht[_t+2];const mn=ht[_t+3];mn==0&&(ut=xt=mt=0),it[Lt+_t]=ut,it[Lt+_t+1]=xt,it[Lt+_t+2]=mt,it[Lt+_t+3]=mn}Lt+=yt}return it.buffer}(rt),at=_(dt,N);for(Q=0;Q<at.plte.length;Q++)_e.push(at.plte[Q].est.rgba);let Ee=0;for(Q=0;Q<he.length;Q++){const lt=(Ve=he[Q]).img.length;var Oe=new Uint8Array(at.inds.buffer,Ee>>2,lt>>2);Ie.push(Oe);const Ye=new Uint8Array(at.abuf,Ee,lt);te&&s(Ve.img,Ve.rect.width,Ve.rect.height,_e,Ye,Oe),Ve.img.set(Ye),Ee+=lt}}else for($=0;$<he.length;$++){var Ve=he[$];const rt=new Uint32Array(Ve.img.buffer);var nt=Ve.rect.width;for(W=rt.length,Oe=new Uint8Array(W),Ie.push(Oe),Q=0;Q<W;Q++){const dt=rt[Q];if(Q!=0&&dt==rt[Q-1])Oe[Q]=Oe[Q-1];else if(Q>nt&&dt==rt[Q-nt])Oe[Q]=Oe[Q-nt];else{let at=be[dt];if(at==null&&(be[dt]=at=_e.length,_e.push(dt),_e.length>=300))break;Oe[Q]=at}}}const ot=_e.length;for(ot<=256&&H==0&&(ee=ot<=2?1:ot<=4?2:ot<=16?4:8,ee=Math.max(ee,U)),$=0;$<he.length;$++){(Ve=he[$]).rect.x,Ve.rect.y,nt=Ve.rect.width;const rt=Ve.rect.height;let dt=Ve.img;new Uint32Array(dt.buffer);let at=4*nt,Ee=4;if(ot<=256&&H==0){at=Math.ceil(ee*nt/8);var ft=new Uint8Array(at*rt);const lt=Ie[$];for(let Ye=0;Ye<rt;Ye++){Q=Ye*at;const vt=Ye*nt;if(ee==8)for(var de=0;de<nt;de++)ft[Q+de]=lt[vt+de];else if(ee==4)for(de=0;de<nt;de++)ft[Q+(de>>1)]|=lt[vt+de]<<4-4*(1&de);else if(ee==2)for(de=0;de<nt;de++)ft[Q+(de>>2)]|=lt[vt+de]<<6-2*(3&de);else if(ee==1)for(de=0;de<nt;de++)ft[Q+(de>>3)]|=lt[vt+de]<<7-1*(7&de)}dt=ft,se=3,Ee=1}else if(J==0&&he.length==1){ft=new Uint8Array(nt*rt*3);const lt=nt*rt;for(Q=0;Q<lt;Q++){const Ye=3*Q,vt=4*Q;ft[Ye]=dt[vt],ft[Ye+1]=dt[vt+1],ft[Ye+2]=dt[vt+2]}dt=ft,se=2,Ee=3,at=3*nt}Ve.img=dt,Ve.bpl=at,Ve.bpp=Ee}return{ctype:se,depth:ee,plte:_e,frames:he}}function p(I,T,j,N,R,D,L){const G=Uint8Array,U=Uint32Array,H=new G(I[R-1]),te=new U(I[R-1]),se=R+1<I.length?new G(I[R+1]):null,ee=new G(I[R]),ie=new U(ee.buffer);let $=T,W=j,Q=-1,J=-1;for(let be=0;be<D.height;be++)for(let _e=0;_e<D.width;_e++){const Ie=D.x+_e,Oe=D.y+be,Ve=Oe*T+Ie,nt=ie[Ve];nt==0||N[R-1].dispose==0&&te[Ve]==nt&&(se==null||se[4*Ve+3]!=0)||(Ie<$&&($=Ie),Ie>Q&&(Q=Ie),Oe<W&&(W=Oe),Oe>J&&(J=Oe))}Q==-1&&($=W=Q=J=0),L&&((1&$)==1&&$--,(1&W)==1&&W--),D={x:$,y:W,width:Q-$+1,height:J-W+1};const he=N[R];he.rect=D,he.blend=1,he.img=new Uint8Array(D.width*D.height*4),N[R-1].dispose==0?(n(H,T,j,he.img,D.width,D.height,-D.x,-D.y,0),g(ee,T,j,he.img,D)):n(ee,T,j,he.img,D.width,D.height,-D.x,-D.y,0)}function g(I,T,j,N,R){n(I,T,j,N,R.width,R.height,-R.x,-R.y,2)}function m(I,T,j,N,R,D,L){const G=[];let U,H=[0,1,2,3,4];D!=-1?H=[D]:(T*N>5e5||j==1)&&(H=[0]),L&&(U={level:0});const te=VH;for(var se=0;se<H.length;se++){for(let $=0;$<T;$++)x(R,I,$,N,j,H[se]);G.push(te.deflate(R,U))}let ee,ie=1e9;for(se=0;se<G.length;se++)G[se].length<ie&&(ee=se,ie=G[se].length);return G[ee]}function x(I,T,j,N,R,D){const L=j*N;let G=L+j;if(I[G]=D,G++,D==0)if(N<500)for(var U=0;U<N;U++)I[G+U]=T[L+U];else I.set(new Uint8Array(T.buffer,L,N),G);else if(D==1){for(U=0;U<R;U++)I[G+U]=T[L+U];for(U=R;U<N;U++)I[G+U]=T[L+U]-T[L+U-R]+256&255}else if(j==0){for(U=0;U<R;U++)I[G+U]=T[L+U];if(D==2)for(U=R;U<N;U++)I[G+U]=T[L+U];if(D==3)for(U=R;U<N;U++)I[G+U]=T[L+U]-(T[L+U-R]>>1)+256&255;if(D==4)for(U=R;U<N;U++)I[G+U]=T[L+U]-t(T[L+U-R],0,0)+256&255}else{if(D==2)for(U=0;U<N;U++)I[G+U]=T[L+U]+256-T[L+U-N]&255;if(D==3){for(U=0;U<R;U++)I[G+U]=T[L+U]+256-(T[L+U-N]>>1)&255;for(U=R;U<N;U++)I[G+U]=T[L+U]+256-(T[L+U-N]+T[L+U-R]>>1)&255}if(D==4){for(U=0;U<R;U++)I[G+U]=T[L+U]+256-t(0,T[L+U-N],0)&255;for(U=R;U<N;U++)I[G+U]=T[L+U]+256-t(T[L+U-R],T[L+U-N],T[L+U-R-N])&255}}}function _(I,T){const j=new Uint8Array(I),N=j.slice(0),R=new Uint32Array(N.buffer),D=C(N,T),L=D[0],G=D[1],U=j.length,H=new Uint8Array(U>>2);let te;if(j.length<2e7)for(var se=0;se<U;se+=4)te=S(L,ee=j[se]*(1/255),ie=j[se+1]*(1/255),$=j[se+2]*(1/255),W=j[se+3]*(1/255)),H[se>>2]=te.ind,R[se>>2]=te.est.rgba;else for(se=0;se<U;se+=4){var ee=j[se]*.00392156862745098,ie=j[se+1]*(1/255),$=j[se+2]*(1/255),W=j[se+3]*(1/255);for(te=L;te.left;)te=k(te.est,ee,ie,$,W)<=0?te.left:te.right;H[se>>2]=te.ind,R[se>>2]=te.est.rgba}return{abuf:N.buffer,inds:H,plte:G}}function C(I,T,j){j==null&&(j=1e-4);const N=new Uint32Array(I.buffer),R={i0:0,i1:I.length,bst:null,est:null,tdst:0,left:null,right:null};R.bst=Y(I,R.i0,R.i1),R.est=z(R.bst);const D=[R];for(;D.length<T;){let G=0,U=0;for(var L=0;L<D.length;L++)D[L].est.L>G&&(G=D[L].est.L,U=L);if(G<j)break;const H=D[U],te=M(I,N,H.i0,H.i1,H.est.e,H.est.eMq255);if(H.i0>=te||H.i1<=te){H.est.L=0;continue}const se={i0:H.i0,i1:te,bst:null,est:null,tdst:0,left:null,right:null};se.bst=Y(I,se.i0,se.i1),se.est=z(se.bst);const ee={i0:te,i1:H.i1,bst:null,est:null,tdst:0,left:null,right:null};for(ee.bst={R:[],m:[],N:H.bst.N-se.bst.N},L=0;L<16;L++)ee.bst.R[L]=H.bst.R[L]-se.bst.R[L];for(L=0;L<4;L++)ee.bst.m[L]=H.bst.m[L]-se.bst.m[L];ee.est=z(ee.bst),H.left=se,H.right=ee,D[U]=se,D.push(ee)}for(D.sort((G,U)=>U.bst.N-G.bst.N),L=0;L<D.length;L++)D[L].ind=L;return[R,D]}function S(I,T,j,N,R){if(I.left==null)return I.tdst=function(se,ee,ie,$,W){const Q=ee-se[0],J=ie-se[1],he=$-se[2],be=W-se[3];return Q*Q+J*J+he*he+be*be}(I.est.q,T,j,N,R),I;const D=k(I.est,T,j,N,R);let L=I.left,G=I.right;D>0&&(L=I.right,G=I.left);const U=S(L,T,j,N,R);if(U.tdst<=D*D)return U;const H=S(G,T,j,N,R);return H.tdst<U.tdst?H:U}function k(I,T,j,N,R){const{e:D}=I;return D[0]*T+D[1]*j+D[2]*N+D[3]*R-I.eMq}function M(I,T,j,N,R,D){for(N-=4;j<N;){for(;P(I,j,R)<=D;)j+=4;for(;P(I,N,R)>D;)N-=4;if(j>=N)break;const L=T[j>>2];T[j>>2]=T[N>>2],T[N>>2]=L,j+=4,N-=4}for(;P(I,j,R)>D;)j-=4;return j+4}function P(I,T,j){return I[T]*j[0]+I[T+1]*j[1]+I[T+2]*j[2]+I[T+3]*j[3]}function Y(I,T,j){const N=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],R=[0,0,0,0],D=j-T>>2;for(let L=T;L<j;L+=4){const G=I[L]*.00392156862745098,U=I[L+1]*(1/255),H=I[L+2]*(1/255),te=I[L+3]*(1/255);R[0]+=G,R[1]+=U,R[2]+=H,R[3]+=te,N[0]+=G*G,N[1]+=G*U,N[2]+=G*H,N[3]+=G*te,N[5]+=U*U,N[6]+=U*H,N[7]+=U*te,N[10]+=H*H,N[11]+=H*te,N[15]+=te*te}return N[4]=N[1],N[8]=N[2],N[9]=N[6],N[12]=N[3],N[13]=N[7],N[14]=N[11],{R:N,m:R,N:D}}function z(I){const{R:T}=I,{m:j}=I,{N}=I,R=j[0],D=j[1],L=j[2],G=j[3],U=N==0?0:1/N,H=[T[0]-R*R*U,T[1]-R*D*U,T[2]-R*L*U,T[3]-R*G*U,T[4]-D*R*U,T[5]-D*D*U,T[6]-D*L*U,T[7]-D*G*U,T[8]-L*R*U,T[9]-L*D*U,T[10]-L*L*U,T[11]-L*G*U,T[12]-G*R*U,T[13]-G*D*U,T[14]-G*L*U,T[15]-G*G*U],te=H,se=F;let ee=[Math.random(),Math.random(),Math.random(),Math.random()],ie=0,$=0;if(N!=0)for(let Q=0;Q<16&&(ee=se.multVec(te,ee),$=Math.sqrt(se.dot(ee,ee)),ee=se.sml(1/$,ee),!(Q!=0&&Math.abs($-ie)<1e-9));Q++)ie=$;const W=[R*U,D*U,L*U,G*U];return{Cov:H,q:W,e:ee,L:ie,eMq255:se.dot(se.sml(255,W),ee),eMq:se.dot(ee,W),rgba:(Math.round(255*W[3])<<24|Math.round(255*W[2])<<16|Math.round(255*W[1])<<8|Math.round(255*W[0])<<0)>>>0}}var F={multVec:(I,T)=>[I[0]*T[0]+I[1]*T[1]+I[2]*T[2]+I[3]*T[3],I[4]*T[0]+I[5]*T[1]+I[6]*T[2]+I[7]*T[3],I[8]*T[0]+I[9]*T[1]+I[10]*T[2]+I[11]*T[3],I[12]*T[0]+I[13]*T[1]+I[14]*T[2]+I[15]*T[3]],dot:(I,T)=>I[0]*T[0]+I[1]*T[1]+I[2]*T[2]+I[3]*T[3],sml:(I,T)=>[I*T[0],I*T[1],I*T[2],I*T[3]]};El.encode=function(T,j,N,R,D,L,G){R==null&&(R=0),G==null&&(G=!1);const U=d(T,j,N,R,[!1,!1,!1,0,G,!1]);return f(U,-1),c(U,j,N,D,L)},El.encodeLL=function(T,j,N,R,D,L,G,U){const H={ctype:0+(R==1?0:2)+(D==0?0:4),depth:L,frames:[]},te=(R+D)*L,se=te*j;for(let ee=0;ee<T.length;ee++)H.frames.push({rect:{x:0,y:0,width:j,height:N},img:new Uint8Array(T[ee]),blend:0,dispose:1,bpp:Math.ceil(te/8),bpl:Math.ceil(se/8)});return f(H,0,!0),c(H,j,N,G,U)},El.encode.compress=d,El.encode.dither=s,El.quantize=_,El.quantize.getKDtree=C,El.quantize.getNearest=S})();const VC={toArrayBuffer(n,e){const t=n.width,r=n.height,i=t<<2,a=n.getContext("2d").getImageData(0,0,t,r),o=new Uint32Array(a.data.buffer),s=(32*t+31)/32<<2,c=s*r,f=122+c,d=new ArrayBuffer(f),p=new DataView(d),g=1<<20;let m,x,_,C,S=g,k=0,M=0,P=0;function Y(I){p.setUint16(M,I,!0),M+=2}function z(I){p.setUint32(M,I,!0),M+=4}function F(I){M+=I}Y(19778),z(f),F(4),z(122),z(108),z(t),z(-r>>>0),Y(1),Y(32),z(3),z(c),z(2835),z(2835),F(8),z(16711680),z(65280),z(255),z(4278190080),z(1466527264),function I(){for(;k<r&&S>0;){for(C=122+k*s,m=0;m<i;)S--,x=o[P++],_=x>>>24,p.setUint32(C+m,x<<8|_),m+=4;k++}P<o.length?(S=g,setTimeout(I,VC._dly)):e(d)}()},toBlob(n,e){this.toArrayBuffer(n,t=>{e(new Blob([t],{type:"image/bmp"}))})},_dly:9};var $o={CHROME:"CHROME",FIREFOX:"FIREFOX",DESKTOP_SAFARI:"DESKTOP_SAFARI",IE:"IE",IOS:"IOS",ETC:"ETC"},qH={[$o.CHROME]:16384,[$o.FIREFOX]:11180,[$o.DESKTOP_SAFARI]:16384,[$o.IE]:8192,[$o.IOS]:4096,[$o.ETC]:8192};const lb=typeof window<"u",qC=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,mm=lb&&window.cordova&&window.cordova.require&&window.cordova.require("cordova/modulemapper"),HH=(lb||qC)&&(mm&&mm.getOriginalSymbol(window,"File")||typeof File<"u"&&File),HC=(lb||qC)&&(mm&&mm.getOriginalSymbol(window,"FileReader")||typeof FileReader<"u"&&FileReader);function cb(n,e,t=Date.now()){return new Promise(r=>{const i=n.split(","),a=i[0].match(/:(.*?);/)[1],o=globalThis.atob(i[1]);let s=o.length;const c=new Uint8Array(s);for(;s--;)c[s]=o.charCodeAt(s);const f=new Blob([c],{type:a});f.name=e,f.lastModified=t,r(f)})}function WC(n){return new Promise((e,t)=>{const r=new HC;r.onload=()=>e(r.result),r.onerror=i=>t(i),r.readAsDataURL(n)})}function $C(n){return new Promise((e,t)=>{const r=new Image;r.onload=()=>e(r),r.onerror=i=>t(i),r.src=n})}function rd(){if(rd.cachedResult!==void 0)return rd.cachedResult;let n=$o.ETC;const{userAgent:e}=navigator;return/Chrom(e|ium)/i.test(e)?n=$o.CHROME:/iP(ad|od|hone)/i.test(e)&&/WebKit/i.test(e)?n=$o.IOS:/Safari/i.test(e)?n=$o.DESKTOP_SAFARI:/Firefox/i.test(e)?n=$o.FIREFOX:(/MSIE/i.test(e)||document.documentMode)&&(n=$o.IE),rd.cachedResult=n,rd.cachedResult}function GC(n,e){const t=rd(),r=qH[t];let i=n,a=e,o=i*a;const s=i>a?a/i:i/a;for(;o>r*r;){const c=(r+i)/2,f=(r+a)/2;c<f?(a=f,i=f*s):(a=c*s,i=c),o=i*a}return{width:i,height:a}}function m2(n,e){let t,r;try{if(t=new OffscreenCanvas(n,e),r=t.getContext("2d"),r===null)throw new Error("getContext of OffscreenCanvas returns null")}catch{t=document.createElement("canvas"),r=t.getContext("2d")}return t.width=n,t.height=e,[t,r]}function YC(n,e){const{width:t,height:r}=GC(n.width,n.height),[i,a]=m2(t,r);return e&&/jpe?g/.test(e)&&(a.fillStyle="white",a.fillRect(0,0,i.width,i.height)),a.drawImage(n,0,0,i.width,i.height),i}function Lg(){return Lg.cachedResult!==void 0||(Lg.cachedResult=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&typeof document<"u"&&"ontouchend"in document),Lg.cachedResult}function vm(n,e={}){return new Promise(function(t,r){let i,a;var o=function(){try{return a=YC(i,e.fileType||n.type),t([i,a])}catch(c){return r(c)}},s=function(c){try{var f=function(d){try{throw d}catch(p){return r(p)}};try{let d;return WC(n).then(function(p){try{return d=p,$C(d).then(function(g){try{return i=g,function(){try{return o()}catch(m){return r(m)}}()}catch(m){return f(m)}},f)}catch(g){return f(g)}},f)}catch(d){f(d)}}catch(d){return r(d)}};try{if(Lg()||[$o.DESKTOP_SAFARI,$o.MOBILE_SAFARI].includes(rd()))throw new Error("Skip createImageBitmap on IOS and Safari");return createImageBitmap(n).then(function(c){try{return i=c,o()}catch{return s()}},s)}catch{s()}})}function ym(n,e,t,r,i=1){return new Promise(function(a,o){let s;if(e==="image/png"){let f,d,p;return f=n.getContext("2d"),{data:d}=f.getImageData(0,0,n.width,n.height),p=El.encode([d.buffer],n.width,n.height,4096*i),s=new Blob([p],{type:e}),s.name=t,s.lastModified=r,c.call(this)}{let f=function(){return c.call(this)};if(e==="image/bmp")return new Promise(d=>VC.toBlob(n,d)).then((function(d){try{return s=d,s.name=t,s.lastModified=r,f.call(this)}catch(p){return o(p)}}).bind(this),o);{let d=function(){return f.call(this)};if(typeof OffscreenCanvas=="function"&&n instanceof OffscreenCanvas)return n.convertToBlob({type:e,quality:i}).then((function(p){try{return s=p,s.name=t,s.lastModified=r,d.call(this)}catch(g){return o(g)}}).bind(this),o);{let p;return p=n.toDataURL(e,i),cb(p,t,r).then((function(g){try{return s=g,d.call(this)}catch(m){return o(m)}}).bind(this),o)}}}function c(){return a(s)}})}function Jl(n){n.width=0,n.height=0}function vh(){return new Promise(function(n,e){let t,r,i,a;return vh.cachedResult!==void 0?n(vh.cachedResult):cb("data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q==","test.jpg",Date.now()).then(function(o){try{return t=o,vm(t).then(function(s){try{return r=s[1],ym(r,t.type,t.name,t.lastModified).then(function(c){try{return i=c,Jl(r),vm(i).then(function(f){try{return a=f[0],vh.cachedResult=a.width===1&&a.height===2,n(vh.cachedResult)}catch(d){return e(d)}},e)}catch(f){return e(f)}},e)}catch(c){return e(c)}},e)}catch(s){return e(s)}},e)})}function XC(n){return new Promise((e,t)=>{const r=new HC;r.onload=i=>{const a=new DataView(i.target.result);if(a.getUint16(0,!1)!=65496)return e(-2);const o=a.byteLength;let s=2;for(;s<o;){if(a.getUint16(s+2,!1)<=8)return e(-1);const c=a.getUint16(s,!1);if(s+=2,c==65505){if(a.getUint32(s+=2,!1)!=1165519206)return e(-1);const f=a.getUint16(s+=6,!1)==18761;s+=a.getUint32(s+4,f);const d=a.getUint16(s,f);s+=2;for(let p=0;p<d;p++)if(a.getUint16(s+12*p,f)==274)return e(a.getUint16(s+12*p+8,f))}else{if((65280&c)!=65280)break;s+=a.getUint16(s,!1)}}return e(-1)},r.onerror=i=>t(i),r.readAsArrayBuffer(n)})}function KC(n,e){const{width:t}=n,{height:r}=n,{maxWidthOrHeight:i}=e;let a,o=n;return isFinite(i)&&(t>i||r>i)&&([o,a]=m2(t,r),t>r?(o.width=i,o.height=r/t*i):(o.width=t/r*i,o.height=i),a.drawImage(n,0,0,o.width,o.height),Jl(n)),o}function QC(n,e){const{width:t}=n,{height:r}=n,[i,a]=m2(t,r);switch(e>4&&e<9?(i.width=r,i.height=t):(i.width=t,i.height=r),e){case 2:a.transform(-1,0,0,1,t,0);break;case 3:a.transform(-1,0,0,-1,t,r);break;case 4:a.transform(1,0,0,-1,0,r);break;case 5:a.transform(0,1,1,0,0,0);break;case 6:a.transform(0,1,-1,0,r,0);break;case 7:a.transform(0,-1,-1,0,r,t);break;case 8:a.transform(0,-1,1,0,0,t)}return a.drawImage(n,0,0,t,r),Jl(n),i}function o6(n,e,t=0){return new Promise(function(r,i){let a,o,s,c,f,d,p,g,m,x,_,C,S,k,M,P,Y,z,F,I;function T(N=5){if(e.signal&&e.signal.aborted)throw e.signal.reason;a+=N,e.onProgress(Math.min(a,100))}function j(N){if(e.signal&&e.signal.aborted)throw e.signal.reason;a=Math.min(Math.max(N,a),100),e.onProgress(a)}return a=t,o=e.maxIteration||10,s=1024*e.maxSizeMB*1024,T(),vm(n,e).then((function(N){try{return[,c]=N,T(),f=KC(c,e),T(),new Promise(function(R,D){var L;if(!(L=e.exifOrientation))return XC(n).then((function(U){try{return L=U,G.call(this)}catch(H){return D(H)}}).bind(this),D);function G(){return R(L)}return G.call(this)}).then((function(R){try{return d=R,T(),vh().then((function(D){try{return p=D?f:QC(f,d),T(),g=e.initialQuality||1,m=e.fileType||n.type,ym(p,m,n.name,n.lastModified,g).then((function(L){try{{let U=function(){if(o--&&(M>s||M>S)){let te,se;return te=I?.95*F.width:F.width,se=I?.95*F.height:F.height,[Y,z]=m2(te,se),z.drawImage(F,0,0,te,se),g*=m==="image/png"?.85:.95,ym(Y,m,n.name,n.lastModified,g).then(function(ee){try{return P=ee,Jl(F),F=Y,M=P.size,j(Math.min(99,Math.floor((k-M)/(k-s)*100))),U}catch(ie){return i(ie)}},i)}return[1]},H=function(){return Jl(F),Jl(Y),Jl(f),Jl(p),Jl(c),j(100),r(P)};if(x=L,T(),_=x.size>s,C=x.size>n.size,!_&&!C)return j(100),r(x);var G;return S=n.size,k=x.size,M=k,F=p,I=!e.alwaysKeepResolution&&_,(G=(function(te){for(;te;){if(te.then)return void te.then(G,i);try{if(te.pop){if(te.length)return te.pop()?H.call(this):te;te=U}else te=te.call(this)}catch(se){return i(se)}}}).bind(this))(U)}}catch(U){return i(U)}}).bind(this),i)}catch(L){return i(L)}}).bind(this),i)}catch(D){return i(D)}}).bind(this),i)}catch(R){return i(R)}}).bind(this),i)})}const WH=`
let scriptImported = false
self.addEventListener('message', async (e) => {
  const { file, id, imageCompressionLibUrl, options } = e.data
  options.onProgress = (progress) => self.postMessage({ progress, id })
  try {
    if (!scriptImported) {
      // console.log('[worker] importScripts', imageCompressionLibUrl)
      self.importScripts(imageCompressionLibUrl)
      scriptImported = true
    }
    // console.log('[worker] self', self)
    const compressedFile = await imageCompression(file, options)
    self.postMessage({ file: compressedFile, id })
  } catch (e) {
    // console.error('[worker] error', e)
    self.postMessage({ error: e.message + '\\n' + e.stack, id })
  }
})
`;let oy;function $H(n,e){return new Promise((t,r)=>{oy||(oy=function(o){const s=[];return s.push(o),URL.createObjectURL(new Blob(s))}(WH));const i=new Worker(oy);i.addEventListener("message",function(o){if(e.signal&&e.signal.aborted)i.terminate();else if(o.data.progress===void 0){if(o.data.error)return r(new Error(o.data.error)),void i.terminate();t(o.data.file),i.terminate()}else e.onProgress(o.data.progress)}),i.addEventListener("error",r),e.signal&&e.signal.addEventListener("abort",()=>{r(e.signal.reason),i.terminate()}),i.postMessage({file:n,imageCompressionLibUrl:e.libURL,options:{...e,onProgress:void 0,signal:void 0}})})}function so(n,e){return new Promise(function(t,r){let i,a,o,s,c,f;if(i={...e},o=0,{onProgress:s}=i,i.maxSizeMB=i.maxSizeMB||Number.POSITIVE_INFINITY,c=typeof i.useWebWorker!="boolean"||i.useWebWorker,delete i.useWebWorker,i.onProgress=m=>{o=m,typeof s=="function"&&s(o)},!(n instanceof Blob||n instanceof HH))return r(new Error("The file given is not an instance of Blob or File"));if(!/^image/.test(n.type))return r(new Error("The file given is not an image"));if(f=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,!c||typeof Worker!="function"||f)return o6(n,i).then((function(m){try{return a=m,g.call(this)}catch(x){return r(x)}}).bind(this),r);var d=(function(){try{return g.call(this)}catch(m){return r(m)}}).bind(this),p=function(m){try{return o6(n,i).then(function(x){try{return a=x,d()}catch(_){return r(_)}},r)}catch(x){return r(x)}};try{return i.libURL=i.libURL||"https://cdn.jsdelivr.net/npm/browser-image-compression@2.0.2/dist/browser-image-compression.js",$H(n,i).then(function(m){try{return a=m,d()}catch{return p()}},p)}catch{p()}function g(){try{a.name=n.name,a.lastModified=n.lastModified}catch{}try{i.preserveExif&&n.type==="image/jpeg"&&(!i.fileType||i.fileType&&i.fileType===n.type)&&(a=zC(n,a))}catch{}return t(a)}})}so.getDataUrlFromFile=WC,so.getFilefromDataUrl=cb,so.loadImage=$C,so.drawImageInCanvas=YC,so.drawFileInCanvas=vm,so.canvasToFile=ym,so.getExifOrientation=XC,so.handleMaxWidthOrHeight=KC,so.followExifOrientation=QC,so.cleanupCanvasMemory=Jl,so.isAutoOrientationInBrowser=vh,so.approximateBelowMaximumCanvasSizeOfBrowser=GC,so.copyExifWithoutOrientation=zC,so.getBrowserName=rd,so.version="2.0.2";const C1=n=>n.images&&Array.isArray(n.images)?{...n,images:n.images.filter(e=>e&&e.trim()),primaryImage:n.images[0]||null}:n.imageUrl&&n.imageUrl.trim()?{...n,images:[n.imageUrl],primaryImage:n.imageUrl}:{...n,images:[],primaryImage:null},GH=n=>C1(n).primaryImage,ZC=n=>C1(n).images,YH=async(n,e,t,r,i)=>{try{console.log("  migration   ...");const a=await r(i(n,"items")),o=[];a.docs.forEach(s=>{const c=s.data();c.images&&Array.isArray(c.images)||c.imageUrl&&c.imageUrl.trim()&&o.push({id:s.id,images:[c.imageUrl]})}),console.log(`  ${o.length}  `);for(const s of o)await e(t(n,"items",s.id),{images:s.images}),console.log(`  : ${s.id}`);return console.log(" Migration  !"),{success:!0,updatedCount:o.length}}catch(a){return console.error("  -migration:",a),{success:!1,error:a.message}}},I1=({item:n,width:e="100%",height:t="200px",showNavigation:r=!0,className:i="",style:a={},borderRadius:o="8px"})=>{const s=ZC(n),[c,f]=le.useState(0),[d,p]=le.useState(!1),[g,m]=le.useState(!1);if(le.useEffect(()=>{const S=()=>{const k=window.innerWidth<=768,M=window.location.pathname.includes("/management")||document.querySelector(".product-card-mobile")!==null||i.includes("management")||a.managementMode===!0;p(k),m(M)};return S(),window.addEventListener("resize",S),()=>window.removeEventListener("resize",S)},[i,a]),s.length===0)return v.jsx("div",{style:{width:e,height:t,borderRadius:o,border:"1px solid #e5e7eb",display:"flex",alignItems:"center",justifyContent:"center",background:"#f9fafb",...a},className:i,children:v.jsx("img",{src:"/no-image-available.png",alt:"  ",style:{maxWidth:"80%",maxHeight:"80%",objectFit:"contain",opacity:.5}})});if(s.length===1)return v.jsx("div",{style:{width:e,height:t,borderRadius:o,overflow:"hidden",position:"relative",...a},className:i,children:v.jsx("img",{src:s[0],alt:n.name||" ",style:{width:"100%",height:"100%",objectFit:"contain",background:"white"}})});const x=()=>{f(S=>(S+1)%s.length)},_=()=>{f(S=>(S-1+s.length)%s.length)},C=S=>{f(S)};return v.jsxs("div",{style:{width:e,height:t,borderRadius:o,overflow:"hidden",position:"relative",background:"#f3f4f6",...a},className:i,children:[v.jsx("img",{src:s[c],alt:`${n.name||""} -  ${c+1}`,style:{width:"100%",height:"100%",objectFit:"contain",transition:"opacity 0.3s ease",background:"white"}}),s.length>1&&v.jsx(v.Fragment,{children:d&&g?v.jsx("button",{onClick:x,style:{position:"absolute",right:"8px",bottom:"8px",background:"rgba(255, 255, 255, 0.9)",color:"#333",border:"1px solid rgba(0,0,0,0.1)",borderRadius:"50%",width:"28px",height:"28px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",zIndex:10,fontSize:"14px",fontWeight:"bold",boxShadow:"0 2px 4px rgba(0,0,0,0.2)"},"aria-label":" ",children:""}):v.jsxs(v.Fragment,{children:[v.jsx("button",{onClick:_,style:{position:"absolute",left:"2px",top:"50%",transform:"translateY(-50%)",background:"rgba(0, 0, 0, 0.7)",color:"white",border:"none",borderRadius:"50%",width:"36px",height:"36px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",transition:"all 0.2s ease",zIndex:10},onMouseEnter:S=>{S.currentTarget.style.background="rgba(0, 0, 0, 0.9)",S.currentTarget.style.transform="translateY(-50%) scale(1.1)"},onMouseLeave:S=>{S.currentTarget.style.background="rgba(0, 0, 0, 0.7)",S.currentTarget.style.transform="translateY(-50%) scale(1)"},"aria-label":" ",children:v.jsx(H1,{size:20})}),v.jsx("button",{onClick:x,style:{position:"absolute",right:"2px",top:"50%",transform:"translateY(-50%)",background:"rgba(0, 0, 0, 0.7)",color:"white",border:"none",borderRadius:"50%",width:"36px",height:"36px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",transition:"all 0.2s ease",zIndex:10},onMouseEnter:S=>{S.currentTarget.style.background="rgba(0, 0, 0, 0.9)",S.currentTarget.style.transform="translateY(-50%) scale(1.1)"},onMouseLeave:S=>{S.currentTarget.style.background="rgba(0, 0, 0, 0.7)",S.currentTarget.style.transform="translateY(-50%) scale(1)"},"aria-label":" ",children:v.jsx(W1,{size:20})})]})}),!(d&&g)&&s.length>1&&s.length<=5&&v.jsx("div",{style:{position:"absolute",bottom:"4px",left:"50%",transform:"translateX(-50%)",display:"flex",gap:"6px",zIndex:10},children:s.map((S,k)=>v.jsx("button",{onClick:()=>C(k),style:{width:"8px",height:"8px",borderRadius:"50%",border:"none",background:k===c?"white":"rgba(255, 255, 255, 0.5)",cursor:"pointer",transition:"all 0.2s ease"},"aria-label":` ${k+1}`},k))}),!(d&&g)&&s.length>5&&v.jsxs("div",{style:{position:"absolute",bottom:"4px",right:"4px",background:"rgba(0, 0, 0, 0.7)",color:"white",padding:"4px 8px",borderRadius:"10px",fontSize:"12px",fontWeight:"bold",zIndex:10},children:[c+1," / ",s.length]}),d&&g&&s.length>1&&v.jsx("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",zIndex:5},onTouchStart:S=>{const k=S.touches[0];S.currentTarget.startX=k.clientX},onTouchEnd:S=>{const k=S.changedTouches[0];if(!S.currentTarget.startX)return;const M=S.currentTarget.startX-k.clientX;Math.abs(M)>50&&(M>0?x():_())}}),d&&g&&s.length>1&&v.jsxs("div",{style:{position:"absolute",bottom:"2px",right:"2px",background:"rgba(0, 0, 0, 0.5)",color:"white",padding:"1px 4px",borderRadius:"4px",fontSize:"8px",zIndex:10},children:[c+1,"/",s.length]}),v.jsx("div",{tabIndex:0,onKeyDown:S=>{S.key==="ArrowRight"&&x(),S.key==="ArrowLeft"&&_()},style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",outline:"none"},"aria-label":"  -   "})]})},XH=async n=>{const e="https://api.cloudinary.com/v1_1/dcydl9rz8/image/upload",t=new FormData;return t.append("file",n),t.append("upload_preset","GmachMedia"),(await(await fetch(e,{method:"POST",body:t})).json()).secure_url},KH=({editingItem:n,name:e,quantity:t,imageUrl:r,imageFile:i,onNameChange:a,onQuantityChange:o,onImageUrlChange:s,onImageFileChange:c,onCancel:f,onSubmit:d,publicComment:p,internalComment:g,onPublicCommentChange:m,onInternalCommentChange:x})=>{const _=le.useRef(null),[C,S]=le.useState([]),[k,M]=le.useState(!1);le.useEffect(()=>{if(n){const j=ZC(n);S(j.map((N,R)=>({id:Date.now()+R,url:N,isUploaded:!0})))}else S([])},[n]),le.useEffect(()=>{const j=R=>{_.current&&!_.current.contains(R.target)&&f()},N=R=>{R.key==="Escape"&&f()};return document.addEventListener("mousedown",j),document.addEventListener("keydown",N),()=>{document.removeEventListener("mousedown",j),document.removeEventListener("keydown",N)}},[f]);const P=()=>{if(r&&r.trim()){const j={id:Date.now(),url:r.trim(),isUploaded:!0};S(N=>[...N,j]),s({target:{value:""}})}},Y=async j=>{if(j){M(!0);try{const N=await so(j,{maxSizeMB:.5,maxWidthOrHeight:1024,useWebWorker:!0}),R=await XH(N),D={id:Date.now(),url:R,isUploaded:!0};S(L=>[...L,D]),Dn.success("  !")}catch(N){Dn.error("  : "+N.message)}finally{M(!1)}}},z=j=>{S(N=>N.filter(R=>R.id!==j))},F=j=>{j!==0&&S(N=>{const R=[...N];return[R[j-1],R[j]]=[R[j],R[j-1]],R})},I=j=>{j!==C.length-1&&S(N=>{const R=[...N];return[R[j],R[j+1]]=[R[j+1],R[j]],R})},T=async j=>{j.preventDefault();const N=C.map(D=>D.url);N[0];const R={name:e,quantity:t,publicComment:p,internalComment:g,images:N,imageUrl:N[0]||null};await d(j,R)};return v.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3,direction:"ltr",padding:"1rem"},children:v.jsxs("div",{ref:_,style:{position:"relative",background:"white",padding:"2rem",borderRadius:"12px",width:"95%",maxWidth:"600px",direction:"rtl",textAlign:"initial",maxHeight:"90vh",overflowY:"auto",boxSizing:"border-box"},children:[v.jsx("button",{onClick:f,style:{position:"absolute",top:"1rem",right:"1rem",background:"none",border:"none",fontSize:"1.8rem",cursor:"pointer",lineHeight:1,color:"#666",width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center"},"aria-label":"",children:""}),v.jsx("h3",{style:{textAlign:"center",marginBottom:"2rem",fontSize:"1.5rem",color:"#333"},children:n?" ":"  "}),v.jsxs("form",{onSubmit:T,children:[v.jsxs("div",{style:z0,children:[v.jsx("label",{style:V0,children:" :"}),v.jsx("input",{dir:"rtl",type:"text",value:e,onChange:a,required:!0,style:ih})]}),v.jsxs("div",{style:z0,children:[v.jsx("label",{style:V0,children:":"}),v.jsx("input",{dir:"rtl",type:"number",value:t,onChange:o,required:!0,style:ih})]}),v.jsxs("div",{style:z0,children:[v.jsx("label",{style:V0,children:"  ():"}),v.jsx("input",{dir:"rtl",type:"text",value:p,onChange:m,style:ih})]}),v.jsxs("div",{style:z0,children:[v.jsx("label",{style:V0,children:" :"}),v.jsx("input",{dir:"rtl",type:"text",value:g,onChange:x,style:ih})]}),v.jsxs("div",{style:z0,children:[v.jsx("label",{style:V0,children:" :"}),v.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"1rem"},children:[v.jsx("input",{dir:"rtl",type:"text",value:r,onChange:s,placeholder:"   (URL)",style:{...ih,flex:1,margin:0}}),v.jsx("button",{type:"button",onClick:P,disabled:!r.trim(),style:{padding:"8px 12px",backgroundColor:r.trim()?"#1976d2":"#ccc",color:"white",border:"none",borderRadius:"6px",cursor:r.trim()?"pointer":"not-allowed",whiteSpace:"nowrap"},children:""})]}),v.jsxs("div",{style:{marginBottom:"1rem"},children:[v.jsx("input",{type:"file",accept:"image/*",onChange:j=>{const N=j.target.files[0];N&&(Y(N),j.target.value="")},style:{...ih,padding:"8px"},disabled:k}),k&&v.jsx("div",{style:{fontSize:"0.875rem",color:"#1976d2",marginTop:"0.5rem"},children:" ..."})]}),C.length>0&&v.jsxs("div",{style:{marginBottom:"1rem"},children:[v.jsxs("h4",{style:{fontSize:"1rem",marginBottom:"0.5rem"},children:[" (",C.length,")"]}),v.jsx("div",{style:{marginBottom:"1rem"},children:v.jsx(I1,{item:{images:C.map(j=>j.url)},width:"100%",height:"200px",showNavigation:!0})}),v.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(120px, 1fr))",gap:"0.5rem"},children:C.map((j,N)=>v.jsxs("div",{style:{border:"1px solid #e5e7eb",borderRadius:"8px",padding:"0.5rem",background:"#f9fafb",position:"relative"},children:[v.jsx("img",{src:j.url,alt:` ${N+1}`,style:{width:"100%",height:"80px",objectFit:"cover",borderRadius:"4px",marginBottom:"0.5rem"}}),v.jsx("div",{style:{position:"absolute",top:"0.5rem",right:"0.5rem",background:"rgba(0,0,0,0.7)",color:"white",borderRadius:"50%",width:"20px",height:"20px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"0.75rem",fontWeight:"bold"},children:N+1}),v.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:"0.25rem"},children:[v.jsx("button",{type:"button",onClick:()=>F(N),disabled:N===0,style:{padding:"2px 4px",fontSize:"0.75rem",backgroundColor:N===0?"#ccc":"#1976d2",color:"white",border:"none",borderRadius:"4px",cursor:N===0?"not-allowed":"pointer",flex:1},children:""}),v.jsx("button",{type:"button",onClick:()=>I(N),disabled:N===C.length-1,style:{padding:"2px 4px",fontSize:"0.75rem",backgroundColor:N===C.length-1?"#ccc":"#1976d2",color:"white",border:"none",borderRadius:"4px",cursor:N===C.length-1?"not-allowed":"pointer",flex:1},children:""}),v.jsx("button",{type:"button",onClick:()=>z(j.id),style:{padding:"2px 4px",fontSize:"0.75rem",backgroundColor:"#dc3545",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",flex:1},children:""})]})]},j.id))})]})]}),v.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"center",marginTop:"2rem",flexWrap:"wrap"},children:[v.jsx("button",{type:"submit",disabled:k,style:{...QH,minWidth:"120px",opacity:k?.6:1,cursor:k?"not-allowed":"pointer"},children:k?"...":n?" ":" "}),v.jsx("button",{type:"button",onClick:f,disabled:k,style:{...ZH,minWidth:"120px",opacity:k?.6:1,cursor:k?"not-allowed":"pointer"},children:""})]})]})]})})},z0={marginBottom:"1.5rem",width:"100%"},V0={display:"block",marginBottom:"0.5rem",fontWeight:"600",color:"#333",fontSize:"1rem"},ih={width:"100%",padding:"12px",borderRadius:"8px",border:"2px solid #e0e0e0",fontSize:"16px",boxSizing:"border-box",transition:"border-color 0.2s ease",backgroundColor:"#fff",fontFamily:"inherit",outline:"none"},QH={padding:"12px 20px",backgroundColor:"#1976d2",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"16px",fontWeight:"600",transition:"background-color 0.2s ease",flex:"1",maxWidth:"200px"},ZH={padding:"12px 20px",backgroundColor:"#6c757d",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"16px",fontWeight:"600",transition:"background-color 0.2s ease",flex:"1",maxWidth:"200px"};var JC={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},s6=Xn.createContext&&Xn.createContext(JC),JH=["attr","size","title"];function eW(n,e){if(n==null)return{};var t=tW(n,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function tW(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}function xm(){return xm=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},xm.apply(this,arguments)}function l6(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function bm(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?l6(Object(t),!0).forEach(function(r){nW(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):l6(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function nW(n,e,t){return e=rW(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function rW(n){var e=iW(n,"string");return typeof e=="symbol"?e:e+""}function iW(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function eI(n){return n&&n.map((e,t)=>Xn.createElement(e.tag,bm({key:t},e.attr),eI(e.child)))}function pc(n){return e=>Xn.createElement(aW,xm({attr:bm({},n.attr)},e),eI(n.child))}function aW(n){var e=t=>{var{attr:r,size:i,title:a}=n,o=eW(n,JH),s=i||t.size||"1em",c;return t.className&&(c=t.className),n.className&&(c=(c?c+" ":"")+n.className),Xn.createElement("svg",xm({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,r,o,{className:c,style:bm(bm({color:n.color||t.color},t.style),n.style),height:s,width:s,xmlns:"http://www.w3.org/2000/svg"}),a&&Xn.createElement("title",null,a),n.children)};return s6!==void 0?Xn.createElement(s6.Consumer,null,t=>e(t)):e(JC)}function oW(n){return pc({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M0 464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V192H0v272zm320-196c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zm0 128c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zM192 268c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zm0 128c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zM64 268c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H76c-6.6 0-12-5.4-12-12v-40zm0 128c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H76c-6.6 0-12-5.4-12-12v-40zM400 64h-48V16c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v48H160V16c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v48H48C21.5 64 0 85.5 0 112v48h448v-48c0-26.5-21.5-48-48-48z"},child:[]}]})(n)}function sW(n){return pc({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M402.6 83.2l90.2 90.2c3.8 3.8 3.8 10 0 13.8L274.4 405.6l-92.8 10.3c-12.4 1.4-22.9-9.1-21.5-21.5l10.3-92.8L388.8 83.2c3.8-3.8 10-3.8 13.8 0zm162-22.9l-48.8-48.8c-15.2-15.2-39.9-15.2-55.2 0l-35.4 35.4c-3.8 3.8-3.8 10 0 13.8l90.2 90.2c3.8 3.8 10 3.8 13.8 0l35.4-35.4c15.2-15.3 15.2-40 0-55.2zM384 346.2V448H64V128h229.8c3.2 0 6.2-1.3 8.5-3.5l40-40c7.6-7.6 2.2-20.5-8.5-20.5H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V306.2c0-10.7-12.9-16-20.5-8.5l-40 40c-2.2 2.3-3.5 5.3-3.5 8.5z"},child:[]}]})(n)}function lW(n){return pc({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M572.52 241.4C518.29 135.59 410.93 64 288 64S57.68 135.64 3.48 241.41a32.35 32.35 0 0 0 0 29.19C57.71 376.41 165.07 448 288 448s230.32-71.64 284.52-177.41a32.35 32.35 0 0 0 0-29.19zM288 400a144 144 0 1 1 144-144 143.93 143.93 0 0 1-144 144zm0-240a95.31 95.31 0 0 0-25.31 3.79 47.85 47.85 0 0 1-66.9 66.9A95.78 95.78 0 1 0 288 160z"},child:[]}]})(n)}function cW(n){return pc({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M172.268 501.67C26.97 291.031 0 269.413 0 192 0 85.961 85.961 0 192 0s192 85.961 192 192c0 77.413-26.97 99.031-172.268 309.67-9.535 13.774-29.93 13.773-39.464 0zM192 272c44.183 0 80-35.817 80-80s-35.817-80-80-80-80 35.817-80 80 35.817 80 80 80z"},child:[]}]})(n)}function uW(n){return pc({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M493.4 24.6l-104-24c-11.3-2.6-22.9 3.3-27.5 13.9l-48 112c-4.2 9.8-1.4 21.3 6.9 28l60.6 49.6c-36 76.7-98.9 140.5-177.2 177.2l-49.6-60.6c-6.8-8.3-18.2-11.1-28-6.9l-112 48C3.9 366.5-2 378.1.6 389.4l24 104C27.1 504.2 36.7 512 48 512c256.1 0 464-207.5 464-464 0-11.2-7.7-20.9-18.6-23.4z"},child:[]}]})(n)}function fW(n){return pc({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"},child:[]}]})(n)}function dW(n){return pc({attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"},child:[]}]})(n)}function c6(n){return pc({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16zM53.2 467a48 48 0 0 0 47.9 45h245.8a48 48 0 0 0 47.9-45L416 128H32z"},child:[]}]})(n)}function hW(n){return pc({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M212.333 224.333H12c-6.627 0-12-5.373-12-12V12C0 5.373 5.373 0 12 0h48c6.627 0 12 5.373 12 12v78.112C117.773 39.279 184.26 7.47 258.175 8.007c136.906.994 246.448 111.623 246.157 248.532C504.041 393.258 393.12 504 256.333 504c-64.089 0-122.496-24.313-166.51-64.215-5.099-4.622-5.334-12.554-.467-17.42l33.967-33.967c4.474-4.474 11.662-4.717 16.401-.525C170.76 415.336 211.58 432 256.333 432c97.268 0 176-78.716 176-176 0-97.267-78.716-176-176-176-58.496 0-110.28 28.476-142.274 72.333h98.274c6.627 0 12 5.373 12 12v48c0 6.627-5.373 12-12 12z"},child:[]}]})(n)}function u6(n){return pc({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"},child:[]}]})(n)}const pW=({item:n,onClose:e})=>{const[t,r]=le.useState([]),[i,a]=le.useState(!0);le.useEffect(()=>{if(!n)return;(async()=>{a(!0);try{console.log("     :",n.name,"ID:",n.id);const f=(await nr(hn(wt,"orders"))).docs.map(g=>({id:g.id,...g.data()})).filter(g=>g.status==="open");console.log("   :",f.length);const d=f.filter(g=>{var x;return(x=g.items)==null?void 0:x.some(_=>_.id===n.id||_.ItemId===n.ItemId)});console.log("    :",d.length);const p=d.map(g=>{const m=g.items.find(x=>x.id===n.id||x.ItemId===n.ItemId);return{...g,itemQuantity:(m==null?void 0:m.quantity)||0}});p.sort((g,m)=>{var C,S;const x=((C=g.createdAt)==null?void 0:C.seconds)||0;return(((S=m.createdAt)==null?void 0:S.seconds)||0)-x}),r(p)}catch(c){console.error("    :",c)}finally{a(!1)}})()},[n]);const o=s=>{if(!s)return" ";let c;return s.seconds?c=new Date(s.seconds*1e3):typeof s=="string"?c=new Date(s):c=s,isNaN(c.getTime())?"  ":c.toLocaleDateString("he-IL",{year:"numeric",month:"2-digit",day:"2-digit"})};return n?v.jsxs("div",{className:"modal-overlay",style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.6)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1500,padding:"1rem"},onClick:s=>{s.target===s.currentTarget&&e()},children:[v.jsxs("div",{className:"modal-content",style:{backgroundColor:"white",borderRadius:"12px",width:"95%",maxWidth:"800px",maxHeight:"85vh",overflowY:"auto",padding:"0",direction:"rtl",boxShadow:"0 10px 25px rgba(0,0,0,0.15)"},onClick:s=>s.stopPropagation(),children:[v.jsxs("div",{style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",padding:"1.5rem",borderRadius:"12px 12px 0 0",position:"relative"},children:[v.jsx("button",{onClick:e,style:{position:"absolute",top:"1rem",left:"1rem",background:"rgba(255,255,255,0.2)",border:"none",borderRadius:"50%",width:"40px",height:"40px",color:"white",fontSize:"1.2rem",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s ease"},onMouseEnter:s=>{s.target.style.background="rgba(255,255,255,0.3)"},onMouseLeave:s=>{s.target.style.background="rgba(255,255,255,0.2)"},children:v.jsx(dW,{})}),v.jsxs("h2",{style:{margin:0,fontSize:"1.5rem",textAlign:"center",paddingRight:"3rem"},children:['    "',n.name,'"']}),v.jsxs("p",{style:{margin:"0.5rem 0 0 0",opacity:.9,textAlign:"center",fontSize:"0.95rem"},children:[" : ",n.ItemId]})]}),v.jsx("div",{style:{padding:"1.5rem"},children:i?v.jsxs("div",{style:{textAlign:"center",padding:"3rem",color:"#666"},children:[v.jsx("div",{style:{width:"40px",height:"40px",border:"3px solid #f3f3f3",borderTop:"3px solid #667eea",borderRadius:"50%",animation:"spin 1s linear infinite",margin:"0 auto 1rem"}}),"  ..."]}):t.length===0?v.jsxs("div",{style:{textAlign:"center",padding:"3rem",color:"#666"},children:[v.jsx("div",{style:{fontSize:"3rem",marginBottom:"1rem",color:"#ddd"},children:""}),v.jsx("h3",{style:{color:"#666",marginBottom:"0.5rem"},children:"   "}),v.jsx("p",{style:{color:"#999",margin:0},children:"       "})]}):v.jsxs(v.Fragment,{children:[v.jsx("div",{style:{background:"#f8f9fa",padding:"1rem",borderRadius:"8px",marginBottom:"1.5rem",textAlign:"center",border:"1px solid #e9ecef"},children:v.jsxs("p",{style:{margin:0,color:"#495057",fontSize:"1rem",fontWeight:"500"},children:["  -",t.length," ",t.length===1?"":""," ",t.length===1?"":"",v.jsx("br",{}),v.jsxs("span",{style:{fontSize:"0.9rem",color:"#6c757d"},children:['"  : ',t.reduce((s,c)=>s+c.itemQuantity,0)]})]})}),v.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem",padding:window.innerWidth<=768?"0 0.5rem":"0"},children:t.map((s,c)=>v.jsxs("div",{style:{border:"1px solid #e9ecef",borderRadius:"10px",padding:"1.25rem",backgroundColor:"#fff",boxShadow:"0 2px 8px rgba(0,0,0,0.08)",transition:"all 0.2s ease",position:"relative"},onMouseEnter:f=>{f.currentTarget.style.boxShadow="0 4px 12px rgba(0,0,0,0.12)",f.currentTarget.style.transform="translateY(-1px)"},onMouseLeave:f=>{f.currentTarget.style.boxShadow="0 2px 8px rgba(0,0,0,0.08)",f.currentTarget.style.transform="translateY(0)"},children:[v.jsxs("div",{style:{position:"absolute",top:"0.75rem",left:"0.75rem",background:"#667eea",color:"white",padding:"0.25rem 0.5rem",borderRadius:"12px",fontSize:window.innerWidth<=768?"0.7rem":"0.8rem",fontWeight:"bold"},children:["#",s.simpleId||s.id.slice(0,6)]}),v.jsx("div",{style:{textAlign:"center",marginTop:"1.5rem",marginBottom:"1rem"},children:v.jsx("div",{style:{background:"#28a745",color:"white",padding:window.innerWidth<=768?"0.3rem 0.6rem":"0.4rem 0.8rem",borderRadius:"15px",fontSize:window.innerWidth<=768?"0.7rem":"0.8rem",fontWeight:"bold",textAlign:"center",lineHeight:"1.2",wordBreak:"break-word",maxWidth:window.innerWidth<=768?"180px":"220px",margin:"0 auto",display:"inline-block"},children:window.innerWidth<=768?v.jsxs(v.Fragment,{children:[": ",s.itemQuantity]}):v.jsxs(v.Fragment,{children:[": ",n.name,v.jsx("br",{}),": ",s.itemQuantity]})})}),v.jsxs("div",{style:{marginBottom:"1rem",textAlign:"center"},children:[v.jsxs("h4",{style:{margin:"0 0 0.75rem 0",color:"#333",fontSize:"1.1rem",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[v.jsx(u6,{color:"#667eea"}),s.clientName]}),v.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"0.5rem",fontSize:"0.9rem",color:"#555"},children:[v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[v.jsx(uW,{color:"#28a745",size:14}),v.jsx("span",{children:s.phone})]}),v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[v.jsx(cW,{color:"#dc3545",size:14}),v.jsx("span",{children:s.address})]}),v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[v.jsx(u6,{color:"#6c757d",size:14}),v.jsxs("span",{children:[": ",s.volunteerName]})]})]})]}),v.jsxs("div",{style:{background:"#f8f9fa",padding:"0.75rem",borderRadius:"6px",border:"1px solid #e9ecef",textAlign:"center"},children:[v.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",marginBottom:"0.5rem",fontSize:"0.9rem",fontWeight:"500",color:"#495057"},children:[v.jsx(oW,{color:"#667eea",size:14})," "]}),v.jsxs("div",{style:{fontSize:"0.85rem",color:"#6c757d",lineHeight:"1.4"},children:[v.jsxs("div",{children:[" : ",o(s.pickupDate)]}),v.jsxs("div",{children:[" : ",o(s.eventDate)]}),v.jsxs("div",{children:[" : ",o(s.returnDate)]}),s.eventType&&v.jsxs("div",{style:{marginTop:"0.5rem",fontWeight:"500",color:"#495057"},children:["  : ",s.eventType]})]})]})]},s.id))})]})}),v.jsx("div",{style:{background:"#f8f9fa",padding:"1rem 1.5rem",borderRadius:"0 0 12px 12px",borderTop:"1px solid #e9ecef",textAlign:"center"},children:v.jsx("button",{onClick:e,style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",border:"none",padding:"0.75rem 2rem",borderRadius:"25px",fontSize:"1rem",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:s=>{s.target.style.transform="translateY(-1px)",s.target.style.boxShadow="0 4px 12px rgba(102, 126, 234, 0.3)"},onMouseLeave:s=>{s.target.style.transform="translateY(0)",s.target.style.boxShadow="none"},children:""})})]}),v.jsx("style",{jsx:!0,children:`
        @keyframes spin {
          0% { transform: rotate(0deg); }
          100% { transform: rotate(360deg); }
        }
      `})]}):null},f6=({currentPage:n,totalItems:e,itemsPerPage:t,onPageChange:r,className:i=""})=>{const a=Math.ceil(e/t),o=window.innerWidth<=768;if(a<=1)return null;const c=(()=>{const p=o?5:7,g=Math.floor(p/2);let m=Math.max(1,n-g),x=Math.min(a,m+p-1);x-m+1<p&&(m=Math.max(1,x-p+1));const _=[];m>1&&(_.push(1),m>2&&_.push("..."));for(let C=m;C<=x;C++)_.push(C);return x<a&&(x<a-1&&_.push("..."),_.push(a)),_})(),f=(n-1)*t+1,d=Math.min(n*t,e);return v.jsxs("div",{className:`pagination-container ${i}`,style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"1rem",margin:"2rem 0",direction:"rtl"},children:[v.jsxs("div",{style:{fontSize:o?"0.875rem":"1rem",color:"#6b7280",textAlign:"center"},children:[" ",f,"-",d,"  ",e," "]}),v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:o?"0.25rem":"0.5rem",flexWrap:"wrap",justifyContent:"center"},children:[v.jsx("button",{onClick:()=>r(n-1),disabled:n===1,style:{display:"flex",alignItems:"center",justifyContent:"center",width:o?"36px":"40px",height:o?"36px":"40px",border:"1px solid #d1d5db",borderRadius:"8px",background:n===1?"#f9fafb":"white",color:n===1?"#9ca3af":"#374151",cursor:n===1?"not-allowed":"pointer",transition:"all 0.2s ease"},children:v.jsx(W1,{size:o?16:20})}),c.map((p,g)=>{if(p==="...")return v.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",width:o?"36px":"40px",height:o?"36px":"40px",color:"#9ca3af"},children:v.jsx(X5,{size:o?16:20})},`dots-${g}`);const m=p===n;return v.jsx("button",{onClick:()=>r(p),style:{display:"flex",alignItems:"center",justifyContent:"center",width:o?"36px":"40px",height:o?"36px":"40px",border:m?"2px solid #3b82f6":"1px solid #d1d5db",borderRadius:"8px",background:m?"#3b82f6":"white",color:m?"white":"#374151",cursor:"pointer",transition:"all 0.2s ease",fontWeight:m?"bold":"normal",fontSize:o?"14px":"16px"},children:p},p)}),v.jsx("button",{onClick:()=>r(n+1),disabled:n===a,style:{display:"flex",alignItems:"center",justifyContent:"center",width:o?"36px":"40px",height:o?"36px":"40px",border:"1px solid #d1d5db",borderRadius:"8px",background:n===a?"#f9fafb":"white",color:n===a?"#9ca3af":"#374151",cursor:n===a?"not-allowed":"pointer",transition:"all 0.2s ease"},children:v.jsx(H1,{size:o?16:20})})]})]})},gW=()=>{const[n,e]=le.useState(""),[t,r]=le.useState(""),[i,a]=le.useState([]),[o,s]=le.useState([]),[c,f]=le.useState(""),[d,p]=le.useState(""),[g,m]=le.useState(null),[x,_]=le.useState(""),[C,S]=le.useState(!1),[k,M]=le.useState(!1),[P,Y]=le.useState(null),[z,F]=le.useState(""),[I,T]=le.useState(""),[j,N]=le.useState(1),[R,D]=le.useState(1),[L,G]=le.useState(window.innerWidth<=768),[U,H]=le.useState(!1),[te,se]=le.useState(null),{user:ee}=Zo(),ie=(ee==null?void 0:ee.username)||"  ",$=le.useRef(null),W=L?12:20,Q=L?12:20;le.useEffect(()=>{const Ee=()=>{const lt=window.innerWidth<=768;lt!==L&&(G(lt),N(1),D(1))};return window.addEventListener("resize",Ee),()=>window.removeEventListener("resize",Ee)},[L]),le.useEffect(()=>{N(1)},[c]),le.useEffect(()=>{D(1)},[d]),le.useEffect(()=>{const Ee=document.createElement("style");return Ee.innerHTML=`
      input[type=number]::-webkit-inner-spin-button,
      input[type=number]::-webkit-outer-spin-button {
        -webkit-appearance: none;
        margin: 0;
      }
      input[type=number] { -moz-appearance: textfield; }
      
      /*   */
      .products-grid-mobile {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
        gap: 1.2rem;
        padding: 0;
      }
      
      .product-card-mobile {
        min-height: 380px;
        padding: 1rem;
      }
      
      .product-card-mobile img {
        height: 140px;
      }
      
      .product-card-mobile h3 {
        font-size: 1rem;
        margin: 0.5rem 0;
      }
      
      .product-card-mobile p {
        font-size: 0.875rem;
        margin: 0.25rem 0;
      }
      
      .product-card-mobile .button-group {
        flex-direction: row;
        gap: 0.5rem;
        width: 100%;
      }
      
      .product-card-mobile button {
        font-size: 0.8rem;
        padding: 6px 10px;
        flex: 1;
      }
      
      /*   */
      @media (max-width: 768px) {
        .products-grid-mobile {
          grid-template-columns: 1fr 1fr !important;
          gap: 0.75rem !important;
          padding: 0 0.5rem;
        }
        
        .product-card-mobile {
          min-height: 320px !important;
          padding: 0.75rem !important;
        }
        
        .product-card-mobile img {
          height: 100px !important;
        }
        
        .product-card-mobile h3 {
          font-size: 0.9rem !important;
          margin: 0.5rem 0 !important;
        }
        
        .product-card-mobile p {
          font-size: 0.8rem !important;
          margin: 0.25rem 0 !important;
        }
        
        .product-card-mobile .button-group {
          flex-direction: column !important;
          gap: 0.3rem !important;
        }
        
        .product-card-mobile button {
          font-size: 0.75rem !important;
          padding: 4px 8px !important;
          width: 100% !important;
        }
      }
    `,document.head.appendChild(Ee),()=>document.head.removeChild(Ee)},[]);const J=async()=>{const lt=(await nr(hn(wt,"orders"))).docs.map(it=>it.data()).filter(it=>it.status==="open"),Ye=new Set;lt.forEach(it=>{var Lt;(Lt=it.items)==null||Lt.forEach(ht=>{Ye.add(ht.id)})});const ct=(await nr(hn(wt,"items"))).docs.filter(it=>it.data().isDeleted!==!0).map(it=>{const Lt=it.data(),ht=C1(Lt);return{id:it.id,...ht,inUse:Ye.has(it.id)}});a(ct)},he=async()=>{const lt=(await nr(hn(wt,"deletedItems"))).docs.map(Ye=>{const vt=Ye.data();return{id:Ye.id,...C1(vt)}});s(lt)};le.useEffect(()=>{const Ee=async()=>{try{console.log("  migration   ...");const Ye=await YH(wt,ia,rr,nr,hn);console.log("  migration:",Ye)}catch{console.log(" Migration      ")}};localStorage.getItem("imagesMigrationComplete")?(J(),he()):Ee().then(()=>{localStorage.setItem("imagesMigrationComplete","true"),J(),he()})},[]),le.useEffect(()=>{const Ee=Ye=>{k&&$.current&&!$.current.contains(Ye.target)&&M(!1)},lt=Ye=>{Ye.key==="Escape"&&M(!1)};return document.addEventListener("mousedown",Ee),document.addEventListener("keydown",lt),()=>{document.removeEventListener("mousedown",Ee),document.removeEventListener("keydown",lt)}},[k]);const be=i.filter(Ee=>Ee.name.toLowerCase().includes(c.toLowerCase())),_e=o.filter(Ee=>Ee.name.toLowerCase().includes(d.toLowerCase())),Ie=(j-1)*W,Oe=Ie+W,Ve=be.slice(Ie,Oe),nt=(R-1)*Q,ot=nt+Q,ft=_e.slice(nt,ot),de=Ee=>{console.log("     :",Ee.name),se(Ee),H(!0)},rt=async Ee=>{if(window.confirm(" / /    ?"))try{await hq(Ee,ie),Dn.success("  ."),J(),he();const lt=be.length-1,Ye=Math.ceil(lt/W);j>Ye&&Ye>0&&N(Ye)}catch{Dn.error("  ")}},dt=async Ee=>{if(window.confirm("     ?"))try{await pq(Ee,ie),Dn.success("   ."),J(),he();const lt=_e.length-1,Ye=Math.ceil(lt/Q);R>Ye&&Ye>0&&D(Ye)}catch{Dn.error("  ")}},at=async(Ee,lt=null)=>{var Ye,vt,ct;Ee.preventDefault();try{const it=lt||{name:n,quantity:parseInt(t),images:x?[x]:[],imageUrl:x,publicComment:z,internalComment:I},Lt=Nl(hn(wt,"items"),ru("name","==",it.name.trim())),ht=await nr(Lt),_t=(await nr(hn(wt,"items"))).docs.map(xt=>xt.data().ItemId).filter(xt=>typeof xt=="number").sort((xt,mt)=>mt-xt),ut=_t.length>0?_t[0]+1:1;if(P)await ia(rr(wt,"items",P.id),{name:it.name,quantity:parseInt(it.quantity),images:it.images||[],imageUrl:((Ye=it.images)==null?void 0:Ye[0])||null,publicComment:it.publicComment||"",internalComment:it.internalComment||"",updatedBy:ie,updatedAt:kr()}),Dn.success("  ");else if(ht.empty)await dd(hn(wt,"items"),{name:it.name,quantity:parseInt(it.quantity),images:it.images||[],imageUrl:((vt=it.images)==null?void 0:vt[0])||null,publicComment:it.publicComment||"",internalComment:it.internalComment||"",createdBy:ie,updatedBy:ie,createdAt:kr(),updatedAt:kr(),ItemId:ut}),Dn.success(` "${it.name}"    ${((ct=it.images)==null?void 0:ct.length)||0} `);else{const xt=ht.docs[0].data();BH.confirmAlert({title:"  ",message:` "${it.name}"    ${xt.quantity}.
  ${it.quantity}?`,buttons:[{label:"",onClick:async()=>{var mt;await dd(hn(wt,"items"),{name:it.name,quantity:parseInt(it.quantity),images:it.images||[],imageUrl:((mt=it.images)==null?void 0:mt[0])||null,publicComment:it.publicComment||"",internalComment:it.internalComment||"",createdBy:ie,updatedBy:ie,createdAt:kr(),updatedAt:kr(),ItemId:ut}),Dn.success("  "),J(),he()}},{label:"",onClick:()=>Dn.info("")}]});return}e(""),r(""),m(null),_(""),F(""),T(""),S(!1),Y(null),J(),he()}catch(it){console.error("  :",it),Dn.error("  ")}};return v.jsxs("div",{className:"page-container",style:{padding:"1rem",direction:"rtl"},children:[v.jsxs("div",{style:{width:"100%"},children:[v.jsx("h2",{children:" "}),v.jsxs("div",{style:{display:"flex",justifyContent:"flex-start",gap:"1rem",marginBottom:"1rem",flexWrap:"wrap"},children:[v.jsxs("button",{onClick:()=>{Y(null),e(""),r(""),_(""),m(null),S(!0),F(""),T("")},className:"btn-primary",style:{backgroundColor:"#1976d2",color:"white",border:"none",borderRadius:"6px",padding:"8px 12px",fontSize:"14px",display:"flex",alignItems:"center",gap:"6px",cursor:"pointer"},children:[v.jsx(fW,{size:14}),"  "]}),v.jsxs("button",{onClick:()=>M(!0),className:"btn-secondary",style:{backgroundColor:"#6c757d",color:"white",border:"none",borderRadius:"6px",padding:"8px 12px",fontSize:"14px",display:"flex",alignItems:"center",gap:"6px",cursor:"pointer"},children:[v.jsx(c6,{size:14}),"  "]})]}),v.jsx("input",{type:"text",dir:"rtl",placeholder:" ...",value:c,onChange:Ee=>f(Ee.target.value),className:"search-input",style:{padding:"10px",borderRadius:"6px",fontSize:"1rem",border:"1px solid #ccc",width:"100%",marginBottom:"1rem",boxSizing:"border-box"}}),c&&v.jsx("div",{style:{background:"#f0f9ff",padding:"1rem",borderRadius:"8px",marginBottom:"1rem",border:"1px solid #0ea5e9"},children:v.jsxs("p",{style:{margin:0,color:"#0369a1"},children:["  ",be.length,'   "',c,'"']})}),v.jsx("div",{className:"products-grid-mobile",children:Ve.length===0?v.jsx("p",{style:{gridColumn:"1 / -1",textAlign:"center"},children:c?`    "${c}"`:"   ."}):Ve.map(Ee=>v.jsxs("div",{className:"product-card product-card-mobile",style:{width:"100%",border:"1px solid #e0e0e0",borderRadius:"10px",backgroundColor:"#fff",padding:"1rem",boxShadow:"0 2px 6px rgba(0,0,0,0.06)",display:"flex",flexDirection:"column",justifyContent:"space-between",alignItems:"center",textAlign:"center",transition:"transform 0.2s",boxSizing:"border-box"},children:[v.jsx(I1,{item:Ee,width:"100%",height:"140px",showNavigation:!0,style:{marginBottom:"0.5rem"}}),v.jsx("h3",{style:{margin:"0.5rem 0",fontSize:"1rem"},children:Ee.name}),v.jsxs("p",{style:{margin:"0.25rem 0"},children:[": ",Ee.quantity]}),Ee.internalComment&&v.jsxs("p",{style:{fontSize:"0.8rem",color:"#999",marginTop:"0.25rem",margin:"0.25rem 0"},children:[" ",Ee.internalComment]}),v.jsxs("p",{style:{fontSize:"0.85rem",color:"#555",margin:"0.25rem 0"},children:[" : ",Ee.ItemId]}),Ee.inUse&&v.jsx("p",{style:{color:"#d97706",fontWeight:"bold",fontSize:"0.85rem",margin:"0.25rem 0"},children:"     "}),v.jsxs("div",{className:"button-group",style:{display:"flex",gap:"0.4rem",marginTop:"auto",width:"100%",flexDirection:"column"},children:[Ee.inUse&&v.jsxs("button",{onClick:()=>de(Ee),style:{backgroundColor:"#17a2b8",color:"white",border:"none",padding:L?"4px 8px":"6px 10px",borderRadius:"5px",fontSize:L?"0.75rem":"0.8rem",display:"flex",alignItems:"center",justifyContent:"center",gap:"4px",cursor:"pointer",width:"100%",minHeight:L?"28px":"32px"},children:[v.jsx(lW,{size:L?12:14}),"  "]}),v.jsxs("div",{style:{display:"flex",gap:"0.4rem",width:"100%"},children:[v.jsxs("button",{onClick:()=>{Y(Ee),e(Ee.name),r(Ee.quantity.toString()),_(GH(Ee)||""),m(null),S(!0),F(Ee.publicComment||""),T(Ee.internalComment||"")},style:{backgroundColor:"#6c757d",color:"white",border:"none",padding:L?"4px 8px":"6px 10px",borderRadius:"5px",fontSize:L?"0.75rem":"0.8rem",display:"flex",alignItems:"center",justifyContent:"center",gap:"4px",cursor:"pointer",flex:"1",minHeight:L?"28px":"32px"},children:[v.jsx(sW,{size:L?12:14})," "]}),v.jsxs("button",{onClick:()=>rt(Ee.id),style:{backgroundColor:"#d32f2f",color:"white",border:"none",padding:L?"4px 8px":"6px 10px",borderRadius:"5px",fontSize:L?"0.75rem":"0.8rem",display:"flex",alignItems:"center",justifyContent:"center",gap:"4px",cursor:"pointer",flex:"1",minHeight:L?"28px":"32px"},children:[v.jsx(c6,{size:L?12:14})," "]})]})]})]},Ee.id))}),v.jsx(f6,{currentPage:j,totalItems:be.length,itemsPerPage:W,onPageChange:N})]}),k&&v.jsx("div",{className:"modal-overlay",style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3,padding:"1rem"},children:v.jsxs("div",{className:"modal-content",ref:$,style:{position:"relative",backgroundColor:"white",borderRadius:"8px",width:"90%",maxWidth:"800px",maxHeight:"80%",overflowY:"auto",padding:"2rem",direction:"rtl"},children:[v.jsx("h2",{children:" "}),v.jsx("button",{onClick:()=>M(!1),style:{position:"absolute",top:"1rem",right:"1rem",background:"none",border:"none",fontSize:"1.5rem",cursor:"pointer"},children:""}),v.jsx("input",{type:"text",dir:"rtl",placeholder:"  ...",value:d,onChange:Ee=>p(Ee.target.value),className:"search-input",style:{padding:"10px",borderRadius:"6px",fontSize:"1rem",border:"1px solid #ccc",width:"100%",margin:"1rem 0",boxSizing:"border-box"}}),d&&v.jsx("div",{style:{background:"#fef2f2",padding:"1rem",borderRadius:"8px",marginBottom:"1rem",border:"1px solid #fca5a5"},children:v.jsxs("p",{style:{margin:0,color:"#dc2626"},children:["  ",_e.length,'    "',d,'"']})}),v.jsx("div",{className:"products-grid-mobile",children:ft.length===0?v.jsx("p",{style:{gridColumn:"1 / -1",textAlign:"center"},children:d?`     "${d}"`:"  ."}):ft.map(Ee=>v.jsxs("div",{className:"product-card-mobile",style:{width:"100%",border:"1px solid #e0e0e0",borderRadius:"10px",backgroundColor:"#fff",padding:"1rem",boxShadow:"0 2px 6px rgba(0,0,0,0.06)",display:"flex",flexDirection:"column",justifyContent:"space-between",alignItems:"center",textAlign:"center",boxSizing:"border-box"},children:[v.jsx(I1,{item:Ee,width:"100%",height:"120px",showNavigation:!0,style:{marginBottom:"0.5rem"}}),v.jsx("h3",{style:{margin:"0.5rem 0"},children:Ee.name}),v.jsxs("p",{style:{margin:"0.25rem 0"},children:[": ",Ee.quantity]}),v.jsxs("button",{onClick:()=>dt(Ee.id),style:{backgroundColor:"#28a745",color:"white",border:"none",padding:"6px 10px",borderRadius:"5px",fontSize:"14px",display:"flex",alignItems:"center",gap:"6px",cursor:"pointer",marginTop:"auto"},children:[v.jsx(hW,{size:14})," "]})]},Ee.id))}),v.jsx(f6,{currentPage:R,totalItems:_e.length,itemsPerPage:Q,onPageChange:D})]})}),C&&v.jsx(KH,{editingItem:P,name:n,quantity:t,imageUrl:x,imageFile:g,publicComment:z,internalComment:I,onNameChange:Ee=>e(Ee.target.value.trimStart()),onQuantityChange:Ee=>r(Ee.target.value.trimStart()),onImageUrlChange:Ee=>_(Ee.target.value),onImageFileChange:Ee=>m(Ee.target.files[0]),onPublicCommentChange:Ee=>F(Ee.target.value),onInternalCommentChange:Ee=>T(Ee.target.value),onCancel:()=>S(!1),onSubmit:at}),U&&v.jsx(pW,{item:te,onClose:()=>{H(!1),se(null)}}),v.jsx(kH,{position:"bottom-right",autoClose:3e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0,theme:"light"})]})},mW=()=>{const{user:n}=Zo(),[e,t]=le.useState([]),[r,i]=le.useState(""),[a,o]=le.useState(null);le.useEffect(()=>{(async()=>{const m=hn(wt,"users"),_=(await nr(m)).docs.map(C=>({id:C.id,...C.data()}));t(_)})()},[]),le.useEffect(()=>{(async()=>{try{const m=rr(wt,"settings","onlineOrdering"),x=await Ph(m);x.exists()&&o(x.data().enabled)}catch(m){console.error("  :",m)}})()},[]);const s=async(g,m)=>{const x=rr(wt,"users",g);await ia(x,{role:m}),t(e.map(_=>_.id===g?{..._,role:m}:_))},c=async()=>{try{const g=!a;await ia(rr(wt,"settings","onlineOrdering"),{enabled:g}),o(g)}catch(g){alert("  : "+g.message)}},f={container:{padding:"1rem",direction:"rtl",maxWidth:"100%",overflow:"hidden"},header:{fontSize:"1.8rem",marginBottom:"2rem",textAlign:"center",color:"#333",fontWeight:"600"},toggleBox:{display:"flex",alignItems:"center",justifyContent:"center",gap:"15px",marginBottom:"2rem",backgroundColor:"#f8f9fa",padding:"16px 24px",borderRadius:"15px",border:"2px solid #e9ecef",maxWidth:"400px",margin:"0 auto 2rem auto",boxSizing:"border-box",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},toggleSwitch:{width:"50px",height:"28px",borderRadius:"50px",backgroundColor:a?"#4caf50":"#e74c3c",position:"relative",cursor:"pointer",transition:"0.3s",flexShrink:0},toggleCircle:{position:"absolute",top:"3px",left:a?"25px":"3px",width:"22px",height:"22px",borderRadius:"50%",backgroundColor:"white",transition:"0.3s",boxShadow:"0 2px 4px rgba(0,0,0,0.2)"},searchBox:{padding:"12px 16px",width:"100%",maxWidth:"500px",borderRadius:"10px",border:"2px solid #ddd",fontSize:"16px",marginBottom:"2rem",boxSizing:"border-box",outline:"none",transition:"border-color 0.2s ease",display:"block",margin:"0 auto 2rem auto"},tableContainer:{overflowX:"auto",marginTop:"1rem",borderRadius:"12px",border:"1px solid #ddd",maxWidth:"1200px",margin:"0 auto",boxShadow:"0 4px 12px rgba(0,0,0,0.1)"},table:{width:"100%",borderCollapse:"collapse",minWidth:"600px",backgroundColor:"white"},th:{border:"1px solid #ddd",padding:"12px 8px",backgroundColor:"#f8f9fa",fontWeight:"600",fontSize:"0.9rem",textAlign:"center",whiteSpace:"nowrap"},td:{border:"1px solid #ddd",padding:"12px 8px",textAlign:"center",fontSize:"0.85rem",verticalAlign:"middle"},button:{padding:"8px 12px",borderRadius:"6px",border:"none",cursor:"pointer",fontSize:"0.8rem",fontWeight:"500",whiteSpace:"nowrap",minWidth:"100px",transition:"opacity 0.2s ease"},promoteBtn:{backgroundColor:"#28a745",color:"white"},demoteBtn:{backgroundColor:"#dc3545",color:"white"}};if(!n||n.role!=="MainAdmin")return v.jsx("div",{style:{padding:"2rem",textAlign:"center",direction:"rtl"},children:v.jsx("p",{children:"    "})});const d=e.filter(g=>g.username&&g.username.toLowerCase().includes(r.toLowerCase())),p=({user:g})=>v.jsxs("div",{style:{backgroundColor:"white",border:"1px solid #ddd",borderRadius:"12px",padding:"1rem",marginBottom:"1rem",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:[v.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"0.5rem"},children:[v.jsx("h4",{style:{margin:0,color:"#333",fontSize:"1.1rem"},children:g.username}),v.jsx("span",{style:{backgroundColor:g.role==="MainAdmin"?"#6f42c1":g.role==="GmachAdmin"?"#17a2b8":"#6c757d",color:"white",padding:"4px 8px",borderRadius:"12px",fontSize:"0.7rem",fontWeight:"500"},children:g.role==="User"?" ":g.role==="GmachAdmin"?' "':g.role==="MainAdmin"?" ":g.role})]}),v.jsxs("p",{style:{margin:"0.5rem 0",color:"#666",fontSize:"0.9rem",wordBreak:"break-all"},children:[" ",g.email]}),g.role!=="MainAdmin"&&v.jsx("div",{style:{marginTop:"1rem"},children:g.role==="User"?v.jsx("button",{style:{...f.button,...f.promoteBtn,width:"100%"},onClick:()=>s(g.id,"GmachAdmin"),children:'  "'}):v.jsx("button",{style:{...f.button,...f.demoteBtn,width:"100%"},onClick:()=>s(g.id,"User"),children:"  "})})]});return v.jsxs(v.Fragment,{children:[v.jsx("style",{children:`
          @media (max-width: 768px) {
            .desktop-table {
              display: none !important;
            }
            .mobile-cards {
              display: block !important;
            }
            .container-mobile {
              padding: 1rem !important;
            }
            .header-mobile {
              font-size: 1.5rem !important;
              margin-bottom: 1.5rem !important;
            }
            .toggle-mobile {
              max-width: 100% !important;
              margin: 0 0 1.5rem 0 !important;
              padding: 12px 16px !important;
            }
            .search-mobile {
              margin: 0 0 1.5rem 0 !important;
              max-width: 100% !important;
            }
          }
          
          @media (min-width: 769px) {
            .desktop-table {
              display: table !important;
            }
            .mobile-cards {
              display: none !important;
            }
            .container-desktop {
              padding: 2rem !important;
              max-width: 1400px !important;
              margin: 0 auto !important;
            }
          }
          
          input:focus {
            border-color: #1976d2 !important;
            box-shadow: 0 0 0 3px rgba(25, 118, 210, 0.1) !important;
          }
          
          button:hover {
            opacity: 0.9;
          }
          
          button:active {
            transform: translateY(1px);
          }
        `}),v.jsxs("div",{style:f.container,className:"container-mobile container-desktop",children:[v.jsx("h2",{style:f.header,className:"header-mobile",children:" "}),a!==null&&v.jsxs("div",{style:f.toggleBox,className:"toggle-mobile",children:[v.jsx("span",{style:{fontWeight:"bold",fontSize:"1.1rem"},children:"  :"}),v.jsx("div",{style:f.toggleSwitch,onClick:c,children:v.jsx("div",{style:f.toggleCircle})})]}),v.jsx("input",{type:"text",placeholder:" ...",value:r,onChange:g=>i(g.target.value),style:f.searchBox,className:"search-mobile",dir:"rtl"}),v.jsx("div",{style:f.tableContainer,className:"desktop-table",children:v.jsxs("table",{style:f.table,children:[v.jsx("thead",{children:v.jsxs("tr",{children:[v.jsx("th",{style:f.th,children:" "}),v.jsx("th",{style:f.th,children:""}),v.jsx("th",{style:f.th,children:""}),v.jsx("th",{style:f.th,children:""})]})}),v.jsx("tbody",{children:d.length===0?v.jsx("tr",{children:v.jsx("td",{colSpan:"4",style:{textAlign:"center",padding:"2rem",color:"#666"},children:"   "})}):d.map(g=>v.jsxs("tr",{children:[v.jsx("td",{style:f.td,children:g.username}),v.jsx("td",{style:f.td,children:g.email}),v.jsx("td",{style:f.td,children:g.role==="User"?" ":g.role==="GmachAdmin"?' "':g.role==="MainAdmin"?" ":g.role}),v.jsxs("td",{style:f.td,children:[g.role!=="MainAdmin"&&(g.role==="User"?v.jsx("button",{style:{...f.button,...f.promoteBtn},onClick:()=>s(g.id,"GmachAdmin"),children:'  "'}):v.jsx("button",{style:{...f.button,...f.demoteBtn},onClick:()=>s(g.id,"User"),children:"  "})),g.role==="MainAdmin"&&v.jsx("span",{style:{color:"#999",fontSize:"0.8rem"},children:"---"})]})]},g.id))})]})}),v.jsx("div",{className:"mobile-cards",style:{display:"none"},children:d.length===0?v.jsx("div",{style:{textAlign:"center",padding:"2rem",color:"#666",backgroundColor:"white",borderRadius:"12px",border:"1px solid #ddd"},children:"   "}):d.map(g=>v.jsx(p,{user:g},g.id))})]})]})},vW=({item:n,isOpen:e,onClose:t})=>!e||!n?null:v.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.8)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"1rem",direction:"rtl"},onClick:t,children:v.jsxs("div",{style:{backgroundColor:"white",borderRadius:"16px",maxWidth:"90vw",maxHeight:"90vh",overflow:"auto",position:"relative",padding:"1.5rem",boxShadow:"0 20px 40px rgba(0,0,0,0.3)"},onClick:r=>r.stopPropagation(),children:[v.jsx("button",{onClick:t,style:{position:"absolute",top:"1rem",left:"1rem",background:"#f3f4f6",border:"none",borderRadius:"50%",width:"40px",height:"40px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",zIndex:1001,transition:"background 0.2s ease"},onMouseEnter:r=>r.target.style.background="#e5e7eb",onMouseLeave:r=>r.target.style.background="#f3f4f6",children:v.jsx(uu,{size:20})}),v.jsxs("div",{style:{display:"flex",flexDirection:window.innerWidth<=768?"column":"row",gap:"2rem",alignItems:"flex-start"},children:[v.jsx("div",{style:{flex:window.innerWidth<=768?"none":"1",width:window.innerWidth<=768?"100%":"400px"},children:v.jsx(I1,{item:n,width:"100%",height:window.innerWidth<=768?"300px":"400px",showNavigation:!0,style:{borderRadius:"12px",boxShadow:"0 4px 12px rgba(0,0,0,0.1)"}})}),v.jsxs("div",{style:{flex:"1",minWidth:"300px"},children:[v.jsx("h2",{style:{fontSize:"1.8rem",fontWeight:"700",color:"#1f2937",marginBottom:"1rem",textAlign:"center"},children:n.name}),v.jsx("div",{style:{backgroundColor:"#f8fafc",padding:"1rem",borderRadius:"8px",marginBottom:"1rem"},children:v.jsxs("p",{style:{fontSize:"1.1rem",color:"#4b5563",margin:0,textAlign:"center"},children:[v.jsx("strong",{children:" :"})," ",n.ItemId]})}),n.publicComment&&v.jsxs("div",{style:{backgroundColor:"#eff6ff",border:"1px solid #bfdbfe",padding:"1rem",borderRadius:"8px",marginBottom:"1rem"},children:[v.jsx("h4",{style:{margin:"0 0 0.5rem 0",color:"#1e40af",fontSize:"1rem"},children:" "}),v.jsx("p",{style:{margin:0,color:"#1e3a8a",fontSize:"1rem"},children:n.publicComment})]})]})]})]})}),yW=({currentPage:n,totalItems:e,itemsPerPage:t,onPageChange:r,className:i=""})=>{const a=Math.ceil(e/t),o=window.innerWidth<=768;if(a<=1)return null;const c=(()=>{const p=o?5:7,g=Math.floor(p/2);let m=Math.max(1,n-g),x=Math.min(a,m+p-1);x-m+1<p&&(m=Math.max(1,x-p+1));const _=[];m>1&&(_.push(1),m>2&&_.push("..."));for(let C=m;C<=x;C++)_.push(C);return x<a&&(x<a-1&&_.push("..."),_.push(a)),_})(),f=(n-1)*t+1,d=Math.min(n*t,e);return v.jsxs("div",{className:`pagination-container ${i}`,style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"1rem",margin:"2rem 0",direction:"rtl"},children:[v.jsxs("div",{style:{fontSize:o?"0.875rem":"1rem",color:"#6b7280",textAlign:"center"},children:[" ",f,"-",d,"  ",e," "]}),v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:o?"0.25rem":"0.5rem",flexWrap:"wrap",justifyContent:"center"},children:[v.jsx("button",{onClick:()=>r(n-1),disabled:n===1,style:{display:"flex",alignItems:"center",justifyContent:"center",width:o?"36px":"40px",height:o?"36px":"40px",border:"1px solid #d1d5db",borderRadius:"8px",background:n===1?"#f9fafb":"white",color:n===1?"#9ca3af":"#374151",cursor:n===1?"not-allowed":"pointer",transition:"all 0.2s ease"},children:v.jsx(W1,{size:o?16:20})}),c.map((p,g)=>{if(p==="...")return v.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",width:o?"36px":"40px",height:o?"36px":"40px",color:"#9ca3af"},children:v.jsx(X5,{size:o?16:20})},`dots-${g}`);const m=p===n;return v.jsx("button",{onClick:()=>r(p),style:{display:"flex",alignItems:"center",justifyContent:"center",width:o?"36px":"40px",height:o?"36px":"40px",border:m?"2px solid #3b82f6":"1px solid #d1d5db",borderRadius:"8px",background:m?"#3b82f6":"white",color:m?"white":"#374151",cursor:"pointer",transition:"all 0.2s ease",fontWeight:m?"bold":"normal",fontSize:o?"14px":"16px"},children:p},p)}),v.jsx("button",{onClick:()=>r(n+1),disabled:n===a,style:{display:"flex",alignItems:"center",justifyContent:"center",width:o?"36px":"40px",height:o?"36px":"40px",border:"1px solid #d1d5db",borderRadius:"8px",background:n===a?"#f9fafb":"white",color:n===a?"#9ca3af":"#374151",cursor:n===a?"not-allowed":"pointer",transition:"all 0.2s ease"},children:v.jsx(H1,{size:o?16:20})})]})]})},xW=()=>{const[n,e]=le.useState([]),[t,r]=le.useState(""),[i,a]=le.useState(!0),[o,s]=le.useState(null),[c,f]=le.useState(!1),[d,p]=le.useState(1),[g,m]=le.useState(window.innerWidth<=768),x=g?12:20;le.useEffect(()=>{const Y=()=>{const z=window.innerWidth<=768;z!==g&&(m(z),p(1))};return window.addEventListener("resize",Y),()=>window.removeEventListener("resize",Y)},[g]),le.useEffect(()=>{p(1)},[t]),le.useEffect(()=>{const Y=hn(wt,"items"),z=q1(Y,F=>{const I=F.docs.map(T=>{const j=T.data(),N=C1(j);return{id:T.id,...N}}).filter(T=>T.isDeleted!==!0);e(I),a(!1)});return()=>z()},[]);const _=(Y,z)=>{z.target.closest("button")||z.target.closest("[data-navigation]")||(s(Y),f(!0))},C=()=>{f(!1),s(null)};if(i)return v.jsxs("div",{style:{padding:"2rem",textAlign:"center",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"400px"},children:[v.jsx("div",{style:{width:"40px",height:"40px",border:"4px solid #e5e7eb",borderTop:"4px solid #3b82f6",borderRadius:"50%",animation:"spin 1s linear infinite",marginBottom:"1rem"}}),v.jsx("h2",{children:" "}),v.jsx("style",{children:`
          @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
          }
        `})]});const S=n.filter(Y=>Y.name.toLowerCase().includes(t.toLowerCase())),k=(d-1)*x,M=k+x,P=S.slice(k,M);return v.jsxs("div",{style:{padding:"2rem",direction:"rtl",textAlign:"right",paddingLeft:"1rem",paddingRight:"1rem"},children:[v.jsx("h2",{style:{textAlign:"center",marginBottom:"2rem",fontSize:"2rem",color:"#1f2937"},children:" "}),v.jsx("input",{type:"text",placeholder:" ",value:t,onChange:Y=>r(Y.target.value),dir:"rtl",style:{padding:"12px 16px",width:"100%",marginBottom:"1.5rem",borderRadius:"8px",border:"2px solid #e5e7eb",fontSize:"1rem",boxSizing:"border-box",transition:"border-color 0.2s ease"},onFocus:Y=>Y.target.style.borderColor="#3b82f6",onBlur:Y=>Y.target.style.borderColor="#e5e7eb"}),t&&v.jsx("div",{style:{background:"#f0f9ff",padding:"1rem",borderRadius:"8px",marginBottom:"1.5rem",border:"1px solid #0ea5e9",textAlign:"center"},children:v.jsxs("p",{style:{margin:0,color:"#0369a1",fontSize:"1rem"},children:["  ",S.length,'   "',t,'"']})}),v.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"1rem",marginTop:"1rem"},children:P.length===0?v.jsx("div",{style:{textAlign:"center",gridColumn:"1 / -1",marginTop:"3rem",padding:"2rem"},children:t?v.jsxs(v.Fragment,{children:[v.jsxs("h3",{style:{color:"#6b7280",marginBottom:"1rem"},children:['    "',t,'"']}),v.jsx("p",{style:{color:"#9ca3af"},children:"    "})]}):v.jsxs(v.Fragment,{children:[v.jsx("h3",{style:{color:"#6b7280",marginBottom:"1rem"},children:"  "}),v.jsx("p",{style:{color:"#9ca3af"},children:"        "})]})}):P.map(Y=>v.jsxs("div",{style:{border:"1px solid #e5e7eb",padding:"0.8rem",borderRadius:"12px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)",backgroundColor:"white",display:"flex",flexDirection:"column",justifyContent:"space-between",transition:"all 0.3s ease-in-out",minHeight:"250px",maxWidth:"100%",cursor:"pointer"},onMouseEnter:z=>{z.currentTarget.style.transform="scale(1.05) translateY(-8px)",z.currentTarget.style.boxShadow="0 8px 25px rgba(0,0,0,0.2)",z.currentTarget.style.borderColor="#3b82f6"},onMouseLeave:z=>{z.currentTarget.style.transform="scale(1) translateY(0)",z.currentTarget.style.boxShadow="0 2px 8px rgba(0,0,0,0.1)",z.currentTarget.style.borderColor="#e5e7eb"},onClick:z=>_(Y,z),children:[v.jsx(I1,{item:Y,width:"100%",height:"140px",showNavigation:!0,style:{marginBottom:"0.5rem",borderRadius:"4px"}}),v.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",justifyContent:"space-between"},children:[v.jsx("h3",{style:{marginBottom:"0.5rem",fontSize:"1.1rem",lineHeight:"1.3",textAlign:"center",color:"#1f2937",fontWeight:"700"},children:Y.name}),Y.publicComment&&v.jsxs("p",{style:{fontSize:"0.8rem",color:"#6b7280",textAlign:"center",margin:"0.3rem 0",fontStyle:"italic",background:"#f9fafb",padding:"0.25rem 0.5rem",borderRadius:"4px"},children:[" ",Y.publicComment]}),v.jsxs("div",{style:{fontSize:"0.75rem",color:"#9ca3af",textAlign:"center",marginTop:"auto",paddingTop:"0.5rem"},children:[": ",Y.ItemId]})]})]},Y.ItemId))}),v.jsx(yW,{currentPage:d,totalItems:S.length,itemsPerPage:x,onPageChange:p}),v.jsx(vW,{item:o,isOpen:c,onClose:C}),v.jsx("style",{jsx:!0,children:`
        @media (max-width: 768px) {
          div[style*="gridTemplateColumns"] {
            grid-template-columns: repeat(2, 1fr) !important;
            gap: 0.8rem !important;
          }
        }
        
        @media (max-width: 480px) {
          div[style*="gridTemplateColumns"] {
            grid-template-columns: repeat(2, 1fr) !important;
            gap: 0.6rem !important;
          }
        }
      `})]})},bW="modulepreload",wW=function(n){return"/"+n},d6={},sy=function(e,t,r){let i=Promise.resolve();if(t&&t.length>0){let o=function(f){return Promise.all(f.map(d=>Promise.resolve(d).then(p=>({status:"fulfilled",value:p}),p=>({status:"rejected",reason:p}))))};document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),c=(s==null?void 0:s.nonce)||(s==null?void 0:s.getAttribute("nonce"));i=o(t.map(f=>{if(f=wW(f),f in d6)return;d6[f]=!0;const d=f.endsWith(".css"),p=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${f}"]${p}`))return;const g=document.createElement("link");if(g.rel=d?"stylesheet":bW,d||(g.as="script"),g.crossOrigin="",g.href=f,c&&g.setAttribute("nonce",c),document.head.appendChild(g),d)return new Promise((m,x)=>{g.addEventListener("load",m),g.addEventListener("error",()=>x(new Error(`Unable to preload CSS for ${f}`)))})}))}function a(o){const s=new Event("vite:preloadError",{cancelable:!0});if(s.payload=o,window.dispatchEvent(s),!s.defaultPrevented)throw o}return i.then(o=>{for(const s of o||[])s.status==="rejected"&&a(s.reason);return e().catch(a)})};function br(n){"@babel/helpers - typeof";return br=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},br(n)}var Ll=Uint8Array,vs=Uint16Array,ub=Int32Array,fb=new Ll([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),db=new Ll([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),h6=new Ll([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),tI=function(n,e){for(var t=new vs(31),r=0;r<31;++r)t[r]=e+=1<<n[r-1];for(var i=new ub(t[30]),r=1;r<30;++r)for(var a=t[r];a<t[r+1];++a)i[a]=a-t[r]<<5|r;return{b:t,r:i}},nI=tI(fb,2),_W=nI.b,Tx=nI.r;_W[28]=258,Tx[258]=28;var AW=tI(db,0),p6=AW.r,Rx=new vs(32768);for(var Gr=0;Gr<32768;++Gr){var Ku=(Gr&43690)>>1|(Gr&21845)<<1;Ku=(Ku&52428)>>2|(Ku&13107)<<2,Ku=(Ku&61680)>>4|(Ku&3855)<<4,Rx[Gr]=((Ku&65280)>>8|(Ku&255)<<8)>>1}var l1=function(n,e,t){for(var r=n.length,i=0,a=new vs(e);i<r;++i)n[i]&&++a[n[i]-1];var o=new vs(e);for(i=1;i<e;++i)o[i]=o[i-1]+a[i-1]<<1;var s;if(t){s=new vs(1<<e);var c=15-e;for(i=0;i<r;++i)if(n[i])for(var f=i<<4|n[i],d=e-n[i],p=o[n[i]-1]++<<d,g=p|(1<<d)-1;p<=g;++p)s[Rx[p]>>c]=f}else for(s=new vs(r),i=0;i<r;++i)n[i]&&(s[i]=Rx[o[n[i]-1]++]>>15-n[i]);return s},vd=new Ll(288);for(var Gr=0;Gr<144;++Gr)vd[Gr]=8;for(var Gr=144;Gr<256;++Gr)vd[Gr]=9;for(var Gr=256;Gr<280;++Gr)vd[Gr]=7;for(var Gr=280;Gr<288;++Gr)vd[Gr]=8;var wm=new Ll(32);for(var Gr=0;Gr<32;++Gr)wm[Gr]=5;var SW=l1(vd,9,0),EW=l1(wm,5,0),rI=function(n){return(n+7)/8|0},CW=function(n,e,t){return(t==null||t>n.length)&&(t=n.length),new Ll(n.subarray(e,t))},zc=function(n,e,t){t<<=e&7;var r=e/8|0;n[r]|=t,n[r+1]|=t>>8},q0=function(n,e,t){t<<=e&7;var r=e/8|0;n[r]|=t,n[r+1]|=t>>8,n[r+2]|=t>>16},ly=function(n,e){for(var t=[],r=0;r<n.length;++r)n[r]&&t.push({s:r,f:n[r]});var i=t.length,a=t.slice();if(!i)return{t:aI,l:0};if(i==1){var o=new Ll(t[0].s+1);return o[t[0].s]=1,{t:o,l:1}}t.sort(function(Y,z){return Y.f-z.f}),t.push({s:-1,f:25001});var s=t[0],c=t[1],f=0,d=1,p=2;for(t[0]={s:-1,f:s.f+c.f,l:s,r:c};d!=i-1;)s=t[t[f].f<t[p].f?f++:p++],c=t[f!=d&&t[f].f<t[p].f?f++:p++],t[d++]={s:-1,f:s.f+c.f,l:s,r:c};for(var g=a[0].s,r=1;r<i;++r)a[r].s>g&&(g=a[r].s);var m=new vs(g+1),x=Nx(t[d-1],m,0);if(x>e){var r=0,_=0,C=x-e,S=1<<C;for(a.sort(function(z,F){return m[F.s]-m[z.s]||z.f-F.f});r<i;++r){var k=a[r].s;if(m[k]>e)_+=S-(1<<x-m[k]),m[k]=e;else break}for(_>>=C;_>0;){var M=a[r].s;m[M]<e?_-=1<<e-m[M]++-1:++r}for(;r>=0&&_;--r){var P=a[r].s;m[P]==e&&(--m[P],++_)}x=e}return{t:new Ll(m),l:x}},Nx=function(n,e,t){return n.s==-1?Math.max(Nx(n.l,e,t+1),Nx(n.r,e,t+1)):e[n.s]=t},g6=function(n){for(var e=n.length;e&&!n[--e];);for(var t=new vs(++e),r=0,i=n[0],a=1,o=function(c){t[r++]=c},s=1;s<=e;++s)if(n[s]==i&&s!=e)++a;else{if(!i&&a>2){for(;a>138;a-=138)o(32754);a>2&&(o(a>10?a-11<<5|28690:a-3<<5|12305),a=0)}else if(a>3){for(o(i),--a;a>6;a-=6)o(8304);a>2&&(o(a-3<<5|8208),a=0)}for(;a--;)o(i);a=1,i=n[s]}return{c:t.subarray(0,r),n:e}},H0=function(n,e){for(var t=0,r=0;r<e.length;++r)t+=n[r]*e[r];return t},iI=function(n,e,t){var r=t.length,i=rI(e+2);n[i]=r&255,n[i+1]=r>>8,n[i+2]=n[i]^255,n[i+3]=n[i+1]^255;for(var a=0;a<r;++a)n[i+a+4]=t[a];return(i+4+r)*8},m6=function(n,e,t,r,i,a,o,s,c,f,d){zc(e,d++,t),++i[256];for(var p=ly(i,15),g=p.t,m=p.l,x=ly(a,15),_=x.t,C=x.l,S=g6(g),k=S.c,M=S.n,P=g6(_),Y=P.c,z=P.n,F=new vs(19),I=0;I<k.length;++I)++F[k[I]&31];for(var I=0;I<Y.length;++I)++F[Y[I]&31];for(var T=ly(F,7),j=T.t,N=T.l,R=19;R>4&&!j[h6[R-1]];--R);var D=f+5<<3,L=H0(i,vd)+H0(a,wm)+o,G=H0(i,g)+H0(a,_)+o+14+3*R+H0(F,j)+2*F[16]+3*F[17]+7*F[18];if(c>=0&&D<=L&&D<=G)return iI(e,d,n.subarray(c,c+f));var U,H,te,se;if(zc(e,d,1+(G<L)),d+=2,G<L){U=l1(g,m,0),H=g,te=l1(_,C,0),se=_;var ee=l1(j,N,0);zc(e,d,M-257),zc(e,d+5,z-1),zc(e,d+10,R-4),d+=14;for(var I=0;I<R;++I)zc(e,d+3*I,j[h6[I]]);d+=3*R;for(var ie=[k,Y],$=0;$<2;++$)for(var W=ie[$],I=0;I<W.length;++I){var Q=W[I]&31;zc(e,d,ee[Q]),d+=j[Q],Q>15&&(zc(e,d,W[I]>>5&127),d+=W[I]>>12)}}else U=SW,H=vd,te=EW,se=wm;for(var I=0;I<s;++I){var J=r[I];if(J>255){var Q=J>>18&31;q0(e,d,U[Q+257]),d+=H[Q+257],Q>7&&(zc(e,d,J>>23&31),d+=fb[Q]);var he=J&31;q0(e,d,te[he]),d+=se[he],he>3&&(q0(e,d,J>>5&8191),d+=db[he])}else q0(e,d,U[J]),d+=H[J]}return q0(e,d,U[256]),d+H[256]},IW=new ub([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),aI=new Ll(0),TW=function(n,e,t,r,i,a){var o=a.z||n.length,s=new Ll(r+o+5*(1+Math.ceil(o/7e3))+i),c=s.subarray(r,s.length-i),f=a.l,d=(a.r||0)&7;if(e){d&&(c[0]=a.r>>3);for(var p=IW[e-1],g=p>>13,m=p&8191,x=(1<<t)-1,_=a.p||new vs(32768),C=a.h||new vs(x+1),S=Math.ceil(t/3),k=2*S,M=function(ft){return(n[ft]^n[ft+1]<<S^n[ft+2]<<k)&x},P=new ub(25e3),Y=new vs(288),z=new vs(32),F=0,I=0,T=a.i||0,j=0,N=a.w||0,R=0;T+2<o;++T){var D=M(T),L=T&32767,G=C[D];if(_[L]=G,C[D]=L,N<=T){var U=o-T;if((F>7e3||j>24576)&&(U>423||!f)){d=m6(n,c,0,P,Y,z,I,j,R,T-R,d),j=F=I=0,R=T;for(var H=0;H<286;++H)Y[H]=0;for(var H=0;H<30;++H)z[H]=0}var te=2,se=0,ee=m,ie=L-G&32767;if(U>2&&D==M(T-ie))for(var $=Math.min(g,U)-1,W=Math.min(32767,T),Q=Math.min(258,U);ie<=W&&--ee&&L!=G;){if(n[T+te]==n[T+te-ie]){for(var J=0;J<Q&&n[T+J]==n[T+J-ie];++J);if(J>te){if(te=J,se=ie,J>$)break;for(var he=Math.min(ie,J-2),be=0,H=0;H<he;++H){var _e=T-ie+H&32767,Ie=_[_e],Oe=_e-Ie&32767;Oe>be&&(be=Oe,G=_e)}}}L=G,G=_[L],ie+=L-G&32767}if(se){P[j++]=268435456|Tx[te]<<18|p6[se];var Ve=Tx[te]&31,nt=p6[se]&31;I+=fb[Ve]+db[nt],++Y[257+Ve],++z[nt],N=T+te,++F}else P[j++]=n[T],++Y[n[T]]}}for(T=Math.max(T,N);T<o;++T)P[j++]=n[T],++Y[n[T]];d=m6(n,c,f,P,Y,z,I,j,R,T-R,d),f||(a.r=d&7|c[d/8|0]<<3,d-=7,a.h=C,a.p=_,a.i=T,a.w=N)}else{for(var T=a.w||0;T<o+f;T+=65535){var ot=T+65535;ot>=o&&(c[d/8|0]=f,ot=o),d=iI(c,d+1,n.subarray(T,ot))}a.i=o}return CW(s,0,r+rI(d)+i)},oI=function(){var n=1,e=0;return{p:function(t){for(var r=n,i=e,a=t.length|0,o=0;o!=a;){for(var s=Math.min(o+2655,a);o<s;++o)i+=r+=t[o];r=(r&65535)+15*(r>>16),i=(i&65535)+15*(i>>16)}n=r,e=i},d:function(){return n%=65521,e%=65521,(n&255)<<24|(n&65280)<<8|(e&255)<<8|e>>8}}},RW=function(n,e,t,r,i){if(!i&&(i={l:1},e.dictionary)){var a=e.dictionary.subarray(-32768),o=new Ll(a.length+n.length);o.set(a),o.set(n,a.length),n=o,i.w=a.length}return TW(n,e.level==null?6:e.level,e.mem==null?i.l?Math.ceil(Math.max(8,Math.min(13,Math.log(n.length)))*1.5):20:12+e.mem,t,r,i)},sI=function(n,e,t){for(;t;++e)n[e]=t,t>>>=8},NW=function(n,e){var t=e.level,r=t==0?0:t<6?1:t==9?3:2;if(n[0]=120,n[1]=r<<6|(e.dictionary&&32),n[1]|=31-(n[0]<<8|n[1])%31,e.dictionary){var i=oI();i.p(e.dictionary),sI(n,2,i.d())}};function Dx(n,e){e||(e={});var t=oI();t.p(n);var r=RW(n,e,e.dictionary?6:2,4);return NW(r,e),sI(r,r.length-4,t.d()),r}var DW=typeof TextDecoder<"u"&&new TextDecoder,OW=0;try{DW.decode(aI,{stream:!0}),OW=1}catch{}function kW(n){if(Array.isArray(n))return n}function LW(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,i,a,o,s=[],c=!0,f=!1;try{if(a=(t=t.call(n)).next,e!==0)for(;!(c=(r=a.call(t)).done)&&(s.push(r.value),s.length!==e);c=!0);}catch(d){f=!0,i=d}finally{try{if(!c&&t.return!=null&&(o=t.return(),Object(o)!==o))return}finally{if(f)throw i}}return s}}function v6(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=Array(e);t<e;t++)r[t]=n[t];return r}function PW(n,e){if(n){if(typeof n=="string")return v6(n,e);var t={}.toString.call(n).slice(8,-1);return t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set"?Array.from(n):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?v6(n,e):void 0}}function MW(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function y6(n,e){return kW(n)||LW(n,e)||PW(n,e)||MW()}function x6(n,e="utf8"){return new TextDecoder(e).decode(n)}const jW=new TextEncoder;function BW(n){return jW.encode(n)}const FW=1024*8,UW=(()=>{const n=new Uint8Array(4),e=new Uint32Array(n.buffer);return!((e[0]=1)&n[0])})(),cy={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class hb{constructor(e=FW,t={}){vr(this,"buffer");vr(this,"byteLength");vr(this,"byteOffset");vr(this,"length");vr(this,"offset");vr(this,"lastWrittenByte");vr(this,"littleEndian");vr(this,"_data");vr(this,"_mark");vr(this,"_marks");let r=!1;typeof e=="number"?e=new ArrayBuffer(e):(r=!0,this.lastWrittenByte=e.byteLength);const i=t.offset?t.offset>>>0:0,a=e.byteLength-i;let o=i;(ArrayBuffer.isView(e)||e instanceof hb)&&(e.byteLength!==e.buffer.byteLength&&(o=e.byteOffset+i),e=e.buffer),r?this.lastWrittenByte=a:this.lastWrittenByte=0,this.buffer=e,this.length=a,this.byteLength=a,this.byteOffset=o,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,o,a),this._mark=0,this._marks=[]}available(e=1){return this.offset+e<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(e=1){return this.offset+=e,this}back(e=1){return this.offset-=e,this}seek(e){return this.offset=e,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const e=this._marks.pop();if(e===void 0)throw new Error("Mark stack empty");return this.seek(e),this}rewind(){return this.offset=0,this}ensureAvailable(e=1){if(!this.available(e)){const r=(this.offset+e)*2,i=new Uint8Array(r);i.set(new Uint8Array(this.buffer)),this.buffer=i.buffer,this.length=r,this.byteLength=r,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(e=1){return this.readArray(e,"uint8")}readArray(e,t){const r=cy[t].BYTES_PER_ELEMENT*e,i=this.byteOffset+this.offset,a=this.buffer.slice(i,i+r);if(this.littleEndian===UW&&t!=="uint8"&&t!=="int8"){const s=new Uint8Array(this.buffer.slice(i,i+r));s.reverse();const c=new cy[t](s.buffer);return this.offset+=r,c.reverse(),c}const o=new cy[t](a);return this.offset+=r,o}readInt16(){const e=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}readUint16(){const e=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,e}readInt32(){const e=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}readUint32(){const e=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat32(){const e=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat64(){const e=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}readBigInt64(){const e=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,e}readBigUint64(){const e=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,e}readChar(){return String.fromCharCode(this.readInt8())}readChars(e=1){let t="";for(let r=0;r<e;r++)t+=this.readChar();return t}readUtf8(e=1){return x6(this.readBytes(e))}decodeText(e=1,t="utf8"){return x6(this.readBytes(e),t)}writeBoolean(e){return this.writeUint8(e?255:0),this}writeInt8(e){return this.ensureAvailable(1),this._data.setInt8(this.offset++,e),this._updateLastWrittenByte(),this}writeUint8(e){return this.ensureAvailable(1),this._data.setUint8(this.offset++,e),this._updateLastWrittenByte(),this}writeByte(e){return this.writeUint8(e)}writeBytes(e){this.ensureAvailable(e.length);for(let t=0;t<e.length;t++)this._data.setUint8(this.offset++,e[t]);return this._updateLastWrittenByte(),this}writeInt16(e){return this.ensureAvailable(2),this._data.setInt16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(e){return this.ensureAvailable(2),this._data.setUint16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(e){return this.ensureAvailable(4),this._data.setInt32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(e){return this.ensureAvailable(4),this._data.setUint32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(e){return this.ensureAvailable(4),this._data.setFloat32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(e){return this.ensureAvailable(8),this._data.setFloat64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(e){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(e){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(e){return this.writeUint8(e.charCodeAt(0))}writeChars(e){for(let t=0;t<e.length;t++)this.writeUint8(e.charCodeAt(t));return this}writeUtf8(e){return this.writeBytes(BW(e))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function Yh(n){let e=n.length;for(;--e>=0;)n[e]=0}const zW=3,VW=258,lI=29,qW=256,HW=qW+1+lI,cI=30,WW=512,$W=new Array((HW+2)*2);Yh($W);const GW=new Array(cI*2);Yh(GW);const YW=new Array(WW);Yh(YW);const XW=new Array(VW-zW+1);Yh(XW);const KW=new Array(lI);Yh(KW);const QW=new Array(cI);Yh(QW);const ZW=(n,e,t,r)=>{let i=n&65535|0,a=n>>>16&65535|0,o=0;for(;t!==0;){o=t>2e3?2e3:t,t-=o;do i=i+e[r++]|0,a=a+i|0;while(--o);i%=65521,a%=65521}return i|a<<16|0};var Ox=ZW;const JW=()=>{let n,e=[];for(var t=0;t<256;t++){n=t;for(var r=0;r<8;r++)n=n&1?3988292384^n>>>1:n>>>1;e[t]=n}return e},e$=new Uint32Array(JW()),t$=(n,e,t,r)=>{const i=e$,a=r+t;n^=-1;for(let o=r;o<a;o++)n=n>>>8^i[(n^e[o])&255];return n^-1};var Kl=t$,kx={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},uI={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const n$=(n,e)=>Object.prototype.hasOwnProperty.call(n,e);var r$=function(n){const e=Array.prototype.slice.call(arguments,1);for(;e.length;){const t=e.shift();if(t){if(typeof t!="object")throw new TypeError(t+"must be non-object");for(const r in t)n$(t,r)&&(n[r]=t[r])}}return n},i$=n=>{let e=0;for(let r=0,i=n.length;r<i;r++)e+=n[r].length;const t=new Uint8Array(e);for(let r=0,i=0,a=n.length;r<a;r++){let o=n[r];t.set(o,i),i+=o.length}return t},fI={assign:r$,flattenChunks:i$};let dI=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{dI=!1}const T1=new Uint8Array(256);for(let n=0;n<256;n++)T1[n]=n>=252?6:n>=248?5:n>=240?4:n>=224?3:n>=192?2:1;T1[254]=T1[254]=1;var a$=n=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(n);let e,t,r,i,a,o=n.length,s=0;for(i=0;i<o;i++)t=n.charCodeAt(i),(t&64512)===55296&&i+1<o&&(r=n.charCodeAt(i+1),(r&64512)===56320&&(t=65536+(t-55296<<10)+(r-56320),i++)),s+=t<128?1:t<2048?2:t<65536?3:4;for(e=new Uint8Array(s),a=0,i=0;a<s;i++)t=n.charCodeAt(i),(t&64512)===55296&&i+1<o&&(r=n.charCodeAt(i+1),(r&64512)===56320&&(t=65536+(t-55296<<10)+(r-56320),i++)),t<128?e[a++]=t:t<2048?(e[a++]=192|t>>>6,e[a++]=128|t&63):t<65536?(e[a++]=224|t>>>12,e[a++]=128|t>>>6&63,e[a++]=128|t&63):(e[a++]=240|t>>>18,e[a++]=128|t>>>12&63,e[a++]=128|t>>>6&63,e[a++]=128|t&63);return e};const o$=(n,e)=>{if(e<65534&&n.subarray&&dI)return String.fromCharCode.apply(null,n.length===e?n:n.subarray(0,e));let t="";for(let r=0;r<e;r++)t+=String.fromCharCode(n[r]);return t};var s$=(n,e)=>{const t=e||n.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(n.subarray(0,e));let r,i;const a=new Array(t*2);for(i=0,r=0;r<t;){let o=n[r++];if(o<128){a[i++]=o;continue}let s=T1[o];if(s>4){a[i++]=65533,r+=s-1;continue}for(o&=s===2?31:s===3?15:7;s>1&&r<t;)o=o<<6|n[r++]&63,s--;if(s>1){a[i++]=65533;continue}o<65536?a[i++]=o:(o-=65536,a[i++]=55296|o>>10&1023,a[i++]=56320|o&1023)}return o$(a,i)},l$=(n,e)=>{e=e||n.length,e>n.length&&(e=n.length);let t=e-1;for(;t>=0&&(n[t]&192)===128;)t--;return t<0||t===0?e:t+T1[n[t]]>e?t:e},Lx={string2buf:a$,buf2string:s$,utf8border:l$};function c$(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var u$=c$;const ug=16209,f$=16191;var d$=function(e,t){let r,i,a,o,s,c,f,d,p,g,m,x,_,C,S,k,M,P,Y,z,F,I,T,j;const N=e.state;r=e.next_in,T=e.input,i=r+(e.avail_in-5),a=e.next_out,j=e.output,o=a-(t-e.avail_out),s=a+(e.avail_out-257),c=N.dmax,f=N.wsize,d=N.whave,p=N.wnext,g=N.window,m=N.hold,x=N.bits,_=N.lencode,C=N.distcode,S=(1<<N.lenbits)-1,k=(1<<N.distbits)-1;e:do{x<15&&(m+=T[r++]<<x,x+=8,m+=T[r++]<<x,x+=8),M=_[m&S];t:for(;;){if(P=M>>>24,m>>>=P,x-=P,P=M>>>16&255,P===0)j[a++]=M&65535;else if(P&16){Y=M&65535,P&=15,P&&(x<P&&(m+=T[r++]<<x,x+=8),Y+=m&(1<<P)-1,m>>>=P,x-=P),x<15&&(m+=T[r++]<<x,x+=8,m+=T[r++]<<x,x+=8),M=C[m&k];n:for(;;){if(P=M>>>24,m>>>=P,x-=P,P=M>>>16&255,P&16){if(z=M&65535,P&=15,x<P&&(m+=T[r++]<<x,x+=8,x<P&&(m+=T[r++]<<x,x+=8)),z+=m&(1<<P)-1,z>c){e.msg="invalid distance too far back",N.mode=ug;break e}if(m>>>=P,x-=P,P=a-o,z>P){if(P=z-P,P>d&&N.sane){e.msg="invalid distance too far back",N.mode=ug;break e}if(F=0,I=g,p===0){if(F+=f-P,P<Y){Y-=P;do j[a++]=g[F++];while(--P);F=a-z,I=j}}else if(p<P){if(F+=f+p-P,P-=p,P<Y){Y-=P;do j[a++]=g[F++];while(--P);if(F=0,p<Y){P=p,Y-=P;do j[a++]=g[F++];while(--P);F=a-z,I=j}}}else if(F+=p-P,P<Y){Y-=P;do j[a++]=g[F++];while(--P);F=a-z,I=j}for(;Y>2;)j[a++]=I[F++],j[a++]=I[F++],j[a++]=I[F++],Y-=3;Y&&(j[a++]=I[F++],Y>1&&(j[a++]=I[F++]))}else{F=a-z;do j[a++]=j[F++],j[a++]=j[F++],j[a++]=j[F++],Y-=3;while(Y>2);Y&&(j[a++]=j[F++],Y>1&&(j[a++]=j[F++]))}}else if((P&64)===0){M=C[(M&65535)+(m&(1<<P)-1)];continue n}else{e.msg="invalid distance code",N.mode=ug;break e}break}}else if((P&64)===0){M=_[(M&65535)+(m&(1<<P)-1)];continue t}else if(P&32){N.mode=f$;break e}else{e.msg="invalid literal/length code",N.mode=ug;break e}break}}while(r<i&&a<s);Y=x>>3,r-=Y,x-=Y<<3,m&=(1<<x)-1,e.next_in=r,e.next_out=a,e.avail_in=r<i?5+(i-r):5-(r-i),e.avail_out=a<s?257+(s-a):257-(a-s),N.hold=m,N.bits=x};const ah=15,b6=852,w6=592,_6=0,uy=1,A6=2,h$=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),p$=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),g$=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),m$=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),v$=(n,e,t,r,i,a,o,s)=>{const c=s.bits;let f=0,d=0,p=0,g=0,m=0,x=0,_=0,C=0,S=0,k=0,M,P,Y,z,F,I=null,T;const j=new Uint16Array(ah+1),N=new Uint16Array(ah+1);let R=null,D,L,G;for(f=0;f<=ah;f++)j[f]=0;for(d=0;d<r;d++)j[e[t+d]]++;for(m=c,g=ah;g>=1&&j[g]===0;g--);if(m>g&&(m=g),g===0)return i[a++]=1<<24|64<<16|0,i[a++]=1<<24|64<<16|0,s.bits=1,0;for(p=1;p<g&&j[p]===0;p++);for(m<p&&(m=p),C=1,f=1;f<=ah;f++)if(C<<=1,C-=j[f],C<0)return-1;if(C>0&&(n===_6||g!==1))return-1;for(N[1]=0,f=1;f<ah;f++)N[f+1]=N[f]+j[f];for(d=0;d<r;d++)e[t+d]!==0&&(o[N[e[t+d]]++]=d);if(n===_6?(I=R=o,T=20):n===uy?(I=h$,R=p$,T=257):(I=g$,R=m$,T=0),k=0,d=0,f=p,F=a,x=m,_=0,Y=-1,S=1<<m,z=S-1,n===uy&&S>b6||n===A6&&S>w6)return 1;for(;;){D=f-_,o[d]+1<T?(L=0,G=o[d]):o[d]>=T?(L=R[o[d]-T],G=I[o[d]-T]):(L=96,G=0),M=1<<f-_,P=1<<x,p=P;do P-=M,i[F+(k>>_)+P]=D<<24|L<<16|G|0;while(P!==0);for(M=1<<f-1;k&M;)M>>=1;if(M!==0?(k&=M-1,k+=M):k=0,d++,--j[f]===0){if(f===g)break;f=e[t+o[d]]}if(f>m&&(k&z)!==Y){for(_===0&&(_=m),F+=p,x=f-_,C=1<<x;x+_<g&&(C-=j[x+_],!(C<=0));)x++,C<<=1;if(S+=1<<x,n===uy&&S>b6||n===A6&&S>w6)return 1;Y=k&z,i[Y]=m<<24|x<<16|F-a|0}}return k!==0&&(i[F+k]=f-_<<24|64<<16|0),s.bits=m,0};var c1=v$;const y$=0,hI=1,pI=2,{Z_FINISH:S6,Z_BLOCK:x$,Z_TREES:fg,Z_OK:yd,Z_STREAM_END:b$,Z_NEED_DICT:w$,Z_STREAM_ERROR:Ks,Z_DATA_ERROR:gI,Z_MEM_ERROR:mI,Z_BUF_ERROR:_$,Z_DEFLATED:E6}=uI,v2=16180,C6=16181,I6=16182,T6=16183,R6=16184,N6=16185,D6=16186,O6=16187,k6=16188,L6=16189,_m=16190,Vc=16191,fy=16192,P6=16193,dy=16194,M6=16195,j6=16196,B6=16197,F6=16198,dg=16199,hg=16200,U6=16201,z6=16202,V6=16203,q6=16204,H6=16205,hy=16206,W6=16207,$6=16208,ii=16209,vI=16210,yI=16211,A$=852,S$=592,E$=15,C$=E$,G6=n=>(n>>>24&255)+(n>>>8&65280)+((n&65280)<<8)+((n&255)<<24);function I$(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const Ad=n=>{if(!n)return 1;const e=n.state;return!e||e.strm!==n||e.mode<v2||e.mode>yI?1:0},xI=n=>{if(Ad(n))return Ks;const e=n.state;return n.total_in=n.total_out=e.total=0,n.msg="",e.wrap&&(n.adler=e.wrap&1),e.mode=v2,e.last=0,e.havedict=0,e.flags=-1,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(A$),e.distcode=e.distdyn=new Int32Array(S$),e.sane=1,e.back=-1,yd},bI=n=>{if(Ad(n))return Ks;const e=n.state;return e.wsize=0,e.whave=0,e.wnext=0,xI(n)},wI=(n,e)=>{let t;if(Ad(n))return Ks;const r=n.state;return e<0?(t=0,e=-e):(t=(e>>4)+5,e<48&&(e&=15)),e&&(e<8||e>15)?Ks:(r.window!==null&&r.wbits!==e&&(r.window=null),r.wrap=t,r.wbits=e,bI(n))},_I=(n,e)=>{if(!n)return Ks;const t=new I$;n.state=t,t.strm=n,t.window=null,t.mode=v2;const r=wI(n,e);return r!==yd&&(n.state=null),r},T$=n=>_I(n,C$);let Y6=!0,py,gy;const R$=n=>{if(Y6){py=new Int32Array(512),gy=new Int32Array(32);let e=0;for(;e<144;)n.lens[e++]=8;for(;e<256;)n.lens[e++]=9;for(;e<280;)n.lens[e++]=7;for(;e<288;)n.lens[e++]=8;for(c1(hI,n.lens,0,288,py,0,n.work,{bits:9}),e=0;e<32;)n.lens[e++]=5;c1(pI,n.lens,0,32,gy,0,n.work,{bits:5}),Y6=!1}n.lencode=py,n.lenbits=9,n.distcode=gy,n.distbits=5},AI=(n,e,t,r)=>{let i;const a=n.state;return a.window===null&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new Uint8Array(a.wsize)),r>=a.wsize?(a.window.set(e.subarray(t-a.wsize,t),0),a.wnext=0,a.whave=a.wsize):(i=a.wsize-a.wnext,i>r&&(i=r),a.window.set(e.subarray(t-r,t-r+i),a.wnext),r-=i,r?(a.window.set(e.subarray(t-r,t),0),a.wnext=r,a.whave=a.wsize):(a.wnext+=i,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=i))),0},N$=(n,e)=>{let t,r,i,a,o,s,c,f,d,p,g,m,x,_,C=0,S,k,M,P,Y,z,F,I;const T=new Uint8Array(4);let j,N;const R=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(Ad(n)||!n.output||!n.input&&n.avail_in!==0)return Ks;t=n.state,t.mode===Vc&&(t.mode=fy),o=n.next_out,i=n.output,c=n.avail_out,a=n.next_in,r=n.input,s=n.avail_in,f=t.hold,d=t.bits,p=s,g=c,I=yd;e:for(;;)switch(t.mode){case v2:if(t.wrap===0){t.mode=fy;break}for(;d<16;){if(s===0)break e;s--,f+=r[a++]<<d,d+=8}if(t.wrap&2&&f===35615){t.wbits===0&&(t.wbits=15),t.check=0,T[0]=f&255,T[1]=f>>>8&255,t.check=Kl(t.check,T,2,0),f=0,d=0,t.mode=C6;break}if(t.head&&(t.head.done=!1),!(t.wrap&1)||(((f&255)<<8)+(f>>8))%31){n.msg="incorrect header check",t.mode=ii;break}if((f&15)!==E6){n.msg="unknown compression method",t.mode=ii;break}if(f>>>=4,d-=4,F=(f&15)+8,t.wbits===0&&(t.wbits=F),F>15||F>t.wbits){n.msg="invalid window size",t.mode=ii;break}t.dmax=1<<t.wbits,t.flags=0,n.adler=t.check=1,t.mode=f&512?L6:Vc,f=0,d=0;break;case C6:for(;d<16;){if(s===0)break e;s--,f+=r[a++]<<d,d+=8}if(t.flags=f,(t.flags&255)!==E6){n.msg="unknown compression method",t.mode=ii;break}if(t.flags&57344){n.msg="unknown header flags set",t.mode=ii;break}t.head&&(t.head.text=f>>8&1),t.flags&512&&t.wrap&4&&(T[0]=f&255,T[1]=f>>>8&255,t.check=Kl(t.check,T,2,0)),f=0,d=0,t.mode=I6;case I6:for(;d<32;){if(s===0)break e;s--,f+=r[a++]<<d,d+=8}t.head&&(t.head.time=f),t.flags&512&&t.wrap&4&&(T[0]=f&255,T[1]=f>>>8&255,T[2]=f>>>16&255,T[3]=f>>>24&255,t.check=Kl(t.check,T,4,0)),f=0,d=0,t.mode=T6;case T6:for(;d<16;){if(s===0)break e;s--,f+=r[a++]<<d,d+=8}t.head&&(t.head.xflags=f&255,t.head.os=f>>8),t.flags&512&&t.wrap&4&&(T[0]=f&255,T[1]=f>>>8&255,t.check=Kl(t.check,T,2,0)),f=0,d=0,t.mode=R6;case R6:if(t.flags&1024){for(;d<16;){if(s===0)break e;s--,f+=r[a++]<<d,d+=8}t.length=f,t.head&&(t.head.extra_len=f),t.flags&512&&t.wrap&4&&(T[0]=f&255,T[1]=f>>>8&255,t.check=Kl(t.check,T,2,0)),f=0,d=0}else t.head&&(t.head.extra=null);t.mode=N6;case N6:if(t.flags&1024&&(m=t.length,m>s&&(m=s),m&&(t.head&&(F=t.head.extra_len-t.length,t.head.extra||(t.head.extra=new Uint8Array(t.head.extra_len)),t.head.extra.set(r.subarray(a,a+m),F)),t.flags&512&&t.wrap&4&&(t.check=Kl(t.check,r,m,a)),s-=m,a+=m,t.length-=m),t.length))break e;t.length=0,t.mode=D6;case D6:if(t.flags&2048){if(s===0)break e;m=0;do F=r[a+m++],t.head&&F&&t.length<65536&&(t.head.name+=String.fromCharCode(F));while(F&&m<s);if(t.flags&512&&t.wrap&4&&(t.check=Kl(t.check,r,m,a)),s-=m,a+=m,F)break e}else t.head&&(t.head.name=null);t.length=0,t.mode=O6;case O6:if(t.flags&4096){if(s===0)break e;m=0;do F=r[a+m++],t.head&&F&&t.length<65536&&(t.head.comment+=String.fromCharCode(F));while(F&&m<s);if(t.flags&512&&t.wrap&4&&(t.check=Kl(t.check,r,m,a)),s-=m,a+=m,F)break e}else t.head&&(t.head.comment=null);t.mode=k6;case k6:if(t.flags&512){for(;d<16;){if(s===0)break e;s--,f+=r[a++]<<d,d+=8}if(t.wrap&4&&f!==(t.check&65535)){n.msg="header crc mismatch",t.mode=ii;break}f=0,d=0}t.head&&(t.head.hcrc=t.flags>>9&1,t.head.done=!0),n.adler=t.check=0,t.mode=Vc;break;case L6:for(;d<32;){if(s===0)break e;s--,f+=r[a++]<<d,d+=8}n.adler=t.check=G6(f),f=0,d=0,t.mode=_m;case _m:if(t.havedict===0)return n.next_out=o,n.avail_out=c,n.next_in=a,n.avail_in=s,t.hold=f,t.bits=d,w$;n.adler=t.check=1,t.mode=Vc;case Vc:if(e===x$||e===fg)break e;case fy:if(t.last){f>>>=d&7,d-=d&7,t.mode=hy;break}for(;d<3;){if(s===0)break e;s--,f+=r[a++]<<d,d+=8}switch(t.last=f&1,f>>>=1,d-=1,f&3){case 0:t.mode=P6;break;case 1:if(R$(t),t.mode=dg,e===fg){f>>>=2,d-=2;break e}break;case 2:t.mode=j6;break;case 3:n.msg="invalid block type",t.mode=ii}f>>>=2,d-=2;break;case P6:for(f>>>=d&7,d-=d&7;d<32;){if(s===0)break e;s--,f+=r[a++]<<d,d+=8}if((f&65535)!==(f>>>16^65535)){n.msg="invalid stored block lengths",t.mode=ii;break}if(t.length=f&65535,f=0,d=0,t.mode=dy,e===fg)break e;case dy:t.mode=M6;case M6:if(m=t.length,m){if(m>s&&(m=s),m>c&&(m=c),m===0)break e;i.set(r.subarray(a,a+m),o),s-=m,a+=m,c-=m,o+=m,t.length-=m;break}t.mode=Vc;break;case j6:for(;d<14;){if(s===0)break e;s--,f+=r[a++]<<d,d+=8}if(t.nlen=(f&31)+257,f>>>=5,d-=5,t.ndist=(f&31)+1,f>>>=5,d-=5,t.ncode=(f&15)+4,f>>>=4,d-=4,t.nlen>286||t.ndist>30){n.msg="too many length or distance symbols",t.mode=ii;break}t.have=0,t.mode=B6;case B6:for(;t.have<t.ncode;){for(;d<3;){if(s===0)break e;s--,f+=r[a++]<<d,d+=8}t.lens[R[t.have++]]=f&7,f>>>=3,d-=3}for(;t.have<19;)t.lens[R[t.have++]]=0;if(t.lencode=t.lendyn,t.lenbits=7,j={bits:t.lenbits},I=c1(y$,t.lens,0,19,t.lencode,0,t.work,j),t.lenbits=j.bits,I){n.msg="invalid code lengths set",t.mode=ii;break}t.have=0,t.mode=F6;case F6:for(;t.have<t.nlen+t.ndist;){for(;C=t.lencode[f&(1<<t.lenbits)-1],S=C>>>24,k=C>>>16&255,M=C&65535,!(S<=d);){if(s===0)break e;s--,f+=r[a++]<<d,d+=8}if(M<16)f>>>=S,d-=S,t.lens[t.have++]=M;else{if(M===16){for(N=S+2;d<N;){if(s===0)break e;s--,f+=r[a++]<<d,d+=8}if(f>>>=S,d-=S,t.have===0){n.msg="invalid bit length repeat",t.mode=ii;break}F=t.lens[t.have-1],m=3+(f&3),f>>>=2,d-=2}else if(M===17){for(N=S+3;d<N;){if(s===0)break e;s--,f+=r[a++]<<d,d+=8}f>>>=S,d-=S,F=0,m=3+(f&7),f>>>=3,d-=3}else{for(N=S+7;d<N;){if(s===0)break e;s--,f+=r[a++]<<d,d+=8}f>>>=S,d-=S,F=0,m=11+(f&127),f>>>=7,d-=7}if(t.have+m>t.nlen+t.ndist){n.msg="invalid bit length repeat",t.mode=ii;break}for(;m--;)t.lens[t.have++]=F}}if(t.mode===ii)break;if(t.lens[256]===0){n.msg="invalid code -- missing end-of-block",t.mode=ii;break}if(t.lenbits=9,j={bits:t.lenbits},I=c1(hI,t.lens,0,t.nlen,t.lencode,0,t.work,j),t.lenbits=j.bits,I){n.msg="invalid literal/lengths set",t.mode=ii;break}if(t.distbits=6,t.distcode=t.distdyn,j={bits:t.distbits},I=c1(pI,t.lens,t.nlen,t.ndist,t.distcode,0,t.work,j),t.distbits=j.bits,I){n.msg="invalid distances set",t.mode=ii;break}if(t.mode=dg,e===fg)break e;case dg:t.mode=hg;case hg:if(s>=6&&c>=258){n.next_out=o,n.avail_out=c,n.next_in=a,n.avail_in=s,t.hold=f,t.bits=d,d$(n,g),o=n.next_out,i=n.output,c=n.avail_out,a=n.next_in,r=n.input,s=n.avail_in,f=t.hold,d=t.bits,t.mode===Vc&&(t.back=-1);break}for(t.back=0;C=t.lencode[f&(1<<t.lenbits)-1],S=C>>>24,k=C>>>16&255,M=C&65535,!(S<=d);){if(s===0)break e;s--,f+=r[a++]<<d,d+=8}if(k&&(k&240)===0){for(P=S,Y=k,z=M;C=t.lencode[z+((f&(1<<P+Y)-1)>>P)],S=C>>>24,k=C>>>16&255,M=C&65535,!(P+S<=d);){if(s===0)break e;s--,f+=r[a++]<<d,d+=8}f>>>=P,d-=P,t.back+=P}if(f>>>=S,d-=S,t.back+=S,t.length=M,k===0){t.mode=H6;break}if(k&32){t.back=-1,t.mode=Vc;break}if(k&64){n.msg="invalid literal/length code",t.mode=ii;break}t.extra=k&15,t.mode=U6;case U6:if(t.extra){for(N=t.extra;d<N;){if(s===0)break e;s--,f+=r[a++]<<d,d+=8}t.length+=f&(1<<t.extra)-1,f>>>=t.extra,d-=t.extra,t.back+=t.extra}t.was=t.length,t.mode=z6;case z6:for(;C=t.distcode[f&(1<<t.distbits)-1],S=C>>>24,k=C>>>16&255,M=C&65535,!(S<=d);){if(s===0)break e;s--,f+=r[a++]<<d,d+=8}if((k&240)===0){for(P=S,Y=k,z=M;C=t.distcode[z+((f&(1<<P+Y)-1)>>P)],S=C>>>24,k=C>>>16&255,M=C&65535,!(P+S<=d);){if(s===0)break e;s--,f+=r[a++]<<d,d+=8}f>>>=P,d-=P,t.back+=P}if(f>>>=S,d-=S,t.back+=S,k&64){n.msg="invalid distance code",t.mode=ii;break}t.offset=M,t.extra=k&15,t.mode=V6;case V6:if(t.extra){for(N=t.extra;d<N;){if(s===0)break e;s--,f+=r[a++]<<d,d+=8}t.offset+=f&(1<<t.extra)-1,f>>>=t.extra,d-=t.extra,t.back+=t.extra}if(t.offset>t.dmax){n.msg="invalid distance too far back",t.mode=ii;break}t.mode=q6;case q6:if(c===0)break e;if(m=g-c,t.offset>m){if(m=t.offset-m,m>t.whave&&t.sane){n.msg="invalid distance too far back",t.mode=ii;break}m>t.wnext?(m-=t.wnext,x=t.wsize-m):x=t.wnext-m,m>t.length&&(m=t.length),_=t.window}else _=i,x=o-t.offset,m=t.length;m>c&&(m=c),c-=m,t.length-=m;do i[o++]=_[x++];while(--m);t.length===0&&(t.mode=hg);break;case H6:if(c===0)break e;i[o++]=t.length,c--,t.mode=hg;break;case hy:if(t.wrap){for(;d<32;){if(s===0)break e;s--,f|=r[a++]<<d,d+=8}if(g-=c,n.total_out+=g,t.total+=g,t.wrap&4&&g&&(n.adler=t.check=t.flags?Kl(t.check,i,g,o-g):Ox(t.check,i,g,o-g)),g=c,t.wrap&4&&(t.flags?f:G6(f))!==t.check){n.msg="incorrect data check",t.mode=ii;break}f=0,d=0}t.mode=W6;case W6:if(t.wrap&&t.flags){for(;d<32;){if(s===0)break e;s--,f+=r[a++]<<d,d+=8}if(t.wrap&4&&f!==(t.total&4294967295)){n.msg="incorrect length check",t.mode=ii;break}f=0,d=0}t.mode=$6;case $6:I=b$;break e;case ii:I=gI;break e;case vI:return mI;case yI:default:return Ks}return n.next_out=o,n.avail_out=c,n.next_in=a,n.avail_in=s,t.hold=f,t.bits=d,(t.wsize||g!==n.avail_out&&t.mode<ii&&(t.mode<hy||e!==S6))&&AI(n,n.output,n.next_out,g-n.avail_out),p-=n.avail_in,g-=n.avail_out,n.total_in+=p,n.total_out+=g,t.total+=g,t.wrap&4&&g&&(n.adler=t.check=t.flags?Kl(t.check,i,g,n.next_out-g):Ox(t.check,i,g,n.next_out-g)),n.data_type=t.bits+(t.last?64:0)+(t.mode===Vc?128:0)+(t.mode===dg||t.mode===dy?256:0),(p===0&&g===0||e===S6)&&I===yd&&(I=_$),I},D$=n=>{if(Ad(n))return Ks;let e=n.state;return e.window&&(e.window=null),n.state=null,yd},O$=(n,e)=>{if(Ad(n))return Ks;const t=n.state;return(t.wrap&2)===0?Ks:(t.head=e,e.done=!1,yd)},k$=(n,e)=>{const t=e.length;let r,i,a;return Ad(n)||(r=n.state,r.wrap!==0&&r.mode!==_m)?Ks:r.mode===_m&&(i=1,i=Ox(i,e,t,0),i!==r.check)?gI:(a=AI(n,e,t,t),a?(r.mode=vI,mI):(r.havedict=1,yd))};var L$=bI,P$=wI,M$=xI,j$=T$,B$=_I,F$=N$,U$=D$,z$=O$,V$=k$,q$="pako inflate (from Nodeca project)",qc={inflateReset:L$,inflateReset2:P$,inflateResetKeep:M$,inflateInit:j$,inflateInit2:B$,inflate:F$,inflateEnd:U$,inflateGetHeader:z$,inflateSetDictionary:V$,inflateInfo:q$};function H$(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var W$=H$;const SI=Object.prototype.toString,{Z_NO_FLUSH:$$,Z_FINISH:G$,Z_OK:R1,Z_STREAM_END:my,Z_NEED_DICT:vy,Z_STREAM_ERROR:Y$,Z_DATA_ERROR:X6,Z_MEM_ERROR:X$}=uI;function Q1(n){this.options=fI.assign({chunkSize:1024*64,windowBits:15,to:""},n||{});const e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,e.windowBits===0&&(e.windowBits=-15)),e.windowBits>=0&&e.windowBits<16&&!(n&&n.windowBits)&&(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(e.windowBits&15)===0&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new u$,this.strm.avail_out=0;let t=qc.inflateInit2(this.strm,e.windowBits);if(t!==R1)throw new Error(kx[t]);if(this.header=new W$,qc.inflateGetHeader(this.strm,this.header),e.dictionary&&(typeof e.dictionary=="string"?e.dictionary=Lx.string2buf(e.dictionary):SI.call(e.dictionary)==="[object ArrayBuffer]"&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(t=qc.inflateSetDictionary(this.strm,e.dictionary),t!==R1)))throw new Error(kx[t])}Q1.prototype.push=function(n,e){const t=this.strm,r=this.options.chunkSize,i=this.options.dictionary;let a,o,s;if(this.ended)return!1;for(e===~~e?o=e:o=e===!0?G$:$$,SI.call(n)==="[object ArrayBuffer]"?t.input=new Uint8Array(n):t.input=n,t.next_in=0,t.avail_in=t.input.length;;){for(t.avail_out===0&&(t.output=new Uint8Array(r),t.next_out=0,t.avail_out=r),a=qc.inflate(t,o),a===vy&&i&&(a=qc.inflateSetDictionary(t,i),a===R1?a=qc.inflate(t,o):a===X6&&(a=vy));t.avail_in>0&&a===my&&t.state.wrap>0&&n[t.next_in]!==0;)qc.inflateReset(t),a=qc.inflate(t,o);switch(a){case Y$:case X6:case vy:case X$:return this.onEnd(a),this.ended=!0,!1}if(s=t.avail_out,t.next_out&&(t.avail_out===0||a===my))if(this.options.to==="string"){let c=Lx.utf8border(t.output,t.next_out),f=t.next_out-c,d=Lx.buf2string(t.output,c);t.next_out=f,t.avail_out=r-f,f&&t.output.set(t.output.subarray(c,c+f),0),this.onData(d)}else this.onData(t.output.length===t.next_out?t.output:t.output.subarray(0,t.next_out));if(!(a===R1&&s===0)){if(a===my)return a=qc.inflateEnd(this.strm),this.onEnd(a),this.ended=!0,!0;if(t.avail_in===0)break}}return!0};Q1.prototype.onData=function(n){this.chunks.push(n)};Q1.prototype.onEnd=function(n){n===R1&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=fI.flattenChunks(this.chunks)),this.chunks=[],this.err=n,this.msg=this.strm.msg};function K$(n,e){const t=new Q1(e);if(t.push(n),t.err)throw t.msg||kx[t.err];return t.result}var Q$=Q1,Z$=K$,J$={Inflate:Q$,inflate:Z$};const{Inflate:eG,inflate:tG}=J$;var K6=eG,nG=tG;const EI=[];for(let n=0;n<256;n++){let e=n;for(let t=0;t<8;t++)e&1?e=3988292384^e>>>1:e=e>>>1;EI[n]=e}const Q6=4294967295;function rG(n,e,t){let r=n;for(let i=0;i<t;i++)r=EI[(r^e[i])&255]^r>>>8;return r}function iG(n,e){return(rG(Q6,n,e)^Q6)>>>0}function Z6(n,e,t){const r=n.readUint32(),i=iG(new Uint8Array(n.buffer,n.byteOffset+n.offset-e-4,e),e);if(i!==r)throw new Error(`CRC mismatch for chunk ${t}. Expected ${r}, found ${i}`)}function CI(n,e,t){for(let r=0;r<t;r++)e[r]=n[r]}function II(n,e,t,r){let i=0;for(;i<r;i++)e[i]=n[i];for(;i<t;i++)e[i]=n[i]+e[i-r]&255}function TI(n,e,t,r){let i=0;if(t.length===0)for(;i<r;i++)e[i]=n[i];else for(;i<r;i++)e[i]=n[i]+t[i]&255}function RI(n,e,t,r,i){let a=0;if(t.length===0){for(;a<i;a++)e[a]=n[a];for(;a<r;a++)e[a]=n[a]+(e[a-i]>>1)&255}else{for(;a<i;a++)e[a]=n[a]+(t[a]>>1)&255;for(;a<r;a++)e[a]=n[a]+(e[a-i]+t[a]>>1)&255}}function NI(n,e,t,r,i){let a=0;if(t.length===0){for(;a<i;a++)e[a]=n[a];for(;a<r;a++)e[a]=n[a]+e[a-i]&255}else{for(;a<i;a++)e[a]=n[a]+t[a]&255;for(;a<r;a++)e[a]=n[a]+aG(e[a-i],t[a],t[a-i])&255}}function aG(n,e,t){const r=n+e-t,i=Math.abs(r-n),a=Math.abs(r-e),o=Math.abs(r-t);return i<=a&&i<=o?n:a<=o?e:t}function oG(n,e,t,r,i,a){switch(n){case 0:CI(e,t,i);break;case 1:II(e,t,i,a);break;case 2:TI(e,t,r,i);break;case 3:RI(e,t,r,i,a);break;case 4:NI(e,t,r,i,a);break;default:throw new Error(`Unsupported filter: ${n}`)}}const sG=new Uint16Array([255]),lG=new Uint8Array(sG.buffer),cG=lG[0]===255;function uG(n){const{data:e,width:t,height:r,channels:i,depth:a}=n,o=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],s=Math.ceil(a/8)*i,c=new Uint8Array(r*t*s);let f=0;for(let d=0;d<7;d++){const p=o[d],g=Math.ceil((t-p.x)/p.xStep),m=Math.ceil((r-p.y)/p.yStep);if(g<=0||m<=0)continue;const x=g*s,_=new Uint8Array(x);for(let C=0;C<m;C++){const S=e[f++],k=e.subarray(f,f+x);f+=x;const M=new Uint8Array(x);oG(S,k,M,_,x,s),_.set(M);for(let P=0;P<g;P++){const Y=p.x+P*p.xStep,z=p.y+C*p.yStep;if(!(Y>=t||z>=r))for(let F=0;F<s;F++)c[(z*t+Y)*s+F]=M[P*s+F]}}}if(a===16){const d=new Uint16Array(c.buffer);if(cG)for(let p=0;p<d.length;p++)d[p]=fG(d[p]);return d}else return c}function fG(n){return(n&255)<<8|n>>8&255}const dG=new Uint16Array([255]),hG=new Uint8Array(dG.buffer),pG=hG[0]===255,gG=new Uint8Array(0);function J6(n){const{data:e,width:t,height:r,channels:i,depth:a}=n,o=Math.ceil(a/8)*i,s=Math.ceil(a/8*i*t),c=new Uint8Array(r*s);let f=gG,d=0,p,g;for(let m=0;m<r;m++){switch(p=e.subarray(d+1,d+1+s),g=c.subarray(m*s,(m+1)*s),e[d]){case 0:CI(p,g,s);break;case 1:II(p,g,s,o);break;case 2:TI(p,g,f,s);break;case 3:RI(p,g,f,s,o);break;case 4:NI(p,g,f,s,o);break;default:throw new Error(`Unsupported filter: ${e[d]}`)}f=g,d+=s+1}if(a===16){const m=new Uint16Array(c.buffer);if(pG)for(let x=0;x<m.length;x++)m[x]=mG(m[x]);return m}else return c}function mG(n){return(n&255)<<8|n>>8&255}const Pg=Uint8Array.of(137,80,78,71,13,10,26,10);function eA(n){if(!vG(n.readBytes(Pg.length)))throw new Error("wrong PNG signature")}function vG(n){if(n.length<Pg.length)return!1;for(let e=0;e<Pg.length;e++)if(n[e]!==Pg[e])return!1;return!0}const yG="tEXt",xG=0,DI=new TextDecoder("latin1");function bG(n){if(_G(n),n.length===0||n.length>79)throw new Error("keyword length must be between 1 and 79")}const wG=/^[\u0000-\u00FF]*$/;function _G(n){if(!wG.test(n))throw new Error("invalid latin1 text")}function AG(n,e,t){const r=OI(e);n[r]=SG(e,t-r.length-1)}function OI(n){for(n.mark();n.readByte()!==xG;);const e=n.offset;n.reset();const t=DI.decode(n.readBytes(e-n.offset-1));return n.skip(1),bG(t),t}function SG(n,e){return DI.decode(n.readBytes(e))}const ps={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},yy={UNKNOWN:-1,DEFLATE:0},tA={UNKNOWN:-1,ADAPTIVE:0},xy={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},pg={NONE:0,BACKGROUND:1,PREVIOUS:2},by={SOURCE:0,OVER:1};class EG extends hb{constructor(t,r={}){super(t);vr(this,"_checkCrc");vr(this,"_inflator");vr(this,"_png");vr(this,"_apng");vr(this,"_end");vr(this,"_hasPalette");vr(this,"_palette");vr(this,"_hasTransparency");vr(this,"_transparency");vr(this,"_compressionMethod");vr(this,"_filterMethod");vr(this,"_interlaceMethod");vr(this,"_colorType");vr(this,"_isAnimated");vr(this,"_numberOfFrames");vr(this,"_numberOfPlays");vr(this,"_frames");vr(this,"_writingDataChunks");const{checkCrc:i=!1}=r;this._checkCrc=i,this._inflator=new K6,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=yy.UNKNOWN,this._filterMethod=tA.UNKNOWN,this._interlaceMethod=xy.UNKNOWN,this._colorType=ps.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(eA(this);!this._end;){const t=this.readUint32(),r=this.readChars(4);this.decodeChunk(t,r)}return this.decodeImage(),this._png}decodeApng(){for(eA(this);!this._end;){const t=this.readUint32(),r=this.readChars(4);this.decodeApngChunk(t,r)}return this.decodeApngImage(),this._apng}decodeChunk(t,r){const i=this.offset;switch(r){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(t);break;case"IDAT":this.decodeIDAT(t);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(t);break;case"iCCP":this.decodeiCCP(t);break;case yG:AG(this._png.text,this,t);break;case"pHYs":this.decodepHYs();break;default:this.skip(t);break}if(this.offset-i!==t)throw new Error(`Length mismatch while decoding chunk ${r}`);this._checkCrc?Z6(this,t+4,r):this.skip(4)}decodeApngChunk(t,r){const i=this.offset;switch(r!=="fdAT"&&r!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),r){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(t);break;default:this.decodeChunk(t,r),this.offset=i+t;break}if(this.offset-i!==t)throw new Error(`Length mismatch while decoding chunk ${r}`);this._checkCrc?Z6(this,t+4,r):this.skip(4)}decodeIHDR(){const t=this._png;t.width=this.readUint32(),t.height=this.readUint32(),t.depth=CG(this.readUint8());const r=this.readUint8();this._colorType=r;let i;switch(r){case ps.GREYSCALE:i=1;break;case ps.TRUECOLOUR:i=3;break;case ps.INDEXED_COLOUR:i=1;break;case ps.GREYSCALE_ALPHA:i=2;break;case ps.TRUECOLOUR_ALPHA:i=4;break;case ps.UNKNOWN:default:throw new Error(`Unknown color type: ${r}`)}if(this._png.channels=i,this._compressionMethod=this.readUint8(),this._compressionMethod!==yy.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const t={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(t)}decodePLTE(t){if(t%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${t}`);const r=t/3;this._hasPalette=!0;const i=[];this._palette=i;for(let a=0;a<r;a++)i.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(t){this._writingDataChunks=!0;const r=t,i=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,i,r)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(t)}decodeFDAT(t){this._writingDataChunks=!0;let r=t,i=this.offset+this.byteOffset;if(i+=4,r-=4,this._inflator.push(new Uint8Array(this.buffer,i,r)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(t)}decodetRNS(t){switch(this._colorType){case ps.GREYSCALE:case ps.TRUECOLOUR:{if(t%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${t}`);if(t/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${t/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(t/2);for(let r=0;r<t/2;r++)this._transparency[r]=this.readUint16();break}case ps.INDEXED_COLOUR:{if(t>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${t} vs ${this._palette.length})`);let r=0;for(;r<t;r++){const i=this.readByte();this._palette[r].push(i)}for(;r<this._palette.length;r++)this._palette[r].push(255);break}case ps.UNKNOWN:case ps.GREYSCALE_ALPHA:case ps.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(t){const r=OI(this),i=this.readUint8();if(i!==yy.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${i}`);const a=this.readBytes(t-r.length-2);this._png.iccEmbeddedProfile={name:r,profile:nG(a)}}decodepHYs(){const t=this.readUint32(),r=this.readUint32(),i=this.readByte();this._png.resolution={x:t,y:r,unit:i}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let t=0;t<this._numberOfFrames;t++){const r={sequenceNumber:this._frames[t].sequenceNumber,delayNumber:this._frames[t].delayNumber,delayDenominator:this._frames[t].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},i=this._frames.at(t);if(i){if(i.data=J6({data:i.data,width:i.width,height:i.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),t===0||i.xOffset===0&&i.yOffset===0&&i.width===this._png.width&&i.height===this._png.height)r.data=i.data;else{const a=this._apng.frames.at(t-1);this.disposeFrame(i,a,r),this.addFrameDataToCanvas(r,i)}this._apng.frames.push(r)}}return this._apng}disposeFrame(t,r,i){switch(t.disposeOp){case pg.NONE:break;case pg.BACKGROUND:for(let a=0;a<this._png.height;a++)for(let o=0;o<this._png.width;o++){const s=(a*t.width+o)*this._png.channels;for(let c=0;c<this._png.channels;c++)i.data[s+c]=0}break;case pg.PREVIOUS:i.data.set(r.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(t,r){const i=1<<this._png.depth,a=(o,s)=>{const c=((o+r.yOffset)*this._png.width+r.xOffset+s)*this._png.channels,f=(o*r.width+s)*this._png.channels;return{index:c,frameIndex:f}};switch(r.blendOp){case by.SOURCE:for(let o=0;o<r.height;o++)for(let s=0;s<r.width;s++){const{index:c,frameIndex:f}=a(o,s);for(let d=0;d<this._png.channels;d++)t.data[c+d]=r.data[f+d]}break;case by.OVER:for(let o=0;o<r.height;o++)for(let s=0;s<r.width;s++){const{index:c,frameIndex:f}=a(o,s);for(let d=0;d<this._png.channels;d++){const p=r.data[f+this._png.channels-1]/i,g=d%(this._png.channels-1)===0?1:r.data[f+d],m=Math.floor(p*g+(1-p)*t.data[c+d]);t.data[c+d]+=m}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){var r;if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const t=this._isAnimated?((r=this._frames)==null?void 0:r.at(0)).data:this._inflator.result;if(this._filterMethod!==tA.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===xy.NO_INTERLACE)this._png.data=J6({data:t,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===xy.ADAM7)this._png.data=uG({data:t,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const t=this._inflator.result,r=this._frames.at(-1);r?r.data=t:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:pg.NONE,blendOp:by.SOURCE,data:t}),this._inflator=new K6,this._writingDataChunks=!1}}function CG(n){if(n!==1&&n!==2&&n!==4&&n!==8&&n!==16)throw new Error(`invalid bit depth: ${n}`);return n}var nA;(function(n){n[n.UNKNOWN=0]="UNKNOWN",n[n.METRE=1]="METRE"})(nA||(nA={}));function IG(n,e){return new EG(n,e).decode()}var cn=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function wy(){cn.console&&typeof cn.console.log=="function"&&cn.console.log.apply(cn.console,arguments)}var Or={log:wy,warn:function(n){cn.console&&(typeof cn.console.warn=="function"?cn.console.warn.apply(cn.console,arguments):wy.call(null,arguments))},error:function(n){cn.console&&(typeof cn.console.error=="function"?cn.console.error.apply(cn.console,arguments):wy(n))}};function _y(n,e,t){var r=new XMLHttpRequest;r.open("GET",n),r.responseType="blob",r.onload=function(){Zf(r.response,e,t)},r.onerror=function(){Or.error("could not download file")},r.send()}function rA(n){var e=new XMLHttpRequest;e.open("HEAD",n,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function gg(n){try{n.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),n.dispatchEvent(e)}}var Zf=cn.saveAs||((typeof window>"u"?"undefined":br(window))!=="object"||window!==cn?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(n,e,t){var r=cn.URL||cn.webkitURL,i=document.createElement("a");e=e||n.name||"download",i.download=e,i.rel="noopener",typeof n=="string"?(i.href=n,i.origin!==location.origin?rA(i.href)?_y(n,e,t):gg(i,i.target="_blank"):gg(i)):(i.href=r.createObjectURL(n),setTimeout(function(){r.revokeObjectURL(i.href)},4e4),setTimeout(function(){gg(i)},0))}:"msSaveOrOpenBlob"in navigator?function(n,e,t){if(e=e||n.name||"download",typeof n=="string")if(rA(n))_y(n,e,t);else{var r=document.createElement("a");r.href=n,r.target="_blank",setTimeout(function(){gg(r)})}else navigator.msSaveOrOpenBlob(function(i,a){return a===void 0?a={autoBom:!1}:br(a)!=="object"&&(Or.warn("Deprecated: Expected third argument to be a object"),a={autoBom:!a}),a.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob(["\uFEFF",i],{type:i.type}):i}(n,t),e)}:function(n,e,t,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof n=="string")return _y(n,e,t);var i=n.type==="application/octet-stream",a=/constructor/i.test(cn.HTMLElement)||cn.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||i&&a)&&(typeof FileReader>"u"?"undefined":br(FileReader))==="object"){var s=new FileReader;s.onloadend=function(){var d=s.result;d=o?d:d.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=d:location=d,r=null},s.readAsDataURL(n)}else{var c=cn.URL||cn.webkitURL,f=c.createObjectURL(n);r?r.location=f:location.href=f,r=null,setTimeout(function(){c.revokeObjectURL(f)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function kI(n){var e;n=n||"",this.ok=!1,n.charAt(0)=="#"&&(n=n.substr(1,6)),n={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[n=(n=n.replace(/ /g,"")).toLowerCase()]||n;for(var t=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(s){return[parseInt(s[1]),parseInt(s[2]),parseInt(s[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(s){return[parseInt(s[1],16),parseInt(s[2],16),parseInt(s[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(s){return[parseInt(s[1]+s[1],16),parseInt(s[2]+s[2],16),parseInt(s[3]+s[3],16)]}}],r=0;r<t.length;r++){var i=t[r].re,a=t[r].process,o=i.exec(n);o&&(e=a(o),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var s=this.r.toString(16),c=this.g.toString(16),f=this.b.toString(16);return s.length==1&&(s="0"+s),c.length==1&&(c="0"+c),f.length==1&&(f="0"+f),"#"+s+c+f}}var Mg=cn.atob.bind(cn),iA=cn.btoa.bind(cn);/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function Ay(n,e){var t=n[0],r=n[1],i=n[2],a=n[3];t=ro(t,r,i,a,e[0],7,-680876936),a=ro(a,t,r,i,e[1],12,-389564586),i=ro(i,a,t,r,e[2],17,606105819),r=ro(r,i,a,t,e[3],22,-1044525330),t=ro(t,r,i,a,e[4],7,-176418897),a=ro(a,t,r,i,e[5],12,1200080426),i=ro(i,a,t,r,e[6],17,-1473231341),r=ro(r,i,a,t,e[7],22,-45705983),t=ro(t,r,i,a,e[8],7,1770035416),a=ro(a,t,r,i,e[9],12,-1958414417),i=ro(i,a,t,r,e[10],17,-42063),r=ro(r,i,a,t,e[11],22,-1990404162),t=ro(t,r,i,a,e[12],7,1804603682),a=ro(a,t,r,i,e[13],12,-40341101),i=ro(i,a,t,r,e[14],17,-1502002290),t=io(t,r=ro(r,i,a,t,e[15],22,1236535329),i,a,e[1],5,-165796510),a=io(a,t,r,i,e[6],9,-1069501632),i=io(i,a,t,r,e[11],14,643717713),r=io(r,i,a,t,e[0],20,-373897302),t=io(t,r,i,a,e[5],5,-701558691),a=io(a,t,r,i,e[10],9,38016083),i=io(i,a,t,r,e[15],14,-660478335),r=io(r,i,a,t,e[4],20,-405537848),t=io(t,r,i,a,e[9],5,568446438),a=io(a,t,r,i,e[14],9,-1019803690),i=io(i,a,t,r,e[3],14,-187363961),r=io(r,i,a,t,e[8],20,1163531501),t=io(t,r,i,a,e[13],5,-1444681467),a=io(a,t,r,i,e[2],9,-51403784),i=io(i,a,t,r,e[7],14,1735328473),t=ao(t,r=io(r,i,a,t,e[12],20,-1926607734),i,a,e[5],4,-378558),a=ao(a,t,r,i,e[8],11,-2022574463),i=ao(i,a,t,r,e[11],16,1839030562),r=ao(r,i,a,t,e[14],23,-35309556),t=ao(t,r,i,a,e[1],4,-1530992060),a=ao(a,t,r,i,e[4],11,1272893353),i=ao(i,a,t,r,e[7],16,-155497632),r=ao(r,i,a,t,e[10],23,-1094730640),t=ao(t,r,i,a,e[13],4,681279174),a=ao(a,t,r,i,e[0],11,-358537222),i=ao(i,a,t,r,e[3],16,-722521979),r=ao(r,i,a,t,e[6],23,76029189),t=ao(t,r,i,a,e[9],4,-640364487),a=ao(a,t,r,i,e[12],11,-421815835),i=ao(i,a,t,r,e[15],16,530742520),t=oo(t,r=ao(r,i,a,t,e[2],23,-995338651),i,a,e[0],6,-198630844),a=oo(a,t,r,i,e[7],10,1126891415),i=oo(i,a,t,r,e[14],15,-1416354905),r=oo(r,i,a,t,e[5],21,-57434055),t=oo(t,r,i,a,e[12],6,1700485571),a=oo(a,t,r,i,e[3],10,-1894986606),i=oo(i,a,t,r,e[10],15,-1051523),r=oo(r,i,a,t,e[1],21,-2054922799),t=oo(t,r,i,a,e[8],6,1873313359),a=oo(a,t,r,i,e[15],10,-30611744),i=oo(i,a,t,r,e[6],15,-1560198380),r=oo(r,i,a,t,e[13],21,1309151649),t=oo(t,r,i,a,e[4],6,-145523070),a=oo(a,t,r,i,e[11],10,-1120210379),i=oo(i,a,t,r,e[2],15,718787259),r=oo(r,i,a,t,e[9],21,-343485551),n[0]=af(t,n[0]),n[1]=af(r,n[1]),n[2]=af(i,n[2]),n[3]=af(a,n[3])}function y2(n,e,t,r,i,a){return e=af(af(e,n),af(r,a)),af(e<<i|e>>>32-i,t)}function ro(n,e,t,r,i,a,o){return y2(e&t|~e&r,n,e,i,a,o)}function io(n,e,t,r,i,a,o){return y2(e&r|t&~r,n,e,i,a,o)}function ao(n,e,t,r,i,a,o){return y2(e^t^r,n,e,i,a,o)}function oo(n,e,t,r,i,a,o){return y2(t^(e|~r),n,e,i,a,o)}function LI(n){var e,t=n.length,r=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=n.length;e+=64)Ay(r,TG(n.substring(e-64,e)));n=n.substring(e-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<n.length;e++)i[e>>2]|=n.charCodeAt(e)<<(e%4<<3);if(i[e>>2]|=128<<(e%4<<3),e>55)for(Ay(r,i),e=0;e<16;e++)i[e]=0;return i[14]=8*t,Ay(r,i),r}function TG(n){var e,t=[];for(e=0;e<64;e+=4)t[e>>2]=n.charCodeAt(e)+(n.charCodeAt(e+1)<<8)+(n.charCodeAt(e+2)<<16)+(n.charCodeAt(e+3)<<24);return t}var aA="0123456789abcdef".split("");function RG(n){for(var e="",t=0;t<4;t++)e+=aA[n>>8*t+4&15]+aA[n>>8*t&15];return e}function NG(n){return String.fromCharCode(255&n,(65280&n)>>8,(16711680&n)>>16,(4278190080&n)>>24)}function Px(n){return LI(n).map(NG).join("")}var DG=function(n){for(var e=0;e<n.length;e++)n[e]=RG(n[e]);return n.join("")}(LI("hello"))!="5d41402abc4b2a76b9719d911017c592";function af(n,e){if(DG){var t=(65535&n)+(65535&e);return(n>>16)+(e>>16)+(t>>16)<<16|65535&t}return n+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function Mx(n,e){var t,r,i,a;if(n!==t){for(var o=(i=n,a=1+(256/n.length|0),new Array(a+1).join(i)),s=[],c=0;c<256;c++)s[c]=c;var f=0;for(c=0;c<256;c++){var d=s[c];f=(f+d+o.charCodeAt(c))%256,s[c]=s[f],s[f]=d}t=n,r=s}else s=r;var p=e.length,g=0,m=0,x="";for(c=0;c<p;c++)m=(m+(d=s[g=(g+1)%256]))%256,s[g]=s[m],s[m]=d,o=s[(s[g]+s[m])%256],x+=String.fromCharCode(e.charCodeAt(c)^o);return x}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var oA={print:4,modify:8,copy:16,"annot-forms":32};function dh(n,e,t,r){this.v=1,this.r=2;var i=192;n.forEach(function(s){if(oA.perm!==void 0)throw new Error("Invalid permission: "+s);i+=oA[s]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var a=(e+this.padding).substr(0,32),o=(t+this.padding).substr(0,32);this.O=this.processOwnerPassword(a,o),this.P=-(1+(255^i)),this.encryptionKey=Px(a+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=Mx(this.encryptionKey,this.padding)}function hh(n){if(/[^\u0000-\u00ff]/.test(n))throw new Error("Invalid PDF Name Object: "+n+", Only accept ASCII characters.");for(var e="",t=n.length,r=0;r<t;r++){var i=n.charCodeAt(r);e+=i<33||i===35||i===37||i===40||i===41||i===47||i===60||i===62||i===91||i===93||i===123||i===125||i>126?"#"+("0"+i.toString(16)).slice(-2):n[r]}return e}function sA(n){if(br(n)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(t,r,i){if(i=i||!1,typeof t!="string"||typeof r!="function"||typeof i!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(t)||(e[t]={});var a=Math.random().toString(35);return e[t][a]=[r,!!i],a},this.unsubscribe=function(t){for(var r in e)if(e[r][t])return delete e[r][t],Object.keys(e[r]).length===0&&delete e[r],!0;return!1},this.publish=function(t){if(e.hasOwnProperty(t)){var r=Array.prototype.slice.call(arguments,1),i=[];for(var a in e[t]){var o=e[t][a];try{o[0].apply(n,r)}catch(s){cn.console&&Or.error("jsPDF PubSub Error",s.message,s)}o[1]&&i.push(a)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function Am(n){if(!(this instanceof Am))return new Am(n);var e="opacity,stroke-opacity".split(",");for(var t in n)n.hasOwnProperty(t)&&e.indexOf(t)>=0&&(this[t]=n[t]);this.id="",this.objectNumber=-1}function PI(n,e){this.gState=n,this.matrix=e,this.id="",this.objectNumber=-1}function Jf(n,e,t,r,i){if(!(this instanceof Jf))return new Jf(n,e,t,r,i);this.type=n==="axial"?2:3,this.coords=e,this.colors=t,PI.call(this,r,i)}function yh(n,e,t,r,i){if(!(this instanceof yh))return new yh(n,e,t,r,i);this.boundingBox=n,this.xStep=e,this.yStep=t,this.stream="",this.cloneIndex=0,PI.call(this,r,i)}function Vt(n){var e,t=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],i=arguments[2],a=arguments[3],o=[],s=1,c=16,f="S",d=null;br(n=n||{})==="object"&&(t=n.orientation,r=n.unit||r,i=n.format||i,a=n.compress||n.compressPdf||a,(d=n.encryption||null)!==null&&(d.userPassword=d.userPassword||"",d.ownerPassword=d.ownerPassword||"",d.userPermissions=d.userPermissions||[]),s=typeof n.userUnit=="number"?Math.abs(n.userUnit):1,n.precision!==void 0&&(e=n.precision),n.floatPrecision!==void 0&&(c=n.floatPrecision),f=n.defaultPathOperation||"S"),o=n.filters||(a===!0?["FlateEncode"]:o),r=r||"mm",t=(""+(t||"P")).toLowerCase();var p=n.putOnlyUsedFonts||!1,g={},m={internal:{},__private__:{}};m.__private__.PubSub=sA;var x="1.3",_=m.__private__.getPdfVersion=function(){return x};m.__private__.setPdfVersion=function(B){x=B};var C={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};m.__private__.getPageFormats=function(){return C};var S=m.__private__.getPageFormat=function(B){return C[B]};i=i||"a4";var k="compat",M="advanced",P=k;function Y(){this.saveGraphicsState(),de(new Wt(xt,0,0,-xt,0,Mo()*xt).toString()+" cm"),this.setFontSize(this.getFontSize()/xt),f="n",P=M}function z(){this.restoreGraphicsState(),f="S",P=k}var F=m.__private__.combineFontStyleAndFontWeight=function(B,ne){if(B=="bold"&&ne=="normal"||B=="bold"&&ne==400||B=="normal"&&ne=="italic"||B=="bold"&&ne=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return ne&&(B=ne==400||ne==="normal"?B==="italic"?"italic":"normal":ne!=700&&ne!=="bold"||B!=="normal"?(ne==700?"bold":ne)+""+B:"bold"),B};m.advancedAPI=function(B){var ne=P===k;return ne&&Y.call(this),typeof B!="function"||(B(this),ne&&z.call(this)),this},m.compatAPI=function(B){var ne=P===M;return ne&&z.call(this),typeof B!="function"||(B(this),ne&&Y.call(this)),this},m.isAdvancedAPI=function(){return P===M};var I,T=function(B){if(P!==M)throw new Error(B+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},j=m.roundToPrecision=m.__private__.roundToPrecision=function(B,ne){var ve=e||ne;if(isNaN(B)||isNaN(ve))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return B.toFixed(ve).replace(/0+$/,"")};I=m.hpf=m.__private__.hpf=typeof c=="number"?function(B){if(isNaN(B))throw new Error("Invalid argument passed to jsPDF.hpf");return j(B,c)}:c==="smart"?function(B){if(isNaN(B))throw new Error("Invalid argument passed to jsPDF.hpf");return j(B,B>-1&&B<1?16:5)}:function(B){if(isNaN(B))throw new Error("Invalid argument passed to jsPDF.hpf");return j(B,16)};var N=m.f2=m.__private__.f2=function(B){if(isNaN(B))throw new Error("Invalid argument passed to jsPDF.f2");return j(B,2)},R=m.__private__.f3=function(B){if(isNaN(B))throw new Error("Invalid argument passed to jsPDF.f3");return j(B,3)},D=m.scale=m.__private__.scale=function(B){if(isNaN(B))throw new Error("Invalid argument passed to jsPDF.scale");return P===k?B*xt:P===M?B:void 0},L=function(B){return D(function(ne){return P===k?Mo()-ne:P===M?ne:void 0}(B))};m.__private__.setPrecision=m.setPrecision=function(B){typeof parseInt(B,10)=="number"&&(e=parseInt(B,10))};var G,U="00000000000000000000000000000000",H=m.__private__.getFileId=function(){return U},te=m.__private__.setFileId=function(B){return U=B!==void 0&&/^[a-fA-F0-9]{32}$/.test(B)?B.toUpperCase():U.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),d!==null&&(bn=new dh(d.userPermissions,d.userPassword,d.ownerPassword,U)),U};m.setFileId=function(B){return te(B),this},m.getFileId=function(){return H()};var se=m.__private__.convertDateToPDFDate=function(B){var ne=B.getTimezoneOffset(),ve=ne<0?"+":"-",we=Math.floor(Math.abs(ne/60)),Te=Math.abs(ne%60),$e=[ve,Q(we),"'",Q(Te),"'"].join("");return["D:",B.getFullYear(),Q(B.getMonth()+1),Q(B.getDate()),Q(B.getHours()),Q(B.getMinutes()),Q(B.getSeconds()),$e].join("")},ee=m.__private__.convertPDFDateToDate=function(B){var ne=parseInt(B.substr(2,4),10),ve=parseInt(B.substr(6,2),10)-1,we=parseInt(B.substr(8,2),10),Te=parseInt(B.substr(10,2),10),$e=parseInt(B.substr(12,2),10),Ke=parseInt(B.substr(14,2),10);return new Date(ne,ve,we,Te,$e,Ke,0)},ie=m.__private__.setCreationDate=function(B){var ne;if(B===void 0&&(B=new Date),B instanceof Date)ne=se(B);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(B))throw new Error("Invalid argument passed to jsPDF.setCreationDate");ne=B}return G=ne},$=m.__private__.getCreationDate=function(B){var ne=G;return B==="jsDate"&&(ne=ee(G)),ne};m.setCreationDate=function(B){return ie(B),this},m.getCreationDate=function(B){return $(B)};var W,Q=m.__private__.padd2=function(B){return("0"+parseInt(B)).slice(-2)},J=m.__private__.padd2Hex=function(B){return("00"+(B=B.toString())).substr(B.length)},he=0,be=[],_e=[],Ie=0,Oe=[],Ve=[],nt=!1,ot=_e;m.__private__.setCustomOutputDestination=function(B){nt=!0,ot=B};var ft=function(B){nt||(ot=B)};m.__private__.resetCustomOutputDestination=function(){nt=!1,ot=_e};var de=m.__private__.out=function(B){return B=B.toString(),Ie+=B.length+1,ot.push(B),ot},rt=m.__private__.write=function(B){return de(arguments.length===1?B.toString():Array.prototype.join.call(arguments," "))},dt=m.__private__.getArrayBuffer=function(B){for(var ne=B.length,ve=new ArrayBuffer(ne),we=new Uint8Array(ve);ne--;)we[ne]=B.charCodeAt(ne);return ve},at=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];m.__private__.getStandardFonts=function(){return at};var Ee=n.fontSize||16;m.__private__.setFontSize=m.setFontSize=function(B){return Ee=P===M?B/xt:B,this};var lt,Ye=m.__private__.getFontSize=m.getFontSize=function(){return P===k?Ee:Ee*xt},vt=n.R2L||!1;m.__private__.setR2L=m.setR2L=function(B){return vt=B,this},m.__private__.getR2L=m.getR2L=function(){return vt};var ct,it=m.__private__.setZoomMode=function(B){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(B))lt=B;else if(isNaN(B)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(B)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+B+'" is not recognized.');lt=B}else lt=parseInt(B,10)};m.__private__.getZoomMode=function(){return lt};var Lt,ht=m.__private__.setPageMode=function(B){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(B)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+B+'" is not recognized.');ct=B};m.__private__.getPageMode=function(){return ct};var yt=m.__private__.setLayoutMode=function(B){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(B)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+B+'" is not recognized.');Lt=B};m.__private__.getLayoutMode=function(){return Lt},m.__private__.setDisplayMode=m.setDisplayMode=function(B,ne,ve){return it(B),yt(ne),ht(ve),this};var _t={title:"",subject:"",author:"",keywords:"",creator:""};m.__private__.getDocumentProperty=function(B){if(Object.keys(_t).indexOf(B)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return _t[B]},m.__private__.getDocumentProperties=function(){return _t},m.__private__.setDocumentProperties=m.setProperties=m.setDocumentProperties=function(B){for(var ne in _t)_t.hasOwnProperty(ne)&&B[ne]&&(_t[ne]=B[ne]);return this},m.__private__.setDocumentProperty=function(B,ne){if(Object.keys(_t).indexOf(B)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return _t[B]=ne};var ut,xt,mt,mn,Kt,Bt={},jt={},Vn=[],kt={},Pn={},Ft={},Ht={},Mn=null,Ut=0,Tt=[],nn=new sA(m),$i=n.hotfixes||[],wr={},Yr={},Tr=[],Wt=function B(ne,ve,we,Te,$e,Ke){if(!(this instanceof B))return new B(ne,ve,we,Te,$e,Ke);isNaN(ne)&&(ne=1),isNaN(ve)&&(ve=0),isNaN(we)&&(we=0),isNaN(Te)&&(Te=1),isNaN($e)&&($e=0),isNaN(Ke)&&(Ke=0),this._matrix=[ne,ve,we,Te,$e,Ke]};Object.defineProperty(Wt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(B){this._matrix[0]=B}}),Object.defineProperty(Wt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(B){this._matrix[1]=B}}),Object.defineProperty(Wt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(B){this._matrix[2]=B}}),Object.defineProperty(Wt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(B){this._matrix[3]=B}}),Object.defineProperty(Wt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(B){this._matrix[4]=B}}),Object.defineProperty(Wt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(B){this._matrix[5]=B}}),Object.defineProperty(Wt.prototype,"a",{get:function(){return this._matrix[0]},set:function(B){this._matrix[0]=B}}),Object.defineProperty(Wt.prototype,"b",{get:function(){return this._matrix[1]},set:function(B){this._matrix[1]=B}}),Object.defineProperty(Wt.prototype,"c",{get:function(){return this._matrix[2]},set:function(B){this._matrix[2]=B}}),Object.defineProperty(Wt.prototype,"d",{get:function(){return this._matrix[3]},set:function(B){this._matrix[3]=B}}),Object.defineProperty(Wt.prototype,"e",{get:function(){return this._matrix[4]},set:function(B){this._matrix[4]=B}}),Object.defineProperty(Wt.prototype,"f",{get:function(){return this._matrix[5]},set:function(B){this._matrix[5]=B}}),Object.defineProperty(Wt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Wt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Wt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Wt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Wt.prototype.join=function(B){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(I).join(B)},Wt.prototype.multiply=function(B){var ne=B.sx*this.sx+B.shy*this.shx,ve=B.sx*this.shy+B.shy*this.sy,we=B.shx*this.sx+B.sy*this.shx,Te=B.shx*this.shy+B.sy*this.sy,$e=B.tx*this.sx+B.ty*this.shx+this.tx,Ke=B.tx*this.shy+B.ty*this.sy+this.ty;return new Wt(ne,ve,we,Te,$e,Ke)},Wt.prototype.decompose=function(){var B=this.sx,ne=this.shy,ve=this.shx,we=this.sy,Te=this.tx,$e=this.ty,Ke=Math.sqrt(B*B+ne*ne),bt=(B/=Ke)*ve+(ne/=Ke)*we;ve-=B*bt,we-=ne*bt;var Nt=Math.sqrt(ve*ve+we*we);return bt/=Nt,B*(we/=Nt)<ne*(ve/=Nt)&&(B=-B,ne=-ne,bt=-bt,Ke=-Ke),{scale:new Wt(Ke,0,0,Nt,0,0),translate:new Wt(1,0,0,1,Te,$e),rotate:new Wt(B,ne,-ne,B,0,0),skew:new Wt(1,0,bt,1,0,0)}},Wt.prototype.toString=function(B){return this.join(" ")},Wt.prototype.inversed=function(){var B=this.sx,ne=this.shy,ve=this.shx,we=this.sy,Te=this.tx,$e=this.ty,Ke=1/(B*we-ne*ve),bt=we*Ke,Nt=-ne*Ke,Gt=-ve*Ke,on=B*Ke;return new Wt(bt,Nt,Gt,on,-bt*Te-Gt*$e,-Nt*Te-on*$e)},Wt.prototype.applyToPoint=function(B){var ne=B.x*this.sx+B.y*this.shx+this.tx,ve=B.x*this.shy+B.y*this.sy+this.ty;return new Po(ne,ve)},Wt.prototype.applyToRectangle=function(B){var ne=this.applyToPoint(B),ve=this.applyToPoint(new Po(B.x+B.w,B.y+B.h));return new Ns(ne.x,ne.y,ve.x-ne.x,ve.y-ne.y)},Wt.prototype.clone=function(){var B=this.sx,ne=this.shy,ve=this.shx,we=this.sy,Te=this.tx,$e=this.ty;return new Wt(B,ne,ve,we,Te,$e)},m.Matrix=Wt;var qn=m.matrixMult=function(B,ne){return ne.multiply(B)},fr=new Wt(1,0,0,1,0,0);m.unitMatrix=m.identityMatrix=fr;var Kn=function(B,ne){if(!Pn[B]){var ve=(ne instanceof Jf?"Sh":"P")+(Object.keys(kt).length+1).toString(10);ne.id=ve,Pn[B]=ve,kt[ve]=ne,nn.publish("addPattern",ne)}};m.ShadingPattern=Jf,m.TilingPattern=yh,m.addShadingPattern=function(B,ne){return T("addShadingPattern()"),Kn(B,ne),this},m.beginTilingPattern=function(B){T("beginTilingPattern()"),Ya(B.boundingBox[0],B.boundingBox[1],B.boundingBox[2]-B.boundingBox[0],B.boundingBox[3]-B.boundingBox[1],B.matrix)},m.endTilingPattern=function(B,ne){T("endTilingPattern()"),ne.stream=Ve[W].join(`
`),Kn(B,ne),nn.publish("endTilingPattern",ne),Tr.pop().restore()};var Br,_r=m.__private__.newObject=function(){var B=yi();return Lr(B,!0),B},yi=m.__private__.newObjectDeferred=function(){return he++,be[he]=function(){return Ie},he},Lr=function(B,ne){return ne=typeof ne=="boolean"&&ne,be[B]=Ie,ne&&de(B+" 0 obj"),B},xs=m.__private__.newAdditionalObject=function(){var B={objId:yi(),content:""};return Oe.push(B),B},za=yi(),Ui=yi(),zi=m.__private__.decodeColorString=function(B){var ne=B.split(" ");if(ne.length!==2||ne[1]!=="g"&&ne[1]!=="G")ne.length!==5||ne[4]!=="k"&&ne[4]!=="K"||(ne=[(1-ne[0])*(1-ne[3]),(1-ne[1])*(1-ne[3]),(1-ne[2])*(1-ne[3]),"r"]);else{var ve=parseFloat(ne[0]);ne=[ve,ve,ve,"r"]}for(var we="#",Te=0;Te<3;Te++)we+=("0"+Math.floor(255*parseFloat(ne[Te])).toString(16)).slice(-2);return we},xi=m.__private__.encodeColorString=function(B){var ne;typeof B=="string"&&(B={ch1:B});var ve=B.ch1,we=B.ch2,Te=B.ch3,$e=B.ch4,Ke=B.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof ve=="string"&&ve.charAt(0)!=="#"){var bt=new kI(ve);if(bt.ok)ve=bt.toHex();else if(!/^\d*\.?\d*$/.test(ve))throw new Error('Invalid color "'+ve+'" passed to jsPDF.encodeColorString.')}if(typeof ve=="string"&&/^#[0-9A-Fa-f]{3}$/.test(ve)&&(ve="#"+ve[1]+ve[1]+ve[2]+ve[2]+ve[3]+ve[3]),typeof ve=="string"&&/^#[0-9A-Fa-f]{6}$/.test(ve)){var Nt=parseInt(ve.substr(1),16);ve=Nt>>16&255,we=Nt>>8&255,Te=255&Nt}if(we===void 0||$e===void 0&&ve===we&&we===Te)ne=typeof ve=="string"?ve+" "+Ke[0]:B.precision===2?N(ve/255)+" "+Ke[0]:R(ve/255)+" "+Ke[0];else if($e===void 0||br($e)==="object"){if($e&&!isNaN($e.a)&&$e.a===0)return["1.","1.","1.",Ke[1]].join(" ");ne=typeof ve=="string"?[ve,we,Te,Ke[1]].join(" "):B.precision===2?[N(ve/255),N(we/255),N(Te/255),Ke[1]].join(" "):[R(ve/255),R(we/255),R(Te/255),Ke[1]].join(" ")}else ne=typeof ve=="string"?[ve,we,Te,$e,Ke[2]].join(" "):B.precision===2?[N(ve),N(we),N(Te),N($e),Ke[2]].join(" "):[R(ve),R(we),R(Te),R($e),Ke[2]].join(" ");return ne},bi=m.__private__.getFilters=function(){return o},Ar=m.__private__.putStream=function(B){var ne=(B=B||{}).data||"",ve=B.filters||bi(),we=B.alreadyAppliedFilters||[],Te=B.addLength1||!1,$e=ne.length,Ke=B.objectId,bt=function(Xr){return Xr};if(d!==null&&Ke===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");d!==null&&(bt=bn.encryptor(Ke,0));var Nt={};ve===!0&&(ve=["FlateEncode"]);var Gt=B.additionalKeyValues||[],on=(Nt=Vt.API.processDataByFilters!==void 0?Vt.API.processDataByFilters(ne,ve):{data:ne,reverseChain:[]}).reverseChain+(Array.isArray(we)?we.join(" "):we.toString());if(Nt.data.length!==0&&(Gt.push({key:"Length",value:Nt.data.length}),Te===!0&&Gt.push({key:"Length1",value:$e})),on.length!=0)if(on.split("/").length-1==1)Gt.push({key:"Filter",value:on});else{Gt.push({key:"Filter",value:"["+on+"]"});for(var An=0;An<Gt.length;An+=1)if(Gt[An].key==="DecodeParms"){for(var Qn=[],Fr=0;Fr<Nt.reverseChain.split("/").length-1;Fr+=1)Qn.push("null");Qn.push(Gt[An].value),Gt[An].value="["+Qn.join(" ")+"]"}}de("<<");for(var ir=0;ir<Gt.length;ir++)de("/"+Gt[ir].key+" "+Gt[ir].value);de(">>"),Nt.data.length!==0&&(de("stream"),de(bt(Nt.data)),de("endstream"))},dr=m.__private__.putPage=function(B){var ne=B.number,ve=B.data,we=B.objId,Te=B.contentsObjId;Lr(we,!0),de("<</Type /Page"),de("/Parent "+B.rootDictionaryObjId+" 0 R"),de("/Resources "+B.resourceDictionaryObjId+" 0 R"),de("/MediaBox ["+parseFloat(I(B.mediaBox.bottomLeftX))+" "+parseFloat(I(B.mediaBox.bottomLeftY))+" "+I(B.mediaBox.topRightX)+" "+I(B.mediaBox.topRightY)+"]"),B.cropBox!==null&&de("/CropBox ["+I(B.cropBox.bottomLeftX)+" "+I(B.cropBox.bottomLeftY)+" "+I(B.cropBox.topRightX)+" "+I(B.cropBox.topRightY)+"]"),B.bleedBox!==null&&de("/BleedBox ["+I(B.bleedBox.bottomLeftX)+" "+I(B.bleedBox.bottomLeftY)+" "+I(B.bleedBox.topRightX)+" "+I(B.bleedBox.topRightY)+"]"),B.trimBox!==null&&de("/TrimBox ["+I(B.trimBox.bottomLeftX)+" "+I(B.trimBox.bottomLeftY)+" "+I(B.trimBox.topRightX)+" "+I(B.trimBox.topRightY)+"]"),B.artBox!==null&&de("/ArtBox ["+I(B.artBox.bottomLeftX)+" "+I(B.artBox.bottomLeftY)+" "+I(B.artBox.topRightX)+" "+I(B.artBox.topRightY)+"]"),typeof B.userUnit=="number"&&B.userUnit!==1&&de("/UserUnit "+B.userUnit),nn.publish("putPage",{objId:we,pageContext:Tt[ne],pageNumber:ne,page:ve}),de("/Contents "+Te+" 0 R"),de(">>"),de("endobj");var $e=ve.join(`
`);return P===M&&($e+=`
Q`),Lr(Te,!0),Ar({data:$e,filters:bi(),objectId:Te}),de("endobj"),we},Va=m.__private__.putPages=function(){var B,ne,ve=[];for(B=1;B<=Ut;B++)Tt[B].objId=yi(),Tt[B].contentsObjId=yi();for(B=1;B<=Ut;B++)ve.push(dr({number:B,data:Ve[B],objId:Tt[B].objId,contentsObjId:Tt[B].contentsObjId,mediaBox:Tt[B].mediaBox,cropBox:Tt[B].cropBox,bleedBox:Tt[B].bleedBox,trimBox:Tt[B].trimBox,artBox:Tt[B].artBox,userUnit:Tt[B].userUnit,rootDictionaryObjId:za,resourceDictionaryObjId:Ui}));Lr(za,!0),de("<</Type /Pages");var we="/Kids [";for(ne=0;ne<Ut;ne++)we+=ve[ne]+" 0 R ";de(we+"]"),de("/Count "+Ut),de(">>"),de("endobj"),nn.publish("postPutPages")},No=function(B){nn.publish("putFont",{font:B,out:de,newObject:_r,putStream:Ar}),B.isAlreadyPutted!==!0&&(B.objectNumber=_r(),de("<<"),de("/Type /Font"),de("/BaseFont /"+hh(B.postScriptName)),de("/Subtype /Type1"),typeof B.encoding=="string"&&de("/Encoding /"+B.encoding),de("/FirstChar 32"),de("/LastChar 255"),de(">>"),de("endobj"))},aa=function(B){B.objectNumber=_r();var ne=[];ne.push({key:"Type",value:"/XObject"}),ne.push({key:"Subtype",value:"/Form"}),ne.push({key:"BBox",value:"["+[I(B.x),I(B.y),I(B.x+B.width),I(B.y+B.height)].join(" ")+"]"}),ne.push({key:"Matrix",value:"["+B.matrix.toString()+"]"});var ve=B.pages[1].join(`
`);Ar({data:ve,additionalKeyValues:ne,objectId:B.objectNumber}),de("endobj")},qa=function(B,ne){ne||(ne=21);var ve=_r(),we=function(Ke,bt){var Nt,Gt=[],on=1/(bt-1);for(Nt=0;Nt<1;Nt+=on)Gt.push(Nt);if(Gt.push(1),Ke[0].offset!=0){var An={offset:0,color:Ke[0].color};Ke.unshift(An)}if(Ke[Ke.length-1].offset!=1){var Qn={offset:1,color:Ke[Ke.length-1].color};Ke.push(Qn)}for(var Fr="",ir=0,Xr=0;Xr<Gt.length;Xr++){for(Nt=Gt[Xr];Nt>Ke[ir+1].offset;)ir++;var Ur=Ke[ir].offset,Kr=(Nt-Ur)/(Ke[ir+1].offset-Ur),zr=Ke[ir].color,Ka=Ke[ir+1].color;Fr+=J(Math.round((1-Kr)*zr[0]+Kr*Ka[0]).toString(16))+J(Math.round((1-Kr)*zr[1]+Kr*Ka[1]).toString(16))+J(Math.round((1-Kr)*zr[2]+Kr*Ka[2]).toString(16))}return Fr.trim()}(B.colors,ne),Te=[];Te.push({key:"FunctionType",value:"0"}),Te.push({key:"Domain",value:"[0.0 1.0]"}),Te.push({key:"Size",value:"["+ne+"]"}),Te.push({key:"BitsPerSample",value:"8"}),Te.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Te.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Ar({data:we,additionalKeyValues:Te,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:ve}),de("endobj"),B.objectNumber=_r(),de("<< /ShadingType "+B.type),de("/ColorSpace /DeviceRGB");var $e="/Coords ["+I(parseFloat(B.coords[0]))+" "+I(parseFloat(B.coords[1]))+" ";B.type===2?$e+=I(parseFloat(B.coords[2]))+" "+I(parseFloat(B.coords[3])):$e+=I(parseFloat(B.coords[2]))+" "+I(parseFloat(B.coords[3]))+" "+I(parseFloat(B.coords[4]))+" "+I(parseFloat(B.coords[5])),de($e+="]"),B.matrix&&de("/Matrix ["+B.matrix.toString()+"]"),de("/Function "+ve+" 0 R"),de("/Extend [true true]"),de(">>"),de("endobj")},Zs=function(B,ne){var ve=yi(),we=_r();ne.push({resourcesOid:ve,objectOid:we}),B.objectNumber=we;var Te=[];Te.push({key:"Type",value:"/Pattern"}),Te.push({key:"PatternType",value:"1"}),Te.push({key:"PaintType",value:"1"}),Te.push({key:"TilingType",value:"1"}),Te.push({key:"BBox",value:"["+B.boundingBox.map(I).join(" ")+"]"}),Te.push({key:"XStep",value:I(B.xStep)}),Te.push({key:"YStep",value:I(B.yStep)}),Te.push({key:"Resources",value:ve+" 0 R"}),B.matrix&&Te.push({key:"Matrix",value:"["+B.matrix.toString()+"]"}),Ar({data:B.stream,additionalKeyValues:Te,objectId:B.objectNumber}),de("endobj")},fu=function(B){for(var ne in B.objectNumber=_r(),de("<<"),B)switch(ne){case"opacity":de("/ca "+N(B[ne]));break;case"stroke-opacity":de("/CA "+N(B[ne]))}de(">>"),de("endobj")},ts=function(B){Lr(B.resourcesOid,!0),de("<<"),de("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),function(){for(var ne in de("/Font <<"),Bt)Bt.hasOwnProperty(ne)&&(p===!1||p===!0&&g.hasOwnProperty(ne))&&de("/"+ne+" "+Bt[ne].objectNumber+" 0 R");de(">>")}(),function(){if(Object.keys(kt).length>0){for(var ne in de("/Shading <<"),kt)kt.hasOwnProperty(ne)&&kt[ne]instanceof Jf&&kt[ne].objectNumber>=0&&de("/"+ne+" "+kt[ne].objectNumber+" 0 R");nn.publish("putShadingPatternDict"),de(">>")}}(),function(ne){if(Object.keys(kt).length>0){for(var ve in de("/Pattern <<"),kt)kt.hasOwnProperty(ve)&&kt[ve]instanceof m.TilingPattern&&kt[ve].objectNumber>=0&&kt[ve].objectNumber<ne&&de("/"+ve+" "+kt[ve].objectNumber+" 0 R");nn.publish("putTilingPatternDict"),de(">>")}}(B.objectOid),function(){if(Object.keys(Ft).length>0){var ne;for(ne in de("/ExtGState <<"),Ft)Ft.hasOwnProperty(ne)&&Ft[ne].objectNumber>=0&&de("/"+ne+" "+Ft[ne].objectNumber+" 0 R");nn.publish("putGStateDict"),de(">>")}}(),function(){for(var ne in de("/XObject <<"),wr)wr.hasOwnProperty(ne)&&wr[ne].objectNumber>=0&&de("/"+ne+" "+wr[ne].objectNumber+" 0 R");nn.publish("putXobjectDict"),de(">>")}(),de(">>"),de("endobj")},mc=function(B){jt[B.fontName]=jt[B.fontName]||{},jt[B.fontName][B.fontStyle]=B.id},ns=function(B,ne,ve,we,Te){var $e={id:"F"+(Object.keys(Bt).length+1).toString(10),postScriptName:B,fontName:ne,fontStyle:ve,encoding:we,isStandardFont:Te||!1,metadata:{}};return nn.publish("addFont",{font:$e,instance:this}),Bt[$e.id]=$e,mc($e),$e.id},oi=m.__private__.pdfEscape=m.pdfEscape=function(B,ne){return function(ve,we){var Te,$e,Ke,bt,Nt,Gt,on,An,Qn;if(Ke=(we=we||{}).sourceEncoding||"Unicode",Nt=we.outputEncoding,(we.autoencode||Nt)&&Bt[ut].metadata&&Bt[ut].metadata[Ke]&&Bt[ut].metadata[Ke].encoding&&(bt=Bt[ut].metadata[Ke].encoding,!Nt&&Bt[ut].encoding&&(Nt=Bt[ut].encoding),!Nt&&bt.codePages&&(Nt=bt.codePages[0]),typeof Nt=="string"&&(Nt=bt[Nt]),Nt)){for(on=!1,Gt=[],Te=0,$e=ve.length;Te<$e;Te++)(An=Nt[ve.charCodeAt(Te)])?Gt.push(String.fromCharCode(An)):Gt.push(ve[Te]),Gt[Te].charCodeAt(0)>>8&&(on=!0);ve=Gt.join("")}for(Te=ve.length;on===void 0&&Te!==0;)ve.charCodeAt(Te-1)>>8&&(on=!0),Te--;if(!on)return ve;for(Gt=we.noBOM?[]:[254,255],Te=0,$e=ve.length;Te<$e;Te++){if((Qn=(An=ve.charCodeAt(Te))>>8)>>8)throw new Error("Character at position "+Te+" of string '"+ve+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Gt.push(Qn),Gt.push(An-(Qn<<8))}return String.fromCharCode.apply(void 0,Gt)}(B,ne).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},si=m.__private__.beginPage=function(B){Ve[++Ut]=[],Tt[Ut]={objId:0,contentsObjId:0,userUnit:Number(s),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(B[0]),topRightY:Number(B[1])}},Do(Ut),ft(Ve[W])},bs=function(B,ne){var ve,we,Te;switch(t=ne||t,typeof B=="string"&&(ve=S(B.toLowerCase()),Array.isArray(ve)&&(we=ve[0],Te=ve[1])),Array.isArray(B)&&(we=B[0]*xt,Te=B[1]*xt),isNaN(we)&&(we=i[0],Te=i[1]),(we>14400||Te>14400)&&(Or.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),we=Math.min(14400,we),Te=Math.min(14400,Te)),i=[we,Te],t.substr(0,1)){case"l":Te>we&&(i=[Te,we]);break;case"p":we>Te&&(i=[Te,we])}si(i),qt(go),de(Ga),jn!==0&&de(jn+" J"),Ts!==0&&de(Ts+" j"),nn.publish("addPage",{pageNumber:Ut})},jl=function(B){B>0&&B<=Ut&&(Ve.splice(B,1),Tt.splice(B,1),Ut--,W>Ut&&(W=Ut),this.setPage(W))},Do=function(B){B>0&&B<=Ut&&(W=B)},Js=m.__private__.getNumberOfPages=m.getNumberOfPages=function(){return Ve.length-1},el=function(B,ne,ve){var we,Te=void 0;return ve=ve||{},B=B!==void 0?B:Bt[ut].fontName,ne=ne!==void 0?ne:Bt[ut].fontStyle,we=B.toLowerCase(),jt[we]!==void 0&&jt[we][ne]!==void 0?Te=jt[we][ne]:jt[B]!==void 0&&jt[B][ne]!==void 0?Te=jt[B][ne]:ve.disableWarning===!1&&Or.warn("Unable to look up font label for font '"+B+"', '"+ne+"'. Refer to getFontList() for available fonts."),Te||ve.noFallback||(Te=jt.times[ne])==null&&(Te=jt.times.normal),Te},Ha=m.__private__.putInfo=function(){var B=_r(),ne=function(we){return we};for(var ve in d!==null&&(ne=bn.encryptor(B,0)),de("<<"),de("/Producer ("+oi(ne("jsPDF "+Vt.version))+")"),_t)_t.hasOwnProperty(ve)&&_t[ve]&&de("/"+ve.substr(0,1).toUpperCase()+ve.substr(1)+" ("+oi(ne(_t[ve]))+")");de("/CreationDate ("+oi(ne(G))+")"),de(">>"),de("endobj")},rs=m.__private__.putCatalog=function(B){var ne=(B=B||{}).rootDictionaryObjId||za;switch(_r(),de("<<"),de("/Type /Catalog"),de("/Pages "+ne+" 0 R"),lt||(lt="fullwidth"),lt){case"fullwidth":de("/OpenAction [3 0 R /FitH null]");break;case"fullheight":de("/OpenAction [3 0 R /FitV null]");break;case"fullpage":de("/OpenAction [3 0 R /Fit]");break;case"original":de("/OpenAction [3 0 R /XYZ null null 1]");break;default:var ve=""+lt;ve.substr(ve.length-1)==="%"&&(lt=parseInt(lt)/100),typeof lt=="number"&&de("/OpenAction [3 0 R /XYZ null null "+N(lt)+"]")}switch(Lt||(Lt="continuous"),Lt){case"continuous":de("/PageLayout /OneColumn");break;case"single":de("/PageLayout /SinglePage");break;case"two":case"twoleft":de("/PageLayout /TwoColumnLeft");break;case"tworight":de("/PageLayout /TwoColumnRight")}ct&&de("/PageMode /"+ct),nn.publish("putCatalog"),de(">>"),de("endobj")},Gi=m.__private__.putTrailer=function(){de("trailer"),de("<<"),de("/Size "+(he+1)),de("/Root "+he+" 0 R"),de("/Info "+(he-1)+" 0 R"),d!==null&&de("/Encrypt "+bn.oid+" 0 R"),de("/ID [ <"+U+"> <"+U+"> ]"),de(">>")},Pr=m.__private__.putHeader=function(){de("%PDF-"+x),de("%")},du=m.__private__.putXRef=function(){var B="0000000000";de("xref"),de("0 "+(he+1)),de("0000000000 65535 f ");for(var ne=1;ne<=he;ne++)typeof be[ne]=="function"?de((B+be[ne]()).slice(-10)+" 00000 n "):be[ne]!==void 0?de((B+be[ne]).slice(-10)+" 00000 n "):de("0000000000 00000 n ")},ba=m.__private__.buildDocument=function(){var B;he=0,Ie=0,_e=[],be=[],Oe=[],za=yi(),Ui=yi(),ft(_e),nn.publish("buildDocument"),Pr(),Va(),function(){nn.publish("putAdditionalObjects");for(var ve=0;ve<Oe.length;ve++){var we=Oe[ve];Lr(we.objId,!0),de(we.content),de("endobj")}nn.publish("postPutAdditionalObjects")}(),B=[],function(){for(var ve in Bt)Bt.hasOwnProperty(ve)&&(p===!1||p===!0&&g.hasOwnProperty(ve))&&No(Bt[ve])}(),function(){var ve;for(ve in Ft)Ft.hasOwnProperty(ve)&&fu(Ft[ve])}(),function(){for(var ve in wr)wr.hasOwnProperty(ve)&&aa(wr[ve])}(),function(ve){var we;for(we in kt)kt.hasOwnProperty(we)&&(kt[we]instanceof Jf?qa(kt[we]):kt[we]instanceof yh&&Zs(kt[we],ve))}(B),nn.publish("putResources"),B.forEach(ts),ts({resourcesOid:Ui,objectOid:Number.MAX_SAFE_INTEGER}),nn.publish("postPutResources"),d!==null&&(bn.oid=_r(),de("<<"),de("/Filter /Standard"),de("/V "+bn.v),de("/R "+bn.r),de("/U <"+bn.toHexString(bn.U)+">"),de("/O <"+bn.toHexString(bn.O)+">"),de("/P "+bn.P),de(">>"),de("endobj")),Ha(),rs();var ne=Ie;return du(),Gi(),de("startxref"),de(""+ne),de("%%EOF"),ft(Ve[W]),_e.join(`
`)},ws=m.__private__.getBlob=function(B){return new Blob([dt(B)],{type:"application/pdf"})},_s=m.output=m.__private__.output=(Br=function(B,ne){switch(typeof(ne=ne||{})=="string"?ne={filename:ne}:ne.filename=ne.filename||"generated.pdf",B){case void 0:return ba();case"save":m.save(ne.filename);break;case"arraybuffer":return dt(ba());case"blob":return ws(ba());case"bloburi":case"bloburl":if(cn.URL!==void 0&&typeof cn.URL.createObjectURL=="function")return cn.URL&&cn.URL.createObjectURL(ws(ba()))||void 0;Or.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var ve="",we=ba();try{ve=iA(we)}catch{ve=iA(unescape(encodeURIComponent(we)))}return"data:application/pdf;filename="+ne.filename+";base64,"+ve;case"pdfobjectnewwindow":if(Object.prototype.toString.call(cn)==="[object Window]"){var Te="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",$e=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';ne.pdfObjectUrl&&(Te=ne.pdfObjectUrl,$e="");var Ke='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Te+'"'+$e+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(ne)+");<\/script></body></html>",bt=cn.open();return bt!==null&&bt.document.write(Ke),bt}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(cn)==="[object Window]"){var Nt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(ne.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+ne.filename+'" width="500px" height="400px" /></body></html>',Gt=cn.open();if(Gt!==null){Gt.document.write(Nt);var on=this;Gt.document.documentElement.querySelector("#pdfViewer").onload=function(){Gt.document.title=ne.filename,Gt.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(on.output("bloburl"))}}return Gt}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(cn)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var An='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",ne)+'"></iframe></body></html>',Qn=cn.open();if(Qn!==null&&(Qn.document.write(An),Qn.document.title=ne.filename),Qn||typeof safari>"u")return Qn;break;case"datauri":case"dataurl":return cn.document.location.href=this.output("datauristring",ne);default:return null}},Br.foo=function(){try{return Br.apply(this,arguments)}catch(ve){var B=ve.stack||"";~B.indexOf(" at ")&&(B=B.split(" at ")[1]);var ne="Error in function "+B.split(`
`)[0].split("<")[0]+": "+ve.message;if(!cn.console)throw new Error(ne);cn.console.error(ne,ve),cn.alert&&alert(ne)}},Br.foo.bar=Br,Br.foo),Wa=function(B){return Array.isArray($i)===!0&&$i.indexOf(B)>-1};switch(r){case"pt":xt=1;break;case"mm":xt=72/25.4;break;case"cm":xt=72/2.54;break;case"in":xt=72;break;case"px":xt=Wa("px_scaling")==1?.75:96/72;break;case"pc":case"em":xt=12;break;case"ex":xt=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);xt=r}var bn=null;ie(),te();var li=m.__private__.getPageInfo=m.getPageInfo=function(B){if(isNaN(B)||B%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Tt[B].objId,pageNumber:B,pageContext:Tt[B]}},As=m.__private__.getPageInfoByObjId=function(B){if(isNaN(B)||B%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var ne in Tt)if(Tt[ne].objId===B)break;return li(ne)},Ss=m.__private__.getCurrentPageInfo=m.getCurrentPageInfo=function(){return{objId:Tt[W].objId,pageNumber:W,pageContext:Tt[W]}};m.addPage=function(){return bs.apply(this,arguments),this},m.setPage=function(){return Do.apply(this,arguments),ft.call(this,Ve[W]),this},m.insertPage=function(B){return this.addPage(),this.movePage(W,B),this},m.movePage=function(B,ne){var ve,we;if(B>ne){ve=Ve[B],we=Tt[B];for(var Te=B;Te>ne;Te--)Ve[Te]=Ve[Te-1],Tt[Te]=Tt[Te-1];Ve[ne]=ve,Tt[ne]=we,this.setPage(ne)}else if(B<ne){ve=Ve[B],we=Tt[B];for(var $e=B;$e<ne;$e++)Ve[$e]=Ve[$e+1],Tt[$e]=Tt[$e+1];Ve[ne]=ve,Tt[ne]=we,this.setPage(ne)}return this},m.deletePage=function(){return jl.apply(this,arguments),this},m.__private__.text=m.text=function(B,ne,ve,we,Te){var $e,Ke,bt,Nt,Gt,on,An,Qn,Fr,ir=(we=we||{}).scope||this;if(typeof B=="number"&&typeof ne=="number"&&(typeof ve=="string"||Array.isArray(ve))){var Xr=ve;ve=ne,ne=B,B=Xr}if(arguments[3]instanceof Wt==0?(bt=arguments[4],Nt=arguments[5],br(An=arguments[3])==="object"&&An!==null||(typeof bt=="string"&&(Nt=bt,bt=null),typeof An=="string"&&(Nt=An,An=null),typeof An=="number"&&(bt=An,An=null),we={flags:An,angle:bt,align:Nt})):(T("The transform parameter of text() with a Matrix value"),Fr=Te),isNaN(ne)||isNaN(ve)||B==null)throw new Error("Invalid arguments passed to jsPDF.text");if(B.length===0)return ir;var Ur,Kr="",zr=typeof we.lineHeightFactor=="number"?we.lineHeightFactor:_a,Ka=ir.internal.scaleFactor;function jo(On){return On=On.split("	").join(Array(we.TabLen||9).join(" ")),oi(On,An)}function Qa(On){for(var ar,Zr=On.concat(),Rr=[],ks=Zr.length;ks--;)typeof(ar=Zr.shift())=="string"?Rr.push(ar):Array.isArray(On)&&(ar.length===1||ar[1]===void 0&&ar[2]===void 0)?Rr.push(ar[0]):Rr.push([ar[0],ar[1],ar[2]]);return Rr}function w(On,ar){var Zr;if(typeof On=="string")Zr=ar(On)[0];else if(Array.isArray(On)){for(var Rr,ks,wu=On.concat(),Ac=[],Cd=wu.length;Cd--;)typeof(Rr=wu.shift())=="string"?Ac.push(ar(Rr)[0]):Array.isArray(Rr)&&typeof Rr[0]=="string"&&(ks=ar(Rr[0],Rr[1],Rr[2]),Ac.push([ks[0],ks[1],ks[2]]));Zr=Ac}return Zr}var q=!1,K=!0;if(typeof B=="string")q=!0;else if(Array.isArray(B)){var fe=B.concat();Ke=[];for(var Ne,Be=fe.length;Be--;)(typeof(Ne=fe.shift())!="string"||Array.isArray(Ne)&&typeof Ne[0]!="string")&&(K=!1);q=K}if(q===!1)throw new Error('Type of text must be string or Array. "'+B+'" is not recognized.');typeof B=="string"&&(B=B.match(/[\r?\n]/)?B.split(/\r\n|\r|\n/g):[B]);var st=Ee/ir.internal.scaleFactor,vn=st*(zr-1);switch(we.baseline){case"bottom":ve-=vn;break;case"top":ve+=st-vn;break;case"hanging":ve+=st-2*vn;break;case"middle":ve+=st/2-vn}if((on=we.maxWidth||0)>0&&(typeof B=="string"?B=ir.splitTextToSize(B,on):Object.prototype.toString.call(B)==="[object Array]"&&(B=B.reduce(function(On,ar){return On.concat(ir.splitTextToSize(ar,on))},[]))),$e={text:B,x:ne,y:ve,options:we,mutex:{pdfEscape:oi,activeFontKey:ut,fonts:Bt,activeFontSize:Ee}},nn.publish("preProcessText",$e),B=$e.text,bt=(we=$e.options).angle,Fr instanceof Wt==0&&bt&&typeof bt=="number"){bt*=Math.PI/180,we.rotationDirection===0&&(bt=-bt),P===M&&(bt=-bt);var Vr=Math.cos(bt),wn=Math.sin(bt);Fr=new Wt(Vr,wn,-wn,Vr,0,0)}else bt&&bt instanceof Wt&&(Fr=bt);P!==M||Fr||(Fr=fr),(Gt=we.charSpace||vo)!==void 0&&(Kr+=I(D(Gt))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Qn=we.horizontalScale)!==void 0&&(Kr+=I(100*Qn)+` Tz
`),we.lang;var Hn=-1,hr=we.renderingMode!==void 0?we.renderingMode:we.stroke,Za=ir.internal.getCurrentPageInfo().pageContext;switch(hr){case 0:case!1:case"fill":Hn=0;break;case 1:case!0:case"stroke":Hn=1;break;case 2:case"fillThenStroke":Hn=2;break;case 3:case"invisible":Hn=3;break;case 4:case"fillAndAddForClipping":Hn=4;break;case 5:case"strokeAndAddPathForClipping":Hn=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Hn=6;break;case 7:case"addToPathForClipping":Hn=7}var Ai=Za.usedRenderingMode!==void 0?Za.usedRenderingMode:-1;Hn!==-1?Kr+=Hn+` Tr
`:Ai!==-1&&(Kr+=`0 Tr
`),Hn!==-1&&(Za.usedRenderingMode=Hn),Nt=we.align||"left";var ci,os=Ee*zr,Fl=ir.internal.pageSize.getWidth(),gu=Bt[ut];Gt=we.charSpace||vo,on=we.maxWidth||0,An=Object.assign({autoencode:!0,noBOM:!0},we.flags);var il=[],al=function(On){return ir.getStringUnitWidth(On,{font:gu,charSpace:Gt,fontSize:Ee,doKerning:!1})*Ee/Ka};if(Object.prototype.toString.call(B)==="[object Array]"){var Ea;Ke=Qa(B),Nt!=="left"&&(ci=Ke.map(al));var Ja,ol=0;if(Nt==="right"){ne-=ci[0],B=[],Be=Ke.length;for(var Ds=0;Ds<Be;Ds++)Ds===0?(Ja=wi(ne),Ea=Aa(ve)):(Ja=D(ol-ci[Ds]),Ea=-os),B.push([Ke[Ds],Ja,Ea]),ol=ci[Ds]}else if(Nt==="center"){ne-=ci[0]/2,B=[],Be=Ke.length;for(var Ul=0;Ul<Be;Ul++)Ul===0?(Ja=wi(ne),Ea=Aa(ve)):(Ja=D((ol-ci[Ul])/2),Ea=-os),B.push([Ke[Ul],Ja,Ea]),ol=ci[Ul]}else if(Nt==="left"){B=[],Be=Ke.length;for(var If=0;If<Be;If++)B.push(Ke[If])}else if(Nt==="justify"&&gu.encoding==="Identity-H"){B=[],Be=Ke.length,on=on!==0?on:Fl;for(var mu=0,ui=0;ui<Be;ui++)if(Ea=ui===0?Aa(ve):-os,Ja=ui===0?wi(ne):mu,ui<Be-1){var Ed=D((on-ci[ui])/(Ke[ui].split(" ").length-1)),Qr=Ke[ui].split(" ");B.push([Qr[0]+" ",Ja,Ea]),mu=0;for(var eo=1;eo<Qr.length;eo++){var vu=(al(Qr[eo-1]+" "+Qr[eo])-al(Qr[eo]))*Ka+Ed;eo==Qr.length-1?B.push([Qr[eo],vu,0]):B.push([Qr[eo]+" ",vu,0]),mu-=vu}}else B.push([Ke[ui],Ja,Ea]);B.push(["",mu,0])}else{if(Nt!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(B=[],Be=Ke.length,on=on!==0?on:Fl,ui=0;ui<Be;ui++){Ea=ui===0?Aa(ve):-os,Ja=ui===0?wi(ne):0;var yu=Ke[ui].split(" ").length-1,xu=yu>0?(on-ci[ui])/yu:0;ui<Be-1?il.push(I(D(xu))):il.push(0),B.push([Ke[ui],Ja,Ea])}}}(typeof we.R2L=="boolean"?we.R2L:vt)===!0&&(B=w(B,function(On,ar,Zr){return[On.split("").reverse().join(""),ar,Zr]})),$e={text:B,x:ne,y:ve,options:we,mutex:{pdfEscape:oi,activeFontKey:ut,fonts:Bt,activeFontSize:Ee}},nn.publish("postProcessText",$e),B=$e.text,Ur=$e.mutex.isHex||!1;var bu=Bt[ut].encoding;bu!=="WinAnsiEncoding"&&bu!=="StandardEncoding"||(B=w(B,function(On,ar,Zr){return[jo(On),ar,Zr]})),Ke=Qa(B),B=[];for(var Os,zl,xo,sl=Array.isArray(Ke[0])?1:0,Bo="",ll=function(On,ar,Zr){var Rr="";return Zr instanceof Wt?(Zr=typeof we.angle=="number"?qn(Zr,new Wt(1,0,0,1,On,ar)):qn(new Wt(1,0,0,1,On,ar),Zr),P===M&&(Zr=qn(new Wt(1,0,0,-1,0,0),Zr)),Rr=Zr.join(" ")+` Tm
`):Rr=I(On)+" "+I(ar)+` Td
`,Rr},bo=0;bo<Ke.length;bo++){switch(Bo="",sl){case 1:xo=(Ur?"<":"(")+Ke[bo][0]+(Ur?">":")"),Os=parseFloat(Ke[bo][1]),zl=parseFloat(Ke[bo][2]);break;case 0:xo=(Ur?"<":"(")+Ke[bo]+(Ur?">":")"),Os=wi(ne),zl=Aa(ve)}il!==void 0&&il[bo]!==void 0&&(Bo=il[bo]+` Tw
`),bo===0?B.push(Bo+ll(Os,zl,Fr)+xo):sl===0?B.push(Bo+xo):sl===1&&B.push(Bo+ll(Os,zl,Fr)+xo)}B=sl===0?B.join(` Tj
T* `):B.join(` Tj
`),B+=` Tj
`;var la=`BT
/`;return la+=ut+" "+Ee+` Tf
`,la+=I(Ee*zr)+` TL
`,la+=oa+`
`,la+=Kr,la+=B,de(la+="ET"),g[ut]=!0,ir};var is=m.__private__.clip=m.clip=function(B){return de(B==="evenodd"?"W*":"W"),this};m.clipEvenOdd=function(){return is("evenodd")},m.__private__.discardPath=m.discardPath=function(){return de("n"),this};var _n=m.__private__.isValidStyle=function(B){var ne=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(B)!==-1&&(ne=!0),ne};m.__private__.setDefaultPathOperation=m.setDefaultPathOperation=function(B){return _n(B)&&(f=B),this};var Es=m.__private__.getStyle=m.getStyle=function(B){var ne=f;switch(B){case"D":case"S":ne="S";break;case"F":ne="f";break;case"FD":case"DF":ne="B";break;case"f":case"f*":case"B":case"B*":ne=B}return ne},wa=m.close=function(){return de("h"),this};m.stroke=function(){return de("S"),this},m.fill=function(B){return Oo("f",B),this},m.fillEvenOdd=function(B){return Oo("f*",B),this},m.fillStroke=function(B){return Oo("B",B),this},m.fillStrokeEvenOdd=function(B){return Oo("B*",B),this};var Oo=function(B,ne){br(ne)==="object"?yc(ne,B):de(B)},Cs=function(B){B===null||P===M&&B===void 0||(B=Es(B),de(B))};function vc(B,ne,ve,we,Te){var $e=new yh(ne||this.boundingBox,ve||this.xStep,we||this.yStep,this.gState,Te||this.matrix);$e.stream=this.stream;var Ke=B+"$$"+this.cloneIndex+++"$$";return Kn(Ke,$e),$e}var yc=function(B,ne){var ve=Pn[B.key],we=kt[ve];if(we instanceof Jf)de("q"),de(Cf(ne)),we.gState&&m.setGState(we.gState),de(B.matrix.toString()+" cm"),de("/"+ve+" sh"),de("Q");else if(we instanceof yh){var Te=new Wt(1,0,0,-1,0,Mo());B.matrix&&(Te=Te.multiply(B.matrix||fr),ve=vc.call(we,B.key,B.boundingBox,B.xStep,B.yStep,Te).id),de("q"),de("/Pattern cs"),de("/"+ve+" scn"),we.gState&&m.setGState(we.gState),de(ne),de("Q")}},Cf=function(B){switch(B){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},xc=m.moveTo=function(B,ne){return de(I(D(B))+" "+I(L(ne))+" m"),this},tl=m.lineTo=function(B,ne){return de(I(D(B))+" "+I(L(ne))+" l"),this},Ii=m.curveTo=function(B,ne,ve,we,Te,$e){return de([I(D(B)),I(L(ne)),I(D(ve)),I(L(we)),I(D(Te)),I(L($e)),"c"].join(" ")),this};m.__private__.line=m.line=function(B,ne,ve,we,Te){if(isNaN(B)||isNaN(ne)||isNaN(ve)||isNaN(we)||!_n(Te))throw new Error("Invalid arguments passed to jsPDF.line");return P===k?this.lines([[ve-B,we-ne]],B,ne,[1,1],Te||"S"):this.lines([[ve-B,we-ne]],B,ne,[1,1]).stroke()},m.__private__.lines=m.lines=function(B,ne,ve,we,Te,$e){var Ke,bt,Nt,Gt,on,An,Qn,Fr,ir,Xr,Ur,Kr;if(typeof B=="number"&&(Kr=ve,ve=ne,ne=B,B=Kr),we=we||[1,1],$e=$e||!1,isNaN(ne)||isNaN(ve)||!Array.isArray(B)||!Array.isArray(we)||!_n(Te)||typeof $e!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(xc(ne,ve),Ke=we[0],bt=we[1],Gt=B.length,Xr=ne,Ur=ve,Nt=0;Nt<Gt;Nt++)(on=B[Nt]).length===2?(Xr=on[0]*Ke+Xr,Ur=on[1]*bt+Ur,tl(Xr,Ur)):(An=on[0]*Ke+Xr,Qn=on[1]*bt+Ur,Fr=on[2]*Ke+Xr,ir=on[3]*bt+Ur,Xr=on[4]*Ke+Xr,Ur=on[5]*bt+Ur,Ii(An,Qn,Fr,ir,Xr,Ur));return $e&&wa(),Cs(Te),this},m.path=function(B){for(var ne=0;ne<B.length;ne++){var ve=B[ne],we=ve.c;switch(ve.op){case"m":xc(we[0],we[1]);break;case"l":tl(we[0],we[1]);break;case"c":Ii.apply(this,we);break;case"h":wa()}}return this},m.__private__.rect=m.rect=function(B,ne,ve,we,Te){if(isNaN(B)||isNaN(ne)||isNaN(ve)||isNaN(we)||!_n(Te))throw new Error("Invalid arguments passed to jsPDF.rect");return P===k&&(we=-we),de([I(D(B)),I(L(ne)),I(D(ve)),I(D(we)),"re"].join(" ")),Cs(Te),this},m.__private__.triangle=m.triangle=function(B,ne,ve,we,Te,$e,Ke){if(isNaN(B)||isNaN(ne)||isNaN(ve)||isNaN(we)||isNaN(Te)||isNaN($e)||!_n(Ke))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[ve-B,we-ne],[Te-ve,$e-we],[B-Te,ne-$e]],B,ne,[1,1],Ke,!0),this},m.__private__.roundedRect=m.roundedRect=function(B,ne,ve,we,Te,$e,Ke){if(isNaN(B)||isNaN(ne)||isNaN(ve)||isNaN(we)||isNaN(Te)||isNaN($e)||!_n(Ke))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var bt=4/3*(Math.SQRT2-1);return Te=Math.min(Te,.5*ve),$e=Math.min($e,.5*we),this.lines([[ve-2*Te,0],[Te*bt,0,Te,$e-$e*bt,Te,$e],[0,we-2*$e],[0,$e*bt,-Te*bt,$e,-Te,$e],[2*Te-ve,0],[-Te*bt,0,-Te,-$e*bt,-Te,-$e],[0,2*$e-we],[0,-$e*bt,Te*bt,-$e,Te,-$e]],B+Te,ne,[1,1],Ke,!0),this},m.__private__.ellipse=m.ellipse=function(B,ne,ve,we,Te){if(isNaN(B)||isNaN(ne)||isNaN(ve)||isNaN(we)||!_n(Te))throw new Error("Invalid arguments passed to jsPDF.ellipse");var $e=4/3*(Math.SQRT2-1)*ve,Ke=4/3*(Math.SQRT2-1)*we;return xc(B+ve,ne),Ii(B+ve,ne-Ke,B+$e,ne-we,B,ne-we),Ii(B-$e,ne-we,B-ve,ne-Ke,B-ve,ne),Ii(B-ve,ne+Ke,B-$e,ne+we,B,ne+we),Ii(B+$e,ne+we,B+ve,ne+Ke,B+ve,ne),Cs(Te),this},m.__private__.circle=m.circle=function(B,ne,ve,we){if(isNaN(B)||isNaN(ne)||isNaN(ve)||!_n(we))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(B,ne,ve,ve,we)},m.setFont=function(B,ne,ve){return ve&&(ne=F(ne,ve)),ut=el(B,ne,{disableWarning:!1}),this};var $a=m.__private__.getFont=m.getFont=function(){return Bt[el.apply(m,arguments)]};m.__private__.getFontList=m.getFontList=function(){var B,ne,ve={};for(B in jt)if(jt.hasOwnProperty(B))for(ne in ve[B]=[],jt[B])jt[B].hasOwnProperty(ne)&&ve[B].push(ne);return ve},m.addFont=function(B,ne,ve,we,Te){var $e=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&$e.indexOf(arguments[3])!==-1?Te=arguments[3]:arguments[3]&&$e.indexOf(arguments[3])==-1&&(ve=F(ve,we)),ns.call(this,B,ne,ve,Te=Te||"Identity-H")};var _a,go=n.lineWidth||.200025,bc=m.__private__.getLineWidth=m.getLineWidth=function(){return go},qt=m.__private__.setLineWidth=m.setLineWidth=function(B){return go=B,de(I(D(B))+" w"),this};m.__private__.setLineDash=Vt.API.setLineDash=Vt.API.setLineDashPattern=function(B,ne){if(B=B||[],ne=ne||0,isNaN(ne)||!Array.isArray(B))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return B=B.map(function(ve){return I(D(ve))}).join(" "),ne=I(D(ne)),de("["+B+"] "+ne+" d"),this};var hu=m.__private__.getLineHeight=m.getLineHeight=function(){return Ee*_a};m.__private__.getLineHeight=m.getLineHeight=function(){return Ee*_a};var nl=m.__private__.setLineHeightFactor=m.setLineHeightFactor=function(B){return typeof(B=B||1.15)=="number"&&(_a=B),this},mo=m.__private__.getLineHeightFactor=m.getLineHeightFactor=function(){return _a};nl(n.lineHeight);var wi=m.__private__.getHorizontalCoordinate=function(B){return D(B)},Aa=m.__private__.getVerticalCoordinate=function(B){return P===M?B:Tt[W].mediaBox.topRightY-Tt[W].mediaBox.bottomLeftY-D(B)},ko=m.__private__.getHorizontalCoordinateString=m.getHorizontalCoordinateString=function(B){return I(wi(B))},Is=m.__private__.getVerticalCoordinateString=m.getVerticalCoordinateString=function(B){return I(Aa(B))},Ga=n.strokeColor||"0 G";m.__private__.getStrokeColor=m.getDrawColor=function(){return zi(Ga)},m.__private__.setStrokeColor=m.setDrawColor=function(B,ne,ve,we){return Ga=xi({ch1:B,ch2:ne,ch3:ve,ch4:we,pdfColorType:"draw",precision:2}),de(Ga),this};var rl=n.fillColor||"0 g";m.__private__.getFillColor=m.getFillColor=function(){return zi(rl)},m.__private__.setFillColor=m.setFillColor=function(B,ne,ve,we){return rl=xi({ch1:B,ch2:ne,ch3:ve,ch4:we,pdfColorType:"fill",precision:2}),de(rl),this};var oa=n.textColor||"0 g",Lo=m.__private__.getTextColor=m.getTextColor=function(){return zi(oa)};m.__private__.setTextColor=m.setTextColor=function(B,ne,ve,we){return oa=xi({ch1:B,ch2:ne,ch3:ve,ch4:we,pdfColorType:"text",precision:3}),this};var vo=n.charSpace,_i=m.__private__.getCharSpace=m.getCharSpace=function(){return parseFloat(vo||0)};m.__private__.setCharSpace=m.setCharSpace=function(B){if(isNaN(B))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return vo=B,this};var jn=0;m.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},m.__private__.setLineCap=m.setLineCap=function(B){var ne=m.CapJoinStyles[B];if(ne===void 0)throw new Error("Line cap style of '"+B+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return jn=ne,de(ne+" J"),this};var Ts=0;m.__private__.setLineJoin=m.setLineJoin=function(B){var ne=m.CapJoinStyles[B];if(ne===void 0)throw new Error("Line join style of '"+B+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Ts=ne,de(ne+" j"),this},m.__private__.setLineMiterLimit=m.__private__.setMiterLimit=m.setLineMiterLimit=m.setMiterLimit=function(B){if(B=B||0,isNaN(B))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return de(I(D(B))+" M"),this},m.GState=Am,m.setGState=function(B){(B=typeof B=="string"?Ft[Ht[B]]:Rs(null,B)).equals(Mn)||(de("/"+B.id+" gs"),Mn=B)};var Rs=function(B,ne){if(!B||!Ht[B]){var ve=!1;for(var we in Ft)if(Ft.hasOwnProperty(we)&&Ft[we].equals(ne)){ve=!0;break}if(ve)ne=Ft[we];else{var Te="GS"+(Object.keys(Ft).length+1).toString(10);Ft[Te]=ne,ne.id=Te}return B&&(Ht[B]=ne.id),nn.publish("addGState",ne),ne}};m.addGState=function(B,ne){return Rs(B,ne),this},m.saveGraphicsState=function(){return de("q"),Vn.push({key:ut,size:Ee,color:oa}),this},m.restoreGraphicsState=function(){de("Q");var B=Vn.pop();return ut=B.key,Ee=B.size,oa=B.color,Mn=null,this},m.setCurrentTransformationMatrix=function(B){return de(B.toString()+" cm"),this},m.comment=function(B){return de("#"+B),this};var Po=function(B,ne){var ve=B||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return ve},set:function($e){isNaN($e)||(ve=parseFloat($e))}});var we=ne||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return we},set:function($e){isNaN($e)||(we=parseFloat($e))}});var Te="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Te},set:function($e){Te=$e.toString()}}),this},Ns=function(B,ne,ve,we){Po.call(this,B,ne),this.type="rect";var Te=ve||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Te},set:function(Ke){isNaN(Ke)||(Te=parseFloat(Ke))}});var $e=we||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return $e},set:function(Ke){isNaN(Ke)||($e=parseFloat(Ke))}}),this},as=function(){this.page=Ut,this.currentPage=W,this.pages=Ve.slice(0),this.pagesContext=Tt.slice(0),this.x=mt,this.y=mn,this.matrix=Kt,this.width=sa(W),this.height=pu(W),this.outputDestination=ot,this.id="",this.objectNumber=-1};as.prototype.restore=function(){Ut=this.page,W=this.currentPage,Tt=this.pagesContext,Ve=this.pages,mt=this.x,mn=this.y,Kt=this.matrix,wc(W,this.width),Sa(W,this.height),ot=this.outputDestination};var Ya=function(B,ne,ve,we,Te){Tr.push(new as),Ut=W=0,Ve=[],mt=B,mn=ne,Kt=Te,si([ve,we])};for(var yo in m.beginFormObject=function(B,ne,ve,we,Te){return Ya(B,ne,ve,we,Te),this},m.endFormObject=function(B){return function(ne){if(Yr[ne])Tr.pop().restore();else{var ve=new as,we="Xo"+(Object.keys(wr).length+1).toString(10);ve.id=we,Yr[ne]=we,wr[we]=ve,nn.publish("addFormObject",ve),Tr.pop().restore()}}(B),this},m.doFormObject=function(B,ne){var ve=wr[Yr[B]];return de("q"),de(ne.toString()+" cm"),de("/"+ve.id+" Do"),de("Q"),this},m.getFormObject=function(B){var ne=wr[Yr[B]];return{x:ne.x,y:ne.y,width:ne.width,height:ne.height,matrix:ne.matrix}},m.save=function(B,ne){return B=B||"generated.pdf",(ne=ne||{}).returnPromise=ne.returnPromise||!1,ne.returnPromise===!1?(Zf(ws(ba()),B),typeof Zf.unload=="function"&&cn.setTimeout&&setTimeout(Zf.unload,911),this):new Promise(function(ve,we){try{var Te=Zf(ws(ba()),B);typeof Zf.unload=="function"&&cn.setTimeout&&setTimeout(Zf.unload,911),ve(Te)}catch($e){we($e.message)}})},Vt.API)Vt.API.hasOwnProperty(yo)&&(yo==="events"&&Vt.API.events.length?function(B,ne){var ve,we,Te;for(Te=ne.length-1;Te!==-1;Te--)ve=ne[Te][0],we=ne[Te][1],B.subscribe.apply(B,[ve].concat(typeof we=="function"?[we]:we))}(nn,Vt.API.events):m[yo]=Vt.API[yo]);function sa(B){return Tt[B].mediaBox.topRightX-Tt[B].mediaBox.bottomLeftX}function wc(B,ne){Tt[B].mediaBox.topRightX=ne+Tt[B].mediaBox.bottomLeftX}function pu(B){return Tt[B].mediaBox.topRightY-Tt[B].mediaBox.bottomLeftY}function Sa(B,ne){Tt[B].mediaBox.topRightY=ne+Tt[B].mediaBox.bottomLeftY}var Xa=m.getPageWidth=function(B){return sa(B=B||W)/xt},Bl=m.setPageWidth=function(B,ne){wc(B,ne*xt)},Mo=m.getPageHeight=function(B){return pu(B=B||W)/xt},_c=m.setPageHeight=function(B,ne){Sa(B,ne*xt)};return m.internal={pdfEscape:oi,getStyle:Es,getFont:$a,getFontSize:Ye,getCharSpace:_i,getTextColor:Lo,getLineHeight:hu,getLineHeightFactor:mo,getLineWidth:bc,write:rt,getHorizontalCoordinate:wi,getVerticalCoordinate:Aa,getCoordinateString:ko,getVerticalCoordinateString:Is,collections:{},newObject:_r,newAdditionalObject:xs,newObjectDeferred:yi,newObjectDeferredBegin:Lr,getFilters:bi,putStream:Ar,events:nn,scaleFactor:xt,pageSize:{getWidth:function(){return Xa(W)},setWidth:function(B){Bl(W,B)},getHeight:function(){return Mo(W)},setHeight:function(B){_c(W,B)}},encryptionOptions:d,encryption:bn,getEncryptor:function(B){return d!==null?bn.encryptor(B,0):function(ne){return ne}},output:_s,getNumberOfPages:Js,get pages(){return Ve},out:de,f2:N,f3:R,getPageInfo:li,getPageInfoByObjId:As,getCurrentPageInfo:Ss,getPDFVersion:_,Point:Po,Rectangle:Ns,Matrix:Wt,hasHotfix:Wa},Object.defineProperty(m.internal.pageSize,"width",{get:function(){return Xa(W)},set:function(B){Bl(W,B)},enumerable:!0,configurable:!0}),Object.defineProperty(m.internal.pageSize,"height",{get:function(){return Mo(W)},set:function(B){_c(W,B)},enumerable:!0,configurable:!0}),(function(B){for(var ne=0,ve=at.length;ne<ve;ne++){var we=ns.call(this,B[ne][0],B[ne][1],B[ne][2],at[ne][3],!0);p===!1&&(g[we]=!0);var Te=B[ne][0].split("-");mc({id:we,fontName:Te[0],fontStyle:Te[1]||""})}nn.publish("addFonts",{fonts:Bt,dictionary:jt})}).call(m,at),ut="F1",bs(i,t),nn.publish("initialized"),m}dh.prototype.lsbFirstWord=function(n){return String.fromCharCode(255&n,n>>8&255,n>>16&255,n>>24&255)},dh.prototype.toHexString=function(n){return n.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},dh.prototype.hexToBytes=function(n){for(var e=[],t=0;t<n.length;t+=2)e.push(String.fromCharCode(parseInt(n.substr(t,2),16)));return e.join("")},dh.prototype.processOwnerPassword=function(n,e){return Mx(Px(e).substr(0,5),n)},dh.prototype.encryptor=function(n,e){var t=Px(this.encryptionKey+String.fromCharCode(255&n,n>>8&255,n>>16&255,255&e,e>>8&255)).substr(0,10);return function(r){return Mx(t,r)}},Am.prototype.equals=function(n){var e,t="id,objectNumber,equals";if(!n||br(n)!==br(this))return!1;var r=0;for(e in this)if(!(t.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!n.hasOwnProperty(e)||this[e]!==n[e])return!1;r++}for(e in n)n.hasOwnProperty(e)&&t.indexOf(e)<0&&r--;return r===0},Vt.API={events:[]},Vt.version="3.0.4";var Ci=Vt.API,pb=1,Sd=function(n){return n.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},oh=function(n){return n.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},dn=function(n){return n.toFixed(2)},Qu=function(n){return n.toFixed(5)};Ci.__acroform__={};var es=function(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n},lA=function(n){return n*pb},Ql=function(n){var e=new jI,t=Ot.internal.getHeight(n)||0,r=Ot.internal.getWidth(n)||0;return e.BBox=[0,0,Number(dn(r)),Number(dn(t))],e},OG=Ci.__acroform__.setBit=function(n,e){if(n=n||0,e=e||0,isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return n|1<<e},kG=Ci.__acroform__.clearBit=function(n,e){if(n=n||0,e=e||0,isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return n&~(1<<e)},LG=Ci.__acroform__.getBit=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return n&1<<e?1:0},Mi=Ci.__acroform__.getBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return LG(n,e-1)},ji=Ci.__acroform__.setBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return OG(n,e-1)},Bi=Ci.__acroform__.clearBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return kG(n,e-1)},PG=Ci.__acroform__.calculateCoordinates=function(n,e){var t=e.internal.getHorizontalCoordinate,r=e.internal.getVerticalCoordinate,i=n[0],a=n[1],o=n[2],s=n[3],c={};return c.lowerLeft_X=t(i)||0,c.lowerLeft_Y=r(a+s)||0,c.upperRight_X=t(i+o)||0,c.upperRight_Y=r(a)||0,[Number(dn(c.lowerLeft_X)),Number(dn(c.lowerLeft_Y)),Number(dn(c.upperRight_X)),Number(dn(c.upperRight_Y))]},MG=function(n){if(n.appearanceStreamContent)return n.appearanceStreamContent;if(n.V||n.DV){var e=[],t=n._V||n.DV,r=jx(n,t),i=n.scope.internal.getFont(n.fontName,n.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(n.scope.__private__.encodeColorString(n.color)),e.push("/"+i+" "+dn(r.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(r.text),e.push("ET"),e.push("Q"),e.push("EMC");var a=Ql(n);return a.scope=n.scope,a.stream=e.join(`
`),a}},jx=function(n,e){var t=n.fontSize===0?n.maxFontSize:n.fontSize,r={text:"",fontSize:""},i=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");i=n.multiline?i.map(function(N){return N.split(`
`)}):i.map(function(N){return[N]});var a=t,o=Ot.internal.getHeight(n)||0;o=o<0?-o:o;var s=Ot.internal.getWidth(n)||0;s=s<0?-s:s;var c=function(N,R,D){if(N+1<i.length){var L=R+" "+i[N+1][0];return mg(L,n,D).width<=s-4}return!1};a++;e:for(;a>0;){e="",a--;var f,d,p=mg("3",n,a).height,g=n.multiline?o-a:(o-p)/2,m=g+=2,x=0,_=0,C=0;if(a<=0){e=`(...) Tj
`,e+="% Width of Text: "+mg(e,n,a=12).width+", FieldWidth:"+s+`
`;break}for(var S="",k=0,M=0;M<i.length;M++)if(i.hasOwnProperty(M)){var P=!1;if(i[M].length!==1&&C!==i[M].length-1){if((p+2)*(k+2)+2>o)continue e;S+=i[M][C],P=!0,_=M,M--}else{S=(S+=i[M][C]+" ").substr(S.length-1)==" "?S.substr(0,S.length-1):S;var Y=parseInt(M),z=c(Y,S,a),F=M>=i.length-1;if(z&&!F){S+=" ",C=0;continue}if(z||F){if(F)_=Y;else if(n.multiline&&(p+2)*(k+2)+2>o)continue e}else{if(!n.multiline||(p+2)*(k+2)+2>o)continue e;_=Y}}for(var I="",T=x;T<=_;T++){var j=i[T];if(n.multiline){if(T===_){I+=j[C]+" ",C=(C+1)%j.length;continue}if(T===x){I+=j[j.length-1]+" ";continue}}I+=j[0]+" "}switch(I=I.substr(I.length-1)==" "?I.substr(0,I.length-1):I,d=mg(I,n,a).width,n.textAlign){case"right":f=s-d-2;break;case"center":f=(s-d)/2;break;default:f=2}e+=dn(f)+" "+dn(m)+` Td
`,e+="("+Sd(I)+`) Tj
`,e+=-dn(f)+` 0 Td
`,m=-(a+2),d=0,x=P?_:_+1,k++,S=""}break}return r.text=e,r.fontSize=a,r},mg=function(n,e,t){var r=e.scope.internal.getFont(e.fontName,e.fontStyle),i=e.scope.getStringUnitWidth(n,{font:r,fontSize:parseFloat(t),charSpace:0})*parseFloat(t);return{height:e.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(t),charSpace:0})*parseFloat(t)*1.5,width:i}},jG={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},BG=function(n,e){var t={type:"reference",object:n};e.internal.getPageInfo(n.page).pageContext.annotations.find(function(r){return r.type===t.type&&r.object===t.object})===void 0&&e.internal.getPageInfo(n.page).pageContext.annotations.push(t)},FG=function(n,e){if(e.scope=n,n.internal!==void 0&&(n.internal.acroformPlugin===void 0||n.internal.acroformPlugin.isInitialized===!1)){if(Pl.FieldNum=0,n.internal.acroformPlugin=JSON.parse(JSON.stringify(jG)),n.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");pb=n.internal.scaleFactor,n.internal.acroformPlugin.acroFormDictionaryRoot=new BI,n.internal.acroformPlugin.acroFormDictionaryRoot.scope=n,n.internal.acroformPlugin.acroFormDictionaryRoot._eventID=n.internal.events.subscribe("postPutResources",function(){(function(t){t.internal.events.unsubscribe(t.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete t.internal.acroformPlugin.acroFormDictionaryRoot._eventID,t.internal.acroformPlugin.printedOut=!0})(n)}),n.internal.events.subscribe("buildDocument",function(){(function(t){t.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=t.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in r)if(r.hasOwnProperty(i)){var a=r[i];a.objId=void 0,a.hasAnnotation&&BG(a,t)}})(n)}),n.internal.events.subscribe("putCatalog",function(){(function(t){if(t.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");t.internal.write("/AcroForm "+t.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(n)}),n.internal.events.subscribe("postPutPages",function(t){(function(r,i){var a=!r;for(var o in r||(i.internal.newObjectDeferredBegin(i.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),i.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||i.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(o)){var s=r[o],c=[],f=s.Rect;if(s.Rect&&(s.Rect=PG(s.Rect,i)),i.internal.newObjectDeferredBegin(s.objId,!0),s.DA=Ot.createDefaultAppearanceStream(s),br(s)==="object"&&typeof s.getKeyValueListForStream=="function"&&(c=s.getKeyValueListForStream()),s.Rect=f,s.hasAppearanceStream&&!s.appearanceStreamContent){var d=MG(s);c.push({key:"AP",value:"<</N "+d+">>"}),i.internal.acroformPlugin.xForms.push(d)}if(s.appearanceStreamContent){var p="";for(var g in s.appearanceStreamContent)if(s.appearanceStreamContent.hasOwnProperty(g)){var m=s.appearanceStreamContent[g];if(p+="/"+g+" ",p+="<<",Object.keys(m).length>=1||Array.isArray(m)){for(var o in m)if(m.hasOwnProperty(o)){var x=m[o];typeof x=="function"&&(x=x.call(i,s)),p+="/"+o+" "+x+" ",i.internal.acroformPlugin.xForms.indexOf(x)>=0||i.internal.acroformPlugin.xForms.push(x)}}else typeof(x=m)=="function"&&(x=x.call(i,s)),p+="/"+o+" "+x,i.internal.acroformPlugin.xForms.indexOf(x)>=0||i.internal.acroformPlugin.xForms.push(x);p+=">>"}c.push({key:"AP",value:`<<
`+p+">>"})}i.internal.putStream({additionalKeyValues:c,objectId:s.objId}),i.internal.out("endobj")}a&&function(_,C){for(var S in _)if(_.hasOwnProperty(S)){var k=S,M=_[S];C.internal.newObjectDeferredBegin(M.objId,!0),br(M)==="object"&&typeof M.putStream=="function"&&M.putStream(),delete _[k]}}(i.internal.acroformPlugin.xForms,i)})(t,n)}),n.internal.acroformPlugin.isInitialized=!0}},MI=Ci.__acroform__.arrayToPdfArray=function(n,e,t){var r=function(o){return o};if(Array.isArray(n)){for(var i="[",a=0;a<n.length;a++)switch(a!==0&&(i+=" "),br(n[a])){case"boolean":case"number":case"object":i+=n[a].toString();break;case"string":n[a].substr(0,1)!=="/"?(e!==void 0&&t&&(r=t.internal.getEncryptor(e)),i+="("+Sd(r(n[a].toString()))+")"):i+=n[a].toString()}return i+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},Sy=function(n,e,t){var r=function(i){return i};return e!==void 0&&t&&(r=t.internal.getEncryptor(e)),(n=n||"").toString(),"("+Sd(r(n))+")"},tc=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(n){this._objId=n}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};tc.prototype.toString=function(){return this.objId+" 0 R"},tc.prototype.putStream=function(){var n=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:n,objectId:this.objId}),this.scope.internal.out("endobj")},tc.prototype.getKeyValueListForStream=function(){var n=[],e=Object.getOwnPropertyNames(this).filter(function(a){return a!="content"&&a!="appearanceStreamContent"&&a!="scope"&&a!="objId"&&a.substring(0,1)!="_"});for(var t in e)if(Object.getOwnPropertyDescriptor(this,e[t]).configurable===!1){var r=e[t],i=this[r];i&&(Array.isArray(i)?n.push({key:r,value:MI(i,this.objId,this.scope)}):i instanceof tc?(i.scope=this.scope,n.push({key:r,value:i.objId+" 0 R"})):typeof i!="function"&&n.push({key:r,value:i}))}return n};var jI=function(){tc.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var n,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(t){n=t.trim()},get:function(){return n||null}})};es(jI,tc);var BI=function(){tc.call(this);var n,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(n){var t=function(r){return r};return this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),"("+Sd(t(n))+")"}},set:function(t){n=t}})};es(BI,tc);var Pl=function n(){tc.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(S){if(isNaN(S))throw new Error('Invalid value "'+S+'" for attribute F supplied.');e=S}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Mi(e,3)},set:function(S){S?this.F=ji(e,3):this.F=Bi(e,3)}});var t=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return t},set:function(S){if(isNaN(S))throw new Error('Invalid value "'+S+'" for attribute Ff supplied.');t=S}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(S){r=S!==void 0?S:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(S){r[0]=S}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(S){r[1]=S}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(S){r[2]=S}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(S){r[3]=S}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(S){switch(S){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=S;break;default:throw new Error('Invalid value "'+S+'" for attribute FT supplied.')}}});var a=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!a||a.length<1){if(this instanceof Sm)return;a="FieldObject"+n.FieldNum++}var S=function(k){return k};return this.scope&&(S=this.scope.internal.getEncryptor(this.objId)),"("+Sd(S(a))+")"},set:function(S){a=S.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return a},set:function(S){a=S}});var o="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return o},set:function(S){o=S}});var s="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return s},set:function(S){s=S}});var c=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return c},set:function(S){c=S}});var f=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return f===void 0?50/pb:f},set:function(S){f=S}});var d="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return d},set:function(S){d=S}});var p="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!p||this instanceof Sm||this instanceof sd))return Sy(p,this.objId,this.scope)},set:function(S){S=S.toString(),p=S}});var g=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(g)return this instanceof va==0?Sy(g,this.objId,this.scope):g},set:function(S){S=S.toString(),g=this instanceof va==0?S.substr(0,1)==="("?oh(S.substr(1,S.length-2)):oh(S):S}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof va==1?oh(g.substr(1,g.length-1)):g},set:function(S){S=S.toString(),g=this instanceof va==1?"/"+S:S}});var m=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(m)return m},set:function(S){this.V=S}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(m)return this instanceof va==0?Sy(m,this.objId,this.scope):m},set:function(S){S=S.toString(),m=this instanceof va==0?S.substr(0,1)==="("?oh(S.substr(1,S.length-2)):oh(S):S}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof va==1?oh(m.substr(1,m.length-1)):m},set:function(S){S=S.toString(),m=this instanceof va==1?"/"+S:S}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var x,_=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return _},set:function(S){S=!!S,_=S}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(x)return x},set:function(S){x=S}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Mi(this.Ff,1)},set:function(S){S?this.Ff=ji(this.Ff,1):this.Ff=Bi(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Mi(this.Ff,2)},set:function(S){S?this.Ff=ji(this.Ff,2):this.Ff=Bi(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Mi(this.Ff,3)},set:function(S){S?this.Ff=ji(this.Ff,3):this.Ff=Bi(this.Ff,3)}});var C=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(C!==null)return C},set:function(S){if([0,1,2].indexOf(S)===-1)throw new Error('Invalid value "'+S+'" for attribute Q supplied.');C=S}}),Object.defineProperty(this,"textAlign",{get:function(){var S;switch(C){case 0:default:S="left";break;case 1:S="center";break;case 2:S="right"}return S},configurable:!0,enumerable:!0,set:function(S){switch(S){case"right":case 2:C=2;break;case"center":case 1:C=1;break;default:C=0}}})};es(Pl,tc);var Ah=function(){Pl.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var n=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return n},set:function(t){n=t}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return n},set:function(t){n=t}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return MI(e,this.objId,this.scope)},set:function(t){var r,i;i=[],typeof(r=t)=="string"&&(i=function(a,o,s){s||(s=1);for(var c,f=[];c=o.exec(a);)f.push(c[s]);return f}(r,/\((.*?)\)/g)),e=i}}),this.getOptions=function(){return e},this.setOptions=function(t){e=t,this.sort&&e.sort()},this.addOption=function(t){t=(t=t||"").toString(),e.push(t),this.sort&&e.sort()},this.removeOption=function(t,r){for(r=r||!1,t=(t=t||"").toString();e.indexOf(t)!==-1&&(e.splice(e.indexOf(t),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Mi(this.Ff,18)},set:function(t){t?this.Ff=ji(this.Ff,18):this.Ff=Bi(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Mi(this.Ff,19)},set:function(t){this.combo===!0&&(t?this.Ff=ji(this.Ff,19):this.Ff=Bi(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Mi(this.Ff,20)},set:function(t){t?(this.Ff=ji(this.Ff,20),e.sort()):this.Ff=Bi(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Mi(this.Ff,22)},set:function(t){t?this.Ff=ji(this.Ff,22):this.Ff=Bi(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Mi(this.Ff,23)},set:function(t){t?this.Ff=ji(this.Ff,23):this.Ff=Bi(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Mi(this.Ff,27)},set:function(t){t?this.Ff=ji(this.Ff,27):this.Ff=Bi(this.Ff,27)}}),this.hasAppearanceStream=!1};es(Ah,Pl);var Sh=function(){Ah.call(this),this.fontName="helvetica",this.combo=!1};es(Sh,Ah);var Eh=function(){Sh.call(this),this.combo=!0};es(Eh,Sh);var jg=function(){Eh.call(this),this.edit=!0};es(jg,Eh);var va=function(){Pl.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Mi(this.Ff,15)},set:function(t){t?this.Ff=ji(this.Ff,15):this.Ff=Bi(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Mi(this.Ff,16)},set:function(t){t?this.Ff=ji(this.Ff,16):this.Ff=Bi(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Mi(this.Ff,17)},set:function(t){t?this.Ff=ji(this.Ff,17):this.Ff=Bi(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Mi(this.Ff,26)},set:function(t){t?this.Ff=ji(this.Ff,26):this.Ff=Bi(this.Ff,26)}});var n,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var t=function(a){return a};if(this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var r,i=[];for(r in i.push("<<"),e)i.push("/"+r+" ("+Sd(t(e[r]))+")");return i.push(">>"),i.join(`
`)}},set:function(t){br(t)==="object"&&(e=t)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(t){typeof t=="string"&&(e.CA=t)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(t){n=t}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(t){n="/"+t}})};es(va,Pl);var Bg=function(){va.call(this),this.pushButton=!0};es(Bg,va);var Ch=function(){va.call(this),this.radio=!0,this.pushButton=!1;var n=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return n},set:function(e){n=e!==void 0?e:[]}})};es(Ch,va);var Sm=function(){var n,e;Pl.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return n},set:function(i){n=i}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(i){e=i}});var t,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(s){return s};this.scope&&(i=this.scope.internal.getEncryptor(this.objId));var a,o=[];for(a in o.push("<<"),r)o.push("/"+a+" ("+Sd(i(r[a]))+")");return o.push(">>"),o.join(`
`)},set:function(i){br(i)==="object"&&(r=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(i){typeof i=="string"&&(r.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(i){t=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(i){t="/"+i}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Ot.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};es(Sm,Pl),Ch.prototype.setAppearance=function(n){if(!("createAppearanceStream"in n)||!("getCA"in n))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var t=this.Kids[e];t.appearanceStreamContent=n.createAppearanceStream(t.optionName),t.caption=n.getCA()}},Ch.prototype.createOption=function(n){var e=new Sm;return e.Parent=this,e.optionName=n,this.Kids.push(e),UG.call(this.scope,e),e};var Fg=function(){va.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Ot.CheckBox.createAppearanceStream()};es(Fg,va);var sd=function(){Pl.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Mi(this.Ff,13)},set:function(e){e?this.Ff=ji(this.Ff,13):this.Ff=Bi(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Mi(this.Ff,21)},set:function(e){e?this.Ff=ji(this.Ff,21):this.Ff=Bi(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Mi(this.Ff,23)},set:function(e){e?this.Ff=ji(this.Ff,23):this.Ff=Bi(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Mi(this.Ff,24)},set:function(e){e?this.Ff=ji(this.Ff,24):this.Ff=Bi(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Mi(this.Ff,25)},set:function(e){e?this.Ff=ji(this.Ff,25):this.Ff=Bi(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Mi(this.Ff,26)},set:function(e){e?this.Ff=ji(this.Ff,26):this.Ff=Bi(this.Ff,26)}});var n=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return n},set:function(e){n=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return n},set:function(e){Number.isInteger(e)&&(n=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};es(sd,Pl);var Ug=function(){sd.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Mi(this.Ff,14)},set:function(n){n?this.Ff=ji(this.Ff,14):this.Ff=Bi(this.Ff,14)}}),this.password=!0};es(Ug,sd);var Ot={CheckBox:{createAppearanceStream:function(){return{N:{On:Ot.CheckBox.YesNormal},D:{On:Ot.CheckBox.YesPushDown,Off:Ot.CheckBox.OffPushDown}}},YesPushDown:function(n){var e=Ql(n);e.scope=n.scope;var t=[],r=n.scope.internal.getFont(n.fontName,n.fontStyle).id,i=n.scope.__private__.encodeColorString(n.color),a=jx(n,n.caption);return t.push("0.749023 g"),t.push("0 0 "+dn(Ot.internal.getWidth(n))+" "+dn(Ot.internal.getHeight(n))+" re"),t.push("f"),t.push("BMC"),t.push("q"),t.push("0 0 1 rg"),t.push("/"+r+" "+dn(a.fontSize)+" Tf "+i),t.push("BT"),t.push(a.text),t.push("ET"),t.push("Q"),t.push("EMC"),e.stream=t.join(`
`),e},YesNormal:function(n){var e=Ql(n);e.scope=n.scope;var t=n.scope.internal.getFont(n.fontName,n.fontStyle).id,r=n.scope.__private__.encodeColorString(n.color),i=[],a=Ot.internal.getHeight(n),o=Ot.internal.getWidth(n),s=jx(n,n.caption);return i.push("1 g"),i.push("0 0 "+dn(o)+" "+dn(a)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+dn(o-1)+" "+dn(a-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+t+" "+dn(s.fontSize)+" Tf "+r),i.push(s.text),i.push("ET"),i.push("Q"),e.stream=i.join(`
`),e},OffPushDown:function(n){var e=Ql(n);e.scope=n.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+dn(Ot.internal.getWidth(n))+" "+dn(Ot.internal.getHeight(n))+" re"),t.push("f"),e.stream=t.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(n){var e={D:{Off:Ot.RadioButton.Circle.OffPushDown},N:{}};return e.N[n]=Ot.RadioButton.Circle.YesNormal,e.D[n]=Ot.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(n){var e=Ql(n);e.scope=n.scope;var t=[],r=Ot.internal.getWidth(n)<=Ot.internal.getHeight(n)?Ot.internal.getWidth(n)/4:Ot.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var i=Ot.internal.Bezier_C,a=Number((r*i).toFixed(5));return t.push("q"),t.push("1 0 0 1 "+Qu(Ot.internal.getWidth(n)/2)+" "+Qu(Ot.internal.getHeight(n)/2)+" cm"),t.push(r+" 0 m"),t.push(r+" "+a+" "+a+" "+r+" 0 "+r+" c"),t.push("-"+a+" "+r+" -"+r+" "+a+" -"+r+" 0 c"),t.push("-"+r+" -"+a+" -"+a+" -"+r+" 0 -"+r+" c"),t.push(a+" -"+r+" "+r+" -"+a+" "+r+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(n){var e=Ql(n);e.scope=n.scope;var t=[],r=Ot.internal.getWidth(n)<=Ot.internal.getHeight(n)?Ot.internal.getWidth(n)/4:Ot.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),a=Number((i*Ot.internal.Bezier_C).toFixed(5)),o=Number((r*Ot.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+Qu(Ot.internal.getWidth(n)/2)+" "+Qu(Ot.internal.getHeight(n)/2)+" cm"),t.push(i+" 0 m"),t.push(i+" "+a+" "+a+" "+i+" 0 "+i+" c"),t.push("-"+a+" "+i+" -"+i+" "+a+" -"+i+" 0 c"),t.push("-"+i+" -"+a+" -"+a+" -"+i+" 0 -"+i+" c"),t.push(a+" -"+i+" "+i+" -"+a+" "+i+" 0 c"),t.push("f"),t.push("Q"),t.push("0 g"),t.push("q"),t.push("1 0 0 1 "+Qu(Ot.internal.getWidth(n)/2)+" "+Qu(Ot.internal.getHeight(n)/2)+" cm"),t.push(r+" 0 m"),t.push(r+" "+o+" "+o+" "+r+" 0 "+r+" c"),t.push("-"+o+" "+r+" -"+r+" "+o+" -"+r+" 0 c"),t.push("-"+r+" -"+o+" -"+o+" -"+r+" 0 -"+r+" c"),t.push(o+" -"+r+" "+r+" -"+o+" "+r+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},OffPushDown:function(n){var e=Ql(n);e.scope=n.scope;var t=[],r=Ot.internal.getWidth(n)<=Ot.internal.getHeight(n)?Ot.internal.getWidth(n)/4:Ot.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),a=Number((i*Ot.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+Qu(Ot.internal.getWidth(n)/2)+" "+Qu(Ot.internal.getHeight(n)/2)+" cm"),t.push(i+" 0 m"),t.push(i+" "+a+" "+a+" "+i+" 0 "+i+" c"),t.push("-"+a+" "+i+" -"+i+" "+a+" -"+i+" 0 c"),t.push("-"+i+" -"+a+" -"+a+" -"+i+" 0 -"+i+" c"),t.push(a+" -"+i+" "+i+" -"+a+" "+i+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e}},Cross:{createAppearanceStream:function(n){var e={D:{Off:Ot.RadioButton.Cross.OffPushDown},N:{}};return e.N[n]=Ot.RadioButton.Cross.YesNormal,e.D[n]=Ot.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(n){var e=Ql(n);e.scope=n.scope;var t=[],r=Ot.internal.calculateCross(n);return t.push("q"),t.push("1 1 "+dn(Ot.internal.getWidth(n)-2)+" "+dn(Ot.internal.getHeight(n)-2)+" re"),t.push("W"),t.push("n"),t.push(dn(r.x1.x)+" "+dn(r.x1.y)+" m"),t.push(dn(r.x2.x)+" "+dn(r.x2.y)+" l"),t.push(dn(r.x4.x)+" "+dn(r.x4.y)+" m"),t.push(dn(r.x3.x)+" "+dn(r.x3.y)+" l"),t.push("s"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(n){var e=Ql(n);e.scope=n.scope;var t=Ot.internal.calculateCross(n),r=[];return r.push("0.749023 g"),r.push("0 0 "+dn(Ot.internal.getWidth(n))+" "+dn(Ot.internal.getHeight(n))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+dn(Ot.internal.getWidth(n)-2)+" "+dn(Ot.internal.getHeight(n)-2)+" re"),r.push("W"),r.push("n"),r.push(dn(t.x1.x)+" "+dn(t.x1.y)+" m"),r.push(dn(t.x2.x)+" "+dn(t.x2.y)+" l"),r.push(dn(t.x4.x)+" "+dn(t.x4.y)+" m"),r.push(dn(t.x3.x)+" "+dn(t.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(n){var e=Ql(n);e.scope=n.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+dn(Ot.internal.getWidth(n))+" "+dn(Ot.internal.getHeight(n))+" re"),t.push("f"),e.stream=t.join(`
`),e}}},createDefaultAppearanceStream:function(n){var e=n.scope.internal.getFont(n.fontName,n.fontStyle).id,t=n.scope.__private__.encodeColorString(n.color);return"/"+e+" "+n.fontSize+" Tf "+t}};Ot.internal={Bezier_C:.551915024494,calculateCross:function(n){var e=Ot.internal.getWidth(n),t=Ot.internal.getHeight(n),r=Math.min(e,t);return{x1:{x:(e-r)/2,y:(t-r)/2+r},x2:{x:(e-r)/2+r,y:(t-r)/2},x3:{x:(e-r)/2,y:(t-r)/2},x4:{x:(e-r)/2+r,y:(t-r)/2+r}}}},Ot.internal.getWidth=function(n){var e=0;return br(n)==="object"&&(e=lA(n.Rect[2])),e},Ot.internal.getHeight=function(n){var e=0;return br(n)==="object"&&(e=lA(n.Rect[3])),e};var UG=Ci.addField=function(n){if(FG(this,n),!(n instanceof Pl))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=n).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),n.page=n.scope.internal.getCurrentPageInfo().pageNumber,this};Ci.AcroFormChoiceField=Ah,Ci.AcroFormListBox=Sh,Ci.AcroFormComboBox=Eh,Ci.AcroFormEditBox=jg,Ci.AcroFormButton=va,Ci.AcroFormPushButton=Bg,Ci.AcroFormRadioButton=Ch,Ci.AcroFormCheckBox=Fg,Ci.AcroFormTextField=sd,Ci.AcroFormPasswordField=Ug,Ci.AcroFormAppearance=Ot,Ci.AcroForm={ChoiceField:Ah,ListBox:Sh,ComboBox:Eh,EditBox:jg,Button:va,PushButton:Bg,RadioButton:Ch,CheckBox:Fg,TextField:sd,PasswordField:Ug,Appearance:Ot},Vt.AcroForm={ChoiceField:Ah,ListBox:Sh,ComboBox:Eh,EditBox:jg,Button:va,PushButton:Bg,RadioButton:Ch,CheckBox:Fg,TextField:sd,PasswordField:Ug,Appearance:Ot};Vt.AcroForm;function FI(n){return n.reduce(function(e,t,r){return e[t]=r,e},{})}(function(n){var e="addImage_";n.__addimage__={};var t="UNKNOWN",r={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},i=n.__addimage__.getImageFileTypeByImageData=function(N,R){var D,L,G,U,H,te=t;if((R=R||t)==="RGBA"||N.data!==void 0&&N.data instanceof Uint8ClampedArray&&"height"in N&&"width"in N)return"RGBA";if(z(N))for(H in r)for(G=r[H],D=0;D<G.length;D+=1){for(U=!0,L=0;L<G[D].length;L+=1)if(G[D][L]!==void 0&&G[D][L]!==N[L]){U=!1;break}if(U===!0){te=H;break}}else for(H in r)for(G=r[H],D=0;D<G.length;D+=1){for(U=!0,L=0;L<G[D].length;L+=1)if(G[D][L]!==void 0&&G[D][L]!==N.charCodeAt(L)){U=!1;break}if(U===!0){te=H;break}}return te===t&&R!==t&&(te=R),te},a=function N(R){for(var D=this.internal.write,L=this.internal.putStream,G=(0,this.internal.getFilters)();G.indexOf("FlateEncode")!==-1;)G.splice(G.indexOf("FlateEncode"),1);R.objectId=this.internal.newObject();var U=[];if(U.push({key:"Type",value:"/XObject"}),U.push({key:"Subtype",value:"/Image"}),U.push({key:"Width",value:R.width}),U.push({key:"Height",value:R.height}),R.colorSpace===S.INDEXED?U.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(R.palette.length/3-1)+" "+("sMask"in R&&R.sMask!==void 0?R.objectId+2:R.objectId+1)+" 0 R]"}):(U.push({key:"ColorSpace",value:"/"+R.colorSpace}),R.colorSpace===S.DEVICE_CMYK&&U.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),U.push({key:"BitsPerComponent",value:R.bitsPerComponent}),"decodeParameters"in R&&R.decodeParameters!==void 0&&U.push({key:"DecodeParms",value:"<<"+R.decodeParameters+">>"}),"transparency"in R&&Array.isArray(R.transparency)&&R.transparency.length>0){for(var H="",te=0,se=R.transparency.length;te<se;te++)H+=R.transparency[te]+" "+R.transparency[te]+" ";U.push({key:"Mask",value:"["+H+"]"})}R.sMask!==void 0&&U.push({key:"SMask",value:R.objectId+1+" 0 R"});var ee=R.filter!==void 0?["/"+R.filter]:void 0;if(L({data:R.data,additionalKeyValues:U,alreadyAppliedFilters:ee,objectId:R.objectId}),D("endobj"),"sMask"in R&&R.sMask!==void 0){var ie,$=(ie=R.sMaskBitsPerComponent)!==null&&ie!==void 0?ie:R.bitsPerComponent,W={width:R.width,height:R.height,colorSpace:"DeviceGray",bitsPerComponent:$,data:R.sMask};"filter"in R&&(W.decodeParameters="/Predictor ".concat(R.predictor," /Colors 1 /BitsPerComponent ").concat($," /Columns ").concat(R.width),W.filter=R.filter),N.call(this,W)}if(R.colorSpace===S.INDEXED){var Q=this.internal.newObject();L({data:I(new Uint8Array(R.palette)),objectId:Q}),D("endobj")}},o=function(){var N=this.internal.collections[e+"images"];for(var R in N)a.call(this,N[R])},s=function(){var N,R=this.internal.collections[e+"images"],D=this.internal.write;for(var L in R)D("/I"+(N=R[L]).index,N.objectId,"0","R")},c=function(){this.internal.collections[e+"images"]||(this.internal.collections[e+"images"]={},this.internal.events.subscribe("putResources",o),this.internal.events.subscribe("putXobjectDict",s))},f=function(){var N=this.internal.collections[e+"images"];return c.call(this),N},d=function(){return Object.keys(this.internal.collections[e+"images"]).length},p=function(N){return typeof n["process"+N.toUpperCase()]=="function"},g=function(N){return br(N)==="object"&&N.nodeType===1},m=function(N,R){if(N.nodeName==="IMG"&&N.hasAttribute("src")){var D=""+N.getAttribute("src");if(D.indexOf("data:image/")===0)return Mg(unescape(D).split("base64,").pop());var L=n.loadFile(D,!0);if(L!==void 0)return L}if(N.nodeName==="CANVAS"){if(N.width===0||N.height===0)throw new Error("Given canvas must have data. Canvas width: "+N.width+", height: "+N.height);var G;switch(R){case"PNG":G="image/png";break;case"WEBP":G="image/webp";break;default:G="image/jpeg"}return Mg(N.toDataURL(G,1).split("base64,").pop())}},x=function(N){var R=this.internal.collections[e+"images"];if(R){for(var D in R)if(N===R[D].alias)return R[D]}},_=function(N,R,D){return N||R||(N=-96,R=-96),N<0&&(N=-1*D.width*72/N/this.internal.scaleFactor),R<0&&(R=-1*D.height*72/R/this.internal.scaleFactor),N===0&&(N=R*D.width/D.height),R===0&&(R=N*D.height/D.width),[N,R]},C=function(N,R,D,L,G,U){var H=_.call(this,D,L,G),te=this.internal.getCoordinateString,se=this.internal.getVerticalCoordinateString,ee=f.call(this);if(D=H[0],L=H[1],ee[G.index]=G,U){U*=Math.PI/180;var ie=Math.cos(U),$=Math.sin(U),W=function(J){return J.toFixed(4)},Q=[W(ie),W($),W(-1*$),W(ie),0,0,"cm"]}this.internal.write("q"),U?(this.internal.write([1,"0","0",1,te(N),se(R+L),"cm"].join(" ")),this.internal.write(Q.join(" ")),this.internal.write([te(D),"0","0",te(L),"0","0","cm"].join(" "))):this.internal.write([te(D),"0","0",te(L),te(N),se(R+L),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+G.index+" Do"),this.internal.write("Q")},S=n.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};n.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var k=n.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},M=n.__addimage__.sHashCode=function(N){var R,D,L=0;if(typeof N=="string")for(D=N.length,R=0;R<D;R++)L=(L<<5)-L+N.charCodeAt(R),L|=0;else if(z(N))for(D=N.byteLength/2,R=0;R<D;R++)L=(L<<5)-L+N[R],L|=0;return L},P=n.__addimage__.validateStringAsBase64=function(N){(N=N||"").toString().trim();var R=!0;return N.length===0&&(R=!1),N.length%4!=0&&(R=!1),/^[A-Za-z0-9+/]+$/.test(N.substr(0,N.length-2))===!1&&(R=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(N.substr(-2))===!1&&(R=!1),R},Y=n.__addimage__.extractImageFromDataUrl=function(N){if(N==null||!(N=N.trim()).startsWith("data:"))return null;var R=N.indexOf(",");return R<0?null:N.substring(0,R).trim().endsWith("base64")?N.substring(R+1):null};n.__addimage__.isArrayBuffer=function(N){return N instanceof ArrayBuffer};var z=n.__addimage__.isArrayBufferView=function(N){return N instanceof Int8Array||N instanceof Uint8Array||N instanceof Uint8ClampedArray||N instanceof Int16Array||N instanceof Uint16Array||N instanceof Int32Array||N instanceof Uint32Array||N instanceof Float32Array||N instanceof Float64Array},F=n.__addimage__.binaryStringToUint8Array=function(N){for(var R=N.length,D=new Uint8Array(R),L=0;L<R;L++)D[L]=N.charCodeAt(L);return D},I=n.__addimage__.arrayBufferToBinaryString=function(N){for(var R="",D=z(N)?N:new Uint8Array(N),L=0;L<D.length;L+=8192)R+=String.fromCharCode.apply(null,D.subarray(L,L+8192));return R};n.addImage=function(){var N,R,D,L,G,U,H,te,se;if(typeof arguments[1]=="number"?(R=t,D=arguments[1],L=arguments[2],G=arguments[3],U=arguments[4],H=arguments[5],te=arguments[6],se=arguments[7]):(R=arguments[1],D=arguments[2],L=arguments[3],G=arguments[4],U=arguments[5],H=arguments[6],te=arguments[7],se=arguments[8]),br(N=arguments[0])==="object"&&!g(N)&&"imageData"in N){var ee=N;N=ee.imageData,R=ee.format||R||t,D=ee.x||D||0,L=ee.y||L||0,G=ee.w||ee.width||G,U=ee.h||ee.height||U,H=ee.alias||H,te=ee.compression||te,se=ee.rotation||ee.angle||se}var ie=this.internal.getFilters();if(te===void 0&&ie.indexOf("FlateEncode")!==-1&&(te="SLOW"),isNaN(D)||isNaN(L))throw new Error("Invalid coordinates passed to jsPDF.addImage");c.call(this);var $=T.call(this,N,R,H,te);return C.call(this,D,L,G,U,$,se),this};var T=function(N,R,D,L){var G,U,H;if(typeof N=="string"&&i(N)===t){N=unescape(N);var te=j(N,!1);(te!==""||(te=n.loadFile(N,!0))!==void 0)&&(N=te)}if(g(N)&&(N=m(N,R)),R=i(N,R),!p(R))throw new Error("addImage does not support files of type '"+R+"', please ensure that a plugin for '"+R+"' support is added.");if(((H=D)==null||H.length===0)&&(D=function(se){return typeof se=="string"||z(se)?M(se):z(se.data)?M(se.data):null}(N)),(G=x.call(this,D))||(N instanceof Uint8Array||R==="RGBA"||(U=N,N=F(N)),G=this["process"+R.toUpperCase()](N,d.call(this),D,function(se){return se&&typeof se=="string"&&(se=se.toUpperCase()),se in n.image_compression?se:k.NONE}(L),U)),!G)throw new Error("An unknown error occurred whilst processing the image.");return G},j=n.__addimage__.convertBase64ToBinaryString=function(N,R){R=typeof R!="boolean"||R;var D,L="";if(typeof N=="string"){var G;D=(G=Y(N))!==null&&G!==void 0?G:N;try{L=Mg(D)}catch(U){if(R)throw P(D)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+U.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return L};n.getImageProperties=function(N){var R,D,L="";if(g(N)&&(N=m(N)),typeof N=="string"&&i(N)===t&&((L=j(N,!1))===""&&(L=n.loadFile(N)||""),N=L),D=i(N),!p(D))throw new Error("addImage does not support files of type '"+D+"', please ensure that a plugin for '"+D+"' support is added.");if(N instanceof Uint8Array||(N=F(N)),!(R=this["process"+D.toUpperCase()](N)))throw new Error("An unknown error occurred whilst processing the image");return R.fileType=D,R}})(Vt.API),function(n){var e=function(t){if(t!==void 0&&t!="")return!0};Vt.API.events.push(["addPage",function(t){this.internal.getPageInfo(t.pageNumber).pageContext.annotations=[]}]),n.events.push(["putPage",function(t){for(var r,i,a,o=this.internal.getCoordinateString,s=this.internal.getVerticalCoordinateString,c=this.internal.getPageInfoByObjId(t.objId),f=t.pageContext.annotations,d=!1,p=0;p<f.length&&!d;p++)switch((r=f[p]).type){case"link":(e(r.options.url)||e(r.options.pageNumber))&&(d=!0);break;case"reference":case"text":case"freetext":d=!0}if(d!=0){this.internal.write("/Annots [");for(var g=0;g<f.length;g++){r=f[g];var m=this.internal.pdfEscape,x=this.internal.getEncryptor(t.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var _=this.internal.newAdditionalObject(),C=this.internal.newAdditionalObject(),S=this.internal.getEncryptor(_.objId),k=r.title||"Note";a="<</Type /Annot /Subtype /Text "+(i="/Rect ["+o(r.bounds.x)+" "+s(r.bounds.y+r.bounds.h)+" "+o(r.bounds.x+r.bounds.w)+" "+s(r.bounds.y)+"] ")+"/Contents ("+m(S(r.contents))+")",a+=" /Popup "+C.objId+" 0 R",a+=" /P "+c.objId+" 0 R",a+=" /T ("+m(S(k))+") >>",_.content=a;var M=_.objId+" 0 R";a="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+o(r.bounds.x+30)+" "+s(r.bounds.y+r.bounds.h)+" "+o(r.bounds.x+r.bounds.w+30)+" "+s(r.bounds.y)+"] ")+" /Parent "+M,r.open&&(a+=" /Open true"),a+=" >>",C.content=a,this.internal.write(_.objId,"0 R",C.objId,"0 R");break;case"freetext":i="/Rect ["+o(r.bounds.x)+" "+s(r.bounds.y)+" "+o(r.bounds.x+r.bounds.w)+" "+s(r.bounds.y+r.bounds.h)+"] ";var P=r.color||"#000000";a="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+m(x(r.contents))+")",a+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+P+")",a+=" /Border [0 0 0]",a+=" >>",this.internal.write(a);break;case"link":if(r.options.name){var Y=this.annotations._nameMap[r.options.name];r.options.pageNumber=Y.page,r.options.top=Y.y}else r.options.top||(r.options.top=0);if(i="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",a="",r.options.url)a="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+m(x(r.options.url))+") >>";else if(r.options.pageNumber)switch(a="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":a+=" /Fit]";break;case"FitH":a+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,a+=" /FitV "+r.options.left+"]";break;default:var z=s(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),a+=" /XYZ "+r.options.left+" "+z+" "+r.options.zoom+"]"}a!=""&&(a+=" >>",this.internal.write(a))}}this.internal.write("]")}}]),n.createAnnotation=function(t){var r=this.internal.getCurrentPageInfo();switch(t.type){case"link":this.link(t.bounds.x,t.bounds.y,t.bounds.w,t.bounds.h,t);break;case"text":case"freetext":r.pageContext.annotations.push(t)}},n.link=function(t,r,i,a,o){var s=this.internal.getCurrentPageInfo(),c=this.internal.getCoordinateString,f=this.internal.getVerticalCoordinateString;s.pageContext.annotations.push({finalBounds:{x:c(t),y:f(r),w:c(t+i),h:f(r+a)},options:o,type:"link"})},n.textWithLink=function(t,r,i,a){var o,s,c=this.getTextWidth(t),f=this.internal.getLineHeight()/this.internal.scaleFactor;if(a.maxWidth!==void 0){s=a.maxWidth;var d=this.splitTextToSize(t,s).length;o=Math.ceil(f*d)}else s=c,o=f;return this.text(t,r,i,a),i+=.2*f,a.align==="center"&&(r-=c/2),a.align==="right"&&(r-=c),this.link(r,i-f,s,o,a),c},n.getTextWidth=function(t){var r=this.internal.getFontSize();return this.getStringUnitWidth(t)*r/this.internal.scaleFactor}}(Vt.API),function(n){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},t={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];n.__arabicParser__={};var a=n.__arabicParser__.isInArabicSubstitutionA=function(_){return e[_.charCodeAt(0)]!==void 0},o=n.__arabicParser__.isArabicLetter=function(_){return typeof _=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(_)},s=n.__arabicParser__.isArabicEndLetter=function(_){return o(_)&&a(_)&&e[_.charCodeAt(0)].length<=2},c=n.__arabicParser__.isArabicAlfLetter=function(_){return o(_)&&i.indexOf(_.charCodeAt(0))>=0};n.__arabicParser__.arabicLetterHasIsolatedForm=function(_){return o(_)&&a(_)&&e[_.charCodeAt(0)].length>=1};var f=n.__arabicParser__.arabicLetterHasFinalForm=function(_){return o(_)&&a(_)&&e[_.charCodeAt(0)].length>=2};n.__arabicParser__.arabicLetterHasInitialForm=function(_){return o(_)&&a(_)&&e[_.charCodeAt(0)].length>=3};var d=n.__arabicParser__.arabicLetterHasMedialForm=function(_){return o(_)&&a(_)&&e[_.charCodeAt(0)].length==4},p=n.__arabicParser__.resolveLigatures=function(_){var C=0,S=t,k="",M=0;for(C=0;C<_.length;C+=1)S[_.charCodeAt(C)]!==void 0?(M++,typeof(S=S[_.charCodeAt(C)])=="number"&&(k+=String.fromCharCode(S),S=t,M=0),C===_.length-1&&(S=t,k+=_.charAt(C-(M-1)),C-=M-1,M=0)):(S=t,k+=_.charAt(C-M),C-=M,M=0);return k};n.__arabicParser__.isArabicDiacritic=function(_){return _!==void 0&&r[_.charCodeAt(0)]!==void 0};var g=n.__arabicParser__.getCorrectForm=function(_,C,S){return o(_)?a(_)===!1?-1:!f(_)||!o(C)&&!o(S)||!o(S)&&s(C)||s(_)&&!o(C)||s(_)&&c(C)||s(_)&&s(C)?0:d(_)&&o(C)&&!s(C)&&o(S)&&f(S)?3:s(_)||!o(S)?1:2:-1},m=function(_){var C=0,S=0,k=0,M="",P="",Y="",z=(_=_||"").split("\\s+"),F=[];for(C=0;C<z.length;C+=1){for(F.push(""),S=0;S<z[C].length;S+=1)M=z[C][S],P=z[C][S-1],Y=z[C][S+1],o(M)?(k=g(M,P,Y),F[C]+=k!==-1?String.fromCharCode(e[M.charCodeAt(0)][k]):M):F[C]+=M;F[C]=p(F[C])}return F.join(" ")},x=n.__arabicParser__.processArabic=n.processArabic=function(){var _,C=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,S=[];if(Array.isArray(C)){var k=0;for(S=[],k=0;k<C.length;k+=1)Array.isArray(C[k])?S.push([m(C[k][0]),C[k][1],C[k][2]]):S.push([m(C[k])]);_=S}else _=m(C);return typeof arguments[0]=="string"?_:(arguments[0].text=_,arguments[0])};n.events.push(["preProcessText",x])}(Vt.API),Vt.API.autoPrint=function(n){var e;return(n=n||{}).variant=n.variant||"non-conform",n.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})),this},function(n){var e=function(){var t=void 0;Object.defineProperty(this,"pdf",{get:function(){return t},set:function(s){t=s}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(s){r=isNaN(s)||Number.isInteger(s)===!1||s<0?150:s,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(s){i=isNaN(s)||Number.isInteger(s)===!1||s<0?300:s,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var a=[];Object.defineProperty(this,"childNodes",{get:function(){return a},set:function(s){a=s}});var o={};Object.defineProperty(this,"style",{get:function(){return o},set:function(s){o=s}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(t,r){var i;if((t=t||"2d")!=="2d")return null;for(i in r)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=r[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},n.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(Vt.API),function(n){var e={left:0,top:0,bottom:0,right:0},t=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new a,this.internal.__cell__.pages=1},a=function(){var c=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return c},set:function(_){c=_}});var f=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return f},set:function(_){f=_}});var d=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return d},set:function(_){d=_}});var p=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return p},set:function(_){p=_}});var g=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return g},set:function(_){g=_}});var m=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return m},set:function(_){m=_}});var x=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return x},set:function(_){x=_}}),this};a.prototype.clone=function(){return new a(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},a.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},n.setHeaderFunction=function(c){return r.call(this),this.internal.__cell__.headerFunction=typeof c=="function"?c:void 0,this},n.getTextDimensions=function(c,f){r.call(this);var d=(f=f||{}).fontSize||this.getFontSize(),p=f.font||this.getFont(),g=f.scaleFactor||this.internal.scaleFactor,m=0,x=0,_=0,C=this;if(!Array.isArray(c)&&typeof c!="string"){if(typeof c!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");c=String(c)}var S=f.maxWidth;S>0?typeof c=="string"?c=this.splitTextToSize(c,S):Object.prototype.toString.call(c)==="[object Array]"&&(c=c.reduce(function(M,P){return M.concat(C.splitTextToSize(P,S))},[])):c=Array.isArray(c)?c:[c];for(var k=0;k<c.length;k++)m<(_=this.getStringUnitWidth(c[k],{font:p})*d)&&(m=_);return m!==0&&(x=c.length),{w:m/=g,h:Math.max((x*d*this.getLineHeightFactor()-d*(this.getLineHeightFactor()-1))/g,0)}},n.cellAddPage=function(){r.call(this),this.addPage();var c=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new a(c.left,c.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var o=n.cell=function(){var c;c=arguments[0]instanceof a?arguments[0]:new a(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6]),r.call(this);var f=this.internal.__cell__.lastCell,d=this.internal.__cell__.padding,p=this.internal.__cell__.margins||e,g=this.internal.__cell__.tableHeaderRow,m=this.internal.__cell__.printHeaders;return f.lineNumber!==void 0&&(f.lineNumber===c.lineNumber?(c.x=(f.x||0)+(f.width||0),c.y=f.y||0):f.y+f.height+c.height+p.bottom>this.getPageHeight()?(this.cellAddPage(),c.y=p.top,m&&g&&(this.printHeaderRow(c.lineNumber,!0),c.y+=g[0].height)):c.y=f.y+f.height||c.y),c.text[0]!==void 0&&(this.rect(c.x,c.y,c.width,c.height,t===!0?"FD":void 0),c.align==="right"?this.text(c.text,c.x+c.width-d,c.y+d,{align:"right",baseline:"top"}):c.align==="center"?this.text(c.text,c.x+c.width/2,c.y+d,{align:"center",baseline:"top",maxWidth:c.width-d-d}):this.text(c.text,c.x+d,c.y+d,{align:"left",baseline:"top",maxWidth:c.width-d-d})),this.internal.__cell__.lastCell=c,this};n.table=function(c,f,d,p,g){if(r.call(this),!d)throw new Error("No data for PDF table.");var m,x,_,C,S=[],k=[],M=[],P={},Y={},z=[],F=[],I=(g=g||{}).autoSize||!1,T=g.printHeaders!==!1,j=g.css&&g.css["font-size"]!==void 0?16*g.css["font-size"]:g.fontSize||12,N=g.margins||Object.assign({width:this.getPageWidth()},e),R=typeof g.padding=="number"?g.padding:3,D=g.headerBackgroundColor||"#c8c8c8",L=g.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=T,this.internal.__cell__.margins=N,this.internal.__cell__.table_font_size=j,this.internal.__cell__.padding=R,this.internal.__cell__.headerBackgroundColor=D,this.internal.__cell__.headerTextColor=L,this.setFontSize(j),p==null)k=S=Object.keys(d[0]),M=S.map(function(){return"left"});else if(Array.isArray(p)&&br(p[0])==="object")for(S=p.map(function(ee){return ee.name}),k=p.map(function(ee){return ee.prompt||ee.name||""}),M=p.map(function(ee){return ee.align||"left"}),m=0;m<p.length;m+=1)Y[p[m].name]=.7499990551181103*p[m].width;else Array.isArray(p)&&typeof p[0]=="string"&&(k=S=p,M=S.map(function(){return"left"}));if(I||Array.isArray(p)&&typeof p[0]=="string")for(m=0;m<S.length;m+=1){for(P[C=S[m]]=d.map(function(ee){return ee[C]}),this.setFont(void 0,"bold"),z.push(this.getTextDimensions(k[m],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),x=P[C],this.setFont(void 0,"normal"),_=0;_<x.length;_+=1)z.push(this.getTextDimensions(x[_],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);Y[C]=Math.max.apply(null,z)+R+R,z=[]}if(T){var G={};for(m=0;m<S.length;m+=1)G[S[m]]={},G[S[m]].text=k[m],G[S[m]].align=M[m];var U=s.call(this,G,Y);F=S.map(function(ee){return new a(c,f,Y[ee],U,G[ee].text,void 0,G[ee].align)}),this.setTableHeaderRow(F),this.printHeaderRow(1,!1)}var H=p.reduce(function(ee,ie){return ee[ie.name]=ie.align,ee},{});for(m=0;m<d.length;m+=1){"rowStart"in g&&g.rowStart instanceof Function&&g.rowStart({row:m,data:d[m]},this);var te=s.call(this,d[m],Y);for(_=0;_<S.length;_+=1){var se=d[m][S[_]];"cellStart"in g&&g.cellStart instanceof Function&&g.cellStart({row:m,col:_,data:se},this),o.call(this,new a(c,f,Y[S[_]],te,se,m+2,H[S[_]]))}}return this.internal.__cell__.table_x=c,this.internal.__cell__.table_y=f,this};var s=function(c,f){var d=this.internal.__cell__.padding,p=this.internal.__cell__.table_font_size,g=this.internal.scaleFactor;return Object.keys(c).map(function(m){var x=c[m];return this.splitTextToSize(x.hasOwnProperty("text")?x.text:x,f[m]-d-d)},this).map(function(m){return this.getLineHeightFactor()*m.length*p/g+d+d},this).reduce(function(m,x){return Math.max(m,x)},0)};n.setTableHeaderRow=function(c){r.call(this),this.internal.__cell__.tableHeaderRow=c},n.printHeaderRow=function(c,f){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var d;if(t=!0,typeof this.internal.__cell__.headerFunction=="function"){var p=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new a(p[0],p[1],p[2],p[3],void 0,-1)}this.setFont(void 0,"bold");for(var g=[],m=0;m<this.internal.__cell__.tableHeaderRow.length;m+=1){d=this.internal.__cell__.tableHeaderRow[m].clone(),f&&(d.y=this.internal.__cell__.margins.top||0,g.push(d)),d.lineNumber=c;var x=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),o.call(this,d),this.setTextColor(x)}g.length>0&&this.setTableHeaderRow(g),this.setFont(void 0,"normal"),t=!1}}(Vt.API);var UI={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},zI=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],Bx=FI(zI),VI=[100,200,300,400,500,600,700,800,900],zG=FI(VI);function Ey(n){var e=n.family.replace(/"|'/g,"").toLowerCase(),t=function(a){return UI[a=a||"normal"]?a:"normal"}(n.style),r=function(a){return a?typeof a=="number"?a>=100&&a<=900&&a%100==0?a:400:/^\d00$/.test(a)?parseInt(a):a==="bold"?700:400:400}(n.weight),i=function(a){return typeof Bx[a=a||"normal"]=="number"?a:"normal"}(n.stretch);return{family:e,style:t,weight:r,stretch:i,src:n.src||[],ref:n.ref||{name:e,style:[i,t,r].join(" ")}}}function cA(n,e,t,r){var i;for(i=t;i>=0&&i<e.length;i+=r)if(n[e[i]])return n[e[i]];for(i=t;i>=0&&i<e.length;i-=r)if(n[e[i]])return n[e[i]]}var VG={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},uA={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function fA(n){return[n.stretch,n.style,n.weight,n.family].join(" ")}function dA(n){return n.trimLeft()}function qG(n,e){for(var t=0;t<n.length;){if(n.charAt(t)===e)return[n.substring(0,t),n.substring(t+1)];t+=1}return null}function HG(n){var e=n.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],n.substring(e[0].length)]}var vg,hA,pA,sh,yg,gA,mA,vA,Cy=["times"];function yA(n,e,t,r,i){var a=4,o=bA;switch(i){case Vt.API.image_compression.FAST:a=1,o=xA;break;case Vt.API.image_compression.MEDIUM:a=6,o=wA;break;case Vt.API.image_compression.SLOW:a=9,o=_A}n=function(c,f,d,p){for(var g,m=c.length/f,x=new Uint8Array(c.length+m),_=[WG,xA,bA,wA,_A],C=0;C<m;C+=1){var S=C*f,k=c.subarray(S,S+f);if(p)x.set(p(k,d,g),S+C);else{for(var M=_.length,P=[],Y=0;Y<M;Y+=1)P[Y]=_[Y](k,d,g);var z=GG(P.concat());x.set(P[z],S+C)}g=k}return x}(n,e,Math.ceil(t*r/8),o);var s=Dx(n,{level:a});return Vt.API.__addimage__.arrayBufferToBinaryString(s)}function WG(n){var e=Array.apply([],n);return e.unshift(0),e}function xA(n,e){var t=n.length,r=[];r[0]=1;for(var i=0;i<t;i+=1){var a=n[i-e]||0;r[i+1]=n[i]-a+256&255}return r}function bA(n,e,t){var r=n.length,i=[];i[0]=2;for(var a=0;a<r;a+=1){var o=t&&t[a]||0;i[a+1]=n[a]-o+256&255}return i}function wA(n,e,t){var r=n.length,i=[];i[0]=3;for(var a=0;a<r;a+=1){var o=n[a-e]||0,s=t&&t[a]||0;i[a+1]=n[a]+256-(o+s>>>1)&255}return i}function _A(n,e,t){var r=n.length,i=[];i[0]=4;for(var a=0;a<r;a+=1){var o=$G(n[a-e]||0,t&&t[a]||0,t&&t[a-e]||0);i[a+1]=n[a]-o+256&255}return i}function $G(n,e,t){if(n===e&&e===t)return n;var r=Math.abs(e-t),i=Math.abs(n-t),a=Math.abs(n+e-t-t);return r<=i&&r<=a?n:i<=a?e:t}function GG(n){var e=n.map(function(t){return t.reduce(function(r,i){return r+Math.abs(i)},0)});return e.indexOf(Math.min.apply(null,e))}function Iy(n,e,t){var r=e*t,i=Math.floor(r/8),a=16-(r-8*i+t),o=(1<<t)-1;return qI(n,i)>>a&o}function AA(n,e,t,r){var i=t*r,a=Math.floor(i/8),o=16-(i-8*a+r),s=(1<<r)-1,c=(e&s)<<o;(function(f,d,p){if(d+1<f.byteLength)f.setUint16(d,p,!1);else{var g=p>>8&255;f.setUint8(d,g)}})(n,a,qI(n,a)&~(s<<o)&65535|c)}function qI(n,e){return e+1<n.byteLength?n.getUint16(e,!1):n.getUint8(e)<<8}function YG(n){var e=0;if(n[e++]!==71||n[e++]!==73||n[e++]!==70||n[e++]!==56||(n[e++]+1&253)!=56||n[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var t=n[e++]|n[e++]<<8,r=n[e++]|n[e++]<<8,i=n[e++],a=i>>7,o=1<<1+(7&i);n[e++],n[e++];var s=null,c=null;a&&(s=e,c=o,e+=3*o);var f=!0,d=[],p=0,g=null,m=0,x=null;for(this.width=t,this.height=r;f&&e<n.length;)switch(n[e++]){case 33:switch(n[e++]){case 255:if(n[e]!==11||n[e+1]==78&&n[e+2]==69&&n[e+3]==84&&n[e+4]==83&&n[e+5]==67&&n[e+6]==65&&n[e+7]==80&&n[e+8]==69&&n[e+9]==50&&n[e+10]==46&&n[e+11]==48&&n[e+12]==3&&n[e+13]==1&&n[e+16]==0)e+=14,x=n[e++]|n[e++]<<8,e++;else for(e+=12;;){if(!((N=n[e++])>=0))throw Error("Invalid block size");if(N===0)break;e+=N}break;case 249:if(n[e++]!==4||n[e+4]!==0)throw new Error("Invalid graphics extension block.");var _=n[e++];p=n[e++]|n[e++]<<8,g=n[e++],1&_||(g=null),m=_>>2&7,e++;break;case 254:for(;;){if(!((N=n[e++])>=0))throw Error("Invalid block size");if(N===0)break;e+=N}break;default:throw new Error("Unknown graphic control label: 0x"+n[e-1].toString(16))}break;case 44:var C=n[e++]|n[e++]<<8,S=n[e++]|n[e++]<<8,k=n[e++]|n[e++]<<8,M=n[e++]|n[e++]<<8,P=n[e++],Y=P>>6&1,z=1<<1+(7&P),F=s,I=c,T=!1;P>>7&&(T=!0,F=e,I=z,e+=3*z);var j=e;for(e++;;){var N;if(!((N=n[e++])>=0))throw Error("Invalid block size");if(N===0)break;e+=N}d.push({x:C,y:S,width:k,height:M,has_local_palette:T,palette_offset:F,palette_size:I,data_offset:j,data_length:e-j,transparent_index:g,interlaced:!!Y,delay:p,disposal:m});break;case 59:f=!1;break;default:throw new Error("Unknown gif block: 0x"+n[e-1].toString(16))}this.numFrames=function(){return d.length},this.loopCount=function(){return x},this.frameInfo=function(R){if(R<0||R>=d.length)throw new Error("Frame index out of range.");return d[R]},this.decodeAndBlitFrameBGRA=function(R,D){var L=this.frameInfo(R),G=L.width*L.height,U=new Uint8Array(G);SA(n,L.data_offset,U,G);var H=L.palette_offset,te=L.transparent_index;te===null&&(te=256);var se=L.width,ee=t-se,ie=se,$=4*(L.y*t+L.x),W=4*((L.y+L.height)*t+L.x),Q=$,J=4*ee;L.interlaced===!0&&(J+=4*t*7);for(var he=8,be=0,_e=U.length;be<_e;++be){var Ie=U[be];if(ie===0&&(ie=se,(Q+=J)>=W&&(J=4*ee+4*t*(he-1),Q=$+(se+ee)*(he<<1),he>>=1)),Ie===te)Q+=4;else{var Oe=n[H+3*Ie],Ve=n[H+3*Ie+1],nt=n[H+3*Ie+2];D[Q++]=nt,D[Q++]=Ve,D[Q++]=Oe,D[Q++]=255}--ie}},this.decodeAndBlitFrameRGBA=function(R,D){var L=this.frameInfo(R),G=L.width*L.height,U=new Uint8Array(G);SA(n,L.data_offset,U,G);var H=L.palette_offset,te=L.transparent_index;te===null&&(te=256);var se=L.width,ee=t-se,ie=se,$=4*(L.y*t+L.x),W=4*((L.y+L.height)*t+L.x),Q=$,J=4*ee;L.interlaced===!0&&(J+=4*t*7);for(var he=8,be=0,_e=U.length;be<_e;++be){var Ie=U[be];if(ie===0&&(ie=se,(Q+=J)>=W&&(J=4*ee+4*t*(he-1),Q=$+(se+ee)*(he<<1),he>>=1)),Ie===te)Q+=4;else{var Oe=n[H+3*Ie],Ve=n[H+3*Ie+1],nt=n[H+3*Ie+2];D[Q++]=Oe,D[Q++]=Ve,D[Q++]=nt,D[Q++]=255}--ie}}}function SA(n,e,t,r){for(var i=n[e++],a=1<<i,o=a+1,s=o+1,c=i+1,f=(1<<c)-1,d=0,p=0,g=0,m=n[e++],x=new Int32Array(4096),_=null;;){for(;d<16&&m!==0;)p|=n[e++]<<d,d+=8,m===1?m=n[e++]:--m;if(d<c)break;var C=p&f;if(p>>=c,d-=c,C!==a){if(C===o)break;for(var S=C<s?C:_,k=0,M=S;M>a;)M=x[M]>>8,++k;var P=M;if(g+k+(S!==C?1:0)>r)return void Or.log("Warning, gif stream longer than expected.");t[g++]=P;var Y=g+=k;for(S!==C&&(t[g++]=P),M=S;k--;)M=x[M],t[--Y]=255&M,M>>=8;_!==null&&s<4096&&(x[s++]=_<<8|P,s>=f+1&&c<12&&(++c,f=f<<1|1)),_=C}else s=o+1,f=(1<<(c=i+1))-1,_=null}return g!==r&&Or.log("Warning, gif stream shorter than expected."),t}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function Ty(n){var e,t,r,i,a,o=Math.floor,s=new Array(64),c=new Array(64),f=new Array(64),d=new Array(64),p=new Array(65535),g=new Array(65535),m=new Array(64),x=new Array(64),_=[],C=0,S=7,k=new Array(64),M=new Array(64),P=new Array(64),Y=new Array(256),z=new Array(2048),F=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],I=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],T=[0,1,2,3,4,5,6,7,8,9,10,11],j=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],N=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],R=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],D=[0,1,2,3,4,5,6,7,8,9,10,11],L=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],G=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function U($,W){for(var Q=0,J=0,he=new Array,be=1;be<=16;be++){for(var _e=1;_e<=$[be];_e++)he[W[J]]=[],he[W[J]][0]=Q,he[W[J]][1]=be,J++,Q++;Q*=2}return he}function H($){for(var W=$[0],Q=$[1]-1;Q>=0;)W&1<<Q&&(C|=1<<S),Q--,--S<0&&(C==255?(te(255),te(0)):te(C),S=7,C=0)}function te($){_.push($)}function se($){te($>>8&255),te(255&$)}function ee($,W,Q,J,he){for(var be,_e=he[0],Ie=he[240],Oe=function(Ee,lt){var Ye,vt,ct,it,Lt,ht,yt,_t,ut,xt,mt=0;for(ut=0;ut<8;++ut){Ye=Ee[mt],vt=Ee[mt+1],ct=Ee[mt+2],it=Ee[mt+3],Lt=Ee[mt+4],ht=Ee[mt+5],yt=Ee[mt+6];var mn=Ye+(_t=Ee[mt+7]),Kt=Ye-_t,Bt=vt+yt,jt=vt-yt,Vn=ct+ht,kt=ct-ht,Pn=it+Lt,Ft=it-Lt,Ht=mn+Pn,Mn=mn-Pn,Ut=Bt+Vn,Tt=Bt-Vn;Ee[mt]=Ht+Ut,Ee[mt+4]=Ht-Ut;var nn=.707106781*(Tt+Mn);Ee[mt+2]=Mn+nn,Ee[mt+6]=Mn-nn;var $i=.382683433*((Ht=Ft+kt)-(Tt=jt+Kt)),wr=.5411961*Ht+$i,Yr=1.306562965*Tt+$i,Tr=.707106781*(Ut=kt+jt),Wt=Kt+Tr,qn=Kt-Tr;Ee[mt+5]=qn+wr,Ee[mt+3]=qn-wr,Ee[mt+1]=Wt+Yr,Ee[mt+7]=Wt-Yr,mt+=8}for(mt=0,ut=0;ut<8;++ut){Ye=Ee[mt],vt=Ee[mt+8],ct=Ee[mt+16],it=Ee[mt+24],Lt=Ee[mt+32],ht=Ee[mt+40],yt=Ee[mt+48];var fr=Ye+(_t=Ee[mt+56]),Kn=Ye-_t,Br=vt+yt,_r=vt-yt,yi=ct+ht,Lr=ct-ht,xs=it+Lt,za=it-Lt,Ui=fr+xs,zi=fr-xs,xi=Br+yi,bi=Br-yi;Ee[mt]=Ui+xi,Ee[mt+32]=Ui-xi;var Ar=.707106781*(bi+zi);Ee[mt+16]=zi+Ar,Ee[mt+48]=zi-Ar;var dr=.382683433*((Ui=za+Lr)-(bi=_r+Kn)),Va=.5411961*Ui+dr,No=1.306562965*bi+dr,aa=.707106781*(xi=Lr+_r),qa=Kn+aa,Zs=Kn-aa;Ee[mt+40]=Zs+Va,Ee[mt+24]=Zs-Va,Ee[mt+8]=qa+No,Ee[mt+56]=qa-No,mt++}for(ut=0;ut<64;++ut)xt=Ee[ut]*lt[ut],m[ut]=xt>0?xt+.5|0:xt-.5|0;return m}($,W),Ve=0;Ve<64;++Ve)x[F[Ve]]=Oe[Ve];var nt=x[0]-Q;Q=x[0],nt==0?H(J[0]):(H(J[g[be=32767+nt]]),H(p[be]));for(var ot=63;ot>0&&x[ot]==0;)ot--;if(ot==0)return H(_e),Q;for(var ft,de=1;de<=ot;){for(var rt=de;x[de]==0&&de<=ot;)++de;var dt=de-rt;if(dt>=16){ft=dt>>4;for(var at=1;at<=ft;++at)H(Ie);dt&=15}be=32767+x[de],H(he[(dt<<4)+g[be]]),H(p[be]),de++}return ot!=63&&H(_e),Q}function ie($){$=Math.min(Math.max($,1),100),a!=$&&(function(W){for(var Q=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],J=0;J<64;J++){var he=o((Q[J]*W+50)/100);he=Math.min(Math.max(he,1),255),s[F[J]]=he}for(var be=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],_e=0;_e<64;_e++){var Ie=o((be[_e]*W+50)/100);Ie=Math.min(Math.max(Ie,1),255),c[F[_e]]=Ie}for(var Oe=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Ve=0,nt=0;nt<8;nt++)for(var ot=0;ot<8;ot++)f[Ve]=1/(s[F[Ve]]*Oe[nt]*Oe[ot]*8),d[Ve]=1/(c[F[Ve]]*Oe[nt]*Oe[ot]*8),Ve++}($<50?Math.floor(5e3/$):Math.floor(200-2*$)),a=$)}this.encode=function($,W){W&&ie(W),_=new Array,C=0,S=7,se(65496),se(65504),se(16),te(74),te(70),te(73),te(70),te(0),te(1),te(1),te(0),se(1),se(1),te(0),te(0),function(){se(65499),se(132),te(0);for(var vt=0;vt<64;vt++)te(s[vt]);te(1);for(var ct=0;ct<64;ct++)te(c[ct])}(),function(vt,ct){se(65472),se(17),te(8),se(ct),se(vt),te(3),te(1),te(17),te(0),te(2),te(17),te(1),te(3),te(17),te(1)}($.width,$.height),function(){se(65476),se(418),te(0);for(var vt=0;vt<16;vt++)te(I[vt+1]);for(var ct=0;ct<=11;ct++)te(T[ct]);te(16);for(var it=0;it<16;it++)te(j[it+1]);for(var Lt=0;Lt<=161;Lt++)te(N[Lt]);te(1);for(var ht=0;ht<16;ht++)te(R[ht+1]);for(var yt=0;yt<=11;yt++)te(D[yt]);te(17);for(var _t=0;_t<16;_t++)te(L[_t+1]);for(var ut=0;ut<=161;ut++)te(G[ut])}(),se(65498),se(12),te(3),te(1),te(0),te(2),te(17),te(3),te(17),te(0),te(63),te(0);var Q=0,J=0,he=0;C=0,S=7,this.encode.displayName="_encode_";for(var be,_e,Ie,Oe,Ve,nt,ot,ft,de,rt=$.data,dt=$.width,at=$.height,Ee=4*dt,lt=0;lt<at;){for(be=0;be<Ee;){for(Ve=Ee*lt+be,ot=-1,ft=0,de=0;de<64;de++)nt=Ve+(ft=de>>3)*Ee+(ot=4*(7&de)),lt+ft>=at&&(nt-=Ee*(lt+1+ft-at)),be+ot>=Ee&&(nt-=be+ot-Ee+4),_e=rt[nt++],Ie=rt[nt++],Oe=rt[nt++],k[de]=(z[_e]+z[Ie+256|0]+z[Oe+512|0]>>16)-128,M[de]=(z[_e+768|0]+z[Ie+1024|0]+z[Oe+1280|0]>>16)-128,P[de]=(z[_e+1280|0]+z[Ie+1536|0]+z[Oe+1792|0]>>16)-128;Q=ee(k,f,Q,e,r),J=ee(M,d,J,t,i),he=ee(P,d,he,t,i),be+=32}lt+=8}if(S>=0){var Ye=[];Ye[1]=S+1,Ye[0]=(1<<S+1)-1,H(Ye)}return se(65497),new Uint8Array(_)},n=n||50,function(){for(var $=String.fromCharCode,W=0;W<256;W++)Y[W]=$(W)}(),e=U(I,T),t=U(R,D),r=U(j,N),i=U(L,G),function(){for(var $=1,W=2,Q=1;Q<=15;Q++){for(var J=$;J<W;J++)g[32767+J]=Q,p[32767+J]=[],p[32767+J][1]=Q,p[32767+J][0]=J;for(var he=-(W-1);he<=-$;he++)g[32767+he]=Q,p[32767+he]=[],p[32767+he][1]=Q,p[32767+he][0]=W-1+he;$<<=1,W<<=1}}(),function(){for(var $=0;$<256;$++)z[$]=19595*$,z[$+256|0]=38470*$,z[$+512|0]=7471*$+32768,z[$+768|0]=-11059*$,z[$+1024|0]=-21709*$,z[$+1280|0]=32768*$+8421375,z[$+1536|0]=-27439*$,z[$+1792|0]=-5329*$}(),ie(n)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function Al(n,e){if(this.pos=0,this.buffer=n,this.datav=new DataView(n.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function EA(n){function e(T){if(!T)throw Error("assert :P")}function t(T,j,N){for(var R=0;4>R;R++)if(T[j+R]!=N.charCodeAt(R))return!0;return!1}function r(T,j,N,R,D){for(var L=0;L<D;L++)T[j+L]=N[R+L]}function i(T,j,N,R){for(var D=0;D<R;D++)T[j+D]=N}function a(T){return new Int32Array(T)}function o(T,j){for(var N=[],R=0;R<T;R++)N.push(new j);return N}function s(T,j){var N=[];return function R(D,L,G){for(var U=G[L],H=0;H<U&&(D.push(G.length>L+1?[]:new j),!(G.length<L+1));H++)R(D[H],L+1,G)}(N,0,T),N}var c=function(){var T=this;function j(b,E){for(var V=1<<E-1>>>0;b&V;)V>>>=1;return V?(b&V-1)+V:b}function N(b,E,V,X,re){e(!(X%V));do b[E+(X-=V)]=re;while(0<X)}function R(b,E,V,X,re){if(e(2328>=re),512>=re)var ae=a(512);else if((ae=a(re))==null)return 0;return function(oe,ue,pe,ye,Ae,Pe){var me,Ce,De=ue,ze=1<<pe,Le=a(16),He=a(16);for(e(Ae!=0),e(ye!=null),e(oe!=null),e(0<pe),Ce=0;Ce<Ae;++Ce){if(15<ye[Ce])return 0;++Le[ye[Ce]]}if(Le[0]==Ae)return 0;for(He[1]=0,me=1;15>me;++me){if(Le[me]>1<<me)return 0;He[me+1]=He[me]+Le[me]}for(Ce=0;Ce<Ae;++Ce)me=ye[Ce],0<ye[Ce]&&(Pe[He[me]++]=Ce);if(He[15]==1)return(ye=new D).g=0,ye.value=Pe[0],N(oe,De,1,ze,ye),ze;var qe,tt=-1,Qe=ze-1,Pt=0,At=1,sn=1,Ct=1<<pe;for(Ce=0,me=1,Ae=2;me<=pe;++me,Ae<<=1){if(At+=sn<<=1,0>(sn-=Le[me]))return 0;for(;0<Le[me];--Le[me])(ye=new D).g=me,ye.value=Pe[Ce++],N(oe,De+Pt,Ae,Ct,ye),Pt=j(Pt,me)}for(me=pe+1,Ae=2;15>=me;++me,Ae<<=1){if(At+=sn<<=1,0>(sn-=Le[me]))return 0;for(;0<Le[me];--Le[me]){if(ye=new D,(Pt&Qe)!=tt){for(De+=Ct,qe=1<<(tt=me)-pe;15>tt&&!(0>=(qe-=Le[tt]));)++tt,qe<<=1;ze+=Ct=1<<(qe=tt-pe),oe[ue+(tt=Pt&Qe)].g=qe+pe,oe[ue+tt].value=De-ue-tt}ye.g=me-pe,ye.value=Pe[Ce++],N(oe,De+(Pt>>pe),Ae,Ct,ye),Pt=j(Pt,me)}}return At!=2*He[15]-1?0:ze}(b,E,V,X,re,ae)}function D(){this.value=this.g=0}function L(){this.value=this.g=0}function G(){this.G=o(5,D),this.H=a(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=o(al,L)}function U(b,E,V,X){e(b!=null),e(E!=null),e(2147483648>X),b.Ca=254,b.I=0,b.b=-8,b.Ka=0,b.oa=E,b.pa=V,b.Jd=E,b.Yc=V+X,b.Zc=4<=X?V+X-4+1:V,_e(b)}function H(b,E){for(var V=0;0<E--;)V|=Oe(b,128)<<E;return V}function te(b,E){var V=H(b,E);return Ie(b)?-V:V}function se(b,E,V,X){var re,ae=0;for(e(b!=null),e(E!=null),e(4294967288>X),b.Sb=X,b.Ra=0,b.u=0,b.h=0,4<X&&(X=4),re=0;re<X;++re)ae+=E[V+re]<<8*re;b.Ra=ae,b.bb=X,b.oa=E,b.pa=V}function ee(b){for(;8<=b.u&&b.bb<b.Sb;)b.Ra>>>=8,b.Ra+=b.oa[b.pa+b.bb]<<ol-8>>>0,++b.bb,b.u-=8;J(b)&&(b.h=1,b.u=0)}function ie(b,E){if(e(0<=E),!b.h&&E<=Ja){var V=Q(b)&Ea[E];return b.u+=E,ee(b),V}return b.h=1,b.u=0}function $(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function W(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function Q(b){return b.Ra>>>(b.u&ol-1)>>>0}function J(b){return e(b.bb<=b.Sb),b.h||b.bb==b.Sb&&b.u>ol}function he(b,E){b.u=E,b.h=J(b)}function be(b){b.u>=Ds&&(e(b.u>=Ds),ee(b))}function _e(b){e(b!=null&&b.oa!=null),b.pa<b.Zc?(b.I=(b.oa[b.pa++]|b.I<<8)>>>0,b.b+=8):(e(b!=null&&b.oa!=null),b.pa<b.Yc?(b.b+=8,b.I=b.oa[b.pa++]|b.I<<8):b.Ka?b.b=0:(b.I<<=8,b.b+=8,b.Ka=1))}function Ie(b){return H(b,1)}function Oe(b,E){var V=b.Ca;0>b.b&&_e(b);var X=b.b,re=V*E>>>8,ae=(b.I>>>X>re)+0;for(ae?(V-=re,b.I-=re+1<<X>>>0):V=re+1,X=V,re=0;256<=X;)re+=8,X>>=8;return X=7^re+Ul[X],b.b-=X,b.Ca=(V<<X)-1,ae}function Ve(b,E,V){b[E+0]=V>>24&255,b[E+1]=V>>16&255,b[E+2]=V>>8&255,b[E+3]=255&V}function nt(b,E){return b[E+0]|b[E+1]<<8}function ot(b,E){return nt(b,E)|b[E+2]<<16}function ft(b,E){return nt(b,E)|nt(b,E+2)<<16}function de(b,E){var V=1<<E;return e(b!=null),e(0<E),b.X=a(V),b.X==null?0:(b.Mb=32-E,b.Xa=E,1)}function rt(b,E){e(b!=null),e(E!=null),e(b.Xa==E.Xa),r(E.X,0,b.X,0,1<<E.Xa)}function dt(){this.X=[],this.Xa=this.Mb=0}function at(b,E,V,X){e(V!=null),e(X!=null);var re=V[0],ae=X[0];return re==0&&(re=(b*ae+E/2)/E),ae==0&&(ae=(E*re+b/2)/b),0>=re||0>=ae?0:(V[0]=re,X[0]=ae,1)}function Ee(b,E){return b+(1<<E)-1>>>E}function lt(b,E){return((4278255360&b)+(4278255360&E)>>>0&4278255360)+((16711935&b)+(16711935&E)>>>0&16711935)>>>0}function Ye(b,E){T[E]=function(V,X,re,ae,oe,ue,pe){var ye;for(ye=0;ye<oe;++ye){var Ae=T[b](ue[pe+ye-1],re,ae+ye);ue[pe+ye]=lt(V[X+ye],Ae)}}}function vt(){this.ud=this.hd=this.jd=0}function ct(b,E){return((4278124286&(b^E))>>>1)+(b&E)>>>0}function it(b){return 0<=b&&256>b?b:0>b?0:255<b?255:void 0}function Lt(b,E){return it(b+(b-E+.5>>1))}function ht(b,E,V){return Math.abs(E-V)-Math.abs(b-V)}function yt(b,E,V,X,re,ae,oe){for(X=ae[oe-1],V=0;V<re;++V)ae[oe+V]=X=lt(b[E+V],X)}function _t(b,E,V,X,re){var ae;for(ae=0;ae<V;++ae){var oe=b[E+ae],ue=oe>>8&255,pe=16711935&(pe=(pe=16711935&oe)+((ue<<16)+ue));X[re+ae]=(4278255360&oe)+pe>>>0}}function ut(b,E){E.jd=255&b,E.hd=b>>8&255,E.ud=b>>16&255}function xt(b,E,V,X,re,ae){var oe;for(oe=0;oe<X;++oe){var ue=E[V+oe],pe=ue>>>8,ye=ue,Ae=255&(Ae=(Ae=ue>>>16)+((b.jd<<24>>24)*(pe<<24>>24)>>>5));ye=255&(ye=(ye+=(b.hd<<24>>24)*(pe<<24>>24)>>>5)+((b.ud<<24>>24)*(Ae<<24>>24)>>>5)),re[ae+oe]=(4278255360&ue)+(Ae<<16)+ye}}function mt(b,E,V,X,re){T[E]=function(ae,oe,ue,pe,ye,Ae,Pe,me,Ce){for(pe=Pe;pe<me;++pe)for(Pe=0;Pe<Ce;++Pe)ye[Ae++]=re(ue[X(ae[oe++])])},T[b]=function(ae,oe,ue,pe,ye,Ae,Pe){var me=8>>ae.b,Ce=ae.Ea,De=ae.K[0],ze=ae.w;if(8>me)for(ae=(1<<ae.b)-1,ze=(1<<me)-1;oe<ue;++oe){var Le,He=0;for(Le=0;Le<Ce;++Le)Le&ae||(He=X(pe[ye++])),Ae[Pe++]=re(De[He&ze]),He>>=me}else T["VP8LMapColor"+V](pe,ye,De,ze,Ae,Pe,oe,ue,Ce)}}function mn(b,E,V,X,re){for(V=E+V;E<V;){var ae=b[E++];X[re++]=ae>>16&255,X[re++]=ae>>8&255,X[re++]=255&ae}}function Kt(b,E,V,X,re){for(V=E+V;E<V;){var ae=b[E++];X[re++]=ae>>16&255,X[re++]=ae>>8&255,X[re++]=255&ae,X[re++]=ae>>24&255}}function Bt(b,E,V,X,re){for(V=E+V;E<V;){var ae=(oe=b[E++])>>16&240|oe>>12&15,oe=240&oe|oe>>28&15;X[re++]=ae,X[re++]=oe}}function jt(b,E,V,X,re){for(V=E+V;E<V;){var ae=(oe=b[E++])>>16&248|oe>>13&7,oe=oe>>5&224|oe>>3&31;X[re++]=ae,X[re++]=oe}}function Vn(b,E,V,X,re){for(V=E+V;E<V;){var ae=b[E++];X[re++]=255&ae,X[re++]=ae>>8&255,X[re++]=ae>>16&255}}function kt(b,E,V,X,re,ae){if(ae==0)for(V=E+V;E<V;)Ve(X,((ae=b[E++])[0]>>24|ae[1]>>8&65280|ae[2]<<8&16711680|ae[3]<<24)>>>0),re+=32;else r(X,re,b,E,V)}function Pn(b,E){T[E][0]=T[b+"0"],T[E][1]=T[b+"1"],T[E][2]=T[b+"2"],T[E][3]=T[b+"3"],T[E][4]=T[b+"4"],T[E][5]=T[b+"5"],T[E][6]=T[b+"6"],T[E][7]=T[b+"7"],T[E][8]=T[b+"8"],T[E][9]=T[b+"9"],T[E][10]=T[b+"10"],T[E][11]=T[b+"11"],T[E][12]=T[b+"12"],T[E][13]=T[b+"13"],T[E][14]=T[b+"0"],T[E][15]=T[b+"0"]}function Ft(b){return b==Df||b==Vl||b==ul||b==Su}function Ht(){this.eb=[],this.size=this.A=this.fb=0}function Mn(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Ut(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Ht,this.f.kb=new Mn,this.sd=null}function Tt(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function nn(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function $i(b){return alert("todo:WebPSamplerProcessPlane"),b.T}function wr(b,E){var V=b.T,X=E.ba.f.RGBA,re=X.eb,ae=X.fb+b.ka*X.A,oe=qi[E.ba.S],ue=b.y,pe=b.O,ye=b.f,Ae=b.N,Pe=b.ea,me=b.W,Ce=E.cc,De=E.dc,ze=E.Mc,Le=E.Nc,He=b.ka,qe=b.ka+b.T,tt=b.U,Qe=tt+1>>1;for(He==0?oe(ue,pe,null,null,ye,Ae,Pe,me,ye,Ae,Pe,me,re,ae,null,null,tt):(oe(E.ec,E.fc,ue,pe,Ce,De,ze,Le,ye,Ae,Pe,me,re,ae-X.A,re,ae,tt),++V);He+2<qe;He+=2)Ce=ye,De=Ae,ze=Pe,Le=me,Ae+=b.Rc,me+=b.Rc,ae+=2*X.A,oe(ue,(pe+=2*b.fa)-b.fa,ue,pe,Ce,De,ze,Le,ye,Ae,Pe,me,re,ae-X.A,re,ae,tt);return pe+=b.fa,b.j+qe<b.o?(r(E.ec,E.fc,ue,pe,tt),r(E.cc,E.dc,ye,Ae,Qe),r(E.Mc,E.Nc,Pe,me,Qe),V--):1&qe||oe(ue,pe,null,null,ye,Ae,Pe,me,ye,Ae,Pe,me,re,ae+X.A,null,null,tt),V}function Yr(b,E,V){var X=b.F,re=[b.J];if(X!=null){var ae=b.U,oe=E.ba.S,ue=oe==Ic||oe==ul;E=E.ba.f.RGBA;var pe=[0],ye=b.ka;pe[0]=b.T,b.Kb&&(ye==0?--pe[0]:(--ye,re[0]-=b.width),b.j+b.ka+b.T==b.o&&(pe[0]=b.o-b.j-ye));var Ae=E.eb;ye=E.fb+ye*E.A,b=_o(X,re[0],b.width,ae,pe,Ae,ye+(ue?0:3),E.A),e(V==pe),b&&Ft(oe)&&_u(Ae,ye,ue,ae,pe,E.A)}return 0}function Tr(b){var E=b.ma,V=E.ba.S,X=11>V,re=V==Au||V==Nf||V==Ic||V==cl||V==12||Ft(V);if(E.memory=null,E.Ib=null,E.Jb=null,E.Nd=null,!Fl(E.Oa,b,re?11:12))return 0;if(re&&Ft(V)&&Qa(),b.da)alert("todo:use_scaling");else{if(X){if(E.Ib=$i,b.Kb){if(V=b.U+1>>1,E.memory=a(b.U+2*V),E.memory==null)return 0;E.ec=E.memory,E.fc=0,E.cc=E.ec,E.dc=E.fc+b.U,E.Mc=E.cc,E.Nc=E.dc+V,E.Ib=wr,Qa()}}else alert("todo:EmitYUV");re&&(E.Jb=Yr,X&&Ka())}if(X&&!rp){for(b=0;256>b;++b)w2[b]=89858*(b-128)+Ri>>Bs,Lf[b]=-22014*(b-128)+Ri,Zh[b]=-45773*(b-128),Ni[b]=113618*(b-128)+Ri>>Bs;for(b=Wl;b<Md;++b)E=76283*(b-16)+Ri>>Bs,Pf[b-Wl]=Ha(E,255),Jh[b-Wl]=Ha(E+8>>4,15);rp=1}return 1}function Wt(b){var E=b.ma,V=b.U,X=b.T;return e(!(1&b.ka)),0>=V||0>=X?0:(V=E.Ib(b,E),E.Jb!=null&&E.Jb(b,E,V),E.Dc+=V,1)}function qn(b){b.ma.memory=null}function fr(b,E,V,X){return ie(b,8)!=47?0:(E[0]=ie(b,14)+1,V[0]=ie(b,14)+1,X[0]=ie(b,1),ie(b,3)!=0?0:!b.h)}function Kn(b,E){if(4>b)return b+1;var V=b-2>>1;return(2+(1&b)<<V)+ie(E,V)+1}function Br(b,E){return 120<E?E-120:1<=(V=((V=dl[E-1])>>4)*b+(8-(15&V)))?V:1;var V}function _r(b,E,V){var X=Q(V),re=b[E+=255&X].g-8;return 0<re&&(he(V,V.u+8),X=Q(V),E+=b[E].value,E+=X&(1<<re)-1),he(V,V.u+b[E].g),b[E].value}function yi(b,E,V){return V.g+=b.g,V.value+=b.value<<E>>>0,e(8>=V.g),b.g}function Lr(b,E,V){var X=b.xc;return e((E=X==0?0:b.vc[b.md*(V>>X)+(E>>X)])<b.Wb),b.Ya[E]}function xs(b,E,V,X){var re=b.ab,ae=b.c*E,oe=b.C;E=oe+E;var ue=V,pe=X;for(X=b.Ta,V=b.Ua;0<re--;){var ye=b.gc[re],Ae=oe,Pe=E,me=ue,Ce=pe,De=(pe=X,ue=V,ye.Ea);switch(e(Ae<Pe),e(Pe<=ye.nc),ye.hc){case 2:ui(me,Ce,(Pe-Ae)*De,pe,ue);break;case 0:var ze=Ae,Le=Pe,He=pe,qe=ue,tt=(Ct=ye).Ea;ze==0&&(If(me,Ce,null,null,1,He,qe),yt(me,Ce+1,0,0,tt-1,He,qe+1),Ce+=tt,qe+=tt,++ze);for(var Qe=1<<Ct.b,Pt=Qe-1,At=Ee(tt,Ct.b),sn=Ct.K,Ct=Ct.w+(ze>>Ct.b)*At;ze<Le;){var In=sn,Si=Ct,rn=1;for(mu(me,Ce,He,qe-tt,1,He,qe);rn<tt;){var It=(rn&~Pt)+Qe;It>tt&&(It=tt),(0,yu[In[Si++]>>8&15])(me,Ce+ +rn,He,qe+rn-tt,It-rn,He,qe+rn),rn=It}Ce+=tt,qe+=tt,++ze&Pt||(Ct+=At)}Pe!=ye.nc&&r(pe,ue-De,pe,ue+(Pe-Ae-1)*De,De);break;case 1:for(De=me,Le=Ce,tt=(me=ye.Ea)-(qe=me&~(He=(Ce=1<<ye.b)-1)),ze=Ee(me,ye.b),Qe=ye.K,ye=ye.w+(Ae>>ye.b)*ze;Ae<Pe;){for(Pt=Qe,At=ye,sn=new vt,Ct=Le+qe,In=Le+me;Le<Ct;)ut(Pt[At++],sn),xu(sn,De,Le,Ce,pe,ue),Le+=Ce,ue+=Ce;Le<In&&(ut(Pt[At++],sn),xu(sn,De,Le,tt,pe,ue),Le+=tt,ue+=tt),++Ae&He||(ye+=ze)}break;case 3:if(me==pe&&Ce==ue&&0<ye.b){for(Le=pe,me=De=ue+(Pe-Ae)*De-(qe=(Pe-Ae)*Ee(ye.Ea,ye.b)),Ce=pe,He=ue,ze=[],qe=(tt=qe)-1;0<=qe;--qe)ze[qe]=Ce[He+qe];for(qe=tt-1;0<=qe;--qe)Le[me+qe]=ze[qe];Ed(ye,Ae,Pe,pe,De,pe,ue)}else Ed(ye,Ae,Pe,me,Ce,pe,ue)}ue=X,pe=V}pe!=V&&r(X,V,ue,pe,ae)}function za(b,E){var V=b.V,X=b.Ba+b.c*b.C,re=E-b.C;if(e(E<=b.l.o),e(16>=re),0<re){var ae=b.l,oe=b.Ta,ue=b.Ua,pe=ae.width;if(xs(b,re,V,X),re=ue=[ue],e((V=b.C)<(X=E)),e(ae.v<ae.va),X>ae.o&&(X=ae.o),V<ae.j){var ye=ae.j-V;V=ae.j,re[0]+=ye*pe}if(V>=X?V=0:(re[0]+=4*ae.v,ae.ka=V-ae.j,ae.U=ae.va-ae.v,ae.T=X-V,V=1),V){if(ue=ue[0],11>(V=b.ca).S){var Ae=V.f.RGBA,Pe=(X=V.S,re=ae.U,ae=ae.T,ye=Ae.eb,Ae.A),me=ae;for(Ae=Ae.fb+b.Ma*Ae.A;0<me--;){var Ce=oe,De=ue,ze=re,Le=ye,He=Ae;switch(X){case ca:bu(Ce,De,ze,Le,He);break;case Au:Os(Ce,De,ze,Le,He);break;case Df:Os(Ce,De,ze,Le,He),_u(Le,He,0,ze,1,0);break;case Ls:sl(Ce,De,ze,Le,He);break;case Nf:kt(Ce,De,ze,Le,He,1);break;case Vl:kt(Ce,De,ze,Le,He,1),_u(Le,He,0,ze,1,0);break;case Ic:kt(Ce,De,ze,Le,He,0);break;case ul:kt(Ce,De,ze,Le,He,0),_u(Le,He,1,ze,1,0);break;case cl:zl(Ce,De,ze,Le,He);break;case Su:zl(Ce,De,ze,Le,He),wo(Le,He,ze,1,0);break;case Dd:xo(Ce,De,ze,Le,He);break;default:e(0)}ue+=pe,Ae+=Pe}b.Ma+=ae}else alert("todo:EmitRescaledRowsYUVA");e(b.Ma<=V.height)}}b.C=E,e(b.C<=b.i)}function Ui(b){var E;if(0<b.ua)return 0;for(E=0;E<b.Wb;++E){var V=b.Ya[E].G,X=b.Ya[E].H;if(0<V[1][X[1]+0].g||0<V[2][X[2]+0].g||0<V[3][X[3]+0].g)return 0}return 1}function zi(b,E,V,X,re,ae){if(b.Z!=0){var oe=b.qd,ue=b.rd;for(e(Ms[b.Z]!=null);E<V;++E)Ms[b.Z](oe,ue,X,re,X,re,ae),oe=X,ue=re,re+=ae;b.qd=oe,b.rd=ue}}function xi(b,E){var V=b.l.ma,X=V.Z==0||V.Z==1?b.l.j:b.C;if(X=b.C<X?X:b.C,e(E<=b.l.o),E>X){var re=b.l.width,ae=V.ca,oe=V.tb+re*X,ue=b.V,pe=b.Ba+b.c*X,ye=b.gc;e(b.ab==1),e(ye[0].hc==3),eo(ye[0],X,E,ue,pe,ae,oe),zi(V,X,E,ae,oe,re)}b.C=b.Ma=E}function bi(b,E,V,X,re,ae,oe){var ue=b.$/X,pe=b.$%X,ye=b.m,Ae=b.s,Pe=V+b.$,me=Pe;re=V+X*re;var Ce=V+X*ae,De=280+Ae.ua,ze=b.Pb?ue:16777216,Le=0<Ae.ua?Ae.Wa:null,He=Ae.wc,qe=Pe<Ce?Lr(Ae,pe,ue):null;e(b.C<ae),e(Ce<=re);var tt=!1;e:for(;;){for(;tt||Pe<Ce;){var Qe=0;if(ue>=ze){var Pt=Pe-V;e((ze=b).Pb),ze.wd=ze.m,ze.xd=Pt,0<ze.s.ua&&rt(ze.s.Wa,ze.s.vb),ze=ue+ep}if(pe&He||(qe=Lr(Ae,pe,ue)),e(qe!=null),qe.Qb&&(E[Pe]=qe.qb,tt=!0),!tt)if(be(ye),qe.jc){Qe=ye,Pt=E;var At=Pe,sn=qe.pd[Q(Qe)&al-1];e(qe.jc),256>sn.g?(he(Qe,Qe.u+sn.g),Pt[At]=sn.value,Qe=0):(he(Qe,Qe.u+sn.g-256),e(256<=sn.value),Qe=sn.value),Qe==0&&(tt=!0)}else Qe=_r(qe.G[0],qe.H[0],ye);if(ye.h)break;if(tt||256>Qe){if(!tt)if(qe.nd)E[Pe]=(qe.qb|Qe<<8)>>>0;else{if(be(ye),tt=_r(qe.G[1],qe.H[1],ye),be(ye),Pt=_r(qe.G[2],qe.H[2],ye),At=_r(qe.G[3],qe.H[3],ye),ye.h)break;E[Pe]=(At<<24|tt<<16|Qe<<8|Pt)>>>0}if(tt=!1,++Pe,++pe>=X&&(pe=0,++ue,oe!=null&&ue<=ae&&!(ue%16)&&oe(b,ue),Le!=null))for(;me<Pe;)Qe=E[me++],Le.X[(506832829*Qe&4294967295)>>>Le.Mb]=Qe}else if(280>Qe){if(Qe=Kn(Qe-256,ye),Pt=_r(qe.G[4],qe.H[4],ye),be(ye),Pt=Br(X,Pt=Kn(Pt,ye)),ye.h)break;if(Pe-V<Pt||re-Pe<Qe)break e;for(At=0;At<Qe;++At)E[Pe+At]=E[Pe+At-Pt];for(Pe+=Qe,pe+=Qe;pe>=X;)pe-=X,++ue,oe!=null&&ue<=ae&&!(ue%16)&&oe(b,ue);if(e(Pe<=re),pe&He&&(qe=Lr(Ae,pe,ue)),Le!=null)for(;me<Pe;)Qe=E[me++],Le.X[(506832829*Qe&4294967295)>>>Le.Mb]=Qe}else{if(!(Qe<De))break e;for(tt=Qe-280,e(Le!=null);me<Pe;)Qe=E[me++],Le.X[(506832829*Qe&4294967295)>>>Le.Mb]=Qe;Qe=Pe,e(!(tt>>>(Pt=Le).Xa)),E[Qe]=Pt.X[tt],tt=!0}tt||e(ye.h==J(ye))}if(b.Pb&&ye.h&&Pe<re)e(b.m.h),b.a=5,b.m=b.wd,b.$=b.xd,0<b.s.ua&&rt(b.s.vb,b.s.Wa);else{if(ye.h)break e;oe!=null&&oe(b,ue>ae?ae:ue),b.a=0,b.$=Pe-V}return 1}return b.a=3,0}function Ar(b){e(b!=null),b.vc=null,b.yc=null,b.Ya=null;var E=b.Wa;E!=null&&(E.X=null),b.vb=null,e(b!=null)}function dr(){var b=new Gt;return b==null?null:(b.a=0,b.xb=Eu,Pn("Predictor","VP8LPredictors"),Pn("Predictor","VP8LPredictors_C"),Pn("PredictorAdd","VP8LPredictorsAdd"),Pn("PredictorAdd","VP8LPredictorsAdd_C"),ui=_t,xu=xt,bu=mn,Os=Kt,zl=Bt,xo=jt,sl=Vn,T.VP8LMapColor32b=Qr,T.VP8LMapColor8b=vu,b)}function Va(b,E,V,X,re){var ae=1,oe=[b],ue=[E],pe=X.m,ye=X.s,Ae=null,Pe=0;e:for(;;){if(V)for(;ae&&ie(pe,1);){var me=oe,Ce=ue,De=X,ze=1,Le=De.m,He=De.gc[De.ab],qe=ie(Le,2);if(De.Oc&1<<qe)ae=0;else{switch(De.Oc|=1<<qe,He.hc=qe,He.Ea=me[0],He.nc=Ce[0],He.K=[null],++De.ab,e(4>=De.ab),qe){case 0:case 1:He.b=ie(Le,3)+2,ze=Va(Ee(He.Ea,He.b),Ee(He.nc,He.b),0,De,He.K),He.K=He.K[0];break;case 3:var tt,Qe=ie(Le,8)+1,Pt=16<Qe?0:4<Qe?1:2<Qe?2:3;if(me[0]=Ee(He.Ea,Pt),He.b=Pt,tt=ze=Va(Qe,1,0,De,He.K)){var At,sn=Qe,Ct=He,In=1<<(8>>Ct.b),Si=a(In);if(Si==null)tt=0;else{var rn=Ct.K[0],It=Ct.w;for(Si[0]=Ct.K[0][0],At=1;At<1*sn;++At)Si[At]=lt(rn[It+At],Si[At-1]);for(;At<4*In;++At)Si[At]=0;Ct.K[0]=null,Ct.K[0]=Si,tt=1}}ze=tt;break;case 2:break;default:e(0)}ae=ze}}if(oe=oe[0],ue=ue[0],ae&&ie(pe,1)&&!(ae=1<=(Pe=ie(pe,4))&&11>=Pe)){X.a=3;break e}var pt;if(pt=ae)t:{var qr,ln,gn,Rt=X,un=oe,Bn=ue,Nr=Pe,fi=V,di=Rt.m,ei=Rt.s,Sn=[null],Fn=1,ti=0,Qt=Rc[Nr];n:for(;;){if(fi&&ie(di,1)){var Di=ie(di,3)+2,Eo=Ee(un,Di),ni=Ee(Bn,Di),Ia=Eo*ni;if(!Va(Eo,ni,0,Rt,Sn))break n;for(Sn=Sn[0],ei.xc=Di,qr=0;qr<Ia;++qr){var pr=Sn[qr]>>8&65535;Sn[qr]=pr,pr>=Fn&&(Fn=pr+1)}}if(di.h)break n;for(ln=0;5>ln;++ln){var hi=Ao[ln];!ln&&0<Nr&&(hi+=1<<Nr),ti<hi&&(ti=hi)}var Ta=o(Fn*Qt,D),Yi=Fn,Sr=o(Yi,G);if(Sr==null)var Wn=null;else e(65536>=Yi),Wn=Sr;var ua=a(ti);if(Wn==null||ua==null||Ta==null){Rt.a=1;break n}var Xi=Ta;for(qr=gn=0;qr<Fn;++qr){var or=Wn[qr],Ra=or.G,Oi=or.H,Fs=0,ss=1,ki=0;for(ln=0;5>ln;++ln){hi=Ao[ln],Ra[ln]=Xi,Oi[ln]=gn,!ln&&0<Nr&&(hi+=1<<Nr);i:{var Mf,jd=hi,jf=Rt,Iu=ua,op=Xi,sp=gn,Bf=0,ml=jf.m,A2=ie(ml,1);if(i(Iu,0,0,jd),A2){var lp=ie(ml,1)+1,cp=ie(ml,1),e0=ie(ml,cp==0?1:8);Iu[e0]=1,lp==2&&(Iu[e0=ie(ml,8)]=1);var Tu=1}else{var t0=a(19),n0=ie(ml,4)+4;if(19<n0){jf.a=3;var Ff=0;break i}for(Mf=0;Mf<n0;++Mf)t0[fl[Mf]]=ie(ml,3);var Bd=void 0,Ru=void 0,up=jf,fp=t0,vl=jd,Uf=Iu,Fd=0,ls=up.m,Nu=8,r0=o(128,D);r:for(;R(r0,0,7,fp,19);){if(ie(ls,1)){var dp=2+2*ie(ls,3);if((Bd=2+ie(ls,dp))>vl)break r}else Bd=vl;for(Ru=0;Ru<vl&&Bd--;){be(ls);var i0=r0[0+(127&Q(ls))];he(ls,ls.u+i0.g);var Oc=i0.value;if(16>Oc)Uf[Ru++]=Oc,Oc!=0&&(Nu=Oc);else{var hp=Oc==16,a0=Oc-16,o0=zo[a0],s0=ie(ls,Od[a0])+o0;if(Ru+s0>vl)break r;for(var pp=hp?Nu:0;0<s0--;)Uf[Ru++]=pp}}Fd=1;break r}Fd||(up.a=3),Tu=Fd}(Tu=Tu&&!ml.h)&&(Bf=R(op,sp,8,Iu,jd)),Tu&&Bf!=0?Ff=Bf:(jf.a=3,Ff=0)}if(Ff==0)break n;if(ss&&Tc[ln]==1&&(ss=Xi[gn].g==0),Fs+=Xi[gn].g,gn+=Ff,3>=ln){var kc,Ud=ua[0];for(kc=1;kc<hi;++kc)ua[kc]>Ud&&(Ud=ua[kc]);ki+=Ud}}if(or.nd=ss,or.Qb=0,ss&&(or.qb=(Ra[3][Oi[3]+0].value<<24|Ra[1][Oi[1]+0].value<<16|Ra[2][Oi[2]+0].value)>>>0,Fs==0&&256>Ra[0][Oi[0]+0].value&&(or.Qb=1,or.qb+=Ra[0][Oi[0]+0].value<<8)),or.jc=!or.Qb&&6>ki,or.jc){var zf,yl=or;for(zf=0;zf<al;++zf){var Us=zf,xl=yl.pd[Us],Vf=yl.G[0][yl.H[0]+Us];256<=Vf.value?(xl.g=Vf.g+256,xl.value=Vf.value):(xl.g=0,xl.value=0,Us>>=yi(Vf,8,xl),Us>>=yi(yl.G[1][yl.H[1]+Us],16,xl),Us>>=yi(yl.G[2][yl.H[2]+Us],0,xl),yi(yl.G[3][yl.H[3]+Us],24,xl))}}}ei.vc=Sn,ei.Wb=Fn,ei.Ya=Wn,ei.yc=Ta,pt=1;break t}pt=0}if(!(ae=pt)){X.a=3;break e}if(0<Pe){if(ye.ua=1<<Pe,!de(ye.Wa,Pe)){X.a=1,ae=0;break e}}else ye.ua=0;var qf=X,l0=oe,gp=ue,c0=qf.s,u0=c0.xc;if(qf.c=l0,qf.i=gp,c0.md=Ee(l0,u0),c0.wc=u0==0?-1:(1<<u0)-1,V){X.xb=np;break e}if((Ae=a(oe*ue))==null){X.a=1,ae=0;break e}ae=(ae=bi(X,Ae,0,oe,ue,ue,null))&&!pe.h;break e}return ae?(re!=null?re[0]=Ae:(e(Ae==null),e(V)),X.$=0,V||Ar(ye)):Ar(ye),ae}function No(b,E){var V=b.c*b.i,X=V+E+16*E;return e(b.c<=E),b.V=a(X),b.V==null?(b.Ta=null,b.Ua=0,b.a=1,0):(b.Ta=b.V,b.Ua=b.Ba+V+E,1)}function aa(b,E){var V=b.C,X=E-V,re=b.V,ae=b.Ba+b.c*V;for(e(E<=b.l.o);0<X;){var oe=16<X?16:X,ue=b.l.ma,pe=b.l.width,ye=pe*oe,Ae=ue.ca,Pe=ue.tb+pe*V,me=b.Ta,Ce=b.Ua;xs(b,oe,re,ae),Sc(me,Ce,Ae,Pe,ye),zi(ue,V,V+oe,Ae,Pe,pe),X-=oe,re+=oe*b.c,V+=oe}e(V==E),b.C=b.Ma=E}function qa(){this.ub=this.yd=this.td=this.Rb=0}function Zs(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function fu(){this.Fb=this.Bb=this.Cb=0,this.Zb=a(4),this.Lb=a(4)}function ts(){this.Yb=function(){var b=[];return function E(V,X,re){for(var ae=re[X],oe=0;oe<ae&&(V.push(re.length>X+1?[]:0),!(re.length<X+1));oe++)E(V[oe],X+1,re)}(b,0,[3,11]),b}()}function mc(){this.jb=a(3),this.Wc=s([4,8],ts),this.Xc=s([4,17],ts)}function ns(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new a(4),this.od=new a(4)}function oi(){this.ld=this.La=this.dd=this.tc=0}function si(){this.Na=this.la=0}function bs(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function jl(){this.ad=a(384),this.Za=0,this.Ob=a(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Do(){this.uc=this.M=this.Nb=0,this.wa=Array(new oi),this.Y=0,this.ya=Array(new jl),this.aa=0,this.l=new rs}function Js(){this.y=a(16),this.f=a(8),this.ea=a(8)}function el(){this.cb=this.a=0,this.sc="",this.m=new $,this.Od=new qa,this.Kc=new Zs,this.ed=new ns,this.Qa=new fu,this.Ic=this.$c=this.Aa=0,this.D=new Do,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=o(8,$),this.ia=0,this.pb=o(4,bs),this.Pa=new mc,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Js),this.Hd=0,this.rb=Array(new si),this.sb=0,this.wa=Array(new oi),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new jl),this.L=this.aa=0,this.gd=s([4,2],oi),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Ha(b,E){return 0>b?0:b>E?E:b}function rs(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Gi(){var b=new el;return b!=null&&(b.a=0,b.sc="OK",b.cb=0,b.Xb=0,Ti||(Ti=ws)),b}function Pr(b,E,V){return b.a==0&&(b.a=E,b.sc=V,b.cb=0),0}function du(b,E,V){return 3<=V&&b[E+0]==157&&b[E+1]==1&&b[E+2]==42}function ba(b,E){if(b==null)return 0;if(b.a=0,b.sc="OK",E==null)return Pr(b,2,"null VP8Io passed to VP8GetHeaders()");var V=E.data,X=E.w,re=E.ha;if(4>re)return Pr(b,7,"Truncated header.");var ae=V[X+0]|V[X+1]<<8|V[X+2]<<16,oe=b.Od;if(oe.Rb=!(1&ae),oe.td=ae>>1&7,oe.yd=ae>>4&1,oe.ub=ae>>5,3<oe.td)return Pr(b,3,"Incorrect keyframe parameters.");if(!oe.yd)return Pr(b,4,"Frame not displayable.");X+=3,re-=3;var ue=b.Kc;if(oe.Rb){if(7>re)return Pr(b,7,"cannot parse picture header");if(!du(V,X,re))return Pr(b,3,"Bad code word");ue.c=16383&(V[X+4]<<8|V[X+3]),ue.Td=V[X+4]>>6,ue.i=16383&(V[X+6]<<8|V[X+5]),ue.Ud=V[X+6]>>6,X+=7,re-=7,b.za=ue.c+15>>4,b.Ub=ue.i+15>>4,E.width=ue.c,E.height=ue.i,E.Da=0,E.j=0,E.v=0,E.va=E.width,E.o=E.height,E.da=0,E.ib=E.width,E.hb=E.height,E.U=E.width,E.T=E.height,i((ae=b.Pa).jb,0,255,ae.jb.length),e((ae=b.Qa)!=null),ae.Cb=0,ae.Bb=0,ae.Fb=1,i(ae.Zb,0,0,ae.Zb.length),i(ae.Lb,0,0,ae.Lb)}if(oe.ub>re)return Pr(b,7,"bad partition length");U(ae=b.m,V,X,oe.ub),X+=oe.ub,re-=oe.ub,oe.Rb&&(ue.Ld=Ie(ae),ue.Kd=Ie(ae)),ue=b.Qa;var pe,ye=b.Pa;if(e(ae!=null),e(ue!=null),ue.Cb=Ie(ae),ue.Cb){if(ue.Bb=Ie(ae),Ie(ae)){for(ue.Fb=Ie(ae),pe=0;4>pe;++pe)ue.Zb[pe]=Ie(ae)?te(ae,7):0;for(pe=0;4>pe;++pe)ue.Lb[pe]=Ie(ae)?te(ae,6):0}if(ue.Bb)for(pe=0;3>pe;++pe)ye.jb[pe]=Ie(ae)?H(ae,8):255}else ue.Bb=0;if(ae.Ka)return Pr(b,3,"cannot parse segment header");if((ue=b.ed).zd=Ie(ae),ue.Tb=H(ae,6),ue.wb=H(ae,3),ue.Pc=Ie(ae),ue.Pc&&Ie(ae)){for(ye=0;4>ye;++ye)Ie(ae)&&(ue.vd[ye]=te(ae,6));for(ye=0;4>ye;++ye)Ie(ae)&&(ue.od[ye]=te(ae,6))}if(b.L=ue.Tb==0?0:ue.zd?1:2,ae.Ka)return Pr(b,3,"cannot parse filter header");var Ae=re;if(re=pe=X,X=pe+Ae,ue=Ae,b.Xb=(1<<H(b.m,2))-1,Ae<3*(ye=b.Xb))V=7;else{for(pe+=3*ye,ue-=3*ye,Ae=0;Ae<ye;++Ae){var Pe=V[re+0]|V[re+1]<<8|V[re+2]<<16;Pe>ue&&(Pe=ue),U(b.Jc[+Ae],V,pe,Pe),pe+=Pe,ue-=Pe,re+=3}U(b.Jc[+ye],V,pe,ue),V=pe<X?0:5}if(V!=0)return Pr(b,V,"cannot parse partitions");for(V=H(pe=b.m,7),re=Ie(pe)?te(pe,4):0,X=Ie(pe)?te(pe,4):0,ue=Ie(pe)?te(pe,4):0,ye=Ie(pe)?te(pe,4):0,pe=Ie(pe)?te(pe,4):0,Ae=b.Qa,Pe=0;4>Pe;++Pe){if(Ae.Cb){var me=Ae.Zb[Pe];Ae.Fb||(me+=V)}else{if(0<Pe){b.pb[Pe]=b.pb[0];continue}me=V}var Ce=b.pb[Pe];Ce.Sc[0]=Of[Ha(me+re,127)],Ce.Sc[1]=kf[Ha(me+0,127)],Ce.Eb[0]=2*Of[Ha(me+X,127)],Ce.Eb[1]=101581*kf[Ha(me+ue,127)]>>16,8>Ce.Eb[1]&&(Ce.Eb[1]=8),Ce.Qc[0]=Of[Ha(me+ye,117)],Ce.Qc[1]=kf[Ha(me+pe,127)],Ce.lc=me+pe}if(!oe.Rb)return Pr(b,4,"Not a key frame.");for(Ie(ae),oe=b.Pa,V=0;4>V;++V){for(re=0;8>re;++re)for(X=0;3>X;++X)for(ue=0;11>ue;++ue)ye=Oe(ae,Nc[V][re][X][ue])?H(ae,8):Ps[V][re][X][ue],oe.Wc[V][re].Yb[X][ue]=ye;for(re=0;17>re;++re)oe.Xc[V][re]=oe.Wc[V][tp[re]]}return b.kc=Ie(ae),b.kc&&(b.Bd=H(ae,8)),b.cb=1}function ws(b,E,V,X,re,ae,oe){var ue=E[re].Yb[V];for(V=0;16>re;++re){if(!Oe(b,ue[V+0]))return re;for(;!Oe(b,ue[V+1]);)if(ue=E[++re].Yb[0],V=0,re==16)return 16;var pe=E[re+1].Yb;if(Oe(b,ue[V+2])){var ye=b,Ae=0;if(Oe(ye,(me=ue)[(Pe=V)+3]))if(Oe(ye,me[Pe+6])){for(ue=0,Pe=2*(Ae=Oe(ye,me[Pe+8]))+(me=Oe(ye,me[Pe+9+Ae])),Ae=0,me=Jr[Pe];me[ue];++ue)Ae+=Ae+Oe(ye,me[ue]);Ae+=3+(8<<Pe)}else Oe(ye,me[Pe+7])?(Ae=7+2*Oe(ye,165),Ae+=Oe(ye,145)):Ae=5+Oe(ye,159);else Ae=Oe(ye,me[Pe+4])?3+Oe(ye,me[Pe+5]):2;ue=pe[2]}else Ae=1,ue=pe[1];pe=oe+Zn[re],0>(ye=b).b&&_e(ye);var Pe,me=ye.b,Ce=(Pe=ye.Ca>>1)-(ye.I>>me)>>31;--ye.b,ye.Ca+=Ce,ye.Ca|=1,ye.I-=(Pe+1&Ce)<<me,ae[pe]=((Ae^Ce)-Ce)*X[(0<re)+0]}return 16}function _s(b){var E=b.rb[b.sb-1];E.la=0,E.Na=0,i(b.zc,0,0,b.zc.length),b.ja=0}function Wa(b,E,V,X,re){re=b[E+V+32*X]+(re>>3),b[E+V+32*X]=-256&re?0>re?0:255:re}function bn(b,E,V,X,re,ae){Wa(b,E,0,V,X+re),Wa(b,E,1,V,X+ae),Wa(b,E,2,V,X-ae),Wa(b,E,3,V,X-re)}function li(b){return(20091*b>>16)+b}function As(b,E,V,X){var re,ae=0,oe=a(16);for(re=0;4>re;++re){var ue=b[E+0]+b[E+8],pe=b[E+0]-b[E+8],ye=(35468*b[E+4]>>16)-li(b[E+12]),Ae=li(b[E+4])+(35468*b[E+12]>>16);oe[ae+0]=ue+Ae,oe[ae+1]=pe+ye,oe[ae+2]=pe-ye,oe[ae+3]=ue-Ae,ae+=4,E++}for(re=ae=0;4>re;++re)ue=(b=oe[ae+0]+4)+oe[ae+8],pe=b-oe[ae+8],ye=(35468*oe[ae+4]>>16)-li(oe[ae+12]),Wa(V,X,0,0,ue+(Ae=li(oe[ae+4])+(35468*oe[ae+12]>>16))),Wa(V,X,1,0,pe+ye),Wa(V,X,2,0,pe-ye),Wa(V,X,3,0,ue-Ae),ae++,X+=32}function Ss(b,E,V,X){var re=b[E+0]+4,ae=35468*b[E+4]>>16,oe=li(b[E+4]),ue=35468*b[E+1]>>16;bn(V,X,0,re+oe,b=li(b[E+1]),ue),bn(V,X,1,re+ae,b,ue),bn(V,X,2,re-ae,b,ue),bn(V,X,3,re-oe,b,ue)}function is(b,E,V,X,re){As(b,E,V,X),re&&As(b,E+16,V,X+4)}function _n(b,E,V,X){ll(b,E+0,V,X,1),ll(b,E+32,V,X+128,1)}function Es(b,E,V,X){var re;for(b=b[E+0]+4,re=0;4>re;++re)for(E=0;4>E;++E)Wa(V,X,E,re,b)}function wa(b,E,V,X){b[E+0]&&On(b,E+0,V,X),b[E+16]&&On(b,E+16,V,X+4),b[E+32]&&On(b,E+32,V,X+128),b[E+48]&&On(b,E+48,V,X+128+4)}function Oo(b,E,V,X){var re,ae=a(16);for(re=0;4>re;++re){var oe=b[E+0+re]+b[E+12+re],ue=b[E+4+re]+b[E+8+re],pe=b[E+4+re]-b[E+8+re],ye=b[E+0+re]-b[E+12+re];ae[0+re]=oe+ue,ae[8+re]=oe-ue,ae[4+re]=ye+pe,ae[12+re]=ye-pe}for(re=0;4>re;++re)oe=(b=ae[0+4*re]+3)+ae[3+4*re],ue=ae[1+4*re]+ae[2+4*re],pe=ae[1+4*re]-ae[2+4*re],ye=b-ae[3+4*re],V[X+0]=oe+ue>>3,V[X+16]=ye+pe>>3,V[X+32]=oe-ue>>3,V[X+48]=ye-pe>>3,X+=64}function Cs(b,E,V){var X,re=E-32,ae=Vi,oe=255-b[re-1];for(X=0;X<V;++X){var ue,pe=ae,ye=oe+b[E-1];for(ue=0;ue<V;++ue)b[E+ue]=pe[ye+b[re+ue]];E+=32}}function vc(b,E){Cs(b,E,4)}function yc(b,E){Cs(b,E,8)}function Cf(b,E){Cs(b,E,16)}function xc(b,E){var V;for(V=0;16>V;++V)r(b,E+32*V,b,E-32,16)}function tl(b,E){var V;for(V=16;0<V;--V)i(b,E,b[E-1],16),E+=32}function Ii(b,E,V){var X;for(X=0;16>X;++X)i(E,V+32*X,b,16)}function $a(b,E){var V,X=16;for(V=0;16>V;++V)X+=b[E-1+32*V]+b[E+V-32];Ii(X>>5,b,E)}function _a(b,E){var V,X=8;for(V=0;16>V;++V)X+=b[E-1+32*V];Ii(X>>4,b,E)}function go(b,E){var V,X=8;for(V=0;16>V;++V)X+=b[E+V-32];Ii(X>>4,b,E)}function bc(b,E){Ii(128,b,E)}function qt(b,E,V){return b+2*E+V+2>>2}function hu(b,E){var V,X=E-32;for(X=new Uint8Array([qt(b[X-1],b[X+0],b[X+1]),qt(b[X+0],b[X+1],b[X+2]),qt(b[X+1],b[X+2],b[X+3]),qt(b[X+2],b[X+3],b[X+4])]),V=0;4>V;++V)r(b,E+32*V,X,0,X.length)}function nl(b,E){var V=b[E-1],X=b[E-1+32],re=b[E-1+64],ae=b[E-1+96];Ve(b,E+0,16843009*qt(b[E-1-32],V,X)),Ve(b,E+32,16843009*qt(V,X,re)),Ve(b,E+64,16843009*qt(X,re,ae)),Ve(b,E+96,16843009*qt(re,ae,ae))}function mo(b,E){var V,X=4;for(V=0;4>V;++V)X+=b[E+V-32]+b[E-1+32*V];for(X>>=3,V=0;4>V;++V)i(b,E+32*V,X,4)}function wi(b,E){var V=b[E-1+0],X=b[E-1+32],re=b[E-1+64],ae=b[E-1-32],oe=b[E+0-32],ue=b[E+1-32],pe=b[E+2-32],ye=b[E+3-32];b[E+0+96]=qt(X,re,b[E-1+96]),b[E+1+96]=b[E+0+64]=qt(V,X,re),b[E+2+96]=b[E+1+64]=b[E+0+32]=qt(ae,V,X),b[E+3+96]=b[E+2+64]=b[E+1+32]=b[E+0+0]=qt(oe,ae,V),b[E+3+64]=b[E+2+32]=b[E+1+0]=qt(ue,oe,ae),b[E+3+32]=b[E+2+0]=qt(pe,ue,oe),b[E+3+0]=qt(ye,pe,ue)}function Aa(b,E){var V=b[E+1-32],X=b[E+2-32],re=b[E+3-32],ae=b[E+4-32],oe=b[E+5-32],ue=b[E+6-32],pe=b[E+7-32];b[E+0+0]=qt(b[E+0-32],V,X),b[E+1+0]=b[E+0+32]=qt(V,X,re),b[E+2+0]=b[E+1+32]=b[E+0+64]=qt(X,re,ae),b[E+3+0]=b[E+2+32]=b[E+1+64]=b[E+0+96]=qt(re,ae,oe),b[E+3+32]=b[E+2+64]=b[E+1+96]=qt(ae,oe,ue),b[E+3+64]=b[E+2+96]=qt(oe,ue,pe),b[E+3+96]=qt(ue,pe,pe)}function ko(b,E){var V=b[E-1+0],X=b[E-1+32],re=b[E-1+64],ae=b[E-1-32],oe=b[E+0-32],ue=b[E+1-32],pe=b[E+2-32],ye=b[E+3-32];b[E+0+0]=b[E+1+64]=ae+oe+1>>1,b[E+1+0]=b[E+2+64]=oe+ue+1>>1,b[E+2+0]=b[E+3+64]=ue+pe+1>>1,b[E+3+0]=pe+ye+1>>1,b[E+0+96]=qt(re,X,V),b[E+0+64]=qt(X,V,ae),b[E+0+32]=b[E+1+96]=qt(V,ae,oe),b[E+1+32]=b[E+2+96]=qt(ae,oe,ue),b[E+2+32]=b[E+3+96]=qt(oe,ue,pe),b[E+3+32]=qt(ue,pe,ye)}function Is(b,E){var V=b[E+0-32],X=b[E+1-32],re=b[E+2-32],ae=b[E+3-32],oe=b[E+4-32],ue=b[E+5-32],pe=b[E+6-32],ye=b[E+7-32];b[E+0+0]=V+X+1>>1,b[E+1+0]=b[E+0+64]=X+re+1>>1,b[E+2+0]=b[E+1+64]=re+ae+1>>1,b[E+3+0]=b[E+2+64]=ae+oe+1>>1,b[E+0+32]=qt(V,X,re),b[E+1+32]=b[E+0+96]=qt(X,re,ae),b[E+2+32]=b[E+1+96]=qt(re,ae,oe),b[E+3+32]=b[E+2+96]=qt(ae,oe,ue),b[E+3+64]=qt(oe,ue,pe),b[E+3+96]=qt(ue,pe,ye)}function Ga(b,E){var V=b[E-1+0],X=b[E-1+32],re=b[E-1+64],ae=b[E-1+96];b[E+0+0]=V+X+1>>1,b[E+2+0]=b[E+0+32]=X+re+1>>1,b[E+2+32]=b[E+0+64]=re+ae+1>>1,b[E+1+0]=qt(V,X,re),b[E+3+0]=b[E+1+32]=qt(X,re,ae),b[E+3+32]=b[E+1+64]=qt(re,ae,ae),b[E+3+64]=b[E+2+64]=b[E+0+96]=b[E+1+96]=b[E+2+96]=b[E+3+96]=ae}function rl(b,E){var V=b[E-1+0],X=b[E-1+32],re=b[E-1+64],ae=b[E-1+96],oe=b[E-1-32],ue=b[E+0-32],pe=b[E+1-32],ye=b[E+2-32];b[E+0+0]=b[E+2+32]=V+oe+1>>1,b[E+0+32]=b[E+2+64]=X+V+1>>1,b[E+0+64]=b[E+2+96]=re+X+1>>1,b[E+0+96]=ae+re+1>>1,b[E+3+0]=qt(ue,pe,ye),b[E+2+0]=qt(oe,ue,pe),b[E+1+0]=b[E+3+32]=qt(V,oe,ue),b[E+1+32]=b[E+3+64]=qt(X,V,oe),b[E+1+64]=b[E+3+96]=qt(re,X,V),b[E+1+96]=qt(ae,re,X)}function oa(b,E){var V;for(V=0;8>V;++V)r(b,E+32*V,b,E-32,8)}function Lo(b,E){var V;for(V=0;8>V;++V)i(b,E,b[E-1],8),E+=32}function vo(b,E,V){var X;for(X=0;8>X;++X)i(E,V+32*X,b,8)}function _i(b,E){var V,X=8;for(V=0;8>V;++V)X+=b[E+V-32]+b[E-1+32*V];vo(X>>4,b,E)}function jn(b,E){var V,X=4;for(V=0;8>V;++V)X+=b[E+V-32];vo(X>>3,b,E)}function Ts(b,E){var V,X=4;for(V=0;8>V;++V)X+=b[E-1+32*V];vo(X>>3,b,E)}function Rs(b,E){vo(128,b,E)}function Po(b,E,V){var X=b[E-V],re=b[E+0],ae=3*(re-X)+Nd[1020+b[E-2*V]-b[E+V]],oe=Cc[112+(ae+4>>3)];b[E-V]=Vi[255+X+Cc[112+(ae+3>>3)]],b[E+0]=Vi[255+re-oe]}function Ns(b,E,V,X){var re=b[E+0],ae=b[E+V];return Uo[255+b[E-2*V]-b[E-V]]>X||Uo[255+ae-re]>X}function as(b,E,V,X){return 4*Uo[255+b[E-V]-b[E+0]]+Uo[255+b[E-2*V]-b[E+V]]<=X}function Ya(b,E,V,X,re){var ae=b[E-3*V],oe=b[E-2*V],ue=b[E-V],pe=b[E+0],ye=b[E+V],Ae=b[E+2*V],Pe=b[E+3*V];return 4*Uo[255+ue-pe]+Uo[255+oe-ye]>X?0:Uo[255+b[E-4*V]-ae]<=re&&Uo[255+ae-oe]<=re&&Uo[255+oe-ue]<=re&&Uo[255+Pe-Ae]<=re&&Uo[255+Ae-ye]<=re&&Uo[255+ye-pe]<=re}function yo(b,E,V,X){var re=2*X+1;for(X=0;16>X;++X)as(b,E+X,V,re)&&Po(b,E+X,V)}function sa(b,E,V,X){var re=2*X+1;for(X=0;16>X;++X)as(b,E+X*V,1,re)&&Po(b,E+X*V,1)}function wc(b,E,V,X){var re;for(re=3;0<re;--re)yo(b,E+=4*V,V,X)}function pu(b,E,V,X){var re;for(re=3;0<re;--re)sa(b,E+=4,V,X)}function Sa(b,E,V,X,re,ae,oe,ue){for(ae=2*ae+1;0<re--;){if(Ya(b,E,V,ae,oe))if(Ns(b,E,V,ue))Po(b,E,V);else{var pe=b,ye=E,Ae=V,Pe=pe[ye-2*Ae],me=pe[ye-Ae],Ce=pe[ye+0],De=pe[ye+Ae],ze=pe[ye+2*Ae],Le=27*(qe=Nd[1020+3*(Ce-me)+Nd[1020+Pe-De]])+63>>7,He=18*qe+63>>7,qe=9*qe+63>>7;pe[ye-3*Ae]=Vi[255+pe[ye-3*Ae]+qe],pe[ye-2*Ae]=Vi[255+Pe+He],pe[ye-Ae]=Vi[255+me+Le],pe[ye+0]=Vi[255+Ce-Le],pe[ye+Ae]=Vi[255+De-He],pe[ye+2*Ae]=Vi[255+ze-qe]}E+=X}}function Xa(b,E,V,X,re,ae,oe,ue){for(ae=2*ae+1;0<re--;){if(Ya(b,E,V,ae,oe))if(Ns(b,E,V,ue))Po(b,E,V);else{var pe=b,ye=E,Ae=V,Pe=pe[ye-Ae],me=pe[ye+0],Ce=pe[ye+Ae],De=Cc[112+(4+(ze=3*(me-Pe))>>3)],ze=Cc[112+(ze+3>>3)],Le=De+1>>1;pe[ye-2*Ae]=Vi[255+pe[ye-2*Ae]+Le],pe[ye-Ae]=Vi[255+Pe+ze],pe[ye+0]=Vi[255+me-De],pe[ye+Ae]=Vi[255+Ce-Le]}E+=X}}function Bl(b,E,V,X,re,ae){Sa(b,E,V,1,16,X,re,ae)}function Mo(b,E,V,X,re,ae){Sa(b,E,1,V,16,X,re,ae)}function _c(b,E,V,X,re,ae){var oe;for(oe=3;0<oe;--oe)Xa(b,E+=4*V,V,1,16,X,re,ae)}function B(b,E,V,X,re,ae){var oe;for(oe=3;0<oe;--oe)Xa(b,E+=4,1,V,16,X,re,ae)}function ne(b,E,V,X,re,ae,oe,ue){Sa(b,E,re,1,8,ae,oe,ue),Sa(V,X,re,1,8,ae,oe,ue)}function ve(b,E,V,X,re,ae,oe,ue){Sa(b,E,1,re,8,ae,oe,ue),Sa(V,X,1,re,8,ae,oe,ue)}function we(b,E,V,X,re,ae,oe,ue){Xa(b,E+4*re,re,1,8,ae,oe,ue),Xa(V,X+4*re,re,1,8,ae,oe,ue)}function Te(b,E,V,X,re,ae,oe,ue){Xa(b,E+4,1,re,8,ae,oe,ue),Xa(V,X+4,1,re,8,ae,oe,ue)}function $e(){this.ba=new Ut,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new nn,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Ke(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function bt(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Nt(){this.ua=0,this.Wa=new dt,this.vb=new dt,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new G,this.yc=new D}function Gt(){this.xb=this.a=0,this.l=new rs,this.ca=new Ut,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new W,this.Pb=0,this.wd=new W,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Nt,this.ab=0,this.gc=o(4,bt),this.Oc=0}function on(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new rs,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function An(b,E,V,X,re,ae,oe){for(b=b==null?0:b[E+0],E=0;E<oe;++E)re[ae+E]=b+V[X+E]&255,b=re[ae+E]}function Qn(b,E,V,X,re,ae,oe){var ue;if(b==null)An(null,null,V,X,re,ae,oe);else for(ue=0;ue<oe;++ue)re[ae+ue]=b[E+ue]+V[X+ue]&255}function Fr(b,E,V,X,re,ae,oe){if(b==null)An(null,null,V,X,re,ae,oe);else{var ue,pe=b[E+0],ye=pe,Ae=pe;for(ue=0;ue<oe;++ue)ye=Ae+(pe=b[E+ue])-ye,Ae=V[X+ue]+(-256&ye?0>ye?0:255:ye)&255,ye=pe,re[ae+ue]=Ae}}function ir(b,E,V,X){var re=E.width,ae=E.o;if(e(b!=null&&E!=null),0>V||0>=X||V+X>ae)return null;if(!b.Cc){if(b.ga==null){var oe;if(b.ga=new on,(oe=b.ga==null)||(oe=E.width*E.o,e(b.Gb.length==0),b.Gb=a(oe),b.Uc=0,b.Gb==null?oe=0:(b.mb=b.Gb,b.nb=b.Uc,b.rc=null,oe=1),oe=!oe),!oe){oe=b.ga;var ue=b.Fa,pe=b.P,ye=b.qc,Ae=b.mb,Pe=b.nb,me=pe+1,Ce=ye-1,De=oe.l;if(e(ue!=null&&Ae!=null&&E!=null),Ms[0]=null,Ms[1]=An,Ms[2]=Qn,Ms[3]=Fr,oe.ca=Ae,oe.tb=Pe,oe.c=E.width,oe.i=E.height,e(0<oe.c&&0<oe.i),1>=ye)E=0;else if(oe.$a=3&ue[pe+0],oe.Z=ue[pe+0]>>2&3,oe.Lc=ue[pe+0]>>4&3,pe=ue[pe+0]>>6&3,0>oe.$a||1<oe.$a||4<=oe.Z||1<oe.Lc||pe)E=0;else if(De.put=Wt,De.ac=Tr,De.bc=qn,De.ma=oe,De.width=E.width,De.height=E.height,De.Da=E.Da,De.v=E.v,De.va=E.va,De.j=E.j,De.o=E.o,oe.$a)e:{e(oe.$a==1),E=dr();t:for(;;){if(E==null){E=0;break e}if(e(oe!=null),oe.mc=E,E.c=oe.c,E.i=oe.i,E.l=oe.l,E.l.ma=oe,E.l.width=oe.c,E.l.height=oe.i,E.a=0,se(E.m,ue,me,Ce),!Va(oe.c,oe.i,1,E,null)||(E.ab==1&&E.gc[0].hc==3&&Ui(E.s)?(oe.ic=1,ue=E.c*E.i,E.Ta=null,E.Ua=0,E.V=a(ue),E.Ba=0,E.V==null?(E.a=1,E=0):E=1):(oe.ic=0,E=No(E,oe.c)),!E))break t;E=1;break e}oe.mc=null,E=0}else E=Ce>=oe.c*oe.i;oe=!E}if(oe)return null;b.ga.Lc!=1?b.Ga=0:X=ae-V}e(b.ga!=null),e(V+X<=ae);e:{if(E=(ue=b.ga).c,ae=ue.l.o,ue.$a==0){if(me=b.rc,Ce=b.Vc,De=b.Fa,pe=b.P+1+V*E,ye=b.mb,Ae=b.nb+V*E,e(pe<=b.P+b.qc),ue.Z!=0)for(e(Ms[ue.Z]!=null),oe=0;oe<X;++oe)Ms[ue.Z](me,Ce,De,pe,ye,Ae,E),me=ye,Ce=Ae,Ae+=E,pe+=E;else for(oe=0;oe<X;++oe)r(ye,Ae,De,pe,E),me=ye,Ce=Ae,Ae+=E,pe+=E;b.rc=me,b.Vc=Ce}else{if(e(ue.mc!=null),E=V+X,e((oe=ue.mc)!=null),e(E<=oe.i),oe.C>=E)E=1;else if(ue.ic||Ka(),ue.ic){ue=oe.V,me=oe.Ba,Ce=oe.c;var ze=oe.i,Le=(De=1,pe=oe.$/Ce,ye=oe.$%Ce,Ae=oe.m,Pe=oe.s,oe.$),He=Ce*ze,qe=Ce*E,tt=Pe.wc,Qe=Le<qe?Lr(Pe,ye,pe):null;e(Le<=He),e(E<=ze),e(Ui(Pe));t:for(;;){for(;!Ae.h&&Le<qe;){if(ye&tt||(Qe=Lr(Pe,ye,pe)),e(Qe!=null),be(Ae),256>(ze=_r(Qe.G[0],Qe.H[0],Ae)))ue[me+Le]=ze,++Le,++ye>=Ce&&(ye=0,++pe<=E&&!(pe%16)&&xi(oe,pe));else{if(!(280>ze)){De=0;break t}ze=Kn(ze-256,Ae);var Pt,At=_r(Qe.G[4],Qe.H[4],Ae);if(be(Ae),!(Le>=(At=Br(Ce,At=Kn(At,Ae)))&&He-Le>=ze)){De=0;break t}for(Pt=0;Pt<ze;++Pt)ue[me+Le+Pt]=ue[me+Le+Pt-At];for(Le+=ze,ye+=ze;ye>=Ce;)ye-=Ce,++pe<=E&&!(pe%16)&&xi(oe,pe);Le<qe&&ye&tt&&(Qe=Lr(Pe,ye,pe))}e(Ae.h==J(Ae))}xi(oe,pe>E?E:pe);break t}!De||Ae.h&&Le<He?(De=0,oe.a=Ae.h?5:3):oe.$=Le,E=De}else E=bi(oe,oe.V,oe.Ba,oe.c,oe.i,E,aa);if(!E){X=0;break e}}V+X>=ae&&(b.Cc=1),X=1}if(!X)return null;if(b.Cc&&((X=b.ga)!=null&&(X.mc=null),b.ga=null,0<b.Ga))return alert("todo:WebPDequantizeLevels"),null}return b.nb+V*re}function Xr(b,E,V,X,re,ae){for(;0<re--;){var oe,ue=b,pe=E+(V?1:0),ye=b,Ae=E+(V?0:3);for(oe=0;oe<X;++oe){var Pe=ye[Ae+4*oe];Pe!=255&&(Pe*=32897,ue[pe+4*oe+0]=ue[pe+4*oe+0]*Pe>>23,ue[pe+4*oe+1]=ue[pe+4*oe+1]*Pe>>23,ue[pe+4*oe+2]=ue[pe+4*oe+2]*Pe>>23)}E+=ae}}function Ur(b,E,V,X,re){for(;0<X--;){var ae;for(ae=0;ae<V;++ae){var oe=b[E+2*ae+0],ue=15&(ye=b[E+2*ae+1]),pe=4369*ue,ye=(240&ye|ye>>4)*pe>>16;b[E+2*ae+0]=(240&oe|oe>>4)*pe>>16&240|(15&oe|oe<<4)*pe>>16>>4&15,b[E+2*ae+1]=240&ye|ue}E+=re}}function Kr(b,E,V,X,re,ae,oe,ue){var pe,ye,Ae=255;for(ye=0;ye<re;++ye){for(pe=0;pe<X;++pe){var Pe=b[E+pe];ae[oe+4*pe]=Pe,Ae&=Pe}E+=V,oe+=ue}return Ae!=255}function zr(b,E,V,X,re){var ae;for(ae=0;ae<re;++ae)V[X+ae]=b[E+ae]>>8}function Ka(){_u=Xr,wo=Ur,_o=Kr,Sc=zr}function jo(b,E,V){T[b]=function(X,re,ae,oe,ue,pe,ye,Ae,Pe,me,Ce,De,ze,Le,He,qe,tt){var Qe,Pt=tt-1>>1,At=ue[pe+0]|ye[Ae+0]<<16,sn=Pe[me+0]|Ce[De+0]<<16;e(X!=null);var Ct=3*At+sn+131074>>2;for(E(X[re+0],255&Ct,Ct>>16,ze,Le),ae!=null&&(Ct=3*sn+At+131074>>2,E(ae[oe+0],255&Ct,Ct>>16,He,qe)),Qe=1;Qe<=Pt;++Qe){var In=ue[pe+Qe]|ye[Ae+Qe]<<16,Si=Pe[me+Qe]|Ce[De+Qe]<<16,rn=At+In+sn+Si+524296,It=rn+2*(In+sn)>>3;Ct=It+At>>1,At=(rn=rn+2*(At+Si)>>3)+In>>1,E(X[re+2*Qe-1],255&Ct,Ct>>16,ze,Le+(2*Qe-1)*V),E(X[re+2*Qe-0],255&At,At>>16,ze,Le+(2*Qe-0)*V),ae!=null&&(Ct=rn+sn>>1,At=It+Si>>1,E(ae[oe+2*Qe-1],255&Ct,Ct>>16,He,qe+(2*Qe-1)*V),E(ae[oe+2*Qe+0],255&At,At>>16,He,qe+(2*Qe+0)*V)),At=In,sn=Si}1&tt||(Ct=3*At+sn+131074>>2,E(X[re+tt-1],255&Ct,Ct>>16,ze,Le+(tt-1)*V),ae!=null&&(Ct=3*sn+At+131074>>2,E(ae[oe+tt-1],255&Ct,Ct>>16,He,qe+(tt-1)*V)))}}function Qa(){qi[ca]=pl,qi[Au]=js,qi[Ls]=Hl,qi[Nf]=kd,qi[Ic]=Ld,qi[cl]=Cu,qi[Dd]=Pd,qi[Df]=js,qi[Vl]=kd,qi[ul]=Ld,qi[Su]=Cu}function w(b){return b&-16384?0>b?0:255:b>>b2}function q(b,E){return w((19077*b>>8)+(26149*E>>8)-14234)}function K(b,E,V){return w((19077*b>>8)-(6419*E>>8)-(13320*V>>8)+8708)}function fe(b,E){return w((19077*b>>8)+(33050*E>>8)-17685)}function Ne(b,E,V,X,re){X[re+0]=q(b,V),X[re+1]=K(b,E,V),X[re+2]=fe(b,E)}function Be(b,E,V,X,re){X[re+0]=fe(b,E),X[re+1]=K(b,E,V),X[re+2]=q(b,V)}function st(b,E,V,X,re){var ae=K(b,E,V);E=ae<<3&224|fe(b,E)>>3,X[re+0]=248&q(b,V)|ae>>5,X[re+1]=E}function vn(b,E,V,X,re){var ae=240&fe(b,E)|15;X[re+0]=240&q(b,V)|K(b,E,V)>>4,X[re+1]=ae}function Vr(b,E,V,X,re){X[re+0]=255,Ne(b,E,V,X,re+1)}function wn(b,E,V,X,re){Be(b,E,V,X,re),X[re+3]=255}function Hn(b,E,V,X,re){Ne(b,E,V,X,re),X[re+3]=255}function hr(b,E,V){T[b]=function(X,re,ae,oe,ue,pe,ye,Ae,Pe){for(var me=Ae+(-2&Pe)*V;Ae!=me;)E(X[re+0],ae[oe+0],ue[pe+0],ye,Ae),E(X[re+1],ae[oe+0],ue[pe+0],ye,Ae+V),re+=2,++oe,++pe,Ae+=2*V;1&Pe&&E(X[re+0],ae[oe+0],ue[pe+0],ye,Ae)}}function Za(b,E,V){return V==0?b==0?E==0?6:5:E==0?4:0:V}function Ai(b,E,V,X,re){switch(b>>>30){case 3:ll(E,V,X,re,0);break;case 2:bo(E,V,X,re);break;case 1:On(E,V,X,re)}}function ci(b,E){var V,X,re=E.M,ae=E.Nb,oe=b.oc,ue=b.pc+40,pe=b.oc,ye=b.pc+584,Ae=b.oc,Pe=b.pc+600;for(V=0;16>V;++V)oe[ue+32*V-1]=129;for(V=0;8>V;++V)pe[ye+32*V-1]=129,Ae[Pe+32*V-1]=129;for(0<re?oe[ue-1-32]=pe[ye-1-32]=Ae[Pe-1-32]=129:(i(oe,ue-32-1,127,21),i(pe,ye-32-1,127,9),i(Ae,Pe-32-1,127,9)),X=0;X<b.za;++X){var me=E.ya[E.aa+X];if(0<X){for(V=-1;16>V;++V)r(oe,ue+32*V-4,oe,ue+32*V+12,4);for(V=-1;8>V;++V)r(pe,ye+32*V-4,pe,ye+32*V+4,4),r(Ae,Pe+32*V-4,Ae,Pe+32*V+4,4)}var Ce=b.Gd,De=b.Hd+X,ze=me.ad,Le=me.Hc;if(0<re&&(r(oe,ue-32,Ce[De].y,0,16),r(pe,ye-32,Ce[De].f,0,8),r(Ae,Pe-32,Ce[De].ea,0,8)),me.Za){var He=oe,qe=ue-32+16;for(0<re&&(X>=b.za-1?i(He,qe,Ce[De].y[15],4):r(He,qe,Ce[De+1].y,0,4)),V=0;4>V;V++)He[qe+128+V]=He[qe+256+V]=He[qe+384+V]=He[qe+0+V];for(V=0;16>V;++V,Le<<=2)He=oe,qe=ue+Dc[V],Ca[me.Ob[V]](He,qe),Ai(Le,ze,16*+V,He,qe)}else if(He=Za(X,re,me.Ob[0]),hl[He](oe,ue),Le!=0)for(V=0;16>V;++V,Le<<=2)Ai(Le,ze,16*+V,oe,ue+Dc[V]);for(V=me.Gc,He=Za(X,re,me.Dd),So[He](pe,ye),So[He](Ae,Pe),Le=ze,He=pe,qe=ye,255&(me=0|V)&&(170&me?la(Le,256,He,qe):ar(Le,256,He,qe)),me=Ae,Le=Pe,255&(V>>=8)&&(170&V?la(ze,320,me,Le):ar(ze,320,me,Le)),re<b.Ub-1&&(r(Ce[De].y,0,oe,ue+480,16),r(Ce[De].f,0,pe,ye+224,8),r(Ce[De].ea,0,Ae,Pe+224,8)),V=8*ae*b.B,Ce=b.sa,De=b.ta+16*X+16*ae*b.R,ze=b.qa,me=b.ra+8*X+V,Le=b.Ha,He=b.Ia+8*X+V,V=0;16>V;++V)r(Ce,De+V*b.R,oe,ue+32*V,16);for(V=0;8>V;++V)r(ze,me+V*b.B,pe,ye+32*V,8),r(Le,He+V*b.B,Ae,Pe+32*V,8)}}function os(b,E,V,X,re,ae,oe,ue,pe){var ye=[0],Ae=[0],Pe=0,me=pe!=null?pe.kd:0,Ce=pe??new Ke;if(b==null||12>V)return 7;Ce.data=b,Ce.w=E,Ce.ha=V,E=[E],V=[V],Ce.gb=[Ce.gb];e:{var De=E,ze=V,Le=Ce.gb;if(e(b!=null),e(ze!=null),e(Le!=null),Le[0]=0,12<=ze[0]&&!t(b,De[0],"RIFF")){if(t(b,De[0]+8,"WEBP")){Le=3;break e}var He=ft(b,De[0]+4);if(12>He||4294967286<He){Le=3;break e}if(me&&He>ze[0]-8){Le=7;break e}Le[0]=He,De[0]+=12,ze[0]-=12}Le=0}if(Le!=0)return Le;for(He=0<Ce.gb[0],V=V[0];;){e:{var qe=b;ze=E,Le=V;var tt=ye,Qe=Ae,Pt=De=[0];if((Ct=Pe=[Pe])[0]=0,8>Le[0])Le=7;else{if(!t(qe,ze[0],"VP8X")){if(ft(qe,ze[0]+4)!=10){Le=3;break e}if(18>Le[0]){Le=7;break e}var At=ft(qe,ze[0]+8),sn=1+ot(qe,ze[0]+12);if(2147483648<=sn*(qe=1+ot(qe,ze[0]+15))){Le=3;break e}Pt!=null&&(Pt[0]=At),tt!=null&&(tt[0]=sn),Qe!=null&&(Qe[0]=qe),ze[0]+=18,Le[0]-=18,Ct[0]=1}Le=0}}if(Pe=Pe[0],De=De[0],Le!=0)return Le;if(ze=!!(2&De),!He&&Pe)return 3;if(ae!=null&&(ae[0]=!!(16&De)),oe!=null&&(oe[0]=ze),ue!=null&&(ue[0]=0),oe=ye[0],De=Ae[0],Pe&&ze&&pe==null){Le=0;break}if(4>V){Le=7;break}if(He&&Pe||!He&&!Pe&&!t(b,E[0],"ALPH")){V=[V],Ce.na=[Ce.na],Ce.P=[Ce.P],Ce.Sa=[Ce.Sa];e:{At=b,Le=E,He=V;var Ct=Ce.gb;tt=Ce.na,Qe=Ce.P,Pt=Ce.Sa,sn=22,e(At!=null),e(He!=null),qe=Le[0];var In=He[0];for(e(tt!=null),e(Pt!=null),tt[0]=null,Qe[0]=null,Pt[0]=0;;){if(Le[0]=qe,He[0]=In,8>In){Le=7;break e}var Si=ft(At,qe+4);if(4294967286<Si){Le=3;break e}var rn=8+Si+1&-2;if(sn+=rn,0<Ct&&sn>Ct){Le=3;break e}if(!t(At,qe,"VP8 ")||!t(At,qe,"VP8L")){Le=0;break e}if(In[0]<rn){Le=7;break e}t(At,qe,"ALPH")||(tt[0]=At,Qe[0]=qe+8,Pt[0]=Si),qe+=rn,In-=rn}}if(V=V[0],Ce.na=Ce.na[0],Ce.P=Ce.P[0],Ce.Sa=Ce.Sa[0],Le!=0)break}V=[V],Ce.Ja=[Ce.Ja],Ce.xa=[Ce.xa];e:if(Ct=b,Le=E,He=V,tt=Ce.gb[0],Qe=Ce.Ja,Pt=Ce.xa,At=Le[0],qe=!t(Ct,At,"VP8 "),sn=!t(Ct,At,"VP8L"),e(Ct!=null),e(He!=null),e(Qe!=null),e(Pt!=null),8>He[0])Le=7;else{if(qe||sn){if(Ct=ft(Ct,At+4),12<=tt&&Ct>tt-12){Le=3;break e}if(me&&Ct>He[0]-8){Le=7;break e}Qe[0]=Ct,Le[0]+=8,He[0]-=8,Pt[0]=sn}else Pt[0]=5<=He[0]&&Ct[At+0]==47&&!(Ct[At+4]>>5),Qe[0]=He[0];Le=0}if(V=V[0],Ce.Ja=Ce.Ja[0],Ce.xa=Ce.xa[0],E=E[0],Le!=0)break;if(4294967286<Ce.Ja)return 3;if(ue==null||ze||(ue[0]=Ce.xa?2:1),oe=[oe],De=[De],Ce.xa){if(5>V){Le=7;break}ue=oe,me=De,ze=ae,b==null||5>V?b=0:5<=V&&b[E+0]==47&&!(b[E+4]>>5)?(He=[0],Ct=[0],tt=[0],se(Qe=new W,b,E,V),fr(Qe,He,Ct,tt)?(ue!=null&&(ue[0]=He[0]),me!=null&&(me[0]=Ct[0]),ze!=null&&(ze[0]=tt[0]),b=1):b=0):b=0}else{if(10>V){Le=7;break}ue=De,b==null||10>V||!du(b,E+3,V-3)?b=0:(me=b[E+0]|b[E+1]<<8|b[E+2]<<16,ze=16383&(b[E+7]<<8|b[E+6]),b=16383&(b[E+9]<<8|b[E+8]),1&me||3<(me>>1&7)||!(me>>4&1)||me>>5>=Ce.Ja||!ze||!b?b=0:(oe&&(oe[0]=ze),ue&&(ue[0]=b),b=1))}if(!b||(oe=oe[0],De=De[0],Pe&&(ye[0]!=oe||Ae[0]!=De)))return 3;pe!=null&&(pe[0]=Ce,pe.offset=E-pe.w,e(4294967286>E-pe.w),e(pe.offset==pe.ha-V));break}return Le==0||Le==7&&Pe&&pe==null?(ae!=null&&(ae[0]|=Ce.na!=null&&0<Ce.na.length),X!=null&&(X[0]=oe),re!=null&&(re[0]=De),0):Le}function Fl(b,E,V){var X=E.width,re=E.height,ae=0,oe=0,ue=X,pe=re;if(E.Da=b!=null&&0<b.Da,E.Da&&(ue=b.cd,pe=b.bd,ae=b.v,oe=b.j,11>V||(ae&=-2,oe&=-2),0>ae||0>oe||0>=ue||0>=pe||ae+ue>X||oe+pe>re))return 0;if(E.v=ae,E.j=oe,E.va=ae+ue,E.o=oe+pe,E.U=ue,E.T=pe,E.da=b!=null&&0<b.da,E.da){if(!at(ue,pe,V=[b.ib],ae=[b.hb]))return 0;E.ib=V[0],E.hb=ae[0]}return E.ob=b!=null&&b.ob,E.Kb=b==null||!b.Sd,E.da&&(E.ob=E.ib<3*X/4&&E.hb<3*re/4,E.Kb=0),1}function gu(b){if(b==null)return 2;if(11>b.S){var E=b.f.RGBA;E.fb+=(b.height-1)*E.A,E.A=-E.A}else E=b.f.kb,b=b.height,E.O+=(b-1)*E.fa,E.fa=-E.fa,E.N+=(b-1>>1)*E.Ab,E.Ab=-E.Ab,E.W+=(b-1>>1)*E.Db,E.Db=-E.Db,E.F!=null&&(E.J+=(b-1)*E.lb,E.lb=-E.lb);return 0}function il(b,E,V,X){if(X==null||0>=b||0>=E)return 2;if(V!=null){if(V.Da){var re=V.cd,ae=V.bd,oe=-2&V.v,ue=-2&V.j;if(0>oe||0>ue||0>=re||0>=ae||oe+re>b||ue+ae>E)return 2;b=re,E=ae}if(V.da){if(!at(b,E,re=[V.ib],ae=[V.hb]))return 2;b=re[0],E=ae[0]}}X.width=b,X.height=E;e:{var pe=X.width,ye=X.height;if(b=X.S,0>=pe||0>=ye||!(b>=ca&&13>b))b=2;else{if(0>=X.Rd&&X.sd==null){oe=ae=re=E=0;var Ae=(ue=pe*ap[b])*ye;if(11>b||(ae=(ye+1)/2*(E=(pe+1)/2),b==12&&(oe=(re=pe)*ye)),(ye=a(Ae+2*ae+oe))==null){b=1;break e}X.sd=ye,11>b?((pe=X.f.RGBA).eb=ye,pe.fb=0,pe.A=ue,pe.size=Ae):((pe=X.f.kb).y=ye,pe.O=0,pe.fa=ue,pe.Fd=Ae,pe.f=ye,pe.N=0+Ae,pe.Ab=E,pe.Cd=ae,pe.ea=ye,pe.W=0+Ae+ae,pe.Db=E,pe.Ed=ae,b==12&&(pe.F=ye,pe.J=0+Ae+2*ae),pe.Tc=oe,pe.lb=re)}if(E=1,re=X.S,ae=X.width,oe=X.height,re>=ca&&13>re)if(11>re)b=X.f.RGBA,E&=(ue=Math.abs(b.A))*(oe-1)+ae<=b.size,E&=ue>=ae*ap[re],E&=b.eb!=null;else{b=X.f.kb,ue=(ae+1)/2,Ae=(oe+1)/2,pe=Math.abs(b.fa),ye=Math.abs(b.Ab);var Pe=Math.abs(b.Db),me=Math.abs(b.lb),Ce=me*(oe-1)+ae;E&=pe*(oe-1)+ae<=b.Fd,E&=ye*(Ae-1)+ue<=b.Cd,E=(E&=Pe*(Ae-1)+ue<=b.Ed)&pe>=ae&ye>=ue&Pe>=ue,E&=b.y!=null,E&=b.f!=null,E&=b.ea!=null,re==12&&(E&=me>=ae,E&=Ce<=b.Tc,E&=b.F!=null)}else E=0;b=E?0:2}}return b!=0||V!=null&&V.fd&&(b=gu(X)),b}var al=64,Ea=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Ja=24,ol=32,Ds=8,Ul=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Ye("Predictor0","PredictorAdd0"),T.Predictor0=function(){return 4278190080},T.Predictor1=function(b){return b},T.Predictor2=function(b,E,V){return E[V+0]},T.Predictor3=function(b,E,V){return E[V+1]},T.Predictor4=function(b,E,V){return E[V-1]},T.Predictor5=function(b,E,V){return ct(ct(b,E[V+1]),E[V+0])},T.Predictor6=function(b,E,V){return ct(b,E[V-1])},T.Predictor7=function(b,E,V){return ct(b,E[V+0])},T.Predictor8=function(b,E,V){return ct(E[V-1],E[V+0])},T.Predictor9=function(b,E,V){return ct(E[V+0],E[V+1])},T.Predictor10=function(b,E,V){return ct(ct(b,E[V-1]),ct(E[V+0],E[V+1]))},T.Predictor11=function(b,E,V){var X=E[V+0];return 0>=ht(X>>24&255,b>>24&255,(E=E[V-1])>>24&255)+ht(X>>16&255,b>>16&255,E>>16&255)+ht(X>>8&255,b>>8&255,E>>8&255)+ht(255&X,255&b,255&E)?X:b},T.Predictor12=function(b,E,V){var X=E[V+0];return(it((b>>24&255)+(X>>24&255)-((E=E[V-1])>>24&255))<<24|it((b>>16&255)+(X>>16&255)-(E>>16&255))<<16|it((b>>8&255)+(X>>8&255)-(E>>8&255))<<8|it((255&b)+(255&X)-(255&E)))>>>0},T.Predictor13=function(b,E,V){var X=E[V-1];return(Lt((b=ct(b,E[V+0]))>>24&255,X>>24&255)<<24|Lt(b>>16&255,X>>16&255)<<16|Lt(b>>8&255,X>>8&255)<<8|Lt(255&b,255&X))>>>0};var If=T.PredictorAdd0;T.PredictorAdd1=yt,Ye("Predictor2","PredictorAdd2"),Ye("Predictor3","PredictorAdd3"),Ye("Predictor4","PredictorAdd4"),Ye("Predictor5","PredictorAdd5"),Ye("Predictor6","PredictorAdd6"),Ye("Predictor7","PredictorAdd7"),Ye("Predictor8","PredictorAdd8"),Ye("Predictor9","PredictorAdd9"),Ye("Predictor10","PredictorAdd10"),Ye("Predictor11","PredictorAdd11"),Ye("Predictor12","PredictorAdd12"),Ye("Predictor13","PredictorAdd13");var mu=T.PredictorAdd2;mt("ColorIndexInverseTransform","MapARGB","32b",function(b){return b>>8&255},function(b){return b}),mt("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(b){return b},function(b){return b>>8&255});var ui,Ed=T.ColorIndexInverseTransform,Qr=T.MapARGB,eo=T.VP8LColorIndexInverseTransformAlpha,vu=T.MapAlpha,yu=T.VP8LPredictorsAdd=[];yu.length=16,(T.VP8LPredictors=[]).length=16,(T.VP8LPredictorsAdd_C=[]).length=16,(T.VP8LPredictors_C=[]).length=16;var xu,bu,Os,zl,xo,sl,Bo,ll,bo,la,On,ar,Zr,Rr,ks,wu,Ac,Cd,Z1,J1,Xh,Kh,Id,Fo,_u,wo,_o,Sc,Td=a(511),Tf=a(2041),Rf=a(225),Rd=a(767),Ec=0,Nd=Tf,Cc=Rf,Vi=Rd,Uo=Td,ca=0,Au=1,Ls=2,Nf=3,Ic=4,cl=5,Dd=6,Df=7,Vl=8,ul=9,Su=10,Od=[2,3,7],zo=[3,3,11],Ao=[280,256,256,256,40],Tc=[0,1,1,1,0],fl=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],dl=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Rc=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],ep=8,Of=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],kf=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Ti=null,Jr=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],Zn=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],ql=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],Ps=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],Qh=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],Nc=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],tp=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],hl=[],Ca=[],So=[],np=1,Eu=2,Ms=[],qi=[];jo("UpsampleRgbLinePair",Ne,3),jo("UpsampleBgrLinePair",Be,3),jo("UpsampleRgbaLinePair",Hn,4),jo("UpsampleBgraLinePair",wn,4),jo("UpsampleArgbLinePair",Vr,4),jo("UpsampleRgba4444LinePair",vn,2),jo("UpsampleRgb565LinePair",st,2);var pl=T.UpsampleRgbLinePair,Hl=T.UpsampleBgrLinePair,js=T.UpsampleRgbaLinePair,kd=T.UpsampleBgraLinePair,Ld=T.UpsampleArgbLinePair,Cu=T.UpsampleRgba4444LinePair,Pd=T.UpsampleRgb565LinePair,Bs=16,Ri=1<<Bs-1,Wl=-227,Md=482,b2=6,rp=0,w2=a(256),Ni=a(256),Zh=a(256),Lf=a(256),Pf=a(Md-Wl),Jh=a(Md-Wl);hr("YuvToRgbRow",Ne,3),hr("YuvToBgrRow",Be,3),hr("YuvToRgbaRow",Hn,4),hr("YuvToBgraRow",wn,4),hr("YuvToArgbRow",Vr,4),hr("YuvToRgba4444Row",vn,2),hr("YuvToRgb565Row",st,2);var Dc=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],gl=[0,2,8],_2=[8,7,6,4,4,2,2,2,1,1,1,1],ip=1;this.WebPDecodeRGBA=function(b,E,V,X,re){var ae=Au,oe=new $e,ue=new Ut;oe.ba=ue,ue.S=ae,ue.width=[ue.width],ue.height=[ue.height];var pe=ue.width,ye=ue.height,Ae=new Tt;if(Ae==null||b==null)var Pe=2;else e(Ae!=null),Pe=os(b,E,V,Ae.width,Ae.height,Ae.Pd,Ae.Qd,Ae.format,null);if(Pe!=0?pe=0:(pe!=null&&(pe[0]=Ae.width[0]),ye!=null&&(ye[0]=Ae.height[0]),pe=1),pe){ue.width=ue.width[0],ue.height=ue.height[0],X!=null&&(X[0]=ue.width),re!=null&&(re[0]=ue.height);e:{if(X=new rs,(re=new Ke).data=b,re.w=E,re.ha=V,re.kd=1,E=[0],e(re!=null),((b=os(re.data,re.w,re.ha,null,null,null,E,null,re))==0||b==7)&&E[0]&&(b=4),(E=b)==0){if(e(oe!=null),X.data=re.data,X.w=re.w+re.offset,X.ha=re.ha-re.offset,X.put=Wt,X.ac=Tr,X.bc=qn,X.ma=oe,re.xa){if((b=dr())==null){oe=1;break e}if(function(me,Ce){var De=[0],ze=[0],Le=[0];t:for(;;){if(me==null)return 0;if(Ce==null)return me.a=2,0;if(me.l=Ce,me.a=0,se(me.m,Ce.data,Ce.w,Ce.ha),!fr(me.m,De,ze,Le)){me.a=3;break t}if(me.xb=Eu,Ce.width=De[0],Ce.height=ze[0],!Va(De[0],ze[0],1,me,null))break t;return 1}return e(me.a!=0),0}(b,X)){if(X=(E=il(X.width,X.height,oe.Oa,oe.ba))==0){t:{X=b;n:for(;;){if(X==null){X=0;break t}if(e(X.s.yc!=null),e(X.s.Ya!=null),e(0<X.s.Wb),e((V=X.l)!=null),e((re=V.ma)!=null),X.xb!=0){if(X.ca=re.ba,X.tb=re.tb,e(X.ca!=null),!Fl(re.Oa,V,Nf)){X.a=2;break n}if(!No(X,V.width)||V.da)break n;if((V.da||Ft(X.ca.S))&&Ka(),11>X.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),X.ca.f.kb.F!=null&&Ka()),X.Pb&&0<X.s.ua&&X.s.vb.X==null&&!de(X.s.vb,X.s.Wa.Xa)){X.a=1;break n}X.xb=0}if(!bi(X,X.V,X.Ba,X.c,X.i,V.o,za))break n;re.Dc=X.Ma,X=1;break t}e(X.a!=0),X=0}X=!X}X&&(E=b.a)}else E=b.a}else{if((b=new Gi)==null){oe=1;break e}if(b.Fa=re.na,b.P=re.P,b.qc=re.Sa,ba(b,X)){if((E=il(X.width,X.height,oe.Oa,oe.ba))==0){if(b.Aa=0,V=oe.Oa,e((re=b)!=null),V!=null){if(0<(pe=0>(pe=V.Md)?0:100<pe?255:255*pe/100)){for(ye=Ae=0;4>ye;++ye)12>(Pe=re.pb[ye]).lc&&(Pe.ia=pe*_2[0>Pe.lc?0:Pe.lc]>>3),Ae|=Pe.ia;Ae&&(alert("todo:VP8InitRandom"),re.ia=1)}re.Ga=V.Id,100<re.Ga?re.Ga=100:0>re.Ga&&(re.Ga=0)}(function(me,Ce){if(me==null)return 0;if(Ce==null)return Pr(me,2,"NULL VP8Io parameter in VP8Decode().");if(!me.cb&&!ba(me,Ce))return 0;if(e(me.cb),Ce.ac==null||Ce.ac(Ce)){Ce.ob&&(me.L=0);var De=gl[me.L];if(me.L==2?(me.yb=0,me.zb=0):(me.yb=Ce.v-De>>4,me.zb=Ce.j-De>>4,0>me.yb&&(me.yb=0),0>me.zb&&(me.zb=0)),me.Va=Ce.o+15+De>>4,me.Hb=Ce.va+15+De>>4,me.Hb>me.za&&(me.Hb=me.za),me.Va>me.Ub&&(me.Va=me.Ub),0<me.L){var ze=me.ed;for(De=0;4>De;++De){var Le;if(me.Qa.Cb){var He=me.Qa.Lb[De];me.Qa.Fb||(He+=ze.Tb)}else He=ze.Tb;for(Le=0;1>=Le;++Le){var qe=me.gd[De][Le],tt=He;if(ze.Pc&&(tt+=ze.vd[0],Le&&(tt+=ze.od[0])),0<(tt=0>tt?0:63<tt?63:tt)){var Qe=tt;0<ze.wb&&(Qe=4<ze.wb?Qe>>2:Qe>>1)>9-ze.wb&&(Qe=9-ze.wb),1>Qe&&(Qe=1),qe.dd=Qe,qe.tc=2*tt+Qe,qe.ld=40<=tt?2:15<=tt?1:0}else qe.tc=0;qe.La=Le}}}De=0}else Pr(me,6,"Frame setup failed"),De=me.a;if(De=De==0){if(De){me.$c=0,0<me.Aa||(me.Ic=ip);t:{De=me.Ic,ze=4*(Qe=me.za);var Pt=32*Qe,At=Qe+1,sn=0<me.L?Qe*(0<me.Aa?2:1):0,Ct=(me.Aa==2?2:1)*Qe;if((qe=ze+832+(Le=3*(16*De+gl[me.L])/2*Pt)+(He=me.Fa!=null&&0<me.Fa.length?me.Kc.c*me.Kc.i:0))!=qe)De=0;else{if(qe>me.Vb){if(me.Vb=0,me.Ec=a(qe),me.Fc=0,me.Ec==null){De=Pr(me,1,"no memory during frame initialization.");break t}me.Vb=qe}qe=me.Ec,tt=me.Fc,me.Ac=qe,me.Bc=tt,tt+=ze,me.Gd=o(Pt,Js),me.Hd=0,me.rb=o(At+1,si),me.sb=1,me.wa=sn?o(sn,oi):null,me.Y=0,me.D.Nb=0,me.D.wa=me.wa,me.D.Y=me.Y,0<me.Aa&&(me.D.Y+=Qe),e(!0),me.oc=qe,me.pc=tt,tt+=832,me.ya=o(Ct,jl),me.aa=0,me.D.ya=me.ya,me.D.aa=me.aa,me.Aa==2&&(me.D.aa+=Qe),me.R=16*Qe,me.B=8*Qe,Qe=(Pt=gl[me.L])*me.R,Pt=Pt/2*me.B,me.sa=qe,me.ta=tt+Qe,me.qa=me.sa,me.ra=me.ta+16*De*me.R+Pt,me.Ha=me.qa,me.Ia=me.ra+8*De*me.B+Pt,me.$c=0,tt+=Le,me.mb=He?qe:null,me.nb=He?tt:null,e(tt+He<=me.Fc+me.Vb),_s(me),i(me.Ac,me.Bc,0,ze),De=1}}if(De){if(Ce.ka=0,Ce.y=me.sa,Ce.O=me.ta,Ce.f=me.qa,Ce.N=me.ra,Ce.ea=me.Ha,Ce.Vd=me.Ia,Ce.fa=me.R,Ce.Rc=me.B,Ce.F=null,Ce.J=0,!Ec){for(De=-255;255>=De;++De)Td[255+De]=0>De?-De:De;for(De=-1020;1020>=De;++De)Tf[1020+De]=-128>De?-128:127<De?127:De;for(De=-112;112>=De;++De)Rf[112+De]=-16>De?-16:15<De?15:De;for(De=-255;510>=De;++De)Rd[255+De]=0>De?0:255<De?255:De;Ec=1}Bo=Oo,ll=is,la=_n,On=Es,ar=wa,bo=Ss,Zr=Bl,Rr=Mo,ks=ne,wu=ve,Ac=_c,Cd=B,Z1=we,J1=Te,Xh=yo,Kh=sa,Id=wc,Fo=pu,Ca[0]=mo,Ca[1]=vc,Ca[2]=hu,Ca[3]=nl,Ca[4]=wi,Ca[5]=ko,Ca[6]=Aa,Ca[7]=Is,Ca[8]=rl,Ca[9]=Ga,hl[0]=$a,hl[1]=Cf,hl[2]=xc,hl[3]=tl,hl[4]=_a,hl[5]=go,hl[6]=bc,So[0]=_i,So[1]=yc,So[2]=oa,So[3]=Lo,So[4]=Ts,So[5]=jn,So[6]=Rs,De=1}else De=0}De&&(De=function(In,Si){for(In.M=0;In.M<In.Va;++In.M){var rn,It=In.Jc[In.M&In.Xb],pt=In.m,qr=In;for(rn=0;rn<qr.za;++rn){var ln=pt,gn=qr,Rt=gn.Ac,un=gn.Bc+4*rn,Bn=gn.zc,Nr=gn.ya[gn.aa+rn];if(gn.Qa.Bb?Nr.$b=Oe(ln,gn.Pa.jb[0])?2+Oe(ln,gn.Pa.jb[2]):Oe(ln,gn.Pa.jb[1]):Nr.$b=0,gn.kc&&(Nr.Ad=Oe(ln,gn.Bd)),Nr.Za=!Oe(ln,145)+0,Nr.Za){var fi=Nr.Ob,di=0;for(gn=0;4>gn;++gn){var ei,Sn=Bn[0+gn];for(ei=0;4>ei;++ei){Sn=Qh[Rt[un+ei]][Sn];for(var Fn=ql[Oe(ln,Sn[0])];0<Fn;)Fn=ql[2*Fn+Oe(ln,Sn[Fn])];Sn=-Fn,Rt[un+ei]=Sn}r(fi,di,Rt,un,4),di+=4,Bn[0+gn]=Sn}}else Sn=Oe(ln,156)?Oe(ln,128)?1:3:Oe(ln,163)?2:0,Nr.Ob[0]=Sn,i(Rt,un,Sn,4),i(Bn,0,Sn,4);Nr.Dd=Oe(ln,142)?Oe(ln,114)?Oe(ln,183)?1:3:2:0}if(qr.m.Ka)return Pr(In,7,"Premature end-of-partition0 encountered.");for(;In.ja<In.za;++In.ja){if(qr=It,ln=(pt=In).rb[pt.sb-1],Rt=pt.rb[pt.sb+pt.ja],rn=pt.ya[pt.aa+pt.ja],un=pt.kc?rn.Ad:0)ln.la=Rt.la=0,rn.Za||(ln.Na=Rt.Na=0),rn.Hc=0,rn.Gc=0,rn.ia=0;else{var ti,Qt;if(ln=Rt,Rt=qr,un=pt.Pa.Xc,Bn=pt.ya[pt.aa+pt.ja],Nr=pt.pb[Bn.$b],gn=Bn.ad,fi=0,di=pt.rb[pt.sb-1],Sn=ei=0,i(gn,fi,0,384),Bn.Za)var Di=0,Eo=un[3];else{Fn=a(16);var ni=ln.Na+di.Na;if(ni=Ti(Rt,un[1],ni,Nr.Eb,0,Fn,0),ln.Na=di.Na=(0<ni)+0,1<ni)Bo(Fn,0,gn,fi);else{var Ia=Fn[0]+3>>3;for(Fn=0;256>Fn;Fn+=16)gn[fi+Fn]=Ia}Di=1,Eo=un[0]}var pr=15&ln.la,hi=15&di.la;for(Fn=0;4>Fn;++Fn){var Ta=1&hi;for(Ia=Qt=0;4>Ia;++Ia)pr=pr>>1|(Ta=(ni=Ti(Rt,Eo,ni=Ta+(1&pr),Nr.Sc,Di,gn,fi))>Di)<<7,Qt=Qt<<2|(3<ni?3:1<ni?2:gn[fi+0]!=0),fi+=16;pr>>=4,hi=hi>>1|Ta<<7,ei=(ei<<8|Qt)>>>0}for(Eo=pr,Di=hi>>4,ti=0;4>ti;ti+=2){for(Qt=0,pr=ln.la>>4+ti,hi=di.la>>4+ti,Fn=0;2>Fn;++Fn){for(Ta=1&hi,Ia=0;2>Ia;++Ia)ni=Ta+(1&pr),pr=pr>>1|(Ta=0<(ni=Ti(Rt,un[2],ni,Nr.Qc,0,gn,fi)))<<3,Qt=Qt<<2|(3<ni?3:1<ni?2:gn[fi+0]!=0),fi+=16;pr>>=2,hi=hi>>1|Ta<<5}Sn|=Qt<<4*ti,Eo|=pr<<4<<ti,Di|=(240&hi)<<ti}ln.la=Eo,di.la=Di,Bn.Hc=ei,Bn.Gc=Sn,Bn.ia=43690&Sn?0:Nr.ia,un=!(ei|Sn)}if(0<pt.L&&(pt.wa[pt.Y+pt.ja]=pt.gd[rn.$b][rn.Za],pt.wa[pt.Y+pt.ja].La|=!un),qr.Ka)return Pr(In,7,"Premature end-of-file encountered.")}if(_s(In),pt=Si,qr=1,rn=(It=In).D,ln=0<It.L&&It.M>=It.zb&&It.M<=It.Va,It.Aa==0)t:{if(rn.M=It.M,rn.uc=ln,ci(It,rn),qr=1,rn=(Qt=It.D).Nb,ln=(Sn=gl[It.L])*It.R,Rt=Sn/2*It.B,Fn=16*rn*It.R,Ia=8*rn*It.B,un=It.sa,Bn=It.ta-ln+Fn,Nr=It.qa,gn=It.ra-Rt+Ia,fi=It.Ha,di=It.Ia-Rt+Ia,hi=(pr=Qt.M)==0,ei=pr>=It.Va-1,It.Aa==2&&ci(It,Qt),Qt.uc)for(Ta=(ni=It).D.M,e(ni.D.uc),Qt=ni.yb;Qt<ni.Hb;++Qt){Di=Qt,Eo=Ta;var Yi=(Sr=(ki=ni).D).Nb;ti=ki.R;var Sr=Sr.wa[Sr.Y+Di],Wn=ki.sa,ua=ki.ta+16*Yi*ti+16*Di,Xi=Sr.dd,or=Sr.tc;if(or!=0)if(e(3<=or),ki.L==1)0<Di&&Kh(Wn,ua,ti,or+4),Sr.La&&Fo(Wn,ua,ti,or),0<Eo&&Xh(Wn,ua,ti,or+4),Sr.La&&Id(Wn,ua,ti,or);else{var Ra=ki.B,Oi=ki.qa,Fs=ki.ra+8*Yi*Ra+8*Di,ss=ki.Ha,ki=ki.Ia+8*Yi*Ra+8*Di;Yi=Sr.ld,0<Di&&(Rr(Wn,ua,ti,or+4,Xi,Yi),wu(Oi,Fs,ss,ki,Ra,or+4,Xi,Yi)),Sr.La&&(Cd(Wn,ua,ti,or,Xi,Yi),J1(Oi,Fs,ss,ki,Ra,or,Xi,Yi)),0<Eo&&(Zr(Wn,ua,ti,or+4,Xi,Yi),ks(Oi,Fs,ss,ki,Ra,or+4,Xi,Yi)),Sr.La&&(Ac(Wn,ua,ti,or,Xi,Yi),Z1(Oi,Fs,ss,ki,Ra,or,Xi,Yi))}}if(It.ia&&alert("todo:DitherRow"),pt.put!=null){if(Qt=16*pr,pr=16*(pr+1),hi?(pt.y=It.sa,pt.O=It.ta+Fn,pt.f=It.qa,pt.N=It.ra+Ia,pt.ea=It.Ha,pt.W=It.Ia+Ia):(Qt-=Sn,pt.y=un,pt.O=Bn,pt.f=Nr,pt.N=gn,pt.ea=fi,pt.W=di),ei||(pr-=Sn),pr>pt.o&&(pr=pt.o),pt.F=null,pt.J=null,It.Fa!=null&&0<It.Fa.length&&Qt<pr&&(pt.J=ir(It,pt,Qt,pr-Qt),pt.F=It.mb,pt.F==null&&pt.F.length==0)){qr=Pr(It,3,"Could not decode alpha data.");break t}Qt<pt.j&&(Sn=pt.j-Qt,Qt=pt.j,e(!(1&Sn)),pt.O+=It.R*Sn,pt.N+=It.B*(Sn>>1),pt.W+=It.B*(Sn>>1),pt.F!=null&&(pt.J+=pt.width*Sn)),Qt<pr&&(pt.O+=pt.v,pt.N+=pt.v>>1,pt.W+=pt.v>>1,pt.F!=null&&(pt.J+=pt.v),pt.ka=Qt-pt.j,pt.U=pt.va-pt.v,pt.T=pr-Qt,qr=pt.put(pt))}rn+1!=It.Ic||ei||(r(It.sa,It.ta-ln,un,Bn+16*It.R,ln),r(It.qa,It.ra-Rt,Nr,gn+8*It.B,Rt),r(It.Ha,It.Ia-Rt,fi,di+8*It.B,Rt))}if(!qr)return Pr(In,6,"Output aborted.")}return 1}(me,Ce)),Ce.bc!=null&&Ce.bc(Ce),De&=1}return De?(me.cb=0,De):0})(b,X)||(E=b.a)}}else E=b.a}E==0&&oe.Oa!=null&&oe.Oa.fd&&(E=gu(oe.ba))}oe=E}ae=oe!=0?null:11>ae?ue.f.RGBA.eb:ue.f.kb.y}else ae=null;return ae};var ap=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function f(T,j){for(var N="",R=0;R<4;R++)N+=String.fromCharCode(T[j++]);return N}function d(T,j){return T[j+0]|T[j+1]<<8}function p(T,j){return(T[j+0]|T[j+1]<<8|T[j+2]<<16)>>>0}function g(T,j){return(T[j+0]|T[j+1]<<8|T[j+2]<<16|T[j+3]<<24)>>>0}new c;var m=[0],x=[0],_=[],C=new c,S=n,k=function(T,j){var N={},R=0,D=!1,L=0,G=0;if(N.frames=[],!function($,W){for(var Q=0;Q<4;Q++)if($[W+Q]!="RIFF".charCodeAt(Q))return!0;return!1}(T,j)){for(g(T,j+=4),j+=8;j<T.length;){var U=f(T,j),H=g(T,j+=4);j+=4;var te=H+(1&H);switch(U){case"VP8 ":case"VP8L":N.frames[R]===void 0&&(N.frames[R]={}),(ie=N.frames[R]).src_off=D?G:j-8,ie.src_size=L+H+8,R++,D&&(D=!1,L=0,G=0);break;case"VP8X":(ie=N.header={}).feature_flags=T[j];var se=j+4;ie.canvas_width=1+p(T,se),se+=3,ie.canvas_height=1+p(T,se),se+=3;break;case"ALPH":D=!0,L=te+8,G=j-8;break;case"ANIM":(ie=N.header).bgcolor=g(T,j),se=j+4,ie.loop_count=d(T,se),se+=2;break;case"ANMF":var ee,ie;(ie=N.frames[R]={}).offset_x=2*p(T,j),j+=3,ie.offset_y=2*p(T,j),j+=3,ie.width=1+p(T,j),j+=3,ie.height=1+p(T,j),j+=3,ie.duration=p(T,j),j+=3,ee=T[j++],ie.dispose=1&ee,ie.blend=ee>>1&1}U!="ANMF"&&(j+=te)}return N}}(S,0);k.response=S,k.rgbaoutput=!0,k.dataurl=!1;var M=k.header?k.header:null,P=k.frames?k.frames:null;if(M){M.loop_counter=M.loop_count,m=[M.canvas_height],x=[M.canvas_width];for(var Y=0;Y<P.length&&P[Y].blend!=0;Y++);}var z=P[0],F=C.WebPDecodeRGBA(S,z.src_off,z.src_size,x,m);z.rgba=F,z.imgwidth=x[0],z.imgheight=m[0];for(var I=0;I<x[0]*m[0]*4;I++)_[I]=F[I];return this.width=x,this.height=m,this.data=_,this}(function(n){var e,t,r,i,a,o,s,c,f,d=function($){return $=$||{},this.isStrokeTransparent=$.isStrokeTransparent||!1,this.strokeOpacity=$.strokeOpacity||1,this.strokeStyle=$.strokeStyle||"#000000",this.fillStyle=$.fillStyle||"#000000",this.isFillTransparent=$.isFillTransparent||!1,this.fillOpacity=$.fillOpacity||1,this.font=$.font||"10px sans-serif",this.textBaseline=$.textBaseline||"alphabetic",this.textAlign=$.textAlign||"left",this.lineWidth=$.lineWidth||1,this.lineJoin=$.lineJoin||"miter",this.lineCap=$.lineCap||"butt",this.path=$.path||[],this.transform=$.transform!==void 0?$.transform.clone():new c,this.globalCompositeOperation=$.globalCompositeOperation||"normal",this.globalAlpha=$.globalAlpha||1,this.clip_path=$.clip_path||[],this.currentPoint=$.currentPoint||new o,this.miterLimit=$.miterLimit||10,this.lastPoint=$.lastPoint||new o,this.lineDashOffset=$.lineDashOffset||0,this.lineDash=$.lineDash||[],this.margin=$.margin||[0,0,0,0],this.prevPageLastElemOffset=$.prevPageLastElemOffset||0,this.ignoreClearRect=typeof $.ignoreClearRect!="boolean"||$.ignoreClearRect,this};n.events.push(["initialized",function(){this.context2d=new p(this),e=this.internal.f2,t=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,a=this.internal.getVerticalCoordinate,o=this.internal.Point,s=this.internal.Rectangle,c=this.internal.Matrix,f=new d}]);var p=function($){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var W=$;Object.defineProperty(this,"pdf",{get:function(){return W}});var Q=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return Q},set:function(de){Q=!!de}});var J=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return J},set:function(de){J=!!de}});var he=0;Object.defineProperty(this,"posX",{get:function(){return he},set:function(de){isNaN(de)||(he=de)}});var be=0;Object.defineProperty(this,"posY",{get:function(){return be},set:function(de){isNaN(de)||(be=de)}}),Object.defineProperty(this,"margin",{get:function(){return f.margin},set:function(de){var rt;typeof de=="number"?rt=[de,de,de,de]:((rt=new Array(4))[0]=de[0],rt[1]=de.length>=2?de[1]:rt[0],rt[2]=de.length>=3?de[2]:rt[0],rt[3]=de.length>=4?de[3]:rt[1]),f.margin=rt}});var _e=!1;Object.defineProperty(this,"autoPaging",{get:function(){return _e},set:function(de){_e=de}});var Ie=0;Object.defineProperty(this,"lastBreak",{get:function(){return Ie},set:function(de){Ie=de}});var Oe=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Oe},set:function(de){Oe=de}}),Object.defineProperty(this,"ctx",{get:function(){return f},set:function(de){de instanceof d&&(f=de)}}),Object.defineProperty(this,"path",{get:function(){return f.path},set:function(de){f.path=de}});var Ve=[];Object.defineProperty(this,"ctxStack",{get:function(){return Ve},set:function(de){Ve=de}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(de){var rt;rt=g(de),this.ctx.fillStyle=rt.style,this.ctx.isFillTransparent=rt.a===0,this.ctx.fillOpacity=rt.a,this.pdf.setFillColor(rt.r,rt.g,rt.b,{a:rt.a}),this.pdf.setTextColor(rt.r,rt.g,rt.b,{a:rt.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(de){var rt=g(de);this.ctx.strokeStyle=rt.style,this.ctx.isStrokeTransparent=rt.a===0,this.ctx.strokeOpacity=rt.a,rt.a===0?this.pdf.setDrawColor(255,255,255):(rt.a,this.pdf.setDrawColor(rt.r,rt.g,rt.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(de){["butt","round","square"].indexOf(de)!==-1&&(this.ctx.lineCap=de,this.pdf.setLineCap(de))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(de){isNaN(de)||(this.ctx.lineWidth=de,this.pdf.setLineWidth(de))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(de){["bevel","round","miter"].indexOf(de)!==-1&&(this.ctx.lineJoin=de,this.pdf.setLineJoin(de))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(de){isNaN(de)||(this.ctx.miterLimit=de,this.pdf.setMiterLimit(de))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(de){this.ctx.textBaseline=de}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(de){["right","end","center","left","start"].indexOf(de)!==-1&&(this.ctx.textAlign=de)}});var nt=null,ot=null,ft=null;Object.defineProperty(this,"fontFaces",{get:function(){return ft},set:function(de){nt=null,ot=null,ft=de}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(de){var rt;if(this.ctx.font=de,(rt=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z0-9]+?)\s*$/i.exec(de))!==null){var dt=rt[1];rt[2];var at=rt[3],Ee=rt[4];rt[5];var lt=rt[6],Ye=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Ee)[2];Ee=Math.floor(Ye==="px"?parseFloat(Ee)*this.pdf.internal.scaleFactor:Ye==="em"?parseFloat(Ee)*this.pdf.getFontSize():parseFloat(Ee)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Ee);var vt=function(mt){var mn,Kt,Bt=[],jt=mt.trim();if(jt==="")return Cy;if(jt in uA)return[uA[jt]];for(;jt!=="";){switch(Kt=null,mn=(jt=dA(jt)).charAt(0)){case'"':case"'":Kt=qG(jt.substring(1),mn);break;default:Kt=HG(jt)}if(Kt===null||(Bt.push(Kt[0]),(jt=dA(Kt[1]))!==""&&jt.charAt(0)!==","))return Cy;jt=jt.replace(/^,/,"")}return Bt}(lt);if(this.fontFaces){var ct=function(mt,mn){var Kt=mt.getFontList(),Bt=JSON.stringify(Kt);if(nt===null||ot!==Bt){var jt=function(Vn){var kt=[];return Object.keys(Vn).forEach(function(Pn){Vn[Pn].forEach(function(Ft){var Ht=null;switch(Ft){case"bold":Ht={family:Pn,weight:"bold"};break;case"italic":Ht={family:Pn,style:"italic"};break;case"bolditalic":Ht={family:Pn,weight:"bold",style:"italic"};break;case"":case"normal":Ht={family:Pn}}Ht!==null&&(Ht.ref={name:Pn,style:Ft},kt.push(Ht))})}),kt}(Kt);nt=function(Vn){for(var kt={},Pn=0;Pn<Vn.length;++Pn){var Ft=Ey(Vn[Pn]),Ht=Ft.family,Mn=Ft.stretch,Ut=Ft.style,Tt=Ft.weight;kt[Ht]=kt[Ht]||{},kt[Ht][Mn]=kt[Ht][Mn]||{},kt[Ht][Mn][Ut]=kt[Ht][Mn][Ut]||{},kt[Ht][Mn][Ut][Tt]=Ft}return kt}(jt.concat(mn)),ot=Bt}return nt}(this.pdf,this.fontFaces),it=vt.map(function(mt){return{family:mt,stretch:"normal",weight:at,style:dt}}),Lt=function(mt,mn,Kt){for(var Bt=(Kt=Kt||{}).defaultFontFamily||"times",jt=Object.assign({},VG,Kt.genericFontFamilies||{}),Vn=null,kt=null,Pn=0;Pn<mn.length;++Pn)if(jt[(Vn=Ey(mn[Pn])).family]&&(Vn.family=jt[Vn.family]),mt.hasOwnProperty(Vn.family)){kt=mt[Vn.family];break}if(!(kt=kt||mt[Bt]))throw new Error("Could not find a font-family for the rule '"+fA(Vn)+"' and default family '"+Bt+"'.");if(kt=function(Ft,Ht){if(Ht[Ft])return Ht[Ft];var Mn=Bx[Ft],Ut=Mn<=Bx.normal?-1:1,Tt=cA(Ht,zI,Mn,Ut);if(!Tt)throw new Error("Could not find a matching font-stretch value for "+Ft);return Tt}(Vn.stretch,kt),kt=function(Ft,Ht){if(Ht[Ft])return Ht[Ft];for(var Mn=UI[Ft],Ut=0;Ut<Mn.length;++Ut)if(Ht[Mn[Ut]])return Ht[Mn[Ut]];throw new Error("Could not find a matching font-style for "+Ft)}(Vn.style,kt),!(kt=function(Ft,Ht){if(Ht[Ft])return Ht[Ft];if(Ft===400&&Ht[500])return Ht[500];if(Ft===500&&Ht[400])return Ht[400];var Mn=zG[Ft],Ut=cA(Ht,VI,Mn,Ft<400?-1:1);if(!Ut)throw new Error("Could not find a matching font-weight for value "+Ft);return Ut}(Vn.weight,kt)))throw new Error("Failed to resolve a font for the rule '"+fA(Vn)+"'.");return kt}(ct,it);this.pdf.setFont(Lt.ref.name,Lt.ref.style)}else{var ht="";(at==="bold"||parseInt(at,10)>=700||dt==="bold")&&(ht="bold"),dt==="italic"&&(ht+="italic"),ht.length===0&&(ht="normal");for(var yt="",_t={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},ut=0;ut<vt.length;ut++){if(this.pdf.internal.getFont(vt[ut],ht,{noFallback:!0,disableWarning:!0})!==void 0){yt=vt[ut];break}if(ht==="bolditalic"&&this.pdf.internal.getFont(vt[ut],"bold",{noFallback:!0,disableWarning:!0})!==void 0)yt=vt[ut],ht="bold";else if(this.pdf.internal.getFont(vt[ut],"normal",{noFallback:!0,disableWarning:!0})!==void 0){yt=vt[ut],ht="normal";break}}if(yt===""){for(var xt=0;xt<vt.length;xt++)if(_t[vt[xt]]){yt=_t[vt[xt]];break}}yt=yt===""?"Times":yt,this.pdf.setFont(yt,ht)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(de){this.ctx.globalCompositeOperation=de}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(de){this.ctx.globalAlpha=de}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(de){this.ctx.lineDashOffset=de,ie.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(de){this.ctx.lineDash=de,ie.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(de){this.ctx.ignoreClearRect=!!de}})};p.prototype.setLineDash=function($){this.lineDash=$},p.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},p.prototype.fill=function(){P.call(this,"fill",!1)},p.prototype.stroke=function(){P.call(this,"stroke",!1)},p.prototype.beginPath=function(){this.path=[{type:"begin"}]},p.prototype.moveTo=function($,W){if(isNaN($)||isNaN(W))throw Or.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var Q=this.ctx.transform.applyToPoint(new o($,W));this.path.push({type:"mt",x:Q.x,y:Q.y}),this.ctx.lastPoint=new o($,W)},p.prototype.closePath=function(){var $=new o(0,0),W=0;for(W=this.path.length-1;W!==-1;W--)if(this.path[W].type==="begin"&&br(this.path[W+1])==="object"&&typeof this.path[W+1].x=="number"){$=new o(this.path[W+1].x,this.path[W+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new o($.x,$.y)},p.prototype.lineTo=function($,W){if(isNaN($)||isNaN(W))throw Or.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var Q=this.ctx.transform.applyToPoint(new o($,W));this.path.push({type:"lt",x:Q.x,y:Q.y}),this.ctx.lastPoint=new o(Q.x,Q.y)},p.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),P.call(this,null,!0)},p.prototype.quadraticCurveTo=function($,W,Q,J){if(isNaN(Q)||isNaN(J)||isNaN($)||isNaN(W))throw Or.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var he=this.ctx.transform.applyToPoint(new o(Q,J)),be=this.ctx.transform.applyToPoint(new o($,W));this.path.push({type:"qct",x1:be.x,y1:be.y,x:he.x,y:he.y}),this.ctx.lastPoint=new o(he.x,he.y)},p.prototype.bezierCurveTo=function($,W,Q,J,he,be){if(isNaN(he)||isNaN(be)||isNaN($)||isNaN(W)||isNaN(Q)||isNaN(J))throw Or.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var _e=this.ctx.transform.applyToPoint(new o(he,be)),Ie=this.ctx.transform.applyToPoint(new o($,W)),Oe=this.ctx.transform.applyToPoint(new o(Q,J));this.path.push({type:"bct",x1:Ie.x,y1:Ie.y,x2:Oe.x,y2:Oe.y,x:_e.x,y:_e.y}),this.ctx.lastPoint=new o(_e.x,_e.y)},p.prototype.arc=function($,W,Q,J,he,be){if(isNaN($)||isNaN(W)||isNaN(Q)||isNaN(J)||isNaN(he))throw Or.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(be=!!be,!this.ctx.transform.isIdentity){var _e=this.ctx.transform.applyToPoint(new o($,W));$=_e.x,W=_e.y;var Ie=this.ctx.transform.applyToPoint(new o(0,Q)),Oe=this.ctx.transform.applyToPoint(new o(0,0));Q=Math.sqrt(Math.pow(Ie.x-Oe.x,2)+Math.pow(Ie.y-Oe.y,2))}Math.abs(he-J)>=2*Math.PI&&(J=0,he=2*Math.PI),this.path.push({type:"arc",x:$,y:W,radius:Q,startAngle:J,endAngle:he,counterclockwise:be})},p.prototype.arcTo=function($,W,Q,J,he){throw new Error("arcTo not implemented.")},p.prototype.rect=function($,W,Q,J){if(isNaN($)||isNaN(W)||isNaN(Q)||isNaN(J))throw Or.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo($,W),this.lineTo($+Q,W),this.lineTo($+Q,W+J),this.lineTo($,W+J),this.lineTo($,W),this.lineTo($+Q,W),this.lineTo($,W)},p.prototype.fillRect=function($,W,Q,J){if(isNaN($)||isNaN(W)||isNaN(Q)||isNaN(J))throw Or.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!m.call(this)){var he={};this.lineCap!=="butt"&&(he.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(he.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect($,W,Q,J),this.fill(),he.hasOwnProperty("lineCap")&&(this.lineCap=he.lineCap),he.hasOwnProperty("lineJoin")&&(this.lineJoin=he.lineJoin)}},p.prototype.strokeRect=function($,W,Q,J){if(isNaN($)||isNaN(W)||isNaN(Q)||isNaN(J))throw Or.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");x.call(this)||(this.beginPath(),this.rect($,W,Q,J),this.stroke())},p.prototype.clearRect=function($,W,Q,J){if(isNaN($)||isNaN(W)||isNaN(Q)||isNaN(J))throw Or.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect($,W,Q,J))},p.prototype.save=function($){$=typeof $!="boolean"||$;for(var W=this.pdf.internal.getCurrentPageInfo().pageNumber,Q=0;Q<this.pdf.internal.getNumberOfPages();Q++)this.pdf.setPage(Q+1),this.pdf.internal.out("q");if(this.pdf.setPage(W),$){this.ctx.fontSize=this.pdf.internal.getFontSize();var J=new d(this.ctx);this.ctxStack.push(this.ctx),this.ctx=J}},p.prototype.restore=function($){$=typeof $!="boolean"||$;for(var W=this.pdf.internal.getCurrentPageInfo().pageNumber,Q=0;Q<this.pdf.internal.getNumberOfPages();Q++)this.pdf.setPage(Q+1),this.pdf.internal.out("Q");this.pdf.setPage(W),$&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},p.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var g=function($){var W,Q,J,he;if($.isCanvasGradient===!0&&($=$.getColor()),!$)return{r:0,g:0,b:0,a:0,style:$};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test($))W=0,Q=0,J=0,he=0;else{var be=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec($);if(be!==null)W=parseInt(be[1]),Q=parseInt(be[2]),J=parseInt(be[3]),he=1;else if((be=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec($))!==null)W=parseInt(be[1]),Q=parseInt(be[2]),J=parseInt(be[3]),he=parseFloat(be[4]);else{if(he=1,typeof $=="string"&&$.charAt(0)!=="#"){var _e=new kI($);$=_e.ok?_e.toHex():"#000000"}$.length===4?(W=$.substring(1,2),W+=W,Q=$.substring(2,3),Q+=Q,J=$.substring(3,4),J+=J):(W=$.substring(1,3),Q=$.substring(3,5),J=$.substring(5,7)),W=parseInt(W,16),Q=parseInt(Q,16),J=parseInt(J,16)}}return{r:W,g:Q,b:J,a:he,style:$}},m=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},x=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};p.prototype.fillText=function($,W,Q,J){if(isNaN(W)||isNaN(Q)||typeof $!="string")throw Or.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(J=isNaN(J)?void 0:J,!m.call(this)){var he=te(this.ctx.transform.rotation),be=this.ctx.transform.scaleX;R.call(this,{text:$,x:W,y:Q,scale:be,angle:he,align:this.textAlign,maxWidth:J})}},p.prototype.strokeText=function($,W,Q,J){if(isNaN(W)||isNaN(Q)||typeof $!="string")throw Or.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!x.call(this)){J=isNaN(J)?void 0:J;var he=te(this.ctx.transform.rotation),be=this.ctx.transform.scaleX;R.call(this,{text:$,x:W,y:Q,scale:be,renderingMode:"stroke",angle:he,align:this.textAlign,maxWidth:J})}},p.prototype.measureText=function($){if(typeof $!="string")throw Or.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var W=this.pdf,Q=this.pdf.internal.scaleFactor,J=W.internal.getFontSize(),he=W.getStringUnitWidth($)*J/W.internal.scaleFactor;return new function(be){var _e=(be=be||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return _e}}),this}({width:he*=Math.round(96*Q/72*1e4)/1e4})},p.prototype.scale=function($,W){if(isNaN($)||isNaN(W))throw Or.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var Q=new c($,0,0,W,0,0);this.ctx.transform=this.ctx.transform.multiply(Q)},p.prototype.rotate=function($){if(isNaN($))throw Or.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var W=new c(Math.cos($),Math.sin($),-Math.sin($),Math.cos($),0,0);this.ctx.transform=this.ctx.transform.multiply(W)},p.prototype.translate=function($,W){if(isNaN($)||isNaN(W))throw Or.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var Q=new c(1,0,0,1,$,W);this.ctx.transform=this.ctx.transform.multiply(Q)},p.prototype.transform=function($,W,Q,J,he,be){if(isNaN($)||isNaN(W)||isNaN(Q)||isNaN(J)||isNaN(he)||isNaN(be))throw Or.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var _e=new c($,W,Q,J,he,be);this.ctx.transform=this.ctx.transform.multiply(_e)},p.prototype.setTransform=function($,W,Q,J,he,be){$=isNaN($)?1:$,W=isNaN(W)?0:W,Q=isNaN(Q)?0:Q,J=isNaN(J)?1:J,he=isNaN(he)?0:he,be=isNaN(be)?0:be,this.ctx.transform=new c($,W,Q,J,he,be)};var _=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};p.prototype.drawImage=function($,W,Q,J,he,be,_e,Ie,Oe){var Ve=this.pdf.getImageProperties($),nt=1,ot=1,ft=1,de=1;J!==void 0&&Ie!==void 0&&(ft=Ie/J,de=Oe/he,nt=Ve.width/J*Ie/J,ot=Ve.height/he*Oe/he),be===void 0&&(be=W,_e=Q,W=0,Q=0),J!==void 0&&Ie===void 0&&(Ie=J,Oe=he),J===void 0&&Ie===void 0&&(Ie=Ve.width,Oe=Ve.height);var rt=this.ctx.transform.decompose(),dt=te(rt.rotate.shx),at=new c,Ee=(at=(at=(at=at.multiply(rt.translate)).multiply(rt.skew)).multiply(rt.scale)).applyToRectangle(new s(be-W*ft,_e-Q*de,J*nt,he*ot));if(this.autoPaging){for(var lt,Ye=C.call(this,Ee),vt=[],ct=0;ct<Ye.length;ct+=1)vt.indexOf(Ye[ct])===-1&&vt.push(Ye[ct]);M(vt);for(var it=vt[0],Lt=vt[vt.length-1],ht=it;ht<Lt+1;ht++){this.pdf.setPage(ht);var yt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],_t=ht===1?this.posY+this.margin[0]:this.margin[0],ut=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],xt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],mt=ht===1?0:ut+(ht-2)*xt;if(this.ctx.clip_path.length!==0){var mn=this.path;lt=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=k(lt,this.posX+this.margin[3],-mt+_t+this.ctx.prevPageLastElemOffset),Y.call(this,"fill",!0),this.path=mn}var Kt=JSON.parse(JSON.stringify(Ee));Kt=k([Kt],this.posX+this.margin[3],-mt+_t+this.ctx.prevPageLastElemOffset)[0];var Bt=(ht>it||ht<Lt)&&_.call(this);Bt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],yt,xt,null).clip().discardPath()),this.pdf.addImage($,"JPEG",Kt.x,Kt.y,Kt.w,Kt.h,null,null,dt),Bt&&this.pdf.restoreGraphicsState()}}else this.pdf.addImage($,"JPEG",Ee.x,Ee.y,Ee.w,Ee.h,null,null,dt)};var C=function($,W,Q){var J=[];W=W||this.pdf.internal.pageSize.width,Q=Q||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var he=this.posY+this.ctx.prevPageLastElemOffset;switch($.type){default:case"mt":case"lt":J.push(Math.floor(($.y+he)/Q)+1);break;case"arc":J.push(Math.floor(($.y+he-$.radius)/Q)+1),J.push(Math.floor(($.y+he+$.radius)/Q)+1);break;case"qct":var be=se(this.ctx.lastPoint.x,this.ctx.lastPoint.y,$.x1,$.y1,$.x,$.y);J.push(Math.floor((be.y+he)/Q)+1),J.push(Math.floor((be.y+be.h+he)/Q)+1);break;case"bct":var _e=ee(this.ctx.lastPoint.x,this.ctx.lastPoint.y,$.x1,$.y1,$.x2,$.y2,$.x,$.y);J.push(Math.floor((_e.y+he)/Q)+1),J.push(Math.floor((_e.y+_e.h+he)/Q)+1);break;case"rect":J.push(Math.floor(($.y+he)/Q)+1),J.push(Math.floor(($.y+$.h+he)/Q)+1)}for(var Ie=0;Ie<J.length;Ie+=1)for(;this.pdf.internal.getNumberOfPages()<J[Ie];)S.call(this);return J},S=function(){var $=this.fillStyle,W=this.strokeStyle,Q=this.font,J=this.lineCap,he=this.lineWidth,be=this.lineJoin;this.pdf.addPage(),this.fillStyle=$,this.strokeStyle=W,this.font=Q,this.lineCap=J,this.lineWidth=he,this.lineJoin=be},k=function($,W,Q){for(var J=0;J<$.length;J++)switch($[J].type){case"bct":$[J].x2+=W,$[J].y2+=Q;case"qct":$[J].x1+=W,$[J].y1+=Q;default:$[J].x+=W,$[J].y+=Q}return $},M=function($){return $.sort(function(W,Q){return W-Q})},P=function($,W){var Q=this.fillStyle,J=this.strokeStyle,he=this.lineCap,be=this.lineWidth,_e=Math.abs(be*this.ctx.transform.scaleX),Ie=this.lineJoin;if(this.autoPaging){for(var Oe,Ve,nt=JSON.parse(JSON.stringify(this.path)),ot=JSON.parse(JSON.stringify(this.path)),ft=[],de=0;de<ot.length;de++)if(ot[de].x!==void 0)for(var rt=C.call(this,ot[de]),dt=0;dt<rt.length;dt+=1)ft.indexOf(rt[dt])===-1&&ft.push(rt[dt]);for(var at=0;at<ft.length;at++)for(;this.pdf.internal.getNumberOfPages()<ft[at];)S.call(this);M(ft);for(var Ee=ft[0],lt=ft[ft.length-1],Ye=Ee;Ye<lt+1;Ye++){this.pdf.setPage(Ye),this.fillStyle=Q,this.strokeStyle=J,this.lineCap=he,this.lineWidth=_e,this.lineJoin=Ie;var vt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],ct=Ye===1?this.posY+this.margin[0]:this.margin[0],it=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Lt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],ht=Ye===1?0:it+(Ye-2)*Lt;if(this.ctx.clip_path.length!==0){var yt=this.path;Oe=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=k(Oe,this.posX+this.margin[3],-ht+ct+this.ctx.prevPageLastElemOffset),Y.call(this,$,!0),this.path=yt}if(Ve=JSON.parse(JSON.stringify(nt)),this.path=k(Ve,this.posX+this.margin[3],-ht+ct+this.ctx.prevPageLastElemOffset),W===!1||Ye===0){var _t=(Ye>Ee||Ye<lt)&&_.call(this);_t&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],vt,Lt,null).clip().discardPath()),Y.call(this,$,W),_t&&this.pdf.restoreGraphicsState()}this.lineWidth=be}this.path=nt}else this.lineWidth=_e,Y.call(this,$,W),this.lineWidth=be},Y=function($,W){if(($!=="stroke"||W||!x.call(this))&&($==="stroke"||W||!m.call(this))){for(var Q,J,he=[],be=this.path,_e=0;_e<be.length;_e++){var Ie=be[_e];switch(Ie.type){case"begin":he.push({begin:!0});break;case"close":he.push({close:!0});break;case"mt":he.push({start:Ie,deltas:[],abs:[]});break;case"lt":var Oe=he.length;if(be[_e-1]&&!isNaN(be[_e-1].x)&&(Q=[Ie.x-be[_e-1].x,Ie.y-be[_e-1].y],Oe>0)){for(;Oe>=0;Oe--)if(he[Oe-1].close!==!0&&he[Oe-1].begin!==!0){he[Oe-1].deltas.push(Q),he[Oe-1].abs.push(Ie);break}}break;case"bct":Q=[Ie.x1-be[_e-1].x,Ie.y1-be[_e-1].y,Ie.x2-be[_e-1].x,Ie.y2-be[_e-1].y,Ie.x-be[_e-1].x,Ie.y-be[_e-1].y],he[he.length-1].deltas.push(Q);break;case"qct":var Ve=be[_e-1].x+2/3*(Ie.x1-be[_e-1].x),nt=be[_e-1].y+2/3*(Ie.y1-be[_e-1].y),ot=Ie.x+2/3*(Ie.x1-Ie.x),ft=Ie.y+2/3*(Ie.y1-Ie.y),de=Ie.x,rt=Ie.y;Q=[Ve-be[_e-1].x,nt-be[_e-1].y,ot-be[_e-1].x,ft-be[_e-1].y,de-be[_e-1].x,rt-be[_e-1].y],he[he.length-1].deltas.push(Q);break;case"arc":he.push({deltas:[],abs:[],arc:!0}),Array.isArray(he[he.length-1].abs)&&he[he.length-1].abs.push(Ie)}}J=W?null:$==="stroke"?"stroke":"fill";for(var dt=!1,at=0;at<he.length;at++)if(he[at].arc)for(var Ee=he[at].abs,lt=0;lt<Ee.length;lt++){var Ye=Ee[lt];Ye.type==="arc"?I.call(this,Ye.x,Ye.y,Ye.radius,Ye.startAngle,Ye.endAngle,Ye.counterclockwise,void 0,W,!dt):D.call(this,Ye.x,Ye.y),dt=!0}else if(he[at].close===!0)this.pdf.internal.out("h"),dt=!1;else if(he[at].begin!==!0){var vt=he[at].start.x,ct=he[at].start.y;L.call(this,he[at].deltas,vt,ct),dt=!0}J&&T.call(this,J),W&&j.call(this)}},z=function($){var W=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,Q=W*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return $-Q;case"top":return $+W-Q;case"hanging":return $+W-2*Q;case"middle":return $+W/2-Q;default:return $}},F=function($){return $+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};p.prototype.createLinearGradient=function(){var $=function(){};return $.colorStops=[],$.addColorStop=function(W,Q){this.colorStops.push([W,Q])},$.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},$.isCanvasGradient=!0,$},p.prototype.createPattern=function(){return this.createLinearGradient()},p.prototype.createRadialGradient=function(){return this.createLinearGradient()};var I=function($,W,Q,J,he,be,_e,Ie,Oe){for(var Ve=U.call(this,Q,J,he,be),nt=0;nt<Ve.length;nt++){var ot=Ve[nt];nt===0&&(Oe?N.call(this,ot.x1+$,ot.y1+W):D.call(this,ot.x1+$,ot.y1+W)),G.call(this,$,W,ot.x2,ot.y2,ot.x3,ot.y3,ot.x4,ot.y4)}Ie?j.call(this):T.call(this,_e)},T=function($){switch($){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},j=function(){this.pdf.clip(),this.pdf.discardPath()},N=function($,W){this.pdf.internal.out(t($)+" "+r(W)+" m")},R=function($){var W;switch($.align){case"right":case"end":W="right";break;case"center":W="center";break;default:W="left"}var Q,J,he,be=this.pdf.getTextDimensions($.text),_e=z.call(this,$.y),Ie=F.call(this,_e)-be.h,Oe=this.ctx.transform.applyToPoint(new o($.x,_e));if(this.autoPaging){var Ve=this.ctx.transform.decompose(),nt=new c;nt=(nt=(nt=nt.multiply(Ve.translate)).multiply(Ve.skew)).multiply(Ve.scale);for(var ot=this.ctx.transform.applyToRectangle(new s($.x,_e,be.w,be.h)),ft=nt.applyToRectangle(new s($.x,Ie,be.w,be.h)),de=C.call(this,ft),rt=[],dt=0;dt<de.length;dt+=1)rt.indexOf(de[dt])===-1&&rt.push(de[dt]);M(rt);for(var at=rt[0],Ee=rt[rt.length-1],lt=at;lt<Ee+1;lt++){this.pdf.setPage(lt);var Ye=lt===1?this.posY+this.margin[0]:this.margin[0],vt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],ct=this.pdf.internal.pageSize.height-this.margin[2],it=ct-this.margin[0],Lt=this.pdf.internal.pageSize.width-this.margin[1],ht=Lt-this.margin[3],yt=lt===1?0:vt+(lt-2)*it;if(this.ctx.clip_path.length!==0){var _t=this.path;Q=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=k(Q,this.posX+this.margin[3],-1*yt+Ye),Y.call(this,"fill",!0),this.path=_t}var ut=k([JSON.parse(JSON.stringify(ft))],this.posX+this.margin[3],-yt+Ye+this.ctx.prevPageLastElemOffset)[0];$.scale>=.01&&(J=this.pdf.internal.getFontSize(),this.pdf.setFontSize(J*$.scale),he=this.lineWidth,this.lineWidth=he*$.scale);var xt=this.autoPaging!=="text";if(xt||ut.y+ut.h<=ct){if(xt||ut.y>=Ye&&ut.x<=Lt){var mt=xt?$.text:this.pdf.splitTextToSize($.text,$.maxWidth||Lt-ut.x)[0],mn=k([JSON.parse(JSON.stringify(ot))],this.posX+this.margin[3],-yt+Ye+this.ctx.prevPageLastElemOffset)[0],Kt=xt&&(lt>at||lt<Ee)&&_.call(this);Kt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ht,it,null).clip().discardPath()),this.pdf.text(mt,mn.x,mn.y,{angle:$.angle,align:W,renderingMode:$.renderingMode}),Kt&&this.pdf.restoreGraphicsState()}}else ut.y<ct&&(this.ctx.prevPageLastElemOffset+=ct-ut.y);$.scale>=.01&&(this.pdf.setFontSize(J),this.lineWidth=he)}}else $.scale>=.01&&(J=this.pdf.internal.getFontSize(),this.pdf.setFontSize(J*$.scale),he=this.lineWidth,this.lineWidth=he*$.scale),this.pdf.text($.text,Oe.x+this.posX,Oe.y+this.posY,{angle:$.angle,align:W,renderingMode:$.renderingMode,maxWidth:$.maxWidth}),$.scale>=.01&&(this.pdf.setFontSize(J),this.lineWidth=he)},D=function($,W,Q,J){Q=Q||0,J=J||0,this.pdf.internal.out(t($+Q)+" "+r(W+J)+" l")},L=function($,W,Q){return this.pdf.lines($,W,Q,null,null)},G=function($,W,Q,J,he,be,_e,Ie){this.pdf.internal.out([e(i(Q+$)),e(a(J+W)),e(i(he+$)),e(a(be+W)),e(i(_e+$)),e(a(Ie+W)),"c"].join(" "))},U=function($,W,Q,J){for(var he=2*Math.PI,be=Math.PI/2;W>Q;)W-=he;var _e=Math.abs(Q-W);_e<he&&J&&(_e=he-_e);for(var Ie=[],Oe=J?-1:1,Ve=W;_e>1e-5;){var nt=Ve+Oe*Math.min(_e,be);Ie.push(H.call(this,$,Ve,nt)),_e-=Math.abs(nt-Ve),Ve=nt}return Ie},H=function($,W,Q){var J=(Q-W)/2,he=$*Math.cos(J),be=$*Math.sin(J),_e=he,Ie=-be,Oe=_e*_e+Ie*Ie,Ve=Oe+_e*he+Ie*be,nt=4/3*(Math.sqrt(2*Oe*Ve)-Ve)/(_e*be-Ie*he),ot=_e-nt*Ie,ft=Ie+nt*_e,de=ot,rt=-ft,dt=J+W,at=Math.cos(dt),Ee=Math.sin(dt);return{x1:$*Math.cos(W),y1:$*Math.sin(W),x2:ot*at-ft*Ee,y2:ot*Ee+ft*at,x3:de*at-rt*Ee,y3:de*Ee+rt*at,x4:$*Math.cos(Q),y4:$*Math.sin(Q)}},te=function($){return 180*$/Math.PI},se=function($,W,Q,J,he,be){var _e=$+.5*(Q-$),Ie=W+.5*(J-W),Oe=he+.5*(Q-he),Ve=be+.5*(J-be),nt=Math.min($,he,_e,Oe),ot=Math.max($,he,_e,Oe),ft=Math.min(W,be,Ie,Ve),de=Math.max(W,be,Ie,Ve);return new s(nt,ft,ot-nt,de-ft)},ee=function($,W,Q,J,he,be,_e,Ie){var Oe,Ve,nt,ot,ft,de,rt,dt,at,Ee,lt,Ye,vt,ct,it=Q-$,Lt=J-W,ht=he-Q,yt=be-J,_t=_e-he,ut=Ie-be;for(Ve=0;Ve<41;Ve++)at=(rt=(nt=$+(Oe=Ve/40)*it)+Oe*((ft=Q+Oe*ht)-nt))+Oe*(ft+Oe*(he+Oe*_t-ft)-rt),Ee=(dt=(ot=W+Oe*Lt)+Oe*((de=J+Oe*yt)-ot))+Oe*(de+Oe*(be+Oe*ut-de)-dt),Ve==0?(lt=at,Ye=Ee,vt=at,ct=Ee):(lt=Math.min(lt,at),Ye=Math.min(Ye,Ee),vt=Math.max(vt,at),ct=Math.max(ct,Ee));return new s(Math.round(lt),Math.round(Ye),Math.round(vt-lt),Math.round(ct-Ye))},ie=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var $,W,Q=($=this.ctx.lineDash,W=this.ctx.lineDashOffset,JSON.stringify({lineDash:$,lineDashOffset:W}));this.prevLineDash!==Q&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=Q)}}})(Vt.API),function(n){var e=function(o){var s,c,f,d,p,g,m,x,_,C;for(c=[],f=0,d=(o+=s="\0\0\0\0".slice(o.length%4||4)).length;d>f;f+=4)(p=(o.charCodeAt(f)<<24)+(o.charCodeAt(f+1)<<16)+(o.charCodeAt(f+2)<<8)+o.charCodeAt(f+3))!==0?(g=(p=((p=((p=((p=(p-(C=p%85))/85)-(_=p%85))/85)-(x=p%85))/85)-(m=p%85))/85)%85,c.push(g+33,m+33,x+33,_+33,C+33)):c.push(122);return function(S,k){for(var M=k;M>0;M--)S.pop()}(c,s.length),String.fromCharCode.apply(String,c)+"~>"},t=function(o){var s,c,f,d,p,g=String,m="length",x=255,_="charCodeAt",C="slice",S="replace";for(o[C](-2),o=o[C](0,-2)[S](/\s/g,"")[S]("z","!!!!!"),f=[],d=0,p=(o+=s="uuuuu"[C](o[m]%5||5))[m];p>d;d+=5)c=52200625*(o[_](d)-33)+614125*(o[_](d+1)-33)+7225*(o[_](d+2)-33)+85*(o[_](d+3)-33)+(o[_](d+4)-33),f.push(x&c>>24,x&c>>16,x&c>>8,x&c);return function(k,M){for(var P=M;P>0;P--)k.pop()}(f,s[m]),g.fromCharCode.apply(g,f)},r=function(o){return o.split("").map(function(s){return("0"+s.charCodeAt().toString(16)).slice(-2)}).join("")+">"},i=function(o){var s=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((o=o.replace(/\s/g,"")).indexOf(">")!==-1&&(o=o.substr(0,o.indexOf(">"))),o.length%2&&(o+="0"),s.test(o)===!1)return"";for(var c="",f=0;f<o.length;f+=2)c+=String.fromCharCode("0x"+(o[f]+o[f+1]));return c},a=function(o){for(var s=new Uint8Array(o.length),c=o.length;c--;)s[c]=o.charCodeAt(c);return(s=Dx(s)).reduce(function(f,d){return f+String.fromCharCode(d)},"")};n.processDataByFilters=function(o,s){var c=0,f=o||"",d=[];for(typeof(s=s||[])=="string"&&(s=[s]),c=0;c<s.length;c+=1)switch(s[c]){case"ASCII85Decode":case"/ASCII85Decode":f=t(f),d.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":f=e(f),d.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":f=i(f),d.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":f=r(f),d.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":f=a(f),d.push("/FlateDecode");break;default:throw new Error('The filter: "'+s[c]+'" is not implemented')}return{data:f,reverseChain:d.reverse().join(" ")}}}(Vt.API),function(n){n.loadFile=function(e,t,r){return function(i,a,o){a=a!==!1,o=typeof o=="function"?o:function(){};var s=void 0;try{s=function(c,f,d){var p=new XMLHttpRequest,g=0,m=function(x){var _=x.length,C=[],S=String.fromCharCode;for(g=0;g<_;g+=1)C.push(S(255&x.charCodeAt(g)));return C.join("")};if(p.open("GET",c,!f),p.overrideMimeType("text/plain; charset=x-user-defined"),f===!1&&(p.onload=function(){p.status===200?d(m(this.responseText)):d(void 0)}),p.send(null),f&&p.status===200)return m(p.responseText)}(i,a,o)}catch{}return s}(e,t,r)},n.loadImageFile=n.loadFile}(Vt.API),function(n){function e(){return(cn.html2canvas?Promise.resolve(cn.html2canvas):sy(()=>import("./html2canvas.esm-CBrSDip1.js"),[])).catch(function(s){return Promise.reject(new Error("Could not load html2canvas: "+s))}).then(function(s){return s.default?s.default:s})}function t(){return(cn.DOMPurify?Promise.resolve(cn.DOMPurify):sy(()=>import("./purify.es-CQJ0hv7W.js"),[])).catch(function(s){return Promise.reject(new Error("Could not load dompurify: "+s))}).then(function(s){return s.default?s.default:s})}var r=function(s){var c=br(s);return c==="undefined"?"undefined":c==="string"||s instanceof String?"string":c==="number"||s instanceof Number?"number":c==="function"||s instanceof Function?"function":s&&s.constructor===Array?"array":s&&s.nodeType===1?"element":c==="object"?"object":"unknown"},i=function(s,c){var f=document.createElement(s);for(var d in c.className&&(f.className=c.className),c.innerHTML&&c.dompurify&&(f.innerHTML=c.dompurify.sanitize(c.innerHTML)),c.style)f.style[d]=c.style[d];return f},a=function s(c,f){for(var d=c.nodeType===3?document.createTextNode(c.nodeValue):c.cloneNode(!1),p=c.firstChild;p;p=p.nextSibling)f!==!0&&p.nodeType===1&&p.nodeName==="SCRIPT"||d.appendChild(s(p,f));return c.nodeType===1&&(c.nodeName==="CANVAS"?(d.width=c.width,d.height=c.height,d.getContext("2d").drawImage(c,0,0)):c.nodeName!=="TEXTAREA"&&c.nodeName!=="SELECT"||(d.value=c.value),d.addEventListener("load",function(){d.scrollTop=c.scrollTop,d.scrollLeft=c.scrollLeft},!0)),d},o=function s(c){var f=Object.assign(s.convert(Promise.resolve()),JSON.parse(JSON.stringify(s.template))),d=s.convert(Promise.resolve(),f);return(d=d.setProgress(1,s,1,[s])).set(c)};(o.prototype=Object.create(Promise.prototype)).constructor=o,o.convert=function(s,c){return s.__proto__=c||o.prototype,s},o.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},o.prototype.from=function(s,c){return this.then(function(){switch(c=c||function(f){switch(r(f)){case"string":return"string";case"element":return f.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(s),c){case"string":return this.then(t).then(function(f){return this.set({src:i("div",{innerHTML:s,dompurify:f})})});case"element":return this.set({src:s});case"canvas":return this.set({canvas:s});case"img":return this.set({img:s});default:return this.error("Unknown source type.")}})},o.prototype.to=function(s){switch(s){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},o.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var s={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},c=a(this.prop.src,this.opt.html2canvas.javascriptEnabled);c.tagName==="BODY"&&(s.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:s}),this.prop.container.appendChild(c),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},o.prototype.toCanvas=function(){var s=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(s).then(e).then(function(c){var f=Object.assign({},this.opt.html2canvas);return delete f.onrendered,c(this.prop.container,f)}).then(function(c){(this.opt.html2canvas.onrendered||function(){})(c),this.prop.canvas=c,document.body.removeChild(this.prop.overlay)})},o.prototype.toContext2d=function(){var s=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(s).then(e).then(function(c){var f=this.opt.jsPDF,d=this.opt.fontFaces,p=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,g=Object.assign({async:!0,allowTaint:!0,scale:p,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete g.onrendered,f.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,f.context2d.posX=this.opt.x,f.context2d.posY=this.opt.y,f.context2d.margin=this.opt.margin,f.context2d.fontFaces=d,d)for(var m=0;m<d.length;++m){var x=d[m],_=x.src.find(function(C){return C.format==="truetype"});_&&f.addFont(_.url,x.ref.name,x.ref.style)}return g.windowHeight=g.windowHeight||0,g.windowHeight=g.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):g.windowHeight,f.context2d.save(!0),c(this.prop.container,g)}).then(function(c){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(c),this.prop.canvas=c,document.body.removeChild(this.prop.overlay)})},o.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var s=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=s})},o.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},o.prototype.output=function(s,c,f){return(f=f||"pdf").toLowerCase()==="img"||f.toLowerCase()==="image"?this.outputImg(s,c):this.outputPdf(s,c)},o.prototype.outputPdf=function(s,c){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(s,c)})},o.prototype.outputImg=function(s){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(s){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+s+'" is not supported.'}})},o.prototype.save=function(s){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(s?{filename:s}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},o.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},o.prototype.set=function(s){if(r(s)!=="object")return this;var c=Object.keys(s||{}).map(function(f){if(f in o.template.prop)return function(){this.prop[f]=s[f]};switch(f){case"margin":return this.setMargin.bind(this,s.margin);case"jsPDF":return function(){return this.opt.jsPDF=s.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,s.pageSize);default:return function(){this.opt[f]=s[f]}}},this);return this.then(function(){return this.thenList(c)})},o.prototype.get=function(s,c){return this.then(function(){var f=s in o.template.prop?this.prop[s]:this.opt[s];return c?c(f):f})},o.prototype.setMargin=function(s){return this.then(function(){switch(r(s)){case"number":s=[s,s,s,s];case"array":if(s.length===2&&(s=[s[0],s[1],s[0],s[1]]),s.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=s}).then(this.setPageSize)},o.prototype.setPageSize=function(s){function c(f,d){return Math.floor(f*d/72*96)}return this.then(function(){(s=s||Vt.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(s.inner={width:s.width-this.opt.margin[1]-this.opt.margin[3],height:s.height-this.opt.margin[0]-this.opt.margin[2]},s.inner.px={width:c(s.inner.width,s.k),height:c(s.inner.height,s.k)},s.inner.ratio=s.inner.height/s.inner.width),this.prop.pageSize=s})},o.prototype.setProgress=function(s,c,f,d){return s!=null&&(this.progress.val=s),c!=null&&(this.progress.state=c),f!=null&&(this.progress.n=f),d!=null&&(this.progress.stack=d),this.progress.ratio=this.progress.val/this.progress.state,this},o.prototype.updateProgress=function(s,c,f,d){return this.setProgress(s?this.progress.val+s:null,c||null,f?this.progress.n+f:null,d?this.progress.stack.concat(d):null)},o.prototype.then=function(s,c){var f=this;return this.thenCore(s,c,function(d,p){return f.updateProgress(null,null,1,[d]),Promise.prototype.then.call(this,function(g){return f.updateProgress(null,d),g}).then(d,p).then(function(g){return f.updateProgress(1),g})})},o.prototype.thenCore=function(s,c,f){f=f||Promise.prototype.then;var d=this;s&&(s=s.bind(d)),c&&(c=c.bind(d));var p=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?d:o.convert(Object.assign({},d),Promise.prototype),g=f.call(p,s,c);return o.convert(g,d.__proto__)},o.prototype.thenExternal=function(s,c){return Promise.prototype.then.call(this,s,c)},o.prototype.thenList=function(s){var c=this;return s.forEach(function(f){c=c.thenCore(f)}),c},o.prototype.catch=function(s){s&&(s=s.bind(this));var c=Promise.prototype.catch.call(this,s);return o.convert(c,this)},o.prototype.catchExternal=function(s){return Promise.prototype.catch.call(this,s)},o.prototype.error=function(s){return this.then(function(){throw new Error(s)})},o.prototype.using=o.prototype.set,o.prototype.saveAs=o.prototype.save,o.prototype.export=o.prototype.output,o.prototype.run=o.prototype.then,Vt.getPageSize=function(s,c,f){if(br(s)==="object"){var d=s;s=d.orientation,c=d.unit||c,f=d.format||f}c=c||"mm",f=f||"a4",s=(""+(s||"P")).toLowerCase();var p,g=(""+f).toLowerCase(),m={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(c){case"pt":p=1;break;case"mm":p=72/25.4;break;case"cm":p=72/2.54;break;case"in":p=72;break;case"px":p=.75;break;case"pc":case"em":p=12;break;case"ex":p=6;break;default:throw"Invalid unit: "+c}var x,_=0,C=0;if(m.hasOwnProperty(g))_=m[g][1]/p,C=m[g][0]/p;else try{_=f[1],C=f[0]}catch{throw new Error("Invalid format: "+f)}if(s==="p"||s==="portrait")s="p",C>_&&(x=C,C=_,_=x);else{if(s!=="l"&&s!=="landscape")throw"Invalid orientation: "+s;s="l",_>C&&(x=C,C=_,_=x)}return{width:C,height:_,unit:c,k:p,orientation:s}},n.html=function(s,c){(c=c||{}).callback=c.callback||function(){},c.html2canvas=c.html2canvas||{},c.html2canvas.canvas=c.html2canvas.canvas||this.canvas,c.jsPDF=c.jsPDF||this,c.fontFaces=c.fontFaces?c.fontFaces.map(Ey):null;var f=new o(c);return c.worker?f:f.from(s).doCallback()}}(Vt.API),Vt.API.addJS=function(n){return pA=n,this.internal.events.subscribe("postPutResources",function(){vg=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(vg+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),hA=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+pA+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){vg!==void 0&&hA!==void 0&&this.internal.out("/Names <</JavaScript "+vg+" 0 R>>")}),this},function(n){var e;n.events.push(["postPutResources",function(){var t=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=t.outline.render().split(/\r\n/),a=0;a<i.length;a++){var o=i[a],s=r.exec(o);if(s!=null){var c=s[1];t.internal.newObjectDeferredBegin(c,!1)}t.internal.write(o)}if(this.outline.createNamedDestinations){var f=this.internal.pages.length,d=[];for(a=0;a<f;a++){var p=t.internal.newObject();d.push(p);var g=t.internal.getPageInfo(a+1);t.internal.write("<< /D["+g.objId+" 0 R /XYZ null null null]>> endobj")}var m=t.internal.newObject();for(t.internal.write("<< /Names [ "),a=0;a<d.length;a++)t.internal.write("(page_"+(a+1)+")"+d[a]+" 0 R");t.internal.write(" ] >>","endobj"),e=t.internal.newObject(),t.internal.write("<< /Dests "+m+" 0 R"),t.internal.write(">>","endobj")}}]),n.events.push(["putCatalog",function(){var t=this;t.outline.root.children.length>0&&(t.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&t.internal.write("/Names "+e+" 0 R"))}]),n.events.push(["initialized",function(){var t=this;t.outline={createNamedDestinations:!1,root:{children:[]}},t.outline.add=function(r,i,a){var o={title:i,options:a,children:[]};return r==null&&(r=this.root),r.children.push(o),o},t.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=t,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},t.outline.genIds_r=function(r){r.id=t.internal.newObjectDeferred();for(var i=0;i<r.children.length;i++)this.genIds_r(r.children[i])},t.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},t.outline.renderItems=function(r){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,a=0;a<r.children.length;a++){var o=r.children[a];this.objStart(o),this.line("/Title "+this.makeString(o.title)),this.line("/Parent "+this.makeRef(r)),a>0&&this.line("/Prev "+this.makeRef(r.children[a-1])),a<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[a+1])),o.children.length>0&&(this.line("/First "+this.makeRef(o.children[0])),this.line("/Last "+this.makeRef(o.children[o.children.length-1])));var s=this.count=this.count_r({count:0},o);if(s>0&&this.line("/Count "+s),o.options&&o.options.pageNumber){var c=t.internal.getPageInfo(o.options.pageNumber);this.line("/Dest ["+c.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var f=0;f<r.children.length;f++)this.renderItems(r.children[f])},t.outline.line=function(r){this.ctx.val+=r+`\r
`},t.outline.makeRef=function(r){return r.id+" 0 R"},t.outline.makeString=function(r){return"("+t.internal.pdfEscape(r)+")"},t.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},t.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},t.outline.count_r=function(r,i){for(var a=0;a<i.children.length;a++)r.count++,this.count_r(r,i.children[a]);return r.count}}])}(Vt.API),function(n){var e=[192,193,194,195,196,197,198,199];n.processJPEG=function(t,r,i,a,o,s){var c,f=this.decode.DCT_DECODE,d=null;if(typeof t=="string"||this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t)){switch(t=o||t,t=this.__addimage__.isArrayBuffer(t)?new Uint8Array(t):t,c=function(p){for(var g,m=256*p.charCodeAt(4)+p.charCodeAt(5),x=p.length,_={width:0,height:0,numcomponents:1},C=4;C<x;C+=2){if(C+=m,e.indexOf(p.charCodeAt(C+1))!==-1){g=256*p.charCodeAt(C+5)+p.charCodeAt(C+6),_={width:256*p.charCodeAt(C+7)+p.charCodeAt(C+8),height:g,numcomponents:p.charCodeAt(C+9)};break}m=256*p.charCodeAt(C+2)+p.charCodeAt(C+3)}return _}(t=this.__addimage__.isArrayBufferView(t)?this.__addimage__.arrayBufferToBinaryString(t):t),c.numcomponents){case 1:s=this.color_spaces.DEVICE_GRAY;break;case 4:s=this.color_spaces.DEVICE_CMYK;break;case 3:s=this.color_spaces.DEVICE_RGB}d={data:t,width:c.width,height:c.height,colorSpace:s,bitsPerComponent:8,filter:f,index:r,alias:i}}return d}}(Vt.API),Vt.API.processPNG=function(n,e,t,r){if(this.__addimage__.isArrayBuffer(n)&&(n=new Uint8Array(n)),this.__addimage__.isArrayBufferView(n)){var i,a=IG(n,{checkCrc:!0}),o=a.width,s=a.height,c=a.channels,f=a.palette,d=a.depth;i=f&&c===1?function(I){for(var T=I.width,j=I.height,N=I.data,R=I.palette,D=I.depth,L=!1,G=[],U=[],H=void 0,te=!1,se=0,ee=0;ee<R.length;ee++){var ie=y6(R[ee],4),$=ie[0],W=ie[1],Q=ie[2],J=ie[3];G.push($,W,Q),J!=null&&(J===0?(se++,U.length<1&&U.push(ee)):J<255&&(te=!0))}if(te||se>1){L=!0,U=void 0;var he=T*j;H=new Uint8Array(he);for(var be=new DataView(N.buffer),_e=0;_e<he;_e++){var Ie=Iy(be,_e,D),Oe=y6(R[Ie],4)[3];H[_e]=Oe}}else se===0&&(U=void 0);return{colorSpace:"Indexed",colorsPerPixel:1,sMaskBitsPerComponent:L?8:void 0,colorBytes:N,alphaBytes:H,needSMask:L,palette:G,mask:U}}(a):c===2||c===4?function(I){for(var T=I.data,j=I.width,N=I.height,R=I.channels,D=I.depth,L=R===2?"DeviceGray":"DeviceRGB",G=R-1,U=j*N,H=G,te=U*H,se=1*U,ee=Math.ceil(te*D/8),ie=Math.ceil(se*D/8),$=new Uint8Array(ee),W=new Uint8Array(ie),Q=new DataView(T.buffer),J=new DataView($.buffer),he=new DataView(W.buffer),be=!1,_e=0;_e<U;_e++){for(var Ie=_e*R,Oe=0;Oe<H;Oe++)AA(J,Iy(Q,Ie+Oe,D),_e*H+Oe,D);var Ve=Iy(Q,Ie+H,D);Ve<(1<<D)-1&&(be=!0),AA(he,Ve,1*_e,D)}return{colorSpace:L,colorsPerPixel:G,sMaskBitsPerComponent:be?D:void 0,colorBytes:$,alphaBytes:W,needSMask:be}}(a):function(I){var T=I.data,j=I.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:j,colorsPerPixel:j==="DeviceGray"?1:3,colorBytes:T instanceof Uint16Array?function(N){for(var R=N.length,D=new Uint8Array(2*R),L=new DataView(D.buffer,D.byteOffset,D.byteLength),G=0;G<R;G++)L.setUint16(2*G,N[G],!1);return D}(T):T,needSMask:!1}}(a);var p,g,m,x=i,_=x.colorSpace,C=x.colorsPerPixel,S=x.sMaskBitsPerComponent,k=x.colorBytes,M=x.alphaBytes,P=x.needSMask,Y=x.palette,z=x.mask,F=null;return r!==Vt.API.image_compression.NONE&&typeof Dx=="function"?(F=function(I){var T;switch(I){case Vt.API.image_compression.FAST:T=11;break;case Vt.API.image_compression.MEDIUM:T=13;break;case Vt.API.image_compression.SLOW:T=14;break;default:T=12}return T}(r),p=this.decode.FLATE_DECODE,g="/Predictor ".concat(F," /Colors ").concat(C," /BitsPerComponent ").concat(d," /Columns ").concat(o),n=yA(k,Math.ceil(o*C*d/8),C,d,r),P&&(m=yA(M,Math.ceil(o*S/8),1,S,r))):(p=void 0,g=void 0,n=k,P&&(m=M)),(this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n))&&(n=this.__addimage__.arrayBufferToBinaryString(n)),(m&&this.__addimage__.isArrayBuffer(m)||this.__addimage__.isArrayBufferView(m))&&(m=this.__addimage__.arrayBufferToBinaryString(m)),{alias:t,data:n,index:e,filter:p,decodeParameters:g,transparency:z,palette:Y,sMask:m,predictor:F,width:o,height:s,bitsPerComponent:d,sMaskBitsPerComponent:S,colorSpace:_}}},function(n){n.processGIF89A=function(e,t,r,i){var a=new YG(e),o=a.width,s=a.height,c=[];a.decodeAndBlitFrameRGBA(0,c);var f={data:c,width:o,height:s},d=new Ty(100).encode(f,100);return n.processJPEG.call(this,d,t,r,i)},n.processGIF87A=n.processGIF89A}(Vt.API),Al.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var n=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(n);for(var e=0;e<n;e++){var t=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:i,green:r,blue:t,quad:a}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Al.prototype.parseBGR=function(){this.pos=this.offset;try{var n="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[n]()}catch(t){Or.log("bit decode error:"+t)}},Al.prototype.bit1=function(){var n,e=Math.ceil(this.width/8),t=e%4;for(n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<e;i++)for(var a=this.datav.getUint8(this.pos++,!0),o=r*this.width*4+8*i*4,s=0;s<8&&8*i+s<this.width;s++){var c=this.palette[a>>7-s&1];this.data[o+4*s]=c.blue,this.data[o+4*s+1]=c.green,this.data[o+4*s+2]=c.red,this.data[o+4*s+3]=255}t!==0&&(this.pos+=4-t)}},Al.prototype.bit4=function(){for(var n=Math.ceil(this.width/2),e=n%4,t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,i=0;i<n;i++){var a=this.datav.getUint8(this.pos++,!0),o=r*this.width*4+2*i*4,s=a>>4,c=15&a,f=this.palette[s];if(this.data[o]=f.blue,this.data[o+1]=f.green,this.data[o+2]=f.red,this.data[o+3]=255,2*i+1>=this.width)break;f=this.palette[c],this.data[o+4]=f.blue,this.data[o+4+1]=f.green,this.data[o+4+2]=f.red,this.data[o+4+3]=255}e!==0&&(this.pos+=4-e)}},Al.prototype.bit8=function(){for(var n=this.width%4,e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var i=this.datav.getUint8(this.pos++,!0),a=t*this.width*4+4*r;if(i<this.palette.length){var o=this.palette[i];this.data[a]=o.red,this.data[a+1]=o.green,this.data[a+2]=o.blue,this.data[a+3]=255}else this.data[a]=255,this.data[a+1]=255,this.data[a+2]=255,this.data[a+3]=255}n!==0&&(this.pos+=4-n)}},Al.prototype.bit15=function(){for(var n=this.width%3,e=parseInt("11111",2),t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,i=0;i<this.width;i++){var a=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(a&e)/e*255|0,s=(a>>5&e)/e*255|0,c=(a>>10&e)/e*255|0,f=a>>15?255:0,d=r*this.width*4+4*i;this.data[d]=c,this.data[d+1]=s,this.data[d+2]=o,this.data[d+3]=f}this.pos+=n}},Al.prototype.bit16=function(){for(var n=this.width%3,e=parseInt("11111",2),t=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var i=this.bottom_up?r:this.height-1-r,a=0;a<this.width;a++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var s=(o&e)/e*255|0,c=(o>>5&t)/t*255|0,f=(o>>11)/e*255|0,d=i*this.width*4+4*a;this.data[d]=f,this.data[d+1]=c,this.data[d+2]=s,this.data[d+3]=255}this.pos+=n}},Al.prototype.bit24=function(){for(var n=this.height-1;n>=0;n--){for(var e=this.bottom_up?n:this.height-1-n,t=0;t<this.width;t++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),o=e*this.width*4+4*t;this.data[o]=a,this.data[o+1]=i,this.data[o+2]=r,this.data[o+3]=255}this.pos+=this.width%4}},Al.prototype.bit32=function(){for(var n=this.height-1;n>=0;n--)for(var e=this.bottom_up?n:this.height-1-n,t=0;t<this.width;t++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),s=e*this.width*4+4*t;this.data[s]=a,this.data[s+1]=i,this.data[s+2]=r,this.data[s+3]=o}},Al.prototype.getData=function(){return this.data},function(n){n.processBMP=function(e,t,r,i){var a=new Al(e,!1),o=a.width,s=a.height,c={data:a.getData(),width:o,height:s},f=new Ty(100).encode(c,100);return n.processJPEG.call(this,f,t,r,i)}}(Vt.API),EA.prototype.getData=function(){return this.data},function(n){n.processWEBP=function(e,t,r,i){var a=new EA(e),o=a.width,s=a.height,c={data:a.getData(),width:o,height:s},f=new Ty(100).encode(c,100);return n.processJPEG.call(this,f,t,r,i)}}(Vt.API),Vt.API.processRGBA=function(n,e,t){for(var r=n.data,i=r.length,a=new Uint8Array(i/4*3),o=new Uint8Array(i/4),s=0,c=0,f=0;f<i;f+=4){var d=r[f],p=r[f+1],g=r[f+2],m=r[f+3];a[s++]=d,a[s++]=p,a[s++]=g,o[c++]=m}var x=this.__addimage__.arrayBufferToBinaryString(a);return{alpha:this.__addimage__.arrayBufferToBinaryString(o),data:x,index:e,alias:t,colorSpace:"DeviceRGB",bitsPerComponent:8,width:n.width,height:n.height}},Vt.API.setLanguage=function(n){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[n]!==void 0&&(this.internal.languageSettings.languageCode=n,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},sh=Vt.API,yg=sh.getCharWidthsArray=function(n,e){var t,r,i=(e=e||{}).font||this.internal.getFont(),a=e.fontSize||this.internal.getFontSize(),o=e.charSpace||this.internal.getCharSpace(),s=e.widths?e.widths:i.metadata.Unicode.widths,c=s.fof?s.fof:1,f=e.kerning?e.kerning:i.metadata.Unicode.kerning,d=f.fof?f.fof:1,p=e.doKerning!==!1,g=0,m=n.length,x=0,_=s[0]||c,C=[];for(t=0;t<m;t++)r=n.charCodeAt(t),typeof i.metadata.widthOfString=="function"?C.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(r))+o*(1e3/a)||0)/1e3):(g=p&&br(f[r])==="object"&&!isNaN(parseInt(f[r][x],10))?f[r][x]/d:0,C.push((s[r]||_)/c+g)),x=r;return C},gA=sh.getStringUnitWidth=function(n,e){var t=(e=e||{}).fontSize||this.internal.getFontSize(),r=e.font||this.internal.getFont(),i=e.charSpace||this.internal.getCharSpace();return sh.processArabic&&(n=sh.processArabic(n)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(n,t,i)/t:yg.apply(this,arguments).reduce(function(a,o){return a+o},0)},mA=function(n,e,t,r){for(var i=[],a=0,o=n.length,s=0;a!==o&&s+e[a]<t;)s+=e[a],a++;i.push(n.slice(0,a));var c=a;for(s=0;a!==o;)s+e[a]>r&&(i.push(n.slice(c,a)),s=0,c=a),s+=e[a],a++;return c!==a&&i.push(n.slice(c,a)),i},vA=function(n,e,t){t||(t={});var r,i,a,o,s,c,f,d=[],p=[d],g=t.textIndent||0,m=0,x=0,_=n.split(" "),C=yg.apply(this,[" ",t])[0];if(c=t.lineIndent===-1?_[0].length+2:t.lineIndent||0){var S=Array(c).join(" "),k=[];_.map(function(P){(P=P.split(/\s*\n/)).length>1?k=k.concat(P.map(function(Y,z){return(z&&Y.length?`
`:"")+Y})):k.push(P[0])}),_=k,c=gA.apply(this,[S,t])}for(a=0,o=_.length;a<o;a++){var M=0;if(r=_[a],c&&r[0]==`
`&&(r=r.substr(1),M=1),g+m+(x=(i=yg.apply(this,[r,t])).reduce(function(P,Y){return P+Y},0))>e||M){if(x>e){for(s=mA.apply(this,[r,i,e-(g+m),e]),d.push(s.shift()),d=[s.pop()];s.length;)p.push([s.shift()]);x=i.slice(r.length-(d[0]?d[0].length:0)).reduce(function(P,Y){return P+Y},0)}else d=[r];p.push(d),g=x+c,m=C}else d.push(r),g+=m+x,m=C}return f=c?function(P,Y){return(Y?S:"")+P.join(" ")}:function(P){return P.join(" ")},p.map(f)},sh.splitTextToSize=function(n,e,t){var r,i=(t=t||{}).fontSize||this.internal.getFontSize(),a=(function(d){if(d.widths&&d.kerning)return{widths:d.widths,kerning:d.kerning};var p=this.internal.getFont(d.fontName,d.fontStyle),g="Unicode";return p.metadata[g]?{widths:p.metadata[g].widths||{0:1},kerning:p.metadata[g].kerning||{}}:{font:p.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,t);r=Array.isArray(n)?n:String(n).split(/\r?\n/);var o=1*this.internal.scaleFactor*e/i;a.textIndent=t.textIndent?1*t.textIndent*this.internal.scaleFactor/i:0,a.lineIndent=t.lineIndent;var s,c,f=[];for(s=0,c=r.length;s<c;s++)f=f.concat(vA.apply(this,[r[s],o,a]));return f},function(n){n.__fontmetrics__=n.__fontmetrics__||{};for(var e="0123456789abcdef",t="klmnopqrstuvwxyz",r={},i={},a=0;a<16;a++)r[t[a]]=e[a],i[e[a]]=t[a];var o=function(g){return"0x"+parseInt(g,10).toString(16)},s=n.__fontmetrics__.compress=function(g){var m,x,_,C,S=["{"];for(var k in g){if(m=g[k],isNaN(parseInt(k,10))?x="'"+k+"'":(k=parseInt(k,10),x=(x=o(k).slice(2)).slice(0,-1)+i[x.slice(-1)]),typeof m=="number")m<0?(_=o(m).slice(3),C="-"):(_=o(m).slice(2),C=""),_=C+_.slice(0,-1)+i[_.slice(-1)];else{if(br(m)!=="object")throw new Error("Don't know what to do with value type "+br(m)+".");_=s(m)}S.push(x+_)}return S.push("}"),S.join("")},c=n.__fontmetrics__.uncompress=function(g){if(typeof g!="string")throw new Error("Invalid argument passed to uncompress.");for(var m,x,_,C,S={},k=1,M=S,P=[],Y="",z="",F=g.length-1,I=1;I<F;I+=1)(C=g[I])=="'"?m?(_=m.join(""),m=void 0):m=[]:m?m.push(C):C=="{"?(P.push([M,_]),M={},_=void 0):C=="}"?((x=P.pop())[0][x[1]]=M,_=void 0,M=x[0]):C=="-"?k=-1:_===void 0?r.hasOwnProperty(C)?(Y+=r[C],_=parseInt(Y,16)*k,k=1,Y=""):Y+=C:r.hasOwnProperty(C)?(z+=r[C],M[_]=parseInt(z,16)*k,k=1,_=void 0,z=""):z+=C;return S},f={codePages:["WinAnsiEncoding"],WinAnsiEncoding:c("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},d={Unicode:{Courier:f,"Courier-Bold":f,"Courier-BoldOblique":f,"Courier-Oblique":f,Helvetica:f,"Helvetica-Bold":f,"Helvetica-BoldOblique":f,"Helvetica-Oblique":f,"Times-Roman":f,"Times-Bold":f,"Times-BoldItalic":f,"Times-Italic":f}},p={Unicode:{"Courier-Oblique":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":c("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":c("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":c("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:c("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:c("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":c("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:c("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":c("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":c("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":c("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};n.events.push(["addFont",function(g){var m=g.font,x=p.Unicode[m.postScriptName];x&&(m.metadata.Unicode={},m.metadata.Unicode.widths=x.widths,m.metadata.Unicode.kerning=x.kerning);var _=d.Unicode[m.postScriptName];_&&(m.metadata.Unicode.encoding=_,m.encoding=_.codePages[0])}])}(Vt.API),function(n){var e=function(t){for(var r=t.length,i=new Uint8Array(r),a=0;a<r;a++)i[a]=t.charCodeAt(a);return i};n.API.events.push(["addFont",function(t){var r=void 0,i=t.font,a=t.instance;if(!i.isStandardFont){if(a===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if(typeof(r=a.existsFileInVFS(i.postScriptName)===!1?a.loadFile(i.postScriptName):a.getFileFromVFS(i.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");(function(o,s){s=/^\x00\x01\x00\x00/.test(s)?e(s):e(Mg(s)),o.metadata=n.API.TTFFont.open(s),o.metadata.Unicode=o.metadata.Unicode||{encoding:{},kerning:{},widths:[]},o.metadata.glyIdsUsed=[0]})(i,r)}}])}(Vt),Vt.API.addSvgAsImage=function(n,e,t,r,i,a,o,s){if(isNaN(e)||isNaN(t))throw Or.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(r)||isNaN(i))throw Or.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var c=document.createElement("canvas");c.width=r,c.height=i;var f=c.getContext("2d");f.fillStyle="#fff",f.fillRect(0,0,c.width,c.height);var d={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},p=this;return(cn.canvg?Promise.resolve(cn.canvg):sy(()=>import("./index.es-DOKm4za9.js"),[])).catch(function(g){return Promise.reject(new Error("Could not load canvg: "+g))}).then(function(g){return g.default?g.default:g}).then(function(g){return g.fromString(f,n,d)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(g){return g.render(d)}).then(function(){p.addImage(c.toDataURL("image/jpeg",1),e,t,r,i,o,s)})},Vt.API.putTotalPages=function(n){var e,t=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(n,"g"),t=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(n,this.internal.getFont()),"g"),t=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var i=0;i<this.internal.pages[r].length;i++)this.internal.pages[r][i]=this.internal.pages[r][i].replace(e,t);return this},Vt.API.viewerPreferences=function(n,e){var t;n=n||{},e=e||!1;var r,i,a,o={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},s=Object.keys(o),c=[],f=0,d=0,p=0;function g(x,_){var C,S=!1;for(C=0;C<x.length;C+=1)x[C]===_&&(S=!0);return S}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(o)),this.internal.viewerpreferences.isSubscribed=!1),t=this.internal.viewerpreferences.configuration,n==="reset"||e===!0){var m=s.length;for(p=0;p<m;p+=1)t[s[p]].value=t[s[p]].defaultValue,t[s[p]].explicitSet=!1}if(br(n)==="object"){for(i in n)if(a=n[i],g(s,i)&&a!==void 0){if(t[i].type==="boolean"&&typeof a=="boolean")t[i].value=a;else if(t[i].type==="name"&&g(t[i].valueSet,a))t[i].value=a;else if(t[i].type==="integer"&&Number.isInteger(a))t[i].value=a;else if(t[i].type==="array"){for(f=0;f<a.length;f+=1)if(r=!0,a[f].length===1&&typeof a[f][0]=="number")c.push(String(a[f]-1));else if(a[f].length>1){for(d=0;d<a[f].length;d+=1)typeof a[f][d]!="number"&&(r=!1);r===!0&&c.push([a[f][0]-1,a[f][1]-1].join(" "))}t[i].value="["+c.join(" ")+"]"}else t[i].value=t[i].defaultValue;t[i].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var x,_=[];for(x in t)t[x].explicitSet===!0&&(t[x].type==="name"?_.push("/"+x+" /"+t[x].value):_.push("/"+x+" "+t[x].value));_.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+_.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=t,this},function(n){var e=function(){var r='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',i=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),a=unescape(encodeURIComponent(r)),o=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),s=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),c=unescape(encodeURIComponent("</x:xmpmeta>")),f=a.length+o.length+s.length+i.length+c.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+f+" >>"),this.internal.write("stream"),this.internal.write(i+a+o+s+c),this.internal.write("endstream"),this.internal.write("endobj")},t=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};n.addMetadata=function(r,i){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:r,namespaceuri:i||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",t),this.internal.events.subscribe("postPutResources",e)),this}}(Vt.API),function(n){var e=n.API,t=e.pdfEscape16=function(a,o){for(var s,c=o.metadata.Unicode.widths,f=["","0","00","000","0000"],d=[""],p=0,g=a.length;p<g;++p){if(s=o.metadata.characterToGlyph(a.charCodeAt(p)),o.metadata.glyIdsUsed.push(s),o.metadata.toUnicode[s]=a.charCodeAt(p),c.indexOf(s)==-1&&(c.push(s),c.push([parseInt(o.metadata.widthOfGlyph(s),10)])),s=="0")return d.join("");s=s.toString(16),d.push(f[4-s.length],s)}return d.join("")},r=function(a){var o,s,c,f,d,p,g;for(d=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,c=[],p=0,g=(s=Object.keys(a).sort(function(m,x){return m-x})).length;p<g;p++)o=s[p],c.length>=100&&(d+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar`,c=[]),a[o]!==void 0&&a[o]!==null&&typeof a[o].toString=="function"&&(f=("0000"+a[o].toString(16)).slice(-4),o=("0000"+(+o).toString(16)).slice(-4),c.push("<"+o+"><"+f+">"));return c.length&&(d+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar
`),d+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(a){(function(o){var s=o.font,c=o.out,f=o.newObject,d=o.putStream;if(s.metadata instanceof n.API.TTFFont&&s.encoding==="Identity-H"){for(var p=s.metadata.Unicode.widths,g=s.metadata.subset.encode(s.metadata.glyIdsUsed,1),m="",x=0;x<g.length;x++)m+=String.fromCharCode(g[x]);var _=f();d({data:m,addLength1:!0,objectId:_}),c("endobj");var C=f();d({data:r(s.metadata.toUnicode),addLength1:!0,objectId:C}),c("endobj");var S=f();c("<<"),c("/Type /FontDescriptor"),c("/FontName /"+hh(s.fontName)),c("/FontFile2 "+_+" 0 R"),c("/FontBBox "+n.API.PDFObject.convert(s.metadata.bbox)),c("/Flags "+s.metadata.flags),c("/StemV "+s.metadata.stemV),c("/ItalicAngle "+s.metadata.italicAngle),c("/Ascent "+s.metadata.ascender),c("/Descent "+s.metadata.decender),c("/CapHeight "+s.metadata.capHeight),c(">>"),c("endobj");var k=f();c("<<"),c("/Type /Font"),c("/BaseFont /"+hh(s.fontName)),c("/FontDescriptor "+S+" 0 R"),c("/W "+n.API.PDFObject.convert(p)),c("/CIDToGIDMap /Identity"),c("/DW 1000"),c("/Subtype /CIDFontType2"),c("/CIDSystemInfo"),c("<<"),c("/Supplement 0"),c("/Registry (Adobe)"),c("/Ordering ("+s.encoding+")"),c(">>"),c(">>"),c("endobj"),s.objectNumber=f(),c("<<"),c("/Type /Font"),c("/Subtype /Type0"),c("/ToUnicode "+C+" 0 R"),c("/BaseFont /"+hh(s.fontName)),c("/Encoding /"+s.encoding),c("/DescendantFonts ["+k+" 0 R]"),c(">>"),c("endobj"),s.isAlreadyPutted=!0}})(a)}]),e.events.push(["putFont",function(a){(function(o){var s=o.font,c=o.out,f=o.newObject,d=o.putStream;if(s.metadata instanceof n.API.TTFFont&&s.encoding==="WinAnsiEncoding"){for(var p=s.metadata.rawData,g="",m=0;m<p.length;m++)g+=String.fromCharCode(p[m]);var x=f();d({data:g,addLength1:!0,objectId:x}),c("endobj");var _=f();d({data:r(s.metadata.toUnicode),addLength1:!0,objectId:_}),c("endobj");var C=f();c("<<"),c("/Descent "+s.metadata.decender),c("/CapHeight "+s.metadata.capHeight),c("/StemV "+s.metadata.stemV),c("/Type /FontDescriptor"),c("/FontFile2 "+x+" 0 R"),c("/Flags 96"),c("/FontBBox "+n.API.PDFObject.convert(s.metadata.bbox)),c("/FontName /"+hh(s.fontName)),c("/ItalicAngle "+s.metadata.italicAngle),c("/Ascent "+s.metadata.ascender),c(">>"),c("endobj"),s.objectNumber=f();for(var S=0;S<s.metadata.hmtx.widths.length;S++)s.metadata.hmtx.widths[S]=parseInt(s.metadata.hmtx.widths[S]*(1e3/s.metadata.head.unitsPerEm));c("<</Subtype/TrueType/Type/Font/ToUnicode "+_+" 0 R/BaseFont/"+hh(s.fontName)+"/FontDescriptor "+C+" 0 R/Encoding/"+s.encoding+" /FirstChar 29 /LastChar 255 /Widths "+n.API.PDFObject.convert(s.metadata.hmtx.widths)+">>"),c("endobj"),s.isAlreadyPutted=!0}})(a)}]);var i=function(a){var o,s=a.text||"",c=a.x,f=a.y,d=a.options||{},p=a.mutex||{},g=p.pdfEscape,m=p.activeFontKey,x=p.fonts,_=m,C="",S=0,k="",M=x[_].encoding;if(x[_].encoding!=="Identity-H")return{text:s,x:c,y:f,options:d,mutex:p};for(k=s,_=m,Array.isArray(s)&&(k=s[0]),S=0;S<k.length;S+=1)x[_].metadata.hasOwnProperty("cmap")&&(o=x[_].metadata.cmap.unicode.codeMap[k[S].charCodeAt(0)]),o||k[S].charCodeAt(0)<256&&x[_].metadata.hasOwnProperty("Unicode")?C+=k[S]:C+="";var P="";return parseInt(_.slice(1))<14||M==="WinAnsiEncoding"?P=g(C,_).split("").map(function(Y){return Y.charCodeAt(0).toString(16)}).join(""):M==="Identity-H"&&(P=t(C,x[_])),p.isHex=!0,{text:P,x:c,y:f,options:d,mutex:p}};e.events.push(["postProcessText",function(a){var o=a.text||"",s=[],c={text:o,x:a.x,y:a.y,options:a.options,mutex:a.mutex};if(Array.isArray(o)){var f=0;for(f=0;f<o.length;f+=1)Array.isArray(o[f])&&o[f].length===3?s.push([i(Object.assign({},c,{text:o[f][0]})).text,o[f][1],o[f][2]]):s.push(i(Object.assign({},c,{text:o[f]})).text);a.text=s}else a.text=i(Object.assign({},c,{text:o})).text}])}(Vt),function(n){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};n.existsFileInVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0},n.addFileToVFS=function(t,r){return e.call(this),this.internal.vFS[t]=r,this},n.getFileFromVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0?this.internal.vFS[t]:null}}(Vt.API),function(n){n.__bidiEngine__=n.prototype.__bidiEngine__=function(r){var i,a,o,s,c,f,d,p=e,g=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],m=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],x={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},_={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},C=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],S=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),k=!1,M=0;this.__bidiEngine__={};var P=function(N){var R=N.charCodeAt(),D=R>>8,L=_[D];return L!==void 0?p[256*L+(255&R)]:D===252||D===253?"AL":S.test(D)?"L":D===8?"R":"N"},Y=function(N){for(var R,D=0;D<N.length;D++){if((R=P(N.charAt(D)))==="L")return!1;if(R==="R")return!0}return!1},z=function(N,R,D,L){var G,U,H,te,se=R[L];switch(se){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":k=!1;break;case"N":case"AN":break;case"EN":k&&(se="AN");break;case"AL":k=!0,se="R";break;case"WS":case"BN":se="N";break;case"CS":L<1||L+1>=R.length||(G=D[L-1])!=="EN"&&G!=="AN"||(U=R[L+1])!=="EN"&&U!=="AN"?se="N":k&&(U="AN"),se=U===G?U:"N";break;case"ES":se=(G=L>0?D[L-1]:"B")==="EN"&&L+1<R.length&&R[L+1]==="EN"?"EN":"N";break;case"ET":if(L>0&&D[L-1]==="EN"){se="EN";break}if(k){se="N";break}for(H=L+1,te=R.length;H<te&&R[H]==="ET";)H++;se=H<te&&R[H]==="EN"?"EN":"N";break;case"NSM":if(o&&!s){for(te=R.length,H=L+1;H<te&&R[H]==="NSM";)H++;if(H<te){var ee=N[L],ie=ee>=1425&&ee<=2303||ee===64286;if(G=R[H],ie&&(G==="R"||G==="AL")){se="R";break}}}se=L<1||(G=R[L-1])==="B"?"N":D[L-1];break;case"B":k=!1,i=!0,se=M;break;case"S":a=!0,se="N"}return se},F=function(N,R,D){var L=N.split("");return D&&I(L,D,{hiLevel:M}),L.reverse(),R&&R.reverse(),L.join("")},I=function(N,R,D){var L,G,U,H,te,se=-1,ee=N.length,ie=0,$=[],W=M?m:g,Q=[];for(k=!1,i=!1,a=!1,G=0;G<ee;G++)Q[G]=P(N[G]);for(U=0;U<ee;U++){if(te=ie,$[U]=z(N,Q,$,U),L=240&(ie=W[te][x[$[U]]]),ie&=15,R[U]=H=W[ie][5],L>0)if(L===16){for(G=se;G<U;G++)R[G]=1;se=-1}else se=-1;if(W[ie][6])se===-1&&(se=U);else if(se>-1){for(G=se;G<U;G++)R[G]=H;se=-1}Q[U]==="B"&&(R[U]=0),D.hiLevel|=H}a&&function(J,he,be){for(var _e=0;_e<be;_e++)if(J[_e]==="S"){he[_e]=M;for(var Ie=_e-1;Ie>=0&&J[Ie]==="WS";Ie--)he[Ie]=M}}(Q,R,ee)},T=function(N,R,D,L,G){if(!(G.hiLevel<N)){if(N===1&&M===1&&!i)return R.reverse(),void(D&&D.reverse());for(var U,H,te,se,ee=R.length,ie=0;ie<ee;){if(L[ie]>=N){for(te=ie+1;te<ee&&L[te]>=N;)te++;for(se=ie,H=te-1;se<H;se++,H--)U=R[se],R[se]=R[H],R[H]=U,D&&(U=D[se],D[se]=D[H],D[H]=U);ie=te}ie++}}},j=function(N,R,D){var L=N.split(""),G={hiLevel:M};return D||(D=[]),I(L,D,G),function(U,H,te){if(te.hiLevel!==0&&d)for(var se,ee=0;ee<U.length;ee++)H[ee]===1&&(se=C.indexOf(U[ee]))>=0&&(U[ee]=C[se+1])}(L,D,G),T(2,L,R,D,G),T(1,L,R,D,G),L.join("")};return this.__bidiEngine__.doBidiReorder=function(N,R,D){if(function(G,U){if(U)for(var H=0;H<G.length;H++)U[H]=H;s===void 0&&(s=Y(G)),f===void 0&&(f=Y(G))}(N,R),o||!c||f)if(o&&c&&s^f)M=s?1:0,N=F(N,R,D);else if(!o&&c&&f)M=s?1:0,N=j(N,R,D),N=F(N,R);else if(!o||s||c||f){if(o&&!c&&s^f)N=F(N,R),s?(M=0,N=j(N,R,D)):(M=1,N=j(N,R,D),N=F(N,R));else if(o&&s&&!c&&f)M=1,N=j(N,R,D),N=F(N,R);else if(!o&&!c&&s^f){var L=d;s?(M=1,N=j(N,R,D),M=0,d=!1,N=j(N,R,D),d=L):(M=0,N=j(N,R,D),N=F(N,R),M=1,d=!1,N=j(N,R,D),d=L,N=F(N,R))}}else M=0,N=j(N,R,D);else M=s?1:0,N=j(N,R,D);return N},this.__bidiEngine__.setOptions=function(N){N&&(o=N.isInputVisual,c=N.isOutputVisual,s=N.isInputRtl,f=N.isOutputRtl,d=N.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],t=new n.__bidiEngine__({isInputVisual:!0});n.API.events.push(["postProcessText",function(r){var i=r.text;r.x,r.y;var a=r.options||{};r.mutex,a.lang;var o=[];if(a.isInputVisual=typeof a.isInputVisual!="boolean"||a.isInputVisual,t.setOptions(a),Object.prototype.toString.call(i)==="[object Array]"){var s=0;for(o=[],s=0;s<i.length;s+=1)Object.prototype.toString.call(i[s])==="[object Array]"?o.push([t.doBidiReorder(i[s][0]),i[s][1],i[s][2]]):o.push([t.doBidiReorder(i[s])]);r.text=o}else r.text=t.doBidiReorder(i);t.setOptions({isInputVisual:!0})}])}(Vt),Vt.API.TTFFont=function(){function n(e){var t;if(this.rawData=e,t=this.contents=new bf(e),this.contents.pos=4,t.readString(4)==="ttcf")throw new Error("TTCF not supported.");t.pos=0,this.parse(),this.subset=new cY(this),this.registerTTF()}return n.open=function(e){return new n(e)},n.prototype.parse=function(){return this.directory=new XG(this.contents),this.head=new QG(this),this.name=new nY(this),this.cmap=new HI(this),this.toUnicode={},this.hhea=new ZG(this),this.maxp=new rY(this),this.hmtx=new iY(this),this.post=new eY(this),this.os2=new JG(this),this.loca=new lY(this),this.glyf=new aY(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},n.prototype.registerTTF=function(){var e,t,r,i,a;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var o,s,c,f;for(f=[],o=0,s=(c=this.bbox).length;o<s;o++)e=c[o],f.push(Math.round(e*this.scaleFactor));return f}).call(this),this.stemV=0,this.post.exists?(r=255&(i=this.post.italic_angle),32768&(t=i>>16)&&(t=-(1+(65535^t))),this.italicAngle=+(t+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(a=this.familyClass)===1||a===2||a===3||a===4||a===5||a===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},n.prototype.characterToGlyph=function(e){var t;return((t=this.cmap.unicode)!=null?t.codeMap[e]:void 0)||0},n.prototype.widthOfGlyph=function(e){var t;return t=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*t},n.prototype.widthOfString=function(e,t,r){var i,a,o,s;for(o=0,a=0,s=(e=""+e).length;0<=s?a<s:a>s;a=0<=s?++a:--a)i=e.charCodeAt(a),o+=this.widthOfGlyph(this.characterToGlyph(i))+r*(1e3/t)||0;return o*(t/1e3)},n.prototype.lineHeight=function(e,t){var r;return t==null&&(t=!1),r=t?this.lineGap:0,(this.ascender+r-this.decender)/1e3*e},n}();var Ml,bf=function(){function n(e){this.data=e??[],this.pos=0,this.length=this.data.length}return n.prototype.readByte=function(){return this.data[this.pos++]},n.prototype.writeByte=function(e){return this.data[this.pos++]=e},n.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},n.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},n.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},n.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},n.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},n.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},n.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},n.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},n.prototype.readString=function(e){var t,r;for(r=[],t=0;0<=e?t<e:t>e;t=0<=e?++t:--t)r[t]=String.fromCharCode(this.readByte());return r.join("")},n.prototype.writeString=function(e){var t,r,i;for(i=[],t=0,r=e.length;0<=r?t<r:t>r;t=0<=r?++t:--t)i.push(this.writeByte(e.charCodeAt(t)));return i},n.prototype.readShort=function(){return this.readInt16()},n.prototype.writeShort=function(e){return this.writeInt16(e)},n.prototype.readLongLong=function(){var e,t,r,i,a,o,s,c;return e=this.readByte(),t=this.readByte(),r=this.readByte(),i=this.readByte(),a=this.readByte(),o=this.readByte(),s=this.readByte(),c=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^t)+1099511627776*(255^r)+4294967296*(255^i)+16777216*(255^a)+65536*(255^o)+256*(255^s)+(255^c)+1):72057594037927940*e+281474976710656*t+1099511627776*r+4294967296*i+16777216*a+65536*o+256*s+c},n.prototype.writeLongLong=function(e){var t,r;return t=Math.floor(e/4294967296),r=4294967295&e,this.writeByte(t>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},n.prototype.readInt=function(){return this.readInt32()},n.prototype.writeInt=function(e){return this.writeInt32(e)},n.prototype.read=function(e){var t,r;for(t=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)t.push(this.readByte());return t},n.prototype.write=function(e){var t,r,i,a;for(a=[],r=0,i=e.length;r<i;r++)t=e[r],a.push(this.writeByte(t));return a},n}(),XG=function(){var n;function e(t){var r,i,a;for(this.scalarType=t.readInt(),this.tableCount=t.readShort(),this.searchRange=t.readShort(),this.entrySelector=t.readShort(),this.rangeShift=t.readShort(),this.tables={},i=0,a=this.tableCount;0<=a?i<a:i>a;i=0<=a?++i:--i)r={tag:t.readString(4),checksum:t.readInt(),offset:t.readInt(),length:t.readInt()},this.tables[r.tag]=r}return e.prototype.encode=function(t){var r,i,a,o,s,c,f,d,p,g,m,x,_;for(_ in m=Object.keys(t).length,c=Math.log(2),p=16*Math.floor(Math.log(m)/c),o=Math.floor(p/c),d=16*m-p,(i=new bf).writeInt(this.scalarType),i.writeShort(m),i.writeShort(p),i.writeShort(o),i.writeShort(d),a=16*m,f=i.pos+a,s=null,x=[],t)for(g=t[_],i.writeString(_),i.writeInt(n(g)),i.writeInt(f),i.writeInt(g.length),x=x.concat(g),_==="head"&&(s=f),f+=g.length;f%4;)x.push(0),f++;return i.write(x),r=2981146554-n(i.data),i.pos=s+8,i.writeUInt32(r),i.data},n=function(t){var r,i,a,o;for(t=WI.call(t);t.length%4;)t.push(0);for(a=new bf(t),i=0,r=0,o=t.length;r<o;r=r+=4)i+=a.readUInt32();return 4294967295&i},e}(),KG={}.hasOwnProperty,gc=function(n,e){for(var t in e)KG.call(e,t)&&(n[t]=e[t]);function r(){this.constructor=n}return r.prototype=e.prototype,n.prototype=new r,n.__super__=e.prototype,n};Ml=function(){function n(e){var t;this.file=e,t=this.file.directory.tables[this.tag],this.exists=!!t,t&&(this.offset=t.offset,this.length=t.length,this.parse(this.file.contents))}return n.prototype.parse=function(){},n.prototype.encode=function(){},n.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},n}();var QG=function(){function n(){return n.__super__.constructor.apply(this,arguments)}return gc(n,Ml),n.prototype.tag="head",n.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.revision=e.readInt(),this.checkSumAdjustment=e.readInt(),this.magicNumber=e.readInt(),this.flags=e.readShort(),this.unitsPerEm=e.readShort(),this.created=e.readLongLong(),this.modified=e.readLongLong(),this.xMin=e.readShort(),this.yMin=e.readShort(),this.xMax=e.readShort(),this.yMax=e.readShort(),this.macStyle=e.readShort(),this.lowestRecPPEM=e.readShort(),this.fontDirectionHint=e.readShort(),this.indexToLocFormat=e.readShort(),this.glyphDataFormat=e.readShort()},n.prototype.encode=function(e){var t;return(t=new bf).writeInt(this.version),t.writeInt(this.revision),t.writeInt(this.checkSumAdjustment),t.writeInt(this.magicNumber),t.writeShort(this.flags),t.writeShort(this.unitsPerEm),t.writeLongLong(this.created),t.writeLongLong(this.modified),t.writeShort(this.xMin),t.writeShort(this.yMin),t.writeShort(this.xMax),t.writeShort(this.yMax),t.writeShort(this.macStyle),t.writeShort(this.lowestRecPPEM),t.writeShort(this.fontDirectionHint),t.writeShort(e),t.writeShort(this.glyphDataFormat),t.data},n}(),CA=function(){function n(e,t){var r,i,a,o,s,c,f,d,p,g,m,x,_,C,S,k,M;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=t+e.readInt(),p=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(c=0;c<256;++c)this.codeMap[c]=e.readByte();break;case 4:for(m=e.readUInt16(),g=m/2,e.pos+=6,a=function(){var P,Y;for(Y=[],c=P=0;0<=g?P<g:P>g;c=0<=g?++P:--P)Y.push(e.readUInt16());return Y}(),e.pos+=2,_=function(){var P,Y;for(Y=[],c=P=0;0<=g?P<g:P>g;c=0<=g?++P:--P)Y.push(e.readUInt16());return Y}(),f=function(){var P,Y;for(Y=[],c=P=0;0<=g?P<g:P>g;c=0<=g?++P:--P)Y.push(e.readUInt16());return Y}(),d=function(){var P,Y;for(Y=[],c=P=0;0<=g?P<g:P>g;c=0<=g?++P:--P)Y.push(e.readUInt16());return Y}(),i=(this.length-e.pos+this.offset)/2,s=function(){var P,Y;for(Y=[],c=P=0;0<=i?P<i:P>i;c=0<=i?++P:--P)Y.push(e.readUInt16());return Y}(),c=S=0,M=a.length;S<M;c=++S)for(C=a[c],r=k=x=_[c];x<=C?k<=C:k>=C;r=x<=C?++k:--k)d[c]===0?o=r+f[c]:(o=s[d[c]/2+(r-x)-(g-c)]||0)!==0&&(o+=f[c]),this.codeMap[r]=65535&o}e.pos=p}return n.encode=function(e,t){var r,i,a,o,s,c,f,d,p,g,m,x,_,C,S,k,M,P,Y,z,F,I,T,j,N,R,D,L,G,U,H,te,se,ee,ie,$,W,Q,J,he,be,_e,Ie,Oe,Ve,nt;switch(L=new bf,o=Object.keys(e).sort(function(ot,ft){return ot-ft}),t){case"macroman":for(_=0,C=function(){var ot=[];for(x=0;x<256;++x)ot.push(0);return ot}(),k={0:0},a={},G=0,se=o.length;G<se;G++)k[Ie=e[i=o[G]]]==null&&(k[Ie]=++_),a[i]={old:e[i],new:k[e[i]]},C[i]=k[e[i]];return L.writeUInt16(1),L.writeUInt16(0),L.writeUInt32(12),L.writeUInt16(0),L.writeUInt16(262),L.writeUInt16(0),L.write(C),{charMap:a,subtable:L.data,maxGlyphID:_+1};case"unicode":for(R=[],p=[],M=0,k={},r={},S=f=null,U=0,ee=o.length;U<ee;U++)k[Y=e[i=o[U]]]==null&&(k[Y]=++M),r[i]={old:Y,new:k[Y]},s=k[Y]-i,S!=null&&s===f||(S&&p.push(S),R.push(i),f=s),S=i;for(S&&p.push(S),p.push(65535),R.push(65535),j=2*(T=R.length),I=2*Math.pow(Math.log(T)/Math.LN2,2),g=Math.log(I/2)/Math.LN2,F=2*T-I,c=[],z=[],m=[],x=H=0,ie=R.length;H<ie;x=++H){if(N=R[x],d=p[x],N===65535){c.push(0),z.push(0);break}if(N-(D=r[N].new)>=32768)for(c.push(0),z.push(2*(m.length+T-x)),i=te=N;N<=d?te<=d:te>=d;i=N<=d?++te:--te)m.push(r[i].new);else c.push(D-N),z.push(0)}for(L.writeUInt16(3),L.writeUInt16(1),L.writeUInt32(12),L.writeUInt16(4),L.writeUInt16(16+8*T+2*m.length),L.writeUInt16(0),L.writeUInt16(j),L.writeUInt16(I),L.writeUInt16(g),L.writeUInt16(F),be=0,$=p.length;be<$;be++)i=p[be],L.writeUInt16(i);for(L.writeUInt16(0),_e=0,W=R.length;_e<W;_e++)i=R[_e],L.writeUInt16(i);for(Oe=0,Q=c.length;Oe<Q;Oe++)s=c[Oe],L.writeUInt16(s);for(Ve=0,J=z.length;Ve<J;Ve++)P=z[Ve],L.writeUInt16(P);for(nt=0,he=m.length;nt<he;nt++)_=m[nt],L.writeUInt16(_);return{charMap:r,subtable:L.data,maxGlyphID:M+1}}},n}(),HI=function(){function n(){return n.__super__.constructor.apply(this,arguments)}return gc(n,Ml),n.prototype.tag="cmap",n.prototype.parse=function(e){var t,r,i;for(e.pos=this.offset,this.version=e.readUInt16(),i=e.readUInt16(),this.tables=[],this.unicode=null,r=0;0<=i?r<i:r>i;r=0<=i?++r:--r)t=new CA(e,this.offset),this.tables.push(t),t.isUnicode&&this.unicode==null&&(this.unicode=t);return!0},n.encode=function(e,t){var r,i;return t==null&&(t="macroman"),r=CA.encode(e,t),(i=new bf).writeUInt16(0),i.writeUInt16(1),r.table=i.data.concat(r.subtable),r},n}(),ZG=function(){function n(){return n.__super__.constructor.apply(this,arguments)}return gc(n,Ml),n.prototype.tag="hhea",n.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.ascender=e.readShort(),this.decender=e.readShort(),this.lineGap=e.readShort(),this.advanceWidthMax=e.readShort(),this.minLeftSideBearing=e.readShort(),this.minRightSideBearing=e.readShort(),this.xMaxExtent=e.readShort(),this.caretSlopeRise=e.readShort(),this.caretSlopeRun=e.readShort(),this.caretOffset=e.readShort(),e.pos+=8,this.metricDataFormat=e.readShort(),this.numberOfMetrics=e.readUInt16()},n}(),JG=function(){function n(){return n.__super__.constructor.apply(this,arguments)}return gc(n,Ml),n.prototype.tag="OS/2",n.prototype.parse=function(e){if(e.pos=this.offset,this.version=e.readUInt16(),this.averageCharWidth=e.readShort(),this.weightClass=e.readUInt16(),this.widthClass=e.readUInt16(),this.type=e.readShort(),this.ySubscriptXSize=e.readShort(),this.ySubscriptYSize=e.readShort(),this.ySubscriptXOffset=e.readShort(),this.ySubscriptYOffset=e.readShort(),this.ySuperscriptXSize=e.readShort(),this.ySuperscriptYSize=e.readShort(),this.ySuperscriptXOffset=e.readShort(),this.ySuperscriptYOffset=e.readShort(),this.yStrikeoutSize=e.readShort(),this.yStrikeoutPosition=e.readShort(),this.familyClass=e.readShort(),this.panose=function(){var t,r;for(r=[],t=0;t<10;++t)r.push(e.readByte());return r}(),this.charRange=function(){var t,r;for(r=[],t=0;t<4;++t)r.push(e.readInt());return r}(),this.vendorID=e.readString(4),this.selection=e.readShort(),this.firstCharIndex=e.readShort(),this.lastCharIndex=e.readShort(),this.version>0&&(this.ascent=e.readShort(),this.descent=e.readShort(),this.lineGap=e.readShort(),this.winAscent=e.readShort(),this.winDescent=e.readShort(),this.codePageRange=function(){var t,r;for(r=[],t=0;t<2;t=++t)r.push(e.readInt());return r}(),this.version>1))return this.xHeight=e.readShort(),this.capHeight=e.readShort(),this.defaultChar=e.readShort(),this.breakChar=e.readShort(),this.maxContext=e.readShort()},n}(),eY=function(){function n(){return n.__super__.constructor.apply(this,arguments)}return gc(n,Ml),n.prototype.tag="post",n.prototype.parse=function(e){var t,r,i;switch(e.pos=this.offset,this.format=e.readInt(),this.italicAngle=e.readInt(),this.underlinePosition=e.readShort(),this.underlineThickness=e.readShort(),this.isFixedPitch=e.readInt(),this.minMemType42=e.readInt(),this.maxMemType42=e.readInt(),this.minMemType1=e.readInt(),this.maxMemType1=e.readInt(),this.format){case 65536:case 196608:break;case 131072:var a;for(r=e.readUInt16(),this.glyphNameIndex=[],a=0;0<=r?a<r:a>r;a=0<=r?++a:--a)this.glyphNameIndex.push(e.readUInt16());for(this.names=[],i=[];e.pos<this.offset+this.length;)t=e.readByte(),i.push(this.names.push(e.readString(t)));return i;case 151552:return r=e.readUInt16(),this.offsets=e.read(r);case 262144:return this.map=(function(){var o,s,c;for(c=[],a=o=0,s=this.file.maxp.numGlyphs;0<=s?o<s:o>s;a=0<=s?++o:--o)c.push(e.readUInt32());return c}).call(this)}},n}(),tY=function(n,e){this.raw=n,this.length=n.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},nY=function(){function n(){return n.__super__.constructor.apply(this,arguments)}return gc(n,Ml),n.prototype.tag="name",n.prototype.parse=function(e){var t,r,i,a,o,s,c,f,d,p,g;for(e.pos=this.offset,e.readShort(),t=e.readShort(),s=e.readShort(),r=[],a=0;0<=t?a<t:a>t;a=0<=t?++a:--a)r.push({platformID:e.readShort(),encodingID:e.readShort(),languageID:e.readShort(),nameID:e.readShort(),length:e.readShort(),offset:this.offset+s+e.readShort()});for(c={},a=d=0,p=r.length;d<p;a=++d)i=r[a],e.pos=i.offset,f=e.readString(i.length),o=new tY(f,i),c[g=i.nameID]==null&&(c[g]=[]),c[i.nameID].push(o);this.strings=c,this.copyright=c[0],this.fontFamily=c[1],this.fontSubfamily=c[2],this.uniqueSubfamily=c[3],this.fontName=c[4],this.version=c[5];try{this.postscriptName=c[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=c[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=c[7],this.manufacturer=c[8],this.designer=c[9],this.description=c[10],this.vendorUrl=c[11],this.designerUrl=c[12],this.license=c[13],this.licenseUrl=c[14],this.preferredFamily=c[15],this.preferredSubfamily=c[17],this.compatibleFull=c[18],this.sampleText=c[19]},n}(),rY=function(){function n(){return n.__super__.constructor.apply(this,arguments)}return gc(n,Ml),n.prototype.tag="maxp",n.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.numGlyphs=e.readUInt16(),this.maxPoints=e.readUInt16(),this.maxContours=e.readUInt16(),this.maxCompositePoints=e.readUInt16(),this.maxComponentContours=e.readUInt16(),this.maxZones=e.readUInt16(),this.maxTwilightPoints=e.readUInt16(),this.maxStorage=e.readUInt16(),this.maxFunctionDefs=e.readUInt16(),this.maxInstructionDefs=e.readUInt16(),this.maxStackElements=e.readUInt16(),this.maxSizeOfInstructions=e.readUInt16(),this.maxComponentElements=e.readUInt16(),this.maxComponentDepth=e.readUInt16()},n}(),iY=function(){function n(){return n.__super__.constructor.apply(this,arguments)}return gc(n,Ml),n.prototype.tag="hmtx",n.prototype.parse=function(e){var t,r,i,a,o,s,c;for(e.pos=this.offset,this.metrics=[],t=0,s=this.file.hhea.numberOfMetrics;0<=s?t<s:t>s;t=0<=s?++t:--t)this.metrics.push({advance:e.readUInt16(),lsb:e.readInt16()});for(i=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var f,d;for(d=[],t=f=0;0<=i?f<i:f>i;t=0<=i?++f:--f)d.push(e.readInt16());return d}(),this.widths=(function(){var f,d,p,g;for(g=[],f=0,d=(p=this.metrics).length;f<d;f++)a=p[f],g.push(a.advance);return g}).call(this),r=this.widths[this.widths.length-1],c=[],t=o=0;0<=i?o<i:o>i;t=0<=i?++o:--o)c.push(this.widths.push(r));return c},n.prototype.forGlyph=function(e){return e in this.metrics?this.metrics[e]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[e-this.metrics.length]}},n}(),WI=[].slice,aY=function(){function n(){return n.__super__.constructor.apply(this,arguments)}return gc(n,Ml),n.prototype.tag="glyf",n.prototype.parse=function(){return this.cache={}},n.prototype.glyphFor=function(e){var t,r,i,a,o,s,c,f,d,p;return e in this.cache?this.cache[e]:(a=this.file.loca,t=this.file.contents,r=a.indexOf(e),(i=a.lengthOf(e))===0?this.cache[e]=null:(t.pos=this.offset+r,o=(s=new bf(t.read(i))).readShort(),f=s.readShort(),p=s.readShort(),c=s.readShort(),d=s.readShort(),this.cache[e]=o===-1?new sY(s,f,p,c,d):new oY(s,o,f,p,c,d),this.cache[e]))},n.prototype.encode=function(e,t,r){var i,a,o,s,c;for(o=[],a=[],s=0,c=t.length;s<c;s++)i=e[t[s]],a.push(o.length),i&&(o=o.concat(i.encode(r)));return a.push(o.length),{table:o,offsets:a}},n}(),oY=function(){function n(e,t,r,i,a,o){this.raw=e,this.numberOfContours=t,this.xMin=r,this.yMin=i,this.xMax=a,this.yMax=o,this.compound=!1}return n.prototype.encode=function(){return this.raw.data},n}(),sY=function(){function n(e,t,r,i,a){var o,s;for(this.raw=e,this.xMin=t,this.yMin=r,this.xMax=i,this.yMax=a,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],o=this.raw;s=o.readShort(),this.glyphOffsets.push(o.pos),this.glyphIDs.push(o.readUInt16()),32&s;)o.pos+=1&s?4:2,128&s?o.pos+=8:64&s?o.pos+=4:8&s&&(o.pos+=2)}return n.prototype.encode=function(){var e,t,r;for(t=new bf(WI.call(this.raw.data)),e=0,r=this.glyphIDs.length;e<r;++e)t.pos=this.glyphOffsets[e];return t.data},n}(),lY=function(){function n(){return n.__super__.constructor.apply(this,arguments)}return gc(n,Ml),n.prototype.tag="loca",n.prototype.parse=function(e){var t,r;return e.pos=this.offset,t=this.file.head.indexToLocFormat,this.offsets=t===0?(function(){var i,a;for(a=[],r=0,i=this.length;r<i;r+=2)a.push(2*e.readUInt16());return a}).call(this):(function(){var i,a;for(a=[],r=0,i=this.length;r<i;r+=4)a.push(e.readUInt32());return a}).call(this)},n.prototype.indexOf=function(e){return this.offsets[e]},n.prototype.lengthOf=function(e){return this.offsets[e+1]-this.offsets[e]},n.prototype.encode=function(e,t){for(var r=new Uint32Array(this.offsets.length),i=0,a=0,o=0;o<r.length;++o)if(r[o]=i,a<t.length&&t[a]==o){++a,r[o]=i;var s=this.offsets[o],c=this.offsets[o+1]-s;c>0&&(i+=c)}for(var f=new Array(4*r.length),d=0;d<r.length;++d)f[4*d+3]=255&r[d],f[4*d+2]=(65280&r[d])>>8,f[4*d+1]=(16711680&r[d])>>16,f[4*d]=(4278190080&r[d])>>24;return f},n}(),cY=function(){function n(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return n.prototype.generateCmap=function(){var e,t,r,i,a;for(t in i=this.font.cmap.tables[0].codeMap,e={},a=this.subset)r=a[t],e[t]=i[r];return e},n.prototype.glyphsFor=function(e){var t,r,i,a,o,s,c;for(i={},o=0,s=e.length;o<s;o++)i[a=e[o]]=this.font.glyf.glyphFor(a);for(a in t=[],i)(r=i[a])!=null&&r.compound&&t.push.apply(t,r.glyphIDs);if(t.length>0)for(a in c=this.glyphsFor(t))r=c[a],i[a]=r;return i},n.prototype.encode=function(e,t){var r,i,a,o,s,c,f,d,p,g,m,x,_,C,S;for(i in r=HI.encode(this.generateCmap(),"unicode"),o=this.glyphsFor(e),m={0:0},S=r.charMap)m[(c=S[i]).old]=c.new;for(x in g=r.maxGlyphID,o)x in m||(m[x]=g++);return d=function(k){var M,P;for(M in P={},k)P[k[M]]=M;return P}(m),p=Object.keys(d).sort(function(k,M){return k-M}),_=function(){var k,M,P;for(P=[],k=0,M=p.length;k<M;k++)s=p[k],P.push(d[s]);return P}(),a=this.font.glyf.encode(o,_,m),f=this.font.loca.encode(a.offsets,_),C={cmap:this.font.cmap.raw(),glyf:a.table,loca:f,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(t)},this.font.os2.exists&&(C["OS/2"]=this.font.os2.raw()),this.font.directory.encode(C)},n}();Vt.API.PDFObject=function(){var n;function e(){}return n=function(t,r){return(Array(r+1).join("0")+t).slice(-r)},e.convert=function(t){var r,i,a,o;if(Array.isArray(t))return"["+function(){var s,c,f;for(f=[],s=0,c=t.length;s<c;s++)r=t[s],f.push(e.convert(r));return f}().join(" ")+"]";if(typeof t=="string")return"/"+t;if(t!=null&&t.isString)return"("+t+")";if(t instanceof Date)return"(D:"+n(t.getUTCFullYear(),4)+n(t.getUTCMonth(),2)+n(t.getUTCDate(),2)+n(t.getUTCHours(),2)+n(t.getUTCMinutes(),2)+n(t.getUTCSeconds(),2)+"Z)";if({}.toString.call(t)==="[object Object]"){for(i in a=["<<"],t)o=t[i],a.push("/"+i+" "+e.convert(o));return a.push(">>"),a.join(`
`)}return""+t},e}();function $I(n,e,t,r,i){r=r||{};var a=1.15,o=i.internal.scaleFactor,s=i.internal.getFontSize()/o,c=i.getLineHeightFactor?i.getLineHeightFactor():a,f=s*c,d=/\r\n|\r|\n/g,p="",g=1;if((r.valign==="middle"||r.valign==="bottom"||r.halign==="center"||r.halign==="right")&&(p=typeof n=="string"?n.split(d):n,g=p.length||1),t+=s*(2-a),r.valign==="middle"?t-=g/2*f:r.valign==="bottom"&&(t-=g*f),r.halign==="center"||r.halign==="right"){var m=s;if(r.halign==="center"&&(m*=.5),p&&g>=1){for(var x=0;x<p.length;x++)i.text(p[x],e-i.getStringUnitWidth(p[x])*m,t),t+=f;return i}e-=i.getStringUnitWidth(n)*m}return r.halign==="justify"?i.text(n,e,t,{maxWidth:r.maxWidth||100,align:"justify"}):i.text(n,e,t),i}var IA={},Ih=function(){function n(e){this.jsPDFDocument=e,this.userStyles={textColor:e.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:e.internal.getFontSize(),fontStyle:e.internal.getFont().fontStyle,font:e.internal.getFont().fontName,lineWidth:e.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:e.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return n.setDefaults=function(e,t){t===void 0&&(t=null),t?t.__autoTableDocumentDefaults=e:IA=e},n.unifyColor=function(e){return Array.isArray(e)?e:typeof e=="number"?[e,e,e]:typeof e=="string"?[e]:null},n.prototype.applyStyles=function(e,t){var r,i,a;t===void 0&&(t=!1),e.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(e.fontStyle);var o=this.jsPDFDocument.internal.getFont(),s=o.fontStyle,c=o.fontName;if(e.font&&(c=e.font),e.fontStyle){s=e.fontStyle;var f=this.getFontList()[c];f&&f.indexOf(s)===-1&&this.jsPDFDocument.setFontStyle&&(this.jsPDFDocument.setFontStyle(f[0]),s=f[0])}if(this.jsPDFDocument.setFont(c,s),e.fontSize&&this.jsPDFDocument.setFontSize(e.fontSize),!t){var d=n.unifyColor(e.fillColor);d&&(r=this.jsPDFDocument).setFillColor.apply(r,d),d=n.unifyColor(e.textColor),d&&(i=this.jsPDFDocument).setTextColor.apply(i,d),d=n.unifyColor(e.lineColor),d&&(a=this.jsPDFDocument).setDrawColor.apply(a,d),typeof e.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(e.lineWidth)}},n.prototype.splitTextToSize=function(e,t,r){return this.jsPDFDocument.splitTextToSize(e,t,r)},n.prototype.rect=function(e,t,r,i,a){return this.jsPDFDocument.rect(e,t,r,i,a)},n.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},n.prototype.getTextWidth=function(e){return this.jsPDFDocument.getTextWidth(e)},n.prototype.getDocument=function(){return this.jsPDFDocument},n.prototype.setPage=function(e){this.jsPDFDocument.setPage(e)},n.prototype.addPage=function(){return this.jsPDFDocument.addPage()},n.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},n.prototype.getGlobalOptions=function(){return IA||{}},n.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},n.prototype.pageSize=function(){var e=this.jsPDFDocument.internal.pageSize;return e.width==null&&(e={width:e.getWidth(),height:e.getHeight()}),e},n.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},n.prototype.getLineHeightFactor=function(){var e=this.jsPDFDocument;return e.getLineHeightFactor?e.getLineHeightFactor():1.15},n.prototype.getLineHeight=function(e){return e/this.scaleFactor()*this.getLineHeightFactor()},n.prototype.pageNumber=function(){var e=this.jsPDFDocument.internal.getCurrentPageInfo();return e?e.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},n}(),Fx=function(n,e){return Fx=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},Fx(n,e)};function GI(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Fx(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var YI=function(n){GI(e,n);function e(t){var r=n.call(this)||this;return r._element=t,r}return e}(Array);function uY(n){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/n,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}function fY(n){var e={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return e[n]}function Em(n,e,t){t.applyStyles(e,!0);var r=Array.isArray(n)?n:[n],i=r.map(function(a){return t.getTextWidth(a)}).reduce(function(a,o){return Math.max(a,o)},0);return i}function XI(n,e,t,r){var i=e.settings.tableLineWidth,a=e.settings.tableLineColor;n.applyStyles({lineWidth:i,lineColor:a});var o=KI(i,!1);o&&n.rect(t.x,t.y,e.getWidth(n.pageSize().width),r.y-t.y,o)}function KI(n,e){var t=n>0,r=e||e===0;return t&&r?"DF":t?"S":r?"F":null}function x2(n,e){var t,r,i,a;if(n=n||e,Array.isArray(n)){if(n.length>=4)return{top:n[0],right:n[1],bottom:n[2],left:n[3]};if(n.length===3)return{top:n[0],right:n[1],bottom:n[2],left:n[1]};if(n.length===2)return{top:n[0],right:n[1],bottom:n[0],left:n[1]};n.length===1?n=n[0]:n=e}return typeof n=="object"?(typeof n.vertical=="number"&&(n.top=n.vertical,n.bottom=n.vertical),typeof n.horizontal=="number"&&(n.right=n.horizontal,n.left=n.horizontal),{left:(t=n.left)!==null&&t!==void 0?t:e,top:(r=n.top)!==null&&r!==void 0?r:e,right:(i=n.right)!==null&&i!==void 0?i:e,bottom:(a=n.bottom)!==null&&a!==void 0?a:e}):(typeof n!="number"&&(n=e),{top:n,right:n,bottom:n,left:n})}function QI(n,e){var t=x2(e.settings.margin,0);return n.pageSize().width-(t.left+t.right)}function dY(n,e,t,r,i){var a={},o=1.3333333333333333,s=Ry(e,function(M){return i.getComputedStyle(M).backgroundColor});s!=null&&(a.fillColor=s);var c=Ry(e,function(M){return i.getComputedStyle(M).color});c!=null&&(a.textColor=c);var f=pY(r,t);f&&(a.cellPadding=f);var d="borderTopColor",p=o*t,g=r.borderTopWidth;if(r.borderBottomWidth===g&&r.borderRightWidth===g&&r.borderLeftWidth===g){var m=(parseFloat(g)||0)/p;m&&(a.lineWidth=m)}else a.lineWidth={top:(parseFloat(r.borderTopWidth)||0)/p,right:(parseFloat(r.borderRightWidth)||0)/p,bottom:(parseFloat(r.borderBottomWidth)||0)/p,left:(parseFloat(r.borderLeftWidth)||0)/p},a.lineWidth.top||(a.lineWidth.right?d="borderRightColor":a.lineWidth.bottom?d="borderBottomColor":a.lineWidth.left&&(d="borderLeftColor"));var x=Ry(e,function(M){return i.getComputedStyle(M)[d]});x!=null&&(a.lineColor=x);var _=["left","right","center","justify"];_.indexOf(r.textAlign)!==-1&&(a.halign=r.textAlign),_=["middle","bottom","top"],_.indexOf(r.verticalAlign)!==-1&&(a.valign=r.verticalAlign);var C=parseInt(r.fontSize||"");isNaN(C)||(a.fontSize=C/o);var S=hY(r);S&&(a.fontStyle=S);var k=(r.fontFamily||"").toLowerCase();return n.indexOf(k)!==-1&&(a.font=k),a}function hY(n){var e="";return(n.fontWeight==="bold"||n.fontWeight==="bolder"||parseInt(n.fontWeight)>=700)&&(e="bold"),(n.fontStyle==="italic"||n.fontStyle==="oblique")&&(e+="italic"),e}function Ry(n,e){var t=ZI(n,e);if(!t)return null;var r=t.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!r||!Array.isArray(r))return null;var i=[parseInt(r[1]),parseInt(r[2]),parseInt(r[3])],a=parseInt(r[4]);return a===0||isNaN(i[0])||isNaN(i[1])||isNaN(i[2])?null:i}function ZI(n,e){var t=e(n);return t==="rgba(0, 0, 0, 0)"||t==="transparent"||t==="initial"||t==="inherit"?n.parentElement==null?null:ZI(n.parentElement,e):t}function pY(n,e){var t=[n.paddingTop,n.paddingRight,n.paddingBottom,n.paddingLeft],r=96/(72/e),i=(parseInt(n.lineHeight)-parseInt(n.fontSize))/e/2,a=t.map(function(s){return parseInt(s||"0")/r}),o=x2(a,0);return i>o.top&&(o.top=i),i>o.bottom&&(o.bottom=i),o}function JI(n,e,t,r,i){var a,o;r===void 0&&(r=!1),i===void 0&&(i=!1);var s;typeof e=="string"?s=t.document.querySelector(e):s=e;var c=Object.keys(n.getFontList()),f=n.scaleFactor(),d=[],p=[],g=[];if(!s)return console.error("Html table could not be found with input: ",e),{head:d,body:p,foot:g};for(var m=0;m<s.rows.length;m++){var x=s.rows[m],_=(o=(a=x==null?void 0:x.parentElement)===null||a===void 0?void 0:a.tagName)===null||o===void 0?void 0:o.toLowerCase(),C=gY(c,f,t,x,r,i);C&&(_==="thead"?d.push(C):_==="tfoot"?g.push(C):p.push(C))}return{head:d,body:p,foot:g}}function gY(n,e,t,r,i,a){for(var o=new YI(r),s=0;s<r.cells.length;s++){var c=r.cells[s],f=t.getComputedStyle(c);if(i||f.display!=="none"){var d=void 0;a&&(d=dY(n,c,e,f,t)),o.push({rowSpan:c.rowSpan,colSpan:c.colSpan,styles:d,_element:c,content:mY(c)})}}var p=t.getComputedStyle(r);if(o.length>0&&(i||p.display!=="none"))return o}function mY(n){var e=n.cloneNode(!0);return e.innerHTML=e.innerHTML.replace(/\n/g,"").replace(/ +/g," "),e.innerHTML=e.innerHTML.split(/<br.*?>/).map(function(t){return t.trim()}).join(`
`),e.innerText||e.textContent||""}function vY(n,e,t){for(var r=0,i=[n,e,t];r<i.length;r++){var a=i[r];a&&typeof a!="object"&&console.error("The options parameter should be of type object, is: "+typeof a),a.startY&&typeof a.startY!="number"&&(console.error("Invalid value for startY option",a.startY),delete a.startY)}}function Gc(n,e,t,r,i){if(n==null)throw new TypeError("Cannot convert undefined or null to object");for(var a=Object(n),o=1;o<arguments.length;o++){var s=arguments[o];if(s!=null)for(var c in s)Object.prototype.hasOwnProperty.call(s,c)&&(a[c]=s[c])}return a}function yY(n,e){var t=new Ih(n),r=t.getDocumentOptions(),i=t.getGlobalOptions();vY(i,r,e);var a=Gc({},i,r,e),o;typeof window<"u"&&(o=window);var s=xY(i,r,e),c=bY(i,r,e),f=wY(t,a),d=AY(t,a,o);return{id:e.tableId,content:d,hooks:c,styles:s,settings:f}}function xY(n,e,t){for(var r={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},i=function(c){if(c==="columnStyles"){var f=n[c],d=e[c],p=t[c];r.columnStyles=Gc({},f,d,p)}else{var g=[n,e,t],m=g.map(function(x){return x[c]||{}});r[c]=Gc({},m[0],m[1],m[2])}},a=0,o=Object.keys(r);a<o.length;a++){var s=o[a];i(s)}return r}function bY(n,e,t){for(var r=[n,e,t],i={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},a=0,o=r;a<o.length;a++){var s=o[a];s.didParseCell&&i.didParseCell.push(s.didParseCell),s.willDrawCell&&i.willDrawCell.push(s.willDrawCell),s.didDrawCell&&i.didDrawCell.push(s.didDrawCell),s.willDrawPage&&i.willDrawPage.push(s.willDrawPage),s.didDrawPage&&i.didDrawPage.push(s.didDrawPage)}return i}function wY(n,e){var t,r,i,a,o,s,c,f,d,p,g,m,x=x2(e.margin,40/n.scaleFactor()),_=(t=_Y(n,e.startY))!==null&&t!==void 0?t:x.top,C;e.showFoot===!0?C="everyPage":e.showFoot===!1?C="never":C=(r=e.showFoot)!==null&&r!==void 0?r:"everyPage";var S;e.showHead===!0?S="everyPage":e.showHead===!1?S="never":S=(i=e.showHead)!==null&&i!==void 0?i:"everyPage";var k=(a=e.useCss)!==null&&a!==void 0?a:!1,M=e.theme||(k?"plain":"striped"),P=!!e.horizontalPageBreak,Y=(o=e.horizontalPageBreakRepeat)!==null&&o!==void 0?o:null;return{includeHiddenHtml:(s=e.includeHiddenHtml)!==null&&s!==void 0?s:!1,useCss:k,theme:M,startY:_,margin:x,pageBreak:(c=e.pageBreak)!==null&&c!==void 0?c:"auto",rowPageBreak:(f=e.rowPageBreak)!==null&&f!==void 0?f:"auto",tableWidth:(d=e.tableWidth)!==null&&d!==void 0?d:"auto",showHead:S,showFoot:C,tableLineWidth:(p=e.tableLineWidth)!==null&&p!==void 0?p:0,tableLineColor:(g=e.tableLineColor)!==null&&g!==void 0?g:200,horizontalPageBreak:P,horizontalPageBreakRepeat:Y,horizontalPageBreakBehaviour:(m=e.horizontalPageBreakBehaviour)!==null&&m!==void 0?m:"afterAllRows"}}function _Y(n,e){var t=n.getLastAutoTable(),r=n.scaleFactor(),i=n.pageNumber(),a=!1;if(t&&t.startPageNumber){var o=t.startPageNumber+t.pageNumber-1;a=o===i}return typeof e=="number"?e:(e==null||e===!1)&&a&&(t==null?void 0:t.finalY)!=null?t.finalY+20/r:null}function AY(n,e,t){var r=e.head||[],i=e.body||[],a=e.foot||[];if(e.html){var o=e.includeHiddenHtml;if(t){var s=JI(n,e.html,t,o,e.useCss)||{};r=s.head||r,i=s.body||r,a=s.foot||r}else console.error("Cannot parse html in non browser environment")}var c=e.columns||SY(r,i,a);return{columns:c,head:r,body:i,foot:a}}function SY(n,e,t){var r=n[0]||e[0]||t[0]||[],i=[];return Object.keys(r).filter(function(a){return a!=="_element"}).forEach(function(a){var o=1,s;Array.isArray(r)?s=r[parseInt(a)]:s=r[a],typeof s=="object"&&!Array.isArray(s)&&(o=(s==null?void 0:s.colSpan)||1);for(var c=0;c<o;c++){var f=void 0;Array.isArray(r)?f=i.length:f=a+(c>0?"_".concat(c):"");var d={dataKey:f};i.push(d)}}),i}var Ux=function(){function n(e,t,r){this.table=t,this.pageNumber=t.pageNumber,this.settings=t.settings,this.cursor=r,this.doc=e.getDocument()}return n}(),EY=function(n){GI(e,n);function e(t,r,i,a,o,s){var c=n.call(this,t,r,s)||this;return c.cell=i,c.row=a,c.column=o,c.section=a.section,c}return e}(Ux),CY=function(){function n(e,t){this.pageNumber=1,this.id=e.id,this.settings=e.settings,this.styles=e.styles,this.hooks=e.hooks,this.columns=t.columns,this.head=t.head,this.body=t.body,this.foot=t.foot}return n.prototype.getHeadHeight=function(e){return this.head.reduce(function(t,r){return t+r.getMaxCellHeight(e)},0)},n.prototype.getFootHeight=function(e){return this.foot.reduce(function(t,r){return t+r.getMaxCellHeight(e)},0)},n.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},n.prototype.callCellHooks=function(e,t,r,i,a,o){for(var s=0,c=t;s<c.length;s++){var f=c[s],d=new EY(e,this,r,i,a,o),p=f(d)===!1;if(r.text=Array.isArray(r.text)?r.text:[r.text],p)return!1}return!0},n.prototype.callEndPageHooks=function(e,t){e.applyStyles(e.userStyles);for(var r=0,i=this.hooks.didDrawPage;r<i.length;r++){var a=i[r];a(new Ux(e,this,t))}},n.prototype.callWillDrawPageHooks=function(e,t){for(var r=0,i=this.hooks.willDrawPage;r<i.length;r++){var a=i[r];a(new Ux(e,this,t))}},n.prototype.getWidth=function(e){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var t=this.columns.reduce(function(i,a){return i+a.wrappedWidth},0);return t}else{var r=this.settings.margin;return e-r.left-r.right}},n}(),eT=function(){function n(e,t,r,i,a){a===void 0&&(a=!1),this.height=0,this.raw=e,e instanceof YI&&(this.raw=e._element,this.element=e._element),this.index=t,this.section=r,this.cells=i,this.spansMultiplePages=a}return n.prototype.getMaxCellHeight=function(e){var t=this;return e.reduce(function(r,i){var a;return Math.max(r,((a=t.cells[i.index])===null||a===void 0?void 0:a.height)||0)},0)},n.prototype.hasRowSpan=function(e){var t=this;return e.filter(function(r){var i=t.cells[r.index];return i?i.rowSpan>1:!1}).length>0},n.prototype.canEntireRowFit=function(e,t){return this.getMaxCellHeight(t)<=e},n.prototype.getMinimumRowHeight=function(e,t){var r=this;return e.reduce(function(i,a){var o=r.cells[a.index];if(!o)return 0;var s=t.getLineHeight(o.styles.fontSize),c=o.padding("vertical"),f=c+s;return f>i?f:i},0)},n}(),tT=function(){function n(e,t,r){var i;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=t,this.section=r,this.raw=e;var a=e;e!=null&&typeof e=="object"&&!Array.isArray(e)?(this.rowSpan=e.rowSpan||1,this.colSpan=e.colSpan||1,a=(i=e.content)!==null&&i!==void 0?i:e,e._element&&(this.raw=e._element)):(this.rowSpan=1,this.colSpan=1);var o=a!=null?""+a:"",s=/\r\n|\r|\n/g;this.text=o.split(s)}return n.prototype.getTextPos=function(){var e;if(this.styles.valign==="top")e=this.y+this.padding("top");else if(this.styles.valign==="bottom")e=this.y+this.height-this.padding("bottom");else{var t=this.height-this.padding("vertical");e=this.y+t/2+this.padding("top")}var r;if(this.styles.halign==="right")r=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var i=this.width-this.padding("horizontal");r=this.x+i/2+this.padding("left")}else r=this.x+this.padding("left");return{x:r,y:e}},n.prototype.getContentHeight=function(e,t){t===void 0&&(t=1.15);var r=Array.isArray(this.text)?this.text.length:1,i=this.styles.fontSize/e*t,a=r*i+this.padding("vertical");return Math.max(a,this.styles.minCellHeight)},n.prototype.padding=function(e){var t=x2(this.styles.cellPadding,0);return e==="vertical"?t.top+t.bottom:e==="horizontal"?t.left+t.right:t[e]},n}(),IY=function(){function n(e,t,r){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=e,this.raw=t,this.index=r}return n.prototype.getMaxCustomCellWidth=function(e){for(var t=0,r=0,i=e.allRows();r<i.length;r++){var a=i[r],o=a.cells[this.index];o&&typeof o.styles.cellWidth=="number"&&(t=Math.max(t,o.styles.cellWidth))}return t},n}();function TY(n,e){RY(n,e);var t=[],r=0;e.columns.forEach(function(a){var o=a.getMaxCustomCellWidth(e);o?a.width=o:(a.width=a.wrappedWidth,t.push(a)),r+=a.width});var i=e.getWidth(n.pageSize().width)-r;i&&(i=zx(t,i,function(a){return Math.max(a.minReadableWidth,a.minWidth)})),i&&(i=zx(t,i,function(a){return a.minWidth})),i=Math.abs(i),!e.settings.horizontalPageBreak&&i>.1/n.scaleFactor()&&(i=i<1?i:Math.round(i),console.warn("Of the table content, ".concat(i," units width could not fit page"))),DY(e),OY(e,n),NY(e)}function RY(n,e){var t=n.scaleFactor(),r=e.settings.horizontalPageBreak,i=QI(n,e);e.allRows().forEach(function(a){for(var o=0,s=e.columns;o<s.length;o++){var c=s[o],f=a.cells[c.index];if(f){var d=e.hooks.didParseCell;e.callCellHooks(n,d,f,a,c,null);var p=f.padding("horizontal");f.contentWidth=Em(f.text,f.styles,n)+p;var g=Em(f.text.join(" ").split(/[^\S\u00A0]+/),f.styles,n);if(f.minReadableWidth=g+f.padding("horizontal"),typeof f.styles.cellWidth=="number")f.minWidth=f.styles.cellWidth,f.wrappedWidth=f.styles.cellWidth;else if(f.styles.cellWidth==="wrap"||r===!0)f.contentWidth>i?(f.minWidth=i,f.wrappedWidth=i):(f.minWidth=f.contentWidth,f.wrappedWidth=f.contentWidth);else{var m=10/t;f.minWidth=f.styles.minCellWidth||m,f.wrappedWidth=f.contentWidth,f.minWidth>f.wrappedWidth&&(f.wrappedWidth=f.minWidth)}}}}),e.allRows().forEach(function(a){for(var o=0,s=e.columns;o<s.length;o++){var c=s[o],f=a.cells[c.index];if(f&&f.colSpan===1)c.wrappedWidth=Math.max(c.wrappedWidth,f.wrappedWidth),c.minWidth=Math.max(c.minWidth,f.minWidth),c.minReadableWidth=Math.max(c.minReadableWidth,f.minReadableWidth);else{var d=e.styles.columnStyles[c.dataKey]||e.styles.columnStyles[c.index]||{},p=d.cellWidth||d.minCellWidth;p&&typeof p=="number"&&(c.minWidth=p,c.wrappedWidth=p)}f&&(f.colSpan>1&&!c.minWidth&&(c.minWidth=f.minWidth),f.colSpan>1&&!c.wrappedWidth&&(c.wrappedWidth=f.minWidth))}})}function zx(n,e,t){for(var r=e,i=n.reduce(function(m,x){return m+x.wrappedWidth},0),a=0;a<n.length;a++){var o=n[a],s=o.wrappedWidth/i,c=r*s,f=o.width+c,d=t(o),p=f<d?d:f;e-=p-o.width,o.width=p}if(e=Math.round(e*1e10)/1e10,e){var g=n.filter(function(m){return e<0?m.width>t(m):!0});g.length&&(e=zx(g,e,t))}return e}function NY(n){for(var e={},t=1,r=n.allRows(),i=0;i<r.length;i++)for(var a=r[i],o=0,s=n.columns;o<s.length;o++){var c=s[o],f=e[c.index];if(t>1)t--,delete a.cells[c.index];else if(f)f.cell.height+=a.height,t=f.cell.colSpan,delete a.cells[c.index],f.left--,f.left<=1&&delete e[c.index];else{var d=a.cells[c.index];if(!d)continue;if(d.height=a.height,d.rowSpan>1){var p=r.length-i,g=d.rowSpan>p?p:d.rowSpan;e[c.index]={cell:d,left:g,row:a}}}}}function DY(n){for(var e=n.allRows(),t=0;t<e.length;t++)for(var r=e[t],i=null,a=0,o=0,s=0;s<n.columns.length;s++){var c=n.columns[s];if(o-=1,o>1&&n.columns[s+1])a+=c.width,delete r.cells[c.index];else if(i){var f=i;delete r.cells[c.index],i=null,f.width=c.width+a}else{var f=r.cells[c.index];if(!f)continue;if(o=f.colSpan,a=0,f.colSpan>1){i=f,a+=c.width;continue}f.width=c.width+a}}}function OY(n,e){for(var t={count:0,height:0},r=0,i=n.allRows();r<i.length;r++){for(var a=i[r],o=0,s=n.columns;o<s.length;o++){var c=s[o],f=a.cells[c.index];if(f){e.applyStyles(f.styles,!0);var d=f.width-f.padding("horizontal");if(f.styles.overflow==="linebreak")f.text=e.splitTextToSize(f.text,d+1/e.scaleFactor(),{fontSize:f.styles.fontSize});else if(f.styles.overflow==="ellipsize")f.text=TA(f.text,d,f.styles,e,"...");else if(f.styles.overflow==="hidden")f.text=TA(f.text,d,f.styles,e,"");else if(typeof f.styles.overflow=="function"){var p=f.styles.overflow(f.text,d);typeof p=="string"?f.text=[p]:f.text=p}f.contentHeight=f.getContentHeight(e.scaleFactor(),e.getLineHeightFactor());var g=f.contentHeight/f.rowSpan;f.rowSpan>1&&t.count*t.height<g*f.rowSpan?t={height:g,count:f.rowSpan}:t&&t.count>0&&t.height>g&&(g=t.height),g>a.height&&(a.height=g)}}t.count--}}function TA(n,e,t,r,i){return n.map(function(a){return kY(a,e,t,r,i)})}function kY(n,e,t,r,i){var a=1e4*r.scaleFactor();if(e=Math.ceil(e*a)/a,e>=Em(n,t,r))return n;for(;e<Em(n+i,t,r)&&!(n.length<=1);)n=n.substring(0,n.length-1);return n.trim()+i}function LY(n,e){var t=new Ih(n),r=PY(e,t.scaleFactor()),i=new CY(e,r);return TY(t,i),t.applyStyles(t.userStyles),i}function PY(n,e){var t=n.content,r=jY(t.columns);if(t.head.length===0){var i=RA(r,"head");i&&t.head.push(i)}if(t.foot.length===0){var i=RA(r,"foot");i&&t.foot.push(i)}var a=n.settings.theme,o=n.styles;return{columns:r,head:Ny("head",t.head,r,o,a,e),body:Ny("body",t.body,r,o,a,e),foot:Ny("foot",t.foot,r,o,a,e)}}function Ny(n,e,t,r,i,a){var o={},s=e.map(function(c,f){for(var d=0,p={},g=0,m=0,x=0,_=t;x<_.length;x++){var C=_[x];if(o[C.index]==null||o[C.index].left===0)if(m===0){var S=void 0;Array.isArray(c)?S=c[C.index-g-d]:S=c[C.dataKey];var k={};typeof S=="object"&&!Array.isArray(S)&&(k=(S==null?void 0:S.styles)||{});var M=BY(n,C,f,i,r,a,k),P=new tT(S,M,n);p[C.dataKey]=P,p[C.index]=P,m=P.colSpan-1,o[C.index]={left:P.rowSpan-1,times:m}}else m--,g++;else o[C.index].left--,m=o[C.index].times,d++}return new eT(c,f,n,p)});return s}function RA(n,e){var t={};return n.forEach(function(r){if(r.raw!=null){var i=MY(e,r.raw);i!=null&&(t[r.dataKey]=i)}}),Object.keys(t).length>0?t:null}function MY(n,e){if(n==="head"){if(typeof e=="object")return e.header||null;if(typeof e=="string"||typeof e=="number")return e}else if(n==="foot"&&typeof e=="object")return e.footer;return null}function jY(n){return n.map(function(e,t){var r,i;return typeof e=="object"?i=(r=e.dataKey)!==null&&r!==void 0?r:t:i=t,new IY(i,e,t)})}function BY(n,e,t,r,i,a,o){var s=fY(r),c;n==="head"?c=i.headStyles:n==="body"?c=i.bodyStyles:n==="foot"&&(c=i.footStyles);var f=Gc({},s.table,s[n],i.styles,c),d=i.columnStyles[e.dataKey]||i.columnStyles[e.index]||{},p=n==="body"?d:{},g=n==="body"&&t%2===0?Gc({},s.alternateRow,i.alternateRowStyles):{},m=uY(a),x=Gc({},m,f,g,p);return Gc(x,o)}function FY(n,e,t){var r;t===void 0&&(t={});var i=QI(n,e),a=new Map,o=[],s=[],c=[];Array.isArray(e.settings.horizontalPageBreakRepeat)?c=e.settings.horizontalPageBreakRepeat:(typeof e.settings.horizontalPageBreakRepeat=="string"||typeof e.settings.horizontalPageBreakRepeat=="number")&&(c=[e.settings.horizontalPageBreakRepeat]),c.forEach(function(g){var m=e.columns.find(function(x){return x.dataKey===g||x.index===g});m&&!a.has(m.index)&&(a.set(m.index,!0),o.push(m.index),s.push(e.columns[m.index]),i-=m.wrappedWidth)});for(var f=!0,d=(r=t==null?void 0:t.start)!==null&&r!==void 0?r:0;d<e.columns.length;){if(a.has(d)){d++;continue}var p=e.columns[d].wrappedWidth;if(f||i>=p)f=!1,o.push(d),s.push(e.columns[d]),i-=p;else break;d++}return{colIndexes:o,columns:s,lastIndex:d-1}}function UY(n,e){for(var t=[],r=0;r<e.columns.length;r++){var i=FY(n,e,{start:r});i.columns.length&&(t.push(i),r=i.lastIndex)}return t}function zY(n,e){var t=e.settings,r=t.startY,i=t.margin,a={x:i.left,y:r},o=e.getHeadHeight(e.columns)+e.getFootHeight(e.columns),s=r+i.bottom+o;if(t.pageBreak==="avoid"){var c=e.body,f=c.reduce(function(g,m){return g+m.height},0);s+=f}var d=new Ih(n);(t.pageBreak==="always"||t.startY!=null&&s>d.pageSize().height)&&(rT(d),a.y=i.top),e.callWillDrawPageHooks(d,a);var p=Gc({},a);e.startPageNumber=d.pageNumber(),t.horizontalPageBreak?VY(d,e,p,a):(d.applyStyles(d.userStyles),(t.showHead==="firstPage"||t.showHead==="everyPage")&&e.head.forEach(function(g){return au(d,e,g,a,e.columns)}),d.applyStyles(d.userStyles),e.body.forEach(function(g,m){var x=m===e.body.length-1;Cm(d,e,g,x,p,a,e.columns)}),d.applyStyles(d.userStyles),(t.showFoot==="lastPage"||t.showFoot==="everyPage")&&e.foot.forEach(function(g){return au(d,e,g,a,e.columns)})),XI(d,e,p,a),e.callEndPageHooks(d,a),e.finalY=a.y,n.lastAutoTable=e,d.applyStyles(d.userStyles)}function VY(n,e,t,r){var i=UY(n,e),a=e.settings;if(a.horizontalPageBreakBehaviour==="afterAllRows")i.forEach(function(f,d){n.applyStyles(n.userStyles),d>0?u1(n,e,t,r,f.columns,!0):NA(n,e,r,f.columns),qY(n,e,t,r,f.columns),Dy(n,e,r,f.columns)});else for(var o=-1,s=i[0],c=function(){var f=o;if(s){n.applyStyles(n.userStyles);var d=s.columns;o>=0?u1(n,e,t,r,d,!0):NA(n,e,r,d),f=DA(n,e,o+1,r,d),Dy(n,e,r,d)}var p=f-o;i.slice(1).forEach(function(g){n.applyStyles(n.userStyles),u1(n,e,t,r,g.columns,!0),DA(n,e,o+1,r,g.columns,p),Dy(n,e,r,g.columns)}),o=f};o<e.body.length-1;)c()}function NA(n,e,t,r){var i=e.settings;n.applyStyles(n.userStyles),(i.showHead==="firstPage"||i.showHead==="everyPage")&&e.head.forEach(function(a){return au(n,e,a,t,r)})}function qY(n,e,t,r,i){n.applyStyles(n.userStyles),e.body.forEach(function(a,o){var s=o===e.body.length-1;Cm(n,e,a,s,t,r,i)})}function DA(n,e,t,r,i,a){n.applyStyles(n.userStyles),a=a??e.body.length;var o=Math.min(t+a,e.body.length),s=-1;return e.body.slice(t,o).forEach(function(c,f){var d=t+f===e.body.length-1,p=nT(n,e,d,r);c.canEntireRowFit(p,i)&&(au(n,e,c,r,i),s=t+f)}),s}function Dy(n,e,t,r){var i=e.settings;n.applyStyles(n.userStyles),(i.showFoot==="lastPage"||i.showFoot==="everyPage")&&e.foot.forEach(function(a){return au(n,e,a,t,r)})}function HY(n,e,t){var r=t.getLineHeight(n.styles.fontSize),i=n.padding("vertical"),a=Math.floor((e-i)/r);return Math.max(0,a)}function WY(n,e,t,r){var i={};n.spansMultiplePages=!0,n.height=0;for(var a=0,o=0,s=t.columns;o<s.length;o++){var c=s[o],f=n.cells[c.index];if(f){Array.isArray(f.text)||(f.text=[f.text]);var d=new tT(f.raw,f.styles,f.section);d=Gc(d,f),d.text=[];var p=HY(f,e,r);f.text.length>p&&(d.text=f.text.splice(p,f.text.length));var g=r.scaleFactor(),m=r.getLineHeightFactor();f.contentHeight=f.getContentHeight(g,m),f.contentHeight>=e&&(f.contentHeight=e,d.styles.minCellHeight-=e),f.contentHeight>n.height&&(n.height=f.contentHeight),d.contentHeight=d.getContentHeight(g,m),d.contentHeight>a&&(a=d.contentHeight),i[c.index]=d}}var x=new eT(n.raw,-1,n.section,i,!0);x.height=a;for(var _=0,C=t.columns;_<C.length;_++){var c=C[_],d=x.cells[c.index];d&&(d.height=x.height);var f=n.cells[c.index];f&&(f.height=n.height)}return x}function $Y(n,e,t,r){var i=n.pageSize().height,a=r.settings.margin,o=a.top+a.bottom,s=i-o;e.section==="body"&&(s-=r.getHeadHeight(r.columns)+r.getFootHeight(r.columns));var c=e.getMinimumRowHeight(r.columns,n),f=c<t;if(c>s)return console.error("Will not be able to print row ".concat(e.index," correctly since it's minimum height is larger than page height")),!0;if(!f)return!1;var d=e.hasRowSpan(r.columns),p=e.getMaxCellHeight(r.columns)>s;return p?(d&&console.error("The content of row ".concat(e.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(d||r.settings.rowPageBreak==="avoid")}function Cm(n,e,t,r,i,a,o){var s=nT(n,e,r,a);if(t.canEntireRowFit(s,o))au(n,e,t,a,o);else if($Y(n,t,s,e)){var c=WY(t,s,e,n);au(n,e,t,a,o),u1(n,e,i,a,o),Cm(n,e,c,r,i,a,o)}else u1(n,e,i,a,o),Cm(n,e,t,r,i,a,o)}function au(n,e,t,r,i){r.x=e.settings.margin.left;for(var a=0,o=i;a<o.length;a++){var s=o[a],c=t.cells[s.index];if(!c){r.x+=s.width;continue}n.applyStyles(c.styles),c.x=r.x,c.y=r.y;var f=e.callCellHooks(n,e.hooks.willDrawCell,c,t,s,r);if(f===!1){r.x+=s.width;continue}GY(n,c,r);var d=c.getTextPos();$I(c.text,d.x,d.y,{halign:c.styles.halign,valign:c.styles.valign,maxWidth:Math.ceil(c.width-c.padding("left")-c.padding("right"))},n.getDocument()),e.callCellHooks(n,e.hooks.didDrawCell,c,t,s,r),r.x+=s.width}r.y+=t.height}function GY(n,e,t){var r=e.styles;if(n.getDocument().setFillColor(n.getDocument().getFillColor()),typeof r.lineWidth=="number"){var i=KI(r.lineWidth,r.fillColor);i&&n.rect(e.x,t.y,e.width,e.height,i)}else typeof r.lineWidth=="object"&&(r.fillColor&&n.rect(e.x,t.y,e.width,e.height,"F"),YY(n,e,t,r.lineWidth))}function YY(n,e,t,r){var i,a,o,s;r.top&&(i=t.x,a=t.y,o=t.x+e.width,s=t.y,r.right&&(o+=.5*r.right),r.left&&(i-=.5*r.left),c(r.top,i,a,o,s)),r.bottom&&(i=t.x,a=t.y+e.height,o=t.x+e.width,s=t.y+e.height,r.right&&(o+=.5*r.right),r.left&&(i-=.5*r.left),c(r.bottom,i,a,o,s)),r.left&&(i=t.x,a=t.y,o=t.x,s=t.y+e.height,r.top&&(a-=.5*r.top),r.bottom&&(s+=.5*r.bottom),c(r.left,i,a,o,s)),r.right&&(i=t.x+e.width,a=t.y,o=t.x+e.width,s=t.y+e.height,r.top&&(a-=.5*r.top),r.bottom&&(s+=.5*r.bottom),c(r.right,i,a,o,s));function c(f,d,p,g,m){n.getDocument().setLineWidth(f),n.getDocument().line(d,p,g,m,"S")}}function nT(n,e,t,r){var i=e.settings.margin.bottom,a=e.settings.showFoot;return(a==="everyPage"||a==="lastPage"&&t)&&(i+=e.getFootHeight(e.columns)),n.pageSize().height-r.y-i}function u1(n,e,t,r,i,a){i===void 0&&(i=[]),a===void 0&&(a=!1),n.applyStyles(n.userStyles),e.settings.showFoot==="everyPage"&&!a&&e.foot.forEach(function(s){return au(n,e,s,r,i)}),e.callEndPageHooks(n,r);var o=e.settings.margin;XI(n,e,t,r),rT(n),e.pageNumber++,r.x=o.left,r.y=o.top,t.y=o.top,e.callWillDrawPageHooks(n,r),e.settings.showHead==="everyPage"&&(e.head.forEach(function(s){return au(n,e,s,r,i)}),n.applyStyles(n.userStyles))}function rT(n){var e=n.pageNumber();n.setPage(e+1);var t=n.pageNumber();return t===e?(n.addPage(),!0):!1}function XY(n){n.API.autoTable=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=e[0],i=yY(this,r),a=LY(this,i);return zY(this,a),this},n.API.lastAutoTable=!1,n.API.autoTableText=function(e,t,r,i){$I(e,t,r,i,this)},n.API.autoTableSetDefaults=function(e){return Ih.setDefaults(e,this),this},n.autoTableSetDefaults=function(e,t){Ih.setDefaults(e,t)},n.API.autoTableHtmlToJson=function(e,t){var r;if(t===void 0&&(t=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var i=new Ih(this),a=JI(i,e,window,t,!1),o=a.head,s=a.body,c=((r=o[0])===null||r===void 0?void 0:r.map(function(f){return f.content}))||[];return{columns:c,rows:s,data:s}}}var Oy;try{if(typeof window<"u"&&window){var OA=window,kA=OA.jsPDF||((Oy=OA.jspdf)===null||Oy===void 0?void 0:Oy.jsPDF);kA&&XY(kA)}}catch(n){console.error("Could not apply autoTable plugin",n)}const KY=({showStatsModal:n,setShowStatsModal:e,loanHistory:t})=>{const r=le.useMemo(()=>{if(!t||t.length===0)return null;const i=L=>L?L.seconds?new Date(L.seconds*1e3):new Date(L):null,a=t.length,o=a,s=0,c=t.flatMap(L=>L.items||[]),f=c.reduce((L,G)=>L+(G.quantity||1),0),d={};c.forEach(L=>{const G=L.name;d[G]=(d[G]||0)+(L.quantity||1)});const p=Object.entries(d).sort(([,L],[,G])=>G-L).slice(0,5).map(([L,G])=>({name:L,count:G})),g={};t.forEach(L=>{const G=L.clientName||" ";g[G]=(g[G]||0)+1});const m=Object.entries(g).sort(([,L],[,G])=>G-L).slice(0,5).map(([L,G])=>({name:L,count:G})),x={};t.forEach(L=>{const G=L.volunteerName||" ";x[G]=(x[G]||0)+1});const _=Object.entries(x).sort(([,L],[,G])=>G-L).slice(0,5).map(([L,G])=>({name:L,count:G})),C=new Date().getMonth(),S=new Date().getFullYear(),k=t.filter(L=>{const G=i(L.pickupDate);return G?G.getMonth()===C&&G.getFullYear()===S:!1}).length,M=C===0?11:C-1,P=C===0?S-1:S,Y=t.filter(L=>{const G=i(L.pickupDate);return G?G.getMonth()===M&&G.getFullYear()===P:!1}).length,z=t.filter(L=>L.pickupDate&&L.returnDate);let F=0;if(z.length>0){const L=z.reduce((G,U)=>{const H=i(U.pickupDate),te=i(U.returnDate);if(!H||!te)return G;const se=Math.ceil((te-H)/(1e3*60*60*24));return G+Math.max(0,se)},0);F=Math.round(L/z.length)}const I=t.filter(L=>L.returnInspection),T=I.reduce((L,G)=>{var U;return(U=G.returnInspection)!=null&&U.itemInspections?L+G.returnInspection.itemInspections.reduce((H,te)=>H+(te.quantityReturned||0),0):L},0),j=I.reduce((L,G)=>{var U;return(U=G.returnInspection)!=null&&U.itemInspections?L+G.returnInspection.itemInspections.filter(H=>H.condition==="damaged").reduce((H,te)=>H+(te.quantityReturned||0),0):L},0),N=I.reduce((L,G)=>{var U;return(U=G.returnInspection)!=null&&U.itemInspections?L+G.returnInspection.itemInspections.filter(H=>H.condition==="lost").reduce((H,te)=>H+Math.max(0,(te.quantityExpected||0)-(te.quantityReturned||0)),0):L},0),R={};t.forEach(L=>{const G=L.eventType||" ";R[G]=(R[G]||0)+1});const D=Object.entries(R).sort(([,L],[,G])=>G-L).slice(0,5).map(([L,G])=>({name:L,count:G}));return{totalLoans:a,activeLoans:s,completedLoans:o,totalItemsLoaned:f,totalItemsReturned:T,damagedItems:j,lostItems:N,mostPopularItems:p,topBorrowers:m,topVolunteers:_,topEventTypes:D,thisMonthLoans:k,lastMonthLoans:Y,averageDuration:F,loansWithInspection:I.length}},[t]);return n?r?v.jsx("div",{className:"modal-overlay",onClick:()=>e(!1),children:v.jsxs("div",{className:"modal-box",dir:"rtl",onClick:i=>i.stopPropagation(),style:{maxWidth:"800px",maxHeight:"90vh",overflowY:"auto"},children:[v.jsx("h2",{style:{textAlign:"center",marginBottom:"2rem",color:"#2196F3"},children:"  "}),v.jsxs("div",{style:{marginBottom:"2rem"},children:[v.jsx("h3",{style:{borderBottom:"2px solid #2196F3",paddingBottom:"0.5rem",marginBottom:"1rem"},children:"  "}),v.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"1rem"},children:[v.jsxs("div",{style:{backgroundColor:"#e3f2fd",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[v.jsx("div",{style:{fontSize:"2rem",fontWeight:"bold",color:"#1976d2"},children:r.totalLoans}),v.jsx("div",{children:'" '})]}),v.jsxs("div",{style:{backgroundColor:"#e8f5e8",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[v.jsx("div",{style:{fontSize:"2rem",fontWeight:"bold",color:"#388e3c"},children:r.completedLoans}),v.jsx("div",{children:" "})]}),v.jsxs("div",{style:{backgroundColor:"#fff3e0",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[v.jsx("div",{style:{fontSize:"2rem",fontWeight:"bold",color:"#f57c00"},children:r.totalItemsLoaned}),v.jsx("div",{children:" "})]}),v.jsxs("div",{style:{backgroundColor:"#f0fdf4",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[v.jsx("div",{style:{fontSize:"2rem",fontWeight:"bold",color:"#10b981"},children:r.totalItemsReturned}),v.jsx("div",{children:" "})]})]})]}),v.jsxs("div",{style:{marginBottom:"2rem"},children:[v.jsx("h3",{style:{borderBottom:"2px solid #2196F3",paddingBottom:"0.5rem",marginBottom:"1rem"},children:"  "}),v.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[v.jsxs("div",{style:{backgroundColor:"#e3f2fd",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[v.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#1976d2"},children:r.thisMonthLoans}),v.jsx("div",{children:" "})]}),v.jsxs("div",{style:{backgroundColor:"#f5f5f5",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[v.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#666"},children:r.lastMonthLoans}),v.jsx("div",{children:"  "})]})]}),r.lastMonthLoans>0&&v.jsx("div",{style:{textAlign:"center",marginTop:"0.5rem",fontSize:"0.9rem"},children:r.thisMonthLoans>r.lastMonthLoans?v.jsxs("span",{style:{color:"#388e3c"},children:["   ",((r.thisMonthLoans-r.lastMonthLoans)/r.lastMonthLoans*100).toFixed(1),"%"]}):r.thisMonthLoans<r.lastMonthLoans?v.jsxs("span",{style:{color:"#d32f2f"},children:["   ",((r.lastMonthLoans-r.thisMonthLoans)/r.lastMonthLoans*100).toFixed(1),"%"]}):v.jsx("span",{style:{color:"#666"},children:"  "})})]}),v.jsxs("div",{style:{marginBottom:"2rem"},children:[v.jsx("h3",{style:{borderBottom:"2px solid #2196F3",paddingBottom:"0.5rem",marginBottom:"1rem"},children:"  "}),v.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"1rem",marginBottom:"1rem"},children:[v.jsxs("div",{style:{backgroundColor:"#f8f9fa",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[v.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#1976d2"},children:r.totalItemsLoaned}),v.jsx("div",{children:'"  '})]}),v.jsxs("div",{style:{backgroundColor:"#e8f5e8",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[v.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#10b981"},children:r.totalItemsReturned}),v.jsx("div",{children:" "})]}),r.damagedItems>0&&v.jsxs("div",{style:{backgroundColor:"#fff3e0",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[v.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#f59e0b"},children:r.damagedItems}),v.jsx("div",{children:" "})]}),r.lostItems>0&&v.jsxs("div",{style:{backgroundColor:"#ffebee",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[v.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#ef4444"},children:r.lostItems}),v.jsx("div",{children:" "})]})]}),r.mostPopularItems.length>0&&v.jsxs("div",{children:[v.jsx("h4",{style:{marginBottom:"0.5rem"},children:"   :"}),r.mostPopularItems.map((i,a)=>v.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0.5rem",backgroundColor:a===0?"#fff3e0":"#f5f5f5",borderRadius:"4px",marginBottom:"0.3rem"},children:[v.jsxs("span",{children:[a+1,". ",i.name]}),v.jsxs("span",{style:{fontWeight:"bold",color:"#1976d2"},children:[i.count," "]})]},a))]})]}),r.topBorrowers.length>0&&v.jsxs("div",{style:{marginBottom:"2rem"},children:[v.jsx("h3",{style:{borderBottom:"2px solid #2196F3",paddingBottom:"0.5rem",marginBottom:"1rem"},children:"   "}),r.topBorrowers.map((i,a)=>v.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0.5rem",backgroundColor:a===0?"#e8f5e8":"#f5f5f5",borderRadius:"4px",marginBottom:"0.3rem"},children:[v.jsxs("span",{children:[a+1,". ",i.name]}),v.jsxs("span",{style:{fontWeight:"bold",color:"#388e3c"},children:[i.count," "]})]},a))]}),r.topVolunteers.length>0&&v.jsxs("div",{style:{marginBottom:"2rem"},children:[v.jsx("h3",{style:{borderBottom:"2px solid #2196F3",paddingBottom:"0.5rem",marginBottom:"1rem"},children:"   "}),r.topVolunteers.map((i,a)=>v.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0.5rem",backgroundColor:a===0?"#e3f2fd":"#f5f5f5",borderRadius:"4px",marginBottom:"0.3rem"},children:[v.jsxs("span",{children:[a+1,". ",i.name]}),v.jsxs("span",{style:{fontWeight:"bold",color:"#1976d2"},children:[i.count," "]})]},a))]}),r.topEventTypes.length>0&&v.jsxs("div",{style:{marginBottom:"2rem"},children:[v.jsx("h3",{style:{borderBottom:"2px solid #2196F3",paddingBottom:"0.5rem",marginBottom:"1rem"},children:"   "}),r.topEventTypes.map((i,a)=>v.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0.5rem",backgroundColor:a===0?"#f0fdf4":"#f5f5f5",borderRadius:"4px",marginBottom:"0.3rem"},children:[v.jsxs("span",{children:[a+1,". ",i.name]}),v.jsxs("span",{style:{fontWeight:"bold",color:"#10b981"},children:[i.count," "]})]},a))]}),r.averageDuration>0&&v.jsxs("div",{style:{marginBottom:"2rem"},children:[v.jsx("h3",{style:{borderBottom:"2px solid #2196F3",paddingBottom:"0.5rem",marginBottom:"1rem"},children:"   "}),v.jsxs("div",{style:{backgroundColor:"#f8f9fa",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[v.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#1976d2"},children:[r.averageDuration," "]}),v.jsxs("div",{style:{fontSize:"0.9rem",color:"#666"},children:["(  ",t.filter(i=>i.pickupDate&&i.returnDate).length," )"]})]})]}),r.loansWithInspection>0&&v.jsxs("div",{style:{marginBottom:"2rem"},children:[v.jsx("h3",{style:{borderBottom:"2px solid #2196F3",paddingBottom:"0.5rem",marginBottom:"1rem"},children:"   "}),v.jsxs("div",{style:{backgroundColor:"#f0fdf4",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[v.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#10b981"},children:r.loansWithInspection}),v.jsxs("div",{style:{fontSize:"0.9rem",color:"#666"},children:["     ",r.totalLoans,' "']}),v.jsxs("div",{style:{fontSize:"0.8rem",color:"#666",marginTop:"0.5rem"},children:["(",(r.loansWithInspection/r.totalLoans*100).toFixed(1),"%  )"]})]})]}),v.jsx("div",{className:"modal-actions",children:v.jsx("button",{className:"btn btn-blue",onClick:()=>e(!1),children:" "})})]})}):v.jsx("div",{className:"modal-overlay",onClick:()=>e(!1),children:v.jsxs("div",{className:"modal-box",dir:"rtl",onClick:i=>i.stopPropagation(),children:[v.jsx("h2",{style:{textAlign:"center",marginBottom:"2rem"},children:"  "}),v.jsx("p",{style:{textAlign:"center"},children:"  "}),v.jsx("div",{className:"modal-actions",children:v.jsx("button",{className:"btn btn-gray",onClick:()=>e(!1),children:""})})]})}):null},QY=()=>{var c,f,d,p,g,m;const[n,e]=le.useState(!1),[t,r]=le.useState(null),[i,a]=le.useState(null);le.useEffect(()=>{o()},[]);const o=async()=>{e(!0),a(null);try{console.log(" Manual: Starting manual email check from history page...");const x=await kC();a(x)}catch(x){console.error(" Manual: Error in email check:",x),a({reminders:{sent:0,alreadySent:0,errors:[],skippedToday:0},totalFound:0,totalSent:0,totalErrors:1,errors:[{error:x.message}],message:"  "})}finally{e(!1),r(new Date)}},s=()=>{o()};return v.jsxs("div",{style:{padding:"2rem",maxWidth:"900px",margin:"0 auto",fontFamily:"Arial, sans-serif"},dir:"rtl",children:[v.jsxs("div",{style:{background:"linear-gradient(to right, #20b2aa, #48d1cc)",color:"white",padding:"2rem",borderRadius:"12px",marginBottom:"2rem",textAlign:"center"},children:[v.jsx("h1",{style:{margin:0,fontSize:"1.8rem"},children:"   "}),v.jsx("p",{style:{margin:"0.5rem 0 0 0",opacity:.9},children:"          "})]}),v.jsxs("div",{style:{background:"white",border:"1px solid #e5e7eb",borderRadius:"12px",padding:"2rem",marginBottom:"2rem",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[v.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[v.jsx("h2",{style:{margin:0,color:"#1f2937"},children:" "}),v.jsx("button",{onClick:s,disabled:n,style:{background:n?"#9ca3af":"linear-gradient(45deg, #20b2aa, #48d1cc)",color:"white",border:"none",padding:"0.75rem 1.5rem",borderRadius:"8px",cursor:n?"not-allowed":"pointer",fontSize:"1rem",fontWeight:"bold"},children:n?" ...":"   "})]}),v.jsxs("div",{style:{background:"linear-gradient(135deg, #f0fdfa, #ecfeff)",border:"1px solid #5eead4",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:[v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem"},children:[v.jsx("span",{style:{fontSize:"1.5rem"},children:""}),v.jsx("h3",{style:{margin:0,color:"#0f766e"},children:"  "})]}),v.jsx("p",{style:{margin:0,color:"#0f766e",fontSize:"0.9rem"},children:"        (8:00-20:00,  )"}),v.jsx("p",{style:{margin:"0.5rem 0 0 0",color:"#0f766e",fontSize:"0.8rem",fontStyle:"italic"},children:"         -   !"})]}),t&&v.jsxs("div",{style:{background:"#f3f4f6",padding:"1rem",borderRadius:"8px",marginBottom:"1rem",fontSize:"0.9rem",color:"#6b7280"},children:[v.jsx("strong",{children:"  ():"})," ",t.toLocaleString("he-IL")]}),i&&v.jsxs("div",{style:{background:i.totalErrors>0?"#fef2f2":i.weekend?"#f0f9ff":"linear-gradient(135deg, #f0fdfa, #ecfeff)",border:`1px solid ${i.totalErrors>0?"#fecaca":i.weekend?"#7dd3fc":"#5eead4"}`,borderRadius:"8px",padding:"1.5rem"},children:[v.jsx("h3",{style:{margin:"0 0 1rem 0",color:i.totalErrors>0?"#dc2626":i.weekend?"#0369a1":"#0f766e"},children:i.message}),i.weekend&&v.jsxs("div",{style:{background:"#e0f2fe",border:"1px solid #0284c7",borderRadius:"8px",padding:"1rem",marginBottom:"1rem",textAlign:"center"},children:[v.jsx("p",{style:{margin:0,color:"#0369a1",fontWeight:"bold"},children:"         "}),v.jsx("p",{style:{margin:"0.5rem 0 0 0",color:"#0369a1",fontSize:"0.9rem"},children:"      "})]}),!i.weekend&&v.jsxs("div",{style:{background:"linear-gradient(135deg, #f0fdfa, #ecfeff)",padding:"1.5rem",borderRadius:"8px",border:"1px solid #5eead4",marginBottom:"1rem"},children:[v.jsx("h4",{style:{margin:"0 0 1rem 0",color:"#0f766e"},children:"   (2  )"}),v.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(100px, 1fr))",gap:"1rem",textAlign:"center"},children:[v.jsxs("div",{children:[v.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#3b82f6"},children:i.totalFound||0}),v.jsx("div",{style:{fontSize:"0.875rem",color:"#6b7280"},children:""})]}),v.jsxs("div",{children:[v.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#10b981"},children:((c=i.reminders)==null?void 0:c.sent)||0}),v.jsx("div",{style:{fontSize:"0.875rem",color:"#6b7280"},children:""})]}),v.jsxs("div",{children:[v.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#6b7280"},children:((f=i.reminders)==null?void 0:f.alreadySent)||0}),v.jsx("div",{style:{fontSize:"0.875rem",color:"#6b7280"},children:" "})]}),v.jsxs("div",{children:[v.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#f59e0b"},children:((d=i.reminders)==null?void 0:d.skippedToday)||0}),v.jsx("div",{style:{fontSize:"0.875rem",color:"#6b7280"},children:" "})]}),v.jsxs("div",{children:[v.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#ef4444"},children:((g=(p=i.reminders)==null?void 0:p.errors)==null?void 0:g.length)||0}),v.jsx("div",{style:{fontSize:"0.875rem",color:"#6b7280"},children:""})]})]})]}),!i.weekend&&i.totalErrors>0&&v.jsxs("div",{style:{background:"white",border:"1px solid #fecaca",borderRadius:"6px",padding:"1rem"},children:[v.jsx("h4",{style:{margin:"0 0 0.5rem 0",color:"#dc2626"},children:":"}),(((m=i.reminders)==null?void 0:m.errors)||[]).map((x,_)=>v.jsxs("div",{style:{fontSize:"0.875rem",color:"#7f1d1d",marginBottom:"0.25rem"},children:[v.jsx("strong",{children:"[]"})," ",x.clientName?`${x.clientName} (${x.email})`:" ",": ",x.error]},_))]})]})]}),v.jsxs("div",{style:{background:"#fdf2f8",border:"1px solid #f8b2dd",borderRadius:"12px",padding:"2rem"},children:[v.jsx("h3",{style:{margin:"0 0 1rem 0",color:"#be185d"},children:"    "}),v.jsxs("ul",{style:{color:"#be185d",paddingRight:"1.5rem"},children:[v.jsxs("li",{children:[v.jsx("strong",{children:"   :"}),"       (8:00-20:00)"]}),v.jsxs("li",{children:[v.jsx("strong",{children:"  :"}),"   2    "]}),v.jsxs("li",{children:[v.jsx("strong",{children:"  :"}),"          "]}),v.jsxs("li",{children:[v.jsx("strong",{children:"  :"}),"     "]}),v.jsxs("li",{children:[v.jsx("strong",{children:"  :"}),"      "]}),v.jsxs("li",{children:[v.jsx("strong",{children:"  :"}),"         "]}),v.jsxs("li",{children:[v.jsx("strong",{children:"  :"}),"      "]})]}),v.jsxs("div",{style:{background:"linear-gradient(135deg, #fdf2f8, #fce7f3)",border:"1px solid #f8b2dd",borderRadius:"8px",padding:"1rem",marginTop:"1rem"},children:[v.jsx("h4",{style:{margin:"0 0 0.5rem 0",color:"#be185d"},children:"   -   !"}),v.jsxs("p",{style:{margin:0,color:"#be185d",fontSize:"0.9rem"},children:[" ",v.jsx("strong",{children:" "})," -    ",v.jsx("br",{})," ",v.jsx("strong",{children:"   "})," -    ",v.jsx("br",{})," ",v.jsx("strong",{children:"  "})," -  ",v.jsx("br",{})," ",v.jsx("strong",{children:" "})," -  "]})]})]})]})},ZY=({item:n,size:e=60})=>{const t=n.imageUrl||(n.images&&n.images.length>0?n.images[0]:null);return t?v.jsx("div",{style:{width:e,height:e,borderRadius:"8px",border:"1px solid #e5e7eb",overflow:"hidden",flexShrink:0,background:"#f9fafb"},children:v.jsx("img",{src:t,alt:n.name,style:{width:"100%",height:"100%",objectFit:"cover"},onError:r=>{r.target.parentNode.innerHTML=`
            <div style="
              width: 100%; 
              height: 100%; 
              display: flex; 
              align-items: center; 
              justify-content: center;
              background: #f9fafb;
            ">
              <svg width="${e*.4}" height="${e*.4}" viewBox="0 0 24 24" fill="#9ca3af">
                <path d="M20 7h-3V6a4 4 0 0 0-4-4h-2a4 4 0 0 0-4 4v1H4a1 1 0 0 0-1 1v11a3 3 0 0 0 3 3h12a3 3 0 0 0 3-3V8a1 1 0 0 0-1-1zM9 6a2 2 0 0 1 2-2h2a2 2 0 0 1 2 2v1H9V6zm8 15H7a1 1 0 0 1-1-1V9h2v1a1 1 0 0 0 2 0V9h4v1a1 1 0 0 0 2 0V9h2v11a1 1 0 0 1-1 1z"/>
              </svg>
            </div>
          `}})}):v.jsx("div",{style:{width:e,height:e,borderRadius:"8px",border:"1px solid #e5e7eb",display:"flex",alignItems:"center",justifyContent:"center",background:"#f9fafb",flexShrink:0},children:v.jsx(Gs,{size:e*.4,style:{color:"#9ca3af"}})})},JY=()=>{var P,Y;const[n,e]=le.useState([]),[t,r]=le.useState([]),[i,a]=le.useState(null),[o,s]=le.useState(""),[c,f]=le.useState(""),[d,p]=le.useState(""),[g,m]=le.useState(!0),[x,_]=le.useState(!1);le.useEffect(()=>{(async()=>{try{m(!0),console.log("    ...");const F=Nl(hn(wt,"orders")),T=(await nr(F)).docs.map(U=>({id:U.id,...U.data()}));console.log("  :",T),console.log(" :",T.map(U=>({id:U.id,client:U.clientName,status:U.status}))),console.log("   ...");const j=Nl(hn(wt,"orders"),ru("status","==","closed")),R=(await nr(j)).docs.map(U=>({id:U.id,...U.data()}));console.log("  :",R),e(R),console.log("   ...");const D=Nl(hn(wt,"orders"),ru("status","==","returned")),G=(await nr(D)).docs.map(U=>({id:U.id,...U.data()}));console.log("  :",G)}catch(F){console.error("   :",F)}finally{m(!1)}})()},[]);const C=z=>z?(z.seconds?new Date(z.seconds*1e3):new Date(z)).toLocaleDateString("he-IL",{year:"numeric",month:"2-digit",day:"2-digit"}):"",S=z=>z?(z.seconds?new Date(z.seconds*1e3):new Date(z)).toLocaleString("he-IL",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}):"",k=z=>{var D;if(!((D=z.returnInspection)!=null&&D.itemInspections))return{totalItemsExpected:0,totalItemsReturned:0,totalItemsNotReturned:0,totalDamagedItems:0,totalLostItems:0};const F=z.returnInspection.itemInspections,I=F.reduce((L,G)=>L+(G.quantityExpected||0),0),T=F.reduce((L,G)=>L+(G.quantityReturned||0),0),j=F.reduce((L,G)=>L+Math.max(0,(G.quantityExpected||0)-(G.quantityReturned||0)),0),N=F.filter(L=>L.condition==="damaged").reduce((L,G)=>L+(G.quantityReturned||0),0),R=F.filter(L=>L.condition==="lost").reduce((L,G)=>L+Math.max(0,(G.quantityExpected||0)-(G.quantityReturned||0)),0);return{totalItemsExpected:I,totalItemsReturned:T,totalItemsNotReturned:j,totalDamagedItems:N,totalLostItems:R}};le.useEffect(()=>{const z=c?new Date(c):null,F=d?new Date(d):null,I=n.filter(T=>{var G,U,H;const j=((G=T.clientName)==null?void 0:G.toLowerCase().includes(o.toLowerCase()))||"",N=((U=T.phone)==null?void 0:U.includes(o))||"",R=j||N,D=(H=T.pickupDate)!=null&&H.seconds?new Date(T.pickupDate.seconds*1e3):new Date(T.pickupDate),L=(!z||D>=z)&&(!F||D<=F);return R&&L});r(I)},[o,c,d,n]);const M=z=>{var j,N;const F=k(z),I=`
      <!DOCTYPE html>
      <html dir="rtl" lang="he">
      <head>
          <meta charset="UTF-8">
          <meta name="viewport" content="width=device-width, initial-scale=1.0">
          <title>  - ${z.clientName}</title>
          <style>
              body { 
                  font-family: Arial, sans-serif; 
                  direction: rtl; 
                  text-align: right;
                  margin: 20px;
                  line-height: 1.6;
                  padding-bottom: 100px;
              }
              .header { 
                  text-align: center; 
                  margin-bottom: 30px;
                  border-bottom: 2px solid #333;
                  padding-bottom: 15px;
              }
              .header h1 {
                  font-size: 24px;
                  color: #2c5aa0;
                  margin: 0 0 5px 0;
              }
              .header h2 {
                  font-size: 20px;
                  color: #333;
                  margin: 0 0 10px 0;
              }
              .info-grid { 
                  display: grid; 
                  grid-template-columns: 1fr 1fr; 
                  gap: 20px; 
                  margin-bottom: 30px;
              }
              .info-item { 
                  margin-bottom: 10px; 
              }
              .label { 
                  font-weight: bold; 
                  color: #333;
              }
              table { 
                  width: 100%; 
                  border-collapse: collapse; 
                  margin-bottom: 30px;
              }
              th, td { 
                  border: 1px solid #ddd; 
                  padding: 8px; 
                  text-align: center;
              }
              th { 
                  background-color: #f5f5f5; 
                  font-weight: bold;
              }
              .summary { 
                  background-color: #f9f9f9; 
                  padding: 20px; 
                  border-radius: 5px;
                  margin-top: 20px;
              }
              .summary h3 {
                  margin-top: 0;
                  color: #2c5aa0;
              }
              
              .download-btn {
                  position: fixed;
                  bottom: 20px;
                  right: 20px;
                  background: linear-gradient(45deg, #20b2aa, #48d1cc);
                  color: white;
                  border: none;
                  padding: 15px 25px;
                  border-radius: 50px;
                  cursor: pointer;
                  font-size: 16px;
                  font-weight: bold;
                  box-shadow: 0 4px 15px rgba(32, 178, 170, 0.3);
                  transition: all 0.3s ease;
                  z-index: 1000;
                  display: flex;
                  align-items: center;
                  gap: 8px;
              }
              
              .download-btn:hover {
                  transform: translateY(-2px);
                  box-shadow: 0 6px 20px rgba(32, 178, 170, 0.4);
              }
              
              .download-btn:active {
                  transform: translateY(0);
              }
              
              @media print {
                  body { margin: 0; font-size: 14px; }
                  .header { page-break-after: avoid; }
                  .download-btn { display: none !important; }
              }
          </style>
      </head>
      <body>
          <button class="download-btn" onclick="window.print(); return false;">
                
          </button>
          
          <div class="header">
              <h1>"  </h1>
              <h2>  - ${z.clientName}</h2>
              <p> : ${new Date().toLocaleDateString("he-IL")}</p>
          </div>
          
          <div class="info-grid">
              <div>
                  <div class="info-item">
                      <span class="label">:</span> ${z.volunteerName}
                  </div>
                  <div class="info-item">
                      <span class="label">:</span> ${z.phone}
                  </div>
                  <div class="info-item">
                      <span class="label">:</span> ${z.address}
                  </div>
              </div>
              <div>
                  <div class="info-item">
                      <span class="label"> :</span> ${C(z.pickupDate)}
                  </div>
                  <div class="info-item">
                      <span class="label"> :</span> ${C(z.returnDate)}
                  </div>
                  <div class="info-item">
                      <span class="label"> :</span> ${z.eventType}
                  </div>
              </div>
          </div>

          <h3> </h3>
          <table>
              <thead>
                  <tr>
                      <th>#</th>
                      <th> </th>
                      <th> </th>
                      <th></th>
                      <th>/ </th>
                  </tr>
              </thead>
              <tbody>
                  ${((j=z.items)==null?void 0:j.map((R,D)=>{var ee,ie;const L=(ie=(ee=z.returnInspection)==null?void 0:ee.itemInspections)==null?void 0:ie.find($=>$.itemId===R.id||$.name===R.name),G=R.quantity,U=(L==null?void 0:L.quantityReturned)||0,H=Math.max(0,G-U);let te=0,se=H;return L&&U>0&&(L.condition==="good"?te=U:L.condition==="damaged"?se+=U:te=U),`
                      <tr>
                          <td>${D+1}</td>
                          <td>${R.name}</td>
                          <td>${G}</td>
                          <td>${te}</td>
                          <td>${se}</td>
                      </tr>
                    `}).join(""))||'<tr><td colspan="5"> </td></tr>'}
              </tbody>
          </table>

          ${z.returnInspection?`
          <div class="summary">
              <h3 style="text-align: center;">  </h3>
              <div style="text-align: center;">
                  <div class="info-item">
                      <span class="label">"  :</span> ${F.totalItemsExpected}
                  </div>
                  <div class="info-item">
                      <span class="label">"  :</span> ${F.totalItemsReturned}
                  </div>
                  <div class="info-item">
                      <span class="label">  :</span> ${F.totalItemsNotReturned}
                  </div>
              </div>
              
              ${(N=z.returnInspection.summary)!=null&&N.managerNotes?`
              <div class="info-item" style="margin-top: 20px; text-align: center;">
                  <span class="label"> :</span><br>
                  ${z.returnInspection.summary.managerNotes}
              </div>
              `:""}
          </div>
          `:""}
      </body>
      </html>
    `,T=window.open("","_blank","width=800,height=900,scrollbars=yes,resizable=yes");T.document.write(I),T.document.close(),T.focus()};return g?v.jsx("div",{className:"flex items-center justify-center min-h-screen",children:v.jsxs("div",{className:"text-center",children:[v.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),v.jsx("p",{className:"text-gray-600",children:"  ..."})]})}):v.jsxs("div",{style:{padding:"1rem",maxWidth:"1200px",margin:"0 auto",fontFamily:"Arial, sans-serif"},dir:"rtl",children:[v.jsx("style",{children:`
        @media (max-width: 768px) {
          .date-input {
            appearance: none !important;
            -webkit-appearance: none !important;
            -moz-appearance: none !important;
            background: white !important;
            border: 2px solid #e5e7eb !important;
            border-radius: 8px !important;
            padding: 12px !important;
            font-size: 16px !important;
            text-align: center !important;
            direction: ltr !important;
            width: 100% !important;
            box-sizing: border-box !important;
            cursor: pointer !important;
            letter-spacing: 1px !important;
          }
          
          .date-input::-webkit-calendar-picker-indicator {
            opacity: 0 !important;
            position: absolute !important;
            left: 0 !important;
            right: 0 !important;
            width: 100% !important;
            height: 100% !important;
            cursor: pointer !important;
            background: transparent !important;
          }
          
          .date-input::-webkit-inner-spin-button,
          .date-input::-webkit-outer-spin-button {
            opacity: 0 !important;
            -webkit-appearance: none !important;
            margin: 0 !important;
          }
        }
      `}),v.jsxs("div",{style:{background:"linear-gradient(to right, #20b2aa, #48d1cc)",color:"white",padding:"1.5rem",borderRadius:"12px",marginBottom:"2rem",display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:"1rem"},children:[v.jsxs("div",{style:{textAlign:window.innerWidth<768?"center":"right",flex:"1"},children:[v.jsx("h1",{style:{fontSize:"1.8rem",fontWeight:"bold",margin:0,marginBottom:"0.5rem"},children:"  "}),v.jsx("p",{style:{fontSize:"0.95rem",opacity:.9,margin:0},children:"      "})]}),v.jsxs("button",{onClick:()=>_(!0),style:{background:"rgba(255, 255, 255, 0.2)",border:"2px solid rgba(255, 255, 255, 0.3)",color:"white",padding:"0.75rem 1.5rem",borderRadius:"8px",cursor:"pointer",fontSize:"1rem",fontWeight:"bold",display:"flex",alignItems:"center",gap:"0.5rem",transition:"all 0.2s ease",backdropFilter:"blur(10px)",whiteSpace:"nowrap"},onMouseEnter:z=>{z.currentTarget.style.background="rgba(255, 255, 255, 0.3)",z.currentTarget.style.transform="translateY(-2px)"},onMouseLeave:z=>{z.currentTarget.style.background="rgba(255, 255, 255, 0.2)",z.currentTarget.style.transform="translateY(0)"},children:[v.jsx(cB,{size:20})," "]})]}),!i&&v.jsxs(v.Fragment,{children:[v.jsxs("div",{style:{background:"white",padding:window.innerWidth<768?"1rem":"1.5rem",borderRadius:"12px",marginBottom:"2rem",boxShadow:"0 2px 8px rgba(0,0,0,0.1)",border:"1px solid #e5e7eb"},children:[v.jsxs("div",{style:{display:"flex",flexDirection:window.innerWidth<768?"column":"row",gap:"1rem",alignItems:window.innerWidth<768?"stretch":"end"},children:[v.jsxs("div",{style:{flex:window.innerWidth<768?"none":"2"},children:[v.jsxs("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:"#374151",marginBottom:"0.5rem"},children:[v.jsx(lx,{size:16,style:{display:"inline",marginLeft:"0.25rem"}}),"     "]}),v.jsx("input",{type:"text",value:o,onChange:z=>s(z.target.value),style:{width:"100%",padding:"0.75rem",border:"2px solid #e5e7eb",borderRadius:"8px",fontSize:"1rem",boxSizing:"border-box"},placeholder:"   ..."})]}),v.jsxs("div",{style:{flex:"1"},children:[v.jsxs("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:"#374151",marginBottom:"0.5rem"},children:[v.jsx(uc,{size:16,style:{display:"inline",marginLeft:"0.25rem"}}),""]}),v.jsx("input",{type:"date",value:c,onChange:z=>f(z.target.value),className:"date-input",style:{width:"100%",padding:"0.75rem",border:"2px solid #e5e7eb",borderRadius:"8px",fontSize:"1rem",boxSizing:"border-box"}})]}),v.jsxs("div",{style:{flex:"1"},children:[v.jsxs("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:"#374151",marginBottom:"0.5rem"},children:[v.jsx(uc,{size:16,style:{display:"inline",marginLeft:"0.25rem"}})," "]}),v.jsx("input",{type:"date",value:d,onChange:z=>p(z.target.value),className:"date-input",style:{width:"100%",padding:"0.75rem",border:"2px solid #e5e7eb",borderRadius:"8px",fontSize:"1rem",boxSizing:"border-box"}})]})]}),v.jsxs("div",{style:{marginTop:"1rem",padding:"0.75rem",background:"#f3f4f6",borderRadius:"8px",fontSize:"0.875rem",color:"#374151"},children:[" ",t.length,"   ",n.length,' "']})]}),v.jsx("div",{style:{display:"grid",gridTemplateColumns:window.innerWidth<768?"1fr":window.innerWidth<1024?"repeat(2, 1fr)":"repeat(3, 1fr)",gap:window.innerWidth<768?"1rem":"1.5rem"},children:t.length===0?v.jsxs("div",{style:{gridColumn:"1 / -1",textAlign:"center",padding:"3rem",background:"white",borderRadius:"12px",border:"1px solid #e5e7eb"},children:[v.jsx(Gs,{size:48,style:{color:"#9ca3af",marginBottom:"1rem"}}),v.jsx("h3",{style:{fontSize:"1.25rem",color:"#6b7280",margin:0},children:"  "}),v.jsx("p",{style:{color:"#9ca3af",margin:"0.5rem 0 0 0"},children:"    "})]}):t.map(z=>{var F;return v.jsxs("div",{onClick:()=>a(z),style:{background:"white",padding:window.innerWidth<768?"1rem":"1.5rem",borderRadius:"12px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)",border:"1px solid #e5e7eb",cursor:"pointer",transition:"all 0.2s ease",width:"100%",boxSizing:"border-box"},onMouseEnter:I=>{I.currentTarget.style.boxShadow="0 4px 12px rgba(0,0,0,0.15)",I.currentTarget.style.transform="translateY(-2px)"},onMouseLeave:I=>{I.currentTarget.style.boxShadow="0 2px 8px rgba(0,0,0,0.1)",I.currentTarget.style.transform="translateY(0)"},children:[v.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"1rem",flexWrap:"wrap",gap:"0.5rem"},children:[v.jsxs("div",{style:{flex:"1",minWidth:"0"},children:[v.jsx("h3",{style:{fontSize:window.innerWidth<768?"1rem":"1.25rem",fontWeight:"bold",margin:0,color:"#1f2937",wordBreak:"break-word"},children:z.clientName}),v.jsxs("p",{style:{fontSize:window.innerWidth<768?"0.75rem":"0.875rem",color:"#6b7280",margin:"0.25rem 0 0 0",display:"flex",alignItems:"center",gap:"0.25rem"},children:[v.jsx(lC,{size:window.innerWidth<768?12:14}),z.volunteerName]})]}),v.jsx("div",{style:{background:"#10b981",color:"white",padding:"0.25rem 0.75rem",borderRadius:"20px",fontSize:window.innerWidth<768?"0.6rem":"0.75rem",fontWeight:"bold",whiteSpace:"nowrap"},children:""})]}),v.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr",gap:"0.5rem",fontSize:window.innerWidth<768?"0.75rem":"0.875rem",color:"#6b7280"},children:[v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[v.jsx(id,{size:window.innerWidth<768?12:14}),v.jsx("span",{style:{wordBreak:"break-all"},children:z.phone})]}),v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[v.jsx(gd,{size:window.innerWidth<768?12:14}),v.jsxs("span",{style:{fontSize:window.innerWidth<768?"0.7rem":"0.875rem"},children:[C(z.pickupDate),"  ",C(z.returnDate)]})]}),v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[v.jsx(Gs,{size:window.innerWidth<768?12:14}),(F=z.items)==null?void 0:F.reduce((I,T)=>I+T.quantity,0)," "]})]})]},z.id)})})]}),i&&v.jsxs("div",{style:{background:"white",padding:window.innerWidth<768?"1rem":"2rem",borderRadius:"12px",boxShadow:"0 4px 16px rgba(0,0,0,0.1)",border:"1px solid #e5e7eb"},children:[v.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"2rem",paddingBottom:"1rem",borderBottom:"2px solid #e5e7eb",flexWrap:"wrap",gap:"1rem"},children:[v.jsxs("div",{children:[v.jsxs("h2",{style:{fontSize:window.innerWidth<768?"1.25rem":"2rem",fontWeight:"bold",margin:0,color:"#1f2937"},children:[" - ",i.clientName]}),v.jsxs("p",{style:{fontSize:window.innerWidth<768?"0.875rem":"1rem",color:"#6b7280",margin:"0.5rem 0 0 0"},children:[" -",S((P=i.returnInspection)==null?void 0:P.completedAt)]})]}),v.jsxs("button",{onClick:()=>a(null),style:{background:"#6b7280",color:"white",padding:"0.75rem 1.5rem",borderRadius:"8px",border:"none",cursor:"pointer",fontSize:window.innerWidth<768?"0.875rem":"1rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[v.jsx(Jj,{size:16})," "]})]}),v.jsxs("div",{style:{display:"grid",gridTemplateColumns:window.innerWidth<768?"1fr":"repeat(auto-fit, minmax(250px, 1fr))",gap:"1rem",marginBottom:"2rem",padding:"1.5rem",background:"#f9fafb",borderRadius:"8px",border:"1px solid #e5e7eb"},children:[v.jsxs("div",{children:[v.jsx("span",{style:{fontSize:"0.875rem",color:"#6b7280",display:"block"},children:""}),v.jsx("span",{style:{fontSize:"1.1rem",fontWeight:"bold",color:"#1f2937"},children:i.clientName})]}),v.jsxs("div",{children:[v.jsx("span",{style:{fontSize:"0.875rem",color:"#6b7280",display:"block"},children:""}),v.jsx("span",{style:{fontSize:"1.1rem",fontWeight:"bold",color:"#1f2937"},children:i.volunteerName})]}),v.jsxs("div",{children:[v.jsx("span",{style:{fontSize:"0.875rem",color:"#6b7280",display:"block"},children:""}),v.jsx("span",{style:{fontSize:"1.1rem",fontWeight:"bold",color:"#1f2937"},children:i.phone})]}),v.jsxs("div",{children:[v.jsx("span",{style:{fontSize:"0.875rem",color:"#6b7280",display:"block"},children:""}),v.jsx("span",{style:{fontSize:"1.1rem",fontWeight:"bold",color:"#1f2937"},children:i.address})]}),v.jsxs("div",{children:[v.jsx("span",{style:{fontSize:"0.875rem",color:"#6b7280",display:"block"},children:""}),v.jsxs("span",{style:{fontSize:"1.1rem",fontWeight:"bold",color:"#1f2937"},children:[C(i.pickupDate),"  ",C(i.returnDate)]})]}),v.jsxs("div",{children:[v.jsx("span",{style:{fontSize:"0.875rem",color:"#6b7280",display:"block"},children:" "}),v.jsx("span",{style:{fontSize:"1.1rem",fontWeight:"bold",color:"#1f2937"},children:i.eventType})]})]}),v.jsxs("div",{style:{marginBottom:"2rem"},children:[v.jsx("h3",{style:{fontSize:"1.5rem",fontWeight:"bold",margin:"0 0 1rem 0",color:"#1f2937"},children:"   "}),v.jsx("div",{style:{display:"grid",gap:"1rem"},children:(Y=i.items)==null?void 0:Y.map((z,F)=>{var T,j;const I=(j=(T=i.returnInspection)==null?void 0:T.itemInspections)==null?void 0:j.find(N=>N.itemId===z.id||N.name===z.name);return v.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"1rem",background:"white",border:"1px solid #e5e7eb",borderRadius:"8px",flexWrap:window.innerWidth<768?"wrap":"nowrap",gap:"0.5rem"},children:[v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",flex:"1",minWidth:"200px"},children:[v.jsx(ZY,{item:z,size:window.innerWidth<768?50:60}),v.jsxs("div",{children:[v.jsx("h4",{style:{fontSize:"1.1rem",fontWeight:"bold",margin:0,color:"#1f2937"},children:z.name}),v.jsxs("p",{style:{fontSize:"0.875rem",color:"#6b7280",margin:"0.25rem 0 0 0"},children:[": ",z.quantity," | : ",(()=>{const N=(I==null?void 0:I.quantityReturned)||0;return I&&N>0&&I.condition==="good"||I&&N>0&&I.condition!=="damaged"?N:0})()," | /: ",(()=>{const N=z.quantity,R=(I==null?void 0:I.quantityReturned)||0;let L=Math.max(0,N-R);return I&&R>0&&I.condition==="damaged"&&(L+=R),L})()]})]})]}),v.jsx("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:(()=>{const N=z.quantity,R=(I==null?void 0:I.quantityReturned)||0;let L=Math.max(0,N-R);return I&&R>0&&I.condition==="damaged"&&(L+=R),L===0?v.jsxs(v.Fragment,{children:[v.jsx(xf,{size:16,style:{color:"#10b981"}}),v.jsx("span",{style:{color:"#10b981",fontWeight:"bold",fontSize:"0.875rem"},children:" "})]}):v.jsxs(v.Fragment,{children:[v.jsx($1,{size:16,style:{color:"#ef4444"}}),v.jsxs("span",{style:{color:"#ef4444",fontWeight:"bold",fontSize:"0.875rem"},children:[L," /"]})]})})()})]},F)})})]}),v.jsx("div",{style:{display:"flex",justifyContent:"center",gap:"1rem",flexWrap:"wrap",marginTop:"3rem"},children:v.jsxs("button",{onClick:()=>M(i),style:{background:"linear-gradient(to right, #10b981, #059669)",color:"white",padding:"1rem 2rem",borderRadius:"12px",border:"none",cursor:"pointer",fontSize:"1.2rem",fontWeight:"bold",display:"flex",alignItems:"center",gap:"0.75rem",boxShadow:"0 4px 12px rgba(16, 185, 129, 0.3)",transition:"all 0.3s ease",minWidth:window.innerWidth<768?"100%":"250px",justifyContent:"center"},onMouseEnter:z=>{z.currentTarget.style.transform="translateY(-2px)",z.currentTarget.style.boxShadow="0 6px 16px rgba(16, 185, 129, 0.4)"},onMouseLeave:z=>{z.currentTarget.style.transform="translateY(0)",z.currentTarget.style.boxShadow="0 4px 12px rgba(16, 185, 129, 0.3)"},children:[v.jsx(CB,{size:20}),"   "]})})]}),v.jsx(KY,{showStatsModal:x,setShowStatsModal:_,loanHistory:n}),v.jsx(QY,{})]})},eX=()=>{const[n,e]=le.useState(""),t="054-4773388",r=async(o,s)=>{try{await navigator.clipboard.writeText(o),e(s),setTimeout(()=>e(""),2e3)}catch(c){console.error("Failed to copy text: ",c)}},i=()=>{const o=t.replace(/-/g,"");r(o,"bit-app"),setTimeout(()=>{if(confirm(` ! 

   :
1.    
2.   " "
3.  " "
4.    ( : `+t+`)
5.   
6.    

 ""     `))try{window.location.href="bit://"}catch{window.open("https://bit.co.il/","_blank")}},500)},a=()=>{const o=t.replace(/-/g,"");r(o,"paybox-app"),setTimeout(()=>{try{window.location.href="https://payboxapp.page.link/rcKWijyydRQpxEfb9"}catch{window.open("https://payboxapp.page.link/rcKWijyydRQpxEfb9","_blank")}},500)};return v.jsxs("div",{style:{minHeight:"100vh",background:"transparent",padding:"2rem 1rem",direction:"rtl"},children:[v.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto",backgroundColor:"white",borderRadius:"20px",overflow:"hidden",boxShadow:"0 20px 60px rgba(0,0,0,0.1)"},children:[v.jsxs("div",{style:{background:"linear-gradient(135deg, #20b2aa 0%, #48d1cc 100%)",padding:"3rem 2rem",textAlign:"center",color:"white"},children:[v.jsx("div",{style:{fontSize:"4rem"}}),v.jsx("h1",{style:{fontSize:"2.5rem",fontWeight:"700",margin:"0 0 1rem 0",textShadow:"0 2px 4px rgba(0,0,0,0.3)"},children:' "'}),v.jsx("p",{style:{fontSize:"1.2rem",opacity:"0.95",margin:0,fontWeight:"700"},children:"    "})]}),v.jsxs("div",{style:{padding:"3rem 2rem"},children:[v.jsxs("div",{style:{backgroundColor:"#f8f9fa",padding:"2rem",borderRadius:"15px",marginBottom:"3rem",border:"2px solid #e9ecef"},children:[v.jsx("h2",{style:{fontSize:"1.5rem",color:"#2c3e50",marginBottom:"1rem",textAlign:"center"},children:'"    '}),v.jsx("p",{style:{fontSize:"1.1rem",lineHeight:"1.6",color:"#495057",textAlign:"center",margin:0},children:'             "  .'})]}),v.jsx("h3",{style:{fontSize:"2rem",textAlign:"center",marginBottom:"2rem",color:"#2c3e50"},children:"  "}),v.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"2rem",marginBottom:"3rem"},children:[v.jsxs("div",{style:{backgroundColor:"#fff",border:"3px solid #c2185b",borderRadius:"15px",padding:"2rem",textAlign:"center",transition:"all 0.3s ease",cursor:"pointer",boxShadow:"0 4px 15px rgba(194, 24, 91, 0.2)"},onMouseEnter:o=>{o.currentTarget.style.transform="translateY(-5px)",o.currentTarget.style.boxShadow="0 8px 25px rgba(194, 24, 91, 0.3)"},onMouseLeave:o=>{o.currentTarget.style.transform="translateY(0)",o.currentTarget.style.boxShadow="0 4px 15px rgba(194, 24, 91, 0.2)"},children:[v.jsx(ZB,{size:48,color:"#c2185b",style:{marginBottom:"1rem"}}),v.jsx("h4",{style:{fontSize:"1.3rem",color:"#c2185b",marginBottom:"1rem",fontWeight:"700"},children:" / "}),v.jsxs("div",{style:{padding:"1rem",borderRadius:"10px",marginBottom:"1rem"},children:[v.jsx("p",{style:{fontSize:"1.2rem",fontWeight:"800",color:"#c2185b",margin:"0 0 0.5rem 0"},children:t}),v.jsxs("button",{onClick:()=>r(t,"bit"),style:{background:"#c2185b",border:"2px solid #c2185b",color:"white",padding:"8px 15px",borderRadius:"20px",fontSize:"0.9rem",cursor:"pointer",display:"flex",alignItems:"center",gap:"5px",margin:"0 auto 10px auto",fontWeight:"600"},children:[n==="bit"?v.jsx(iC,{size:16}):v.jsx(SB,{size:16}),n==="bit"?"!":" "]})]}),v.jsxs("div",{style:{display:"flex",gap:"10px",justifyContent:"center"},children:[v.jsx("button",{style:{background:"linear-gradient(135deg, #c2185b 0%, #ad1457 100%)",color:"white",border:"none",padding:"12px 20px",borderRadius:"25px",fontSize:"0.9rem",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease",flex:1},onMouseEnter:o=>o.target.style.transform="scale(1.05)",onMouseLeave:o=>o.target.style.transform="scale(1)",onClick:i,children:" "}),v.jsx("button",{style:{background:"linear-gradient(135deg, #c2185b 0%, #ad1457 100%)",color:"white",border:"none",padding:"12px 20px",borderRadius:"25px",fontSize:"0.9rem",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease",flex:1},onMouseEnter:o=>o.target.style.transform="scale(1.05)",onMouseLeave:o=>o.target.style.transform="scale(1)",onClick:a,children:" "})]})]}),v.jsxs("div",{style:{backgroundColor:"#fff",border:"2px solid #c2185b",borderRadius:"15px",padding:"2rem",textAlign:"center",transition:"all 0.3s ease",cursor:"pointer",boxShadow:"0 4px 15px rgba(194, 24, 91, 0.1)"},onMouseEnter:o=>{o.currentTarget.style.transform="translateY(-5px)",o.currentTarget.style.boxShadow="0 8px 25px rgba(194, 24, 91, 0.2)"},onMouseLeave:o=>{o.currentTarget.style.transform="translateY(0)",o.currentTarget.style.boxShadow="0 4px 15px rgba(194, 24, 91, 0.1)"},children:[v.jsx(rB,{size:48,color:"#c2185b",style:{marginBottom:"1rem"}}),v.jsx("h4",{style:{fontSize:"1.3rem",color:"#c2185b",marginBottom:"1rem",fontWeight:"600"},children:" "}),v.jsx("p",{style:{color:"#7f8c8d",marginBottom:"1.5rem",fontSize:"1rem",fontWeight:"600",lineHeight:"1.4"},children:' "   '}),v.jsx("div",{style:{display:"flex",justifyContent:"center"},children:v.jsx("div",{style:{background:"linear-gradient(135deg, #c2185b 0%, #ad1457 100%)",color:"white",padding:"12px 24px",borderRadius:"25px",fontSize:"1rem",fontWeight:"600"},children:"  "})})]})]}),v.jsxs("div",{style:{background:"linear-gradient(135deg, #20b2aa 0%, #48d1cc 100%)",padding:"2.5rem",borderRadius:"20px",textAlign:"center",color:"white",boxShadow:"0 10px 30px rgba(32, 178, 170, 0.3)"},children:[v.jsx("h3",{style:{fontSize:"1.8rem",marginBottom:"1rem",fontWeight:"600"},children:" "}),v.jsx("p",{style:{fontSize:"1.2rem",marginBottom:"1rem",opacity:"0.95"},children:"        "}),v.jsx("p",{style:{fontSize:"1.5rem",fontWeight:"700",margin:0,textShadow:"0 2px 4px rgba(0,0,0,0.2)"},children:"  !"})]})]})]}),v.jsx("style",{jsx:!0,children:`
        @keyframes pulse {
          0% { transform: scale(1); }
          50% { transform: scale(1.1); }
          100% { transform: scale(1); }
        }
        
        @media (max-width: 768px) {
          h1 {
            font-size: 2rem !important;
          }
          
          h3 {
            font-size: 1.5rem !important;
          }
          
          .donation-cards {
            grid-template-columns: 1fr !important;
            gap: 1.5rem !important;
          }
        }
      `})]})},tX=()=>{const n=window.innerWidth<=768,e={maxWidth:n?"100%":"900px",width:"100%",margin:n?"0":"20px auto",padding:n?"10px":"40px",backgroundColor:"#ffffff",borderRadius:n?"0":"8px",boxShadow:n?"none":"0 2px 8px rgba(0, 0, 0, 0.08)",fontFamily:"system-ui, -apple-system, sans-serif",direction:"rtl",lineHeight:n?"1.6":"1.7",boxSizing:"border-box"},t={textAlign:"center",marginBottom:n?"30px":"50px",padding:n?"20px 15px":"30px 20px",backgroundColor:"#fafbfc",borderRadius:"6px",border:"3px solid #718096",boxShadow:n?"0 2px 8px rgba(0, 0, 0, 0.1)":"0 4px 12px rgba(0, 0, 0, 0.12)"},r={fontSize:"clamp(24px, 5vw, 32px)",fontWeight:"600",color:"#1a202c",marginBottom:"8px",lineHeight:"1.2"},i={fontSize:"clamp(14px, 3.5vw, 18px)",color:"#4a5568",fontWeight:"400",margin:"0"},a={marginBottom:n?"25px":"40px",padding:n?"20px 15px":"32px",backgroundColor:"#ffffff",borderRadius:"8px",border:n?"2px solid #a0aec0":"3px solid #a0aec0",boxShadow:n?"0 2px 8px rgba(0, 0, 0, 0.08)":"0 4px 12px rgba(0, 0, 0, 0.12)"},o={fontSize:"clamp(18px, 4vw, 24px)",fontWeight:"600",color:"#2d3748",marginBottom:"20px",display:"flex",alignItems:"center",gap:"8px",flexWrap:"wrap"},s={display:"flex",alignItems:"flex-start",marginBottom:n?"20px":"24px",padding:n?"15px":"24px",backgroundColor:"#ffffff",borderRadius:"8px",border:n?"1px solid #e2e8f0":"2px solid #a0aec0",boxShadow:n?"0 1px 4px rgba(0, 0, 0, 0.05)":"0 3px 8px rgba(0, 0, 0, 0.1)",gap:n?"12px":"20px"},c={backgroundColor:"#4299e1",color:"white",borderRadius:"50%",width:n?"32px":"36px",height:n?"32px":"36px",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"600",fontSize:n?"14px":"16px",flexShrink:0,minWidth:n?"32px":"36px"},f={flex:1,fontSize:"clamp(14px, 3.5vw, 16px)",color:"#4a5568",lineHeight:"1.5",minWidth:0},d={backgroundColor:"#f7fafc",border:n?"2px solid #718096":"3px solid #718096",borderRadius:"8px",padding:n?"15px":"24px",marginBottom:n?"15px":"20px",textAlign:"center",boxShadow:n?"none":"0 3px 8px rgba(0, 0, 0, 0.1)"},p={backgroundColor:"#f7fafc",border:n?"2px solid #718096":"3px solid #718096",borderRadius:"8px",padding:n?"15px":"24px",marginBottom:n?"15px":"20px",boxShadow:n?"none":"0 3px 8px rgba(0, 0, 0, 0.1)"},g={padding:n?"15px":"20px",backgroundColor:"#ffffff",borderRadius:"8px",border:n?"1px solid #e2e8f0":"2px solid #a0aec0",boxShadow:n?"0 1px 4px rgba(0, 0, 0, 0.05)":"0 3px 8px rgba(0, 0, 0, 0.1)",marginBottom:n?"15px":"0"},m={display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(280px, 1fr))",gap:"15px",width:"100%"},x={display:"flex",flexDirection:"column",gap:"15px",width:"100%"},_={fontSize:"clamp(16px, 4vw, 20px)",marginLeft:"4px"};return v.jsxs("div",{style:e,children:[v.jsxs("div",{style:t,children:[v.jsxs("h1",{style:r,children:[v.jsx("span",{style:_})," "]}),v.jsx("p",{style:i,children:'  -      "'})]}),v.jsxs("div",{style:{...a,backgroundColor:"#f8fafc",border:n?"1px solid #e2e8f0":"4px solid #2d3748",boxShadow:n?"0 2px 8px rgba(0, 0, 0, 0.08)":"0 6px 16px rgba(45, 55, 72, 0.15)"},children:[v.jsxs("h2",{style:o,children:[v.jsx("span",{style:_,children:""}),"  -   ?"]}),v.jsxs("div",{style:s,children:[v.jsx("div",{style:c,children:"1"}),v.jsxs("div",{style:f,children:[v.jsx("strong",{style:{color:"#2d3748",fontSize:"clamp(15px, 3.5vw, 17px)"},children:"  :"}),v.jsx("br",{}),'/ "     .       .',v.jsx("br",{}),v.jsx("strong",{children:"  :"}),"          ."]})]}),v.jsxs("div",{style:s,children:[v.jsx("div",{style:c,children:"2"}),v.jsxs("div",{style:f,children:[v.jsx("strong",{style:{color:"#2d3748",fontSize:"clamp(15px, 3.5vw, 17px)"},children:" :"}),v.jsx("br",{}),"     .",v.jsx("strong",{style:{color:"#2d3748"},children:"   "})," -         ."]})]}),v.jsxs("div",{style:s,children:[v.jsx("div",{style:c,children:"3"}),v.jsxs("div",{style:f,children:[v.jsx("strong",{style:{color:"#2d3748",fontSize:"clamp(15px, 3.5vw, 17px)"},children:" :"}),v.jsx("br",{}),"    .          ."]})]}),v.jsx("div",{style:d,children:v.jsxs("p",{style:{fontSize:"clamp(14px, 3.5vw, 16px)",margin:0,fontWeight:"500",color:"#2d3748"},children:[" ",v.jsx("strong",{children:":"}),"      -   ,  !"]})})]}),v.jsxs("div",{style:a,children:[v.jsxs("h2",{style:o,children:[v.jsx("span",{style:_,children:""}),"  "]}),v.jsxs("div",{style:n?x:m,children:[v.jsxs("div",{style:g,children:[v.jsx("strong",{style:{color:"#2d3748",fontSize:"clamp(14px, 3.5vw, 16px)"},children:"  :"}),v.jsx("br",{}),'"    .    .',v.jsx("br",{}),v.jsx("span",{style:{color:"#4a5568",fontSize:"clamp(12px, 3vw, 14px)",fontStyle:"italic"},children:"    -    ,   ."})]}),v.jsxs("div",{style:g,children:[v.jsx("strong",{style:{color:"#2d3748",fontSize:"clamp(14px, 3.5vw, 16px)"},children:"  :"}),v.jsx("br",{}),"      ."]}),v.jsxs("div",{style:g,children:[v.jsx("strong",{style:{color:"#2d3748",fontSize:"clamp(14px, 3.5vw, 16px)"},children:" :"}),v.jsx("br",{}),"        .",v.jsx("br",{}),v.jsx("span",{style:{color:"#4a5568",fontSize:"clamp(12px, 3vw, 14px)",fontStyle:"italic"},children:"    -    ."})]})]})]}),v.jsxs("div",{style:n?x:m,children:[v.jsxs("div",{style:d,children:[v.jsxs("h3",{style:{color:"#2d3748",marginBottom:"8px",fontSize:"clamp(16px, 4vw, 18px)",fontWeight:"600"},children:[v.jsx("span",{style:_,children:""}),""]}),v.jsx("p",{style:{fontSize:"clamp(13px, 3vw, 15px)",margin:0,color:"#4a5568"},children:'"    .        .'})]}),v.jsxs("div",{style:p,children:[v.jsxs("h3",{style:{color:"#2d3748",marginBottom:"8px",fontSize:"clamp(16px, 4vw, 18px)",fontWeight:"600"},children:[v.jsx("span",{style:_,children:""}),"  "]}),v.jsx("p",{style:{fontSize:"clamp(13px, 3vw, 15px)",margin:0,color:"#4a5568"},children:"    -         ."})]})]}),v.jsxs("div",{style:a,children:[v.jsxs("h2",{style:o,children:[v.jsx("span",{style:_,children:""}),"  "]}),v.jsxs("div",{style:n?x:m,children:[v.jsxs("div",{style:{...g,textAlign:"center",padding:"20px 15px"},children:[v.jsx("div",{style:{fontSize:"clamp(28px, 8vw, 36px)",marginBottom:"8px"},children:""}),v.jsx("strong",{style:{color:"#2d3748",fontSize:"clamp(14px, 3.5vw, 16px)"},children:""}),v.jsx("br",{}),v.jsxs("span",{style:{color:"#4a5568",fontSize:"clamp(12px, 3vw, 14px)"},children:["  ,  ",v.jsx("br",{}),"(   )",v.jsx("br",{}),v.jsx("em",{children:"(   )"})]})]}),v.jsxs("div",{style:{...g,textAlign:"center",padding:"20px 15px"},children:[v.jsx("div",{style:{fontSize:"clamp(28px, 8vw, 36px)",marginBottom:"8px"},children:""}),v.jsx("strong",{style:{color:"#2d3748",fontSize:"clamp(14px, 3.5vw, 16px)"},children:" "}),v.jsx("br",{}),v.jsx("span",{style:{color:"#4a5568",fontSize:"clamp(12px, 3vw, 14px)"},children:" "})]}),v.jsxs("div",{style:{...g,textAlign:"center",padding:"20px 15px"},children:[v.jsx("div",{style:{fontSize:"clamp(28px, 8vw, 36px)",marginBottom:"8px"},children:""}),v.jsx("strong",{style:{color:"#2d3748",fontSize:"clamp(14px, 3.5vw, 16px)"},children:"  "}),v.jsx("br",{}),v.jsx("span",{style:{color:"#4a5568",fontSize:"clamp(12px, 3vw, 14px)"},children:"  "})]})]})]}),v.jsxs("div",{style:{...d,marginTop:n?"30px":"40px"},children:[v.jsx("h3",{style:{color:"#2d3748",fontSize:"clamp(18px, 4vw, 20px)",marginBottom:"8px",fontWeight:"600"},children:"  "}),v.jsx("p",{style:{fontSize:"clamp(14px, 3.5vw, 16px)",fontStyle:"italic",margin:0,color:"#4a5568"},children:"      "})]})]})},nX=()=>{const{user:n}=Zo(),e=Rm(),[t,r]=le.useState([]),[i,a]=le.useState(!1),[o,s]=le.useState(!1),[c,f]=le.useState(!1),[d,p]=le.useState(!1);le.useEffect(()=>{const S=()=>{f(window.innerWidth<=768)};return S(),window.addEventListener("resize",S),()=>window.removeEventListener("resize",S)},[]),le.useEffect(()=>{if(!(n!=null&&n.uid))return;const S=`conflicts_dismissed_${n.uid}`,k=localStorage.getItem(S);k&&((Date.now()-parseInt(k))/6e4<15?p(!0):(localStorage.removeItem(S),p(!1)))},[n==null?void 0:n.uid]);const g=n&&(n.role==="MainAdmin"||n.role==="GmachAdmin");le.useEffect(()=>{if(!g){r([]),a(!1);return}console.log("       ...");const S=q1(hn(wt,"orders"),k=>{const M=[];k.docs.forEach(P=>{const Y=P.data();Y.status==="open"&&Y.availabilityStatus==="CONFLICT"&&Y.availabilityConflicts&&Y.availabilityConflicts.length>0&&M.push({id:P.id,clientName:Y.clientName,phone:Y.phone,pickupDate:Y.pickupDate,returnDate:Y.returnDate,conflicts:Y.availabilityConflicts})}),console.log(`   :  ${M.length}    `),r(M),a(M.length>0),M.length>0&&(s(!1),p(!1))},k=>{console.error("    :",k),m()});return()=>{console.log("    "),S()}},[g]);const m=async()=>{try{console.log("    ...");const S=await nr(hn(wt,"orders")),k=[];S.docs.forEach(M=>{const P=M.data();P.status==="open"&&P.availabilityStatus==="CONFLICT"&&P.availabilityConflicts&&P.availabilityConflicts.length>0&&k.push({id:M.id,clientName:P.clientName,phone:P.phone,pickupDate:P.pickupDate,returnDate:P.returnDate,conflicts:P.availabilityConflicts})}),r(k),a(k.length>0)}catch(S){console.error("   :",S)}};if(!g||t.length===0||!i||d)return null;const x=()=>{e("/calendar")},_=()=>{if(n!=null&&n.uid){const S=`conflicts_dismissed_${n.uid}`;localStorage.setItem(S,Date.now().toString()),console.log(`  ${n.uid}    -15 `)}a(!1),p(!0)},C=()=>{s(!o)};return v.jsxs(v.Fragment,{children:[v.jsx("style",{jsx:!0,children:`
        @keyframes bellRing {
          0%, 100% { transform: rotate(0deg); }
          10%, 30%, 50%, 70%, 90% { transform: rotate(-10deg); }
          20%, 40%, 60%, 80% { transform: rotate(10deg); }
        }

        @keyframes slideIn {
          from { 
            transform: translateX(100%); 
            opacity: 0; 
          }
          to { 
            transform: translateX(0); 
            opacity: 1; 
          }
        }

        @keyframes slideInMobile {
          from { 
            transform: translateY(-100%); 
            opacity: 0; 
          }
          to { 
            transform: translateY(0); 
            opacity: 1; 
          }
        }

        @keyframes pulse {
          0%, 100% { box-shadow: 0 0 0 0 rgba(147, 51, 234, 0.4); }
          50% { box-shadow: 0 0 0 8px rgba(147, 51, 234, 0.1); }
        }

        .notification-container {
          position: fixed;
          z-index: 10000;
          font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
          direction: rtl;
        }

        /* Desktop positioning */
        .notification-container.desktop {
          bottom: 100px;
          right: 20px;
          animation: slideIn 0.5s ease-out;
        }

        /* Mobile positioning - top center for better visibility */
        .notification-container.mobile {
          top: 70px;
          left: 10px;
          right: 10px;
          animation: slideInMobile 0.5s ease-out;
        }

        .notification-card {
          background: linear-gradient(135deg, #f3e8ff 0%, #e9d5ff 100%);
          border: 2px solid #9333ea;
          border-radius: 16px;
          box-shadow: 0 8px 25px rgba(147, 51, 234, 0.2);
          overflow: hidden;
          transition: all 0.3s ease;
        }

        .notification-card.desktop {
          min-width: 280px;
          max-width: 350px;
          animation: pulse 3s ease-in-out infinite;
        }

        .notification-card.mobile {
          width: 100%;
          max-height: ${o?"60px":"80vh"};
          animation: ${o?"none":"pulse 3s ease-in-out infinite"};
        }

        .notification-header {
          background: linear-gradient(135deg, #9333ea 0%, #7c3aed 100%);
          color: white;
          padding: 12px 16px;
          display: flex;
          align-items: center;
          justify-content: space-between;
          cursor: ${c?"pointer":"default"};
          min-height: 60px;
        }

        .header-content {
          display: flex;
          align-items: center;
          gap: 8px;
          flex: 1;
        }

        .header-controls {
          display: flex;
          align-items: center;
          gap: 8px;
        }

        .control-button {
          background: rgba(255, 255, 255, 0.2);
          border: none;
          border-radius: 6px;
          color: white;
          cursor: pointer;
          padding: 8px;
          transition: all 0.2s ease;
          display: flex;
          align-items: center;
          justify-content: center;
          min-width: 32px;
          min-height: 32px;
        }

        .control-button:hover {
          background: rgba(255, 255, 255, 0.3);
          transform: scale(1.1);
        }

        .control-button:active {
          transform: scale(0.95);
        }

        .bell-icon {
          animation: bellRing 2s ease-in-out infinite;
        }

        .notification-body {
          background: rgba(248, 250, 252, 0.8);
          transition: all 0.3s ease-out;
          overflow-y: auto;
        }

        .notification-body.desktop {
          padding: 16px;
          max-height: 300px;
        }

        .notification-body.mobile {
          padding: ${o?"0":"16px"};
          max-height: ${o?"0":"60vh"};
          opacity: ${o?"0":"1"};
        }

        .notification-body.minimized {
          padding: 0;
          max-height: 0;
          overflow: hidden;
          opacity: 0;
        }

        .conflict-item {
          background: white;
          border: 1px solid #d1d5db;
          border-radius: 12px;
          padding: 12px;
          margin-bottom: 12px;
          transition: all 0.2s ease;
          border-right: 4px solid #9333ea;
        }

        .conflict-item:hover {
          transform: translateY(-1px);
          box-shadow: 0 2px 8px rgba(147, 51, 234, 0.1);
        }

        .conflict-item:last-child {
          margin-bottom: 0;
        }

        .client-name {
          font-weight: 600;
          color: #1f2937;
          margin-bottom: 4px;
          display: flex;
          align-items: center;
          gap: 6px;
        }

        .date-info {
          font-size: 0.85rem;
          color: #6b7280;
          margin-bottom: 8px;
          display: flex;
          align-items: center;
          gap: 4px;
        }

        .conflicts-summary {
          font-size: 0.8rem;
          color: #7c3aed;
          font-weight: 500;
        }

        .action-button {
          background: linear-gradient(135deg, #9333ea 0%, #7c3aed 100%);
          color: white;
          border: none;
          border-radius: 8px;
          padding: 14px;
          font-size: 0.9rem;
          font-weight: 600;
          cursor: pointer;
          width: 100%;
          margin-top: 12px;
          box-shadow: 0 4px 12px rgba(147, 51, 234, 0.3);
          transition: all 0.2s ease;
          display: flex;
          align-items: center;
          justify-content: center;
          gap: 8px;
          min-height: 48px;
        }

        .action-button:hover {
          transform: translateY(-2px);
          box-shadow: 0 6px 16px rgba(147, 51, 234, 0.4);
        }

        .action-button:active {
          transform: translateY(0);
        }

        .instructions {
          background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);
          border: 1px solid #f59e0b;
          border-radius: 8px;
          padding: 12px;
          margin-top: 12px;
          font-size: 0.8rem;
          color: #92400e;
          line-height: 1.4;
        }

        /* Mobile backdrop */
        .mobile-backdrop {
          position: fixed;
          top: 0;
          left: 0;
          right: 0;
          bottom: 0;
          background: rgba(0, 0, 0, 0.1);
          z-index: 9999;
          opacity: ${o?"0":"1"};
          visibility: ${o?"hidden":"visible"};
          transition: all 0.3s ease;
        }

        /* Override for small screens */
        @media (max-width: 480px) {
          .notification-container.mobile {
            top: 60px;
            left: 5px;
            right: 5px;
          }
          
          .notification-header {
            padding: 10px 12px;
          }
          
          .control-button {
            padding: 6px;
            min-width: 28px;
            min-height: 28px;
          }
        }
      `}),c&&!o&&v.jsx("div",{className:"mobile-backdrop",onClick:C}),v.jsx("div",{className:`notification-container ${c?"mobile":"desktop"}`,children:v.jsxs("div",{className:`notification-card ${c?"mobile":"desktop"}`,children:[v.jsxs("div",{className:"notification-header",onClick:c?C:void 0,children:[v.jsxs("div",{className:"header-content",children:[v.jsx(oc,{size:20,className:"bell-icon"}),v.jsxs("div",{children:[v.jsxs("div",{style:{fontSize:"0.9rem",fontWeight:"600"},children:["   ",t.length," ",t.length===1?"":""]}),v.jsxs("div",{style:{fontSize:"0.75rem",opacity:.9},children:[t.length===1?"":"","  "]})]})]}),v.jsxs("div",{className:"header-controls",children:[c&&v.jsx("button",{className:"control-button",onClick:S=>{S.stopPropagation(),C()},title:o?"":"",children:v.jsx(zB,{size:16})}),v.jsx("button",{className:"control-button",onClick:S=>{S.stopPropagation(),_()},title:"  -15 ",children:v.jsx(uu,{size:16})})]})]}),v.jsxs("div",{className:`notification-body ${c?"mobile":"desktop"} ${o?"minimized":""}`,children:[t.map((S,k)=>v.jsxs("div",{className:"conflict-item",title:"  ",children:[v.jsxs("div",{className:"client-name",children:[v.jsx(yB,{size:14,style:{color:"#9333ea"}}),S.clientName]}),v.jsxs("div",{className:"date-info",children:[v.jsx(uc,{size:12}),new Date(S.pickupDate).toLocaleDateString("he-IL")," - ",new Date(S.returnDate).toLocaleDateString("he-IL")]}),v.jsxs("div",{className:"conflicts-summary",children:[S.conflicts.length," ",S.conflicts.length===1?"":"","   "]})]},S.id)),v.jsxs("div",{className:"instructions",children:[" ",v.jsx("strong",{children:" :"}),'          ( )       " "   ']}),v.jsxs("button",{className:"action-button",onClick:x,children:[v.jsx(uc,{size:16}),"  "]})]})]})})]})},rX=()=>{const{user:n}=Zo(),[e,t]=le.useState([]),[r,i]=le.useState(!1),[a,o]=le.useState(null),[s,c]=le.useState({title:"",message:"",type:"info",isActive:!0,hasExpiration:!1,expirationDate:"",expirationTime:"23:59"}),[f,d]=le.useState(!1),p=n&&(n.role==="MainAdmin"||n.role==="GmachAdmin");if(le.useEffect(()=>{if(!p)return;const M=Nl(hn(wt,"alerts"),SE("createdAt","desc")),P=q1(M,Y=>{const z=Y.docs.map(F=>({id:F.id,...F.data()}));t(z)});return()=>P()},[p]),!p)return v.jsx("div",{style:{padding:"2rem",textAlign:"center",fontFamily:'"Assistant", "Heebo", system-ui, sans-serif',direction:"rtl"},children:v.jsx("h2",{children:"    "})});const g=()=>{c({title:"",message:"",type:"info",isActive:!0,hasExpiration:!1,expirationDate:"",expirationTime:"23:59"}),o(null),i(!1)},m=()=>new Date().toISOString().split("T")[0],x=async M=>{if(M.preventDefault(),!!s.message.trim()){d(!0);try{let P={...s};if(s.hasExpiration&&s.expirationDate){const Y=new Date(`${s.expirationDate}T${s.expirationTime}`);P.expirationDate=Y}else P.expirationDate=null;delete P.hasExpiration,a?await ia(rr(wt,"alerts",a.id),{...P,updatedAt:kr(),updatedBy:n.uid}):await dd(hn(wt,"alerts"),{...P,createdAt:kr(),createdBy:n.uid,createdByName:n.displayName||n.email||n.username}),g()}catch(P){console.error("Error saving alert:",P),alert("  ")}finally{d(!1)}}},_=M=>{const P=!!M.expirationDate;let Y="",z="23:59";if(P&&M.expirationDate){const F=M.expirationDate.toDate?M.expirationDate.toDate():new Date(M.expirationDate);Y=F.toISOString().split("T")[0],z=F.toTimeString().slice(0,5)}c({title:M.title||"",message:M.message||"",type:M.type||"info",isActive:M.isActive,hasExpiration:P,expirationDate:Y,expirationTime:z}),o(M),i(!0)},C=async M=>{try{await ia(rr(wt,"alerts",M.id),{isActive:!M.isActive,updatedAt:kr(),updatedBy:n.uid})}catch(P){console.error("Error toggling alert:",P),M("  ")}},S=async M=>{if(window.confirm("      ?"))try{await $h(rr(wt,"alerts",M))}catch(P){console.error("Error deleting alert:",P),alert("  ")}},k=M=>{if(!M.expirationDate)return{status:"none",text:" "};const P=new Date,Y=M.expirationDate.toDate?M.expirationDate.toDate():new Date(M.expirationDate);if(P>Y)return{status:"expired",text:" "};const z=Y-P,F=Math.ceil(z/(1e3*60*60*24));return F<=1?{status:"soon",text:`${Math.ceil(z/36e5)}  `}:{status:"active",text:`${F}  `}};return v.jsxs("div",{style:{padding:"2rem",maxWidth:"1200px",margin:"0 auto",direction:"rtl",fontFamily:'"Assistant", "Heebo", system-ui, sans-serif'},children:[v.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"2rem"},children:[v.jsx("h1",{style:{margin:0,color:"#1f2937"},children:" "}),v.jsxs("button",{onClick:()=>i(!0),style:{backgroundColor:"#3b82f6",color:"white",border:"none",borderRadius:"8px",padding:"12px 20px",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",fontSize:"16px",fontWeight:"500"},children:[v.jsx(oC,{size:20})," "]})]}),r&&v.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:v.jsxs("div",{style:{backgroundColor:"white",borderRadius:"12px",padding:"2rem",width:"90%",maxWidth:"500px",maxHeight:"90vh",overflowY:"auto",direction:"rtl"},children:[v.jsx("h3",{style:{marginTop:0},children:a?" ":" "}),v.jsxs("form",{onSubmit:x,children:[v.jsxs("div",{style:{marginBottom:"1rem"},children:[v.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"bold"},children:" ()"}),v.jsx("input",{type:"text",value:s.title,onChange:M=>c({...s,title:M.target.value}),style:{width:"100%",padding:"12px",border:"1px solid #d1d5db",borderRadius:"8px",fontSize:"16px",boxSizing:"border-box"},placeholder:" "})]}),v.jsxs("div",{style:{marginBottom:"1rem"},children:[v.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"bold"},children:" *"}),v.jsx("textarea",{value:s.message,onChange:M=>c({...s,message:M.target.value}),required:!0,rows:4,style:{width:"100%",padding:"12px",border:"1px solid #d1d5db",borderRadius:"8px",fontSize:"16px",resize:"vertical",boxSizing:"border-box"},placeholder:" "})]}),v.jsxs("div",{style:{marginBottom:"1rem"},children:[v.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"bold"},children:" "}),v.jsxs("select",{value:s.type,onChange:M=>c({...s,type:M.target.value}),style:{width:"100%",padding:"12px",border:"1px solid #d1d5db",borderRadius:"8px",fontSize:"16px",boxSizing:"border-box"},children:[v.jsx("option",{value:"info",children:""}),v.jsx("option",{value:"warning",children:""}),v.jsx("option",{value:"success",children:""})]})]}),v.jsxs("div",{style:{marginBottom:"1rem"},children:[v.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"1rem"},children:[v.jsx("input",{type:"checkbox",checked:s.hasExpiration,onChange:M=>c({...s,hasExpiration:M.target.checked,expirationDate:M.target.checked?s.expirationDate:"",expirationTime:M.target.checked?s.expirationTime:"23:59"})}),v.jsx(uc,{size:16}),"  "]}),s.hasExpiration&&v.jsxs("div",{style:{background:"#f9fafb",padding:"1rem",borderRadius:"8px",border:"1px solid #e5e7eb"},children:[v.jsxs("div",{style:{display:"flex",gap:"1rem",alignItems:"end"},children:[v.jsxs("div",{style:{flex:1},children:[v.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"14px"},children:" "}),v.jsx("input",{type:"date",value:s.expirationDate,min:m(),onChange:M=>c({...s,expirationDate:M.target.value}),required:s.hasExpiration,style:{width:"100%",padding:"8px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"14px"}})]}),v.jsxs("div",{style:{flex:"0 0 100px"},children:[v.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"14px"},children:""}),v.jsx("input",{type:"time",value:s.expirationTime,onChange:M=>c({...s,expirationTime:M.target.value}),style:{width:"100%",padding:"8px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"14px"}})]})]}),v.jsxs("div",{style:{marginTop:"0.5rem",fontSize:"12px",color:"#6b7280",display:"flex",alignItems:"center",gap:"4px"},children:[v.jsx(gd,{size:12}),"     "]})]})]}),v.jsx("div",{style:{marginBottom:"2rem"},children:v.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[v.jsx("input",{type:"checkbox",checked:s.isActive,onChange:M=>c({...s,isActive:M.target.checked})})," "]})}),v.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"flex-end"},children:[v.jsxs("button",{type:"button",onClick:g,disabled:f,style:{backgroundColor:"#6b7280",color:"white",border:"none",borderRadius:"8px",padding:"12px 20px",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px"},children:[v.jsx(uu,{size:16}),""]}),v.jsxs("button",{type:"submit",disabled:f||!s.message.trim(),style:{backgroundColor:"#10b981",color:"white",border:"none",borderRadius:"8px",padding:"12px 20px",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",opacity:f||!s.message.trim()?.6:1},children:[v.jsx(c2,{size:16}),f?"...":""]})]})]})]})}),v.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:e.length===0?v.jsx("div",{style:{textAlign:"center",padding:"3rem",color:"#6b7280",backgroundColor:"#f9fafb",borderRadius:"8px"},children:"  "}):e.map(M=>{const P=k(M);return v.jsx("div",{style:{backgroundColor:"white",border:`1px solid ${P.status==="expired"?"#ef4444":"#e5e7eb"}`,borderRadius:"8px",padding:"1.5rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)",opacity:P.status==="expired"?.6:1},children:v.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[v.jsxs("div",{style:{flex:1},children:[v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"8px",flexWrap:"wrap"},children:[M.title&&v.jsx("h3",{style:{margin:0,fontSize:"18px"},children:M.title}),v.jsx("span",{style:{padding:"4px 12px",borderRadius:"20px",fontSize:"12px",backgroundColor:M.type==="warning"?"#fef3c7":M.type==="success"?"#d1fae5":"#dbeafe",color:M.type==="warning"?"#92400e":M.type==="success"?"#065f46":"#1e40af"},children:M.type==="warning"?"":M.type==="success"?"":""}),v.jsx("span",{style:{padding:"4px 12px",borderRadius:"20px",fontSize:"12px",backgroundColor:M.isActive?"#d1fae5":"#f3f4f6",color:M.isActive?"#065f46":"#6b7280"},children:M.isActive?"":" "}),v.jsxs("span",{style:{padding:"4px 12px",borderRadius:"20px",fontSize:"12px",backgroundColor:P.status==="expired"?"#fee2e2":P.status==="soon"?"#fef3c7":P.status==="active"?"#dbeafe":"#f3f4f6",color:P.status==="expired"?"#dc2626":P.status==="soon"?"#d97706":P.status==="active"?"#2563eb":"#6b7280",display:"flex",alignItems:"center",gap:"4px"},children:[P.status!=="none"&&v.jsx(gd,{size:12}),P.text]})]}),v.jsx("p",{style:{margin:"0 0 12px 0",lineHeight:"1.5"},children:M.message}),v.jsxs("div",{style:{fontSize:"14px",color:"#6b7280"},children:["  : ",M.createdByName," ",M.createdAt&&` ${M.createdAt.toDate().toLocaleDateString("he-IL")}`,M.expirationDate&&v.jsxs("span",{children:["  "," : ",M.expirationDate.toDate().toLocaleDateString("he-IL")," "," ",M.expirationDate.toDate().toLocaleTimeString("he-IL",{hour:"2-digit",minute:"2-digit"})]})]})]}),v.jsxs("div",{style:{display:"flex",gap:"8px"},children:[v.jsx("button",{onClick:()=>C(M),style:{backgroundColor:M.isActive?"#f59e0b":"#10b981",color:"white",border:"none",borderRadius:"6px",padding:"8px",cursor:"pointer"},title:M.isActive?"":"",children:M.isActive?v.jsx(RB,{size:16}):v.jsx(l2,{size:16})}),v.jsx("button",{onClick:()=>_(M),style:{backgroundColor:"#3b82f6",color:"white",border:"none",borderRadius:"6px",padding:"8px",cursor:"pointer"},children:v.jsx(K5,{size:16})}),v.jsx("button",{onClick:()=>S(M.id),style:{backgroundColor:"#ef4444",color:"white",border:"none",borderRadius:"6px",padding:"8px",cursor:"pointer"},children:v.jsx(Q5,{size:16})})]})]})},M.id)})})]})};function iX(){le.useEffect(()=>{const n="dev",e=localStorage.getItem("APP_VERSION");e&&e!==n&&(console.log("       ..."),window.location.reload(!0)),localStorage.setItem("APP_VERSION",n)},[])}const aX=()=>{iX();const n=le.useRef(!1),e=le.useRef(null),t=le.useRef(null),r=su();le.useEffect(()=>{switch(document.body.classList.remove("home-page","about-page","catalog-page","login-page","register-page","donations-page","guidelines-page","new-loan-page","calendar-page","orders-page","history-page","manage-page"),r.pathname){case"/":document.body.classList.add("home-page");break;case"/about":document.body.classList.add("about-page");break;case"/catalog":document.body.classList.add("catalog-page");break;case"/login":document.body.classList.add("login-page");break;case"/register":document.body.classList.add("register-page");break;case"/donations":document.body.classList.add("donations-page");break;case"/borrowing-guidelines":document.body.classList.add("guidelines-page");break;case"/new-loan":document.body.classList.add("new-loan-page");break;case"/calendar":document.body.classList.add("calendar-page");break;case"/my-orders":case"/requests":document.body.classList.add("orders-page");break;case"/history":document.body.classList.add("history-page");break;case"/manage-product":case"/manage-users":document.body.classList.add("manage-page");break;default:document.body.classList.add("other-page");break}return console.log("  :",r.pathname,"-  CSS:",document.body.className),()=>{document.body.classList.remove("home-page","about-page","catalog-page","login-page","register-page","donations-page","guidelines-page","new-loan-page","calendar-page","orders-page","history-page","manage-page","other-page")}},[r.pathname]),le.useEffect(()=>(console.log(" App: Setting up automatic email service..."),i(),()=>{e.current&&(clearInterval(e.current),console.log(" App: Stopped automatic email service"))}),[]);const i=()=>{const a=()=>{const c=new Date,f=c.toDateString();if(t.current!==f&&(n.current=!1,t.current=f,console.log(" App: Reset daily auto-check tracking for",f)),n.current)return console.log(" App: Auto-check already completed today"),!1;const d=c.getHours();return d<8||d>20?(console.log(` App: Outside business hours (${d}:00), skipping auto-check`),!1):!0},o=async()=>{if(a())try{console.log(" App: Performing automatic reminder check...");const c=await kC();c.totalSent>0?(console.log(` App: ${c.totalSent} reminder emails sent automatically`),typeof window<"u"&&window.Notification&&(Notification.permission==="default"?Notification.requestPermission():Notification.permission==="granted"&&new Notification(" ",{body:`${c.totalSent}   `,icon:"/favicon.ico",tag:"email-reminder"}))):console.log(" App: No reminder emails to send today"),n.current=!0}catch(c){console.error(" App: Error in automatic email check:",c)}},s=setTimeout(()=>{console.log(" App: Starting initial automatic email check..."),o()},6e4);return e.current=setInterval(()=>{console.log(" App: Periodic automatic email check..."),o()},3*60*60*1e3),()=>{s&&clearTimeout(s)}};return v.jsxs(nC,{children:[v.jsx(iF,{}),v.jsxs(lR,{children:[v.jsx(ka,{path:"/alerts",element:v.jsx(rX,{})}),v.jsx(ka,{path:"/",element:v.jsx(wF,{})}),v.jsx(ka,{path:"/about",element:v.jsx(_F,{})}),v.jsx(ka,{path:"/login",element:v.jsx(AF,{})}),v.jsx(ka,{path:"/register",element:v.jsx(SF,{})}),v.jsx(ka,{path:"/catalog",element:v.jsx(xW,{})}),v.jsx(ka,{path:"/donations",element:v.jsx(eX,{})}),v.jsx(ka,{path:"/borrowing-guidelines",element:v.jsx(tX,{})}),v.jsx(ka,{path:"/request",element:v.jsx(xq,{})}),v.jsx(ka,{path:"/my-orders",element:v.jsx(_q,{})}),v.jsx(ka,{path:"/requests",element:v.jsx(bq,{})}),v.jsx(ka,{path:"/new-loan",element:v.jsx(yq,{})}),v.jsx(ka,{path:"/calendar",element:v.jsx(Zq,{})}),v.jsx(ka,{path:"/manage-product",element:v.jsx(gW,{})}),v.jsx(ka,{path:"/manage-users",element:v.jsx(mW,{})}),v.jsx(ka,{path:"/history",element:v.jsx(JY,{})})]}),v.jsx(nX,{})]})};v7.createRoot(document.getElementById("root")).render(v.jsx(Xn.StrictMode,{children:v.jsx(nC,{children:v.jsx(OR,{children:v.jsx(aX,{})})})}));export{br as _,sX as c,LA as g};
