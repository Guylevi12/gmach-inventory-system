(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=t(i);fetch(i.href,a)}})();var zq=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function U4(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Vm={exports:{}},m1={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fw;function UC(){if(fw)return m1;fw=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(r,i,a){var o=null;if(a!==void 0&&(o=""+a),i.key!==void 0&&(o=""+i.key),"key"in i){a={};for(var s in i)s!=="key"&&(a[s]=i[s])}else a=i;return i=a.ref,{$$typeof:n,type:r,key:o,ref:i!==void 0?i:null,props:a}}return m1.Fragment=e,m1.jsx=t,m1.jsxs=t,m1}var hw;function VC(){return hw||(hw=1,Vm.exports=UC()),Vm.exports}var O=VC(),zm={exports:{}},an={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dw;function zC(){if(dw)return an;dw=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),o=Symbol.for("react.context"),s=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),p=Symbol.iterator;function g(X){return X===null||typeof X!="object"?null:(X=p&&X[p]||X["@@iterator"],typeof X=="function"?X:null)}var m={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_=Object.assign,b={};function T(X,me,G){this.props=X,this.context=me,this.refs=b,this.updater=G||m}T.prototype.isReactComponent={},T.prototype.setState=function(X,me){if(typeof X!="object"&&typeof X!="function"&&X!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,X,me,"setState")},T.prototype.forceUpdate=function(X){this.updater.enqueueForceUpdate(this,X,"forceUpdate")};function S(){}S.prototype=T.prototype;function D(X,me,G){this.props=X,this.context=me,this.refs=b,this.updater=G||m}var B=D.prototype=new S;B.constructor=D,_(B,T.prototype),B.isPureReactComponent=!0;var V=Array.isArray,Y={H:null,A:null,T:null,S:null,V:null},q=Object.prototype.hasOwnProperty;function P(X,me,G,Q,ee,ie){return G=ie.ref,{$$typeof:n,type:X,key:me,ref:G!==void 0?G:null,props:ie}}function E(X,me){return P(X.type,me,void 0,void 0,void 0,X.props)}function C(X){return typeof X=="object"&&X!==null&&X.$$typeof===n}function M(X){var me={"=":"=0",":":"=2"};return"$"+X.replace(/[=:]/g,function(G){return me[G]})}var R=/\/+/g;function L(X,me){return typeof X=="object"&&X!==null&&X.key!=null?M(""+X.key):me.toString(36)}function j(){}function $(X){switch(X.status){case"fulfilled":return X.value;case"rejected":throw X.reason;default:switch(typeof X.status=="string"?X.then(j,j):(X.status="pending",X.then(function(me){X.status==="pending"&&(X.status="fulfilled",X.value=me)},function(me){X.status==="pending"&&(X.status="rejected",X.reason=me)})),X.status){case"fulfilled":return X.value;case"rejected":throw X.reason}}throw X}function ne(X,me,G,Q,ee){var ie=typeof X;(ie==="undefined"||ie==="boolean")&&(X=null);var de=!1;if(X===null)de=!0;else switch(ie){case"bigint":case"string":case"number":de=!0;break;case"object":switch(X.$$typeof){case n:case e:de=!0;break;case h:return de=X._init,ne(de(X._payload),me,G,Q,ee)}}if(de)return ee=ee(X),de=Q===""?"."+L(X,0):Q,V(ee)?(G="",de!=null&&(G=de.replace(R,"$&/")+"/"),ne(ee,me,G,"",function(Te){return Te})):ee!=null&&(C(ee)&&(ee=E(ee,G+(ee.key==null||X&&X.key===ee.key?"":(""+ee.key).replace(R,"$&/")+"/")+de)),me.push(ee)),1;de=0;var Ee=Q===""?".":Q+":";if(V(X))for(var be=0;be<X.length;be++)Q=X[be],ie=Ee+L(Q,be),de+=ne(Q,me,G,ie,ee);else if(be=g(X),typeof be=="function")for(X=be.call(X),be=0;!(Q=X.next()).done;)Q=Q.value,ie=Ee+L(Q,be++),de+=ne(Q,me,G,ie,ee);else if(ie==="object"){if(typeof X.then=="function")return ne($(X),me,G,Q,ee);throw me=String(X),Error("Objects are not valid as a React child (found: "+(me==="[object Object]"?"object with keys {"+Object.keys(X).join(", ")+"}":me)+"). If you meant to render a collection of children, use an array instead.")}return de}function U(X,me,G){if(X==null)return X;var Q=[],ee=0;return ne(X,Q,"","",function(ie){return me.call(G,ie,ee++)}),Q}function z(X){if(X._status===-1){var me=X._result;me=me(),me.then(function(G){(X._status===0||X._status===-1)&&(X._status=1,X._result=G)},function(G){(X._status===0||X._status===-1)&&(X._status=2,X._result=G)}),X._status===-1&&(X._status=0,X._result=me)}if(X._status===1)return X._result.default;throw X._result}var te=typeof reportError=="function"?reportError:function(X){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var me=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof X=="object"&&X!==null&&typeof X.message=="string"?String(X.message):String(X),error:X});if(!window.dispatchEvent(me))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",X);return}console.error(X)};function ue(){}return an.Children={map:U,forEach:function(X,me,G){U(X,function(){me.apply(this,arguments)},G)},count:function(X){var me=0;return U(X,function(){me++}),me},toArray:function(X){return U(X,function(me){return me})||[]},only:function(X){if(!C(X))throw Error("React.Children.only expected to receive a single React element child.");return X}},an.Component=T,an.Fragment=t,an.Profiler=i,an.PureComponent=D,an.StrictMode=r,an.Suspense=u,an.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Y,an.__COMPILER_RUNTIME={__proto__:null,c:function(X){return Y.H.useMemoCache(X)}},an.cache=function(X){return function(){return X.apply(null,arguments)}},an.cloneElement=function(X,me,G){if(X==null)throw Error("The argument must be a React element, but you passed "+X+".");var Q=_({},X.props),ee=X.key,ie=void 0;if(me!=null)for(de in me.ref!==void 0&&(ie=void 0),me.key!==void 0&&(ee=""+me.key),me)!q.call(me,de)||de==="key"||de==="__self"||de==="__source"||de==="ref"&&me.ref===void 0||(Q[de]=me[de]);var de=arguments.length-2;if(de===1)Q.children=G;else if(1<de){for(var Ee=Array(de),be=0;be<de;be++)Ee[be]=arguments[be+2];Q.children=Ee}return P(X.type,ee,void 0,void 0,ie,Q)},an.createContext=function(X){return X={$$typeof:o,_currentValue:X,_currentValue2:X,_threadCount:0,Provider:null,Consumer:null},X.Provider=X,X.Consumer={$$typeof:a,_context:X},X},an.createElement=function(X,me,G){var Q,ee={},ie=null;if(me!=null)for(Q in me.key!==void 0&&(ie=""+me.key),me)q.call(me,Q)&&Q!=="key"&&Q!=="__self"&&Q!=="__source"&&(ee[Q]=me[Q]);var de=arguments.length-2;if(de===1)ee.children=G;else if(1<de){for(var Ee=Array(de),be=0;be<de;be++)Ee[be]=arguments[be+2];ee.children=Ee}if(X&&X.defaultProps)for(Q in de=X.defaultProps,de)ee[Q]===void 0&&(ee[Q]=de[Q]);return P(X,ie,void 0,void 0,null,ee)},an.createRef=function(){return{current:null}},an.forwardRef=function(X){return{$$typeof:s,render:X}},an.isValidElement=C,an.lazy=function(X){return{$$typeof:h,_payload:{_status:-1,_result:X},_init:z}},an.memo=function(X,me){return{$$typeof:f,type:X,compare:me===void 0?null:me}},an.startTransition=function(X){var me=Y.T,G={};Y.T=G;try{var Q=X(),ee=Y.S;ee!==null&&ee(G,Q),typeof Q=="object"&&Q!==null&&typeof Q.then=="function"&&Q.then(ue,te)}catch(ie){te(ie)}finally{Y.T=me}},an.unstable_useCacheRefresh=function(){return Y.H.useCacheRefresh()},an.use=function(X){return Y.H.use(X)},an.useActionState=function(X,me,G){return Y.H.useActionState(X,me,G)},an.useCallback=function(X,me){return Y.H.useCallback(X,me)},an.useContext=function(X){return Y.H.useContext(X)},an.useDebugValue=function(){},an.useDeferredValue=function(X,me){return Y.H.useDeferredValue(X,me)},an.useEffect=function(X,me,G){var Q=Y.H;if(typeof G=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return Q.useEffect(X,me)},an.useId=function(){return Y.H.useId()},an.useImperativeHandle=function(X,me,G){return Y.H.useImperativeHandle(X,me,G)},an.useInsertionEffect=function(X,me){return Y.H.useInsertionEffect(X,me)},an.useLayoutEffect=function(X,me){return Y.H.useLayoutEffect(X,me)},an.useMemo=function(X,me){return Y.H.useMemo(X,me)},an.useOptimistic=function(X,me){return Y.H.useOptimistic(X,me)},an.useReducer=function(X,me,G){return Y.H.useReducer(X,me,G)},an.useRef=function(X){return Y.H.useRef(X)},an.useState=function(X){return Y.H.useState(X)},an.useSyncExternalStore=function(X,me,G){return Y.H.useSyncExternalStore(X,me,G)},an.useTransition=function(){return Y.H.useTransition()},an.version="19.1.0",an}var pw;function Gg(){return pw||(pw=1,zm.exports=zC()),zm.exports}var ve=Gg();const Ln=U4(ve);var qm={exports:{}},v1={},Hm={exports:{}},Gm={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gw;function qC(){return gw||(gw=1,function(n){function e(U,z){var te=U.length;U.push(z);e:for(;0<te;){var ue=te-1>>>1,X=U[ue];if(0<i(X,z))U[ue]=z,U[te]=X,te=ue;else break e}}function t(U){return U.length===0?null:U[0]}function r(U){if(U.length===0)return null;var z=U[0],te=U.pop();if(te!==z){U[0]=te;e:for(var ue=0,X=U.length,me=X>>>1;ue<me;){var G=2*(ue+1)-1,Q=U[G],ee=G+1,ie=U[ee];if(0>i(Q,te))ee<X&&0>i(ie,Q)?(U[ue]=ie,U[ee]=te,ue=ee):(U[ue]=Q,U[G]=te,ue=G);else if(ee<X&&0>i(ie,te))U[ue]=ie,U[ee]=te,ue=ee;else break e}}return z}function i(U,z){var te=U.sortIndex-z.sortIndex;return te!==0?te:U.id-z.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var o=Date,s=o.now();n.unstable_now=function(){return o.now()-s}}var u=[],f=[],h=1,p=null,g=3,m=!1,_=!1,b=!1,T=!1,S=typeof setTimeout=="function"?setTimeout:null,D=typeof clearTimeout=="function"?clearTimeout:null,B=typeof setImmediate<"u"?setImmediate:null;function V(U){for(var z=t(f);z!==null;){if(z.callback===null)r(f);else if(z.startTime<=U)r(f),z.sortIndex=z.expirationTime,e(u,z);else break;z=t(f)}}function Y(U){if(b=!1,V(U),!_)if(t(u)!==null)_=!0,q||(q=!0,L());else{var z=t(f);z!==null&&ne(Y,z.startTime-U)}}var q=!1,P=-1,E=5,C=-1;function M(){return T?!0:!(n.unstable_now()-C<E)}function R(){if(T=!1,q){var U=n.unstable_now();C=U;var z=!0;try{e:{_=!1,b&&(b=!1,D(P),P=-1),m=!0;var te=g;try{t:{for(V(U),p=t(u);p!==null&&!(p.expirationTime>U&&M());){var ue=p.callback;if(typeof ue=="function"){p.callback=null,g=p.priorityLevel;var X=ue(p.expirationTime<=U);if(U=n.unstable_now(),typeof X=="function"){p.callback=X,V(U),z=!0;break t}p===t(u)&&r(u),V(U)}else r(u);p=t(u)}if(p!==null)z=!0;else{var me=t(f);me!==null&&ne(Y,me.startTime-U),z=!1}}break e}finally{p=null,g=te,m=!1}z=void 0}}finally{z?L():q=!1}}}var L;if(typeof B=="function")L=function(){B(R)};else if(typeof MessageChannel<"u"){var j=new MessageChannel,$=j.port2;j.port1.onmessage=R,L=function(){$.postMessage(null)}}else L=function(){S(R,0)};function ne(U,z){P=S(function(){U(n.unstable_now())},z)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(U){U.callback=null},n.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<U?Math.floor(1e3/U):5},n.unstable_getCurrentPriorityLevel=function(){return g},n.unstable_next=function(U){switch(g){case 1:case 2:case 3:var z=3;break;default:z=g}var te=g;g=z;try{return U()}finally{g=te}},n.unstable_requestPaint=function(){T=!0},n.unstable_runWithPriority=function(U,z){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var te=g;g=U;try{return z()}finally{g=te}},n.unstable_scheduleCallback=function(U,z,te){var ue=n.unstable_now();switch(typeof te=="object"&&te!==null?(te=te.delay,te=typeof te=="number"&&0<te?ue+te:ue):te=ue,U){case 1:var X=-1;break;case 2:X=250;break;case 5:X=1073741823;break;case 4:X=1e4;break;default:X=5e3}return X=te+X,U={id:h++,callback:z,priorityLevel:U,startTime:te,expirationTime:X,sortIndex:-1},te>ue?(U.sortIndex=te,e(f,U),t(u)===null&&U===t(f)&&(b?(D(P),P=-1):b=!0,ne(Y,te-ue))):(U.sortIndex=X,e(u,U),_||m||(_=!0,q||(q=!0,L()))),U},n.unstable_shouldYield=M,n.unstable_wrapCallback=function(U){var z=g;return function(){var te=g;g=z;try{return U.apply(this,arguments)}finally{g=te}}}}(Gm)),Gm}var mw;function HC(){return mw||(mw=1,Hm.exports=qC()),Hm.exports}var Wm={exports:{}},Sa={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vw;function GC(){if(vw)return Sa;vw=1;var n=Gg();function e(u){var f="https://react.dev/errors/"+u;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var h=2;h<arguments.length;h++)f+="&args[]="+encodeURIComponent(arguments[h])}return"Minified React error #"+u+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var r={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},i=Symbol.for("react.portal");function a(u,f,h){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:p==null?null:""+p,children:u,containerInfo:f,implementation:h}}var o=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function s(u,f){if(u==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return Sa.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Sa.createPortal=function(u,f){var h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(e(299));return a(u,f,null,h)},Sa.flushSync=function(u){var f=o.T,h=r.p;try{if(o.T=null,r.p=2,u)return u()}finally{o.T=f,r.p=h,r.d.f()}},Sa.preconnect=function(u,f){typeof u=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,r.d.C(u,f))},Sa.prefetchDNS=function(u){typeof u=="string"&&r.d.D(u)},Sa.preinit=function(u,f){if(typeof u=="string"&&f&&typeof f.as=="string"){var h=f.as,p=s(h,f.crossOrigin),g=typeof f.integrity=="string"?f.integrity:void 0,m=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;h==="style"?r.d.S(u,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:p,integrity:g,fetchPriority:m}):h==="script"&&r.d.X(u,{crossOrigin:p,integrity:g,fetchPriority:m,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},Sa.preinitModule=function(u,f){if(typeof u=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var h=s(f.as,f.crossOrigin);r.d.M(u,{crossOrigin:h,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&r.d.M(u)},Sa.preload=function(u,f){if(typeof u=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var h=f.as,p=s(h,f.crossOrigin);r.d.L(u,h,{crossOrigin:p,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},Sa.preloadModule=function(u,f){if(typeof u=="string")if(f){var h=s(f.as,f.crossOrigin);r.d.m(u,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:h,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else r.d.m(u)},Sa.requestFormReset=function(u){r.d.r(u)},Sa.unstable_batchedUpdates=function(u,f){return u(f)},Sa.useFormState=function(u,f,h){return o.H.useFormState(u,f,h)},Sa.useFormStatus=function(){return o.H.useHostTransitionStatus()},Sa.version="19.1.0",Sa}var yw;function WC(){if(yw)return Wm.exports;yw=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Wm.exports=GC(),Wm.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xw;function $C(){if(xw)return v1;xw=1;var n=HC(),e=Gg(),t=WC();function r(l){var c="https://react.dev/errors/"+l;if(1<arguments.length){c+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)c+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+l+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(l){return!(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11)}function a(l){var c=l,d=l;if(l.alternate)for(;c.return;)c=c.return;else{l=c;do c=l,(c.flags&4098)!==0&&(d=c.return),l=c.return;while(l)}return c.tag===3?d:null}function o(l){if(l.tag===13){var c=l.memoizedState;if(c===null&&(l=l.alternate,l!==null&&(c=l.memoizedState)),c!==null)return c.dehydrated}return null}function s(l){if(a(l)!==l)throw Error(r(188))}function u(l){var c=l.alternate;if(!c){if(c=a(l),c===null)throw Error(r(188));return c!==l?null:l}for(var d=l,v=c;;){var w=d.return;if(w===null)break;var I=w.alternate;if(I===null){if(v=w.return,v!==null){d=v;continue}break}if(w.child===I.child){for(I=w.child;I;){if(I===d)return s(w),l;if(I===v)return s(w),c;I=I.sibling}throw Error(r(188))}if(d.return!==v.return)d=w,v=I;else{for(var K=!1,le=w.child;le;){if(le===d){K=!0,d=w,v=I;break}if(le===v){K=!0,v=w,d=I;break}le=le.sibling}if(!K){for(le=I.child;le;){if(le===d){K=!0,d=I,v=w;break}if(le===v){K=!0,v=I,d=w;break}le=le.sibling}if(!K)throw Error(r(189))}}if(d.alternate!==v)throw Error(r(190))}if(d.tag!==3)throw Error(r(188));return d.stateNode.current===d?l:c}function f(l){var c=l.tag;if(c===5||c===26||c===27||c===6)return l;for(l=l.child;l!==null;){if(c=f(l),c!==null)return c;l=l.sibling}return null}var h=Object.assign,p=Symbol.for("react.element"),g=Symbol.for("react.transitional.element"),m=Symbol.for("react.portal"),_=Symbol.for("react.fragment"),b=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),S=Symbol.for("react.provider"),D=Symbol.for("react.consumer"),B=Symbol.for("react.context"),V=Symbol.for("react.forward_ref"),Y=Symbol.for("react.suspense"),q=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),C=Symbol.for("react.activity"),M=Symbol.for("react.memo_cache_sentinel"),R=Symbol.iterator;function L(l){return l===null||typeof l!="object"?null:(l=R&&l[R]||l["@@iterator"],typeof l=="function"?l:null)}var j=Symbol.for("react.client.reference");function $(l){if(l==null)return null;if(typeof l=="function")return l.$$typeof===j?null:l.displayName||l.name||null;if(typeof l=="string")return l;switch(l){case _:return"Fragment";case T:return"Profiler";case b:return"StrictMode";case Y:return"Suspense";case q:return"SuspenseList";case C:return"Activity"}if(typeof l=="object")switch(l.$$typeof){case m:return"Portal";case B:return(l.displayName||"Context")+".Provider";case D:return(l._context.displayName||"Context")+".Consumer";case V:var c=l.render;return l=l.displayName,l||(l=c.displayName||c.name||"",l=l!==""?"ForwardRef("+l+")":"ForwardRef"),l;case P:return c=l.displayName||null,c!==null?c:$(l.type)||"Memo";case E:c=l._payload,l=l._init;try{return $(l(c))}catch{}}return null}var ne=Array.isArray,U=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,z=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,te={pending:!1,data:null,method:null,action:null},ue=[],X=-1;function me(l){return{current:l}}function G(l){0>X||(l.current=ue[X],ue[X]=null,X--)}function Q(l,c){X++,ue[X]=l.current,l.current=c}var ee=me(null),ie=me(null),de=me(null),Ee=me(null);function be(l,c){switch(Q(de,c),Q(ie,l),Q(ee,null),c.nodeType){case 9:case 11:l=(l=c.documentElement)&&(l=l.namespaceURI)?j_(l):0;break;default:if(l=c.tagName,c=c.namespaceURI)c=j_(c),l=U_(c,l);else switch(l){case"svg":l=1;break;case"math":l=2;break;default:l=0}}G(ee),Q(ee,l)}function Te(){G(ee),G(ie),G(de)}function Ge(l){l.memoizedState!==null&&Q(Ee,l);var c=ee.current,d=U_(c,l.type);c!==d&&(Q(ie,l),Q(ee,d))}function He(l){ie.current===l&&(G(ee),G(ie)),Ee.current===l&&(G(Ee),f1._currentValue=te)}var rt=Object.prototype.hasOwnProperty,st=n.unstable_scheduleCallback,wt=n.unstable_cancelCallback,Be=n.unstable_shouldYield,ge=n.unstable_requestPaint,gt=n.unstable_now,lt=n.unstable_getCurrentPriorityLevel,Xe=n.unstable_ImmediatePriority,it=n.unstable_UserBlockingPriority,at=n.unstable_NormalPriority,ot=n.unstable_LowPriority,ct=n.unstable_IdlePriority,mt=n.log,Rt=n.unstable_setDisableYieldValue,_t=null,bt=null;function Nt(l){if(typeof mt=="function"&&Rt(l),bt&&typeof bt.setStrictMode=="function")try{bt.setStrictMode(_t,l)}catch{}}var xt=Math.clz32?Math.clz32:mn,Ot=Math.log,ut=Math.LN2;function mn(l){return l>>>=0,l===0?32:31-(Ot(l)/ut|0)|0}var Vt=256,Xn=4194304;function Yt(l){var c=l&42;if(c!==0)return c;switch(l&-l){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return l&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return l}}function An(l,c,d){var v=l.pendingLanes;if(v===0)return 0;var w=0,I=l.suspendedLanes,K=l.pingedLanes;l=l.warmLanes;var le=v&134217727;return le!==0?(v=le&~I,v!==0?w=Yt(v):(K&=le,K!==0?w=Yt(K):d||(d=le&~l,d!==0&&(w=Yt(d))))):(le=v&~I,le!==0?w=Yt(le):K!==0?w=Yt(K):d||(d=v&~l,d!==0&&(w=Yt(d)))),w===0?0:c!==0&&c!==w&&(c&I)===0&&(I=w&-w,d=c&-c,I>=d||I===32&&(d&4194048)!==0)?c:w}function di(l,c){return(l.pendingLanes&~(l.suspendedLanes&~l.pingedLanes)&c)===0}function on(l,c){switch(l){case 1:case 2:case 4:case 8:case 64:return c+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function da(){var l=Vt;return Vt<<=1,(Vt&4194048)===0&&(Vt=256),l}function Cn(){var l=Xn;return Xn<<=1,(Xn&62914560)===0&&(Xn=4194304),l}function Lr(l){for(var c=[],d=0;31>d;d++)c.push(l);return c}function or(l,c){l.pendingLanes|=c,c!==268435456&&(l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0)}function vn(l,c,d,v,w,I){var K=l.pendingLanes;l.pendingLanes=d,l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0,l.expiredLanes&=d,l.entangledLanes&=d,l.errorRecoveryDisabledLanes&=d,l.shellSuspendCounter=0;var le=l.entanglements,ye=l.expirationTimes,ke=l.hiddenUpdates;for(d=K&~d;0<d;){var We=31-xt(d),Ze=1<<We;le[We]=0,ye[We]=-1;var Fe=ke[We];if(Fe!==null)for(ke[We]=null,We=0;We<Fe.length;We++){var je=Fe[We];je!==null&&(je.lane&=-536870913)}d&=~Ze}v!==0&&Tt(l,v,0),I!==0&&w===0&&l.tag!==0&&(l.suspendedLanes|=I&~(K&~c))}function Tt(l,c,d){l.pendingLanes|=c,l.suspendedLanes&=~c;var v=31-xt(c);l.entangledLanes|=c,l.entanglements[v]=l.entanglements[v]|1073741824|d&4194090}function tn(l,c){var d=l.entangledLanes|=c;for(l=l.entanglements;d;){var v=31-xt(d),w=1<<v;w&c|l[v]&c&&(l[v]|=c),d&=~w}}function Ei(l){switch(l){case 2:l=1;break;case 8:l=4;break;case 32:l=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:l=128;break;case 268435456:l=134217728;break;default:l=0}return l}function kn(l){return l&=-l,2<l?8<l?(l&134217727)!==0?32:268435456:8:2}function dr(){var l=z.p;return l!==0?l:(l=window.event,l===void 0?32:aw(l.type))}function ja(l,c){var d=z.p;try{return z.p=l,c()}finally{z.p=d}}var vt=Math.random().toString(36).slice(2),Hn="__reactFiber$"+vt,Gn="__reactProps$"+vt,pr="__reactContainer$"+vt,wr="__reactEvents$"+vt,Ir="__reactListeners$"+vt,Hr="__reactHandles$"+vt,Es="__reactResources$"+vt,Zi="__reactMarker$"+vt;function pi(l){delete l[Hn],delete l[Gn],delete l[wr],delete l[Ir],delete l[Hr]}function ei(l){var c=l[Hn];if(c)return c;for(var d=l.parentNode;d;){if(c=d[pr]||d[Hn]){if(d=c.alternate,c.child!==null||d!==null&&d.child!==null)for(l=H_(l);l!==null;){if(d=l[Hn])return d;l=H_(l)}return c}l=d,d=l.parentNode}return null}function Gr(l){if(l=l[Hn]||l[pr]){var c=l.tag;if(c===5||c===6||c===13||c===26||c===27||c===3)return l}return null}function ti(l){var c=l.tag;if(c===5||c===26||c===27||c===6)return l.stateNode;throw Error(r(33))}function sr(l){var c=l[Es];return c||(c=l[Es]={hoistableStyles:new Map,hoistableScripts:new Map}),c}function Mn(l){l[Zi]=!0}var Eo=new Set,So={};function Bi(l,c){pa(l,c),pa(l+"Capture",c)}function pa(l,c){for(So[l]=c,l=0;l<c.length;l++)Eo.add(c[l])}var Ss=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),lu={},Cs={};function ic(l){return rt.call(Cs,l)?!0:rt.call(lu,l)?!1:Ss.test(l)?Cs[l]=!0:(lu[l]=!0,!1)}function Ua(l,c,d){if(ic(c))if(d===null)l.removeAttribute(c);else{switch(typeof d){case"undefined":case"function":case"symbol":l.removeAttribute(c);return;case"boolean":var v=c.toLowerCase().slice(0,5);if(v!=="data-"&&v!=="aria-"){l.removeAttribute(c);return}}l.setAttribute(c,""+d)}}function Va(l,c,d){if(d===null)l.removeAttribute(c);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(c);return}l.setAttribute(c,""+d)}}function ni(l,c,d,v){if(v===null)l.removeAttribute(d);else{switch(typeof v){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(d);return}l.setAttributeNS(c,d,""+v)}}var Co,ac;function Qa(l){if(Co===void 0)try{throw Error()}catch(d){var c=d.stack.trim().match(/\n( *(at )?)/);Co=c&&c[1]||"",ac=-1<d.stack.indexOf(`
    at`)?" (<anonymous>)":-1<d.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Co+l+ac}var dl=!1;function To(l,c){if(!l||dl)return"";dl=!0;var d=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var v={DetermineComponentFrameRoot:function(){try{if(c){var Ze=function(){throw Error()};if(Object.defineProperty(Ze.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Ze,[])}catch(je){var Fe=je}Reflect.construct(l,[],Ze)}else{try{Ze.call()}catch(je){Fe=je}l.call(Ze.prototype)}}else{try{throw Error()}catch(je){Fe=je}(Ze=l())&&typeof Ze.catch=="function"&&Ze.catch(function(){})}}catch(je){if(je&&Fe&&typeof je.stack=="string")return[je.stack,Fe.stack]}return[null,null]}};v.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var w=Object.getOwnPropertyDescriptor(v.DetermineComponentFrameRoot,"name");w&&w.configurable&&Object.defineProperty(v.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var I=v.DetermineComponentFrameRoot(),K=I[0],le=I[1];if(K&&le){var ye=K.split(`
`),ke=le.split(`
`);for(w=v=0;v<ye.length&&!ye[v].includes("DetermineComponentFrameRoot");)v++;for(;w<ke.length&&!ke[w].includes("DetermineComponentFrameRoot");)w++;if(v===ye.length||w===ke.length)for(v=ye.length-1,w=ke.length-1;1<=v&&0<=w&&ye[v]!==ke[w];)w--;for(;1<=v&&0<=w;v--,w--)if(ye[v]!==ke[w]){if(v!==1||w!==1)do if(v--,w--,0>w||ye[v]!==ke[w]){var We=`
`+ye[v].replace(" at new "," at ");return l.displayName&&We.includes("<anonymous>")&&(We=We.replace("<anonymous>",l.displayName)),We}while(1<=v&&0<=w);break}}}finally{dl=!1,Error.prepareStackTrace=d}return(d=l?l.displayName||l.name:"")?Qa(d):""}function uu(l){switch(l.tag){case 26:case 27:case 5:return Qa(l.type);case 16:return Qa("Lazy");case 13:return Qa("Suspense");case 19:return Qa("SuspenseList");case 0:case 15:return To(l.type,!1);case 11:return To(l.type.render,!1);case 1:return To(l.type,!0);case 31:return Qa("Activity");default:return""}}function lr(l){try{var c="";do c+=uu(l),l=l.return;while(l);return c}catch(d){return`
Error generating stack: `+d.message+`
`+d.stack}}function gi(l){switch(typeof l){case"bigint":case"boolean":case"number":case"string":case"undefined":return l;case"object":return l;default:return""}}function pl(l){var c=l.type;return(l=l.nodeName)&&l.toLowerCase()==="input"&&(c==="checkbox"||c==="radio")}function oc(l){var c=pl(l)?"checked":"value",d=Object.getOwnPropertyDescriptor(l.constructor.prototype,c),v=""+l[c];if(!l.hasOwnProperty(c)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var w=d.get,I=d.set;return Object.defineProperty(l,c,{configurable:!0,get:function(){return w.call(this)},set:function(K){v=""+K,I.call(this,K)}}),Object.defineProperty(l,c,{enumerable:d.enumerable}),{getValue:function(){return v},setValue:function(K){v=""+K},stopTracking:function(){l._valueTracker=null,delete l[c]}}}}function Yo(l){l._valueTracker||(l._valueTracker=oc(l))}function cu(l){if(!l)return!1;var c=l._valueTracker;if(!c)return!0;var d=c.getValue(),v="";return l&&(v=pl(l)?l.checked?"true":"false":l.value),l=v,l!==d?(c.setValue(l),!0):!1}function Si(l){if(l=l||(typeof document<"u"?document:void 0),typeof l>"u")return null;try{return l.activeElement||l.body}catch{return l.body}}var gl=/[\n"\\]/g;function En(l){return l.replace(gl,function(c){return"\\"+c.charCodeAt(0).toString(16)+" "})}function Ci(l,c,d,v,w,I,K,le){l.name="",K!=null&&typeof K!="function"&&typeof K!="symbol"&&typeof K!="boolean"?l.type=K:l.removeAttribute("type"),c!=null?K==="number"?(c===0&&l.value===""||l.value!=c)&&(l.value=""+gi(c)):l.value!==""+gi(c)&&(l.value=""+gi(c)):K!=="submit"&&K!=="reset"||l.removeAttribute("value"),c!=null?Qo(l,K,gi(c)):d!=null?Qo(l,K,gi(d)):v!=null&&l.removeAttribute("value"),w==null&&I!=null&&(l.defaultChecked=!!I),w!=null&&(l.checked=w&&typeof w!="function"&&typeof w!="symbol"),le!=null&&typeof le!="function"&&typeof le!="symbol"&&typeof le!="boolean"?l.name=""+gi(le):l.removeAttribute("name")}function Ko(l,c,d,v,w,I,K,le){if(I!=null&&typeof I!="function"&&typeof I!="symbol"&&typeof I!="boolean"&&(l.type=I),c!=null||d!=null){if(!(I!=="submit"&&I!=="reset"||c!=null))return;d=d!=null?""+gi(d):"",c=c!=null?""+gi(c):d,le||c===l.value||(l.value=c),l.defaultValue=c}v=v??w,v=typeof v!="function"&&typeof v!="symbol"&&!!v,l.checked=le?l.checked:!!v,l.defaultChecked=!!v,K!=null&&typeof K!="function"&&typeof K!="symbol"&&typeof K!="boolean"&&(l.name=K)}function Qo(l,c,d){c==="number"&&Si(l.ownerDocument)===l||l.defaultValue===""+d||(l.defaultValue=""+d)}function Za(l,c,d,v){if(l=l.options,c){c={};for(var w=0;w<d.length;w++)c["$"+d[w]]=!0;for(d=0;d<l.length;d++)w=c.hasOwnProperty("$"+l[d].value),l[d].selected!==w&&(l[d].selected=w),w&&v&&(l[d].defaultSelected=!0)}else{for(d=""+gi(d),c=null,w=0;w<l.length;w++){if(l[w].value===d){l[w].selected=!0,v&&(l[w].defaultSelected=!0);return}c!==null||l[w].disabled||(c=l[w])}c!==null&&(c.selected=!0)}}function Bn(l,c,d){if(c!=null&&(c=""+gi(c),c!==l.value&&(l.value=c),d==null)){l.defaultValue!==c&&(l.defaultValue=c);return}l.defaultValue=d!=null?""+gi(d):""}function Zo(l,c,d,v){if(c==null){if(v!=null){if(d!=null)throw Error(r(92));if(ne(v)){if(1<v.length)throw Error(r(93));v=v[0]}d=v}d==null&&(d=""),c=d}d=gi(c),l.defaultValue=d,v=l.textContent,v===d&&v!==""&&v!==null&&(l.value=v)}function ga(l,c){if(c){var d=l.firstChild;if(d&&d===l.lastChild&&d.nodeType===3){d.nodeValue=c;return}}l.textContent=c}var Io=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function sc(l,c,d){var v=c.indexOf("--")===0;d==null||typeof d=="boolean"||d===""?v?l.setProperty(c,""):c==="float"?l.cssFloat="":l[c]="":v?l.setProperty(c,d):typeof d!="number"||d===0||Io.has(c)?c==="float"?l.cssFloat=d:l[c]=(""+d).trim():l[c]=d+"px"}function fu(l,c,d){if(c!=null&&typeof c!="object")throw Error(r(62));if(l=l.style,d!=null){for(var v in d)!d.hasOwnProperty(v)||c!=null&&c.hasOwnProperty(v)||(v.indexOf("--")===0?l.setProperty(v,""):v==="float"?l.cssFloat="":l[v]="");for(var w in c)v=c[w],c.hasOwnProperty(w)&&d[w]!==v&&sc(l,w,v)}else for(var I in c)c.hasOwnProperty(I)&&sc(l,I,c[I])}function hu(l){if(l.indexOf("-")===-1)return!1;switch(l){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ro=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),ml=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function No(l){return ml.test(""+l)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":l}var Ja=null;function Jn(l){return l=l.target||l.srcElement||window,l.correspondingUseElement&&(l=l.correspondingUseElement),l.nodeType===3?l.parentNode:l}var Oo=null,eo=null;function Ft(l){var c=Gr(l);if(c&&(l=c.stateNode)){var d=l[Gn]||null;e:switch(l=c.stateNode,c.type){case"input":if(Ci(l,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name),c=d.name,d.type==="radio"&&c!=null){for(d=l;d.parentNode;)d=d.parentNode;for(d=d.querySelectorAll('input[name="'+En(""+c)+'"][type="radio"]'),c=0;c<d.length;c++){var v=d[c];if(v!==l&&v.form===l.form){var w=v[Gn]||null;if(!w)throw Error(r(90));Ci(v,w.value,w.defaultValue,w.defaultValue,w.checked,w.defaultChecked,w.type,w.name)}}for(c=0;c<d.length;c++)v=d[c],v.form===l.form&&cu(v)}break e;case"textarea":Bn(l,d.value,d.defaultValue);break e;case"select":c=d.value,c!=null&&Za(l,!!d.multiple,c,!1)}}}var to=!1;function lc(l,c,d){if(to)return l(c,d);to=!0;try{var v=l(c);return v}finally{if(to=!1,(Oo!==null||eo!==null)&&(np(),Oo&&(c=Oo,l=eo,eo=Oo=null,Ft(c),l)))for(c=0;c<l.length;c++)Ft(l[c])}}function Fi(l,c){var d=l.stateNode;if(d===null)return null;var v=d[Gn]||null;if(v===null)return null;d=v[c];e:switch(c){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(v=!v.disabled)||(l=l.type,v=!(l==="button"||l==="input"||l==="select"||l==="textarea")),l=!v;break e;default:l=!1}if(l)return null;if(d&&typeof d!="function")throw Error(r(231,c,typeof d));return d}var ma=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ji=!1;if(ma)try{var no={};Object.defineProperty(no,"passive",{get:function(){Ji=!0}}),window.addEventListener("test",no,no),window.removeEventListener("test",no,no)}catch{Ji=!1}var va=null,Jo=null,Do=null;function du(){if(Do)return Do;var l,c=Jo,d=c.length,v,w="value"in va?va.value:va.textContent,I=w.length;for(l=0;l<d&&c[l]===w[l];l++);var K=d-l;for(v=1;v<=K&&c[d-v]===w[I-v];v++);return Do=w.slice(l,1<v?1-v:void 0)}function ya(l){var c=l.keyCode;return"charCode"in l?(l=l.charCode,l===0&&c===13&&(l=13)):l=c,l===10&&(l=13),32<=l||l===13?l:0}function ji(){return!0}function ro(){return!1}function Wr(l){function c(d,v,w,I,K){this._reactName=d,this._targetInst=w,this.type=v,this.nativeEvent=I,this.target=K,this.currentTarget=null;for(var le in l)l.hasOwnProperty(le)&&(d=l[le],this[le]=d?d(I):I[le]);return this.isDefaultPrevented=(I.defaultPrevented!=null?I.defaultPrevented:I.returnValue===!1)?ji:ro,this.isPropagationStopped=ro,this}return h(c.prototype,{preventDefault:function(){this.defaultPrevented=!0;var d=this.nativeEvent;d&&(d.preventDefault?d.preventDefault():typeof d.returnValue!="unknown"&&(d.returnValue=!1),this.isDefaultPrevented=ji)},stopPropagation:function(){var d=this.nativeEvent;d&&(d.stopPropagation?d.stopPropagation():typeof d.cancelBubble!="unknown"&&(d.cancelBubble=!0),this.isPropagationStopped=ji)},persist:function(){},isPersistent:ji}),c}var hn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(l){return l.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},es=Wr(hn),io=h({},hn,{view:0,detail:0}),pu=Wr(io),Ts,Is,za,Ui=h({},io,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:is,button:0,buttons:0,relatedTarget:function(l){return l.relatedTarget===void 0?l.fromElement===l.srcElement?l.toElement:l.fromElement:l.relatedTarget},movementX:function(l){return"movementX"in l?l.movementX:(l!==za&&(za&&l.type==="mousemove"?(Ts=l.screenX-za.screenX,Is=l.screenY-za.screenY):Is=Ts=0,za=l),Ts)},movementY:function(l){return"movementY"in l?l.movementY:Is}}),$r=Wr(Ui),uc=h({},Ui,{dataTransfer:0}),ts=Wr(uc),Ti=h({},io,{relatedTarget:0}),ns=Wr(Ti),Po=h({},hn,{animationName:0,elapsedTime:0,pseudoElement:0}),vl=Wr(Po),Rs=h({},hn,{clipboardData:function(l){return"clipboardData"in l?l.clipboardData:window.clipboardData}}),yl=Wr(Rs),gu=h({},hn,{data:0}),Ns=Wr(gu),rs={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Os={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xl={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ds(l){var c=this.nativeEvent;return c.getModifierState?c.getModifierState(l):(l=xl[l])?!!c[l]:!1}function is(){return Ds}var cc=h({},io,{key:function(l){if(l.key){var c=rs[l.key]||l.key;if(c!=="Unidentified")return c}return l.type==="keypress"?(l=ya(l),l===13?"Enter":String.fromCharCode(l)):l.type==="keydown"||l.type==="keyup"?Os[l.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:is,charCode:function(l){return l.type==="keypress"?ya(l):0},keyCode:function(l){return l.type==="keydown"||l.type==="keyup"?l.keyCode:0},which:function(l){return l.type==="keypress"?ya(l):l.type==="keydown"||l.type==="keyup"?l.keyCode:0}}),Lo=Wr(cc),as=h({},Ui,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ps=Wr(as),Vi=h({},io,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:is}),_l=Wr(Vi),N=h({},hn,{propertyName:0,elapsedTime:0,pseudoElement:0}),J=Wr(N),pe=h({},Ui,{deltaX:function(l){return"deltaX"in l?l.deltaX:"wheelDeltaX"in l?-l.wheelDeltaX:0},deltaY:function(l){return"deltaY"in l?l.deltaY:"wheelDeltaY"in l?-l.wheelDeltaY:"wheelDelta"in l?-l.wheelDelta:0},deltaZ:0,deltaMode:0}),xe=Wr(pe),Ie=h({},hn,{newState:0,oldState:0}),Ve=Wr(Ie),tt=[9,13,27,32],ht=ma&&"CompositionEvent"in window,x=null;ma&&"documentMode"in document&&(x=document.documentMode);var F=ma&&"TextEvent"in window&&!x,W=ma&&(!ht||x&&8<x&&11>=x),se=" ",Ce=!1;function Le(l,c){switch(l){case"keyup":return tt.indexOf(c.keyCode)!==-1;case"keydown":return c.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function nt(l){return l=l.detail,typeof l=="object"&&"data"in l?l.data:null}var jt=!1;function dn(l,c){switch(l){case"compositionend":return nt(c);case"keypress":return c.which!==32?null:(Ce=!0,se);case"textInput":return l=c.data,l===se&&Ce?null:l;default:return null}}function Kt(l,c){if(jt)return l==="compositionend"||!ht&&Le(l,c)?(l=du(),Do=Jo=va=null,jt=!1,l):null;switch(l){case"paste":return null;case"keypress":if(!(c.ctrlKey||c.altKey||c.metaKey)||c.ctrlKey&&c.altKey){if(c.char&&1<c.char.length)return c.char;if(c.which)return String.fromCharCode(c.which)}return null;case"compositionend":return W&&c.locale!=="ko"?null:c.data;default:return null}}var Fn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Yn(l){var c=l&&l.nodeName&&l.nodeName.toLowerCase();return c==="input"?!!Fn[l.type]:c==="textarea"}function ao(l,c,d,v){Oo?eo?eo.push(v):eo=[v]:Oo=v,c=lp(c,"onChange"),0<c.length&&(d=new es("onChange","change",null,d,v),l.push({event:d,listeners:c}))}var kr=null,xa=null;function os(l){L_(l,0)}function wl(l){var c=ti(l);if(cu(c))return l}function fc(l,c){if(l==="change")return c}var mu=!1;if(ma){var ri;if(ma){var bl="oninput"in document;if(!bl){var vu=document.createElement("div");vu.setAttribute("oninput","return;"),bl=typeof vu.oninput=="function"}ri=bl}else ri=!1;mu=ri&&(!document.documentMode||9<document.documentMode)}function yu(){kr&&(kr.detachEvent("onpropertychange",hc),xa=kr=null)}function hc(l){if(l.propertyName==="value"&&wl(xa)){var c=[];ao(c,xa,l,Jn(l)),lc(os,c)}}function _a(l,c,d){l==="focusin"?(yu(),kr=c,xa=d,kr.attachEvent("onpropertychange",hc)):l==="focusout"&&yu()}function Dd(l){if(l==="selectionchange"||l==="keyup"||l==="keydown")return wl(xa)}function yf(l,c){if(l==="click")return wl(c)}function ph(l,c){if(l==="input"||l==="change")return wl(c)}function oo(l,c){return l===c&&(l!==0||1/l===1/c)||l!==l&&c!==c}var mi=typeof Object.is=="function"?Object.is:oo;function Al(l,c){if(mi(l,c))return!0;if(typeof l!="object"||l===null||typeof c!="object"||c===null)return!1;var d=Object.keys(l),v=Object.keys(c);if(d.length!==v.length)return!1;for(v=0;v<d.length;v++){var w=d[v];if(!rt.call(c,w)||!mi(l[w],c[w]))return!1}return!0}function xf(l){for(;l&&l.firstChild;)l=l.firstChild;return l}function Ls(l,c){var d=xf(l);l=0;for(var v;d;){if(d.nodeType===3){if(v=l+d.textContent.length,l<=c&&v>=c)return{node:d,offset:c-l};l=v}e:{for(;d;){if(d.nextSibling){d=d.nextSibling;break e}d=d.parentNode}d=void 0}d=xf(d)}}function El(l,c){return l&&c?l===c?!0:l&&l.nodeType===3?!1:c&&c.nodeType===3?El(l,c.parentNode):"contains"in l?l.contains(c):l.compareDocumentPosition?!!(l.compareDocumentPosition(c)&16):!1:!1}function ea(l){l=l!=null&&l.ownerDocument!=null&&l.ownerDocument.defaultView!=null?l.ownerDocument.defaultView:window;for(var c=Si(l.document);c instanceof l.HTMLIFrameElement;){try{var d=typeof c.contentWindow.location.href=="string"}catch{d=!1}if(d)l=c.contentWindow;else break;c=Si(l.document)}return c}function Ii(l){var c=l&&l.nodeName&&l.nodeName.toLowerCase();return c&&(c==="input"&&(l.type==="text"||l.type==="search"||l.type==="tel"||l.type==="url"||l.type==="password")||c==="textarea"||l.contentEditable==="true")}var Sl=ma&&"documentMode"in document&&11>=document.documentMode,wa=null,ko=null,ss=null,Mo=!1;function Rr(l,c,d){var v=d.window===d?d.document:d.nodeType===9?d:d.ownerDocument;Mo||wa==null||wa!==Si(v)||(v=wa,"selectionStart"in v&&Ii(v)?v={start:v.selectionStart,end:v.selectionEnd}:(v=(v.ownerDocument&&v.ownerDocument.defaultView||window).getSelection(),v={anchorNode:v.anchorNode,anchorOffset:v.anchorOffset,focusNode:v.focusNode,focusOffset:v.focusOffset}),ss&&Al(ss,v)||(ss=v,v=lp(ko,"onSelect"),0<v.length&&(c=new es("onSelect","select",null,c,d),l.push({event:c,listeners:v}),c.target=wa)))}function Bo(l,c){var d={};return d[l.toLowerCase()]=c.toLowerCase(),d["Webkit"+l]="webkit"+c,d["Moz"+l]="moz"+c,d}var Xr={animationend:Bo("Animation","AnimationEnd"),animationiteration:Bo("Animation","AnimationIteration"),animationstart:Bo("Animation","AnimationStart"),transitionrun:Bo("Transition","TransitionRun"),transitionstart:Bo("Transition","TransitionStart"),transitioncancel:Bo("Transition","TransitionCancel"),transitionend:Bo("Transition","TransitionEnd")},ba={},xu={};ma&&(xu=document.createElement("div").style,"AnimationEvent"in window||(delete Xr.animationend.animation,delete Xr.animationiteration.animation,delete Xr.animationstart.animation),"TransitionEvent"in window||delete Xr.transitionend.transition);function ls(l){if(ba[l])return ba[l];if(!Xr[l])return l;var c=Xr[l],d;for(d in c)if(c.hasOwnProperty(d)&&d in xu)return ba[l]=c[d];return l}var dc=ls("animationend"),Cl=ls("animationiteration"),Tl=ls("animationstart"),Il=ls("transitionrun"),_u=ls("transitionstart"),pc=ls("transitioncancel"),Rl=ls("transitionend"),ks=new Map,wu="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");wu.push("scrollEnd");function Nr(l,c){ks.set(l,c),Bi(c,[l])}var qa=new WeakMap;function ln(l,c){if(typeof l=="object"&&l!==null){var d=qa.get(l);return d!==void 0?d:(c={value:l,source:c,stack:lr(c)},qa.set(l,c),c)}return{value:l,source:c,stack:lr(c)}}var un=[],ur=0,Mr=0;function so(){for(var l=ur,c=Mr=ur=0;c<l;){var d=un[c];un[c++]=null;var v=un[c];un[c++]=null;var w=un[c];un[c++]=null;var I=un[c];if(un[c++]=null,v!==null&&w!==null){var K=v.pending;K===null?w.next=w:(w.next=K.next,K.next=w),v.pending=w}I!==0&&gh(d,w,I)}}function Nl(l,c,d,v){un[ur++]=l,un[ur++]=c,un[ur++]=d,un[ur++]=v,Mr|=v,l.lanes|=v,l=l.alternate,l!==null&&(l.lanes|=v)}function Ol(l,c,d,v){return Nl(l,c,d,v),bu(l)}function Ms(l,c){return Nl(l,null,null,c),bu(l)}function gh(l,c,d){l.lanes|=d;var v=l.alternate;v!==null&&(v.lanes|=d);for(var w=!1,I=l.return;I!==null;)I.childLanes|=d,v=I.alternate,v!==null&&(v.childLanes|=d),I.tag===22&&(l=I.stateNode,l===null||l._visibility&1||(w=!0)),l=I,I=I.return;return l.tag===3?(I=l.stateNode,w&&c!==null&&(w=31-xt(d),l=I.hiddenUpdates,v=l[w],v===null?l[w]=[c]:v.push(c),c.lane=d|536870912),I):null}function bu(l){if(50<r1)throw r1=0,fm=null,Error(r(185));for(var c=l.return;c!==null;)l=c,c=l.return;return l.tag===3?l.stateNode:null}var vi={};function lo(l,c,d,v){this.tag=l,this.key=d,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=v,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function zi(l,c,d,v){return new lo(l,c,d,v)}function gc(l){return l=l.prototype,!(!l||!l.isReactComponent)}function us(l,c){var d=l.alternate;return d===null?(d=zi(l.tag,c,l.key,l.mode),d.elementType=l.elementType,d.type=l.type,d.stateNode=l.stateNode,d.alternate=l,l.alternate=d):(d.pendingProps=c,d.type=l.type,d.flags=0,d.subtreeFlags=0,d.deletions=null),d.flags=l.flags&65011712,d.childLanes=l.childLanes,d.lanes=l.lanes,d.child=l.child,d.memoizedProps=l.memoizedProps,d.memoizedState=l.memoizedState,d.updateQueue=l.updateQueue,c=l.dependencies,d.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},d.sibling=l.sibling,d.index=l.index,d.ref=l.ref,d.refCleanup=l.refCleanup,d}function _f(l,c){l.flags&=65011714;var d=l.alternate;return d===null?(l.childLanes=0,l.lanes=c,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=d.childLanes,l.lanes=d.lanes,l.child=d.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=d.memoizedProps,l.memoizedState=d.memoizedState,l.updateQueue=d.updateQueue,l.type=d.type,c=d.dependencies,l.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext}),l}function Au(l,c,d,v,w,I){var K=0;if(v=l,typeof l=="function")gc(l)&&(K=1);else if(typeof l=="string")K=TC(l,d,ee.current)?26:l==="html"||l==="head"||l==="body"?27:5;else e:switch(l){case C:return l=zi(31,d,c,w),l.elementType=C,l.lanes=I,l;case _:return Bs(d.children,w,I,c);case b:K=8,w|=24;break;case T:return l=zi(12,d,c,w|2),l.elementType=T,l.lanes=I,l;case Y:return l=zi(13,d,c,w),l.elementType=Y,l.lanes=I,l;case q:return l=zi(19,d,c,w),l.elementType=q,l.lanes=I,l;default:if(typeof l=="object"&&l!==null)switch(l.$$typeof){case S:case B:K=10;break e;case D:K=9;break e;case V:K=11;break e;case P:K=14;break e;case E:K=16,v=null;break e}K=29,d=Error(r(130,l===null?"null":typeof l,"")),v=null}return c=zi(K,d,c,w),c.elementType=l,c.type=v,c.lanes=I,c}function Bs(l,c,d,v){return l=zi(7,l,v,c),l.lanes=d,l}function mh(l,c,d){return l=zi(6,l,null,c),l.lanes=d,l}function wf(l,c,d){return c=zi(4,l.children!==null?l.children:[],l.key,c),c.lanes=d,c.stateNode={containerInfo:l.containerInfo,pendingChildren:null,implementation:l.implementation},c}var Dl=[],Fs=0,mc=null,vh=0,uo=[],Ha=0,Eu=null,js=1,Us="";function Su(l,c){Dl[Fs++]=vh,Dl[Fs++]=mc,mc=l,vh=c}function C0(l,c,d){uo[Ha++]=js,uo[Ha++]=Us,uo[Ha++]=Eu,Eu=l;var v=js;l=Us;var w=32-xt(v)-1;v&=~(1<<w),d+=1;var I=32-xt(c)+w;if(30<I){var K=w-w%5;I=(v&(1<<K)-1).toString(32),v>>=K,w-=K,js=1<<32-xt(c)+w|d<<w|v,Us=I+l}else js=1<<I|d<<w|v,Us=l}function bf(l){l.return!==null&&(Su(l,1),C0(l,1,0))}function Af(l){for(;l===mc;)mc=Dl[--Fs],Dl[Fs]=null,vh=Dl[--Fs],Dl[Fs]=null;for(;l===Eu;)Eu=uo[--Ha],uo[Ha]=null,Us=uo[--Ha],uo[Ha]=null,js=uo[--Ha],uo[Ha]=null}var ii=null,Or=null,Dn=!1,Pl=null,cs=!1,Pd=Error(r(519));function Cu(l){var c=Error(r(418,""));throw vc(ln(c,l)),Pd}function T0(l){var c=l.stateNode,d=l.type,v=l.memoizedProps;switch(c[Hn]=l,c[Gn]=v,d){case"dialog":xn("cancel",c),xn("close",c);break;case"iframe":case"object":case"embed":xn("load",c);break;case"video":case"audio":for(d=0;d<a1.length;d++)xn(a1[d],c);break;case"source":xn("error",c);break;case"img":case"image":case"link":xn("error",c),xn("load",c);break;case"details":xn("toggle",c);break;case"input":xn("invalid",c),Ko(c,v.value,v.defaultValue,v.checked,v.defaultChecked,v.type,v.name,!0),Yo(c);break;case"select":xn("invalid",c);break;case"textarea":xn("invalid",c),Zo(c,v.value,v.defaultValue,v.children),Yo(c)}d=v.children,typeof d!="string"&&typeof d!="number"&&typeof d!="bigint"||c.textContent===""+d||v.suppressHydrationWarning===!0||F_(c.textContent,d)?(v.popover!=null&&(xn("beforetoggle",c),xn("toggle",c)),v.onScroll!=null&&xn("scroll",c),v.onScrollEnd!=null&&xn("scrollend",c),v.onClick!=null&&(c.onclick=up),c=!0):c=!1,c||Cu(l)}function Vs(l){for(ii=l.return;ii;)switch(ii.tag){case 5:case 13:cs=!1;return;case 27:case 3:cs=!0;return;default:ii=ii.return}}function ta(l){if(l!==ii)return!1;if(!Dn)return Vs(l),Dn=!0,!1;var c=l.tag,d;if((d=c!==3&&c!==27)&&((d=c===5)&&(d=l.type,d=!(d!=="form"&&d!=="button")||Tm(l.type,l.memoizedProps)),d=!d),d&&Or&&Cu(l),Vs(l),c===13){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(r(317));e:{for(l=l.nextSibling,c=0;l;){if(l.nodeType===8)if(d=l.data,d==="/$"){if(c===0){Or=Ys(l.nextSibling);break e}c--}else d!=="$"&&d!=="$!"&&d!=="$?"||c++;l=l.nextSibling}Or=null}}else c===27?(c=Or,Lc(l.type)?(l=Om,Om=null,Or=l):Or=c):Or=ii?Ys(l.stateNode.nextSibling):null;return!0}function Ga(){Or=ii=null,Dn=!1}function I0(){var l=Pl;return l!==null&&(ho===null?ho=l:ho.push.apply(ho,l),Pl=null),l}function vc(l){Pl===null?Pl=[l]:Pl.push(l)}var fs=me(null),yi=null,zs=null;function Ll(l,c,d){Q(fs,c._currentValue),c._currentValue=d}function hs(l){l._currentValue=fs.current,G(fs)}function yh(l,c,d){for(;l!==null;){var v=l.alternate;if((l.childLanes&c)!==c?(l.childLanes|=c,v!==null&&(v.childLanes|=c)):v!==null&&(v.childLanes&c)!==c&&(v.childLanes|=c),l===d)break;l=l.return}}function xh(l,c,d,v){var w=l.child;for(w!==null&&(w.return=l);w!==null;){var I=w.dependencies;if(I!==null){var K=w.child;I=I.firstContext;e:for(;I!==null;){var le=I;I=w;for(var ye=0;ye<c.length;ye++)if(le.context===c[ye]){I.lanes|=d,le=I.alternate,le!==null&&(le.lanes|=d),yh(I.return,d,l),v||(K=null);break e}I=le.next}}else if(w.tag===18){if(K=w.return,K===null)throw Error(r(341));K.lanes|=d,I=K.alternate,I!==null&&(I.lanes|=d),yh(K,d,l),K=null}else K=w.child;if(K!==null)K.return=w;else for(K=w;K!==null;){if(K===l){K=null;break}if(w=K.sibling,w!==null){w.return=K.return,K=w;break}K=K.return}w=K}}function yc(l,c,d,v){l=null;for(var w=c,I=!1;w!==null;){if(!I){if((w.flags&524288)!==0)I=!0;else if((w.flags&262144)!==0)break}if(w.tag===10){var K=w.alternate;if(K===null)throw Error(r(387));if(K=K.memoizedProps,K!==null){var le=w.type;mi(w.pendingProps.value,K.value)||(l!==null?l.push(le):l=[le])}}else if(w===Ee.current){if(K=w.alternate,K===null)throw Error(r(387));K.memoizedState.memoizedState!==w.memoizedState.memoizedState&&(l!==null?l.push(f1):l=[f1])}w=w.return}l!==null&&xh(c,l,d,v),c.flags|=262144}function _h(l){for(l=l.firstContext;l!==null;){if(!mi(l.context._currentValue,l.memoizedValue))return!0;l=l.next}return!1}function ds(l){yi=l,zs=null,l=l.dependencies,l!==null&&(l.firstContext=null)}function ai(l){return wh(yi,l)}function kl(l,c){return yi===null&&ds(l),wh(l,c)}function wh(l,c){var d=c._currentValue;if(c={context:c,memoizedValue:d,next:null},zs===null){if(l===null)throw Error(r(308));zs=c,l.dependencies={lanes:0,firstContext:c},l.flags|=524288}else zs=zs.next=c;return d}var M2=typeof AbortController<"u"?AbortController:function(){var l=[],c=this.signal={aborted:!1,addEventListener:function(d,v){l.push(v)}};this.abort=function(){c.aborted=!0,l.forEach(function(d){return d()})}},R0=n.unstable_scheduleCallback,B2=n.unstable_NormalPriority,oi={$$typeof:B,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Ld(){return{controller:new M2,data:new Map,refCount:0}}function Ef(l){l.refCount--,l.refCount===0&&R0(B2,function(){l.controller.abort()})}var Sf=null,kd=0,Tu=0,qs=null;function F2(l,c){if(Sf===null){var d=Sf=[];kd=0,Tu=ym(),qs={status:"pending",value:void 0,then:function(v){d.push(v)}}}return kd++,c.then(N0,N0),c}function N0(){if(--kd===0&&Sf!==null){qs!==null&&(qs.status="fulfilled");var l=Sf;Sf=null,Tu=0,qs=null;for(var c=0;c<l.length;c++)(0,l[c])()}}function O0(l,c){var d=[],v={status:"pending",value:null,reason:null,then:function(w){d.push(w)}};return l.then(function(){v.status="fulfilled",v.value=c;for(var w=0;w<d.length;w++)(0,d[w])(c)},function(w){for(v.status="rejected",v.reason=w,w=0;w<d.length;w++)(0,d[w])(void 0)}),v}var y=U.S;U.S=function(l,c){typeof c=="object"&&c!==null&&typeof c.then=="function"&&F2(l,c),y!==null&&y(l,c)};var A=me(null);function k(){var l=A.current;return l!==null?l:yr.pooledCache}function H(l,c){c===null?Q(A,A.current):Q(A,c.pool)}function Z(){var l=k();return l===null?null:{parent:oi._currentValue,pool:l}}var re=Error(r(460)),ae=Error(r(474)),oe=Error(r(542)),ce={then:function(){}};function he(l){return l=l.status,l==="fulfilled"||l==="rejected"}function _e(){}function Pe(l,c,d){switch(d=l[d],d===void 0?l.push(c):d!==c&&(c.then(_e,_e),c=d),c.status){case"fulfilled":return c.value;case"rejected":throw l=c.reason,Ke(l),l;default:if(typeof c.status=="string")c.then(_e,_e);else{if(l=yr,l!==null&&100<l.shellSuspendCounter)throw Error(r(482));l=c,l.status="pending",l.then(function(v){if(c.status==="pending"){var w=c;w.status="fulfilled",w.value=v}},function(v){if(c.status==="pending"){var w=c;w.status="rejected",w.reason=v}})}switch(c.status){case"fulfilled":return c.value;case"rejected":throw l=c.reason,Ke(l),l}throw Oe=c,re}}var Oe=null;function Re(){if(Oe===null)throw Error(r(459));var l=Oe;return Oe=null,l}function Ke(l){if(l===re||l===oe)throw Error(r(483))}var Ue=!1;function we(l){l.updateQueue={baseState:l.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Se(l,c){l=l.updateQueue,c.updateQueue===l&&(c.updateQueue={baseState:l.baseState,firstBaseUpdate:l.firstBaseUpdate,lastBaseUpdate:l.lastBaseUpdate,shared:l.shared,callbacks:null})}function qe(l){return{lane:l,tag:0,payload:null,callback:null,next:null}}function Qe(l,c,d){var v=l.updateQueue;if(v===null)return null;if(v=v.shared,(tr&2)!==0){var w=v.pending;return w===null?c.next=c:(c.next=w.next,w.next=c),v.pending=c,c=bu(l),gh(l,null,d),c}return Nl(l,v,c,d),bu(l)}function $e(l,c,d){if(c=c.updateQueue,c!==null&&(c=c.shared,(d&4194048)!==0)){var v=c.lanes;v&=l.pendingLanes,d|=v,c.lanes=d,tn(l,d)}}function yt(l,c){var d=l.updateQueue,v=l.alternate;if(v!==null&&(v=v.updateQueue,d===v)){var w=null,I=null;if(d=d.firstBaseUpdate,d!==null){do{var K={lane:d.lane,tag:d.tag,payload:d.payload,callback:null,next:null};I===null?w=I=K:I=I.next=K,d=d.next}while(d!==null);I===null?w=I=c:I=I.next=c}else w=I=c;d={baseState:v.baseState,firstBaseUpdate:w,lastBaseUpdate:I,shared:v.shared,callbacks:v.callbacks},l.updateQueue=d;return}l=d.lastBaseUpdate,l===null?d.firstBaseUpdate=c:l.next=c,d.lastBaseUpdate=c}var ft=!1;function Dt(){if(ft){var l=qs;if(l!==null)throw l}}function dt(l,c,d,v){ft=!1;var w=l.updateQueue;Ue=!1;var I=w.firstBaseUpdate,K=w.lastBaseUpdate,le=w.shared.pending;if(le!==null){w.shared.pending=null;var ye=le,ke=ye.next;ye.next=null,K===null?I=ke:K.next=ke,K=ye;var We=l.alternate;We!==null&&(We=We.updateQueue,le=We.lastBaseUpdate,le!==K&&(le===null?We.firstBaseUpdate=ke:le.next=ke,We.lastBaseUpdate=ye))}if(I!==null){var Ze=w.baseState;K=0,We=ke=ye=null,le=I;do{var Fe=le.lane&-536870913,je=Fe!==le.lane;if(je?(Rn&Fe)===Fe:(v&Fe)===Fe){Fe!==0&&Fe===Tu&&(ft=!0),We!==null&&(We=We.next={lane:0,tag:le.tag,payload:le.payload,callback:null,next:null});e:{var Xt=l,Ut=le;Fe=c;var fr=d;switch(Ut.tag){case 1:if(Xt=Ut.payload,typeof Xt=="function"){Ze=Xt.call(fr,Ze,Fe);break e}Ze=Xt;break e;case 3:Xt.flags=Xt.flags&-65537|128;case 0:if(Xt=Ut.payload,Fe=typeof Xt=="function"?Xt.call(fr,Ze,Fe):Xt,Fe==null)break e;Ze=h({},Ze,Fe);break e;case 2:Ue=!0}}Fe=le.callback,Fe!==null&&(l.flags|=64,je&&(l.flags|=8192),je=w.callbacks,je===null?w.callbacks=[Fe]:je.push(Fe))}else je={lane:Fe,tag:le.tag,payload:le.payload,callback:le.callback,next:null},We===null?(ke=We=je,ye=Ze):We=We.next=je,K|=Fe;if(le=le.next,le===null){if(le=w.shared.pending,le===null)break;je=le,le=je.next,je.next=null,w.lastBaseUpdate=je,w.shared.pending=null}}while(!0);We===null&&(ye=Ze),w.baseState=ye,w.firstBaseUpdate=ke,w.lastBaseUpdate=We,I===null&&(w.shared.lanes=0),Nc|=K,l.lanes=K,l.memoizedState=Ze}}function Tn(l,c){if(typeof l!="function")throw Error(r(191,l));l.call(c)}function jn(l,c){var d=l.callbacks;if(d!==null)for(l.callbacks=null,l=0;l<d.length;l++)Tn(d[l],c)}var sn=me(null),rn=me(0);function Kn(l,c){l=Bu,Q(rn,l),Q(sn,c),Bu=l|c.baseLanes}function Un(){Q(rn,Bu),Q(sn,sn.current)}function Qt(){Bu=rn.current,G(sn),G(rn)}var er=0,Lt=null,Ht=null,Sn=null,In=!1,xi=!1,si=!1,Br=0,Fr=0,Yr=null,co=0;function Vn(){throw Error(r(321))}function Kr(l,c){if(c===null)return!1;for(var d=0;d<c.length&&d<l.length;d++)if(!mi(l[d],c[d]))return!1;return!0}function Fo(l,c,d,v,w,I){return er=I,Lt=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,U.H=l===null||l.memoizedState===null?yx:xx,si=!1,I=d(v,w),si=!1,xi&&(I=Iu(c,d,v,w)),Ml(l),I}function Ml(l){U.H=q0;var c=Ht!==null&&Ht.next!==null;if(er=0,Sn=Ht=Lt=null,In=!1,Fr=0,Yr=null,c)throw Error(r(300));l===null||qi||(l=l.dependencies,l!==null&&_h(l)&&(qi=!0))}function Iu(l,c,d,v){Lt=l;var w=0;do{if(xi&&(Yr=null),Fr=0,xi=!1,25<=w)throw Error(r(301));if(w+=1,Sn=Ht=null,l.updateQueue!=null){var I=l.updateQueue;I.lastEffect=null,I.events=null,I.stores=null,I.memoCache!=null&&(I.memoCache.index=0)}U.H=F8,I=c(d,v)}while(xi);return I}function Bl(){var l=U.H,c=l.useState()[0];return c=typeof c.then=="function"?Fl(c):c,l=l.useState()[0],(Ht!==null?Ht.memoizedState:null)!==l&&(Lt.flags|=1024),c}function vr(){var l=Br!==0;return Br=0,l}function Cf(l,c,d){c.updateQueue=l.updateQueue,c.flags&=-2053,l.lanes&=~d}function bh(l){if(In){for(l=l.memoizedState;l!==null;){var c=l.queue;c!==null&&(c.pending=null),l=l.next}In=!1}er=0,Sn=Ht=Lt=null,xi=!1,Fr=Br=0,Yr=null}function na(){var l={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Sn===null?Lt.memoizedState=Sn=l:Sn=Sn.next=l,Sn}function br(){if(Ht===null){var l=Lt.alternate;l=l!==null?l.memoizedState:null}else l=Ht.next;var c=Sn===null?Lt.memoizedState:Sn.next;if(c!==null)Sn=c,Ht=l;else{if(l===null)throw Lt.alternate===null?Error(r(467)):Error(r(310));Ht=l,l={memoizedState:Ht.memoizedState,baseState:Ht.baseState,baseQueue:Ht.baseQueue,queue:Ht.queue,next:null},Sn===null?Lt.memoizedState=Sn=l:Sn=Sn.next=l}return Sn}function Ru(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Fl(l){var c=Fr;return Fr+=1,Yr===null&&(Yr=[]),l=Pe(Yr,l,c),c=Lt,(Sn===null?c.memoizedState:Sn.next)===null&&(c=c.alternate,U.H=c===null||c.memoizedState===null?yx:xx),l}function Aa(l){if(l!==null&&typeof l=="object"){if(typeof l.then=="function")return Fl(l);if(l.$$typeof===B)return ai(l)}throw Error(r(438,String(l)))}function jl(l){var c=null,d=Lt.updateQueue;if(d!==null&&(c=d.memoCache),c==null){var v=Lt.alternate;v!==null&&(v=v.updateQueue,v!==null&&(v=v.memoCache,v!=null&&(c={data:v.data.map(function(w){return w.slice()}),index:0})))}if(c==null&&(c={data:[],index:0}),d===null&&(d=Ru(),Lt.updateQueue=d),d.memoCache=c,d=c.data[c.index],d===void 0)for(d=c.data[c.index]=Array(l),v=0;v<l;v++)d[v]=M;return c.index++,d}function Ea(l,c){return typeof c=="function"?c(l):c}function Tf(l){var c=br();return xc(c,Ht,l)}function xc(l,c,d){var v=l.queue;if(v===null)throw Error(r(311));v.lastRenderedReducer=d;var w=l.baseQueue,I=v.pending;if(I!==null){if(w!==null){var K=w.next;w.next=I.next,I.next=K}c.baseQueue=w=I,v.pending=null}if(I=l.baseState,w===null)l.memoizedState=I;else{c=w.next;var le=K=null,ye=null,ke=c,We=!1;do{var Ze=ke.lane&-536870913;if(Ze!==ke.lane?(Rn&Ze)===Ze:(er&Ze)===Ze){var Fe=ke.revertLane;if(Fe===0)ye!==null&&(ye=ye.next={lane:0,revertLane:0,action:ke.action,hasEagerState:ke.hasEagerState,eagerState:ke.eagerState,next:null}),Ze===Tu&&(We=!0);else if((er&Fe)===Fe){ke=ke.next,Fe===Tu&&(We=!0);continue}else Ze={lane:0,revertLane:ke.revertLane,action:ke.action,hasEagerState:ke.hasEagerState,eagerState:ke.eagerState,next:null},ye===null?(le=ye=Ze,K=I):ye=ye.next=Ze,Lt.lanes|=Fe,Nc|=Fe;Ze=ke.action,si&&d(I,Ze),I=ke.hasEagerState?ke.eagerState:d(I,Ze)}else Fe={lane:Ze,revertLane:ke.revertLane,action:ke.action,hasEagerState:ke.hasEagerState,eagerState:ke.eagerState,next:null},ye===null?(le=ye=Fe,K=I):ye=ye.next=Fe,Lt.lanes|=Ze,Nc|=Ze;ke=ke.next}while(ke!==null&&ke!==c);if(ye===null?K=I:ye.next=le,!mi(I,l.memoizedState)&&(qi=!0,We&&(d=qs,d!==null)))throw d;l.memoizedState=I,l.baseState=K,l.baseQueue=ye,v.lastRenderedState=I}return w===null&&(v.lanes=0),[l.memoizedState,v.dispatch]}function Ah(l){var c=br(),d=c.queue;if(d===null)throw Error(r(311));d.lastRenderedReducer=l;var v=d.dispatch,w=d.pending,I=c.memoizedState;if(w!==null){d.pending=null;var K=w=w.next;do I=l(I,K.action),K=K.next;while(K!==w);mi(I,c.memoizedState)||(qi=!0),c.memoizedState=I,c.baseQueue===null&&(c.baseState=I),d.lastRenderedState=I}return[I,v]}function If(l,c,d){var v=Lt,w=br(),I=Dn;if(I){if(d===void 0)throw Error(r(407));d=d()}else d=c();var K=!mi((Ht||w).memoizedState,d);K&&(w.memoizedState=d,qi=!0),w=w.queue;var le=_c.bind(null,v,w,l);if(Ac(2048,8,le,[l]),w.getSnapshot!==c||K||Sn!==null&&Sn.memoizedState.tag&1){if(v.flags|=2048,Gs(9,Df(),Rf.bind(null,v,w,d,c),null),yr===null)throw Error(r(349));I||(er&124)!==0||Eh(v,c,d)}return d}function Eh(l,c,d){l.flags|=16384,l={getSnapshot:c,value:d},c=Lt.updateQueue,c===null?(c=Ru(),Lt.updateQueue=c,c.stores=[l]):(d=c.stores,d===null?c.stores=[l]:d.push(l))}function Rf(l,c,d,v){c.value=d,c.getSnapshot=v,D0(c)&&P0(l)}function _c(l,c,d){return d(function(){D0(c)&&P0(l)})}function D0(l){var c=l.getSnapshot;l=l.value;try{var d=c();return!mi(l,d)}catch{return!0}}function P0(l){var c=Ms(l,2);c!==null&&Ho(c,l,2)}function Nf(l){var c=na();if(typeof l=="function"){var d=l;if(l=d(),si){Nt(!0);try{d()}finally{Nt(!1)}}}return c.memoizedState=c.baseState=l,c.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ea,lastRenderedState:l},c}function Hs(l,c,d,v){return l.baseState=d,xc(l,Ht,typeof v=="function"?v:Ea)}function j2(l,c,d,v,w){if(z0(l))throw Error(r(485));if(l=c.action,l!==null){var I={payload:w,action:l,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(K){I.listeners.push(K)}};U.T!==null?d(!0):I.isTransition=!1,v(I),d=c.pending,d===null?(I.next=c.pending=I,L0(c,I)):(I.next=d.next,c.pending=d.next=I)}}function L0(l,c){var d=c.action,v=c.payload,w=l.state;if(c.isTransition){var I=U.T,K={};U.T=K;try{var le=d(w,v),ye=U.S;ye!==null&&ye(K,le),k0(l,c,le)}catch(ke){wc(l,c,ke)}finally{U.T=I}}else try{I=d(w,v),k0(l,c,I)}catch(ke){wc(l,c,ke)}}function k0(l,c,d){d!==null&&typeof d=="object"&&typeof d.then=="function"?d.then(function(v){Md(l,c,v)},function(v){return wc(l,c,v)}):Md(l,c,d)}function Md(l,c,d){c.status="fulfilled",c.value=d,Bd(c),l.state=d,c=l.pending,c!==null&&(d=c.next,d===c?l.pending=null:(d=d.next,c.next=d,L0(l,d)))}function wc(l,c,d){var v=l.pending;if(l.pending=null,v!==null){v=v.next;do c.status="rejected",c.reason=d,Bd(c),c=c.next;while(c!==v)}l.action=null}function Bd(l){l=l.listeners;for(var c=0;c<l.length;c++)(0,l[c])()}function Fd(l,c){return c}function Of(l,c){if(Dn){var d=yr.formState;if(d!==null){e:{var v=Lt;if(Dn){if(Or){t:{for(var w=Or,I=cs;w.nodeType!==8;){if(!I){w=null;break t}if(w=Ys(w.nextSibling),w===null){w=null;break t}}I=w.data,w=I==="F!"||I==="F"?w:null}if(w){Or=Ys(w.nextSibling),v=w.data==="F!";break e}}Cu(v)}v=!1}v&&(c=d[0])}}return d=na(),d.memoizedState=d.baseState=c,v={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Fd,lastRenderedState:c},d.queue=v,d=gx.bind(null,Lt,v),v.dispatch=d,v=Nf(!1),I=U2.bind(null,Lt,!1,v.queue),v=na(),w={state:c,dispatch:null,action:l,pending:null},v.queue=w,d=j2.bind(null,Lt,w,I,d),w.dispatch=d,v.memoizedState=l,[c,d,!1]}function Sh(l){var c=br();return bc(c,Ht,l)}function bc(l,c,d){if(c=xc(l,c,Fd)[0],l=Tf(Ea)[0],typeof c=="object"&&c!==null&&typeof c.then=="function")try{var v=Fl(c)}catch(K){throw K===re?oe:K}else v=c;c=br();var w=c.queue,I=w.dispatch;return d!==c.memoizedState&&(Lt.flags|=2048,Gs(9,Df(),M0.bind(null,w,d),null)),[v,I,l]}function M0(l,c){l.action=c}function B0(l){var c=br(),d=Ht;if(d!==null)return bc(c,d,l);br(),c=c.memoizedState,d=br();var v=d.queue.dispatch;return d.memoizedState=l,[c,v,!1]}function Gs(l,c,d,v){return l={tag:l,create:d,deps:v,inst:c,next:null},c=Lt.updateQueue,c===null&&(c=Ru(),Lt.updateQueue=c),d=c.lastEffect,d===null?c.lastEffect=l.next=l:(v=d.next,d.next=l,l.next=v,c.lastEffect=l),l}function Df(){return{destroy:void 0,resource:void 0}}function Ch(){return br().memoizedState}function jo(l,c,d,v){var w=na();v=v===void 0?null:v,Lt.flags|=l,w.memoizedState=Gs(1|c,Df(),d,v)}function Ac(l,c,d,v){var w=br();v=v===void 0?null:v;var I=w.memoizedState.inst;Ht!==null&&v!==null&&Kr(v,Ht.memoizedState.deps)?w.memoizedState=Gs(c,I,d,v):(Lt.flags|=l,w.memoizedState=Gs(1|c,I,d,v))}function jd(l,c){jo(8390656,8,l,c)}function F0(l,c){Ac(2048,8,l,c)}function Ud(l,c){return Ac(4,2,l,c)}function Nu(l,c){return Ac(4,4,l,c)}function j0(l,c){if(typeof c=="function"){l=l();var d=c(l);return function(){typeof d=="function"?d():c(null)}}if(c!=null)return l=l(),c.current=l,function(){c.current=null}}function Vd(l,c,d){d=d!=null?d.concat([l]):null,Ac(4,4,j0.bind(null,c,l),d)}function zd(){}function qd(l,c){var d=br();c=c===void 0?null:c;var v=d.memoizedState;return c!==null&&Kr(c,v[1])?v[0]:(d.memoizedState=[l,c],l)}function U0(l,c){var d=br();c=c===void 0?null:c;var v=d.memoizedState;if(c!==null&&Kr(c,v[1]))return v[0];if(v=l(),si){Nt(!0);try{l()}finally{Nt(!1)}}return d.memoizedState=[v,c],v}function Ou(l,c,d){return d===void 0||(er&1073741824)!==0?l.memoizedState=c:(l.memoizedState=d,l=f_(),Lt.lanes|=l,Nc|=l,d)}function Th(l,c,d,v){return mi(d,c)?d:sn.current!==null?(l=Ou(l,d,v),mi(l,c)||(qi=!0),l):(er&42)===0?(qi=!0,l.memoizedState=d):(l=f_(),Lt.lanes|=l,Nc|=l,c)}function Pf(l,c,d,v,w){var I=z.p;z.p=I!==0&&8>I?I:8;var K=U.T,le={};U.T=le,U2(l,!1,c,d);try{var ye=w(),ke=U.S;if(ke!==null&&ke(le,ye),ye!==null&&typeof ye=="object"&&typeof ye.then=="function"){var We=O0(ye,v);$d(l,c,We,qo(l))}else $d(l,c,v,qo(l))}catch(Ze){$d(l,c,{then:function(){},status:"rejected",reason:Ze},qo())}finally{z.p=I,U.T=K}}function Ws(){}function ps(l,c,d,v){if(l.tag!==5)throw Error(r(476));var w=$s(l).queue;Pf(l,w,c,te,d===null?Ws:function(){return Lf(l),d(v)})}function $s(l){var c=l.memoizedState;if(c!==null)return c;c={memoizedState:te,baseState:te,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ea,lastRenderedState:te},next:null};var d={};return c.next={memoizedState:d,baseState:d,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ea,lastRenderedState:d},next:null},l.memoizedState=c,l=l.alternate,l!==null&&(l.memoizedState=c),c}function Lf(l){var c=$s(l).next.queue;$d(l,c,{},qo())}function kf(){return ai(f1)}function Hd(){return br().memoizedState}function V0(){return br().memoizedState}function Gd(l){for(var c=l.return;c!==null;){switch(c.tag){case 24:case 3:var d=qo();l=qe(d);var v=Qe(c,l,d);v!==null&&(Ho(v,c,d),$e(v,c,d)),c={cache:Ld()},l.payload=c;return}c=c.return}}function Wd(l,c,d){var v=qo();d={lane:v,revertLane:0,action:d,hasEagerState:!1,eagerState:null,next:null},z0(l)?mx(c,d):(d=Ol(l,c,d,v),d!==null&&(Ho(d,l,v),vx(d,c,v)))}function gx(l,c,d){var v=qo();$d(l,c,d,v)}function $d(l,c,d,v){var w={lane:v,revertLane:0,action:d,hasEagerState:!1,eagerState:null,next:null};if(z0(l))mx(c,w);else{var I=l.alternate;if(l.lanes===0&&(I===null||I.lanes===0)&&(I=c.lastRenderedReducer,I!==null))try{var K=c.lastRenderedState,le=I(K,d);if(w.hasEagerState=!0,w.eagerState=le,mi(le,K))return Nl(l,c,w,0),yr===null&&so(),!1}catch{}finally{}if(d=Ol(l,c,w,v),d!==null)return Ho(d,l,v),vx(d,c,v),!0}return!1}function U2(l,c,d,v){if(v={lane:2,revertLane:ym(),action:v,hasEagerState:!1,eagerState:null,next:null},z0(l)){if(c)throw Error(r(479))}else c=Ol(l,d,v,2),c!==null&&Ho(c,l,2)}function z0(l){var c=l.alternate;return l===Lt||c!==null&&c===Lt}function mx(l,c){xi=In=!0;var d=l.pending;d===null?c.next=c:(c.next=d.next,d.next=c),l.pending=c}function vx(l,c,d){if((d&4194048)!==0){var v=c.lanes;v&=l.pendingLanes,d|=v,c.lanes=d,tn(l,d)}}var q0={readContext:ai,use:Aa,useCallback:Vn,useContext:Vn,useEffect:Vn,useImperativeHandle:Vn,useLayoutEffect:Vn,useInsertionEffect:Vn,useMemo:Vn,useReducer:Vn,useRef:Vn,useState:Vn,useDebugValue:Vn,useDeferredValue:Vn,useTransition:Vn,useSyncExternalStore:Vn,useId:Vn,useHostTransitionStatus:Vn,useFormState:Vn,useActionState:Vn,useOptimistic:Vn,useMemoCache:Vn,useCacheRefresh:Vn},yx={readContext:ai,use:Aa,useCallback:function(l,c){return na().memoizedState=[l,c===void 0?null:c],l},useContext:ai,useEffect:jd,useImperativeHandle:function(l,c,d){d=d!=null?d.concat([l]):null,jo(4194308,4,j0.bind(null,c,l),d)},useLayoutEffect:function(l,c){return jo(4194308,4,l,c)},useInsertionEffect:function(l,c){jo(4,2,l,c)},useMemo:function(l,c){var d=na();c=c===void 0?null:c;var v=l();if(si){Nt(!0);try{l()}finally{Nt(!1)}}return d.memoizedState=[v,c],v},useReducer:function(l,c,d){var v=na();if(d!==void 0){var w=d(c);if(si){Nt(!0);try{d(c)}finally{Nt(!1)}}}else w=c;return v.memoizedState=v.baseState=w,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:l,lastRenderedState:w},v.queue=l,l=l.dispatch=Wd.bind(null,Lt,l),[v.memoizedState,l]},useRef:function(l){var c=na();return l={current:l},c.memoizedState=l},useState:function(l){l=Nf(l);var c=l.queue,d=gx.bind(null,Lt,c);return c.dispatch=d,[l.memoizedState,d]},useDebugValue:zd,useDeferredValue:function(l,c){var d=na();return Ou(d,l,c)},useTransition:function(){var l=Nf(!1);return l=Pf.bind(null,Lt,l.queue,!0,!1),na().memoizedState=l,[!1,l]},useSyncExternalStore:function(l,c,d){var v=Lt,w=na();if(Dn){if(d===void 0)throw Error(r(407));d=d()}else{if(d=c(),yr===null)throw Error(r(349));(Rn&124)!==0||Eh(v,c,d)}w.memoizedState=d;var I={value:d,getSnapshot:c};return w.queue=I,jd(_c.bind(null,v,I,l),[l]),v.flags|=2048,Gs(9,Df(),Rf.bind(null,v,I,d,c),null),d},useId:function(){var l=na(),c=yr.identifierPrefix;if(Dn){var d=Us,v=js;d=(v&~(1<<32-xt(v)-1)).toString(32)+d,c="«"+c+"R"+d,d=Br++,0<d&&(c+="H"+d.toString(32)),c+="»"}else d=co++,c="«"+c+"r"+d.toString(32)+"»";return l.memoizedState=c},useHostTransitionStatus:kf,useFormState:Of,useActionState:Of,useOptimistic:function(l){var c=na();c.memoizedState=c.baseState=l;var d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return c.queue=d,c=U2.bind(null,Lt,!0,d),d.dispatch=c,[l,c]},useMemoCache:jl,useCacheRefresh:function(){return na().memoizedState=Gd.bind(null,Lt)}},xx={readContext:ai,use:Aa,useCallback:qd,useContext:ai,useEffect:F0,useImperativeHandle:Vd,useInsertionEffect:Ud,useLayoutEffect:Nu,useMemo:U0,useReducer:Tf,useRef:Ch,useState:function(){return Tf(Ea)},useDebugValue:zd,useDeferredValue:function(l,c){var d=br();return Th(d,Ht.memoizedState,l,c)},useTransition:function(){var l=Tf(Ea)[0],c=br().memoizedState;return[typeof l=="boolean"?l:Fl(l),c]},useSyncExternalStore:If,useId:Hd,useHostTransitionStatus:kf,useFormState:Sh,useActionState:Sh,useOptimistic:function(l,c){var d=br();return Hs(d,Ht,l,c)},useMemoCache:jl,useCacheRefresh:V0},F8={readContext:ai,use:Aa,useCallback:qd,useContext:ai,useEffect:F0,useImperativeHandle:Vd,useInsertionEffect:Ud,useLayoutEffect:Nu,useMemo:U0,useReducer:Ah,useRef:Ch,useState:function(){return Ah(Ea)},useDebugValue:zd,useDeferredValue:function(l,c){var d=br();return Ht===null?Ou(d,l,c):Th(d,Ht.memoizedState,l,c)},useTransition:function(){var l=Ah(Ea)[0],c=br().memoizedState;return[typeof l=="boolean"?l:Fl(l),c]},useSyncExternalStore:If,useId:Hd,useHostTransitionStatus:kf,useFormState:B0,useActionState:B0,useOptimistic:function(l,c){var d=br();return Ht!==null?Hs(d,Ht,l,c):(d.baseState=l,[l,d.queue.dispatch])},useMemoCache:jl,useCacheRefresh:V0},Ih=null,Xd=0;function H0(l){var c=Xd;return Xd+=1,Ih===null&&(Ih=[]),Pe(Ih,l,c)}function Yd(l,c){c=c.props.ref,l.ref=c!==void 0?c:null}function G0(l,c){throw c.$$typeof===p?Error(r(525)):(l=Object.prototype.toString.call(c),Error(r(31,l==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":l)))}function _x(l){var c=l._init;return c(l._payload)}function wx(l){function c(Ne,Ae){if(l){var De=Ne.deletions;De===null?(Ne.deletions=[Ae],Ne.flags|=16):De.push(Ae)}}function d(Ne,Ae){if(!l)return null;for(;Ae!==null;)c(Ne,Ae),Ae=Ae.sibling;return null}function v(Ne){for(var Ae=new Map;Ne!==null;)Ne.key!==null?Ae.set(Ne.key,Ne):Ae.set(Ne.index,Ne),Ne=Ne.sibling;return Ae}function w(Ne,Ae){return Ne=us(Ne,Ae),Ne.index=0,Ne.sibling=null,Ne}function I(Ne,Ae,De){return Ne.index=De,l?(De=Ne.alternate,De!==null?(De=De.index,De<Ae?(Ne.flags|=67108866,Ae):De):(Ne.flags|=67108866,Ae)):(Ne.flags|=1048576,Ae)}function K(Ne){return l&&Ne.alternate===null&&(Ne.flags|=67108866),Ne}function le(Ne,Ae,De,Ye){return Ae===null||Ae.tag!==6?(Ae=mh(De,Ne.mode,Ye),Ae.return=Ne,Ae):(Ae=w(Ae,De),Ae.return=Ne,Ae)}function ye(Ne,Ae,De,Ye){var St=De.type;return St===_?We(Ne,Ae,De.props.children,Ye,De.key):Ae!==null&&(Ae.elementType===St||typeof St=="object"&&St!==null&&St.$$typeof===E&&_x(St)===Ae.type)?(Ae=w(Ae,De.props),Yd(Ae,De),Ae.return=Ne,Ae):(Ae=Au(De.type,De.key,De.props,null,Ne.mode,Ye),Yd(Ae,De),Ae.return=Ne,Ae)}function ke(Ne,Ae,De,Ye){return Ae===null||Ae.tag!==4||Ae.stateNode.containerInfo!==De.containerInfo||Ae.stateNode.implementation!==De.implementation?(Ae=wf(De,Ne.mode,Ye),Ae.return=Ne,Ae):(Ae=w(Ae,De.children||[]),Ae.return=Ne,Ae)}function We(Ne,Ae,De,Ye,St){return Ae===null||Ae.tag!==7?(Ae=Bs(De,Ne.mode,Ye,St),Ae.return=Ne,Ae):(Ae=w(Ae,De),Ae.return=Ne,Ae)}function Ze(Ne,Ae,De){if(typeof Ae=="string"&&Ae!==""||typeof Ae=="number"||typeof Ae=="bigint")return Ae=mh(""+Ae,Ne.mode,De),Ae.return=Ne,Ae;if(typeof Ae=="object"&&Ae!==null){switch(Ae.$$typeof){case g:return De=Au(Ae.type,Ae.key,Ae.props,null,Ne.mode,De),Yd(De,Ae),De.return=Ne,De;case m:return Ae=wf(Ae,Ne.mode,De),Ae.return=Ne,Ae;case E:var Ye=Ae._init;return Ae=Ye(Ae._payload),Ze(Ne,Ae,De)}if(ne(Ae)||L(Ae))return Ae=Bs(Ae,Ne.mode,De,null),Ae.return=Ne,Ae;if(typeof Ae.then=="function")return Ze(Ne,H0(Ae),De);if(Ae.$$typeof===B)return Ze(Ne,kl(Ne,Ae),De);G0(Ne,Ae)}return null}function Fe(Ne,Ae,De,Ye){var St=Ae!==null?Ae.key:null;if(typeof De=="string"&&De!==""||typeof De=="number"||typeof De=="bigint")return St!==null?null:le(Ne,Ae,""+De,Ye);if(typeof De=="object"&&De!==null){switch(De.$$typeof){case g:return De.key===St?ye(Ne,Ae,De,Ye):null;case m:return De.key===St?ke(Ne,Ae,De,Ye):null;case E:return St=De._init,De=St(De._payload),Fe(Ne,Ae,De,Ye)}if(ne(De)||L(De))return St!==null?null:We(Ne,Ae,De,Ye,null);if(typeof De.then=="function")return Fe(Ne,Ae,H0(De),Ye);if(De.$$typeof===B)return Fe(Ne,Ae,kl(Ne,De),Ye);G0(Ne,De)}return null}function je(Ne,Ae,De,Ye,St){if(typeof Ye=="string"&&Ye!==""||typeof Ye=="number"||typeof Ye=="bigint")return Ne=Ne.get(De)||null,le(Ae,Ne,""+Ye,St);if(typeof Ye=="object"&&Ye!==null){switch(Ye.$$typeof){case g:return Ne=Ne.get(Ye.key===null?De:Ye.key)||null,ye(Ae,Ne,Ye,St);case m:return Ne=Ne.get(Ye.key===null?De:Ye.key)||null,ke(Ae,Ne,Ye,St);case E:var pn=Ye._init;return Ye=pn(Ye._payload),je(Ne,Ae,De,Ye,St)}if(ne(Ye)||L(Ye))return Ne=Ne.get(De)||null,We(Ae,Ne,Ye,St,null);if(typeof Ye.then=="function")return je(Ne,Ae,De,H0(Ye),St);if(Ye.$$typeof===B)return je(Ne,Ae,De,kl(Ae,Ye),St);G0(Ae,Ye)}return null}function Xt(Ne,Ae,De,Ye){for(var St=null,pn=null,Pt=Ae,zt=Ae=0,Gi=null;Pt!==null&&zt<De.length;zt++){Pt.index>zt?(Gi=Pt,Pt=null):Gi=Pt.sibling;var zn=Fe(Ne,Pt,De[zt],Ye);if(zn===null){Pt===null&&(Pt=Gi);break}l&&Pt&&zn.alternate===null&&c(Ne,Pt),Ae=I(zn,Ae,zt),pn===null?St=zn:pn.sibling=zn,pn=zn,Pt=Gi}if(zt===De.length)return d(Ne,Pt),Dn&&Su(Ne,zt),St;if(Pt===null){for(;zt<De.length;zt++)Pt=Ze(Ne,De[zt],Ye),Pt!==null&&(Ae=I(Pt,Ae,zt),pn===null?St=Pt:pn.sibling=Pt,pn=Pt);return Dn&&Su(Ne,zt),St}for(Pt=v(Pt);zt<De.length;zt++)Gi=je(Pt,Ne,zt,De[zt],Ye),Gi!==null&&(l&&Gi.alternate!==null&&Pt.delete(Gi.key===null?zt:Gi.key),Ae=I(Gi,Ae,zt),pn===null?St=Gi:pn.sibling=Gi,pn=Gi);return l&&Pt.forEach(function(jc){return c(Ne,jc)}),Dn&&Su(Ne,zt),St}function Ut(Ne,Ae,De,Ye){if(De==null)throw Error(r(151));for(var St=null,pn=null,Pt=Ae,zt=Ae=0,Gi=null,zn=De.next();Pt!==null&&!zn.done;zt++,zn=De.next()){Pt.index>zt?(Gi=Pt,Pt=null):Gi=Pt.sibling;var jc=Fe(Ne,Pt,zn.value,Ye);if(jc===null){Pt===null&&(Pt=Gi);break}l&&Pt&&jc.alternate===null&&c(Ne,Pt),Ae=I(jc,Ae,zt),pn===null?St=jc:pn.sibling=jc,pn=jc,Pt=Gi}if(zn.done)return d(Ne,Pt),Dn&&Su(Ne,zt),St;if(Pt===null){for(;!zn.done;zt++,zn=De.next())zn=Ze(Ne,zn.value,Ye),zn!==null&&(Ae=I(zn,Ae,zt),pn===null?St=zn:pn.sibling=zn,pn=zn);return Dn&&Su(Ne,zt),St}for(Pt=v(Pt);!zn.done;zt++,zn=De.next())zn=je(Pt,Ne,zt,zn.value,Ye),zn!==null&&(l&&zn.alternate!==null&&Pt.delete(zn.key===null?zt:zn.key),Ae=I(zn,Ae,zt),pn===null?St=zn:pn.sibling=zn,pn=zn);return l&&Pt.forEach(function(jC){return c(Ne,jC)}),Dn&&Su(Ne,zt),St}function fr(Ne,Ae,De,Ye){if(typeof De=="object"&&De!==null&&De.type===_&&De.key===null&&(De=De.props.children),typeof De=="object"&&De!==null){switch(De.$$typeof){case g:e:{for(var St=De.key;Ae!==null;){if(Ae.key===St){if(St=De.type,St===_){if(Ae.tag===7){d(Ne,Ae.sibling),Ye=w(Ae,De.props.children),Ye.return=Ne,Ne=Ye;break e}}else if(Ae.elementType===St||typeof St=="object"&&St!==null&&St.$$typeof===E&&_x(St)===Ae.type){d(Ne,Ae.sibling),Ye=w(Ae,De.props),Yd(Ye,De),Ye.return=Ne,Ne=Ye;break e}d(Ne,Ae);break}else c(Ne,Ae);Ae=Ae.sibling}De.type===_?(Ye=Bs(De.props.children,Ne.mode,Ye,De.key),Ye.return=Ne,Ne=Ye):(Ye=Au(De.type,De.key,De.props,null,Ne.mode,Ye),Yd(Ye,De),Ye.return=Ne,Ne=Ye)}return K(Ne);case m:e:{for(St=De.key;Ae!==null;){if(Ae.key===St)if(Ae.tag===4&&Ae.stateNode.containerInfo===De.containerInfo&&Ae.stateNode.implementation===De.implementation){d(Ne,Ae.sibling),Ye=w(Ae,De.children||[]),Ye.return=Ne,Ne=Ye;break e}else{d(Ne,Ae);break}else c(Ne,Ae);Ae=Ae.sibling}Ye=wf(De,Ne.mode,Ye),Ye.return=Ne,Ne=Ye}return K(Ne);case E:return St=De._init,De=St(De._payload),fr(Ne,Ae,De,Ye)}if(ne(De))return Xt(Ne,Ae,De,Ye);if(L(De)){if(St=L(De),typeof St!="function")throw Error(r(150));return De=St.call(De),Ut(Ne,Ae,De,Ye)}if(typeof De.then=="function")return fr(Ne,Ae,H0(De),Ye);if(De.$$typeof===B)return fr(Ne,Ae,kl(Ne,De),Ye);G0(Ne,De)}return typeof De=="string"&&De!==""||typeof De=="number"||typeof De=="bigint"?(De=""+De,Ae!==null&&Ae.tag===6?(d(Ne,Ae.sibling),Ye=w(Ae,De),Ye.return=Ne,Ne=Ye):(d(Ne,Ae),Ye=mh(De,Ne.mode,Ye),Ye.return=Ne,Ne=Ye),K(Ne)):d(Ne,Ae)}return function(Ne,Ae,De,Ye){try{Xd=0;var St=fr(Ne,Ae,De,Ye);return Ih=null,St}catch(Pt){if(Pt===re||Pt===oe)throw Pt;var pn=zi(29,Pt,null,Ne.mode);return pn.lanes=Ye,pn.return=Ne,pn}finally{}}}var Rh=wx(!0),bx=wx(!1),gs=me(null),Ul=null;function Ec(l){var c=l.alternate;Q(Ri,Ri.current&1),Q(gs,l),Ul===null&&(c===null||sn.current!==null||c.memoizedState!==null)&&(Ul=l)}function Ax(l){if(l.tag===22){if(Q(Ri,Ri.current),Q(gs,l),Ul===null){var c=l.alternate;c!==null&&c.memoizedState!==null&&(Ul=l)}}else Sc()}function Sc(){Q(Ri,Ri.current),Q(gs,gs.current)}function Du(l){G(gs),Ul===l&&(Ul=null),G(Ri)}var Ri=me(0);function W0(l){for(var c=l;c!==null;){if(c.tag===13){var d=c.memoizedState;if(d!==null&&(d=d.dehydrated,d===null||d.data==="$?"||Nm(d)))return c}else if(c.tag===19&&c.memoizedProps.revealOrder!==void 0){if((c.flags&128)!==0)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===l)break;for(;c.sibling===null;){if(c.return===null||c.return===l)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}function V2(l,c,d,v){c=l.memoizedState,d=d(v,c),d=d==null?c:h({},c,d),l.memoizedState=d,l.lanes===0&&(l.updateQueue.baseState=d)}var z2={enqueueSetState:function(l,c,d){l=l._reactInternals;var v=qo(),w=qe(v);w.payload=c,d!=null&&(w.callback=d),c=Qe(l,w,v),c!==null&&(Ho(c,l,v),$e(c,l,v))},enqueueReplaceState:function(l,c,d){l=l._reactInternals;var v=qo(),w=qe(v);w.tag=1,w.payload=c,d!=null&&(w.callback=d),c=Qe(l,w,v),c!==null&&(Ho(c,l,v),$e(c,l,v))},enqueueForceUpdate:function(l,c){l=l._reactInternals;var d=qo(),v=qe(d);v.tag=2,c!=null&&(v.callback=c),c=Qe(l,v,d),c!==null&&(Ho(c,l,d),$e(c,l,d))}};function Ex(l,c,d,v,w,I,K){return l=l.stateNode,typeof l.shouldComponentUpdate=="function"?l.shouldComponentUpdate(v,I,K):c.prototype&&c.prototype.isPureReactComponent?!Al(d,v)||!Al(w,I):!0}function Sx(l,c,d,v){l=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(d,v),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(d,v),c.state!==l&&z2.enqueueReplaceState(c,c.state,null)}function Mf(l,c){var d=c;if("ref"in c){d={};for(var v in c)v!=="ref"&&(d[v]=c[v])}if(l=l.defaultProps){d===c&&(d=h({},d));for(var w in l)d[w]===void 0&&(d[w]=l[w])}return d}var $0=typeof reportError=="function"?reportError:function(l){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var c=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof l=="object"&&l!==null&&typeof l.message=="string"?String(l.message):String(l),error:l});if(!window.dispatchEvent(c))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",l);return}console.error(l)};function Cx(l){$0(l)}function Tx(l){console.error(l)}function Ix(l){$0(l)}function X0(l,c){try{var d=l.onUncaughtError;d(c.value,{componentStack:c.stack})}catch(v){setTimeout(function(){throw v})}}function Rx(l,c,d){try{var v=l.onCaughtError;v(d.value,{componentStack:d.stack,errorBoundary:c.tag===1?c.stateNode:null})}catch(w){setTimeout(function(){throw w})}}function q2(l,c,d){return d=qe(d),d.tag=3,d.payload={element:null},d.callback=function(){X0(l,c)},d}function Nx(l){return l=qe(l),l.tag=3,l}function Ox(l,c,d,v){var w=d.type.getDerivedStateFromError;if(typeof w=="function"){var I=v.value;l.payload=function(){return w(I)},l.callback=function(){Rx(c,d,v)}}var K=d.stateNode;K!==null&&typeof K.componentDidCatch=="function"&&(l.callback=function(){Rx(c,d,v),typeof w!="function"&&(Oc===null?Oc=new Set([this]):Oc.add(this));var le=v.stack;this.componentDidCatch(v.value,{componentStack:le!==null?le:""})})}function j8(l,c,d,v,w){if(d.flags|=32768,v!==null&&typeof v=="object"&&typeof v.then=="function"){if(c=d.alternate,c!==null&&yc(c,d,w,!0),d=gs.current,d!==null){switch(d.tag){case 13:return Ul===null?dm():d.alternate===null&&Qr===0&&(Qr=3),d.flags&=-257,d.flags|=65536,d.lanes=w,v===ce?d.flags|=16384:(c=d.updateQueue,c===null?d.updateQueue=new Set([v]):c.add(v),gm(l,v,w)),!1;case 22:return d.flags|=65536,v===ce?d.flags|=16384:(c=d.updateQueue,c===null?(c={transitions:null,markerInstances:null,retryQueue:new Set([v])},d.updateQueue=c):(d=c.retryQueue,d===null?c.retryQueue=new Set([v]):d.add(v)),gm(l,v,w)),!1}throw Error(r(435,d.tag))}return gm(l,v,w),dm(),!1}if(Dn)return c=gs.current,c!==null?((c.flags&65536)===0&&(c.flags|=256),c.flags|=65536,c.lanes=w,v!==Pd&&(l=Error(r(422),{cause:v}),vc(ln(l,d)))):(v!==Pd&&(c=Error(r(423),{cause:v}),vc(ln(c,d))),l=l.current.alternate,l.flags|=65536,w&=-w,l.lanes|=w,v=ln(v,d),w=q2(l.stateNode,v,w),yt(l,w),Qr!==4&&(Qr=2)),!1;var I=Error(r(520),{cause:v});if(I=ln(I,d),n1===null?n1=[I]:n1.push(I),Qr!==4&&(Qr=2),c===null)return!0;v=ln(v,d),d=c;do{switch(d.tag){case 3:return d.flags|=65536,l=w&-w,d.lanes|=l,l=q2(d.stateNode,v,l),yt(d,l),!1;case 1:if(c=d.type,I=d.stateNode,(d.flags&128)===0&&(typeof c.getDerivedStateFromError=="function"||I!==null&&typeof I.componentDidCatch=="function"&&(Oc===null||!Oc.has(I))))return d.flags|=65536,w&=-w,d.lanes|=w,w=Nx(w),Ox(w,l,d,v),yt(d,w),!1}d=d.return}while(d!==null);return!1}var Dx=Error(r(461)),qi=!1;function ra(l,c,d,v){c.child=l===null?bx(c,null,d,v):Rh(c,l.child,d,v)}function Px(l,c,d,v,w){d=d.render;var I=c.ref;if("ref"in v){var K={};for(var le in v)le!=="ref"&&(K[le]=v[le])}else K=v;return ds(c),v=Fo(l,c,d,K,I,w),le=vr(),l!==null&&!qi?(Cf(l,c,w),Pu(l,c,w)):(Dn&&le&&bf(c),c.flags|=1,ra(l,c,v,w),c.child)}function Lx(l,c,d,v,w){if(l===null){var I=d.type;return typeof I=="function"&&!gc(I)&&I.defaultProps===void 0&&d.compare===null?(c.tag=15,c.type=I,kx(l,c,I,v,w)):(l=Au(d.type,null,v,c,c.mode,w),l.ref=c.ref,l.return=c,c.child=l)}if(I=l.child,!Q2(l,w)){var K=I.memoizedProps;if(d=d.compare,d=d!==null?d:Al,d(K,v)&&l.ref===c.ref)return Pu(l,c,w)}return c.flags|=1,l=us(I,v),l.ref=c.ref,l.return=c,c.child=l}function kx(l,c,d,v,w){if(l!==null){var I=l.memoizedProps;if(Al(I,v)&&l.ref===c.ref)if(qi=!1,c.pendingProps=v=I,Q2(l,w))(l.flags&131072)!==0&&(qi=!0);else return c.lanes=l.lanes,Pu(l,c,w)}return H2(l,c,d,v,w)}function Mx(l,c,d){var v=c.pendingProps,w=v.children,I=l!==null?l.memoizedState:null;if(v.mode==="hidden"){if((c.flags&128)!==0){if(v=I!==null?I.baseLanes|d:d,l!==null){for(w=c.child=l.child,I=0;w!==null;)I=I|w.lanes|w.childLanes,w=w.sibling;c.childLanes=I&~v}else c.childLanes=0,c.child=null;return Bx(l,c,v,d)}if((d&536870912)!==0)c.memoizedState={baseLanes:0,cachePool:null},l!==null&&H(c,I!==null?I.cachePool:null),I!==null?Kn(c,I):Un(),Ax(c);else return c.lanes=c.childLanes=536870912,Bx(l,c,I!==null?I.baseLanes|d:d,d)}else I!==null?(H(c,I.cachePool),Kn(c,I),Sc(),c.memoizedState=null):(l!==null&&H(c,null),Un(),Sc());return ra(l,c,w,d),c.child}function Bx(l,c,d,v){var w=k();return w=w===null?null:{parent:oi._currentValue,pool:w},c.memoizedState={baseLanes:d,cachePool:w},l!==null&&H(c,null),Un(),Ax(c),l!==null&&yc(l,c,v,!0),null}function Y0(l,c){var d=c.ref;if(d===null)l!==null&&l.ref!==null&&(c.flags|=4194816);else{if(typeof d!="function"&&typeof d!="object")throw Error(r(284));(l===null||l.ref!==d)&&(c.flags|=4194816)}}function H2(l,c,d,v,w){return ds(c),d=Fo(l,c,d,v,void 0,w),v=vr(),l!==null&&!qi?(Cf(l,c,w),Pu(l,c,w)):(Dn&&v&&bf(c),c.flags|=1,ra(l,c,d,w),c.child)}function Fx(l,c,d,v,w,I){return ds(c),c.updateQueue=null,d=Iu(c,v,d,w),Ml(l),v=vr(),l!==null&&!qi?(Cf(l,c,I),Pu(l,c,I)):(Dn&&v&&bf(c),c.flags|=1,ra(l,c,d,I),c.child)}function jx(l,c,d,v,w){if(ds(c),c.stateNode===null){var I=vi,K=d.contextType;typeof K=="object"&&K!==null&&(I=ai(K)),I=new d(v,I),c.memoizedState=I.state!==null&&I.state!==void 0?I.state:null,I.updater=z2,c.stateNode=I,I._reactInternals=c,I=c.stateNode,I.props=v,I.state=c.memoizedState,I.refs={},we(c),K=d.contextType,I.context=typeof K=="object"&&K!==null?ai(K):vi,I.state=c.memoizedState,K=d.getDerivedStateFromProps,typeof K=="function"&&(V2(c,d,K,v),I.state=c.memoizedState),typeof d.getDerivedStateFromProps=="function"||typeof I.getSnapshotBeforeUpdate=="function"||typeof I.UNSAFE_componentWillMount!="function"&&typeof I.componentWillMount!="function"||(K=I.state,typeof I.componentWillMount=="function"&&I.componentWillMount(),typeof I.UNSAFE_componentWillMount=="function"&&I.UNSAFE_componentWillMount(),K!==I.state&&z2.enqueueReplaceState(I,I.state,null),dt(c,v,I,w),Dt(),I.state=c.memoizedState),typeof I.componentDidMount=="function"&&(c.flags|=4194308),v=!0}else if(l===null){I=c.stateNode;var le=c.memoizedProps,ye=Mf(d,le);I.props=ye;var ke=I.context,We=d.contextType;K=vi,typeof We=="object"&&We!==null&&(K=ai(We));var Ze=d.getDerivedStateFromProps;We=typeof Ze=="function"||typeof I.getSnapshotBeforeUpdate=="function",le=c.pendingProps!==le,We||typeof I.UNSAFE_componentWillReceiveProps!="function"&&typeof I.componentWillReceiveProps!="function"||(le||ke!==K)&&Sx(c,I,v,K),Ue=!1;var Fe=c.memoizedState;I.state=Fe,dt(c,v,I,w),Dt(),ke=c.memoizedState,le||Fe!==ke||Ue?(typeof Ze=="function"&&(V2(c,d,Ze,v),ke=c.memoizedState),(ye=Ue||Ex(c,d,ye,v,Fe,ke,K))?(We||typeof I.UNSAFE_componentWillMount!="function"&&typeof I.componentWillMount!="function"||(typeof I.componentWillMount=="function"&&I.componentWillMount(),typeof I.UNSAFE_componentWillMount=="function"&&I.UNSAFE_componentWillMount()),typeof I.componentDidMount=="function"&&(c.flags|=4194308)):(typeof I.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=v,c.memoizedState=ke),I.props=v,I.state=ke,I.context=K,v=ye):(typeof I.componentDidMount=="function"&&(c.flags|=4194308),v=!1)}else{I=c.stateNode,Se(l,c),K=c.memoizedProps,We=Mf(d,K),I.props=We,Ze=c.pendingProps,Fe=I.context,ke=d.contextType,ye=vi,typeof ke=="object"&&ke!==null&&(ye=ai(ke)),le=d.getDerivedStateFromProps,(ke=typeof le=="function"||typeof I.getSnapshotBeforeUpdate=="function")||typeof I.UNSAFE_componentWillReceiveProps!="function"&&typeof I.componentWillReceiveProps!="function"||(K!==Ze||Fe!==ye)&&Sx(c,I,v,ye),Ue=!1,Fe=c.memoizedState,I.state=Fe,dt(c,v,I,w),Dt();var je=c.memoizedState;K!==Ze||Fe!==je||Ue||l!==null&&l.dependencies!==null&&_h(l.dependencies)?(typeof le=="function"&&(V2(c,d,le,v),je=c.memoizedState),(We=Ue||Ex(c,d,We,v,Fe,je,ye)||l!==null&&l.dependencies!==null&&_h(l.dependencies))?(ke||typeof I.UNSAFE_componentWillUpdate!="function"&&typeof I.componentWillUpdate!="function"||(typeof I.componentWillUpdate=="function"&&I.componentWillUpdate(v,je,ye),typeof I.UNSAFE_componentWillUpdate=="function"&&I.UNSAFE_componentWillUpdate(v,je,ye)),typeof I.componentDidUpdate=="function"&&(c.flags|=4),typeof I.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof I.componentDidUpdate!="function"||K===l.memoizedProps&&Fe===l.memoizedState||(c.flags|=4),typeof I.getSnapshotBeforeUpdate!="function"||K===l.memoizedProps&&Fe===l.memoizedState||(c.flags|=1024),c.memoizedProps=v,c.memoizedState=je),I.props=v,I.state=je,I.context=ye,v=We):(typeof I.componentDidUpdate!="function"||K===l.memoizedProps&&Fe===l.memoizedState||(c.flags|=4),typeof I.getSnapshotBeforeUpdate!="function"||K===l.memoizedProps&&Fe===l.memoizedState||(c.flags|=1024),v=!1)}return I=v,Y0(l,c),v=(c.flags&128)!==0,I||v?(I=c.stateNode,d=v&&typeof d.getDerivedStateFromError!="function"?null:I.render(),c.flags|=1,l!==null&&v?(c.child=Rh(c,l.child,null,w),c.child=Rh(c,null,d,w)):ra(l,c,d,w),c.memoizedState=I.state,l=c.child):l=Pu(l,c,w),l}function Ux(l,c,d,v){return Ga(),c.flags|=256,ra(l,c,d,v),c.child}var G2={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function W2(l){return{baseLanes:l,cachePool:Z()}}function $2(l,c,d){return l=l!==null?l.childLanes&~d:0,c&&(l|=ms),l}function Vx(l,c,d){var v=c.pendingProps,w=!1,I=(c.flags&128)!==0,K;if((K=I)||(K=l!==null&&l.memoizedState===null?!1:(Ri.current&2)!==0),K&&(w=!0,c.flags&=-129),K=(c.flags&32)!==0,c.flags&=-33,l===null){if(Dn){if(w?Ec(c):Sc(),Dn){var le=Or,ye;if(ye=le){e:{for(ye=le,le=cs;ye.nodeType!==8;){if(!le){le=null;break e}if(ye=Ys(ye.nextSibling),ye===null){le=null;break e}}le=ye}le!==null?(c.memoizedState={dehydrated:le,treeContext:Eu!==null?{id:js,overflow:Us}:null,retryLane:536870912,hydrationErrors:null},ye=zi(18,null,null,0),ye.stateNode=le,ye.return=c,c.child=ye,ii=c,Or=null,ye=!0):ye=!1}ye||Cu(c)}if(le=c.memoizedState,le!==null&&(le=le.dehydrated,le!==null))return Nm(le)?c.lanes=32:c.lanes=536870912,null;Du(c)}return le=v.children,v=v.fallback,w?(Sc(),w=c.mode,le=K0({mode:"hidden",children:le},w),v=Bs(v,w,d,null),le.return=c,v.return=c,le.sibling=v,c.child=le,w=c.child,w.memoizedState=W2(d),w.childLanes=$2(l,K,d),c.memoizedState=G2,v):(Ec(c),X2(c,le))}if(ye=l.memoizedState,ye!==null&&(le=ye.dehydrated,le!==null)){if(I)c.flags&256?(Ec(c),c.flags&=-257,c=Y2(l,c,d)):c.memoizedState!==null?(Sc(),c.child=l.child,c.flags|=128,c=null):(Sc(),w=v.fallback,le=c.mode,v=K0({mode:"visible",children:v.children},le),w=Bs(w,le,d,null),w.flags|=2,v.return=c,w.return=c,v.sibling=w,c.child=v,Rh(c,l.child,null,d),v=c.child,v.memoizedState=W2(d),v.childLanes=$2(l,K,d),c.memoizedState=G2,c=w);else if(Ec(c),Nm(le)){if(K=le.nextSibling&&le.nextSibling.dataset,K)var ke=K.dgst;K=ke,v=Error(r(419)),v.stack="",v.digest=K,vc({value:v,source:null,stack:null}),c=Y2(l,c,d)}else if(qi||yc(l,c,d,!1),K=(d&l.childLanes)!==0,qi||K){if(K=yr,K!==null&&(v=d&-d,v=(v&42)!==0?1:Ei(v),v=(v&(K.suspendedLanes|d))!==0?0:v,v!==0&&v!==ye.retryLane))throw ye.retryLane=v,Ms(l,v),Ho(K,l,v),Dx;le.data==="$?"||dm(),c=Y2(l,c,d)}else le.data==="$?"?(c.flags|=192,c.child=l.child,c=null):(l=ye.treeContext,Or=Ys(le.nextSibling),ii=c,Dn=!0,Pl=null,cs=!1,l!==null&&(uo[Ha++]=js,uo[Ha++]=Us,uo[Ha++]=Eu,js=l.id,Us=l.overflow,Eu=c),c=X2(c,v.children),c.flags|=4096);return c}return w?(Sc(),w=v.fallback,le=c.mode,ye=l.child,ke=ye.sibling,v=us(ye,{mode:"hidden",children:v.children}),v.subtreeFlags=ye.subtreeFlags&65011712,ke!==null?w=us(ke,w):(w=Bs(w,le,d,null),w.flags|=2),w.return=c,v.return=c,v.sibling=w,c.child=v,v=w,w=c.child,le=l.child.memoizedState,le===null?le=W2(d):(ye=le.cachePool,ye!==null?(ke=oi._currentValue,ye=ye.parent!==ke?{parent:ke,pool:ke}:ye):ye=Z(),le={baseLanes:le.baseLanes|d,cachePool:ye}),w.memoizedState=le,w.childLanes=$2(l,K,d),c.memoizedState=G2,v):(Ec(c),d=l.child,l=d.sibling,d=us(d,{mode:"visible",children:v.children}),d.return=c,d.sibling=null,l!==null&&(K=c.deletions,K===null?(c.deletions=[l],c.flags|=16):K.push(l)),c.child=d,c.memoizedState=null,d)}function X2(l,c){return c=K0({mode:"visible",children:c},l.mode),c.return=l,l.child=c}function K0(l,c){return l=zi(22,l,null,c),l.lanes=0,l.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},l}function Y2(l,c,d){return Rh(c,l.child,null,d),l=X2(c,c.pendingProps.children),l.flags|=2,c.memoizedState=null,l}function zx(l,c,d){l.lanes|=c;var v=l.alternate;v!==null&&(v.lanes|=c),yh(l.return,c,d)}function K2(l,c,d,v,w){var I=l.memoizedState;I===null?l.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:v,tail:d,tailMode:w}:(I.isBackwards=c,I.rendering=null,I.renderingStartTime=0,I.last=v,I.tail=d,I.tailMode=w)}function qx(l,c,d){var v=c.pendingProps,w=v.revealOrder,I=v.tail;if(ra(l,c,v.children,d),v=Ri.current,(v&2)!==0)v=v&1|2,c.flags|=128;else{if(l!==null&&(l.flags&128)!==0)e:for(l=c.child;l!==null;){if(l.tag===13)l.memoizedState!==null&&zx(l,d,c);else if(l.tag===19)zx(l,d,c);else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===c)break e;for(;l.sibling===null;){if(l.return===null||l.return===c)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}v&=1}switch(Q(Ri,v),w){case"forwards":for(d=c.child,w=null;d!==null;)l=d.alternate,l!==null&&W0(l)===null&&(w=d),d=d.sibling;d=w,d===null?(w=c.child,c.child=null):(w=d.sibling,d.sibling=null),K2(c,!1,w,d,I);break;case"backwards":for(d=null,w=c.child,c.child=null;w!==null;){if(l=w.alternate,l!==null&&W0(l)===null){c.child=w;break}l=w.sibling,w.sibling=d,d=w,w=l}K2(c,!0,d,null,I);break;case"together":K2(c,!1,null,null,void 0);break;default:c.memoizedState=null}return c.child}function Pu(l,c,d){if(l!==null&&(c.dependencies=l.dependencies),Nc|=c.lanes,(d&c.childLanes)===0)if(l!==null){if(yc(l,c,d,!1),(d&c.childLanes)===0)return null}else return null;if(l!==null&&c.child!==l.child)throw Error(r(153));if(c.child!==null){for(l=c.child,d=us(l,l.pendingProps),c.child=d,d.return=c;l.sibling!==null;)l=l.sibling,d=d.sibling=us(l,l.pendingProps),d.return=c;d.sibling=null}return c.child}function Q2(l,c){return(l.lanes&c)!==0?!0:(l=l.dependencies,!!(l!==null&&_h(l)))}function U8(l,c,d){switch(c.tag){case 3:be(c,c.stateNode.containerInfo),Ll(c,oi,l.memoizedState.cache),Ga();break;case 27:case 5:Ge(c);break;case 4:be(c,c.stateNode.containerInfo);break;case 10:Ll(c,c.type,c.memoizedProps.value);break;case 13:var v=c.memoizedState;if(v!==null)return v.dehydrated!==null?(Ec(c),c.flags|=128,null):(d&c.child.childLanes)!==0?Vx(l,c,d):(Ec(c),l=Pu(l,c,d),l!==null?l.sibling:null);Ec(c);break;case 19:var w=(l.flags&128)!==0;if(v=(d&c.childLanes)!==0,v||(yc(l,c,d,!1),v=(d&c.childLanes)!==0),w){if(v)return qx(l,c,d);c.flags|=128}if(w=c.memoizedState,w!==null&&(w.rendering=null,w.tail=null,w.lastEffect=null),Q(Ri,Ri.current),v)break;return null;case 22:case 23:return c.lanes=0,Mx(l,c,d);case 24:Ll(c,oi,l.memoizedState.cache)}return Pu(l,c,d)}function Hx(l,c,d){if(l!==null)if(l.memoizedProps!==c.pendingProps)qi=!0;else{if(!Q2(l,d)&&(c.flags&128)===0)return qi=!1,U8(l,c,d);qi=(l.flags&131072)!==0}else qi=!1,Dn&&(c.flags&1048576)!==0&&C0(c,vh,c.index);switch(c.lanes=0,c.tag){case 16:e:{l=c.pendingProps;var v=c.elementType,w=v._init;if(v=w(v._payload),c.type=v,typeof v=="function")gc(v)?(l=Mf(v,l),c.tag=1,c=jx(null,c,v,l,d)):(c.tag=0,c=H2(null,c,v,l,d));else{if(v!=null){if(w=v.$$typeof,w===V){c.tag=11,c=Px(null,c,v,l,d);break e}else if(w===P){c.tag=14,c=Lx(null,c,v,l,d);break e}}throw c=$(v)||v,Error(r(306,c,""))}}return c;case 0:return H2(l,c,c.type,c.pendingProps,d);case 1:return v=c.type,w=Mf(v,c.pendingProps),jx(l,c,v,w,d);case 3:e:{if(be(c,c.stateNode.containerInfo),l===null)throw Error(r(387));v=c.pendingProps;var I=c.memoizedState;w=I.element,Se(l,c),dt(c,v,null,d);var K=c.memoizedState;if(v=K.cache,Ll(c,oi,v),v!==I.cache&&xh(c,[oi],d,!0),Dt(),v=K.element,I.isDehydrated)if(I={element:v,isDehydrated:!1,cache:K.cache},c.updateQueue.baseState=I,c.memoizedState=I,c.flags&256){c=Ux(l,c,v,d);break e}else if(v!==w){w=ln(Error(r(424)),c),vc(w),c=Ux(l,c,v,d);break e}else{switch(l=c.stateNode.containerInfo,l.nodeType){case 9:l=l.body;break;default:l=l.nodeName==="HTML"?l.ownerDocument.body:l}for(Or=Ys(l.firstChild),ii=c,Dn=!0,Pl=null,cs=!0,d=bx(c,null,v,d),c.child=d;d;)d.flags=d.flags&-3|4096,d=d.sibling}else{if(Ga(),v===w){c=Pu(l,c,d);break e}ra(l,c,v,d)}c=c.child}return c;case 26:return Y0(l,c),l===null?(d=X_(c.type,null,c.pendingProps,null))?c.memoizedState=d:Dn||(d=c.type,l=c.pendingProps,v=cp(de.current).createElement(d),v[Hn]=c,v[Gn]=l,aa(v,d,l),Mn(v),c.stateNode=v):c.memoizedState=X_(c.type,l.memoizedProps,c.pendingProps,l.memoizedState),null;case 27:return Ge(c),l===null&&Dn&&(v=c.stateNode=G_(c.type,c.pendingProps,de.current),ii=c,cs=!0,w=Or,Lc(c.type)?(Om=w,Or=Ys(v.firstChild)):Or=w),ra(l,c,c.pendingProps.children,d),Y0(l,c),l===null&&(c.flags|=4194304),c.child;case 5:return l===null&&Dn&&((w=v=Or)&&(v=pC(v,c.type,c.pendingProps,cs),v!==null?(c.stateNode=v,ii=c,Or=Ys(v.firstChild),cs=!1,w=!0):w=!1),w||Cu(c)),Ge(c),w=c.type,I=c.pendingProps,K=l!==null?l.memoizedProps:null,v=I.children,Tm(w,I)?v=null:K!==null&&Tm(w,K)&&(c.flags|=32),c.memoizedState!==null&&(w=Fo(l,c,Bl,null,null,d),f1._currentValue=w),Y0(l,c),ra(l,c,v,d),c.child;case 6:return l===null&&Dn&&((l=d=Or)&&(d=gC(d,c.pendingProps,cs),d!==null?(c.stateNode=d,ii=c,Or=null,l=!0):l=!1),l||Cu(c)),null;case 13:return Vx(l,c,d);case 4:return be(c,c.stateNode.containerInfo),v=c.pendingProps,l===null?c.child=Rh(c,null,v,d):ra(l,c,v,d),c.child;case 11:return Px(l,c,c.type,c.pendingProps,d);case 7:return ra(l,c,c.pendingProps,d),c.child;case 8:return ra(l,c,c.pendingProps.children,d),c.child;case 12:return ra(l,c,c.pendingProps.children,d),c.child;case 10:return v=c.pendingProps,Ll(c,c.type,v.value),ra(l,c,v.children,d),c.child;case 9:return w=c.type._context,v=c.pendingProps.children,ds(c),w=ai(w),v=v(w),c.flags|=1,ra(l,c,v,d),c.child;case 14:return Lx(l,c,c.type,c.pendingProps,d);case 15:return kx(l,c,c.type,c.pendingProps,d);case 19:return qx(l,c,d);case 31:return v=c.pendingProps,d=c.mode,v={mode:v.mode,children:v.children},l===null?(d=K0(v,d),d.ref=c.ref,c.child=d,d.return=c,c=d):(d=us(l.child,v),d.ref=c.ref,c.child=d,d.return=c,c=d),c;case 22:return Mx(l,c,d);case 24:return ds(c),v=ai(oi),l===null?(w=k(),w===null&&(w=yr,I=Ld(),w.pooledCache=I,I.refCount++,I!==null&&(w.pooledCacheLanes|=d),w=I),c.memoizedState={parent:v,cache:w},we(c),Ll(c,oi,w)):((l.lanes&d)!==0&&(Se(l,c),dt(c,null,null,d),Dt()),w=l.memoizedState,I=c.memoizedState,w.parent!==v?(w={parent:v,cache:v},c.memoizedState=w,c.lanes===0&&(c.memoizedState=c.updateQueue.baseState=w),Ll(c,oi,v)):(v=I.cache,Ll(c,oi,v),v!==w.cache&&xh(c,[oi],d,!0))),ra(l,c,c.pendingProps.children,d),c.child;case 29:throw c.pendingProps}throw Error(r(156,c.tag))}function Lu(l){l.flags|=4}function Gx(l,c){if(c.type!=="stylesheet"||(c.state.loading&4)!==0)l.flags&=-16777217;else if(l.flags|=16777216,!J_(c)){if(c=gs.current,c!==null&&((Rn&4194048)===Rn?Ul!==null:(Rn&62914560)!==Rn&&(Rn&536870912)===0||c!==Ul))throw Oe=ce,ae;l.flags|=8192}}function Q0(l,c){c!==null&&(l.flags|=4),l.flags&16384&&(c=l.tag!==22?Cn():536870912,l.lanes|=c,Ph|=c)}function Kd(l,c){if(!Dn)switch(l.tailMode){case"hidden":c=l.tail;for(var d=null;c!==null;)c.alternate!==null&&(d=c),c=c.sibling;d===null?l.tail=null:d.sibling=null;break;case"collapsed":d=l.tail;for(var v=null;d!==null;)d.alternate!==null&&(v=d),d=d.sibling;v===null?c||l.tail===null?l.tail=null:l.tail.sibling=null:v.sibling=null}}function jr(l){var c=l.alternate!==null&&l.alternate.child===l.child,d=0,v=0;if(c)for(var w=l.child;w!==null;)d|=w.lanes|w.childLanes,v|=w.subtreeFlags&65011712,v|=w.flags&65011712,w.return=l,w=w.sibling;else for(w=l.child;w!==null;)d|=w.lanes|w.childLanes,v|=w.subtreeFlags,v|=w.flags,w.return=l,w=w.sibling;return l.subtreeFlags|=v,l.childLanes=d,c}function V8(l,c,d){var v=c.pendingProps;switch(Af(c),c.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return jr(c),null;case 1:return jr(c),null;case 3:return d=c.stateNode,v=null,l!==null&&(v=l.memoizedState.cache),c.memoizedState.cache!==v&&(c.flags|=2048),hs(oi),Te(),d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null),(l===null||l.child===null)&&(ta(c)?Lu(c):l===null||l.memoizedState.isDehydrated&&(c.flags&256)===0||(c.flags|=1024,I0())),jr(c),null;case 26:return d=c.memoizedState,l===null?(Lu(c),d!==null?(jr(c),Gx(c,d)):(jr(c),c.flags&=-16777217)):d?d!==l.memoizedState?(Lu(c),jr(c),Gx(c,d)):(jr(c),c.flags&=-16777217):(l.memoizedProps!==v&&Lu(c),jr(c),c.flags&=-16777217),null;case 27:He(c),d=de.current;var w=c.type;if(l!==null&&c.stateNode!=null)l.memoizedProps!==v&&Lu(c);else{if(!v){if(c.stateNode===null)throw Error(r(166));return jr(c),null}l=ee.current,ta(c)?T0(c):(l=G_(w,v,d),c.stateNode=l,Lu(c))}return jr(c),null;case 5:if(He(c),d=c.type,l!==null&&c.stateNode!=null)l.memoizedProps!==v&&Lu(c);else{if(!v){if(c.stateNode===null)throw Error(r(166));return jr(c),null}if(l=ee.current,ta(c))T0(c);else{switch(w=cp(de.current),l){case 1:l=w.createElementNS("http://www.w3.org/2000/svg",d);break;case 2:l=w.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;default:switch(d){case"svg":l=w.createElementNS("http://www.w3.org/2000/svg",d);break;case"math":l=w.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;case"script":l=w.createElement("div"),l.innerHTML="<script><\/script>",l=l.removeChild(l.firstChild);break;case"select":l=typeof v.is=="string"?w.createElement("select",{is:v.is}):w.createElement("select"),v.multiple?l.multiple=!0:v.size&&(l.size=v.size);break;default:l=typeof v.is=="string"?w.createElement(d,{is:v.is}):w.createElement(d)}}l[Hn]=c,l[Gn]=v;e:for(w=c.child;w!==null;){if(w.tag===5||w.tag===6)l.appendChild(w.stateNode);else if(w.tag!==4&&w.tag!==27&&w.child!==null){w.child.return=w,w=w.child;continue}if(w===c)break e;for(;w.sibling===null;){if(w.return===null||w.return===c)break e;w=w.return}w.sibling.return=w.return,w=w.sibling}c.stateNode=l;e:switch(aa(l,d,v),d){case"button":case"input":case"select":case"textarea":l=!!v.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&Lu(c)}}return jr(c),c.flags&=-16777217,null;case 6:if(l&&c.stateNode!=null)l.memoizedProps!==v&&Lu(c);else{if(typeof v!="string"&&c.stateNode===null)throw Error(r(166));if(l=de.current,ta(c)){if(l=c.stateNode,d=c.memoizedProps,v=null,w=ii,w!==null)switch(w.tag){case 27:case 5:v=w.memoizedProps}l[Hn]=c,l=!!(l.nodeValue===d||v!==null&&v.suppressHydrationWarning===!0||F_(l.nodeValue,d)),l||Cu(c)}else l=cp(l).createTextNode(v),l[Hn]=c,c.stateNode=l}return jr(c),null;case 13:if(v=c.memoizedState,l===null||l.memoizedState!==null&&l.memoizedState.dehydrated!==null){if(w=ta(c),v!==null&&v.dehydrated!==null){if(l===null){if(!w)throw Error(r(318));if(w=c.memoizedState,w=w!==null?w.dehydrated:null,!w)throw Error(r(317));w[Hn]=c}else Ga(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;jr(c),w=!1}else w=I0(),l!==null&&l.memoizedState!==null&&(l.memoizedState.hydrationErrors=w),w=!0;if(!w)return c.flags&256?(Du(c),c):(Du(c),null)}if(Du(c),(c.flags&128)!==0)return c.lanes=d,c;if(d=v!==null,l=l!==null&&l.memoizedState!==null,d){v=c.child,w=null,v.alternate!==null&&v.alternate.memoizedState!==null&&v.alternate.memoizedState.cachePool!==null&&(w=v.alternate.memoizedState.cachePool.pool);var I=null;v.memoizedState!==null&&v.memoizedState.cachePool!==null&&(I=v.memoizedState.cachePool.pool),I!==w&&(v.flags|=2048)}return d!==l&&d&&(c.child.flags|=8192),Q0(c,c.updateQueue),jr(c),null;case 4:return Te(),l===null&&bm(c.stateNode.containerInfo),jr(c),null;case 10:return hs(c.type),jr(c),null;case 19:if(G(Ri),w=c.memoizedState,w===null)return jr(c),null;if(v=(c.flags&128)!==0,I=w.rendering,I===null)if(v)Kd(w,!1);else{if(Qr!==0||l!==null&&(l.flags&128)!==0)for(l=c.child;l!==null;){if(I=W0(l),I!==null){for(c.flags|=128,Kd(w,!1),l=I.updateQueue,c.updateQueue=l,Q0(c,l),c.subtreeFlags=0,l=d,d=c.child;d!==null;)_f(d,l),d=d.sibling;return Q(Ri,Ri.current&1|2),c.child}l=l.sibling}w.tail!==null&&gt()>ep&&(c.flags|=128,v=!0,Kd(w,!1),c.lanes=4194304)}else{if(!v)if(l=W0(I),l!==null){if(c.flags|=128,v=!0,l=l.updateQueue,c.updateQueue=l,Q0(c,l),Kd(w,!0),w.tail===null&&w.tailMode==="hidden"&&!I.alternate&&!Dn)return jr(c),null}else 2*gt()-w.renderingStartTime>ep&&d!==536870912&&(c.flags|=128,v=!0,Kd(w,!1),c.lanes=4194304);w.isBackwards?(I.sibling=c.child,c.child=I):(l=w.last,l!==null?l.sibling=I:c.child=I,w.last=I)}return w.tail!==null?(c=w.tail,w.rendering=c,w.tail=c.sibling,w.renderingStartTime=gt(),c.sibling=null,l=Ri.current,Q(Ri,v?l&1|2:l&1),c):(jr(c),null);case 22:case 23:return Du(c),Qt(),v=c.memoizedState!==null,l!==null?l.memoizedState!==null!==v&&(c.flags|=8192):v&&(c.flags|=8192),v?(d&536870912)!==0&&(c.flags&128)===0&&(jr(c),c.subtreeFlags&6&&(c.flags|=8192)):jr(c),d=c.updateQueue,d!==null&&Q0(c,d.retryQueue),d=null,l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(d=l.memoizedState.cachePool.pool),v=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(v=c.memoizedState.cachePool.pool),v!==d&&(c.flags|=2048),l!==null&&G(A),null;case 24:return d=null,l!==null&&(d=l.memoizedState.cache),c.memoizedState.cache!==d&&(c.flags|=2048),hs(oi),jr(c),null;case 25:return null;case 30:return null}throw Error(r(156,c.tag))}function z8(l,c){switch(Af(c),c.tag){case 1:return l=c.flags,l&65536?(c.flags=l&-65537|128,c):null;case 3:return hs(oi),Te(),l=c.flags,(l&65536)!==0&&(l&128)===0?(c.flags=l&-65537|128,c):null;case 26:case 27:case 5:return He(c),null;case 13:if(Du(c),l=c.memoizedState,l!==null&&l.dehydrated!==null){if(c.alternate===null)throw Error(r(340));Ga()}return l=c.flags,l&65536?(c.flags=l&-65537|128,c):null;case 19:return G(Ri),null;case 4:return Te(),null;case 10:return hs(c.type),null;case 22:case 23:return Du(c),Qt(),l!==null&&G(A),l=c.flags,l&65536?(c.flags=l&-65537|128,c):null;case 24:return hs(oi),null;case 25:return null;default:return null}}function Wx(l,c){switch(Af(c),c.tag){case 3:hs(oi),Te();break;case 26:case 27:case 5:He(c);break;case 4:Te();break;case 13:Du(c);break;case 19:G(Ri);break;case 10:hs(c.type);break;case 22:case 23:Du(c),Qt(),l!==null&&G(A);break;case 24:hs(oi)}}function Qd(l,c){try{var d=c.updateQueue,v=d!==null?d.lastEffect:null;if(v!==null){var w=v.next;d=w;do{if((d.tag&l)===l){v=void 0;var I=d.create,K=d.inst;v=I(),K.destroy=v}d=d.next}while(d!==w)}}catch(le){gr(c,c.return,le)}}function Cc(l,c,d){try{var v=c.updateQueue,w=v!==null?v.lastEffect:null;if(w!==null){var I=w.next;v=I;do{if((v.tag&l)===l){var K=v.inst,le=K.destroy;if(le!==void 0){K.destroy=void 0,w=c;var ye=d,ke=le;try{ke()}catch(We){gr(w,ye,We)}}}v=v.next}while(v!==I)}}catch(We){gr(c,c.return,We)}}function $x(l){var c=l.updateQueue;if(c!==null){var d=l.stateNode;try{jn(c,d)}catch(v){gr(l,l.return,v)}}}function Xx(l,c,d){d.props=Mf(l.type,l.memoizedProps),d.state=l.memoizedState;try{d.componentWillUnmount()}catch(v){gr(l,c,v)}}function Zd(l,c){try{var d=l.ref;if(d!==null){switch(l.tag){case 26:case 27:case 5:var v=l.stateNode;break;case 30:v=l.stateNode;break;default:v=l.stateNode}typeof d=="function"?l.refCleanup=d(v):d.current=v}}catch(w){gr(l,c,w)}}function Vl(l,c){var d=l.ref,v=l.refCleanup;if(d!==null)if(typeof v=="function")try{v()}catch(w){gr(l,c,w)}finally{l.refCleanup=null,l=l.alternate,l!=null&&(l.refCleanup=null)}else if(typeof d=="function")try{d(null)}catch(w){gr(l,c,w)}else d.current=null}function Yx(l){var c=l.type,d=l.memoizedProps,v=l.stateNode;try{e:switch(c){case"button":case"input":case"select":case"textarea":d.autoFocus&&v.focus();break e;case"img":d.src?v.src=d.src:d.srcSet&&(v.srcset=d.srcSet)}}catch(w){gr(l,l.return,w)}}function Z2(l,c,d){try{var v=l.stateNode;uC(v,l.type,d,c),v[Gn]=c}catch(w){gr(l,l.return,w)}}function Kx(l){return l.tag===5||l.tag===3||l.tag===26||l.tag===27&&Lc(l.type)||l.tag===4}function J2(l){e:for(;;){for(;l.sibling===null;){if(l.return===null||Kx(l.return))return null;l=l.return}for(l.sibling.return=l.return,l=l.sibling;l.tag!==5&&l.tag!==6&&l.tag!==18;){if(l.tag===27&&Lc(l.type)||l.flags&2||l.child===null||l.tag===4)continue e;l.child.return=l,l=l.child}if(!(l.flags&2))return l.stateNode}}function em(l,c,d){var v=l.tag;if(v===5||v===6)l=l.stateNode,c?(d.nodeType===9?d.body:d.nodeName==="HTML"?d.ownerDocument.body:d).insertBefore(l,c):(c=d.nodeType===9?d.body:d.nodeName==="HTML"?d.ownerDocument.body:d,c.appendChild(l),d=d._reactRootContainer,d!=null||c.onclick!==null||(c.onclick=up));else if(v!==4&&(v===27&&Lc(l.type)&&(d=l.stateNode,c=null),l=l.child,l!==null))for(em(l,c,d),l=l.sibling;l!==null;)em(l,c,d),l=l.sibling}function Z0(l,c,d){var v=l.tag;if(v===5||v===6)l=l.stateNode,c?d.insertBefore(l,c):d.appendChild(l);else if(v!==4&&(v===27&&Lc(l.type)&&(d=l.stateNode),l=l.child,l!==null))for(Z0(l,c,d),l=l.sibling;l!==null;)Z0(l,c,d),l=l.sibling}function Qx(l){var c=l.stateNode,d=l.memoizedProps;try{for(var v=l.type,w=c.attributes;w.length;)c.removeAttributeNode(w[0]);aa(c,v,d),c[Hn]=l,c[Gn]=d}catch(I){gr(l,l.return,I)}}var ku=!1,li=!1,tm=!1,Zx=typeof WeakSet=="function"?WeakSet:Set,Hi=null;function q8(l,c){if(l=l.containerInfo,Sm=mp,l=ea(l),Ii(l)){if("selectionStart"in l)var d={start:l.selectionStart,end:l.selectionEnd};else e:{d=(d=l.ownerDocument)&&d.defaultView||window;var v=d.getSelection&&d.getSelection();if(v&&v.rangeCount!==0){d=v.anchorNode;var w=v.anchorOffset,I=v.focusNode;v=v.focusOffset;try{d.nodeType,I.nodeType}catch{d=null;break e}var K=0,le=-1,ye=-1,ke=0,We=0,Ze=l,Fe=null;t:for(;;){for(var je;Ze!==d||w!==0&&Ze.nodeType!==3||(le=K+w),Ze!==I||v!==0&&Ze.nodeType!==3||(ye=K+v),Ze.nodeType===3&&(K+=Ze.nodeValue.length),(je=Ze.firstChild)!==null;)Fe=Ze,Ze=je;for(;;){if(Ze===l)break t;if(Fe===d&&++ke===w&&(le=K),Fe===I&&++We===v&&(ye=K),(je=Ze.nextSibling)!==null)break;Ze=Fe,Fe=Ze.parentNode}Ze=je}d=le===-1||ye===-1?null:{start:le,end:ye}}else d=null}d=d||{start:0,end:0}}else d=null;for(Cm={focusedElem:l,selectionRange:d},mp=!1,Hi=c;Hi!==null;)if(c=Hi,l=c.child,(c.subtreeFlags&1024)!==0&&l!==null)l.return=c,Hi=l;else for(;Hi!==null;){switch(c=Hi,I=c.alternate,l=c.flags,c.tag){case 0:break;case 11:case 15:break;case 1:if((l&1024)!==0&&I!==null){l=void 0,d=c,w=I.memoizedProps,I=I.memoizedState,v=d.stateNode;try{var Xt=Mf(d.type,w,d.elementType===d.type);l=v.getSnapshotBeforeUpdate(Xt,I),v.__reactInternalSnapshotBeforeUpdate=l}catch(Ut){gr(d,d.return,Ut)}}break;case 3:if((l&1024)!==0){if(l=c.stateNode.containerInfo,d=l.nodeType,d===9)Rm(l);else if(d===1)switch(l.nodeName){case"HEAD":case"HTML":case"BODY":Rm(l);break;default:l.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((l&1024)!==0)throw Error(r(163))}if(l=c.sibling,l!==null){l.return=c.return,Hi=l;break}Hi=c.return}}function Jx(l,c,d){var v=d.flags;switch(d.tag){case 0:case 11:case 15:Tc(l,d),v&4&&Qd(5,d);break;case 1:if(Tc(l,d),v&4)if(l=d.stateNode,c===null)try{l.componentDidMount()}catch(K){gr(d,d.return,K)}else{var w=Mf(d.type,c.memoizedProps);c=c.memoizedState;try{l.componentDidUpdate(w,c,l.__reactInternalSnapshotBeforeUpdate)}catch(K){gr(d,d.return,K)}}v&64&&$x(d),v&512&&Zd(d,d.return);break;case 3:if(Tc(l,d),v&64&&(l=d.updateQueue,l!==null)){if(c=null,d.child!==null)switch(d.child.tag){case 27:case 5:c=d.child.stateNode;break;case 1:c=d.child.stateNode}try{jn(l,c)}catch(K){gr(d,d.return,K)}}break;case 27:c===null&&v&4&&Qx(d);case 26:case 5:Tc(l,d),c===null&&v&4&&Yx(d),v&512&&Zd(d,d.return);break;case 12:Tc(l,d);break;case 13:Tc(l,d),v&4&&n_(l,d),v&64&&(l=d.memoizedState,l!==null&&(l=l.dehydrated,l!==null&&(d=Z8.bind(null,d),mC(l,d))));break;case 22:if(v=d.memoizedState!==null||ku,!v){c=c!==null&&c.memoizedState!==null||li,w=ku;var I=li;ku=v,(li=c)&&!I?Ic(l,d,(d.subtreeFlags&8772)!==0):Tc(l,d),ku=w,li=I}break;case 30:break;default:Tc(l,d)}}function e_(l){var c=l.alternate;c!==null&&(l.alternate=null,e_(c)),l.child=null,l.deletions=null,l.sibling=null,l.tag===5&&(c=l.stateNode,c!==null&&pi(c)),l.stateNode=null,l.return=null,l.dependencies=null,l.memoizedProps=null,l.memoizedState=null,l.pendingProps=null,l.stateNode=null,l.updateQueue=null}var Dr=null,fo=!1;function Mu(l,c,d){for(d=d.child;d!==null;)t_(l,c,d),d=d.sibling}function t_(l,c,d){if(bt&&typeof bt.onCommitFiberUnmount=="function")try{bt.onCommitFiberUnmount(_t,d)}catch{}switch(d.tag){case 26:li||Vl(d,c),Mu(l,c,d),d.memoizedState?d.memoizedState.count--:d.stateNode&&(d=d.stateNode,d.parentNode.removeChild(d));break;case 27:li||Vl(d,c);var v=Dr,w=fo;Lc(d.type)&&(Dr=d.stateNode,fo=!1),Mu(l,c,d),s1(d.stateNode),Dr=v,fo=w;break;case 5:li||Vl(d,c);case 6:if(v=Dr,w=fo,Dr=null,Mu(l,c,d),Dr=v,fo=w,Dr!==null)if(fo)try{(Dr.nodeType===9?Dr.body:Dr.nodeName==="HTML"?Dr.ownerDocument.body:Dr).removeChild(d.stateNode)}catch(I){gr(d,c,I)}else try{Dr.removeChild(d.stateNode)}catch(I){gr(d,c,I)}break;case 18:Dr!==null&&(fo?(l=Dr,q_(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,d.stateNode),g1(l)):q_(Dr,d.stateNode));break;case 4:v=Dr,w=fo,Dr=d.stateNode.containerInfo,fo=!0,Mu(l,c,d),Dr=v,fo=w;break;case 0:case 11:case 14:case 15:li||Cc(2,d,c),li||Cc(4,d,c),Mu(l,c,d);break;case 1:li||(Vl(d,c),v=d.stateNode,typeof v.componentWillUnmount=="function"&&Xx(d,c,v)),Mu(l,c,d);break;case 21:Mu(l,c,d);break;case 22:li=(v=li)||d.memoizedState!==null,Mu(l,c,d),li=v;break;default:Mu(l,c,d)}}function n_(l,c){if(c.memoizedState===null&&(l=c.alternate,l!==null&&(l=l.memoizedState,l!==null&&(l=l.dehydrated,l!==null))))try{g1(l)}catch(d){gr(c,c.return,d)}}function H8(l){switch(l.tag){case 13:case 19:var c=l.stateNode;return c===null&&(c=l.stateNode=new Zx),c;case 22:return l=l.stateNode,c=l._retryCache,c===null&&(c=l._retryCache=new Zx),c;default:throw Error(r(435,l.tag))}}function nm(l,c){var d=H8(l);c.forEach(function(v){var w=J8.bind(null,l,v);d.has(v)||(d.add(v),v.then(w,w))})}function Uo(l,c){var d=c.deletions;if(d!==null)for(var v=0;v<d.length;v++){var w=d[v],I=l,K=c,le=K;e:for(;le!==null;){switch(le.tag){case 27:if(Lc(le.type)){Dr=le.stateNode,fo=!1;break e}break;case 5:Dr=le.stateNode,fo=!1;break e;case 3:case 4:Dr=le.stateNode.containerInfo,fo=!0;break e}le=le.return}if(Dr===null)throw Error(r(160));t_(I,K,w),Dr=null,fo=!1,I=w.alternate,I!==null&&(I.return=null),w.return=null}if(c.subtreeFlags&13878)for(c=c.child;c!==null;)r_(c,l),c=c.sibling}var Xs=null;function r_(l,c){var d=l.alternate,v=l.flags;switch(l.tag){case 0:case 11:case 14:case 15:Uo(c,l),Vo(l),v&4&&(Cc(3,l,l.return),Qd(3,l),Cc(5,l,l.return));break;case 1:Uo(c,l),Vo(l),v&512&&(li||d===null||Vl(d,d.return)),v&64&&ku&&(l=l.updateQueue,l!==null&&(v=l.callbacks,v!==null&&(d=l.shared.hiddenCallbacks,l.shared.hiddenCallbacks=d===null?v:d.concat(v))));break;case 26:var w=Xs;if(Uo(c,l),Vo(l),v&512&&(li||d===null||Vl(d,d.return)),v&4){var I=d!==null?d.memoizedState:null;if(v=l.memoizedState,d===null)if(v===null)if(l.stateNode===null){e:{v=l.type,d=l.memoizedProps,w=w.ownerDocument||w;t:switch(v){case"title":I=w.getElementsByTagName("title")[0],(!I||I[Zi]||I[Hn]||I.namespaceURI==="http://www.w3.org/2000/svg"||I.hasAttribute("itemprop"))&&(I=w.createElement(v),w.head.insertBefore(I,w.querySelector("head > title"))),aa(I,v,d),I[Hn]=l,Mn(I),v=I;break e;case"link":var K=Q_("link","href",w).get(v+(d.href||""));if(K){for(var le=0;le<K.length;le++)if(I=K[le],I.getAttribute("href")===(d.href==null||d.href===""?null:d.href)&&I.getAttribute("rel")===(d.rel==null?null:d.rel)&&I.getAttribute("title")===(d.title==null?null:d.title)&&I.getAttribute("crossorigin")===(d.crossOrigin==null?null:d.crossOrigin)){K.splice(le,1);break t}}I=w.createElement(v),aa(I,v,d),w.head.appendChild(I);break;case"meta":if(K=Q_("meta","content",w).get(v+(d.content||""))){for(le=0;le<K.length;le++)if(I=K[le],I.getAttribute("content")===(d.content==null?null:""+d.content)&&I.getAttribute("name")===(d.name==null?null:d.name)&&I.getAttribute("property")===(d.property==null?null:d.property)&&I.getAttribute("http-equiv")===(d.httpEquiv==null?null:d.httpEquiv)&&I.getAttribute("charset")===(d.charSet==null?null:d.charSet)){K.splice(le,1);break t}}I=w.createElement(v),aa(I,v,d),w.head.appendChild(I);break;default:throw Error(r(468,v))}I[Hn]=l,Mn(I),v=I}l.stateNode=v}else Z_(w,l.type,l.stateNode);else l.stateNode=K_(w,v,l.memoizedProps);else I!==v?(I===null?d.stateNode!==null&&(d=d.stateNode,d.parentNode.removeChild(d)):I.count--,v===null?Z_(w,l.type,l.stateNode):K_(w,v,l.memoizedProps)):v===null&&l.stateNode!==null&&Z2(l,l.memoizedProps,d.memoizedProps)}break;case 27:Uo(c,l),Vo(l),v&512&&(li||d===null||Vl(d,d.return)),d!==null&&v&4&&Z2(l,l.memoizedProps,d.memoizedProps);break;case 5:if(Uo(c,l),Vo(l),v&512&&(li||d===null||Vl(d,d.return)),l.flags&32){w=l.stateNode;try{ga(w,"")}catch(je){gr(l,l.return,je)}}v&4&&l.stateNode!=null&&(w=l.memoizedProps,Z2(l,w,d!==null?d.memoizedProps:w)),v&1024&&(tm=!0);break;case 6:if(Uo(c,l),Vo(l),v&4){if(l.stateNode===null)throw Error(r(162));v=l.memoizedProps,d=l.stateNode;try{d.nodeValue=v}catch(je){gr(l,l.return,je)}}break;case 3:if(dp=null,w=Xs,Xs=fp(c.containerInfo),Uo(c,l),Xs=w,Vo(l),v&4&&d!==null&&d.memoizedState.isDehydrated)try{g1(c.containerInfo)}catch(je){gr(l,l.return,je)}tm&&(tm=!1,i_(l));break;case 4:v=Xs,Xs=fp(l.stateNode.containerInfo),Uo(c,l),Vo(l),Xs=v;break;case 12:Uo(c,l),Vo(l);break;case 13:Uo(c,l),Vo(l),l.child.flags&8192&&l.memoizedState!==null!=(d!==null&&d.memoizedState!==null)&&(lm=gt()),v&4&&(v=l.updateQueue,v!==null&&(l.updateQueue=null,nm(l,v)));break;case 22:w=l.memoizedState!==null;var ye=d!==null&&d.memoizedState!==null,ke=ku,We=li;if(ku=ke||w,li=We||ye,Uo(c,l),li=We,ku=ke,Vo(l),v&8192)e:for(c=l.stateNode,c._visibility=w?c._visibility&-2:c._visibility|1,w&&(d===null||ye||ku||li||Bf(l)),d=null,c=l;;){if(c.tag===5||c.tag===26){if(d===null){ye=d=c;try{if(I=ye.stateNode,w)K=I.style,typeof K.setProperty=="function"?K.setProperty("display","none","important"):K.display="none";else{le=ye.stateNode;var Ze=ye.memoizedProps.style,Fe=Ze!=null&&Ze.hasOwnProperty("display")?Ze.display:null;le.style.display=Fe==null||typeof Fe=="boolean"?"":(""+Fe).trim()}}catch(je){gr(ye,ye.return,je)}}}else if(c.tag===6){if(d===null){ye=c;try{ye.stateNode.nodeValue=w?"":ye.memoizedProps}catch(je){gr(ye,ye.return,je)}}}else if((c.tag!==22&&c.tag!==23||c.memoizedState===null||c===l)&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===l)break e;for(;c.sibling===null;){if(c.return===null||c.return===l)break e;d===c&&(d=null),c=c.return}d===c&&(d=null),c.sibling.return=c.return,c=c.sibling}v&4&&(v=l.updateQueue,v!==null&&(d=v.retryQueue,d!==null&&(v.retryQueue=null,nm(l,d))));break;case 19:Uo(c,l),Vo(l),v&4&&(v=l.updateQueue,v!==null&&(l.updateQueue=null,nm(l,v)));break;case 30:break;case 21:break;default:Uo(c,l),Vo(l)}}function Vo(l){var c=l.flags;if(c&2){try{for(var d,v=l.return;v!==null;){if(Kx(v)){d=v;break}v=v.return}if(d==null)throw Error(r(160));switch(d.tag){case 27:var w=d.stateNode,I=J2(l);Z0(l,I,w);break;case 5:var K=d.stateNode;d.flags&32&&(ga(K,""),d.flags&=-33);var le=J2(l);Z0(l,le,K);break;case 3:case 4:var ye=d.stateNode.containerInfo,ke=J2(l);em(l,ke,ye);break;default:throw Error(r(161))}}catch(We){gr(l,l.return,We)}l.flags&=-3}c&4096&&(l.flags&=-4097)}function i_(l){if(l.subtreeFlags&1024)for(l=l.child;l!==null;){var c=l;i_(c),c.tag===5&&c.flags&1024&&c.stateNode.reset(),l=l.sibling}}function Tc(l,c){if(c.subtreeFlags&8772)for(c=c.child;c!==null;)Jx(l,c.alternate,c),c=c.sibling}function Bf(l){for(l=l.child;l!==null;){var c=l;switch(c.tag){case 0:case 11:case 14:case 15:Cc(4,c,c.return),Bf(c);break;case 1:Vl(c,c.return);var d=c.stateNode;typeof d.componentWillUnmount=="function"&&Xx(c,c.return,d),Bf(c);break;case 27:s1(c.stateNode);case 26:case 5:Vl(c,c.return),Bf(c);break;case 22:c.memoizedState===null&&Bf(c);break;case 30:Bf(c);break;default:Bf(c)}l=l.sibling}}function Ic(l,c,d){for(d=d&&(c.subtreeFlags&8772)!==0,c=c.child;c!==null;){var v=c.alternate,w=l,I=c,K=I.flags;switch(I.tag){case 0:case 11:case 15:Ic(w,I,d),Qd(4,I);break;case 1:if(Ic(w,I,d),v=I,w=v.stateNode,typeof w.componentDidMount=="function")try{w.componentDidMount()}catch(ke){gr(v,v.return,ke)}if(v=I,w=v.updateQueue,w!==null){var le=v.stateNode;try{var ye=w.shared.hiddenCallbacks;if(ye!==null)for(w.shared.hiddenCallbacks=null,w=0;w<ye.length;w++)Tn(ye[w],le)}catch(ke){gr(v,v.return,ke)}}d&&K&64&&$x(I),Zd(I,I.return);break;case 27:Qx(I);case 26:case 5:Ic(w,I,d),d&&v===null&&K&4&&Yx(I),Zd(I,I.return);break;case 12:Ic(w,I,d);break;case 13:Ic(w,I,d),d&&K&4&&n_(w,I);break;case 22:I.memoizedState===null&&Ic(w,I,d),Zd(I,I.return);break;case 30:break;default:Ic(w,I,d)}c=c.sibling}}function rm(l,c){var d=null;l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(d=l.memoizedState.cachePool.pool),l=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(l=c.memoizedState.cachePool.pool),l!==d&&(l!=null&&l.refCount++,d!=null&&Ef(d))}function im(l,c){l=null,c.alternate!==null&&(l=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==l&&(c.refCount++,l!=null&&Ef(l))}function zl(l,c,d,v){if(c.subtreeFlags&10256)for(c=c.child;c!==null;)a_(l,c,d,v),c=c.sibling}function a_(l,c,d,v){var w=c.flags;switch(c.tag){case 0:case 11:case 15:zl(l,c,d,v),w&2048&&Qd(9,c);break;case 1:zl(l,c,d,v);break;case 3:zl(l,c,d,v),w&2048&&(l=null,c.alternate!==null&&(l=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==l&&(c.refCount++,l!=null&&Ef(l)));break;case 12:if(w&2048){zl(l,c,d,v),l=c.stateNode;try{var I=c.memoizedProps,K=I.id,le=I.onPostCommit;typeof le=="function"&&le(K,c.alternate===null?"mount":"update",l.passiveEffectDuration,-0)}catch(ye){gr(c,c.return,ye)}}else zl(l,c,d,v);break;case 13:zl(l,c,d,v);break;case 23:break;case 22:I=c.stateNode,K=c.alternate,c.memoizedState!==null?I._visibility&2?zl(l,c,d,v):Jd(l,c):I._visibility&2?zl(l,c,d,v):(I._visibility|=2,Nh(l,c,d,v,(c.subtreeFlags&10256)!==0)),w&2048&&rm(K,c);break;case 24:zl(l,c,d,v),w&2048&&im(c.alternate,c);break;default:zl(l,c,d,v)}}function Nh(l,c,d,v,w){for(w=w&&(c.subtreeFlags&10256)!==0,c=c.child;c!==null;){var I=l,K=c,le=d,ye=v,ke=K.flags;switch(K.tag){case 0:case 11:case 15:Nh(I,K,le,ye,w),Qd(8,K);break;case 23:break;case 22:var We=K.stateNode;K.memoizedState!==null?We._visibility&2?Nh(I,K,le,ye,w):Jd(I,K):(We._visibility|=2,Nh(I,K,le,ye,w)),w&&ke&2048&&rm(K.alternate,K);break;case 24:Nh(I,K,le,ye,w),w&&ke&2048&&im(K.alternate,K);break;default:Nh(I,K,le,ye,w)}c=c.sibling}}function Jd(l,c){if(c.subtreeFlags&10256)for(c=c.child;c!==null;){var d=l,v=c,w=v.flags;switch(v.tag){case 22:Jd(d,v),w&2048&&rm(v.alternate,v);break;case 24:Jd(d,v),w&2048&&im(v.alternate,v);break;default:Jd(d,v)}c=c.sibling}}var e1=8192;function Oh(l){if(l.subtreeFlags&e1)for(l=l.child;l!==null;)o_(l),l=l.sibling}function o_(l){switch(l.tag){case 26:Oh(l),l.flags&e1&&l.memoizedState!==null&&RC(Xs,l.memoizedState,l.memoizedProps);break;case 5:Oh(l);break;case 3:case 4:var c=Xs;Xs=fp(l.stateNode.containerInfo),Oh(l),Xs=c;break;case 22:l.memoizedState===null&&(c=l.alternate,c!==null&&c.memoizedState!==null?(c=e1,e1=16777216,Oh(l),e1=c):Oh(l));break;default:Oh(l)}}function s_(l){var c=l.alternate;if(c!==null&&(l=c.child,l!==null)){c.child=null;do c=l.sibling,l.sibling=null,l=c;while(l!==null)}}function t1(l){var c=l.deletions;if((l.flags&16)!==0){if(c!==null)for(var d=0;d<c.length;d++){var v=c[d];Hi=v,u_(v,l)}s_(l)}if(l.subtreeFlags&10256)for(l=l.child;l!==null;)l_(l),l=l.sibling}function l_(l){switch(l.tag){case 0:case 11:case 15:t1(l),l.flags&2048&&Cc(9,l,l.return);break;case 3:t1(l);break;case 12:t1(l);break;case 22:var c=l.stateNode;l.memoizedState!==null&&c._visibility&2&&(l.return===null||l.return.tag!==13)?(c._visibility&=-3,J0(l)):t1(l);break;default:t1(l)}}function J0(l){var c=l.deletions;if((l.flags&16)!==0){if(c!==null)for(var d=0;d<c.length;d++){var v=c[d];Hi=v,u_(v,l)}s_(l)}for(l=l.child;l!==null;){switch(c=l,c.tag){case 0:case 11:case 15:Cc(8,c,c.return),J0(c);break;case 22:d=c.stateNode,d._visibility&2&&(d._visibility&=-3,J0(c));break;default:J0(c)}l=l.sibling}}function u_(l,c){for(;Hi!==null;){var d=Hi;switch(d.tag){case 0:case 11:case 15:Cc(8,d,c);break;case 23:case 22:if(d.memoizedState!==null&&d.memoizedState.cachePool!==null){var v=d.memoizedState.cachePool.pool;v!=null&&v.refCount++}break;case 24:Ef(d.memoizedState.cache)}if(v=d.child,v!==null)v.return=d,Hi=v;else e:for(d=l;Hi!==null;){v=Hi;var w=v.sibling,I=v.return;if(e_(v),v===d){Hi=null;break e}if(w!==null){w.return=I,Hi=w;break e}Hi=I}}}var G8={getCacheForType:function(l){var c=ai(oi),d=c.data.get(l);return d===void 0&&(d=l(),c.data.set(l,d)),d}},W8=typeof WeakMap=="function"?WeakMap:Map,tr=0,yr=null,yn=null,Rn=0,nr=0,zo=null,Rc=!1,Dh=!1,am=!1,Bu=0,Qr=0,Nc=0,Ff=0,om=0,ms=0,Ph=0,n1=null,ho=null,sm=!1,lm=0,ep=1/0,tp=null,Oc=null,ia=0,Dc=null,Lh=null,kh=0,um=0,cm=null,c_=null,r1=0,fm=null;function qo(){if((tr&2)!==0&&Rn!==0)return Rn&-Rn;if(U.T!==null){var l=Tu;return l!==0?l:ym()}return dr()}function f_(){ms===0&&(ms=(Rn&536870912)===0||Dn?da():536870912);var l=gs.current;return l!==null&&(l.flags|=32),ms}function Ho(l,c,d){(l===yr&&(nr===2||nr===9)||l.cancelPendingCommit!==null)&&(Mh(l,0),Pc(l,Rn,ms,!1)),or(l,d),((tr&2)===0||l!==yr)&&(l===yr&&((tr&2)===0&&(Ff|=d),Qr===4&&Pc(l,Rn,ms,!1)),ql(l))}function h_(l,c,d){if((tr&6)!==0)throw Error(r(327));var v=!d&&(c&124)===0&&(c&l.expiredLanes)===0||di(l,c),w=v?Y8(l,c):pm(l,c,!0),I=v;do{if(w===0){Dh&&!v&&Pc(l,c,0,!1);break}else{if(d=l.current.alternate,I&&!$8(d)){w=pm(l,c,!1),I=!1;continue}if(w===2){if(I=c,l.errorRecoveryDisabledLanes&I)var K=0;else K=l.pendingLanes&-536870913,K=K!==0?K:K&536870912?536870912:0;if(K!==0){c=K;e:{var le=l;w=n1;var ye=le.current.memoizedState.isDehydrated;if(ye&&(Mh(le,K).flags|=256),K=pm(le,K,!1),K!==2){if(am&&!ye){le.errorRecoveryDisabledLanes|=I,Ff|=I,w=4;break e}I=ho,ho=w,I!==null&&(ho===null?ho=I:ho.push.apply(ho,I))}w=K}if(I=!1,w!==2)continue}}if(w===1){Mh(l,0),Pc(l,c,0,!0);break}e:{switch(v=l,I=w,I){case 0:case 1:throw Error(r(345));case 4:if((c&4194048)!==c)break;case 6:Pc(v,c,ms,!Rc);break e;case 2:ho=null;break;case 3:case 5:break;default:throw Error(r(329))}if((c&62914560)===c&&(w=lm+300-gt(),10<w)){if(Pc(v,c,ms,!Rc),An(v,0,!0)!==0)break e;v.timeoutHandle=V_(d_.bind(null,v,d,ho,tp,sm,c,ms,Ff,Ph,Rc,I,2,-0,0),w);break e}d_(v,d,ho,tp,sm,c,ms,Ff,Ph,Rc,I,0,-0,0)}}break}while(!0);ql(l)}function d_(l,c,d,v,w,I,K,le,ye,ke,We,Ze,Fe,je){if(l.timeoutHandle=-1,Ze=c.subtreeFlags,(Ze&8192||(Ze&16785408)===16785408)&&(c1={stylesheets:null,count:0,unsuspend:IC},o_(c),Ze=NC(),Ze!==null)){l.cancelPendingCommit=Ze(__.bind(null,l,c,I,d,v,w,K,le,ye,We,1,Fe,je)),Pc(l,I,K,!ke);return}__(l,c,I,d,v,w,K,le,ye)}function $8(l){for(var c=l;;){var d=c.tag;if((d===0||d===11||d===15)&&c.flags&16384&&(d=c.updateQueue,d!==null&&(d=d.stores,d!==null)))for(var v=0;v<d.length;v++){var w=d[v],I=w.getSnapshot;w=w.value;try{if(!mi(I(),w))return!1}catch{return!1}}if(d=c.child,c.subtreeFlags&16384&&d!==null)d.return=c,c=d;else{if(c===l)break;for(;c.sibling===null;){if(c.return===null||c.return===l)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function Pc(l,c,d,v){c&=~om,c&=~Ff,l.suspendedLanes|=c,l.pingedLanes&=~c,v&&(l.warmLanes|=c),v=l.expirationTimes;for(var w=c;0<w;){var I=31-xt(w),K=1<<I;v[I]=-1,w&=~K}d!==0&&Tt(l,d,c)}function np(){return(tr&6)===0?(i1(0),!1):!0}function hm(){if(yn!==null){if(nr===0)var l=yn.return;else l=yn,zs=yi=null,bh(l),Ih=null,Xd=0,l=yn;for(;l!==null;)Wx(l.alternate,l),l=l.return;yn=null}}function Mh(l,c){var d=l.timeoutHandle;d!==-1&&(l.timeoutHandle=-1,fC(d)),d=l.cancelPendingCommit,d!==null&&(l.cancelPendingCommit=null,d()),hm(),yr=l,yn=d=us(l.current,null),Rn=c,nr=0,zo=null,Rc=!1,Dh=di(l,c),am=!1,Ph=ms=om=Ff=Nc=Qr=0,ho=n1=null,sm=!1,(c&8)!==0&&(c|=c&32);var v=l.entangledLanes;if(v!==0)for(l=l.entanglements,v&=c;0<v;){var w=31-xt(v),I=1<<w;c|=l[w],v&=~I}return Bu=c,so(),d}function p_(l,c){Lt=null,U.H=q0,c===re||c===oe?(c=Re(),nr=3):c===ae?(c=Re(),nr=4):nr=c===Dx?8:c!==null&&typeof c=="object"&&typeof c.then=="function"?6:1,zo=c,yn===null&&(Qr=1,X0(l,ln(c,l.current)))}function g_(){var l=U.H;return U.H=q0,l===null?q0:l}function m_(){var l=U.A;return U.A=G8,l}function dm(){Qr=4,Rc||(Rn&4194048)!==Rn&&gs.current!==null||(Dh=!0),(Nc&134217727)===0&&(Ff&134217727)===0||yr===null||Pc(yr,Rn,ms,!1)}function pm(l,c,d){var v=tr;tr|=2;var w=g_(),I=m_();(yr!==l||Rn!==c)&&(tp=null,Mh(l,c)),c=!1;var K=Qr;e:do try{if(nr!==0&&yn!==null){var le=yn,ye=zo;switch(nr){case 8:hm(),K=6;break e;case 3:case 2:case 9:case 6:gs.current===null&&(c=!0);var ke=nr;if(nr=0,zo=null,Bh(l,le,ye,ke),d&&Dh){K=0;break e}break;default:ke=nr,nr=0,zo=null,Bh(l,le,ye,ke)}}X8(),K=Qr;break}catch(We){p_(l,We)}while(!0);return c&&l.shellSuspendCounter++,zs=yi=null,tr=v,U.H=w,U.A=I,yn===null&&(yr=null,Rn=0,so()),K}function X8(){for(;yn!==null;)v_(yn)}function Y8(l,c){var d=tr;tr|=2;var v=g_(),w=m_();yr!==l||Rn!==c?(tp=null,ep=gt()+500,Mh(l,c)):Dh=di(l,c);e:do try{if(nr!==0&&yn!==null){c=yn;var I=zo;t:switch(nr){case 1:nr=0,zo=null,Bh(l,c,I,1);break;case 2:case 9:if(he(I)){nr=0,zo=null,y_(c);break}c=function(){nr!==2&&nr!==9||yr!==l||(nr=7),ql(l)},I.then(c,c);break e;case 3:nr=7;break e;case 4:nr=5;break e;case 7:he(I)?(nr=0,zo=null,y_(c)):(nr=0,zo=null,Bh(l,c,I,7));break;case 5:var K=null;switch(yn.tag){case 26:K=yn.memoizedState;case 5:case 27:var le=yn;if(!K||J_(K)){nr=0,zo=null;var ye=le.sibling;if(ye!==null)yn=ye;else{var ke=le.return;ke!==null?(yn=ke,rp(ke)):yn=null}break t}}nr=0,zo=null,Bh(l,c,I,5);break;case 6:nr=0,zo=null,Bh(l,c,I,6);break;case 8:hm(),Qr=6;break e;default:throw Error(r(462))}}K8();break}catch(We){p_(l,We)}while(!0);return zs=yi=null,U.H=v,U.A=w,tr=d,yn!==null?0:(yr=null,Rn=0,so(),Qr)}function K8(){for(;yn!==null&&!Be();)v_(yn)}function v_(l){var c=Hx(l.alternate,l,Bu);l.memoizedProps=l.pendingProps,c===null?rp(l):yn=c}function y_(l){var c=l,d=c.alternate;switch(c.tag){case 15:case 0:c=Fx(d,c,c.pendingProps,c.type,void 0,Rn);break;case 11:c=Fx(d,c,c.pendingProps,c.type.render,c.ref,Rn);break;case 5:bh(c);default:Wx(d,c),c=yn=_f(c,Bu),c=Hx(d,c,Bu)}l.memoizedProps=l.pendingProps,c===null?rp(l):yn=c}function Bh(l,c,d,v){zs=yi=null,bh(c),Ih=null,Xd=0;var w=c.return;try{if(j8(l,w,c,d,Rn)){Qr=1,X0(l,ln(d,l.current)),yn=null;return}}catch(I){if(w!==null)throw yn=w,I;Qr=1,X0(l,ln(d,l.current)),yn=null;return}c.flags&32768?(Dn||v===1?l=!0:Dh||(Rn&536870912)!==0?l=!1:(Rc=l=!0,(v===2||v===9||v===3||v===6)&&(v=gs.current,v!==null&&v.tag===13&&(v.flags|=16384))),x_(c,l)):rp(c)}function rp(l){var c=l;do{if((c.flags&32768)!==0){x_(c,Rc);return}l=c.return;var d=V8(c.alternate,c,Bu);if(d!==null){yn=d;return}if(c=c.sibling,c!==null){yn=c;return}yn=c=l}while(c!==null);Qr===0&&(Qr=5)}function x_(l,c){do{var d=z8(l.alternate,l);if(d!==null){d.flags&=32767,yn=d;return}if(d=l.return,d!==null&&(d.flags|=32768,d.subtreeFlags=0,d.deletions=null),!c&&(l=l.sibling,l!==null)){yn=l;return}yn=l=d}while(l!==null);Qr=6,yn=null}function __(l,c,d,v,w,I,K,le,ye){l.cancelPendingCommit=null;do ip();while(ia!==0);if((tr&6)!==0)throw Error(r(327));if(c!==null){if(c===l.current)throw Error(r(177));if(I=c.lanes|c.childLanes,I|=Mr,vn(l,d,I,K,le,ye),l===yr&&(yn=yr=null,Rn=0),Lh=c,Dc=l,kh=d,um=I,cm=w,c_=v,(c.subtreeFlags&10256)!==0||(c.flags&10256)!==0?(l.callbackNode=null,l.callbackPriority=0,eC(at,function(){return S_(),null})):(l.callbackNode=null,l.callbackPriority=0),v=(c.flags&13878)!==0,(c.subtreeFlags&13878)!==0||v){v=U.T,U.T=null,w=z.p,z.p=2,K=tr,tr|=4;try{q8(l,c,d)}finally{tr=K,z.p=w,U.T=v}}ia=1,w_(),b_(),A_()}}function w_(){if(ia===1){ia=0;var l=Dc,c=Lh,d=(c.flags&13878)!==0;if((c.subtreeFlags&13878)!==0||d){d=U.T,U.T=null;var v=z.p;z.p=2;var w=tr;tr|=4;try{r_(c,l);var I=Cm,K=ea(l.containerInfo),le=I.focusedElem,ye=I.selectionRange;if(K!==le&&le&&le.ownerDocument&&El(le.ownerDocument.documentElement,le)){if(ye!==null&&Ii(le)){var ke=ye.start,We=ye.end;if(We===void 0&&(We=ke),"selectionStart"in le)le.selectionStart=ke,le.selectionEnd=Math.min(We,le.value.length);else{var Ze=le.ownerDocument||document,Fe=Ze&&Ze.defaultView||window;if(Fe.getSelection){var je=Fe.getSelection(),Xt=le.textContent.length,Ut=Math.min(ye.start,Xt),fr=ye.end===void 0?Ut:Math.min(ye.end,Xt);!je.extend&&Ut>fr&&(K=fr,fr=Ut,Ut=K);var Ne=Ls(le,Ut),Ae=Ls(le,fr);if(Ne&&Ae&&(je.rangeCount!==1||je.anchorNode!==Ne.node||je.anchorOffset!==Ne.offset||je.focusNode!==Ae.node||je.focusOffset!==Ae.offset)){var De=Ze.createRange();De.setStart(Ne.node,Ne.offset),je.removeAllRanges(),Ut>fr?(je.addRange(De),je.extend(Ae.node,Ae.offset)):(De.setEnd(Ae.node,Ae.offset),je.addRange(De))}}}}for(Ze=[],je=le;je=je.parentNode;)je.nodeType===1&&Ze.push({element:je,left:je.scrollLeft,top:je.scrollTop});for(typeof le.focus=="function"&&le.focus(),le=0;le<Ze.length;le++){var Ye=Ze[le];Ye.element.scrollLeft=Ye.left,Ye.element.scrollTop=Ye.top}}mp=!!Sm,Cm=Sm=null}finally{tr=w,z.p=v,U.T=d}}l.current=c,ia=2}}function b_(){if(ia===2){ia=0;var l=Dc,c=Lh,d=(c.flags&8772)!==0;if((c.subtreeFlags&8772)!==0||d){d=U.T,U.T=null;var v=z.p;z.p=2;var w=tr;tr|=4;try{Jx(l,c.alternate,c)}finally{tr=w,z.p=v,U.T=d}}ia=3}}function A_(){if(ia===4||ia===3){ia=0,ge();var l=Dc,c=Lh,d=kh,v=c_;(c.subtreeFlags&10256)!==0||(c.flags&10256)!==0?ia=5:(ia=0,Lh=Dc=null,E_(l,l.pendingLanes));var w=l.pendingLanes;if(w===0&&(Oc=null),kn(d),c=c.stateNode,bt&&typeof bt.onCommitFiberRoot=="function")try{bt.onCommitFiberRoot(_t,c,void 0,(c.current.flags&128)===128)}catch{}if(v!==null){c=U.T,w=z.p,z.p=2,U.T=null;try{for(var I=l.onRecoverableError,K=0;K<v.length;K++){var le=v[K];I(le.value,{componentStack:le.stack})}}finally{U.T=c,z.p=w}}(kh&3)!==0&&ip(),ql(l),w=l.pendingLanes,(d&4194090)!==0&&(w&42)!==0?l===fm?r1++:(r1=0,fm=l):r1=0,i1(0)}}function E_(l,c){(l.pooledCacheLanes&=c)===0&&(c=l.pooledCache,c!=null&&(l.pooledCache=null,Ef(c)))}function ip(l){return w_(),b_(),A_(),S_()}function S_(){if(ia!==5)return!1;var l=Dc,c=um;um=0;var d=kn(kh),v=U.T,w=z.p;try{z.p=32>d?32:d,U.T=null,d=cm,cm=null;var I=Dc,K=kh;if(ia=0,Lh=Dc=null,kh=0,(tr&6)!==0)throw Error(r(331));var le=tr;if(tr|=4,l_(I.current),a_(I,I.current,K,d),tr=le,i1(0,!1),bt&&typeof bt.onPostCommitFiberRoot=="function")try{bt.onPostCommitFiberRoot(_t,I)}catch{}return!0}finally{z.p=w,U.T=v,E_(l,c)}}function C_(l,c,d){c=ln(d,c),c=q2(l.stateNode,c,2),l=Qe(l,c,2),l!==null&&(or(l,2),ql(l))}function gr(l,c,d){if(l.tag===3)C_(l,l,d);else for(;c!==null;){if(c.tag===3){C_(c,l,d);break}else if(c.tag===1){var v=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof v.componentDidCatch=="function"&&(Oc===null||!Oc.has(v))){l=ln(d,l),d=Nx(2),v=Qe(c,d,2),v!==null&&(Ox(d,v,c,l),or(v,2),ql(v));break}}c=c.return}}function gm(l,c,d){var v=l.pingCache;if(v===null){v=l.pingCache=new W8;var w=new Set;v.set(c,w)}else w=v.get(c),w===void 0&&(w=new Set,v.set(c,w));w.has(d)||(am=!0,w.add(d),l=Q8.bind(null,l,c,d),c.then(l,l))}function Q8(l,c,d){var v=l.pingCache;v!==null&&v.delete(c),l.pingedLanes|=l.suspendedLanes&d,l.warmLanes&=~d,yr===l&&(Rn&d)===d&&(Qr===4||Qr===3&&(Rn&62914560)===Rn&&300>gt()-lm?(tr&2)===0&&Mh(l,0):om|=d,Ph===Rn&&(Ph=0)),ql(l)}function T_(l,c){c===0&&(c=Cn()),l=Ms(l,c),l!==null&&(or(l,c),ql(l))}function Z8(l){var c=l.memoizedState,d=0;c!==null&&(d=c.retryLane),T_(l,d)}function J8(l,c){var d=0;switch(l.tag){case 13:var v=l.stateNode,w=l.memoizedState;w!==null&&(d=w.retryLane);break;case 19:v=l.stateNode;break;case 22:v=l.stateNode._retryCache;break;default:throw Error(r(314))}v!==null&&v.delete(c),T_(l,d)}function eC(l,c){return st(l,c)}var ap=null,Fh=null,mm=!1,op=!1,vm=!1,jf=0;function ql(l){l!==Fh&&l.next===null&&(Fh===null?ap=Fh=l:Fh=Fh.next=l),op=!0,mm||(mm=!0,nC())}function i1(l,c){if(!vm&&op){vm=!0;do for(var d=!1,v=ap;v!==null;){if(l!==0){var w=v.pendingLanes;if(w===0)var I=0;else{var K=v.suspendedLanes,le=v.pingedLanes;I=(1<<31-xt(42|l)+1)-1,I&=w&~(K&~le),I=I&201326741?I&201326741|1:I?I|2:0}I!==0&&(d=!0,O_(v,I))}else I=Rn,I=An(v,v===yr?I:0,v.cancelPendingCommit!==null||v.timeoutHandle!==-1),(I&3)===0||di(v,I)||(d=!0,O_(v,I));v=v.next}while(d);vm=!1}}function tC(){I_()}function I_(){op=mm=!1;var l=0;jf!==0&&(cC()&&(l=jf),jf=0);for(var c=gt(),d=null,v=ap;v!==null;){var w=v.next,I=R_(v,c);I===0?(v.next=null,d===null?ap=w:d.next=w,w===null&&(Fh=d)):(d=v,(l!==0||(I&3)!==0)&&(op=!0)),v=w}i1(l)}function R_(l,c){for(var d=l.suspendedLanes,v=l.pingedLanes,w=l.expirationTimes,I=l.pendingLanes&-62914561;0<I;){var K=31-xt(I),le=1<<K,ye=w[K];ye===-1?((le&d)===0||(le&v)!==0)&&(w[K]=on(le,c)):ye<=c&&(l.expiredLanes|=le),I&=~le}if(c=yr,d=Rn,d=An(l,l===c?d:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),v=l.callbackNode,d===0||l===c&&(nr===2||nr===9)||l.cancelPendingCommit!==null)return v!==null&&v!==null&&wt(v),l.callbackNode=null,l.callbackPriority=0;if((d&3)===0||di(l,d)){if(c=d&-d,c===l.callbackPriority)return c;switch(v!==null&&wt(v),kn(d)){case 2:case 8:d=it;break;case 32:d=at;break;case 268435456:d=ct;break;default:d=at}return v=N_.bind(null,l),d=st(d,v),l.callbackPriority=c,l.callbackNode=d,c}return v!==null&&v!==null&&wt(v),l.callbackPriority=2,l.callbackNode=null,2}function N_(l,c){if(ia!==0&&ia!==5)return l.callbackNode=null,l.callbackPriority=0,null;var d=l.callbackNode;if(ip()&&l.callbackNode!==d)return null;var v=Rn;return v=An(l,l===yr?v:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),v===0?null:(h_(l,v,c),R_(l,gt()),l.callbackNode!=null&&l.callbackNode===d?N_.bind(null,l):null)}function O_(l,c){if(ip())return null;h_(l,c,!0)}function nC(){hC(function(){(tr&6)!==0?st(Xe,tC):I_()})}function ym(){return jf===0&&(jf=da()),jf}function D_(l){return l==null||typeof l=="symbol"||typeof l=="boolean"?null:typeof l=="function"?l:No(""+l)}function P_(l,c){var d=c.ownerDocument.createElement("input");return d.name=c.name,d.value=c.value,l.id&&d.setAttribute("form",l.id),c.parentNode.insertBefore(d,c),l=new FormData(l),d.parentNode.removeChild(d),l}function rC(l,c,d,v,w){if(c==="submit"&&d&&d.stateNode===w){var I=D_((w[Gn]||null).action),K=v.submitter;K&&(c=(c=K[Gn]||null)?D_(c.formAction):K.getAttribute("formAction"),c!==null&&(I=c,K=null));var le=new es("action","action",null,v,w);l.push({event:le,listeners:[{instance:null,listener:function(){if(v.defaultPrevented){if(jf!==0){var ye=K?P_(w,K):new FormData(w);ps(d,{pending:!0,data:ye,method:w.method,action:I},null,ye)}}else typeof I=="function"&&(le.preventDefault(),ye=K?P_(w,K):new FormData(w),ps(d,{pending:!0,data:ye,method:w.method,action:I},I,ye))},currentTarget:w}]})}}for(var xm=0;xm<wu.length;xm++){var _m=wu[xm],iC=_m.toLowerCase(),aC=_m[0].toUpperCase()+_m.slice(1);Nr(iC,"on"+aC)}Nr(dc,"onAnimationEnd"),Nr(Cl,"onAnimationIteration"),Nr(Tl,"onAnimationStart"),Nr("dblclick","onDoubleClick"),Nr("focusin","onFocus"),Nr("focusout","onBlur"),Nr(Il,"onTransitionRun"),Nr(_u,"onTransitionStart"),Nr(pc,"onTransitionCancel"),Nr(Rl,"onTransitionEnd"),pa("onMouseEnter",["mouseout","mouseover"]),pa("onMouseLeave",["mouseout","mouseover"]),pa("onPointerEnter",["pointerout","pointerover"]),pa("onPointerLeave",["pointerout","pointerover"]),Bi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Bi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Bi("onBeforeInput",["compositionend","keypress","textInput","paste"]),Bi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Bi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Bi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var a1="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),oC=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(a1));function L_(l,c){c=(c&4)!==0;for(var d=0;d<l.length;d++){var v=l[d],w=v.event;v=v.listeners;e:{var I=void 0;if(c)for(var K=v.length-1;0<=K;K--){var le=v[K],ye=le.instance,ke=le.currentTarget;if(le=le.listener,ye!==I&&w.isPropagationStopped())break e;I=le,w.currentTarget=ke;try{I(w)}catch(We){$0(We)}w.currentTarget=null,I=ye}else for(K=0;K<v.length;K++){if(le=v[K],ye=le.instance,ke=le.currentTarget,le=le.listener,ye!==I&&w.isPropagationStopped())break e;I=le,w.currentTarget=ke;try{I(w)}catch(We){$0(We)}w.currentTarget=null,I=ye}}}}function xn(l,c){var d=c[wr];d===void 0&&(d=c[wr]=new Set);var v=l+"__bubble";d.has(v)||(k_(c,l,2,!1),d.add(v))}function wm(l,c,d){var v=0;c&&(v|=4),k_(d,l,v,c)}var sp="_reactListening"+Math.random().toString(36).slice(2);function bm(l){if(!l[sp]){l[sp]=!0,Eo.forEach(function(d){d!=="selectionchange"&&(oC.has(d)||wm(d,!1,l),wm(d,!0,l))});var c=l.nodeType===9?l:l.ownerDocument;c===null||c[sp]||(c[sp]=!0,wm("selectionchange",!1,c))}}function k_(l,c,d,v){switch(aw(c)){case 2:var w=PC;break;case 8:w=LC;break;default:w=Mm}d=w.bind(null,c,d,l),w=void 0,!Ji||c!=="touchstart"&&c!=="touchmove"&&c!=="wheel"||(w=!0),v?w!==void 0?l.addEventListener(c,d,{capture:!0,passive:w}):l.addEventListener(c,d,!0):w!==void 0?l.addEventListener(c,d,{passive:w}):l.addEventListener(c,d,!1)}function Am(l,c,d,v,w){var I=v;if((c&1)===0&&(c&2)===0&&v!==null)e:for(;;){if(v===null)return;var K=v.tag;if(K===3||K===4){var le=v.stateNode.containerInfo;if(le===w)break;if(K===4)for(K=v.return;K!==null;){var ye=K.tag;if((ye===3||ye===4)&&K.stateNode.containerInfo===w)return;K=K.return}for(;le!==null;){if(K=ei(le),K===null)return;if(ye=K.tag,ye===5||ye===6||ye===26||ye===27){v=I=K;continue e}le=le.parentNode}}v=v.return}lc(function(){var ke=I,We=Jn(d),Ze=[];e:{var Fe=ks.get(l);if(Fe!==void 0){var je=es,Xt=l;switch(l){case"keypress":if(ya(d)===0)break e;case"keydown":case"keyup":je=Lo;break;case"focusin":Xt="focus",je=ns;break;case"focusout":Xt="blur",je=ns;break;case"beforeblur":case"afterblur":je=ns;break;case"click":if(d.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":je=$r;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":je=ts;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":je=_l;break;case dc:case Cl:case Tl:je=vl;break;case Rl:je=J;break;case"scroll":case"scrollend":je=pu;break;case"wheel":je=xe;break;case"copy":case"cut":case"paste":je=yl;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":je=Ps;break;case"toggle":case"beforetoggle":je=Ve}var Ut=(c&4)!==0,fr=!Ut&&(l==="scroll"||l==="scrollend"),Ne=Ut?Fe!==null?Fe+"Capture":null:Fe;Ut=[];for(var Ae=ke,De;Ae!==null;){var Ye=Ae;if(De=Ye.stateNode,Ye=Ye.tag,Ye!==5&&Ye!==26&&Ye!==27||De===null||Ne===null||(Ye=Fi(Ae,Ne),Ye!=null&&Ut.push(o1(Ae,Ye,De))),fr)break;Ae=Ae.return}0<Ut.length&&(Fe=new je(Fe,Xt,null,d,We),Ze.push({event:Fe,listeners:Ut}))}}if((c&7)===0){e:{if(Fe=l==="mouseover"||l==="pointerover",je=l==="mouseout"||l==="pointerout",Fe&&d!==Ja&&(Xt=d.relatedTarget||d.fromElement)&&(ei(Xt)||Xt[pr]))break e;if((je||Fe)&&(Fe=We.window===We?We:(Fe=We.ownerDocument)?Fe.defaultView||Fe.parentWindow:window,je?(Xt=d.relatedTarget||d.toElement,je=ke,Xt=Xt?ei(Xt):null,Xt!==null&&(fr=a(Xt),Ut=Xt.tag,Xt!==fr||Ut!==5&&Ut!==27&&Ut!==6)&&(Xt=null)):(je=null,Xt=ke),je!==Xt)){if(Ut=$r,Ye="onMouseLeave",Ne="onMouseEnter",Ae="mouse",(l==="pointerout"||l==="pointerover")&&(Ut=Ps,Ye="onPointerLeave",Ne="onPointerEnter",Ae="pointer"),fr=je==null?Fe:ti(je),De=Xt==null?Fe:ti(Xt),Fe=new Ut(Ye,Ae+"leave",je,d,We),Fe.target=fr,Fe.relatedTarget=De,Ye=null,ei(We)===ke&&(Ut=new Ut(Ne,Ae+"enter",Xt,d,We),Ut.target=De,Ut.relatedTarget=fr,Ye=Ut),fr=Ye,je&&Xt)t:{for(Ut=je,Ne=Xt,Ae=0,De=Ut;De;De=jh(De))Ae++;for(De=0,Ye=Ne;Ye;Ye=jh(Ye))De++;for(;0<Ae-De;)Ut=jh(Ut),Ae--;for(;0<De-Ae;)Ne=jh(Ne),De--;for(;Ae--;){if(Ut===Ne||Ne!==null&&Ut===Ne.alternate)break t;Ut=jh(Ut),Ne=jh(Ne)}Ut=null}else Ut=null;je!==null&&M_(Ze,Fe,je,Ut,!1),Xt!==null&&fr!==null&&M_(Ze,fr,Xt,Ut,!0)}}e:{if(Fe=ke?ti(ke):window,je=Fe.nodeName&&Fe.nodeName.toLowerCase(),je==="select"||je==="input"&&Fe.type==="file")var St=fc;else if(Yn(Fe))if(mu)St=ph;else{St=Dd;var pn=_a}else je=Fe.nodeName,!je||je.toLowerCase()!=="input"||Fe.type!=="checkbox"&&Fe.type!=="radio"?ke&&hu(ke.elementType)&&(St=fc):St=yf;if(St&&(St=St(l,ke))){ao(Ze,St,d,We);break e}pn&&pn(l,Fe,ke),l==="focusout"&&ke&&Fe.type==="number"&&ke.memoizedProps.value!=null&&Qo(Fe,"number",Fe.value)}switch(pn=ke?ti(ke):window,l){case"focusin":(Yn(pn)||pn.contentEditable==="true")&&(wa=pn,ko=ke,ss=null);break;case"focusout":ss=ko=wa=null;break;case"mousedown":Mo=!0;break;case"contextmenu":case"mouseup":case"dragend":Mo=!1,Rr(Ze,d,We);break;case"selectionchange":if(Sl)break;case"keydown":case"keyup":Rr(Ze,d,We)}var Pt;if(ht)e:{switch(l){case"compositionstart":var zt="onCompositionStart";break e;case"compositionend":zt="onCompositionEnd";break e;case"compositionupdate":zt="onCompositionUpdate";break e}zt=void 0}else jt?Le(l,d)&&(zt="onCompositionEnd"):l==="keydown"&&d.keyCode===229&&(zt="onCompositionStart");zt&&(W&&d.locale!=="ko"&&(jt||zt!=="onCompositionStart"?zt==="onCompositionEnd"&&jt&&(Pt=du()):(va=We,Jo="value"in va?va.value:va.textContent,jt=!0)),pn=lp(ke,zt),0<pn.length&&(zt=new Ns(zt,l,null,d,We),Ze.push({event:zt,listeners:pn}),Pt?zt.data=Pt:(Pt=nt(d),Pt!==null&&(zt.data=Pt)))),(Pt=F?dn(l,d):Kt(l,d))&&(zt=lp(ke,"onBeforeInput"),0<zt.length&&(pn=new Ns("onBeforeInput","beforeinput",null,d,We),Ze.push({event:pn,listeners:zt}),pn.data=Pt)),rC(Ze,l,ke,d,We)}L_(Ze,c)})}function o1(l,c,d){return{instance:l,listener:c,currentTarget:d}}function lp(l,c){for(var d=c+"Capture",v=[];l!==null;){var w=l,I=w.stateNode;if(w=w.tag,w!==5&&w!==26&&w!==27||I===null||(w=Fi(l,d),w!=null&&v.unshift(o1(l,w,I)),w=Fi(l,c),w!=null&&v.push(o1(l,w,I))),l.tag===3)return v;l=l.return}return[]}function jh(l){if(l===null)return null;do l=l.return;while(l&&l.tag!==5&&l.tag!==27);return l||null}function M_(l,c,d,v,w){for(var I=c._reactName,K=[];d!==null&&d!==v;){var le=d,ye=le.alternate,ke=le.stateNode;if(le=le.tag,ye!==null&&ye===v)break;le!==5&&le!==26&&le!==27||ke===null||(ye=ke,w?(ke=Fi(d,I),ke!=null&&K.unshift(o1(d,ke,ye))):w||(ke=Fi(d,I),ke!=null&&K.push(o1(d,ke,ye)))),d=d.return}K.length!==0&&l.push({event:c,listeners:K})}var sC=/\r\n?/g,lC=/\u0000|\uFFFD/g;function B_(l){return(typeof l=="string"?l:""+l).replace(sC,`
`).replace(lC,"")}function F_(l,c){return c=B_(c),B_(l)===c}function up(){}function cr(l,c,d,v,w,I){switch(d){case"children":typeof v=="string"?c==="body"||c==="textarea"&&v===""||ga(l,v):(typeof v=="number"||typeof v=="bigint")&&c!=="body"&&ga(l,""+v);break;case"className":Va(l,"class",v);break;case"tabIndex":Va(l,"tabindex",v);break;case"dir":case"role":case"viewBox":case"width":case"height":Va(l,d,v);break;case"style":fu(l,v,I);break;case"data":if(c!=="object"){Va(l,"data",v);break}case"src":case"href":if(v===""&&(c!=="a"||d!=="href")){l.removeAttribute(d);break}if(v==null||typeof v=="function"||typeof v=="symbol"||typeof v=="boolean"){l.removeAttribute(d);break}v=No(""+v),l.setAttribute(d,v);break;case"action":case"formAction":if(typeof v=="function"){l.setAttribute(d,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof I=="function"&&(d==="formAction"?(c!=="input"&&cr(l,c,"name",w.name,w,null),cr(l,c,"formEncType",w.formEncType,w,null),cr(l,c,"formMethod",w.formMethod,w,null),cr(l,c,"formTarget",w.formTarget,w,null)):(cr(l,c,"encType",w.encType,w,null),cr(l,c,"method",w.method,w,null),cr(l,c,"target",w.target,w,null)));if(v==null||typeof v=="symbol"||typeof v=="boolean"){l.removeAttribute(d);break}v=No(""+v),l.setAttribute(d,v);break;case"onClick":v!=null&&(l.onclick=up);break;case"onScroll":v!=null&&xn("scroll",l);break;case"onScrollEnd":v!=null&&xn("scrollend",l);break;case"dangerouslySetInnerHTML":if(v!=null){if(typeof v!="object"||!("__html"in v))throw Error(r(61));if(d=v.__html,d!=null){if(w.children!=null)throw Error(r(60));l.innerHTML=d}}break;case"multiple":l.multiple=v&&typeof v!="function"&&typeof v!="symbol";break;case"muted":l.muted=v&&typeof v!="function"&&typeof v!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(v==null||typeof v=="function"||typeof v=="boolean"||typeof v=="symbol"){l.removeAttribute("xlink:href");break}d=No(""+v),l.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",d);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":v!=null&&typeof v!="function"&&typeof v!="symbol"?l.setAttribute(d,""+v):l.removeAttribute(d);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":v&&typeof v!="function"&&typeof v!="symbol"?l.setAttribute(d,""):l.removeAttribute(d);break;case"capture":case"download":v===!0?l.setAttribute(d,""):v!==!1&&v!=null&&typeof v!="function"&&typeof v!="symbol"?l.setAttribute(d,v):l.removeAttribute(d);break;case"cols":case"rows":case"size":case"span":v!=null&&typeof v!="function"&&typeof v!="symbol"&&!isNaN(v)&&1<=v?l.setAttribute(d,v):l.removeAttribute(d);break;case"rowSpan":case"start":v==null||typeof v=="function"||typeof v=="symbol"||isNaN(v)?l.removeAttribute(d):l.setAttribute(d,v);break;case"popover":xn("beforetoggle",l),xn("toggle",l),Ua(l,"popover",v);break;case"xlinkActuate":ni(l,"http://www.w3.org/1999/xlink","xlink:actuate",v);break;case"xlinkArcrole":ni(l,"http://www.w3.org/1999/xlink","xlink:arcrole",v);break;case"xlinkRole":ni(l,"http://www.w3.org/1999/xlink","xlink:role",v);break;case"xlinkShow":ni(l,"http://www.w3.org/1999/xlink","xlink:show",v);break;case"xlinkTitle":ni(l,"http://www.w3.org/1999/xlink","xlink:title",v);break;case"xlinkType":ni(l,"http://www.w3.org/1999/xlink","xlink:type",v);break;case"xmlBase":ni(l,"http://www.w3.org/XML/1998/namespace","xml:base",v);break;case"xmlLang":ni(l,"http://www.w3.org/XML/1998/namespace","xml:lang",v);break;case"xmlSpace":ni(l,"http://www.w3.org/XML/1998/namespace","xml:space",v);break;case"is":Ua(l,"is",v);break;case"innerText":case"textContent":break;default:(!(2<d.length)||d[0]!=="o"&&d[0]!=="O"||d[1]!=="n"&&d[1]!=="N")&&(d=Ro.get(d)||d,Ua(l,d,v))}}function Em(l,c,d,v,w,I){switch(d){case"style":fu(l,v,I);break;case"dangerouslySetInnerHTML":if(v!=null){if(typeof v!="object"||!("__html"in v))throw Error(r(61));if(d=v.__html,d!=null){if(w.children!=null)throw Error(r(60));l.innerHTML=d}}break;case"children":typeof v=="string"?ga(l,v):(typeof v=="number"||typeof v=="bigint")&&ga(l,""+v);break;case"onScroll":v!=null&&xn("scroll",l);break;case"onScrollEnd":v!=null&&xn("scrollend",l);break;case"onClick":v!=null&&(l.onclick=up);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!So.hasOwnProperty(d))e:{if(d[0]==="o"&&d[1]==="n"&&(w=d.endsWith("Capture"),c=d.slice(2,w?d.length-7:void 0),I=l[Gn]||null,I=I!=null?I[d]:null,typeof I=="function"&&l.removeEventListener(c,I,w),typeof v=="function")){typeof I!="function"&&I!==null&&(d in l?l[d]=null:l.hasAttribute(d)&&l.removeAttribute(d)),l.addEventListener(c,v,w);break e}d in l?l[d]=v:v===!0?l.setAttribute(d,""):Ua(l,d,v)}}}function aa(l,c,d){switch(c){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":xn("error",l),xn("load",l);var v=!1,w=!1,I;for(I in d)if(d.hasOwnProperty(I)){var K=d[I];if(K!=null)switch(I){case"src":v=!0;break;case"srcSet":w=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,c));default:cr(l,c,I,K,d,null)}}w&&cr(l,c,"srcSet",d.srcSet,d,null),v&&cr(l,c,"src",d.src,d,null);return;case"input":xn("invalid",l);var le=I=K=w=null,ye=null,ke=null;for(v in d)if(d.hasOwnProperty(v)){var We=d[v];if(We!=null)switch(v){case"name":w=We;break;case"type":K=We;break;case"checked":ye=We;break;case"defaultChecked":ke=We;break;case"value":I=We;break;case"defaultValue":le=We;break;case"children":case"dangerouslySetInnerHTML":if(We!=null)throw Error(r(137,c));break;default:cr(l,c,v,We,d,null)}}Ko(l,I,le,ye,ke,K,w,!1),Yo(l);return;case"select":xn("invalid",l),v=K=I=null;for(w in d)if(d.hasOwnProperty(w)&&(le=d[w],le!=null))switch(w){case"value":I=le;break;case"defaultValue":K=le;break;case"multiple":v=le;default:cr(l,c,w,le,d,null)}c=I,d=K,l.multiple=!!v,c!=null?Za(l,!!v,c,!1):d!=null&&Za(l,!!v,d,!0);return;case"textarea":xn("invalid",l),I=w=v=null;for(K in d)if(d.hasOwnProperty(K)&&(le=d[K],le!=null))switch(K){case"value":v=le;break;case"defaultValue":w=le;break;case"children":I=le;break;case"dangerouslySetInnerHTML":if(le!=null)throw Error(r(91));break;default:cr(l,c,K,le,d,null)}Zo(l,v,w,I),Yo(l);return;case"option":for(ye in d)if(d.hasOwnProperty(ye)&&(v=d[ye],v!=null))switch(ye){case"selected":l.selected=v&&typeof v!="function"&&typeof v!="symbol";break;default:cr(l,c,ye,v,d,null)}return;case"dialog":xn("beforetoggle",l),xn("toggle",l),xn("cancel",l),xn("close",l);break;case"iframe":case"object":xn("load",l);break;case"video":case"audio":for(v=0;v<a1.length;v++)xn(a1[v],l);break;case"image":xn("error",l),xn("load",l);break;case"details":xn("toggle",l);break;case"embed":case"source":case"link":xn("error",l),xn("load",l);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ke in d)if(d.hasOwnProperty(ke)&&(v=d[ke],v!=null))switch(ke){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,c));default:cr(l,c,ke,v,d,null)}return;default:if(hu(c)){for(We in d)d.hasOwnProperty(We)&&(v=d[We],v!==void 0&&Em(l,c,We,v,d,void 0));return}}for(le in d)d.hasOwnProperty(le)&&(v=d[le],v!=null&&cr(l,c,le,v,d,null))}function uC(l,c,d,v){switch(c){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var w=null,I=null,K=null,le=null,ye=null,ke=null,We=null;for(je in d){var Ze=d[je];if(d.hasOwnProperty(je)&&Ze!=null)switch(je){case"checked":break;case"value":break;case"defaultValue":ye=Ze;default:v.hasOwnProperty(je)||cr(l,c,je,null,v,Ze)}}for(var Fe in v){var je=v[Fe];if(Ze=d[Fe],v.hasOwnProperty(Fe)&&(je!=null||Ze!=null))switch(Fe){case"type":I=je;break;case"name":w=je;break;case"checked":ke=je;break;case"defaultChecked":We=je;break;case"value":K=je;break;case"defaultValue":le=je;break;case"children":case"dangerouslySetInnerHTML":if(je!=null)throw Error(r(137,c));break;default:je!==Ze&&cr(l,c,Fe,je,v,Ze)}}Ci(l,K,le,ye,ke,We,I,w);return;case"select":je=K=le=Fe=null;for(I in d)if(ye=d[I],d.hasOwnProperty(I)&&ye!=null)switch(I){case"value":break;case"multiple":je=ye;default:v.hasOwnProperty(I)||cr(l,c,I,null,v,ye)}for(w in v)if(I=v[w],ye=d[w],v.hasOwnProperty(w)&&(I!=null||ye!=null))switch(w){case"value":Fe=I;break;case"defaultValue":le=I;break;case"multiple":K=I;default:I!==ye&&cr(l,c,w,I,v,ye)}c=le,d=K,v=je,Fe!=null?Za(l,!!d,Fe,!1):!!v!=!!d&&(c!=null?Za(l,!!d,c,!0):Za(l,!!d,d?[]:"",!1));return;case"textarea":je=Fe=null;for(le in d)if(w=d[le],d.hasOwnProperty(le)&&w!=null&&!v.hasOwnProperty(le))switch(le){case"value":break;case"children":break;default:cr(l,c,le,null,v,w)}for(K in v)if(w=v[K],I=d[K],v.hasOwnProperty(K)&&(w!=null||I!=null))switch(K){case"value":Fe=w;break;case"defaultValue":je=w;break;case"children":break;case"dangerouslySetInnerHTML":if(w!=null)throw Error(r(91));break;default:w!==I&&cr(l,c,K,w,v,I)}Bn(l,Fe,je);return;case"option":for(var Xt in d)if(Fe=d[Xt],d.hasOwnProperty(Xt)&&Fe!=null&&!v.hasOwnProperty(Xt))switch(Xt){case"selected":l.selected=!1;break;default:cr(l,c,Xt,null,v,Fe)}for(ye in v)if(Fe=v[ye],je=d[ye],v.hasOwnProperty(ye)&&Fe!==je&&(Fe!=null||je!=null))switch(ye){case"selected":l.selected=Fe&&typeof Fe!="function"&&typeof Fe!="symbol";break;default:cr(l,c,ye,Fe,v,je)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ut in d)Fe=d[Ut],d.hasOwnProperty(Ut)&&Fe!=null&&!v.hasOwnProperty(Ut)&&cr(l,c,Ut,null,v,Fe);for(ke in v)if(Fe=v[ke],je=d[ke],v.hasOwnProperty(ke)&&Fe!==je&&(Fe!=null||je!=null))switch(ke){case"children":case"dangerouslySetInnerHTML":if(Fe!=null)throw Error(r(137,c));break;default:cr(l,c,ke,Fe,v,je)}return;default:if(hu(c)){for(var fr in d)Fe=d[fr],d.hasOwnProperty(fr)&&Fe!==void 0&&!v.hasOwnProperty(fr)&&Em(l,c,fr,void 0,v,Fe);for(We in v)Fe=v[We],je=d[We],!v.hasOwnProperty(We)||Fe===je||Fe===void 0&&je===void 0||Em(l,c,We,Fe,v,je);return}}for(var Ne in d)Fe=d[Ne],d.hasOwnProperty(Ne)&&Fe!=null&&!v.hasOwnProperty(Ne)&&cr(l,c,Ne,null,v,Fe);for(Ze in v)Fe=v[Ze],je=d[Ze],!v.hasOwnProperty(Ze)||Fe===je||Fe==null&&je==null||cr(l,c,Ze,Fe,v,je)}var Sm=null,Cm=null;function cp(l){return l.nodeType===9?l:l.ownerDocument}function j_(l){switch(l){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function U_(l,c){if(l===0)switch(c){case"svg":return 1;case"math":return 2;default:return 0}return l===1&&c==="foreignObject"?0:l}function Tm(l,c){return l==="textarea"||l==="noscript"||typeof c.children=="string"||typeof c.children=="number"||typeof c.children=="bigint"||typeof c.dangerouslySetInnerHTML=="object"&&c.dangerouslySetInnerHTML!==null&&c.dangerouslySetInnerHTML.__html!=null}var Im=null;function cC(){var l=window.event;return l&&l.type==="popstate"?l===Im?!1:(Im=l,!0):(Im=null,!1)}var V_=typeof setTimeout=="function"?setTimeout:void 0,fC=typeof clearTimeout=="function"?clearTimeout:void 0,z_=typeof Promise=="function"?Promise:void 0,hC=typeof queueMicrotask=="function"?queueMicrotask:typeof z_<"u"?function(l){return z_.resolve(null).then(l).catch(dC)}:V_;function dC(l){setTimeout(function(){throw l})}function Lc(l){return l==="head"}function q_(l,c){var d=c,v=0,w=0;do{var I=d.nextSibling;if(l.removeChild(d),I&&I.nodeType===8)if(d=I.data,d==="/$"){if(0<v&&8>v){d=v;var K=l.ownerDocument;if(d&1&&s1(K.documentElement),d&2&&s1(K.body),d&4)for(d=K.head,s1(d),K=d.firstChild;K;){var le=K.nextSibling,ye=K.nodeName;K[Zi]||ye==="SCRIPT"||ye==="STYLE"||ye==="LINK"&&K.rel.toLowerCase()==="stylesheet"||d.removeChild(K),K=le}}if(w===0){l.removeChild(I),g1(c);return}w--}else d==="$"||d==="$?"||d==="$!"?w++:v=d.charCodeAt(0)-48;else v=0;d=I}while(d);g1(c)}function Rm(l){var c=l.firstChild;for(c&&c.nodeType===10&&(c=c.nextSibling);c;){var d=c;switch(c=c.nextSibling,d.nodeName){case"HTML":case"HEAD":case"BODY":Rm(d),pi(d);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(d.rel.toLowerCase()==="stylesheet")continue}l.removeChild(d)}}function pC(l,c,d,v){for(;l.nodeType===1;){var w=d;if(l.nodeName.toLowerCase()!==c.toLowerCase()){if(!v&&(l.nodeName!=="INPUT"||l.type!=="hidden"))break}else if(v){if(!l[Zi])switch(c){case"meta":if(!l.hasAttribute("itemprop"))break;return l;case"link":if(I=l.getAttribute("rel"),I==="stylesheet"&&l.hasAttribute("data-precedence"))break;if(I!==w.rel||l.getAttribute("href")!==(w.href==null||w.href===""?null:w.href)||l.getAttribute("crossorigin")!==(w.crossOrigin==null?null:w.crossOrigin)||l.getAttribute("title")!==(w.title==null?null:w.title))break;return l;case"style":if(l.hasAttribute("data-precedence"))break;return l;case"script":if(I=l.getAttribute("src"),(I!==(w.src==null?null:w.src)||l.getAttribute("type")!==(w.type==null?null:w.type)||l.getAttribute("crossorigin")!==(w.crossOrigin==null?null:w.crossOrigin))&&I&&l.hasAttribute("async")&&!l.hasAttribute("itemprop"))break;return l;default:return l}}else if(c==="input"&&l.type==="hidden"){var I=w.name==null?null:""+w.name;if(w.type==="hidden"&&l.getAttribute("name")===I)return l}else return l;if(l=Ys(l.nextSibling),l===null)break}return null}function gC(l,c,d){if(c==="")return null;for(;l.nodeType!==3;)if((l.nodeType!==1||l.nodeName!=="INPUT"||l.type!=="hidden")&&!d||(l=Ys(l.nextSibling),l===null))return null;return l}function Nm(l){return l.data==="$!"||l.data==="$?"&&l.ownerDocument.readyState==="complete"}function mC(l,c){var d=l.ownerDocument;if(l.data!=="$?"||d.readyState==="complete")c();else{var v=function(){c(),d.removeEventListener("DOMContentLoaded",v)};d.addEventListener("DOMContentLoaded",v),l._reactRetry=v}}function Ys(l){for(;l!=null;l=l.nextSibling){var c=l.nodeType;if(c===1||c===3)break;if(c===8){if(c=l.data,c==="$"||c==="$!"||c==="$?"||c==="F!"||c==="F")break;if(c==="/$")return null}}return l}var Om=null;function H_(l){l=l.previousSibling;for(var c=0;l;){if(l.nodeType===8){var d=l.data;if(d==="$"||d==="$!"||d==="$?"){if(c===0)return l;c--}else d==="/$"&&c++}l=l.previousSibling}return null}function G_(l,c,d){switch(c=cp(d),l){case"html":if(l=c.documentElement,!l)throw Error(r(452));return l;case"head":if(l=c.head,!l)throw Error(r(453));return l;case"body":if(l=c.body,!l)throw Error(r(454));return l;default:throw Error(r(451))}}function s1(l){for(var c=l.attributes;c.length;)l.removeAttributeNode(c[0]);pi(l)}var vs=new Map,W_=new Set;function fp(l){return typeof l.getRootNode=="function"?l.getRootNode():l.nodeType===9?l:l.ownerDocument}var Fu=z.d;z.d={f:vC,r:yC,D:xC,C:_C,L:wC,m:bC,X:EC,S:AC,M:SC};function vC(){var l=Fu.f(),c=np();return l||c}function yC(l){var c=Gr(l);c!==null&&c.tag===5&&c.type==="form"?Lf(c):Fu.r(l)}var Uh=typeof document>"u"?null:document;function $_(l,c,d){var v=Uh;if(v&&typeof c=="string"&&c){var w=En(c);w='link[rel="'+l+'"][href="'+w+'"]',typeof d=="string"&&(w+='[crossorigin="'+d+'"]'),W_.has(w)||(W_.add(w),l={rel:l,crossOrigin:d,href:c},v.querySelector(w)===null&&(c=v.createElement("link"),aa(c,"link",l),Mn(c),v.head.appendChild(c)))}}function xC(l){Fu.D(l),$_("dns-prefetch",l,null)}function _C(l,c){Fu.C(l,c),$_("preconnect",l,c)}function wC(l,c,d){Fu.L(l,c,d);var v=Uh;if(v&&l&&c){var w='link[rel="preload"][as="'+En(c)+'"]';c==="image"&&d&&d.imageSrcSet?(w+='[imagesrcset="'+En(d.imageSrcSet)+'"]',typeof d.imageSizes=="string"&&(w+='[imagesizes="'+En(d.imageSizes)+'"]')):w+='[href="'+En(l)+'"]';var I=w;switch(c){case"style":I=Vh(l);break;case"script":I=zh(l)}vs.has(I)||(l=h({rel:"preload",href:c==="image"&&d&&d.imageSrcSet?void 0:l,as:c},d),vs.set(I,l),v.querySelector(w)!==null||c==="style"&&v.querySelector(l1(I))||c==="script"&&v.querySelector(u1(I))||(c=v.createElement("link"),aa(c,"link",l),Mn(c),v.head.appendChild(c)))}}function bC(l,c){Fu.m(l,c);var d=Uh;if(d&&l){var v=c&&typeof c.as=="string"?c.as:"script",w='link[rel="modulepreload"][as="'+En(v)+'"][href="'+En(l)+'"]',I=w;switch(v){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":I=zh(l)}if(!vs.has(I)&&(l=h({rel:"modulepreload",href:l},c),vs.set(I,l),d.querySelector(w)===null)){switch(v){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(d.querySelector(u1(I)))return}v=d.createElement("link"),aa(v,"link",l),Mn(v),d.head.appendChild(v)}}}function AC(l,c,d){Fu.S(l,c,d);var v=Uh;if(v&&l){var w=sr(v).hoistableStyles,I=Vh(l);c=c||"default";var K=w.get(I);if(!K){var le={loading:0,preload:null};if(K=v.querySelector(l1(I)))le.loading=5;else{l=h({rel:"stylesheet",href:l,"data-precedence":c},d),(d=vs.get(I))&&Dm(l,d);var ye=K=v.createElement("link");Mn(ye),aa(ye,"link",l),ye._p=new Promise(function(ke,We){ye.onload=ke,ye.onerror=We}),ye.addEventListener("load",function(){le.loading|=1}),ye.addEventListener("error",function(){le.loading|=2}),le.loading|=4,hp(K,c,v)}K={type:"stylesheet",instance:K,count:1,state:le},w.set(I,K)}}}function EC(l,c){Fu.X(l,c);var d=Uh;if(d&&l){var v=sr(d).hoistableScripts,w=zh(l),I=v.get(w);I||(I=d.querySelector(u1(w)),I||(l=h({src:l,async:!0},c),(c=vs.get(w))&&Pm(l,c),I=d.createElement("script"),Mn(I),aa(I,"link",l),d.head.appendChild(I)),I={type:"script",instance:I,count:1,state:null},v.set(w,I))}}function SC(l,c){Fu.M(l,c);var d=Uh;if(d&&l){var v=sr(d).hoistableScripts,w=zh(l),I=v.get(w);I||(I=d.querySelector(u1(w)),I||(l=h({src:l,async:!0,type:"module"},c),(c=vs.get(w))&&Pm(l,c),I=d.createElement("script"),Mn(I),aa(I,"link",l),d.head.appendChild(I)),I={type:"script",instance:I,count:1,state:null},v.set(w,I))}}function X_(l,c,d,v){var w=(w=de.current)?fp(w):null;if(!w)throw Error(r(446));switch(l){case"meta":case"title":return null;case"style":return typeof d.precedence=="string"&&typeof d.href=="string"?(c=Vh(d.href),d=sr(w).hoistableStyles,v=d.get(c),v||(v={type:"style",instance:null,count:0,state:null},d.set(c,v)),v):{type:"void",instance:null,count:0,state:null};case"link":if(d.rel==="stylesheet"&&typeof d.href=="string"&&typeof d.precedence=="string"){l=Vh(d.href);var I=sr(w).hoistableStyles,K=I.get(l);if(K||(w=w.ownerDocument||w,K={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},I.set(l,K),(I=w.querySelector(l1(l)))&&!I._p&&(K.instance=I,K.state.loading=5),vs.has(l)||(d={rel:"preload",as:"style",href:d.href,crossOrigin:d.crossOrigin,integrity:d.integrity,media:d.media,hrefLang:d.hrefLang,referrerPolicy:d.referrerPolicy},vs.set(l,d),I||CC(w,l,d,K.state))),c&&v===null)throw Error(r(528,""));return K}if(c&&v!==null)throw Error(r(529,""));return null;case"script":return c=d.async,d=d.src,typeof d=="string"&&c&&typeof c!="function"&&typeof c!="symbol"?(c=zh(d),d=sr(w).hoistableScripts,v=d.get(c),v||(v={type:"script",instance:null,count:0,state:null},d.set(c,v)),v):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,l))}}function Vh(l){return'href="'+En(l)+'"'}function l1(l){return'link[rel="stylesheet"]['+l+"]"}function Y_(l){return h({},l,{"data-precedence":l.precedence,precedence:null})}function CC(l,c,d,v){l.querySelector('link[rel="preload"][as="style"]['+c+"]")?v.loading=1:(c=l.createElement("link"),v.preload=c,c.addEventListener("load",function(){return v.loading|=1}),c.addEventListener("error",function(){return v.loading|=2}),aa(c,"link",d),Mn(c),l.head.appendChild(c))}function zh(l){return'[src="'+En(l)+'"]'}function u1(l){return"script[async]"+l}function K_(l,c,d){if(c.count++,c.instance===null)switch(c.type){case"style":var v=l.querySelector('style[data-href~="'+En(d.href)+'"]');if(v)return c.instance=v,Mn(v),v;var w=h({},d,{"data-href":d.href,"data-precedence":d.precedence,href:null,precedence:null});return v=(l.ownerDocument||l).createElement("style"),Mn(v),aa(v,"style",w),hp(v,d.precedence,l),c.instance=v;case"stylesheet":w=Vh(d.href);var I=l.querySelector(l1(w));if(I)return c.state.loading|=4,c.instance=I,Mn(I),I;v=Y_(d),(w=vs.get(w))&&Dm(v,w),I=(l.ownerDocument||l).createElement("link"),Mn(I);var K=I;return K._p=new Promise(function(le,ye){K.onload=le,K.onerror=ye}),aa(I,"link",v),c.state.loading|=4,hp(I,d.precedence,l),c.instance=I;case"script":return I=zh(d.src),(w=l.querySelector(u1(I)))?(c.instance=w,Mn(w),w):(v=d,(w=vs.get(I))&&(v=h({},d),Pm(v,w)),l=l.ownerDocument||l,w=l.createElement("script"),Mn(w),aa(w,"link",v),l.head.appendChild(w),c.instance=w);case"void":return null;default:throw Error(r(443,c.type))}else c.type==="stylesheet"&&(c.state.loading&4)===0&&(v=c.instance,c.state.loading|=4,hp(v,d.precedence,l));return c.instance}function hp(l,c,d){for(var v=d.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),w=v.length?v[v.length-1]:null,I=w,K=0;K<v.length;K++){var le=v[K];if(le.dataset.precedence===c)I=le;else if(I!==w)break}I?I.parentNode.insertBefore(l,I.nextSibling):(c=d.nodeType===9?d.head:d,c.insertBefore(l,c.firstChild))}function Dm(l,c){l.crossOrigin==null&&(l.crossOrigin=c.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=c.referrerPolicy),l.title==null&&(l.title=c.title)}function Pm(l,c){l.crossOrigin==null&&(l.crossOrigin=c.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=c.referrerPolicy),l.integrity==null&&(l.integrity=c.integrity)}var dp=null;function Q_(l,c,d){if(dp===null){var v=new Map,w=dp=new Map;w.set(d,v)}else w=dp,v=w.get(d),v||(v=new Map,w.set(d,v));if(v.has(l))return v;for(v.set(l,null),d=d.getElementsByTagName(l),w=0;w<d.length;w++){var I=d[w];if(!(I[Zi]||I[Hn]||l==="link"&&I.getAttribute("rel")==="stylesheet")&&I.namespaceURI!=="http://www.w3.org/2000/svg"){var K=I.getAttribute(c)||"";K=l+K;var le=v.get(K);le?le.push(I):v.set(K,[I])}}return v}function Z_(l,c,d){l=l.ownerDocument||l,l.head.insertBefore(d,c==="title"?l.querySelector("head > title"):null)}function TC(l,c,d){if(d===1||c.itemProp!=null)return!1;switch(l){case"meta":case"title":return!0;case"style":if(typeof c.precedence!="string"||typeof c.href!="string"||c.href==="")break;return!0;case"link":if(typeof c.rel!="string"||typeof c.href!="string"||c.href===""||c.onLoad||c.onError)break;switch(c.rel){case"stylesheet":return l=c.disabled,typeof c.precedence=="string"&&l==null;default:return!0}case"script":if(c.async&&typeof c.async!="function"&&typeof c.async!="symbol"&&!c.onLoad&&!c.onError&&c.src&&typeof c.src=="string")return!0}return!1}function J_(l){return!(l.type==="stylesheet"&&(l.state.loading&3)===0)}var c1=null;function IC(){}function RC(l,c,d){if(c1===null)throw Error(r(475));var v=c1;if(c.type==="stylesheet"&&(typeof d.media!="string"||matchMedia(d.media).matches!==!1)&&(c.state.loading&4)===0){if(c.instance===null){var w=Vh(d.href),I=l.querySelector(l1(w));if(I){l=I._p,l!==null&&typeof l=="object"&&typeof l.then=="function"&&(v.count++,v=pp.bind(v),l.then(v,v)),c.state.loading|=4,c.instance=I,Mn(I);return}I=l.ownerDocument||l,d=Y_(d),(w=vs.get(w))&&Dm(d,w),I=I.createElement("link"),Mn(I);var K=I;K._p=new Promise(function(le,ye){K.onload=le,K.onerror=ye}),aa(I,"link",d),c.instance=I}v.stylesheets===null&&(v.stylesheets=new Map),v.stylesheets.set(c,l),(l=c.state.preload)&&(c.state.loading&3)===0&&(v.count++,c=pp.bind(v),l.addEventListener("load",c),l.addEventListener("error",c))}}function NC(){if(c1===null)throw Error(r(475));var l=c1;return l.stylesheets&&l.count===0&&Lm(l,l.stylesheets),0<l.count?function(c){var d=setTimeout(function(){if(l.stylesheets&&Lm(l,l.stylesheets),l.unsuspend){var v=l.unsuspend;l.unsuspend=null,v()}},6e4);return l.unsuspend=c,function(){l.unsuspend=null,clearTimeout(d)}}:null}function pp(){if(this.count--,this.count===0){if(this.stylesheets)Lm(this,this.stylesheets);else if(this.unsuspend){var l=this.unsuspend;this.unsuspend=null,l()}}}var gp=null;function Lm(l,c){l.stylesheets=null,l.unsuspend!==null&&(l.count++,gp=new Map,c.forEach(OC,l),gp=null,pp.call(l))}function OC(l,c){if(!(c.state.loading&4)){var d=gp.get(l);if(d)var v=d.get(null);else{d=new Map,gp.set(l,d);for(var w=l.querySelectorAll("link[data-precedence],style[data-precedence]"),I=0;I<w.length;I++){var K=w[I];(K.nodeName==="LINK"||K.getAttribute("media")!=="not all")&&(d.set(K.dataset.precedence,K),v=K)}v&&d.set(null,v)}w=c.instance,K=w.getAttribute("data-precedence"),I=d.get(K)||v,I===v&&d.set(null,w),d.set(K,w),this.count++,v=pp.bind(this),w.addEventListener("load",v),w.addEventListener("error",v),I?I.parentNode.insertBefore(w,I.nextSibling):(l=l.nodeType===9?l.head:l,l.insertBefore(w,l.firstChild)),c.state.loading|=4}}var f1={$$typeof:B,Provider:null,Consumer:null,_currentValue:te,_currentValue2:te,_threadCount:0};function DC(l,c,d,v,w,I,K,le){this.tag=1,this.containerInfo=l,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Lr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Lr(0),this.hiddenUpdates=Lr(null),this.identifierPrefix=v,this.onUncaughtError=w,this.onCaughtError=I,this.onRecoverableError=K,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=le,this.incompleteTransitions=new Map}function ew(l,c,d,v,w,I,K,le,ye,ke,We,Ze){return l=new DC(l,c,d,K,le,ye,ke,Ze),c=1,I===!0&&(c|=24),I=zi(3,null,null,c),l.current=I,I.stateNode=l,c=Ld(),c.refCount++,l.pooledCache=c,c.refCount++,I.memoizedState={element:v,isDehydrated:d,cache:c},we(I),l}function tw(l){return l?(l=vi,l):vi}function nw(l,c,d,v,w,I){w=tw(w),v.context===null?v.context=w:v.pendingContext=w,v=qe(c),v.payload={element:d},I=I===void 0?null:I,I!==null&&(v.callback=I),d=Qe(l,v,c),d!==null&&(Ho(d,l,c),$e(d,l,c))}function rw(l,c){if(l=l.memoizedState,l!==null&&l.dehydrated!==null){var d=l.retryLane;l.retryLane=d!==0&&d<c?d:c}}function km(l,c){rw(l,c),(l=l.alternate)&&rw(l,c)}function iw(l){if(l.tag===13){var c=Ms(l,67108864);c!==null&&Ho(c,l,67108864),km(l,67108864)}}var mp=!0;function PC(l,c,d,v){var w=U.T;U.T=null;var I=z.p;try{z.p=2,Mm(l,c,d,v)}finally{z.p=I,U.T=w}}function LC(l,c,d,v){var w=U.T;U.T=null;var I=z.p;try{z.p=8,Mm(l,c,d,v)}finally{z.p=I,U.T=w}}function Mm(l,c,d,v){if(mp){var w=Bm(v);if(w===null)Am(l,c,v,vp,d),ow(l,v);else if(MC(w,l,c,d,v))v.stopPropagation();else if(ow(l,v),c&4&&-1<kC.indexOf(l)){for(;w!==null;){var I=Gr(w);if(I!==null)switch(I.tag){case 3:if(I=I.stateNode,I.current.memoizedState.isDehydrated){var K=Yt(I.pendingLanes);if(K!==0){var le=I;for(le.pendingLanes|=2,le.entangledLanes|=2;K;){var ye=1<<31-xt(K);le.entanglements[1]|=ye,K&=~ye}ql(I),(tr&6)===0&&(ep=gt()+500,i1(0))}}break;case 13:le=Ms(I,2),le!==null&&Ho(le,I,2),np(),km(I,2)}if(I=Bm(v),I===null&&Am(l,c,v,vp,d),I===w)break;w=I}w!==null&&v.stopPropagation()}else Am(l,c,v,null,d)}}function Bm(l){return l=Jn(l),Fm(l)}var vp=null;function Fm(l){if(vp=null,l=ei(l),l!==null){var c=a(l);if(c===null)l=null;else{var d=c.tag;if(d===13){if(l=o(c),l!==null)return l;l=null}else if(d===3){if(c.stateNode.current.memoizedState.isDehydrated)return c.tag===3?c.stateNode.containerInfo:null;l=null}else c!==l&&(l=null)}}return vp=l,null}function aw(l){switch(l){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(lt()){case Xe:return 2;case it:return 8;case at:case ot:return 32;case ct:return 268435456;default:return 32}default:return 32}}var jm=!1,kc=null,Mc=null,Bc=null,h1=new Map,d1=new Map,Fc=[],kC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function ow(l,c){switch(l){case"focusin":case"focusout":kc=null;break;case"dragenter":case"dragleave":Mc=null;break;case"mouseover":case"mouseout":Bc=null;break;case"pointerover":case"pointerout":h1.delete(c.pointerId);break;case"gotpointercapture":case"lostpointercapture":d1.delete(c.pointerId)}}function p1(l,c,d,v,w,I){return l===null||l.nativeEvent!==I?(l={blockedOn:c,domEventName:d,eventSystemFlags:v,nativeEvent:I,targetContainers:[w]},c!==null&&(c=Gr(c),c!==null&&iw(c)),l):(l.eventSystemFlags|=v,c=l.targetContainers,w!==null&&c.indexOf(w)===-1&&c.push(w),l)}function MC(l,c,d,v,w){switch(c){case"focusin":return kc=p1(kc,l,c,d,v,w),!0;case"dragenter":return Mc=p1(Mc,l,c,d,v,w),!0;case"mouseover":return Bc=p1(Bc,l,c,d,v,w),!0;case"pointerover":var I=w.pointerId;return h1.set(I,p1(h1.get(I)||null,l,c,d,v,w)),!0;case"gotpointercapture":return I=w.pointerId,d1.set(I,p1(d1.get(I)||null,l,c,d,v,w)),!0}return!1}function sw(l){var c=ei(l.target);if(c!==null){var d=a(c);if(d!==null){if(c=d.tag,c===13){if(c=o(d),c!==null){l.blockedOn=c,ja(l.priority,function(){if(d.tag===13){var v=qo();v=Ei(v);var w=Ms(d,v);w!==null&&Ho(w,d,v),km(d,v)}});return}}else if(c===3&&d.stateNode.current.memoizedState.isDehydrated){l.blockedOn=d.tag===3?d.stateNode.containerInfo:null;return}}}l.blockedOn=null}function yp(l){if(l.blockedOn!==null)return!1;for(var c=l.targetContainers;0<c.length;){var d=Bm(l.nativeEvent);if(d===null){d=l.nativeEvent;var v=new d.constructor(d.type,d);Ja=v,d.target.dispatchEvent(v),Ja=null}else return c=Gr(d),c!==null&&iw(c),l.blockedOn=d,!1;c.shift()}return!0}function lw(l,c,d){yp(l)&&d.delete(c)}function BC(){jm=!1,kc!==null&&yp(kc)&&(kc=null),Mc!==null&&yp(Mc)&&(Mc=null),Bc!==null&&yp(Bc)&&(Bc=null),h1.forEach(lw),d1.forEach(lw)}function xp(l,c){l.blockedOn===c&&(l.blockedOn=null,jm||(jm=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,BC)))}var _p=null;function uw(l){_p!==l&&(_p=l,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){_p===l&&(_p=null);for(var c=0;c<l.length;c+=3){var d=l[c],v=l[c+1],w=l[c+2];if(typeof v!="function"){if(Fm(v||d)===null)continue;break}var I=Gr(d);I!==null&&(l.splice(c,3),c-=3,ps(I,{pending:!0,data:w,method:d.method,action:v},v,w))}}))}function g1(l){function c(ye){return xp(ye,l)}kc!==null&&xp(kc,l),Mc!==null&&xp(Mc,l),Bc!==null&&xp(Bc,l),h1.forEach(c),d1.forEach(c);for(var d=0;d<Fc.length;d++){var v=Fc[d];v.blockedOn===l&&(v.blockedOn=null)}for(;0<Fc.length&&(d=Fc[0],d.blockedOn===null);)sw(d),d.blockedOn===null&&Fc.shift();if(d=(l.ownerDocument||l).$$reactFormReplay,d!=null)for(v=0;v<d.length;v+=3){var w=d[v],I=d[v+1],K=w[Gn]||null;if(typeof I=="function")K||uw(d);else if(K){var le=null;if(I&&I.hasAttribute("formAction")){if(w=I,K=I[Gn]||null)le=K.formAction;else if(Fm(w)!==null)continue}else le=K.action;typeof le=="function"?d[v+1]=le:(d.splice(v,3),v-=3),uw(d)}}}function Um(l){this._internalRoot=l}wp.prototype.render=Um.prototype.render=function(l){var c=this._internalRoot;if(c===null)throw Error(r(409));var d=c.current,v=qo();nw(d,v,l,c,null,null)},wp.prototype.unmount=Um.prototype.unmount=function(){var l=this._internalRoot;if(l!==null){this._internalRoot=null;var c=l.containerInfo;nw(l.current,2,null,l,null,null),np(),c[pr]=null}};function wp(l){this._internalRoot=l}wp.prototype.unstable_scheduleHydration=function(l){if(l){var c=dr();l={blockedOn:null,target:l,priority:c};for(var d=0;d<Fc.length&&c!==0&&c<Fc[d].priority;d++);Fc.splice(d,0,l),d===0&&sw(l)}};var cw=e.version;if(cw!=="19.1.0")throw Error(r(527,cw,"19.1.0"));z.findDOMNode=function(l){var c=l._reactInternals;if(c===void 0)throw typeof l.render=="function"?Error(r(188)):(l=Object.keys(l).join(","),Error(r(268,l)));return l=u(c),l=l!==null?f(l):null,l=l===null?null:l.stateNode,l};var FC={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:U,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var bp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!bp.isDisabled&&bp.supportsFiber)try{_t=bp.inject(FC),bt=bp}catch{}}return v1.createRoot=function(l,c){if(!i(l))throw Error(r(299));var d=!1,v="",w=Cx,I=Tx,K=Ix,le=null;return c!=null&&(c.unstable_strictMode===!0&&(d=!0),c.identifierPrefix!==void 0&&(v=c.identifierPrefix),c.onUncaughtError!==void 0&&(w=c.onUncaughtError),c.onCaughtError!==void 0&&(I=c.onCaughtError),c.onRecoverableError!==void 0&&(K=c.onRecoverableError),c.unstable_transitionCallbacks!==void 0&&(le=c.unstable_transitionCallbacks)),c=ew(l,1,!1,null,null,d,v,w,I,K,le,null),l[pr]=c.current,bm(l),new Um(c)},v1.hydrateRoot=function(l,c,d){if(!i(l))throw Error(r(299));var v=!1,w="",I=Cx,K=Tx,le=Ix,ye=null,ke=null;return d!=null&&(d.unstable_strictMode===!0&&(v=!0),d.identifierPrefix!==void 0&&(w=d.identifierPrefix),d.onUncaughtError!==void 0&&(I=d.onUncaughtError),d.onCaughtError!==void 0&&(K=d.onCaughtError),d.onRecoverableError!==void 0&&(le=d.onRecoverableError),d.unstable_transitionCallbacks!==void 0&&(ye=d.unstable_transitionCallbacks),d.formState!==void 0&&(ke=d.formState)),c=ew(l,1,!0,c,d??null,v,w,I,K,le,ye,ke),c.context=tw(null),d=c.current,v=qo(),v=Ei(v),w=qe(v),w.callback=null,Qe(d,w,v),d=v,c.current.lanes=d,or(c,d),ql(c),l[pr]=c.current,bm(l),new wp(c)},v1.version="19.1.0",v1}var _w;function V4(){if(_w)return qm.exports;_w=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),qm.exports=$C(),qm.exports}var XC=V4();const YC=U4(XC);var y1={},ww;function KC(){if(ww)return y1;ww=1,Object.defineProperty(y1,"__esModule",{value:!0}),y1.parse=o,y1.serialize=f;const n=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,t=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,r=/^[\u0020-\u003A\u003D-\u007E]*$/,i=Object.prototype.toString,a=(()=>{const g=function(){};return g.prototype=Object.create(null),g})();function o(g,m){const _=new a,b=g.length;if(b<2)return _;const T=(m==null?void 0:m.decode)||h;let S=0;do{const D=g.indexOf("=",S);if(D===-1)break;const B=g.indexOf(";",S),V=B===-1?b:B;if(D>V){S=g.lastIndexOf(";",D-1)+1;continue}const Y=s(g,S,D),q=u(g,D,Y),P=g.slice(Y,q);if(_[P]===void 0){let E=s(g,D+1,V),C=u(g,V,E);const M=T(g.slice(E,C));_[P]=M}S=V+1}while(S<b);return _}function s(g,m,_){do{const b=g.charCodeAt(m);if(b!==32&&b!==9)return m}while(++m<_);return _}function u(g,m,_){for(;m>_;){const b=g.charCodeAt(--m);if(b!==32&&b!==9)return m+1}return _}function f(g,m,_){const b=(_==null?void 0:_.encode)||encodeURIComponent;if(!n.test(g))throw new TypeError(`argument name is invalid: ${g}`);const T=b(m);if(!e.test(T))throw new TypeError(`argument val is invalid: ${m}`);let S=g+"="+T;if(!_)return S;if(_.maxAge!==void 0){if(!Number.isInteger(_.maxAge))throw new TypeError(`option maxAge is invalid: ${_.maxAge}`);S+="; Max-Age="+_.maxAge}if(_.domain){if(!t.test(_.domain))throw new TypeError(`option domain is invalid: ${_.domain}`);S+="; Domain="+_.domain}if(_.path){if(!r.test(_.path))throw new TypeError(`option path is invalid: ${_.path}`);S+="; Path="+_.path}if(_.expires){if(!p(_.expires)||!Number.isFinite(_.expires.valueOf()))throw new TypeError(`option expires is invalid: ${_.expires}`);S+="; Expires="+_.expires.toUTCString()}if(_.httpOnly&&(S+="; HttpOnly"),_.secure&&(S+="; Secure"),_.partitioned&&(S+="; Partitioned"),_.priority)switch(typeof _.priority=="string"?_.priority.toLowerCase():void 0){case"low":S+="; Priority=Low";break;case"medium":S+="; Priority=Medium";break;case"high":S+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${_.priority}`)}if(_.sameSite)switch(typeof _.sameSite=="string"?_.sameSite.toLowerCase():_.sameSite){case!0:case"strict":S+="; SameSite=Strict";break;case"lax":S+="; SameSite=Lax";break;case"none":S+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${_.sameSite}`)}return S}function h(g){if(g.indexOf("%")===-1)return g;try{return decodeURIComponent(g)}catch{return g}}function p(g){return i.call(g)==="[object Date]"}return y1}KC();var bw="popstate";function QC(n={}){function e(r,i){let{pathname:a,search:o,hash:s}=r.location;return Bv("",{pathname:a,search:o,hash:s},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function t(r,i){return typeof i=="string"?i:W1(i)}return JC(e,t,null,n)}function Ur(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function eu(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function ZC(){return Math.random().toString(36).substring(2,10)}function Aw(n,e){return{usr:n.state,key:n.key,idx:e}}function Bv(n,e,t=null,r){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?Ad(e):e,state:t,key:e&&e.key||r||ZC()}}function W1({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function Ad(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substring(r),n=n.substring(0,r)),n&&(e.pathname=n)}return e}function JC(n,e,t,r={}){let{window:i=document.defaultView,v5Compat:a=!1}=r,o=i.history,s="POP",u=null,f=h();f==null&&(f=0,o.replaceState({...o.state,idx:f},""));function h(){return(o.state||{idx:null}).idx}function p(){s="POP";let T=h(),S=T==null?null:T-f;f=T,u&&u({action:s,location:b.location,delta:S})}function g(T,S){s="PUSH";let D=Bv(b.location,T,S);f=h()+1;let B=Aw(D,f),V=b.createHref(D);try{o.pushState(B,"",V)}catch(Y){if(Y instanceof DOMException&&Y.name==="DataCloneError")throw Y;i.location.assign(V)}a&&u&&u({action:s,location:b.location,delta:1})}function m(T,S){s="REPLACE";let D=Bv(b.location,T,S);f=h();let B=Aw(D,f),V=b.createHref(D);o.replaceState(B,"",V),a&&u&&u({action:s,location:b.location,delta:0})}function _(T){return eT(T)}let b={get action(){return s},get location(){return n(i,o)},listen(T){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(bw,p),u=T,()=>{i.removeEventListener(bw,p),u=null}},createHref(T){return e(i,T)},createURL:_,encodeLocation(T){let S=_(T);return{pathname:S.pathname,search:S.search,hash:S.hash}},push:g,replace:m,go(T){return o.go(T)}};return b}function eT(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),Ur(t,"No window.location.(origin|href) available to create URL");let r=typeof n=="string"?n:W1(n);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=t+r),new URL(r,t)}function z4(n,e,t="/"){return tT(n,e,t,!1)}function tT(n,e,t,r){let i=typeof e=="string"?Ad(e):e,a=$u(i.pathname||"/",t);if(a==null)return null;let o=q4(n);nT(o);let s=null;for(let u=0;s==null&&u<o.length;++u){let f=dT(a);s=fT(o[u],f,r)}return s}function q4(n,e=[],t=[],r=""){let i=(a,o,s)=>{let u={relativePath:s===void 0?a.path||"":s,caseSensitive:a.caseSensitive===!0,childrenIndex:o,route:a};u.relativePath.startsWith("/")&&(Ur(u.relativePath.startsWith(r),`Absolute route path "${u.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),u.relativePath=u.relativePath.slice(r.length));let f=qu([r,u.relativePath]),h=t.concat(u);a.children&&a.children.length>0&&(Ur(a.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${f}".`),q4(a.children,e,h,f)),!(a.path==null&&!a.index)&&e.push({path:f,score:uT(f,a.index),routesMeta:h})};return n.forEach((a,o)=>{var s;if(a.path===""||!((s=a.path)!=null&&s.includes("?")))i(a,o);else for(let u of H4(a.path))i(a,o,u)}),e}function H4(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,i=t.endsWith("?"),a=t.replace(/\?$/,"");if(r.length===0)return i?[a,""]:[a];let o=H4(r.join("/")),s=[];return s.push(...o.map(u=>u===""?a:[a,u].join("/"))),i&&s.push(...o),s.map(u=>n.startsWith("/")&&u===""?"/":u)}function nT(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:cT(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}var rT=/^:[\w-]+$/,iT=3,aT=2,oT=1,sT=10,lT=-2,Ew=n=>n==="*";function uT(n,e){let t=n.split("/"),r=t.length;return t.some(Ew)&&(r+=lT),e&&(r+=aT),t.filter(i=>!Ew(i)).reduce((i,a)=>i+(rT.test(a)?iT:a===""?oT:sT),r)}function cT(n,e){return n.length===e.length&&n.slice(0,-1).every((r,i)=>r===e[i])?n[n.length-1]-e[e.length-1]:0}function fT(n,e,t=!1){let{routesMeta:r}=n,i={},a="/",o=[];for(let s=0;s<r.length;++s){let u=r[s],f=s===r.length-1,h=a==="/"?e:e.slice(a.length)||"/",p=og({path:u.relativePath,caseSensitive:u.caseSensitive,end:f},h),g=u.route;if(!p&&f&&t&&!r[r.length-1].route.index&&(p=og({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},h)),!p)return null;Object.assign(i,p.params),o.push({params:i,pathname:qu([a,p.pathname]),pathnameBase:vT(qu([a,p.pathnameBase])),route:g}),p.pathnameBase!=="/"&&(a=qu([a,p.pathnameBase]))}return o}function og(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=hT(n.path,n.caseSensitive,n.end),i=e.match(t);if(!i)return null;let a=i[0],o=a.replace(/(.)\/+$/,"$1"),s=i.slice(1);return{params:r.reduce((f,{paramName:h,isOptional:p},g)=>{if(h==="*"){let _=s[g]||"";o=a.slice(0,a.length-_.length).replace(/(.)\/+$/,"$1")}const m=s[g];return p&&!m?f[h]=void 0:f[h]=(m||"").replace(/%2F/g,"/"),f},{}),pathname:a,pathnameBase:o,pattern:n}}function hT(n,e=!1,t=!0){eu(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let r=[],i="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,s,u)=>(r.push({paramName:s,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),i+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":n!==""&&n!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function dT(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return eu(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function $u(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}function pT(n,e="/"){let{pathname:t,search:r="",hash:i=""}=typeof n=="string"?Ad(n):n;return{pathname:t?t.startsWith("/")?t:gT(t,e):e,search:yT(r),hash:xT(i)}}function gT(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(i=>{i===".."?t.length>1&&t.pop():i!=="."&&t.push(i)}),t.length>1?t.join("/"):"/"}function $m(n,e,t,r){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function mT(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function G4(n){let e=mT(n);return e.map((t,r)=>r===e.length-1?t.pathname:t.pathnameBase)}function W4(n,e,t,r=!1){let i;typeof n=="string"?i=Ad(n):(i={...n},Ur(!i.pathname||!i.pathname.includes("?"),$m("?","pathname","search",i)),Ur(!i.pathname||!i.pathname.includes("#"),$m("#","pathname","hash",i)),Ur(!i.search||!i.search.includes("#"),$m("#","search","hash",i)));let a=n===""||i.pathname==="",o=a?"/":i.pathname,s;if(o==null)s=t;else{let p=e.length-1;if(!r&&o.startsWith("..")){let g=o.split("/");for(;g[0]==="..";)g.shift(),p-=1;i.pathname=g.join("/")}s=p>=0?e[p]:"/"}let u=pT(i,s),f=o&&o!=="/"&&o.endsWith("/"),h=(a||o===".")&&t.endsWith("/");return!u.pathname.endsWith("/")&&(f||h)&&(u.pathname+="/"),u}var qu=n=>n.join("/").replace(/\/\/+/g,"/"),vT=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),yT=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,xT=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function _T(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}var $4=["POST","PUT","PATCH","DELETE"];new Set($4);var wT=["GET",...$4];new Set(wT);var Ed=ve.createContext(null);Ed.displayName="DataRouter";var Wg=ve.createContext(null);Wg.displayName="DataRouterState";var X4=ve.createContext({isTransitioning:!1});X4.displayName="ViewTransition";var bT=ve.createContext(new Map);bT.displayName="Fetchers";var AT=ve.createContext(null);AT.displayName="Await";var iu=ve.createContext(null);iu.displayName="Navigation";var s0=ve.createContext(null);s0.displayName="Location";var au=ve.createContext({outlet:null,matches:[],isDataRoute:!1});au.displayName="Route";var Wy=ve.createContext(null);Wy.displayName="RouteError";function ET(n,{relative:e}={}){Ur(l0(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:r}=ve.useContext(iu),{hash:i,pathname:a,search:o}=u0(n,{relative:e}),s=a;return t!=="/"&&(s=a==="/"?t:qu([t,a])),r.createHref({pathname:s,search:o,hash:i})}function l0(){return ve.useContext(s0)!=null}function sh(){return Ur(l0(),"useLocation() may be used only in the context of a <Router> component."),ve.useContext(s0).location}var Y4="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function K4(n){ve.useContext(iu).static||ve.useLayoutEffect(n)}function $y(){let{isDataRoute:n}=ve.useContext(au);return n?FT():ST()}function ST(){Ur(l0(),"useNavigate() may be used only in the context of a <Router> component.");let n=ve.useContext(Ed),{basename:e,navigator:t}=ve.useContext(iu),{matches:r}=ve.useContext(au),{pathname:i}=sh(),a=JSON.stringify(G4(r)),o=ve.useRef(!1);return K4(()=>{o.current=!0}),ve.useCallback((u,f={})=>{if(eu(o.current,Y4),!o.current)return;if(typeof u=="number"){t.go(u);return}let h=W4(u,JSON.parse(a),i,f.relative==="path");n==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:qu([e,h.pathname])),(f.replace?t.replace:t.push)(h,f.state,f)},[e,t,a,i,n])}ve.createContext(null);function CT(){let{matches:n}=ve.useContext(au),e=n[n.length-1];return e?e.params:{}}function u0(n,{relative:e}={}){let{matches:t}=ve.useContext(au),{pathname:r}=sh(),i=JSON.stringify(G4(t));return ve.useMemo(()=>W4(n,JSON.parse(i),r,e==="path"),[n,i,r,e])}function TT(n,e){return Q4(n,e)}function Q4(n,e,t,r){var S;Ur(l0(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=ve.useContext(iu),{matches:a}=ve.useContext(au),o=a[a.length-1],s=o?o.params:{},u=o?o.pathname:"/",f=o?o.pathnameBase:"/",h=o&&o.route;{let D=h&&h.path||"";Z4(u,!h||D.endsWith("*")||D.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${u}" (under <Route path="${D}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${D}"> to <Route path="${D==="/"?"*":`${D}/*`}">.`)}let p=sh(),g;if(e){let D=typeof e=="string"?Ad(e):e;Ur(f==="/"||((S=D.pathname)==null?void 0:S.startsWith(f)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${f}" but pathname "${D.pathname}" was given in the \`location\` prop.`),g=D}else g=p;let m=g.pathname||"/",_=m;if(f!=="/"){let D=f.replace(/^\//,"").split("/");_="/"+m.replace(/^\//,"").split("/").slice(D.length).join("/")}let b=z4(n,{pathname:_});eu(h||b!=null,`No routes matched location "${g.pathname}${g.search}${g.hash}" `),eu(b==null||b[b.length-1].route.element!==void 0||b[b.length-1].route.Component!==void 0||b[b.length-1].route.lazy!==void 0,`Matched leaf route at location "${g.pathname}${g.search}${g.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let T=DT(b&&b.map(D=>Object.assign({},D,{params:Object.assign({},s,D.params),pathname:qu([f,i.encodeLocation?i.encodeLocation(D.pathname).pathname:D.pathname]),pathnameBase:D.pathnameBase==="/"?f:qu([f,i.encodeLocation?i.encodeLocation(D.pathnameBase).pathname:D.pathnameBase])})),a,t,r);return e&&T?ve.createElement(s0.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...g},navigationType:"POP"}},T):T}function IT(){let n=BT(),e=_T(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},a={padding:"2px 4px",backgroundColor:r},o=null;return console.error("Error handled by React Router default ErrorBoundary:",n),o=ve.createElement(ve.Fragment,null,ve.createElement("p",null,"💿 Hey developer 👋"),ve.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",ve.createElement("code",{style:a},"ErrorBoundary")," or"," ",ve.createElement("code",{style:a},"errorElement")," prop on your route.")),ve.createElement(ve.Fragment,null,ve.createElement("h2",null,"Unexpected Application Error!"),ve.createElement("h3",{style:{fontStyle:"italic"}},e),t?ve.createElement("pre",{style:i},t):null,o)}var RT=ve.createElement(IT,null),NT=class extends ve.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){console.error("React Router caught the following error during render",n,e)}render(){return this.state.error!==void 0?ve.createElement(au.Provider,{value:this.props.routeContext},ve.createElement(Wy.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function OT({routeContext:n,match:e,children:t}){let r=ve.useContext(Ed);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),ve.createElement(au.Provider,{value:n},t)}function DT(n,e=[],t=null,r=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let i=n,a=t==null?void 0:t.errors;if(a!=null){let u=i.findIndex(f=>f.route.id&&(a==null?void 0:a[f.route.id])!==void 0);Ur(u>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),i=i.slice(0,Math.min(i.length,u+1))}let o=!1,s=-1;if(t)for(let u=0;u<i.length;u++){let f=i[u];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(s=u),f.route.id){let{loaderData:h,errors:p}=t,g=f.route.loader&&!h.hasOwnProperty(f.route.id)&&(!p||p[f.route.id]===void 0);if(f.route.lazy||g){o=!0,s>=0?i=i.slice(0,s+1):i=[i[0]];break}}}return i.reduceRight((u,f,h)=>{let p,g=!1,m=null,_=null;t&&(p=a&&f.route.id?a[f.route.id]:void 0,m=f.route.errorElement||RT,o&&(s<0&&h===0?(Z4("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),g=!0,_=null):s===h&&(g=!0,_=f.route.hydrateFallbackElement||null)));let b=e.concat(i.slice(0,h+1)),T=()=>{let S;return p?S=m:g?S=_:f.route.Component?S=ve.createElement(f.route.Component,null):f.route.element?S=f.route.element:S=u,ve.createElement(OT,{match:f,routeContext:{outlet:u,matches:b,isDataRoute:t!=null},children:S})};return t&&(f.route.ErrorBoundary||f.route.errorElement||h===0)?ve.createElement(NT,{location:t.location,revalidation:t.revalidation,component:m,error:p,children:T(),routeContext:{outlet:null,matches:b,isDataRoute:!0}}):T()},null)}function Xy(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function PT(n){let e=ve.useContext(Ed);return Ur(e,Xy(n)),e}function LT(n){let e=ve.useContext(Wg);return Ur(e,Xy(n)),e}function kT(n){let e=ve.useContext(au);return Ur(e,Xy(n)),e}function Yy(n){let e=kT(n),t=e.matches[e.matches.length-1];return Ur(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function MT(){return Yy("useRouteId")}function BT(){var r;let n=ve.useContext(Wy),e=LT("useRouteError"),t=Yy("useRouteError");return n!==void 0?n:(r=e.errors)==null?void 0:r[t]}function FT(){let{router:n}=PT("useNavigate"),e=Yy("useNavigate"),t=ve.useRef(!1);return K4(()=>{t.current=!0}),ve.useCallback(async(i,a={})=>{eu(t.current,Y4),t.current&&(typeof i=="number"?n.navigate(i):await n.navigate(i,{fromRouteId:e,...a}))},[n,e])}var Sw={};function Z4(n,e,t){!e&&!Sw[n]&&(Sw[n]=!0,eu(!1,t))}ve.memo(jT);function jT({routes:n,future:e,state:t}){return Q4(n,void 0,t,e)}function Js(n){Ur(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function UT({basename:n="/",children:e=null,location:t,navigationType:r="POP",navigator:i,static:a=!1}){Ur(!l0(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=n.replace(/^\/*/,"/"),s=ve.useMemo(()=>({basename:o,navigator:i,static:a,future:{}}),[o,i,a]);typeof t=="string"&&(t=Ad(t));let{pathname:u="/",search:f="",hash:h="",state:p=null,key:g="default"}=t,m=ve.useMemo(()=>{let _=$u(u,o);return _==null?null:{location:{pathname:_,search:f,hash:h,state:p,key:g},navigationType:r}},[o,u,f,h,p,g,r]);return eu(m!=null,`<Router basename="${o}"> is not able to match the URL "${u}${f}${h}" because it does not start with the basename, so the <Router> won't render anything.`),m==null?null:ve.createElement(iu.Provider,{value:s},ve.createElement(s0.Provider,{children:e,value:m}))}function VT({children:n,location:e}){return TT(Fv(n),e)}function Fv(n,e=[]){let t=[];return ve.Children.forEach(n,(r,i)=>{if(!ve.isValidElement(r))return;let a=[...e,i];if(r.type===ve.Fragment){t.push.apply(t,Fv(r.props.children,a));return}Ur(r.type===Js,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Ur(!r.props.index||!r.props.children,"An index route cannot have child routes.");let o={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Fv(r.props.children,a)),t.push(o)}),t}var Up="get",Vp="application/x-www-form-urlencoded";function $g(n){return n!=null&&typeof n.tagName=="string"}function zT(n){return $g(n)&&n.tagName.toLowerCase()==="button"}function qT(n){return $g(n)&&n.tagName.toLowerCase()==="form"}function HT(n){return $g(n)&&n.tagName.toLowerCase()==="input"}function GT(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function WT(n,e){return n.button===0&&(!e||e==="_self")&&!GT(n)}var Ap=null;function $T(){if(Ap===null)try{new FormData(document.createElement("form"),0),Ap=!1}catch{Ap=!0}return Ap}var XT=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Xm(n){return n!=null&&!XT.has(n)?(eu(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Vp}"`),null):n}function YT(n,e){let t,r,i,a,o;if(qT(n)){let s=n.getAttribute("action");r=s?$u(s,e):null,t=n.getAttribute("method")||Up,i=Xm(n.getAttribute("enctype"))||Vp,a=new FormData(n)}else if(zT(n)||HT(n)&&(n.type==="submit"||n.type==="image")){let s=n.form;if(s==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let u=n.getAttribute("formaction")||s.getAttribute("action");if(r=u?$u(u,e):null,t=n.getAttribute("formmethod")||s.getAttribute("method")||Up,i=Xm(n.getAttribute("formenctype"))||Xm(s.getAttribute("enctype"))||Vp,a=new FormData(s,n),!$T()){let{name:f,type:h,value:p}=n;if(h==="image"){let g=f?`${f}.`:"";a.append(`${g}x`,"0"),a.append(`${g}y`,"0")}else f&&a.append(f,p)}}else{if($g(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Up,r=null,i=Vp,o=n}return a&&i==="text/plain"&&(o=a,a=void 0),{action:r,method:t.toLowerCase(),encType:i,formData:a,body:o}}function Ky(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}async function KT(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function QT(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function ZT(n,e,t){let r=await Promise.all(n.map(async i=>{let a=e.routes[i.route.id];if(a){let o=await KT(a,t);return o.links?o.links():[]}return[]}));return nI(r.flat(1).filter(QT).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function Cw(n,e,t,r,i,a){let o=(u,f)=>t[f]?u.route.id!==t[f].route.id:!0,s=(u,f)=>{var h;return t[f].pathname!==u.pathname||((h=t[f].route.path)==null?void 0:h.endsWith("*"))&&t[f].params["*"]!==u.params["*"]};return a==="assets"?e.filter((u,f)=>o(u,f)||s(u,f)):a==="data"?e.filter((u,f)=>{var p;let h=r.routes[u.route.id];if(!h||!h.hasLoader)return!1;if(o(u,f)||s(u,f))return!0;if(u.route.shouldRevalidate){let g=u.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((p=t[0])==null?void 0:p.params)||{},nextUrl:new URL(n,window.origin),nextParams:u.params,defaultShouldRevalidate:!0});if(typeof g=="boolean")return g}return!0}):[]}function JT(n,e,{includeHydrateFallback:t}={}){return eI(n.map(r=>{let i=e.routes[r.route.id];if(!i)return[];let a=[i.module];return i.clientActionModule&&(a=a.concat(i.clientActionModule)),i.clientLoaderModule&&(a=a.concat(i.clientLoaderModule)),t&&i.hydrateFallbackModule&&(a=a.concat(i.hydrateFallbackModule)),i.imports&&(a=a.concat(i.imports)),a}).flat(1))}function eI(n){return[...new Set(n)]}function tI(n){let e={},t=Object.keys(n).sort();for(let r of t)e[r]=n[r];return e}function nI(n,e){let t=new Set;return new Set(e),n.reduce((r,i)=>{let a=JSON.stringify(tI(i));return t.has(a)||(t.add(a),r.push({key:a,link:i})),r},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var rI=new Set([100,101,204,205]);function iI(n,e){let t=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return t.pathname==="/"?t.pathname="_root.data":e&&$u(t.pathname,e)==="/"?t.pathname=`${e.replace(/\/$/,"")}/_root.data`:t.pathname=`${t.pathname.replace(/\/$/,"")}.data`,t}function J4(){let n=ve.useContext(Ed);return Ky(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function aI(){let n=ve.useContext(Wg);return Ky(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var Qy=ve.createContext(void 0);Qy.displayName="FrameworkContext";function eA(){let n=ve.useContext(Qy);return Ky(n,"You must render this element inside a <HydratedRouter> element"),n}function oI(n,e){let t=ve.useContext(Qy),[r,i]=ve.useState(!1),[a,o]=ve.useState(!1),{onFocus:s,onBlur:u,onMouseEnter:f,onMouseLeave:h,onTouchStart:p}=e,g=ve.useRef(null);ve.useEffect(()=>{if(n==="render"&&o(!0),n==="viewport"){let b=S=>{S.forEach(D=>{o(D.isIntersecting)})},T=new IntersectionObserver(b,{threshold:.5});return g.current&&T.observe(g.current),()=>{T.disconnect()}}},[n]),ve.useEffect(()=>{if(r){let b=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(b)}}},[r]);let m=()=>{i(!0)},_=()=>{i(!1),o(!1)};return t?n!=="intent"?[a,g,{}]:[a,g,{onFocus:x1(s,m),onBlur:x1(u,_),onMouseEnter:x1(f,m),onMouseLeave:x1(h,_),onTouchStart:x1(p,m)}]:[!1,g,{}]}function x1(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function sI({page:n,...e}){let{router:t}=J4(),r=ve.useMemo(()=>z4(t.routes,n,t.basename),[t.routes,n,t.basename]);return r?ve.createElement(uI,{page:n,matches:r,...e}):null}function lI(n){let{manifest:e,routeModules:t}=eA(),[r,i]=ve.useState([]);return ve.useEffect(()=>{let a=!1;return ZT(n,e,t).then(o=>{a||i(o)}),()=>{a=!0}},[n,e,t]),r}function uI({page:n,matches:e,...t}){let r=sh(),{manifest:i,routeModules:a}=eA(),{basename:o}=J4(),{loaderData:s,matches:u}=aI(),f=ve.useMemo(()=>Cw(n,e,u,i,r,"data"),[n,e,u,i,r]),h=ve.useMemo(()=>Cw(n,e,u,i,r,"assets"),[n,e,u,i,r]),p=ve.useMemo(()=>{if(n===r.pathname+r.search+r.hash)return[];let _=new Set,b=!1;if(e.forEach(S=>{var B;let D=i.routes[S.route.id];!D||!D.hasLoader||(!f.some(V=>V.route.id===S.route.id)&&S.route.id in s&&((B=a[S.route.id])!=null&&B.shouldRevalidate)||D.hasClientLoader?b=!0:_.add(S.route.id))}),_.size===0)return[];let T=iI(n,o);return b&&_.size>0&&T.searchParams.set("_routes",e.filter(S=>_.has(S.route.id)).map(S=>S.route.id).join(",")),[T.pathname+T.search]},[o,s,r,i,f,e,n,a]),g=ve.useMemo(()=>JT(h,i),[h,i]),m=lI(h);return ve.createElement(ve.Fragment,null,p.map(_=>ve.createElement("link",{key:_,rel:"prefetch",as:"fetch",href:_,...t})),g.map(_=>ve.createElement("link",{key:_,rel:"modulepreload",href:_,...t})),m.map(({key:_,link:b})=>ve.createElement("link",{key:_,...b})))}function cI(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var tA=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{tA&&(window.__reactRouterVersion="7.6.2")}catch{}function fI({basename:n,children:e,window:t}){let r=ve.useRef();r.current==null&&(r.current=QC({window:t,v5Compat:!0}));let i=r.current,[a,o]=ve.useState({action:i.action,location:i.location}),s=ve.useCallback(u=>{ve.startTransition(()=>o(u))},[o]);return ve.useLayoutEffect(()=>i.listen(s),[i,s]),ve.createElement(UT,{basename:n,children:e,location:a.location,navigationType:a.action,navigator:i})}var nA=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,xr=ve.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:i,reloadDocument:a,replace:o,state:s,target:u,to:f,preventScrollReset:h,viewTransition:p,...g},m){let{basename:_}=ve.useContext(iu),b=typeof f=="string"&&nA.test(f),T,S=!1;if(typeof f=="string"&&b&&(T=f,tA))try{let C=new URL(window.location.href),M=f.startsWith("//")?new URL(C.protocol+f):new URL(f),R=$u(M.pathname,_);M.origin===C.origin&&R!=null?f=R+M.search+M.hash:S=!0}catch{eu(!1,`<Link to="${f}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let D=ET(f,{relative:i}),[B,V,Y]=oI(r,g),q=gI(f,{replace:o,state:s,target:u,preventScrollReset:h,relative:i,viewTransition:p});function P(C){e&&e(C),C.defaultPrevented||q(C)}let E=ve.createElement("a",{...g,...Y,href:T||D,onClick:S||a?e:P,ref:cI(m,V),target:u,"data-discover":!b&&t==="render"?"true":void 0});return B&&!b?ve.createElement(ve.Fragment,null,E,ve.createElement(sI,{page:D})):E});xr.displayName="Link";var hI=ve.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:i=!1,style:a,to:o,viewTransition:s,children:u,...f},h){let p=u0(o,{relative:f.relative}),g=sh(),m=ve.useContext(Wg),{navigator:_,basename:b}=ve.useContext(iu),T=m!=null&&_I(p)&&s===!0,S=_.encodeLocation?_.encodeLocation(p).pathname:p.pathname,D=g.pathname,B=m&&m.navigation&&m.navigation.location?m.navigation.location.pathname:null;t||(D=D.toLowerCase(),B=B?B.toLowerCase():null,S=S.toLowerCase()),B&&b&&(B=$u(B,b)||B);const V=S!=="/"&&S.endsWith("/")?S.length-1:S.length;let Y=D===S||!i&&D.startsWith(S)&&D.charAt(V)==="/",q=B!=null&&(B===S||!i&&B.startsWith(S)&&B.charAt(S.length)==="/"),P={isActive:Y,isPending:q,isTransitioning:T},E=Y?e:void 0,C;typeof r=="function"?C=r(P):C=[r,Y?"active":null,q?"pending":null,T?"transitioning":null].filter(Boolean).join(" ");let M=typeof a=="function"?a(P):a;return ve.createElement(xr,{...f,"aria-current":E,className:C,ref:h,style:M,to:o,viewTransition:s},typeof u=="function"?u(P):u)});hI.displayName="NavLink";var dI=ve.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:r,replace:i,state:a,method:o=Up,action:s,onSubmit:u,relative:f,preventScrollReset:h,viewTransition:p,...g},m)=>{let _=yI(),b=xI(s,{relative:f}),T=o.toLowerCase()==="get"?"get":"post",S=typeof s=="string"&&nA.test(s),D=B=>{if(u&&u(B),B.defaultPrevented)return;B.preventDefault();let V=B.nativeEvent.submitter,Y=(V==null?void 0:V.getAttribute("formmethod"))||o;_(V||B.currentTarget,{fetcherKey:e,method:Y,navigate:t,replace:i,state:a,relative:f,preventScrollReset:h,viewTransition:p})};return ve.createElement("form",{ref:m,method:T,action:b,onSubmit:r?u:D,...g,"data-discover":!S&&n==="render"?"true":void 0})});dI.displayName="Form";function pI(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function rA(n){let e=ve.useContext(Ed);return Ur(e,pI(n)),e}function gI(n,{target:e,replace:t,state:r,preventScrollReset:i,relative:a,viewTransition:o}={}){let s=$y(),u=sh(),f=u0(n,{relative:a});return ve.useCallback(h=>{if(WT(h,e)){h.preventDefault();let p=t!==void 0?t:W1(u)===W1(f);s(n,{replace:p,state:r,preventScrollReset:i,relative:a,viewTransition:o})}},[u,s,f,t,r,e,n,i,a,o])}var mI=0,vI=()=>`__${String(++mI)}__`;function yI(){let{router:n}=rA("useSubmit"),{basename:e}=ve.useContext(iu),t=MT();return ve.useCallback(async(r,i={})=>{let{action:a,method:o,encType:s,formData:u,body:f}=YT(r,e);if(i.navigate===!1){let h=i.fetcherKey||vI();await n.fetch(h,t,i.action||a,{preventScrollReset:i.preventScrollReset,formData:u,body:f,formMethod:i.method||o,formEncType:i.encType||s,flushSync:i.flushSync})}else await n.navigate(i.action||a,{preventScrollReset:i.preventScrollReset,formData:u,body:f,formMethod:i.method||o,formEncType:i.encType||s,replace:i.replace,state:i.state,fromRouteId:t,flushSync:i.flushSync,viewTransition:i.viewTransition})},[n,e,t])}function xI(n,{relative:e}={}){let{basename:t}=ve.useContext(iu),r=ve.useContext(au);Ur(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),a={...u0(n||".",{relative:e})},o=sh();if(n==null){a.search=o.search;let s=new URLSearchParams(a.search),u=s.getAll("index");if(u.some(h=>h==="")){s.delete("index"),u.filter(p=>p).forEach(p=>s.append("index",p));let h=s.toString();a.search=h?`?${h}`:""}}return(!n||n===".")&&i.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(a.pathname=a.pathname==="/"?t:qu([t,a.pathname])),W1(a)}function _I(n,e={}){let t=ve.useContext(X4);Ur(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=rA("useViewTransitionState"),i=u0(n,{relative:e.relative});if(!t.isTransitioning)return!1;let a=$u(t.currentLocation.pathname,r)||t.currentLocation.pathname,o=$u(t.nextLocation.pathname,r)||t.nextLocation.pathname;return og(i.pathname,o)!=null||og(i.pathname,a)!=null}[...rI];const wI=()=>{};var Tw={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iA=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},bI=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const a=n[t++];e[r++]=String.fromCharCode((i&31)<<6|a&63)}else if(i>239&&i<365){const a=n[t++],o=n[t++],s=n[t++],u=((i&7)<<18|(a&63)<<12|(o&63)<<6|s&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const a=n[t++],o=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(a&63)<<6|o&63)}}return e.join("")},aA={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const a=n[i],o=i+1<n.length,s=o?n[i+1]:0,u=i+2<n.length,f=u?n[i+2]:0,h=a>>2,p=(a&3)<<4|s>>4;let g=(s&15)<<2|f>>6,m=f&63;u||(m=64,o||(g=64)),r.push(t[h],t[p],t[g],t[m])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(iA(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):bI(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const a=t[n.charAt(i++)],s=i<n.length?t[n.charAt(i)]:0;++i;const f=i<n.length?t[n.charAt(i)]:64;++i;const p=i<n.length?t[n.charAt(i)]:64;if(++i,a==null||s==null||f==null||p==null)throw new AI;const g=a<<2|s>>4;if(r.push(g),f!==64){const m=s<<4&240|f>>2;if(r.push(m),p!==64){const _=f<<6&192|p;r.push(_)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class AI extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const EI=function(n){const e=iA(n);return aA.encodeByteArray(e,!0)},sg=function(n){return EI(n).replace(/\./g,"")},oA=function(n){try{return aA.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SI(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CI=()=>SI().__FIREBASE_DEFAULTS__,TI=()=>{if(typeof process>"u"||typeof Tw>"u")return;const n=Tw.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},II=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&oA(n[1]);return e&&JSON.parse(e)},Xg=()=>{try{return wI()||CI()||TI()||II()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},sA=n=>{var e,t;return(t=(e=Xg())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},lA=n=>{const e=sA(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},uA=()=>{var n;return(n=Xg())===null||n===void 0?void 0:n.config},cA=n=>{var e;return(e=Xg())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RI{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sd(n){return n.endsWith(".cloudworkstations.dev")}async function Zy(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fA(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,a=n.sub||n.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},n);return[sg(JSON.stringify(t)),sg(JSON.stringify(o)),""].join(".")}const B1={};function NI(){const n={prod:[],emulator:[]};for(const e of Object.keys(B1))B1[e]?n.emulator.push(e):n.prod.push(e);return n}function OI(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let Iw=!1;function Jy(n,e){if(typeof window>"u"||typeof document>"u"||!Sd(window.location.host)||B1[n]===e||B1[n]||Iw)return;B1[n]=e;function t(g){return`__firebase__banner__${g}`}const r="__firebase__banner",a=NI().prod.length>0;function o(){const g=document.getElementById(r);g&&g.remove()}function s(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function u(g,m){g.setAttribute("width","24"),g.setAttribute("id",m),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function f(){const g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{Iw=!0,o()},g}function h(g,m){g.setAttribute("id",m),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function p(){const g=OI(r),m=t("text"),_=document.getElementById(m)||document.createElement("span"),b=t("learnmore"),T=document.getElementById(b)||document.createElement("a"),S=t("preprendIcon"),D=document.getElementById(S)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){const B=g.element;s(B),h(T,b);const V=f();u(D,S),B.append(D,_,T,V),document.body.appendChild(B)}a?(_.innerText="Preview backend disconnected.",D.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(D.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,_.innerText="Preview backend running in this workspace."),_.setAttribute("id",m)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ba(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function DI(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ba())}function PI(){var n;const e=(n=Xg())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function LI(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function hA(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function kI(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function MI(){const n=Ba();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function BI(){return!PI()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function dA(){try{return typeof indexedDB=="object"}catch{return!1}}function pA(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var a;e(((a=i.error)===null||a===void 0?void 0:a.message)||"")}}catch(t){e(t)}})}function FI(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jI="FirebaseError";class As extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=jI,Object.setPrototypeOf(this,As.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,lh.prototype.create)}}class lh{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,a=this.errors[e],o=a?UI(a,r):"Error",s=`${this.serviceName}: ${o} (${i}).`;return new As(i,s,r)}}function UI(n,e){return n.replace(VI,(t,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const VI=/\{\$([^}]+)}/g;function zI(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function af(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const a=n[i],o=e[i];if(Rw(a)&&Rw(o)){if(!af(a,o))return!1}else if(a!==o)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function Rw(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c0(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function T1(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,a]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(a)}}),e}function I1(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function qI(n,e){const t=new HI(n,e);return t.subscribe.bind(t)}class HI{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");GI(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=Ym),i.error===void 0&&(i.error=Ym),i.complete===void 0&&(i.complete=Ym);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function GI(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Ym(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WI=1e3,$I=2,XI=4*60*60*1e3,YI=.5;function Nw(n,e=WI,t=$I){const r=e*Math.pow(t,n),i=Math.round(YI*r*(Math.random()-.5)*2);return Math.min(XI,r+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vr(n){return n&&n._delegate?n._delegate:n}class bs{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zf="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KI{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new RI;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(a){if(i)return null;throw a}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(ZI(e))try{this.getOrInitializeService({instanceIdentifier:zf})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const a=this.getOrInitializeService({instanceIdentifier:i});r.resolve(a)}catch{}}}}clearInstance(e=zf){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=zf){return this.instances.has(e)}getOptions(e=zf){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[a,o]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(a);r===s&&o.resolve(i)}return i}onInit(e,t){var r;const i=this.normalizeInstanceIdentifier(t),a=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;a.add(e),this.onInitCallbacks.set(i,a);const o=this.instances.get(i);return o&&e(o,i),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:QI(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=zf){return this.component?this.component.multipleInstances?e:zf:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function QI(n){return n===zf?void 0:n}function ZI(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JI{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new KI(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var wn;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(wn||(wn={}));const e7={debug:wn.DEBUG,verbose:wn.VERBOSE,info:wn.INFO,warn:wn.WARN,error:wn.ERROR,silent:wn.SILENT},t7=wn.INFO,n7={[wn.DEBUG]:"log",[wn.VERBOSE]:"log",[wn.INFO]:"info",[wn.WARN]:"warn",[wn.ERROR]:"error"},r7=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),i=n7[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Yg{constructor(e){this.name=e,this._logLevel=t7,this._logHandler=r7,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in wn))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?e7[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,wn.DEBUG,...e),this._logHandler(this,wn.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,wn.VERBOSE,...e),this._logHandler(this,wn.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,wn.INFO,...e),this._logHandler(this,wn.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,wn.WARN,...e),this._logHandler(this,wn.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,wn.ERROR,...e),this._logHandler(this,wn.ERROR,...e)}}const i7=(n,e)=>e.some(t=>n instanceof t);let Ow,Dw;function a7(){return Ow||(Ow=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function o7(){return Dw||(Dw=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const gA=new WeakMap,jv=new WeakMap,mA=new WeakMap,Km=new WeakMap,e5=new WeakMap;function s7(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",a),n.removeEventListener("error",o)},a=()=>{t(Zc(n.result)),i()},o=()=>{r(n.error),i()};n.addEventListener("success",a),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&gA.set(t,n)}).catch(()=>{}),e5.set(e,n),e}function l7(n){if(jv.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",a),n.removeEventListener("error",o),n.removeEventListener("abort",o)},a=()=>{t(),i()},o=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",a),n.addEventListener("error",o),n.addEventListener("abort",o)});jv.set(n,e)}let Uv={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return jv.get(n);if(e==="objectStoreNames")return n.objectStoreNames||mA.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Zc(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function u7(n){Uv=n(Uv)}function c7(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(Qm(this),e,...t);return mA.set(r,e.sort?e.sort():[e]),Zc(r)}:o7().includes(n)?function(...e){return n.apply(Qm(this),e),Zc(gA.get(this))}:function(...e){return Zc(n.apply(Qm(this),e))}}function f7(n){return typeof n=="function"?c7(n):(n instanceof IDBTransaction&&l7(n),i7(n,a7())?new Proxy(n,Uv):n)}function Zc(n){if(n instanceof IDBRequest)return s7(n);if(Km.has(n))return Km.get(n);const e=f7(n);return e!==n&&(Km.set(n,e),e5.set(e,n)),e}const Qm=n=>e5.get(n);function vA(n,e,{blocked:t,upgrade:r,blocking:i,terminated:a}={}){const o=indexedDB.open(n,e),s=Zc(o);return r&&o.addEventListener("upgradeneeded",u=>{r(Zc(o.result),u.oldVersion,u.newVersion,Zc(o.transaction),u)}),t&&o.addEventListener("blocked",u=>t(u.oldVersion,u.newVersion,u)),s.then(u=>{a&&u.addEventListener("close",()=>a()),i&&u.addEventListener("versionchange",f=>i(f.oldVersion,f.newVersion,f))}).catch(()=>{}),s}const h7=["get","getKey","getAll","getAllKeys","count"],d7=["put","add","delete","clear"],Zm=new Map;function Pw(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Zm.get(e))return Zm.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=d7.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||h7.includes(t)))return;const a=async function(o,...s){const u=this.transaction(o,i?"readwrite":"readonly");let f=u.store;return r&&(f=f.index(s.shift())),(await Promise.all([f[t](...s),i&&u.done]))[0]};return Zm.set(e,a),a}u7(n=>({...n,get:(e,t,r)=>Pw(e,t)||n.get(e,t,r),has:(e,t)=>!!Pw(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p7{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(g7(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function g7(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Vv="@firebase/app",Lw="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xu=new Yg("@firebase/app"),m7="@firebase/app-compat",v7="@firebase/analytics-compat",y7="@firebase/analytics",x7="@firebase/app-check-compat",_7="@firebase/app-check",w7="@firebase/auth",b7="@firebase/auth-compat",A7="@firebase/database",E7="@firebase/data-connect",S7="@firebase/database-compat",C7="@firebase/functions",T7="@firebase/functions-compat",I7="@firebase/installations",R7="@firebase/installations-compat",N7="@firebase/messaging",O7="@firebase/messaging-compat",D7="@firebase/performance",P7="@firebase/performance-compat",L7="@firebase/remote-config",k7="@firebase/remote-config-compat",M7="@firebase/storage",B7="@firebase/storage-compat",F7="@firebase/firestore",j7="@firebase/ai",U7="@firebase/firestore-compat",V7="firebase",z7="11.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zv="[DEFAULT]",q7={[Vv]:"fire-core",[m7]:"fire-core-compat",[y7]:"fire-analytics",[v7]:"fire-analytics-compat",[_7]:"fire-app-check",[x7]:"fire-app-check-compat",[w7]:"fire-auth",[b7]:"fire-auth-compat",[A7]:"fire-rtdb",[E7]:"fire-data-connect",[S7]:"fire-rtdb-compat",[C7]:"fire-fn",[T7]:"fire-fn-compat",[I7]:"fire-iid",[R7]:"fire-iid-compat",[N7]:"fire-fcm",[O7]:"fire-fcm-compat",[D7]:"fire-perf",[P7]:"fire-perf-compat",[L7]:"fire-rc",[k7]:"fire-rc-compat",[M7]:"fire-gcs",[B7]:"fire-gcs-compat",[F7]:"fire-fst",[U7]:"fire-fst-compat",[j7]:"fire-vertex","fire-js":"fire-js",[V7]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lg=new Map,H7=new Map,qv=new Map;function kw(n,e){try{n.container.addComponent(e)}catch(t){Xu.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function sl(n){const e=n.name;if(qv.has(e))return Xu.debug(`There were multiple attempts to register component ${e}.`),!1;qv.set(e,n);for(const t of lg.values())kw(t,n);for(const t of H7.values())kw(t,n);return!0}function pf(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Go(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G7={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Jc=new lh("app","Firebase",G7);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W7{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new bs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Jc.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uh=z7;function yA(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r=Object.assign({name:zv,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw Jc.create("bad-app-name",{appName:String(i)});if(t||(t=uA()),!t)throw Jc.create("no-options");const a=lg.get(i);if(a){if(af(t,a.options)&&af(r,a.config))return a;throw Jc.create("duplicate-app",{appName:i})}const o=new JI(i);for(const u of qv.values())o.addComponent(u);const s=new W7(t,r,o);return lg.set(i,s),s}function Kg(n=zv){const e=lg.get(n);if(!e&&n===zv&&uA())return yA();if(!e)throw Jc.create("no-app",{appName:n});return e}function xo(n,e,t){var r;let i=(r=q7[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);const a=i.match(/\s|\//),o=e.match(/\s|\//);if(a||o){const s=[`Unable to register library "${i}" with version "${e}":`];a&&s.push(`library name "${i}" contains illegal characters (whitespace or "/")`),a&&o&&s.push("and"),o&&s.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Xu.warn(s.join(" "));return}sl(new bs(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $7="firebase-heartbeat-database",X7=1,$1="firebase-heartbeat-store";let Jm=null;function xA(){return Jm||(Jm=vA($7,X7,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore($1)}catch(t){console.warn(t)}}}}).catch(n=>{throw Jc.create("idb-open",{originalErrorMessage:n.message})})),Jm}async function Y7(n){try{const t=(await xA()).transaction($1),r=await t.objectStore($1).get(_A(n));return await t.done,r}catch(e){if(e instanceof As)Xu.warn(e.message);else{const t=Jc.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Xu.warn(t.message)}}}async function Mw(n,e){try{const r=(await xA()).transaction($1,"readwrite");await r.objectStore($1).put(e,_A(n)),await r.done}catch(t){if(t instanceof As)Xu.warn(t.message);else{const r=Jc.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Xu.warn(r.message)}}}function _A(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K7=1024,Q7=30;class Z7{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new eR(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=Bw();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(o=>o.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:i}),this._heartbeatsCache.heartbeats.length>Q7){const o=tR(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Xu.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Bw(),{heartbeatsToSend:r,unsentEntries:i}=J7(this._heartbeatsCache.heartbeats),a=sg(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(t){return Xu.warn(t),""}}}function Bw(){return new Date().toISOString().substring(0,10)}function J7(n,e=K7){const t=[];let r=n.slice();for(const i of n){const a=t.find(o=>o.agent===i.agent);if(a){if(a.dates.push(i.date),Fw(t)>e){a.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),Fw(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class eR{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return dA()?pA().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await Y7(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return Mw(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return Mw(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Fw(n){return sg(JSON.stringify({version:2,heartbeats:n})).length}function tR(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nR(n){sl(new bs("platform-logger",e=>new p7(e),"PRIVATE")),sl(new bs("heartbeat",e=>new Z7(e),"PRIVATE")),xo(Vv,Lw,n),xo(Vv,Lw,"esm2017"),xo("fire-js","")}nR("");function t5(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function wA(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const rR=wA,bA=new lh("auth","Firebase",wA());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ug=new Yg("@firebase/auth");function iR(n,...e){ug.logLevel<=wn.WARN&&ug.warn(`Auth (${uh}): ${n}`,...e)}function zp(n,...e){ug.logLevel<=wn.ERROR&&ug.error(`Auth (${uh}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ll(n,...e){throw n5(n,...e)}function Yl(n,...e){return n5(n,...e)}function AA(n,e,t){const r=Object.assign(Object.assign({},rR()),{[e]:t});return new lh("auth","Firebase",r).create(e,{appName:n.name})}function Hu(n){return AA(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function n5(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return bA.create(n,...e)}function Wt(n,e,...t){if(!n)throw n5(e,...t)}function Uu(n){const e="INTERNAL ASSERTION FAILED: "+n;throw zp(e),new Error(e)}function Yu(n,e){n||Uu(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hv(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function aR(){return jw()==="http:"||jw()==="https:"}function jw(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oR(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(aR()||hA()||"connection"in navigator)?navigator.onLine:!0}function sR(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f0{constructor(e,t){this.shortDelay=e,this.longDelay=t,Yu(t>e,"Short delay should be less than long delay!"),this.isMobile=DI()||kI()}get(){return oR()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r5(n,e){Yu(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EA{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Uu("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Uu("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Uu("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lR={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uR=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],cR=new f0(3e4,6e4);function nc(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function rc(n,e,t,r,i={}){return SA(n,i,async()=>{let a={},o={};r&&(e==="GET"?o=r:a={body:JSON.stringify(r)});const s=c0(Object.assign({key:n.config.apiKey},o)).slice(1),u=await n._getAdditionalHeaders();u["Content-Type"]="application/json",n.languageCode&&(u["X-Firebase-Locale"]=n.languageCode);const f=Object.assign({method:e,headers:u},a);return LI()||(f.referrerPolicy="no-referrer"),n.emulatorConfig&&Sd(n.emulatorConfig.host)&&(f.credentials="include"),EA.fetch()(await CA(n,n.config.apiHost,t,s),f)})}async function SA(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},lR),e);try{const i=new hR(n),a=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();const o=await a.json();if("needConfirmation"in o)throw Ep(n,"account-exists-with-different-credential",o);if(a.ok&&!("errorMessage"in o))return o;{const s=a.ok?o.errorMessage:o.error.message,[u,f]=s.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ep(n,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw Ep(n,"email-already-in-use",o);if(u==="USER_DISABLED")throw Ep(n,"user-disabled",o);const h=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw AA(n,h,f);ll(n,h)}}catch(i){if(i instanceof As)throw i;ll(n,"network-request-failed",{message:String(i)})}}async function h0(n,e,t,r,i={}){const a=await rc(n,e,t,r,i);return"mfaPendingCredential"in a&&ll(n,"multi-factor-auth-required",{_serverResponse:a}),a}async function CA(n,e,t,r){const i=`${e}${t}?${r}`,a=n,o=a.config.emulator?r5(n.config,i):`${n.config.apiScheme}://${i}`;return uR.includes(t)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(o).toString():o}function fR(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class hR{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Yl(this.auth,"network-request-failed")),cR.get())})}}function Ep(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=Yl(n,e,r);return i.customData._tokenResponse=t,i}function Uw(n){return n!==void 0&&n.enterprise!==void 0}class dR{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return fR(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function pR(n,e){return rc(n,"GET","/v2/recaptchaConfig",nc(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gR(n,e){return rc(n,"POST","/v1/accounts:delete",e)}async function cg(n,e){return rc(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F1(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function mR(n,e=!1){const t=Vr(n),r=await t.getIdToken(e),i=i5(r);Wt(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const a=typeof i.firebase=="object"?i.firebase:void 0,o=a==null?void 0:a.sign_in_provider;return{claims:i,token:r,authTime:F1(ev(i.auth_time)),issuedAtTime:F1(ev(i.iat)),expirationTime:F1(ev(i.exp)),signInProvider:o||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function ev(n){return Number(n)*1e3}function i5(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return zp("JWT malformed, contained fewer than 3 sections"),null;try{const i=oA(t);return i?JSON.parse(i):(zp("Failed to decode base64 JWT payload"),null)}catch(i){return zp("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function Vw(n){const e=i5(n);return Wt(e,"internal-error"),Wt(typeof e.exp<"u","internal-error"),Wt(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function X1(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof As&&vR(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function vR({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yR{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gv{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=F1(this.lastLoginAt),this.creationTime=F1(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fg(n){var e;const t=n.auth,r=await n.getIdToken(),i=await X1(n,cg(t,{idToken:r}));Wt(i==null?void 0:i.users.length,t,"internal-error");const a=i.users[0];n._notifyReloadListener(a);const o=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?TA(a.providerUserInfo):[],s=_R(n.providerData,o),u=n.isAnonymous,f=!(n.email&&a.passwordHash)&&!(s!=null&&s.length),h=u?f:!1,p={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:s,metadata:new Gv(a.createdAt,a.lastLoginAt),isAnonymous:h};Object.assign(n,p)}async function xR(n){const e=Vr(n);await fg(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function _R(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function TA(n){return n.map(e=>{var{providerId:t}=e,r=t5(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wR(n,e){const t=await SA(n,{},async()=>{const r=c0({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:a}=n.config,o=await CA(n,i,"/v1/token",`key=${a}`),s=await n._getAdditionalHeaders();return s["Content-Type"]="application/x-www-form-urlencoded",EA.fetch()(o,{method:"POST",headers:s,body:r})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function bR(n,e){return rc(n,"POST","/v2/accounts:revokeToken",nc(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ad{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Wt(e.idToken,"internal-error"),Wt(typeof e.idToken<"u","internal-error"),Wt(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Vw(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Wt(e.length!==0,"internal-error");const t=Vw(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Wt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:i,expiresIn:a}=await wR(e,t);this.updateTokensAndExpiration(r,i,Number(a))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:a}=t,o=new ad;return r&&(Wt(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(Wt(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),a&&(Wt(typeof a=="number","internal-error",{appName:e}),o.expirationTime=a),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ad,this.toJSON())}_performRefresh(){return Uu("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uc(n,e){Wt(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class al{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,a=t5(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new yR(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new Gv(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await X1(this,this.stsTokenManager.getToken(this.auth,e));return Wt(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return mR(this,e)}reload(){return xR(this)}_assign(e){this!==e&&(Wt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new al(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Wt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await fg(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Go(this.auth.app))return Promise.reject(Hu(this.auth));const e=await this.getIdToken();return await X1(this,gR(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,a,o,s,u,f,h;const p=(r=t.displayName)!==null&&r!==void 0?r:void 0,g=(i=t.email)!==null&&i!==void 0?i:void 0,m=(a=t.phoneNumber)!==null&&a!==void 0?a:void 0,_=(o=t.photoURL)!==null&&o!==void 0?o:void 0,b=(s=t.tenantId)!==null&&s!==void 0?s:void 0,T=(u=t._redirectEventId)!==null&&u!==void 0?u:void 0,S=(f=t.createdAt)!==null&&f!==void 0?f:void 0,D=(h=t.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:B,emailVerified:V,isAnonymous:Y,providerData:q,stsTokenManager:P}=t;Wt(B&&P,e,"internal-error");const E=ad.fromJSON(this.name,P);Wt(typeof B=="string",e,"internal-error"),Uc(p,e.name),Uc(g,e.name),Wt(typeof V=="boolean",e,"internal-error"),Wt(typeof Y=="boolean",e,"internal-error"),Uc(m,e.name),Uc(_,e.name),Uc(b,e.name),Uc(T,e.name),Uc(S,e.name),Uc(D,e.name);const C=new al({uid:B,auth:e,email:g,emailVerified:V,displayName:p,isAnonymous:Y,photoURL:_,phoneNumber:m,tenantId:b,stsTokenManager:E,createdAt:S,lastLoginAt:D});return q&&Array.isArray(q)&&(C.providerData=q.map(M=>Object.assign({},M))),T&&(C._redirectEventId=T),C}static async _fromIdTokenResponse(e,t,r=!1){const i=new ad;i.updateFromServerResponse(t);const a=new al({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await fg(a),a}static async _fromGetAccountInfoResponse(e,t,r){const i=t.users[0];Wt(i.localId!==void 0,"internal-error");const a=i.providerUserInfo!==void 0?TA(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(a!=null&&a.length),s=new ad;s.updateFromIdToken(r);const u=new al({uid:i.localId,auth:e,stsTokenManager:s,isAnonymous:o}),f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new Gv(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(a!=null&&a.length)};return Object.assign(u,f),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zw=new Map;function Vu(n){Yu(n instanceof Function,"Expected a class definition");let e=zw.get(n);return e?(Yu(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,zw.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IA{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}IA.type="NONE";const qw=IA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qp(n,e,t){return`firebase:${n}:${e}:${t}`}class od{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:a}=this.auth;this.fullUserKey=qp(this.userKey,i.apiKey,a),this.fullPersistenceKey=qp("persistence",i.apiKey,a),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await cg(this.auth,{idToken:e}).catch(()=>{});return t?al._fromGetAccountInfoResponse(this.auth,t,e):null}return al._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new od(Vu(qw),e,r);const i=(await Promise.all(t.map(async f=>{if(await f._isAvailable())return f}))).filter(f=>f);let a=i[0]||Vu(qw);const o=qp(r,e.config.apiKey,e.name);let s=null;for(const f of t)try{const h=await f._get(o);if(h){let p;if(typeof h=="string"){const g=await cg(e,{idToken:h}).catch(()=>{});if(!g)break;p=await al._fromGetAccountInfoResponse(e,g,h)}else p=al._fromJSON(e,h);f!==a&&(s=p),a=f;break}}catch{}const u=i.filter(f=>f._shouldAllowMigration);return!a._shouldAllowMigration||!u.length?new od(a,e,r):(a=u[0],s&&await a._set(o,s.toJSON()),await Promise.all(t.map(async f=>{if(f!==a)try{await f._remove(o)}catch{}})),new od(a,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hw(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(DA(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(RA(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(LA(e))return"Blackberry";if(kA(e))return"Webos";if(NA(e))return"Safari";if((e.includes("chrome/")||OA(e))&&!e.includes("edge/"))return"Chrome";if(PA(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function RA(n=Ba()){return/firefox\//i.test(n)}function NA(n=Ba()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function OA(n=Ba()){return/crios\//i.test(n)}function DA(n=Ba()){return/iemobile/i.test(n)}function PA(n=Ba()){return/android/i.test(n)}function LA(n=Ba()){return/blackberry/i.test(n)}function kA(n=Ba()){return/webos/i.test(n)}function a5(n=Ba()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function AR(n=Ba()){var e;return a5(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function ER(){return MI()&&document.documentMode===10}function MA(n=Ba()){return a5(n)||PA(n)||kA(n)||LA(n)||/windows phone/i.test(n)||DA(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BA(n,e=[]){let t;switch(n){case"Browser":t=Hw(Ba());break;case"Worker":t=`${Hw(Ba())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${uh}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SR{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=a=>new Promise((o,s)=>{try{const u=e(a);o(u)}catch(u){s(u)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CR(n,e={}){return rc(n,"GET","/v2/passwordPolicy",nc(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TR=6;class IR{constructor(e){var t,r,i,a;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=o.minPasswordLength)!==null&&t!==void 0?t:TR,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(a=e.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,a,o,s;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(t=u.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(a=u.containsUppercaseLetter)!==null&&a!==void 0?a:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(s=u.containsNonAlphanumericCharacter)!==null&&s!==void 0?s:!0),u}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RR{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Gw(this),this.idTokenSubscription=new Gw(this),this.beforeStateQueue=new SR(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=bA,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Vu(t)),this._initializationPromise=this.queue(async()=>{var r,i,a;if(!this._deleted&&(this.persistenceManager=await od.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((a=this.currentUser)===null||a===void 0?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await cg(this,{idToken:e}),r=await al._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Go(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(s=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(s,s))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,s=i==null?void 0:i._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===s)&&(u!=null&&u.user)&&(i=u.user,a=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Wt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await fg(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=sR()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Go(this.app))return Promise.reject(Hu(this));const t=e?Vr(e):null;return t&&Wt(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Wt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Go(this.app)?Promise.reject(Hu(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Go(this.app)?Promise.reject(Hu(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Vu(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await CR(this),t=new IR(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new lh("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await bR(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Vu(e)||this._popupRedirectResolver;Wt(t,this,"argument-error"),this.redirectPersistenceManager=await od.create(this,[Vu(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const a=typeof t=="function"?t:t.next.bind(t);let o=!1;const s=this._isInitialized?Promise.resolve():this._initializationPromise;if(Wt(s,this,"internal-error"),s.then(()=>{o||a(this.currentUser)}),typeof t=="function"){const u=e.addObserver(t,r,i);return()=>{o=!0,u()}}else{const u=e.addObserver(t);return()=>{o=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Wt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=BA(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){var e;if(Go(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&iR(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function gf(n){return Vr(n)}class Gw{constructor(e){this.auth=e,this.observer=null,this.addObserver=qI(t=>this.observer=t)}get next(){return Wt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qg={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function NR(n){Qg=n}function FA(n){return Qg.loadJS(n)}function OR(){return Qg.recaptchaEnterpriseScript}function DR(){return Qg.gapiScript}function PR(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class LR{constructor(){this.enterprise=new kR}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class kR{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const MR="recaptcha-enterprise",jA="NO_RECAPTCHA";class BR{constructor(e){this.type=MR,this.auth=gf(e)}async verify(e="verify",t=!1){async function r(a){if(!t){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(o,s)=>{pR(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)s(new Error("recaptcha Enterprise site key undefined"));else{const f=new dR(u);return a.tenantId==null?a._agentRecaptchaConfig=f:a._tenantRecaptchaConfigs[a.tenantId]=f,o(f.siteKey)}}).catch(u=>{s(u)})})}function i(a,o,s){const u=window.grecaptcha;Uw(u)?u.enterprise.ready(()=>{u.enterprise.execute(a,{action:e}).then(f=>{o(f)}).catch(()=>{o(jA)})}):s(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new LR().execute("siteKey",{action:"verify"}):new Promise((a,o)=>{r(this.auth).then(s=>{if(!t&&Uw(window.grecaptcha))i(s,a,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let u=OR();u.length!==0&&(u+=s),FA(u).then(()=>{i(s,a,o)}).catch(f=>{o(f)})}}).catch(s=>{o(s)})})}}async function Ww(n,e,t,r=!1,i=!1){const a=new BR(n);let o;if(i)o=jA;else try{o=await a.verify(t)}catch{o=await a.verify(t,!0)}const s=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in s){const u=s.phoneEnrollmentInfo.phoneNumber,f=s.phoneEnrollmentInfo.recaptchaToken;Object.assign(s,{phoneEnrollmentInfo:{phoneNumber:u,recaptchaToken:f,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in s){const u=s.phoneSignInInfo.recaptchaToken;Object.assign(s,{phoneSignInInfo:{recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return s}return r?Object.assign(s,{captchaResp:o}):Object.assign(s,{captchaResponse:o}),Object.assign(s,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(s,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),s}async function hg(n,e,t,r,i){var a;if(!((a=n._getRecaptchaConfig())===null||a===void 0)&&a.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await Ww(n,e,t,t==="getOobCode");return r(n,o)}else return r(n,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const s=await Ww(n,e,t,t==="getOobCode");return r(n,s)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FR(n,e){const t=pf(n,"auth");if(t.isInitialized()){const i=t.getImmediate(),a=t.getOptions();if(af(a,e??{}))return i;ll(i,"already-initialized")}return t.initialize({options:e})}function jR(n,e){const t=(e==null?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(Vu);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function UR(n,e,t){const r=gf(n);Wt(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,a=UA(e),{host:o,port:s}=VR(e),u=s===null?"":`:${s}`,f={url:`${a}//${o}${u}/`},h=Object.freeze({host:o,port:s,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){Wt(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Wt(af(f,r.config.emulator)&&af(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=f,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,Sd(o)?(Zy(`${a}//${o}${u}`),Jy("Auth",!0)):zR()}function UA(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function VR(n){const e=UA(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const a=i[1];return{host:a,port:$w(r.substr(a.length+1))}}else{const[a,o]=r.split(":");return{host:a,port:$w(o)}}}function $w(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function zR(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o5{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Uu("not implemented")}_getIdTokenResponse(e){return Uu("not implemented")}_linkToIdToken(e,t){return Uu("not implemented")}_getReauthenticationResolver(e){return Uu("not implemented")}}async function qR(n,e){return rc(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HR(n,e){return h0(n,"POST","/v1/accounts:signInWithPassword",nc(n,e))}async function VA(n,e){return rc(n,"POST","/v1/accounts:sendOobCode",nc(n,e))}async function GR(n,e){return VA(n,e)}async function WR(n,e){return VA(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $R(n,e){return h0(n,"POST","/v1/accounts:signInWithEmailLink",nc(n,e))}async function XR(n,e){return h0(n,"POST","/v1/accounts:signInWithEmailLink",nc(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y1 extends o5{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new Y1(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new Y1(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return hg(e,t,"signInWithPassword",HR);case"emailLink":return $R(e,{email:this._email,oobCode:this._password});default:ll(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return hg(e,r,"signUpPassword",qR);case"emailLink":return XR(e,{idToken:t,email:this._email,oobCode:this._password});default:ll(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sd(n,e){return h0(n,"POST","/v1/accounts:signInWithIdp",nc(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YR="http://localhost";class eh extends o5{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new eh(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):ll("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=t,a=t5(t,["providerId","signInMethod"]);if(!r||!i)return null;const o=new eh(r,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}_getIdTokenResponse(e){const t=this.buildRequest();return sd(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,sd(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,sd(e,t)}buildRequest(){const e={requestUri:YR,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=c0(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KR(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function QR(n){const e=T1(I1(n)).link,t=e?T1(I1(e)).deep_link_id:null,r=T1(I1(n)).deep_link_id;return(r?T1(I1(r)).link:null)||r||t||e||n}class s5{constructor(e){var t,r,i,a,o,s;const u=T1(I1(e)),f=(t=u.apiKey)!==null&&t!==void 0?t:null,h=(r=u.oobCode)!==null&&r!==void 0?r:null,p=KR((i=u.mode)!==null&&i!==void 0?i:null);Wt(f&&h&&p,"argument-error"),this.apiKey=f,this.operation=p,this.code=h,this.continueUrl=(a=u.continueUrl)!==null&&a!==void 0?a:null,this.languageCode=(o=u.lang)!==null&&o!==void 0?o:null,this.tenantId=(s=u.tenantId)!==null&&s!==void 0?s:null}static parseLink(e){const t=QR(e);try{return new s5(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cd{constructor(){this.providerId=Cd.PROVIDER_ID}static credential(e,t){return Y1._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=s5.parseLink(t);return Wt(r,"argument-error"),Y1._fromEmailAndCode(e,r.code,r.tenantId)}}Cd.PROVIDER_ID="password";Cd.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Cd.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zA{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d0 extends zA{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wc extends d0{constructor(){super("facebook.com")}static credential(e){return eh._fromParams({providerId:Wc.PROVIDER_ID,signInMethod:Wc.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Wc.credentialFromTaggedObject(e)}static credentialFromError(e){return Wc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Wc.credential(e.oauthAccessToken)}catch{return null}}}Wc.FACEBOOK_SIGN_IN_METHOD="facebook.com";Wc.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $c extends d0{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return eh._fromParams({providerId:$c.PROVIDER_ID,signInMethod:$c.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return $c.credentialFromTaggedObject(e)}static credentialFromError(e){return $c.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return $c.credential(t,r)}catch{return null}}}$c.GOOGLE_SIGN_IN_METHOD="google.com";$c.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xc extends d0{constructor(){super("github.com")}static credential(e){return eh._fromParams({providerId:Xc.PROVIDER_ID,signInMethod:Xc.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Xc.credentialFromTaggedObject(e)}static credentialFromError(e){return Xc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Xc.credential(e.oauthAccessToken)}catch{return null}}}Xc.GITHUB_SIGN_IN_METHOD="github.com";Xc.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yc extends d0{constructor(){super("twitter.com")}static credential(e,t){return eh._fromParams({providerId:Yc.PROVIDER_ID,signInMethod:Yc.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Yc.credentialFromTaggedObject(e)}static credentialFromError(e){return Yc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return Yc.credential(t,r)}catch{return null}}}Yc.TWITTER_SIGN_IN_METHOD="twitter.com";Yc.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZR(n,e){return h0(n,"POST","/v1/accounts:signUp",nc(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class th{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){const a=await al._fromIdTokenResponse(e,r,i),o=Xw(r);return new th({user:a,providerId:o,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const i=Xw(r);return new th({user:e,providerId:i,_tokenResponse:r,operationType:t})}}function Xw(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dg extends As{constructor(e,t,r,i){var a;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,dg.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new dg(e,t,r,i)}}function qA(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?dg._fromErrorAndOperation(n,a,e,r):a})}async function JR(n,e,t=!1){const r=await X1(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return th._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eN(n,e,t=!1){const{auth:r}=n;if(Go(r.app))return Promise.reject(Hu(r));const i="reauthenticate";try{const a=await X1(n,qA(r,i,e,n),t);Wt(a.idToken,r,"internal-error");const o=i5(a.idToken);Wt(o,r,"internal-error");const{sub:s}=o;return Wt(n.uid===s,r,"user-mismatch"),th._forOperation(n,i,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&ll(r,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HA(n,e,t=!1){if(Go(n.app))return Promise.reject(Hu(n));const r="signIn",i=await qA(n,r,e),a=await th._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(a.user),a}async function tN(n,e){return HA(gf(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GA(n){const e=gf(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function nN(n,e,t){const r=gf(n);await hg(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",WR)}async function rN(n,e,t){if(Go(n.app))return Promise.reject(Hu(n));const r=gf(n),o=await hg(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",ZR).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&GA(n),u}),s=await th._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(s.user),s}function iN(n,e,t){return Go(n.app)?Promise.reject(Hu(n)):tN(Vr(n),Cd.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&GA(n),r})}async function aN(n,e){const t=Vr(n),i={requestType:"VERIFY_EMAIL",idToken:await n.getIdToken()},{email:a}=await GR(t.auth,i);a!==n.email&&await n.reload()}function oN(n,e,t,r){return Vr(n).onIdTokenChanged(e,t,r)}function sN(n,e,t){return Vr(n).beforeAuthStateChanged(e,t)}function lN(n,e,t,r){return Vr(n).onAuthStateChanged(e,t,r)}function uN(n){return Vr(n).signOut()}const pg="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WA{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(pg,"1"),this.storage.removeItem(pg),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cN=1e3,fN=10;class $A extends WA{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=MA(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),i=this.localCache[t];r!==i&&e(t,i,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((o,s,u)=>{this.notifyListeners(o,u)});return}const r=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!t&&this.localCache[r]===o||this.notifyListeners(r,o)},a=this.storage.getItem(r);ER()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,fN):i()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},cN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}$A.type="LOCAL";const hN=$A;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XA extends WA{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}XA.type="SESSION";const YA=XA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dN(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zg{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;const r=new Zg(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:i,data:a}=t.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const s=Array.from(o).map(async f=>f(t.origin,a)),u=await dN(s);t.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:u})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Zg.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l5(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pN{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let a,o;return new Promise((s,u)=>{const f=l5("",20);i.port1.start();const h=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(p){const g=p;if(g.data.eventId===f)switch(g.data.status){case"ack":clearTimeout(h),a=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),s(g.data.response);break;default:clearTimeout(h),clearTimeout(a),u(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:f,data:t},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kl(){return window}function gN(n){Kl().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KA(){return typeof Kl().WorkerGlobalScope<"u"&&typeof Kl().importScripts=="function"}async function mN(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function vN(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function yN(){return KA()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QA="firebaseLocalStorageDb",xN=1,gg="firebaseLocalStorage",ZA="fbase_key";class p0{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Jg(n,e){return n.transaction([gg],e?"readwrite":"readonly").objectStore(gg)}function _N(){const n=indexedDB.deleteDatabase(QA);return new p0(n).toPromise()}function Wv(){const n=indexedDB.open(QA,xN);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(gg,{keyPath:ZA})}catch(i){t(i)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(gg)?e(r):(r.close(),await _N(),e(await Wv()))})})}async function Yw(n,e,t){const r=Jg(n,!0).put({[ZA]:e,value:t});return new p0(r).toPromise()}async function wN(n,e){const t=Jg(n,!1).get(e),r=await new p0(t).toPromise();return r===void 0?null:r.value}function Kw(n,e){const t=Jg(n,!0).delete(e);return new p0(t).toPromise()}const bN=800,AN=3;class JA{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Wv(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>AN)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return KA()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Zg._getInstance(yN()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await mN(),!this.activeServiceWorker)return;this.sender=new pN(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((t=r[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||vN()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Wv();return await Yw(e,pg,"1"),await Kw(e,pg),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>Yw(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>wN(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Kw(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const a=Jg(i,!1).getAll();return new p0(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:a}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(a)&&(this.notifyListeners(i,a),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),bN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}JA.type="LOCAL";const EN=JA;new f0(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SN(n,e){return e?Vu(e):(Wt(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u5 extends o5{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return sd(e,this._buildIdpRequest())}_linkToIdToken(e,t){return sd(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return sd(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function CN(n){return HA(n.auth,new u5(n),n.bypassAuthState)}function TN(n){const{auth:e,user:t}=n;return Wt(t,e,"internal-error"),eN(t,new u5(n),n.bypassAuthState)}async function IN(n){const{auth:e,user:t}=n;return Wt(t,e,"internal-error"),JR(t,new u5(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e6{constructor(e,t,r,i,a=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:i,tenantId:a,error:o,type:s}=e;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:t,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(s)(u))}catch(f){this.reject(f)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return CN;case"linkViaPopup":case"linkViaRedirect":return IN;case"reauthViaPopup":case"reauthViaRedirect":return TN;default:ll(this.auth,"internal-error")}}resolve(e){Yu(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Yu(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RN=new f0(2e3,1e4);class ed extends e6{constructor(e,t,r,i,a){super(e,t,i,a),this.provider=r,this.authWindow=null,this.pollId=null,ed.currentPopupAction&&ed.currentPopupAction.cancel(),ed.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Wt(e,this.auth,"internal-error"),e}async onExecution(){Yu(this.filter.length===1,"Popup operations only handle one event");const e=l5();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Yl(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Yl(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ed.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if(!((r=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Yl(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,RN.get())};e()}}ed.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NN="pendingRedirect",Hp=new Map;class ON extends e6{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=Hp.get(this.auth._key());if(!e){try{const r=await DN(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Hp.set(this.auth._key(),e)}return this.bypassAuthState||Hp.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function DN(n,e){const t=kN(e),r=LN(n);if(!await r._isAvailable())return!1;const i=await r._get(t)==="true";return await r._remove(t),i}function PN(n,e){Hp.set(n._key(),e)}function LN(n){return Vu(n._redirectPersistence)}function kN(n){return qp(NN,n.config.apiKey,n.name)}async function MN(n,e,t=!1){if(Go(n.app))return Promise.reject(Hu(n));const r=gf(n),i=SN(r,e),o=await new ON(r,i,t).execute();return o&&!t&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BN=10*60*1e3;class FN{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!jN(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!t6(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(Yl(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=BN&&this.cachedEventUids.clear(),this.cachedEventUids.has(Qw(e))}saveEventToCache(e){this.cachedEventUids.add(Qw(e)),this.lastProcessedEventTime=Date.now()}}function Qw(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function t6({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function jN(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return t6(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UN(n,e={}){return rc(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VN=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,zN=/^https?/;async function qN(n){if(n.config.emulator)return;const{authorizedDomains:e}=await UN(n);for(const t of e)try{if(HN(t))return}catch{}ll(n,"unauthorized-domain")}function HN(n){const e=Hv(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const o=new URL(n);return o.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&o.hostname===r}if(!zN.test(t))return!1;if(VN.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GN=new f0(3e4,6e4);function Zw(){const n=Kl().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function WN(n){return new Promise((e,t)=>{var r,i,a;function o(){Zw(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Zw(),t(Yl(n,"network-request-failed"))},timeout:GN.get()})}if(!((i=(r=Kl().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((a=Kl().gapi)===null||a===void 0)&&a.load)o();else{const s=PR("iframefcb");return Kl()[s]=()=>{gapi.load?o():t(Yl(n,"network-request-failed"))},FA(`${DR()}?onload=${s}`).catch(u=>t(u))}}).catch(e=>{throw Gp=null,e})}let Gp=null;function $N(n){return Gp=Gp||WN(n),Gp}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XN=new f0(5e3,15e3),YN="__/auth/iframe",KN="emulator/auth/iframe",QN={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ZN=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function JN(n){const e=n.config;Wt(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?r5(e,KN):`https://${n.config.authDomain}/${YN}`,r={apiKey:e.apiKey,appName:n.name,v:uh},i=ZN.get(n.config.apiHost);i&&(r.eid=i);const a=n._getFrameworks();return a.length&&(r.fw=a.join(",")),`${t}?${c0(r).slice(1)}`}async function e9(n){const e=await $N(n),t=Kl().gapi;return Wt(t,n,"internal-error"),e.open({where:document.body,url:JN(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:QN,dontclear:!0},r=>new Promise(async(i,a)=>{await r.restyle({setHideOnLeave:!1});const o=Yl(n,"network-request-failed"),s=Kl().setTimeout(()=>{a(o)},XN.get());function u(){Kl().clearTimeout(s),i(r)}r.ping(u).then(u,()=>{a(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t9={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},n9=500,r9=600,i9="_blank",a9="http://localhost";class Jw{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function o9(n,e,t,r=n9,i=r9){const a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let s="";const u=Object.assign(Object.assign({},t9),{width:r.toString(),height:i.toString(),top:a,left:o}),f=Ba().toLowerCase();t&&(s=OA(f)?i9:t),RA(f)&&(e=e||a9,u.scrollbars="yes");const h=Object.entries(u).reduce((g,[m,_])=>`${g}${m}=${_},`,"");if(AR(f)&&s!=="_self")return s9(e||"",s),new Jw(null);const p=window.open(e||"",s,h);Wt(p,n,"popup-blocked");try{p.focus()}catch{}return new Jw(p)}function s9(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l9="__/auth/handler",u9="emulator/auth/handler",c9=encodeURIComponent("fac");async function e3(n,e,t,r,i,a){Wt(n.config.authDomain,n,"auth-domain-config-required"),Wt(n.config.apiKey,n,"invalid-api-key");const o={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:uh,eventId:i};if(e instanceof zA){e.setDefaultLanguage(n.languageCode),o.providerId=e.providerId||"",zI(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,p]of Object.entries({}))o[h]=p}if(e instanceof d0){const h=e.getScopes().filter(p=>p!=="");h.length>0&&(o.scopes=h.join(","))}n.tenantId&&(o.tid=n.tenantId);const s=o;for(const h of Object.keys(s))s[h]===void 0&&delete s[h];const u=await n._getAppCheckToken(),f=u?`#${c9}=${encodeURIComponent(u)}`:"";return`${f9(n)}?${c0(s).slice(1)}${f}`}function f9({config:n}){return n.emulator?r5(n,u9):`https://${n.authDomain}/${l9}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tv="webStorageSupport";class h9{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=YA,this._completeRedirectFn=MN,this._overrideRedirectResult=PN}async _openPopup(e,t,r,i){var a;Yu((a=this.eventManagers[e._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const o=await e3(e,t,r,Hv(),i);return o9(e,o,l5())}async _openRedirect(e,t,r,i){await this._originValidation(e);const a=await e3(e,t,r,Hv(),i);return gN(a),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:a}=this.eventManagers[t];return i?Promise.resolve(i):(Yu(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await e9(e),r=new FN(e);return t.register("authEvent",i=>(Wt(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(tv,{type:tv},i=>{var a;const o=(a=i==null?void 0:i[0])===null||a===void 0?void 0:a[tv];o!==void 0&&t(!!o),ll(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=qN(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return MA()||NA()||a5()}}const d9=h9;var t3="@firebase/auth",n3="1.10.6";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p9{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Wt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g9(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function m9(n){sl(new bs("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:o,authDomain:s}=r.options;Wt(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:s,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:BA(n)},f=new RR(r,i,a,u);return jR(f,t),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),sl(new bs("auth-internal",e=>{const t=gf(e.getProvider("auth").getImmediate());return(r=>new p9(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),xo(t3,n3,g9(n)),xo(t3,n3,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v9=5*60,y9=cA("authIdTokenMaxAge")||v9;let r3=null;const x9=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>y9)return;const i=t==null?void 0:t.token;r3!==i&&(r3=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function _9(n=Kg()){const e=pf(n,"auth");if(e.isInitialized())return e.getImmediate();const t=FR(n,{popupRedirectResolver:d9,persistence:[EN,hN,YA]}),r=cA("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(r,location.origin);if(location.origin===a.origin){const o=x9(a.toString());sN(t,o,()=>o(t.currentUser)),oN(t,s=>o(s))}}const i=sA("auth");return i&&UR(t,`http://${i}`),t}function w9(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}NR({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{const a=Yl("internal-error");a.customData=i,t(a)},r.type="text/javascript",r.charset="UTF-8",w9().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});m9("Browser");var i3=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ef,n6;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(P,E){function C(){}C.prototype=E.prototype,P.D=E.prototype,P.prototype=new C,P.prototype.constructor=P,P.C=function(M,R,L){for(var j=Array(arguments.length-2),$=2;$<arguments.length;$++)j[$-2]=arguments[$];return E.prototype[R].apply(M,j)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(P,E,C){C||(C=0);var M=Array(16);if(typeof E=="string")for(var R=0;16>R;++R)M[R]=E.charCodeAt(C++)|E.charCodeAt(C++)<<8|E.charCodeAt(C++)<<16|E.charCodeAt(C++)<<24;else for(R=0;16>R;++R)M[R]=E[C++]|E[C++]<<8|E[C++]<<16|E[C++]<<24;E=P.g[0],C=P.g[1],R=P.g[2];var L=P.g[3],j=E+(L^C&(R^L))+M[0]+3614090360&4294967295;E=C+(j<<7&4294967295|j>>>25),j=L+(R^E&(C^R))+M[1]+3905402710&4294967295,L=E+(j<<12&4294967295|j>>>20),j=R+(C^L&(E^C))+M[2]+606105819&4294967295,R=L+(j<<17&4294967295|j>>>15),j=C+(E^R&(L^E))+M[3]+3250441966&4294967295,C=R+(j<<22&4294967295|j>>>10),j=E+(L^C&(R^L))+M[4]+4118548399&4294967295,E=C+(j<<7&4294967295|j>>>25),j=L+(R^E&(C^R))+M[5]+1200080426&4294967295,L=E+(j<<12&4294967295|j>>>20),j=R+(C^L&(E^C))+M[6]+2821735955&4294967295,R=L+(j<<17&4294967295|j>>>15),j=C+(E^R&(L^E))+M[7]+4249261313&4294967295,C=R+(j<<22&4294967295|j>>>10),j=E+(L^C&(R^L))+M[8]+1770035416&4294967295,E=C+(j<<7&4294967295|j>>>25),j=L+(R^E&(C^R))+M[9]+2336552879&4294967295,L=E+(j<<12&4294967295|j>>>20),j=R+(C^L&(E^C))+M[10]+4294925233&4294967295,R=L+(j<<17&4294967295|j>>>15),j=C+(E^R&(L^E))+M[11]+2304563134&4294967295,C=R+(j<<22&4294967295|j>>>10),j=E+(L^C&(R^L))+M[12]+1804603682&4294967295,E=C+(j<<7&4294967295|j>>>25),j=L+(R^E&(C^R))+M[13]+4254626195&4294967295,L=E+(j<<12&4294967295|j>>>20),j=R+(C^L&(E^C))+M[14]+2792965006&4294967295,R=L+(j<<17&4294967295|j>>>15),j=C+(E^R&(L^E))+M[15]+1236535329&4294967295,C=R+(j<<22&4294967295|j>>>10),j=E+(R^L&(C^R))+M[1]+4129170786&4294967295,E=C+(j<<5&4294967295|j>>>27),j=L+(C^R&(E^C))+M[6]+3225465664&4294967295,L=E+(j<<9&4294967295|j>>>23),j=R+(E^C&(L^E))+M[11]+643717713&4294967295,R=L+(j<<14&4294967295|j>>>18),j=C+(L^E&(R^L))+M[0]+3921069994&4294967295,C=R+(j<<20&4294967295|j>>>12),j=E+(R^L&(C^R))+M[5]+3593408605&4294967295,E=C+(j<<5&4294967295|j>>>27),j=L+(C^R&(E^C))+M[10]+38016083&4294967295,L=E+(j<<9&4294967295|j>>>23),j=R+(E^C&(L^E))+M[15]+3634488961&4294967295,R=L+(j<<14&4294967295|j>>>18),j=C+(L^E&(R^L))+M[4]+3889429448&4294967295,C=R+(j<<20&4294967295|j>>>12),j=E+(R^L&(C^R))+M[9]+568446438&4294967295,E=C+(j<<5&4294967295|j>>>27),j=L+(C^R&(E^C))+M[14]+3275163606&4294967295,L=E+(j<<9&4294967295|j>>>23),j=R+(E^C&(L^E))+M[3]+4107603335&4294967295,R=L+(j<<14&4294967295|j>>>18),j=C+(L^E&(R^L))+M[8]+1163531501&4294967295,C=R+(j<<20&4294967295|j>>>12),j=E+(R^L&(C^R))+M[13]+2850285829&4294967295,E=C+(j<<5&4294967295|j>>>27),j=L+(C^R&(E^C))+M[2]+4243563512&4294967295,L=E+(j<<9&4294967295|j>>>23),j=R+(E^C&(L^E))+M[7]+1735328473&4294967295,R=L+(j<<14&4294967295|j>>>18),j=C+(L^E&(R^L))+M[12]+2368359562&4294967295,C=R+(j<<20&4294967295|j>>>12),j=E+(C^R^L)+M[5]+4294588738&4294967295,E=C+(j<<4&4294967295|j>>>28),j=L+(E^C^R)+M[8]+2272392833&4294967295,L=E+(j<<11&4294967295|j>>>21),j=R+(L^E^C)+M[11]+1839030562&4294967295,R=L+(j<<16&4294967295|j>>>16),j=C+(R^L^E)+M[14]+4259657740&4294967295,C=R+(j<<23&4294967295|j>>>9),j=E+(C^R^L)+M[1]+2763975236&4294967295,E=C+(j<<4&4294967295|j>>>28),j=L+(E^C^R)+M[4]+1272893353&4294967295,L=E+(j<<11&4294967295|j>>>21),j=R+(L^E^C)+M[7]+4139469664&4294967295,R=L+(j<<16&4294967295|j>>>16),j=C+(R^L^E)+M[10]+3200236656&4294967295,C=R+(j<<23&4294967295|j>>>9),j=E+(C^R^L)+M[13]+681279174&4294967295,E=C+(j<<4&4294967295|j>>>28),j=L+(E^C^R)+M[0]+3936430074&4294967295,L=E+(j<<11&4294967295|j>>>21),j=R+(L^E^C)+M[3]+3572445317&4294967295,R=L+(j<<16&4294967295|j>>>16),j=C+(R^L^E)+M[6]+76029189&4294967295,C=R+(j<<23&4294967295|j>>>9),j=E+(C^R^L)+M[9]+3654602809&4294967295,E=C+(j<<4&4294967295|j>>>28),j=L+(E^C^R)+M[12]+3873151461&4294967295,L=E+(j<<11&4294967295|j>>>21),j=R+(L^E^C)+M[15]+530742520&4294967295,R=L+(j<<16&4294967295|j>>>16),j=C+(R^L^E)+M[2]+3299628645&4294967295,C=R+(j<<23&4294967295|j>>>9),j=E+(R^(C|~L))+M[0]+4096336452&4294967295,E=C+(j<<6&4294967295|j>>>26),j=L+(C^(E|~R))+M[7]+1126891415&4294967295,L=E+(j<<10&4294967295|j>>>22),j=R+(E^(L|~C))+M[14]+2878612391&4294967295,R=L+(j<<15&4294967295|j>>>17),j=C+(L^(R|~E))+M[5]+4237533241&4294967295,C=R+(j<<21&4294967295|j>>>11),j=E+(R^(C|~L))+M[12]+1700485571&4294967295,E=C+(j<<6&4294967295|j>>>26),j=L+(C^(E|~R))+M[3]+2399980690&4294967295,L=E+(j<<10&4294967295|j>>>22),j=R+(E^(L|~C))+M[10]+4293915773&4294967295,R=L+(j<<15&4294967295|j>>>17),j=C+(L^(R|~E))+M[1]+2240044497&4294967295,C=R+(j<<21&4294967295|j>>>11),j=E+(R^(C|~L))+M[8]+1873313359&4294967295,E=C+(j<<6&4294967295|j>>>26),j=L+(C^(E|~R))+M[15]+4264355552&4294967295,L=E+(j<<10&4294967295|j>>>22),j=R+(E^(L|~C))+M[6]+2734768916&4294967295,R=L+(j<<15&4294967295|j>>>17),j=C+(L^(R|~E))+M[13]+1309151649&4294967295,C=R+(j<<21&4294967295|j>>>11),j=E+(R^(C|~L))+M[4]+4149444226&4294967295,E=C+(j<<6&4294967295|j>>>26),j=L+(C^(E|~R))+M[11]+3174756917&4294967295,L=E+(j<<10&4294967295|j>>>22),j=R+(E^(L|~C))+M[2]+718787259&4294967295,R=L+(j<<15&4294967295|j>>>17),j=C+(L^(R|~E))+M[9]+3951481745&4294967295,P.g[0]=P.g[0]+E&4294967295,P.g[1]=P.g[1]+(R+(j<<21&4294967295|j>>>11))&4294967295,P.g[2]=P.g[2]+R&4294967295,P.g[3]=P.g[3]+L&4294967295}r.prototype.u=function(P,E){E===void 0&&(E=P.length);for(var C=E-this.blockSize,M=this.B,R=this.h,L=0;L<E;){if(R==0)for(;L<=C;)i(this,P,L),L+=this.blockSize;if(typeof P=="string"){for(;L<E;)if(M[R++]=P.charCodeAt(L++),R==this.blockSize){i(this,M),R=0;break}}else for(;L<E;)if(M[R++]=P[L++],R==this.blockSize){i(this,M),R=0;break}}this.h=R,this.o+=E},r.prototype.v=function(){var P=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);P[0]=128;for(var E=1;E<P.length-8;++E)P[E]=0;var C=8*this.o;for(E=P.length-8;E<P.length;++E)P[E]=C&255,C/=256;for(this.u(P),P=Array(16),E=C=0;4>E;++E)for(var M=0;32>M;M+=8)P[C++]=this.g[E]>>>M&255;return P};function a(P,E){var C=s;return Object.prototype.hasOwnProperty.call(C,P)?C[P]:C[P]=E(P)}function o(P,E){this.h=E;for(var C=[],M=!0,R=P.length-1;0<=R;R--){var L=P[R]|0;M&&L==E||(C[R]=L,M=!1)}this.g=C}var s={};function u(P){return-128<=P&&128>P?a(P,function(E){return new o([E|0],0>E?-1:0)}):new o([P|0],0>P?-1:0)}function f(P){if(isNaN(P)||!isFinite(P))return p;if(0>P)return T(f(-P));for(var E=[],C=1,M=0;P>=C;M++)E[M]=P/C|0,C*=4294967296;return new o(E,0)}function h(P,E){if(P.length==0)throw Error("number format error: empty string");if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(P.charAt(0)=="-")return T(h(P.substring(1),E));if(0<=P.indexOf("-"))throw Error('number format error: interior "-" character');for(var C=f(Math.pow(E,8)),M=p,R=0;R<P.length;R+=8){var L=Math.min(8,P.length-R),j=parseInt(P.substring(R,R+L),E);8>L?(L=f(Math.pow(E,L)),M=M.j(L).add(f(j))):(M=M.j(C),M=M.add(f(j)))}return M}var p=u(0),g=u(1),m=u(16777216);n=o.prototype,n.m=function(){if(b(this))return-T(this).m();for(var P=0,E=1,C=0;C<this.g.length;C++){var M=this.i(C);P+=(0<=M?M:4294967296+M)*E,E*=4294967296}return P},n.toString=function(P){if(P=P||10,2>P||36<P)throw Error("radix out of range: "+P);if(_(this))return"0";if(b(this))return"-"+T(this).toString(P);for(var E=f(Math.pow(P,6)),C=this,M="";;){var R=V(C,E).g;C=S(C,R.j(E));var L=((0<C.g.length?C.g[0]:C.h)>>>0).toString(P);if(C=R,_(C))return L+M;for(;6>L.length;)L="0"+L;M=L+M}},n.i=function(P){return 0>P?0:P<this.g.length?this.g[P]:this.h};function _(P){if(P.h!=0)return!1;for(var E=0;E<P.g.length;E++)if(P.g[E]!=0)return!1;return!0}function b(P){return P.h==-1}n.l=function(P){return P=S(this,P),b(P)?-1:_(P)?0:1};function T(P){for(var E=P.g.length,C=[],M=0;M<E;M++)C[M]=~P.g[M];return new o(C,~P.h).add(g)}n.abs=function(){return b(this)?T(this):this},n.add=function(P){for(var E=Math.max(this.g.length,P.g.length),C=[],M=0,R=0;R<=E;R++){var L=M+(this.i(R)&65535)+(P.i(R)&65535),j=(L>>>16)+(this.i(R)>>>16)+(P.i(R)>>>16);M=j>>>16,L&=65535,j&=65535,C[R]=j<<16|L}return new o(C,C[C.length-1]&-2147483648?-1:0)};function S(P,E){return P.add(T(E))}n.j=function(P){if(_(this)||_(P))return p;if(b(this))return b(P)?T(this).j(T(P)):T(T(this).j(P));if(b(P))return T(this.j(T(P)));if(0>this.l(m)&&0>P.l(m))return f(this.m()*P.m());for(var E=this.g.length+P.g.length,C=[],M=0;M<2*E;M++)C[M]=0;for(M=0;M<this.g.length;M++)for(var R=0;R<P.g.length;R++){var L=this.i(M)>>>16,j=this.i(M)&65535,$=P.i(R)>>>16,ne=P.i(R)&65535;C[2*M+2*R]+=j*ne,D(C,2*M+2*R),C[2*M+2*R+1]+=L*ne,D(C,2*M+2*R+1),C[2*M+2*R+1]+=j*$,D(C,2*M+2*R+1),C[2*M+2*R+2]+=L*$,D(C,2*M+2*R+2)}for(M=0;M<E;M++)C[M]=C[2*M+1]<<16|C[2*M];for(M=E;M<2*E;M++)C[M]=0;return new o(C,0)};function D(P,E){for(;(P[E]&65535)!=P[E];)P[E+1]+=P[E]>>>16,P[E]&=65535,E++}function B(P,E){this.g=P,this.h=E}function V(P,E){if(_(E))throw Error("division by zero");if(_(P))return new B(p,p);if(b(P))return E=V(T(P),E),new B(T(E.g),T(E.h));if(b(E))return E=V(P,T(E)),new B(T(E.g),E.h);if(30<P.g.length){if(b(P)||b(E))throw Error("slowDivide_ only works with positive integers.");for(var C=g,M=E;0>=M.l(P);)C=Y(C),M=Y(M);var R=q(C,1),L=q(M,1);for(M=q(M,2),C=q(C,2);!_(M);){var j=L.add(M);0>=j.l(P)&&(R=R.add(C),L=j),M=q(M,1),C=q(C,1)}return E=S(P,R.j(E)),new B(R,E)}for(R=p;0<=P.l(E);){for(C=Math.max(1,Math.floor(P.m()/E.m())),M=Math.ceil(Math.log(C)/Math.LN2),M=48>=M?1:Math.pow(2,M-48),L=f(C),j=L.j(E);b(j)||0<j.l(P);)C-=M,L=f(C),j=L.j(E);_(L)&&(L=g),R=R.add(L),P=S(P,j)}return new B(R,P)}n.A=function(P){return V(this,P).h},n.and=function(P){for(var E=Math.max(this.g.length,P.g.length),C=[],M=0;M<E;M++)C[M]=this.i(M)&P.i(M);return new o(C,this.h&P.h)},n.or=function(P){for(var E=Math.max(this.g.length,P.g.length),C=[],M=0;M<E;M++)C[M]=this.i(M)|P.i(M);return new o(C,this.h|P.h)},n.xor=function(P){for(var E=Math.max(this.g.length,P.g.length),C=[],M=0;M<E;M++)C[M]=this.i(M)^P.i(M);return new o(C,this.h^P.h)};function Y(P){for(var E=P.g.length+1,C=[],M=0;M<E;M++)C[M]=P.i(M)<<1|P.i(M-1)>>>31;return new o(C,P.h)}function q(P,E){var C=E>>5;E%=32;for(var M=P.g.length-C,R=[],L=0;L<M;L++)R[L]=0<E?P.i(L+C)>>>E|P.i(L+C+1)<<32-E:P.i(L+C);return new o(R,P.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,n6=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=f,o.fromString=h,ef=o}).apply(typeof i3<"u"?i3:typeof self<"u"?self:typeof window<"u"?window:{});var Sp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var r6,R1,i6,Wp,$v,a6,o6,s6;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(x,F,W){return x==Array.prototype||x==Object.prototype||(x[F]=W.value),x};function t(x){x=[typeof globalThis=="object"&&globalThis,x,typeof window=="object"&&window,typeof self=="object"&&self,typeof Sp=="object"&&Sp];for(var F=0;F<x.length;++F){var W=x[F];if(W&&W.Math==Math)return W}throw Error("Cannot find global object")}var r=t(this);function i(x,F){if(F)e:{var W=r;x=x.split(".");for(var se=0;se<x.length-1;se++){var Ce=x[se];if(!(Ce in W))break e;W=W[Ce]}x=x[x.length-1],se=W[x],F=F(se),F!=se&&F!=null&&e(W,x,{configurable:!0,writable:!0,value:F})}}function a(x,F){x instanceof String&&(x+="");var W=0,se=!1,Ce={next:function(){if(!se&&W<x.length){var Le=W++;return{value:F(Le,x[Le]),done:!1}}return se=!0,{done:!0,value:void 0}}};return Ce[Symbol.iterator]=function(){return Ce},Ce}i("Array.prototype.values",function(x){return x||function(){return a(this,function(F,W){return W})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},s=this||self;function u(x){var F=typeof x;return F=F!="object"?F:x?Array.isArray(x)?"array":F:"null",F=="array"||F=="object"&&typeof x.length=="number"}function f(x){var F=typeof x;return F=="object"&&x!=null||F=="function"}function h(x,F,W){return x.call.apply(x.bind,arguments)}function p(x,F,W){if(!x)throw Error();if(2<arguments.length){var se=Array.prototype.slice.call(arguments,2);return function(){var Ce=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(Ce,se),x.apply(F,Ce)}}return function(){return x.apply(F,arguments)}}function g(x,F,W){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,g.apply(null,arguments)}function m(x,F){var W=Array.prototype.slice.call(arguments,1);return function(){var se=W.slice();return se.push.apply(se,arguments),x.apply(this,se)}}function _(x,F){function W(){}W.prototype=F.prototype,x.aa=F.prototype,x.prototype=new W,x.prototype.constructor=x,x.Qb=function(se,Ce,Le){for(var nt=Array(arguments.length-2),jt=2;jt<arguments.length;jt++)nt[jt-2]=arguments[jt];return F.prototype[Ce].apply(se,nt)}}function b(x){const F=x.length;if(0<F){const W=Array(F);for(let se=0;se<F;se++)W[se]=x[se];return W}return[]}function T(x,F){for(let W=1;W<arguments.length;W++){const se=arguments[W];if(u(se)){const Ce=x.length||0,Le=se.length||0;x.length=Ce+Le;for(let nt=0;nt<Le;nt++)x[Ce+nt]=se[nt]}else x.push(se)}}class S{constructor(F,W){this.i=F,this.j=W,this.h=0,this.g=null}get(){let F;return 0<this.h?(this.h--,F=this.g,this.g=F.next,F.next=null):F=this.i(),F}}function D(x){return/^[\s\xa0]*$/.test(x)}function B(){var x=s.navigator;return x&&(x=x.userAgent)?x:""}function V(x){return V[" "](x),x}V[" "]=function(){};var Y=B().indexOf("Gecko")!=-1&&!(B().toLowerCase().indexOf("webkit")!=-1&&B().indexOf("Edge")==-1)&&!(B().indexOf("Trident")!=-1||B().indexOf("MSIE")!=-1)&&B().indexOf("Edge")==-1;function q(x,F,W){for(const se in x)F.call(W,x[se],se,x)}function P(x,F){for(const W in x)F.call(void 0,x[W],W,x)}function E(x){const F={};for(const W in x)F[W]=x[W];return F}const C="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function M(x,F){let W,se;for(let Ce=1;Ce<arguments.length;Ce++){se=arguments[Ce];for(W in se)x[W]=se[W];for(let Le=0;Le<C.length;Le++)W=C[Le],Object.prototype.hasOwnProperty.call(se,W)&&(x[W]=se[W])}}function R(x){var F=1;x=x.split(":");const W=[];for(;0<F&&x.length;)W.push(x.shift()),F--;return x.length&&W.push(x.join(":")),W}function L(x){s.setTimeout(()=>{throw x},0)}function j(){var x=ue;let F=null;return x.g&&(F=x.g,x.g=x.g.next,x.g||(x.h=null),F.next=null),F}class ${constructor(){this.h=this.g=null}add(F,W){const se=ne.get();se.set(F,W),this.h?this.h.next=se:this.g=se,this.h=se}}var ne=new S(()=>new U,x=>x.reset());class U{constructor(){this.next=this.g=this.h=null}set(F,W){this.h=F,this.g=W,this.next=null}reset(){this.next=this.g=this.h=null}}let z,te=!1,ue=new $,X=()=>{const x=s.Promise.resolve(void 0);z=()=>{x.then(me)}};var me=()=>{for(var x;x=j();){try{x.h.call(x.g)}catch(W){L(W)}var F=ne;F.j(x),100>F.h&&(F.h++,x.next=F.g,F.g=x)}te=!1};function G(){this.s=this.s,this.C=this.C}G.prototype.s=!1,G.prototype.ma=function(){this.s||(this.s=!0,this.N())},G.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Q(x,F){this.type=x,this.g=this.target=F,this.defaultPrevented=!1}Q.prototype.h=function(){this.defaultPrevented=!0};var ee=function(){if(!s.addEventListener||!Object.defineProperty)return!1;var x=!1,F=Object.defineProperty({},"passive",{get:function(){x=!0}});try{const W=()=>{};s.addEventListener("test",W,F),s.removeEventListener("test",W,F)}catch{}return x}();function ie(x,F){if(Q.call(this,x?x.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,x){var W=this.type=x.type,se=x.changedTouches&&x.changedTouches.length?x.changedTouches[0]:null;if(this.target=x.target||x.srcElement,this.g=F,F=x.relatedTarget){if(Y){e:{try{V(F.nodeName);var Ce=!0;break e}catch{}Ce=!1}Ce||(F=null)}}else W=="mouseover"?F=x.fromElement:W=="mouseout"&&(F=x.toElement);this.relatedTarget=F,se?(this.clientX=se.clientX!==void 0?se.clientX:se.pageX,this.clientY=se.clientY!==void 0?se.clientY:se.pageY,this.screenX=se.screenX||0,this.screenY=se.screenY||0):(this.clientX=x.clientX!==void 0?x.clientX:x.pageX,this.clientY=x.clientY!==void 0?x.clientY:x.pageY,this.screenX=x.screenX||0,this.screenY=x.screenY||0),this.button=x.button,this.key=x.key||"",this.ctrlKey=x.ctrlKey,this.altKey=x.altKey,this.shiftKey=x.shiftKey,this.metaKey=x.metaKey,this.pointerId=x.pointerId||0,this.pointerType=typeof x.pointerType=="string"?x.pointerType:de[x.pointerType]||"",this.state=x.state,this.i=x,x.defaultPrevented&&ie.aa.h.call(this)}}_(ie,Q);var de={2:"touch",3:"pen",4:"mouse"};ie.prototype.h=function(){ie.aa.h.call(this);var x=this.i;x.preventDefault?x.preventDefault():x.returnValue=!1};var Ee="closure_listenable_"+(1e6*Math.random()|0),be=0;function Te(x,F,W,se,Ce){this.listener=x,this.proxy=null,this.src=F,this.type=W,this.capture=!!se,this.ha=Ce,this.key=++be,this.da=this.fa=!1}function Ge(x){x.da=!0,x.listener=null,x.proxy=null,x.src=null,x.ha=null}function He(x){this.src=x,this.g={},this.h=0}He.prototype.add=function(x,F,W,se,Ce){var Le=x.toString();x=this.g[Le],x||(x=this.g[Le]=[],this.h++);var nt=st(x,F,se,Ce);return-1<nt?(F=x[nt],W||(F.fa=!1)):(F=new Te(F,this.src,Le,!!se,Ce),F.fa=W,x.push(F)),F};function rt(x,F){var W=F.type;if(W in x.g){var se=x.g[W],Ce=Array.prototype.indexOf.call(se,F,void 0),Le;(Le=0<=Ce)&&Array.prototype.splice.call(se,Ce,1),Le&&(Ge(F),x.g[W].length==0&&(delete x.g[W],x.h--))}}function st(x,F,W,se){for(var Ce=0;Ce<x.length;++Ce){var Le=x[Ce];if(!Le.da&&Le.listener==F&&Le.capture==!!W&&Le.ha==se)return Ce}return-1}var wt="closure_lm_"+(1e6*Math.random()|0),Be={};function ge(x,F,W,se,Ce){if(Array.isArray(F)){for(var Le=0;Le<F.length;Le++)ge(x,F[Le],W,se,Ce);return null}return W=Rt(W),x&&x[Ee]?x.K(F,W,f(se)?!!se.capture:!1,Ce):gt(x,F,W,!1,se,Ce)}function gt(x,F,W,se,Ce,Le){if(!F)throw Error("Invalid event type");var nt=f(Ce)?!!Ce.capture:!!Ce,jt=ct(x);if(jt||(x[wt]=jt=new He(x)),W=jt.add(F,W,se,nt,Le),W.proxy)return W;if(se=lt(),W.proxy=se,se.src=x,se.listener=W,x.addEventListener)ee||(Ce=nt),Ce===void 0&&(Ce=!1),x.addEventListener(F.toString(),se,Ce);else if(x.attachEvent)x.attachEvent(at(F.toString()),se);else if(x.addListener&&x.removeListener)x.addListener(se);else throw Error("addEventListener and attachEvent are unavailable.");return W}function lt(){function x(W){return F.call(x.src,x.listener,W)}const F=ot;return x}function Xe(x,F,W,se,Ce){if(Array.isArray(F))for(var Le=0;Le<F.length;Le++)Xe(x,F[Le],W,se,Ce);else se=f(se)?!!se.capture:!!se,W=Rt(W),x&&x[Ee]?(x=x.i,F=String(F).toString(),F in x.g&&(Le=x.g[F],W=st(Le,W,se,Ce),-1<W&&(Ge(Le[W]),Array.prototype.splice.call(Le,W,1),Le.length==0&&(delete x.g[F],x.h--)))):x&&(x=ct(x))&&(F=x.g[F.toString()],x=-1,F&&(x=st(F,W,se,Ce)),(W=-1<x?F[x]:null)&&it(W))}function it(x){if(typeof x!="number"&&x&&!x.da){var F=x.src;if(F&&F[Ee])rt(F.i,x);else{var W=x.type,se=x.proxy;F.removeEventListener?F.removeEventListener(W,se,x.capture):F.detachEvent?F.detachEvent(at(W),se):F.addListener&&F.removeListener&&F.removeListener(se),(W=ct(F))?(rt(W,x),W.h==0&&(W.src=null,F[wt]=null)):Ge(x)}}}function at(x){return x in Be?Be[x]:Be[x]="on"+x}function ot(x,F){if(x.da)x=!0;else{F=new ie(F,this);var W=x.listener,se=x.ha||x.src;x.fa&&it(x),x=W.call(se,F)}return x}function ct(x){return x=x[wt],x instanceof He?x:null}var mt="__closure_events_fn_"+(1e9*Math.random()>>>0);function Rt(x){return typeof x=="function"?x:(x[mt]||(x[mt]=function(F){return x.handleEvent(F)}),x[mt])}function _t(){G.call(this),this.i=new He(this),this.M=this,this.F=null}_(_t,G),_t.prototype[Ee]=!0,_t.prototype.removeEventListener=function(x,F,W,se){Xe(this,x,F,W,se)};function bt(x,F){var W,se=x.F;if(se)for(W=[];se;se=se.F)W.push(se);if(x=x.M,se=F.type||F,typeof F=="string")F=new Q(F,x);else if(F instanceof Q)F.target=F.target||x;else{var Ce=F;F=new Q(se,x),M(F,Ce)}if(Ce=!0,W)for(var Le=W.length-1;0<=Le;Le--){var nt=F.g=W[Le];Ce=Nt(nt,se,!0,F)&&Ce}if(nt=F.g=x,Ce=Nt(nt,se,!0,F)&&Ce,Ce=Nt(nt,se,!1,F)&&Ce,W)for(Le=0;Le<W.length;Le++)nt=F.g=W[Le],Ce=Nt(nt,se,!1,F)&&Ce}_t.prototype.N=function(){if(_t.aa.N.call(this),this.i){var x=this.i,F;for(F in x.g){for(var W=x.g[F],se=0;se<W.length;se++)Ge(W[se]);delete x.g[F],x.h--}}this.F=null},_t.prototype.K=function(x,F,W,se){return this.i.add(String(x),F,!1,W,se)},_t.prototype.L=function(x,F,W,se){return this.i.add(String(x),F,!0,W,se)};function Nt(x,F,W,se){if(F=x.i.g[String(F)],!F)return!0;F=F.concat();for(var Ce=!0,Le=0;Le<F.length;++Le){var nt=F[Le];if(nt&&!nt.da&&nt.capture==W){var jt=nt.listener,dn=nt.ha||nt.src;nt.fa&&rt(x.i,nt),Ce=jt.call(dn,se)!==!1&&Ce}}return Ce&&!se.defaultPrevented}function xt(x,F,W){if(typeof x=="function")W&&(x=g(x,W));else if(x&&typeof x.handleEvent=="function")x=g(x.handleEvent,x);else throw Error("Invalid listener argument");return 2147483647<Number(F)?-1:s.setTimeout(x,F||0)}function Ot(x){x.g=xt(()=>{x.g=null,x.i&&(x.i=!1,Ot(x))},x.l);const F=x.h;x.h=null,x.m.apply(null,F)}class ut extends G{constructor(F,W){super(),this.m=F,this.l=W,this.h=null,this.i=!1,this.g=null}j(F){this.h=arguments,this.g?this.i=!0:Ot(this)}N(){super.N(),this.g&&(s.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function mn(x){G.call(this),this.h=x,this.g={}}_(mn,G);var Vt=[];function Xn(x){q(x.g,function(F,W){this.g.hasOwnProperty(W)&&it(F)},x),x.g={}}mn.prototype.N=function(){mn.aa.N.call(this),Xn(this)},mn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Yt=s.JSON.stringify,An=s.JSON.parse,di=class{stringify(x){return s.JSON.stringify(x,void 0)}parse(x){return s.JSON.parse(x,void 0)}};function on(){}on.prototype.h=null;function da(x){return x.h||(x.h=x.i())}function Cn(){}var Lr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function or(){Q.call(this,"d")}_(or,Q);function vn(){Q.call(this,"c")}_(vn,Q);var Tt={},tn=null;function Ei(){return tn=tn||new _t}Tt.La="serverreachability";function kn(x){Q.call(this,Tt.La,x)}_(kn,Q);function dr(x){const F=Ei();bt(F,new kn(F))}Tt.STAT_EVENT="statevent";function ja(x,F){Q.call(this,Tt.STAT_EVENT,x),this.stat=F}_(ja,Q);function vt(x){const F=Ei();bt(F,new ja(F,x))}Tt.Ma="timingevent";function Hn(x,F){Q.call(this,Tt.Ma,x),this.size=F}_(Hn,Q);function Gn(x,F){if(typeof x!="function")throw Error("Fn must not be null and must be a function");return s.setTimeout(function(){x()},F)}function pr(){this.g=!0}pr.prototype.xa=function(){this.g=!1};function wr(x,F,W,se,Ce,Le){x.info(function(){if(x.g)if(Le)for(var nt="",jt=Le.split("&"),dn=0;dn<jt.length;dn++){var Kt=jt[dn].split("=");if(1<Kt.length){var Fn=Kt[0];Kt=Kt[1];var Yn=Fn.split("_");nt=2<=Yn.length&&Yn[1]=="type"?nt+(Fn+"="+Kt+"&"):nt+(Fn+"=redacted&")}}else nt=null;else nt=Le;return"XMLHTTP REQ ("+se+") [attempt "+Ce+"]: "+F+`
`+W+`
`+nt})}function Ir(x,F,W,se,Ce,Le,nt){x.info(function(){return"XMLHTTP RESP ("+se+") [ attempt "+Ce+"]: "+F+`
`+W+`
`+Le+" "+nt})}function Hr(x,F,W,se){x.info(function(){return"XMLHTTP TEXT ("+F+"): "+Zi(x,W)+(se?" "+se:"")})}function Es(x,F){x.info(function(){return"TIMEOUT: "+F})}pr.prototype.info=function(){};function Zi(x,F){if(!x.g)return F;if(!F)return null;try{var W=JSON.parse(F);if(W){for(x=0;x<W.length;x++)if(Array.isArray(W[x])){var se=W[x];if(!(2>se.length)){var Ce=se[1];if(Array.isArray(Ce)&&!(1>Ce.length)){var Le=Ce[0];if(Le!="noop"&&Le!="stop"&&Le!="close")for(var nt=1;nt<Ce.length;nt++)Ce[nt]=""}}}}return Yt(W)}catch{return F}}var pi={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ei={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Gr;function ti(){}_(ti,on),ti.prototype.g=function(){return new XMLHttpRequest},ti.prototype.i=function(){return{}},Gr=new ti;function sr(x,F,W,se){this.j=x,this.i=F,this.l=W,this.R=se||1,this.U=new mn(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Mn}function Mn(){this.i=null,this.g="",this.h=!1}var Eo={},So={};function Bi(x,F,W){x.L=1,x.v=Zo(Ci(F)),x.m=W,x.P=!0,pa(x,null)}function pa(x,F){x.F=Date.now(),Cs(x),x.A=Ci(x.v);var W=x.A,se=x.R;Array.isArray(se)||(se=[String(se)]),Ft(W.i,"t",se),x.C=0,W=x.j.J,x.h=new Mn,x.g=J(x.j,W?F:null,!x.m),0<x.O&&(x.M=new ut(g(x.Y,x,x.g),x.O)),F=x.U,W=x.g,se=x.ca;var Ce="readystatechange";Array.isArray(Ce)||(Ce&&(Vt[0]=Ce.toString()),Ce=Vt);for(var Le=0;Le<Ce.length;Le++){var nt=ge(W,Ce[Le],se||F.handleEvent,!1,F.h||F);if(!nt)break;F.g[nt.key]=nt}F=x.H?E(x.H):{},x.m?(x.u||(x.u="POST"),F["Content-Type"]="application/x-www-form-urlencoded",x.g.ea(x.A,x.u,x.m,F)):(x.u="GET",x.g.ea(x.A,x.u,null,F)),dr(),wr(x.i,x.u,x.A,x.l,x.R,x.m)}sr.prototype.ca=function(x){x=x.target;const F=this.M;F&&$r(x)==3?F.j():this.Y(x)},sr.prototype.Y=function(x){try{if(x==this.g)e:{const Yn=$r(this.g);var F=this.g.Ba();const ao=this.g.Z();if(!(3>Yn)&&(Yn!=3||this.g&&(this.h.h||this.g.oa()||uc(this.g)))){this.J||Yn!=4||F==7||(F==8||0>=ao?dr(3):dr(2)),Ua(this);var W=this.g.Z();this.X=W;t:if(Ss(this)){var se=uc(this.g);x="";var Ce=se.length,Le=$r(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ni(this),Va(this);var nt="";break t}this.h.i=new s.TextDecoder}for(F=0;F<Ce;F++)this.h.h=!0,x+=this.h.i.decode(se[F],{stream:!(Le&&F==Ce-1)});se.length=0,this.h.g+=x,this.C=0,nt=this.h.g}else nt=this.g.oa();if(this.o=W==200,Ir(this.i,this.u,this.A,this.l,this.R,Yn,W),this.o){if(this.T&&!this.K){t:{if(this.g){var jt,dn=this.g;if((jt=dn.g?dn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!D(jt)){var Kt=jt;break t}}Kt=null}if(W=Kt)Hr(this.i,this.l,W,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Co(this,W);else{this.o=!1,this.s=3,vt(12),ni(this),Va(this);break e}}if(this.P){W=!0;let kr;for(;!this.J&&this.C<nt.length;)if(kr=lu(this,nt),kr==So){Yn==4&&(this.s=4,vt(14),W=!1),Hr(this.i,this.l,null,"[Incomplete Response]");break}else if(kr==Eo){this.s=4,vt(15),Hr(this.i,this.l,nt,"[Invalid Chunk]"),W=!1;break}else Hr(this.i,this.l,kr,null),Co(this,kr);if(Ss(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Yn!=4||nt.length!=0||this.h.h||(this.s=1,vt(16),W=!1),this.o=this.o&&W,!W)Hr(this.i,this.l,nt,"[Invalid Chunked Response]"),ni(this),Va(this);else if(0<nt.length&&!this.W){this.W=!0;var Fn=this.j;Fn.g==this&&Fn.ba&&!Fn.M&&(Fn.j.info("Great, no buffering proxy detected. Bytes received: "+nt.length),is(Fn),Fn.M=!0,vt(11))}}else Hr(this.i,this.l,nt,null),Co(this,nt);Yn==4&&ni(this),this.o&&!this.J&&(Yn==4?as(this.j,this):(this.o=!1,Cs(this)))}else ts(this.g),W==400&&0<nt.indexOf("Unknown SID")?(this.s=3,vt(12)):(this.s=0,vt(13)),ni(this),Va(this)}}}catch{}finally{}};function Ss(x){return x.g?x.u=="GET"&&x.L!=2&&x.j.Ca:!1}function lu(x,F){var W=x.C,se=F.indexOf(`
`,W);return se==-1?So:(W=Number(F.substring(W,se)),isNaN(W)?Eo:(se+=1,se+W>F.length?So:(F=F.slice(se,se+W),x.C=se+W,F)))}sr.prototype.cancel=function(){this.J=!0,ni(this)};function Cs(x){x.S=Date.now()+x.I,ic(x,x.I)}function ic(x,F){if(x.B!=null)throw Error("WatchDog timer not null");x.B=Gn(g(x.ba,x),F)}function Ua(x){x.B&&(s.clearTimeout(x.B),x.B=null)}sr.prototype.ba=function(){this.B=null;const x=Date.now();0<=x-this.S?(Es(this.i,this.A),this.L!=2&&(dr(),vt(17)),ni(this),this.s=2,Va(this)):ic(this,this.S-x)};function Va(x){x.j.G==0||x.J||as(x.j,x)}function ni(x){Ua(x);var F=x.M;F&&typeof F.ma=="function"&&F.ma(),x.M=null,Xn(x.U),x.g&&(F=x.g,x.g=null,F.abort(),F.ma())}function Co(x,F){try{var W=x.j;if(W.G!=0&&(W.g==x||uu(W.h,x))){if(!x.K&&uu(W.h,x)&&W.G==3){try{var se=W.Da.g.parse(F)}catch{se=null}if(Array.isArray(se)&&se.length==3){var Ce=se;if(Ce[0]==0){e:if(!W.u){if(W.g)if(W.g.F+3e3<x.F)Lo(W),vl(W);else break e;Ds(W),vt(18)}}else W.za=Ce[1],0<W.za-W.T&&37500>Ce[2]&&W.F&&W.v==0&&!W.C&&(W.C=Gn(g(W.Za,W),6e3));if(1>=To(W.h)&&W.ca){try{W.ca()}catch{}W.ca=void 0}}else Vi(W,11)}else if((x.K||W.g==x)&&Lo(W),!D(F))for(Ce=W.Da.g.parse(F),F=0;F<Ce.length;F++){let Kt=Ce[F];if(W.T=Kt[0],Kt=Kt[1],W.G==2)if(Kt[0]=="c"){W.K=Kt[1],W.ia=Kt[2];const Fn=Kt[3];Fn!=null&&(W.la=Fn,W.j.info("VER="+W.la));const Yn=Kt[4];Yn!=null&&(W.Aa=Yn,W.j.info("SVER="+W.Aa));const ao=Kt[5];ao!=null&&typeof ao=="number"&&0<ao&&(se=1.5*ao,W.L=se,W.j.info("backChannelRequestTimeoutMs_="+se)),se=W;const kr=x.g;if(kr){const xa=kr.g?kr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(xa){var Le=se.h;Le.g||xa.indexOf("spdy")==-1&&xa.indexOf("quic")==-1&&xa.indexOf("h2")==-1||(Le.j=Le.l,Le.g=new Set,Le.h&&(lr(Le,Le.h),Le.h=null))}if(se.D){const os=kr.g?kr.g.getResponseHeader("X-HTTP-Session-Id"):null;os&&(se.ya=os,Bn(se.I,se.D,os))}}W.G=3,W.l&&W.l.ua(),W.ba&&(W.R=Date.now()-x.F,W.j.info("Handshake RTT: "+W.R+"ms")),se=W;var nt=x;if(se.qa=N(se,se.J?se.ia:null,se.W),nt.K){gi(se.h,nt);var jt=nt,dn=se.L;dn&&(jt.I=dn),jt.B&&(Ua(jt),Cs(jt)),se.g=nt}else xl(se);0<W.i.length&&yl(W)}else Kt[0]!="stop"&&Kt[0]!="close"||Vi(W,7);else W.G==3&&(Kt[0]=="stop"||Kt[0]=="close"?Kt[0]=="stop"?Vi(W,7):Po(W):Kt[0]!="noop"&&W.l&&W.l.ta(Kt),W.v=0)}}dr(4)}catch{}}var ac=class{constructor(x,F){this.g=x,this.map=F}};function Qa(x){this.l=x||10,s.PerformanceNavigationTiming?(x=s.performance.getEntriesByType("navigation"),x=0<x.length&&(x[0].nextHopProtocol=="hq"||x[0].nextHopProtocol=="h2")):x=!!(s.chrome&&s.chrome.loadTimes&&s.chrome.loadTimes()&&s.chrome.loadTimes().wasFetchedViaSpdy),this.j=x?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function dl(x){return x.h?!0:x.g?x.g.size>=x.j:!1}function To(x){return x.h?1:x.g?x.g.size:0}function uu(x,F){return x.h?x.h==F:x.g?x.g.has(F):!1}function lr(x,F){x.g?x.g.add(F):x.h=F}function gi(x,F){x.h&&x.h==F?x.h=null:x.g&&x.g.has(F)&&x.g.delete(F)}Qa.prototype.cancel=function(){if(this.i=pl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const x of this.g.values())x.cancel();this.g.clear()}};function pl(x){if(x.h!=null)return x.i.concat(x.h.D);if(x.g!=null&&x.g.size!==0){let F=x.i;for(const W of x.g.values())F=F.concat(W.D);return F}return b(x.i)}function oc(x){if(x.V&&typeof x.V=="function")return x.V();if(typeof Map<"u"&&x instanceof Map||typeof Set<"u"&&x instanceof Set)return Array.from(x.values());if(typeof x=="string")return x.split("");if(u(x)){for(var F=[],W=x.length,se=0;se<W;se++)F.push(x[se]);return F}F=[],W=0;for(se in x)F[W++]=x[se];return F}function Yo(x){if(x.na&&typeof x.na=="function")return x.na();if(!x.V||typeof x.V!="function"){if(typeof Map<"u"&&x instanceof Map)return Array.from(x.keys());if(!(typeof Set<"u"&&x instanceof Set)){if(u(x)||typeof x=="string"){var F=[];x=x.length;for(var W=0;W<x;W++)F.push(W);return F}F=[],W=0;for(const se in x)F[W++]=se;return F}}}function cu(x,F){if(x.forEach&&typeof x.forEach=="function")x.forEach(F,void 0);else if(u(x)||typeof x=="string")Array.prototype.forEach.call(x,F,void 0);else for(var W=Yo(x),se=oc(x),Ce=se.length,Le=0;Le<Ce;Le++)F.call(void 0,se[Le],W&&W[Le],x)}var Si=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function gl(x,F){if(x){x=x.split("&");for(var W=0;W<x.length;W++){var se=x[W].indexOf("="),Ce=null;if(0<=se){var Le=x[W].substring(0,se);Ce=x[W].substring(se+1)}else Le=x[W];F(Le,Ce?decodeURIComponent(Ce.replace(/\+/g," ")):"")}}}function En(x){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,x instanceof En){this.h=x.h,Ko(this,x.j),this.o=x.o,this.g=x.g,Qo(this,x.s),this.l=x.l;var F=x.i,W=new Ja;W.i=F.i,F.g&&(W.g=new Map(F.g),W.h=F.h),Za(this,W),this.m=x.m}else x&&(F=String(x).match(Si))?(this.h=!1,Ko(this,F[1]||"",!0),this.o=ga(F[2]||""),this.g=ga(F[3]||"",!0),Qo(this,F[4]),this.l=ga(F[5]||"",!0),Za(this,F[6]||"",!0),this.m=ga(F[7]||"")):(this.h=!1,this.i=new Ja(null,this.h))}En.prototype.toString=function(){var x=[],F=this.j;F&&x.push(Io(F,fu,!0),":");var W=this.g;return(W||F=="file")&&(x.push("//"),(F=this.o)&&x.push(Io(F,fu,!0),"@"),x.push(encodeURIComponent(String(W)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),W=this.s,W!=null&&x.push(":",String(W))),(W=this.l)&&(this.g&&W.charAt(0)!="/"&&x.push("/"),x.push(Io(W,W.charAt(0)=="/"?Ro:hu,!0))),(W=this.i.toString())&&x.push("?",W),(W=this.m)&&x.push("#",Io(W,No)),x.join("")};function Ci(x){return new En(x)}function Ko(x,F,W){x.j=W?ga(F,!0):F,x.j&&(x.j=x.j.replace(/:$/,""))}function Qo(x,F){if(F){if(F=Number(F),isNaN(F)||0>F)throw Error("Bad port number "+F);x.s=F}else x.s=null}function Za(x,F,W){F instanceof Ja?(x.i=F,lc(x.i,x.h)):(W||(F=Io(F,ml)),x.i=new Ja(F,x.h))}function Bn(x,F,W){x.i.set(F,W)}function Zo(x){return Bn(x,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),x}function ga(x,F){return x?F?decodeURI(x.replace(/%25/g,"%2525")):decodeURIComponent(x):""}function Io(x,F,W){return typeof x=="string"?(x=encodeURI(x).replace(F,sc),W&&(x=x.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),x):null}function sc(x){return x=x.charCodeAt(0),"%"+(x>>4&15).toString(16)+(x&15).toString(16)}var fu=/[#\/\?@]/g,hu=/[#\?:]/g,Ro=/[#\?]/g,ml=/[#\?@]/g,No=/#/g;function Ja(x,F){this.h=this.g=null,this.i=x||null,this.j=!!F}function Jn(x){x.g||(x.g=new Map,x.h=0,x.i&&gl(x.i,function(F,W){x.add(decodeURIComponent(F.replace(/\+/g," ")),W)}))}n=Ja.prototype,n.add=function(x,F){Jn(this),this.i=null,x=to(this,x);var W=this.g.get(x);return W||this.g.set(x,W=[]),W.push(F),this.h+=1,this};function Oo(x,F){Jn(x),F=to(x,F),x.g.has(F)&&(x.i=null,x.h-=x.g.get(F).length,x.g.delete(F))}function eo(x,F){return Jn(x),F=to(x,F),x.g.has(F)}n.forEach=function(x,F){Jn(this),this.g.forEach(function(W,se){W.forEach(function(Ce){x.call(F,Ce,se,this)},this)},this)},n.na=function(){Jn(this);const x=Array.from(this.g.values()),F=Array.from(this.g.keys()),W=[];for(let se=0;se<F.length;se++){const Ce=x[se];for(let Le=0;Le<Ce.length;Le++)W.push(F[se])}return W},n.V=function(x){Jn(this);let F=[];if(typeof x=="string")eo(this,x)&&(F=F.concat(this.g.get(to(this,x))));else{x=Array.from(this.g.values());for(let W=0;W<x.length;W++)F=F.concat(x[W])}return F},n.set=function(x,F){return Jn(this),this.i=null,x=to(this,x),eo(this,x)&&(this.h-=this.g.get(x).length),this.g.set(x,[F]),this.h+=1,this},n.get=function(x,F){return x?(x=this.V(x),0<x.length?String(x[0]):F):F};function Ft(x,F,W){Oo(x,F),0<W.length&&(x.i=null,x.g.set(to(x,F),b(W)),x.h+=W.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const x=[],F=Array.from(this.g.keys());for(var W=0;W<F.length;W++){var se=F[W];const Le=encodeURIComponent(String(se)),nt=this.V(se);for(se=0;se<nt.length;se++){var Ce=Le;nt[se]!==""&&(Ce+="="+encodeURIComponent(String(nt[se]))),x.push(Ce)}}return this.i=x.join("&")};function to(x,F){return F=String(F),x.j&&(F=F.toLowerCase()),F}function lc(x,F){F&&!x.j&&(Jn(x),x.i=null,x.g.forEach(function(W,se){var Ce=se.toLowerCase();se!=Ce&&(Oo(this,se),Ft(this,Ce,W))},x)),x.j=F}function Fi(x,F){const W=new pr;if(s.Image){const se=new Image;se.onload=m(Ji,W,"TestLoadImage: loaded",!0,F,se),se.onerror=m(Ji,W,"TestLoadImage: error",!1,F,se),se.onabort=m(Ji,W,"TestLoadImage: abort",!1,F,se),se.ontimeout=m(Ji,W,"TestLoadImage: timeout",!1,F,se),s.setTimeout(function(){se.ontimeout&&se.ontimeout()},1e4),se.src=x}else F(!1)}function ma(x,F){const W=new pr,se=new AbortController,Ce=setTimeout(()=>{se.abort(),Ji(W,"TestPingServer: timeout",!1,F)},1e4);fetch(x,{signal:se.signal}).then(Le=>{clearTimeout(Ce),Le.ok?Ji(W,"TestPingServer: ok",!0,F):Ji(W,"TestPingServer: server error",!1,F)}).catch(()=>{clearTimeout(Ce),Ji(W,"TestPingServer: error",!1,F)})}function Ji(x,F,W,se,Ce){try{Ce&&(Ce.onload=null,Ce.onerror=null,Ce.onabort=null,Ce.ontimeout=null),se(W)}catch{}}function no(){this.g=new di}function va(x,F,W){const se=W||"";try{cu(x,function(Ce,Le){let nt=Ce;f(Ce)&&(nt=Yt(Ce)),F.push(se+Le+"="+encodeURIComponent(nt))})}catch(Ce){throw F.push(se+"type="+encodeURIComponent("_badmap")),Ce}}function Jo(x){this.l=x.Ub||null,this.j=x.eb||!1}_(Jo,on),Jo.prototype.g=function(){return new Do(this.l,this.j)},Jo.prototype.i=function(x){return function(){return x}}({});function Do(x,F){_t.call(this),this.D=x,this.o=F,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}_(Do,_t),n=Do.prototype,n.open=function(x,F){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=x,this.A=F,this.readyState=1,ji(this)},n.send=function(x){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const F={headers:this.u,method:this.B,credentials:this.m,cache:void 0};x&&(F.body=x),(this.D||s).fetch(new Request(this.A,F)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ya(this)),this.readyState=0},n.Sa=function(x){if(this.g&&(this.l=x,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=x.headers,this.readyState=2,ji(this)),this.g&&(this.readyState=3,ji(this),this.g)))if(this.responseType==="arraybuffer")x.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof s.ReadableStream<"u"&&"body"in x){if(this.j=x.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;du(this)}else x.text().then(this.Ra.bind(this),this.ga.bind(this))};function du(x){x.j.read().then(x.Pa.bind(x)).catch(x.ga.bind(x))}n.Pa=function(x){if(this.g){if(this.o&&x.value)this.response.push(x.value);else if(!this.o){var F=x.value?x.value:new Uint8Array(0);(F=this.v.decode(F,{stream:!x.done}))&&(this.response=this.responseText+=F)}x.done?ya(this):ji(this),this.readyState==3&&du(this)}},n.Ra=function(x){this.g&&(this.response=this.responseText=x,ya(this))},n.Qa=function(x){this.g&&(this.response=x,ya(this))},n.ga=function(){this.g&&ya(this)};function ya(x){x.readyState=4,x.l=null,x.j=null,x.v=null,ji(x)}n.setRequestHeader=function(x,F){this.u.append(x,F)},n.getResponseHeader=function(x){return this.h&&this.h.get(x.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const x=[],F=this.h.entries();for(var W=F.next();!W.done;)W=W.value,x.push(W[0]+": "+W[1]),W=F.next();return x.join(`\r
`)};function ji(x){x.onreadystatechange&&x.onreadystatechange.call(x)}Object.defineProperty(Do.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(x){this.m=x?"include":"same-origin"}});function ro(x){let F="";return q(x,function(W,se){F+=se,F+=":",F+=W,F+=`\r
`}),F}function Wr(x,F,W){e:{for(se in W){var se=!1;break e}se=!0}se||(W=ro(W),typeof x=="string"?W!=null&&encodeURIComponent(String(W)):Bn(x,F,W))}function hn(x){_t.call(this),this.headers=new Map,this.o=x||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}_(hn,_t);var es=/^https?$/i,io=["POST","PUT"];n=hn.prototype,n.Ha=function(x){this.J=x},n.ea=function(x,F,W,se){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+x);F=F?F.toUpperCase():"GET",this.D=x,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Gr.g(),this.v=this.o?da(this.o):da(Gr),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(F,String(x),!0),this.B=!1}catch(Le){pu(this,Le);return}if(x=W||"",W=new Map(this.headers),se)if(Object.getPrototypeOf(se)===Object.prototype)for(var Ce in se)W.set(Ce,se[Ce]);else if(typeof se.keys=="function"&&typeof se.get=="function")for(const Le of se.keys())W.set(Le,se.get(Le));else throw Error("Unknown input type for opt_headers: "+String(se));se=Array.from(W.keys()).find(Le=>Le.toLowerCase()=="content-type"),Ce=s.FormData&&x instanceof s.FormData,!(0<=Array.prototype.indexOf.call(io,F,void 0))||se||Ce||W.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Le,nt]of W)this.g.setRequestHeader(Le,nt);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ui(this),this.u=!0,this.g.send(x),this.u=!1}catch(Le){pu(this,Le)}};function pu(x,F){x.h=!1,x.g&&(x.j=!0,x.g.abort(),x.j=!1),x.l=F,x.m=5,Ts(x),za(x)}function Ts(x){x.A||(x.A=!0,bt(x,"complete"),bt(x,"error"))}n.abort=function(x){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=x||7,bt(this,"complete"),bt(this,"abort"),za(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),za(this,!0)),hn.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Is(this):this.bb())},n.bb=function(){Is(this)};function Is(x){if(x.h&&typeof o<"u"&&(!x.v[1]||$r(x)!=4||x.Z()!=2)){if(x.u&&$r(x)==4)xt(x.Ea,0,x);else if(bt(x,"readystatechange"),$r(x)==4){x.h=!1;try{const nt=x.Z();e:switch(nt){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var F=!0;break e;default:F=!1}var W;if(!(W=F)){var se;if(se=nt===0){var Ce=String(x.D).match(Si)[1]||null;!Ce&&s.self&&s.self.location&&(Ce=s.self.location.protocol.slice(0,-1)),se=!es.test(Ce?Ce.toLowerCase():"")}W=se}if(W)bt(x,"complete"),bt(x,"success");else{x.m=6;try{var Le=2<$r(x)?x.g.statusText:""}catch{Le=""}x.l=Le+" ["+x.Z()+"]",Ts(x)}}finally{za(x)}}}}function za(x,F){if(x.g){Ui(x);const W=x.g,se=x.v[0]?()=>{}:null;x.g=null,x.v=null,F||bt(x,"ready");try{W.onreadystatechange=se}catch{}}}function Ui(x){x.I&&(s.clearTimeout(x.I),x.I=null)}n.isActive=function(){return!!this.g};function $r(x){return x.g?x.g.readyState:0}n.Z=function(){try{return 2<$r(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(x){if(this.g){var F=this.g.responseText;return x&&F.indexOf(x)==0&&(F=F.substring(x.length)),An(F)}};function uc(x){try{if(!x.g)return null;if("response"in x.g)return x.g.response;switch(x.H){case"":case"text":return x.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in x.g)return x.g.mozResponseArrayBuffer}return null}catch{return null}}function ts(x){const F={};x=(x.g&&2<=$r(x)&&x.g.getAllResponseHeaders()||"").split(`\r
`);for(let se=0;se<x.length;se++){if(D(x[se]))continue;var W=R(x[se]);const Ce=W[0];if(W=W[1],typeof W!="string")continue;W=W.trim();const Le=F[Ce]||[];F[Ce]=Le,Le.push(W)}P(F,function(se){return se.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ti(x,F,W){return W&&W.internalChannelParams&&W.internalChannelParams[x]||F}function ns(x){this.Aa=0,this.i=[],this.j=new pr,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ti("failFast",!1,x),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ti("baseRetryDelayMs",5e3,x),this.cb=Ti("retryDelaySeedMs",1e4,x),this.Wa=Ti("forwardChannelMaxRetries",2,x),this.wa=Ti("forwardChannelRequestTimeoutMs",2e4,x),this.pa=x&&x.xmlHttpFactory||void 0,this.Xa=x&&x.Tb||void 0,this.Ca=x&&x.useFetchStreams||!1,this.L=void 0,this.J=x&&x.supportsCrossDomainXhr||!1,this.K="",this.h=new Qa(x&&x.concurrentRequestLimit),this.Da=new no,this.P=x&&x.fastHandshake||!1,this.O=x&&x.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=x&&x.Rb||!1,x&&x.xa&&this.j.xa(),x&&x.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&x&&x.detectBufferingProxy||!1,this.ja=void 0,x&&x.longPollingTimeout&&0<x.longPollingTimeout&&(this.ja=x.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=ns.prototype,n.la=8,n.G=1,n.connect=function(x,F,W,se){vt(0),this.W=x,this.H=F||{},W&&se!==void 0&&(this.H.OSID=W,this.H.OAID=se),this.F=this.X,this.I=N(this,null,this.W),yl(this)};function Po(x){if(Rs(x),x.G==3){var F=x.U++,W=Ci(x.I);if(Bn(W,"SID",x.K),Bn(W,"RID",F),Bn(W,"TYPE","terminate"),rs(x,W),F=new sr(x,x.j,F),F.L=2,F.v=Zo(Ci(W)),W=!1,s.navigator&&s.navigator.sendBeacon)try{W=s.navigator.sendBeacon(F.v.toString(),"")}catch{}!W&&s.Image&&(new Image().src=F.v,W=!0),W||(F.g=J(F.j,null),F.g.ea(F.v)),F.F=Date.now(),Cs(F)}_l(x)}function vl(x){x.g&&(is(x),x.g.cancel(),x.g=null)}function Rs(x){vl(x),x.u&&(s.clearTimeout(x.u),x.u=null),Lo(x),x.h.cancel(),x.s&&(typeof x.s=="number"&&s.clearTimeout(x.s),x.s=null)}function yl(x){if(!dl(x.h)&&!x.s){x.s=!0;var F=x.Ga;z||X(),te||(z(),te=!0),ue.add(F,x),x.B=0}}function gu(x,F){return To(x.h)>=x.h.j-(x.s?1:0)?!1:x.s?(x.i=F.D.concat(x.i),!0):x.G==1||x.G==2||x.B>=(x.Va?0:x.Wa)?!1:(x.s=Gn(g(x.Ga,x,F),Ps(x,x.B)),x.B++,!0)}n.Ga=function(x){if(this.s)if(this.s=null,this.G==1){if(!x){this.U=Math.floor(1e5*Math.random()),x=this.U++;const Ce=new sr(this,this.j,x);let Le=this.o;if(this.S&&(Le?(Le=E(Le),M(Le,this.S)):Le=this.S),this.m!==null||this.O||(Ce.H=Le,Le=null),this.P)e:{for(var F=0,W=0;W<this.i.length;W++){t:{var se=this.i[W];if("__data__"in se.map&&(se=se.map.__data__,typeof se=="string")){se=se.length;break t}se=void 0}if(se===void 0)break;if(F+=se,4096<F){F=W;break e}if(F===4096||W===this.i.length-1){F=W+1;break e}}F=1e3}else F=1e3;F=Os(this,Ce,F),W=Ci(this.I),Bn(W,"RID",x),Bn(W,"CVER",22),this.D&&Bn(W,"X-HTTP-Session-Id",this.D),rs(this,W),Le&&(this.O?F="headers="+encodeURIComponent(String(ro(Le)))+"&"+F:this.m&&Wr(W,this.m,Le)),lr(this.h,Ce),this.Ua&&Bn(W,"TYPE","init"),this.P?(Bn(W,"$req",F),Bn(W,"SID","null"),Ce.T=!0,Bi(Ce,W,null)):Bi(Ce,W,F),this.G=2}}else this.G==3&&(x?Ns(this,x):this.i.length==0||dl(this.h)||Ns(this))};function Ns(x,F){var W;F?W=F.l:W=x.U++;const se=Ci(x.I);Bn(se,"SID",x.K),Bn(se,"RID",W),Bn(se,"AID",x.T),rs(x,se),x.m&&x.o&&Wr(se,x.m,x.o),W=new sr(x,x.j,W,x.B+1),x.m===null&&(W.H=x.o),F&&(x.i=F.D.concat(x.i)),F=Os(x,W,1e3),W.I=Math.round(.5*x.wa)+Math.round(.5*x.wa*Math.random()),lr(x.h,W),Bi(W,se,F)}function rs(x,F){x.H&&q(x.H,function(W,se){Bn(F,se,W)}),x.l&&cu({},function(W,se){Bn(F,se,W)})}function Os(x,F,W){W=Math.min(x.i.length,W);var se=x.l?g(x.l.Na,x.l,x):null;e:{var Ce=x.i;let Le=-1;for(;;){const nt=["count="+W];Le==-1?0<W?(Le=Ce[0].g,nt.push("ofs="+Le)):Le=0:nt.push("ofs="+Le);let jt=!0;for(let dn=0;dn<W;dn++){let Kt=Ce[dn].g;const Fn=Ce[dn].map;if(Kt-=Le,0>Kt)Le=Math.max(0,Ce[dn].g-100),jt=!1;else try{va(Fn,nt,"req"+Kt+"_")}catch{se&&se(Fn)}}if(jt){se=nt.join("&");break e}}}return x=x.i.splice(0,W),F.D=x,se}function xl(x){if(!x.g&&!x.u){x.Y=1;var F=x.Fa;z||X(),te||(z(),te=!0),ue.add(F,x),x.v=0}}function Ds(x){return x.g||x.u||3<=x.v?!1:(x.Y++,x.u=Gn(g(x.Fa,x),Ps(x,x.v)),x.v++,!0)}n.Fa=function(){if(this.u=null,cc(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var x=2*this.R;this.j.info("BP detection timer enabled: "+x),this.A=Gn(g(this.ab,this),x)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,vt(10),vl(this),cc(this))};function is(x){x.A!=null&&(s.clearTimeout(x.A),x.A=null)}function cc(x){x.g=new sr(x,x.j,"rpc",x.Y),x.m===null&&(x.g.H=x.o),x.g.O=0;var F=Ci(x.qa);Bn(F,"RID","rpc"),Bn(F,"SID",x.K),Bn(F,"AID",x.T),Bn(F,"CI",x.F?"0":"1"),!x.F&&x.ja&&Bn(F,"TO",x.ja),Bn(F,"TYPE","xmlhttp"),rs(x,F),x.m&&x.o&&Wr(F,x.m,x.o),x.L&&(x.g.I=x.L);var W=x.g;x=x.ia,W.L=1,W.v=Zo(Ci(F)),W.m=null,W.P=!0,pa(W,x)}n.Za=function(){this.C!=null&&(this.C=null,vl(this),Ds(this),vt(19))};function Lo(x){x.C!=null&&(s.clearTimeout(x.C),x.C=null)}function as(x,F){var W=null;if(x.g==F){Lo(x),is(x),x.g=null;var se=2}else if(uu(x.h,F))W=F.D,gi(x.h,F),se=1;else return;if(x.G!=0){if(F.o)if(se==1){W=F.m?F.m.length:0,F=Date.now()-F.F;var Ce=x.B;se=Ei(),bt(se,new Hn(se,W)),yl(x)}else xl(x);else if(Ce=F.s,Ce==3||Ce==0&&0<F.X||!(se==1&&gu(x,F)||se==2&&Ds(x)))switch(W&&0<W.length&&(F=x.h,F.i=F.i.concat(W)),Ce){case 1:Vi(x,5);break;case 4:Vi(x,10);break;case 3:Vi(x,6);break;default:Vi(x,2)}}}function Ps(x,F){let W=x.Ta+Math.floor(Math.random()*x.cb);return x.isActive()||(W*=2),W*F}function Vi(x,F){if(x.j.info("Error code "+F),F==2){var W=g(x.fb,x),se=x.Xa;const Ce=!se;se=new En(se||"//www.google.com/images/cleardot.gif"),s.location&&s.location.protocol=="http"||Ko(se,"https"),Zo(se),Ce?Fi(se.toString(),W):ma(se.toString(),W)}else vt(2);x.G=0,x.l&&x.l.sa(F),_l(x),Rs(x)}n.fb=function(x){x?(this.j.info("Successfully pinged google.com"),vt(2)):(this.j.info("Failed to ping google.com"),vt(1))};function _l(x){if(x.G=0,x.ka=[],x.l){const F=pl(x.h);(F.length!=0||x.i.length!=0)&&(T(x.ka,F),T(x.ka,x.i),x.h.i.length=0,b(x.i),x.i.length=0),x.l.ra()}}function N(x,F,W){var se=W instanceof En?Ci(W):new En(W);if(se.g!="")F&&(se.g=F+"."+se.g),Qo(se,se.s);else{var Ce=s.location;se=Ce.protocol,F=F?F+"."+Ce.hostname:Ce.hostname,Ce=+Ce.port;var Le=new En(null);se&&Ko(Le,se),F&&(Le.g=F),Ce&&Qo(Le,Ce),W&&(Le.l=W),se=Le}return W=x.D,F=x.ya,W&&F&&Bn(se,W,F),Bn(se,"VER",x.la),rs(x,se),se}function J(x,F,W){if(F&&!x.J)throw Error("Can't create secondary domain capable XhrIo object.");return F=x.Ca&&!x.pa?new hn(new Jo({eb:W})):new hn(x.pa),F.Ha(x.J),F}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function pe(){}n=pe.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function xe(){}xe.prototype.g=function(x,F){return new Ie(x,F)};function Ie(x,F){_t.call(this),this.g=new ns(F),this.l=x,this.h=F&&F.messageUrlParams||null,x=F&&F.messageHeaders||null,F&&F.clientProtocolHeaderRequired&&(x?x["X-Client-Protocol"]="webchannel":x={"X-Client-Protocol":"webchannel"}),this.g.o=x,x=F&&F.initMessageHeaders||null,F&&F.messageContentType&&(x?x["X-WebChannel-Content-Type"]=F.messageContentType:x={"X-WebChannel-Content-Type":F.messageContentType}),F&&F.va&&(x?x["X-WebChannel-Client-Profile"]=F.va:x={"X-WebChannel-Client-Profile":F.va}),this.g.S=x,(x=F&&F.Sb)&&!D(x)&&(this.g.m=x),this.v=F&&F.supportsCrossDomainXhr||!1,this.u=F&&F.sendRawJson||!1,(F=F&&F.httpSessionIdParam)&&!D(F)&&(this.g.D=F,x=this.h,x!==null&&F in x&&(x=this.h,F in x&&delete x[F])),this.j=new ht(this)}_(Ie,_t),Ie.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ie.prototype.close=function(){Po(this.g)},Ie.prototype.o=function(x){var F=this.g;if(typeof x=="string"){var W={};W.__data__=x,x=W}else this.u&&(W={},W.__data__=Yt(x),x=W);F.i.push(new ac(F.Ya++,x)),F.G==3&&yl(F)},Ie.prototype.N=function(){this.g.l=null,delete this.j,Po(this.g),delete this.g,Ie.aa.N.call(this)};function Ve(x){or.call(this),x.__headers__&&(this.headers=x.__headers__,this.statusCode=x.__status__,delete x.__headers__,delete x.__status__);var F=x.__sm__;if(F){e:{for(const W in F){x=W;break e}x=void 0}(this.i=x)&&(x=this.i,F=F!==null&&x in F?F[x]:void 0),this.data=F}else this.data=x}_(Ve,or);function tt(){vn.call(this),this.status=1}_(tt,vn);function ht(x){this.g=x}_(ht,pe),ht.prototype.ua=function(){bt(this.g,"a")},ht.prototype.ta=function(x){bt(this.g,new Ve(x))},ht.prototype.sa=function(x){bt(this.g,new tt)},ht.prototype.ra=function(){bt(this.g,"b")},xe.prototype.createWebChannel=xe.prototype.g,Ie.prototype.send=Ie.prototype.o,Ie.prototype.open=Ie.prototype.m,Ie.prototype.close=Ie.prototype.close,s6=function(){return new xe},o6=function(){return Ei()},a6=Tt,$v={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},pi.NO_ERROR=0,pi.TIMEOUT=8,pi.HTTP_ERROR=6,Wp=pi,ei.COMPLETE="complete",i6=ei,Cn.EventType=Lr,Lr.OPEN="a",Lr.CLOSE="b",Lr.ERROR="c",Lr.MESSAGE="d",_t.prototype.listen=_t.prototype.K,R1=Cn,hn.prototype.listenOnce=hn.prototype.L,hn.prototype.getLastError=hn.prototype.Ka,hn.prototype.getLastErrorCode=hn.prototype.Ba,hn.prototype.getStatus=hn.prototype.Z,hn.prototype.getResponseJson=hn.prototype.Oa,hn.prototype.getResponseText=hn.prototype.oa,hn.prototype.send=hn.prototype.ea,hn.prototype.setWithCredentials=hn.prototype.Ha,r6=hn}).apply(typeof Sp<"u"?Sp:typeof self<"u"?self:typeof window<"u"?window:{});const a3="@firebase/firestore",o3="4.7.17";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Pa=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Pa.UNAUTHENTICATED=new Pa(null),Pa.GOOGLE_CREDENTIALS=new Pa("google-credentials-uid"),Pa.FIRST_PARTY=new Pa("first-party-uid"),Pa.MOCK_USER=new Pa("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Td="11.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nh=new Yg("@firebase/firestore");function Xh(){return nh.logLevel}function At(n,...e){if(nh.logLevel<=wn.DEBUG){const t=e.map(c5);nh.debug(`Firestore (${Td}): ${n}`,...t)}}function Ku(n,...e){if(nh.logLevel<=wn.ERROR){const t=e.map(c5);nh.error(`Firestore (${Td}): ${n}`,...t)}}function pd(n,...e){if(nh.logLevel<=wn.WARN){const t=e.map(c5);nh.warn(`Firestore (${Td}): ${n}`,...t)}}function c5(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $t(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,l6(n,r,t)}function l6(n,e,t){let r=`FIRESTORE (${Td}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw Ku(r),new Error(r)}function Zn(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||l6(e,i,r)}function en(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const et={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Et extends As{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gu{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u6{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class b9{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Pa.UNAUTHENTICATED))}shutdown(){}}class A9{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class E9{constructor(e){this.t=e,this.currentUser=Pa.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Zn(this.o===void 0,42304);let r=this.i;const i=u=>this.i!==r?(r=this.i,t(u)):Promise.resolve();let a=new Gu;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new Gu,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const u=a;e.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},s=u=>{At("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>s(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?s(u):(At("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Gu)}},0),o()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(At("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Zn(typeof r.accessToken=="string",31837,{l:r}),new u6(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Zn(e===null||typeof e=="string",2055,{h:e}),new Pa(e)}}class S9{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=Pa.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class C9{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new S9(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(Pa.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class s3{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class T9{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Go(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Zn(this.o===void 0,3512);const r=a=>{a.error!=null&&At("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const o=a.token!==this.m;return this.m=a.token,At("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const i=a=>{At("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(a=>i(a)),setTimeout(()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?i(a):At("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new s3(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Zn(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new s3(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I9(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c6(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f6{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=I9(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<t&&(r+=e.charAt(i[a]%62))}return r}}function fn(n,e){return n<e?-1:n>e?1:0}function Xv(n,e){let t=0;for(;t<n.length&&t<e.length;){const r=n.codePointAt(t),i=e.codePointAt(t);if(r!==i){if(r<128&&i<128)return fn(r,i);{const a=c6(),o=R9(a.encode(l3(n,t)),a.encode(l3(e,t)));return o!==0?o:fn(r,i)}}t+=r>65535?2:1}return fn(n.length,e.length)}function l3(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function R9(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return fn(n[t],e[t]);return fn(n.length,e.length)}function gd(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u3=-62135596800,c3=1e6;class Ai{static now(){return Ai.fromMillis(Date.now())}static fromDate(e){return Ai.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*c3);return new Ai(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Et(et.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Et(et.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<u3)throw new Et(et.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Et(et.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/c3}_compareTo(e){return this.seconds===e.seconds?fn(this.nanoseconds,e.nanoseconds):fn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-u3;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt{static fromTimestamp(e){return new Zt(e)}static min(){return new Zt(new Ai(0,0))}static max(){return new Zt(new Ai(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f3="__name__";class Gl{constructor(e,t,r){t===void 0?t=0:t>e.length&&$t(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&$t(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return Gl.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Gl?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const a=Gl.compareSegments(e.get(i),t.get(i));if(a!==0)return a}return fn(e.length,t.length)}static compareSegments(e,t){const r=Gl.isNumericId(e),i=Gl.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?Gl.extractNumericId(e).compare(Gl.extractNumericId(t)):Xv(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ef.fromString(e.substring(4,e.length-2))}}class Sr extends Gl{construct(e,t,r){return new Sr(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Et(et.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new Sr(t)}static emptyPath(){return new Sr([])}}const N9=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ca extends Gl{construct(e,t,r){return new ca(e,t,r)}static isValidIdentifier(e){return N9.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ca.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===f3}static keyField(){return new ca([f3])}static fromServerFormat(e){const t=[];let r="",i=0;const a=()=>{if(r.length===0)throw new Et(et.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let o=!1;for(;i<e.length;){const s=e[i];if(s==="\\"){if(i+1===e.length)throw new Et(et.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new Et(et.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else s==="`"?(o=!o,i++):s!=="."||o?(r+=s,i++):(a(),i++)}if(a(),o)throw new Et(et.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ca(t)}static emptyPath(){return new ca([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kt{constructor(e){this.path=e}static fromPath(e){return new kt(Sr.fromString(e))}static fromName(e){return new kt(Sr.fromString(e).popFirst(5))}static empty(){return new kt(Sr.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Sr.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Sr.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new kt(new Sr(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K1=-1;function O9(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Zt.fromTimestamp(r===1e9?new Ai(t+1,0):new Ai(t,r));return new of(i,kt.empty(),e)}function D9(n){return new of(n.readTime,n.key,K1)}class of{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new of(Zt.min(),kt.empty(),K1)}static max(){return new of(Zt.max(),kt.empty(),K1)}}function P9(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=kt.comparator(n.documentKey,e.documentKey),t!==0?t:fn(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L9="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class k9{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Id(n){if(n.code!==et.FAILED_PRECONDITION||n.message!==L9)throw n;At("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Je{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&$t(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Je((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Je?t:Je.resolve(t)}catch(t){return Je.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Je.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Je.reject(t)}static resolve(e){return new Je((t,r)=>{t(e)})}static reject(e){return new Je((t,r)=>{r(e)})}static waitFor(e){return new Je((t,r)=>{let i=0,a=0,o=!1;e.forEach(s=>{++i,s.next(()=>{++a,o&&a===i&&t()},u=>r(u))}),o=!0,a===i&&t()})}static or(e){let t=Je.resolve(!1);for(const r of e)t=t.next(i=>i?Je.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,a)=>{r.push(t.call(this,i,a))}),this.waitFor(r)}static mapArray(e,t){return new Je((r,i)=>{const a=e.length,o=new Array(a);let s=0;for(let u=0;u<a;u++){const f=u;t(e[f]).next(h=>{o[f]=h,++s,s===a&&r(o)},h=>i(h))}})}static doWhile(e,t){return new Je((r,i)=>{const a=()=>{e()===!0?t().next(()=>{a()},i):r()};a()})}}function M9(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Rd(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e2{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ue(r),this.ce=r=>t.writeSequenceNumber(r))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}e2.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f5=-1;function t2(n){return n==null}function mg(n){return n===0&&1/n==-1/0}function B9(n){return typeof n=="number"&&Number.isInteger(n)&&!mg(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h6="";function F9(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=h3(e)),e=j9(n.get(t),e);return h3(e)}function j9(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const a=n.charAt(i);switch(a){case"\0":t+="";break;case h6:t+="";break;default:t+=a}}return t}function h3(n){return n+h6+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d3(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function mf(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function d6(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zr{constructor(e,t){this.comparator=e,this.root=t||la.EMPTY}insert(e,t){return new zr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,la.BLACK,null,null))}remove(e){return new zr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,la.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Cp(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Cp(this.root,e,this.comparator,!1)}getReverseIterator(){return new Cp(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Cp(this.root,e,this.comparator,!0)}}class Cp{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class la{constructor(e,t,r,i,a){this.key=e,this.value=t,this.color=r??la.RED,this.left=i??la.EMPTY,this.right=a??la.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,a){return new la(e??this.key,t??this.value,r??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,t,r),null):a===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return la.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return la.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,la.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,la.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw $t(43730,{key:this.key,value:this.value});if(this.right.isRed())throw $t(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw $t(27949);return e+(this.isRed()?0:1)}}la.EMPTY=null,la.RED=!0,la.BLACK=!1;la.EMPTY=new class{constructor(){this.size=0}get key(){throw $t(57766)}get value(){throw $t(16141)}get color(){throw $t(16727)}get left(){throw $t(29726)}get right(){throw $t(36894)}copy(e,t,r,i,a){return this}insert(e,t,r){return new la(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mi{constructor(e){this.comparator=e,this.data=new zr(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new p3(this.data.getIterator())}getIteratorFrom(e){return new p3(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Mi)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(this.comparator(i,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Mi(this.comparator);return t.data=e,t}}class p3{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wo{constructor(e){this.fields=e,e.sort(ca.comparator)}static empty(){return new Wo([])}unionWith(e){let t=new Mi(ca.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Wo(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return gd(this.fields,e.fields,(t,r)=>t.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p6 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ha{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(i){try{return atob(i)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new p6("Invalid base64 string: "+a):a}}(e);return new ha(t)}static fromUint8Array(e){const t=function(i){let a="";for(let o=0;o<i.length;++o)a+=String.fromCharCode(i[o]);return a}(e);return new ha(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return fn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ha.EMPTY_BYTE_STRING=new ha("");const U9=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function sf(n){if(Zn(!!n,39018),typeof n=="string"){let e=0;const t=U9.exec(n);if(Zn(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ui(n.seconds),nanos:ui(n.nanos)}}function ui(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function lf(n){return typeof n=="string"?ha.fromBase64String(n):ha.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g6="server_timestamp",m6="__type__",v6="__previous_value__",y6="__local_write_time__";function h5(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[m6])===null||t===void 0?void 0:t.stringValue)===g6}function n2(n){const e=n.mapValue.fields[v6];return h5(e)?n2(e):e}function Q1(n){const e=sf(n.mapValue.fields[y6].timestampValue);return new Ai(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V9{constructor(e,t,r,i,a,o,s,u,f,h){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=s,this.longPollingOptions=u,this.useFetchStreams=f,this.isUsingEmulator=h}}const vg="(default)";class Z1{constructor(e,t){this.projectId=e,this.database=t||vg}static empty(){return new Z1("","")}get isDefaultDatabase(){return this.database===vg}isEqual(e){return e instanceof Z1&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x6="__type__",z9="__max__",Tp={mapValue:{}},_6="__vector__",yg="value";function uf(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?h5(n)?4:H9(n)?9007199254740991:q9(n)?10:11:$t(28295,{value:n})}function tu(n,e){if(n===e)return!0;const t=uf(n);if(t!==uf(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Q1(n).isEqual(Q1(e));case 3:return function(i,a){if(typeof i.timestampValue=="string"&&typeof a.timestampValue=="string"&&i.timestampValue.length===a.timestampValue.length)return i.timestampValue===a.timestampValue;const o=sf(i.timestampValue),s=sf(a.timestampValue);return o.seconds===s.seconds&&o.nanos===s.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,a){return lf(i.bytesValue).isEqual(lf(a.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,a){return ui(i.geoPointValue.latitude)===ui(a.geoPointValue.latitude)&&ui(i.geoPointValue.longitude)===ui(a.geoPointValue.longitude)}(n,e);case 2:return function(i,a){if("integerValue"in i&&"integerValue"in a)return ui(i.integerValue)===ui(a.integerValue);if("doubleValue"in i&&"doubleValue"in a){const o=ui(i.doubleValue),s=ui(a.doubleValue);return o===s?mg(o)===mg(s):isNaN(o)&&isNaN(s)}return!1}(n,e);case 9:return gd(n.arrayValue.values||[],e.arrayValue.values||[],tu);case 10:case 11:return function(i,a){const o=i.mapValue.fields||{},s=a.mapValue.fields||{};if(d3(o)!==d3(s))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(s[u]===void 0||!tu(o[u],s[u])))return!1;return!0}(n,e);default:return $t(52216,{left:n})}}function J1(n,e){return(n.values||[]).find(t=>tu(t,e))!==void 0}function md(n,e){if(n===e)return 0;const t=uf(n),r=uf(e);if(t!==r)return fn(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return fn(n.booleanValue,e.booleanValue);case 2:return function(a,o){const s=ui(a.integerValue||a.doubleValue),u=ui(o.integerValue||o.doubleValue);return s<u?-1:s>u?1:s===u?0:isNaN(s)?isNaN(u)?0:-1:1}(n,e);case 3:return g3(n.timestampValue,e.timestampValue);case 4:return g3(Q1(n),Q1(e));case 5:return Xv(n.stringValue,e.stringValue);case 6:return function(a,o){const s=lf(a),u=lf(o);return s.compareTo(u)}(n.bytesValue,e.bytesValue);case 7:return function(a,o){const s=a.split("/"),u=o.split("/");for(let f=0;f<s.length&&f<u.length;f++){const h=fn(s[f],u[f]);if(h!==0)return h}return fn(s.length,u.length)}(n.referenceValue,e.referenceValue);case 8:return function(a,o){const s=fn(ui(a.latitude),ui(o.latitude));return s!==0?s:fn(ui(a.longitude),ui(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return m3(n.arrayValue,e.arrayValue);case 10:return function(a,o){var s,u,f,h;const p=a.fields||{},g=o.fields||{},m=(s=p[yg])===null||s===void 0?void 0:s.arrayValue,_=(u=g[yg])===null||u===void 0?void 0:u.arrayValue,b=fn(((f=m==null?void 0:m.values)===null||f===void 0?void 0:f.length)||0,((h=_==null?void 0:_.values)===null||h===void 0?void 0:h.length)||0);return b!==0?b:m3(m,_)}(n.mapValue,e.mapValue);case 11:return function(a,o){if(a===Tp.mapValue&&o===Tp.mapValue)return 0;if(a===Tp.mapValue)return 1;if(o===Tp.mapValue)return-1;const s=a.fields||{},u=Object.keys(s),f=o.fields||{},h=Object.keys(f);u.sort(),h.sort();for(let p=0;p<u.length&&p<h.length;++p){const g=Xv(u[p],h[p]);if(g!==0)return g;const m=md(s[u[p]],f[h[p]]);if(m!==0)return m}return fn(u.length,h.length)}(n.mapValue,e.mapValue);default:throw $t(23264,{Pe:t})}}function g3(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return fn(n,e);const t=sf(n),r=sf(e),i=fn(t.seconds,r.seconds);return i!==0?i:fn(t.nanos,r.nanos)}function m3(n,e){const t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){const a=md(t[i],r[i]);if(a)return a}return fn(t.length,r.length)}function vd(n){return Yv(n)}function Yv(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=sf(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return lf(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return kt.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(const a of t.values||[])i?i=!1:r+=",",r+=Yv(a);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let i="{",a=!0;for(const o of r)a?a=!1:i+=",",i+=`${o}:${Yv(t.fields[o])}`;return i+"}"}(n.mapValue):$t(61005,{value:n})}function $p(n){switch(uf(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=n2(n);return e?16+$p(e):16;case 5:return 2*n.stringValue.length;case 6:return lf(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,a)=>i+$p(a),0)}(n.arrayValue);case 10:case 11:return function(r){let i=0;return mf(r.fields,(a,o)=>{i+=a.length+$p(o)}),i}(n.mapValue);default:throw $t(13486,{value:n})}}function v3(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Kv(n){return!!n&&"integerValue"in n}function d5(n){return!!n&&"arrayValue"in n}function y3(n){return!!n&&"nullValue"in n}function x3(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Xp(n){return!!n&&"mapValue"in n}function q9(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[x6])===null||t===void 0?void 0:t.stringValue)===_6}function j1(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return mf(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=j1(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=j1(n.arrayValue.values[t]);return e}return Object.assign({},n)}function H9(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===z9}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vo{constructor(e){this.value=e}static empty(){return new vo({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Xp(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=j1(t)}setAll(e){let t=ca.emptyPath(),r={},i=[];e.forEach((o,s)=>{if(!t.isImmediateParentOf(s)){const u=this.getFieldsMap(t);this.applyChanges(u,r,i),r={},i=[],t=s.popLast()}o?r[s.lastSegment()]=j1(o):i.push(s.lastSegment())});const a=this.getFieldsMap(t);this.applyChanges(a,r,i)}delete(e){const t=this.field(e.popLast());Xp(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return tu(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Xp(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){mf(t,(i,a)=>e[i]=a);for(const i of r)delete e[i]}clone(){return new vo(j1(this.value))}}function w6(n){const e=[];return mf(n.fields,(t,r)=>{const i=new ca([t]);if(Xp(r)){const a=w6(r.mapValue).fields;if(a.length===0)e.push(i);else for(const o of a)e.push(i.child(o))}else e.push(i)}),new Wo(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class La{constructor(e,t,r,i,a,o,s){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=a,this.data=o,this.documentState=s}static newInvalidDocument(e){return new La(e,0,Zt.min(),Zt.min(),Zt.min(),vo.empty(),0)}static newFoundDocument(e,t,r,i){return new La(e,1,t,Zt.min(),r,i,0)}static newNoDocument(e,t){return new La(e,2,t,Zt.min(),Zt.min(),vo.empty(),0)}static newUnknownDocument(e,t){return new La(e,3,t,Zt.min(),Zt.min(),vo.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Zt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=vo.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=vo.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Zt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof La&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new La(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xg{constructor(e,t){this.position=e,this.inclusive=t}}function _3(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const a=e[i],o=n.position[i];if(a.field.isKeyField()?r=kt.comparator(kt.fromName(o.referenceValue),t.key):r=md(o,t.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function w3(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!tu(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _g{constructor(e,t="asc"){this.field=e,this.dir=t}}function G9(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b6{}class wi extends b6{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new $9(e,t,r):t==="array-contains"?new K9(e,r):t==="in"?new Q9(e,r):t==="not-in"?new Z9(e,r):t==="array-contains-any"?new J9(e,r):new wi(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new X9(e,r):new Y9(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(md(t,this.value)):t!==null&&uf(this.value)===uf(t)&&this.matchesComparison(md(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return $t(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ul extends b6{constructor(e,t){super(),this.filters=e,this.op=t,this.Te=null}static create(e,t){return new ul(e,t)}matches(e){return A6(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function A6(n){return n.op==="and"}function E6(n){return W9(n)&&A6(n)}function W9(n){for(const e of n.filters)if(e instanceof ul)return!1;return!0}function Qv(n){if(n instanceof wi)return n.field.canonicalString()+n.op.toString()+vd(n.value);if(E6(n))return n.filters.map(e=>Qv(e)).join(",");{const e=n.filters.map(t=>Qv(t)).join(",");return`${n.op}(${e})`}}function S6(n,e){return n instanceof wi?function(r,i){return i instanceof wi&&r.op===i.op&&r.field.isEqual(i.field)&&tu(r.value,i.value)}(n,e):n instanceof ul?function(r,i){return i instanceof ul&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((a,o,s)=>a&&S6(o,i.filters[s]),!0):!1}(n,e):void $t(19439)}function C6(n){return n instanceof wi?function(t){return`${t.field.canonicalString()} ${t.op} ${vd(t.value)}`}(n):n instanceof ul?function(t){return t.op.toString()+" {"+t.getFilters().map(C6).join(" ,")+"}"}(n):"Filter"}class $9 extends wi{constructor(e,t,r){super(e,t,r),this.key=kt.fromName(r.referenceValue)}matches(e){const t=kt.comparator(e.key,this.key);return this.matchesComparison(t)}}class X9 extends wi{constructor(e,t){super(e,"in",t),this.keys=T6("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Y9 extends wi{constructor(e,t){super(e,"not-in",t),this.keys=T6("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function T6(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>kt.fromName(r.referenceValue))}class K9 extends wi{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return d5(t)&&J1(t.arrayValue,this.value)}}class Q9 extends wi{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&J1(this.value.arrayValue,t)}}class Z9 extends wi{constructor(e,t){super(e,"not-in",t)}matches(e){if(J1(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!J1(this.value.arrayValue,t)}}class J9 extends wi{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!d5(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>J1(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eO{constructor(e,t=null,r=[],i=[],a=null,o=null,s=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=s,this.Ie=null}}function b3(n,e=null,t=[],r=[],i=null,a=null,o=null){return new eO(n,e,t,r,i,a,o)}function p5(n){const e=en(n);if(e.Ie===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>Qv(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(a){return a.field.canonicalString()+a.dir}(r)).join(","),t2(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>vd(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>vd(r)).join(",")),e.Ie=t}return e.Ie}function g5(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!G9(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!S6(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!w3(n.startAt,e.startAt)&&w3(n.endAt,e.endAt)}function Zv(n){return kt.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g0{constructor(e,t=null,r=[],i=[],a=null,o="F",s=null,u=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=s,this.endAt=u,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function tO(n,e,t,r,i,a,o,s){return new g0(n,e,t,r,i,a,o,s)}function r2(n){return new g0(n)}function A3(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function I6(n){return n.collectionGroup!==null}function U1(n){const e=en(n);if(e.Ee===null){e.Ee=[];const t=new Set;for(const a of e.explicitOrderBy)e.Ee.push(a),t.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let s=new Mi(ca.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(f=>{f.isInequality()&&(s=s.add(f.field))})}),s})(e).forEach(a=>{t.has(a.canonicalString())||a.isKeyField()||e.Ee.push(new _g(a,r))}),t.has(ca.keyField().canonicalString())||e.Ee.push(new _g(ca.keyField(),r))}return e.Ee}function Ql(n){const e=en(n);return e.de||(e.de=nO(e,U1(n))),e.de}function nO(n,e){if(n.limitType==="F")return b3(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{const a=i.dir==="desc"?"asc":"desc";return new _g(i.field,a)});const t=n.endAt?new xg(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new xg(n.startAt.position,n.startAt.inclusive):null;return b3(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function Jv(n,e){const t=n.filters.concat([e]);return new g0(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function ey(n,e,t){return new g0(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function i2(n,e){return g5(Ql(n),Ql(e))&&n.limitType===e.limitType}function R6(n){return`${p5(Ql(n))}|lt:${n.limitType}`}function Yh(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>C6(i)).join(", ")}]`),t2(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>vd(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>vd(i)).join(",")),`Target(${r})`}(Ql(n))}; limitType=${n.limitType})`}function a2(n,e){return e.isFoundDocument()&&function(r,i){const a=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):kt.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)}(n,e)&&function(r,i){for(const a of U1(r))if(!a.field.isKeyField()&&i.data.field(a.field)===null)return!1;return!0}(n,e)&&function(r,i){for(const a of r.filters)if(!a.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(o,s,u){const f=_3(o,s,u);return o.inclusive?f<=0:f<0}(r.startAt,U1(r),i)||r.endAt&&!function(o,s,u){const f=_3(o,s,u);return o.inclusive?f>=0:f>0}(r.endAt,U1(r),i))}(n,e)}function rO(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function N6(n){return(e,t)=>{let r=!1;for(const i of U1(n)){const a=iO(i,e,t);if(a!==0)return a;r=r||i.field.isKeyField()}return 0}}function iO(n,e,t){const r=n.field.isKeyField()?kt.comparator(e.key,t.key):function(a,o,s){const u=o.data.field(a),f=s.data.field(a);return u!==null&&f!==null?md(u,f):$t(42886)}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return $t(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ch{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[i,a]of r)if(this.equalsFn(i,e))return a}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){mf(this.inner,(t,r)=>{for(const[i,a]of r)e(i,a)})}isEmpty(){return d6(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aO=new zr(kt.comparator);function Qu(){return aO}const O6=new zr(kt.comparator);function N1(...n){let e=O6;for(const t of n)e=e.insert(t.key,t);return e}function D6(n){let e=O6;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Wf(){return V1()}function P6(){return V1()}function V1(){return new ch(n=>n.toString(),(n,e)=>n.isEqual(e))}const oO=new zr(kt.comparator),sO=new Mi(kt.comparator);function bn(...n){let e=sO;for(const t of n)e=e.add(t);return e}const lO=new Mi(fn);function uO(){return lO}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m5(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:mg(e)?"-0":e}}function L6(n){return{integerValue:""+n}}function cO(n,e){return B9(e)?L6(e):m5(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o2{constructor(){this._=void 0}}function fO(n,e,t){return n instanceof e0?function(i,a){const o={fields:{[m6]:{stringValue:g6},[y6]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return a&&h5(a)&&(a=n2(a)),a&&(o.fields[v6]=a),{mapValue:o}}(t,e):n instanceof t0?M6(n,e):n instanceof n0?B6(n,e):function(i,a){const o=k6(i,a),s=E3(o)+E3(i.Re);return Kv(o)&&Kv(i.Re)?L6(s):m5(i.serializer,s)}(n,e)}function hO(n,e,t){return n instanceof t0?M6(n,e):n instanceof n0?B6(n,e):t}function k6(n,e){return n instanceof wg?function(r){return Kv(r)||function(a){return!!a&&"doubleValue"in a}(r)}(e)?e:{integerValue:0}:null}class e0 extends o2{}class t0 extends o2{constructor(e){super(),this.elements=e}}function M6(n,e){const t=F6(e);for(const r of n.elements)t.some(i=>tu(i,r))||t.push(r);return{arrayValue:{values:t}}}class n0 extends o2{constructor(e){super(),this.elements=e}}function B6(n,e){let t=F6(e);for(const r of n.elements)t=t.filter(i=>!tu(i,r));return{arrayValue:{values:t}}}class wg extends o2{constructor(e,t){super(),this.serializer=e,this.Re=t}}function E3(n){return ui(n.integerValue||n.doubleValue)}function F6(n){return d5(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dO{constructor(e,t){this.field=e,this.transform=t}}function pO(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof t0&&i instanceof t0||r instanceof n0&&i instanceof n0?gd(r.elements,i.elements,tu):r instanceof wg&&i instanceof wg?tu(r.Re,i.Re):r instanceof e0&&i instanceof e0}(n.transform,e.transform)}class gO{constructor(e,t){this.version=e,this.transformResults=t}}class _s{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new _s}static exists(e){return new _s(void 0,e)}static updateTime(e){return new _s(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Yp(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class s2{}function j6(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new v5(n.key,_s.none()):new m0(n.key,n.data,_s.none());{const t=n.data,r=vo.empty();let i=new Mi(ca.comparator);for(let a of e.fields)if(!i.has(a)){let o=t.field(a);o===null&&a.length>1&&(a=a.popLast(),o=t.field(a)),o===null?r.delete(a):r.set(a,o),i=i.add(a)}return new vf(n.key,r,new Wo(i.toArray()),_s.none())}}function mO(n,e,t){n instanceof m0?function(i,a,o){const s=i.value.clone(),u=C3(i.fieldTransforms,a,o.transformResults);s.setAll(u),a.convertToFoundDocument(o.version,s).setHasCommittedMutations()}(n,e,t):n instanceof vf?function(i,a,o){if(!Yp(i.precondition,a))return void a.convertToUnknownDocument(o.version);const s=C3(i.fieldTransforms,a,o.transformResults),u=a.data;u.setAll(U6(i)),u.setAll(s),a.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(n,e,t):function(i,a,o){a.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,t)}function z1(n,e,t,r){return n instanceof m0?function(a,o,s,u){if(!Yp(a.precondition,o))return s;const f=a.value.clone(),h=T3(a.fieldTransforms,u,o);return f.setAll(h),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),null}(n,e,t,r):n instanceof vf?function(a,o,s,u){if(!Yp(a.precondition,o))return s;const f=T3(a.fieldTransforms,u,o),h=o.data;return h.setAll(U6(a)),h.setAll(f),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),s===null?null:s.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(p=>p.field))}(n,e,t,r):function(a,o,s){return Yp(a.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):s}(n,e,t)}function vO(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),a=k6(r.transform,i||null);a!=null&&(t===null&&(t=vo.empty()),t.set(r.field,a))}return t||null}function S3(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&gd(r,i,(a,o)=>pO(a,o))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class m0 extends s2{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class vf extends s2{constructor(e,t,r,i,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function U6(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function C3(n,e,t){const r=new Map;Zn(n.length===t.length,32656,{Ve:t.length,me:n.length});for(let i=0;i<t.length;i++){const a=n[i],o=a.transform,s=e.data.field(a.field);r.set(a.field,hO(o,s,t[i]))}return r}function T3(n,e,t){const r=new Map;for(const i of n){const a=i.transform,o=t.data.field(i.field);r.set(i.field,fO(a,o,e))}return r}class v5 extends s2{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class yO extends s2{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xO{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&mO(a,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=z1(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=z1(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=P6();return this.mutations.forEach(i=>{const a=e.get(i.key),o=a.overlayedDocument;let s=this.applyToLocalView(o,a.mutatedFields);s=t.has(i.key)?null:s;const u=j6(o,s);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(Zt.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),bn())}isEqual(e){return this.batchId===e.batchId&&gd(this.mutations,e.mutations,(t,r)=>S3(t,r))&&gd(this.baseMutations,e.baseMutations,(t,r)=>S3(t,r))}}class y5{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Zn(e.mutations.length===r.length,58842,{fe:e.mutations.length,ge:r.length});let i=function(){return oO}();const a=e.mutations;for(let o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new y5(e,t,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _O{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wO{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _i,Nn;function bO(n){switch(n){case et.OK:return $t(64938);case et.CANCELLED:case et.UNKNOWN:case et.DEADLINE_EXCEEDED:case et.RESOURCE_EXHAUSTED:case et.INTERNAL:case et.UNAVAILABLE:case et.UNAUTHENTICATED:return!1;case et.INVALID_ARGUMENT:case et.NOT_FOUND:case et.ALREADY_EXISTS:case et.PERMISSION_DENIED:case et.FAILED_PRECONDITION:case et.ABORTED:case et.OUT_OF_RANGE:case et.UNIMPLEMENTED:case et.DATA_LOSS:return!0;default:return $t(15467,{code:n})}}function V6(n){if(n===void 0)return Ku("GRPC error has no .code"),et.UNKNOWN;switch(n){case _i.OK:return et.OK;case _i.CANCELLED:return et.CANCELLED;case _i.UNKNOWN:return et.UNKNOWN;case _i.DEADLINE_EXCEEDED:return et.DEADLINE_EXCEEDED;case _i.RESOURCE_EXHAUSTED:return et.RESOURCE_EXHAUSTED;case _i.INTERNAL:return et.INTERNAL;case _i.UNAVAILABLE:return et.UNAVAILABLE;case _i.UNAUTHENTICATED:return et.UNAUTHENTICATED;case _i.INVALID_ARGUMENT:return et.INVALID_ARGUMENT;case _i.NOT_FOUND:return et.NOT_FOUND;case _i.ALREADY_EXISTS:return et.ALREADY_EXISTS;case _i.PERMISSION_DENIED:return et.PERMISSION_DENIED;case _i.FAILED_PRECONDITION:return et.FAILED_PRECONDITION;case _i.ABORTED:return et.ABORTED;case _i.OUT_OF_RANGE:return et.OUT_OF_RANGE;case _i.UNIMPLEMENTED:return et.UNIMPLEMENTED;case _i.DATA_LOSS:return et.DATA_LOSS;default:return $t(39323,{code:n})}}(Nn=_i||(_i={}))[Nn.OK=0]="OK",Nn[Nn.CANCELLED=1]="CANCELLED",Nn[Nn.UNKNOWN=2]="UNKNOWN",Nn[Nn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Nn[Nn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Nn[Nn.NOT_FOUND=5]="NOT_FOUND",Nn[Nn.ALREADY_EXISTS=6]="ALREADY_EXISTS",Nn[Nn.PERMISSION_DENIED=7]="PERMISSION_DENIED",Nn[Nn.UNAUTHENTICATED=16]="UNAUTHENTICATED",Nn[Nn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Nn[Nn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Nn[Nn.ABORTED=10]="ABORTED",Nn[Nn.OUT_OF_RANGE=11]="OUT_OF_RANGE",Nn[Nn.UNIMPLEMENTED=12]="UNIMPLEMENTED",Nn[Nn.INTERNAL=13]="INTERNAL",Nn[Nn.UNAVAILABLE=14]="UNAVAILABLE",Nn[Nn.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AO=new ef([4294967295,4294967295],0);function I3(n){const e=c6().encode(n),t=new n6;return t.update(e),new Uint8Array(t.digest())}function R3(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new ef([t,r],0),new ef([i,a],0)]}class x5{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new O1(`Invalid padding: ${t}`);if(r<0)throw new O1(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new O1(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new O1(`Invalid padding when bitmap length is 0: ${t}`);this.pe=8*e.length-t,this.ye=ef.fromNumber(this.pe)}we(e,t,r){let i=e.add(t.multiply(ef.fromNumber(r)));return i.compare(AO)===1&&(i=new ef([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ye).toNumber()}be(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;const t=I3(e),[r,i]=R3(t);for(let a=0;a<this.hashCount;a++){const o=this.we(r,i,a);if(!this.be(o))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),o=new x5(a,i,t);return r.forEach(s=>o.insert(s)),o}insert(e){if(this.pe===0)return;const t=I3(e),[r,i]=R3(t);for(let a=0;a<this.hashCount;a++){const o=this.we(r,i,a);this.Se(o)}}Se(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class O1 extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l2{constructor(e,t,r,i,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,v0.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new l2(Zt.min(),i,new zr(fn),Qu(),bn())}}class v0{constructor(e,t,r,i,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new v0(r,t,bn(),bn(),bn())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kp{constructor(e,t,r,i){this.De=e,this.removedTargetIds=t,this.key=r,this.ve=i}}class z6{constructor(e,t){this.targetId=e,this.Ce=t}}class q6{constructor(e,t,r=ha.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class N3{constructor(){this.Fe=0,this.Me=O3(),this.xe=ha.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=bn(),t=bn(),r=bn();return this.Me.forEach((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:$t(38017,{changeType:a})}}),new v0(this.xe,this.Oe,e,t,r)}Qe(){this.Ne=!1,this.Me=O3()}$e(e,t){this.Ne=!0,this.Me=this.Me.insert(e,t)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,Zn(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class EO{constructor(e){this.ze=e,this.je=new Map,this.He=Qu(),this.Je=Ip(),this.Ye=Ip(),this.Ze=new zr(fn)}Xe(e){for(const t of e.De)e.ve&&e.ve.isFoundDocument()?this.et(t,e.ve):this.tt(t,e.key,e.ve);for(const t of e.removedTargetIds)this.tt(t,e.key,e.ve)}nt(e){this.forEachTarget(e,t=>{const r=this.rt(t);switch(e.state){case 0:this.it(t)&&r.ke(e.resumeToken);break;case 1:r.We(),r.Be||r.Qe(),r.ke(e.resumeToken);break;case 2:r.We(),r.Be||this.removeTarget(t);break;case 3:this.it(t)&&(r.Ge(),r.ke(e.resumeToken));break;case 4:this.it(t)&&(this.st(t),r.ke(e.resumeToken));break;default:$t(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.je.forEach((r,i)=>{this.it(i)&&t(i)})}ot(e){const t=e.targetId,r=e.Ce.count,i=this._t(t);if(i){const a=i.target;if(Zv(a))if(r===0){const o=new kt(a.path);this.tt(t,o,La.newNoDocument(o,Zt.min()))}else Zn(r===1,20013,{expectedCount:r});else{const o=this.ut(t);if(o!==r){const s=this.ct(e),u=s?this.lt(s,e,o):1;if(u!==0){this.st(t);const f=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,f)}}}}}ct(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:a=0}=t;let o,s;try{o=lf(r).toUint8Array()}catch(u){if(u instanceof p6)return pd("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{s=new x5(o,i,a)}catch(u){return pd(u instanceof O1?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return s.pe===0?null:s}lt(e,t,r){return t.Ce.count===r-this.Tt(e,t.targetId)?0:2}Tt(e,t){const r=this.ze.getRemoteKeysForTarget(t);let i=0;return r.forEach(a=>{const o=this.ze.Pt(),s=`projects/${o.projectId}/databases/${o.database}/documents/${a.path.canonicalString()}`;e.mightContain(s)||(this.tt(t,a,null),i++)}),i}It(e){const t=new Map;this.je.forEach((a,o)=>{const s=this._t(o);if(s){if(a.current&&Zv(s.target)){const u=new kt(s.target.path);this.Et(u).has(o)||this.dt(o,u)||this.tt(o,u,La.newNoDocument(u,e))}a.Le&&(t.set(o,a.qe()),a.Qe())}});let r=bn();this.Ye.forEach((a,o)=>{let s=!0;o.forEachWhile(u=>{const f=this._t(u);return!f||f.purpose==="TargetPurposeLimboResolution"||(s=!1,!1)}),s&&(r=r.add(a))}),this.He.forEach((a,o)=>o.setReadTime(e));const i=new l2(e,t,this.Ze,this.He,r);return this.He=Qu(),this.Je=Ip(),this.Ye=Ip(),this.Ze=new zr(fn),i}et(e,t){if(!this.it(e))return;const r=this.dt(e,t.key)?2:0;this.rt(e).$e(t.key,r),this.He=this.He.insert(t.key,t),this.Je=this.Je.insert(t.key,this.Et(t.key).add(e)),this.Ye=this.Ye.insert(t.key,this.At(t.key).add(e))}tt(e,t,r){if(!this.it(e))return;const i=this.rt(e);this.dt(e,t)?i.$e(t,1):i.Ue(t),this.Ye=this.Ye.insert(t,this.At(t).delete(e)),this.Ye=this.Ye.insert(t,this.At(t).add(e)),r&&(this.He=this.He.insert(t,r))}removeTarget(e){this.je.delete(e)}ut(e){const t=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let t=this.je.get(e);return t||(t=new N3,this.je.set(e,t)),t}At(e){let t=this.Ye.get(e);return t||(t=new Mi(fn),this.Ye=this.Ye.insert(e,t)),t}Et(e){let t=this.Je.get(e);return t||(t=new Mi(fn),this.Je=this.Je.insert(e,t)),t}it(e){const t=this._t(e)!==null;return t||At("WatchChangeAggregator","Detected inactive target",e),t}_t(e){const t=this.je.get(e);return t&&t.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new N3),this.ze.getRemoteKeysForTarget(e).forEach(t=>{this.tt(e,t,null)})}dt(e,t){return this.ze.getRemoteKeysForTarget(e).has(t)}}function Ip(){return new zr(kt.comparator)}function O3(){return new zr(kt.comparator)}const SO={asc:"ASCENDING",desc:"DESCENDING"},CO={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},TO={and:"AND",or:"OR"};class IO{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function ty(n,e){return n.useProto3Json||t2(e)?e:{value:e}}function bg(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function H6(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function RO(n,e){return bg(n,e.toTimestamp())}function Zl(n){return Zn(!!n,49232),Zt.fromTimestamp(function(t){const r=sf(t);return new Ai(r.seconds,r.nanos)}(n))}function _5(n,e){return ny(n,e).canonicalString()}function ny(n,e){const t=function(i){return new Sr(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function G6(n){const e=Sr.fromString(n);return Zn(K6(e),10190,{key:e.toString()}),e}function ry(n,e){return _5(n.databaseId,e.path)}function nv(n,e){const t=G6(e);if(t.get(1)!==n.databaseId.projectId)throw new Et(et.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Et(et.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new kt($6(t))}function W6(n,e){return _5(n.databaseId,e)}function NO(n){const e=G6(n);return e.length===4?Sr.emptyPath():$6(e)}function iy(n){return new Sr(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function $6(n){return Zn(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function D3(n,e,t){return{name:ry(n,e),fields:t.value.mapValue.fields}}function OO(n,e){let t;if("targetChange"in e){e.targetChange;const r=function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:$t(39313,{state:f})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],a=function(f,h){return f.useProto3Json?(Zn(h===void 0||typeof h=="string",58123),ha.fromBase64String(h||"")):(Zn(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),ha.fromUint8Array(h||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,s=o&&function(f){const h=f.code===void 0?et.UNKNOWN:V6(f.code);return new Et(h,f.message||"")}(o);t=new q6(r,i,a,s||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=nv(n,r.document.name),a=Zl(r.document.updateTime),o=r.document.createTime?Zl(r.document.createTime):Zt.min(),s=new vo({mapValue:{fields:r.document.fields}}),u=La.newFoundDocument(i,a,o,s),f=r.targetIds||[],h=r.removedTargetIds||[];t=new Kp(f,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=nv(n,r.document),a=r.readTime?Zl(r.readTime):Zt.min(),o=La.newNoDocument(i,a),s=r.removedTargetIds||[];t=new Kp([],s,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=nv(n,r.document),a=r.removedTargetIds||[];t=new Kp([],a,i,null)}else{if(!("filter"in e))return $t(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:a}=r,o=new wO(i,a),s=r.targetId;t=new z6(s,o)}}return t}function DO(n,e){let t;if(e instanceof m0)t={update:D3(n,e.key,e.value)};else if(e instanceof v5)t={delete:ry(n,e.key)};else if(e instanceof vf)t={update:D3(n,e.key,e.data),updateMask:VO(e.fieldMask)};else{if(!(e instanceof yO))return $t(16599,{ft:e.type});t={verify:ry(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(a,o){const s=o.transform;if(s instanceof e0)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(s instanceof t0)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:s.elements}};if(s instanceof n0)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:s.elements}};if(s instanceof wg)return{fieldPath:o.field.canonicalString(),increment:s.Re};throw $t(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,a){return a.updateTime!==void 0?{updateTime:RO(i,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:$t(27497)}(n,e.precondition)),t}function PO(n,e){return n&&n.length>0?(Zn(e!==void 0,14353),n.map(t=>function(i,a){let o=i.updateTime?Zl(i.updateTime):Zl(a);return o.isEqual(Zt.min())&&(o=Zl(a)),new gO(o,i.transformResults||[])}(t,e))):[]}function LO(n,e){return{documents:[W6(n,e.path)]}}function kO(n,e){const t={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=W6(n,i);const a=function(f){if(f.length!==0)return Y6(ul.create(f,"and"))}(e.filters);a&&(t.structuredQuery.where=a);const o=function(f){if(f.length!==0)return f.map(h=>function(g){return{field:Kh(g.field),direction:FO(g.dir)}}(h))}(e.orderBy);o&&(t.structuredQuery.orderBy=o);const s=ty(n,e.limit);return s!==null&&(t.structuredQuery.limit=s),e.startAt&&(t.structuredQuery.startAt=function(f){return{before:f.inclusive,values:f.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(f){return{before:!f.inclusive,values:f.position}}(e.endAt)),{gt:t,parent:i}}function MO(n){let e=NO(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Zn(r===1,65062);const h=t.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let a=[];t.where&&(a=function(p){const g=X6(p);return g instanceof ul&&E6(g)?g.getFilters():[g]}(t.where));let o=[];t.orderBy&&(o=function(p){return p.map(g=>function(_){return new _g(Qh(_.field),function(T){switch(T){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(_.direction))}(g))}(t.orderBy));let s=null;t.limit&&(s=function(p){let g;return g=typeof p=="object"?p.value:p,t2(g)?null:g}(t.limit));let u=null;t.startAt&&(u=function(p){const g=!!p.before,m=p.values||[];return new xg(m,g)}(t.startAt));let f=null;return t.endAt&&(f=function(p){const g=!p.before,m=p.values||[];return new xg(m,g)}(t.endAt)),tO(e,i,o,a,s,"F",u,f)}function BO(n,e){const t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return $t(28987,{purpose:i})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function X6(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=Qh(t.unaryFilter.field);return wi.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Qh(t.unaryFilter.field);return wi.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=Qh(t.unaryFilter.field);return wi.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Qh(t.unaryFilter.field);return wi.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return $t(61313);default:return $t(60726)}}(n):n.fieldFilter!==void 0?function(t){return wi.create(Qh(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return $t(58110);default:return $t(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return ul.create(t.compositeFilter.filters.map(r=>X6(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return $t(1026)}}(t.compositeFilter.op))}(n):$t(30097,{filter:n})}function FO(n){return SO[n]}function jO(n){return CO[n]}function UO(n){return TO[n]}function Kh(n){return{fieldPath:n.canonicalString()}}function Qh(n){return ca.fromServerFormat(n.fieldPath)}function Y6(n){return n instanceof wi?function(t){if(t.op==="=="){if(x3(t.value))return{unaryFilter:{field:Kh(t.field),op:"IS_NAN"}};if(y3(t.value))return{unaryFilter:{field:Kh(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(x3(t.value))return{unaryFilter:{field:Kh(t.field),op:"IS_NOT_NAN"}};if(y3(t.value))return{unaryFilter:{field:Kh(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Kh(t.field),op:jO(t.op),value:t.value}}}(n):n instanceof ul?function(t){const r=t.getFilters().map(i=>Y6(i));return r.length===1?r[0]:{compositeFilter:{op:UO(t.op),filters:r}}}(n):$t(54877,{filter:n})}function VO(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function K6(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kc{constructor(e,t,r,i,a=Zt.min(),o=Zt.min(),s=ha.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s,this.expectedCount=u}withSequenceNumber(e){return new Kc(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Kc(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Kc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Kc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zO{constructor(e){this.wt=e}}function qO(n){const e=MO({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?ey(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HO{constructor(){this.Cn=new GO}addToCollectionParentIndex(e,t){return this.Cn.add(t),Je.resolve()}getCollectionParents(e,t){return Je.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return Je.resolve()}deleteFieldIndex(e,t){return Je.resolve()}deleteAllFieldIndexes(e){return Je.resolve()}createTargetIndexes(e,t){return Je.resolve()}getDocumentsMatchingTarget(e,t){return Je.resolve(null)}getIndexType(e,t){return Je.resolve(0)}getFieldIndexes(e,t){return Je.resolve([])}getNextCollectionGroupToUpdate(e){return Je.resolve(null)}getMinOffset(e,t){return Je.resolve(of.min())}getMinOffsetFromCollectionGroup(e,t){return Je.resolve(of.min())}updateCollectionGroup(e,t,r){return Je.resolve()}updateIndexEntries(e,t){return Je.resolve()}}class GO{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Mi(Sr.comparator),a=!i.has(r);return this.index[t]=i.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Mi(Sr.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P3={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Q6=41943040;class go{static withCacheSize(e){return new go(e,go.DEFAULT_COLLECTION_PERCENTILE,go.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */go.DEFAULT_COLLECTION_PERCENTILE=10,go.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,go.DEFAULT=new go(Q6,go.DEFAULT_COLLECTION_PERCENTILE,go.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),go.DISABLED=new go(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yd{constructor(e){this.ur=e}next(){return this.ur+=2,this.ur}static cr(){return new yd(0)}static lr(){return new yd(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L3="LruGarbageCollector",WO=1048576;function k3([n,e],[t,r]){const i=fn(n,t);return i===0?fn(e,r):i}class $O{constructor(e){this.Er=e,this.buffer=new Mi(k3),this.dr=0}Ar(){return++this.dr}Rr(e){const t=[e,this.Ar()];if(this.buffer.size<this.Er)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();k3(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class XO{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Vr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.mr(6e4)}stop(){this.Vr&&(this.Vr.cancel(),this.Vr=null)}get started(){return this.Vr!==null}mr(e){At(L3,`Garbage collection scheduled in ${e}ms`),this.Vr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Vr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Rd(t)?At(L3,"Ignoring IndexedDB error during garbage collection: ",t):await Id(t)}await this.mr(3e5)})}}class YO{constructor(e,t){this.gr=e,this.params=t}calculateTargetCount(e,t){return this.gr.pr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return Je.resolve(e2.le);const r=new $O(t);return this.gr.forEachTarget(e,i=>r.Rr(i.sequenceNumber)).next(()=>this.gr.yr(e,i=>r.Rr(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.gr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.gr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(At("LruGarbageCollector","Garbage collection skipped; disabled"),Je.resolve(P3)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(At("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),P3):this.wr(e,t))}getCacheSize(e){return this.gr.getCacheSize(e)}wr(e,t){let r,i,a,o,s,u,f;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(At("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,o=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,s=Date.now(),this.removeTargets(e,r,t))).next(p=>(a=p,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(f=Date.now(),Xh()<=wn.DEBUG&&At("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${i} in `+(s-o)+`ms
	Removed ${a} targets in `+(u-s)+`ms
	Removed ${p} documents in `+(f-u)+`ms
Total Duration: ${f-h}ms`),Je.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:p})))}}function KO(n,e){return new YO(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QO{constructor(){this.changes=new ch(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,La.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?Je.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZO{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JO{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&z1(r.mutation,i,Wo.empty(),Ai.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,bn()).next(()=>r))}getLocalViewOfDocuments(e,t,r=bn()){const i=Wf();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(a=>{let o=N1();return a.forEach((s,u)=>{o=o.insert(s,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){const r=Wf();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,bn()))}populateOverlays(e,t,r){const i=[];return r.forEach(a=>{t.has(a)||i.push(a)}),this.documentOverlayCache.getOverlays(e,i).next(a=>{a.forEach((o,s)=>{t.set(o,s)})})}computeViews(e,t,r,i){let a=Qu();const o=V1(),s=function(){return V1()}();return t.forEach((u,f)=>{const h=r.get(f.key);i.has(f.key)&&(h===void 0||h.mutation instanceof vf)?a=a.insert(f.key,f):h!==void 0?(o.set(f.key,h.mutation.getFieldMask()),z1(h.mutation,f,h.mutation.getFieldMask(),Ai.now())):o.set(f.key,Wo.empty())}),this.recalculateAndSaveOverlays(e,a).next(u=>(u.forEach((f,h)=>o.set(f,h)),t.forEach((f,h)=>{var p;return s.set(f,new ZO(h,(p=o.get(f))!==null&&p!==void 0?p:null))}),s))}recalculateAndSaveOverlays(e,t){const r=V1();let i=new zr((o,s)=>o-s),a=bn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(const s of o)s.keys().forEach(u=>{const f=t.get(u);if(f===null)return;let h=r.get(u)||Wo.empty();h=s.applyToLocalView(f,h),r.set(u,h);const p=(i.get(s.batchId)||bn()).add(u);i=i.insert(s.batchId,p)})}).next(()=>{const o=[],s=i.getReverseIterator();for(;s.hasNext();){const u=s.getNext(),f=u.key,h=u.value,p=P6();h.forEach(g=>{if(!a.has(g)){const m=j6(t.get(g),r.get(g));m!==null&&p.set(g,m),a=a.add(g)}}),o.push(this.documentOverlayCache.saveOverlays(e,f,p))}return Je.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(o){return kt.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):I6(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(a=>{const o=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-a.size):Je.resolve(Wf());let s=K1,u=a;return o.next(f=>Je.forEach(f,(h,p)=>(s<p.largestBatchId&&(s=p.largestBatchId),a.get(h)?Je.resolve():this.remoteDocumentCache.getEntry(e,h).next(g=>{u=u.insert(h,g)}))).next(()=>this.populateOverlays(e,f,a)).next(()=>this.computeViews(e,u,f,bn())).next(h=>({batchId:s,changes:D6(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new kt(t)).next(r=>{let i=N1();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const a=t.collectionGroup;let o=N1();return this.indexManager.getCollectionParents(e,a).next(s=>Je.forEach(s,u=>{const f=function(p,g){return new g0(g,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(t,u.child(a));return this.getDocumentsMatchingCollectionQuery(e,f,r,i).next(h=>{h.forEach((p,g)=>{o=o.insert(p,g)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r,i){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(a=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,a,i))).next(o=>{a.forEach((u,f)=>{const h=f.getKey();o.get(h)===null&&(o=o.insert(h,La.newInvalidDocument(h)))});let s=N1();return o.forEach((u,f)=>{const h=a.get(u);h!==void 0&&z1(h.mutation,f,Wo.empty(),Ai.now()),a2(t,f)&&(s=s.insert(u,f))}),s})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eD{constructor(e){this.serializer=e,this.kr=new Map,this.qr=new Map}getBundleMetadata(e,t){return Je.resolve(this.kr.get(t))}saveBundleMetadata(e,t){return this.kr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:Zl(i.createTime)}}(t)),Je.resolve()}getNamedQuery(e,t){return Je.resolve(this.qr.get(t))}saveNamedQuery(e,t){return this.qr.set(t.name,function(i){return{name:i.name,query:qO(i.bundledQuery),readTime:Zl(i.readTime)}}(t)),Je.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tD{constructor(){this.overlays=new zr(kt.comparator),this.Qr=new Map}getOverlay(e,t){return Je.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Wf();return Je.forEach(t,i=>this.getOverlay(e,i).next(a=>{a!==null&&r.set(i,a)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,a)=>{this.St(e,t,a)}),Je.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.Qr.get(r);return i!==void 0&&(i.forEach(a=>this.overlays=this.overlays.remove(a)),this.Qr.delete(r)),Je.resolve()}getOverlaysForCollection(e,t,r){const i=Wf(),a=t.length+1,o=new kt(t.child("")),s=this.overlays.getIteratorFrom(o);for(;s.hasNext();){const u=s.getNext().value,f=u.getKey();if(!t.isPrefixOf(f.path))break;f.path.length===a&&u.largestBatchId>r&&i.set(u.getKey(),u)}return Je.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let a=new zr((f,h)=>f-h);const o=this.overlays.getIterator();for(;o.hasNext();){const f=o.getNext().value;if(f.getKey().getCollectionGroup()===t&&f.largestBatchId>r){let h=a.get(f.largestBatchId);h===null&&(h=Wf(),a=a.insert(f.largestBatchId,h)),h.set(f.getKey(),f)}}const s=Wf(),u=a.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((f,h)=>s.set(f,h)),!(s.size()>=i)););return Je.resolve(s)}St(e,t,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.Qr.get(i.largestBatchId).delete(r.key);this.Qr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new _O(t,r));let a=this.Qr.get(t);a===void 0&&(a=bn(),this.Qr.set(t,a)),this.Qr.set(t,a.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nD{constructor(){this.sessionToken=ha.EMPTY_BYTE_STRING}getSessionToken(e){return Je.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Je.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w5{constructor(){this.$r=new Mi(Xi.Ur),this.Kr=new Mi(Xi.Wr)}isEmpty(){return this.$r.isEmpty()}addReference(e,t){const r=new Xi(e,t);this.$r=this.$r.add(r),this.Kr=this.Kr.add(r)}Gr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.zr(new Xi(e,t))}jr(e,t){e.forEach(r=>this.removeReference(r,t))}Hr(e){const t=new kt(new Sr([])),r=new Xi(t,e),i=new Xi(t,e+1),a=[];return this.Kr.forEachInRange([r,i],o=>{this.zr(o),a.push(o.key)}),a}Jr(){this.$r.forEach(e=>this.zr(e))}zr(e){this.$r=this.$r.delete(e),this.Kr=this.Kr.delete(e)}Yr(e){const t=new kt(new Sr([])),r=new Xi(t,e),i=new Xi(t,e+1);let a=bn();return this.Kr.forEachInRange([r,i],o=>{a=a.add(o.key)}),a}containsKey(e){const t=new Xi(e,0),r=this.$r.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class Xi{constructor(e,t){this.key=e,this.Zr=t}static Ur(e,t){return kt.comparator(e.key,t.key)||fn(e.Zr,t.Zr)}static Wr(e,t){return fn(e.Zr,t.Zr)||kt.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rD{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.nr=1,this.Xr=new Mi(Xi.Ur)}checkEmpty(e){return Je.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){const a=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new xO(a,t,r,i);this.mutationQueue.push(o);for(const s of i)this.Xr=this.Xr.add(new Xi(s.key,a)),this.indexManager.addToCollectionParentIndex(e,s.key.path.popLast());return Je.resolve(o)}lookupMutationBatch(e,t){return Je.resolve(this.ei(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=this.ti(r),a=i<0?0:i;return Je.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return Je.resolve(this.mutationQueue.length===0?f5:this.nr-1)}getAllMutationBatches(e){return Je.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Xi(t,0),i=new Xi(t,Number.POSITIVE_INFINITY),a=[];return this.Xr.forEachInRange([r,i],o=>{const s=this.ei(o.Zr);a.push(s)}),Je.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Mi(fn);return t.forEach(i=>{const a=new Xi(i,0),o=new Xi(i,Number.POSITIVE_INFINITY);this.Xr.forEachInRange([a,o],s=>{r=r.add(s.Zr)})}),Je.resolve(this.ni(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let a=r;kt.isDocumentKey(a)||(a=a.child(""));const o=new Xi(new kt(a),0);let s=new Mi(fn);return this.Xr.forEachWhile(u=>{const f=u.key.path;return!!r.isPrefixOf(f)&&(f.length===i&&(s=s.add(u.Zr)),!0)},o),Je.resolve(this.ni(s))}ni(e){const t=[];return e.forEach(r=>{const i=this.ei(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){Zn(this.ri(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Xr;return Je.forEach(t.mutations,i=>{const a=new Xi(i.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Xr=r})}sr(e){}containsKey(e,t){const r=new Xi(t,0),i=this.Xr.firstAfterOrEqual(r);return Je.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,Je.resolve()}ri(e,t){return this.ti(e)}ti(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}ei(e){const t=this.ti(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iD{constructor(e){this.ii=e,this.docs=function(){return new zr(kt.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),a=i?i.size:0,o=this.ii(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return Je.resolve(r?r.document.mutableCopy():La.newInvalidDocument(t))}getEntries(e,t){let r=Qu();return t.forEach(i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():La.newInvalidDocument(i))}),Je.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let a=Qu();const o=t.path,s=new kt(o.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(s);for(;u.hasNext();){const{key:f,value:{document:h}}=u.getNext();if(!o.isPrefixOf(f.path))break;f.path.length>o.length+1||P9(D9(h),r)<=0||(i.has(h.key)||a2(t,h))&&(a=a.insert(h.key,h.mutableCopy()))}return Je.resolve(a)}getAllFromCollectionGroup(e,t,r,i){$t(9500)}si(e,t){return Je.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new aD(this)}getSize(e){return Je.resolve(this.size)}}class aD extends QO{constructor(e){super(),this.Br=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Br.addEntry(e,i)):this.Br.removeEntry(r)}),Je.waitFor(t)}getFromCache(e,t){return this.Br.getEntry(e,t)}getAllFromCache(e,t){return this.Br.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oD{constructor(e){this.persistence=e,this.oi=new ch(t=>p5(t),g5),this.lastRemoteSnapshotVersion=Zt.min(),this.highestTargetId=0,this._i=0,this.ai=new w5,this.targetCount=0,this.ui=yd.cr()}forEachTarget(e,t){return this.oi.forEach((r,i)=>t(i)),Je.resolve()}getLastRemoteSnapshotVersion(e){return Je.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Je.resolve(this._i)}allocateTargetId(e){return this.highestTargetId=this.ui.next(),Je.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this._i&&(this._i=t),Je.resolve()}Tr(e){this.oi.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ui=new yd(t),this.highestTargetId=t),e.sequenceNumber>this._i&&(this._i=e.sequenceNumber)}addTargetData(e,t){return this.Tr(t),this.targetCount+=1,Je.resolve()}updateTargetData(e,t){return this.Tr(t),Je.resolve()}removeTargetData(e,t){return this.oi.delete(t.target),this.ai.Hr(t.targetId),this.targetCount-=1,Je.resolve()}removeTargets(e,t,r){let i=0;const a=[];return this.oi.forEach((o,s)=>{s.sequenceNumber<=t&&r.get(s.targetId)===null&&(this.oi.delete(o),a.push(this.removeMatchingKeysForTargetId(e,s.targetId)),i++)}),Je.waitFor(a).next(()=>i)}getTargetCount(e){return Je.resolve(this.targetCount)}getTargetData(e,t){const r=this.oi.get(t)||null;return Je.resolve(r)}addMatchingKeys(e,t,r){return this.ai.Gr(t,r),Je.resolve()}removeMatchingKeys(e,t,r){this.ai.jr(t,r);const i=this.persistence.referenceDelegate,a=[];return i&&t.forEach(o=>{a.push(i.markPotentiallyOrphaned(e,o))}),Je.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.ai.Hr(t),Je.resolve()}getMatchingKeysForTargetId(e,t){const r=this.ai.Yr(t);return Je.resolve(r)}containsKey(e,t){return Je.resolve(this.ai.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z6{constructor(e,t){this.ci={},this.overlays={},this.li=new e2(0),this.hi=!1,this.hi=!0,this.Pi=new nD,this.referenceDelegate=e(this),this.Ti=new oD(this),this.indexManager=new HO,this.remoteDocumentCache=function(i){return new iD(i)}(r=>this.referenceDelegate.Ii(r)),this.serializer=new zO(t),this.Ei=new eD(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.hi=!1,Promise.resolve()}get started(){return this.hi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new tD,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ci[e.toKey()];return r||(r=new rD(t,this.referenceDelegate),this.ci[e.toKey()]=r),r}getGlobalsCache(){return this.Pi}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ei}runTransaction(e,t,r){At("MemoryPersistence","Starting transaction:",e);const i=new sD(this.li.next());return this.referenceDelegate.di(),r(i).next(a=>this.referenceDelegate.Ai(i).next(()=>a)).toPromise().then(a=>(i.raiseOnCommittedEvent(),a))}Ri(e,t){return Je.or(Object.values(this.ci).map(r=>()=>r.containsKey(e,t)))}}class sD extends k9{constructor(e){super(),this.currentSequenceNumber=e}}class b5{constructor(e){this.persistence=e,this.Vi=new w5,this.mi=null}static fi(e){return new b5(e)}get gi(){if(this.mi)return this.mi;throw $t(60996)}addReference(e,t,r){return this.Vi.addReference(r,t),this.gi.delete(r.toString()),Je.resolve()}removeReference(e,t,r){return this.Vi.removeReference(r,t),this.gi.add(r.toString()),Je.resolve()}markPotentiallyOrphaned(e,t){return this.gi.add(t.toString()),Je.resolve()}removeTarget(e,t){this.Vi.Hr(t.targetId).forEach(i=>this.gi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(a=>this.gi.add(a.toString()))}).next(()=>r.removeTargetData(e,t))}di(){this.mi=new Set}Ai(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Je.forEach(this.gi,r=>{const i=kt.fromPath(r);return this.pi(e,i).next(a=>{a||t.removeEntry(i,Zt.min())})}).next(()=>(this.mi=null,t.apply(e)))}updateLimboDocument(e,t){return this.pi(e,t).next(r=>{r?this.gi.delete(t.toString()):this.gi.add(t.toString())})}Ii(e){return 0}pi(e,t){return Je.or([()=>Je.resolve(this.Vi.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ri(e,t)])}}class Ag{constructor(e,t){this.persistence=e,this.yi=new ch(r=>F9(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=KO(this,t)}static fi(e,t){return new Ag(e,t)}di(){}Ai(e){return Je.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}pr(e){const t=this.br(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}br(e){let t=0;return this.yr(e,r=>{t++}).next(()=>t)}yr(e,t){return Je.forEach(this.yi,(r,i)=>this.Dr(e,r,i).next(a=>a?Je.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const i=this.persistence.getRemoteDocumentCache(),a=i.newChangeBuffer();return i.si(e,o=>this.Dr(e,o,t).next(s=>{s||(r++,a.removeEntry(o,Zt.min()))})).next(()=>a.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.yi.set(t,e.currentSequenceNumber),Je.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.yi.set(r,e.currentSequenceNumber),Je.resolve()}removeReference(e,t,r){return this.yi.set(r,e.currentSequenceNumber),Je.resolve()}updateLimboDocument(e,t){return this.yi.set(t,e.currentSequenceNumber),Je.resolve()}Ii(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=$p(e.data.value)),t}Dr(e,t,r){return Je.or([()=>this.persistence.Ri(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const i=this.yi.get(t);return Je.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A5{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.ds=r,this.As=i}static Rs(e,t){let r=bn(),i=bn();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new A5(e,t.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lD{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uD{constructor(){this.Vs=!1,this.fs=!1,this.gs=100,this.ps=function(){return BI()?8:M9(Ba())>0?6:4}()}initialize(e,t){this.ys=e,this.indexManager=t,this.Vs=!0}getDocumentsMatchingQuery(e,t,r,i){const a={result:null};return this.ws(e,t).next(o=>{a.result=o}).next(()=>{if(!a.result)return this.bs(e,t,i,r).next(o=>{a.result=o})}).next(()=>{if(a.result)return;const o=new lD;return this.Ss(e,t,o).next(s=>{if(a.result=s,this.fs)return this.Ds(e,t,o,s.size)})}).next(()=>a.result)}Ds(e,t,r,i){return r.documentReadCount<this.gs?(Xh()<=wn.DEBUG&&At("QueryEngine","SDK will not create cache indexes for query:",Yh(t),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),Je.resolve()):(Xh()<=wn.DEBUG&&At("QueryEngine","Query:",Yh(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.ps*i?(Xh()<=wn.DEBUG&&At("QueryEngine","The SDK decides to create cache indexes for query:",Yh(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ql(t))):Je.resolve())}ws(e,t){if(A3(t))return Je.resolve(null);let r=Ql(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=ey(t,null,"F"),r=Ql(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(a=>{const o=bn(...a);return this.ys.getDocuments(e,o).next(s=>this.indexManager.getMinOffset(e,r).next(u=>{const f=this.vs(t,s);return this.Cs(t,f,o,u.readTime)?this.ws(e,ey(t,null,"F")):this.Fs(e,f,t,u)}))})))}bs(e,t,r,i){return A3(t)||i.isEqual(Zt.min())?Je.resolve(null):this.ys.getDocuments(e,r).next(a=>{const o=this.vs(t,a);return this.Cs(t,o,r,i)?Je.resolve(null):(Xh()<=wn.DEBUG&&At("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Yh(t)),this.Fs(e,o,t,O9(i,K1)).next(s=>s))})}vs(e,t){let r=new Mi(N6(e));return t.forEach((i,a)=>{a2(e,a)&&(r=r.add(a))}),r}Cs(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const a=e.limitType==="F"?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Ss(e,t,r){return Xh()<=wn.DEBUG&&At("QueryEngine","Using full collection scan to execute query:",Yh(t)),this.ys.getDocumentsMatchingQuery(e,t,of.min(),r)}Fs(e,t,r,i){return this.ys.getDocumentsMatchingQuery(e,r,i).next(a=>(t.forEach(o=>{a=a.insert(o.key,o)}),a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E5="LocalStore",cD=3e8;class fD{constructor(e,t,r,i){this.persistence=e,this.Ms=t,this.serializer=i,this.xs=new zr(fn),this.Os=new ch(a=>p5(a),g5),this.Ns=new Map,this.Bs=e.getRemoteDocumentCache(),this.Ti=e.getTargetCache(),this.Ei=e.getBundleCache(),this.Ls(r)}Ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new JO(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.xs))}}function hD(n,e,t,r){return new fD(n,e,t,r)}async function J6(n,e){const t=en(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(a=>(i=a,t.Ls(e),t.mutationQueue.getAllMutationBatches(r))).next(a=>{const o=[],s=[];let u=bn();for(const f of i){o.push(f.batchId);for(const h of f.mutations)u=u.add(h.key)}for(const f of a){s.push(f.batchId);for(const h of f.mutations)u=u.add(h.key)}return t.localDocuments.getDocuments(r,u).next(f=>({ks:f,removedBatchIds:o,addedBatchIds:s}))})})}function dD(n,e){const t=en(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),a=t.Bs.newChangeBuffer({trackRemovals:!0});return function(s,u,f,h){const p=f.batch,g=p.keys();let m=Je.resolve();return g.forEach(_=>{m=m.next(()=>h.getEntry(u,_)).next(b=>{const T=f.docVersions.get(_);Zn(T!==null,48541),b.version.compareTo(T)<0&&(p.applyToRemoteDocument(b,f),b.isValidDocument()&&(b.setReadTime(f.commitVersion),h.addEntry(b)))})}),m.next(()=>s.mutationQueue.removeMutationBatch(u,p))}(t,r,e,a).next(()=>a.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(s){let u=bn();for(let f=0;f<s.mutationResults.length;++f)s.mutationResults[f].transformResults.length>0&&(u=u.add(s.batch.mutations[f].key));return u}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function eE(n){const e=en(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ti.getLastRemoteSnapshotVersion(t))}function pD(n,e){const t=en(n),r=e.snapshotVersion;let i=t.xs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const o=t.Bs.newChangeBuffer({trackRemovals:!0});i=t.xs;const s=[];e.targetChanges.forEach((h,p)=>{const g=i.get(p);if(!g)return;s.push(t.Ti.removeMatchingKeys(a,h.removedDocuments,p).next(()=>t.Ti.addMatchingKeys(a,h.addedDocuments,p)));let m=g.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(p)!==null?m=m.withResumeToken(ha.EMPTY_BYTE_STRING,Zt.min()).withLastLimboFreeSnapshotVersion(Zt.min()):h.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(h.resumeToken,r)),i=i.insert(p,m),function(b,T,S){return b.resumeToken.approximateByteSize()===0||T.snapshotVersion.toMicroseconds()-b.snapshotVersion.toMicroseconds()>=cD?!0:S.addedDocuments.size+S.modifiedDocuments.size+S.removedDocuments.size>0}(g,m,h)&&s.push(t.Ti.updateTargetData(a,m))});let u=Qu(),f=bn();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&s.push(t.persistence.referenceDelegate.updateLimboDocument(a,h))}),s.push(gD(a,o,e.documentUpdates).next(h=>{u=h.qs,f=h.Qs})),!r.isEqual(Zt.min())){const h=t.Ti.getLastRemoteSnapshotVersion(a).next(p=>t.Ti.setTargetsMetadata(a,a.currentSequenceNumber,r));s.push(h)}return Je.waitFor(s).next(()=>o.apply(a)).next(()=>t.localDocuments.getLocalViewOfDocuments(a,u,f)).next(()=>u)}).then(a=>(t.xs=i,a))}function gD(n,e,t){let r=bn(),i=bn();return t.forEach(a=>r=r.add(a)),e.getEntries(n,r).next(a=>{let o=Qu();return t.forEach((s,u)=>{const f=a.get(s);u.isFoundDocument()!==f.isFoundDocument()&&(i=i.add(s)),u.isNoDocument()&&u.version.isEqual(Zt.min())?(e.removeEntry(s,u.readTime),o=o.insert(s,u)):!f.isValidDocument()||u.version.compareTo(f.version)>0||u.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(u),o=o.insert(s,u)):At(E5,"Ignoring outdated watch update for ",s,". Current version:",f.version," Watch version:",u.version)}),{qs:o,Qs:i}})}function mD(n,e){const t=en(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=f5),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function vD(n,e){const t=en(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Ti.getTargetData(r,e).next(a=>a?(i=a,Je.resolve(i)):t.Ti.allocateTargetId(r).next(o=>(i=new Kc(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.Ti.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.xs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.xs=t.xs.insert(r.targetId,r),t.Os.set(e,r.targetId)),r})}async function ay(n,e,t){const r=en(n),i=r.xs.get(e),a=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",a,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Rd(o))throw o;At(E5,`Failed to update sequence numbers for target ${e}: ${o}`)}r.xs=r.xs.remove(e),r.Os.delete(i.target)}function M3(n,e,t){const r=en(n);let i=Zt.min(),a=bn();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,f,h){const p=en(u),g=p.Os.get(h);return g!==void 0?Je.resolve(p.xs.get(g)):p.Ti.getTargetData(f,h)}(r,o,Ql(e)).next(s=>{if(s)return i=s.lastLimboFreeSnapshotVersion,r.Ti.getMatchingKeysForTargetId(o,s.targetId).next(u=>{a=u})}).next(()=>r.Ms.getDocumentsMatchingQuery(o,e,t?i:Zt.min(),t?a:bn())).next(s=>(yD(r,rO(e),s),{documents:s,$s:a})))}function yD(n,e,t){let r=n.Ns.get(e)||Zt.min();t.forEach((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),n.Ns.set(e,r)}class B3{constructor(){this.activeTargetIds=uO()}js(e){this.activeTargetIds=this.activeTargetIds.add(e)}Hs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}zs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class xD{constructor(){this.xo=new B3,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.xo.js(e),this.Oo[e]||"not-current"}updateQueryState(e,t,r){this.Oo[e]=t}removeLocalQueryTarget(e){this.xo.Hs(e)}isLocalQueryTarget(e){return this.xo.activeTargetIds.has(e)}clearQueryState(e){delete this.Oo[e]}getAllActiveQueryTargets(){return this.xo.activeTargetIds}isActiveQueryTarget(e){return this.xo.activeTargetIds.has(e)}start(){return this.xo=new B3,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _D{No(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F3="ConnectivityMonitor";class j3{constructor(){this.Bo=()=>this.Lo(),this.ko=()=>this.qo(),this.Qo=[],this.$o()}No(e){this.Qo.push(e)}shutdown(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}$o(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}Lo(){At(F3,"Network connectivity changed: AVAILABLE");for(const e of this.Qo)e(0)}qo(){At(F3,"Network connectivity changed: UNAVAILABLE");for(const e of this.Qo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Rp=null;function oy(){return Rp===null?Rp=function(){return 268435456+Math.round(2147483648*Math.random())}():Rp++,"0x"+Rp.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rv="RestConnection",wD={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class bD{get Uo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Ko=t+"://"+e.host,this.Wo=`projects/${r}/databases/${i}`,this.Go=this.databaseId.database===vg?`project_id=${r}`:`project_id=${r}&database_id=${i}`}zo(e,t,r,i,a){const o=oy(),s=this.jo(e,t.toUriEncodedString());At(rv,`Sending RPC '${e}' ${o}:`,s,r);const u={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(u,i,a);const{host:f}=new URL(s),h=Sd(f);return this.Jo(e,s,u,r,h).then(p=>(At(rv,`Received RPC '${e}' ${o}: `,p),p),p=>{throw pd(rv,`RPC '${e}' ${o} failed with error: `,p,"url: ",s,"request:",r),p})}Yo(e,t,r,i,a,o){return this.zo(e,t,r,i,a)}Ho(e,t,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Td}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,a)=>e[a]=i),r&&r.headers.forEach((i,a)=>e[a]=i)}jo(e,t){const r=wD[e];return`${this.Ko}/v1/${t}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AD{constructor(e){this.Zo=e.Zo,this.Xo=e.Xo}e_(e){this.t_=e}n_(e){this.r_=e}i_(e){this.s_=e}onMessage(e){this.o_=e}close(){this.Xo()}send(e){this.Zo(e)}__(){this.t_()}a_(){this.r_()}u_(e){this.s_(e)}c_(e){this.o_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ca="WebChannelConnection";class ED extends bD{constructor(e){super(e),this.l_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,i,a){const o=oy();return new Promise((s,u)=>{const f=new r6;f.setWithCredentials(!0),f.listenOnce(i6.COMPLETE,()=>{try{switch(f.getLastErrorCode()){case Wp.NO_ERROR:const p=f.getResponseJson();At(Ca,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(p)),s(p);break;case Wp.TIMEOUT:At(Ca,`RPC '${e}' ${o} timed out`),u(new Et(et.DEADLINE_EXCEEDED,"Request time out"));break;case Wp.HTTP_ERROR:const g=f.getStatus();if(At(Ca,`RPC '${e}' ${o} failed with status:`,g,"response text:",f.getResponseText()),g>0){let m=f.getResponseJson();Array.isArray(m)&&(m=m[0]);const _=m==null?void 0:m.error;if(_&&_.status&&_.message){const b=function(S){const D=S.toLowerCase().replace(/_/g,"-");return Object.values(et).indexOf(D)>=0?D:et.UNKNOWN}(_.status);u(new Et(b,_.message))}else u(new Et(et.UNKNOWN,"Server responded with status "+f.getStatus()))}else u(new Et(et.UNAVAILABLE,"Connection failed."));break;default:$t(9055,{h_:e,streamId:o,P_:f.getLastErrorCode(),T_:f.getLastError()})}}finally{At(Ca,`RPC '${e}' ${o} completed.`)}});const h=JSON.stringify(i);At(Ca,`RPC '${e}' ${o} sending request:`,i),f.send(t,"POST",h,r,15)})}I_(e,t,r){const i=oy(),a=[this.Ko,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=s6(),s=o6(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(u.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Ho(u.initMessageHeaders,t,r),u.encodeInitMessageHeaders=!0;const h=a.join("");At(Ca,`Creating RPC '${e}' stream ${i}: ${h}`,u);const p=o.createWebChannel(h,u);this.E_(p);let g=!1,m=!1;const _=new AD({Zo:T=>{m?At(Ca,`Not sending because RPC '${e}' stream ${i} is closed:`,T):(g||(At(Ca,`Opening RPC '${e}' stream ${i} transport.`),p.open(),g=!0),At(Ca,`RPC '${e}' stream ${i} sending:`,T),p.send(T))},Xo:()=>p.close()}),b=(T,S,D)=>{T.listen(S,B=>{try{D(B)}catch(V){setTimeout(()=>{throw V},0)}})};return b(p,R1.EventType.OPEN,()=>{m||(At(Ca,`RPC '${e}' stream ${i} transport opened.`),_.__())}),b(p,R1.EventType.CLOSE,()=>{m||(m=!0,At(Ca,`RPC '${e}' stream ${i} transport closed`),_.u_(),this.d_(p))}),b(p,R1.EventType.ERROR,T=>{m||(m=!0,pd(Ca,`RPC '${e}' stream ${i} transport errored. Name:`,T.name,"Message:",T.message),_.u_(new Et(et.UNAVAILABLE,"The operation could not be completed")))}),b(p,R1.EventType.MESSAGE,T=>{var S;if(!m){const D=T.data[0];Zn(!!D,16349);const B=D,V=(B==null?void 0:B.error)||((S=B[0])===null||S===void 0?void 0:S.error);if(V){At(Ca,`RPC '${e}' stream ${i} received error:`,V);const Y=V.status;let q=function(C){const M=_i[C];if(M!==void 0)return V6(M)}(Y),P=V.message;q===void 0&&(q=et.INTERNAL,P="Unknown error status: "+Y+" with message "+V.message),m=!0,_.u_(new Et(q,P)),p.close()}else At(Ca,`RPC '${e}' stream ${i} received:`,D),_.c_(D)}}),b(s,a6.STAT_EVENT,T=>{T.stat===$v.PROXY?At(Ca,`RPC '${e}' stream ${i} detected buffering proxy`):T.stat===$v.NOPROXY&&At(Ca,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{_.a_()},0),_}terminate(){this.l_.forEach(e=>e.close()),this.l_=[]}E_(e){this.l_.push(e)}d_(e){this.l_=this.l_.filter(t=>t===e)}}function iv(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u2(n){return new IO(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tE{constructor(e,t,r=1e3,i=1.5,a=6e4){this.xi=e,this.timerId=t,this.A_=r,this.R_=i,this.V_=a,this.m_=0,this.f_=null,this.g_=Date.now(),this.reset()}reset(){this.m_=0}p_(){this.m_=this.V_}y_(e){this.cancel();const t=Math.floor(this.m_+this.w_()),r=Math.max(0,Date.now()-this.g_),i=Math.max(0,t-r);i>0&&At("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.m_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.f_=this.xi.enqueueAfterDelay(this.timerId,i,()=>(this.g_=Date.now(),e())),this.m_*=this.R_,this.m_<this.A_&&(this.m_=this.A_),this.m_>this.V_&&(this.m_=this.V_)}b_(){this.f_!==null&&(this.f_.skipDelay(),this.f_=null)}cancel(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}w_(){return(Math.random()-.5)*this.m_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U3="PersistentStream";class nE{constructor(e,t,r,i,a,o,s,u){this.xi=e,this.S_=r,this.D_=i,this.connection=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=s,this.listener=u,this.state=0,this.v_=0,this.C_=null,this.F_=null,this.stream=null,this.M_=0,this.x_=new tE(e,t)}O_(){return this.state===1||this.state===5||this.N_()}N_(){return this.state===2||this.state===3}start(){this.M_=0,this.state!==4?this.auth():this.B_()}async stop(){this.O_()&&await this.close(0)}L_(){this.state=0,this.x_.reset()}k_(){this.N_()&&this.C_===null&&(this.C_=this.xi.enqueueAfterDelay(this.S_,6e4,()=>this.q_()))}Q_(e){this.U_(),this.stream.send(e)}async q_(){if(this.N_())return this.close(0)}U_(){this.C_&&(this.C_.cancel(),this.C_=null)}K_(){this.F_&&(this.F_.cancel(),this.F_=null)}async close(e,t){this.U_(),this.K_(),this.x_.cancel(),this.v_++,e!==4?this.x_.reset():t&&t.code===et.RESOURCE_EXHAUSTED?(Ku(t.toString()),Ku("Using maximum backoff delay to prevent overloading the backend."),this.x_.p_()):t&&t.code===et.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.i_(t)}W_(){}auth(){this.state=1;const e=this.G_(this.v_),t=this.v_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.v_===t&&this.z_(r,i)},r=>{e(()=>{const i=new Et(et.UNKNOWN,"Fetching auth token failed: "+r.message);return this.j_(i)})})}z_(e,t){const r=this.G_(this.v_);this.stream=this.H_(e,t),this.stream.e_(()=>{r(()=>this.listener.e_())}),this.stream.n_(()=>{r(()=>(this.state=2,this.F_=this.xi.enqueueAfterDelay(this.D_,1e4,()=>(this.N_()&&(this.state=3),Promise.resolve())),this.listener.n_()))}),this.stream.i_(i=>{r(()=>this.j_(i))}),this.stream.onMessage(i=>{r(()=>++this.M_==1?this.J_(i):this.onNext(i))})}B_(){this.state=5,this.x_.y_(async()=>{this.state=0,this.start()})}j_(e){return At(U3,`close with error: ${e}`),this.stream=null,this.close(4,e)}G_(e){return t=>{this.xi.enqueueAndForget(()=>this.v_===e?t():(At(U3,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class SD extends nE{constructor(e,t,r,i,a,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.serializer=a}H_(e,t){return this.connection.I_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.x_.reset();const t=OO(this.serializer,e),r=function(a){if(!("targetChange"in a))return Zt.min();const o=a.targetChange;return o.targetIds&&o.targetIds.length?Zt.min():o.readTime?Zl(o.readTime):Zt.min()}(e);return this.listener.Y_(t,r)}Z_(e){const t={};t.database=iy(this.serializer),t.addTarget=function(a,o){let s;const u=o.target;if(s=Zv(u)?{documents:LO(a,u)}:{query:kO(a,u).gt},s.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){s.resumeToken=H6(a,o.resumeToken);const f=ty(a,o.expectedCount);f!==null&&(s.expectedCount=f)}else if(o.snapshotVersion.compareTo(Zt.min())>0){s.readTime=bg(a,o.snapshotVersion.toTimestamp());const f=ty(a,o.expectedCount);f!==null&&(s.expectedCount=f)}return s}(this.serializer,e);const r=BO(this.serializer,e);r&&(t.labels=r),this.Q_(t)}X_(e){const t={};t.database=iy(this.serializer),t.removeTarget=e,this.Q_(t)}}class CD extends nE{constructor(e,t,r,i,a,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,o),this.serializer=a}get ea(){return this.M_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.ea&&this.ta([])}H_(e,t){return this.connection.I_("Write",e,t)}J_(e){return Zn(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Zn(!e.writeResults||e.writeResults.length===0,55816),this.listener.na()}onNext(e){Zn(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.x_.reset();const t=PO(e.writeResults,e.commitTime),r=Zl(e.commitTime);return this.listener.ra(r,t)}ia(){const e={};e.database=iy(this.serializer),this.Q_(e)}ta(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>DO(this.serializer,r))};this.Q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TD{}class ID extends TD{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.sa=!1}oa(){if(this.sa)throw new Et(et.FAILED_PRECONDITION,"The client has already been terminated.")}zo(e,t,r,i){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,o])=>this.connection.zo(e,ny(t,r),i,a,o)).catch(a=>{throw a.name==="FirebaseError"?(a.code===et.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Et(et.UNKNOWN,a.toString())})}Yo(e,t,r,i,a){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Yo(e,ny(t,r),i,o,s,a)).catch(o=>{throw o.name==="FirebaseError"?(o.code===et.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Et(et.UNKNOWN,o.toString())})}terminate(){this.sa=!0,this.connection.terminate()}}class RD{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this._a=0,this.aa=null,this.ua=!0}ca(){this._a===0&&(this.la("Unknown"),this.aa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.aa=null,this.ha("Backend didn't respond within 10 seconds."),this.la("Offline"),Promise.resolve())))}Pa(e){this.state==="Online"?this.la("Unknown"):(this._a++,this._a>=1&&(this.Ta(),this.ha(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.la("Offline")))}set(e){this.Ta(),this._a=0,e==="Online"&&(this.ua=!1),this.la(e)}la(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ha(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ua?(Ku(t),this.ua=!1):At("OnlineStateTracker",t)}Ta(){this.aa!==null&&(this.aa.cancel(),this.aa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rh="RemoteStore";class ND{constructor(e,t,r,i,a){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ia=[],this.Ea=new Map,this.da=new Set,this.Aa=[],this.Ra=a,this.Ra.No(o=>{r.enqueueAndForget(async()=>{fh(this)&&(At(rh,"Restarting streams for network reachability change."),await async function(u){const f=en(u);f.da.add(4),await y0(f),f.Va.set("Unknown"),f.da.delete(4),await c2(f)}(this))})}),this.Va=new RD(r,i)}}async function c2(n){if(fh(n))for(const e of n.Aa)await e(!0)}async function y0(n){for(const e of n.Aa)await e(!1)}function rE(n,e){const t=en(n);t.Ea.has(e.targetId)||(t.Ea.set(e.targetId,e),I5(t)?T5(t):Nd(t).N_()&&C5(t,e))}function S5(n,e){const t=en(n),r=Nd(t);t.Ea.delete(e),r.N_()&&iE(t,e),t.Ea.size===0&&(r.N_()?r.k_():fh(t)&&t.Va.set("Unknown"))}function C5(n,e){if(n.ma.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Zt.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Nd(n).Z_(e)}function iE(n,e){n.ma.Ke(e),Nd(n).X_(e)}function T5(n){n.ma=new EO({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>n.Ea.get(e)||null,Pt:()=>n.datastore.serializer.databaseId}),Nd(n).start(),n.Va.ca()}function I5(n){return fh(n)&&!Nd(n).O_()&&n.Ea.size>0}function fh(n){return en(n).da.size===0}function aE(n){n.ma=void 0}async function OD(n){n.Va.set("Online")}async function DD(n){n.Ea.forEach((e,t)=>{C5(n,e)})}async function PD(n,e){aE(n),I5(n)?(n.Va.Pa(e),T5(n)):n.Va.set("Unknown")}async function LD(n,e,t){if(n.Va.set("Online"),e instanceof q6&&e.state===2&&e.cause)try{await async function(i,a){const o=a.cause;for(const s of a.targetIds)i.Ea.has(s)&&(await i.remoteSyncer.rejectListen(s,o),i.Ea.delete(s),i.ma.removeTarget(s))}(n,e)}catch(r){At(rh,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Eg(n,r)}else if(e instanceof Kp?n.ma.Xe(e):e instanceof z6?n.ma.ot(e):n.ma.nt(e),!t.isEqual(Zt.min()))try{const r=await eE(n.localStore);t.compareTo(r)>=0&&await function(a,o){const s=a.ma.It(o);return s.targetChanges.forEach((u,f)=>{if(u.resumeToken.approximateByteSize()>0){const h=a.Ea.get(f);h&&a.Ea.set(f,h.withResumeToken(u.resumeToken,o))}}),s.targetMismatches.forEach((u,f)=>{const h=a.Ea.get(u);if(!h)return;a.Ea.set(u,h.withResumeToken(ha.EMPTY_BYTE_STRING,h.snapshotVersion)),iE(a,u);const p=new Kc(h.target,u,f,h.sequenceNumber);C5(a,p)}),a.remoteSyncer.applyRemoteEvent(s)}(n,t)}catch(r){At(rh,"Failed to raise snapshot:",r),await Eg(n,r)}}async function Eg(n,e,t){if(!Rd(e))throw e;n.da.add(1),await y0(n),n.Va.set("Offline"),t||(t=()=>eE(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{At(rh,"Retrying IndexedDB access"),await t(),n.da.delete(1),await c2(n)})}function oE(n,e){return e().catch(t=>Eg(n,t,e))}async function f2(n){const e=en(n),t=cf(e);let r=e.Ia.length>0?e.Ia[e.Ia.length-1].batchId:f5;for(;kD(e);)try{const i=await mD(e.localStore,r);if(i===null){e.Ia.length===0&&t.k_();break}r=i.batchId,MD(e,i)}catch(i){await Eg(e,i)}sE(e)&&lE(e)}function kD(n){return fh(n)&&n.Ia.length<10}function MD(n,e){n.Ia.push(e);const t=cf(n);t.N_()&&t.ea&&t.ta(e.mutations)}function sE(n){return fh(n)&&!cf(n).O_()&&n.Ia.length>0}function lE(n){cf(n).start()}async function BD(n){cf(n).ia()}async function FD(n){const e=cf(n);for(const t of n.Ia)e.ta(t.mutations)}async function jD(n,e,t){const r=n.Ia.shift(),i=y5.from(r,e,t);await oE(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),await f2(n)}async function UD(n,e){e&&cf(n).ea&&await async function(r,i){if(function(o){return bO(o)&&o!==et.ABORTED}(i.code)){const a=r.Ia.shift();cf(r).L_(),await oE(r,()=>r.remoteSyncer.rejectFailedWrite(a.batchId,i)),await f2(r)}}(n,e),sE(n)&&lE(n)}async function V3(n,e){const t=en(n);t.asyncQueue.verifyOperationInProgress(),At(rh,"RemoteStore received new credentials");const r=fh(t);t.da.add(3),await y0(t),r&&t.Va.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.da.delete(3),await c2(t)}async function VD(n,e){const t=en(n);e?(t.da.delete(2),await c2(t)):e||(t.da.add(2),await y0(t),t.Va.set("Unknown"))}function Nd(n){return n.fa||(n.fa=function(t,r,i){const a=en(t);return a.oa(),new SD(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)}(n.datastore,n.asyncQueue,{e_:OD.bind(null,n),n_:DD.bind(null,n),i_:PD.bind(null,n),Y_:LD.bind(null,n)}),n.Aa.push(async e=>{e?(n.fa.L_(),I5(n)?T5(n):n.Va.set("Unknown")):(await n.fa.stop(),aE(n))})),n.fa}function cf(n){return n.ga||(n.ga=function(t,r,i){const a=en(t);return a.oa(),new CD(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)}(n.datastore,n.asyncQueue,{e_:()=>Promise.resolve(),n_:BD.bind(null,n),i_:UD.bind(null,n),na:FD.bind(null,n),ra:jD.bind(null,n)}),n.Aa.push(async e=>{e?(n.ga.L_(),await f2(n)):(await n.ga.stop(),n.Ia.length>0&&(At(rh,`Stopping write stream with ${n.Ia.length} pending writes`),n.Ia=[]))})),n.ga}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R5{constructor(e,t,r,i,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new Gu,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,a){const o=Date.now()+r,s=new R5(e,t,o,i,a);return s.start(r),s}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Et(et.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function N5(n,e){if(Ku("AsyncQueue",`${e}: ${n}`),Rd(n))return new Et(et.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ld{static emptySet(e){return new ld(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||kt.comparator(t.key,r.key):(t,r)=>kt.comparator(t.key,r.key),this.keyedMap=N1(),this.sortedSet=new zr(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof ld)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new ld;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z3{constructor(){this.pa=new zr(kt.comparator)}track(e){const t=e.doc.key,r=this.pa.get(t);r?e.type!==0&&r.type===3?this.pa=this.pa.insert(t,e):e.type===3&&r.type!==1?this.pa=this.pa.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.pa=this.pa.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.pa=this.pa.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.pa=this.pa.remove(t):e.type===1&&r.type===2?this.pa=this.pa.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.pa=this.pa.insert(t,{type:2,doc:e.doc}):$t(63341,{Vt:e,ya:r}):this.pa=this.pa.insert(t,e)}wa(){const e=[];return this.pa.inorderTraversal((t,r)=>{e.push(r)}),e}}class xd{constructor(e,t,r,i,a,o,s,u,f){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=u,this.hasCachedResults=f}static fromInitialDocuments(e,t,r,i,a){const o=[];return t.forEach(s=>{o.push({type:0,doc:s})}),new xd(e,t,ld.emptySet(t),o,r,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&i2(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zD{constructor(){this.ba=void 0,this.Sa=[]}Da(){return this.Sa.some(e=>e.va())}}class qD{constructor(){this.queries=q3(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){const i=en(t),a=i.queries;i.queries=q3(),a.forEach((o,s)=>{for(const u of s.Sa)u.onError(r)})})(this,new Et(et.ABORTED,"Firestore shutting down"))}}function q3(){return new ch(n=>R6(n),i2)}async function O5(n,e){const t=en(n);let r=3;const i=e.query;let a=t.queries.get(i);a?!a.Da()&&e.va()&&(r=2):(a=new zD,r=e.va()?0:1);try{switch(r){case 0:a.ba=await t.onListen(i,!0);break;case 1:a.ba=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(o){const s=N5(o,`Initialization of query '${Yh(e.query)}' failed`);return void e.onError(s)}t.queries.set(i,a),a.Sa.push(e),e.Fa(t.onlineState),a.ba&&e.Ma(a.ba)&&P5(t)}async function D5(n,e){const t=en(n),r=e.query;let i=3;const a=t.queries.get(r);if(a){const o=a.Sa.indexOf(e);o>=0&&(a.Sa.splice(o,1),a.Sa.length===0?i=e.va()?0:1:!a.Da()&&e.va()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function HD(n,e){const t=en(n);let r=!1;for(const i of e){const a=i.query,o=t.queries.get(a);if(o){for(const s of o.Sa)s.Ma(i)&&(r=!0);o.ba=i}}r&&P5(t)}function GD(n,e,t){const r=en(n),i=r.queries.get(e);if(i)for(const a of i.Sa)a.onError(t);r.queries.delete(e)}function P5(n){n.Ca.forEach(e=>{e.next()})}var sy,H3;(H3=sy||(sy={})).xa="default",H3.Cache="cache";class L5{constructor(e,t,r){this.query=e,this.Oa=t,this.Na=!1,this.Ba=null,this.onlineState="Unknown",this.options=r||{}}Ma(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new xd(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Na?this.La(e)&&(this.Oa.next(e),t=!0):this.ka(e,this.onlineState)&&(this.qa(e),t=!0),this.Ba=e,t}onError(e){this.Oa.error(e)}Fa(e){this.onlineState=e;let t=!1;return this.Ba&&!this.Na&&this.ka(this.Ba,e)&&(this.qa(this.Ba),t=!0),t}ka(e,t){if(!e.fromCache||!this.va())return!0;const r=t!=="Offline";return(!this.options.Qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}La(e){if(e.docChanges.length>0)return!0;const t=this.Ba&&this.Ba.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}qa(e){e=xd.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Na=!0,this.Oa.next(e)}va(){return this.options.source!==sy.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uE{constructor(e){this.key=e}}class cE{constructor(e){this.key=e}}class WD{constructor(e,t){this.query=e,this.Ha=t,this.Ja=null,this.hasCachedResults=!1,this.current=!1,this.Ya=bn(),this.mutatedKeys=bn(),this.Za=N6(e),this.Xa=new ld(this.Za)}get eu(){return this.Ha}tu(e,t){const r=t?t.nu:new z3,i=t?t.Xa:this.Xa;let a=t?t.mutatedKeys:this.mutatedKeys,o=i,s=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,f=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{const g=i.get(h),m=a2(this.query,p)?p:null,_=!!g&&this.mutatedKeys.has(g.key),b=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let T=!1;g&&m?g.data.isEqual(m.data)?_!==b&&(r.track({type:3,doc:m}),T=!0):this.ru(g,m)||(r.track({type:2,doc:m}),T=!0,(u&&this.Za(m,u)>0||f&&this.Za(m,f)<0)&&(s=!0)):!g&&m?(r.track({type:0,doc:m}),T=!0):g&&!m&&(r.track({type:1,doc:g}),T=!0,(u||f)&&(s=!0)),T&&(m?(o=o.add(m),a=b?a.add(h):a.delete(h)):(o=o.delete(h),a=a.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),a=a.delete(h.key),r.track({type:1,doc:h})}return{Xa:o,nu:r,Cs:s,mutatedKeys:a}}ru(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const a=this.Xa;this.Xa=e.Xa,this.mutatedKeys=e.mutatedKeys;const o=e.nu.wa();o.sort((h,p)=>function(m,_){const b=T=>{switch(T){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return $t(20277,{Vt:T})}};return b(m)-b(_)}(h.type,p.type)||this.Za(h.doc,p.doc)),this.iu(r),i=i!=null&&i;const s=t&&!i?this.su():[],u=this.Ya.size===0&&this.current&&!i?1:0,f=u!==this.Ja;return this.Ja=u,o.length!==0||f?{snapshot:new xd(this.query,e.Xa,a,o,e.mutatedKeys,u===0,f,!1,!!r&&r.resumeToken.approximateByteSize()>0),ou:s}:{ou:s}}Fa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Xa:this.Xa,nu:new z3,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{ou:[]}}_u(e){return!this.Ha.has(e)&&!!this.Xa.has(e)&&!this.Xa.get(e).hasLocalMutations}iu(e){e&&(e.addedDocuments.forEach(t=>this.Ha=this.Ha.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ha=this.Ha.delete(t)),this.current=e.current)}su(){if(!this.current)return[];const e=this.Ya;this.Ya=bn(),this.Xa.forEach(r=>{this._u(r.key)&&(this.Ya=this.Ya.add(r.key))});const t=[];return e.forEach(r=>{this.Ya.has(r)||t.push(new cE(r))}),this.Ya.forEach(r=>{e.has(r)||t.push(new uE(r))}),t}au(e){this.Ha=e.$s,this.Ya=bn();const t=this.tu(e.documents);return this.applyChanges(t,!0)}uu(){return xd.fromInitialDocuments(this.query,this.Xa,this.mutatedKeys,this.Ja===0,this.hasCachedResults)}}const k5="SyncEngine";class $D{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class XD{constructor(e){this.key=e,this.cu=!1}}class YD{constructor(e,t,r,i,a,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.lu={},this.hu=new ch(s=>R6(s),i2),this.Pu=new Map,this.Tu=new Set,this.Iu=new zr(kt.comparator),this.Eu=new Map,this.du=new w5,this.Au={},this.Ru=new Map,this.Vu=yd.lr(),this.onlineState="Unknown",this.mu=void 0}get isPrimaryClient(){return this.mu===!0}}async function KD(n,e,t=!0){const r=mE(n);let i;const a=r.hu.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),i=a.view.uu()):i=await fE(r,e,t,!0),i}async function QD(n,e){const t=mE(n);await fE(t,e,!0,!1)}async function fE(n,e,t,r){const i=await vD(n.localStore,Ql(e)),a=i.targetId,o=n.sharedClientState.addLocalQueryTarget(a,t);let s;return r&&(s=await ZD(n,e,a,o==="current",i.resumeToken)),n.isPrimaryClient&&t&&rE(n.remoteStore,i),s}async function ZD(n,e,t,r,i){n.fu=(p,g,m)=>async function(b,T,S,D){let B=T.view.tu(S);B.Cs&&(B=await M3(b.localStore,T.query,!1).then(({documents:P})=>T.view.tu(P,B)));const V=D&&D.targetChanges.get(T.targetId),Y=D&&D.targetMismatches.get(T.targetId)!=null,q=T.view.applyChanges(B,b.isPrimaryClient,V,Y);return W3(b,T.targetId,q.ou),q.snapshot}(n,p,g,m);const a=await M3(n.localStore,e,!0),o=new WD(e,a.$s),s=o.tu(a.documents),u=v0.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),f=o.applyChanges(s,n.isPrimaryClient,u);W3(n,t,f.ou);const h=new $D(e,t,o);return n.hu.set(e,h),n.Pu.has(t)?n.Pu.get(t).push(e):n.Pu.set(t,[e]),f.snapshot}async function JD(n,e,t){const r=en(n),i=r.hu.get(e),a=r.Pu.get(i.targetId);if(a.length>1)return r.Pu.set(i.targetId,a.filter(o=>!i2(o,e))),void r.hu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await ay(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&S5(r.remoteStore,i.targetId),ly(r,i.targetId)}).catch(Id)):(ly(r,i.targetId),await ay(r.localStore,i.targetId,!0))}async function eP(n,e){const t=en(n),r=t.hu.get(e),i=t.Pu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),S5(t.remoteStore,r.targetId))}async function tP(n,e,t){const r=lP(n);try{const i=await function(o,s){const u=en(o),f=Ai.now(),h=s.reduce((m,_)=>m.add(_.key),bn());let p,g;return u.persistence.runTransaction("Locally write mutations","readwrite",m=>{let _=Qu(),b=bn();return u.Bs.getEntries(m,h).next(T=>{_=T,_.forEach((S,D)=>{D.isValidDocument()||(b=b.add(S))})}).next(()=>u.localDocuments.getOverlayedDocuments(m,_)).next(T=>{p=T;const S=[];for(const D of s){const B=vO(D,p.get(D.key).overlayedDocument);B!=null&&S.push(new vf(D.key,B,w6(B.value.mapValue),_s.exists(!0)))}return u.mutationQueue.addMutationBatch(m,f,S,s)}).next(T=>{g=T;const S=T.applyToLocalDocumentSet(p,b);return u.documentOverlayCache.saveOverlays(m,T.batchId,S)})}).then(()=>({batchId:g.batchId,changes:D6(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,s,u){let f=o.Au[o.currentUser.toKey()];f||(f=new zr(fn)),f=f.insert(s,u),o.Au[o.currentUser.toKey()]=f}(r,i.batchId,t),await x0(r,i.changes),await f2(r.remoteStore)}catch(i){const a=N5(i,"Failed to persist write");t.reject(a)}}async function hE(n,e){const t=en(n);try{const r=await pD(t.localStore,e);e.targetChanges.forEach((i,a)=>{const o=t.Eu.get(a);o&&(Zn(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?o.cu=!0:i.modifiedDocuments.size>0?Zn(o.cu,14607):i.removedDocuments.size>0&&(Zn(o.cu,42227),o.cu=!1))}),await x0(t,r,e)}catch(r){await Id(r)}}function G3(n,e,t){const r=en(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const i=[];r.hu.forEach((a,o)=>{const s=o.view.Fa(e);s.snapshot&&i.push(s.snapshot)}),function(o,s){const u=en(o);u.onlineState=s;let f=!1;u.queries.forEach((h,p)=>{for(const g of p.Sa)g.Fa(s)&&(f=!0)}),f&&P5(u)}(r.eventManager,e),i.length&&r.lu.Y_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function nP(n,e,t){const r=en(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Eu.get(e),a=i&&i.key;if(a){let o=new zr(kt.comparator);o=o.insert(a,La.newNoDocument(a,Zt.min()));const s=bn().add(a),u=new l2(Zt.min(),new Map,new zr(fn),o,s);await hE(r,u),r.Iu=r.Iu.remove(a),r.Eu.delete(e),M5(r)}else await ay(r.localStore,e,!1).then(()=>ly(r,e,t)).catch(Id)}async function rP(n,e){const t=en(n),r=e.batch.batchId;try{const i=await dD(t.localStore,e);pE(t,r,null),dE(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await x0(t,i)}catch(i){await Id(i)}}async function iP(n,e,t){const r=en(n);try{const i=await function(o,s){const u=en(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",f=>{let h;return u.mutationQueue.lookupMutationBatch(f,s).next(p=>(Zn(p!==null,37113),h=p.keys(),u.mutationQueue.removeMutationBatch(f,p))).next(()=>u.mutationQueue.performConsistencyCheck(f)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(f,h,s)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,h)).next(()=>u.localDocuments.getDocuments(f,h))})}(r.localStore,e);pE(r,e,t),dE(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await x0(r,i)}catch(i){await Id(i)}}function dE(n,e){(n.Ru.get(e)||[]).forEach(t=>{t.resolve()}),n.Ru.delete(e)}function pE(n,e,t){const r=en(n);let i=r.Au[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(t?a.reject(t):a.resolve(),i=i.remove(e)),r.Au[r.currentUser.toKey()]=i}}function ly(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Pu.get(e))n.hu.delete(r),t&&n.lu.gu(r,t);n.Pu.delete(e),n.isPrimaryClient&&n.du.Hr(e).forEach(r=>{n.du.containsKey(r)||gE(n,r)})}function gE(n,e){n.Tu.delete(e.path.canonicalString());const t=n.Iu.get(e);t!==null&&(S5(n.remoteStore,t),n.Iu=n.Iu.remove(e),n.Eu.delete(t),M5(n))}function W3(n,e,t){for(const r of t)r instanceof uE?(n.du.addReference(r.key,e),aP(n,r)):r instanceof cE?(At(k5,"Document no longer in limbo: "+r.key),n.du.removeReference(r.key,e),n.du.containsKey(r.key)||gE(n,r.key)):$t(19791,{pu:r})}function aP(n,e){const t=e.key,r=t.path.canonicalString();n.Iu.get(t)||n.Tu.has(r)||(At(k5,"New document in limbo: "+t),n.Tu.add(r),M5(n))}function M5(n){for(;n.Tu.size>0&&n.Iu.size<n.maxConcurrentLimboResolutions;){const e=n.Tu.values().next().value;n.Tu.delete(e);const t=new kt(Sr.fromString(e)),r=n.Vu.next();n.Eu.set(r,new XD(t)),n.Iu=n.Iu.insert(t,r),rE(n.remoteStore,new Kc(Ql(r2(t.path)),r,"TargetPurposeLimboResolution",e2.le))}}async function x0(n,e,t){const r=en(n),i=[],a=[],o=[];r.hu.isEmpty()||(r.hu.forEach((s,u)=>{o.push(r.fu(u,e,t).then(f=>{var h;if((f||t)&&r.isPrimaryClient){const p=f?!f.fromCache:(h=t==null?void 0:t.targetChanges.get(u.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(f){i.push(f);const p=A5.Rs(u.targetId,f);a.push(p)}}))}),await Promise.all(o),r.lu.Y_(i),await async function(u,f){const h=en(u);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>Je.forEach(f,g=>Je.forEach(g.ds,m=>h.persistence.referenceDelegate.addReference(p,g.targetId,m)).next(()=>Je.forEach(g.As,m=>h.persistence.referenceDelegate.removeReference(p,g.targetId,m)))))}catch(p){if(!Rd(p))throw p;At(E5,"Failed to update sequence numbers: "+p)}for(const p of f){const g=p.targetId;if(!p.fromCache){const m=h.xs.get(g),_=m.snapshotVersion,b=m.withLastLimboFreeSnapshotVersion(_);h.xs=h.xs.insert(g,b)}}}(r.localStore,a))}async function oP(n,e){const t=en(n);if(!t.currentUser.isEqual(e)){At(k5,"User change. New user:",e.toKey());const r=await J6(t.localStore,e);t.currentUser=e,function(a,o){a.Ru.forEach(s=>{s.forEach(u=>{u.reject(new Et(et.CANCELLED,o))})}),a.Ru.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await x0(t,r.ks)}}function sP(n,e){const t=en(n),r=t.Eu.get(e);if(r&&r.cu)return bn().add(r.key);{let i=bn();const a=t.Pu.get(e);if(!a)return i;for(const o of a){const s=t.hu.get(o);i=i.unionWith(s.view.eu)}return i}}function mE(n){const e=en(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=hE.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=sP.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=nP.bind(null,e),e.lu.Y_=HD.bind(null,e.eventManager),e.lu.gu=GD.bind(null,e.eventManager),e}function lP(n){const e=en(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=rP.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=iP.bind(null,e),e}class Sg{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=u2(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Su(e),await this.persistence.start(),this.localStore=this.Du(e),this.gcScheduler=this.vu(e,this.localStore),this.indexBackfillerScheduler=this.Cu(e,this.localStore)}vu(e,t){return null}Cu(e,t){return null}Du(e){return hD(this.persistence,new uD,e.initialUser,this.serializer)}Su(e){return new Z6(b5.fi,this.serializer)}bu(e){return new xD}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Sg.provider={build:()=>new Sg};class uP extends Sg{constructor(e){super(),this.cacheSizeBytes=e}vu(e,t){Zn(this.persistence.referenceDelegate instanceof Ag,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new XO(r,e.asyncQueue,t)}Su(e){const t=this.cacheSizeBytes!==void 0?go.withCacheSize(this.cacheSizeBytes):go.DEFAULT;return new Z6(r=>Ag.fi(r,t),this.serializer)}}class uy{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>G3(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=oP.bind(null,this.syncEngine),await VD(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new qD}()}createDatastore(e){const t=u2(e.databaseInfo.databaseId),r=function(a){return new ED(a)}(e.databaseInfo);return function(a,o,s,u){return new ID(a,o,s,u)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,i,a,o,s){return new ND(r,i,a,o,s)}(this.localStore,this.datastore,e.asyncQueue,t=>G3(this.syncEngine,t,0),function(){return j3.C()?new j3:new _D}())}createSyncEngine(e,t){return function(i,a,o,s,u,f,h){const p=new YD(i,a,o,s,u,f);return h&&(p.mu=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(i){const a=en(i);At(rh,"RemoteStore shutting down."),a.da.add(5),await y0(a),a.Ra.shutdown(),a.Va.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}uy.provider={build:()=>new uy};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B5{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Mu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Mu(this.observer.error,e):Ku("Uncaught Error in snapshot listener:",e.toString()))}xu(){this.muted=!0}Mu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ff="FirestoreClient";class cP{constructor(e,t,r,i,a){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Pa.UNAUTHENTICATED,this.clientId=f6.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,async o=>{At(ff,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(At(ff,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Gu;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=N5(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function av(n,e){n.asyncQueue.verifyOperationInProgress(),At(ff,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async i=>{r.isEqual(i)||(await J6(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function $3(n,e){n.asyncQueue.verifyOperationInProgress();const t=await fP(n);At(ff,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>V3(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>V3(e.remoteStore,i)),n._onlineComponents=e}async function fP(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){At(ff,"Using user provided OfflineComponentProvider");try{await av(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(i){return i.name==="FirebaseError"?i.code===et.FAILED_PRECONDITION||i.code===et.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;pd("Error using user provided cache. Falling back to memory cache: "+t),await av(n,new Sg)}}else At(ff,"Using default OfflineComponentProvider"),await av(n,new uP(void 0));return n._offlineComponents}async function vE(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(At(ff,"Using user provided OnlineComponentProvider"),await $3(n,n._uninitializedComponentsProvider._online)):(At(ff,"Using default OnlineComponentProvider"),await $3(n,new uy))),n._onlineComponents}function hP(n){return vE(n).then(e=>e.syncEngine)}async function Cg(n){const e=await vE(n),t=e.eventManager;return t.onListen=KD.bind(null,e.syncEngine),t.onUnlisten=JD.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=QD.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=eP.bind(null,e.syncEngine),t}function dP(n,e,t={}){const r=new Gu;return n.asyncQueue.enqueueAndForget(async()=>function(a,o,s,u,f){const h=new B5({next:g=>{h.xu(),o.enqueueAndForget(()=>D5(a,p));const m=g.docs.has(s);!m&&g.fromCache?f.reject(new Et(et.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&g.fromCache&&u&&u.source==="server"?f.reject(new Et(et.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):f.resolve(g)},error:g=>f.reject(g)}),p=new L5(r2(s.path),h,{includeMetadataChanges:!0,Qa:!0});return O5(a,p)}(await Cg(n),n.asyncQueue,e,t,r)),r.promise}function pP(n,e,t={}){const r=new Gu;return n.asyncQueue.enqueueAndForget(async()=>function(a,o,s,u,f){const h=new B5({next:g=>{h.xu(),o.enqueueAndForget(()=>D5(a,p)),g.fromCache&&u.source==="server"?f.reject(new Et(et.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(g)},error:g=>f.reject(g)}),p=new L5(s,h,{includeMetadataChanges:!0,Qa:!0});return O5(a,p)}(await Cg(n),n.asyncQueue,e,t,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yE(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X3=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xE(n,e,t){if(!t)throw new Et(et.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function gP(n,e,t,r){if(e===!0&&r===!0)throw new Et(et.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Y3(n){if(!kt.isDocumentKey(n))throw new Et(et.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function K3(n){if(kt.isDocumentKey(n))throw new Et(et.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function h2(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":$t(12329,{type:typeof n})}function _o(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Et(et.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=h2(n);throw new Et(et.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _E="firestore.googleapis.com",Q3=!0;class Z3{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Et(et.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=_E,this.ssl=Q3}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:Q3;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Q6;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<WO)throw new Et(et.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}gP("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=yE((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new Et(et.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new Et(et.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new Et(et.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class d2{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Z3({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Et(et.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Et(et.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Z3(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new b9;switch(r.type){case"firstParty":return new C9(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Et(et.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=X3.get(t);r&&(At("ComponentProvider","Removing Datastore"),X3.delete(t),r.terminate())}(this),Promise.resolve()}}function mP(n,e,t,r={}){var i;n=_o(n,d2);const a=Sd(e),o=n._getSettings(),s=Object.assign(Object.assign({},o),{emulatorOptions:n._getEmulatorOptions()}),u=`${e}:${t}`;a&&(Zy(`https://${u}`),Jy("Firestore",!0)),o.host!==_E&&o.host!==u&&pd("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const f=Object.assign(Object.assign({},o),{host:u,ssl:a,emulatorOptions:r});if(!af(f,s)&&(n._setSettings(f),r.mockUserToken)){let h,p;if(typeof r.mockUserToken=="string")h=r.mockUserToken,p=Pa.MOCK_USER;else{h=fA(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);const g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new Et(et.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new Pa(g)}n._authCredentials=new A9(new u6(h,p))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hh{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new hh(this.firestore,e,this._query)}}class Ma{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new tf(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ma(this.firestore,e,this._key)}}class tf extends hh{constructor(e,t,r){super(e,t,r2(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ma(this.firestore,null,new kt(e))}withConverter(e){return new tf(this.firestore,e,this._path)}}function Tr(n,e,...t){if(n=Vr(n),xE("collection","path",e),n instanceof d2){const r=Sr.fromString(e,...t);return K3(r),new tf(n,null,r)}{if(!(n instanceof Ma||n instanceof tf))throw new Et(et.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Sr.fromString(e,...t));return K3(r),new tf(n.firestore,null,r)}}function Jr(n,e,...t){if(n=Vr(n),arguments.length===1&&(e=f6.newId()),xE("doc","path",e),n instanceof d2){const r=Sr.fromString(e,...t);return Y3(r),new Ma(n,null,new kt(r))}{if(!(n instanceof Ma||n instanceof tf))throw new Et(et.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Sr.fromString(e,...t));return Y3(r),new Ma(n.firestore,n instanceof tf?n.converter:null,new kt(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J3="AsyncQueue";class eb{constructor(e=Promise.resolve()){this.Ju=[],this.Yu=!1,this.Zu=[],this.Xu=null,this.ec=!1,this.tc=!1,this.nc=[],this.x_=new tE(this,"async_queue_retry"),this.rc=()=>{const r=iv();r&&At(J3,"Visibility state changed to "+r.visibilityState),this.x_.b_()},this.sc=e;const t=iv();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.rc)}get isShuttingDown(){return this.Yu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.oc(),this._c(e)}enterRestrictedMode(e){if(!this.Yu){this.Yu=!0,this.tc=e||!1;const t=iv();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.rc)}}enqueue(e){if(this.oc(),this.Yu)return new Promise(()=>{});const t=new Gu;return this._c(()=>this.Yu&&this.tc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ju.push(e),this.ac()))}async ac(){if(this.Ju.length!==0){try{await this.Ju[0](),this.Ju.shift(),this.x_.reset()}catch(e){if(!Rd(e))throw e;At(J3,"Operation failed with retryable error: "+e)}this.Ju.length>0&&this.x_.y_(()=>this.ac())}}_c(e){const t=this.sc.then(()=>(this.ec=!0,e().catch(r=>{throw this.Xu=r,this.ec=!1,Ku("INTERNAL UNHANDLED ERROR: ",tb(r)),r}).then(r=>(this.ec=!1,r))));return this.sc=t,t}enqueueAfterDelay(e,t,r){this.oc(),this.nc.indexOf(e)>-1&&(t=0);const i=R5.createAndSchedule(this,e,t,r,a=>this.uc(a));return this.Zu.push(i),i}oc(){this.Xu&&$t(47125,{cc:tb(this.Xu)})}verifyOperationInProgress(){}async lc(){let e;do e=this.sc,await e;while(e!==this.sc)}hc(e){for(const t of this.Zu)if(t.timerId===e)return!0;return!1}Pc(e){return this.lc().then(()=>{this.Zu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Zu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.lc()})}Tc(e){this.nc.push(e)}uc(e){const t=this.Zu.indexOf(e);this.Zu.splice(t,1)}}function tb(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nb(n){return function(t,r){if(typeof t!="object"||t===null)return!1;const i=t;for(const a of r)if(a in i&&typeof i[a]=="function")return!0;return!1}(n,["next","error","complete"])}class Zu extends d2{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new eb,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new eb(e),this._firestoreClient=void 0,await e}}}function vP(n,e){const t=typeof n=="object"?n:Kg(),r=typeof n=="string"?n:vg,i=pf(t,"firestore").getImmediate({identifier:r});if(!i._initialized){const a=lA("firestore");a&&mP(i,...a)}return i}function p2(n){if(n._terminated)throw new Et(et.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||yP(n),n._firestoreClient}function yP(n){var e,t,r;const i=n._freezeSettings(),a=function(s,u,f,h){return new V9(s,u,f,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,yE(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new cP(n._authCredentials,n._appCheckCredentials,n._queue,a,n._componentsProvider&&function(s){const u=s==null?void 0:s._online.build();return{_offline:s==null?void 0:s._offline.build(u),_online:u}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _d{constructor(e){this._byteString=e}static fromBase64String(e){try{return new _d(ha.fromBase64String(e))}catch(t){throw new Et(et.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new _d(ha.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g2{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Et(et.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ca(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m2{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F5{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Et(et.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Et(et.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return fn(this._lat,e._lat)||fn(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j5{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==i[a])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xP=/^__.*__$/;class _P{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new vf(e,this.data,this.fieldMask,t,this.fieldTransforms):new m0(e,this.data,t,this.fieldTransforms)}}class wE{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new vf(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function bE(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw $t(40011,{Ic:n})}}class U5{constructor(e,t,r,i,a,o){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,a===void 0&&this.Ec(),this.fieldTransforms=a||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ic(){return this.settings.Ic}dc(e){return new U5(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ac(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.dc({path:r,Rc:!1});return i.Vc(e),i}mc(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.dc({path:r,Rc:!1});return i.Ec(),i}fc(e){return this.dc({path:void 0,Rc:!0})}gc(e){return Tg(e,this.settings.methodName,this.settings.yc||!1,this.path,this.settings.wc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Ec(){if(this.path)for(let e=0;e<this.path.length;e++)this.Vc(this.path.get(e))}Vc(e){if(e.length===0)throw this.gc("Document fields must not be empty");if(bE(this.Ic)&&xP.test(e))throw this.gc('Document fields cannot begin and end with "__"')}}class wP{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||u2(e)}bc(e,t,r,i=!1){return new U5({Ic:e,methodName:t,wc:r,path:ca.emptyPath(),Rc:!1,yc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function v2(n){const e=n._freezeSettings(),t=u2(n._databaseId);return new wP(n._databaseId,!!e.ignoreUndefinedProperties,t)}function AE(n,e,t,r,i,a={}){const o=n.bc(a.merge||a.mergeFields?2:0,e,t,i);z5("Data must be an object, but it was:",o,r);const s=EE(r,o);let u,f;if(a.merge)u=new Wo(o.fieldMask),f=o.fieldTransforms;else if(a.mergeFields){const h=[];for(const p of a.mergeFields){const g=cy(e,p,t);if(!o.contains(g))throw new Et(et.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);CE(h,g)||h.push(g)}u=new Wo(h),f=o.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,f=o.fieldTransforms;return new _P(new vo(s),u,f)}class y2 extends m2{_toFieldTransform(e){if(e.Ic!==2)throw e.Ic===1?e.gc(`${this._methodName}() can only appear at the top level of your update data`):e.gc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof y2}}class V5 extends m2{_toFieldTransform(e){return new dO(e.path,new e0)}isEqual(e){return e instanceof V5}}function bP(n,e,t,r){const i=n.bc(1,e,t);z5("Data must be an object, but it was:",i,r);const a=[],o=vo.empty();mf(r,(u,f)=>{const h=q5(e,u,t);f=Vr(f);const p=i.mc(h);if(f instanceof y2)a.push(h);else{const g=_0(f,p);g!=null&&(a.push(h),o.set(h,g))}});const s=new Wo(a);return new wE(o,s,i.fieldTransforms)}function AP(n,e,t,r,i,a){const o=n.bc(1,e,t),s=[cy(e,r,t)],u=[i];if(a.length%2!=0)throw new Et(et.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<a.length;g+=2)s.push(cy(e,a[g])),u.push(a[g+1]);const f=[],h=vo.empty();for(let g=s.length-1;g>=0;--g)if(!CE(f,s[g])){const m=s[g];let _=u[g];_=Vr(_);const b=o.mc(m);if(_ instanceof y2)f.push(m);else{const T=_0(_,b);T!=null&&(f.push(m),h.set(m,T))}}const p=new Wo(f);return new wE(h,p,o.fieldTransforms)}function EP(n,e,t,r=!1){return _0(t,n.bc(r?4:3,e))}function _0(n,e){if(SE(n=Vr(n)))return z5("Unsupported field value:",e,n),EE(n,e);if(n instanceof m2)return function(r,i){if(!bE(i.Ic))throw i.gc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.gc(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(i);a&&i.fieldTransforms.push(a)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Rc&&e.Ic!==4)throw e.gc("Nested arrays are not supported");return function(r,i){const a=[];let o=0;for(const s of r){let u=_0(s,i.fc(o));u==null&&(u={nullValue:"NULL_VALUE"}),a.push(u),o++}return{arrayValue:{values:a}}}(n,e)}return function(r,i){if((r=Vr(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return cO(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=Ai.fromDate(r);return{timestampValue:bg(i.serializer,a)}}if(r instanceof Ai){const a=new Ai(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:bg(i.serializer,a)}}if(r instanceof F5)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof _d)return{bytesValue:H6(i.serializer,r._byteString)};if(r instanceof Ma){const a=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(a))throw i.gc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:_5(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof j5)return function(o,s){return{mapValue:{fields:{[x6]:{stringValue:_6},[yg]:{arrayValue:{values:o.toArray().map(f=>{if(typeof f!="number")throw s.gc("VectorValues must only contain numeric values.");return m5(s.serializer,f)})}}}}}}(r,i);throw i.gc(`Unsupported field value: ${h2(r)}`)}(n,e)}function EE(n,e){const t={};return d6(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):mf(n,(r,i)=>{const a=_0(i,e.Ac(r));a!=null&&(t[r]=a)}),{mapValue:{fields:t}}}function SE(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Ai||n instanceof F5||n instanceof _d||n instanceof Ma||n instanceof m2||n instanceof j5)}function z5(n,e,t){if(!SE(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){const r=h2(t);throw r==="an object"?e.gc(n+" a custom object"):e.gc(n+" "+r)}}function cy(n,e,t){if((e=Vr(e))instanceof g2)return e._internalPath;if(typeof e=="string")return q5(n,e);throw Tg("Field path arguments must be of type string or ",n,!1,void 0,t)}const SP=new RegExp("[~\\*/\\[\\]]");function q5(n,e,t){if(e.search(SP)>=0)throw Tg(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new g2(...e.split("."))._internalPath}catch{throw Tg(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Tg(n,e,t,r,i){const a=r&&!r.isEmpty(),o=i!==void 0;let s=`Function ${e}() called with invalid data`;t&&(s+=" (via `toFirestore()`)"),s+=". ";let u="";return(a||o)&&(u+=" (found",a&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new Et(et.INVALID_ARGUMENT,s+n+u)}function CE(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TE{constructor(e,t,r,i,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new Ma(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new CP(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(H5("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class CP extends TE{data(){return super.data()}}function H5(n,e){return typeof e=="string"?q5(n,e):e instanceof g2?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IE(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new Et(et.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class G5{}class TP extends G5{}function Wu(n,e,...t){let r=[];e instanceof G5&&r.push(e),r=r.concat(t),function(a){const o=a.filter(u=>u instanceof W5).length,s=a.filter(u=>u instanceof x2).length;if(o>1||o>0&&s>0)throw new Et(et.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class x2 extends TP{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new x2(e,t,r)}_apply(e){const t=this._parse(e);return RE(e._query,t),new hh(e.firestore,e.converter,Jv(e._query,t))}_parse(e){const t=v2(e.firestore);return function(a,o,s,u,f,h,p){let g;if(f.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new Et(et.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){ib(p,h);const _=[];for(const b of p)_.push(rb(u,a,b));g={arrayValue:{values:_}}}else g=rb(u,a,p)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||ib(p,h),g=EP(s,o,p,h==="in"||h==="not-in");return wi.create(f,h,g)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function Ju(n,e,t){const r=e,i=H5("where",n);return x2._create(i,r,t)}class W5 extends G5{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new W5(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:ul.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(i,a){let o=i;const s=a.getFlattenedFilters();for(const u of s)RE(o,u),o=Jv(o,u)}(e._query,t),new hh(e.firestore,e.converter,Jv(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function rb(n,e,t){if(typeof(t=Vr(t))=="string"){if(t==="")throw new Et(et.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!I6(e)&&t.indexOf("/")!==-1)throw new Et(et.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Sr.fromString(t));if(!kt.isDocumentKey(r))throw new Et(et.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return v3(n,new kt(r))}if(t instanceof Ma)return v3(n,t._key);throw new Et(et.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${h2(t)}.`)}function ib(n,e){if(!Array.isArray(n)||n.length===0)throw new Et(et.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function RE(n,e){const t=function(i,a){for(const o of i)for(const s of o.getFlattenedFilters())if(a.indexOf(s.op)>=0)return s.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new Et(et.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Et(et.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class IP{convertValue(e,t="none"){switch(uf(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ui(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(lf(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw $t(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return mf(e,(i,a)=>{r[i]=this.convertValue(a,t)}),r}convertVectorValue(e){var t,r,i;const a=(i=(r=(t=e.fields)===null||t===void 0?void 0:t[yg].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>ui(o.doubleValue));return new j5(a)}convertGeoPoint(e){return new F5(ui(e.latitude),ui(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=n2(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Q1(e));default:return null}}convertTimestamp(e){const t=sf(e);return new Ai(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Sr.fromString(e);Zn(K6(r),9688,{name:e});const i=new Z1(r.get(1),r.get(3)),a=new kt(r.popFirst(5));return i.isEqual(t)||Ku(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NE(n,e,t){let r;return r=n?n.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D1{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class OE extends TE{constructor(e,t,r,i,a,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Qp(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(H5("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class Qp extends OE{data(e={}){return super.data(e)}}class DE{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new D1(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Qp(this._firestore,this._userDataWriter,r.key,r,new D1(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Et(et.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,a){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(s=>{const u=new Qp(i._firestore,i._userDataWriter,s.doc.key,s.doc,new D1(i._snapshot.mutatedKeys.has(s.doc.key),i._snapshot.fromCache),i.query.converter);return s.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(s=>a||s.type!==3).map(s=>{const u=new Qp(i._firestore,i._userDataWriter,s.doc.key,s.doc,new D1(i._snapshot.mutatedKeys.has(s.doc.key),i._snapshot.fromCache),i.query.converter);let f=-1,h=-1;return s.type!==0&&(f=o.indexOf(s.doc.key),o=o.delete(s.doc.key)),s.type!==1&&(o=o.add(s.doc),h=o.indexOf(s.doc.key)),{type:RP(s.type),doc:u,oldIndex:f,newIndex:h}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function RP(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return $t(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wd(n){n=_o(n,Ma);const e=_o(n.firestore,Zu);return dP(p2(e),n._key).then(t=>kE(e,n,t))}class $5 extends IP{constructor(e){super(),this.firestore=e}convertBytes(e){return new _d(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ma(this.firestore,null,t)}}function bi(n){n=_o(n,hh);const e=_o(n.firestore,Zu),t=p2(e),r=new $5(e);return IE(n._query),pP(t,n._query).then(i=>new DE(e,r,n,i))}function X5(n,e,t){n=_o(n,Ma);const r=_o(n.firestore,Zu),i=NE(n.converter,e);return _2(r,[AE(v2(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,_s.none())])}function cl(n,e,t,...r){n=_o(n,Ma);const i=_o(n.firestore,Zu),a=v2(i);let o;return o=typeof(e=Vr(e))=="string"||e instanceof g2?AP(a,"updateDoc",n._key,e,t,r):bP(a,"updateDoc",n._key,e),_2(i,[o.toMutation(n._key,_s.exists(!0))])}function Y5(n){return _2(_o(n.firestore,Zu),[new v5(n._key,_s.none())])}function PE(n,e){const t=_o(n.firestore,Zu),r=Jr(n),i=NE(n.converter,e);return _2(t,[AE(v2(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,_s.exists(!1))]).then(()=>r)}function LE(n,...e){var t,r,i;n=Vr(n);let a={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||nb(e[o])||(a=e[o],o++);const s={includeMetadataChanges:a.includeMetadataChanges,source:a.source};if(nb(e[o])){const p=e[o];e[o]=(t=p.next)===null||t===void 0?void 0:t.bind(p),e[o+1]=(r=p.error)===null||r===void 0?void 0:r.bind(p),e[o+2]=(i=p.complete)===null||i===void 0?void 0:i.bind(p)}let u,f,h;if(n instanceof Ma)f=_o(n.firestore,Zu),h=r2(n._key.path),u={next:p=>{e[o]&&e[o](kE(f,n,p))},error:e[o+1],complete:e[o+2]};else{const p=_o(n,hh);f=_o(p.firestore,Zu),h=p._query;const g=new $5(f);u={next:m=>{e[o]&&e[o](new DE(f,g,p,m))},error:e[o+1],complete:e[o+2]},IE(n._query)}return function(g,m,_,b){const T=new B5(b),S=new L5(m,T,_);return g.asyncQueue.enqueueAndForget(async()=>O5(await Cg(g),S)),()=>{T.xu(),g.asyncQueue.enqueueAndForget(async()=>D5(await Cg(g),S))}}(p2(f),h,s,u)}function _2(n,e){return function(r,i){const a=new Gu;return r.asyncQueue.enqueueAndForget(async()=>tP(await hP(r),i,a)),a.promise}(p2(n),e)}function kE(n,e,t){const r=t.docs.get(e._key),i=new $5(n);return new OE(n,i,e._key,r,new D1(t.hasPendingWrites,t.fromCache),e.converter)}function Ya(){return new V5("serverTimestamp")}(function(e,t=!0){(function(i){Td=i})(uh),sl(new bs("firestore",(r,{instanceIdentifier:i,options:a})=>{const o=r.getProvider("app").getImmediate(),s=new Zu(new E9(r.getProvider("auth-internal")),new T9(o,r.getProvider("app-check-internal")),function(f,h){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new Et(et.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Z1(f.options.projectId,h)}(o,i),o);return a=Object.assign({useFetchStreams:t},a),s._setSettings(a),s},"PUBLIC").setMultipleInstances(!0)),xo(a3,o3,e),xo(a3,o3,"esm2017")})();var NP="firebase",OP="11.9.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */xo(NP,OP,"app");const ME="@firebase/installations",K5="0.6.17";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BE=1e4,FE=`w:${K5}`,jE="FIS_v2",DP="https://firebaseinstallations.googleapis.com/v1",PP=60*60*1e3,LP="installations",kP="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MP={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},ih=new lh(LP,kP,MP);function UE(n){return n instanceof As&&n.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VE({projectId:n}){return`${DP}/projects/${n}/installations`}function zE(n){return{token:n.token,requestStatus:2,expiresIn:FP(n.expiresIn),creationTime:Date.now()}}async function qE(n,e){const r=(await e.json()).error;return ih.create("request-failed",{requestName:n,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function HE({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function BP(n,{refreshToken:e}){const t=HE(n);return t.append("Authorization",jP(e)),t}async function GE(n){const e=await n();return e.status>=500&&e.status<600?n():e}function FP(n){return Number(n.replace("s","000"))}function jP(n){return`${jE} ${n}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UP({appConfig:n,heartbeatServiceProvider:e},{fid:t}){const r=VE(n),i=HE(n),a=e.getImmediate({optional:!0});if(a){const f=await a.getHeartbeatsHeader();f&&i.append("x-firebase-client",f)}const o={fid:t,authVersion:jE,appId:n.appId,sdkVersion:FE},s={method:"POST",headers:i,body:JSON.stringify(o)},u=await GE(()=>fetch(r,s));if(u.ok){const f=await u.json();return{fid:f.fid||t,registrationStatus:2,refreshToken:f.refreshToken,authToken:zE(f.authToken)}}else throw await qE("Create Installation",u)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WE(n){return new Promise(e=>{setTimeout(e,n)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VP(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zP=/^[cdef][\w-]{21}$/,fy="";function qP(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const t=HP(n);return zP.test(t)?t:fy}catch{return fy}}function HP(n){return VP(n).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w2(n){return`${n.appName}!${n.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $E=new Map;function XE(n,e){const t=w2(n);YE(t,e),GP(t,e)}function YE(n,e){const t=$E.get(n);if(t)for(const r of t)r(e)}function GP(n,e){const t=WP();t&&t.postMessage({key:n,fid:e}),$P()}let $f=null;function WP(){return!$f&&"BroadcastChannel"in self&&($f=new BroadcastChannel("[Firebase] FID Change"),$f.onmessage=n=>{YE(n.data.key,n.data.fid)}),$f}function $P(){$E.size===0&&$f&&($f.close(),$f=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XP="firebase-installations-database",YP=1,ah="firebase-installations-store";let ov=null;function Q5(){return ov||(ov=vA(XP,YP,{upgrade:(n,e)=>{switch(e){case 0:n.createObjectStore(ah)}}})),ov}async function Ig(n,e){const t=w2(n),i=(await Q5()).transaction(ah,"readwrite"),a=i.objectStore(ah),o=await a.get(t);return await a.put(e,t),await i.done,(!o||o.fid!==e.fid)&&XE(n,e.fid),e}async function KE(n){const e=w2(n),r=(await Q5()).transaction(ah,"readwrite");await r.objectStore(ah).delete(e),await r.done}async function b2(n,e){const t=w2(n),i=(await Q5()).transaction(ah,"readwrite"),a=i.objectStore(ah),o=await a.get(t),s=e(o);return s===void 0?await a.delete(t):await a.put(s,t),await i.done,s&&(!o||o.fid!==s.fid)&&XE(n,s.fid),s}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Z5(n){let e;const t=await b2(n.appConfig,r=>{const i=KP(r),a=QP(n,i);return e=a.registrationPromise,a.installationEntry});return t.fid===fy?{installationEntry:await e}:{installationEntry:t,registrationPromise:e}}function KP(n){const e=n||{fid:qP(),registrationStatus:0};return QE(e)}function QP(n,e){if(e.registrationStatus===0){if(!navigator.onLine){const i=Promise.reject(ih.create("app-offline"));return{installationEntry:e,registrationPromise:i}}const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=ZP(n,t);return{installationEntry:t,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:JP(n)}:{installationEntry:e}}async function ZP(n,e){try{const t=await UP(n,e);return Ig(n.appConfig,t)}catch(t){throw UE(t)&&t.customData.serverCode===409?await KE(n.appConfig):await Ig(n.appConfig,{fid:e.fid,registrationStatus:0}),t}}async function JP(n){let e=await ab(n.appConfig);for(;e.registrationStatus===1;)await WE(100),e=await ab(n.appConfig);if(e.registrationStatus===0){const{installationEntry:t,registrationPromise:r}=await Z5(n);return r||t}return e}function ab(n){return b2(n,e=>{if(!e)throw ih.create("installation-not-found");return QE(e)})}function QE(n){return eL(n)?{fid:n.fid,registrationStatus:0}:n}function eL(n){return n.registrationStatus===1&&n.registrationTime+BE<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tL({appConfig:n,heartbeatServiceProvider:e},t){const r=nL(n,t),i=BP(n,t),a=e.getImmediate({optional:!0});if(a){const f=await a.getHeartbeatsHeader();f&&i.append("x-firebase-client",f)}const o={installation:{sdkVersion:FE,appId:n.appId}},s={method:"POST",headers:i,body:JSON.stringify(o)},u=await GE(()=>fetch(r,s));if(u.ok){const f=await u.json();return zE(f)}else throw await qE("Generate Auth Token",u)}function nL(n,{fid:e}){return`${VE(n)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function J5(n,e=!1){let t;const r=await b2(n.appConfig,a=>{if(!ZE(a))throw ih.create("not-registered");const o=a.authToken;if(!e&&aL(o))return a;if(o.requestStatus===1)return t=rL(n,e),a;{if(!navigator.onLine)throw ih.create("app-offline");const s=sL(a);return t=iL(n,s),s}});return t?await t:r.authToken}async function rL(n,e){let t=await ob(n.appConfig);for(;t.authToken.requestStatus===1;)await WE(100),t=await ob(n.appConfig);const r=t.authToken;return r.requestStatus===0?J5(n,e):r}function ob(n){return b2(n,e=>{if(!ZE(e))throw ih.create("not-registered");const t=e.authToken;return lL(t)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function iL(n,e){try{const t=await tL(n,e),r=Object.assign(Object.assign({},e),{authToken:t});return await Ig(n.appConfig,r),t}catch(t){if(UE(t)&&(t.customData.serverCode===401||t.customData.serverCode===404))await KE(n.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await Ig(n.appConfig,r)}throw t}}function ZE(n){return n!==void 0&&n.registrationStatus===2}function aL(n){return n.requestStatus===2&&!oL(n)}function oL(n){const e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+PP}function sL(n){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},n),{authToken:e})}function lL(n){return n.requestStatus===1&&n.requestTime+BE<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uL(n){const e=n,{installationEntry:t,registrationPromise:r}=await Z5(e);return r?r.catch(console.error):J5(e).catch(console.error),t.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cL(n,e=!1){const t=n;return await fL(t),(await J5(t,e)).token}async function fL(n){const{registrationPromise:e}=await Z5(n);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hL(n){if(!n||!n.options)throw sv("App Configuration");if(!n.name)throw sv("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!n.options[t])throw sv(t);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}function sv(n){return ih.create("missing-app-config-values",{valueName:n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JE="installations",dL="installations-internal",pL=n=>{const e=n.getProvider("app").getImmediate(),t=hL(e),r=pf(e,"heartbeat");return{app:e,appConfig:t,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},gL=n=>{const e=n.getProvider("app").getImmediate(),t=pf(e,JE).getImmediate();return{getId:()=>uL(t),getToken:i=>cL(t,i)}};function mL(){sl(new bs(JE,pL,"PUBLIC")),sl(new bs(dL,gL,"PRIVATE"))}mL();xo(ME,K5);xo(ME,K5,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rg="analytics",vL="firebase_id",yL="origin",xL=60*1e3,_L="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",ex="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wo=new Yg("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wL={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Xo=new lh("analytics","Analytics",wL);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bL(n){if(!n.startsWith(ex)){const e=Xo.create("invalid-gtag-resource",{gtagURL:n});return wo.warn(e.message),""}return n}function eS(n){return Promise.all(n.map(e=>e.catch(t=>t)))}function AL(n,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(n,e)),t}function EL(n,e){const t=AL("firebase-js-sdk-policy",{createScriptURL:bL}),r=document.createElement("script"),i=`${ex}?l=${n}&id=${e}`;r.src=t?t==null?void 0:t.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function SL(n){let e=[];return Array.isArray(window[n])?e=window[n]:window[n]=e,e}async function CL(n,e,t,r,i,a){const o=r[i];try{if(o)await e[o];else{const u=(await eS(t)).find(f=>f.measurementId===i);u&&await e[u.appId]}}catch(s){wo.error(s)}n("config",i,a)}async function TL(n,e,t,r,i){try{let a=[];if(i&&i.send_to){let o=i.send_to;Array.isArray(o)||(o=[o]);const s=await eS(t);for(const u of o){const f=s.find(p=>p.measurementId===u),h=f&&e[f.appId];if(h)a.push(h);else{a=[];break}}}a.length===0&&(a=Object.values(e)),await Promise.all(a),n("event",r,i||{})}catch(a){wo.error(a)}}function IL(n,e,t,r){async function i(a,...o){try{if(a==="event"){const[s,u]=o;await TL(n,e,t,s,u)}else if(a==="config"){const[s,u]=o;await CL(n,e,t,r,s,u)}else if(a==="consent"){const[s,u]=o;n("consent",s,u)}else if(a==="get"){const[s,u,f]=o;n("get",s,u,f)}else if(a==="set"){const[s]=o;n("set",s)}else n(a,...o)}catch(s){wo.error(s)}}return i}function RL(n,e,t,r,i){let a=function(...o){window[r].push(arguments)};return window[i]&&typeof window[i]=="function"&&(a=window[i]),window[i]=IL(a,n,e,t),{gtagCore:a,wrappedGtag:window[i]}}function NL(n){const e=window.document.getElementsByTagName("script");for(const t of Object.values(e))if(t.src&&t.src.includes(ex)&&t.src.includes(n))return t;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OL=30,DL=1e3;class PL{constructor(e={},t=DL){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const tS=new PL;function LL(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}async function kL(n){var e;const{appId:t,apiKey:r}=n,i={method:"GET",headers:LL(r)},a=_L.replace("{app-id}",t),o=await fetch(a,i);if(o.status!==200&&o.status!==304){let s="";try{const u=await o.json();!((e=u.error)===null||e===void 0)&&e.message&&(s=u.error.message)}catch{}throw Xo.create("config-fetch-failed",{httpStatus:o.status,responseMessage:s})}return o.json()}async function ML(n,e=tS,t){const{appId:r,apiKey:i,measurementId:a}=n.options;if(!r)throw Xo.create("no-app-id");if(!i){if(a)return{measurementId:a,appId:r};throw Xo.create("no-api-key")}const o=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},s=new jL;return setTimeout(async()=>{s.abort()},xL),nS({appId:r,apiKey:i,measurementId:a},o,s,e)}async function nS(n,{throttleEndTimeMillis:e,backoffCount:t},r,i=tS){var a;const{appId:o,measurementId:s}=n;try{await BL(r,e)}catch(u){if(s)return wo.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${s} provided in the "measurementId" field in the local Firebase config. [${u==null?void 0:u.message}]`),{appId:o,measurementId:s};throw u}try{const u=await kL(n);return i.deleteThrottleMetadata(o),u}catch(u){const f=u;if(!FL(f)){if(i.deleteThrottleMetadata(o),s)return wo.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${s} provided in the "measurementId" field in the local Firebase config. [${f==null?void 0:f.message}]`),{appId:o,measurementId:s};throw u}const h=Number((a=f==null?void 0:f.customData)===null||a===void 0?void 0:a.httpStatus)===503?Nw(t,i.intervalMillis,OL):Nw(t,i.intervalMillis),p={throttleEndTimeMillis:Date.now()+h,backoffCount:t+1};return i.setThrottleMetadata(o,p),wo.debug(`Calling attemptFetch again in ${h} millis`),nS(n,p,r,i)}}function BL(n,e){return new Promise((t,r)=>{const i=Math.max(e-Date.now(),0),a=setTimeout(t,i);n.addEventListener(()=>{clearTimeout(a),r(Xo.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function FL(n){if(!(n instanceof As)||!n.customData)return!1;const e=Number(n.customData.httpStatus);return e===429||e===500||e===503||e===504}class jL{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function UL(n,e,t,r,i){if(i&&i.global){n("event",t,r);return}else{const a=await e,o=Object.assign(Object.assign({},r),{send_to:a});n("event",t,o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VL(){if(dA())try{await pA()}catch(n){return wo.warn(Xo.create("indexeddb-unavailable",{errorInfo:n==null?void 0:n.toString()}).message),!1}else return wo.warn(Xo.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function zL(n,e,t,r,i,a,o){var s;const u=ML(n);u.then(m=>{t[m.measurementId]=m.appId,n.options.measurementId&&m.measurementId!==n.options.measurementId&&wo.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${m.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(m=>wo.error(m)),e.push(u);const f=VL().then(m=>{if(m)return r.getId()}),[h,p]=await Promise.all([u,f]);NL(a)||EL(a,h.measurementId),i("js",new Date);const g=(s=o==null?void 0:o.config)!==null&&s!==void 0?s:{};return g[yL]="firebase",g.update=!0,p!=null&&(g[vL]=p),i("config",h.measurementId,g),h.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qL{constructor(e){this.app=e}_delete(){return delete q1[this.app.options.appId],Promise.resolve()}}let q1={},sb=[];const lb={};let lv="dataLayer",HL="gtag",ub,rS,cb=!1;function GL(){const n=[];if(hA()&&n.push("This is a browser extension environment."),FI()||n.push("Cookies are not available."),n.length>0){const e=n.map((r,i)=>`(${i+1}) ${r}`).join(" "),t=Xo.create("invalid-analytics-context",{errorInfo:e});wo.warn(t.message)}}function WL(n,e,t){GL();const r=n.options.appId;if(!r)throw Xo.create("no-app-id");if(!n.options.apiKey)if(n.options.measurementId)wo.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Xo.create("no-api-key");if(q1[r]!=null)throw Xo.create("already-exists",{id:r});if(!cb){SL(lv);const{wrappedGtag:a,gtagCore:o}=RL(q1,sb,lb,lv,HL);rS=a,ub=o,cb=!0}return q1[r]=zL(n,sb,lb,e,ub,lv,t),new qL(n)}function $L(n=Kg()){n=Vr(n);const e=pf(n,Rg);return e.isInitialized()?e.getImmediate():XL(n)}function XL(n,e={}){const t=pf(n,Rg);if(t.isInitialized()){const i=t.getImmediate();if(af(e,t.getOptions()))return i;throw Xo.create("already-initialized")}return t.initialize({options:e})}function YL(n,e,t,r){n=Vr(n),UL(rS,q1[n.app.options.appId],e,t,r).catch(i=>wo.error(i))}const fb="@firebase/analytics",hb="0.10.16";function KL(){sl(new bs(Rg,(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();return WL(r,i,t)},"PUBLIC")),sl(new bs("analytics-internal",n,"PRIVATE")),xo(fb,hb),xo(fb,hb,"esm2017");function n(e){try{const t=e.getProvider(Rg).getImmediate();return{logEvent:(r,i,a)=>YL(t,r,i,a)}}catch(t){throw Xo.create("interop-component-reg-failed",{reason:t})}}}KL();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iS="firebasestorage.googleapis.com",QL="storageBucket",ZL=2*60*1e3,JL=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ou extends As{constructor(e,t,r=0){super(uv(e),`Firebase Storage: ${t} (${uv(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,ou.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return uv(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var nu;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(nu||(nu={}));function uv(n){return"storage/"+n}function ek(){const n="An unknown error occurred, please check the error payload for server response.";return new ou(nu.UNKNOWN,n)}function tk(){return new ou(nu.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function nk(){return new ou(nu.CANCELED,"User canceled the upload/download.")}function rk(n){return new ou(nu.INVALID_URL,"Invalid URL '"+n+"'.")}function ik(n){return new ou(nu.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function db(n){return new ou(nu.INVALID_ARGUMENT,n)}function aS(){return new ou(nu.APP_DELETED,"The Firebase app was deleted.")}function ak(n){return new ou(nu.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ol{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=ol.makeFromUrl(e,t)}catch{return new ol(e,"")}if(r.path==="")return r;throw ik(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)";function a(V){V.path.charAt(V.path.length-1)==="/"&&(V.path_=V.path_.slice(0,-1))}const o="(/(.*))?$",s=new RegExp("^gs://"+i+o,"i"),u={bucket:1,path:3};function f(V){V.path_=decodeURIComponent(V.path)}const h="v[A-Za-z0-9_]+",p=t.replace(/[.]/g,"\\."),g="(/([^?#]*).*)?$",m=new RegExp(`^https?://${p}/${h}/b/${i}/o${g}`,"i"),_={bucket:1,path:3},b=t===iS?"(?:storage.googleapis.com|storage.cloud.google.com)":t,T="([^?#]*)",S=new RegExp(`^https?://${b}/${i}/${T}`,"i"),B=[{regex:s,indices:u,postModify:a},{regex:m,indices:_,postModify:f},{regex:S,indices:{bucket:1,path:2},postModify:f}];for(let V=0;V<B.length;V++){const Y=B[V],q=Y.regex.exec(e);if(q){const P=q[Y.indices.bucket];let E=q[Y.indices.path];E||(E=""),r=new ol(P,E),Y.postModify(r);break}}if(r==null)throw rk(e);return r}}class ok{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sk(n,e,t){let r=1,i=null,a=null,o=!1,s=0;function u(){return s===2}let f=!1;function h(...T){f||(f=!0,e.apply(null,T))}function p(T){i=setTimeout(()=>{i=null,n(m,u())},T)}function g(){a&&clearTimeout(a)}function m(T,...S){if(f){g();return}if(T){g(),h.call(null,T,...S);return}if(u()||o){g(),h.call(null,T,...S);return}r<64&&(r*=2);let B;s===1?(s=2,B=0):B=(r+Math.random())*1e3,p(B)}let _=!1;function b(T){_||(_=!0,g(),!f&&(i!==null?(T||(s=2),clearTimeout(i),p(0)):T||(s=1)))}return p(0),a=setTimeout(()=>{o=!0,b(!0)},t),b}function lk(n){n(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uk(n){return n!==void 0}function pb(n,e,t,r){if(r<e)throw db(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw db(`Invalid value for '${n}'. Expected ${t} or less.`)}function ck(n){const e=encodeURIComponent;let t="?";for(const r in n)if(n.hasOwnProperty(r)){const i=e(r)+"="+e(n[r]);t=t+i+"&"}return t=t.slice(0,-1),t}var Ng;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(Ng||(Ng={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fk(n,e){const t=n>=500&&n<600,i=[408,429].indexOf(n)!==-1,a=e.indexOf(n)!==-1;return t||i||a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hk{constructor(e,t,r,i,a,o,s,u,f,h,p,g=!0,m=!1){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=o,this.callback_=s,this.errorCallback_=u,this.timeout_=f,this.progressCallback_=h,this.connectionFactory_=p,this.retry=g,this.isUsingEmulator=m,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((_,b)=>{this.resolve_=_,this.reject_=b,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new Np(!1,null,!0));return}const a=this.connectionFactory_();this.pendingConnection_=a;const o=s=>{const u=s.loaded,f=s.lengthComputable?s.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,f)};this.progressCallback_!==null&&a.addUploadProgressListener(o),a.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&a.removeUploadProgressListener(o),this.pendingConnection_=null;const s=a.getErrorCode()===Ng.NO_ERROR,u=a.getStatus();if(!s||fk(u,this.additionalRetryCodes_)&&this.retry){const h=a.getErrorCode()===Ng.ABORT;r(!1,new Np(!1,null,h));return}const f=this.successCodes_.indexOf(u)!==-1;r(!0,new Np(f,a))})},t=(r,i)=>{const a=this.resolve_,o=this.reject_,s=i.connection;if(i.wasSuccessCode)try{const u=this.callback_(s,s.getResponse());uk(u)?a(u):a()}catch(u){o(u)}else if(s!==null){const u=ek();u.serverResponse=s.getErrorText(),this.errorCallback_?o(this.errorCallback_(s,u)):o(u)}else if(i.canceled){const u=this.appDelete_?aS():nk();o(u)}else{const u=tk();o(u)}};this.canceled_?t(!1,new Np(!1,null,!0)):this.backoffId_=sk(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&lk(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Np{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function dk(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function pk(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function gk(n,e){e&&(n["X-Firebase-GMPID"]=e)}function mk(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function vk(n,e,t,r,i,a,o=!0,s=!1){const u=ck(n.urlParams),f=n.url+u,h=Object.assign({},n.headers);return gk(h,e),dk(h,t),pk(h,a),mk(h,r),new hk(f,n.method,h,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,o,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yk(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function xk(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Og{constructor(e,t){this._service=e,t instanceof ol?this._location=t:this._location=ol.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Og(e,t)}get root(){const e=new ol(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return xk(this._location.path)}get storage(){return this._service}get parent(){const e=yk(this._location.path);if(e===null)return null;const t=new ol(this._location.bucket,e);return new Og(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw ak(e)}}function gb(n,e){const t=e==null?void 0:e[QL];return t==null?null:ol.makeFromBucketSpec(t,n)}function _k(n,e,t,r={}){n.host=`${e}:${t}`;const i=Sd(e);i&&(Zy(`https://${n.host}`),Jy("Storage",!0)),n._isUsingEmulator=!0,n._protocol=i?"https":"http";const{mockUserToken:a}=r;a&&(n._overrideAuthToken=typeof a=="string"?a:fA(a,n.app.options.projectId))}class wk{constructor(e,t,r,i,a,o=!1){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=a,this._isUsingEmulator=o,this._bucket=null,this._host=iS,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=ZL,this._maxUploadRetryTime=JL,this._requests=new Set,i!=null?this._bucket=ol.makeFromBucketSpec(i,this._host):this._bucket=gb(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=ol.makeFromBucketSpec(this._url,e):this._bucket=gb(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){pb("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){pb("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(Go(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Og(this,e)}_makeRequest(e,t,r,i,a=!0){if(this._deleted)return new ok(aS());{const o=vk(e,this._appId,r,i,t,this._firebaseVersion,a,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,t){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,i).getPromise()}}const mb="@firebase/storage",vb="0.13.12";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oS="storage";function bk(n=Kg(),e){n=Vr(n);const r=pf(n,oS).getImmediate({identifier:e}),i=lA("storage");return i&&Ak(r,...i),r}function Ak(n,e,t,r={}){_k(n,e,t,r)}function Ek(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new wk(t,r,i,e,uh)}function Sk(){sl(new bs(oS,Ek,"PUBLIC").setMultipleInstances(!0)),xo(mb,vb,""),xo(mb,vb,"esm2017")}Sk();const Ck={apiKey:"AIzaSyD2okbjcvN3V4Qpd4deo59qZZNNRBIWX58",authDomain:"gmach-inventory-system.firebaseapp.com",projectId:"gmach-inventory-system",storageBucket:"gmach-inventory-system.appspot.com",messagingSenderId:"687472851540",appId:"1:687472851540:web:f846506cccaaefc1e74bc1",measurementId:"G-ZM8S3K7E2V"},A2=yA(Ck);$L(A2);const r0=_9(A2),nn=vP(A2),Tk=bk(A2),sS=ve.createContext(),Ik=({children:n})=>{const[e,t]=ve.useState(null),[r,i]=ve.useState(!0);return ve.useEffect(()=>{const a=lN(r0,async s=>{if(s&&s.emailVerified){const u=await wd(Jr(nn,"users",s.uid));if(u.exists()){const f=u.data();t({uid:s.uid,email:s.email,username:f.username,role:f.role})}}else t(null)});return(async()=>{const s=await wd(Jr(nn,"settings","onlineOrdering"));if(s.exists()){const u=s.data();i(u.enabled===!0)}})(),()=>a()},[]),O.jsx(sS.Provider,{value:{user:e,setUser:t,onlineOrderingEnabled:r,setOnlineOrderingEnabled:i},children:n})},w0=()=>ve.useContext(sS),Rk=()=>{const{user:n,setUser:e}=w0(),t=$y(),[r,i]=ve.useState(!1),[a,o]=ve.useState(null),[s,u]=ve.useState(null);ve.useEffect(()=>{const B=Jr(nn,"settings","onlineOrdering"),V=LE(B,Y=>{Y.exists()&&o(Y.data().enabled)},Y=>{console.error("שגיאה בקבלת עדכונים בזמן אמת:",Y)});return()=>V()},[]),ve.useEffect(()=>{const B=()=>{u(window.innerWidth<=768)};return B(),window.addEventListener("resize",B),()=>window.removeEventListener("resize",B)},[]);const f=async()=>{try{await uN(r0),e(null),t("/login")}catch(B){alert("שגיאה בהתנתקות: "+B.message)}},h=()=>{i(!1)},p=B=>{switch(B){case"MainAdmin":return"מנהל ראשי";case"GmachAdmin":return"מנהל גמח";default:return"משתמש"}};if(s===null)return null;const g={backgroundColor:"#f2f2f2",padding:"10px 0",direction:"rtl",borderBottom:"1px solid #ccc",position:"relative",zIndex:1e3},m={padding:"12px 16px",textDecoration:"none",color:"#0056b3",fontWeight:"500",fontSize:"16px",display:"block"},_={position:"absolute",top:"10px",left:s?"20px":"auto",right:s?"auto":"20px",display:"flex",alignItems:"center",gap:"10px",fontWeight:"bold",color:"#333"},b={backgroundColor:"#e74c3c",color:"white",border:"none",padding:"5px 10px",borderRadius:"4px",cursor:"pointer",fontSize:"14px"},T={position:"fixed",top:0,right:0,bottom:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.3)",zIndex:999},S={position:"fixed",top:0,right:r?0:"-70%",height:"100%",width:"70%",backgroundColor:"#fff",boxShadow:"0 0 12px rgba(0,0,0,0.25)",padding:"20px",display:"flex",flexDirection:"column",gap:"10px",transition:"right 0.3s ease",zIndex:1e3},D={display:"flex",justifyContent:"center",gap:"10px",padding:"10px 0"};return O.jsxs("div",{style:g,children:[s&&O.jsx("button",{onClick:()=>i(!0),style:{fontSize:"24px",background:"none",border:"none",cursor:"pointer",padding:"0 1rem"},children:"☰"}),!s&&O.jsxs("div",{style:D,children:[O.jsx(xr,{to:"/",style:m,children:"דף הבית"}),O.jsx(xr,{to:"/catalog",style:m,children:"קטלוג מוצרים"}),(n==null?void 0:n.role)==="User"&&a&&O.jsxs(O.Fragment,{children:[O.jsx(xr,{to:"/my-orders",style:m,children:"ההזמנות שלי"}),O.jsx(xr,{to:"/request",style:m,children:"בקשת השאלה"})]}),((n==null?void 0:n.role)==="GmachAdmin"||(n==null?void 0:n.role)==="MainAdmin")&&O.jsxs(O.Fragment,{children:[O.jsx(xr,{to:"/new-loan",style:m,children:"הזמנה חדשה"}),a&&O.jsx(xr,{to:"/requests",style:m,children:"בקשות להזמנה"}),O.jsx(xr,{to:"/Calendar",style:m,children:"השאלות פתוחות"}),O.jsx(xr,{to:"/history",style:m,children:"היסטוריית השאלות"}),O.jsx(xr,{to:"/manage-product",style:m,children:"ניהול מוצרים"})]}),(n==null?void 0:n.role)==="MainAdmin"&&O.jsx(xr,{to:"/manage-users",style:m,children:"ניהול משתמשים"}),!n&&O.jsxs(O.Fragment,{children:[O.jsx(xr,{to:"/login",style:m,children:"התחברות"}),O.jsx(xr,{to:"/register",style:m,children:"הרשמה"})]})]}),r&&s&&O.jsxs(O.Fragment,{children:[O.jsx("div",{style:T,onClick:h}),O.jsxs("div",{style:S,children:[O.jsx(xr,{to:"/",style:m,onClick:h,children:"דף הבית"}),O.jsx(xr,{to:"/catalog",style:m,onClick:h,children:"קטלוג מוצרים"}),(n==null?void 0:n.role)==="User"&&a&&O.jsxs(O.Fragment,{children:[O.jsx(xr,{to:"/my-orders",style:m,onClick:h,children:"ההזמנות שלי"}),O.jsx(xr,{to:"/request",style:m,onClick:h,children:"בקשת השאלה"})]}),((n==null?void 0:n.role)==="GmachAdmin"||(n==null?void 0:n.role)==="MainAdmin")&&O.jsxs(O.Fragment,{children:[O.jsx(xr,{to:"/new-loan",style:m,onClick:h,children:"הזמנה חדשה"}),a&&O.jsx(xr,{to:"/requests",style:m,onClick:h,children:"בקשות להזמנה"}),O.jsx(xr,{to:"/Calendar",style:m,onClick:h,children:"השאלות פתוחות"}),O.jsx(xr,{to:"/history",style:m,onClick:h,children:"היסטוריית השאלות"}),O.jsx(xr,{to:"/manage-product",style:m,onClick:h,children:"ניהול מוצרים"})]}),(n==null?void 0:n.role)==="MainAdmin"&&O.jsx(xr,{to:"/manage-users",style:m,onClick:h,children:"ניהול משתמשים"}),!n&&O.jsxs(O.Fragment,{children:[O.jsx(xr,{to:"/login",style:m,onClick:h,children:"התחברות"}),O.jsx(xr,{to:"/register",style:m,onClick:h,children:"הרשמה"})]})]})]}),n&&O.jsxs("div",{style:_,children:["שלום ",n.username," (",p(n.role),")",O.jsx("button",{style:b,onClick:f,children:"התנתק"})]})]})},Nk=()=>{const{user:n}=w0(),e={padding:"2rem",textAlign:"center",direction:"rtl",maxWidth:"1000px",margin:"0 auto"},t={fontSize:"24px",fontWeight:"bold",marginBottom:"1rem"},r={maxWidth:"800px",margin:"0 auto",fontSize:"16px",lineHeight:"1.8",color:"#333"},i={display:"flex",justifyContent:"center",marginTop:"2rem"},a={width:"100%",minHeight:"300px",aspectRatio:"16/9",border:"1px solid #ccc",borderRadius:"12px"},o={position:"fixed",bottom:"20px",right:"20px",backgroundColor:"#007bff",color:"white",padding:"12px 20px",borderRadius:"10px",fontWeight:"bold",boxShadow:"0 4px 10px rgba(0, 0, 0, 0.2)",zIndex:1e3,fontSize:"15px",maxWidth:"calc(100% - 40px)",wordWrap:"break-word"};return O.jsxs("div",{style:e,children:[O.jsx("h2",{style:t,children:'ברוכים הבאים לגמ"ח שמחת זקנתי'}),O.jsx("img",{src:"https://www.loan4all.co.il/wp-content/uploads/elementor/thumbs/%D7%A2%D7%99%D7%A6%D7%95%D7%91-%D7%9C%D7%9C%D7%90-%D7%A9%D7%9D-66-pk7bw0x4rbkrwfq7lsj9ow3fqrr6og52r04ld4c6uw.jpg",alt:'תמונה זמנית של גמ"ח',style:{width:"100%",height:"auto",borderRadius:"12px",marginBottom:"2rem",maxWidth:"800px"}}),O.jsxs("div",{style:r,children:['פני פתחה את גמ"ח הציוד לשמחות ואירועים "שמחת זקנתי" לפני כ־10 שנים, לזכר סבה וסבתה – אברהם ואסתר ליבן ז"ל, ממקימי הקיבוץ. הגמ"ח החל לפעול מתוך ביתם ממש ולאחר מכן עבר למבנה שהוקצה ושופץ על ידי הקיבוץ.',O.jsx("br",{}),O.jsx("br",{}),'הגמ"ח מצריך תחזוקה מתמדת, התרמות, חידושים וסידור עם משתמשים רבים מהאזור. משתמשי הגמ"ח נהנים ממגוון ציוד עשיר, ויש להזמין כמה חודשים מראש.']}),O.jsxs("div",{style:{marginTop:"2rem"},children:[O.jsx("h3",{children:"📍 מיקום והגעה"}),O.jsxs("div",{children:[O.jsx("a",{href:"https://maps.app.goo.gl/zHkUGZDnGVsUrBCB6",target:"_blank",rel:"noopener noreferrer",children:"Google Maps"})," |"," ",O.jsx("a",{href:"https://waze.com/ul?ll=31.775887,34.703164",target:"_blank",rel:"noopener noreferrer",children:"Waze"})]})]}),O.jsx("div",{style:i,children:O.jsx("iframe",{src:"https://www.google.com/maps?q=31.7889462,34.79986&output=embed",width:"100%",height:"100%",style:a,allowFullScreen:"",loading:"lazy",title:'מיקום גמ"ח'})}),(!n||n.role==="User")&&O.jsxs("div",{style:o,children:["📞 לתיאום ולהגעה: ",O.jsx("a",{href:"tel:0501234567",style:{color:"white",textDecoration:"underline"},children:"050-1234567"})]})]})},Ok=()=>{const[n,e]=ve.useState(""),[t,r]=ve.useState(""),[i,a]=ve.useState(""),{setUser:o}=w0(),s=$y(),u=async()=>{if(!n||!n.includes("@")){a("יש להזין אימייל תקין לשחזור סיסמה");return}try{await nN(r0,n),a("קישור לאיפוס סיסמה נשלח לאימייל")}catch(p){a("שגיאה בשליחת קישור לאיפוס סיסמה: "+p.message)}},f=async p=>{p.preventDefault(),a("");let g=n;if(!n.includes("@"))try{const m=Wu(Tr(nn,"users"),Ju("username","==",n)),_=await bi(m);if(!_.empty)g=_.docs[0].data().email;else{a("שם משתמש לא נמצא");return}}catch{a("שגיאה באחזור אימייל לפי שם משתמש");return}try{const _=(await iN(r0,g,t)).user;if(!_.emailVerified){a("נא לאמת את כתובת האימייל לפני ההתחברות");return}const b=Jr(nn,"users",_.uid),T=await wd(b);if(T.exists()){const S=T.data();o({uid:_.uid,email:_.email,username:S.username,role:S.role}),s("/")}else a("לא נמצאו נתוני משתמש במסד הנתונים")}catch(m){switch(m.code){case"auth/invalid-credential":case"auth/wrong-password":a("סיסמה שגויה");break;case"auth/user-not-found":a("המשתמש לא נמצא");break;default:a("שגיאה: "+m.message)}}},h={container:{display:"flex",justifyContent:"center",alignItems:"center",height:"80vh",backgroundColor:"#f2f2f2"},form:{backgroundColor:"#fff",padding:"2rem",borderRadius:"12px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.1)",display:"flex",flexDirection:"column",width:"300px"},title:{textAlign:"center",marginBottom:"1.5rem",color:"#333"},input:{marginBottom:"1rem",padding:"0.8rem",fontSize:"1rem",borderRadius:"6px",border:"1px solid #ccc"},button:{backgroundColor:"#007bff",color:"white",border:"none",padding:"0.8rem",fontSize:"1rem",borderRadius:"6px",cursor:"pointer",transition:"background-color 0.3s ease"},error:{color:"red",marginBottom:"1rem",fontSize:"0.9rem",textAlign:"center"}};return O.jsx("div",{style:h.container,children:O.jsxs("form",{onSubmit:f,style:h.form,children:[O.jsx("h2",{style:h.title,children:"התחברות"}),O.jsx("input",{type:"text",placeholder:"שם משתמש או אימייל",value:n,onChange:p=>e(p.target.value),style:h.input,required:!0}),O.jsx("input",{type:"password",placeholder:"סיסמה",value:t,onChange:p=>r(p.target.value),style:h.input,required:!0}),i&&O.jsx("div",{style:h.error,children:i}),O.jsx("button",{type:"submit",style:h.button,children:"התחבר"}),O.jsx("button",{type:"button",onClick:u,style:{marginTop:"0.5rem",backgroundColor:"transparent",border:"none",color:"#007bff",textDecoration:"underline",cursor:"pointer",fontSize:"0.9rem"},children:"שכחת סיסמה?"})]})})},Dk=()=>{const[n,e]=ve.useState(""),[t,r]=ve.useState(""),[i,a]=ve.useState(""),[o,s]=ve.useState(""),u=p=>p.length>=8&&/[a-zA-Z]/.test(p),f=async p=>{if(p.preventDefault(),!u(i)){s("הסיסמה חייבת להכיל לפחות 8 תווים ולפחות אות אחת באנגלית A-Z / a-z");return}try{const m=(await rN(r0,n,i)).user;await X5(Jr(nn,"users",m.uid),{email:n,username:t,role:"User"}),await aN(m),alert("נרשמת בהצלחה! נשלח אליך מייל לאימות.")}catch(g){s(g.message)}},h={container:{display:"flex",justifyContent:"center",alignItems:"center",height:"80vh",backgroundColor:"#f2f2f2"},form:{backgroundColor:"#fff",padding:"2rem",borderRadius:"12px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.1)",display:"flex",flexDirection:"column",width:"300px"},title:{textAlign:"center",marginBottom:"1.5rem",color:"#333"},input:{marginBottom:"1rem",padding:"0.8rem",fontSize:"1rem",borderRadius:"6px",border:"1px solid #ccc"},button:{backgroundColor:"#007bff",color:"white",border:"none",padding:"0.8rem",fontSize:"1rem",borderRadius:"6px",cursor:"pointer",transition:"background-color 0.3s ease"},error:{color:"red",marginBottom:"1rem",fontSize:"0.9rem",textAlign:"center"}};return O.jsx("div",{style:h.container,children:O.jsxs("form",{onSubmit:f,style:h.form,children:[O.jsx("h2",{style:h.title,children:"הרשמה"}),O.jsx("input",{type:"text",placeholder:"שם משתמש",value:t,onChange:p=>r(p.target.value),style:h.input,required:!0}),O.jsx("input",{type:"email",placeholder:"אימייל",value:n,onChange:p=>e(p.target.value),style:h.input,required:!0}),O.jsx("input",{type:"password",placeholder:"סיסמה",value:i,onChange:p=>a(p.target.value),style:h.input,required:!0}),o&&O.jsx("div",{style:h.error,children:o}),O.jsx("button",{type:"submit",style:h.button,children:"הרשם"})]})})},Pk=()=>{const{user:n}=w0(),[e,t]=ve.useState([]),[r,i]=ve.useState(""),[a,o]=ve.useState(null);ve.useEffect(()=>{(async()=>{const m=Tr(nn,"users"),b=(await bi(m)).docs.map(T=>({id:T.id,...T.data()}));t(b)})()},[]),ve.useEffect(()=>{(async()=>{try{const m=Jr(nn,"settings","onlineOrdering"),_=await wd(m);_.exists()&&o(_.data().enabled)}catch(m){console.error("שגיאה בטעינת ההגדרה:",m)}})()},[]);const s=async(g,m)=>{const _=Jr(nn,"users",g);await cl(_,{role:m}),t(e.map(b=>b.id===g?{...b,role:m}:b))},u=async()=>{try{const g=!a;await cl(Jr(nn,"settings","onlineOrdering"),{enabled:g}),o(g)}catch(g){alert("שגיאה בעדכון ההגדרה: "+g.message)}},f={container:{padding:"1rem",direction:"rtl",maxWidth:"100%",overflow:"hidden"},header:{fontSize:"1.8rem",marginBottom:"2rem",textAlign:"center",color:"#333",fontWeight:"600"},toggleBox:{display:"flex",alignItems:"center",justifyContent:"center",gap:"15px",marginBottom:"2rem",backgroundColor:"#f8f9fa",padding:"16px 24px",borderRadius:"15px",border:"2px solid #e9ecef",maxWidth:"400px",margin:"0 auto 2rem auto",boxSizing:"border-box",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},toggleSwitch:{width:"50px",height:"28px",borderRadius:"50px",backgroundColor:a?"#4caf50":"#e74c3c",position:"relative",cursor:"pointer",transition:"0.3s",flexShrink:0},toggleCircle:{position:"absolute",top:"3px",left:a?"25px":"3px",width:"22px",height:"22px",borderRadius:"50%",backgroundColor:"white",transition:"0.3s",boxShadow:"0 2px 4px rgba(0,0,0,0.2)"},searchBox:{padding:"12px 16px",width:"100%",maxWidth:"500px",borderRadius:"10px",border:"2px solid #ddd",fontSize:"16px",marginBottom:"2rem",boxSizing:"border-box",outline:"none",transition:"border-color 0.2s ease",display:"block",margin:"0 auto 2rem auto"},tableContainer:{overflowX:"auto",marginTop:"1rem",borderRadius:"12px",border:"1px solid #ddd",maxWidth:"1200px",margin:"0 auto",boxShadow:"0 4px 12px rgba(0,0,0,0.1)"},table:{width:"100%",borderCollapse:"collapse",minWidth:"600px",backgroundColor:"white"},th:{border:"1px solid #ddd",padding:"12px 8px",backgroundColor:"#f8f9fa",fontWeight:"600",fontSize:"0.9rem",textAlign:"center",whiteSpace:"nowrap"},td:{border:"1px solid #ddd",padding:"12px 8px",textAlign:"center",fontSize:"0.85rem",verticalAlign:"middle"},button:{padding:"8px 12px",borderRadius:"6px",border:"none",cursor:"pointer",fontSize:"0.8rem",fontWeight:"500",whiteSpace:"nowrap",minWidth:"100px",transition:"opacity 0.2s ease"},promoteBtn:{backgroundColor:"#28a745",color:"white"},demoteBtn:{backgroundColor:"#dc3545",color:"white"}};if(!n||n.role!=="MainAdmin")return O.jsx("div",{style:{padding:"2rem",textAlign:"center",direction:"rtl"},children:O.jsx("p",{children:"אין לך גישה לעמוד זה"})});const h=e.filter(g=>g.username&&g.username.toLowerCase().includes(r.toLowerCase())),p=({user:g})=>O.jsxs("div",{style:{backgroundColor:"white",border:"1px solid #ddd",borderRadius:"12px",padding:"1rem",marginBottom:"1rem",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:[O.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"0.5rem"},children:[O.jsx("h4",{style:{margin:0,color:"#333",fontSize:"1.1rem"},children:g.username}),O.jsx("span",{style:{backgroundColor:g.role==="MainAdmin"?"#6f42c1":g.role==="GmachAdmin"?"#17a2b8":"#6c757d",color:"white",padding:"4px 8px",borderRadius:"12px",fontSize:"0.7rem",fontWeight:"500"},children:g.role==="User"?"משתמש רגיל":g.role==="GmachAdmin"?'מנהל גמ"ח':g.role==="MainAdmin"?"מנהל ראשי":g.role})]}),O.jsxs("p",{style:{margin:"0.5rem 0",color:"#666",fontSize:"0.9rem",wordBreak:"break-all"},children:["📧 ",g.email]}),g.role!=="MainAdmin"&&O.jsx("div",{style:{marginTop:"1rem"},children:g.role==="User"?O.jsx("button",{style:{...f.button,...f.promoteBtn,width:"100%"},onClick:()=>s(g.id,"GmachAdmin"),children:'שדרג למנהל גמ"ח'}):O.jsx("button",{style:{...f.button,...f.demoteBtn,width:"100%"},onClick:()=>s(g.id,"User"),children:"החזר למשתמש רגיל"})})]});return O.jsxs(O.Fragment,{children:[O.jsx("style",{children:`
          @media (max-width: 768px) {
            .desktop-table {
              display: none !important;
            }
            .mobile-cards {
              display: block !important;
            }
            .container-mobile {
              padding: 1rem !important;
            }
            .header-mobile {
              font-size: 1.5rem !important;
              margin-bottom: 1.5rem !important;
            }
            .toggle-mobile {
              max-width: 100% !important;
              margin: 0 0 1.5rem 0 !important;
              padding: 12px 16px !important;
            }
            .search-mobile {
              margin: 0 0 1.5rem 0 !important;
              max-width: 100% !important;
            }
          }
          
          @media (min-width: 769px) {
            .desktop-table {
              display: table !important;
            }
            .mobile-cards {
              display: none !important;
            }
            .container-desktop {
              padding: 2rem !important;
              max-width: 1400px !important;
              margin: 0 auto !important;
            }
          }
          
          input:focus {
            border-color: #1976d2 !important;
            box-shadow: 0 0 0 3px rgba(25, 118, 210, 0.1) !important;
          }
          
          button:hover {
            opacity: 0.9;
          }
          
          button:active {
            transform: translateY(1px);
          }
        `}),O.jsxs("div",{style:f.container,className:"container-mobile container-desktop",children:[O.jsx("h2",{style:f.header,className:"header-mobile",children:"ניהול משתמשים"}),a!==null&&O.jsxs("div",{style:f.toggleBox,className:"toggle-mobile",children:[O.jsx("span",{style:{fontWeight:"bold",fontSize:"1.1rem"},children:"הזמנות דרך האתר:"}),O.jsx("div",{style:f.toggleSwitch,onClick:u,children:O.jsx("div",{style:f.toggleCircle})})]}),O.jsx("input",{type:"text",placeholder:"חיפוש משתמש...",value:r,onChange:g=>i(g.target.value),style:f.searchBox,className:"search-mobile",dir:"rtl"}),O.jsx("div",{style:f.tableContainer,className:"desktop-table",children:O.jsxs("table",{style:f.table,children:[O.jsx("thead",{children:O.jsxs("tr",{children:[O.jsx("th",{style:f.th,children:"שם משתמש"}),O.jsx("th",{style:f.th,children:"אימייל"}),O.jsx("th",{style:f.th,children:"הרשאה"}),O.jsx("th",{style:f.th,children:"פעולה"})]})}),O.jsx("tbody",{children:h.length===0?O.jsx("tr",{children:O.jsx("td",{colSpan:"4",style:{textAlign:"center",padding:"2rem",color:"#666"},children:"לא נמצאו משתמשים תואמים"})}):h.map(g=>O.jsxs("tr",{children:[O.jsx("td",{style:f.td,children:g.username}),O.jsx("td",{style:f.td,children:g.email}),O.jsx("td",{style:f.td,children:g.role==="User"?"משתמש רגיל":g.role==="GmachAdmin"?'מנהל גמ"ח':g.role==="MainAdmin"?"מנהל ראשי":g.role}),O.jsxs("td",{style:f.td,children:[g.role!=="MainAdmin"&&(g.role==="User"?O.jsx("button",{style:{...f.button,...f.promoteBtn},onClick:()=>s(g.id,"GmachAdmin"),children:'שדרג למנהל גמ"ח'}):O.jsx("button",{style:{...f.button,...f.demoteBtn},onClick:()=>s(g.id,"User"),children:"החזר למשתמש רגיל"})),g.role==="MainAdmin"&&O.jsx("span",{style:{color:"#999",fontSize:"0.8rem"},children:"---"})]})]},g.id))})]})}),O.jsx("div",{className:"mobile-cards",style:{display:"none"},children:h.length===0?O.jsx("div",{style:{textAlign:"center",padding:"2rem",color:"#666",backgroundColor:"white",borderRadius:"12px",border:"1px solid #ddd"},children:"לא נמצאו משתמשים תואמים"}):h.map(g=>O.jsx(p,{user:g},g.id))})]})]})},Lk=({form:n,errors:e,handleChange:t,handleConfirm:r,handleClear:i,setShowCatalogPopup:a,saving:o})=>{const s=[{label:"שם מתנדבת",name:"volunteerName",required:!0},{label:"שם לקוח",name:"clientName",required:!0},{label:"מקום מגורים",name:"address",required:!0},{label:"מספר פלאפון",name:"phone",required:!0},{label:"אימייל",name:"email",required:!1},{label:"סוג האירוע",name:"eventType",required:!0},{label:"תאריך לקיחת מוצרים",name:"pickupDate",type:"date",required:!0},{label:"תאריך האירוע",name:"eventDate",type:"date",required:!0},{label:"תאריך החזרת מוצרים",name:"returnDate",type:"date",required:!0}];return O.jsxs("div",{className:"loan-form-box",children:[O.jsx("h2",{style:{textAlign:"center"},children:"הזמנה חדשה"}),s.map(({label:u,name:f,type:h="text",required:p})=>O.jsxs("div",{style:{marginBottom:"1.5rem",textAlign:"center"},children:[O.jsxs("label",{htmlFor:f,style:{display:"block",marginBottom:"0.3rem",maxWidth:"400px",margin:"0 auto",textAlign:"right"},children:[u,p&&" *"]}),O.jsx("input",{id:f,type:h,name:f,value:n[f],onChange:t,min:h==="date"?f==="pickupDate"?new Date().toISOString().split("T")[0]:f==="eventDate"||f==="returnDate"?n.pickupDate||new Date().toISOString().split("T")[0]:void 0:void 0,style:{display:"block",width:"100%",maxWidth:"400px",margin:"0 auto",padding:"10px",border:e[f]?"1px solid red":"1px solid #ccc",borderRadius:"6px",fontSize:"1rem"}}),e[f]&&O.jsx("div",{style:{color:"red",fontSize:"0.85rem",maxWidth:"400px",margin:"0.3rem auto 0",textAlign:"right"},children:e[f]})]},f)),O.jsx("div",{style:{display:"flex",justifyContent:"center",marginBottom:"1.5rem"},children:O.jsx("button",{className:"btn btn-blue",onClick:()=>a(!0),children:"בחירת מוצרים"})}),O.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"10px"},children:[O.jsx("button",{className:"btn btn-green",onClick:r,disabled:o,children:o?"שומר...":"אישור הזמנה"}),O.jsx("button",{className:"btn btn-red",onClick:i,disabled:o,children:"ביטול הזמנה"})]})]})};function kk(n,e){var t=Object.setPrototypeOf;t?t(n,e):n.__proto__=e}function Mk(n,e){e===void 0&&(e=n.constructor);var t=Error.captureStackTrace;t&&t(n,e)}var Bk=function(){var n=function(t,r){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(i[o]=a[o])},n(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Fk=function(n){Bk(e,n);function e(t,r){var i=this.constructor,a=n.call(this,t,r)||this;return Object.defineProperty(a,"name",{value:i.name,enumerable:!1,configurable:!0}),kk(a,i.prototype),Mk(a),a}return e}(Error),jk=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),bo=function(n){jk(e,n);function e(t){t===void 0&&(t=void 0);var r=n.call(this,t)||this;return r.message=t,r}return e.prototype.getKind=function(){var t=this.constructor;return t.kind},e.kind="Exception",e}(Fk),Uk=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),el=function(n){Uk(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="ArgumentException",e}(bo),Vk=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Bt=function(n){Vk(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="IllegalArgumentException",e}(bo),zk=function(){function n(e){if(this.binarizer=e,e===null)throw new Bt("Binarizer must be non-null.")}return n.prototype.getWidth=function(){return this.binarizer.getWidth()},n.prototype.getHeight=function(){return this.binarizer.getHeight()},n.prototype.getBlackRow=function(e,t){return this.binarizer.getBlackRow(e,t)},n.prototype.getBlackMatrix=function(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix},n.prototype.isCropSupported=function(){return this.binarizer.getLuminanceSource().isCropSupported()},n.prototype.crop=function(e,t,r,i){var a=this.binarizer.getLuminanceSource().crop(e,t,r,i);return new n(this.binarizer.createBinarizer(a))},n.prototype.isRotateSupported=function(){return this.binarizer.getLuminanceSource().isRotateSupported()},n.prototype.rotateCounterClockwise=function(){var e=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new n(this.binarizer.createBinarizer(e))},n.prototype.rotateCounterClockwise45=function(){var e=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new n(this.binarizer.createBinarizer(e))},n.prototype.toString=function(){try{return this.getBlackMatrix().toString()}catch{return""}},n}(),qk=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Ki=function(n){qk(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.getChecksumInstance=function(){return new e},e.kind="ChecksumException",e}(bo),Hk=function(){function n(e){this.source=e}return n.prototype.getLuminanceSource=function(){return this.source},n.prototype.getWidth=function(){return this.source.getWidth()},n.prototype.getHeight=function(){return this.source.getHeight()},n}(),_r=function(){function n(){}return n.arraycopy=function(e,t,r,i,a){for(;a--;)r[i++]=e[t++]},n.currentTimeMillis=function(){return Date.now()},n}(),Gk=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),tx=function(n){Gk(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="IndexOutOfBoundsException",e}(bo),Wk=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),yb=function(n){Wk(e,n);function e(t,r){t===void 0&&(t=void 0),r===void 0&&(r=void 0);var i=n.call(this,r)||this;return i.index=t,i.message=r,i}return e.kind="ArrayIndexOutOfBoundsException",e}(tx),$k=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Li=function(){function n(){}return n.fill=function(e,t){for(var r=0,i=e.length;r<i;r++)e[r]=t},n.fillWithin=function(e,t,r,i){n.rangeCheck(e.length,t,r);for(var a=t;a<r;a++)e[a]=i},n.rangeCheck=function(e,t,r){if(t>r)throw new Bt("fromIndex("+t+") > toIndex("+r+")");if(t<0)throw new yb(t);if(r>e)throw new yb(r)},n.asList=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e},n.create=function(e,t,r){var i=Array.from({length:e});return i.map(function(a){return Array.from({length:t}).fill(r)})},n.createInt32Array=function(e,t,r){var i=Array.from({length:e});return i.map(function(a){return Int32Array.from({length:t}).fill(r)})},n.equals=function(e,t){if(!e||!t||!e.length||!t.length||e.length!==t.length)return!1;for(var r=0,i=e.length;r<i;r++)if(e[r]!==t[r])return!1;return!0},n.hashCode=function(e){var t,r;if(e===null)return 0;var i=1;try{for(var a=$k(e),o=a.next();!o.done;o=a.next()){var s=o.value;i=31*i+s}}catch(u){t={error:u}}finally{try{o&&!o.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}return i},n.fillUint8Array=function(e,t){for(var r=0;r!==e.length;r++)e[r]=t},n.copyOf=function(e,t){return e.slice(0,t)},n.copyOfUint8Array=function(e,t){if(e.length<=t){var r=new Uint8Array(t);return r.set(e),r}return e.slice(0,t)},n.copyOfRange=function(e,t,r){var i=r-t,a=new Int32Array(i);return _r.arraycopy(e,t,a,0,i),a},n.binarySearch=function(e,t,r){r===void 0&&(r=n.numberComparator);for(var i=0,a=e.length-1;i<=a;){var o=a+i>>1,s=r(t,e[o]);if(s>0)i=o+1;else if(s<0)a=o-1;else return o}return-i-1},n.numberComparator=function(e,t){return e-t},n}(),gn=function(){function n(){}return n.numberOfTrailingZeros=function(e){var t;if(e===0)return 32;var r=31;return t=e<<16,t!==0&&(r-=16,e=t),t=e<<8,t!==0&&(r-=8,e=t),t=e<<4,t!==0&&(r-=4,e=t),t=e<<2,t!==0&&(r-=2,e=t),r-(e<<1>>>31)},n.numberOfLeadingZeros=function(e){if(e===0)return 32;var t=1;return e>>>16||(t+=16,e<<=16),e>>>24||(t+=8,e<<=8),e>>>28||(t+=4,e<<=4),e>>>30||(t+=2,e<<=2),t-=e>>>31,t},n.toHexString=function(e){return e.toString(16)},n.toBinaryString=function(e){return String(parseInt(String(e),2))},n.bitCount=function(e){return e=e-(e>>>1&1431655765),e=(e&858993459)+(e>>>2&858993459),e=e+(e>>>4)&252645135,e=e+(e>>>8),e=e+(e>>>16),e&63},n.truncDivision=function(e,t){return Math.trunc(e/t)},n.parseInt=function(e,t){return t===void 0&&(t=void 0),parseInt(e,t)},n.MIN_VALUE_32_BITS=-2147483648,n.MAX_VALUE=Number.MAX_SAFE_INTEGER,n}(),Qi=function(){function n(e,t){e===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=e,t==null?this.bits=n.makeArray(e):this.bits=t)}return n.prototype.getSize=function(){return this.size},n.prototype.getSizeInBytes=function(){return Math.floor((this.size+7)/8)},n.prototype.ensureCapacity=function(e){if(e>this.bits.length*32){var t=n.makeArray(e);_r.arraycopy(this.bits,0,t,0,this.bits.length),this.bits=t}},n.prototype.get=function(e){return(this.bits[Math.floor(e/32)]&1<<(e&31))!==0},n.prototype.set=function(e){this.bits[Math.floor(e/32)]|=1<<(e&31)},n.prototype.flip=function(e){this.bits[Math.floor(e/32)]^=1<<(e&31)},n.prototype.getNextSet=function(e){var t=this.size;if(e>=t)return t;var r=this.bits,i=Math.floor(e/32),a=r[i];a&=~((1<<(e&31))-1);for(var o=r.length;a===0;){if(++i===o)return t;a=r[i]}var s=i*32+gn.numberOfTrailingZeros(a);return s>t?t:s},n.prototype.getNextUnset=function(e){var t=this.size;if(e>=t)return t;var r=this.bits,i=Math.floor(e/32),a=~r[i];a&=~((1<<(e&31))-1);for(var o=r.length;a===0;){if(++i===o)return t;a=~r[i]}var s=i*32+gn.numberOfTrailingZeros(a);return s>t?t:s},n.prototype.setBulk=function(e,t){this.bits[Math.floor(e/32)]=t},n.prototype.setRange=function(e,t){if(t<e||e<0||t>this.size)throw new Bt;if(t!==e){t--;for(var r=Math.floor(e/32),i=Math.floor(t/32),a=this.bits,o=r;o<=i;o++){var s=o>r?0:e&31,u=o<i?31:t&31,f=(2<<u)-(1<<s);a[o]|=f}}},n.prototype.clear=function(){for(var e=this.bits.length,t=this.bits,r=0;r<e;r++)t[r]=0},n.prototype.isRange=function(e,t,r){if(t<e||e<0||t>this.size)throw new Bt;if(t===e)return!0;t--;for(var i=Math.floor(e/32),a=Math.floor(t/32),o=this.bits,s=i;s<=a;s++){var u=s>i?0:e&31,f=s<a?31:t&31,h=(2<<f)-(1<<u)&4294967295;if((o[s]&h)!==(r?h:0))return!1}return!0},n.prototype.appendBit=function(e){this.ensureCapacity(this.size+1),e&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++},n.prototype.appendBits=function(e,t){if(t<0||t>32)throw new Bt("Num bits must be between 0 and 32");this.ensureCapacity(this.size+t);for(var r=t;r>0;r--)this.appendBit((e>>r-1&1)===1)},n.prototype.appendBitArray=function(e){var t=e.size;this.ensureCapacity(this.size+t);for(var r=0;r<t;r++)this.appendBit(e.get(r))},n.prototype.xor=function(e){if(this.size!==e.size)throw new Bt("Sizes don't match");for(var t=this.bits,r=0,i=t.length;r<i;r++)t[r]^=e.bits[r]},n.prototype.toBytes=function(e,t,r,i){for(var a=0;a<i;a++){for(var o=0,s=0;s<8;s++)this.get(e)&&(o|=1<<7-s),e++;t[r+a]=o}},n.prototype.getBitArray=function(){return this.bits},n.prototype.reverse=function(){for(var e=new Int32Array(this.bits.length),t=Math.floor((this.size-1)/32),r=t+1,i=this.bits,a=0;a<r;a++){var o=i[a];o=o>>1&1431655765|(o&1431655765)<<1,o=o>>2&858993459|(o&858993459)<<2,o=o>>4&252645135|(o&252645135)<<4,o=o>>8&16711935|(o&16711935)<<8,o=o>>16&65535|(o&65535)<<16,e[t-a]=o}if(this.size!==r*32){for(var s=r*32-this.size,u=e[0]>>>s,a=1;a<r;a++){var f=e[a];u|=f<<32-s,e[a-1]=u,u=f>>>s}e[r-1]=u}this.bits=e},n.makeArray=function(e){return new Int32Array(Math.floor((e+31)/32))},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.size===t.size&&Li.equals(this.bits,t.bits)},n.prototype.hashCode=function(){return 31*this.size+Li.hashCode(this.bits)},n.prototype.toString=function(){for(var e="",t=0,r=this.size;t<r;t++)(t&7)===0&&(e+=" "),e+=this.get(t)?"X":".";return e},n.prototype.clone=function(){return new n(this.size,this.bits.slice())},n.prototype.toArray=function(){for(var e=[],t=0,r=this.size;t<r;t++)e.push(this.get(t));return e},n}(),hy;(function(n){n[n.OTHER=0]="OTHER",n[n.PURE_BARCODE=1]="PURE_BARCODE",n[n.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",n[n.TRY_HARDER=3]="TRY_HARDER",n[n.CHARACTER_SET=4]="CHARACTER_SET",n[n.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",n[n.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",n[n.ENABLE_CODE_39_EXTENDED_MODE=7]="ENABLE_CODE_39_EXTENDED_MODE",n[n.ASSUME_GS1=8]="ASSUME_GS1",n[n.RETURN_CODABAR_START_END=9]="RETURN_CODABAR_START_END",n[n.NEED_RESULT_POINT_CALLBACK=10]="NEED_RESULT_POINT_CALLBACK",n[n.ALLOWED_EAN_EXTENSIONS=11]="ALLOWED_EAN_EXTENSIONS"})(hy||(hy={}));const Pr=hy;var Xk=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),pt=function(n){Xk(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.getFormatInstance=function(){return new e},e.kind="FormatException",e}(bo),Yk=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},rr;(function(n){n[n.Cp437=0]="Cp437",n[n.ISO8859_1=1]="ISO8859_1",n[n.ISO8859_2=2]="ISO8859_2",n[n.ISO8859_3=3]="ISO8859_3",n[n.ISO8859_4=4]="ISO8859_4",n[n.ISO8859_5=5]="ISO8859_5",n[n.ISO8859_6=6]="ISO8859_6",n[n.ISO8859_7=7]="ISO8859_7",n[n.ISO8859_8=8]="ISO8859_8",n[n.ISO8859_9=9]="ISO8859_9",n[n.ISO8859_10=10]="ISO8859_10",n[n.ISO8859_11=11]="ISO8859_11",n[n.ISO8859_13=12]="ISO8859_13",n[n.ISO8859_14=13]="ISO8859_14",n[n.ISO8859_15=14]="ISO8859_15",n[n.ISO8859_16=15]="ISO8859_16",n[n.SJIS=16]="SJIS",n[n.Cp1250=17]="Cp1250",n[n.Cp1251=18]="Cp1251",n[n.Cp1252=19]="Cp1252",n[n.Cp1256=20]="Cp1256",n[n.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",n[n.UTF8=22]="UTF8",n[n.ASCII=23]="ASCII",n[n.Big5=24]="Big5",n[n.GB18030=25]="GB18030",n[n.EUC_KR=26]="EUC_KR"})(rr||(rr={}));var Pi=function(){function n(e,t,r){for(var i,a,o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];this.valueIdentifier=e,this.name=r,typeof t=="number"?this.values=Int32Array.from([t]):this.values=t,this.otherEncodingNames=o,n.VALUE_IDENTIFIER_TO_ECI.set(e,this),n.NAME_TO_ECI.set(r,this);for(var u=this.values,f=0,h=u.length;f!==h;f++){var p=u[f];n.VALUES_TO_ECI.set(p,this)}try{for(var g=Yk(o),m=g.next();!m.done;m=g.next()){var _=m.value;n.NAME_TO_ECI.set(_,this)}}catch(b){i={error:b}}finally{try{m&&!m.done&&(a=g.return)&&a.call(g)}finally{if(i)throw i.error}}}return n.prototype.getValueIdentifier=function(){return this.valueIdentifier},n.prototype.getName=function(){return this.name},n.prototype.getValue=function(){return this.values[0]},n.getCharacterSetECIByValue=function(e){if(e<0||e>=900)throw new pt("incorect value");var t=n.VALUES_TO_ECI.get(e);if(t===void 0)throw new pt("incorect value");return t},n.getCharacterSetECIByName=function(e){var t=n.NAME_TO_ECI.get(e);if(t===void 0)throw new pt("incorect value");return t},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.getName()===t.getName()},n.VALUE_IDENTIFIER_TO_ECI=new Map,n.VALUES_TO_ECI=new Map,n.NAME_TO_ECI=new Map,n.Cp437=new n(rr.Cp437,Int32Array.from([0,2]),"Cp437"),n.ISO8859_1=new n(rr.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),n.ISO8859_2=new n(rr.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),n.ISO8859_3=new n(rr.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),n.ISO8859_4=new n(rr.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),n.ISO8859_5=new n(rr.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),n.ISO8859_6=new n(rr.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),n.ISO8859_7=new n(rr.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),n.ISO8859_8=new n(rr.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),n.ISO8859_9=new n(rr.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),n.ISO8859_10=new n(rr.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),n.ISO8859_11=new n(rr.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),n.ISO8859_13=new n(rr.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),n.ISO8859_14=new n(rr.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),n.ISO8859_15=new n(rr.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),n.ISO8859_16=new n(rr.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),n.SJIS=new n(rr.SJIS,20,"SJIS","Shift_JIS"),n.Cp1250=new n(rr.Cp1250,21,"Cp1250","windows-1250"),n.Cp1251=new n(rr.Cp1251,22,"Cp1251","windows-1251"),n.Cp1252=new n(rr.Cp1252,23,"Cp1252","windows-1252"),n.Cp1256=new n(rr.Cp1256,24,"Cp1256","windows-1256"),n.UnicodeBigUnmarked=new n(rr.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),n.UTF8=new n(rr.UTF8,26,"UTF8","UTF-8"),n.ASCII=new n(rr.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),n.Big5=new n(rr.Big5,28,"Big5"),n.GB18030=new n(rr.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),n.EUC_KR=new n(rr.EUC_KR,30,"EUC_KR","EUC-KR"),n}(),Kk=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Zp=function(n){Kk(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="UnsupportedOperationException",e}(bo),ws=function(){function n(){}return n.decode=function(e,t){var r=this.encodingName(t);return this.customDecoder?this.customDecoder(e,r):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(r)?this.decodeFallback(e,r):new TextDecoder(r).decode(e)},n.shouldDecodeOnFallback=function(e){return!n.isBrowser()&&e==="ISO-8859-1"},n.encode=function(e,t){var r=this.encodingName(t);return this.customEncoder?this.customEncoder(e,r):typeof TextEncoder>"u"?this.encodeFallback(e):new TextEncoder().encode(e)},n.isBrowser=function(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"},n.encodingName=function(e){return typeof e=="string"?e:e.getName()},n.encodingCharacterSet=function(e){return e instanceof Pi?e:Pi.getCharacterSetECIByName(e)},n.decodeFallback=function(e,t){var r=this.encodingCharacterSet(t);if(n.isDecodeFallbackSupported(r)){for(var i="",a=0,o=e.length;a<o;a++){var s=e[a].toString(16);s.length<2&&(s="0"+s),i+="%"+s}return decodeURIComponent(i)}if(r.equals(Pi.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(e.buffer));throw new Zp("Encoding "+this.encodingName(t)+" not supported by fallback.")},n.isDecodeFallbackSupported=function(e){return e.equals(Pi.UTF8)||e.equals(Pi.ISO8859_1)||e.equals(Pi.ASCII)},n.encodeFallback=function(e){for(var t=btoa(unescape(encodeURIComponent(e))),r=t.split(""),i=[],a=0;a<r.length;a++)i.push(r[a].charCodeAt(0));return new Uint8Array(i)},n}(),On=function(){function n(){}return n.castAsNonUtf8Char=function(e,t){t===void 0&&(t=null);var r=t?t.getName():this.ISO88591;return ws.decode(new Uint8Array([e]),r)},n.guessEncoding=function(e,t){if(t!=null&&t.get(Pr.CHARACTER_SET)!==void 0)return t.get(Pr.CHARACTER_SET).toString();for(var r=e.length,i=!0,a=!0,o=!0,s=0,u=0,f=0,h=0,p=0,g=0,m=0,_=0,b=0,T=0,S=0,D=e.length>3&&e[0]===239&&e[1]===187&&e[2]===191,B=0;B<r&&(i||a||o);B++){var V=e[B]&255;o&&(s>0?(V&128)===0?o=!1:s--:(V&128)!==0&&((V&64)===0?o=!1:(s++,(V&32)===0?u++:(s++,(V&16)===0?f++:(s++,(V&8)===0?h++:o=!1))))),i&&(V>127&&V<160?i=!1:V>159&&(V<192||V===215||V===247)&&S++),a&&(p>0?V<64||V===127||V>252?a=!1:p--:V===128||V===160||V>239?a=!1:V>160&&V<224?(g++,_=0,m++,m>b&&(b=m)):V>127?(p++,m=0,_++,_>T&&(T=_)):(m=0,_=0))}return o&&s>0&&(o=!1),a&&p>0&&(a=!1),o&&(D||u+f+h>0)?n.UTF8:a&&(n.ASSUME_SHIFT_JIS||b>=3||T>=3)?n.SHIFT_JIS:i&&a?b===2&&g===2||S*10>=r?n.SHIFT_JIS:n.ISO88591:i?n.ISO88591:a?n.SHIFT_JIS:o?n.UTF8:n.PLATFORM_DEFAULT_ENCODING},n.format=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var i=-1;function a(s,u,f,h,p,g){if(s==="%%")return"%";if(t[++i]!==void 0){s=h?parseInt(h.substr(1)):void 0;var m=p?parseInt(p.substr(1)):void 0,_;switch(g){case"s":_=t[i];break;case"c":_=t[i][0];break;case"f":_=parseFloat(t[i]).toFixed(s);break;case"p":_=parseFloat(t[i]).toPrecision(s);break;case"e":_=parseFloat(t[i]).toExponential(s);break;case"x":_=parseInt(t[i]).toString(m||16);break;case"d":_=parseFloat(parseInt(t[i],m||10).toPrecision(s)).toFixed(0);break}_=typeof _=="object"?JSON.stringify(_):(+_).toString(m);for(var b=parseInt(f),T=f&&f[0]+""=="0"?"0":" ";_.length<b;)_=u!==void 0?_+T:T+_;return _}}var o=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(o,a)},n.getBytes=function(e,t){return ws.encode(e,t)},n.getCharCode=function(e,t){return t===void 0&&(t=0),e.charCodeAt(t)},n.getCharAt=function(e){return String.fromCharCode(e)},n.SHIFT_JIS=Pi.SJIS.getName(),n.GB2312="GB2312",n.ISO88591=Pi.ISO8859_1.getName(),n.EUC_JP="EUC_JP",n.UTF8=Pi.UTF8.getName(),n.PLATFORM_DEFAULT_ENCODING=n.UTF8,n.ASSUME_SHIFT_JIS=!1,n}(),cn=function(){function n(e){e===void 0&&(e=""),this.value=e}return n.prototype.enableDecoding=function(e){return this.encoding=e,this},n.prototype.append=function(e){return typeof e=="string"?this.value+=e.toString():this.encoding?this.value+=On.castAsNonUtf8Char(e,this.encoding):this.value+=String.fromCharCode(e),this},n.prototype.appendChars=function(e,t,r){for(var i=t;t<t+r;i++)this.append(e[i]);return this},n.prototype.length=function(){return this.value.length},n.prototype.charAt=function(e){return this.value.charAt(e)},n.prototype.deleteCharAt=function(e){this.value=this.value.substr(0,e)+this.value.substring(e+1)},n.prototype.setCharAt=function(e,t){this.value=this.value.substr(0,e)+t+this.value.substr(e+1)},n.prototype.substring=function(e,t){return this.value.substring(e,t)},n.prototype.setLengthToZero=function(){this.value=""},n.prototype.toString=function(){return this.value},n.prototype.insert=function(e,t){this.value=this.value.substring(0,e)+t+this.value.substring(e)},n}(),ru=function(){function n(e,t,r,i){if(this.width=e,this.height=t,this.rowSize=r,this.bits=i,t==null&&(t=e),this.height=t,e<1||t<1)throw new Bt("Both dimensions must be greater than 0");r==null&&(r=Math.floor((e+31)/32)),this.rowSize=r,i==null&&(this.bits=new Int32Array(this.rowSize*this.height))}return n.parseFromBooleanArray=function(e){for(var t=e.length,r=e[0].length,i=new n(r,t),a=0;a<t;a++)for(var o=e[a],s=0;s<r;s++)o[s]&&i.set(s,a);return i},n.parseFromString=function(e,t,r){if(e===null)throw new Bt("stringRepresentation cannot be null");for(var i=new Array(e.length),a=0,o=0,s=-1,u=0,f=0;f<e.length;)if(e.charAt(f)===`
`||e.charAt(f)==="\r"){if(a>o){if(s===-1)s=a-o;else if(a-o!==s)throw new Bt("row lengths do not match");o=a,u++}f++}else if(e.substring(f,f+t.length)===t)f+=t.length,i[a]=!0,a++;else if(e.substring(f,f+r.length)===r)f+=r.length,i[a]=!1,a++;else throw new Bt("illegal character encountered: "+e.substring(f));if(a>o){if(s===-1)s=a-o;else if(a-o!==s)throw new Bt("row lengths do not match");u++}for(var h=new n(s,u),p=0;p<a;p++)i[p]&&h.set(Math.floor(p%s),Math.floor(p/s));return h},n.prototype.get=function(e,t){var r=t*this.rowSize+Math.floor(e/32);return(this.bits[r]>>>(e&31)&1)!==0},n.prototype.set=function(e,t){var r=t*this.rowSize+Math.floor(e/32);this.bits[r]|=1<<(e&31)&4294967295},n.prototype.unset=function(e,t){var r=t*this.rowSize+Math.floor(e/32);this.bits[r]&=~(1<<(e&31)&4294967295)},n.prototype.flip=function(e,t){var r=t*this.rowSize+Math.floor(e/32);this.bits[r]^=1<<(e&31)&4294967295},n.prototype.xor=function(e){if(this.width!==e.getWidth()||this.height!==e.getHeight()||this.rowSize!==e.getRowSize())throw new Bt("input matrix dimensions do not match");for(var t=new Qi(Math.floor(this.width/32)+1),r=this.rowSize,i=this.bits,a=0,o=this.height;a<o;a++)for(var s=a*r,u=e.getRow(a,t).getBitArray(),f=0;f<r;f++)i[s+f]^=u[f]},n.prototype.clear=function(){for(var e=this.bits,t=e.length,r=0;r<t;r++)e[r]=0},n.prototype.setRegion=function(e,t,r,i){if(t<0||e<0)throw new Bt("Left and top must be nonnegative");if(i<1||r<1)throw new Bt("Height and width must be at least 1");var a=e+r,o=t+i;if(o>this.height||a>this.width)throw new Bt("The region must fit inside the matrix");for(var s=this.rowSize,u=this.bits,f=t;f<o;f++)for(var h=f*s,p=e;p<a;p++)u[h+Math.floor(p/32)]|=1<<(p&31)&4294967295},n.prototype.getRow=function(e,t){t==null||t.getSize()<this.width?t=new Qi(this.width):t.clear();for(var r=this.rowSize,i=this.bits,a=e*r,o=0;o<r;o++)t.setBulk(o*32,i[a+o]);return t},n.prototype.setRow=function(e,t){_r.arraycopy(t.getBitArray(),0,this.bits,e*this.rowSize,this.rowSize)},n.prototype.rotate180=function(){for(var e=this.getWidth(),t=this.getHeight(),r=new Qi(e),i=new Qi(e),a=0,o=Math.floor((t+1)/2);a<o;a++)r=this.getRow(a,r),i=this.getRow(t-1-a,i),r.reverse(),i.reverse(),this.setRow(a,i),this.setRow(t-1-a,r)},n.prototype.getEnclosingRectangle=function(){for(var e=this.width,t=this.height,r=this.rowSize,i=this.bits,a=e,o=t,s=-1,u=-1,f=0;f<t;f++)for(var h=0;h<r;h++){var p=i[f*r+h];if(p!==0){if(f<o&&(o=f),f>u&&(u=f),h*32<a){for(var g=0;(p<<31-g&4294967295)===0;)g++;h*32+g<a&&(a=h*32+g)}if(h*32+31>s){for(var g=31;!(p>>>g);)g--;h*32+g>s&&(s=h*32+g)}}}return s<a||u<o?null:Int32Array.from([a,o,s-a+1,u-o+1])},n.prototype.getTopLeftOnBit=function(){for(var e=this.rowSize,t=this.bits,r=0;r<t.length&&t[r]===0;)r++;if(r===t.length)return null;for(var i=r/e,a=r%e*32,o=t[r],s=0;(o<<31-s&4294967295)===0;)s++;return a+=s,Int32Array.from([a,i])},n.prototype.getBottomRightOnBit=function(){for(var e=this.rowSize,t=this.bits,r=t.length-1;r>=0&&t[r]===0;)r--;if(r<0)return null;for(var i=Math.floor(r/e),a=Math.floor(r%e)*32,o=t[r],s=31;!(o>>>s);)s--;return a+=s,Int32Array.from([a,i])},n.prototype.getWidth=function(){return this.width},n.prototype.getHeight=function(){return this.height},n.prototype.getRowSize=function(){return this.rowSize},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.width===t.width&&this.height===t.height&&this.rowSize===t.rowSize&&Li.equals(this.bits,t.bits)},n.prototype.hashCode=function(){var e=this.width;return e=31*e+this.width,e=31*e+this.height,e=31*e+this.rowSize,e=31*e+Li.hashCode(this.bits),e},n.prototype.toString=function(e,t,r){return e===void 0&&(e="X "),t===void 0&&(t="  "),r===void 0&&(r=`
`),this.buildToString(e,t,r)},n.prototype.buildToString=function(e,t,r){for(var i=new cn,a=0,o=this.height;a<o;a++){for(var s=0,u=this.width;s<u;s++)i.append(this.get(s,a)?e:t);i.append(r)}return i.toString()},n.prototype.clone=function(){return new n(this.width,this.height,this.rowSize,this.bits.slice())},n}(),Qk=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),ze=function(n){Qk(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.getNotFoundInstance=function(){return new e},e.kind="NotFoundException",e}(bo),Zk=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Jk=function(n){Zk(e,n);function e(t){var r=n.call(this,t)||this;return r.luminances=e.EMPTY,r.buckets=new Int32Array(e.LUMINANCE_BUCKETS),r}return e.prototype.getBlackRow=function(t,r){var i=this.getLuminanceSource(),a=i.getWidth();r==null||r.getSize()<a?r=new Qi(a):r.clear(),this.initArrays(a);for(var o=i.getRow(t,this.luminances),s=this.buckets,u=0;u<a;u++)s[(o[u]&255)>>e.LUMINANCE_SHIFT]++;var f=e.estimateBlackPoint(s);if(a<3)for(var u=0;u<a;u++)(o[u]&255)<f&&r.set(u);else for(var h=o[0]&255,p=o[1]&255,u=1;u<a-1;u++){var g=o[u+1]&255;(p*4-h-g)/2<f&&r.set(u),h=p,p=g}return r},e.prototype.getBlackMatrix=function(){var t=this.getLuminanceSource(),r=t.getWidth(),i=t.getHeight(),a=new ru(r,i);this.initArrays(r);for(var o=this.buckets,s=1;s<5;s++)for(var u=Math.floor(i*s/5),f=t.getRow(u,this.luminances),h=Math.floor(r*4/5),p=Math.floor(r/5);p<h;p++){var g=f[p]&255;o[g>>e.LUMINANCE_SHIFT]++}for(var m=e.estimateBlackPoint(o),_=t.getMatrix(),s=0;s<i;s++)for(var b=s*r,p=0;p<r;p++){var g=_[b+p]&255;g<m&&a.set(p,s)}return a},e.prototype.createBinarizer=function(t){return new e(t)},e.prototype.initArrays=function(t){this.luminances.length<t&&(this.luminances=new Uint8ClampedArray(t));for(var r=this.buckets,i=0;i<e.LUMINANCE_BUCKETS;i++)r[i]=0},e.estimateBlackPoint=function(t){for(var r=t.length,i=0,a=0,o=0,s=0;s<r;s++)t[s]>o&&(a=s,o=t[s]),t[s]>i&&(i=t[s]);for(var u=0,f=0,s=0;s<r;s++){var h=s-a,p=t[s]*h*h;p>f&&(u=s,f=p)}if(a>u){var g=a;a=u,u=g}if(u-a<=r/16)throw new ze;for(var m=u-1,_=-1,s=u-1;s>a;s--){var b=s-a,p=b*b*(u-s)*(i-t[s]);p>_&&(m=s,_=p)}return m<<e.LUMINANCE_SHIFT},e.LUMINANCE_BITS=5,e.LUMINANCE_SHIFT=8-e.LUMINANCE_BITS,e.LUMINANCE_BUCKETS=1<<e.LUMINANCE_BITS,e.EMPTY=Uint8ClampedArray.from([0]),e}(Hk),eM=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),tM=function(n){eM(e,n);function e(t){var r=n.call(this,t)||this;return r.matrix=null,r}return e.prototype.getBlackMatrix=function(){if(this.matrix!==null)return this.matrix;var t=this.getLuminanceSource(),r=t.getWidth(),i=t.getHeight();if(r>=e.MINIMUM_DIMENSION&&i>=e.MINIMUM_DIMENSION){var a=t.getMatrix(),o=r>>e.BLOCK_SIZE_POWER;(r&e.BLOCK_SIZE_MASK)!==0&&o++;var s=i>>e.BLOCK_SIZE_POWER;(i&e.BLOCK_SIZE_MASK)!==0&&s++;var u=e.calculateBlackPoints(a,o,s,r,i),f=new ru(r,i);e.calculateThresholdForBlock(a,o,s,r,i,u,f),this.matrix=f}else this.matrix=n.prototype.getBlackMatrix.call(this);return this.matrix},e.prototype.createBinarizer=function(t){return new e(t)},e.calculateThresholdForBlock=function(t,r,i,a,o,s,u){for(var f=o-e.BLOCK_SIZE,h=a-e.BLOCK_SIZE,p=0;p<i;p++){var g=p<<e.BLOCK_SIZE_POWER;g>f&&(g=f);for(var m=e.cap(p,2,i-3),_=0;_<r;_++){var b=_<<e.BLOCK_SIZE_POWER;b>h&&(b=h);for(var T=e.cap(_,2,r-3),S=0,D=-2;D<=2;D++){var B=s[m+D];S+=B[T-2]+B[T-1]+B[T]+B[T+1]+B[T+2]}var V=S/25;e.thresholdBlock(t,b,g,V,a,u)}}},e.cap=function(t,r,i){return t<r?r:t>i?i:t},e.thresholdBlock=function(t,r,i,a,o,s){for(var u=0,f=i*o+r;u<e.BLOCK_SIZE;u++,f+=o)for(var h=0;h<e.BLOCK_SIZE;h++)(t[f+h]&255)<=a&&s.set(r+h,i+u)},e.calculateBlackPoints=function(t,r,i,a,o){for(var s=o-e.BLOCK_SIZE,u=a-e.BLOCK_SIZE,f=new Array(i),h=0;h<i;h++){f[h]=new Int32Array(r);var p=h<<e.BLOCK_SIZE_POWER;p>s&&(p=s);for(var g=0;g<r;g++){var m=g<<e.BLOCK_SIZE_POWER;m>u&&(m=u);for(var _=0,b=255,T=0,S=0,D=p*a+m;S<e.BLOCK_SIZE;S++,D+=a){for(var B=0;B<e.BLOCK_SIZE;B++){var V=t[D+B]&255;_+=V,V<b&&(b=V),V>T&&(T=V)}if(T-b>e.MIN_DYNAMIC_RANGE)for(S++,D+=a;S<e.BLOCK_SIZE;S++,D+=a)for(var B=0;B<e.BLOCK_SIZE;B++)_+=t[D+B]&255}var Y=_>>e.BLOCK_SIZE_POWER*2;if(T-b<=e.MIN_DYNAMIC_RANGE&&(Y=b/2,h>0&&g>0)){var q=(f[h-1][g]+2*f[h][g-1]+f[h-1][g-1])/4;b<q&&(Y=q)}f[h][g]=Y}}return f},e.BLOCK_SIZE_POWER=3,e.BLOCK_SIZE=1<<e.BLOCK_SIZE_POWER,e.BLOCK_SIZE_MASK=e.BLOCK_SIZE-1,e.MINIMUM_DIMENSION=e.BLOCK_SIZE*5,e.MIN_DYNAMIC_RANGE=24,e}(Jk),E2=function(){function n(e,t){this.width=e,this.height=t}return n.prototype.getWidth=function(){return this.width},n.prototype.getHeight=function(){return this.height},n.prototype.isCropSupported=function(){return!1},n.prototype.crop=function(e,t,r,i){throw new Zp("This luminance source does not support cropping.")},n.prototype.isRotateSupported=function(){return!1},n.prototype.rotateCounterClockwise=function(){throw new Zp("This luminance source does not support rotation by 90 degrees.")},n.prototype.rotateCounterClockwise45=function(){throw new Zp("This luminance source does not support rotation by 45 degrees.")},n.prototype.toString=function(){for(var e=new Uint8ClampedArray(this.width),t=new cn,r=0;r<this.height;r++){for(var i=this.getRow(r,e),a=0;a<this.width;a++){var o=i[a]&255,s=void 0;o<64?s="#":o<128?s="+":o<192?s=".":s=" ",t.append(s)}t.append(`
`)}return t.toString()},n}(),nM=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),nx=function(n){nM(e,n);function e(t){var r=n.call(this,t.getWidth(),t.getHeight())||this;return r.delegate=t,r}return e.prototype.getRow=function(t,r){for(var i=this.delegate.getRow(t,r),a=this.getWidth(),o=0;o<a;o++)i[o]=255-(i[o]&255);return i},e.prototype.getMatrix=function(){for(var t=this.delegate.getMatrix(),r=this.getWidth()*this.getHeight(),i=new Uint8ClampedArray(r),a=0;a<r;a++)i[a]=255-(t[a]&255);return i},e.prototype.isCropSupported=function(){return this.delegate.isCropSupported()},e.prototype.crop=function(t,r,i,a){return new e(this.delegate.crop(t,r,i,a))},e.prototype.isRotateSupported=function(){return this.delegate.isRotateSupported()},e.prototype.invert=function(){return this.delegate},e.prototype.rotateCounterClockwise=function(){return new e(this.delegate.rotateCounterClockwise())},e.prototype.rotateCounterClockwise45=function(){return new e(this.delegate.rotateCounterClockwise45())},e}(E2),rM=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),iM=function(n){rM(e,n);function e(t,r){r===void 0&&(r=!1);var i=n.call(this,t.width,t.height)||this;return i.canvas=t,i.tempCanvasElement=null,i.buffer=e.makeBufferFromCanvasImageData(t,r),i}return e.makeBufferFromCanvasImageData=function(t,r){r===void 0&&(r=!1);var i=t.getContext("2d").getImageData(0,0,t.width,t.height);return e.toGrayscaleBuffer(i.data,t.width,t.height,r)},e.toGrayscaleBuffer=function(t,r,i,a){a===void 0&&(a=!1);var o=new Uint8ClampedArray(r*i);if(e.FRAME_INDEX=!e.FRAME_INDEX,e.FRAME_INDEX||!a)for(var s=0,u=0,f=t.length;s<f;s+=4,u++){var h=void 0,p=t[s+3];if(p===0)h=255;else{var g=t[s],m=t[s+1],_=t[s+2];h=306*g+601*m+117*_+512>>10}o[u]=h}else for(var s=0,u=0,b=t.length;s<b;s+=4,u++){var h=void 0,p=t[s+3];if(p===0)h=255;else{var g=t[s],m=t[s+1],_=t[s+2];h=306*g+601*m+117*_+512>>10}o[u]=255-h}return o},e.prototype.getRow=function(t,r){if(t<0||t>=this.getHeight())throw new Bt("Requested row is outside the image: "+t);var i=this.getWidth(),a=t*i;return r===null?r=this.buffer.slice(a,a+i):(r.length<i&&(r=new Uint8ClampedArray(i)),r.set(this.buffer.slice(a,a+i))),r},e.prototype.getMatrix=function(){return this.buffer},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(t,r,i,a){return n.prototype.crop.call(this,t,r,i,a),this},e.prototype.isRotateSupported=function(){return!0},e.prototype.rotateCounterClockwise=function(){return this.rotate(-90),this},e.prototype.rotateCounterClockwise45=function(){return this.rotate(-45),this},e.prototype.getTempCanvasElement=function(){if(this.tempCanvasElement===null){var t=this.canvas.ownerDocument.createElement("canvas");t.width=this.canvas.width,t.height=this.canvas.height,this.tempCanvasElement=t}return this.tempCanvasElement},e.prototype.rotate=function(t){var r=this.getTempCanvasElement(),i=r.getContext("2d"),a=t*e.DEGREE_TO_RADIANS,o=this.canvas.width,s=this.canvas.height,u=Math.ceil(Math.abs(Math.cos(a))*o+Math.abs(Math.sin(a))*s),f=Math.ceil(Math.abs(Math.sin(a))*o+Math.abs(Math.cos(a))*s);return r.width=u,r.height=f,i.translate(u/2,f/2),i.rotate(a),i.drawImage(this.canvas,o/-2,s/-2),this.buffer=e.makeBufferFromCanvasImageData(r),this},e.prototype.invert=function(){return new nx(this)},e.DEGREE_TO_RADIANS=Math.PI/180,e.FRAME_INDEX=!0,e}(E2),aM=function(){function n(e,t,r){this.deviceId=e,this.label=t,this.kind="videoinput",this.groupId=r||void 0}return n.prototype.toJSON=function(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}},n}(),Wa=function(n,e,t,r){function i(a){return a instanceof t?a:new t(function(o){o(a)})}return new(t||(t=Promise))(function(a,o){function s(h){try{f(r.next(h))}catch(p){o(p)}}function u(h){try{f(r.throw(h))}catch(p){o(p)}}function f(h){h.done?a(h.value):i(h.value).then(s,u)}f((r=r.apply(n,e||[])).next())})},$a=function(n,e){var t={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,i,a,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(f){return function(h){return u([f,h])}}function u(f){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,i&&(a=f[0]&2?i.return:f[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,f[1])).done)return a;switch(i=0,a&&(f=[f[0]&2,a.value]),f[0]){case 0:case 1:a=f;break;case 4:return t.label++,{value:f[1],done:!1};case 5:t.label++,i=f[1],f=[0];continue;case 7:f=t.ops.pop(),t.trys.pop();continue;default:if(a=t.trys,!(a=a.length>0&&a[a.length-1])&&(f[0]===6||f[0]===2)){t=0;continue}if(f[0]===3&&(!a||f[1]>a[0]&&f[1]<a[3])){t.label=f[1];break}if(f[0]===6&&t.label<a[1]){t.label=a[1],a=f;break}if(a&&t.label<a[2]){t.label=a[2],t.ops.push(f);break}a[2]&&t.ops.pop(),t.trys.pop();continue}f=e.call(n,t)}catch(h){f=[6,h],i=0}finally{r=a=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}},oM=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Od=function(){function n(e,t,r){t===void 0&&(t=500),this.reader=e,this.timeBetweenScansMillis=t,this._hints=r,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}return Object.defineProperty(n.prototype,"hasNavigator",{get:function(){return typeof navigator<"u"},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isMediaDevicesSuported",{get:function(){return this.hasNavigator&&!!navigator.mediaDevices},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"canEnumerateDevices",{get:function(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"timeBetweenDecodingAttempts",{get:function(){return this._timeBetweenDecodingAttempts},set:function(e){this._timeBetweenDecodingAttempts=e<0?0:e},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"hints",{get:function(){return this._hints},set:function(e){this._hints=e||null},enumerable:!1,configurable:!0}),n.prototype.listVideoInputDevices=function(){return Wa(this,void 0,void 0,function(){var e,t,r,i,a,o,s,u,f,h,p,g;return $a(this,function(m){switch(m.label){case 0:if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");return[4,navigator.mediaDevices.enumerateDevices()];case 1:e=m.sent(),t=[];try{for(r=oM(e),i=r.next();!i.done;i=r.next())a=i.value,o=a.kind==="video"?"videoinput":a.kind,o==="videoinput"&&(s=a.deviceId||a.id,u=a.label||"Video device "+(t.length+1),f=a.groupId,h={deviceId:s,label:u,kind:o,groupId:f},t.push(h))}catch(_){p={error:_}}finally{try{i&&!i.done&&(g=r.return)&&g.call(r)}finally{if(p)throw p.error}}return[2,t]}})})},n.prototype.getVideoInputDevices=function(){return Wa(this,void 0,void 0,function(){var e;return $a(this,function(t){switch(t.label){case 0:return[4,this.listVideoInputDevices()];case 1:return e=t.sent(),[2,e.map(function(r){return new aM(r.deviceId,r.label)})]}})})},n.prototype.findDeviceById=function(e){return Wa(this,void 0,void 0,function(){var t;return $a(this,function(r){switch(r.label){case 0:return[4,this.listVideoInputDevices()];case 1:return t=r.sent(),t?[2,t.find(function(i){return i.deviceId===e})]:[2,null]}})})},n.prototype.decodeFromInputVideoDevice=function(e,t){return Wa(this,void 0,void 0,function(){return $a(this,function(r){switch(r.label){case 0:return[4,this.decodeOnceFromVideoDevice(e,t)];case 1:return[2,r.sent()]}})})},n.prototype.decodeOnceFromVideoDevice=function(e,t){return Wa(this,void 0,void 0,function(){var r,i;return $a(this,function(a){switch(a.label){case 0:return this.reset(),e?r={deviceId:{exact:e}}:r={facingMode:"environment"},i={video:r},[4,this.decodeOnceFromConstraints(i,t)];case 1:return[2,a.sent()]}})})},n.prototype.decodeOnceFromConstraints=function(e,t){return Wa(this,void 0,void 0,function(){var r;return $a(this,function(i){switch(i.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return r=i.sent(),[4,this.decodeOnceFromStream(r,t)];case 2:return[2,i.sent()]}})})},n.prototype.decodeOnceFromStream=function(e,t){return Wa(this,void 0,void 0,function(){var r,i;return $a(this,function(a){switch(a.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,t)];case 1:return r=a.sent(),[4,this.decodeOnce(r)];case 2:return i=a.sent(),[2,i]}})})},n.prototype.decodeFromInputVideoDeviceContinuously=function(e,t,r){return Wa(this,void 0,void 0,function(){return $a(this,function(i){switch(i.label){case 0:return[4,this.decodeFromVideoDevice(e,t,r)];case 1:return[2,i.sent()]}})})},n.prototype.decodeFromVideoDevice=function(e,t,r){return Wa(this,void 0,void 0,function(){var i,a;return $a(this,function(o){switch(o.label){case 0:return e?i={deviceId:{exact:e}}:i={facingMode:"environment"},a={video:i},[4,this.decodeFromConstraints(a,t,r)];case 1:return[2,o.sent()]}})})},n.prototype.decodeFromConstraints=function(e,t,r){return Wa(this,void 0,void 0,function(){var i;return $a(this,function(a){switch(a.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return i=a.sent(),[4,this.decodeFromStream(i,t,r)];case 2:return[2,a.sent()]}})})},n.prototype.decodeFromStream=function(e,t,r){return Wa(this,void 0,void 0,function(){var i;return $a(this,function(a){switch(a.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,t)];case 1:return i=a.sent(),[4,this.decodeContinuously(i,r)];case 2:return[2,a.sent()]}})})},n.prototype.stopAsyncDecode=function(){this._stopAsyncDecode=!0},n.prototype.stopContinuousDecode=function(){this._stopContinuousDecode=!0},n.prototype.attachStreamToVideo=function(e,t){return Wa(this,void 0,void 0,function(){var r;return $a(this,function(i){switch(i.label){case 0:return r=this.prepareVideoElement(t),this.addVideoSource(r,e),this.videoElement=r,this.stream=e,[4,this.playVideoOnLoadAsync(r)];case 1:return i.sent(),[2,r]}})})},n.prototype.playVideoOnLoadAsync=function(e){var t=this;return new Promise(function(r,i){return t.playVideoOnLoad(e,function(){return r()})})},n.prototype.playVideoOnLoad=function(e,t){var r=this;this.videoEndedListener=function(){return r.stopStreams()},this.videoCanPlayListener=function(){return r.tryPlayVideo(e)},e.addEventListener("ended",this.videoEndedListener),e.addEventListener("canplay",this.videoCanPlayListener),e.addEventListener("playing",t),this.tryPlayVideo(e)},n.prototype.isVideoPlaying=function(e){return e.currentTime>0&&!e.paused&&!e.ended&&e.readyState>2},n.prototype.tryPlayVideo=function(e){return Wa(this,void 0,void 0,function(){return $a(this,function(t){switch(t.label){case 0:if(this.isVideoPlaying(e))return console.warn("Trying to play video that is already playing."),[2];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,e.play()];case 2:return t.sent(),[3,4];case 3:return t.sent(),console.warn("It was not possible to play the video."),[3,4];case 4:return[2]}})})},n.prototype.getMediaElement=function(e,t){var r=document.getElementById(e);if(!r)throw new el("element with id '"+e+"' not found");if(r.nodeName.toLowerCase()!==t.toLowerCase())throw new el("element with id '"+e+"' must be an "+t+" element");return r},n.prototype.decodeFromImage=function(e,t){if(!e&&!t)throw new el("either imageElement with a src set or an url must be provided");return t&&!e?this.decodeFromImageUrl(t):this.decodeFromImageElement(e)},n.prototype.decodeFromVideo=function(e,t){if(!e&&!t)throw new el("Either an element with a src set or an URL must be provided");return t&&!e?this.decodeFromVideoUrl(t):this.decodeFromVideoElement(e)},n.prototype.decodeFromVideoContinuously=function(e,t,r){if(e===void 0&&t===void 0)throw new el("Either an element with a src set or an URL must be provided");return t&&!e?this.decodeFromVideoUrlContinuously(t,r):this.decodeFromVideoElementContinuously(e,r)},n.prototype.decodeFromImageElement=function(e){if(!e)throw new el("An image element must be provided.");this.reset();var t=this.prepareImageElement(e);this.imageElement=t;var r;return this.isImageLoaded(t)?r=this.decodeOnce(t,!1,!0):r=this._decodeOnLoadImage(t),r},n.prototype.decodeFromVideoElement=function(e){var t=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideo(t)},n.prototype.decodeFromVideoElementContinuously=function(e,t){var r=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideoContinuously(r,t)},n.prototype._decodeFromVideoElementSetup=function(e){if(!e)throw new el("A video element must be provided.");this.reset();var t=this.prepareVideoElement(e);return this.videoElement=t,t},n.prototype.decodeFromImageUrl=function(e){if(!e)throw new el("An URL must be provided.");this.reset();var t=this.prepareImageElement();this.imageElement=t;var r=this._decodeOnLoadImage(t);return t.src=e,r},n.prototype.decodeFromVideoUrl=function(e){if(!e)throw new el("An URL must be provided.");this.reset();var t=this.prepareVideoElement(),r=this.decodeFromVideoElement(t);return t.src=e,r},n.prototype.decodeFromVideoUrlContinuously=function(e,t){if(!e)throw new el("An URL must be provided.");this.reset();var r=this.prepareVideoElement(),i=this.decodeFromVideoElementContinuously(r,t);return r.src=e,i},n.prototype._decodeOnLoadImage=function(e){var t=this;return new Promise(function(r,i){t.imageLoadedListener=function(){return t.decodeOnce(e,!1,!0).then(r,i)},e.addEventListener("load",t.imageLoadedListener)})},n.prototype._decodeOnLoadVideo=function(e){return Wa(this,void 0,void 0,function(){return $a(this,function(t){switch(t.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return t.sent(),[4,this.decodeOnce(e)];case 2:return[2,t.sent()]}})})},n.prototype._decodeOnLoadVideoContinuously=function(e,t){return Wa(this,void 0,void 0,function(){return $a(this,function(r){switch(r.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return r.sent(),this.decodeContinuously(e,t),[2]}})})},n.prototype.isImageLoaded=function(e){return!(!e.complete||e.naturalWidth===0)},n.prototype.prepareImageElement=function(e){var t;return typeof e>"u"&&(t=document.createElement("img"),t.width=200,t.height=200),typeof e=="string"&&(t=this.getMediaElement(e,"img")),e instanceof HTMLImageElement&&(t=e),t},n.prototype.prepareVideoElement=function(e){var t;return!e&&typeof document<"u"&&(t=document.createElement("video"),t.width=200,t.height=200),typeof e=="string"&&(t=this.getMediaElement(e,"video")),e instanceof HTMLVideoElement&&(t=e),t.setAttribute("autoplay","true"),t.setAttribute("muted","true"),t.setAttribute("playsinline","true"),t},n.prototype.decodeOnce=function(e,t,r){var i=this;t===void 0&&(t=!0),r===void 0&&(r=!0),this._stopAsyncDecode=!1;var a=function(o,s){if(i._stopAsyncDecode){s(new ze("Video stream has ended before any code could be detected.")),i._stopAsyncDecode=void 0;return}try{var u=i.decode(e);o(u)}catch(g){var f=t&&g instanceof ze,h=g instanceof Ki||g instanceof pt,p=h&&r;if(f||p)return setTimeout(a,i._timeBetweenDecodingAttempts,o,s);s(g)}};return new Promise(function(o,s){return a(o,s)})},n.prototype.decodeContinuously=function(e,t){var r=this;this._stopContinuousDecode=!1;var i=function(){if(r._stopContinuousDecode){r._stopContinuousDecode=void 0;return}try{var a=r.decode(e);t(a,null),setTimeout(i,r.timeBetweenScansMillis)}catch(u){t(null,u);var o=u instanceof Ki||u instanceof pt,s=u instanceof ze;(o||s)&&setTimeout(i,r._timeBetweenDecodingAttempts)}};i()},n.prototype.decode=function(e){var t=this.createBinaryBitmap(e);return this.decodeBitmap(t)},n.prototype.createBinaryBitmap=function(e){this.getCaptureCanvasContext(e);var t=!1;e instanceof HTMLVideoElement?(this.drawFrameOnCanvas(e),t=!0):this.drawImageOnCanvas(e);var r=this.getCaptureCanvas(e),i=new iM(r,t),a=new tM(i);return new zk(a)},n.prototype.getCaptureCanvasContext=function(e){if(!this.captureCanvasContext){var t=this.getCaptureCanvas(e),r=void 0;try{r=t.getContext("2d",{willReadFrequently:!0})}catch{r=t.getContext("2d")}this.captureCanvasContext=r}return this.captureCanvasContext},n.prototype.getCaptureCanvas=function(e){if(!this.captureCanvas){var t=this.createCaptureCanvas(e);this.captureCanvas=t}return this.captureCanvas},n.prototype.drawFrameOnCanvas=function(e,t,r){t===void 0&&(t={sx:0,sy:0,sWidth:e.videoWidth,sHeight:e.videoHeight,dx:0,dy:0,dWidth:e.videoWidth,dHeight:e.videoHeight}),r===void 0&&(r=this.captureCanvasContext),r.drawImage(e,t.sx,t.sy,t.sWidth,t.sHeight,t.dx,t.dy,t.dWidth,t.dHeight)},n.prototype.drawImageOnCanvas=function(e,t,r){t===void 0&&(t={sx:0,sy:0,sWidth:e.naturalWidth,sHeight:e.naturalHeight,dx:0,dy:0,dWidth:e.naturalWidth,dHeight:e.naturalHeight}),r===void 0&&(r=this.captureCanvasContext),r.drawImage(e,t.sx,t.sy,t.sWidth,t.sHeight,t.dx,t.dy,t.dWidth,t.dHeight)},n.prototype.decodeBitmap=function(e){return this.reader.decode(e,this._hints)},n.prototype.createCaptureCanvas=function(e){if(typeof document>"u")return this._destroyCaptureCanvas(),null;var t=document.createElement("canvas"),r,i;return typeof e<"u"&&(e instanceof HTMLVideoElement?(r=e.videoWidth,i=e.videoHeight):e instanceof HTMLImageElement&&(r=e.naturalWidth||e.width,i=e.naturalHeight||e.height)),t.style.width=r+"px",t.style.height=i+"px",t.width=r,t.height=i,t},n.prototype.stopStreams=function(){this.stream&&(this.stream.getVideoTracks().forEach(function(e){return e.stop()}),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()},n.prototype.reset=function(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()},n.prototype._destroyVideoElement=function(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)},n.prototype._destroyImageElement=function(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)},n.prototype._destroyCaptureCanvas=function(){this.captureCanvasContext=void 0,this.captureCanvas=void 0},n.prototype.addVideoSource=function(e,t){try{e.srcObject=t}catch{e.src=URL.createObjectURL(t)}},n.prototype.cleanVideoSource=function(e){try{e.srcObject=null}catch{e.src=""}this.videoElement.removeAttribute("src")},n}(),Fa=function(){function n(e,t,r,i,a,o){r===void 0&&(r=t==null?0:8*t.length),o===void 0&&(o=_r.currentTimeMillis()),this.text=e,this.rawBytes=t,this.numBits=r,this.resultPoints=i,this.format=a,this.timestamp=o,this.text=e,this.rawBytes=t,r==null?this.numBits=t==null?0:8*t.length:this.numBits=r,this.resultPoints=i,this.format=a,this.resultMetadata=null,o==null?this.timestamp=_r.currentTimeMillis():this.timestamp=o}return n.prototype.getText=function(){return this.text},n.prototype.getRawBytes=function(){return this.rawBytes},n.prototype.getNumBits=function(){return this.numBits},n.prototype.getResultPoints=function(){return this.resultPoints},n.prototype.getBarcodeFormat=function(){return this.format},n.prototype.getResultMetadata=function(){return this.resultMetadata},n.prototype.putMetadata=function(e,t){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(e,t)},n.prototype.putAllMetadata=function(e){e!==null&&(this.resultMetadata===null?this.resultMetadata=e:this.resultMetadata=new Map(e))},n.prototype.addResultPoints=function(e){var t=this.resultPoints;if(t===null)this.resultPoints=e;else if(e!==null&&e.length>0){var r=new Array(t.length+e.length);_r.arraycopy(t,0,r,0,t.length),_r.arraycopy(e,0,r,t.length,e.length),this.resultPoints=r}},n.prototype.getTimestamp=function(){return this.timestamp},n.prototype.toString=function(){return this.text},n}(),dy;(function(n){n[n.AZTEC=0]="AZTEC",n[n.CODABAR=1]="CODABAR",n[n.CODE_39=2]="CODE_39",n[n.CODE_93=3]="CODE_93",n[n.CODE_128=4]="CODE_128",n[n.DATA_MATRIX=5]="DATA_MATRIX",n[n.EAN_8=6]="EAN_8",n[n.EAN_13=7]="EAN_13",n[n.ITF=8]="ITF",n[n.MAXICODE=9]="MAXICODE",n[n.PDF_417=10]="PDF_417",n[n.QR_CODE=11]="QR_CODE",n[n.RSS_14=12]="RSS_14",n[n.RSS_EXPANDED=13]="RSS_EXPANDED",n[n.UPC_A=14]="UPC_A",n[n.UPC_E=15]="UPC_E",n[n.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(dy||(dy={}));const Mt=dy;var py;(function(n){n[n.OTHER=0]="OTHER",n[n.ORIENTATION=1]="ORIENTATION",n[n.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",n[n.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",n[n.ISSUE_NUMBER=4]="ISSUE_NUMBER",n[n.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",n[n.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",n[n.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",n[n.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",n[n.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",n[n.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(py||(py={}));const fa=py;var S2=function(){function n(e,t,r,i,a,o){a===void 0&&(a=-1),o===void 0&&(o=-1),this.rawBytes=e,this.text=t,this.byteSegments=r,this.ecLevel=i,this.structuredAppendSequenceNumber=a,this.structuredAppendParity=o,this.numBits=e==null?0:8*e.length}return n.prototype.getRawBytes=function(){return this.rawBytes},n.prototype.getNumBits=function(){return this.numBits},n.prototype.setNumBits=function(e){this.numBits=e},n.prototype.getText=function(){return this.text},n.prototype.getByteSegments=function(){return this.byteSegments},n.prototype.getECLevel=function(){return this.ecLevel},n.prototype.getErrorsCorrected=function(){return this.errorsCorrected},n.prototype.setErrorsCorrected=function(e){this.errorsCorrected=e},n.prototype.getErasures=function(){return this.erasures},n.prototype.setErasures=function(e){this.erasures=e},n.prototype.getOther=function(){return this.other},n.prototype.setOther=function(e){this.other=e},n.prototype.hasStructuredAppend=function(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0},n.prototype.getStructuredAppendParity=function(){return this.structuredAppendParity},n.prototype.getStructuredAppendSequenceNumber=function(){return this.structuredAppendSequenceNumber},n}(),P1=function(){function n(){}return n.prototype.exp=function(e){return this.expTable[e]},n.prototype.log=function(e){if(e===0)throw new Bt;return this.logTable[e]},n.addOrSubtract=function(e,t){return e^t},n}(),nf=function(){function n(e,t){if(t.length===0)throw new Bt;this.field=e;var r=t.length;if(r>1&&t[0]===0){for(var i=1;i<r&&t[i]===0;)i++;i===r?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(r-i),_r.arraycopy(t,i,this.coefficients,0,this.coefficients.length))}else this.coefficients=t}return n.prototype.getCoefficients=function(){return this.coefficients},n.prototype.getDegree=function(){return this.coefficients.length-1},n.prototype.isZero=function(){return this.coefficients[0]===0},n.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},n.prototype.evaluateAt=function(e){if(e===0)return this.getCoefficient(0);var t=this.coefficients,r;if(e===1){r=0;for(var i=0,a=t.length;i!==a;i++){var o=t[i];r=P1.addOrSubtract(r,o)}return r}r=t[0];for(var s=t.length,u=this.field,i=1;i<s;i++)r=P1.addOrSubtract(u.multiply(e,r),t[i]);return r},n.prototype.addOrSubtract=function(e){if(!this.field.equals(e.field))throw new Bt("GenericGFPolys do not have same GenericGF field");if(this.isZero())return e;if(e.isZero())return this;var t=this.coefficients,r=e.coefficients;if(t.length>r.length){var i=t;t=r,r=i}var a=new Int32Array(r.length),o=r.length-t.length;_r.arraycopy(r,0,a,0,o);for(var s=o;s<r.length;s++)a[s]=P1.addOrSubtract(t[s-o],r[s]);return new n(this.field,a)},n.prototype.multiply=function(e){if(!this.field.equals(e.field))throw new Bt("GenericGFPolys do not have same GenericGF field");if(this.isZero()||e.isZero())return this.field.getZero();for(var t=this.coefficients,r=t.length,i=e.coefficients,a=i.length,o=new Int32Array(r+a-1),s=this.field,u=0;u<r;u++)for(var f=t[u],h=0;h<a;h++)o[u+h]=P1.addOrSubtract(o[u+h],s.multiply(f,i[h]));return new n(s,o)},n.prototype.multiplyScalar=function(e){if(e===0)return this.field.getZero();if(e===1)return this;for(var t=this.coefficients.length,r=this.field,i=new Int32Array(t),a=this.coefficients,o=0;o<t;o++)i[o]=r.multiply(a[o],e);return new n(r,i)},n.prototype.multiplyByMonomial=function(e,t){if(e<0)throw new Bt;if(t===0)return this.field.getZero();for(var r=this.coefficients,i=r.length,a=new Int32Array(i+e),o=this.field,s=0;s<i;s++)a[s]=o.multiply(r[s],t);return new n(o,a)},n.prototype.divide=function(e){if(!this.field.equals(e.field))throw new Bt("GenericGFPolys do not have same GenericGF field");if(e.isZero())throw new Bt("Divide by 0");for(var t=this.field,r=t.getZero(),i=this,a=e.getCoefficient(e.getDegree()),o=t.inverse(a);i.getDegree()>=e.getDegree()&&!i.isZero();){var s=i.getDegree()-e.getDegree(),u=t.multiply(i.getCoefficient(i.getDegree()),o),f=e.multiplyByMonomial(s,u),h=t.buildMonomial(s,u);r=r.addOrSubtract(h),i=i.addOrSubtract(f)}return[r,i]},n.prototype.toString=function(){for(var e="",t=this.getDegree();t>=0;t--){var r=this.getCoefficient(t);if(r!==0){if(r<0?(e+=" - ",r=-r):e.length>0&&(e+=" + "),t===0||r!==1){var i=this.field.log(r);i===0?e+="1":i===1?e+="a":(e+="a^",e+=i)}t!==0&&(t===1?e+="x":(e+="x^",e+=t))}}return e},n}(),sM=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),lS=function(n){sM(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="ArithmeticException",e}(bo),lM=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),yo=function(n){lM(e,n);function e(t,r,i){var a=n.call(this)||this;a.primitive=t,a.size=r,a.generatorBase=i;for(var o=new Int32Array(r),s=1,u=0;u<r;u++)o[u]=s,s*=2,s>=r&&(s^=t,s&=r-1);a.expTable=o;for(var f=new Int32Array(r),u=0;u<r-1;u++)f[o[u]]=u;return a.logTable=f,a.zero=new nf(a,Int32Array.from([0])),a.one=new nf(a,Int32Array.from([1])),a}return e.prototype.getZero=function(){return this.zero},e.prototype.getOne=function(){return this.one},e.prototype.buildMonomial=function(t,r){if(t<0)throw new Bt;if(r===0)return this.zero;var i=new Int32Array(t+1);return i[0]=r,new nf(this,i)},e.prototype.inverse=function(t){if(t===0)throw new lS;return this.expTable[this.size-this.logTable[t]-1]},e.prototype.multiply=function(t,r){return t===0||r===0?0:this.expTable[(this.logTable[t]+this.logTable[r])%(this.size-1)]},e.prototype.getSize=function(){return this.size},e.prototype.getGeneratorBase=function(){return this.generatorBase},e.prototype.toString=function(){return"GF(0x"+gn.toHexString(this.primitive)+","+this.size+")"},e.prototype.equals=function(t){return t===this},e.AZTEC_DATA_12=new e(4201,4096,1),e.AZTEC_DATA_10=new e(1033,1024,1),e.AZTEC_DATA_6=new e(67,64,1),e.AZTEC_PARAM=new e(19,16,1),e.QR_CODE_FIELD_256=new e(285,256,0),e.DATA_MATRIX_FIELD_256=new e(301,256,1),e.AZTEC_DATA_8=e.DATA_MATRIX_FIELD_256,e.MAXICODE_FIELD_64=e.AZTEC_DATA_6,e}(P1),uM=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Op=function(n){uM(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="ReedSolomonException",e}(bo),cM=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),b0=function(n){cM(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="IllegalStateException",e}(bo),C2=function(){function n(e){this.field=e}return n.prototype.decode=function(e,t){for(var r=this.field,i=new nf(r,e),a=new Int32Array(t),o=!0,s=0;s<t;s++){var u=i.evaluateAt(r.exp(s+r.getGeneratorBase()));a[a.length-1-s]=u,u!==0&&(o=!1)}if(!o)for(var f=new nf(r,a),h=this.runEuclideanAlgorithm(r.buildMonomial(t,1),f,t),p=h[0],g=h[1],m=this.findErrorLocations(p),_=this.findErrorMagnitudes(g,m),s=0;s<m.length;s++){var b=e.length-1-r.log(m[s]);if(b<0)throw new Op("Bad error location");e[b]=yo.addOrSubtract(e[b],_[s])}},n.prototype.runEuclideanAlgorithm=function(e,t,r){if(e.getDegree()<t.getDegree()){var i=e;e=t,t=i}for(var a=this.field,o=e,s=t,u=a.getZero(),f=a.getOne();s.getDegree()>=(r/2|0);){var h=o,p=u;if(o=s,u=f,o.isZero())throw new Op("r_{i-1} was zero");s=h;for(var g=a.getZero(),m=o.getCoefficient(o.getDegree()),_=a.inverse(m);s.getDegree()>=o.getDegree()&&!s.isZero();){var b=s.getDegree()-o.getDegree(),T=a.multiply(s.getCoefficient(s.getDegree()),_);g=g.addOrSubtract(a.buildMonomial(b,T)),s=s.addOrSubtract(o.multiplyByMonomial(b,T))}if(f=g.multiply(u).addOrSubtract(p),s.getDegree()>=o.getDegree())throw new b0("Division algorithm failed to reduce polynomial?")}var S=f.getCoefficient(0);if(S===0)throw new Op("sigmaTilde(0) was zero");var D=a.inverse(S),B=f.multiplyScalar(D),V=s.multiplyScalar(D);return[B,V]},n.prototype.findErrorLocations=function(e){var t=e.getDegree();if(t===1)return Int32Array.from([e.getCoefficient(1)]);for(var r=new Int32Array(t),i=0,a=this.field,o=1;o<a.getSize()&&i<t;o++)e.evaluateAt(o)===0&&(r[i]=a.inverse(o),i++);if(i!==t)throw new Op("Error locator degree does not match number of roots");return r},n.prototype.findErrorMagnitudes=function(e,t){for(var r=t.length,i=new Int32Array(r),a=this.field,o=0;o<r;o++){for(var s=a.inverse(t[o]),u=1,f=0;f<r;f++)if(o!==f){var h=a.multiply(t[f],s),p=(h&1)===0?h|1:h&-2;u=a.multiply(u,p)}i[o]=a.multiply(e.evaluateAt(s),a.inverse(u)),a.getGeneratorBase()!==0&&(i[o]=a.multiply(i[o],s))}return i},n}(),oa;(function(n){n[n.UPPER=0]="UPPER",n[n.LOWER=1]="LOWER",n[n.MIXED=2]="MIXED",n[n.DIGIT=3]="DIGIT",n[n.PUNCT=4]="PUNCT",n[n.BINARY=5]="BINARY"})(oa||(oa={}));var xb=function(){function n(){}return n.prototype.decode=function(e){this.ddata=e;var t=e.getBits(),r=this.extractBits(t),i=this.correctBits(r),a=n.convertBoolArrayToByteArray(i),o=n.getEncodedData(i),s=new S2(a,o,null,null);return s.setNumBits(i.length),s},n.highLevelDecode=function(e){return this.getEncodedData(e)},n.getEncodedData=function(e){for(var t=e.length,r=oa.UPPER,i=oa.UPPER,a="",o=0;o<t;)if(i===oa.BINARY){if(t-o<5)break;var s=n.readCode(e,o,5);if(o+=5,s===0){if(t-o<11)break;s=n.readCode(e,o,11)+31,o+=11}for(var u=0;u<s;u++){if(t-o<8){o=t;break}var f=n.readCode(e,o,8);a+=On.castAsNonUtf8Char(f),o+=8}i=r}else{var h=i===oa.DIGIT?4:5;if(t-o<h)break;var f=n.readCode(e,o,h);o+=h;var p=n.getCharacter(i,f);p.startsWith("CTRL_")?(r=i,i=n.getTable(p.charAt(5)),p.charAt(6)==="L"&&(r=i)):(a+=p,i=r)}return a},n.getTable=function(e){switch(e){case"L":return oa.LOWER;case"P":return oa.PUNCT;case"M":return oa.MIXED;case"D":return oa.DIGIT;case"B":return oa.BINARY;case"U":default:return oa.UPPER}},n.getCharacter=function(e,t){switch(e){case oa.UPPER:return n.UPPER_TABLE[t];case oa.LOWER:return n.LOWER_TABLE[t];case oa.MIXED:return n.MIXED_TABLE[t];case oa.PUNCT:return n.PUNCT_TABLE[t];case oa.DIGIT:return n.DIGIT_TABLE[t];default:throw new b0("Bad table")}},n.prototype.correctBits=function(e){var t,r;this.ddata.getNbLayers()<=2?(r=6,t=yo.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(r=8,t=yo.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(r=10,t=yo.AZTEC_DATA_10):(r=12,t=yo.AZTEC_DATA_12);var i=this.ddata.getNbDatablocks(),a=e.length/r;if(a<i)throw new pt;for(var o=e.length%r,s=new Int32Array(a),u=0;u<a;u++,o+=r)s[u]=n.readCode(e,o,r);try{var f=new C2(t);f.decode(s,a-i)}catch(T){throw new pt(T)}for(var h=(1<<r)-1,p=0,u=0;u<i;u++){var g=s[u];if(g===0||g===h)throw new pt;(g===1||g===h-1)&&p++}for(var m=new Array(i*r-p),_=0,u=0;u<i;u++){var g=s[u];if(g===1||g===h-1)m.fill(g>1,_,_+r-1),_+=r-1;else for(var b=r-1;b>=0;--b)m[_++]=(g&1<<b)!==0}return m},n.prototype.extractBits=function(e){var t=this.ddata.isCompact(),r=this.ddata.getNbLayers(),i=(t?11:14)+r*4,a=new Int32Array(i),o=new Array(this.totalBitsInLayer(r,t));if(t)for(var s=0;s<a.length;s++)a[s]=s;else for(var u=i+1+2*gn.truncDivision(gn.truncDivision(i,2)-1,15),f=i/2,h=gn.truncDivision(u,2),s=0;s<f;s++){var p=s+gn.truncDivision(s,15);a[f-s-1]=h-p-1,a[f+s]=h+p+1}for(var s=0,g=0;s<r;s++){for(var m=(r-s)*4+(t?9:12),_=s*2,b=i-1-_,T=0;T<m;T++)for(var S=T*2,D=0;D<2;D++)o[g+S+D]=e.get(a[_+D],a[_+T]),o[g+2*m+S+D]=e.get(a[_+T],a[b-D]),o[g+4*m+S+D]=e.get(a[b-D],a[b-T]),o[g+6*m+S+D]=e.get(a[b-T],a[_+D]);g+=m*8}return o},n.readCode=function(e,t,r){for(var i=0,a=t;a<t+r;a++)i<<=1,e[a]&&(i|=1);return i},n.readByte=function(e,t){var r=e.length-t;return r>=8?n.readCode(e,t,8):n.readCode(e,t,r)<<8-r},n.convertBoolArrayToByteArray=function(e){for(var t=new Uint8Array((e.length+7)/8),r=0;r<t.length;r++)t[r]=n.readByte(e,8*r);return t},n.prototype.totalBitsInLayer=function(e,t){return((t?88:112)+16*e)*e},n.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],n.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],n.MIXED_TABLE=["CTRL_PS"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~","","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],n.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],n.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"],n}(),qn=function(){function n(){}return n.round=function(e){return isNaN(e)?0:e<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:e>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:e+(e<0?-.5:.5)|0},n.distance=function(e,t,r,i){var a=e-r,o=t-i;return Math.sqrt(a*a+o*o)},n.sum=function(e){for(var t=0,r=0,i=e.length;r!==i;r++){var a=e[r];t+=a}return t},n}(),gy=function(){function n(){}return n.floatToIntBits=function(e){return e},n.MAX_VALUE=Number.MAX_SAFE_INTEGER,n}(),It=function(){function n(e,t){this.x=e,this.y=t}return n.prototype.getX=function(){return this.x},n.prototype.getY=function(){return this.y},n.prototype.equals=function(e){if(e instanceof n){var t=e;return this.x===t.x&&this.y===t.y}return!1},n.prototype.hashCode=function(){return 31*gy.floatToIntBits(this.x)+gy.floatToIntBits(this.y)},n.prototype.toString=function(){return"("+this.x+","+this.y+")"},n.orderBestPatterns=function(e){var t=this.distance(e[0],e[1]),r=this.distance(e[1],e[2]),i=this.distance(e[0],e[2]),a,o,s;if(r>=t&&r>=i?(o=e[0],a=e[1],s=e[2]):i>=r&&i>=t?(o=e[1],a=e[0],s=e[2]):(o=e[2],a=e[0],s=e[1]),this.crossProductZ(a,o,s)<0){var u=a;a=s,s=u}e[0]=a,e[1]=o,e[2]=s},n.distance=function(e,t){return qn.distance(e.x,e.y,t.x,t.y)},n.crossProductZ=function(e,t,r){var i=t.x,a=t.y;return(r.x-i)*(e.y-a)-(r.y-a)*(e.x-i)},n}(),rx=function(){function n(e,t){this.bits=e,this.points=t}return n.prototype.getBits=function(){return this.bits},n.prototype.getPoints=function(){return this.points},n}(),fM=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),hM=function(n){fM(e,n);function e(t,r,i,a,o){var s=n.call(this,t,r)||this;return s.compact=i,s.nbDatablocks=a,s.nbLayers=o,s}return e.prototype.getNbLayers=function(){return this.nbLayers},e.prototype.getNbDatablocks=function(){return this.nbDatablocks},e.prototype.isCompact=function(){return this.compact},e}(rx),my=function(){function n(e,t,r,i){this.image=e,this.height=e.getHeight(),this.width=e.getWidth(),t==null&&(t=n.INIT_SIZE),r==null&&(r=e.getWidth()/2|0),i==null&&(i=e.getHeight()/2|0);var a=t/2|0;if(this.leftInit=r-a,this.rightInit=r+a,this.upInit=i-a,this.downInit=i+a,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new ze}return n.prototype.detect=function(){for(var e=this.leftInit,t=this.rightInit,r=this.upInit,i=this.downInit,a=!1,o=!0,s=!1,u=!1,f=!1,h=!1,p=!1,g=this.width,m=this.height;o;){o=!1;for(var _=!0;(_||!u)&&t<g;)_=this.containsBlackPoint(r,i,t,!1),_?(t++,o=!0,u=!0):u||t++;if(t>=g){a=!0;break}for(var b=!0;(b||!f)&&i<m;)b=this.containsBlackPoint(e,t,i,!0),b?(i++,o=!0,f=!0):f||i++;if(i>=m){a=!0;break}for(var T=!0;(T||!h)&&e>=0;)T=this.containsBlackPoint(r,i,e,!1),T?(e--,o=!0,h=!0):h||e--;if(e<0){a=!0;break}for(var S=!0;(S||!p)&&r>=0;)S=this.containsBlackPoint(e,t,r,!0),S?(r--,o=!0,p=!0):p||r--;if(r<0){a=!0;break}o&&(s=!0)}if(!a&&s){for(var D=t-e,B=null,V=1;B===null&&V<D;V++)B=this.getBlackPointOnSegment(e,i-V,e+V,i);if(B==null)throw new ze;for(var Y=null,V=1;Y===null&&V<D;V++)Y=this.getBlackPointOnSegment(e,r+V,e+V,r);if(Y==null)throw new ze;for(var q=null,V=1;q===null&&V<D;V++)q=this.getBlackPointOnSegment(t,r+V,t-V,r);if(q==null)throw new ze;for(var P=null,V=1;P===null&&V<D;V++)P=this.getBlackPointOnSegment(t,i-V,t-V,i);if(P==null)throw new ze;return this.centerEdges(P,B,q,Y)}else throw new ze},n.prototype.getBlackPointOnSegment=function(e,t,r,i){for(var a=qn.round(qn.distance(e,t,r,i)),o=(r-e)/a,s=(i-t)/a,u=this.image,f=0;f<a;f++){var h=qn.round(e+f*o),p=qn.round(t+f*s);if(u.get(h,p))return new It(h,p)}return null},n.prototype.centerEdges=function(e,t,r,i){var a=e.getX(),o=e.getY(),s=t.getX(),u=t.getY(),f=r.getX(),h=r.getY(),p=i.getX(),g=i.getY(),m=n.CORR;return a<this.width/2?[new It(p-m,g+m),new It(s+m,u+m),new It(f-m,h-m),new It(a+m,o-m)]:[new It(p+m,g+m),new It(s+m,u-m),new It(f-m,h+m),new It(a-m,o-m)]},n.prototype.containsBlackPoint=function(e,t,r,i){var a=this.image;if(i){for(var o=e;o<=t;o++)if(a.get(o,r))return!0}else for(var s=e;s<=t;s++)if(a.get(r,s))return!0;return!1},n.INIT_SIZE=10,n.CORR=1,n}(),_b=function(){function n(){}return n.checkAndNudgePoints=function(e,t){for(var r=e.getWidth(),i=e.getHeight(),a=!0,o=0;o<t.length&&a;o+=2){var s=Math.floor(t[o]),u=Math.floor(t[o+1]);if(s<-1||s>r||u<-1||u>i)throw new ze;a=!1,s===-1?(t[o]=0,a=!0):s===r&&(t[o]=r-1,a=!0),u===-1?(t[o+1]=0,a=!0):u===i&&(t[o+1]=i-1,a=!0)}a=!0;for(var o=t.length-2;o>=0&&a;o-=2){var s=Math.floor(t[o]),u=Math.floor(t[o+1]);if(s<-1||s>r||u<-1||u>i)throw new ze;a=!1,s===-1?(t[o]=0,a=!0):s===r&&(t[o]=r-1,a=!0),u===-1?(t[o+1]=0,a=!0):u===i&&(t[o+1]=i-1,a=!0)}},n}(),uS=function(){function n(e,t,r,i,a,o,s,u,f){this.a11=e,this.a21=t,this.a31=r,this.a12=i,this.a22=a,this.a32=o,this.a13=s,this.a23=u,this.a33=f}return n.quadrilateralToQuadrilateral=function(e,t,r,i,a,o,s,u,f,h,p,g,m,_,b,T){var S=n.quadrilateralToSquare(e,t,r,i,a,o,s,u),D=n.squareToQuadrilateral(f,h,p,g,m,_,b,T);return D.times(S)},n.prototype.transformPoints=function(e){for(var t=e.length,r=this.a11,i=this.a12,a=this.a13,o=this.a21,s=this.a22,u=this.a23,f=this.a31,h=this.a32,p=this.a33,g=0;g<t;g+=2){var m=e[g],_=e[g+1],b=a*m+u*_+p;e[g]=(r*m+o*_+f)/b,e[g+1]=(i*m+s*_+h)/b}},n.prototype.transformPointsWithValues=function(e,t){for(var r=this.a11,i=this.a12,a=this.a13,o=this.a21,s=this.a22,u=this.a23,f=this.a31,h=this.a32,p=this.a33,g=e.length,m=0;m<g;m++){var _=e[m],b=t[m],T=a*_+u*b+p;e[m]=(r*_+o*b+f)/T,t[m]=(i*_+s*b+h)/T}},n.squareToQuadrilateral=function(e,t,r,i,a,o,s,u){var f=e-r+a-s,h=t-i+o-u;if(f===0&&h===0)return new n(r-e,a-r,e,i-t,o-i,t,0,0,1);var p=r-a,g=s-a,m=i-o,_=u-o,b=p*_-g*m,T=(f*_-g*h)/b,S=(p*h-f*m)/b;return new n(r-e+T*r,s-e+S*s,e,i-t+T*i,u-t+S*u,t,T,S,1)},n.quadrilateralToSquare=function(e,t,r,i,a,o,s,u){return n.squareToQuadrilateral(e,t,r,i,a,o,s,u).buildAdjoint()},n.prototype.buildAdjoint=function(){return new n(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)},n.prototype.times=function(e){return new n(this.a11*e.a11+this.a21*e.a12+this.a31*e.a13,this.a11*e.a21+this.a21*e.a22+this.a31*e.a23,this.a11*e.a31+this.a21*e.a32+this.a31*e.a33,this.a12*e.a11+this.a22*e.a12+this.a32*e.a13,this.a12*e.a21+this.a22*e.a22+this.a32*e.a23,this.a12*e.a31+this.a22*e.a32+this.a32*e.a33,this.a13*e.a11+this.a23*e.a12+this.a33*e.a13,this.a13*e.a21+this.a23*e.a22+this.a33*e.a23,this.a13*e.a31+this.a23*e.a32+this.a33*e.a33)},n}(),dM=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),pM=function(n){dM(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.sampleGrid=function(t,r,i,a,o,s,u,f,h,p,g,m,_,b,T,S,D,B,V){var Y=uS.quadrilateralToQuadrilateral(a,o,s,u,f,h,p,g,m,_,b,T,S,D,B,V);return this.sampleGridWithTransform(t,r,i,Y)},e.prototype.sampleGridWithTransform=function(t,r,i,a){if(r<=0||i<=0)throw new ze;for(var o=new ru(r,i),s=new Float32Array(2*r),u=0;u<i;u++){for(var f=s.length,h=u+.5,p=0;p<f;p+=2)s[p]=p/2+.5,s[p+1]=h;a.transformPoints(s),_b.checkAndNudgePoints(t,s);try{for(var p=0;p<f;p+=2)t.get(Math.floor(s[p]),Math.floor(s[p+1]))&&o.set(p/2,u)}catch{throw new ze}}return o},e}(_b),ix=function(){function n(){}return n.setGridSampler=function(e){n.gridSampler=e},n.getInstance=function(){return n.gridSampler},n.gridSampler=new pM,n}(),po=function(){function n(e,t){this.x=e,this.y=t}return n.prototype.toResultPoint=function(){return new It(this.getX(),this.getY())},n.prototype.getX=function(){return this.x},n.prototype.getY=function(){return this.y},n}(),gM=function(){function n(e){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=e}return n.prototype.detect=function(){return this.detectMirror(!1)},n.prototype.detectMirror=function(e){var t=this.getMatrixCenter(),r=this.getBullsEyeCorners(t);if(e){var i=r[0];r[0]=r[2],r[2]=i}this.extractParameters(r);var a=this.sampleGrid(this.image,r[this.shift%4],r[(this.shift+1)%4],r[(this.shift+2)%4],r[(this.shift+3)%4]),o=this.getMatrixCornerPoints(r);return new hM(a,o,this.compact,this.nbDataBlocks,this.nbLayers)},n.prototype.extractParameters=function(e){if(!this.isValidPoint(e[0])||!this.isValidPoint(e[1])||!this.isValidPoint(e[2])||!this.isValidPoint(e[3]))throw new ze;var t=2*this.nbCenterLayers,r=new Int32Array([this.sampleLine(e[0],e[1],t),this.sampleLine(e[1],e[2],t),this.sampleLine(e[2],e[3],t),this.sampleLine(e[3],e[0],t)]);this.shift=this.getRotation(r,t);for(var i=0,a=0;a<4;a++){var o=r[(this.shift+a)%4];this.compact?(i<<=7,i+=o>>1&127):(i<<=10,i+=(o>>2&992)+(o>>1&31))}var s=this.getCorrectedParameterData(i,this.compact);this.compact?(this.nbLayers=(s>>6)+1,this.nbDataBlocks=(s&63)+1):(this.nbLayers=(s>>11)+1,this.nbDataBlocks=(s&2047)+1)},n.prototype.getRotation=function(e,t){var r=0;e.forEach(function(a,o,s){var u=(a>>t-2<<1)+(a&1);r=(r<<3)+u}),r=((r&1)<<11)+(r>>1);for(var i=0;i<4;i++)if(gn.bitCount(r^this.EXPECTED_CORNER_BITS[i])<=2)return i;throw new ze},n.prototype.getCorrectedParameterData=function(e,t){var r,i;t?(r=7,i=2):(r=10,i=4);for(var a=r-i,o=new Int32Array(r),s=r-1;s>=0;--s)o[s]=e&15,e>>=4;try{var u=new C2(yo.AZTEC_PARAM);u.decode(o,a)}catch{throw new ze}for(var f=0,s=0;s<i;s++)f=(f<<4)+o[s];return f},n.prototype.getBullsEyeCorners=function(e){var t=e,r=e,i=e,a=e,o=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){var s=this.getFirstDifferent(t,o,1,-1),u=this.getFirstDifferent(r,o,1,1),f=this.getFirstDifferent(i,o,-1,1),h=this.getFirstDifferent(a,o,-1,-1);if(this.nbCenterLayers>2){var p=this.distancePoint(h,s)*this.nbCenterLayers/(this.distancePoint(a,t)*(this.nbCenterLayers+2));if(p<.75||p>1.25||!this.isWhiteOrBlackRectangle(s,u,f,h))break}t=s,r=u,i=f,a=h,o=!o}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new ze;this.compact=this.nbCenterLayers===5;var g=new It(t.getX()+.5,t.getY()-.5),m=new It(r.getX()+.5,r.getY()+.5),_=new It(i.getX()-.5,i.getY()+.5),b=new It(a.getX()-.5,a.getY()-.5);return this.expandSquare([g,m,_,b],2*this.nbCenterLayers-3,2*this.nbCenterLayers)},n.prototype.getMatrixCenter=function(){var e,t,r,i;try{var a=new my(this.image).detect();e=a[0],t=a[1],r=a[2],i=a[3]}catch{var o=this.image.getWidth()/2,s=this.image.getHeight()/2;e=this.getFirstDifferent(new po(o+7,s-7),!1,1,-1).toResultPoint(),t=this.getFirstDifferent(new po(o+7,s+7),!1,1,1).toResultPoint(),r=this.getFirstDifferent(new po(o-7,s+7),!1,-1,1).toResultPoint(),i=this.getFirstDifferent(new po(o-7,s-7),!1,-1,-1).toResultPoint()}var u=qn.round((e.getX()+i.getX()+t.getX()+r.getX())/4),f=qn.round((e.getY()+i.getY()+t.getY()+r.getY())/4);try{var a=new my(this.image,15,u,f).detect();e=a[0],t=a[1],r=a[2],i=a[3]}catch{e=this.getFirstDifferent(new po(u+7,f-7),!1,1,-1).toResultPoint(),t=this.getFirstDifferent(new po(u+7,f+7),!1,1,1).toResultPoint(),r=this.getFirstDifferent(new po(u-7,f+7),!1,-1,1).toResultPoint(),i=this.getFirstDifferent(new po(u-7,f-7),!1,-1,-1).toResultPoint()}return u=qn.round((e.getX()+i.getX()+t.getX()+r.getX())/4),f=qn.round((e.getY()+i.getY()+t.getY()+r.getY())/4),new po(u,f)},n.prototype.getMatrixCornerPoints=function(e){return this.expandSquare(e,2*this.nbCenterLayers,this.getDimension())},n.prototype.sampleGrid=function(e,t,r,i,a){var o=ix.getInstance(),s=this.getDimension(),u=s/2-this.nbCenterLayers,f=s/2+this.nbCenterLayers;return o.sampleGrid(e,s,s,u,u,f,u,f,f,u,f,t.getX(),t.getY(),r.getX(),r.getY(),i.getX(),i.getY(),a.getX(),a.getY())},n.prototype.sampleLine=function(e,t,r){for(var i=0,a=this.distanceResultPoint(e,t),o=a/r,s=e.getX(),u=e.getY(),f=o*(t.getX()-e.getX())/a,h=o*(t.getY()-e.getY())/a,p=0;p<r;p++)this.image.get(qn.round(s+p*f),qn.round(u+p*h))&&(i|=1<<r-p-1);return i},n.prototype.isWhiteOrBlackRectangle=function(e,t,r,i){var a=3;e=new po(e.getX()-a,e.getY()+a),t=new po(t.getX()-a,t.getY()-a),r=new po(r.getX()+a,r.getY()-a),i=new po(i.getX()+a,i.getY()+a);var o=this.getColor(i,e);if(o===0)return!1;var s=this.getColor(e,t);return s!==o||(s=this.getColor(t,r),s!==o)?!1:(s=this.getColor(r,i),s===o)},n.prototype.getColor=function(e,t){for(var r=this.distancePoint(e,t),i=(t.getX()-e.getX())/r,a=(t.getY()-e.getY())/r,o=0,s=e.getX(),u=e.getY(),f=this.image.get(e.getX(),e.getY()),h=Math.ceil(r),p=0;p<h;p++)s+=i,u+=a,this.image.get(qn.round(s),qn.round(u))!==f&&o++;var g=o/r;return g>.1&&g<.9?0:g<=.1===f?1:-1},n.prototype.getFirstDifferent=function(e,t,r,i){for(var a=e.getX()+r,o=e.getY()+i;this.isValid(a,o)&&this.image.get(a,o)===t;)a+=r,o+=i;for(a-=r,o-=i;this.isValid(a,o)&&this.image.get(a,o)===t;)a+=r;for(a-=r;this.isValid(a,o)&&this.image.get(a,o)===t;)o+=i;return o-=i,new po(a,o)},n.prototype.expandSquare=function(e,t,r){var i=r/(2*t),a=e[0].getX()-e[2].getX(),o=e[0].getY()-e[2].getY(),s=(e[0].getX()+e[2].getX())/2,u=(e[0].getY()+e[2].getY())/2,f=new It(s+i*a,u+i*o),h=new It(s-i*a,u-i*o);a=e[1].getX()-e[3].getX(),o=e[1].getY()-e[3].getY(),s=(e[1].getX()+e[3].getX())/2,u=(e[1].getY()+e[3].getY())/2;var p=new It(s+i*a,u+i*o),g=new It(s-i*a,u-i*o),m=[f,p,h,g];return m},n.prototype.isValid=function(e,t){return e>=0&&e<this.image.getWidth()&&t>0&&t<this.image.getHeight()},n.prototype.isValidPoint=function(e){var t=qn.round(e.getX()),r=qn.round(e.getY());return this.isValid(t,r)},n.prototype.distancePoint=function(e,t){return qn.distance(e.getX(),e.getY(),t.getX(),t.getY())},n.prototype.distanceResultPoint=function(e,t){return qn.distance(e.getX(),e.getY(),t.getX(),t.getY())},n.prototype.getDimension=function(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(gn.truncDivision(this.nbLayers-4,8)+1)+15},n}(),vy=function(){function n(){}return n.prototype.decode=function(e,t){t===void 0&&(t=null);var r=null,i=new gM(e.getBlackMatrix()),a=null,o=null;try{var s=i.detectMirror(!1);a=s.getPoints(),this.reportFoundResultPoints(t,a),o=new xb().decode(s)}catch(p){r=p}if(o==null)try{var s=i.detectMirror(!0);a=s.getPoints(),this.reportFoundResultPoints(t,a),o=new xb().decode(s)}catch(p){throw r??p}var u=new Fa(o.getText(),o.getRawBytes(),o.getNumBits(),a,Mt.AZTEC,_r.currentTimeMillis()),f=o.getByteSegments();f!=null&&u.putMetadata(fa.BYTE_SEGMENTS,f);var h=o.getECLevel();return h!=null&&u.putMetadata(fa.ERROR_CORRECTION_LEVEL,h),u},n.prototype.reportFoundResultPoints=function(e,t){if(e!=null){var r=e.get(Pr.NEED_RESULT_POINT_CALLBACK);r!=null&&t.forEach(function(i,a,o){r.foundPossibleResultPoint(i)})}},n.prototype.reset=function(){},n}(),mM=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();(function(n){mM(e,n);function e(t){return t===void 0&&(t=500),n.call(this,new vy,t)||this}return e})(Od);var ki=function(){function n(){}return n.prototype.decode=function(e,t){try{return this.doDecode(e,t)}catch{var r=t&&t.get(Pr.TRY_HARDER)===!0;if(r&&e.isRotateSupported()){var i=e.rotateCounterClockwise(),a=this.doDecode(i,t),o=a.getResultMetadata(),s=270;o!==null&&o.get(fa.ORIENTATION)===!0&&(s=s+o.get(fa.ORIENTATION)%360),a.putMetadata(fa.ORIENTATION,s);var u=a.getResultPoints();if(u!==null)for(var f=i.getHeight(),h=0;h<u.length;h++)u[h]=new It(f-u[h].getY()-1,u[h].getX());return a}else throw new ze}},n.prototype.reset=function(){},n.prototype.doDecode=function(e,t){var r=e.getWidth(),i=e.getHeight(),a=new Qi(r),o=t&&t.get(Pr.TRY_HARDER)===!0,s=Math.max(1,i>>(o?8:5)),u;o?u=i:u=15;for(var f=Math.trunc(i/2),h=0;h<u;h++){var p=Math.trunc((h+1)/2),g=(h&1)===0,m=f+s*(g?p:-p);if(m<0||m>=i)break;try{a=e.getBlackRow(m,a)}catch{continue}for(var _=function(D){if(D===1&&(a.reverse(),t&&t.get(Pr.NEED_RESULT_POINT_CALLBACK)===!0)){var B=new Map;t.forEach(function(q,P){return B.set(P,q)}),B.delete(Pr.NEED_RESULT_POINT_CALLBACK),t=B}try{var V=b.decodeRow(m,a,t);if(D===1){V.putMetadata(fa.ORIENTATION,180);var Y=V.getResultPoints();Y!==null&&(Y[0]=new It(r-Y[0].getX()-1,Y[0].getY()),Y[1]=new It(r-Y[1].getX()-1,Y[1].getY()))}return{value:V}}catch{}},b=this,T=0;T<2;T++){var S=_(T);if(typeof S=="object")return S.value}}throw new ze},n.recordPattern=function(e,t,r){for(var i=r.length,a=0;a<i;a++)r[a]=0;var o=e.getSize();if(t>=o)throw new ze;for(var s=!e.get(t),u=0,f=t;f<o;){if(e.get(f)!==s)r[u]++;else{if(++u===i)break;r[u]=1,s=!s}f++}if(!(u===i||u===i-1&&f===o))throw new ze},n.recordPatternInReverse=function(e,t,r){for(var i=r.length,a=e.get(t);t>0&&i>=0;)e.get(--t)!==a&&(i--,a=!a);if(i>=0)throw new ze;n.recordPattern(e,t+1,r)},n.patternMatchVariance=function(e,t,r){for(var i=e.length,a=0,o=0,s=0;s<i;s++)a+=e[s],o+=t[s];if(a<o)return Number.POSITIVE_INFINITY;var u=a/o;r*=u;for(var f=0,h=0;h<i;h++){var p=e[h],g=t[h]*u,m=p>g?p-g:g-p;if(m>r)return Number.POSITIVE_INFINITY;f+=m}return f/a},n}(),vM=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),wb=function(n){vM(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.findStartPattern=function(t){for(var r=t.getSize(),i=t.getNextSet(0),a=0,o=Int32Array.from([0,0,0,0,0,0]),s=i,u=!1,f=6,h=i;h<r;h++)if(t.get(h)!==u)o[a]++;else{if(a===f-1){for(var p=e.MAX_AVG_VARIANCE,g=-1,m=e.CODE_START_A;m<=e.CODE_START_C;m++){var _=ki.patternMatchVariance(o,e.CODE_PATTERNS[m],e.MAX_INDIVIDUAL_VARIANCE);_<p&&(p=_,g=m)}if(g>=0&&t.isRange(Math.max(0,s-(h-s)/2),s,!1))return Int32Array.from([s,h,g]);s+=o[0]+o[1],o=o.slice(2,o.length),o[a-1]=0,o[a]=0,a--}else a++;o[a]=1,u=!u}throw new ze},e.decodeCode=function(t,r,i){ki.recordPattern(t,i,r);for(var a=e.MAX_AVG_VARIANCE,o=-1,s=0;s<e.CODE_PATTERNS.length;s++){var u=e.CODE_PATTERNS[s],f=this.patternMatchVariance(r,u,e.MAX_INDIVIDUAL_VARIANCE);f<a&&(a=f,o=s)}if(o>=0)return o;throw new ze},e.prototype.decodeRow=function(t,r,i){var a=i&&i.get(Pr.ASSUME_GS1)===!0,o=e.findStartPattern(r),s=o[2],u=0,f=new Uint8Array(20);f[u++]=s;var h;switch(s){case e.CODE_START_A:h=e.CODE_CODE_A;break;case e.CODE_START_B:h=e.CODE_CODE_B;break;case e.CODE_START_C:h=e.CODE_CODE_C;break;default:throw new pt}for(var p=!1,g=!1,m="",_=o[0],b=o[1],T=Int32Array.from([0,0,0,0,0,0]),S=0,D=0,B=s,V=0,Y=!0,q=!1,P=!1;!p;){var E=g;switch(g=!1,S=D,D=e.decodeCode(r,T,b),f[u++]=D,D!==e.CODE_STOP&&(Y=!0),D!==e.CODE_STOP&&(V++,B+=V*D),_=b,b+=T.reduce(function(z,te){return z+te},0),D){case e.CODE_START_A:case e.CODE_START_B:case e.CODE_START_C:throw new pt}switch(h){case e.CODE_CODE_A:if(D<64)P===q?m+=String.fromCharCode(32+D):m+=String.fromCharCode(32+D+128),P=!1;else if(D<96)P===q?m+=String.fromCharCode(D-64):m+=String.fromCharCode(D+64),P=!1;else switch(D!==e.CODE_STOP&&(Y=!1),D){case e.CODE_FNC_1:a&&(m.length===0?m+="]C1":m+="");break;case e.CODE_FNC_2:case e.CODE_FNC_3:break;case e.CODE_FNC_4_A:!q&&P?(q=!0,P=!1):q&&P?(q=!1,P=!1):P=!0;break;case e.CODE_SHIFT:g=!0,h=e.CODE_CODE_B;break;case e.CODE_CODE_B:h=e.CODE_CODE_B;break;case e.CODE_CODE_C:h=e.CODE_CODE_C;break;case e.CODE_STOP:p=!0;break}break;case e.CODE_CODE_B:if(D<96)P===q?m+=String.fromCharCode(32+D):m+=String.fromCharCode(32+D+128),P=!1;else switch(D!==e.CODE_STOP&&(Y=!1),D){case e.CODE_FNC_1:a&&(m.length===0?m+="]C1":m+="");break;case e.CODE_FNC_2:case e.CODE_FNC_3:break;case e.CODE_FNC_4_B:!q&&P?(q=!0,P=!1):q&&P?(q=!1,P=!1):P=!0;break;case e.CODE_SHIFT:g=!0,h=e.CODE_CODE_A;break;case e.CODE_CODE_A:h=e.CODE_CODE_A;break;case e.CODE_CODE_C:h=e.CODE_CODE_C;break;case e.CODE_STOP:p=!0;break}break;case e.CODE_CODE_C:if(D<100)D<10&&(m+="0"),m+=D;else switch(D!==e.CODE_STOP&&(Y=!1),D){case e.CODE_FNC_1:a&&(m.length===0?m+="]C1":m+="");break;case e.CODE_CODE_A:h=e.CODE_CODE_A;break;case e.CODE_CODE_B:h=e.CODE_CODE_B;break;case e.CODE_STOP:p=!0;break}break}E&&(h=h===e.CODE_CODE_A?e.CODE_CODE_B:e.CODE_CODE_A)}var C=b-_;if(b=r.getNextUnset(b),!r.isRange(b,Math.min(r.getSize(),b+(b-_)/2),!1))throw new ze;if(B-=V*S,B%103!==S)throw new Ki;var M=m.length;if(M===0)throw new ze;M>0&&Y&&(h===e.CODE_CODE_C?m=m.substring(0,M-2):m=m.substring(0,M-1));for(var R=(o[1]+o[0])/2,L=_+C/2,j=f.length,$=new Uint8Array(j),ne=0;ne<j;ne++)$[ne]=f[ne];var U=[new It(R,t),new It(L,t)];return new Fa(m,$,0,U,Mt.CODE_128,new Date().getTime())},e.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],e.MAX_AVG_VARIANCE=.25,e.MAX_INDIVIDUAL_VARIANCE=.7,e.CODE_SHIFT=98,e.CODE_CODE_C=99,e.CODE_CODE_B=100,e.CODE_CODE_A=101,e.CODE_FNC_1=102,e.CODE_FNC_2=97,e.CODE_FNC_3=96,e.CODE_FNC_4_A=101,e.CODE_FNC_4_B=100,e.CODE_START_A=103,e.CODE_START_B=104,e.CODE_START_C=105,e.CODE_STOP=106,e}(ki),yM=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),cv=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},bb=function(n){yM(e,n);function e(t,r){t===void 0&&(t=!1),r===void 0&&(r=!1);var i=n.call(this)||this;return i.usingCheckDigit=t,i.extendedMode=r,i.decodeRowResult="",i.counters=new Int32Array(9),i}return e.prototype.decodeRow=function(t,r,i){var a,o,s,u,f=this.counters;f.fill(0),this.decodeRowResult="";var h=e.findAsteriskPattern(r,f),p=r.getNextSet(h[1]),g=r.getSize(),m,_;do{e.recordPattern(r,p,f);var b=e.toNarrowWidePattern(f);if(b<0)throw new ze;m=e.patternToChar(b),this.decodeRowResult+=m,_=p;try{for(var T=(a=void 0,cv(f)),S=T.next();!S.done;S=T.next()){var D=S.value;p+=D}}catch(j){a={error:j}}finally{try{S&&!S.done&&(o=T.return)&&o.call(T)}finally{if(a)throw a.error}}p=r.getNextSet(p)}while(m!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var B=0;try{for(var V=cv(f),Y=V.next();!Y.done;Y=V.next()){var D=Y.value;B+=D}}catch(j){s={error:j}}finally{try{Y&&!Y.done&&(u=V.return)&&u.call(V)}finally{if(s)throw s.error}}var q=p-_-B;if(p!==g&&q*2<B)throw new ze;if(this.usingCheckDigit){for(var P=this.decodeRowResult.length-1,E=0,C=0;C<P;C++)E+=e.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(C));if(this.decodeRowResult.charAt(P)!==e.ALPHABET_STRING.charAt(E%43))throw new Ki;this.decodeRowResult=this.decodeRowResult.substring(0,P)}if(this.decodeRowResult.length===0)throw new ze;var M;this.extendedMode?M=e.decodeExtended(this.decodeRowResult):M=this.decodeRowResult;var R=(h[1]+h[0])/2,L=_+B/2;return new Fa(M,null,0,[new It(R,t),new It(L,t)],Mt.CODE_39,new Date().getTime())},e.findAsteriskPattern=function(t,r){for(var i=t.getSize(),a=t.getNextSet(0),o=0,s=a,u=!1,f=r.length,h=a;h<i;h++)if(t.get(h)!==u)r[o]++;else{if(o===f-1){if(this.toNarrowWidePattern(r)===e.ASTERISK_ENCODING&&t.isRange(Math.max(0,s-Math.floor((h-s)/2)),s,!1))return[s,h];s+=r[0]+r[1],r.copyWithin(0,2,2+o-1),r[o-1]=0,r[o]=0,o--}else o++;r[o]=1,u=!u}throw new ze},e.toNarrowWidePattern=function(t){var r,i,a=t.length,o=0,s;do{var u=2147483647;try{for(var f=(r=void 0,cv(t)),h=f.next();!h.done;h=f.next()){var p=h.value;p<u&&p>o&&(u=p)}}catch(b){r={error:b}}finally{try{h&&!h.done&&(i=f.return)&&i.call(f)}finally{if(r)throw r.error}}o=u,s=0;for(var g=0,m=0,_=0;_<a;_++){var p=t[_];p>o&&(m|=1<<a-1-_,s++,g+=p)}if(s===3){for(var _=0;_<a&&s>0;_++){var p=t[_];if(p>o&&(s--,p*2>=g))return-1}return m}}while(s>3);return-1},e.patternToChar=function(t){for(var r=0;r<e.CHARACTER_ENCODINGS.length;r++)if(e.CHARACTER_ENCODINGS[r]===t)return e.ALPHABET_STRING.charAt(r);if(t===e.ASTERISK_ENCODING)return"*";throw new ze},e.decodeExtended=function(t){for(var r=t.length,i="",a=0;a<r;a++){var o=t.charAt(a);if(o==="+"||o==="$"||o==="%"||o==="/"){var s=t.charAt(a+1),u="\0";switch(o){case"+":if(s>="A"&&s<="Z")u=String.fromCharCode(s.charCodeAt(0)+32);else throw new pt;break;case"$":if(s>="A"&&s<="Z")u=String.fromCharCode(s.charCodeAt(0)-64);else throw new pt;break;case"%":if(s>="A"&&s<="E")u=String.fromCharCode(s.charCodeAt(0)-38);else if(s>="F"&&s<="J")u=String.fromCharCode(s.charCodeAt(0)-11);else if(s>="K"&&s<="O")u=String.fromCharCode(s.charCodeAt(0)+16);else if(s>="P"&&s<="T")u=String.fromCharCode(s.charCodeAt(0)+43);else if(s==="U")u="\0";else if(s==="V")u="@";else if(s==="W")u="`";else if(s==="X"||s==="Y"||s==="Z")u="";else throw new pt;break;case"/":if(s>="A"&&s<="O")u=String.fromCharCode(s.charCodeAt(0)-32);else if(s==="Z")u=":";else throw new pt;break}i+=u,a++}else i+=o}return i},e.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",e.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],e.ASTERISK_ENCODING=148,e}(ki),xM=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),fv=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Ab=function(n){xM(e,n);function e(){var t=n.call(this)||this;return t.decodeRowResult="",t.counters=new Int32Array(6),t}return e.prototype.decodeRow=function(t,r,i){var a,o,s,u,f=this.findAsteriskPattern(r),h=r.getNextSet(f[1]),p=r.getSize(),g=this.counters;g.fill(0),this.decodeRowResult="";var m,_;do{e.recordPattern(r,h,g);var b=this.toPattern(g);if(b<0)throw new ze;m=this.patternToChar(b),this.decodeRowResult+=m,_=h;try{for(var T=(a=void 0,fv(g)),S=T.next();!S.done;S=T.next()){var D=S.value;h+=D}}catch(C){a={error:C}}finally{try{S&&!S.done&&(o=T.return)&&o.call(T)}finally{if(a)throw a.error}}h=r.getNextSet(h)}while(m!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var B=0;try{for(var V=fv(g),Y=V.next();!Y.done;Y=V.next()){var D=Y.value;B+=D}}catch(C){s={error:C}}finally{try{Y&&!Y.done&&(u=V.return)&&u.call(V)}finally{if(s)throw s.error}}if(h===p||!r.get(h))throw new ze;if(this.decodeRowResult.length<2)throw new ze;this.checkChecksums(this.decodeRowResult),this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-2);var q=this.decodeExtended(this.decodeRowResult),P=(f[1]+f[0])/2,E=_+B/2;return new Fa(q,null,0,[new It(P,t),new It(E,t)],Mt.CODE_93,new Date().getTime())},e.prototype.findAsteriskPattern=function(t){var r=t.getSize(),i=t.getNextSet(0);this.counters.fill(0);for(var a=this.counters,o=i,s=!1,u=a.length,f=0,h=i;h<r;h++)if(t.get(h)!==s)a[f]++;else{if(f===u-1){if(this.toPattern(a)===e.ASTERISK_ENCODING)return new Int32Array([o,h]);o+=a[0]+a[1],a.copyWithin(0,2,2+f-1),a[f-1]=0,a[f]=0,f--}else f++;a[f]=1,s=!s}throw new ze},e.prototype.toPattern=function(t){var r,i,a=0;try{for(var o=fv(t),s=o.next();!s.done;s=o.next()){var u=s.value;a+=u}}catch(_){r={error:_}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}for(var f=0,h=t.length,p=0;p<h;p++){var g=Math.round(t[p]*9/a);if(g<1||g>4)return-1;if((p&1)===0)for(var m=0;m<g;m++)f=f<<1|1;else f<<=g}return f},e.prototype.patternToChar=function(t){for(var r=0;r<e.CHARACTER_ENCODINGS.length;r++)if(e.CHARACTER_ENCODINGS[r]===t)return e.ALPHABET_STRING.charAt(r);throw new ze},e.prototype.decodeExtended=function(t){for(var r=t.length,i="",a=0;a<r;a++){var o=t.charAt(a);if(o>="a"&&o<="d"){if(a>=r-1)throw new pt;var s=t.charAt(a+1),u="\0";switch(o){case"d":if(s>="A"&&s<="Z")u=String.fromCharCode(s.charCodeAt(0)+32);else throw new pt;break;case"a":if(s>="A"&&s<="Z")u=String.fromCharCode(s.charCodeAt(0)-64);else throw new pt;break;case"b":if(s>="A"&&s<="E")u=String.fromCharCode(s.charCodeAt(0)-38);else if(s>="F"&&s<="J")u=String.fromCharCode(s.charCodeAt(0)-11);else if(s>="K"&&s<="O")u=String.fromCharCode(s.charCodeAt(0)+16);else if(s>="P"&&s<="T")u=String.fromCharCode(s.charCodeAt(0)+43);else if(s==="U")u="\0";else if(s==="V")u="@";else if(s==="W")u="`";else if(s>="X"&&s<="Z")u="";else throw new pt;break;case"c":if(s>="A"&&s<="O")u=String.fromCharCode(s.charCodeAt(0)-32);else if(s==="Z")u=":";else throw new pt;break}i+=u,a++}else i+=o}return i},e.prototype.checkChecksums=function(t){var r=t.length;this.checkOneChecksum(t,r-2,20),this.checkOneChecksum(t,r-1,15)},e.prototype.checkOneChecksum=function(t,r,i){for(var a=1,o=0,s=r-1;s>=0;s--)o+=a*e.ALPHABET_STRING.indexOf(t.charAt(s)),++a>i&&(a=1);if(t.charAt(r)!==e.ALPHABET_STRING[o%47])throw new Ki},e.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%abcd*",e.CHARACTER_ENCODINGS=[276,328,324,322,296,292,290,336,274,266,424,420,418,404,402,394,360,356,354,308,282,344,332,326,300,278,436,434,428,422,406,410,364,358,310,314,302,468,466,458,366,374,430,294,474,470,306,350],e.ASTERISK_ENCODING=e.CHARACTER_ENCODINGS[47],e}(ki),_M=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),wM=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Eb=function(n){_M(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.narrowLineWidth=-1,t}return e.prototype.decodeRow=function(t,r,i){var a,o,s=this.decodeStart(r),u=this.decodeEnd(r),f=new cn;e.decodeMiddle(r,s[1],u[0],f);var h=f.toString(),p=null;i!=null&&(p=i.get(Pr.ALLOWED_LENGTHS)),p==null&&(p=e.DEFAULT_ALLOWED_LENGTHS);var g=h.length,m=!1,_=0;try{for(var b=wM(p),T=b.next();!T.done;T=b.next()){var S=T.value;if(g===S){m=!0;break}S>_&&(_=S)}}catch(V){a={error:V}}finally{try{T&&!T.done&&(o=b.return)&&o.call(b)}finally{if(a)throw a.error}}if(!m&&g>_&&(m=!0),!m)throw new pt;var D=[new It(s[1],t),new It(u[0],t)],B=new Fa(h,null,0,D,Mt.ITF,new Date().getTime());return B},e.decodeMiddle=function(t,r,i,a){var o=new Int32Array(10),s=new Int32Array(5),u=new Int32Array(5);for(o.fill(0),s.fill(0),u.fill(0);r<i;){ki.recordPattern(t,r,o);for(var f=0;f<5;f++){var h=2*f;s[f]=o[h],u[f]=o[h+1]}var p=e.decodeDigit(s);a.append(p.toString()),p=this.decodeDigit(u),a.append(p.toString()),o.forEach(function(g){r+=g})}},e.prototype.decodeStart=function(t){var r=e.skipWhiteSpace(t),i=e.findGuardPattern(t,r,e.START_PATTERN);return this.narrowLineWidth=(i[1]-i[0])/4,this.validateQuietZone(t,i[0]),i},e.prototype.validateQuietZone=function(t,r){var i=this.narrowLineWidth*10;i=i<r?i:r;for(var a=r-1;i>0&&a>=0&&!t.get(a);a--)i--;if(i!==0)throw new ze},e.skipWhiteSpace=function(t){var r=t.getSize(),i=t.getNextSet(0);if(i===r)throw new ze;return i},e.prototype.decodeEnd=function(t){t.reverse();try{var r=e.skipWhiteSpace(t),i=void 0;try{i=e.findGuardPattern(t,r,e.END_PATTERN_REVERSED[0])}catch(o){o instanceof ze&&(i=e.findGuardPattern(t,r,e.END_PATTERN_REVERSED[1]))}this.validateQuietZone(t,i[0]);var a=i[0];return i[0]=t.getSize()-i[1],i[1]=t.getSize()-a,i}finally{t.reverse()}},e.findGuardPattern=function(t,r,i){var a=i.length,o=new Int32Array(a),s=t.getSize(),u=!1,f=0,h=r;o.fill(0);for(var p=r;p<s;p++)if(t.get(p)!==u)o[f]++;else{if(f===a-1){if(ki.patternMatchVariance(o,i,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return[h,p];h+=o[0]+o[1],_r.arraycopy(o,2,o,0,f-1),o[f-1]=0,o[f]=0,f--}else f++;o[f]=1,u=!u}throw new ze},e.decodeDigit=function(t){for(var r=e.MAX_AVG_VARIANCE,i=-1,a=e.PATTERNS.length,o=0;o<a;o++){var s=e.PATTERNS[o],u=ki.patternMatchVariance(t,s,e.MAX_INDIVIDUAL_VARIANCE);u<r?(r=u,i=o):u===r&&(i=-1)}if(i>=0)return i%10;throw new ze},e.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],e.MAX_AVG_VARIANCE=.38,e.MAX_INDIVIDUAL_VARIANCE=.5,e.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],e.START_PATTERN=Int32Array.from([1,1,1,1]),e.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])],e}(ki),bM=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),bd=function(n){bM(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.decodeRowStringBuffer="",t}return e.findStartGuardPattern=function(t){for(var r=!1,i,a=0,o=Int32Array.from([0,0,0]);!r;){o=Int32Array.from([0,0,0]),i=e.findGuardPattern(t,a,!1,this.START_END_PATTERN,o);var s=i[0];a=i[1];var u=s-(a-s);u>=0&&(r=t.isRange(u,s,!1))}return i},e.checkChecksum=function(t){return e.checkStandardUPCEANChecksum(t)},e.checkStandardUPCEANChecksum=function(t){var r=t.length;if(r===0)return!1;var i=parseInt(t.charAt(r-1),10);return e.getStandardUPCEANChecksum(t.substring(0,r-1))===i},e.getStandardUPCEANChecksum=function(t){for(var r=t.length,i=0,a=r-1;a>=0;a-=2){var o=t.charAt(a).charCodeAt(0)-48;if(o<0||o>9)throw new pt;i+=o}i*=3;for(var a=r-2;a>=0;a-=2){var o=t.charAt(a).charCodeAt(0)-48;if(o<0||o>9)throw new pt;i+=o}return(1e3-i)%10},e.decodeEnd=function(t,r){return e.findGuardPattern(t,r,!1,e.START_END_PATTERN,new Int32Array(e.START_END_PATTERN.length).fill(0))},e.findGuardPatternWithoutCounters=function(t,r,i,a){return this.findGuardPattern(t,r,i,a,new Int32Array(a.length))},e.findGuardPattern=function(t,r,i,a,o){var s=t.getSize();r=i?t.getNextUnset(r):t.getNextSet(r);for(var u=0,f=r,h=a.length,p=i,g=r;g<s;g++)if(t.get(g)!==p)o[u]++;else{if(u===h-1){if(ki.patternMatchVariance(o,a,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return Int32Array.from([f,g]);f+=o[0]+o[1];for(var m=o.slice(2,o.length),_=0;_<u-1;_++)o[_]=m[_];o[u-1]=0,o[u]=0,u--}else u++;o[u]=1,p=!p}throw new ze},e.decodeDigit=function(t,r,i,a){this.recordPattern(t,i,r);for(var o=this.MAX_AVG_VARIANCE,s=-1,u=a.length,f=0;f<u;f++){var h=a[f],p=ki.patternMatchVariance(r,h,e.MAX_INDIVIDUAL_VARIANCE);p<o&&(o=p,s=f)}if(s>=0)return s;throw new ze},e.MAX_AVG_VARIANCE=.48,e.MAX_INDIVIDUAL_VARIANCE=.7,e.START_END_PATTERN=Int32Array.from([1,1,1]),e.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),e.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),e.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])],e}(ki),AM=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},EM=function(){function n(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return n.prototype.decodeRow=function(e,t,r){var i=this.decodeRowStringBuffer,a=this.decodeMiddle(t,r,i),o=i.toString(),s=n.parseExtensionString(o),u=[new It((r[0]+r[1])/2,e),new It(a,e)],f=new Fa(o,null,0,u,Mt.UPC_EAN_EXTENSION,new Date().getTime());return s!=null&&f.putAllMetadata(s),f},n.prototype.decodeMiddle=function(e,t,r){var i,a,o=this.decodeMiddleCounters;o[0]=0,o[1]=0,o[2]=0,o[3]=0;for(var s=e.getSize(),u=t[1],f=0,h=0;h<5&&u<s;h++){var p=bd.decodeDigit(e,o,u,bd.L_AND_G_PATTERNS);r+=String.fromCharCode(48+p%10);try{for(var g=(i=void 0,AM(o)),m=g.next();!m.done;m=g.next()){var _=m.value;u+=_}}catch(T){i={error:T}}finally{try{m&&!m.done&&(a=g.return)&&a.call(g)}finally{if(i)throw i.error}}p>=10&&(f|=1<<4-h),h!==4&&(u=e.getNextSet(u),u=e.getNextUnset(u))}if(r.length!==5)throw new ze;var b=this.determineCheckDigit(f);if(n.extensionChecksum(r.toString())!==b)throw new ze;return u},n.extensionChecksum=function(e){for(var t=e.length,r=0,i=t-2;i>=0;i-=2)r+=e.charAt(i).charCodeAt(0)-48;r*=3;for(var i=t-1;i>=0;i-=2)r+=e.charAt(i).charCodeAt(0)-48;return r*=3,r%10},n.prototype.determineCheckDigit=function(e){for(var t=0;t<10;t++)if(e===this.CHECK_DIGIT_ENCODINGS[t])return t;throw new ze},n.parseExtensionString=function(e){if(e.length!==5)return null;var t=n.parseExtension5String(e);return t==null?null:new Map([[fa.SUGGESTED_PRICE,t]])},n.parseExtension5String=function(e){var t;switch(e.charAt(0)){case"0":t="£";break;case"5":t="$";break;case"9":switch(e){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}t="";break;default:t="";break}var r=parseInt(e.substring(1)),i=(r/100).toString(),a=r%100,o=a<10?"0"+a:a.toString();return t+i+"."+o},n}(),SM=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},CM=function(){function n(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return n.prototype.decodeRow=function(e,t,r){var i=this.decodeRowStringBuffer,a=this.decodeMiddle(t,r,i),o=i.toString(),s=n.parseExtensionString(o),u=[new It((r[0]+r[1])/2,e),new It(a,e)],f=new Fa(o,null,0,u,Mt.UPC_EAN_EXTENSION,new Date().getTime());return s!=null&&f.putAllMetadata(s),f},n.prototype.decodeMiddle=function(e,t,r){var i,a,o=this.decodeMiddleCounters;o[0]=0,o[1]=0,o[2]=0,o[3]=0;for(var s=e.getSize(),u=t[1],f=0,h=0;h<2&&u<s;h++){var p=bd.decodeDigit(e,o,u,bd.L_AND_G_PATTERNS);r+=String.fromCharCode(48+p%10);try{for(var g=(i=void 0,SM(o)),m=g.next();!m.done;m=g.next()){var _=m.value;u+=_}}catch(b){i={error:b}}finally{try{m&&!m.done&&(a=g.return)&&a.call(g)}finally{if(i)throw i.error}}p>=10&&(f|=1<<1-h),h!==1&&(u=e.getNextSet(u),u=e.getNextUnset(u))}if(r.length!==2)throw new ze;if(parseInt(r.toString())%4!==f)throw new ze;return u},n.parseExtensionString=function(e){return e.length!==2?null:new Map([[fa.ISSUE_NUMBER,parseInt(e)]])},n}(),TM=function(){function n(){}return n.decodeRow=function(e,t,r){var i=bd.findGuardPattern(t,r,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{var a=new EM;return a.decodeRow(e,t,i)}catch{var o=new CM;return o.decodeRow(e,t,i)}},n.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]),n}(),IM=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Di=function(n){IM(e,n);function e(){var t=n.call(this)||this;t.decodeRowStringBuffer="",e.L_AND_G_PATTERNS=e.L_PATTERNS.map(function(s){return Int32Array.from(s)});for(var r=10;r<20;r++){for(var i=e.L_PATTERNS[r-10],a=new Int32Array(i.length),o=0;o<i.length;o++)a[o]=i[i.length-o-1];e.L_AND_G_PATTERNS[r]=a}return t}return e.prototype.decodeRow=function(t,r,i){var a=e.findStartGuardPattern(r),o=i==null?null:i.get(Pr.NEED_RESULT_POINT_CALLBACK);if(o!=null){var s=new It((a[0]+a[1])/2,t);o.foundPossibleResultPoint(s)}var u=this.decodeMiddle(r,a,this.decodeRowStringBuffer),f=u.rowOffset,h=u.resultString;if(o!=null){var p=new It(f,t);o.foundPossibleResultPoint(p)}var g=e.decodeEnd(r,f);if(o!=null){var m=new It((g[0]+g[1])/2,t);o.foundPossibleResultPoint(m)}var _=g[1],b=_+(_-g[0]);if(b>=r.getSize()||!r.isRange(_,b,!1))throw new ze;var T=h.toString();if(T.length<8)throw new pt;if(!e.checkChecksum(T))throw new Ki;var S=(a[1]+a[0])/2,D=(g[1]+g[0])/2,B=this.getBarcodeFormat(),V=[new It(S,t),new It(D,t)],Y=new Fa(T,null,0,V,B,new Date().getTime()),q=0;try{var P=TM.decodeRow(t,r,g[1]);Y.putMetadata(fa.UPC_EAN_EXTENSION,P.getText()),Y.putAllMetadata(P.getResultMetadata()),Y.addResultPoints(P.getResultPoints()),q=P.getText().length}catch{}var E=i==null?null:i.get(Pr.ALLOWED_EAN_EXTENSIONS);if(E!=null){var C=!1;for(var M in E)if(q.toString()===M){C=!0;break}if(!C)throw new ze}return B===Mt.EAN_13||Mt.UPC_A,Y},e.checkChecksum=function(t){return e.checkStandardUPCEANChecksum(t)},e.checkStandardUPCEANChecksum=function(t){var r=t.length;if(r===0)return!1;var i=parseInt(t.charAt(r-1),10);return e.getStandardUPCEANChecksum(t.substring(0,r-1))===i},e.getStandardUPCEANChecksum=function(t){for(var r=t.length,i=0,a=r-1;a>=0;a-=2){var o=t.charAt(a).charCodeAt(0)-48;if(o<0||o>9)throw new pt;i+=o}i*=3;for(var a=r-2;a>=0;a-=2){var o=t.charAt(a).charCodeAt(0)-48;if(o<0||o>9)throw new pt;i+=o}return(1e3-i)%10},e.decodeEnd=function(t,r){return e.findGuardPattern(t,r,!1,e.START_END_PATTERN,new Int32Array(e.START_END_PATTERN.length).fill(0))},e}(bd),RM=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Sb=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},yy=function(n){RM(e,n);function e(){var t=n.call(this)||this;return t.decodeMiddleCounters=Int32Array.from([0,0,0,0]),t}return e.prototype.decodeMiddle=function(t,r,i){var a,o,s,u,f=this.decodeMiddleCounters;f[0]=0,f[1]=0,f[2]=0,f[3]=0;for(var h=t.getSize(),p=r[1],g=0,m=0;m<6&&p<h;m++){var _=Di.decodeDigit(t,f,p,Di.L_AND_G_PATTERNS);i+=String.fromCharCode(48+_%10);try{for(var b=(a=void 0,Sb(f)),T=b.next();!T.done;T=b.next()){var S=T.value;p+=S}}catch(Y){a={error:Y}}finally{try{T&&!T.done&&(o=b.return)&&o.call(b)}finally{if(a)throw a.error}}_>=10&&(g|=1<<5-m)}i=e.determineFirstDigit(i,g);var D=Di.findGuardPattern(t,p,!0,Di.MIDDLE_PATTERN,new Int32Array(Di.MIDDLE_PATTERN.length).fill(0));p=D[1];for(var m=0;m<6&&p<h;m++){var _=Di.decodeDigit(t,f,p,Di.L_PATTERNS);i+=String.fromCharCode(48+_);try{for(var B=(s=void 0,Sb(f)),V=B.next();!V.done;V=B.next()){var S=V.value;p+=S}}catch(P){s={error:P}}finally{try{V&&!V.done&&(u=B.return)&&u.call(B)}finally{if(s)throw s.error}}}return{rowOffset:p,resultString:i}},e.prototype.getBarcodeFormat=function(){return Mt.EAN_13},e.determineFirstDigit=function(t,r){for(var i=0;i<10;i++)if(r===this.FIRST_DIGIT_ENCODINGS[i])return t=String.fromCharCode(48+i)+t,t;throw new ze},e.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26],e}(Di),NM=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Cb=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Tb=function(n){NM(e,n);function e(){var t=n.call(this)||this;return t.decodeMiddleCounters=Int32Array.from([0,0,0,0]),t}return e.prototype.decodeMiddle=function(t,r,i){var a,o,s,u,f=this.decodeMiddleCounters;f[0]=0,f[1]=0,f[2]=0,f[3]=0;for(var h=t.getSize(),p=r[1],g=0;g<4&&p<h;g++){var m=Di.decodeDigit(t,f,p,Di.L_PATTERNS);i+=String.fromCharCode(48+m);try{for(var _=(a=void 0,Cb(f)),b=_.next();!b.done;b=_.next()){var T=b.value;p+=T}}catch(V){a={error:V}}finally{try{b&&!b.done&&(o=_.return)&&o.call(_)}finally{if(a)throw a.error}}}var S=Di.findGuardPattern(t,p,!0,Di.MIDDLE_PATTERN,new Int32Array(Di.MIDDLE_PATTERN.length).fill(0));p=S[1];for(var g=0;g<4&&p<h;g++){var m=Di.decodeDigit(t,f,p,Di.L_PATTERNS);i+=String.fromCharCode(48+m);try{for(var D=(s=void 0,Cb(f)),B=D.next();!B.done;B=D.next()){var T=B.value;p+=T}}catch(q){s={error:q}}finally{try{B&&!B.done&&(u=D.return)&&u.call(D)}finally{if(s)throw s.error}}}return{rowOffset:p,resultString:i}},e.prototype.getBarcodeFormat=function(){return Mt.EAN_8},e}(Di),OM=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Ib=function(n){OM(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.ean13Reader=new yy,t}return e.prototype.getBarcodeFormat=function(){return Mt.UPC_A},e.prototype.decode=function(t,r){return this.maybeReturnResult(this.ean13Reader.decode(t))},e.prototype.decodeRow=function(t,r,i){return this.maybeReturnResult(this.ean13Reader.decodeRow(t,r,i))},e.prototype.decodeMiddle=function(t,r,i){return this.ean13Reader.decodeMiddle(t,r,i)},e.prototype.maybeReturnResult=function(t){var r=t.getText();if(r.charAt(0)==="0"){var i=new Fa(r.substring(1),null,null,t.getResultPoints(),Mt.UPC_A);return t.getResultMetadata()!=null&&i.putAllMetadata(t.getResultMetadata()),i}else throw new ze},e.prototype.reset=function(){this.ean13Reader.reset()},e}(Di),DM=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),PM=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Rb=function(n){DM(e,n);function e(){var t=n.call(this)||this;return t.decodeMiddleCounters=new Int32Array(4),t}return e.prototype.decodeMiddle=function(t,r,i){var a,o,s=this.decodeMiddleCounters.map(function(T){return T});s[0]=0,s[1]=0,s[2]=0,s[3]=0;for(var u=t.getSize(),f=r[1],h=0,p=0;p<6&&f<u;p++){var g=e.decodeDigit(t,s,f,e.L_AND_G_PATTERNS);i+=String.fromCharCode(48+g%10);try{for(var m=(a=void 0,PM(s)),_=m.next();!_.done;_=m.next()){var b=_.value;f+=b}}catch(T){a={error:T}}finally{try{_&&!_.done&&(o=m.return)&&o.call(m)}finally{if(a)throw a.error}}g>=10&&(h|=1<<5-p)}return e.determineNumSysAndCheckDigit(new cn(i),h),f},e.prototype.decodeEnd=function(t,r){return e.findGuardPatternWithoutCounters(t,r,!0,e.MIDDLE_END_PATTERN)},e.prototype.checkChecksum=function(t){return Di.checkChecksum(e.convertUPCEtoUPCA(t))},e.determineNumSysAndCheckDigit=function(t,r){for(var i=0;i<=1;i++)for(var a=0;a<10;a++)if(r===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[i][a]){t.insert(0,"0"+i),t.append("0"+a);return}throw ze.getNotFoundInstance()},e.prototype.getBarcodeFormat=function(){return Mt.UPC_E},e.convertUPCEtoUPCA=function(t){var r=t.slice(1,7).split("").map(function(o){return o.charCodeAt(0)}),i=new cn;i.append(t.charAt(0));var a=r[5];switch(a){case 0:case 1:case 2:i.appendChars(r,0,2),i.append(a),i.append("0000"),i.appendChars(r,2,3);break;case 3:i.appendChars(r,0,3),i.append("00000"),i.appendChars(r,3,2);break;case 4:i.appendChars(r,0,4),i.append("00000"),i.append(r[4]);break;default:i.appendChars(r,0,5),i.append("0000"),i.append(a);break}return t.length>=8&&i.append(t.charAt(7)),i.toString()},e.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),e.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,1])],e}(Di),LM=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Nb=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},hv=function(n){LM(e,n);function e(t){var r=n.call(this)||this,i=t==null?null:t.get(Pr.POSSIBLE_FORMATS),a=[];return i!=null&&(i.indexOf(Mt.EAN_13)>-1&&a.push(new yy),i.indexOf(Mt.UPC_A)>-1&&a.push(new Ib),i.indexOf(Mt.EAN_8)>-1&&a.push(new Tb),i.indexOf(Mt.UPC_E)>-1&&a.push(new Rb)),a.length===0&&(a.push(new yy),a.push(new Ib),a.push(new Tb),a.push(new Rb)),r.readers=a,r}return e.prototype.decodeRow=function(t,r,i){var a,o;try{for(var s=Nb(this.readers),u=s.next();!u.done;u=s.next()){var f=u.value;try{var h=f.decodeRow(t,r,i),p=h.getBarcodeFormat()===Mt.EAN_13&&h.getText().charAt(0)==="0",g=i==null?null:i.get(Pr.POSSIBLE_FORMATS),m=g==null||g.includes(Mt.UPC_A);if(p&&m){var _=h.getRawBytes(),b=new Fa(h.getText().substring(1),_,_?_.length:null,h.getResultPoints(),Mt.UPC_A);return b.putAllMetadata(h.getResultMetadata()),b}return h}catch{}}}catch(T){a={error:T}}finally{try{u&&!u.done&&(o=s.return)&&o.call(s)}finally{if(a)throw a.error}}throw new ze},e.prototype.reset=function(){var t,r;try{for(var i=Nb(this.readers),a=i.next();!a.done;a=i.next()){var o=a.value;o.reset()}}catch(s){t={error:s}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}},e}(ki),kM=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),MM=function(n){kM(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.CODA_BAR_CHAR_SET={nnnnnww:"0",nnnnwwn:"1",nnnwnnw:"2",wwnnnnn:"3",nnwnnwn:"4",wnnnnwn:"5",nwnnnnw:"6",nwnnwnn:"7",nwwnnnn:"8",wnnwnnn:"9",nnnwwnn:"-",nnwwnnn:"$",wnnnwnw:":",wnwnnnw:"/",wnwnwnn:".",nnwwwww:"+",nnwwnwn:"A",nwnwnnw:"B",nnnwnww:"C",nnnwwwn:"D"},t}return e.prototype.decodeRow=function(t,r,i){var a=this.getValidRowData(r);if(!a)throw new ze;var o=this.codaBarDecodeRow(a.row);if(!o)throw new ze;return new Fa(o,null,0,[new It(a.left,t),new It(a.right,t)],Mt.CODABAR,new Date().getTime())},e.prototype.getValidRowData=function(t){var r=t.toArray(),i=r.indexOf(!0);if(i===-1)return null;var a=r.lastIndexOf(!0);if(a<=i)return null;r=r.slice(i,a+1);for(var o=[],s=r[0],u=1,f=1;f<r.length;f++)r[f]===s?u++:(s=r[f],o.push(u),u=1);return o.push(u),o.length<23&&(o.length+1)%8!==0?null:{row:o,left:i,right:a}},e.prototype.codaBarDecodeRow=function(t){for(var r=[],i=Math.ceil(t.reduce(function(u,f){return(u+f)/2},0));t.length>0;){var a=t.splice(0,8).splice(0,7),o=a.map(function(u){return u<i?"n":"w"}).join("");if(this.CODA_BAR_CHAR_SET[o]===void 0)return null;r.push(this.CODA_BAR_CHAR_SET[o])}var s=r.join("");return this.validCodaBarString(s)?s:null},e.prototype.validCodaBarString=function(t){var r=/^[A-D].{1,}[A-D]$/;return r.test(t)},e}(ki),BM=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),FM=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},qf=function(n){BM(e,n);function e(){var t=n.call(this)||this;return t.decodeFinderCounters=new Int32Array(4),t.dataCharacterCounters=new Int32Array(8),t.oddRoundingErrors=new Array(4),t.evenRoundingErrors=new Array(4),t.oddCounts=new Array(t.dataCharacterCounters.length/2),t.evenCounts=new Array(t.dataCharacterCounters.length/2),t}return e.prototype.getDecodeFinderCounters=function(){return this.decodeFinderCounters},e.prototype.getDataCharacterCounters=function(){return this.dataCharacterCounters},e.prototype.getOddRoundingErrors=function(){return this.oddRoundingErrors},e.prototype.getEvenRoundingErrors=function(){return this.evenRoundingErrors},e.prototype.getOddCounts=function(){return this.oddCounts},e.prototype.getEvenCounts=function(){return this.evenCounts},e.prototype.parseFinderValue=function(t,r){for(var i=0;i<r.length;i++)if(ki.patternMatchVariance(t,r[i],e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return i;throw new ze},e.count=function(t){return qn.sum(new Int32Array(t))},e.increment=function(t,r){for(var i=0,a=r[0],o=1;o<t.length;o++)r[o]>a&&(a=r[o],i=o);t[i]++},e.decrement=function(t,r){for(var i=0,a=r[0],o=1;o<t.length;o++)r[o]<a&&(a=r[o],i=o);t[i]--},e.isFinderPattern=function(t){var r,i,a=t[0]+t[1],o=a+t[2]+t[3],s=a/o;if(s>=e.MIN_FINDER_PATTERN_RATIO&&s<=e.MAX_FINDER_PATTERN_RATIO){var u=Number.MAX_SAFE_INTEGER,f=Number.MIN_SAFE_INTEGER;try{for(var h=FM(t),p=h.next();!p.done;p=h.next()){var g=p.value;g>f&&(f=g),g<u&&(u=g)}}catch(m){r={error:m}}finally{try{p&&!p.done&&(i=h.return)&&i.call(h)}finally{if(r)throw r.error}}return f<10*u}return!1},e.MAX_AVG_VARIANCE=.2,e.MAX_INDIVIDUAL_VARIANCE=.45,e.MIN_FINDER_PATTERN_RATIO=9.5/12,e.MAX_FINDER_PATTERN_RATIO=12.5/14,e}(ki),Dg=function(){function n(e,t){this.value=e,this.checksumPortion=t}return n.prototype.getValue=function(){return this.value},n.prototype.getChecksumPortion=function(){return this.checksumPortion},n.prototype.toString=function(){return this.value+"("+this.checksumPortion+")"},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.value===t.value&&this.checksumPortion===t.checksumPortion},n.prototype.hashCode=function(){return this.value^this.checksumPortion},n}(),cS=function(){function n(e,t,r,i,a){this.value=e,this.startEnd=t,this.value=e,this.startEnd=t,this.resultPoints=new Array,this.resultPoints.push(new It(r,a)),this.resultPoints.push(new It(i,a))}return n.prototype.getValue=function(){return this.value},n.prototype.getStartEnd=function(){return this.startEnd},n.prototype.getResultPoints=function(){return this.resultPoints},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.value===t.value},n.prototype.hashCode=function(){return this.value},n}(),jM=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},td=function(){function n(){}return n.getRSSvalue=function(e,t,r){var i,a,o=0;try{for(var s=jM(e),u=s.next();!u.done;u=s.next()){var f=u.value;o+=f}}catch(D){i={error:D}}finally{try{u&&!u.done&&(a=s.return)&&a.call(s)}finally{if(i)throw i.error}}for(var h=0,p=0,g=e.length,m=0;m<g-1;m++){var _=void 0;for(_=1,p|=1<<m;_<e[m];_++,p&=~(1<<m)){var b=n.combins(o-_-1,g-m-2);if(r&&p===0&&o-_-(g-m-1)>=g-m-1&&(b-=n.combins(o-_-(g-m),g-m-2)),g-m-1>1){for(var T=0,S=o-_-(g-m-2);S>t;S--)T+=n.combins(o-_-S-1,g-m-3);b-=T*(g-1-m)}else o-_>t&&b--;h+=b}o-=_}return h},n.combins=function(e,t){var r,i;e-t>t?(i=t,r=e-t):(i=e-t,r=t);for(var a=1,o=1,s=e;s>r;s--)a*=s,o<=i&&(a/=o,o++);for(;o<=i;)a/=o,o++;return a},n}(),UM=function(){function n(){}return n.buildBitArray=function(e){var t=e.length*2-1;e[e.length-1].getRightChar()==null&&(t-=1);for(var r=12*t,i=new Qi(r),a=0,o=e[0],s=o.getRightChar().getValue(),u=11;u>=0;--u)(s&1<<u)!==0&&i.set(a),a++;for(var u=1;u<e.length;++u){for(var f=e[u],h=f.getLeftChar().getValue(),p=11;p>=0;--p)(h&1<<p)!==0&&i.set(a),a++;if(f.getRightChar()!==null)for(var g=f.getRightChar().getValue(),p=11;p>=0;--p)(g&1<<p)!==0&&i.set(a),a++}return i},n}(),Uf=function(){function n(e,t){t?this.decodedInformation=null:(this.finished=e,this.decodedInformation=t)}return n.prototype.getDecodedInformation=function(){return this.decodedInformation},n.prototype.isFinished=function(){return this.finished},n}(),ax=function(){function n(e){this.newPosition=e}return n.prototype.getNewPosition=function(){return this.newPosition},n}(),VM=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Ks=function(n){VM(e,n);function e(t,r){var i=n.call(this,t)||this;return i.value=r,i}return e.prototype.getValue=function(){return this.value},e.prototype.isFNC1=function(){return this.value===e.FNC1},e.FNC1="$",e}(ax),zM=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Vf=function(n){zM(e,n);function e(t,r,i){var a=n.call(this,t)||this;return i?(a.remaining=!0,a.remainingValue=a.remainingValue):(a.remaining=!1,a.remainingValue=0),a.newString=r,a}return e.prototype.getNewString=function(){return this.newString},e.prototype.isRemaining=function(){return this.remaining},e.prototype.getRemainingValue=function(){return this.remainingValue},e}(ax),qM=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),qh=function(n){qM(e,n);function e(t,r,i){var a=n.call(this,t)||this;if(r<0||r>10||i<0||i>10)throw new pt;return a.firstDigit=r,a.secondDigit=i,a}return e.prototype.getFirstDigit=function(){return this.firstDigit},e.prototype.getSecondDigit=function(){return this.secondDigit},e.prototype.getValue=function(){return this.firstDigit*10+this.secondDigit},e.prototype.isFirstDigitFNC1=function(){return this.firstDigit===e.FNC1},e.prototype.isSecondDigitFNC1=function(){return this.secondDigit===e.FNC1},e.prototype.isAnyFNC1=function(){return this.firstDigit===e.FNC1||this.secondDigit===e.FNC1},e.FNC1=10,e}(ax),Dp=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},HM=function(){function n(){}return n.parseFieldsInGeneralPurpose=function(e){var t,r,i,a,o,s,u,f;if(!e)return null;if(e.length<2)throw new ze;var h=e.substring(0,2);try{for(var p=Dp(n.TWO_DIGIT_DATA_LENGTH),g=p.next();!g.done;g=p.next()){var m=g.value;if(m[0]===h)return m[1]===n.VARIABLE_LENGTH?n.processVariableAI(2,m[2],e):n.processFixedAI(2,m[1],e)}}catch(q){t={error:q}}finally{try{g&&!g.done&&(r=p.return)&&r.call(p)}finally{if(t)throw t.error}}if(e.length<3)throw new ze;var _=e.substring(0,3);try{for(var b=Dp(n.THREE_DIGIT_DATA_LENGTH),T=b.next();!T.done;T=b.next()){var m=T.value;if(m[0]===_)return m[1]===n.VARIABLE_LENGTH?n.processVariableAI(3,m[2],e):n.processFixedAI(3,m[1],e)}}catch(q){i={error:q}}finally{try{T&&!T.done&&(a=b.return)&&a.call(b)}finally{if(i)throw i.error}}try{for(var S=Dp(n.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH),D=S.next();!D.done;D=S.next()){var m=D.value;if(m[0]===_)return m[1]===n.VARIABLE_LENGTH?n.processVariableAI(4,m[2],e):n.processFixedAI(4,m[1],e)}}catch(q){o={error:q}}finally{try{D&&!D.done&&(s=S.return)&&s.call(S)}finally{if(o)throw o.error}}if(e.length<4)throw new ze;var B=e.substring(0,4);try{for(var V=Dp(n.FOUR_DIGIT_DATA_LENGTH),Y=V.next();!Y.done;Y=V.next()){var m=Y.value;if(m[0]===B)return m[1]===n.VARIABLE_LENGTH?n.processVariableAI(4,m[2],e):n.processFixedAI(4,m[1],e)}}catch(q){u={error:q}}finally{try{Y&&!Y.done&&(f=V.return)&&f.call(V)}finally{if(u)throw u.error}}throw new ze},n.processFixedAI=function(e,t,r){if(r.length<e)throw new ze;var i=r.substring(0,e);if(r.length<e+t)throw new ze;var a=r.substring(e,e+t),o=r.substring(e+t),s="("+i+")"+a,u=n.parseFieldsInGeneralPurpose(o);return u==null?s:s+u},n.processVariableAI=function(e,t,r){var i=r.substring(0,e),a;r.length<e+t?a=r.length:a=e+t;var o=r.substring(e,a),s=r.substring(a),u="("+i+")"+o,f=n.parseFieldsInGeneralPurpose(s);return f==null?u:u+f},n.VARIABLE_LENGTH=[],n.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",n.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",n.VARIABLE_LENGTH,20],["22",n.VARIABLE_LENGTH,29],["30",n.VARIABLE_LENGTH,8],["37",n.VARIABLE_LENGTH,8],["90",n.VARIABLE_LENGTH,30],["91",n.VARIABLE_LENGTH,30],["92",n.VARIABLE_LENGTH,30],["93",n.VARIABLE_LENGTH,30],["94",n.VARIABLE_LENGTH,30],["95",n.VARIABLE_LENGTH,30],["96",n.VARIABLE_LENGTH,30],["97",n.VARIABLE_LENGTH,3],["98",n.VARIABLE_LENGTH,30],["99",n.VARIABLE_LENGTH,30]],n.THREE_DIGIT_DATA_LENGTH=[["240",n.VARIABLE_LENGTH,30],["241",n.VARIABLE_LENGTH,30],["242",n.VARIABLE_LENGTH,6],["250",n.VARIABLE_LENGTH,30],["251",n.VARIABLE_LENGTH,30],["253",n.VARIABLE_LENGTH,17],["254",n.VARIABLE_LENGTH,20],["400",n.VARIABLE_LENGTH,30],["401",n.VARIABLE_LENGTH,30],["402",17],["403",n.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",n.VARIABLE_LENGTH,20],["421",n.VARIABLE_LENGTH,15],["422",3],["423",n.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],n.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",n.VARIABLE_LENGTH,15],["391",n.VARIABLE_LENGTH,18],["392",n.VARIABLE_LENGTH,15],["393",n.VARIABLE_LENGTH,18],["703",n.VARIABLE_LENGTH,30]],n.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",n.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",n.VARIABLE_LENGTH,20],["8003",n.VARIABLE_LENGTH,30],["8004",n.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",n.VARIABLE_LENGTH,30],["8008",n.VARIABLE_LENGTH,12],["8018",18],["8020",n.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",n.VARIABLE_LENGTH,70],["8200",n.VARIABLE_LENGTH,70]],n}(),Jp=function(){function n(e){this.buffer=new cn,this.information=e}return n.prototype.decodeAllCodes=function(e,t){var r=t,i=null;do{var a=this.decodeGeneralPurposeField(r,i),o=HM.parseFieldsInGeneralPurpose(a.getNewString());if(o!=null&&e.append(o),a.isRemaining()?i=""+a.getRemainingValue():i=null,r===a.getNewPosition())break;r=a.getNewPosition()}while(!0);return e.toString()},n.prototype.isStillNumeric=function(e){if(e+7>this.information.getSize())return e+4<=this.information.getSize();for(var t=e;t<e+3;++t)if(this.information.get(t))return!0;return this.information.get(e+3)},n.prototype.decodeNumeric=function(e){if(e+7>this.information.getSize()){var t=this.extractNumericValueFromBitArray(e,4);return t===0?new qh(this.information.getSize(),qh.FNC1,qh.FNC1):new qh(this.information.getSize(),t-1,qh.FNC1)}var r=this.extractNumericValueFromBitArray(e,7),i=(r-8)/11,a=(r-8)%11;return new qh(e+7,i,a)},n.prototype.extractNumericValueFromBitArray=function(e,t){return n.extractNumericValueFromBitArray(this.information,e,t)},n.extractNumericValueFromBitArray=function(e,t,r){for(var i=0,a=0;a<r;++a)e.get(t+a)&&(i|=1<<r-a-1);return i},n.prototype.decodeGeneralPurposeField=function(e,t){this.buffer.setLengthToZero(),t!=null&&this.buffer.append(t),this.current.setPosition(e);var r=this.parseBlocks();return r!=null&&r.isRemaining()?new Vf(this.current.getPosition(),this.buffer.toString(),r.getRemainingValue()):new Vf(this.current.getPosition(),this.buffer.toString())},n.prototype.parseBlocks=function(){var e,t;do{var r=this.current.getPosition();this.current.isAlpha()?(t=this.parseAlphaBlock(),e=t.isFinished()):this.current.isIsoIec646()?(t=this.parseIsoIec646Block(),e=t.isFinished()):(t=this.parseNumericBlock(),e=t.isFinished());var i=r!==this.current.getPosition();if(!i&&!e)break}while(!e);return t.getDecodedInformation()},n.prototype.parseNumericBlock=function(){for(;this.isStillNumeric(this.current.getPosition());){var e=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFirstDigitFNC1()){var t=void 0;return e.isSecondDigitFNC1()?t=new Vf(this.current.getPosition(),this.buffer.toString()):t=new Vf(this.current.getPosition(),this.buffer.toString(),e.getSecondDigit()),new Uf(!0,t)}if(this.buffer.append(e.getFirstDigit()),e.isSecondDigitFNC1()){var t=new Vf(this.current.getPosition(),this.buffer.toString());return new Uf(!0,t)}this.buffer.append(e.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new Uf(!1)},n.prototype.parseIsoIec646Block=function(){for(;this.isStillIsoIec646(this.current.getPosition());){var e=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var t=new Vf(this.current.getPosition(),this.buffer.toString());return new Uf(!0,t)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new Uf(!1)},n.prototype.parseAlphaBlock=function(){for(;this.isStillAlpha(this.current.getPosition());){var e=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var t=new Vf(this.current.getPosition(),this.buffer.toString());return new Uf(!0,t)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new Uf(!1)},n.prototype.isStillIsoIec646=function(e){if(e+5>this.information.getSize())return!1;var t=this.extractNumericValueFromBitArray(e,5);if(t>=5&&t<16)return!0;if(e+7>this.information.getSize())return!1;var r=this.extractNumericValueFromBitArray(e,7);if(r>=64&&r<116)return!0;if(e+8>this.information.getSize())return!1;var i=this.extractNumericValueFromBitArray(e,8);return i>=232&&i<253},n.prototype.decodeIsoIec646=function(e){var t=this.extractNumericValueFromBitArray(e,5);if(t===15)return new Ks(e+5,Ks.FNC1);if(t>=5&&t<15)return new Ks(e+5,"0"+(t-5));var r=this.extractNumericValueFromBitArray(e,7);if(r>=64&&r<90)return new Ks(e+7,""+(r+1));if(r>=90&&r<116)return new Ks(e+7,""+(r+7));var i=this.extractNumericValueFromBitArray(e,8),a;switch(i){case 232:a="!";break;case 233:a='"';break;case 234:a="%";break;case 235:a="&";break;case 236:a="'";break;case 237:a="(";break;case 238:a=")";break;case 239:a="*";break;case 240:a="+";break;case 241:a=",";break;case 242:a="-";break;case 243:a=".";break;case 244:a="/";break;case 245:a=":";break;case 246:a=";";break;case 247:a="<";break;case 248:a="=";break;case 249:a=">";break;case 250:a="?";break;case 251:a="_";break;case 252:a=" ";break;default:throw new pt}return new Ks(e+8,a)},n.prototype.isStillAlpha=function(e){if(e+5>this.information.getSize())return!1;var t=this.extractNumericValueFromBitArray(e,5);if(t>=5&&t<16)return!0;if(e+6>this.information.getSize())return!1;var r=this.extractNumericValueFromBitArray(e,6);return r>=16&&r<63},n.prototype.decodeAlphanumeric=function(e){var t=this.extractNumericValueFromBitArray(e,5);if(t===15)return new Ks(e+5,Ks.FNC1);if(t>=5&&t<15)return new Ks(e+5,"0"+(t-5));var r=this.extractNumericValueFromBitArray(e,6);if(r>=32&&r<58)return new Ks(e+6,""+(r+33));var i;switch(r){case 58:i="*";break;case 59:i=",";break;case 60:i="-";break;case 61:i=".";break;case 62:i="/";break;default:throw new b0("Decoding invalid alphanumeric value: "+r)}return new Ks(e+6,i)},n.prototype.isAlphaTo646ToAlphaLatch=function(e){if(e+1>this.information.getSize())return!1;for(var t=0;t<5&&t+e<this.information.getSize();++t)if(t===2){if(!this.information.get(e+2))return!1}else if(this.information.get(e+t))return!1;return!0},n.prototype.isAlphaOr646ToNumericLatch=function(e){if(e+3>this.information.getSize())return!1;for(var t=e;t<e+3;++t)if(this.information.get(t))return!1;return!0},n.prototype.isNumericToAlphaNumericLatch=function(e){if(e+1>this.information.getSize())return!1;for(var t=0;t<4&&t+e<this.information.getSize();++t)if(this.information.get(e+t))return!1;return!0},n}(),fS=function(){function n(e){this.information=e,this.generalDecoder=new Jp(e)}return n.prototype.getInformation=function(){return this.information},n.prototype.getGeneralDecoder=function(){return this.generalDecoder},n}(),GM=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),rl=function(n){GM(e,n);function e(t){return n.call(this,t)||this}return e.prototype.encodeCompressedGtin=function(t,r){t.append("(01)");var i=t.length();t.append("9"),this.encodeCompressedGtinWithoutAI(t,r,i)},e.prototype.encodeCompressedGtinWithoutAI=function(t,r,i){for(var a=0;a<4;++a){var o=this.getGeneralDecoder().extractNumericValueFromBitArray(r+10*a,10);o/100===0&&t.append("0"),o/10===0&&t.append("0"),t.append(o)}e.appendCheckDigit(t,i)},e.appendCheckDigit=function(t,r){for(var i=0,a=0;a<13;a++){var o=t.charAt(a+r).charCodeAt(0)-48;i+=(a&1)===0?3*o:o}i=10-i%10,i===10&&(i=0),t.append(i)},e.GTIN_SIZE=40,e}(fS),WM=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),$M=function(n){WM(e,n);function e(t){return n.call(this,t)||this}return e.prototype.parseInformation=function(){var t=new cn;t.append("(01)");var r=t.length(),i=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE,4);return t.append(i),this.encodeCompressedGtinWithoutAI(t,e.HEADER_SIZE+4,r),this.getGeneralDecoder().decodeAllCodes(t,e.HEADER_SIZE+44)},e.HEADER_SIZE=4,e}(rl),XM=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),YM=function(n){XM(e,n);function e(t){return n.call(this,t)||this}return e.prototype.parseInformation=function(){var t=new cn;return this.getGeneralDecoder().decodeAllCodes(t,e.HEADER_SIZE)},e.HEADER_SIZE=5,e}(fS),KM=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),eg=function(n){KM(e,n);function e(t){return n.call(this,t)||this}return e.prototype.encodeCompressedWeight=function(t,r,i){var a=this.getGeneralDecoder().extractNumericValueFromBitArray(r,i);this.addWeightCode(t,a);for(var o=this.checkWeight(a),s=1e5,u=0;u<5;++u)o/s===0&&t.append("0"),s/=10;t.append(o)},e}(rl),QM=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),hS=function(n){QM(e,n);function e(t){return n.call(this,t)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()!==e.HEADER_SIZE+eg.GTIN_SIZE+e.WEIGHT_SIZE)throw new ze;var t=new cn;return this.encodeCompressedGtin(t,e.HEADER_SIZE),this.encodeCompressedWeight(t,e.HEADER_SIZE+eg.GTIN_SIZE,e.WEIGHT_SIZE),t.toString()},e.HEADER_SIZE=5,e.WEIGHT_SIZE=15,e}(eg),ZM=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),JM=function(n){ZM(e,n);function e(t){return n.call(this,t)||this}return e.prototype.addWeightCode=function(t,r){t.append("(3103)")},e.prototype.checkWeight=function(t){return t},e}(hS),eB=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),tB=function(n){eB(e,n);function e(t){return n.call(this,t)||this}return e.prototype.addWeightCode=function(t,r){r<1e4?t.append("(3202)"):t.append("(3203)")},e.prototype.checkWeight=function(t){return t<1e4?t:t-1e4},e}(hS),nB=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),rB=function(n){nB(e,n);function e(t){return n.call(this,t)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()<e.HEADER_SIZE+rl.GTIN_SIZE)throw new ze;var t=new cn;this.encodeCompressedGtin(t,e.HEADER_SIZE);var r=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+rl.GTIN_SIZE,e.LAST_DIGIT_SIZE);t.append("(392"),t.append(r),t.append(")");var i=this.getGeneralDecoder().decodeGeneralPurposeField(e.HEADER_SIZE+rl.GTIN_SIZE+e.LAST_DIGIT_SIZE,null);return t.append(i.getNewString()),t.toString()},e.HEADER_SIZE=8,e.LAST_DIGIT_SIZE=2,e}(rl),iB=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),aB=function(n){iB(e,n);function e(t){return n.call(this,t)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()<e.HEADER_SIZE+rl.GTIN_SIZE)throw new ze;var t=new cn;this.encodeCompressedGtin(t,e.HEADER_SIZE);var r=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+rl.GTIN_SIZE,e.LAST_DIGIT_SIZE);t.append("(393"),t.append(r),t.append(")");var i=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+rl.GTIN_SIZE+e.LAST_DIGIT_SIZE,e.FIRST_THREE_DIGITS_SIZE);i/100===0&&t.append("0"),i/10===0&&t.append("0"),t.append(i);var a=this.getGeneralDecoder().decodeGeneralPurposeField(e.HEADER_SIZE+rl.GTIN_SIZE+e.LAST_DIGIT_SIZE+e.FIRST_THREE_DIGITS_SIZE,null);return t.append(a.getNewString()),t.toString()},e.HEADER_SIZE=8,e.LAST_DIGIT_SIZE=2,e.FIRST_THREE_DIGITS_SIZE=10,e}(rl),oB=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Vc=function(n){oB(e,n);function e(t,r,i){var a=n.call(this,t)||this;return a.dateCode=i,a.firstAIdigits=r,a}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()!==e.HEADER_SIZE+e.GTIN_SIZE+e.WEIGHT_SIZE+e.DATE_SIZE)throw new ze;var t=new cn;return this.encodeCompressedGtin(t,e.HEADER_SIZE),this.encodeCompressedWeight(t,e.HEADER_SIZE+e.GTIN_SIZE,e.WEIGHT_SIZE),this.encodeCompressedDate(t,e.HEADER_SIZE+e.GTIN_SIZE+e.WEIGHT_SIZE),t.toString()},e.prototype.encodeCompressedDate=function(t,r){var i=this.getGeneralDecoder().extractNumericValueFromBitArray(r,e.DATE_SIZE);if(i!==38400){t.append("("),t.append(this.dateCode),t.append(")");var a=i%32;i/=32;var o=i%12+1;i/=12;var s=i;s/10===0&&t.append("0"),t.append(s),o/10===0&&t.append("0"),t.append(o),a/10===0&&t.append("0"),t.append(a)}},e.prototype.addWeightCode=function(t,r){t.append("("),t.append(this.firstAIdigits),t.append(r/1e5),t.append(")")},e.prototype.checkWeight=function(t){return t%1e5},e.HEADER_SIZE=8,e.WEIGHT_SIZE=20,e.DATE_SIZE=16,e}(eg);function sB(n){try{if(n.get(1))return new $M(n);if(!n.get(2))return new YM(n);var e=Jp.extractNumericValueFromBitArray(n,1,4);switch(e){case 4:return new JM(n);case 5:return new tB(n)}var t=Jp.extractNumericValueFromBitArray(n,1,5);switch(t){case 12:return new rB(n);case 13:return new aB(n)}var r=Jp.extractNumericValueFromBitArray(n,1,7);switch(r){case 56:return new Vc(n,"310","11");case 57:return new Vc(n,"320","11");case 58:return new Vc(n,"310","13");case 59:return new Vc(n,"320","13");case 60:return new Vc(n,"310","15");case 61:return new Vc(n,"320","15");case 62:return new Vc(n,"310","17");case 63:return new Vc(n,"320","17")}}catch(i){throw console.log(i),new b0("unknown decoder: "+n)}}var Ob=function(){function n(e,t,r,i){this.leftchar=e,this.rightchar=t,this.finderpattern=r,this.maybeLast=i}return n.prototype.mayBeLast=function(){return this.maybeLast},n.prototype.getLeftChar=function(){return this.leftchar},n.prototype.getRightChar=function(){return this.rightchar},n.prototype.getFinderPattern=function(){return this.finderpattern},n.prototype.mustBeLast=function(){return this.rightchar==null},n.prototype.toString=function(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"},n.equals=function(e,t){return e instanceof n?n.equalsOrNull(e.leftchar,t.leftchar)&&n.equalsOrNull(e.rightchar,t.rightchar)&&n.equalsOrNull(e.finderpattern,t.finderpattern):!1},n.equalsOrNull=function(e,t){return e===null?t===null:n.equals(e,t)},n.prototype.hashCode=function(){var e=this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue();return e},n}(),lB=function(){function n(e,t,r){this.pairs=e,this.rowNumber=t,this.wasReversed=r}return n.prototype.getPairs=function(){return this.pairs},n.prototype.getRowNumber=function(){return this.rowNumber},n.prototype.isReversed=function(){return this.wasReversed},n.prototype.isEquivalent=function(e){return this.checkEqualitity(this,e)},n.prototype.toString=function(){return"{ "+this.pairs+" }"},n.prototype.equals=function(e,t){return e instanceof n?this.checkEqualitity(e,t)&&e.wasReversed===t.wasReversed:!1},n.prototype.checkEqualitity=function(e,t){if(!(!e||!t)){var r;return e.forEach(function(i,a){t.forEach(function(o){i.getLeftChar().getValue()===o.getLeftChar().getValue()&&i.getRightChar().getValue()===o.getRightChar().getValue()&&i.getFinderPatter().getValue()===o.getFinderPatter().getValue()&&(r=!0)})}),r}},n}(),uB=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),zc=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},cB=function(n){uB(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.pairs=new Array(e.MAX_PAIRS),t.rows=new Array,t.startEnd=[2],t}return e.prototype.decodeRow=function(t,r,i){this.pairs.length=0,this.startFromEven=!1;try{return e.constructResult(this.decodeRow2pairs(t,r))}catch{}return this.pairs.length=0,this.startFromEven=!0,e.constructResult(this.decodeRow2pairs(t,r))},e.prototype.reset=function(){this.pairs.length=0,this.rows.length=0},e.prototype.decodeRow2pairs=function(t,r){for(var i=!1;!i;)try{this.pairs.push(this.retrieveNextPair(r,this.pairs,t))}catch(s){if(s instanceof ze){if(!this.pairs.length)throw new ze;i=!0}}if(this.checkChecksum())return this.pairs;var a;if(this.rows.length?a=!0:a=!1,this.storeRow(t,!1),a){var o=this.checkRowsBoolean(!1);if(o!=null||(o=this.checkRowsBoolean(!0),o!=null))return o}throw new ze},e.prototype.checkRowsBoolean=function(t){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,t&&(this.rows=this.rows.reverse());var r=null;try{r=this.checkRows(new Array,0)}catch(i){console.log(i)}return t&&(this.rows=this.rows.reverse()),r},e.prototype.checkRows=function(t,r){for(var i,a,o=r;o<this.rows.length;o++){var s=this.rows[o];this.pairs.length=0;try{for(var u=(i=void 0,zc(t)),f=u.next();!f.done;f=u.next()){var h=f.value;this.pairs.push(h.getPairs())}}catch(g){i={error:g}}finally{try{f&&!f.done&&(a=u.return)&&a.call(u)}finally{if(i)throw i.error}}if(this.pairs.push(s.getPairs()),!!e.isValidSequence(this.pairs)){if(this.checkChecksum())return this.pairs;var p=new Array(t);p.push(s);try{return this.checkRows(p,o+1)}catch(g){console.log(g)}}}throw new ze},e.isValidSequence=function(t){var r,i;try{for(var a=zc(e.FINDER_PATTERN_SEQUENCES),o=a.next();!o.done;o=a.next()){var s=o.value;if(!(t.length>s.length)){for(var u=!0,f=0;f<t.length;f++)if(t[f].getFinderPattern().getValue()!==s[f]){u=!1;break}if(u)return!0}}}catch(h){r={error:h}}finally{try{o&&!o.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}return!1},e.prototype.storeRow=function(t,r){for(var i=0,a=!1,o=!1;i<this.rows.length;){var s=this.rows[i];if(s.getRowNumber()>t){o=s.isEquivalent(this.pairs);break}a=s.isEquivalent(this.pairs),i++}o||a||e.isPartialRow(this.pairs,this.rows)||(this.rows.push(i,new lB(this.pairs,t,r)),this.removePartialRows(this.pairs,this.rows))},e.prototype.removePartialRows=function(t,r){var i,a,o,s,u,f;try{for(var h=zc(r),p=h.next();!p.done;p=h.next()){var g=p.value;if(g.getPairs().length!==t.length){var m=!0;try{for(var _=(o=void 0,zc(g.getPairs())),b=_.next();!b.done;b=_.next()){var T=b.value,S=!1;try{for(var D=(u=void 0,zc(t)),B=D.next();!B.done;B=D.next()){var V=B.value;if(Ob.equals(T,V)){S=!0;break}}}catch(Y){u={error:Y}}finally{try{B&&!B.done&&(f=D.return)&&f.call(D)}finally{if(u)throw u.error}}S||(m=!1)}}catch(Y){o={error:Y}}finally{try{b&&!b.done&&(s=_.return)&&s.call(_)}finally{if(o)throw o.error}}}}}catch(Y){i={error:Y}}finally{try{p&&!p.done&&(a=h.return)&&a.call(h)}finally{if(i)throw i.error}}},e.isPartialRow=function(t,r){var i,a,o,s,u,f;try{for(var h=zc(r),p=h.next();!p.done;p=h.next()){var g=p.value,m=!0;try{for(var _=(o=void 0,zc(t)),b=_.next();!b.done;b=_.next()){var T=b.value,S=!1;try{for(var D=(u=void 0,zc(g.getPairs())),B=D.next();!B.done;B=D.next()){var V=B.value;if(T.equals(V)){S=!0;break}}}catch(Y){u={error:Y}}finally{try{B&&!B.done&&(f=D.return)&&f.call(D)}finally{if(u)throw u.error}}if(!S){m=!1;break}}}catch(Y){o={error:Y}}finally{try{b&&!b.done&&(s=_.return)&&s.call(_)}finally{if(o)throw o.error}}if(m)return!0}}catch(Y){i={error:Y}}finally{try{p&&!p.done&&(a=h.return)&&a.call(h)}finally{if(i)throw i.error}}return!1},e.prototype.getRows=function(){return this.rows},e.constructResult=function(t){var r=UM.buildBitArray(t),i=sB(r),a=i.parseInformation(),o=t[0].getFinderPattern().getResultPoints(),s=t[t.length-1].getFinderPattern().getResultPoints(),u=[o[0],o[1],s[0],s[1]];return new Fa(a,null,null,u,Mt.RSS_EXPANDED,null)},e.prototype.checkChecksum=function(){var t=this.pairs.get(0),r=t.getLeftChar(),i=t.getRightChar();if(i===null)return!1;for(var a=i.getChecksumPortion(),o=2,s=1;s<this.pairs.size();++s){var u=this.pairs.get(s);a+=u.getLeftChar().getChecksumPortion(),o++;var f=u.getRightChar();f!=null&&(a+=f.getChecksumPortion(),o++)}a%=211;var h=211*(o-4)+a;return h===r.getValue()},e.getNextSecondBar=function(t,r){var i;return t.get(r)?(i=t.getNextUnset(r),i=t.getNextSet(i)):(i=t.getNextSet(r),i=t.getNextUnset(i)),i},e.prototype.retrieveNextPair=function(t,r,i){var a=r.length%2===0;this.startFromEven&&(a=!a);var o,s=!0,u=-1;do this.findNextPair(t,r,u),o=this.parseFoundFinderPattern(t,i,a),o===null?u=e.getNextSecondBar(t,this.startEnd[0]):s=!1;while(s);var f=this.decodeDataCharacter(t,o,a,!0);if(!this.isEmptyPair(r)&&r[r.length-1].mustBeLast())throw new ze;var h;try{h=this.decodeDataCharacter(t,o,a,!1)}catch(p){h=null,console.log(p)}return new Ob(f,h,o,!0)},e.prototype.isEmptyPair=function(t){return t.length===0},e.prototype.findNextPair=function(t,r,i){var a=this.getDecodeFinderCounters();a[0]=0,a[1]=0,a[2]=0,a[3]=0;var o=t.getSize(),s;if(i>=0)s=i;else if(this.isEmptyPair(r))s=0;else{var u=r[r.length-1];s=u.getFinderPattern().getStartEnd()[1]}var f=r.length%2!==0;this.startFromEven&&(f=!f);for(var h=!1;s<o&&(h=!t.get(s),!!h);)s++;for(var p=0,g=s,m=s;m<o;m++)if(t.get(m)!==h)a[p]++;else{if(p===3){if(f&&e.reverseCounters(a),e.isFinderPattern(a)){this.startEnd[0]=g,this.startEnd[1]=m;return}f&&e.reverseCounters(a),g+=a[0]+a[1],a[0]=a[2],a[1]=a[3],a[2]=0,a[3]=0,p--}else p++;a[p]=1,h=!h}throw new ze},e.reverseCounters=function(t){for(var r=t.length,i=0;i<r/2;++i){var a=t[i];t[i]=t[r-i-1],t[r-i-1]=a}},e.prototype.parseFoundFinderPattern=function(t,r,i){var a,o,s;if(i){for(var u=this.startEnd[0]-1;u>=0&&!t.get(u);)u--;u++,a=this.startEnd[0]-u,o=u,s=this.startEnd[1]}else o=this.startEnd[0],s=t.getNextUnset(this.startEnd[1]+1),a=s-this.startEnd[1];var f=this.getDecodeFinderCounters();_r.arraycopy(f,0,f,1,f.length-1),f[0]=a;var h;try{h=this.parseFinderValue(f,e.FINDER_PATTERNS)}catch{return null}return new cS(h,[o,s],o,s,r)},e.prototype.decodeDataCharacter=function(t,r,i,a){for(var o=this.getDataCharacterCounters(),s=0;s<o.length;s++)o[s]=0;if(a)e.recordPatternInReverse(t,r.getStartEnd()[0],o);else{e.recordPattern(t,r.getStartEnd()[1],o);for(var u=0,f=o.length-1;u<f;u++,f--){var h=o[u];o[u]=o[f],o[f]=h}}var p=17,g=qn.sum(new Int32Array(o))/p,m=(r.getStartEnd()[1]-r.getStartEnd()[0])/15;if(Math.abs(g-m)/m>.3)throw new ze;for(var _=this.getOddCounts(),b=this.getEvenCounts(),T=this.getOddRoundingErrors(),S=this.getEvenRoundingErrors(),u=0;u<o.length;u++){var D=1*o[u]/g,B=D+.5;if(B<1){if(D<.3)throw new ze;B=1}else if(B>8){if(D>8.7)throw new ze;B=8}var V=u/2;(u&1)===0?(_[V]=B,T[V]=D-B):(b[V]=B,S[V]=D-B)}this.adjustOddEvenCounts(p);for(var Y=4*r.getValue()+(i?0:2)+(a?0:1)-1,q=0,P=0,u=_.length-1;u>=0;u--){if(e.isNotA1left(r,i,a)){var E=e.WEIGHTS[Y][2*u];P+=_[u]*E}q+=_[u]}for(var C=0,u=b.length-1;u>=0;u--)if(e.isNotA1left(r,i,a)){var E=e.WEIGHTS[Y][2*u+1];C+=b[u]*E}var M=P+C;if((q&1)!==0||q>13||q<4)throw new ze;var R=(13-q)/2,L=e.SYMBOL_WIDEST[R],j=9-L,$=td.getRSSvalue(_,L,!0),ne=td.getRSSvalue(b,j,!1),U=e.EVEN_TOTAL_SUBSET[R],z=e.GSUM[R],te=$*U+ne+z;return new Dg(te,M)},e.isNotA1left=function(t,r,i){return!(t.getValue()===0&&r&&i)},e.prototype.adjustOddEvenCounts=function(t){var r=qn.sum(new Int32Array(this.getOddCounts())),i=qn.sum(new Int32Array(this.getEvenCounts())),a=!1,o=!1;r>13?o=!0:r<4&&(a=!0);var s=!1,u=!1;i>13?u=!0:i<4&&(s=!0);var f=r+i-t,h=(r&1)===1,p=(i&1)===0;if(f===1)if(h){if(p)throw new ze;o=!0}else{if(!p)throw new ze;u=!0}else if(f===-1)if(h){if(p)throw new ze;a=!0}else{if(!p)throw new ze;s=!0}else if(f===0){if(h){if(!p)throw new ze;r<i?(a=!0,u=!0):(o=!0,s=!0)}else if(p)throw new ze}else throw new ze;if(a){if(o)throw new ze;e.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(o&&e.decrement(this.getOddCounts(),this.getOddRoundingErrors()),s){if(u)throw new ze;e.increment(this.getEvenCounts(),this.getOddRoundingErrors())}u&&e.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},e.SYMBOL_WIDEST=[7,5,4,3,1],e.EVEN_TOTAL_SUBSET=[4,20,52,104,204],e.GSUM=[0,348,1388,2948,3988],e.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],e.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],e.FINDER_PAT_A=0,e.FINDER_PAT_B=1,e.FINDER_PAT_C=2,e.FINDER_PAT_D=3,e.FINDER_PAT_E=4,e.FINDER_PAT_F=5,e.FINDER_PATTERN_SEQUENCES=[[e.FINDER_PAT_A,e.FINDER_PAT_A],[e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B],[e.FINDER_PAT_A,e.FINDER_PAT_C,e.FINDER_PAT_B,e.FINDER_PAT_D],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_C],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_D,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_D],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_E],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F]],e.MAX_PAIRS=11,e}(qf),fB=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),hB=function(n){fB(e,n);function e(t,r,i){var a=n.call(this,t,r)||this;return a.count=0,a.finderPattern=i,a}return e.prototype.getFinderPattern=function(){return this.finderPattern},e.prototype.getCount=function(){return this.count},e.prototype.incrementCount=function(){this.count++},e}(Dg),dB=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),dv=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Db=function(n){dB(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.possibleLeftPairs=[],t.possibleRightPairs=[],t}return e.prototype.decodeRow=function(t,r,i){var a,o,s,u,f=this.decodePair(r,!1,t,i);e.addOrTally(this.possibleLeftPairs,f),r.reverse();var h=this.decodePair(r,!0,t,i);e.addOrTally(this.possibleRightPairs,h),r.reverse();try{for(var p=dv(this.possibleLeftPairs),g=p.next();!g.done;g=p.next()){var m=g.value;if(m.getCount()>1)try{for(var _=(s=void 0,dv(this.possibleRightPairs)),b=_.next();!b.done;b=_.next()){var T=b.value;if(T.getCount()>1&&e.checkChecksum(m,T))return e.constructResult(m,T)}}catch(S){s={error:S}}finally{try{b&&!b.done&&(u=_.return)&&u.call(_)}finally{if(s)throw s.error}}}}catch(S){a={error:S}}finally{try{g&&!g.done&&(o=p.return)&&o.call(p)}finally{if(a)throw a.error}}throw new ze},e.addOrTally=function(t,r){var i,a;if(r!=null){var o=!1;try{for(var s=dv(t),u=s.next();!u.done;u=s.next()){var f=u.value;if(f.getValue()===r.getValue()){f.incrementCount(),o=!0;break}}}catch(h){i={error:h}}finally{try{u&&!u.done&&(a=s.return)&&a.call(s)}finally{if(i)throw i.error}}o||t.push(r)}},e.prototype.reset=function(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0},e.constructResult=function(t,r){for(var i=4537077*t.getValue()+r.getValue(),a=new String(i).toString(),o=new cn,s=13-a.length;s>0;s--)o.append("0");o.append(a);for(var u=0,s=0;s<13;s++){var f=o.charAt(s).charCodeAt(0)-48;u+=(s&1)===0?3*f:f}u=10-u%10,u===10&&(u=0),o.append(u.toString());var h=t.getFinderPattern().getResultPoints(),p=r.getFinderPattern().getResultPoints();return new Fa(o.toString(),null,0,[h[0],h[1],p[0],p[1]],Mt.RSS_14,new Date().getTime())},e.checkChecksum=function(t,r){var i=(t.getChecksumPortion()+16*r.getChecksumPortion())%79,a=9*t.getFinderPattern().getValue()+r.getFinderPattern().getValue();return a>72&&a--,a>8&&a--,i===a},e.prototype.decodePair=function(t,r,i,a){try{var o=this.findFinderPattern(t,r),s=this.parseFoundFinderPattern(t,i,r,o),u=a==null?null:a.get(Pr.NEED_RESULT_POINT_CALLBACK);if(u!=null){var f=(o[0]+o[1])/2;r&&(f=t.getSize()-1-f),u.foundPossibleResultPoint(new It(f,i))}var h=this.decodeDataCharacter(t,s,!0),p=this.decodeDataCharacter(t,s,!1);return new hB(1597*h.getValue()+p.getValue(),h.getChecksumPortion()+4*p.getChecksumPortion(),s)}catch{return null}},e.prototype.decodeDataCharacter=function(t,r,i){for(var a=this.getDataCharacterCounters(),o=0;o<a.length;o++)a[o]=0;if(i)ki.recordPatternInReverse(t,r.getStartEnd()[0],a);else{ki.recordPattern(t,r.getStartEnd()[1]+1,a);for(var s=0,u=a.length-1;s<u;s++,u--){var f=a[s];a[s]=a[u],a[u]=f}}for(var h=i?16:15,p=qn.sum(new Int32Array(a))/h,g=this.getOddCounts(),m=this.getEvenCounts(),_=this.getOddRoundingErrors(),b=this.getEvenRoundingErrors(),s=0;s<a.length;s++){var T=a[s]/p,S=Math.floor(T+.5);S<1?S=1:S>8&&(S=8);var D=Math.floor(s/2);(s&1)===0?(g[D]=S,_[D]=T-S):(m[D]=S,b[D]=T-S)}this.adjustOddEvenCounts(i,h);for(var B=0,V=0,s=g.length-1;s>=0;s--)V*=9,V+=g[s],B+=g[s];for(var Y=0,q=0,s=m.length-1;s>=0;s--)Y*=9,Y+=m[s],q+=m[s];var P=V+3*Y;if(i){if((B&1)!==0||B>12||B<4)throw new ze;var E=(12-B)/2,C=e.OUTSIDE_ODD_WIDEST[E],M=9-C,R=td.getRSSvalue(g,C,!1),L=td.getRSSvalue(m,M,!0),j=e.OUTSIDE_EVEN_TOTAL_SUBSET[E],$=e.OUTSIDE_GSUM[E];return new Dg(R*j+L+$,P)}else{if((q&1)!==0||q>10||q<4)throw new ze;var E=(10-q)/2,C=e.INSIDE_ODD_WIDEST[E],M=9-C,R=td.getRSSvalue(g,C,!0),L=td.getRSSvalue(m,M,!1),ne=e.INSIDE_ODD_TOTAL_SUBSET[E],$=e.INSIDE_GSUM[E];return new Dg(L*ne+R+$,P)}},e.prototype.findFinderPattern=function(t,r){var i=this.getDecodeFinderCounters();i[0]=0,i[1]=0,i[2]=0,i[3]=0;for(var a=t.getSize(),o=!1,s=0;s<a&&(o=!t.get(s),r!==o);)s++;for(var u=0,f=s,h=s;h<a;h++)if(t.get(h)!==o)i[u]++;else{if(u===3){if(qf.isFinderPattern(i))return[f,h];f+=i[0]+i[1],i[0]=i[2],i[1]=i[3],i[2]=0,i[3]=0,u--}else u++;i[u]=1,o=!o}throw new ze},e.prototype.parseFoundFinderPattern=function(t,r,i,a){for(var o=t.get(a[0]),s=a[0]-1;s>=0&&o!==t.get(s);)s--;s++;var u=a[0]-s,f=this.getDecodeFinderCounters(),h=new Int32Array(f.length);_r.arraycopy(f,0,h,1,f.length-1),h[0]=u;var p=this.parseFinderValue(h,e.FINDER_PATTERNS),g=s,m=a[1];return i&&(g=t.getSize()-1-g,m=t.getSize()-1-m),new cS(p,[s,a[1]],g,m,r)},e.prototype.adjustOddEvenCounts=function(t,r){var i=qn.sum(new Int32Array(this.getOddCounts())),a=qn.sum(new Int32Array(this.getEvenCounts())),o=!1,s=!1,u=!1,f=!1;t?(i>12?s=!0:i<4&&(o=!0),a>12?f=!0:a<4&&(u=!0)):(i>11?s=!0:i<5&&(o=!0),a>10?f=!0:a<4&&(u=!0));var h=i+a-r,p=(i&1)===(t?1:0),g=(a&1)===1;if(h===1)if(p){if(g)throw new ze;s=!0}else{if(!g)throw new ze;f=!0}else if(h===-1)if(p){if(g)throw new ze;o=!0}else{if(!g)throw new ze;u=!0}else if(h===0){if(p){if(!g)throw new ze;i<a?(o=!0,f=!0):(s=!0,u=!0)}else if(g)throw new ze}else throw new ze;if(o){if(s)throw new ze;qf.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(s&&qf.decrement(this.getOddCounts(),this.getOddRoundingErrors()),u){if(f)throw new ze;qf.increment(this.getEvenCounts(),this.getOddRoundingErrors())}f&&qf.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},e.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],e.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],e.OUTSIDE_GSUM=[0,161,961,2015,2715],e.INSIDE_GSUM=[0,336,1036,1516],e.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],e.INSIDE_ODD_WIDEST=[2,4,6,8],e.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])],e}(qf),pB=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),L1=function(n){pB(e,n);function e(t){var r=n.call(this)||this;r.readers=[];var i=t?t.get(Pr.POSSIBLE_FORMATS):null,a=t&&t.get(Pr.ASSUME_CODE_39_CHECK_DIGIT)!==void 0,o=t&&t.get(Pr.ENABLE_CODE_39_EXTENDED_MODE)!==void 0;return i&&((i.includes(Mt.EAN_13)||i.includes(Mt.UPC_A)||i.includes(Mt.EAN_8)||i.includes(Mt.UPC_E))&&r.readers.push(new hv(t)),i.includes(Mt.CODE_39)&&r.readers.push(new bb(a,o)),i.includes(Mt.CODE_93)&&r.readers.push(new Ab),i.includes(Mt.CODE_128)&&r.readers.push(new wb),i.includes(Mt.ITF)&&r.readers.push(new Eb),i.includes(Mt.CODABAR)&&r.readers.push(new MM),i.includes(Mt.RSS_14)&&r.readers.push(new Db),i.includes(Mt.RSS_EXPANDED)&&(console.warn("RSS Expanded reader IS NOT ready for production yet! use at your own risk."),r.readers.push(new cB))),r.readers.length===0&&(r.readers.push(new hv(t)),r.readers.push(new bb),r.readers.push(new Ab),r.readers.push(new hv(t)),r.readers.push(new wb),r.readers.push(new Eb),r.readers.push(new Db)),r}return e.prototype.decodeRow=function(t,r,i){for(var a=0;a<this.readers.length;a++)try{return this.readers[a].decodeRow(t,r,i)}catch{}throw new ze},e.prototype.reset=function(){this.readers.forEach(function(t){return t.reset()})},e}(ki),gB=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();(function(n){gB(e,n);function e(t,r){return t===void 0&&(t=500),n.call(this,new L1(r),t,r)||this}return e})(Od);var Pb=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Qn=function(){function n(e,t,r){this.ecCodewords=e,this.ecBlocks=[t],r&&this.ecBlocks.push(r)}return n.prototype.getECCodewords=function(){return this.ecCodewords},n.prototype.getECBlocks=function(){return this.ecBlocks},n}(),Wn=function(){function n(e,t){this.count=e,this.dataCodewords=t}return n.prototype.getCount=function(){return this.count},n.prototype.getDataCodewords=function(){return this.dataCodewords},n}(),mB=function(){function n(e,t,r,i,a,o){var s,u;this.versionNumber=e,this.symbolSizeRows=t,this.symbolSizeColumns=r,this.dataRegionSizeRows=i,this.dataRegionSizeColumns=a,this.ecBlocks=o;var f=0,h=o.getECCodewords(),p=o.getECBlocks();try{for(var g=Pb(p),m=g.next();!m.done;m=g.next()){var _=m.value;f+=_.getCount()*(_.getDataCodewords()+h)}}catch(b){s={error:b}}finally{try{m&&!m.done&&(u=g.return)&&u.call(g)}finally{if(s)throw s.error}}this.totalCodewords=f}return n.prototype.getVersionNumber=function(){return this.versionNumber},n.prototype.getSymbolSizeRows=function(){return this.symbolSizeRows},n.prototype.getSymbolSizeColumns=function(){return this.symbolSizeColumns},n.prototype.getDataRegionSizeRows=function(){return this.dataRegionSizeRows},n.prototype.getDataRegionSizeColumns=function(){return this.dataRegionSizeColumns},n.prototype.getTotalCodewords=function(){return this.totalCodewords},n.prototype.getECBlocks=function(){return this.ecBlocks},n.getVersionForDimensions=function(e,t){var r,i;if((e&1)!==0||(t&1)!==0)throw new pt;try{for(var a=Pb(n.VERSIONS),o=a.next();!o.done;o=a.next()){var s=o.value;if(s.symbolSizeRows===e&&s.symbolSizeColumns===t)return s}}catch(u){r={error:u}}finally{try{o&&!o.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}throw new pt},n.prototype.toString=function(){return""+this.versionNumber},n.buildVersions=function(){return[new n(1,10,10,8,8,new Qn(5,new Wn(1,3))),new n(2,12,12,10,10,new Qn(7,new Wn(1,5))),new n(3,14,14,12,12,new Qn(10,new Wn(1,8))),new n(4,16,16,14,14,new Qn(12,new Wn(1,12))),new n(5,18,18,16,16,new Qn(14,new Wn(1,18))),new n(6,20,20,18,18,new Qn(18,new Wn(1,22))),new n(7,22,22,20,20,new Qn(20,new Wn(1,30))),new n(8,24,24,22,22,new Qn(24,new Wn(1,36))),new n(9,26,26,24,24,new Qn(28,new Wn(1,44))),new n(10,32,32,14,14,new Qn(36,new Wn(1,62))),new n(11,36,36,16,16,new Qn(42,new Wn(1,86))),new n(12,40,40,18,18,new Qn(48,new Wn(1,114))),new n(13,44,44,20,20,new Qn(56,new Wn(1,144))),new n(14,48,48,22,22,new Qn(68,new Wn(1,174))),new n(15,52,52,24,24,new Qn(42,new Wn(2,102))),new n(16,64,64,14,14,new Qn(56,new Wn(2,140))),new n(17,72,72,16,16,new Qn(36,new Wn(4,92))),new n(18,80,80,18,18,new Qn(48,new Wn(4,114))),new n(19,88,88,20,20,new Qn(56,new Wn(4,144))),new n(20,96,96,22,22,new Qn(68,new Wn(4,174))),new n(21,104,104,24,24,new Qn(56,new Wn(6,136))),new n(22,120,120,18,18,new Qn(68,new Wn(6,175))),new n(23,132,132,20,20,new Qn(62,new Wn(8,163))),new n(24,144,144,22,22,new Qn(62,new Wn(8,156),new Wn(2,155))),new n(25,8,18,6,16,new Qn(7,new Wn(1,5))),new n(26,8,32,6,14,new Qn(11,new Wn(1,10))),new n(27,12,26,10,24,new Qn(14,new Wn(1,16))),new n(28,12,36,10,16,new Qn(18,new Wn(1,22))),new n(29,16,36,14,16,new Qn(24,new Wn(1,32))),new n(30,16,48,14,22,new Qn(28,new Wn(1,49)))]},n.VERSIONS=n.buildVersions(),n}(),vB=function(){function n(e){var t=e.getHeight();if(t<8||t>144||(t&1)!==0)throw new pt;this.version=n.readVersion(e),this.mappingBitMatrix=this.extractDataRegion(e),this.readMappingMatrix=new ru(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}return n.prototype.getVersion=function(){return this.version},n.readVersion=function(e){var t=e.getHeight(),r=e.getWidth();return mB.getVersionForDimensions(t,r)},n.prototype.readCodewords=function(){var e=new Int8Array(this.version.getTotalCodewords()),t=0,r=4,i=0,a=this.mappingBitMatrix.getHeight(),o=this.mappingBitMatrix.getWidth(),s=!1,u=!1,f=!1,h=!1;do if(r===a&&i===0&&!s)e[t++]=this.readCorner1(a,o)&255,r-=2,i+=2,s=!0;else if(r===a-2&&i===0&&(o&3)!==0&&!u)e[t++]=this.readCorner2(a,o)&255,r-=2,i+=2,u=!0;else if(r===a+4&&i===2&&(o&7)===0&&!f)e[t++]=this.readCorner3(a,o)&255,r-=2,i+=2,f=!0;else if(r===a-2&&i===0&&(o&7)===4&&!h)e[t++]=this.readCorner4(a,o)&255,r-=2,i+=2,h=!0;else{do r<a&&i>=0&&!this.readMappingMatrix.get(i,r)&&(e[t++]=this.readUtah(r,i,a,o)&255),r-=2,i+=2;while(r>=0&&i<o);r+=1,i+=3;do r>=0&&i<o&&!this.readMappingMatrix.get(i,r)&&(e[t++]=this.readUtah(r,i,a,o)&255),r+=2,i-=2;while(r<a&&i>=0);r+=3,i+=1}while(r<a||i<o);if(t!==this.version.getTotalCodewords())throw new pt;return e},n.prototype.readModule=function(e,t,r,i){return e<0&&(e+=r,t+=4-(r+4&7)),t<0&&(t+=i,e+=4-(i+4&7)),this.readMappingMatrix.set(t,e),this.mappingBitMatrix.get(t,e)},n.prototype.readUtah=function(e,t,r,i){var a=0;return this.readModule(e-2,t-2,r,i)&&(a|=1),a<<=1,this.readModule(e-2,t-1,r,i)&&(a|=1),a<<=1,this.readModule(e-1,t-2,r,i)&&(a|=1),a<<=1,this.readModule(e-1,t-1,r,i)&&(a|=1),a<<=1,this.readModule(e-1,t,r,i)&&(a|=1),a<<=1,this.readModule(e,t-2,r,i)&&(a|=1),a<<=1,this.readModule(e,t-1,r,i)&&(a|=1),a<<=1,this.readModule(e,t,r,i)&&(a|=1),a},n.prototype.readCorner1=function(e,t){var r=0;return this.readModule(e-1,0,e,t)&&(r|=1),r<<=1,this.readModule(e-1,1,e,t)&&(r|=1),r<<=1,this.readModule(e-1,2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-1,e,t)&&(r|=1),r<<=1,this.readModule(1,t-1,e,t)&&(r|=1),r<<=1,this.readModule(2,t-1,e,t)&&(r|=1),r<<=1,this.readModule(3,t-1,e,t)&&(r|=1),r},n.prototype.readCorner2=function(e,t){var r=0;return this.readModule(e-3,0,e,t)&&(r|=1),r<<=1,this.readModule(e-2,0,e,t)&&(r|=1),r<<=1,this.readModule(e-1,0,e,t)&&(r|=1),r<<=1,this.readModule(0,t-4,e,t)&&(r|=1),r<<=1,this.readModule(0,t-3,e,t)&&(r|=1),r<<=1,this.readModule(0,t-2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-1,e,t)&&(r|=1),r<<=1,this.readModule(1,t-1,e,t)&&(r|=1),r},n.prototype.readCorner3=function(e,t){var r=0;return this.readModule(e-1,0,e,t)&&(r|=1),r<<=1,this.readModule(e-1,t-1,e,t)&&(r|=1),r<<=1,this.readModule(0,t-3,e,t)&&(r|=1),r<<=1,this.readModule(0,t-2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-1,e,t)&&(r|=1),r<<=1,this.readModule(1,t-3,e,t)&&(r|=1),r<<=1,this.readModule(1,t-2,e,t)&&(r|=1),r<<=1,this.readModule(1,t-1,e,t)&&(r|=1),r},n.prototype.readCorner4=function(e,t){var r=0;return this.readModule(e-3,0,e,t)&&(r|=1),r<<=1,this.readModule(e-2,0,e,t)&&(r|=1),r<<=1,this.readModule(e-1,0,e,t)&&(r|=1),r<<=1,this.readModule(0,t-2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-1,e,t)&&(r|=1),r<<=1,this.readModule(1,t-1,e,t)&&(r|=1),r<<=1,this.readModule(2,t-1,e,t)&&(r|=1),r<<=1,this.readModule(3,t-1,e,t)&&(r|=1),r},n.prototype.extractDataRegion=function(e){var t=this.version.getSymbolSizeRows(),r=this.version.getSymbolSizeColumns();if(e.getHeight()!==t)throw new Bt("Dimension of bitMatrix must match the version size");for(var i=this.version.getDataRegionSizeRows(),a=this.version.getDataRegionSizeColumns(),o=t/i|0,s=r/a|0,u=o*i,f=s*a,h=new ru(f,u),p=0;p<o;++p)for(var g=p*i,m=0;m<s;++m)for(var _=m*a,b=0;b<i;++b)for(var T=p*(i+2)+1+b,S=g+b,D=0;D<a;++D){var B=m*(a+2)+1+D;if(e.get(B,T)){var V=_+D;h.set(V,S)}}return h},n}(),Lb=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},yB=function(){function n(e,t){this.numDataCodewords=e,this.codewords=t}return n.getDataBlocks=function(e,t){var r,i,a,o,s=t.getECBlocks(),u=0,f=s.getECBlocks();try{for(var h=Lb(f),p=h.next();!p.done;p=h.next()){var g=p.value;u+=g.getCount()}}catch($){r={error:$}}finally{try{p&&!p.done&&(i=h.return)&&i.call(h)}finally{if(r)throw r.error}}var m=new Array(u),_=0;try{for(var b=Lb(f),T=b.next();!T.done;T=b.next())for(var g=T.value,S=0;S<g.getCount();S++){var D=g.getDataCodewords(),B=s.getECCodewords()+D;m[_++]=new n(D,new Uint8Array(B))}}catch($){a={error:$}}finally{try{T&&!T.done&&(o=b.return)&&o.call(b)}finally{if(a)throw a.error}}for(var V=m[0].codewords.length,Y=V-s.getECCodewords(),q=Y-1,P=0,S=0;S<q;S++)for(var E=0;E<_;E++)m[E].codewords[S]=e[P++];for(var C=t.getVersionNumber()===24,M=C?8:_,E=0;E<M;E++)m[E].codewords[Y-1]=e[P++];for(var R=m[0].codewords.length,S=Y;S<R;S++)for(var E=0;E<_;E++){var L=C?(E+8)%_:E,j=C&&L>7?S-1:S;m[L].codewords[j]=e[P++]}if(P!==e.length)throw new Bt;return m},n.prototype.getNumDataCodewords=function(){return this.numDataCodewords},n.prototype.getCodewords=function(){return this.codewords},n}(),dS=function(){function n(e){this.bytes=e,this.byteOffset=0,this.bitOffset=0}return n.prototype.getBitOffset=function(){return this.bitOffset},n.prototype.getByteOffset=function(){return this.byteOffset},n.prototype.readBits=function(e){if(e<1||e>32||e>this.available())throw new Bt(""+e);var t=0,r=this.bitOffset,i=this.byteOffset,a=this.bytes;if(r>0){var o=8-r,s=e<o?e:o,u=o-s,f=255>>8-s<<u;t=(a[i]&f)>>u,e-=s,r+=s,r===8&&(r=0,i++)}if(e>0){for(;e>=8;)t=t<<8|a[i]&255,i++,e-=8;if(e>0){var u=8-e,f=255>>u<<u;t=t<<e|(a[i]&f)>>u,r+=e}}return this.bitOffset=r,this.byteOffset=i,t},n.prototype.available=function(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset},n}(),Ni;(function(n){n[n.PAD_ENCODE=0]="PAD_ENCODE",n[n.ASCII_ENCODE=1]="ASCII_ENCODE",n[n.C40_ENCODE=2]="C40_ENCODE",n[n.TEXT_ENCODE=3]="TEXT_ENCODE",n[n.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",n[n.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",n[n.BASE256_ENCODE=6]="BASE256_ENCODE"})(Ni||(Ni={}));var xB=function(){function n(){}return n.decode=function(e){var t=new dS(e),r=new cn,i=new cn,a=new Array,o=Ni.ASCII_ENCODE;do if(o===Ni.ASCII_ENCODE)o=this.decodeAsciiSegment(t,r,i);else{switch(o){case Ni.C40_ENCODE:this.decodeC40Segment(t,r);break;case Ni.TEXT_ENCODE:this.decodeTextSegment(t,r);break;case Ni.ANSIX12_ENCODE:this.decodeAnsiX12Segment(t,r);break;case Ni.EDIFACT_ENCODE:this.decodeEdifactSegment(t,r);break;case Ni.BASE256_ENCODE:this.decodeBase256Segment(t,r,a);break;default:throw new pt}o=Ni.ASCII_ENCODE}while(o!==Ni.PAD_ENCODE&&t.available()>0);return i.length()>0&&r.append(i.toString()),new S2(e,r.toString(),a.length===0?null:a,null)},n.decodeAsciiSegment=function(e,t,r){var i=!1;do{var a=e.readBits(8);if(a===0)throw new pt;if(a<=128)return i&&(a+=128),t.append(String.fromCharCode(a-1)),Ni.ASCII_ENCODE;if(a===129)return Ni.PAD_ENCODE;if(a<=229){var o=a-130;o<10&&t.append("0"),t.append(""+o)}else switch(a){case 230:return Ni.C40_ENCODE;case 231:return Ni.BASE256_ENCODE;case 232:t.append("");break;case 233:case 234:break;case 235:i=!0;break;case 236:t.append("[)>05"),r.insert(0,"");break;case 237:t.append("[)>06"),r.insert(0,"");break;case 238:return Ni.ANSIX12_ENCODE;case 239:return Ni.TEXT_ENCODE;case 240:return Ni.EDIFACT_ENCODE;case 241:break;default:if(a!==254||e.available()!==0)throw new pt;break}}while(e.available()>0);return Ni.ASCII_ENCODE},n.decodeC40Segment=function(e,t){var r=!1,i=[],a=0;do{if(e.available()===8)return;var o=e.readBits(8);if(o===254)return;this.parseTwoBytes(o,e.readBits(8),i);for(var s=0;s<3;s++){var u=i[s];switch(a){case 0:if(u<3)a=u+1;else if(u<this.C40_BASIC_SET_CHARS.length){var f=this.C40_BASIC_SET_CHARS[u];r?(t.append(String.fromCharCode(f.charCodeAt(0)+128)),r=!1):t.append(f)}else throw new pt;break;case 1:r?(t.append(String.fromCharCode(u+128)),r=!1):t.append(String.fromCharCode(u)),a=0;break;case 2:if(u<this.C40_SHIFT2_SET_CHARS.length){var f=this.C40_SHIFT2_SET_CHARS[u];r?(t.append(String.fromCharCode(f.charCodeAt(0)+128)),r=!1):t.append(f)}else switch(u){case 27:t.append("");break;case 30:r=!0;break;default:throw new pt}a=0;break;case 3:r?(t.append(String.fromCharCode(u+224)),r=!1):t.append(String.fromCharCode(u+96)),a=0;break;default:throw new pt}}}while(e.available()>0)},n.decodeTextSegment=function(e,t){var r=!1,i=[],a=0;do{if(e.available()===8)return;var o=e.readBits(8);if(o===254)return;this.parseTwoBytes(o,e.readBits(8),i);for(var s=0;s<3;s++){var u=i[s];switch(a){case 0:if(u<3)a=u+1;else if(u<this.TEXT_BASIC_SET_CHARS.length){var f=this.TEXT_BASIC_SET_CHARS[u];r?(t.append(String.fromCharCode(f.charCodeAt(0)+128)),r=!1):t.append(f)}else throw new pt;break;case 1:r?(t.append(String.fromCharCode(u+128)),r=!1):t.append(String.fromCharCode(u)),a=0;break;case 2:if(u<this.TEXT_SHIFT2_SET_CHARS.length){var f=this.TEXT_SHIFT2_SET_CHARS[u];r?(t.append(String.fromCharCode(f.charCodeAt(0)+128)),r=!1):t.append(f)}else switch(u){case 27:t.append("");break;case 30:r=!0;break;default:throw new pt}a=0;break;case 3:if(u<this.TEXT_SHIFT3_SET_CHARS.length){var f=this.TEXT_SHIFT3_SET_CHARS[u];r?(t.append(String.fromCharCode(f.charCodeAt(0)+128)),r=!1):t.append(f),a=0}else throw new pt;break;default:throw new pt}}}while(e.available()>0)},n.decodeAnsiX12Segment=function(e,t){var r=[];do{if(e.available()===8)return;var i=e.readBits(8);if(i===254)return;this.parseTwoBytes(i,e.readBits(8),r);for(var a=0;a<3;a++){var o=r[a];switch(o){case 0:t.append("\r");break;case 1:t.append("*");break;case 2:t.append(">");break;case 3:t.append(" ");break;default:if(o<14)t.append(String.fromCharCode(o+44));else if(o<40)t.append(String.fromCharCode(o+51));else throw new pt;break}}}while(e.available()>0)},n.parseTwoBytes=function(e,t,r){var i=(e<<8)+t-1,a=Math.floor(i/1600);r[0]=a,i-=a*1600,a=Math.floor(i/40),r[1]=a,r[2]=i-a*40},n.decodeEdifactSegment=function(e,t){do{if(e.available()<=16)return;for(var r=0;r<4;r++){var i=e.readBits(6);if(i===31){var a=8-e.getBitOffset();a!==8&&e.readBits(a);return}(i&32)===0&&(i|=64),t.append(String.fromCharCode(i))}}while(e.available()>0)},n.decodeBase256Segment=function(e,t,r){var i=1+e.getByteOffset(),a=this.unrandomize255State(e.readBits(8),i++),o;if(a===0?o=e.available()/8|0:a<250?o=a:o=250*(a-249)+this.unrandomize255State(e.readBits(8),i++),o<0)throw new pt;for(var s=new Uint8Array(o),u=0;u<o;u++){if(e.available()<8)throw new pt;s[u]=this.unrandomize255State(e.readBits(8),i++)}r.push(s);try{t.append(ws.decode(s,On.ISO88591))}catch(f){throw new b0("Platform does not support required encoding: "+f.message)}},n.unrandomize255State=function(e,t){var r=149*t%255+1,i=e-r;return i>=0?i:i+256},n.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],n.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],n.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],n.TEXT_SHIFT2_SET_CHARS=n.C40_SHIFT2_SET_CHARS,n.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""],n}(),_B=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},wB=function(){function n(){this.rsDecoder=new C2(yo.DATA_MATRIX_FIELD_256)}return n.prototype.decode=function(e){var t,r,i=new vB(e),a=i.getVersion(),o=i.readCodewords(),s=yB.getDataBlocks(o,a),u=0;try{for(var f=_B(s),h=f.next();!h.done;h=f.next()){var p=h.value;u+=p.getNumDataCodewords()}}catch(B){t={error:B}}finally{try{h&&!h.done&&(r=f.return)&&r.call(f)}finally{if(t)throw t.error}}for(var g=new Uint8Array(u),m=s.length,_=0;_<m;_++){var b=s[_],T=b.getCodewords(),S=b.getNumDataCodewords();this.correctErrors(T,S);for(var D=0;D<S;D++)g[D*m+_]=T[D]}return xB.decode(g)},n.prototype.correctErrors=function(e,t){var r=new Int32Array(e);try{this.rsDecoder.decode(r,e.length-t)}catch{throw new Ki}for(var i=0;i<t;i++)e[i]=r[i]},n}(),bB=function(){function n(e){this.image=e,this.rectangleDetector=new my(this.image)}return n.prototype.detect=function(){var e=this.rectangleDetector.detect(),t=this.detectSolid1(e);if(t=this.detectSolid2(t),t[3]=this.correctTopRight(t),!t[3])throw new ze;t=this.shiftToModuleCenter(t);var r=t[0],i=t[1],a=t[2],o=t[3],s=this.transitionsBetween(r,o)+1,u=this.transitionsBetween(a,o)+1;(s&1)===1&&(s+=1),(u&1)===1&&(u+=1),4*s<7*u&&4*u<7*s&&(s=u=Math.max(s,u));var f=n.sampleGrid(this.image,r,i,a,o,s,u);return new rx(f,[r,i,a,o])},n.shiftPoint=function(e,t,r){var i=(t.getX()-e.getX())/(r+1),a=(t.getY()-e.getY())/(r+1);return new It(e.getX()+i,e.getY()+a)},n.moveAway=function(e,t,r){var i=e.getX(),a=e.getY();return i<t?i-=1:i+=1,a<r?a-=1:a+=1,new It(i,a)},n.prototype.detectSolid1=function(e){var t=e[0],r=e[1],i=e[3],a=e[2],o=this.transitionsBetween(t,r),s=this.transitionsBetween(r,i),u=this.transitionsBetween(i,a),f=this.transitionsBetween(a,t),h=o,p=[a,t,r,i];return h>s&&(h=s,p[0]=t,p[1]=r,p[2]=i,p[3]=a),h>u&&(h=u,p[0]=r,p[1]=i,p[2]=a,p[3]=t),h>f&&(p[0]=i,p[1]=a,p[2]=t,p[3]=r),p},n.prototype.detectSolid2=function(e){var t=e[0],r=e[1],i=e[2],a=e[3],o=this.transitionsBetween(t,a),s=n.shiftPoint(r,i,(o+1)*4),u=n.shiftPoint(i,r,(o+1)*4),f=this.transitionsBetween(s,t),h=this.transitionsBetween(u,a);return f<h?(e[0]=t,e[1]=r,e[2]=i,e[3]=a):(e[0]=r,e[1]=i,e[2]=a,e[3]=t),e},n.prototype.correctTopRight=function(e){var t=e[0],r=e[1],i=e[2],a=e[3],o=this.transitionsBetween(t,a),s=this.transitionsBetween(r,a),u=n.shiftPoint(t,r,(s+1)*4),f=n.shiftPoint(i,r,(o+1)*4);o=this.transitionsBetween(u,a),s=this.transitionsBetween(f,a);var h=new It(a.getX()+(i.getX()-r.getX())/(o+1),a.getY()+(i.getY()-r.getY())/(o+1)),p=new It(a.getX()+(t.getX()-r.getX())/(s+1),a.getY()+(t.getY()-r.getY())/(s+1));if(!this.isValid(h))return this.isValid(p)?p:null;if(!this.isValid(p))return h;var g=this.transitionsBetween(u,h)+this.transitionsBetween(f,h),m=this.transitionsBetween(u,p)+this.transitionsBetween(f,p);return g>m?h:p},n.prototype.shiftToModuleCenter=function(e){var t=e[0],r=e[1],i=e[2],a=e[3],o=this.transitionsBetween(t,a)+1,s=this.transitionsBetween(i,a)+1,u=n.shiftPoint(t,r,s*4),f=n.shiftPoint(i,r,o*4);o=this.transitionsBetween(u,a)+1,s=this.transitionsBetween(f,a)+1,(o&1)===1&&(o+=1),(s&1)===1&&(s+=1);var h=(t.getX()+r.getX()+i.getX()+a.getX())/4,p=(t.getY()+r.getY()+i.getY()+a.getY())/4;t=n.moveAway(t,h,p),r=n.moveAway(r,h,p),i=n.moveAway(i,h,p),a=n.moveAway(a,h,p);var g,m;return u=n.shiftPoint(t,r,s*4),u=n.shiftPoint(u,a,o*4),g=n.shiftPoint(r,t,s*4),g=n.shiftPoint(g,i,o*4),f=n.shiftPoint(i,a,s*4),f=n.shiftPoint(f,r,o*4),m=n.shiftPoint(a,i,s*4),m=n.shiftPoint(m,t,o*4),[u,g,f,m]},n.prototype.isValid=function(e){return e.getX()>=0&&e.getX()<this.image.getWidth()&&e.getY()>0&&e.getY()<this.image.getHeight()},n.sampleGrid=function(e,t,r,i,a,o,s){var u=ix.getInstance();return u.sampleGrid(e,o,s,.5,.5,o-.5,.5,o-.5,s-.5,.5,s-.5,t.getX(),t.getY(),a.getX(),a.getY(),i.getX(),i.getY(),r.getX(),r.getY())},n.prototype.transitionsBetween=function(e,t){var r=Math.trunc(e.getX()),i=Math.trunc(e.getY()),a=Math.trunc(t.getX()),o=Math.trunc(t.getY()),s=Math.abs(o-i)>Math.abs(a-r);if(s){var u=r;r=i,i=u,u=a,a=o,o=u}for(var f=Math.abs(a-r),h=Math.abs(o-i),p=-f/2,g=i<o?1:-1,m=r<a?1:-1,_=0,b=this.image.get(s?i:r,s?r:i),T=r,S=i;T!==a;T+=m){var D=this.image.get(s?S:T,s?T:S);if(D!==b&&(_++,b=D),p+=h,p>0){if(S===o)break;S+=g,p-=f}}return _},n}(),xy=function(){function n(){this.decoder=new wB}return n.prototype.decode=function(e,t){t===void 0&&(t=null);var r,i;if(t!=null&&t.has(Pr.PURE_BARCODE)){var a=n.extractPureBits(e.getBlackMatrix());r=this.decoder.decode(a),i=n.NO_POINTS}else{var o=new bB(e.getBlackMatrix()).detect();r=this.decoder.decode(o.getBits()),i=o.getPoints()}var s=r.getRawBytes(),u=new Fa(r.getText(),s,8*s.length,i,Mt.DATA_MATRIX,_r.currentTimeMillis()),f=r.getByteSegments();f!=null&&u.putMetadata(fa.BYTE_SEGMENTS,f);var h=r.getECLevel();return h!=null&&u.putMetadata(fa.ERROR_CORRECTION_LEVEL,h),u},n.prototype.reset=function(){},n.extractPureBits=function(e){var t=e.getTopLeftOnBit(),r=e.getBottomRightOnBit();if(t==null||r==null)throw new ze;var i=this.moduleSize(t,e),a=t[1],o=r[1],s=t[0],u=r[0],f=(u-s+1)/i,h=(o-a+1)/i;if(f<=0||h<=0)throw new ze;var p=i/2;a+=p,s+=p;for(var g=new ru(f,h),m=0;m<h;m++)for(var _=a+m*i,b=0;b<f;b++)e.get(s+b*i,_)&&g.set(b,m);return g},n.moduleSize=function(e,t){for(var r=t.getWidth(),i=e[0],a=e[1];i<r&&t.get(i,a);)i++;if(i===r)throw new ze;var o=i-e[0];if(o===0)throw new ze;return o},n.NO_POINTS=[],n}(),AB=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();(function(n){AB(e,n);function e(t){return t===void 0&&(t=500),n.call(this,new xy,t)||this}return e})(Od);var nd;(function(n){n[n.L=0]="L",n[n.M=1]="M",n[n.Q=2]="Q",n[n.H=3]="H"})(nd||(nd={}));var EB=function(){function n(e,t,r){this.value=e,this.stringValue=t,this.bits=r,n.FOR_BITS.set(r,this),n.FOR_VALUE.set(e,this)}return n.prototype.getValue=function(){return this.value},n.prototype.getBits=function(){return this.bits},n.fromString=function(e){switch(e){case"L":return n.L;case"M":return n.M;case"Q":return n.Q;case"H":return n.H;default:throw new el(e+"not available")}},n.prototype.toString=function(){return this.stringValue},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.value===t.value},n.forBits=function(e){if(e<0||e>=n.FOR_BITS.size)throw new Bt;return n.FOR_BITS.get(e)},n.FOR_BITS=new Map,n.FOR_VALUE=new Map,n.L=new n(nd.L,"L",1),n.M=new n(nd.M,"M",0),n.Q=new n(nd.Q,"Q",3),n.H=new n(nd.H,"H",2),n}(),SB=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},pS=function(){function n(e){this.errorCorrectionLevel=EB.forBits(e>>3&3),this.dataMask=e&7}return n.numBitsDiffering=function(e,t){return gn.bitCount(e^t)},n.decodeFormatInformation=function(e,t){var r=n.doDecodeFormatInformation(e,t);return r!==null?r:n.doDecodeFormatInformation(e^n.FORMAT_INFO_MASK_QR,t^n.FORMAT_INFO_MASK_QR)},n.doDecodeFormatInformation=function(e,t){var r,i,a=Number.MAX_SAFE_INTEGER,o=0;try{for(var s=SB(n.FORMAT_INFO_DECODE_LOOKUP),u=s.next();!u.done;u=s.next()){var f=u.value,h=f[0];if(h===e||h===t)return new n(f[1]);var p=n.numBitsDiffering(e,h);p<a&&(o=f[1],a=p),e!==t&&(p=n.numBitsDiffering(t,h),p<a&&(o=f[1],a=p))}}catch(g){r={error:g}}finally{try{u&&!u.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}return a<=3?new n(o):null},n.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},n.prototype.getDataMask=function(){return this.dataMask},n.prototype.hashCode=function(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.errorCorrectionLevel===t.errorCorrectionLevel&&this.dataMask===t.dataMask},n.FORMAT_INFO_MASK_QR=21522,n.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])],n}(),CB=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Me=function(){function n(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this.ecCodewordsPerBlock=e,this.ecBlocks=t}return n.prototype.getECCodewordsPerBlock=function(){return this.ecCodewordsPerBlock},n.prototype.getNumBlocks=function(){var e,t,r=0,i=this.ecBlocks;try{for(var a=CB(i),o=a.next();!o.done;o=a.next()){var s=o.value;r+=s.getCount()}}catch(u){e={error:u}}finally{try{o&&!o.done&&(t=a.return)&&t.call(a)}finally{if(e)throw e.error}}return r},n.prototype.getTotalECCodewords=function(){return this.ecCodewordsPerBlock*this.getNumBlocks()},n.prototype.getECBlocks=function(){return this.ecBlocks},n}(),fe=function(){function n(e,t){this.count=e,this.dataCodewords=t}return n.prototype.getCount=function(){return this.count},n.prototype.getDataCodewords=function(){return this.dataCodewords},n}(),TB=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Qf=function(){function n(e,t){for(var r,i,a=[],o=2;o<arguments.length;o++)a[o-2]=arguments[o];this.versionNumber=e,this.alignmentPatternCenters=t,this.ecBlocks=a;var s=0,u=a[0].getECCodewordsPerBlock(),f=a[0].getECBlocks();try{for(var h=TB(f),p=h.next();!p.done;p=h.next()){var g=p.value;s+=g.getCount()*(g.getDataCodewords()+u)}}catch(m){r={error:m}}finally{try{p&&!p.done&&(i=h.return)&&i.call(h)}finally{if(r)throw r.error}}this.totalCodewords=s}return n.prototype.getVersionNumber=function(){return this.versionNumber},n.prototype.getAlignmentPatternCenters=function(){return this.alignmentPatternCenters},n.prototype.getTotalCodewords=function(){return this.totalCodewords},n.prototype.getDimensionForVersion=function(){return 17+4*this.versionNumber},n.prototype.getECBlocksForLevel=function(e){return this.ecBlocks[e.getValue()]},n.getProvisionalVersionForDimension=function(e){if(e%4!==1)throw new pt;try{return this.getVersionForNumber((e-17)/4)}catch{throw new pt}},n.getVersionForNumber=function(e){if(e<1||e>40)throw new Bt;return n.VERSIONS[e-1]},n.decodeVersionInformation=function(e){for(var t=Number.MAX_SAFE_INTEGER,r=0,i=0;i<n.VERSION_DECODE_INFO.length;i++){var a=n.VERSION_DECODE_INFO[i];if(a===e)return n.getVersionForNumber(i+7);var o=pS.numBitsDiffering(e,a);o<t&&(r=i+7,t=o)}return t<=3?n.getVersionForNumber(r):null},n.prototype.buildFunctionPattern=function(){var e=this.getDimensionForVersion(),t=new ru(e);t.setRegion(0,0,9,9),t.setRegion(e-8,0,8,9),t.setRegion(0,e-8,9,8);for(var r=this.alignmentPatternCenters.length,i=0;i<r;i++)for(var a=this.alignmentPatternCenters[i]-2,o=0;o<r;o++)i===0&&(o===0||o===r-1)||i===r-1&&o===0||t.setRegion(this.alignmentPatternCenters[o]-2,a,5,5);return t.setRegion(6,9,1,e-17),t.setRegion(9,6,e-17,1),this.versionNumber>6&&(t.setRegion(e-11,0,3,6),t.setRegion(0,e-11,6,3)),t},n.prototype.toString=function(){return""+this.versionNumber},n.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),n.VERSIONS=[new n(1,new Int32Array(0),new Me(7,new fe(1,19)),new Me(10,new fe(1,16)),new Me(13,new fe(1,13)),new Me(17,new fe(1,9))),new n(2,Int32Array.from([6,18]),new Me(10,new fe(1,34)),new Me(16,new fe(1,28)),new Me(22,new fe(1,22)),new Me(28,new fe(1,16))),new n(3,Int32Array.from([6,22]),new Me(15,new fe(1,55)),new Me(26,new fe(1,44)),new Me(18,new fe(2,17)),new Me(22,new fe(2,13))),new n(4,Int32Array.from([6,26]),new Me(20,new fe(1,80)),new Me(18,new fe(2,32)),new Me(26,new fe(2,24)),new Me(16,new fe(4,9))),new n(5,Int32Array.from([6,30]),new Me(26,new fe(1,108)),new Me(24,new fe(2,43)),new Me(18,new fe(2,15),new fe(2,16)),new Me(22,new fe(2,11),new fe(2,12))),new n(6,Int32Array.from([6,34]),new Me(18,new fe(2,68)),new Me(16,new fe(4,27)),new Me(24,new fe(4,19)),new Me(28,new fe(4,15))),new n(7,Int32Array.from([6,22,38]),new Me(20,new fe(2,78)),new Me(18,new fe(4,31)),new Me(18,new fe(2,14),new fe(4,15)),new Me(26,new fe(4,13),new fe(1,14))),new n(8,Int32Array.from([6,24,42]),new Me(24,new fe(2,97)),new Me(22,new fe(2,38),new fe(2,39)),new Me(22,new fe(4,18),new fe(2,19)),new Me(26,new fe(4,14),new fe(2,15))),new n(9,Int32Array.from([6,26,46]),new Me(30,new fe(2,116)),new Me(22,new fe(3,36),new fe(2,37)),new Me(20,new fe(4,16),new fe(4,17)),new Me(24,new fe(4,12),new fe(4,13))),new n(10,Int32Array.from([6,28,50]),new Me(18,new fe(2,68),new fe(2,69)),new Me(26,new fe(4,43),new fe(1,44)),new Me(24,new fe(6,19),new fe(2,20)),new Me(28,new fe(6,15),new fe(2,16))),new n(11,Int32Array.from([6,30,54]),new Me(20,new fe(4,81)),new Me(30,new fe(1,50),new fe(4,51)),new Me(28,new fe(4,22),new fe(4,23)),new Me(24,new fe(3,12),new fe(8,13))),new n(12,Int32Array.from([6,32,58]),new Me(24,new fe(2,92),new fe(2,93)),new Me(22,new fe(6,36),new fe(2,37)),new Me(26,new fe(4,20),new fe(6,21)),new Me(28,new fe(7,14),new fe(4,15))),new n(13,Int32Array.from([6,34,62]),new Me(26,new fe(4,107)),new Me(22,new fe(8,37),new fe(1,38)),new Me(24,new fe(8,20),new fe(4,21)),new Me(22,new fe(12,11),new fe(4,12))),new n(14,Int32Array.from([6,26,46,66]),new Me(30,new fe(3,115),new fe(1,116)),new Me(24,new fe(4,40),new fe(5,41)),new Me(20,new fe(11,16),new fe(5,17)),new Me(24,new fe(11,12),new fe(5,13))),new n(15,Int32Array.from([6,26,48,70]),new Me(22,new fe(5,87),new fe(1,88)),new Me(24,new fe(5,41),new fe(5,42)),new Me(30,new fe(5,24),new fe(7,25)),new Me(24,new fe(11,12),new fe(7,13))),new n(16,Int32Array.from([6,26,50,74]),new Me(24,new fe(5,98),new fe(1,99)),new Me(28,new fe(7,45),new fe(3,46)),new Me(24,new fe(15,19),new fe(2,20)),new Me(30,new fe(3,15),new fe(13,16))),new n(17,Int32Array.from([6,30,54,78]),new Me(28,new fe(1,107),new fe(5,108)),new Me(28,new fe(10,46),new fe(1,47)),new Me(28,new fe(1,22),new fe(15,23)),new Me(28,new fe(2,14),new fe(17,15))),new n(18,Int32Array.from([6,30,56,82]),new Me(30,new fe(5,120),new fe(1,121)),new Me(26,new fe(9,43),new fe(4,44)),new Me(28,new fe(17,22),new fe(1,23)),new Me(28,new fe(2,14),new fe(19,15))),new n(19,Int32Array.from([6,30,58,86]),new Me(28,new fe(3,113),new fe(4,114)),new Me(26,new fe(3,44),new fe(11,45)),new Me(26,new fe(17,21),new fe(4,22)),new Me(26,new fe(9,13),new fe(16,14))),new n(20,Int32Array.from([6,34,62,90]),new Me(28,new fe(3,107),new fe(5,108)),new Me(26,new fe(3,41),new fe(13,42)),new Me(30,new fe(15,24),new fe(5,25)),new Me(28,new fe(15,15),new fe(10,16))),new n(21,Int32Array.from([6,28,50,72,94]),new Me(28,new fe(4,116),new fe(4,117)),new Me(26,new fe(17,42)),new Me(28,new fe(17,22),new fe(6,23)),new Me(30,new fe(19,16),new fe(6,17))),new n(22,Int32Array.from([6,26,50,74,98]),new Me(28,new fe(2,111),new fe(7,112)),new Me(28,new fe(17,46)),new Me(30,new fe(7,24),new fe(16,25)),new Me(24,new fe(34,13))),new n(23,Int32Array.from([6,30,54,78,102]),new Me(30,new fe(4,121),new fe(5,122)),new Me(28,new fe(4,47),new fe(14,48)),new Me(30,new fe(11,24),new fe(14,25)),new Me(30,new fe(16,15),new fe(14,16))),new n(24,Int32Array.from([6,28,54,80,106]),new Me(30,new fe(6,117),new fe(4,118)),new Me(28,new fe(6,45),new fe(14,46)),new Me(30,new fe(11,24),new fe(16,25)),new Me(30,new fe(30,16),new fe(2,17))),new n(25,Int32Array.from([6,32,58,84,110]),new Me(26,new fe(8,106),new fe(4,107)),new Me(28,new fe(8,47),new fe(13,48)),new Me(30,new fe(7,24),new fe(22,25)),new Me(30,new fe(22,15),new fe(13,16))),new n(26,Int32Array.from([6,30,58,86,114]),new Me(28,new fe(10,114),new fe(2,115)),new Me(28,new fe(19,46),new fe(4,47)),new Me(28,new fe(28,22),new fe(6,23)),new Me(30,new fe(33,16),new fe(4,17))),new n(27,Int32Array.from([6,34,62,90,118]),new Me(30,new fe(8,122),new fe(4,123)),new Me(28,new fe(22,45),new fe(3,46)),new Me(30,new fe(8,23),new fe(26,24)),new Me(30,new fe(12,15),new fe(28,16))),new n(28,Int32Array.from([6,26,50,74,98,122]),new Me(30,new fe(3,117),new fe(10,118)),new Me(28,new fe(3,45),new fe(23,46)),new Me(30,new fe(4,24),new fe(31,25)),new Me(30,new fe(11,15),new fe(31,16))),new n(29,Int32Array.from([6,30,54,78,102,126]),new Me(30,new fe(7,116),new fe(7,117)),new Me(28,new fe(21,45),new fe(7,46)),new Me(30,new fe(1,23),new fe(37,24)),new Me(30,new fe(19,15),new fe(26,16))),new n(30,Int32Array.from([6,26,52,78,104,130]),new Me(30,new fe(5,115),new fe(10,116)),new Me(28,new fe(19,47),new fe(10,48)),new Me(30,new fe(15,24),new fe(25,25)),new Me(30,new fe(23,15),new fe(25,16))),new n(31,Int32Array.from([6,30,56,82,108,134]),new Me(30,new fe(13,115),new fe(3,116)),new Me(28,new fe(2,46),new fe(29,47)),new Me(30,new fe(42,24),new fe(1,25)),new Me(30,new fe(23,15),new fe(28,16))),new n(32,Int32Array.from([6,34,60,86,112,138]),new Me(30,new fe(17,115)),new Me(28,new fe(10,46),new fe(23,47)),new Me(30,new fe(10,24),new fe(35,25)),new Me(30,new fe(19,15),new fe(35,16))),new n(33,Int32Array.from([6,30,58,86,114,142]),new Me(30,new fe(17,115),new fe(1,116)),new Me(28,new fe(14,46),new fe(21,47)),new Me(30,new fe(29,24),new fe(19,25)),new Me(30,new fe(11,15),new fe(46,16))),new n(34,Int32Array.from([6,34,62,90,118,146]),new Me(30,new fe(13,115),new fe(6,116)),new Me(28,new fe(14,46),new fe(23,47)),new Me(30,new fe(44,24),new fe(7,25)),new Me(30,new fe(59,16),new fe(1,17))),new n(35,Int32Array.from([6,30,54,78,102,126,150]),new Me(30,new fe(12,121),new fe(7,122)),new Me(28,new fe(12,47),new fe(26,48)),new Me(30,new fe(39,24),new fe(14,25)),new Me(30,new fe(22,15),new fe(41,16))),new n(36,Int32Array.from([6,24,50,76,102,128,154]),new Me(30,new fe(6,121),new fe(14,122)),new Me(28,new fe(6,47),new fe(34,48)),new Me(30,new fe(46,24),new fe(10,25)),new Me(30,new fe(2,15),new fe(64,16))),new n(37,Int32Array.from([6,28,54,80,106,132,158]),new Me(30,new fe(17,122),new fe(4,123)),new Me(28,new fe(29,46),new fe(14,47)),new Me(30,new fe(49,24),new fe(10,25)),new Me(30,new fe(24,15),new fe(46,16))),new n(38,Int32Array.from([6,32,58,84,110,136,162]),new Me(30,new fe(4,122),new fe(18,123)),new Me(28,new fe(13,46),new fe(32,47)),new Me(30,new fe(48,24),new fe(14,25)),new Me(30,new fe(42,15),new fe(32,16))),new n(39,Int32Array.from([6,26,54,82,110,138,166]),new Me(30,new fe(20,117),new fe(4,118)),new Me(28,new fe(40,47),new fe(7,48)),new Me(30,new fe(43,24),new fe(22,25)),new Me(30,new fe(10,15),new fe(67,16))),new n(40,Int32Array.from([6,30,58,86,114,142,170]),new Me(30,new fe(19,118),new fe(6,119)),new Me(28,new fe(18,47),new fe(31,48)),new Me(30,new fe(34,24),new fe(34,25)),new Me(30,new fe(20,15),new fe(61,16)))],n}(),Wi;(function(n){n[n.DATA_MASK_000=0]="DATA_MASK_000",n[n.DATA_MASK_001=1]="DATA_MASK_001",n[n.DATA_MASK_010=2]="DATA_MASK_010",n[n.DATA_MASK_011=3]="DATA_MASK_011",n[n.DATA_MASK_100=4]="DATA_MASK_100",n[n.DATA_MASK_101=5]="DATA_MASK_101",n[n.DATA_MASK_110=6]="DATA_MASK_110",n[n.DATA_MASK_111=7]="DATA_MASK_111"})(Wi||(Wi={}));var kb=function(){function n(e,t){this.value=e,this.isMasked=t}return n.prototype.unmaskBitMatrix=function(e,t){for(var r=0;r<t;r++)for(var i=0;i<t;i++)this.isMasked(r,i)&&e.flip(i,r)},n.values=new Map([[Wi.DATA_MASK_000,new n(Wi.DATA_MASK_000,function(e,t){return(e+t&1)===0})],[Wi.DATA_MASK_001,new n(Wi.DATA_MASK_001,function(e,t){return(e&1)===0})],[Wi.DATA_MASK_010,new n(Wi.DATA_MASK_010,function(e,t){return t%3===0})],[Wi.DATA_MASK_011,new n(Wi.DATA_MASK_011,function(e,t){return(e+t)%3===0})],[Wi.DATA_MASK_100,new n(Wi.DATA_MASK_100,function(e,t){return(Math.floor(e/2)+Math.floor(t/3)&1)===0})],[Wi.DATA_MASK_101,new n(Wi.DATA_MASK_101,function(e,t){return e*t%6===0})],[Wi.DATA_MASK_110,new n(Wi.DATA_MASK_110,function(e,t){return e*t%6<3})],[Wi.DATA_MASK_111,new n(Wi.DATA_MASK_111,function(e,t){return(e+t+e*t%3&1)===0})]]),n}(),IB=function(){function n(e){var t=e.getHeight();if(t<21||(t&3)!==1)throw new pt;this.bitMatrix=e}return n.prototype.readFormatInformation=function(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;for(var e=0,t=0;t<6;t++)e=this.copyBit(t,8,e);e=this.copyBit(7,8,e),e=this.copyBit(8,8,e),e=this.copyBit(8,7,e);for(var r=5;r>=0;r--)e=this.copyBit(8,r,e);for(var i=this.bitMatrix.getHeight(),a=0,o=i-7,r=i-1;r>=o;r--)a=this.copyBit(8,r,a);for(var t=i-8;t<i;t++)a=this.copyBit(t,8,a);if(this.parsedFormatInfo=pS.decodeFormatInformation(e,a),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new pt},n.prototype.readVersion=function(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;var e=this.bitMatrix.getHeight(),t=Math.floor((e-17)/4);if(t<=6)return Qf.getVersionForNumber(t);for(var r=0,i=e-11,a=5;a>=0;a--)for(var o=e-9;o>=i;o--)r=this.copyBit(o,a,r);var s=Qf.decodeVersionInformation(r);if(s!==null&&s.getDimensionForVersion()===e)return this.parsedVersion=s,s;r=0;for(var o=5;o>=0;o--)for(var a=e-9;a>=i;a--)r=this.copyBit(o,a,r);if(s=Qf.decodeVersionInformation(r),s!==null&&s.getDimensionForVersion()===e)return this.parsedVersion=s,s;throw new pt},n.prototype.copyBit=function(e,t,r){var i=this.isMirror?this.bitMatrix.get(t,e):this.bitMatrix.get(e,t);return i?r<<1|1:r<<1},n.prototype.readCodewords=function(){var e=this.readFormatInformation(),t=this.readVersion(),r=kb.values.get(e.getDataMask()),i=this.bitMatrix.getHeight();r.unmaskBitMatrix(this.bitMatrix,i);for(var a=t.buildFunctionPattern(),o=!0,s=new Uint8Array(t.getTotalCodewords()),u=0,f=0,h=0,p=i-1;p>0;p-=2){p===6&&p--;for(var g=0;g<i;g++)for(var m=o?i-1-g:g,_=0;_<2;_++)a.get(p-_,m)||(h++,f<<=1,this.bitMatrix.get(p-_,m)&&(f|=1),h===8&&(s[u++]=f,h=0,f=0));o=!o}if(u!==t.getTotalCodewords())throw new pt;return s},n.prototype.remask=function(){if(this.parsedFormatInfo!==null){var e=kb.values.get(this.parsedFormatInfo.getDataMask()),t=this.bitMatrix.getHeight();e.unmaskBitMatrix(this.bitMatrix,t)}},n.prototype.setMirror=function(e){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=e},n.prototype.mirror=function(){for(var e=this.bitMatrix,t=0,r=e.getWidth();t<r;t++)for(var i=t+1,a=e.getHeight();i<a;i++)e.get(t,i)!==e.get(i,t)&&(e.flip(i,t),e.flip(t,i))},n}(),Mb=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},RB=function(){function n(e,t){this.numDataCodewords=e,this.codewords=t}return n.getDataBlocks=function(e,t,r){var i,a,o,s;if(e.length!==t.getTotalCodewords())throw new Bt;var u=t.getECBlocksForLevel(r),f=0,h=u.getECBlocks();try{for(var p=Mb(h),g=p.next();!g.done;g=p.next()){var m=g.value;f+=m.getCount()}}catch(j){i={error:j}}finally{try{g&&!g.done&&(a=p.return)&&a.call(p)}finally{if(i)throw i.error}}var _=new Array(f),b=0;try{for(var T=Mb(h),S=T.next();!S.done;S=T.next())for(var m=S.value,D=0;D<m.getCount();D++){var B=m.getDataCodewords(),V=u.getECCodewordsPerBlock()+B;_[b++]=new n(B,new Uint8Array(V))}}catch(j){o={error:j}}finally{try{S&&!S.done&&(s=T.return)&&s.call(T)}finally{if(o)throw o.error}}for(var Y=_[0].codewords.length,q=_.length-1;q>=0;){var P=_[q].codewords.length;if(P===Y)break;q--}q++;for(var E=Y-u.getECCodewordsPerBlock(),C=0,D=0;D<E;D++)for(var M=0;M<b;M++)_[M].codewords[D]=e[C++];for(var M=q;M<b;M++)_[M].codewords[E]=e[C++];for(var R=_[0].codewords.length,D=E;D<R;D++)for(var M=0;M<b;M++){var L=M<q?D:D+1;_[M].codewords[L]=e[C++]}return _},n.prototype.getNumDataCodewords=function(){return this.numDataCodewords},n.prototype.getCodewords=function(){return this.codewords},n}(),ys;(function(n){n[n.TERMINATOR=0]="TERMINATOR",n[n.NUMERIC=1]="NUMERIC",n[n.ALPHANUMERIC=2]="ALPHANUMERIC",n[n.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",n[n.BYTE=4]="BYTE",n[n.ECI=5]="ECI",n[n.KANJI=6]="KANJI",n[n.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",n[n.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",n[n.HANZI=9]="HANZI"})(ys||(ys={}));var Er=function(){function n(e,t,r,i){this.value=e,this.stringValue=t,this.characterCountBitsForVersions=r,this.bits=i,n.FOR_BITS.set(i,this),n.FOR_VALUE.set(e,this)}return n.forBits=function(e){var t=n.FOR_BITS.get(e);if(t===void 0)throw new Bt;return t},n.prototype.getCharacterCountBits=function(e){var t=e.getVersionNumber(),r;return t<=9?r=0:t<=26?r=1:r=2,this.characterCountBitsForVersions[r]},n.prototype.getValue=function(){return this.value},n.prototype.getBits=function(){return this.bits},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.value===t.value},n.prototype.toString=function(){return this.stringValue},n.FOR_BITS=new Map,n.FOR_VALUE=new Map,n.TERMINATOR=new n(ys.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),n.NUMERIC=new n(ys.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),n.ALPHANUMERIC=new n(ys.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),n.STRUCTURED_APPEND=new n(ys.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),n.BYTE=new n(ys.BYTE,"BYTE",Int32Array.from([8,16,16]),4),n.ECI=new n(ys.ECI,"ECI",Int32Array.from([0,0,0]),7),n.KANJI=new n(ys.KANJI,"KANJI",Int32Array.from([8,10,12]),8),n.FNC1_FIRST_POSITION=new n(ys.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),n.FNC1_SECOND_POSITION=new n(ys.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),n.HANZI=new n(ys.HANZI,"HANZI",Int32Array.from([8,10,12]),13),n}(),NB=function(){function n(){}return n.decode=function(e,t,r,i){var a=new dS(e),o=new cn,s=new Array,u=-1,f=-1;try{var h=null,p=!1,g=void 0;do{if(a.available()<4)g=Er.TERMINATOR;else{var m=a.readBits(4);g=Er.forBits(m)}switch(g){case Er.TERMINATOR:break;case Er.FNC1_FIRST_POSITION:case Er.FNC1_SECOND_POSITION:p=!0;break;case Er.STRUCTURED_APPEND:if(a.available()<16)throw new pt;u=a.readBits(8),f=a.readBits(8);break;case Er.ECI:var _=n.parseECIValue(a);if(h=Pi.getCharacterSetECIByValue(_),h===null)throw new pt;break;case Er.HANZI:var b=a.readBits(4),T=a.readBits(g.getCharacterCountBits(t));b===n.GB2312_SUBSET&&n.decodeHanziSegment(a,o,T);break;default:var S=a.readBits(g.getCharacterCountBits(t));switch(g){case Er.NUMERIC:n.decodeNumericSegment(a,o,S);break;case Er.ALPHANUMERIC:n.decodeAlphanumericSegment(a,o,S,p);break;case Er.BYTE:n.decodeByteSegment(a,o,S,h,s,i);break;case Er.KANJI:n.decodeKanjiSegment(a,o,S);break;default:throw new pt}break}}while(g!==Er.TERMINATOR)}catch{throw new pt}return new S2(e,o.toString(),s.length===0?null:s,r===null?null:r.toString(),u,f)},n.decodeHanziSegment=function(e,t,r){if(r*13>e.available())throw new pt;for(var i=new Uint8Array(2*r),a=0;r>0;){var o=e.readBits(13),s=o/96<<8&4294967295|o%96;s<959?s+=41377:s+=42657,i[a]=s>>8&255,i[a+1]=s&255,a+=2,r--}try{t.append(ws.decode(i,On.GB2312))}catch(u){throw new pt(u)}},n.decodeKanjiSegment=function(e,t,r){if(r*13>e.available())throw new pt;for(var i=new Uint8Array(2*r),a=0;r>0;){var o=e.readBits(13),s=o/192<<8&4294967295|o%192;s<7936?s+=33088:s+=49472,i[a]=s>>8,i[a+1]=s,a+=2,r--}try{t.append(ws.decode(i,On.SHIFT_JIS))}catch(u){throw new pt(u)}},n.decodeByteSegment=function(e,t,r,i,a,o){if(8*r>e.available())throw new pt;for(var s=new Uint8Array(r),u=0;u<r;u++)s[u]=e.readBits(8);var f;i===null?f=On.guessEncoding(s,o):f=i.getName();try{t.append(ws.decode(s,f))}catch(h){throw new pt(h)}a.push(s)},n.toAlphaNumericChar=function(e){if(e>=n.ALPHANUMERIC_CHARS.length)throw new pt;return n.ALPHANUMERIC_CHARS[e]},n.decodeAlphanumericSegment=function(e,t,r,i){for(var a=t.length();r>1;){if(e.available()<11)throw new pt;var o=e.readBits(11);t.append(n.toAlphaNumericChar(Math.floor(o/45))),t.append(n.toAlphaNumericChar(o%45)),r-=2}if(r===1){if(e.available()<6)throw new pt;t.append(n.toAlphaNumericChar(e.readBits(6)))}if(i)for(var s=a;s<t.length();s++)t.charAt(s)==="%"&&(s<t.length()-1&&t.charAt(s+1)==="%"?t.deleteCharAt(s+1):t.setCharAt(s,""))},n.decodeNumericSegment=function(e,t,r){for(;r>=3;){if(e.available()<10)throw new pt;var i=e.readBits(10);if(i>=1e3)throw new pt;t.append(n.toAlphaNumericChar(Math.floor(i/100))),t.append(n.toAlphaNumericChar(Math.floor(i/10)%10)),t.append(n.toAlphaNumericChar(i%10)),r-=3}if(r===2){if(e.available()<7)throw new pt;var a=e.readBits(7);if(a>=100)throw new pt;t.append(n.toAlphaNumericChar(Math.floor(a/10))),t.append(n.toAlphaNumericChar(a%10))}else if(r===1){if(e.available()<4)throw new pt;var o=e.readBits(4);if(o>=10)throw new pt;t.append(n.toAlphaNumericChar(o))}},n.parseECIValue=function(e){var t=e.readBits(8);if((t&128)===0)return t&127;if((t&192)===128){var r=e.readBits(8);return(t&63)<<8&4294967295|r}if((t&224)===192){var i=e.readBits(16);return(t&31)<<16&4294967295|i}throw new pt},n.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",n.GB2312_SUBSET=1,n}(),gS=function(){function n(e){this.mirrored=e}return n.prototype.isMirrored=function(){return this.mirrored},n.prototype.applyMirroredCorrection=function(e){if(!(!this.mirrored||e===null||e.length<3)){var t=e[0];e[0]=e[2],e[2]=t}},n}(),Bb=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},OB=function(){function n(){this.rsDecoder=new C2(yo.QR_CODE_FIELD_256)}return n.prototype.decodeBooleanArray=function(e,t){return this.decodeBitMatrix(ru.parseFromBooleanArray(e),t)},n.prototype.decodeBitMatrix=function(e,t){var r=new IB(e),i=null;try{return this.decodeBitMatrixParser(r,t)}catch(o){i=o}try{r.remask(),r.setMirror(!0),r.readVersion(),r.readFormatInformation(),r.mirror();var a=this.decodeBitMatrixParser(r,t);return a.setOther(new gS(!0)),a}catch(o){throw i!==null?i:o}},n.prototype.decodeBitMatrixParser=function(e,t){var r,i,a,o,s=e.readVersion(),u=e.readFormatInformation().getErrorCorrectionLevel(),f=e.readCodewords(),h=RB.getDataBlocks(f,s,u),p=0;try{for(var g=Bb(h),m=g.next();!m.done;m=g.next()){var _=m.value;p+=_.getNumDataCodewords()}}catch(q){r={error:q}}finally{try{m&&!m.done&&(i=g.return)&&i.call(g)}finally{if(r)throw r.error}}var b=new Uint8Array(p),T=0;try{for(var S=Bb(h),D=S.next();!D.done;D=S.next()){var _=D.value,B=_.getCodewords(),V=_.getNumDataCodewords();this.correctErrors(B,V);for(var Y=0;Y<V;Y++)b[T++]=B[Y]}}catch(q){a={error:q}}finally{try{D&&!D.done&&(o=S.return)&&o.call(S)}finally{if(a)throw a.error}}return NB.decode(b,s,u,t)},n.prototype.correctErrors=function(e,t){var r=new Int32Array(e);try{this.rsDecoder.decode(r,e.length-t)}catch{throw new Ki}for(var i=0;i<t;i++)e[i]=r[i]},n}(),DB=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),PB=function(n){DB(e,n);function e(t,r,i){var a=n.call(this,t,r)||this;return a.estimatedModuleSize=i,a}return e.prototype.aboutEquals=function(t,r,i){if(Math.abs(r-this.getY())<=t&&Math.abs(i-this.getX())<=t){var a=Math.abs(t-this.estimatedModuleSize);return a<=1||a<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(t,r,i){var a=(this.getX()+r)/2,o=(this.getY()+t)/2,s=(this.estimatedModuleSize+i)/2;return new e(a,o,s)},e}(It),LB=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},kB=function(){function n(e,t,r,i,a,o,s){this.image=e,this.startX=t,this.startY=r,this.width=i,this.height=a,this.moduleSize=o,this.resultPointCallback=s,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}return n.prototype.find=function(){for(var e=this.startX,t=this.height,r=this.width,i=e+r,a=this.startY+t/2,o=new Int32Array(3),s=this.image,u=0;u<t;u++){var f=a+((u&1)===0?Math.floor((u+1)/2):-Math.floor((u+1)/2));o[0]=0,o[1]=0,o[2]=0;for(var h=e;h<i&&!s.get(h,f);)h++;for(var p=0;h<i;){if(s.get(h,f))if(p===1)o[1]++;else if(p===2){if(this.foundPatternCross(o)){var g=this.handlePossibleCenter(o,f,h);if(g!==null)return g}o[0]=o[2],o[1]=1,o[2]=0,p=1}else o[++p]++;else p===1&&p++,o[p]++;h++}if(this.foundPatternCross(o)){var g=this.handlePossibleCenter(o,f,i);if(g!==null)return g}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new ze},n.centerFromEnd=function(e,t){return t-e[2]-e[1]/2},n.prototype.foundPatternCross=function(e){for(var t=this.moduleSize,r=t/2,i=0;i<3;i++)if(Math.abs(t-e[i])>=r)return!1;return!0},n.prototype.crossCheckVertical=function(e,t,r,i){var a=this.image,o=a.getHeight(),s=this.crossCheckStateCount;s[0]=0,s[1]=0,s[2]=0;for(var u=e;u>=0&&a.get(t,u)&&s[1]<=r;)s[1]++,u--;if(u<0||s[1]>r)return NaN;for(;u>=0&&!a.get(t,u)&&s[0]<=r;)s[0]++,u--;if(s[0]>r)return NaN;for(u=e+1;u<o&&a.get(t,u)&&s[1]<=r;)s[1]++,u++;if(u===o||s[1]>r)return NaN;for(;u<o&&!a.get(t,u)&&s[2]<=r;)s[2]++,u++;if(s[2]>r)return NaN;var f=s[0]+s[1]+s[2];return 5*Math.abs(f-i)>=2*i?NaN:this.foundPatternCross(s)?n.centerFromEnd(s,u):NaN},n.prototype.handlePossibleCenter=function(e,t,r){var i,a,o=e[0]+e[1]+e[2],s=n.centerFromEnd(e,r),u=this.crossCheckVertical(t,s,2*e[1],o);if(!isNaN(u)){var f=(e[0]+e[1]+e[2])/3;try{for(var h=LB(this.possibleCenters),p=h.next();!p.done;p=h.next()){var g=p.value;if(g.aboutEquals(f,u,s))return g.combineEstimate(u,s,f)}}catch(_){i={error:_}}finally{try{p&&!p.done&&(a=h.return)&&a.call(h)}finally{if(i)throw i.error}}var m=new PB(s,u,f);this.possibleCenters.push(m),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(m)}return null},n}(),MB=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),BB=function(n){MB(e,n);function e(t,r,i,a){var o=n.call(this,t,r)||this;return o.estimatedModuleSize=i,o.count=a,a===void 0&&(o.count=1),o}return e.prototype.getEstimatedModuleSize=function(){return this.estimatedModuleSize},e.prototype.getCount=function(){return this.count},e.prototype.aboutEquals=function(t,r,i){if(Math.abs(r-this.getY())<=t&&Math.abs(i-this.getX())<=t){var a=Math.abs(t-this.estimatedModuleSize);return a<=1||a<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(t,r,i){var a=this.count+1,o=(this.count*this.getX()+r)/a,s=(this.count*this.getY()+t)/a,u=(this.count*this.estimatedModuleSize+i)/a;return new e(o,s,u,a)},e}(It),FB=function(){function n(e){this.bottomLeft=e[0],this.topLeft=e[1],this.topRight=e[2]}return n.prototype.getBottomLeft=function(){return this.bottomLeft},n.prototype.getTopLeft=function(){return this.topLeft},n.prototype.getTopRight=function(){return this.topRight},n}(),_1=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},jB=function(){function n(e,t){this.image=e,this.resultPointCallback=t,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=t}return n.prototype.getImage=function(){return this.image},n.prototype.getPossibleCenters=function(){return this.possibleCenters},n.prototype.find=function(e){var t=e!=null&&e.get(Pr.TRY_HARDER)!==void 0,r=e!=null&&e.get(Pr.PURE_BARCODE)!==void 0,i=this.image,a=i.getHeight(),o=i.getWidth(),s=Math.floor(3*a/(4*n.MAX_MODULES));(s<n.MIN_SKIP||t)&&(s=n.MIN_SKIP);for(var u=!1,f=new Int32Array(5),h=s-1;h<a&&!u;h+=s){f[0]=0,f[1]=0,f[2]=0,f[3]=0,f[4]=0;for(var p=0,g=0;g<o;g++)if(i.get(g,h))(p&1)===1&&p++,f[p]++;else if((p&1)===0)if(p===4)if(n.foundPatternCross(f)){var m=this.handlePossibleCenter(f,h,g,r);if(m===!0)if(s=2,this.hasSkipped===!0)u=this.haveMultiplyConfirmedCenters();else{var _=this.findRowSkip();_>f[2]&&(h+=_-f[2]-s,g=o-1)}else{f[0]=f[2],f[1]=f[3],f[2]=f[4],f[3]=1,f[4]=0,p=3;continue}p=0,f[0]=0,f[1]=0,f[2]=0,f[3]=0,f[4]=0}else f[0]=f[2],f[1]=f[3],f[2]=f[4],f[3]=1,f[4]=0,p=3;else f[++p]++;else f[p]++;if(n.foundPatternCross(f)){var m=this.handlePossibleCenter(f,h,o,r);m===!0&&(s=f[0],this.hasSkipped&&(u=this.haveMultiplyConfirmedCenters()))}}var b=this.selectBestPatterns();return It.orderBestPatterns(b),new FB(b)},n.centerFromEnd=function(e,t){return t-e[4]-e[3]-e[2]/2},n.foundPatternCross=function(e){for(var t=0,r=0;r<5;r++){var i=e[r];if(i===0)return!1;t+=i}if(t<7)return!1;var a=t/7,o=a/2;return Math.abs(a-e[0])<o&&Math.abs(a-e[1])<o&&Math.abs(3*a-e[2])<3*o&&Math.abs(a-e[3])<o&&Math.abs(a-e[4])<o},n.prototype.getCrossCheckStateCount=function(){var e=this.crossCheckStateCount;return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e},n.prototype.crossCheckDiagonal=function(e,t,r,i){for(var a=this.getCrossCheckStateCount(),o=0,s=this.image;e>=o&&t>=o&&s.get(t-o,e-o);)a[2]++,o++;if(e<o||t<o)return!1;for(;e>=o&&t>=o&&!s.get(t-o,e-o)&&a[1]<=r;)a[1]++,o++;if(e<o||t<o||a[1]>r)return!1;for(;e>=o&&t>=o&&s.get(t-o,e-o)&&a[0]<=r;)a[0]++,o++;if(a[0]>r)return!1;var u=s.getHeight(),f=s.getWidth();for(o=1;e+o<u&&t+o<f&&s.get(t+o,e+o);)a[2]++,o++;if(e+o>=u||t+o>=f)return!1;for(;e+o<u&&t+o<f&&!s.get(t+o,e+o)&&a[3]<r;)a[3]++,o++;if(e+o>=u||t+o>=f||a[3]>=r)return!1;for(;e+o<u&&t+o<f&&s.get(t+o,e+o)&&a[4]<r;)a[4]++,o++;if(a[4]>=r)return!1;var h=a[0]+a[1]+a[2]+a[3]+a[4];return Math.abs(h-i)<2*i&&n.foundPatternCross(a)},n.prototype.crossCheckVertical=function(e,t,r,i){for(var a=this.image,o=a.getHeight(),s=this.getCrossCheckStateCount(),u=e;u>=0&&a.get(t,u);)s[2]++,u--;if(u<0)return NaN;for(;u>=0&&!a.get(t,u)&&s[1]<=r;)s[1]++,u--;if(u<0||s[1]>r)return NaN;for(;u>=0&&a.get(t,u)&&s[0]<=r;)s[0]++,u--;if(s[0]>r)return NaN;for(u=e+1;u<o&&a.get(t,u);)s[2]++,u++;if(u===o)return NaN;for(;u<o&&!a.get(t,u)&&s[3]<r;)s[3]++,u++;if(u===o||s[3]>=r)return NaN;for(;u<o&&a.get(t,u)&&s[4]<r;)s[4]++,u++;if(s[4]>=r)return NaN;var f=s[0]+s[1]+s[2]+s[3]+s[4];return 5*Math.abs(f-i)>=2*i?NaN:n.foundPatternCross(s)?n.centerFromEnd(s,u):NaN},n.prototype.crossCheckHorizontal=function(e,t,r,i){for(var a=this.image,o=a.getWidth(),s=this.getCrossCheckStateCount(),u=e;u>=0&&a.get(u,t);)s[2]++,u--;if(u<0)return NaN;for(;u>=0&&!a.get(u,t)&&s[1]<=r;)s[1]++,u--;if(u<0||s[1]>r)return NaN;for(;u>=0&&a.get(u,t)&&s[0]<=r;)s[0]++,u--;if(s[0]>r)return NaN;for(u=e+1;u<o&&a.get(u,t);)s[2]++,u++;if(u===o)return NaN;for(;u<o&&!a.get(u,t)&&s[3]<r;)s[3]++,u++;if(u===o||s[3]>=r)return NaN;for(;u<o&&a.get(u,t)&&s[4]<r;)s[4]++,u++;if(s[4]>=r)return NaN;var f=s[0]+s[1]+s[2]+s[3]+s[4];return 5*Math.abs(f-i)>=i?NaN:n.foundPatternCross(s)?n.centerFromEnd(s,u):NaN},n.prototype.handlePossibleCenter=function(e,t,r,i){var a=e[0]+e[1]+e[2]+e[3]+e[4],o=n.centerFromEnd(e,r),s=this.crossCheckVertical(t,Math.floor(o),e[2],a);if(!isNaN(s)&&(o=this.crossCheckHorizontal(Math.floor(o),Math.floor(s),e[2],a),!isNaN(o)&&(!i||this.crossCheckDiagonal(Math.floor(s),Math.floor(o),e[2],a)))){for(var u=a/7,f=!1,h=this.possibleCenters,p=0,g=h.length;p<g;p++){var m=h[p];if(m.aboutEquals(u,s,o)){h[p]=m.combineEstimate(s,o,u),f=!0;break}}if(!f){var _=new BB(o,s,u);h.push(_),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(_)}return!0}return!1},n.prototype.findRowSkip=function(){var e,t,r=this.possibleCenters.length;if(r<=1)return 0;var i=null;try{for(var a=_1(this.possibleCenters),o=a.next();!o.done;o=a.next()){var s=o.value;if(s.getCount()>=n.CENTER_QUORUM)if(i==null)i=s;else return this.hasSkipped=!0,Math.floor((Math.abs(i.getX()-s.getX())-Math.abs(i.getY()-s.getY()))/2)}}catch(u){e={error:u}}finally{try{o&&!o.done&&(t=a.return)&&t.call(a)}finally{if(e)throw e.error}}return 0},n.prototype.haveMultiplyConfirmedCenters=function(){var e,t,r,i,a=0,o=0,s=this.possibleCenters.length;try{for(var u=_1(this.possibleCenters),f=u.next();!f.done;f=u.next()){var h=f.value;h.getCount()>=n.CENTER_QUORUM&&(a++,o+=h.getEstimatedModuleSize())}}catch(b){e={error:b}}finally{try{f&&!f.done&&(t=u.return)&&t.call(u)}finally{if(e)throw e.error}}if(a<3)return!1;var p=o/s,g=0;try{for(var m=_1(this.possibleCenters),_=m.next();!_.done;_=m.next()){var h=_.value;g+=Math.abs(h.getEstimatedModuleSize()-p)}}catch(b){r={error:b}}finally{try{_&&!_.done&&(i=m.return)&&i.call(m)}finally{if(r)throw r.error}}return g<=.05*o},n.prototype.selectBestPatterns=function(){var e,t,r,i,a=this.possibleCenters.length;if(a<3)throw new ze;var o=this.possibleCenters,s;if(a>3){var u=0,f=0;try{for(var h=_1(this.possibleCenters),p=h.next();!p.done;p=h.next()){var g=p.value,m=g.getEstimatedModuleSize();u+=m,f+=m*m}}catch(Y){e={error:Y}}finally{try{p&&!p.done&&(t=h.return)&&t.call(h)}finally{if(e)throw e.error}}s=u/a;var _=Math.sqrt(f/a-s*s);o.sort(function(Y,q){var P=Math.abs(q.getEstimatedModuleSize()-s),E=Math.abs(Y.getEstimatedModuleSize()-s);return P<E?-1:P>E?1:0});for(var b=Math.max(.2*s,_),T=0;T<o.length&&o.length>3;T++){var S=o[T];Math.abs(S.getEstimatedModuleSize()-s)>b&&(o.splice(T,1),T--)}}if(o.length>3){var u=0;try{for(var D=_1(o),B=D.next();!B.done;B=D.next()){var V=B.value;u+=V.getEstimatedModuleSize()}}catch(q){r={error:q}}finally{try{B&&!B.done&&(i=D.return)&&i.call(D)}finally{if(r)throw r.error}}s=u/o.length,o.sort(function(q,P){if(P.getCount()===q.getCount()){var E=Math.abs(P.getEstimatedModuleSize()-s),C=Math.abs(q.getEstimatedModuleSize()-s);return E<C?1:E>C?-1:0}else return P.getCount()-q.getCount()}),o.splice(3)}return[o[0],o[1],o[2]]},n.CENTER_QUORUM=2,n.MIN_SKIP=3,n.MAX_MODULES=57,n}(),UB=function(){function n(e){this.image=e}return n.prototype.getImage=function(){return this.image},n.prototype.getResultPointCallback=function(){return this.resultPointCallback},n.prototype.detect=function(e){this.resultPointCallback=e==null?null:e.get(Pr.NEED_RESULT_POINT_CALLBACK);var t=new jB(this.image,this.resultPointCallback),r=t.find(e);return this.processFinderPatternInfo(r)},n.prototype.processFinderPatternInfo=function(e){var t=e.getTopLeft(),r=e.getTopRight(),i=e.getBottomLeft(),a=this.calculateModuleSize(t,r,i);if(a<1)throw new ze("No pattern found in proccess finder.");var o=n.computeDimension(t,r,i,a),s=Qf.getProvisionalVersionForDimension(o),u=s.getDimensionForVersion()-7,f=null;if(s.getAlignmentPatternCenters().length>0)for(var h=r.getX()-t.getX()+i.getX(),p=r.getY()-t.getY()+i.getY(),g=1-3/u,m=Math.floor(t.getX()+g*(h-t.getX())),_=Math.floor(t.getY()+g*(p-t.getY())),b=4;b<=16;b<<=1)try{f=this.findAlignmentInRegion(a,m,_,b);break}catch(B){if(!(B instanceof ze))throw B}var T=n.createTransform(t,r,i,f,o),S=n.sampleGrid(this.image,T,o),D;return f===null?D=[i,t,r]:D=[i,t,r,f],new rx(S,D)},n.createTransform=function(e,t,r,i,a){var o=a-3.5,s,u,f,h;return i!==null?(s=i.getX(),u=i.getY(),f=o-3,h=f):(s=t.getX()-e.getX()+r.getX(),u=t.getY()-e.getY()+r.getY(),f=o,h=o),uS.quadrilateralToQuadrilateral(3.5,3.5,o,3.5,f,h,3.5,o,e.getX(),e.getY(),t.getX(),t.getY(),s,u,r.getX(),r.getY())},n.sampleGrid=function(e,t,r){var i=ix.getInstance();return i.sampleGridWithTransform(e,r,r,t)},n.computeDimension=function(e,t,r,i){var a=qn.round(It.distance(e,t)/i),o=qn.round(It.distance(e,r)/i),s=Math.floor((a+o)/2)+7;switch(s&3){case 0:s++;break;case 2:s--;break;case 3:throw new ze("Dimensions could be not found.")}return s},n.prototype.calculateModuleSize=function(e,t,r){return(this.calculateModuleSizeOneWay(e,t)+this.calculateModuleSizeOneWay(e,r))/2},n.prototype.calculateModuleSizeOneWay=function(e,t){var r=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(e.getX()),Math.floor(e.getY()),Math.floor(t.getX()),Math.floor(t.getY())),i=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(t.getX()),Math.floor(t.getY()),Math.floor(e.getX()),Math.floor(e.getY()));return isNaN(r)?i/7:isNaN(i)?r/7:(r+i)/14},n.prototype.sizeOfBlackWhiteBlackRunBothWays=function(e,t,r,i){var a=this.sizeOfBlackWhiteBlackRun(e,t,r,i),o=1,s=e-(r-e);s<0?(o=e/(e-s),s=0):s>=this.image.getWidth()&&(o=(this.image.getWidth()-1-e)/(s-e),s=this.image.getWidth()-1);var u=Math.floor(t-(i-t)*o);return o=1,u<0?(o=t/(t-u),u=0):u>=this.image.getHeight()&&(o=(this.image.getHeight()-1-t)/(u-t),u=this.image.getHeight()-1),s=Math.floor(e+(s-e)*o),a+=this.sizeOfBlackWhiteBlackRun(e,t,s,u),a-1},n.prototype.sizeOfBlackWhiteBlackRun=function(e,t,r,i){var a=Math.abs(i-t)>Math.abs(r-e);if(a){var o=e;e=t,t=o,o=r,r=i,i=o}for(var s=Math.abs(r-e),u=Math.abs(i-t),f=-s/2,h=e<r?1:-1,p=t<i?1:-1,g=0,m=r+h,_=e,b=t;_!==m;_+=h){var T=a?b:_,S=a?_:b;if(g===1===this.image.get(T,S)){if(g===2)return qn.distance(_,b,e,t);g++}if(f+=u,f>0){if(b===i)break;b+=p,f-=s}}return g===2?qn.distance(r+h,i,e,t):NaN},n.prototype.findAlignmentInRegion=function(e,t,r,i){var a=Math.floor(i*e),o=Math.max(0,t-a),s=Math.min(this.image.getWidth()-1,t+a);if(s-o<e*3)throw new ze("Alignment top exceeds estimated module size.");var u=Math.max(0,r-a),f=Math.min(this.image.getHeight()-1,r+a);if(f-u<e*3)throw new ze("Alignment bottom exceeds estimated module size.");var h=new kB(this.image,o,u,s-o,f-u,e,this.resultPointCallback);return h.find()},n}(),_y=function(){function n(){this.decoder=new OB}return n.prototype.getDecoder=function(){return this.decoder},n.prototype.decode=function(e,t){var r,i;if(t!=null&&t.get(Pr.PURE_BARCODE)!==void 0){var a=n.extractPureBits(e.getBlackMatrix());r=this.decoder.decodeBitMatrix(a,t),i=n.NO_POINTS}else{var o=new UB(e.getBlackMatrix()).detect(t);r=this.decoder.decodeBitMatrix(o.getBits(),t),i=o.getPoints()}r.getOther()instanceof gS&&r.getOther().applyMirroredCorrection(i);var s=new Fa(r.getText(),r.getRawBytes(),void 0,i,Mt.QR_CODE,void 0),u=r.getByteSegments();u!==null&&s.putMetadata(fa.BYTE_SEGMENTS,u);var f=r.getECLevel();return f!==null&&s.putMetadata(fa.ERROR_CORRECTION_LEVEL,f),r.hasStructuredAppend()&&(s.putMetadata(fa.STRUCTURED_APPEND_SEQUENCE,r.getStructuredAppendSequenceNumber()),s.putMetadata(fa.STRUCTURED_APPEND_PARITY,r.getStructuredAppendParity())),s},n.prototype.reset=function(){},n.extractPureBits=function(e){var t=e.getTopLeftOnBit(),r=e.getBottomRightOnBit();if(t===null||r===null)throw new ze;var i=this.moduleSize(t,e),a=t[1],o=r[1],s=t[0],u=r[0];if(s>=u||a>=o)throw new ze;if(o-a!==u-s&&(u=s+(o-a),u>=e.getWidth()))throw new ze;var f=Math.round((u-s+1)/i),h=Math.round((o-a+1)/i);if(f<=0||h<=0)throw new ze;if(h!==f)throw new ze;var p=Math.floor(i/2);a+=p,s+=p;var g=s+Math.floor((f-1)*i)-u;if(g>0){if(g>p)throw new ze;s-=g}var m=a+Math.floor((h-1)*i)-o;if(m>0){if(m>p)throw new ze;a-=m}for(var _=new ru(f,h),b=0;b<h;b++)for(var T=a+Math.floor(b*i),S=0;S<f;S++)e.get(s+Math.floor(S*i),T)&&_.set(S,b);return _},n.moduleSize=function(e,t){for(var r=t.getHeight(),i=t.getWidth(),a=e[0],o=e[1],s=!0,u=0;a<i&&o<r;){if(s!==t.get(a,o)){if(++u===5)break;s=!s}a++,o++}if(a===i||o===r)throw new ze;return(a-e[0])/7},n.NO_POINTS=new Array,n}(),VB=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Pn=function(){function n(){}return n.prototype.PDF417Common=function(){},n.getBitCountSum=function(e){return qn.sum(e)},n.toIntArray=function(e){var t,r;if(e==null||!e.length)return n.EMPTY_INT_ARRAY;var i=new Int32Array(e.length),a=0;try{for(var o=VB(e),s=o.next();!s.done;s=o.next()){var u=s.value;i[a++]=u}}catch(f){t={error:f}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}return i},n.getCodeword=function(e){var t=Li.binarySearch(n.SYMBOL_TABLE,e&262143);return t<0?-1:(n.CODEWORD_TABLE[t]-1)%n.NUMBER_OF_CODEWORDS},n.NUMBER_OF_CODEWORDS=929,n.MAX_CODEWORDS_IN_BARCODE=n.NUMBER_OF_CODEWORDS-1,n.MIN_ROWS_IN_BARCODE=3,n.MAX_ROWS_IN_BARCODE=90,n.MODULES_IN_CODEWORD=17,n.MODULES_IN_STOP_PATTERN=18,n.BARS_IN_MODULE=8,n.EMPTY_INT_ARRAY=new Int32Array([]),n.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),n.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]),n}(),zB=function(){function n(e,t){this.bits=e,this.points=t}return n.prototype.getBits=function(){return this.bits},n.prototype.getPoints=function(){return this.points},n}(),qB=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},HB=function(){function n(){}return n.detectMultiple=function(e,t,r){var i=e.getBlackMatrix(),a=n.detect(r,i);return a.length||(i=i.clone(),i.rotate180(),a=n.detect(r,i)),new zB(i,a)},n.detect=function(e,t){for(var r,i,a=new Array,o=0,s=0,u=!1;o<t.getHeight();){var f=n.findVertices(t,o,s);if(f[0]==null&&f[3]==null){if(!u)break;u=!1,s=0;try{for(var h=(r=void 0,qB(a)),p=h.next();!p.done;p=h.next()){var g=p.value;g[1]!=null&&(o=Math.trunc(Math.max(o,g[1].getY()))),g[3]!=null&&(o=Math.max(o,Math.trunc(g[3].getY())))}}catch(m){r={error:m}}finally{try{p&&!p.done&&(i=h.return)&&i.call(h)}finally{if(r)throw r.error}}o+=n.ROW_STEP;continue}if(u=!0,a.push(f),!e)break;f[2]!=null?(s=Math.trunc(f[2].getX()),o=Math.trunc(f[2].getY())):(s=Math.trunc(f[4].getX()),o=Math.trunc(f[4].getY()))}return a},n.findVertices=function(e,t,r){var i=e.getHeight(),a=e.getWidth(),o=new Array(8);return n.copyToResult(o,n.findRowsWithPattern(e,i,a,t,r,n.START_PATTERN),n.INDEXES_START_PATTERN),o[4]!=null&&(r=Math.trunc(o[4].getX()),t=Math.trunc(o[4].getY())),n.copyToResult(o,n.findRowsWithPattern(e,i,a,t,r,n.STOP_PATTERN),n.INDEXES_STOP_PATTERN),o},n.copyToResult=function(e,t,r){for(var i=0;i<r.length;i++)e[r[i]]=t[i]},n.findRowsWithPattern=function(e,t,r,i,a,o){for(var s=new Array(4),u=!1,f=new Int32Array(o.length);i<t;i+=n.ROW_STEP){var h=n.findGuardPattern(e,a,i,r,!1,o,f);if(h!=null){for(;i>0;){var p=n.findGuardPattern(e,a,--i,r,!1,o,f);if(p!=null)h=p;else{i++;break}}s[0]=new It(h[0],i),s[1]=new It(h[1],i),u=!0;break}}var g=i+1;if(u){for(var m=0,p=Int32Array.from([Math.trunc(s[0].getX()),Math.trunc(s[1].getX())]);g<t;g++){var h=n.findGuardPattern(e,p[0],g,r,!1,o,f);if(h!=null&&Math.abs(p[0]-h[0])<n.MAX_PATTERN_DRIFT&&Math.abs(p[1]-h[1])<n.MAX_PATTERN_DRIFT)p=h,m=0;else{if(m>n.SKIPPED_ROW_COUNT_MAX)break;m++}}g-=m+1,s[2]=new It(p[0],g),s[3]=new It(p[1],g)}return g-i<n.BARCODE_MIN_HEIGHT&&Li.fill(s,null),s},n.findGuardPattern=function(e,t,r,i,a,o,s){Li.fillWithin(s,0,s.length,0);for(var u=t,f=0;e.get(u,r)&&u>0&&f++<n.MAX_PIXEL_DRIFT;)u--;for(var h=u,p=0,g=o.length,m=a;h<i;h++){var _=e.get(h,r);if(_!==m)s[p]++;else{if(p===g-1){if(n.patternMatchVariance(s,o,n.MAX_INDIVIDUAL_VARIANCE)<n.MAX_AVG_VARIANCE)return new Int32Array([u,h]);u+=s[0]+s[1],_r.arraycopy(s,2,s,0,p-1),s[p-1]=0,s[p]=0,p--}else p++;s[p]=1,m=!m}}return p===g-1&&n.patternMatchVariance(s,o,n.MAX_INDIVIDUAL_VARIANCE)<n.MAX_AVG_VARIANCE?new Int32Array([u,h-1]):null},n.patternMatchVariance=function(e,t,r){for(var i=e.length,a=0,o=0,s=0;s<i;s++)a+=e[s],o+=t[s];if(a<o)return 1/0;var u=a/o;r*=u;for(var f=0,h=0;h<i;h++){var p=e[h],g=t[h]*u,m=p>g?p-g:g-p;if(m>r)return 1/0;f+=m}return f/a},n.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),n.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),n.MAX_AVG_VARIANCE=.42,n.MAX_INDIVIDUAL_VARIANCE=.8,n.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),n.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),n.MAX_PIXEL_DRIFT=3,n.MAX_PATTERN_DRIFT=5,n.SKIPPED_ROW_COUNT_MAX=25,n.ROW_STEP=5,n.BARCODE_MIN_HEIGHT=10,n}(),GB=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Xf=function(){function n(e,t){if(t.length===0)throw new Bt;this.field=e;var r=t.length;if(r>1&&t[0]===0){for(var i=1;i<r&&t[i]===0;)i++;i===r?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(r-i),_r.arraycopy(t,i,this.coefficients,0,this.coefficients.length))}else this.coefficients=t}return n.prototype.getCoefficients=function(){return this.coefficients},n.prototype.getDegree=function(){return this.coefficients.length-1},n.prototype.isZero=function(){return this.coefficients[0]===0},n.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},n.prototype.evaluateAt=function(e){var t,r;if(e===0)return this.getCoefficient(0);if(e===1){var i=0;try{for(var a=GB(this.coefficients),o=a.next();!o.done;o=a.next()){var s=o.value;i=this.field.add(i,s)}}catch(p){t={error:p}}finally{try{o&&!o.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}return i}for(var u=this.coefficients[0],f=this.coefficients.length,h=1;h<f;h++)u=this.field.add(this.field.multiply(e,u),this.coefficients[h]);return u},n.prototype.add=function(e){if(!this.field.equals(e.field))throw new Bt("ModulusPolys do not have same ModulusGF field");if(this.isZero())return e;if(e.isZero())return this;var t=this.coefficients,r=e.coefficients;if(t.length>r.length){var i=t;t=r,r=i}var a=new Int32Array(r.length),o=r.length-t.length;_r.arraycopy(r,0,a,0,o);for(var s=o;s<r.length;s++)a[s]=this.field.add(t[s-o],r[s]);return new n(this.field,a)},n.prototype.subtract=function(e){if(!this.field.equals(e.field))throw new Bt("ModulusPolys do not have same ModulusGF field");return e.isZero()?this:this.add(e.negative())},n.prototype.multiply=function(e){return e instanceof n?this.multiplyOther(e):this.multiplyScalar(e)},n.prototype.multiplyOther=function(e){if(!this.field.equals(e.field))throw new Bt("ModulusPolys do not have same ModulusGF field");if(this.isZero()||e.isZero())return new n(this.field,new Int32Array([0]));for(var t=this.coefficients,r=t.length,i=e.coefficients,a=i.length,o=new Int32Array(r+a-1),s=0;s<r;s++)for(var u=t[s],f=0;f<a;f++)o[s+f]=this.field.add(o[s+f],this.field.multiply(u,i[f]));return new n(this.field,o)},n.prototype.negative=function(){for(var e=this.coefficients.length,t=new Int32Array(e),r=0;r<e;r++)t[r]=this.field.subtract(0,this.coefficients[r]);return new n(this.field,t)},n.prototype.multiplyScalar=function(e){if(e===0)return new n(this.field,new Int32Array([0]));if(e===1)return this;for(var t=this.coefficients.length,r=new Int32Array(t),i=0;i<t;i++)r[i]=this.field.multiply(this.coefficients[i],e);return new n(this.field,r)},n.prototype.multiplyByMonomial=function(e,t){if(e<0)throw new Bt;if(t===0)return new n(this.field,new Int32Array([0]));for(var r=this.coefficients.length,i=new Int32Array(r+e),a=0;a<r;a++)i[a]=this.field.multiply(this.coefficients[a],t);return new n(this.field,i)},n.prototype.toString=function(){for(var e=new cn,t=this.getDegree();t>=0;t--){var r=this.getCoefficient(t);r!==0&&(r<0?(e.append(" - "),r=-r):e.length()>0&&e.append(" + "),(t===0||r!==1)&&e.append(r),t!==0&&(t===1?e.append("x"):(e.append("x^"),e.append(t))))}return e.toString()},n}(),WB=function(){function n(){}return n.prototype.add=function(e,t){return(e+t)%this.modulus},n.prototype.subtract=function(e,t){return(this.modulus+e-t)%this.modulus},n.prototype.exp=function(e){return this.expTable[e]},n.prototype.log=function(e){if(e===0)throw new Bt;return this.logTable[e]},n.prototype.inverse=function(e){if(e===0)throw new lS;return this.expTable[this.modulus-this.logTable[e]-1]},n.prototype.multiply=function(e,t){return e===0||t===0?0:this.expTable[(this.logTable[e]+this.logTable[t])%(this.modulus-1)]},n.prototype.getSize=function(){return this.modulus},n.prototype.equals=function(e){return e===this},n}(),$B=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),XB=function(n){$B(e,n);function e(t,r){var i=n.call(this)||this;i.modulus=t,i.expTable=new Int32Array(t),i.logTable=new Int32Array(t);for(var a=1,o=0;o<t;o++)i.expTable[o]=a,a=a*r%t;for(var o=0;o<t-1;o++)i.logTable[i.expTable[o]]=o;return i.zero=new Xf(i,new Int32Array([0])),i.one=new Xf(i,new Int32Array([1])),i}return e.prototype.getZero=function(){return this.zero},e.prototype.getOne=function(){return this.one},e.prototype.buildMonomial=function(t,r){if(t<0)throw new Bt;if(r===0)return this.zero;var i=new Int32Array(t+1);return i[0]=r,new Xf(this,i)},e.PDF417_GF=new e(Pn.NUMBER_OF_CODEWORDS,3),e}(WB),YB=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},KB=function(){function n(){this.field=XB.PDF417_GF}return n.prototype.decode=function(e,t,r){for(var i,a,o=new Xf(this.field,e),s=new Int32Array(t),u=!1,f=t;f>0;f--){var h=o.evaluateAt(this.field.exp(f));s[t-f]=h,h!==0&&(u=!0)}if(!u)return 0;var p=this.field.getOne();if(r!=null)try{for(var g=YB(r),m=g.next();!m.done;m=g.next()){var _=m.value,b=this.field.exp(e.length-1-_),T=new Xf(this.field,new Int32Array([this.field.subtract(0,b),1]));p=p.multiply(T)}}catch(E){i={error:E}}finally{try{m&&!m.done&&(a=g.return)&&a.call(g)}finally{if(i)throw i.error}}for(var S=new Xf(this.field,s),D=this.runEuclideanAlgorithm(this.field.buildMonomial(t,1),S,t),B=D[0],V=D[1],Y=this.findErrorLocations(B),q=this.findErrorMagnitudes(V,B,Y),f=0;f<Y.length;f++){var P=e.length-1-this.field.log(Y[f]);if(P<0)throw Ki.getChecksumInstance();e[P]=this.field.subtract(e[P],q[f])}return Y.length},n.prototype.runEuclideanAlgorithm=function(e,t,r){if(e.getDegree()<t.getDegree()){var i=e;e=t,t=i}for(var a=e,o=t,s=this.field.getZero(),u=this.field.getOne();o.getDegree()>=Math.round(r/2);){var f=a,h=s;if(a=o,s=u,a.isZero())throw Ki.getChecksumInstance();o=f;for(var p=this.field.getZero(),g=a.getCoefficient(a.getDegree()),m=this.field.inverse(g);o.getDegree()>=a.getDegree()&&!o.isZero();){var _=o.getDegree()-a.getDegree(),b=this.field.multiply(o.getCoefficient(o.getDegree()),m);p=p.add(this.field.buildMonomial(_,b)),o=o.subtract(a.multiplyByMonomial(_,b))}u=p.multiply(s).subtract(h).negative()}var T=u.getCoefficient(0);if(T===0)throw Ki.getChecksumInstance();var S=this.field.inverse(T),D=u.multiply(S),B=o.multiply(S);return[D,B]},n.prototype.findErrorLocations=function(e){for(var t=e.getDegree(),r=new Int32Array(t),i=0,a=1;a<this.field.getSize()&&i<t;a++)e.evaluateAt(a)===0&&(r[i]=this.field.inverse(a),i++);if(i!==t)throw Ki.getChecksumInstance();return r},n.prototype.findErrorMagnitudes=function(e,t,r){for(var i=t.getDegree(),a=new Int32Array(i),o=1;o<=i;o++)a[i-o]=this.field.multiply(o,t.getCoefficient(o));for(var s=new Xf(this.field,a),u=r.length,f=new Int32Array(u),o=0;o<u;o++){var h=this.field.inverse(r[o]),p=this.field.subtract(0,e.evaluateAt(h)),g=this.field.inverse(s.evaluateAt(h));f[o]=this.field.multiply(p,g)}return f},n}(),wy=function(){function n(e,t,r,i,a){e instanceof n?this.constructor_2(e):this.constructor_1(e,t,r,i,a)}return n.prototype.constructor_1=function(e,t,r,i,a){var o=t==null||r==null,s=i==null||a==null;if(o&&s)throw new ze;o?(t=new It(0,i.getY()),r=new It(0,a.getY())):s&&(i=new It(e.getWidth()-1,t.getY()),a=new It(e.getWidth()-1,r.getY())),this.image=e,this.topLeft=t,this.bottomLeft=r,this.topRight=i,this.bottomRight=a,this.minX=Math.trunc(Math.min(t.getX(),r.getX())),this.maxX=Math.trunc(Math.max(i.getX(),a.getX())),this.minY=Math.trunc(Math.min(t.getY(),i.getY())),this.maxY=Math.trunc(Math.max(r.getY(),a.getY()))},n.prototype.constructor_2=function(e){this.image=e.image,this.topLeft=e.getTopLeft(),this.bottomLeft=e.getBottomLeft(),this.topRight=e.getTopRight(),this.bottomRight=e.getBottomRight(),this.minX=e.getMinX(),this.maxX=e.getMaxX(),this.minY=e.getMinY(),this.maxY=e.getMaxY()},n.merge=function(e,t){return e==null?t:t==null?e:new n(e.image,e.topLeft,e.bottomLeft,t.topRight,t.bottomRight)},n.prototype.addMissingRows=function(e,t,r){var i=this.topLeft,a=this.bottomLeft,o=this.topRight,s=this.bottomRight;if(e>0){var u=r?this.topLeft:this.topRight,f=Math.trunc(u.getY()-e);f<0&&(f=0);var h=new It(u.getX(),f);r?i=h:o=h}if(t>0){var p=r?this.bottomLeft:this.bottomRight,g=Math.trunc(p.getY()+t);g>=this.image.getHeight()&&(g=this.image.getHeight()-1);var m=new It(p.getX(),g);r?a=m:s=m}return new n(this.image,i,a,o,s)},n.prototype.getMinX=function(){return this.minX},n.prototype.getMaxX=function(){return this.maxX},n.prototype.getMinY=function(){return this.minY},n.prototype.getMaxY=function(){return this.maxY},n.prototype.getTopLeft=function(){return this.topLeft},n.prototype.getTopRight=function(){return this.topRight},n.prototype.getBottomLeft=function(){return this.bottomLeft},n.prototype.getBottomRight=function(){return this.bottomRight},n}(),QB=function(){function n(e,t,r,i){this.columnCount=e,this.errorCorrectionLevel=i,this.rowCountUpperPart=t,this.rowCountLowerPart=r,this.rowCount=t+r}return n.prototype.getColumnCount=function(){return this.columnCount},n.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},n.prototype.getRowCount=function(){return this.rowCount},n.prototype.getRowCountUpperPart=function(){return this.rowCountUpperPart},n.prototype.getRowCountLowerPart=function(){return this.rowCountLowerPart},n}(),ox=function(){function n(){this.buffer=""}return n.form=function(e,t){var r=-1;function i(o,s,u,f,h,p){if(o==="%%")return"%";if(t[++r]!==void 0){o=f?parseInt(f.substr(1)):void 0;var g=h?parseInt(h.substr(1)):void 0,m;switch(p){case"s":m=t[r];break;case"c":m=t[r][0];break;case"f":m=parseFloat(t[r]).toFixed(o);break;case"p":m=parseFloat(t[r]).toPrecision(o);break;case"e":m=parseFloat(t[r]).toExponential(o);break;case"x":m=parseInt(t[r]).toString(g||16);break;case"d":m=parseFloat(parseInt(t[r],g||10).toPrecision(o)).toFixed(0);break}m=typeof m=="object"?JSON.stringify(m):(+m).toString(g);for(var _=parseInt(u),b=u&&u[0]+""=="0"?"0":" ";m.length<_;)m=s!==void 0?m+b:b+m;return m}}var a=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(a,i)},n.prototype.format=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this.buffer+=n.form(e,t)},n.prototype.toString=function(){return this.buffer},n}(),ZB=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},mS=function(){function n(e){this.boundingBox=new wy(e),this.codewords=new Array(e.getMaxY()-e.getMinY()+1)}return n.prototype.getCodewordNearby=function(e){var t=this.getCodeword(e);if(t!=null)return t;for(var r=1;r<n.MAX_NEARBY_DISTANCE;r++){var i=this.imageRowToCodewordIndex(e)-r;if(i>=0&&(t=this.codewords[i],t!=null)||(i=this.imageRowToCodewordIndex(e)+r,i<this.codewords.length&&(t=this.codewords[i],t!=null)))return t}return null},n.prototype.imageRowToCodewordIndex=function(e){return e-this.boundingBox.getMinY()},n.prototype.setCodeword=function(e,t){this.codewords[this.imageRowToCodewordIndex(e)]=t},n.prototype.getCodeword=function(e){return this.codewords[this.imageRowToCodewordIndex(e)]},n.prototype.getBoundingBox=function(){return this.boundingBox},n.prototype.getCodewords=function(){return this.codewords},n.prototype.toString=function(){var e,t,r=new ox,i=0;try{for(var a=ZB(this.codewords),o=a.next();!o.done;o=a.next()){var s=o.value;if(s==null){r.format("%3d:    |   %n",i++);continue}r.format("%3d: %3d|%3d%n",i++,s.getRowNumber(),s.getValue())}}catch(u){e={error:u}}finally{try{o&&!o.done&&(t=a.return)&&t.call(a)}finally{if(e)throw e.error}}return r.toString()},n.MAX_NEARBY_DISTANCE=5,n}(),JB=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},eF=function(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,a=[],o;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(o)throw o.error}}return a},k1=function(){function n(){this.values=new Map}return n.prototype.setValue=function(e){e=Math.trunc(e);var t=this.values.get(e);t==null&&(t=0),t++,this.values.set(e,t)},n.prototype.getValue=function(){var e,t,r=-1,i=new Array,a=function(p,g){var m={getKey:function(){return p},getValue:function(){return g}};m.getValue()>r?(r=m.getValue(),i=[],i.push(m.getKey())):m.getValue()===r&&i.push(m.getKey())};try{for(var o=JB(this.values.entries()),s=o.next();!s.done;s=o.next()){var u=eF(s.value,2),f=u[0],h=u[1];a(f,h)}}catch(p){e={error:p}}finally{try{s&&!s.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}return Pn.toIntArray(i)},n.prototype.getConfidence=function(e){return this.values.get(e)},n}(),tF=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),pv=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Fb=function(n){tF(e,n);function e(t,r){var i=n.call(this,t)||this;return i._isLeft=r,i}return e.prototype.setRowNumbers=function(){var t,r;try{for(var i=pv(this.getCodewords()),a=i.next();!a.done;a=i.next()){var o=a.value;o!=null&&o.setRowNumberAsRowIndicatorColumn()}}catch(s){t={error:s}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}},e.prototype.adjustCompleteIndicatorColumnRowNumbers=function(t){var r=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(r,t);for(var i=this.getBoundingBox(),a=this._isLeft?i.getTopLeft():i.getTopRight(),o=this._isLeft?i.getBottomLeft():i.getBottomRight(),s=this.imageRowToCodewordIndex(Math.trunc(a.getY())),u=this.imageRowToCodewordIndex(Math.trunc(o.getY())),f=-1,h=1,p=0,g=s;g<u;g++)if(r[g]!=null){var m=r[g],_=m.getRowNumber()-f;if(_===0)p++;else if(_===1)h=Math.max(h,p),p=1,f=m.getRowNumber();else if(_<0||m.getRowNumber()>=t.getRowCount()||_>g)r[g]=null;else{var b=void 0;h>2?b=(h-2)*_:b=_;for(var T=b>=g,S=1;S<=b&&!T;S++)T=r[g-S]!=null;T?r[g]=null:(f=m.getRowNumber(),p=1)}}},e.prototype.getRowHeights=function(){var t,r,i=this.getBarcodeMetadata();if(i==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(i);var a=new Int32Array(i.getRowCount());try{for(var o=pv(this.getCodewords()),s=o.next();!s.done;s=o.next()){var u=s.value;if(u!=null){var f=u.getRowNumber();if(f>=a.length)continue;a[f]++}}}catch(h){t={error:h}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}return a},e.prototype.adjustIncompleteIndicatorColumnRowNumbers=function(t){for(var r=this.getBoundingBox(),i=this._isLeft?r.getTopLeft():r.getTopRight(),a=this._isLeft?r.getBottomLeft():r.getBottomRight(),o=this.imageRowToCodewordIndex(Math.trunc(i.getY())),s=this.imageRowToCodewordIndex(Math.trunc(a.getY())),u=this.getCodewords(),f=-1,h=o;h<s;h++)if(u[h]!=null){var p=u[h];p.setRowNumberAsRowIndicatorColumn();var g=p.getRowNumber()-f;g===0||(g===1?f=p.getRowNumber():p.getRowNumber()>=t.getRowCount()?u[h]=null:f=p.getRowNumber())}},e.prototype.getBarcodeMetadata=function(){var t,r,i=this.getCodewords(),a=new k1,o=new k1,s=new k1,u=new k1;try{for(var f=pv(i),h=f.next();!h.done;h=f.next()){var p=h.value;if(p!=null){p.setRowNumberAsRowIndicatorColumn();var g=p.getValue()%30,m=p.getRowNumber();switch(this._isLeft||(m+=2),m%3){case 0:o.setValue(g*3+1);break;case 1:u.setValue(g/3),s.setValue(g%3);break;case 2:a.setValue(g+1);break}}}}catch(b){t={error:b}}finally{try{h&&!h.done&&(r=f.return)&&r.call(f)}finally{if(t)throw t.error}}if(a.getValue().length===0||o.getValue().length===0||s.getValue().length===0||u.getValue().length===0||a.getValue()[0]<1||o.getValue()[0]+s.getValue()[0]<Pn.MIN_ROWS_IN_BARCODE||o.getValue()[0]+s.getValue()[0]>Pn.MAX_ROWS_IN_BARCODE)return null;var _=new QB(a.getValue()[0],o.getValue()[0],s.getValue()[0],u.getValue()[0]);return this.removeIncorrectCodewords(i,_),_},e.prototype.removeIncorrectCodewords=function(t,r){for(var i=0;i<t.length;i++){var a=t[i];if(t[i]!=null){var o=a.getValue()%30,s=a.getRowNumber();if(s>r.getRowCount()){t[i]=null;continue}switch(this._isLeft||(s+=2),s%3){case 0:o*3+1!==r.getRowCountUpperPart()&&(t[i]=null);break;case 1:(Math.trunc(o/3)!==r.getErrorCorrectionLevel()||o%3!==r.getRowCountLowerPart())&&(t[i]=null);break;case 2:o+1!==r.getColumnCount()&&(t[i]=null);break}}}},e.prototype.isLeft=function(){return this._isLeft},e.prototype.toString=function(){return"IsLeft: "+this._isLeft+`
`+n.prototype.toString.call(this)},e}(mS),nF=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},rF=function(){function n(e,t){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=e,this.barcodeColumnCount=e.getColumnCount(),this.boundingBox=t,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}return n.prototype.getDetectionResultColumns=function(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);var e=Pn.MAX_CODEWORDS_IN_BARCODE,t;do t=e,e=this.adjustRowNumbersAndGetCount();while(e>0&&e<t);return this.detectionResultColumns},n.prototype.adjustIndicatorColumnRowNumbers=function(e){e!=null&&e.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)},n.prototype.adjustRowNumbersAndGetCount=function(){var e=this.adjustRowNumbersByRow();if(e===0)return 0;for(var t=1;t<this.barcodeColumnCount+1;t++)for(var r=this.detectionResultColumns[t].getCodewords(),i=0;i<r.length;i++)r[i]!=null&&(r[i].hasValidRowNumber()||this.adjustRowNumbers(t,i,r));return e},n.prototype.adjustRowNumbersByRow=function(){this.adjustRowNumbersFromBothRI();var e=this.adjustRowNumbersFromLRI();return e+this.adjustRowNumbersFromRRI()},n.prototype.adjustRowNumbersFromBothRI=function(){if(!(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)){for(var e=this.detectionResultColumns[0].getCodewords(),t=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),r=0;r<e.length;r++)if(e[r]!=null&&t[r]!=null&&e[r].getRowNumber()===t[r].getRowNumber())for(var i=1;i<=this.barcodeColumnCount;i++){var a=this.detectionResultColumns[i].getCodewords()[r];a!=null&&(a.setRowNumber(e[r].getRowNumber()),a.hasValidRowNumber()||(this.detectionResultColumns[i].getCodewords()[r]=null))}}},n.prototype.adjustRowNumbersFromRRI=function(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;for(var e=0,t=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),r=0;r<t.length;r++)if(t[r]!=null)for(var i=t[r].getRowNumber(),a=0,o=this.barcodeColumnCount+1;o>0&&a<this.ADJUST_ROW_NUMBER_SKIP;o--){var s=this.detectionResultColumns[o].getCodewords()[r];s!=null&&(a=n.adjustRowNumberIfValid(i,a,s),s.hasValidRowNumber()||e++)}return e},n.prototype.adjustRowNumbersFromLRI=function(){if(this.detectionResultColumns[0]==null)return 0;for(var e=0,t=this.detectionResultColumns[0].getCodewords(),r=0;r<t.length;r++)if(t[r]!=null)for(var i=t[r].getRowNumber(),a=0,o=1;o<this.barcodeColumnCount+1&&a<this.ADJUST_ROW_NUMBER_SKIP;o++){var s=this.detectionResultColumns[o].getCodewords()[r];s!=null&&(a=n.adjustRowNumberIfValid(i,a,s),s.hasValidRowNumber()||e++)}return e},n.adjustRowNumberIfValid=function(e,t,r){return r==null||r.hasValidRowNumber()||(r.isValidRowNumber(e)?(r.setRowNumber(e),t=0):++t),t},n.prototype.adjustRowNumbers=function(e,t,r){var i,a;if(this.detectionResultColumns[e-1]!=null){var o=r[t],s=this.detectionResultColumns[e-1].getCodewords(),u=s;this.detectionResultColumns[e+1]!=null&&(u=this.detectionResultColumns[e+1].getCodewords());var f=new Array(14);f[2]=s[t],f[3]=u[t],t>0&&(f[0]=r[t-1],f[4]=s[t-1],f[5]=u[t-1]),t>1&&(f[8]=r[t-2],f[10]=s[t-2],f[11]=u[t-2]),t<r.length-1&&(f[1]=r[t+1],f[6]=s[t+1],f[7]=u[t+1]),t<r.length-2&&(f[9]=r[t+2],f[12]=s[t+2],f[13]=u[t+2]);try{for(var h=nF(f),p=h.next();!p.done;p=h.next()){var g=p.value;if(n.adjustRowNumber(o,g))return}}catch(m){i={error:m}}finally{try{p&&!p.done&&(a=h.return)&&a.call(h)}finally{if(i)throw i.error}}}},n.adjustRowNumber=function(e,t){return t==null?!1:t.hasValidRowNumber()&&t.getBucket()===e.getBucket()?(e.setRowNumber(t.getRowNumber()),!0):!1},n.prototype.getBarcodeColumnCount=function(){return this.barcodeColumnCount},n.prototype.getBarcodeRowCount=function(){return this.barcodeMetadata.getRowCount()},n.prototype.getBarcodeECLevel=function(){return this.barcodeMetadata.getErrorCorrectionLevel()},n.prototype.setBoundingBox=function(e){this.boundingBox=e},n.prototype.getBoundingBox=function(){return this.boundingBox},n.prototype.setDetectionResultColumn=function(e,t){this.detectionResultColumns[e]=t},n.prototype.getDetectionResultColumn=function(e){return this.detectionResultColumns[e]},n.prototype.toString=function(){var e=this.detectionResultColumns[0];e==null&&(e=this.detectionResultColumns[this.barcodeColumnCount+1]);for(var t=new ox,r=0;r<e.getCodewords().length;r++){t.format("CW %3d:",r);for(var i=0;i<this.barcodeColumnCount+2;i++){if(this.detectionResultColumns[i]==null){t.format("    |   ");continue}var a=this.detectionResultColumns[i].getCodewords()[r];if(a==null){t.format("    |   ");continue}t.format(" %3d|%3d",a.getRowNumber(),a.getValue())}t.format("%n")}return t.toString()},n}(),iF=function(){function n(e,t,r,i){this.rowNumber=n.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(e),this.endX=Math.trunc(t),this.bucket=Math.trunc(r),this.value=Math.trunc(i)}return n.prototype.hasValidRowNumber=function(){return this.isValidRowNumber(this.rowNumber)},n.prototype.isValidRowNumber=function(e){return e!==n.BARCODE_ROW_UNKNOWN&&this.bucket===e%3*3},n.prototype.setRowNumberAsRowIndicatorColumn=function(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))},n.prototype.getWidth=function(){return this.endX-this.startX},n.prototype.getStartX=function(){return this.startX},n.prototype.getEndX=function(){return this.endX},n.prototype.getBucket=function(){return this.bucket},n.prototype.getValue=function(){return this.value},n.prototype.getRowNumber=function(){return this.rowNumber},n.prototype.setRowNumber=function(e){this.rowNumber=e},n.prototype.toString=function(){return this.rowNumber+"|"+this.value},n.BARCODE_ROW_UNKNOWN=-1,n}(),aF=function(){function n(){}return n.initialize=function(){for(var e=0;e<Pn.SYMBOL_TABLE.length;e++)for(var t=Pn.SYMBOL_TABLE[e],r=t&1,i=0;i<Pn.BARS_IN_MODULE;i++){for(var a=0;(t&1)===r;)a+=1,t>>=1;r=t&1,n.RATIOS_TABLE[e]||(n.RATIOS_TABLE[e]=new Array(Pn.BARS_IN_MODULE)),n.RATIOS_TABLE[e][Pn.BARS_IN_MODULE-i-1]=Math.fround(a/Pn.MODULES_IN_CODEWORD)}this.bSymbolTableReady=!0},n.getDecodedValue=function(e){var t=n.getDecodedCodewordValue(n.sampleBitCounts(e));return t!==-1?t:n.getClosestDecodedValue(e)},n.sampleBitCounts=function(e){for(var t=qn.sum(e),r=new Int32Array(Pn.BARS_IN_MODULE),i=0,a=0,o=0;o<Pn.MODULES_IN_CODEWORD;o++){var s=t/(2*Pn.MODULES_IN_CODEWORD)+o*t/Pn.MODULES_IN_CODEWORD;a+e[i]<=s&&(a+=e[i],i++),r[i]++}return r},n.getDecodedCodewordValue=function(e){var t=n.getBitValue(e);return Pn.getCodeword(t)===-1?-1:t},n.getBitValue=function(e){for(var t=0,r=0;r<e.length;r++)for(var i=0;i<e[r];i++)t=t<<1|(r%2===0?1:0);return Math.trunc(t)},n.getClosestDecodedValue=function(e){var t=qn.sum(e),r=new Array(Pn.BARS_IN_MODULE);if(t>1)for(var i=0;i<r.length;i++)r[i]=Math.fround(e[i]/t);var a=gy.MAX_VALUE,o=-1;this.bSymbolTableReady||n.initialize();for(var s=0;s<n.RATIOS_TABLE.length;s++){for(var u=0,f=n.RATIOS_TABLE[s],h=0;h<Pn.BARS_IN_MODULE;h++){var p=Math.fround(f[h]-r[h]);if(u+=Math.fround(p*p),u>=a)break}u<a&&(a=u,o=Pn.SYMBOL_TABLE[s])}return o},n.bSymbolTableReady=!1,n.RATIOS_TABLE=new Array(Pn.SYMBOL_TABLE.length).map(function(e){return new Array(Pn.BARS_IN_MODULE)}),n}(),oF=function(){function n(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}return n.prototype.getSegmentIndex=function(){return this.segmentIndex},n.prototype.setSegmentIndex=function(e){this.segmentIndex=e},n.prototype.getFileId=function(){return this.fileId},n.prototype.setFileId=function(e){this.fileId=e},n.prototype.getOptionalData=function(){return this.optionalData},n.prototype.setOptionalData=function(e){this.optionalData=e},n.prototype.isLastSegment=function(){return this.lastSegment},n.prototype.setLastSegment=function(e){this.lastSegment=e},n.prototype.getSegmentCount=function(){return this.segmentCount},n.prototype.setSegmentCount=function(e){this.segmentCount=e},n.prototype.getSender=function(){return this.sender||null},n.prototype.setSender=function(e){this.sender=e},n.prototype.getAddressee=function(){return this.addressee||null},n.prototype.setAddressee=function(e){this.addressee=e},n.prototype.getFileName=function(){return this.fileName},n.prototype.setFileName=function(e){this.fileName=e},n.prototype.getFileSize=function(){return this.fileSize},n.prototype.setFileSize=function(e){this.fileSize=e},n.prototype.getChecksum=function(){return this.checksum},n.prototype.setChecksum=function(e){this.checksum=e},n.prototype.getTimestamp=function(){return this.timestamp},n.prototype.setTimestamp=function(e){this.timestamp=e},n}(),jb=function(){function n(){}return n.parseLong=function(e,t){return t===void 0&&(t=void 0),parseInt(e,t)},n}(),sF=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),lF=function(n){sF(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="NullPointerException",e}(bo),uF=function(){function n(){}return n.prototype.writeBytes=function(e){this.writeBytesOffset(e,0,e.length)},n.prototype.writeBytesOffset=function(e,t,r){if(e==null)throw new lF;if(t<0||t>e.length||r<0||t+r>e.length||t+r<0)throw new tx;if(r===0)return;for(var i=0;i<r;i++)this.write(e[t+i])},n.prototype.flush=function(){},n.prototype.close=function(){},n}(),cF=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),fF=function(n){cF(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e}(bo),hF=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),dF=function(n){hF(e,n);function e(t){t===void 0&&(t=32);var r=n.call(this)||this;if(r.count=0,t<0)throw new Bt("Negative initial size: "+t);return r.buf=new Uint8Array(t),r}return e.prototype.ensureCapacity=function(t){t-this.buf.length>0&&this.grow(t)},e.prototype.grow=function(t){var r=this.buf.length,i=r<<1;if(i-t<0&&(i=t),i<0){if(t<0)throw new fF;i=gn.MAX_VALUE}this.buf=Li.copyOfUint8Array(this.buf,i)},e.prototype.write=function(t){this.ensureCapacity(this.count+1),this.buf[this.count]=t,this.count+=1},e.prototype.writeBytesOffset=function(t,r,i){if(r<0||r>t.length||i<0||r+i-t.length>0)throw new tx;this.ensureCapacity(this.count+i),_r.arraycopy(t,r,this.buf,this.count,i),this.count+=i},e.prototype.writeTo=function(t){t.writeBytesOffset(this.buf,0,this.count)},e.prototype.reset=function(){this.count=0},e.prototype.toByteArray=function(){return Li.copyOfUint8Array(this.buf,this.count)},e.prototype.size=function(){return this.count},e.prototype.toString=function(t){return t?typeof t=="string"?this.toString_string(t):this.toString_number(t):this.toString_void()},e.prototype.toString_void=function(){return new String(this.buf).toString()},e.prototype.toString_string=function(t){return new String(this.buf).toString()},e.prototype.toString_number=function(t){return new String(this.buf).toString()},e.prototype.close=function(){},e}(uF),hr;(function(n){n[n.ALPHA=0]="ALPHA",n[n.LOWER=1]="LOWER",n[n.MIXED=2]="MIXED",n[n.PUNCT=3]="PUNCT",n[n.ALPHA_SHIFT=4]="ALPHA_SHIFT",n[n.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(hr||(hr={}));function vS(){if(typeof window<"u")return window.BigInt||null;if(typeof global<"u")return global.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}var Pp;function Gc(n){if(typeof Pp>"u"&&(Pp=vS()),Pp===null)throw new Error("BigInt is not supported!");return Pp(n)}function pF(){var n=[];n[0]=Gc(1);var e=Gc(900);n[1]=e;for(var t=2;t<16;t++)n[t]=n[t-1]*e;return n}var gF=function(){function n(){}return n.decode=function(e,t){var r=new cn(""),i=Pi.ISO8859_1;r.enableDecoding(i);for(var a=1,o=e[a++],s=new oF;a<e[0];){switch(o){case n.TEXT_COMPACTION_MODE_LATCH:a=n.textCompaction(e,a,r);break;case n.BYTE_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:a=n.byteCompaction(o,e,i,a,r);break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(e[a++]);break;case n.NUMERIC_COMPACTION_MODE_LATCH:a=n.numericCompaction(e,a,r);break;case n.ECI_CHARSET:Pi.getCharacterSetECIByValue(e[a++]);break;case n.ECI_GENERAL_PURPOSE:a+=2;break;case n.ECI_USER_DEFINED:a++;break;case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:a=n.decodeMacroBlock(e,a,s);break;case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:throw new pt;default:a--,a=n.textCompaction(e,a,r);break}if(a<e.length)o=e[a++];else throw pt.getFormatInstance()}if(r.length()===0)throw pt.getFormatInstance();var u=new S2(null,r.toString(),null,t);return u.setOther(s),u},n.decodeMacroBlock=function(e,t,r){if(t+n.NUMBER_OF_SEQUENCE_CODEWORDS>e[0])throw pt.getFormatInstance();for(var i=new Int32Array(n.NUMBER_OF_SEQUENCE_CODEWORDS),a=0;a<n.NUMBER_OF_SEQUENCE_CODEWORDS;a++,t++)i[a]=e[t];r.setSegmentIndex(gn.parseInt(n.decodeBase900toBase10(i,n.NUMBER_OF_SEQUENCE_CODEWORDS)));var o=new cn;t=n.textCompaction(e,t,o),r.setFileId(o.toString());var s=-1;for(e[t]===n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(s=t+1);t<e[0];)switch(e[t]){case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(t++,e[t]){case n.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:var u=new cn;t=n.textCompaction(e,t+1,u),r.setFileName(u.toString());break;case n.MACRO_PDF417_OPTIONAL_FIELD_SENDER:var f=new cn;t=n.textCompaction(e,t+1,f),r.setSender(f.toString());break;case n.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:var h=new cn;t=n.textCompaction(e,t+1,h),r.setAddressee(h.toString());break;case n.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:var p=new cn;t=n.numericCompaction(e,t+1,p),r.setSegmentCount(gn.parseInt(p.toString()));break;case n.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:var g=new cn;t=n.numericCompaction(e,t+1,g),r.setTimestamp(jb.parseLong(g.toString()));break;case n.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:var m=new cn;t=n.numericCompaction(e,t+1,m),r.setChecksum(gn.parseInt(m.toString()));break;case n.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:var _=new cn;t=n.numericCompaction(e,t+1,_),r.setFileSize(jb.parseLong(_.toString()));break;default:throw pt.getFormatInstance()}break;case n.MACRO_PDF417_TERMINATOR:t++,r.setLastSegment(!0);break;default:throw pt.getFormatInstance()}if(s!==-1){var b=t-s;r.isLastSegment()&&b--,r.setOptionalData(Li.copyOfRange(e,s,s+b))}return t},n.textCompaction=function(e,t,r){for(var i=new Int32Array((e[0]-t)*2),a=new Int32Array((e[0]-t)*2),o=0,s=!1;t<e[0]&&!s;){var u=e[t++];if(u<n.TEXT_COMPACTION_MODE_LATCH)i[o]=u/30,i[o+1]=u%30,o+=2;else switch(u){case n.TEXT_COMPACTION_MODE_LATCH:i[o++]=n.TEXT_COMPACTION_MODE_LATCH;break;case n.BYTE_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:case n.NUMERIC_COMPACTION_MODE_LATCH:case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:t--,s=!0;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i[o]=n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,u=e[t++],a[o]=u,o++;break}}return n.decodeTextCompaction(i,a,o,r),t},n.decodeTextCompaction=function(e,t,r,i){for(var a=hr.ALPHA,o=hr.ALPHA,s=0;s<r;){var u=e[s],f="";switch(a){case hr.ALPHA:if(u<26)f=String.fromCharCode(65+u);else switch(u){case 26:f=" ";break;case n.LL:a=hr.LOWER;break;case n.ML:a=hr.MIXED;break;case n.PS:o=a,a=hr.PUNCT_SHIFT;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[s]);break;case n.TEXT_COMPACTION_MODE_LATCH:a=hr.ALPHA;break}break;case hr.LOWER:if(u<26)f=String.fromCharCode(97+u);else switch(u){case 26:f=" ";break;case n.AS:o=a,a=hr.ALPHA_SHIFT;break;case n.ML:a=hr.MIXED;break;case n.PS:o=a,a=hr.PUNCT_SHIFT;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[s]);break;case n.TEXT_COMPACTION_MODE_LATCH:a=hr.ALPHA;break}break;case hr.MIXED:if(u<n.PL)f=n.MIXED_CHARS[u];else switch(u){case n.PL:a=hr.PUNCT;break;case 26:f=" ";break;case n.LL:a=hr.LOWER;break;case n.AL:a=hr.ALPHA;break;case n.PS:o=a,a=hr.PUNCT_SHIFT;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[s]);break;case n.TEXT_COMPACTION_MODE_LATCH:a=hr.ALPHA;break}break;case hr.PUNCT:if(u<n.PAL)f=n.PUNCT_CHARS[u];else switch(u){case n.PAL:a=hr.ALPHA;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[s]);break;case n.TEXT_COMPACTION_MODE_LATCH:a=hr.ALPHA;break}break;case hr.ALPHA_SHIFT:if(a=o,u<26)f=String.fromCharCode(65+u);else switch(u){case 26:f=" ";break;case n.TEXT_COMPACTION_MODE_LATCH:a=hr.ALPHA;break}break;case hr.PUNCT_SHIFT:if(a=o,u<n.PAL)f=n.PUNCT_CHARS[u];else switch(u){case n.PAL:a=hr.ALPHA;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[s]);break;case n.TEXT_COMPACTION_MODE_LATCH:a=hr.ALPHA;break}break}f!==""&&i.append(f),s++}},n.byteCompaction=function(e,t,r,i,a){var o=new dF,s=0,u=0,f=!1;switch(e){case n.BYTE_COMPACTION_MODE_LATCH:for(var h=new Int32Array(6),p=t[i++];i<t[0]&&!f;)switch(h[s++]=p,u=900*u+p,p=t[i++],p){case n.TEXT_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH:case n.NUMERIC_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:i--,f=!0;break;default:if(s%5===0&&s>0){for(var g=0;g<6;++g)o.write(Number(Gc(u)>>Gc(8*(5-g))));u=0,s=0}break}i===t[0]&&p<n.TEXT_COMPACTION_MODE_LATCH&&(h[s++]=p);for(var m=0;m<s;m++)o.write(h[m]);break;case n.BYTE_COMPACTION_MODE_LATCH_6:for(;i<t[0]&&!f;){var _=t[i++];if(_<n.TEXT_COMPACTION_MODE_LATCH)s++,u=900*u+_;else switch(_){case n.TEXT_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH:case n.NUMERIC_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:i--,f=!0;break}if(s%5===0&&s>0){for(var g=0;g<6;++g)o.write(Number(Gc(u)>>Gc(8*(5-g))));u=0,s=0}}break}return a.append(ws.decode(o.toByteArray(),r)),i},n.numericCompaction=function(e,t,r){for(var i=0,a=!1,o=new Int32Array(n.MAX_NUMERIC_CODEWORDS);t<e[0]&&!a;){var s=e[t++];if(t===e[0]&&(a=!0),s<n.TEXT_COMPACTION_MODE_LATCH)o[i]=s,i++;else switch(s){case n.TEXT_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:t--,a=!0;break}(i%n.MAX_NUMERIC_CODEWORDS===0||s===n.NUMERIC_COMPACTION_MODE_LATCH||a)&&i>0&&(r.append(n.decodeBase900toBase10(o,i)),i=0)}return t},n.decodeBase900toBase10=function(e,t){for(var r=Gc(0),i=0;i<t;i++)r+=n.EXP900[t-i-1]*Gc(e[i]);var a=r.toString();if(a.charAt(0)!=="1")throw new pt;return a.substring(1)},n.TEXT_COMPACTION_MODE_LATCH=900,n.BYTE_COMPACTION_MODE_LATCH=901,n.NUMERIC_COMPACTION_MODE_LATCH=902,n.BYTE_COMPACTION_MODE_LATCH_6=924,n.ECI_USER_DEFINED=925,n.ECI_GENERAL_PURPOSE=926,n.ECI_CHARSET=927,n.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,n.MACRO_PDF417_TERMINATOR=922,n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,n.MAX_NUMERIC_CODEWORDS=15,n.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,n.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,n.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,n.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,n.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,n.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,n.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,n.PL=25,n.LL=27,n.AS=27,n.ML=28,n.AL=28,n.PS=29,n.PAL=29,n.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,n.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",n.EXP900=vS()?pF():[],n.NUMBER_OF_SEQUENCE_CODEWORDS=2,n}(),w1=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},mF=function(){function n(){}return n.decode=function(e,t,r,i,a,o,s){for(var u=new wy(e,t,r,i,a),f=null,h=null,p,g=!0;;g=!1){if(t!=null&&(f=n.getRowIndicatorColumn(e,u,t,!0,o,s)),i!=null&&(h=n.getRowIndicatorColumn(e,u,i,!1,o,s)),p=n.merge(f,h),p==null)throw ze.getNotFoundInstance();var m=p.getBoundingBox();if(g&&m!=null&&(m.getMinY()<u.getMinY()||m.getMaxY()>u.getMaxY()))u=m;else break}p.setBoundingBox(u);var _=p.getBarcodeColumnCount()+1;p.setDetectionResultColumn(0,f),p.setDetectionResultColumn(_,h);for(var b=f!=null,T=1;T<=_;T++){var S=b?T:_-T;if(p.getDetectionResultColumn(S)===void 0){var D=void 0;S===0||S===_?D=new Fb(u,S===0):D=new mS(u),p.setDetectionResultColumn(S,D);for(var B=-1,V=B,Y=u.getMinY();Y<=u.getMaxY();Y++){if(B=n.getStartColumn(p,S,Y,b),B<0||B>u.getMaxX()){if(V===-1)continue;B=V}var q=n.detectCodeword(e,u.getMinX(),u.getMaxX(),b,B,Y,o,s);q!=null&&(D.setCodeword(Y,q),V=B,o=Math.min(o,q.getWidth()),s=Math.max(s,q.getWidth()))}}}return n.createDecoderResult(p)},n.merge=function(e,t){if(e==null&&t==null)return null;var r=n.getBarcodeMetadata(e,t);if(r==null)return null;var i=wy.merge(n.adjustBoundingBox(e),n.adjustBoundingBox(t));return new rF(r,i)},n.adjustBoundingBox=function(e){var t,r;if(e==null)return null;var i=e.getRowHeights();if(i==null)return null;var a=n.getMax(i),o=0;try{for(var s=w1(i),u=s.next();!u.done;u=s.next()){var f=u.value;if(o+=a-f,f>0)break}}catch(m){t={error:m}}finally{try{u&&!u.done&&(r=s.return)&&r.call(s)}finally{if(t)throw t.error}}for(var h=e.getCodewords(),p=0;o>0&&h[p]==null;p++)o--;for(var g=0,p=i.length-1;p>=0&&(g+=a-i[p],!(i[p]>0));p--);for(var p=h.length-1;g>0&&h[p]==null;p--)g--;return e.getBoundingBox().addMissingRows(o,g,e.isLeft())},n.getMax=function(e){var t,r,i=-1;try{for(var a=w1(e),o=a.next();!o.done;o=a.next()){var s=o.value;i=Math.max(i,s)}}catch(u){t={error:u}}finally{try{o&&!o.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}return i},n.getBarcodeMetadata=function(e,t){var r;if(e==null||(r=e.getBarcodeMetadata())==null)return t==null?null:t.getBarcodeMetadata();var i;return t==null||(i=t.getBarcodeMetadata())==null?r:r.getColumnCount()!==i.getColumnCount()&&r.getErrorCorrectionLevel()!==i.getErrorCorrectionLevel()&&r.getRowCount()!==i.getRowCount()?null:r},n.getRowIndicatorColumn=function(e,t,r,i,a,o){for(var s=new Fb(t,i),u=0;u<2;u++)for(var f=u===0?1:-1,h=Math.trunc(Math.trunc(r.getX())),p=Math.trunc(Math.trunc(r.getY()));p<=t.getMaxY()&&p>=t.getMinY();p+=f){var g=n.detectCodeword(e,0,e.getWidth(),i,h,p,a,o);g!=null&&(s.setCodeword(p,g),i?h=g.getStartX():h=g.getEndX())}return s},n.adjustCodewordCount=function(e,t){var r=t[0][1],i=r.getValue(),a=e.getBarcodeColumnCount()*e.getBarcodeRowCount()-n.getNumberOfECCodeWords(e.getBarcodeECLevel());if(i.length===0){if(a<1||a>Pn.MAX_CODEWORDS_IN_BARCODE)throw ze.getNotFoundInstance();r.setValue(a)}else i[0]!==a&&r.setValue(a)},n.createDecoderResult=function(e){var t=n.createBarcodeMatrix(e);n.adjustCodewordCount(e,t);for(var r=new Array,i=new Int32Array(e.getBarcodeRowCount()*e.getBarcodeColumnCount()),a=[],o=new Array,s=0;s<e.getBarcodeRowCount();s++)for(var u=0;u<e.getBarcodeColumnCount();u++){var f=t[s][u+1].getValue(),h=s*e.getBarcodeColumnCount()+u;f.length===0?r.push(h):f.length===1?i[h]=f[0]:(o.push(h),a.push(f))}for(var p=new Array(a.length),g=0;g<p.length;g++)p[g]=a[g];return n.createDecoderResultFromAmbiguousValues(e.getBarcodeECLevel(),i,Pn.toIntArray(r),Pn.toIntArray(o),p)},n.createDecoderResultFromAmbiguousValues=function(e,t,r,i,a){for(var o=new Int32Array(i.length),s=100;s-- >0;){for(var u=0;u<o.length;u++)t[i[u]]=a[u][o[u]];try{return n.decodeCodewords(t,e,r)}catch(h){var f=h instanceof Ki;if(!f)throw h}if(o.length===0)throw Ki.getChecksumInstance();for(var u=0;u<o.length;u++)if(o[u]<a[u].length-1){o[u]++;break}else if(o[u]=0,u===o.length-1)throw Ki.getChecksumInstance()}throw Ki.getChecksumInstance()},n.createBarcodeMatrix=function(e){for(var t,r,i,a,o=Array.from({length:e.getBarcodeRowCount()},function(){return new Array(e.getBarcodeColumnCount()+2)}),s=0;s<o.length;s++)for(var u=0;u<o[s].length;u++)o[s][u]=new k1;var f=0;try{for(var h=w1(e.getDetectionResultColumns()),p=h.next();!p.done;p=h.next()){var g=p.value;if(g!=null)try{for(var m=(i=void 0,w1(g.getCodewords())),_=m.next();!_.done;_=m.next()){var b=_.value;if(b!=null){var T=b.getRowNumber();if(T>=0){if(T>=o.length)continue;o[T][f].setValue(b.getValue())}}}}catch(S){i={error:S}}finally{try{_&&!_.done&&(a=m.return)&&a.call(m)}finally{if(i)throw i.error}}f++}}catch(S){t={error:S}}finally{try{p&&!p.done&&(r=h.return)&&r.call(h)}finally{if(t)throw t.error}}return o},n.isValidBarcodeColumn=function(e,t){return t>=0&&t<=e.getBarcodeColumnCount()+1},n.getStartColumn=function(e,t,r,i){var a,o,s=i?1:-1,u=null;if(n.isValidBarcodeColumn(e,t-s)&&(u=e.getDetectionResultColumn(t-s).getCodeword(r)),u!=null)return i?u.getEndX():u.getStartX();if(u=e.getDetectionResultColumn(t).getCodewordNearby(r),u!=null)return i?u.getStartX():u.getEndX();if(n.isValidBarcodeColumn(e,t-s)&&(u=e.getDetectionResultColumn(t-s).getCodewordNearby(r)),u!=null)return i?u.getEndX():u.getStartX();for(var f=0;n.isValidBarcodeColumn(e,t-s);){t-=s;try{for(var h=(a=void 0,w1(e.getDetectionResultColumn(t).getCodewords())),p=h.next();!p.done;p=h.next()){var g=p.value;if(g!=null)return(i?g.getEndX():g.getStartX())+s*f*(g.getEndX()-g.getStartX())}}catch(m){a={error:m}}finally{try{p&&!p.done&&(o=h.return)&&o.call(h)}finally{if(a)throw a.error}}f++}return i?e.getBoundingBox().getMinX():e.getBoundingBox().getMaxX()},n.detectCodeword=function(e,t,r,i,a,o,s,u){a=n.adjustCodewordStartColumn(e,t,r,i,a,o);var f=n.getModuleBitCount(e,t,r,i,a,o);if(f==null)return null;var h,p=qn.sum(f);if(i)h=a+p;else{for(var g=0;g<f.length/2;g++){var m=f[g];f[g]=f[f.length-1-g],f[f.length-1-g]=m}h=a,a=h-p}if(!n.checkCodewordSkew(p,s,u))return null;var _=aF.getDecodedValue(f),b=Pn.getCodeword(_);return b===-1?null:new iF(a,h,n.getCodewordBucketNumber(_),b)},n.getModuleBitCount=function(e,t,r,i,a,o){for(var s=a,u=new Int32Array(8),f=0,h=i?1:-1,p=i;(i?s<r:s>=t)&&f<u.length;)e.get(s,o)===p?(u[f]++,s+=h):(f++,p=!p);return f===u.length||s===(i?r:t)&&f===u.length-1?u:null},n.getNumberOfECCodeWords=function(e){return 2<<e},n.adjustCodewordStartColumn=function(e,t,r,i,a,o){for(var s=a,u=i?-1:1,f=0;f<2;f++){for(;(i?s>=t:s<r)&&i===e.get(s,o);){if(Math.abs(a-s)>n.CODEWORD_SKEW_SIZE)return a;s+=u}u=-u,i=!i}return s},n.checkCodewordSkew=function(e,t,r){return t-n.CODEWORD_SKEW_SIZE<=e&&e<=r+n.CODEWORD_SKEW_SIZE},n.decodeCodewords=function(e,t,r){if(e.length===0)throw pt.getFormatInstance();var i=1<<t+1,a=n.correctErrors(e,r,i);n.verifyCodewordCount(e,i);var o=gF.decode(e,""+t);return o.setErrorsCorrected(a),o.setErasures(r.length),o},n.correctErrors=function(e,t,r){if(t!=null&&t.length>r/2+n.MAX_ERRORS||r<0||r>n.MAX_EC_CODEWORDS)throw Ki.getChecksumInstance();return n.errorCorrection.decode(e,r,t)},n.verifyCodewordCount=function(e,t){if(e.length<4)throw pt.getFormatInstance();var r=e[0];if(r>e.length)throw pt.getFormatInstance();if(r===0)if(t<e.length)e[0]=e.length-t;else throw pt.getFormatInstance()},n.getBitCountForCodeword=function(e){for(var t=new Int32Array(8),r=0,i=t.length-1;!((e&1)!==r&&(r=e&1,i--,i<0));)t[i]++,e>>=1;return t},n.getCodewordBucketNumber=function(e){return e instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(e):this.getCodewordBucketNumber_number(e)},n.getCodewordBucketNumber_number=function(e){return n.getCodewordBucketNumber(n.getBitCountForCodeword(e))},n.getCodewordBucketNumber_Int32Array=function(e){return(e[0]-e[2]+e[4]-e[6]+9)%9},n.toString=function(e){for(var t=new ox,r=0;r<e.length;r++){t.format("Row %2d: ",r);for(var i=0;i<e[r].length;i++){var a=e[r][i];a.getValue().length===0?t.format("        ",null):t.format("%4d(%2d)",a.getValue()[0],a.getConfidence(a.getValue()[0]))}t.format("%n")}return t.toString()},n.CODEWORD_SKEW_SIZE=2,n.MAX_ERRORS=3,n.MAX_EC_CODEWORDS=512,n.errorCorrection=new KB,n}(),vF=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},by=function(){function n(){}return n.prototype.decode=function(e,t){t===void 0&&(t=null);var r=n.decode(e,t,!1);if(r==null||r.length===0||r[0]==null)throw ze.getNotFoundInstance();return r[0]},n.prototype.decodeMultiple=function(e,t){t===void 0&&(t=null);try{return n.decode(e,t,!0)}catch(r){throw r instanceof pt||r instanceof Ki?ze.getNotFoundInstance():r}},n.decode=function(e,t,r){var i,a,o=new Array,s=HB.detectMultiple(e,t,r);try{for(var u=vF(s.getPoints()),f=u.next();!f.done;f=u.next()){var h=f.value,p=mF.decode(s.getBits(),h[4],h[5],h[6],h[7],n.getMinCodewordWidth(h),n.getMaxCodewordWidth(h)),g=new Fa(p.getText(),p.getRawBytes(),void 0,h,Mt.PDF_417);g.putMetadata(fa.ERROR_CORRECTION_LEVEL,p.getECLevel());var m=p.getOther();m!=null&&g.putMetadata(fa.PDF417_EXTRA_METADATA,m),o.push(g)}}catch(_){i={error:_}}finally{try{f&&!f.done&&(a=u.return)&&a.call(u)}finally{if(i)throw i.error}}return o.map(function(_){return _})},n.getMaxWidth=function(e,t){return e==null||t==null?0:Math.trunc(Math.abs(e.getX()-t.getX()))},n.getMinWidth=function(e,t){return e==null||t==null?gn.MAX_VALUE:Math.trunc(Math.abs(e.getX()-t.getX()))},n.getMaxCodewordWidth=function(e){return Math.floor(Math.max(Math.max(n.getMaxWidth(e[0],e[4]),n.getMaxWidth(e[6],e[2])*Pn.MODULES_IN_CODEWORD/Pn.MODULES_IN_STOP_PATTERN),Math.max(n.getMaxWidth(e[1],e[5]),n.getMaxWidth(e[7],e[3])*Pn.MODULES_IN_CODEWORD/Pn.MODULES_IN_STOP_PATTERN)))},n.getMinCodewordWidth=function(e){return Math.floor(Math.min(Math.min(n.getMinWidth(e[0],e[4]),n.getMinWidth(e[6],e[2])*Pn.MODULES_IN_CODEWORD/Pn.MODULES_IN_STOP_PATTERN),Math.min(n.getMinWidth(e[1],e[5]),n.getMinWidth(e[7],e[3])*Pn.MODULES_IN_CODEWORD/Pn.MODULES_IN_STOP_PATTERN)))},n.prototype.reset=function(){},n}(),yF=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Ub=function(n){yF(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="ReaderException",e}(bo),Vb=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},xF=function(){function n(){}return n.prototype.decode=function(e,t){return this.setHints(t),this.decodeInternal(e)},n.prototype.decodeWithState=function(e){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(e)},n.prototype.setHints=function(e){this.hints=e;var t=e!=null&&e.get(Pr.TRY_HARDER)!==void 0,r=e==null?null:e.get(Pr.POSSIBLE_FORMATS),i=new Array;if(r!=null){var a=r.some(function(o){return o===Mt.UPC_A||o===Mt.UPC_E||o===Mt.EAN_13||o===Mt.EAN_8||o===Mt.CODABAR||o===Mt.CODE_39||o===Mt.CODE_93||o===Mt.CODE_128||o===Mt.ITF||o===Mt.RSS_14||o===Mt.RSS_EXPANDED});a&&!t&&i.push(new L1(e)),r.includes(Mt.QR_CODE)&&i.push(new _y),r.includes(Mt.DATA_MATRIX)&&i.push(new xy),r.includes(Mt.AZTEC)&&i.push(new vy),r.includes(Mt.PDF_417)&&i.push(new by),a&&t&&i.push(new L1(e))}i.length===0&&(t||i.push(new L1(e)),i.push(new _y),i.push(new xy),i.push(new vy),i.push(new by),t&&i.push(new L1(e))),this.readers=i},n.prototype.reset=function(){var e,t;if(this.readers!==null)try{for(var r=Vb(this.readers),i=r.next();!i.done;i=r.next()){var a=i.value;a.reset()}}catch(o){e={error:o}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}},n.prototype.decodeInternal=function(e){var t,r;if(this.readers===null)throw new Ub("No readers where selected, nothing can be read.");try{for(var i=Vb(this.readers),a=i.next();!a.done;a=i.next()){var o=a.value;try{return o.decode(e,this.hints)}catch(s){if(s instanceof Ub)continue}}}catch(s){t={error:s}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}throw new ze("No MultiFormat Readers were able to detect the code.")},n}(),_F=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),wF=function(n){_F(e,n);function e(t,r){t===void 0&&(t=null),r===void 0&&(r=500);var i=this,a=new xF;return a.setHints(t),i=n.call(this,a,r)||this,i}return e.prototype.decodeBitmap=function(t){return this.reader.decodeWithState(t)},e}(Od),bF=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();(function(n){bF(e,n);function e(t){return t===void 0&&(t=500),n.call(this,new by,t)||this}return e})(Od);var AF=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();(function(n){AF(e,n);function e(t){return t===void 0&&(t=500),n.call(this,new _y,t)||this}return e})(Od);var Ay;(function(n){n[n.ERROR_CORRECTION=0]="ERROR_CORRECTION",n[n.CHARACTER_SET=1]="CHARACTER_SET",n[n.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",n[n.DATA_MATRIX_COMPACT=3]="DATA_MATRIX_COMPACT",n[n.MIN_SIZE=4]="MIN_SIZE",n[n.MAX_SIZE=5]="MAX_SIZE",n[n.MARGIN=6]="MARGIN",n[n.PDF417_COMPACT=7]="PDF417_COMPACT",n[n.PDF417_COMPACTION=8]="PDF417_COMPACTION",n[n.PDF417_DIMENSIONS=9]="PDF417_DIMENSIONS",n[n.AZTEC_LAYERS=10]="AZTEC_LAYERS",n[n.QR_VERSION=11]="QR_VERSION",n[n.GS1_FORMAT=12]="GS1_FORMAT",n[n.FORCE_C40=13]="FORCE_C40"})(Ay||(Ay={}));const Lp=Ay;var yS=function(){function n(e){this.field=e,this.cachedGenerators=[],this.cachedGenerators.push(new nf(e,Int32Array.from([1])))}return n.prototype.buildGenerator=function(e){var t=this.cachedGenerators;if(e>=t.length)for(var r=t[t.length-1],i=this.field,a=t.length;a<=e;a++){var o=r.multiply(new nf(i,Int32Array.from([1,i.exp(a-1+i.getGeneratorBase())])));t.push(o),r=o}return t[e]},n.prototype.encode=function(e,t){if(t===0)throw new Bt("No error correction bytes");var r=e.length-t;if(r<=0)throw new Bt("No data bytes provided");var i=this.buildGenerator(t),a=new Int32Array(r);_r.arraycopy(e,0,a,0,r);var o=new nf(this.field,a);o=o.multiplyByMonomial(t,1);for(var s=o.divide(i)[1],u=s.getCoefficients(),f=t-u.length,h=0;h<f;h++)e[r+h]=0;_r.arraycopy(u,0,e,r+f,u.length)},n}(),M1=function(){function n(){}return n.applyMaskPenaltyRule1=function(e){return n.applyMaskPenaltyRule1Internal(e,!0)+n.applyMaskPenaltyRule1Internal(e,!1)},n.applyMaskPenaltyRule2=function(e){for(var t=0,r=e.getArray(),i=e.getWidth(),a=e.getHeight(),o=0;o<a-1;o++)for(var s=r[o],u=0;u<i-1;u++){var f=s[u];f===s[u+1]&&f===r[o+1][u]&&f===r[o+1][u+1]&&t++}return n.N2*t},n.applyMaskPenaltyRule3=function(e){for(var t=0,r=e.getArray(),i=e.getWidth(),a=e.getHeight(),o=0;o<a;o++)for(var s=0;s<i;s++){var u=r[o];s+6<i&&u[s]===1&&u[s+1]===0&&u[s+2]===1&&u[s+3]===1&&u[s+4]===1&&u[s+5]===0&&u[s+6]===1&&(n.isWhiteHorizontal(u,s-4,s)||n.isWhiteHorizontal(u,s+7,s+11))&&t++,o+6<a&&r[o][s]===1&&r[o+1][s]===0&&r[o+2][s]===1&&r[o+3][s]===1&&r[o+4][s]===1&&r[o+5][s]===0&&r[o+6][s]===1&&(n.isWhiteVertical(r,s,o-4,o)||n.isWhiteVertical(r,s,o+7,o+11))&&t++}return t*n.N3},n.isWhiteHorizontal=function(e,t,r){t=Math.max(t,0),r=Math.min(r,e.length);for(var i=t;i<r;i++)if(e[i]===1)return!1;return!0},n.isWhiteVertical=function(e,t,r,i){r=Math.max(r,0),i=Math.min(i,e.length);for(var a=r;a<i;a++)if(e[a][t]===1)return!1;return!0},n.applyMaskPenaltyRule4=function(e){for(var t=0,r=e.getArray(),i=e.getWidth(),a=e.getHeight(),o=0;o<a;o++)for(var s=r[o],u=0;u<i;u++)s[u]===1&&t++;var f=e.getHeight()*e.getWidth(),h=Math.floor(Math.abs(t*2-f)*10/f);return h*n.N4},n.getDataMaskBit=function(e,t,r){var i,a;switch(e){case 0:i=r+t&1;break;case 1:i=r&1;break;case 2:i=t%3;break;case 3:i=(r+t)%3;break;case 4:i=Math.floor(r/2)+Math.floor(t/3)&1;break;case 5:a=r*t,i=(a&1)+a%3;break;case 6:a=r*t,i=(a&1)+a%3&1;break;case 7:a=r*t,i=a%3+(r+t&1)&1;break;default:throw new Bt("Invalid mask pattern: "+e)}return i===0},n.applyMaskPenaltyRule1Internal=function(e,t){for(var r=0,i=t?e.getHeight():e.getWidth(),a=t?e.getWidth():e.getHeight(),o=e.getArray(),s=0;s<i;s++){for(var u=0,f=-1,h=0;h<a;h++){var p=t?o[s][h]:o[h][s];p===f?u++:(u>=5&&(r+=n.N1+(u-5)),u=1,f=p)}u>=5&&(r+=n.N1+(u-5))}return r},n.N1=3,n.N2=3,n.N3=40,n.N4=10,n}(),EF=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},SF=function(){function n(e,t){this.width=e,this.height=t;for(var r=new Array(t),i=0;i!==t;i++)r[i]=new Uint8Array(e);this.bytes=r}return n.prototype.getHeight=function(){return this.height},n.prototype.getWidth=function(){return this.width},n.prototype.get=function(e,t){return this.bytes[t][e]},n.prototype.getArray=function(){return this.bytes},n.prototype.setNumber=function(e,t,r){this.bytes[t][e]=r},n.prototype.setBoolean=function(e,t,r){this.bytes[t][e]=r?1:0},n.prototype.clear=function(e){var t,r;try{for(var i=EF(this.bytes),a=i.next();!a.done;a=i.next()){var o=a.value;Li.fill(o,e)}}catch(s){t={error:s}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;if(this.width!==t.width||this.height!==t.height)return!1;for(var r=0,i=this.height;r<i;++r)for(var a=this.bytes[r],o=t.bytes[r],s=0,u=this.width;s<u;++s)if(a[s]!==o[s])return!1;return!0},n.prototype.toString=function(){for(var e=new cn,t=0,r=this.height;t<r;++t){for(var i=this.bytes[t],a=0,o=this.width;a<o;++a)switch(i[a]){case 0:e.append(" 0");break;case 1:e.append(" 1");break;default:e.append("  ");break}e.append(`
`)}return e.toString()},n}(),Ey=function(){function n(){this.maskPattern=-1}return n.prototype.getMode=function(){return this.mode},n.prototype.getECLevel=function(){return this.ecLevel},n.prototype.getVersion=function(){return this.version},n.prototype.getMaskPattern=function(){return this.maskPattern},n.prototype.getMatrix=function(){return this.matrix},n.prototype.toString=function(){var e=new cn;return e.append(`<<
`),e.append(" mode: "),e.append(this.mode?this.mode.toString():"null"),e.append(`
 ecLevel: `),e.append(this.ecLevel?this.ecLevel.toString():"null"),e.append(`
 version: `),e.append(this.version?this.version.toString():"null"),e.append(`
 maskPattern: `),e.append(this.maskPattern.toString()),this.matrix?(e.append(`
 matrix:
`),e.append(this.matrix.toString())):e.append(`
 matrix: null
`),e.append(`>>
`),e.toString()},n.prototype.setMode=function(e){this.mode=e},n.prototype.setECLevel=function(e){this.ecLevel=e},n.prototype.setVersion=function(e){this.version=e},n.prototype.setMaskPattern=function(e){this.maskPattern=e},n.prototype.setMatrix=function(e){this.matrix=e},n.isValidMaskPattern=function(e){return e>=0&&e<n.NUM_MASK_PATTERNS},n.NUM_MASK_PATTERNS=8,n}(),CF=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Ar=function(n){CF(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="WriterException",e}(bo),zb=function(){function n(){}return n.clearMatrix=function(e){e.clear(255)},n.buildMatrix=function(e,t,r,i,a){n.clearMatrix(a),n.embedBasicPatterns(r,a),n.embedTypeInfo(t,i,a),n.maybeEmbedVersionInfo(r,a),n.embedDataBits(e,i,a)},n.embedBasicPatterns=function(e,t){n.embedPositionDetectionPatternsAndSeparators(t),n.embedDarkDotAtLeftBottomCorner(t),n.maybeEmbedPositionAdjustmentPatterns(e,t),n.embedTimingPatterns(t)},n.embedTypeInfo=function(e,t,r){var i=new Qi;n.makeTypeInfoBits(e,t,i);for(var a=0,o=i.getSize();a<o;++a){var s=i.get(i.getSize()-1-a),u=n.TYPE_INFO_COORDINATES[a],f=u[0],h=u[1];if(r.setBoolean(f,h,s),a<8){var p=r.getWidth()-a-1,g=8;r.setBoolean(p,g,s)}else{var p=8,g=r.getHeight()-7+(a-8);r.setBoolean(p,g,s)}}},n.maybeEmbedVersionInfo=function(e,t){if(!(e.getVersionNumber()<7)){var r=new Qi;n.makeVersionInfoBits(e,r);for(var i=6*3-1,a=0;a<6;++a)for(var o=0;o<3;++o){var s=r.get(i);i--,t.setBoolean(a,t.getHeight()-11+o,s),t.setBoolean(t.getHeight()-11+o,a,s)}}},n.embedDataBits=function(e,t,r){for(var i=0,a=-1,o=r.getWidth()-1,s=r.getHeight()-1;o>0;){for(o===6&&(o-=1);s>=0&&s<r.getHeight();){for(var u=0;u<2;++u){var f=o-u;if(n.isEmpty(r.get(f,s))){var h=void 0;i<e.getSize()?(h=e.get(i),++i):h=!1,t!==255&&M1.getDataMaskBit(t,f,s)&&(h=!h),r.setBoolean(f,s,h)}}s+=a}a=-a,s+=a,o-=2}if(i!==e.getSize())throw new Ar("Not all bits consumed: "+i+"/"+e.getSize())},n.findMSBSet=function(e){return 32-gn.numberOfLeadingZeros(e)},n.calculateBCHCode=function(e,t){if(t===0)throw new Bt("0 polynomial");var r=n.findMSBSet(t);for(e<<=r-1;n.findMSBSet(e)>=r;)e^=t<<n.findMSBSet(e)-r;return e},n.makeTypeInfoBits=function(e,t,r){if(!Ey.isValidMaskPattern(t))throw new Ar("Invalid mask pattern");var i=e.getBits()<<3|t;r.appendBits(i,5);var a=n.calculateBCHCode(i,n.TYPE_INFO_POLY);r.appendBits(a,10);var o=new Qi;if(o.appendBits(n.TYPE_INFO_MASK_PATTERN,15),r.xor(o),r.getSize()!==15)throw new Ar("should not happen but we got: "+r.getSize())},n.makeVersionInfoBits=function(e,t){t.appendBits(e.getVersionNumber(),6);var r=n.calculateBCHCode(e.getVersionNumber(),n.VERSION_INFO_POLY);if(t.appendBits(r,12),t.getSize()!==18)throw new Ar("should not happen but we got: "+t.getSize())},n.isEmpty=function(e){return e===255},n.embedTimingPatterns=function(e){for(var t=8;t<e.getWidth()-8;++t){var r=(t+1)%2;n.isEmpty(e.get(t,6))&&e.setNumber(t,6,r),n.isEmpty(e.get(6,t))&&e.setNumber(6,t,r)}},n.embedDarkDotAtLeftBottomCorner=function(e){if(e.get(8,e.getHeight()-8)===0)throw new Ar;e.setNumber(8,e.getHeight()-8,1)},n.embedHorizontalSeparationPattern=function(e,t,r){for(var i=0;i<8;++i){if(!n.isEmpty(r.get(e+i,t)))throw new Ar;r.setNumber(e+i,t,0)}},n.embedVerticalSeparationPattern=function(e,t,r){for(var i=0;i<7;++i){if(!n.isEmpty(r.get(e,t+i)))throw new Ar;r.setNumber(e,t+i,0)}},n.embedPositionAdjustmentPattern=function(e,t,r){for(var i=0;i<5;++i)for(var a=n.POSITION_ADJUSTMENT_PATTERN[i],o=0;o<5;++o)r.setNumber(e+o,t+i,a[o])},n.embedPositionDetectionPattern=function(e,t,r){for(var i=0;i<7;++i)for(var a=n.POSITION_DETECTION_PATTERN[i],o=0;o<7;++o)r.setNumber(e+o,t+i,a[o])},n.embedPositionDetectionPatternsAndSeparators=function(e){var t=n.POSITION_DETECTION_PATTERN[0].length;n.embedPositionDetectionPattern(0,0,e),n.embedPositionDetectionPattern(e.getWidth()-t,0,e),n.embedPositionDetectionPattern(0,e.getWidth()-t,e);var r=8;n.embedHorizontalSeparationPattern(0,r-1,e),n.embedHorizontalSeparationPattern(e.getWidth()-r,r-1,e),n.embedHorizontalSeparationPattern(0,e.getWidth()-r,e);var i=7;n.embedVerticalSeparationPattern(i,0,e),n.embedVerticalSeparationPattern(e.getHeight()-i-1,0,e),n.embedVerticalSeparationPattern(i,e.getHeight()-i,e)},n.maybeEmbedPositionAdjustmentPatterns=function(e,t){if(!(e.getVersionNumber()<2))for(var r=e.getVersionNumber()-1,i=n.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[r],a=0,o=i.length;a!==o;a++){var s=i[a];if(s>=0)for(var u=0;u!==o;u++){var f=i[u];f>=0&&n.isEmpty(t.get(f,s))&&n.embedPositionAdjustmentPattern(f-2,s-2,t)}}},n.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),n.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),n.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),n.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),n.VERSION_INFO_POLY=7973,n.TYPE_INFO_POLY=1335,n.TYPE_INFO_MASK_PATTERN=21522,n}(),TF=function(){function n(e,t){this.dataBytes=e,this.errorCorrectionBytes=t}return n.prototype.getDataBytes=function(){return this.dataBytes},n.prototype.getErrorCorrectionBytes=function(){return this.errorCorrectionBytes},n}(),qb=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};(function(){function n(){}return n.calculateMaskPenalty=function(e){return M1.applyMaskPenaltyRule1(e)+M1.applyMaskPenaltyRule2(e)+M1.applyMaskPenaltyRule3(e)+M1.applyMaskPenaltyRule4(e)},n.encode=function(e,t,r){r===void 0&&(r=null);var i=n.DEFAULT_BYTE_MODE_ENCODING,a=r!==null&&r.get(Lp.CHARACTER_SET)!==void 0;a&&(i=r.get(Lp.CHARACTER_SET).toString());var o=this.chooseMode(e,i),s=new Qi;if(o===Er.BYTE&&(a||n.DEFAULT_BYTE_MODE_ENCODING!==i)){var u=Pi.getCharacterSetECIByName(i);u!==void 0&&this.appendECI(u,s)}this.appendModeInfo(o,s);var f=new Qi;this.appendBytes(e,o,f,i);var h;if(r!==null&&r.get(Lp.QR_VERSION)!==void 0){var p=Number.parseInt(r.get(Lp.QR_VERSION).toString(),10);h=Qf.getVersionForNumber(p);var g=this.calculateBitsNeeded(o,s,f,h);if(!this.willFit(g,h,t))throw new Ar("Data too big for requested version")}else h=this.recommendVersion(t,o,s,f);var m=new Qi;m.appendBitArray(s);var _=o===Er.BYTE?f.getSizeInBytes():e.length;this.appendLengthInfo(_,h,o,m),m.appendBitArray(f);var b=h.getECBlocksForLevel(t),T=h.getTotalCodewords()-b.getTotalECCodewords();this.terminateBits(T,m);var S=this.interleaveWithECBytes(m,h.getTotalCodewords(),T,b.getNumBlocks()),D=new Ey;D.setECLevel(t),D.setMode(o),D.setVersion(h);var B=h.getDimensionForVersion(),V=new SF(B,B),Y=this.chooseMaskPattern(S,t,h,V);return D.setMaskPattern(Y),zb.buildMatrix(S,t,h,Y,V),D.setMatrix(V),D},n.recommendVersion=function(e,t,r,i){var a=this.calculateBitsNeeded(t,r,i,Qf.getVersionForNumber(1)),o=this.chooseVersion(a,e),s=this.calculateBitsNeeded(t,r,i,o);return this.chooseVersion(s,e)},n.calculateBitsNeeded=function(e,t,r,i){return t.getSize()+e.getCharacterCountBits(i)+r.getSize()},n.getAlphanumericCode=function(e){return e<n.ALPHANUMERIC_TABLE.length?n.ALPHANUMERIC_TABLE[e]:-1},n.chooseMode=function(e,t){if(t===void 0&&(t=null),Pi.SJIS.getName()===t&&this.isOnlyDoubleByteKanji(e))return Er.KANJI;for(var r=!1,i=!1,a=0,o=e.length;a<o;++a){var s=e.charAt(a);if(n.isDigit(s))r=!0;else if(this.getAlphanumericCode(s.charCodeAt(0))!==-1)i=!0;else return Er.BYTE}return i?Er.ALPHANUMERIC:r?Er.NUMERIC:Er.BYTE},n.isOnlyDoubleByteKanji=function(e){var t;try{t=ws.encode(e,Pi.SJIS)}catch{return!1}var r=t.length;if(r%2!==0)return!1;for(var i=0;i<r;i+=2){var a=t[i]&255;if((a<129||a>159)&&(a<224||a>235))return!1}return!0},n.chooseMaskPattern=function(e,t,r,i){for(var a=Number.MAX_SAFE_INTEGER,o=-1,s=0;s<Ey.NUM_MASK_PATTERNS;s++){zb.buildMatrix(e,t,r,s,i);var u=this.calculateMaskPenalty(i);u<a&&(a=u,o=s)}return o},n.chooseVersion=function(e,t){for(var r=1;r<=40;r++){var i=Qf.getVersionForNumber(r);if(n.willFit(e,i,t))return i}throw new Ar("Data too big")},n.willFit=function(e,t,r){var i=t.getTotalCodewords(),a=t.getECBlocksForLevel(r),o=a.getTotalECCodewords(),s=i-o,u=(e+7)/8;return s>=u},n.terminateBits=function(e,t){var r=e*8;if(t.getSize()>r)throw new Ar("data bits cannot fit in the QR Code"+t.getSize()+" > "+r);for(var i=0;i<4&&t.getSize()<r;++i)t.appendBit(!1);var a=t.getSize()&7;if(a>0)for(var i=a;i<8;i++)t.appendBit(!1);for(var o=e-t.getSizeInBytes(),i=0;i<o;++i)t.appendBits((i&1)===0?236:17,8);if(t.getSize()!==r)throw new Ar("Bits size does not equal capacity")},n.getNumDataBytesAndNumECBytesForBlockID=function(e,t,r,i,a,o){if(i>=r)throw new Ar("Block ID too large");var s=e%r,u=r-s,f=Math.floor(e/r),h=f+1,p=Math.floor(t/r),g=p+1,m=f-p,_=h-g;if(m!==_)throw new Ar("EC bytes mismatch");if(r!==u+s)throw new Ar("RS blocks mismatch");if(e!==(p+m)*u+(g+_)*s)throw new Ar("Total bytes mismatch");i<u?(a[0]=p,o[0]=m):(a[0]=g,o[0]=_)},n.interleaveWithECBytes=function(e,t,r,i){var a,o,s,u;if(e.getSizeInBytes()!==r)throw new Ar("Number of bits and data bytes does not match");for(var f=0,h=0,p=0,g=new Array,m=0;m<i;++m){var _=new Int32Array(1),b=new Int32Array(1);n.getNumDataBytesAndNumECBytesForBlockID(t,r,i,m,_,b);var T=_[0],S=new Uint8Array(T);e.toBytes(8*f,S,0,T);var D=n.generateECBytes(S,b[0]);g.push(new TF(S,D)),h=Math.max(h,T),p=Math.max(p,D.length),f+=_[0]}if(r!==f)throw new Ar("Data bytes does not match offset");for(var B=new Qi,m=0;m<h;++m)try{for(var V=(a=void 0,qb(g)),Y=V.next();!Y.done;Y=V.next()){var q=Y.value,S=q.getDataBytes();m<S.length&&B.appendBits(S[m],8)}}catch(M){a={error:M}}finally{try{Y&&!Y.done&&(o=V.return)&&o.call(V)}finally{if(a)throw a.error}}for(var m=0;m<p;++m)try{for(var P=(s=void 0,qb(g)),E=P.next();!E.done;E=P.next()){var q=E.value,D=q.getErrorCorrectionBytes();m<D.length&&B.appendBits(D[m],8)}}catch(M){s={error:M}}finally{try{E&&!E.done&&(u=P.return)&&u.call(P)}finally{if(s)throw s.error}}if(t!==B.getSizeInBytes())throw new Ar("Interleaving error: "+t+" and "+B.getSizeInBytes()+" differ.");return B},n.generateECBytes=function(e,t){for(var r=e.length,i=new Int32Array(r+t),a=0;a<r;a++)i[a]=e[a]&255;new yS(yo.QR_CODE_FIELD_256).encode(i,t);for(var o=new Uint8Array(t),a=0;a<t;a++)o[a]=i[r+a];return o},n.appendModeInfo=function(e,t){t.appendBits(e.getBits(),4)},n.appendLengthInfo=function(e,t,r,i){var a=r.getCharacterCountBits(t);if(e>=1<<a)throw new Ar(e+" is bigger than "+((1<<a)-1));i.appendBits(e,a)},n.appendBytes=function(e,t,r,i){switch(t){case Er.NUMERIC:n.appendNumericBytes(e,r);break;case Er.ALPHANUMERIC:n.appendAlphanumericBytes(e,r);break;case Er.BYTE:n.append8BitBytes(e,r,i);break;case Er.KANJI:n.appendKanjiBytes(e,r);break;default:throw new Ar("Invalid mode: "+t)}},n.getDigit=function(e){return e.charCodeAt(0)-48},n.isDigit=function(e){var t=n.getDigit(e);return t>=0&&t<=9},n.appendNumericBytes=function(e,t){for(var r=e.length,i=0;i<r;){var a=n.getDigit(e.charAt(i));if(i+2<r){var o=n.getDigit(e.charAt(i+1)),s=n.getDigit(e.charAt(i+2));t.appendBits(a*100+o*10+s,10),i+=3}else if(i+1<r){var o=n.getDigit(e.charAt(i+1));t.appendBits(a*10+o,7),i+=2}else t.appendBits(a,4),i++}},n.appendAlphanumericBytes=function(e,t){for(var r=e.length,i=0;i<r;){var a=n.getAlphanumericCode(e.charCodeAt(i));if(a===-1)throw new Ar;if(i+1<r){var o=n.getAlphanumericCode(e.charCodeAt(i+1));if(o===-1)throw new Ar;t.appendBits(a*45+o,11),i+=2}else t.appendBits(a,6),i++}},n.append8BitBytes=function(e,t,r){var i;try{i=ws.encode(e,r)}catch(u){throw new Ar(u)}for(var a=0,o=i.length;a!==o;a++){var s=i[a];t.appendBits(s,8)}},n.appendKanjiBytes=function(e,t){var r;try{r=ws.encode(e,Pi.SJIS)}catch(p){throw new Ar(p)}for(var i=r.length,a=0;a<i;a+=2){var o=r[a]&255,s=r[a+1]&255,u=o<<8&4294967295|s,f=-1;if(u>=33088&&u<=40956?f=u-33088:u>=57408&&u<=60351&&(f=u-49472),f===-1)throw new Ar("Invalid byte sequence");var h=(f>>8)*192+(f&255);t.appendBits(h,13)}},n.appendECI=function(e,t){t.appendBits(Er.ECI.getBits(),4),t.appendBits(e.getValue(),8)},n.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),n.DEFAULT_BYTE_MODE_ENCODING=Pi.UTF8.getName(),n})();var IF=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();(function(n){IF(e,n);function e(t,r,i,a,o,s,u,f){var h=n.call(this,s,u)||this;if(h.yuvData=t,h.dataWidth=r,h.dataHeight=i,h.left=a,h.top=o,a+s>r||o+u>i)throw new Bt("Crop rectangle does not fit within image data.");return f&&h.reverseHorizontal(s,u),h}return e.prototype.getRow=function(t,r){if(t<0||t>=this.getHeight())throw new Bt("Requested row is outside the image: "+t);var i=this.getWidth();(r==null||r.length<i)&&(r=new Uint8ClampedArray(i));var a=(t+this.top)*this.dataWidth+this.left;return _r.arraycopy(this.yuvData,a,r,0,i),r},e.prototype.getMatrix=function(){var t=this.getWidth(),r=this.getHeight();if(t===this.dataWidth&&r===this.dataHeight)return this.yuvData;var i=t*r,a=new Uint8ClampedArray(i),o=this.top*this.dataWidth+this.left;if(t===this.dataWidth)return _r.arraycopy(this.yuvData,o,a,0,i),a;for(var s=0;s<r;s++){var u=s*t;_r.arraycopy(this.yuvData,o,a,u,t),o+=this.dataWidth}return a},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(t,r,i,a){return new e(this.yuvData,this.dataWidth,this.dataHeight,this.left+t,this.top+r,i,a,!1)},e.prototype.renderThumbnail=function(){for(var t=this.getWidth()/e.THUMBNAIL_SCALE_FACTOR,r=this.getHeight()/e.THUMBNAIL_SCALE_FACTOR,i=new Int32Array(t*r),a=this.yuvData,o=this.top*this.dataWidth+this.left,s=0;s<r;s++){for(var u=s*t,f=0;f<t;f++){var h=a[o+f*e.THUMBNAIL_SCALE_FACTOR]&255;i[u+f]=4278190080|h*65793}o+=this.dataWidth*e.THUMBNAIL_SCALE_FACTOR}return i},e.prototype.getThumbnailWidth=function(){return this.getWidth()/e.THUMBNAIL_SCALE_FACTOR},e.prototype.getThumbnailHeight=function(){return this.getHeight()/e.THUMBNAIL_SCALE_FACTOR},e.prototype.reverseHorizontal=function(t,r){for(var i=this.yuvData,a=0,o=this.top*this.dataWidth+this.left;a<r;a++,o+=this.dataWidth)for(var s=o+t/2,u=o,f=o+t-1;u<s;u++,f--){var h=i[u];i[u]=i[f],i[f]=h}},e.prototype.invert=function(){return new nx(this)},e.THUMBNAIL_SCALE_FACTOR=2,e})(E2);var RF=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();(function(n){RF(e,n);function e(t,r,i,a,o,s,u){var f=n.call(this,r,i)||this;if(f.dataWidth=a,f.dataHeight=o,f.left=s,f.top=u,t.BYTES_PER_ELEMENT===4){for(var h=r*i,p=new Uint8ClampedArray(h),g=0;g<h;g++){var m=t[g],_=m>>16&255,b=m>>7&510,T=m&255;p[g]=(_+b+T)/4&255}f.luminances=p}else f.luminances=t;if(a===void 0&&(f.dataWidth=r),o===void 0&&(f.dataHeight=i),s===void 0&&(f.left=0),u===void 0&&(f.top=0),f.left+r>f.dataWidth||f.top+i>f.dataHeight)throw new Bt("Crop rectangle does not fit within image data.");return f}return e.prototype.getRow=function(t,r){if(t<0||t>=this.getHeight())throw new Bt("Requested row is outside the image: "+t);var i=this.getWidth();(r==null||r.length<i)&&(r=new Uint8ClampedArray(i));var a=(t+this.top)*this.dataWidth+this.left;return _r.arraycopy(this.luminances,a,r,0,i),r},e.prototype.getMatrix=function(){var t=this.getWidth(),r=this.getHeight();if(t===this.dataWidth&&r===this.dataHeight)return this.luminances;var i=t*r,a=new Uint8ClampedArray(i),o=this.top*this.dataWidth+this.left;if(t===this.dataWidth)return _r.arraycopy(this.luminances,o,a,0,i),a;for(var s=0;s<r;s++){var u=s*t;_r.arraycopy(this.luminances,o,a,u,t),o+=this.dataWidth}return a},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(t,r,i,a){return new e(this.luminances,i,a,this.dataWidth,this.dataHeight,this.left+t,this.top+r)},e.prototype.invert=function(){return new nx(this)},e})(E2);var NF=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),OF=function(n){NF(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.forName=function(t){return this.getCharacterSetECIByName(t)},e}(Pi),DF=function(){function n(){}return n.ISO_8859_1=Pi.ISO8859_1,n}(),Sy,PF=301,LF=function(n,e){for(var t=1,r=0;r<255;r++)e[r]=t,n[t]=r,t*=2,t>=256&&(t^=PF);return{LOG:n,ALOG:e}};Sy=LF([],[]),Sy.LOG;Sy.ALOG;var Hb;(function(n){n[n.FORCE_NONE=0]="FORCE_NONE",n[n.FORCE_SQUARE=1]="FORCE_SQUARE",n[n.FORCE_RECTANGLE=2]="FORCE_RECTANGLE"})(Hb||(Hb={}));var Gb=129,xS=230,kF=231,MF=235,BF=236,FF=237,jF=238,UF=239,VF=240,gv=254,zF=254,Wb="[)>05",$b="[)>06",Xb="",ir=0,sa=1,Xa=2,Oi=3,$i=4,Da=5,qF=function(){function n(){}return n.prototype.getEncodingMode=function(){return ir},n.prototype.encode=function(e){var t=il.determineConsecutiveDigitCount(e.getMessage(),e.pos);if(t>=2)e.writeCodeword(this.encodeASCIIDigits(e.getMessage().charCodeAt(e.pos),e.getMessage().charCodeAt(e.pos+1))),e.pos+=2;else{var r=e.getCurrentChar(),i=il.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(i!==this.getEncodingMode())switch(i){case Da:e.writeCodeword(kF),e.signalEncoderChange(Da);return;case sa:e.writeCodeword(xS),e.signalEncoderChange(sa);return;case Oi:e.writeCodeword(jF),e.signalEncoderChange(Oi);break;case Xa:e.writeCodeword(UF),e.signalEncoderChange(Xa);break;case $i:e.writeCodeword(VF),e.signalEncoderChange($i);break;default:throw new Error("Illegal mode: "+i)}else il.isExtendedASCII(r)?(e.writeCodeword(MF),e.writeCodeword(r-128+1),e.pos++):(e.writeCodeword(r+1),e.pos++)}},n.prototype.encodeASCIIDigits=function(e,t){if(il.isDigit(e)&&il.isDigit(t)){var r=(e-48)*10+(t-48);return r+130}throw new Error("not digits: "+e+t)},n}(),HF=function(){function n(){}return n.prototype.getEncodingMode=function(){return Da},n.prototype.encode=function(e){var t=new cn;for(t.append(0);e.hasMoreCharacters();){var r=e.getCurrentChar();t.append(r),e.pos++;var i=il.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(i!==this.getEncodingMode()){e.signalEncoderChange(ir);break}}var a=t.length()-1,o=1,s=e.getCodewordCount()+a+o;e.updateSymbolInfo(s);var u=e.getSymbolInfo().getDataCapacity()-s>0;if(e.hasMoreCharacters()||u)if(a<=249)t.setCharAt(0,On.getCharAt(a));else if(a<=1555)t.setCharAt(0,On.getCharAt(Math.floor(a/250)+249)),t.insert(1,On.getCharAt(a%250));else throw new Error("Message length not in valid ranges: "+a);for(var f=0,r=t.length();f<r;f++)e.writeCodeword(this.randomize255State(t.charAt(f).charCodeAt(0),e.getCodewordCount()+1))},n.prototype.randomize255State=function(e,t){var r=149*t%255+1,i=e+r;return i<=255?i:i-256},n}(),sx=function(){function n(){}return n.prototype.getEncodingMode=function(){return sa},n.prototype.encodeMaximal=function(e){for(var t=new cn,r=0,i=e.pos,a=0;e.hasMoreCharacters();){var o=e.getCurrentChar();e.pos++,r=this.encodeChar(o,t),t.length()%3===0&&(i=e.pos,a=t.length())}if(a!==t.length()){var s=Math.floor(t.length()/3*2),u=Math.floor(e.getCodewordCount()+s+1);e.updateSymbolInfo(u);var f=e.getSymbolInfo().getDataCapacity()-u,h=Math.floor(t.length()%3);(h===2&&f!==2||h===1&&(r>3||f!==1))&&(e.pos=i)}t.length()>0&&e.writeCodeword(xS),this.handleEOD(e,t)},n.prototype.encode=function(e){for(var t=new cn;e.hasMoreCharacters();){var r=e.getCurrentChar();e.pos++;var i=this.encodeChar(r,t),a=Math.floor(t.length()/3)*2,o=e.getCodewordCount()+a;e.updateSymbolInfo(o);var s=e.getSymbolInfo().getDataCapacity()-o;if(!e.hasMoreCharacters()){var u=new cn;for(t.length()%3===2&&s!==2&&(i=this.backtrackOneCharacter(e,t,u,i));t.length()%3===1&&(i>3||s!==1);)i=this.backtrackOneCharacter(e,t,u,i);break}var f=t.length();if(f%3===0){var h=il.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(h!==this.getEncodingMode()){e.signalEncoderChange(ir);break}}}this.handleEOD(e,t)},n.prototype.backtrackOneCharacter=function(e,t,r,i){var a=t.length(),o=t.toString().substring(0,a-i);t.setLengthToZero(),t.append(o),e.pos--;var s=e.getCurrentChar();return i=this.encodeChar(s,r),e.resetSymbolInfo(),i},n.prototype.writeNextTriplet=function(e,t){e.writeCodewords(this.encodeToCodewords(t.toString()));var r=t.toString().substring(3);t.setLengthToZero(),t.append(r)},n.prototype.handleEOD=function(e,t){var r=Math.floor(t.length()/3*2),i=t.length()%3,a=e.getCodewordCount()+r;e.updateSymbolInfo(a);var o=e.getSymbolInfo().getDataCapacity()-a;if(i===2){for(t.append("\0");t.length()>=3;)this.writeNextTriplet(e,t);e.hasMoreCharacters()&&e.writeCodeword(gv)}else if(o===1&&i===1){for(;t.length()>=3;)this.writeNextTriplet(e,t);e.hasMoreCharacters()&&e.writeCodeword(gv),e.pos--}else if(i===0){for(;t.length()>=3;)this.writeNextTriplet(e,t);(o>0||e.hasMoreCharacters())&&e.writeCodeword(gv)}else throw new Error("Unexpected case. Please report!");e.signalEncoderChange(ir)},n.prototype.encodeChar=function(e,t){if(e===32)return t.append(3),1;if(e>=48&&e<=57)return t.append(e-48+4),1;if(e>=65&&e<=90)return t.append(e-65+14),1;if(e<32)return t.append(0),t.append(e),2;if(e<=47)return t.append(1),t.append(e-33),2;if(e<=64)return t.append(1),t.append(e-58+15),2;if(e<=95)return t.append(1),t.append(e-91+22),2;if(e<=127)return t.append(2),t.append(e-96),2;t.append("1");var r=2;return r+=this.encodeChar(e-128,t),r},n.prototype.encodeToCodewords=function(e){var t=1600*e.charCodeAt(0)+40*e.charCodeAt(1)+e.charCodeAt(2)+1,r=t/256,i=t%256,a=new cn;return a.append(r),a.append(i),a.toString()},n}(),GF=function(){function n(){}return n.prototype.getEncodingMode=function(){return $i},n.prototype.encode=function(e){for(var t=new cn;e.hasMoreCharacters();){var r=e.getCurrentChar();this.encodeChar(r,t),e.pos++;var i=t.length();if(i>=4){e.writeCodewords(this.encodeToCodewords(t.toString()));var a=t.toString().substring(4);t.setLengthToZero(),t.append(a);var o=il.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(o!==this.getEncodingMode()){e.signalEncoderChange(ir);break}}}t.append(On.getCharAt(31)),this.handleEOD(e,t)},n.prototype.handleEOD=function(e,t){try{var r=t.length();if(r===0)return;if(r===1){e.updateSymbolInfo();var i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount(),a=e.getRemainingCharacters();if(a>i&&(e.updateSymbolInfo(e.getCodewordCount()+1),i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount()),a<=i&&i<=2)return}if(r>4)throw new Error("Count must not exceed 4");var o=r-1,s=this.encodeToCodewords(t.toString()),u=!e.hasMoreCharacters(),f=u&&o<=2;if(o<=2){e.updateSymbolInfo(e.getCodewordCount()+o);var i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount();i>=3&&(f=!1,e.updateSymbolInfo(e.getCodewordCount()+s.length))}f?(e.resetSymbolInfo(),e.pos-=o):e.writeCodewords(s)}finally{e.signalEncoderChange(ir)}},n.prototype.encodeChar=function(e,t){e>=32&&e<=63?t.append(e):e>=64&&e<=94?t.append(On.getCharAt(e-64)):il.illegalCharacter(On.getCharAt(e))},n.prototype.encodeToCodewords=function(e){var t=e.length;if(t===0)throw new Error("StringBuilder must not be empty");var r=e.charAt(0).charCodeAt(0),i=t>=2?e.charAt(1).charCodeAt(0):0,a=t>=3?e.charAt(2).charCodeAt(0):0,o=t>=4?e.charAt(3).charCodeAt(0):0,s=(r<<18)+(i<<12)+(a<<6)+o,u=s>>16&255,f=s>>8&255,h=s&255,p=new cn;return p.append(u),t>=2&&p.append(f),t>=3&&p.append(h),p.toString()},n}(),WF=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),$F=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},$n=function(){function n(e,t,r,i,a,o,s,u){s===void 0&&(s=0),u===void 0&&(u=0),this.rectangular=e,this.dataCapacity=t,this.errorCodewords=r,this.matrixWidth=i,this.matrixHeight=a,this.dataRegions=o,this.rsBlockData=s,this.rsBlockError=u}return n.lookup=function(e,t,r,i,a){var o,s;t===void 0&&(t=0),r===void 0&&(r=null),i===void 0&&(i=null),a===void 0&&(a=!0);try{for(var u=$F(YF),f=u.next();!f.done;f=u.next()){var h=f.value;if(!(t===1&&h.rectangular)&&!(t===2&&!h.rectangular)&&!(r!=null&&(h.getSymbolWidth()<r.getWidth()||h.getSymbolHeight()<r.getHeight()))&&!(i!=null&&(h.getSymbolWidth()>i.getWidth()||h.getSymbolHeight()>i.getHeight()))&&e<=h.dataCapacity)return h}}catch(p){o={error:p}}finally{try{f&&!f.done&&(s=u.return)&&s.call(u)}finally{if(o)throw o.error}}if(a)throw new Error("Can't find a symbol arrangement that matches the message. Data codewords: "+e);return null},n.prototype.getHorizontalDataRegions=function(){switch(this.dataRegions){case 1:return 1;case 2:case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},n.prototype.getVerticalDataRegions=function(){switch(this.dataRegions){case 1:case 2:return 1;case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},n.prototype.getSymbolDataWidth=function(){return this.getHorizontalDataRegions()*this.matrixWidth},n.prototype.getSymbolDataHeight=function(){return this.getVerticalDataRegions()*this.matrixHeight},n.prototype.getSymbolWidth=function(){return this.getSymbolDataWidth()+this.getHorizontalDataRegions()*2},n.prototype.getSymbolHeight=function(){return this.getSymbolDataHeight()+this.getVerticalDataRegions()*2},n.prototype.getCodewordCount=function(){return this.dataCapacity+this.errorCodewords},n.prototype.getInterleavedBlockCount=function(){return this.rsBlockData?this.dataCapacity/this.rsBlockData:1},n.prototype.getDataCapacity=function(){return this.dataCapacity},n.prototype.getErrorCodewords=function(){return this.errorCodewords},n.prototype.getDataLengthForInterleavedBlock=function(e){return this.rsBlockData},n.prototype.getErrorLengthForInterleavedBlock=function(e){return this.rsBlockError},n}(),XF=function(n){WF(e,n);function e(){return n.call(this,!1,1558,620,22,22,36,-1,62)||this}return e.prototype.getInterleavedBlockCount=function(){return 10},e.prototype.getDataLengthForInterleavedBlock=function(t){return t<=8?156:155},e}($n),YF=[new $n(!1,3,5,8,8,1),new $n(!1,5,7,10,10,1),new $n(!0,5,7,16,6,1),new $n(!1,8,10,12,12,1),new $n(!0,10,11,14,6,2),new $n(!1,12,12,14,14,1),new $n(!0,16,14,24,10,1),new $n(!1,18,14,16,16,1),new $n(!1,22,18,18,18,1),new $n(!0,22,18,16,10,2),new $n(!1,30,20,20,20,1),new $n(!0,32,24,16,14,2),new $n(!1,36,24,22,22,1),new $n(!1,44,28,24,24,1),new $n(!0,49,28,22,14,2),new $n(!1,62,36,14,14,4),new $n(!1,86,42,16,16,4),new $n(!1,114,48,18,18,4),new $n(!1,144,56,20,20,4),new $n(!1,174,68,22,22,4),new $n(!1,204,84,24,24,4,102,42),new $n(!1,280,112,14,14,16,140,56),new $n(!1,368,144,16,16,16,92,36),new $n(!1,456,192,18,18,16,114,48),new $n(!1,576,224,20,20,16,144,56),new $n(!1,696,272,22,22,16,174,68),new $n(!1,816,336,24,24,16,136,56),new $n(!1,1050,408,18,18,36,175,68),new $n(!1,1304,496,20,20,36,163,62),new XF],KF=function(){function n(e){this.msg=e,this.pos=0,this.skipAtEnd=0;for(var t=e.split("").map(function(s){return s.charCodeAt(0)}),r=new cn,i=0,a=t.length;i<a;i++){var o=String.fromCharCode(t[i]&255);if(o==="?"&&e.charAt(i)!=="?")throw new Error("Message contains characters outside ISO-8859-1 encoding.");r.append(o)}this.msg=r.toString(),this.shape=0,this.codewords=new cn,this.newEncoding=-1}return n.prototype.setSymbolShape=function(e){this.shape=e},n.prototype.setSizeConstraints=function(e,t){this.minSize=e,this.maxSize=t},n.prototype.getMessage=function(){return this.msg},n.prototype.setSkipAtEnd=function(e){this.skipAtEnd=e},n.prototype.getCurrentChar=function(){return this.msg.charCodeAt(this.pos)},n.prototype.getCurrent=function(){return this.msg.charCodeAt(this.pos)},n.prototype.getCodewords=function(){return this.codewords},n.prototype.writeCodewords=function(e){this.codewords.append(e)},n.prototype.writeCodeword=function(e){this.codewords.append(e)},n.prototype.getCodewordCount=function(){return this.codewords.length()},n.prototype.getNewEncoding=function(){return this.newEncoding},n.prototype.signalEncoderChange=function(e){this.newEncoding=e},n.prototype.resetEncoderSignal=function(){this.newEncoding=-1},n.prototype.hasMoreCharacters=function(){return this.pos<this.getTotalMessageCharCount()},n.prototype.getTotalMessageCharCount=function(){return this.msg.length-this.skipAtEnd},n.prototype.getRemainingCharacters=function(){return this.getTotalMessageCharCount()-this.pos},n.prototype.getSymbolInfo=function(){return this.symbolInfo},n.prototype.updateSymbolInfo=function(e){e===void 0&&(e=this.getCodewordCount()),(this.symbolInfo==null||e>this.symbolInfo.getDataCapacity())&&(this.symbolInfo=$n.lookup(e,this.shape,this.minSize,this.maxSize,!0))},n.prototype.resetSymbolInfo=function(){this.symbolInfo=null},n}(),QF=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),ZF=function(n){QF(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getEncodingMode=function(){return Oi},e.prototype.encode=function(t){for(var r=new cn;t.hasMoreCharacters();){var i=t.getCurrentChar();t.pos++,this.encodeChar(i,r);var a=r.length();if(a%3===0){this.writeNextTriplet(t,r);var o=il.lookAheadTest(t.getMessage(),t.pos,this.getEncodingMode());if(o!==this.getEncodingMode()){t.signalEncoderChange(ir);break}}}this.handleEOD(t,r)},e.prototype.encodeChar=function(t,r){switch(t){case 13:r.append(0);break;case 42:r.append(1);break;case 62:r.append(2);break;case 32:r.append(3);break;default:t>=48&&t<=57?r.append(t-48+4):t>=65&&t<=90?r.append(t-65+14):il.illegalCharacter(On.getCharAt(t));break}return 1},e.prototype.handleEOD=function(t,r){t.updateSymbolInfo();var i=t.getSymbolInfo().getDataCapacity()-t.getCodewordCount(),a=r.length();t.pos-=a,(t.getRemainingCharacters()>1||i>1||t.getRemainingCharacters()!==i)&&t.writeCodeword(zF),t.getNewEncoding()<0&&t.signalEncoderChange(ir)},e}(sx),JF=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),ej=function(n){JF(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getEncodingMode=function(){return Xa},e.prototype.encodeChar=function(t,r){if(t===32)return r.append(3),1;if(t>=48&&t<=57)return r.append(t-48+4),1;if(t>=97&&t<=122)return r.append(t-97+14),1;if(t<32)return r.append(0),r.append(t),2;if(t<=47)return r.append(1),r.append(t-33),2;if(t<=64)return r.append(1),r.append(t-58+15),2;if(t>=91&&t<=95)return r.append(1),r.append(t-91+22),2;if(t===96)return r.append(2),r.append(0),2;if(t<=90)return r.append(2),r.append(t-65+1),2;if(t<=127)return r.append(2),r.append(t-123+27),2;r.append("1");var i=2;return i+=this.encodeChar(t-128,r),i},e}(sx),il=function(){function n(){}return n.randomize253State=function(e){var t=149*e%253+1,r=Gb+t;return r<=254?r:r-254},n.encodeHighLevel=function(e,t,r,i,a){t===void 0&&(t=0),r===void 0&&(r=null),i===void 0&&(i=null),a===void 0&&(a=!1);var o=new sx,s=[new qF,o,new ej,new ZF,new GF,new HF],u=new KF(e);u.setSymbolShape(t),u.setSizeConstraints(r,i),e.startsWith(Wb)&&e.endsWith(Xb)?(u.writeCodeword(BF),u.setSkipAtEnd(2),u.pos+=Wb.length):e.startsWith($b)&&e.endsWith(Xb)&&(u.writeCodeword(FF),u.setSkipAtEnd(2),u.pos+=$b.length);var f=ir;for(a&&(o.encodeMaximal(u),f=u.getNewEncoding(),u.resetEncoderSignal());u.hasMoreCharacters();)s[f].encode(u),u.getNewEncoding()>=0&&(f=u.getNewEncoding(),u.resetEncoderSignal());var h=u.getCodewordCount();u.updateSymbolInfo();var p=u.getSymbolInfo().getDataCapacity();h<p&&f!==ir&&f!==Da&&f!==$i&&u.writeCodeword("þ");var g=u.getCodewords();for(g.length()<p&&g.append(Gb);g.length()<p;)g.append(this.randomize253State(g.length()+1));return u.getCodewords().toString()},n.lookAheadTest=function(e,t,r){var i=this.lookAheadTestIntern(e,t,r);if(r===Oi&&i===Oi){for(var a=Math.min(t+3,e.length),o=t;o<a;o++)if(!this.isNativeX12(e.charCodeAt(o)))return ir}else if(r===$i&&i===$i){for(var a=Math.min(t+4,e.length),o=t;o<a;o++)if(!this.isNativeEDIFACT(e.charCodeAt(o)))return ir}return i},n.lookAheadTestIntern=function(e,t,r){if(t>=e.length)return r;var i;r===ir?i=[0,1,1,1,1,1.25]:(i=[1,2,2,2,2,2.25],i[r]=0);for(var a=0,o=new Uint8Array(6),s=[];;){if(t+a===e.length){Li.fill(o,0),Li.fill(s,0);var u=this.findMinimums(i,s,gn.MAX_VALUE,o),f=this.getMinimumCount(o);if(s[ir]===u)return ir;if(f===1){if(o[Da]>0)return Da;if(o[$i]>0)return $i;if(o[Xa]>0)return Xa;if(o[Oi]>0)return Oi}return sa}var h=e.charCodeAt(t+a);if(a++,this.isDigit(h)?i[ir]+=.5:this.isExtendedASCII(h)?(i[ir]=Math.ceil(i[ir]),i[ir]+=2):(i[ir]=Math.ceil(i[ir]),i[ir]++),this.isNativeC40(h)?i[sa]+=2/3:this.isExtendedASCII(h)?i[sa]+=8/3:i[sa]+=4/3,this.isNativeText(h)?i[Xa]+=2/3:this.isExtendedASCII(h)?i[Xa]+=8/3:i[Xa]+=4/3,this.isNativeX12(h)?i[Oi]+=2/3:this.isExtendedASCII(h)?i[Oi]+=13/3:i[Oi]+=10/3,this.isNativeEDIFACT(h)?i[$i]+=3/4:this.isExtendedASCII(h)?i[$i]+=17/4:i[$i]+=13/4,this.isSpecialB256(h)?i[Da]+=4:i[Da]++,a>=4){if(Li.fill(o,0),Li.fill(s,0),this.findMinimums(i,s,gn.MAX_VALUE,o),s[ir]<this.min(s[Da],s[sa],s[Xa],s[Oi],s[$i]))return ir;if(s[Da]<s[ir]||s[Da]+1<this.min(s[sa],s[Xa],s[Oi],s[$i]))return Da;if(s[$i]+1<this.min(s[Da],s[sa],s[Xa],s[Oi],s[ir]))return $i;if(s[Xa]+1<this.min(s[Da],s[sa],s[$i],s[Oi],s[ir]))return Xa;if(s[Oi]+1<this.min(s[Da],s[sa],s[$i],s[Xa],s[ir]))return Oi;if(s[sa]+1<this.min(s[ir],s[Da],s[$i],s[Xa])){if(s[sa]<s[Oi])return sa;if(s[sa]===s[Oi]){for(var p=t+a+1;p<e.length;){var g=e.charCodeAt(p);if(this.isX12TermSep(g))return Oi;if(!this.isNativeX12(g))break;p++}return sa}}}}},n.min=function(e,t,r,i,a){var o=Math.min(e,Math.min(t,Math.min(r,i)));return a===void 0?o:Math.min(o,a)},n.findMinimums=function(e,t,r,i){for(var a=0;a<6;a++){var o=t[a]=Math.ceil(e[a]);r>o&&(r=o,Li.fill(i,0)),r===o&&(i[a]=i[a]+1)}return r},n.getMinimumCount=function(e){for(var t=0,r=0;r<6;r++)t+=e[r];return t||0},n.isDigit=function(e){return e>=48&&e<=57},n.isExtendedASCII=function(e){return e>=128&&e<=255},n.isNativeC40=function(e){return e===32||e>=48&&e<=57||e>=65&&e<=90},n.isNativeText=function(e){return e===32||e>=48&&e<=57||e>=97&&e<=122},n.isNativeX12=function(e){return this.isX12TermSep(e)||e===32||e>=48&&e<=57||e>=65&&e<=90},n.isX12TermSep=function(e){return e===13||e===42||e===62},n.isNativeEDIFACT=function(e){return e>=32&&e<=94},n.isSpecialB256=function(e){return!1},n.determineConsecutiveDigitCount=function(e,t){t===void 0&&(t=0);for(var r=e.length,i=t;i<r&&this.isDigit(e.charCodeAt(i));)i++;return i-t},n.illegalCharacter=function(e){var t=gn.toHexString(e.charCodeAt(0));throw t="0000".substring(0,4-t.length)+t,new Error("Illegal character: "+e+" (0x"+t+")")},n}(),mv=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Yb=function(){function n(e){this.charset=e,this.name=e.name}return n.prototype.canEncode=function(e){try{return ws.encode(e,this.charset)!=null}catch{return!1}},n}(),tj=function(){function n(e,t,r){var i,a,o,s,u,f;this.ENCODERS=["IBM437","ISO-8859-2","ISO-8859-3","ISO-8859-4","ISO-8859-5","ISO-8859-6","ISO-8859-7","ISO-8859-8","ISO-8859-9","ISO-8859-10","ISO-8859-11","ISO-8859-13","ISO-8859-14","ISO-8859-15","ISO-8859-16","windows-1250","windows-1251","windows-1252","windows-1256","Shift_JIS"].map(function(C){return new Yb(OF.forName(C))}),this.encoders=[];var h=[];h.push(new Yb(DF.ISO_8859_1));for(var p=t!=null&&t.name.startsWith("UTF"),g=0;g<e.length;g++){var m=!1;try{for(var _=(i=void 0,mv(h)),b=_.next();!b.done;b=_.next()){var T=b.value,S=e.charAt(g),D=S.charCodeAt(0);if(D===r||T.canEncode(S)){m=!0;break}}}catch(C){i={error:C}}finally{try{b&&!b.done&&(a=_.return)&&a.call(_)}finally{if(i)throw i.error}}if(!m)try{for(var B=(o=void 0,mv(this.ENCODERS)),V=B.next();!V.done;V=B.next()){var T=V.value;if(T.canEncode(e.charAt(g))){h.push(T),m=!0;break}}}catch(C){o={error:C}}finally{try{V&&!V.done&&(s=B.return)&&s.call(B)}finally{if(o)throw o.error}}m||(p=!0)}if(h.length===1&&!p)this.encoders=[h[0]];else{this.encoders=[];var Y=0;try{for(var q=mv(h),P=q.next();!P.done;P=q.next()){var T=P.value;this.encoders[Y++]=T}}catch(C){u={error:C}}finally{try{P&&!P.done&&(f=q.return)&&f.call(q)}finally{if(u)throw u.error}}}var E=-1;if(t!=null){for(var g=0;g<this.encoders.length;g++)if(this.encoders[g]!=null&&t.name===this.encoders[g].name){E=g;break}}this.priorityEncoderIndex=E}return n.prototype.length=function(){return this.encoders.length},n.prototype.getCharsetName=function(e){if(!(e<this.length()))throw new Error("index must be less than length");return this.encoders[e].name},n.prototype.getCharset=function(e){if(!(e<this.length()))throw new Error("index must be less than length");return this.encoders[e].charset},n.prototype.getECIValue=function(e){return this.encoders[e].charset.getValueIdentifier()},n.prototype.getPriorityEncoderIndex=function(){return this.priorityEncoderIndex},n.prototype.canEncode=function(e,t){if(!(t<this.length()))throw new Error("index must be less than length");return!0},n.prototype.encode=function(e,t){if(!(t<this.length()))throw new Error("index must be less than length");return ws.encode(On.getCharAt(e),this.encoders[t].name)},n}(),nj=3,rj=function(){function n(e,t,r){this.fnc1=r;var i=new tj(e,t,r);if(i.length()===1)for(var a=0;a<this.bytes.length;a++){var o=e.charAt(a).charCodeAt(0);this.bytes[a]=o===r?1e3:o}else this.bytes=this.encodeMinimally(e,i,r)}return n.prototype.getFNC1Character=function(){return this.fnc1},n.prototype.length=function(){return this.bytes.length},n.prototype.haveNCharacters=function(e,t){if(e+t-1>=this.bytes.length)return!1;for(var r=0;r<t;r++)if(this.isECI(e+r))return!1;return!0},n.prototype.charAt=function(e){if(e<0||e>=this.length())throw new Error(""+e);if(this.isECI(e))throw new Error("value at "+e+" is not a character but an ECI");return this.isFNC1(e)?this.fnc1:this.bytes[e]},n.prototype.subSequence=function(e,t){if(e<0||e>t||t>this.length())throw new Error(""+e);for(var r=new cn,i=e;i<t;i++){if(this.isECI(i))throw new Error("value at "+i+" is not a character but an ECI");r.append(this.charAt(i))}return r.toString()},n.prototype.isECI=function(e){if(e<0||e>=this.length())throw new Error(""+e);return this.bytes[e]>255&&this.bytes[e]<=999},n.prototype.isFNC1=function(e){if(e<0||e>=this.length())throw new Error(""+e);return this.bytes[e]===1e3},n.prototype.getECIValue=function(e){if(e<0||e>=this.length())throw new Error(""+e);if(!this.isECI(e))throw new Error("value at "+e+" is not an ECI but a character");return this.bytes[e]-256},n.prototype.addEdge=function(e,t,r){(e[t][r.encoderIndex]==null||e[t][r.encoderIndex].cachedTotalSize>r.cachedTotalSize)&&(e[t][r.encoderIndex]=r)},n.prototype.addEdges=function(e,t,r,i,a,o){var s=e.charAt(i).charCodeAt(0),u=0,f=t.length();t.getPriorityEncoderIndex()>=0&&(s===o||t.canEncode(s,t.getPriorityEncoderIndex()))&&(u=t.getPriorityEncoderIndex(),f=u+1);for(var h=u;h<f;h++)(s===o||t.canEncode(s,h))&&this.addEdge(r,i+1,new Kb(s,t,h,a,o))},n.prototype.encodeMinimally=function(e,t,r){var i=e.length,a=new Kb[i+1][t.length()];this.addEdges(e,t,a,0,null,r);for(var o=1;o<=i;o++){for(var s=0;s<t.length();s++)a[o][s]!=null&&o<i&&this.addEdges(e,t,a,o,a[o][s],r);for(var s=0;s<t.length();s++)a[o-1][s]=null}for(var u=-1,f=gn.MAX_VALUE,s=0;s<t.length();s++)if(a[i][s]!=null){var h=a[i][s];h.cachedTotalSize<f&&(f=h.cachedTotalSize,u=s)}if(u<0)throw new Error('Failed to encode "'+e+'"');for(var p=[],g=a[i][u];g!=null;){if(g.isFNC1())p.unshift(1e3);else for(var m=t.encode(g.c,g.encoderIndex),o=m.length-1;o>=0;o--)p.unshift(m[o]&255);var _=g.previous===null?0:g.previous.encoderIndex;_!==g.encoderIndex&&p.unshift(256+t.getECIValue(g.encoderIndex)),g=g.previous}for(var b=[],o=0;o<b.length;o++)b[o]=p[o];return b},n}(),Kb=function(){function n(e,t,r,i,a){this.c=e,this.encoderSet=t,this.encoderIndex=r,this.previous=i,this.fnc1=a,this.c=e===a?1e3:e;var o=this.isFNC1()?1:t.encode(e,r).length,s=i===null?0:i.encoderIndex;s!==r&&(o+=nj),i!=null&&(o+=i.cachedTotalSize),this.cachedTotalSize=o}return n.prototype.isFNC1=function(){return this.c===1e3},n}(),ij=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();var Qb;(function(n){n[n.ASCII=0]="ASCII",n[n.C40=1]="C40",n[n.TEXT=2]="TEXT",n[n.X12=3]="X12",n[n.EDF=4]="EDF",n[n.B256=5]="B256"})(Qb||(Qb={}));(function(n){ij(e,n);function e(t,r,i,a,o){var s=n.call(this,t,r,i)||this;return s.shape=a,s.macroId=o,s}return e.prototype.getMacroId=function(){return this.macroId},e.prototype.getShapeHint=function(){return this.shape},e})(rj);var aj=function(){function n(){}return n.prototype.isCompact=function(){return this.compact},n.prototype.setCompact=function(e){this.compact=e},n.prototype.getSize=function(){return this.size},n.prototype.setSize=function(e){this.size=e},n.prototype.getLayers=function(){return this.layers},n.prototype.setLayers=function(e){this.layers=e},n.prototype.getCodeWords=function(){return this.codeWords},n.prototype.setCodeWords=function(e){this.codeWords=e},n.prototype.getMatrix=function(){return this.matrix},n.prototype.setMatrix=function(e){this.matrix=e},n}(),Zb=function(){function n(){}return n.singletonList=function(e){return[e]},n.min=function(e,t){return e.sort(t)[0]},n}(),oj=function(){function n(e){this.previous=e}return n.prototype.getPrevious=function(){return this.previous},n}(),sj=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),lx=function(n){sj(e,n);function e(t,r,i){var a=n.call(this,t)||this;return a.value=r,a.bitCount=i,a}return e.prototype.appendTo=function(t,r){t.appendBits(this.value,this.bitCount)},e.prototype.add=function(t,r){return new e(this,t,r)},e.prototype.addBinaryShift=function(t,r){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new e(this,t,r)},e.prototype.toString=function(){var t=this.value&(1<<this.bitCount)-1;return t|=1<<this.bitCount,"<"+gn.toBinaryString(t|1<<this.bitCount).substring(1)+">"},e}(oj),lj=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),uj=function(n){lj(e,n);function e(t,r,i){var a=n.call(this,t,0,0)||this;return a.binaryShiftStart=r,a.binaryShiftByteCount=i,a}return e.prototype.appendTo=function(t,r){for(var i=0;i<this.binaryShiftByteCount;i++)(i===0||i===31&&this.binaryShiftByteCount<=62)&&(t.appendBits(31,5),this.binaryShiftByteCount>62?t.appendBits(this.binaryShiftByteCount-31,16):i===0?t.appendBits(Math.min(this.binaryShiftByteCount,31),5):t.appendBits(this.binaryShiftByteCount-31,5)),t.appendBits(r[this.binaryShiftStart+i],8)},e.prototype.addBinaryShift=function(t,r){return new e(this,t,r)},e.prototype.toString=function(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"},e}(lx);function cj(n,e,t){return new uj(n,e,t)}function b1(n,e,t){return new lx(n,e,t)}var fj=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],rf=0,Pg=1,xs=2,_S=3,$l=4,hj=new lx(null,0,0),vv=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])],dj=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};function pj(n){var e,t;try{for(var r=dj(n),i=r.next();!i.done;i=r.next()){var a=i.value;Li.fill(a,-1)}}catch(o){e={error:o}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}return n[rf][$l]=0,n[Pg][$l]=0,n[Pg][rf]=28,n[_S][$l]=0,n[xs][$l]=0,n[xs][rf]=15,n}var wS=pj(Li.createInt32Array(6,6)),gj=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},mj=function(){function n(e,t,r,i){this.token=e,this.mode=t,this.binaryShiftByteCount=r,this.bitCount=i}return n.prototype.getMode=function(){return this.mode},n.prototype.getToken=function(){return this.token},n.prototype.getBinaryShiftByteCount=function(){return this.binaryShiftByteCount},n.prototype.getBitCount=function(){return this.bitCount},n.prototype.latchAndAppend=function(e,t){var r=this.bitCount,i=this.token;if(e!==this.mode){var a=vv[this.mode][e];i=b1(i,a&65535,a>>16),r+=a>>16}var o=e===xs?4:5;return i=b1(i,t,o),new n(i,e,0,r+o)},n.prototype.shiftAndAppend=function(e,t){var r=this.token,i=this.mode===xs?4:5;return r=b1(r,wS[this.mode][e],i),r=b1(r,t,5),new n(r,this.mode,0,this.bitCount+i+5)},n.prototype.addBinaryShiftChar=function(e){var t=this.token,r=this.mode,i=this.bitCount;if(this.mode===$l||this.mode===xs){var a=vv[r][rf];t=b1(t,a&65535,a>>16),i+=a>>16,r=rf}var o=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,s=new n(t,r,this.binaryShiftByteCount+1,i+o);return s.binaryShiftByteCount===2078&&(s=s.endBinaryShift(e+1)),s},n.prototype.endBinaryShift=function(e){if(this.binaryShiftByteCount===0)return this;var t=this.token;return t=cj(t,e-this.binaryShiftByteCount,this.binaryShiftByteCount),new n(t,this.mode,0,this.bitCount)},n.prototype.isBetterThanOrEqualTo=function(e){var t=this.bitCount+(vv[this.mode][e.mode]>>16);return this.binaryShiftByteCount<e.binaryShiftByteCount?t+=n.calculateBinaryShiftCost(e)-n.calculateBinaryShiftCost(this):this.binaryShiftByteCount>e.binaryShiftByteCount&&e.binaryShiftByteCount>0&&(t+=10),t<=e.bitCount},n.prototype.toBitArray=function(e){for(var t,r,i=[],a=this.endBinaryShift(e.length).token;a!==null;a=a.getPrevious())i.unshift(a);var o=new Qi;try{for(var s=gj(i),u=s.next();!u.done;u=s.next()){var f=u.value;f.appendTo(o,e)}}catch(h){t={error:h}}finally{try{u&&!u.done&&(r=s.return)&&r.call(s)}finally{if(t)throw t.error}}return o},n.prototype.toString=function(){return On.format("%s bits=%d bytes=%d",fj[this.mode],this.bitCount,this.binaryShiftByteCount)},n.calculateBinaryShiftCost=function(e){return e.binaryShiftByteCount>62?21:e.binaryShiftByteCount>31?20:e.binaryShiftByteCount>0?10:0},n.INITIAL_STATE=new n(hj,rf,0,0),n}();function vj(n){var e=On.getCharCode(" "),t=On.getCharCode("."),r=On.getCharCode(",");n[rf][e]=1;for(var i=On.getCharCode("Z"),a=On.getCharCode("A"),o=a;o<=i;o++)n[rf][o]=o-a+2;n[Pg][e]=1;for(var s=On.getCharCode("z"),u=On.getCharCode("a"),o=u;o<=s;o++)n[Pg][o]=o-u+2;n[xs][e]=1;for(var f=On.getCharCode("9"),h=On.getCharCode("0"),o=h;o<=f;o++)n[xs][o]=o-h+2;n[xs][r]=12,n[xs][t]=13;for(var p=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""],g=0;g<p.length;g++)n[_S][On.getCharCode(p[g])]=g;for(var m=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"],g=0;g<m.length;g++)On.getCharCode(m[g])>0&&(n[$l][On.getCharCode(m[g])]=g);return n}var yv=vj(Li.createInt32Array(5,256)),kp=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},yj=function(){function n(e){this.text=e}return n.prototype.encode=function(){for(var e=On.getCharCode(" "),t=On.getCharCode(`
`),r=Zb.singletonList(mj.INITIAL_STATE),i=0;i<this.text.length;i++){var a=void 0,o=i+1<this.text.length?this.text[i+1]:0;switch(this.text[i]){case On.getCharCode("\r"):a=o===t?2:0;break;case On.getCharCode("."):a=o===e?3:0;break;case On.getCharCode(","):a=o===e?4:0;break;case On.getCharCode(":"):a=o===e?5:0;break;default:a=0}a>0?(r=n.updateStateListForPair(r,i,a),i++):r=this.updateStateListForChar(r,i)}var s=Zb.min(r,function(u,f){return u.getBitCount()-f.getBitCount()});return s.toBitArray(this.text)},n.prototype.updateStateListForChar=function(e,t){var r,i,a=[];try{for(var o=kp(e),s=o.next();!s.done;s=o.next()){var u=s.value;this.updateStateForChar(u,t,a)}}catch(f){r={error:f}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}return n.simplifyStates(a)},n.prototype.updateStateForChar=function(e,t,r){for(var i=this.text[t]&255,a=yv[e.getMode()][i]>0,o=null,s=0;s<=$l;s++){var u=yv[s][i];if(u>0){if(o==null&&(o=e.endBinaryShift(t)),!a||s===e.getMode()||s===xs){var f=o.latchAndAppend(s,u);r.push(f)}if(!a&&wS[e.getMode()][s]>=0){var h=o.shiftAndAppend(s,u);r.push(h)}}}if(e.getBinaryShiftByteCount()>0||yv[e.getMode()][i]===0){var p=e.addBinaryShiftChar(t);r.push(p)}},n.updateStateListForPair=function(e,t,r){var i,a,o=[];try{for(var s=kp(e),u=s.next();!u.done;u=s.next()){var f=u.value;this.updateStateForPair(f,t,r,o)}}catch(h){i={error:h}}finally{try{u&&!u.done&&(a=s.return)&&a.call(s)}finally{if(i)throw i.error}}return this.simplifyStates(o)},n.updateStateForPair=function(e,t,r,i){var a=e.endBinaryShift(t);if(i.push(a.latchAndAppend($l,r)),e.getMode()!==$l&&i.push(a.shiftAndAppend($l,r)),r===3||r===4){var o=a.latchAndAppend(xs,16-r).latchAndAppend(xs,1);i.push(o)}if(e.getBinaryShiftByteCount()>0){var s=e.addBinaryShiftChar(t).addBinaryShiftChar(t+1);i.push(s)}},n.simplifyStates=function(e){var t,r,i,a,o=[];try{for(var s=kp(e),u=s.next();!u.done;u=s.next()){var f=u.value,h=!0,p=function(T){if(T.isBetterThanOrEqualTo(f))return h=!1,"break";f.isBetterThanOrEqualTo(T)&&(o=o.filter(function(S){return S!==T}))};try{for(var g=(i=void 0,kp(o)),m=g.next();!m.done;m=g.next()){var _=m.value,b=p(_);if(b==="break")break}}catch(T){i={error:T}}finally{try{m&&!m.done&&(a=g.return)&&a.call(g)}finally{if(i)throw i.error}}h&&o.push(f)}}catch(T){t={error:T}}finally{try{u&&!u.done&&(r=s.return)&&r.call(s)}finally{if(t)throw t.error}}return o},n}(),xj=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};(function(){function n(){}return n.encodeBytes=function(e){return n.encode(e,n.DEFAULT_EC_PERCENT,n.DEFAULT_AZTEC_LAYERS)},n.encode=function(e,t,r){var i=new yj(e).encode(),a=gn.truncDivision(i.getSize()*t,100)+11,o=i.getSize()+a,s,u,f,h,p;if(r!==n.DEFAULT_AZTEC_LAYERS){if(s=r<0,u=Math.abs(r),u>(s?n.MAX_NB_BITS_COMPACT:n.MAX_NB_BITS))throw new Bt(On.format("Illegal value %s for layers",r));f=n.totalBitsInLayer(u,s),h=n.WORD_SIZE[u];var g=f-f%h;if(p=n.stuffBits(i,h),p.getSize()+a>g)throw new Bt("Data to large for user specified layer");if(s&&p.getSize()>h*64)throw new Bt("Data to large for user specified layer")}else{h=0,p=null;for(var m=0;;m++){if(m>n.MAX_NB_BITS)throw new Bt("Data too large for an Aztec code");if(s=m<=3,u=s?m+1:m,f=n.totalBitsInLayer(u,s),!(o>f)){(p==null||h!==n.WORD_SIZE[u])&&(h=n.WORD_SIZE[u],p=n.stuffBits(i,h));var g=f-f%h;if(!(s&&p.getSize()>h*64)&&p.getSize()+a<=g)break}}}var _=n.generateCheckWords(p,f,h),b=p.getSize()/h,T=n.generateModeMessage(s,u,b),S=(s?11:14)+u*4,D=new Int32Array(S),B;if(s){B=S;for(var m=0;m<D.length;m++)D[m]=m}else{B=S+1+2*gn.truncDivision(gn.truncDivision(S,2)-1,15);for(var V=gn.truncDivision(S,2),Y=gn.truncDivision(B,2),m=0;m<V;m++){var q=m+gn.truncDivision(m,15);D[V-m-1]=Y-q-1,D[V+m]=Y+q+1}}for(var P=new ru(B),m=0,E=0;m<u;m++){for(var C=(u-m)*4+(s?9:12),M=0;M<C;M++)for(var R=M*2,L=0;L<2;L++)_.get(E+R+L)&&P.set(D[m*2+L],D[m*2+M]),_.get(E+C*2+R+L)&&P.set(D[m*2+M],D[S-1-m*2-L]),_.get(E+C*4+R+L)&&P.set(D[S-1-m*2-L],D[S-1-m*2-M]),_.get(E+C*6+R+L)&&P.set(D[S-1-m*2-M],D[m*2+L]);E+=C*8}if(n.drawModeMessage(P,s,B,T),s)n.drawBullsEye(P,gn.truncDivision(B,2),5);else{n.drawBullsEye(P,gn.truncDivision(B,2),7);for(var m=0,M=0;m<gn.truncDivision(S,2)-1;m+=15,M+=16)for(var L=gn.truncDivision(B,2)&1;L<B;L+=2)P.set(gn.truncDivision(B,2)-M,L),P.set(gn.truncDivision(B,2)+M,L),P.set(L,gn.truncDivision(B,2)-M),P.set(L,gn.truncDivision(B,2)+M)}var j=new aj;return j.setCompact(s),j.setSize(B),j.setLayers(u),j.setCodeWords(b),j.setMatrix(P),j},n.drawBullsEye=function(e,t,r){for(var i=0;i<r;i+=2)for(var a=t-i;a<=t+i;a++)e.set(a,t-i),e.set(a,t+i),e.set(t-i,a),e.set(t+i,a);e.set(t-r,t-r),e.set(t-r+1,t-r),e.set(t-r,t-r+1),e.set(t+r,t-r),e.set(t+r,t-r+1),e.set(t+r,t+r-1)},n.generateModeMessage=function(e,t,r){var i=new Qi;return e?(i.appendBits(t-1,2),i.appendBits(r-1,6),i=n.generateCheckWords(i,28,4)):(i.appendBits(t-1,5),i.appendBits(r-1,11),i=n.generateCheckWords(i,40,4)),i},n.drawModeMessage=function(e,t,r,i){var a=gn.truncDivision(r,2);if(t)for(var o=0;o<7;o++){var s=a-3+o;i.get(o)&&e.set(s,a-5),i.get(o+7)&&e.set(a+5,s),i.get(20-o)&&e.set(s,a+5),i.get(27-o)&&e.set(a-5,s)}else for(var o=0;o<10;o++){var s=a-5+o+gn.truncDivision(o,5);i.get(o)&&e.set(s,a-7),i.get(o+10)&&e.set(a+7,s),i.get(29-o)&&e.set(s,a+7),i.get(39-o)&&e.set(a-7,s)}},n.generateCheckWords=function(e,t,r){var i,a,o=e.getSize()/r,s=new yS(n.getGF(r)),u=gn.truncDivision(t,r),f=n.bitsToWords(e,r,u);s.encode(f,u-o);var h=t%r,p=new Qi;p.appendBits(0,h);try{for(var g=xj(Array.from(f)),m=g.next();!m.done;m=g.next()){var _=m.value;p.appendBits(_,r)}}catch(b){i={error:b}}finally{try{m&&!m.done&&(a=g.return)&&a.call(g)}finally{if(i)throw i.error}}return p},n.bitsToWords=function(e,t,r){var i=new Int32Array(r),a,o;for(a=0,o=e.getSize()/t;a<o;a++){for(var s=0,u=0;u<t;u++)s|=e.get(a*t+u)?1<<t-u-1:0;i[a]=s}return i},n.getGF=function(e){switch(e){case 4:return yo.AZTEC_PARAM;case 6:return yo.AZTEC_DATA_6;case 8:return yo.AZTEC_DATA_8;case 10:return yo.AZTEC_DATA_10;case 12:return yo.AZTEC_DATA_12;default:throw new Bt("Unsupported word size "+e)}},n.stuffBits=function(e,t){for(var r=new Qi,i=e.getSize(),a=(1<<t)-2,o=0;o<i;o+=t){for(var s=0,u=0;u<t;u++)(o+u>=i||e.get(o+u))&&(s|=1<<t-1-u);(s&a)===a?(r.appendBits(s&a,t),o--):(s&a)===0?(r.appendBits(s|1,t),o--):r.appendBits(s,t)}return r},n.totalBitsInLayer=function(e,t){return((t?88:112)+16*e)*e},n.DEFAULT_EC_PERCENT=33,n.DEFAULT_AZTEC_LAYERS=0,n.MAX_NB_BITS=32,n.MAX_NB_BITS_COMPACT=4,n.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]),n})();const _j=({onScanSuccess:n,onClose:e})=>{const t=ve.useRef(null),r=ve.useRef(null);return ve.useEffect(()=>{const i=new wF;return r.current=i,i.decodeFromVideoDevice(null,t.current,a=>{a&&(i.reset(),n(a.getText()))}),()=>{try{i.reset()}catch{}}},[n]),O.jsxs("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"#000000e6",zIndex:9999,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:[O.jsx("video",{ref:t,style:{width:"90%",maxWidth:"500px",borderRadius:"12px",border:"3px solid white"},muted:!0,autoPlay:!0,playsInline:!0}),O.jsx("button",{onClick:()=>{var i;(i=r.current)==null||i.reset(),e()},style:{marginTop:"1rem",padding:"10px 20px",backgroundColor:"#dc3545",color:"#fff",border:"none",borderRadius:"6px",fontSize:"16px",cursor:"pointer"},children:"סגור סורק"})]})};function bS(n){const e=[...new Set(n)].sort((t,r)=>t-r);for(let t=1;t<=e.length+1;t++)if(!e.includes(t))return t}async function Jb({name:n,quantity:e,allowMerge:t=!1,existingItemId:r=null,imageUrl:i=null,publicComment:a="",internalComment:o="",createdBy:s="",updatedBy:u="",createdAt:f=null,updatedAt:h=null}){if(n=n.trim(),t&&r){const T=Jr(nn,"items",r),B=(await bi(Wu(Tr(nn,"items"),Ju("__name__","==",r)))).docs[0].data().quantity+e,V={quantity:B};return i&&(V.imageUrl=i),await cl(T,V),{merged:!0,newQuantity:B}}const g=(await bi(Tr(nn,"items"))).docs.map(T=>T.data().ItemId).filter(T=>typeof T=="number"),m=bS(g),_=Tr(nn,"items"),b=Jr(_);return await X5(b,{name:n,quantity:e,imageUrl:i,ItemId:m,isActive:!0,createdAt:f,updatedAt:h,createdBy:s,updatedBy:u,publicComment:a,internalComment:o}),{added:!0,ItemId:m}}async function wj(n,e=""){const t=Jr(nn,"items",n),r=await wd(t);if(!r.exists())throw new Error("Item not found");const{ItemId:i,...a}=r.data();await PE(Tr(nn,"deletedItems"),{...a,deletedAt:Ya(),deletedBy:e}),await Y5(t)}async function bj(n,e=""){const t=Jr(nn,"deletedItems",n),r=await wd(t);if(!r.exists())throw new Error("Deleted item not found");const i=r.data(),o=(await bi(Tr(nn,"items"))).docs.map(u=>u.data().ItemId).filter(u=>typeof u=="number"),s=bS(o);await X5(Jr(Tr(nn,"items")),{...i,ItemId:s,createdAt:Ya(),updatedAt:Ya(),createdBy:e,updatedBy:e,isActive:!0}),await Y5(t)}async function Aj(n){const e=Wu(Tr(nn,"items"),Ju("ItemId","==",Number(n))),t=await bi(e);if(!t.empty){const r=t.docs[0];return{id:r.id,...r.data()}}throw new Error("לא נמצא מוצר עם ברקוד זה")}const Ej=({item:n,onConfirm:e,onCancel:t})=>{const[r,i]=ve.useState(1),a=r>=1&&r<=n.quantity;return O.jsx("div",{className:"modal-overlay",children:O.jsxs("div",{className:"modal-box",dir:"rtl",children:[O.jsx("h3",{style:{textAlign:"center"},children:n.name}),O.jsx("img",{src:n.imageUrl,alt:n.name,style:{width:"100%",maxHeight:"200px",objectFit:"cover"}}),O.jsxs("p",{children:["מזהה מוצר: ",n.ItemId]}),O.jsxs("p",{children:["כמות זמינה: ",n.quantity]}),O.jsxs("div",{style:{marginTop:"1rem"},children:[O.jsx("label",{children:"בחר כמות:"}),O.jsx("input",{type:"number",value:r,min:1,max:n.quantity,onChange:o=>i(+o.target.value),style:{width:"100%",padding:"10px",marginTop:"0.5rem",border:a?"1px solid #ccc":"2px solid red"}}),!a&&O.jsxs("p",{style:{color:"red",marginTop:"0.5rem"},children:["כמות לא תקינה. יש לבחור בין 1 ל־",n.quantity]})]}),O.jsxs("div",{style:{marginTop:"1.5rem",display:"flex",justifyContent:"space-between"},children:[O.jsx("button",{className:"btn btn-red",onClick:t,children:"ביטול"}),O.jsx("button",{className:"btn btn-green",onClick:()=>e(r),disabled:!a,children:"אישור"})]})]})})},Sj=({showCatalogPopup:n,setShowCatalogPopup:e,searchTerm:t,setSearchTerm:r,availableItems:i,toggleSelectItem:a,changeQty:o,form:s,loadingItems:u,setAvailableItems:f})=>{const[h,p]=ve.useState(!1),[g,m]=ve.useState(null),[_,b]=ve.useState([]);if(ve.useEffect(()=>{n&&b([...i])},[n,i]),!n)return null;const T=async q=>{try{const P=await Aj(q);if(_.some(C=>C.ItemId===P.ItemId&&C.selected)){alert("המוצר כבר קיים ברשימה"),p(!1);return}P.quantity>0?(m(P),p(!1)):(alert("המוצר לא זמין במלאי"),p(!1))}catch(P){alert(P.message),p(!1)}},S=q=>{b(P=>P.map(E=>E.id===q?{...E,selected:!E.selected,selectedQty:E.selected?0:1}:E))},D=(q,P)=>{let E=parseInt(P)||0;E>q.quantity&&(E=q.quantity),E<0&&(E=0),b(C=>C.map(M=>M.id===q.id?{...M,selectedQty:E,selected:E>0}:M))},B=()=>{_.forEach(q=>{var P,E;q.selected!==((P=i.find(C=>C.id===q.id))==null?void 0:P.selected)&&a(q.id),q.selectedQty!==((E=i.find(C=>C.id===q.id))==null?void 0:E.selectedQty)&&o(q.id,q.selectedQty)})},V=()=>{B(),e(!1)},Y=()=>{e(!1)};return O.jsxs("div",{className:"modal-overlay",onClick:Y,children:[O.jsxs("div",{className:"modal-box",dir:"rtl",onClick:q=>q.stopPropagation(),children:[O.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[O.jsx("button",{style:{width:"180px"},className:"btn btn-gray",onClick:()=>p(!0),children:"סריקת ברקוד"}),O.jsx("input",{type:"text",placeholder:"חיפוש מוצר...",value:t,onChange:q=>r(q.target.value),style:{padding:"8px",border:"1px solid #ccc",borderRadius:"6px",width:"60%"}})]}),O.jsxs("h3",{style:{textAlign:"center",marginBottom:"1rem"},children:["מוצרים זמינים (",s.pickupDate," → ",s.returnDate,")"]}),u?O.jsx("p",{style:{textAlign:"center"},children:"טוען מוצרים…"}):O.jsx("div",{className:"modal-grid",children:_.filter(q=>q.name.toLowerCase().includes(t.toLowerCase())).map(q=>O.jsxs("div",{className:`item-card ${q.selected?"selected":""}`,children:[O.jsx("img",{src:q.imageUrl||"/no-image-available.png",alt:q.name,className:"item-image"}),O.jsx("h4",{children:q.name}),O.jsxs("p",{children:["זמין: ",q.quantity]}),O.jsxs("p",{children:["מזהה מוצר: ",q.ItemId]}),O.jsxs("div",{style:{margin:"0.5rem 0"},children:[O.jsx("label",{style:{marginBottom:"0.3rem",display:"block"},children:"כמות:"}),O.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"5px"},children:[O.jsx("button",{onClick:()=>D(q,Math.max(0,q.selectedQty-1)),disabled:q.selectedQty<=0,style:{width:"30px",height:"30px",borderRadius:"50%",border:"1px solid #ccc",backgroundColor:q.selectedQty<=0?"#f5f5f5":"#fff",cursor:q.selectedQty<=0?"not-allowed":"pointer",fontSize:"16px",fontWeight:"bold",color:q.selectedQty<=0?"#ccc":"#333"},children:"-"}),O.jsx("input",{type:"number",min:0,max:q.quantity,value:q.selectedQty,onChange:P=>D(q,P.target.value),onBlur:P=>{(parseInt(P.target.value)||0)>q.quantity&&D(q,q.quantity)},style:{width:"50px",height:"30px",padding:"5px",textAlign:"center",borderRadius:"6px",border:q.selectedQty>q.quantity?"2px solid red":"1px solid #ccc",backgroundColor:q.selectedQty>0?"#e3f2fd":"#fff",fontSize:"14px",fontWeight:"bold",appearance:"textfield",MozAppearance:"textfield"}}),O.jsx("button",{onClick:()=>D(q,Math.min(q.quantity,q.selectedQty+1)),disabled:q.selectedQty>=q.quantity,style:{width:"30px",height:"30px",borderRadius:"50%",border:"1px solid #ccc",backgroundColor:q.selectedQty>=q.quantity?"#f5f5f5":"#fff",cursor:q.selectedQty>=q.quantity?"not-allowed":"pointer",fontSize:"16px",fontWeight:"bold",color:q.selectedQty>=q.quantity?"#ccc":"#333"},children:"+"})]}),q.selectedQty>q.quantity&&O.jsxs("div",{style:{color:"red",fontSize:"0.8rem",marginTop:"0.2rem"},children:["מקסימום: ",q.quantity]})]}),O.jsx("button",{onClick:()=>S(q.id),className:`btn ${q.selected?"btn-red":"btn-blue"}`,style:{width:"100%",marginTop:"0.5rem"},children:q.selected?"❌ הסר מוצר":"🛒 בחר מוצר"})]},q.id))}),O.jsxs("div",{className:"modal-actions",children:[O.jsx("button",{className:"btn btn-blue",onClick:V,children:"✔️ אישור"}),O.jsx("button",{className:"btn btn-gray",onClick:Y,children:"❌ ביטול"})]})]}),h&&O.jsx(_j,{onScanSuccess:T,onClose:()=>p(!1)}),g&&O.jsx(Ej,{item:g,onCancel:()=>{m(null),p(!1)},onConfirm:q=>{const P={...g};b(E=>E.map(C=>C.ItemId===P.ItemId?{...C,selected:!0,selectedQty:q}:C)),m(null),p(!1)}})]})},Cj=({onOrderCreated:n})=>{const[e,t]=ve.useState({volunteerName:"",clientName:"",address:"",phone:"",email:"",eventType:"",pickupDate:"",eventDate:"",returnDate:""}),[r,i]=ve.useState({}),[a,o]=ve.useState(!1),[s,u]=ve.useState([]),[f,h]=ve.useState(!1),[p,g]=ve.useState(""),[m,_]=ve.useState(!1),b=Y=>{t({...e,[Y.target.name]:Y.target.value})},T=()=>{const Y={},q=new Date().toISOString().split("T")[0],{pickupDate:P,eventDate:E,returnDate:C}=e;return e.volunteerName.trim()||(Y.volunteerName="שדה חובה"),e.clientName.trim()||(Y.clientName="שדה חובה"),e.address.trim()||(Y.address="שדה חובה"),e.phone.trim()?/^\d{10}$/.test(e.phone)||(Y.phone="מספר טלפון לא תקין"):Y.phone="שדה חובה",e.eventType.trim()||(Y.eventType="שדה חובה"),P||(Y.pickupDate="שדה חובה"),E||(Y.eventDate="שדה חובה"),C||(Y.returnDate="שדה חובה"),P&&P<q&&(Y.pickupDate="תאריך לא יכול להיות בעבר"),E&&P&&E<P&&(Y.eventDate="תאריך האירוע לא יכול להיות לפני לקיחה"),C&&P&&C<=P&&(Y.returnDate="החזרה אחרי לקיחה"),i(Y),Object.keys(Y).length===0},S=()=>{window.confirm("האם אתה בטוח שברצונך לבטל את ההזמנה?")&&(t({volunteerName:"",clientName:"",address:"",phone:"",email:"",eventType:"",pickupDate:"",eventDate:"",returnDate:""}),i({}),u([]),g(""),o(!1))},D=async()=>{if(!T())return;const q=(await bi(Tr(nn,"orders"))).docs.map(C=>C.data().simpleId).filter(C=>typeof C=="number"),P=q.length>0?Math.max(...q)+1:1,E=s.filter(C=>C.selected).map(C=>({id:C.id,ItemId:C.ItemId,name:C.name,quantity:C.selectedQty,imageUrl:C.imageUrl}));_(!0);try{const C=await PE(Tr(nn,"orders"),{...e,items:E,status:"open",simpleId:P,createdAt:Ya()});await cl(C,{orderId:C.id}),t({volunteerName:"",clientName:"",address:"",phone:"",email:"",eventType:"",pickupDate:"",eventDate:"",returnDate:""}),u([]),g(""),o(!1),alert(`ההזמנה נשמרה! מס' הזמנה: ${P}`),n&&await n()}catch(C){console.error("שגיאה בשמירה:",C),alert("שגיאה בשמירת ההזמנה")}_(!1)};ve.useEffect(()=>{if(!a)return;(async()=>{h(!0);const q=P=>P?P.toDate?P.toDate():typeof P=="string"?new Date(P):P:null;try{const E=(await bi(Tr(nn,"items"))).docs.map(U=>({id:U.id,...U.data()})).filter(U=>U.isDeleted!==!0),C=await bi(Tr(nn,"orders")),M=q(e.pickupDate),R=q(e.returnDate),L=C.docs.map(U=>U.data()).filter(U=>{const z=q(U.pickupDate),te=q(U.returnDate);return U.status==="open"&&z&&te&&M&&R&&te>=M&&z<=R}),j={};L.forEach(U=>{var z;(z=U.items)==null||z.forEach(te=>{j[te.id]=(j[te.id]||0)+te.quantity})});const $={};s.forEach(U=>{U.selected&&U.selectedQty>0&&($[U.id]={selected:U.selected,selectedQty:U.selectedQty})});const ne=E.map(U=>{const z=(U.quantity||0)-(j[U.id]||0),te=$[U.id];return{...U,quantity:z,selected:te?te.selected:!1,selectedQty:te?te.selectedQty:0}}).filter(U=>U.quantity>0);u(ne)}catch(P){console.error("שגיאה בחישוב זמינות:",P),u([])}h(!1)})()},[a,e.pickupDate,e.returnDate]);const B=Y=>{u(q=>q.map(P=>P.id===Y?{...P,selected:!P.selected,selectedQty:P.selected?0:1}:P))},V=(Y,q)=>{u(P=>P.map(E=>E.id===Y?{...E,selected:q>0,selectedQty:q}:E))};return O.jsxs("div",{className:"new-loan-container",children:[O.jsx(Lk,{form:e,errors:r,handleChange:b,handleConfirm:D,handleClear:S,setShowCatalogPopup:o,saving:m}),O.jsx(Sj,{showCatalogPopup:a,setShowCatalogPopup:o,searchTerm:p,setSearchTerm:g,setAvailableItems:u,availableItems:s,toggleSelectItem:B,changeQty:V,form:e,loadingItems:f})]})};function AS(n){var e,t,r="";if(typeof n=="string"||typeof n=="number")r+=n;else if(typeof n=="object")if(Array.isArray(n)){var i=n.length;for(e=0;e<i;e++)n[e]&&(t=AS(n[e]))&&(r&&(r+=" "),r+=t)}else for(t in n)n[t]&&(r&&(r+=" "),r+=t);return r}function Zf(){for(var n,e,t=0,r="",i=arguments.length;t<i;t++)(n=arguments[t])&&(e=AS(n))&&(r&&(r+=" "),r+=e);return r}function Tj(n){if(typeof document>"u")return;let e=document.head||document.getElementsByTagName("head")[0],t=document.createElement("style");t.type="text/css",e.firstChild?e.insertBefore(t,e.firstChild):e.appendChild(t),t.styleSheet?t.styleSheet.cssText=n:t.appendChild(document.createTextNode(n))}Tj(`:root{--toastify-color-light: #fff;--toastify-color-dark: #121212;--toastify-color-info: #3498db;--toastify-color-success: #07bc0c;--toastify-color-warning: #f1c40f;--toastify-color-error: hsl(6, 78%, 57%);--toastify-color-transparent: rgba(255, 255, 255, .7);--toastify-icon-color-info: var(--toastify-color-info);--toastify-icon-color-success: var(--toastify-color-success);--toastify-icon-color-warning: var(--toastify-color-warning);--toastify-icon-color-error: var(--toastify-color-error);--toastify-container-width: fit-content;--toastify-toast-width: 320px;--toastify-toast-offset: 16px;--toastify-toast-top: max(var(--toastify-toast-offset), env(safe-area-inset-top));--toastify-toast-right: max(var(--toastify-toast-offset), env(safe-area-inset-right));--toastify-toast-left: max(var(--toastify-toast-offset), env(safe-area-inset-left));--toastify-toast-bottom: max(var(--toastify-toast-offset), env(safe-area-inset-bottom));--toastify-toast-background: #fff;--toastify-toast-padding: 14px;--toastify-toast-min-height: 64px;--toastify-toast-max-height: 800px;--toastify-toast-bd-radius: 6px;--toastify-toast-shadow: 0px 4px 12px rgba(0, 0, 0, .1);--toastify-font-family: sans-serif;--toastify-z-index: 9999;--toastify-text-color-light: #757575;--toastify-text-color-dark: #fff;--toastify-text-color-info: #fff;--toastify-text-color-success: #fff;--toastify-text-color-warning: #fff;--toastify-text-color-error: #fff;--toastify-spinner-color: #616161;--toastify-spinner-color-empty-area: #e0e0e0;--toastify-color-progress-light: linear-gradient(to right, #4cd964, #5ac8fa, #007aff, #34aadc, #5856d6, #ff2d55);--toastify-color-progress-dark: #bb86fc;--toastify-color-progress-info: var(--toastify-color-info);--toastify-color-progress-success: var(--toastify-color-success);--toastify-color-progress-warning: var(--toastify-color-warning);--toastify-color-progress-error: var(--toastify-color-error);--toastify-color-progress-bgo: .2}.Toastify__toast-container{z-index:var(--toastify-z-index);-webkit-transform:translate3d(0,0,var(--toastify-z-index));position:fixed;width:var(--toastify-container-width);box-sizing:border-box;color:#fff;display:flex;flex-direction:column}.Toastify__toast-container--top-left{top:var(--toastify-toast-top);left:var(--toastify-toast-left)}.Toastify__toast-container--top-center{top:var(--toastify-toast-top);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--top-right{top:var(--toastify-toast-top);right:var(--toastify-toast-right);align-items:end}.Toastify__toast-container--bottom-left{bottom:var(--toastify-toast-bottom);left:var(--toastify-toast-left)}.Toastify__toast-container--bottom-center{bottom:var(--toastify-toast-bottom);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--bottom-right{bottom:var(--toastify-toast-bottom);right:var(--toastify-toast-right);align-items:end}.Toastify__toast{--y: 0;position:relative;touch-action:none;width:var(--toastify-toast-width);min-height:var(--toastify-toast-min-height);box-sizing:border-box;margin-bottom:1rem;padding:var(--toastify-toast-padding);border-radius:var(--toastify-toast-bd-radius);box-shadow:var(--toastify-toast-shadow);max-height:var(--toastify-toast-max-height);font-family:var(--toastify-font-family);z-index:0;display:flex;flex:1 auto;align-items:center;word-break:break-word}@media only screen and (max-width: 480px){.Toastify__toast-container{width:100vw;left:env(safe-area-inset-left);margin:0}.Toastify__toast-container--top-left,.Toastify__toast-container--top-center,.Toastify__toast-container--top-right{top:env(safe-area-inset-top);transform:translate(0)}.Toastify__toast-container--bottom-left,.Toastify__toast-container--bottom-center,.Toastify__toast-container--bottom-right{bottom:env(safe-area-inset-bottom);transform:translate(0)}.Toastify__toast-container--rtl{right:env(safe-area-inset-right);left:initial}.Toastify__toast{--toastify-toast-width: 100%;margin-bottom:0;border-radius:0}}.Toastify__toast-container[data-stacked=true]{width:var(--toastify-toast-width)}.Toastify__toast--stacked{position:absolute;width:100%;transform:translate3d(0,var(--y),0) scale(var(--s));transition:transform .3s}.Toastify__toast--stacked[data-collapsed] .Toastify__toast-body,.Toastify__toast--stacked[data-collapsed] .Toastify__close-button{transition:opacity .1s}.Toastify__toast--stacked[data-collapsed=false]{overflow:visible}.Toastify__toast--stacked[data-collapsed=true]:not(:last-child)>*{opacity:0}.Toastify__toast--stacked:after{content:"";position:absolute;left:0;right:0;height:calc(var(--g) * 1px);bottom:100%}.Toastify__toast--stacked[data-pos=top]{top:0}.Toastify__toast--stacked[data-pos=bot]{bottom:0}.Toastify__toast--stacked[data-pos=bot].Toastify__toast--stacked:before{transform-origin:top}.Toastify__toast--stacked[data-pos=top].Toastify__toast--stacked:before{transform-origin:bottom}.Toastify__toast--stacked:before{content:"";position:absolute;left:0;right:0;bottom:0;height:100%;transform:scaleY(3);z-index:-1}.Toastify__toast--rtl{direction:rtl}.Toastify__toast--close-on-click{cursor:pointer}.Toastify__toast-icon{margin-inline-end:10px;width:22px;flex-shrink:0;display:flex}.Toastify--animate{animation-fill-mode:both;animation-duration:.5s}.Toastify--animate-icon{animation-fill-mode:both;animation-duration:.3s}.Toastify__toast-theme--dark{background:var(--toastify-color-dark);color:var(--toastify-text-color-dark)}.Toastify__toast-theme--light,.Toastify__toast-theme--colored.Toastify__toast--default{background:var(--toastify-color-light);color:var(--toastify-text-color-light)}.Toastify__toast-theme--colored.Toastify__toast--info{color:var(--toastify-text-color-info);background:var(--toastify-color-info)}.Toastify__toast-theme--colored.Toastify__toast--success{color:var(--toastify-text-color-success);background:var(--toastify-color-success)}.Toastify__toast-theme--colored.Toastify__toast--warning{color:var(--toastify-text-color-warning);background:var(--toastify-color-warning)}.Toastify__toast-theme--colored.Toastify__toast--error{color:var(--toastify-text-color-error);background:var(--toastify-color-error)}.Toastify__progress-bar-theme--light{background:var(--toastify-color-progress-light)}.Toastify__progress-bar-theme--dark{background:var(--toastify-color-progress-dark)}.Toastify__progress-bar--info{background:var(--toastify-color-progress-info)}.Toastify__progress-bar--success{background:var(--toastify-color-progress-success)}.Toastify__progress-bar--warning{background:var(--toastify-color-progress-warning)}.Toastify__progress-bar--error{background:var(--toastify-color-progress-error)}.Toastify__progress-bar-theme--colored.Toastify__progress-bar--info,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--success,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--warning,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--error{background:var(--toastify-color-transparent)}.Toastify__close-button{color:#fff;position:absolute;top:6px;right:6px;background:transparent;outline:none;border:none;padding:0;cursor:pointer;opacity:.7;transition:.3s ease;z-index:1}.Toastify__toast--rtl .Toastify__close-button{left:6px;right:unset}.Toastify__close-button--light{color:#000;opacity:.3}.Toastify__close-button>svg{fill:currentColor;height:16px;width:14px}.Toastify__close-button:hover,.Toastify__close-button:focus{opacity:1}@keyframes Toastify__trackProgress{0%{transform:scaleX(1)}to{transform:scaleX(0)}}.Toastify__progress-bar{position:absolute;bottom:0;left:0;width:100%;height:100%;z-index:1;opacity:.7;transform-origin:left}.Toastify__progress-bar--animated{animation:Toastify__trackProgress linear 1 forwards}.Toastify__progress-bar--controlled{transition:transform .2s}.Toastify__progress-bar--rtl{right:0;left:initial;transform-origin:right;border-bottom-left-radius:initial}.Toastify__progress-bar--wrp{position:absolute;overflow:hidden;bottom:0;left:0;width:100%;height:5px;border-bottom-left-radius:var(--toastify-toast-bd-radius);border-bottom-right-radius:var(--toastify-toast-bd-radius)}.Toastify__progress-bar--wrp[data-hidden=true]{opacity:0}.Toastify__progress-bar--bg{opacity:var(--toastify-color-progress-bgo);width:100%;height:100%}.Toastify__spinner{width:20px;height:20px;box-sizing:border-box;border:2px solid;border-radius:100%;border-color:var(--toastify-spinner-color-empty-area);border-right-color:var(--toastify-spinner-color);animation:Toastify__spin .65s linear infinite}@keyframes Toastify__bounceInRight{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(3000px,0,0)}60%{opacity:1;transform:translate3d(-25px,0,0)}75%{transform:translate3d(10px,0,0)}90%{transform:translate3d(-5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutRight{20%{opacity:1;transform:translate3d(-20px,var(--y),0)}to{opacity:0;transform:translate3d(2000px,var(--y),0)}}@keyframes Toastify__bounceInLeft{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(-3000px,0,0)}60%{opacity:1;transform:translate3d(25px,0,0)}75%{transform:translate3d(-10px,0,0)}90%{transform:translate3d(5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutLeft{20%{opacity:1;transform:translate3d(20px,var(--y),0)}to{opacity:0;transform:translate3d(-2000px,var(--y),0)}}@keyframes Toastify__bounceInUp{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,3000px,0)}60%{opacity:1;transform:translate3d(0,-20px,0)}75%{transform:translate3d(0,10px,0)}90%{transform:translate3d(0,-5px,0)}to{transform:translateZ(0)}}@keyframes Toastify__bounceOutUp{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,-2000px,0)}}@keyframes Toastify__bounceInDown{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,-3000px,0)}60%{opacity:1;transform:translate3d(0,25px,0)}75%{transform:translate3d(0,-10px,0)}90%{transform:translate3d(0,5px,0)}to{transform:none}}@keyframes Toastify__bounceOutDown{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,2000px,0)}}.Toastify__bounce-enter--top-left,.Toastify__bounce-enter--bottom-left{animation-name:Toastify__bounceInLeft}.Toastify__bounce-enter--top-right,.Toastify__bounce-enter--bottom-right{animation-name:Toastify__bounceInRight}.Toastify__bounce-enter--top-center{animation-name:Toastify__bounceInDown}.Toastify__bounce-enter--bottom-center{animation-name:Toastify__bounceInUp}.Toastify__bounce-exit--top-left,.Toastify__bounce-exit--bottom-left{animation-name:Toastify__bounceOutLeft}.Toastify__bounce-exit--top-right,.Toastify__bounce-exit--bottom-right{animation-name:Toastify__bounceOutRight}.Toastify__bounce-exit--top-center{animation-name:Toastify__bounceOutUp}.Toastify__bounce-exit--bottom-center{animation-name:Toastify__bounceOutDown}@keyframes Toastify__zoomIn{0%{opacity:0;transform:scale3d(.3,.3,.3)}50%{opacity:1}}@keyframes Toastify__zoomOut{0%{opacity:1}50%{opacity:0;transform:translate3d(0,var(--y),0) scale3d(.3,.3,.3)}to{opacity:0}}.Toastify__zoom-enter{animation-name:Toastify__zoomIn}.Toastify__zoom-exit{animation-name:Toastify__zoomOut}@keyframes Toastify__flipIn{0%{transform:perspective(400px) rotateX(90deg);animation-timing-function:ease-in;opacity:0}40%{transform:perspective(400px) rotateX(-20deg);animation-timing-function:ease-in}60%{transform:perspective(400px) rotateX(10deg);opacity:1}80%{transform:perspective(400px) rotateX(-5deg)}to{transform:perspective(400px)}}@keyframes Toastify__flipOut{0%{transform:translate3d(0,var(--y),0) perspective(400px)}30%{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(-20deg);opacity:1}to{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(90deg);opacity:0}}.Toastify__flip-enter{animation-name:Toastify__flipIn}.Toastify__flip-exit{animation-name:Toastify__flipOut}@keyframes Toastify__slideInRight{0%{transform:translate3d(110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInLeft{0%{transform:translate3d(-110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInUp{0%{transform:translate3d(0,110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInDown{0%{transform:translate3d(0,-110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideOutRight{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(110%,var(--y),0)}}@keyframes Toastify__slideOutLeft{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(-110%,var(--y),0)}}@keyframes Toastify__slideOutDown{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,500px,0)}}@keyframes Toastify__slideOutUp{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,-500px,0)}}.Toastify__slide-enter--top-left,.Toastify__slide-enter--bottom-left{animation-name:Toastify__slideInLeft}.Toastify__slide-enter--top-right,.Toastify__slide-enter--bottom-right{animation-name:Toastify__slideInRight}.Toastify__slide-enter--top-center{animation-name:Toastify__slideInDown}.Toastify__slide-enter--bottom-center{animation-name:Toastify__slideInUp}.Toastify__slide-exit--top-left,.Toastify__slide-exit--bottom-left{animation-name:Toastify__slideOutLeft;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-right,.Toastify__slide-exit--bottom-right{animation-name:Toastify__slideOutRight;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-center{animation-name:Toastify__slideOutUp;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--bottom-center{animation-name:Toastify__slideOutDown;animation-timing-function:ease-in;animation-duration:.3s}@keyframes Toastify__spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}
`);var A0=n=>typeof n=="number"&&!isNaN(n),oh=n=>typeof n=="string",ec=n=>typeof n=="function",Ij=n=>oh(n)||A0(n),Cy=n=>oh(n)||ec(n)?n:null,Rj=(n,e)=>n===!1||A0(n)&&n>0?n:e,Ty=n=>ve.isValidElement(n)||oh(n)||ec(n)||A0(n);function Nj(n,e,t=300){let{scrollHeight:r,style:i}=n;requestAnimationFrame(()=>{i.minHeight="initial",i.height=r+"px",i.transition=`all ${t}ms`,requestAnimationFrame(()=>{i.height="0",i.padding="0",i.margin="0",setTimeout(e,t)})})}function Oj({enter:n,exit:e,appendPosition:t=!1,collapse:r=!0,collapseDuration:i=300}){return function({children:a,position:o,preventExitTransition:s,done:u,nodeRef:f,isIn:h,playToast:p}){let g=t?`${n}--${o}`:n,m=t?`${e}--${o}`:e,_=ve.useRef(0);return ve.useLayoutEffect(()=>{let b=f.current,T=g.split(" "),S=D=>{D.target===f.current&&(p(),b.removeEventListener("animationend",S),b.removeEventListener("animationcancel",S),_.current===0&&D.type!=="animationcancel"&&b.classList.remove(...T))};b.classList.add(...T),b.addEventListener("animationend",S),b.addEventListener("animationcancel",S)},[]),ve.useEffect(()=>{let b=f.current,T=()=>{b.removeEventListener("animationend",T),r?Nj(b,u,i):u()};h||(s?T():(_.current=1,b.className+=` ${m}`,b.addEventListener("animationend",T)))},[h]),Ln.createElement(Ln.Fragment,null,a)}}function e4(n,e){return{content:ES(n.content,n.props),containerId:n.props.containerId,id:n.props.toastId,theme:n.props.theme,type:n.props.type,data:n.props.data||{},isLoading:n.props.isLoading,icon:n.props.icon,reason:n.removalReason,status:e}}function ES(n,e,t=!1){return ve.isValidElement(n)&&!oh(n.type)?ve.cloneElement(n,{closeToast:e.closeToast,toastProps:e,data:e.data,isPaused:t}):ec(n)?n({closeToast:e.closeToast,toastProps:e,data:e.data,isPaused:t}):n}function Dj({closeToast:n,theme:e,ariaLabel:t="close"}){return Ln.createElement("button",{className:`Toastify__close-button Toastify__close-button--${e}`,type:"button",onClick:r=>{r.stopPropagation(),n(!0)},"aria-label":t},Ln.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},Ln.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}function Pj({delay:n,isRunning:e,closeToast:t,type:r="default",hide:i,className:a,controlledProgress:o,progress:s,rtl:u,isIn:f,theme:h}){let p=i||o&&s===0,g={animationDuration:`${n}ms`,animationPlayState:e?"running":"paused"};o&&(g.transform=`scaleX(${s})`);let m=Zf("Toastify__progress-bar",o?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated",`Toastify__progress-bar-theme--${h}`,`Toastify__progress-bar--${r}`,{"Toastify__progress-bar--rtl":u}),_=ec(a)?a({rtl:u,type:r,defaultClassName:m}):Zf(m,a),b={[o&&s>=1?"onTransitionEnd":"onAnimationEnd"]:o&&s<1?null:()=>{f&&t()}};return Ln.createElement("div",{className:"Toastify__progress-bar--wrp","data-hidden":p},Ln.createElement("div",{className:`Toastify__progress-bar--bg Toastify__progress-bar-theme--${h} Toastify__progress-bar--${r}`}),Ln.createElement("div",{role:"progressbar","aria-hidden":p?"true":"false","aria-label":"notification timer",className:_,style:g,...b}))}var Lj=1,SS=()=>`${Lj++}`;function kj(n,e,t){let r=1,i=0,a=[],o=[],s=e,u=new Map,f=new Set,h=D=>(f.add(D),()=>f.delete(D)),p=()=>{o=Array.from(u.values()),f.forEach(D=>D())},g=({containerId:D,toastId:B,updateId:V})=>{let Y=D?D!==n:n!==1,q=u.has(B)&&V==null;return Y||q},m=(D,B)=>{u.forEach(V=>{var Y;(B==null||B===V.props.toastId)&&((Y=V.toggle)==null||Y.call(V,D))})},_=D=>{var B,V;(V=(B=D.props)==null?void 0:B.onClose)==null||V.call(B,D.removalReason),D.isActive=!1},b=D=>{if(D==null)u.forEach(_);else{let B=u.get(D);B&&_(B)}p()},T=()=>{i-=a.length,a=[]},S=D=>{var B,V;let{toastId:Y,updateId:q}=D.props,P=q==null;D.staleId&&u.delete(D.staleId),D.isActive=!0,u.set(Y,D),p(),t(e4(D,P?"added":"updated")),P&&((V=(B=D.props).onOpen)==null||V.call(B))};return{id:n,props:s,observe:h,toggle:m,removeToast:b,toasts:u,clearQueue:T,buildToast:(D,B)=>{if(g(B))return;let{toastId:V,updateId:Y,data:q,staleId:P,delay:E}=B,C=Y==null;C&&i++;let M={...s,style:s.toastStyle,key:r++,...Object.fromEntries(Object.entries(B).filter(([L,j])=>j!=null)),toastId:V,updateId:Y,data:q,isIn:!1,className:Cy(B.className||s.toastClassName),progressClassName:Cy(B.progressClassName||s.progressClassName),autoClose:B.isLoading?!1:Rj(B.autoClose,s.autoClose),closeToast(L){u.get(V).removalReason=L,b(V)},deleteToast(){let L=u.get(V);if(L!=null){if(t(e4(L,"removed")),u.delete(V),i--,i<0&&(i=0),a.length>0){S(a.shift());return}p()}}};M.closeButton=s.closeButton,B.closeButton===!1||Ty(B.closeButton)?M.closeButton=B.closeButton:B.closeButton===!0&&(M.closeButton=Ty(s.closeButton)?s.closeButton:!0);let R={content:D,props:M,staleId:P};s.limit&&s.limit>0&&i>s.limit&&C?a.push(R):A0(E)?setTimeout(()=>{S(R)},E):S(R)},setProps(D){s=D},setToggle:(D,B)=>{let V=u.get(D);V&&(V.toggle=B)},isToastActive:D=>{var B;return(B=u.get(D))==null?void 0:B.isActive},getSnapshot:()=>o}}var Ka=new Map,i0=[],Iy=new Set,Mj=n=>Iy.forEach(e=>e(n)),CS=()=>Ka.size>0;function Bj(){i0.forEach(n=>IS(n.content,n.options)),i0=[]}var Fj=(n,{containerId:e})=>{var t;return(t=Ka.get(e||1))==null?void 0:t.toasts.get(n)};function TS(n,e){var t;if(e)return!!((t=Ka.get(e))!=null&&t.isToastActive(n));let r=!1;return Ka.forEach(i=>{i.isToastActive(n)&&(r=!0)}),r}function jj(n){if(!CS()){i0=i0.filter(e=>n!=null&&e.options.toastId!==n);return}if(n==null||Ij(n))Ka.forEach(e=>{e.removeToast(n)});else if(n&&("containerId"in n||"id"in n)){let e=Ka.get(n.containerId);e?e.removeToast(n.id):Ka.forEach(t=>{t.removeToast(n.id)})}}var Uj=(n={})=>{Ka.forEach(e=>{e.props.limit&&(!n.containerId||e.id===n.containerId)&&e.clearQueue()})};function IS(n,e){Ty(n)&&(CS()||i0.push({content:n,options:e}),Ka.forEach(t=>{t.buildToast(n,e)}))}function Vj(n){var e;(e=Ka.get(n.containerId||1))==null||e.setToggle(n.id,n.fn)}function RS(n,e){Ka.forEach(t=>{(e==null||!(e!=null&&e.containerId)||(e==null?void 0:e.containerId)===t.id)&&t.toggle(n,e==null?void 0:e.id)})}function zj(n){let e=n.containerId||1;return{subscribe(t){let r=kj(e,n,Mj);Ka.set(e,r);let i=r.observe(t);return Bj(),()=>{i(),Ka.delete(e)}},setProps(t){var r;(r=Ka.get(e))==null||r.setProps(t)},getSnapshot(){var t;return(t=Ka.get(e))==null?void 0:t.getSnapshot()}}}function qj(n){return Iy.add(n),()=>{Iy.delete(n)}}function Hj(n){return n&&(oh(n.toastId)||A0(n.toastId))?n.toastId:SS()}function E0(n,e){return IS(n,e),e.toastId}function T2(n,e){return{...e,type:e&&e.type||n,toastId:Hj(e)}}function I2(n){return(e,t)=>E0(e,T2(n,t))}function _n(n,e){return E0(n,T2("default",e))}_n.loading=(n,e)=>E0(n,T2("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...e}));function Gj(n,{pending:e,error:t,success:r},i){let a;e&&(a=oh(e)?_n.loading(e,i):_n.loading(e.render,{...i,...e}));let o={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},s=(f,h,p)=>{if(h==null){_n.dismiss(a);return}let g={type:f,...o,...i,data:p},m=oh(h)?{render:h}:h;return a?_n.update(a,{...g,...m}):_n(m.render,{...g,...m}),p},u=ec(n)?n():n;return u.then(f=>s("success",r,f)).catch(f=>s("error",t,f)),u}_n.promise=Gj;_n.success=I2("success");_n.info=I2("info");_n.error=I2("error");_n.warning=I2("warning");_n.warn=_n.warning;_n.dark=(n,e)=>E0(n,T2("default",{theme:"dark",...e}));function Wj(n){jj(n)}_n.dismiss=Wj;_n.clearWaitingQueue=Uj;_n.isActive=TS;_n.update=(n,e={})=>{let t=Fj(n,e);if(t){let{props:r,content:i}=t,a={delay:100,...r,...e,toastId:e.toastId||n,updateId:SS()};a.toastId!==n&&(a.staleId=n);let o=a.render||i;delete a.render,E0(o,a)}};_n.done=n=>{_n.update(n,{progress:1})};_n.onChange=qj;_n.play=n=>RS(!0,n);_n.pause=n=>RS(!1,n);function $j(n){var e;let{subscribe:t,getSnapshot:r,setProps:i}=ve.useRef(zj(n)).current;i(n);let a=(e=ve.useSyncExternalStore(t,r,r))==null?void 0:e.slice();function o(s){if(!a)return[];let u=new Map;return n.newestOnTop&&a.reverse(),a.forEach(f=>{let{position:h}=f.props;u.has(h)||u.set(h,[]),u.get(h).push(f)}),Array.from(u,f=>s(f[0],f[1]))}return{getToastToRender:o,isToastActive:TS,count:a==null?void 0:a.length}}function Xj(n){let[e,t]=ve.useState(!1),[r,i]=ve.useState(!1),a=ve.useRef(null),o=ve.useRef({start:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,didMove:!1}).current,{autoClose:s,pauseOnHover:u,closeToast:f,onClick:h,closeOnClick:p}=n;Vj({id:n.toastId,containerId:n.containerId,fn:t}),ve.useEffect(()=>{if(n.pauseOnFocusLoss)return g(),()=>{m()}},[n.pauseOnFocusLoss]);function g(){document.hasFocus()||S(),window.addEventListener("focus",T),window.addEventListener("blur",S)}function m(){window.removeEventListener("focus",T),window.removeEventListener("blur",S)}function _(P){if(n.draggable===!0||n.draggable===P.pointerType){D();let E=a.current;o.canCloseOnClick=!0,o.canDrag=!0,E.style.transition="none",n.draggableDirection==="x"?(o.start=P.clientX,o.removalDistance=E.offsetWidth*(n.draggablePercent/100)):(o.start=P.clientY,o.removalDistance=E.offsetHeight*(n.draggablePercent===80?n.draggablePercent*1.5:n.draggablePercent)/100)}}function b(P){let{top:E,bottom:C,left:M,right:R}=a.current.getBoundingClientRect();P.nativeEvent.type!=="touchend"&&n.pauseOnHover&&P.clientX>=M&&P.clientX<=R&&P.clientY>=E&&P.clientY<=C?S():T()}function T(){t(!0)}function S(){t(!1)}function D(){o.didMove=!1,document.addEventListener("pointermove",V),document.addEventListener("pointerup",Y)}function B(){document.removeEventListener("pointermove",V),document.removeEventListener("pointerup",Y)}function V(P){let E=a.current;if(o.canDrag&&E){o.didMove=!0,e&&S(),n.draggableDirection==="x"?o.delta=P.clientX-o.start:o.delta=P.clientY-o.start,o.start!==P.clientX&&(o.canCloseOnClick=!1);let C=n.draggableDirection==="x"?`${o.delta}px, var(--y)`:`0, calc(${o.delta}px + var(--y))`;E.style.transform=`translate3d(${C},0)`,E.style.opacity=`${1-Math.abs(o.delta/o.removalDistance)}`}}function Y(){B();let P=a.current;if(o.canDrag&&o.didMove&&P){if(o.canDrag=!1,Math.abs(o.delta)>o.removalDistance){i(!0),n.closeToast(!0),n.collapseAll();return}P.style.transition="transform 0.2s, opacity 0.2s",P.style.removeProperty("transform"),P.style.removeProperty("opacity")}}let q={onPointerDown:_,onPointerUp:b};return s&&u&&(q.onMouseEnter=S,n.stacked||(q.onMouseLeave=T)),p&&(q.onClick=P=>{h&&h(P),o.canCloseOnClick&&f(!0)}),{playToast:T,pauseToast:S,isRunning:e,preventExitTransition:r,toastRef:a,eventHandlers:q}}var Yj=typeof window<"u"?ve.useLayoutEffect:ve.useEffect,R2=({theme:n,type:e,isLoading:t,...r})=>Ln.createElement("svg",{viewBox:"0 0 24 24",width:"100%",height:"100%",fill:n==="colored"?"currentColor":`var(--toastify-icon-color-${e})`,...r});function Kj(n){return Ln.createElement(R2,{...n},Ln.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))}function Qj(n){return Ln.createElement(R2,{...n},Ln.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))}function Zj(n){return Ln.createElement(R2,{...n},Ln.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))}function Jj(n){return Ln.createElement(R2,{...n},Ln.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))}function eU(){return Ln.createElement("div",{className:"Toastify__spinner"})}var Ry={info:Qj,warning:Kj,success:Zj,error:Jj,spinner:eU},tU=n=>n in Ry;function nU({theme:n,type:e,isLoading:t,icon:r}){let i=null,a={theme:n,type:e};return r===!1||(ec(r)?i=r({...a,isLoading:t}):ve.isValidElement(r)?i=ve.cloneElement(r,a):t?i=Ry.spinner():tU(e)&&(i=Ry[e](a))),i}var rU=n=>{let{isRunning:e,preventExitTransition:t,toastRef:r,eventHandlers:i,playToast:a}=Xj(n),{closeButton:o,children:s,autoClose:u,onClick:f,type:h,hideProgressBar:p,closeToast:g,transition:m,position:_,className:b,style:T,progressClassName:S,updateId:D,role:B,progress:V,rtl:Y,toastId:q,deleteToast:P,isIn:E,isLoading:C,closeOnClick:M,theme:R,ariaLabel:L}=n,j=Zf("Toastify__toast",`Toastify__toast-theme--${R}`,`Toastify__toast--${h}`,{"Toastify__toast--rtl":Y},{"Toastify__toast--close-on-click":M}),$=ec(b)?b({rtl:Y,position:_,type:h,defaultClassName:j}):Zf(j,b),ne=nU(n),U=!!V||!u,z={closeToast:g,type:h,theme:R},te=null;return o===!1||(ec(o)?te=o(z):ve.isValidElement(o)?te=ve.cloneElement(o,z):te=Dj(z)),Ln.createElement(m,{isIn:E,done:P,position:_,preventExitTransition:t,nodeRef:r,playToast:a},Ln.createElement("div",{id:q,tabIndex:0,onClick:f,"data-in":E,className:$,...i,style:T,ref:r,...E&&{role:B,"aria-label":L}},ne!=null&&Ln.createElement("div",{className:Zf("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!C})},ne),ES(s,n,!e),te,!n.customProgressBar&&Ln.createElement(Pj,{...D&&!U?{key:`p-${D}`}:{},rtl:Y,theme:R,delay:u,isRunning:e,isIn:E,closeToast:g,hide:p,type:h,className:S,controlledProgress:U,progress:V||0})))},iU=(n,e=!1)=>({enter:`Toastify--animate Toastify__${n}-enter`,exit:`Toastify--animate Toastify__${n}-exit`,appendPosition:e}),aU=Oj(iU("bounce",!0)),oU={position:"top-right",transition:aU,autoClose:5e3,closeButton:!0,pauseOnHover:!0,pauseOnFocusLoss:!0,draggable:"touch",draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light","aria-label":"Notifications Alt+T",hotKeys:n=>n.altKey&&n.code==="KeyT"};function sU(n){let e={...oU,...n},t=n.stacked,[r,i]=ve.useState(!0),a=ve.useRef(null),{getToastToRender:o,isToastActive:s,count:u}=$j(e),{className:f,style:h,rtl:p,containerId:g,hotKeys:m}=e;function _(T){let S=Zf("Toastify__toast-container",`Toastify__toast-container--${T}`,{"Toastify__toast-container--rtl":p});return ec(f)?f({position:T,rtl:p,defaultClassName:S}):Zf(S,Cy(f))}function b(){t&&(i(!0),_n.play())}return Yj(()=>{var T;if(t){let S=a.current.querySelectorAll('[data-in="true"]'),D=12,B=(T=e.position)==null?void 0:T.includes("top"),V=0,Y=0;Array.from(S).reverse().forEach((q,P)=>{let E=q;E.classList.add("Toastify__toast--stacked"),P>0&&(E.dataset.collapsed=`${r}`),E.dataset.pos||(E.dataset.pos=B?"top":"bot");let C=V*(r?.2:1)+(r?0:D*P);E.style.setProperty("--y",`${B?C:C*-1}px`),E.style.setProperty("--g",`${D}`),E.style.setProperty("--s",`${1-(r?Y:0)}`),V+=E.offsetHeight,Y+=.025})}},[r,u,t]),ve.useEffect(()=>{function T(S){var D;let B=a.current;m(S)&&((D=B.querySelector('[tabIndex="0"]'))==null||D.focus(),i(!1),_n.pause()),S.key==="Escape"&&(document.activeElement===B||B!=null&&B.contains(document.activeElement))&&(i(!0),_n.play())}return document.addEventListener("keydown",T),()=>{document.removeEventListener("keydown",T)}},[m]),Ln.createElement("section",{ref:a,className:"Toastify",id:g,onMouseEnter:()=>{t&&(i(!1),_n.pause())},onMouseLeave:b,"aria-live":"polite","aria-atomic":"false","aria-relevant":"additions text","aria-label":e["aria-label"]},o((T,S)=>{let D=S.length?{...h}:{...h,pointerEvents:"none"};return Ln.createElement("div",{tabIndex:-1,className:_(T),"data-stacked":t,style:D,key:`c-${T}`},S.map(({content:B,props:V})=>Ln.createElement(rU,{...V,stacked:t,collapseAll:b,isIn:s(V.toastId,V.containerId),key:`t-${V.key}`},B)))}))}var Hh={},xv={exports:{}},_v,t4;function lU(){if(t4)return _v;t4=1;var n="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return _v=n,_v}var wv,n4;function uU(){if(n4)return wv;n4=1;var n=lU();function e(){}function t(){}return t.resetWarningCache=e,wv=function(){function r(o,s,u,f,h,p){if(p!==n){var g=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw g.name="Invariant Violation",g}}r.isRequired=r;function i(){return r}var a={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:i,element:r,elementType:r,instanceOf:i,node:r,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:t,resetWarningCache:e};return a.PropTypes=a,a},wv}var r4;function cU(){return r4||(r4=1,xv.exports=uU()()),xv.exports}var i4;function fU(){if(i4)return Hh;i4=1,Object.defineProperty(Hh,"__esModule",{value:!0}),Hh.default=void 0;var n=Object.assign||function(P){for(var E=1;E<arguments.length;E++){var C=arguments[E];for(var M in C)Object.prototype.hasOwnProperty.call(C,M)&&(P[M]=C[M])}return P},e=function(){function P(E,C){for(var M=0;M<C.length;M++){var R=C[M];R.enumerable=R.enumerable||!1,R.configurable=!0,"value"in R&&(R.writable=!0),Object.defineProperty(E,R.key,R)}}return function(E,C,M){return C&&P(E.prototype,C),M&&P(E,M),E}}(),t,r;Hh.confirmAlert=q;var i=Gg(),a=f(i),o=cU(),s=f(o),u=V4();function f(P){return P&&P.__esModule?P:{default:P}}function h(P,E){if(!(P instanceof E))throw new TypeError("Cannot call a class as a function")}function p(P,E){if(!P)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return E&&(typeof E=="object"||typeof E=="function")?E:P}function g(P,E){if(typeof E!="function"&&E!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof E);P.prototype=Object.create(E&&E.prototype,{constructor:{value:P,enumerable:!1,writable:!0,configurable:!0}}),E&&(Object.setPrototypeOf?Object.setPrototypeOf(P,E):P.__proto__=E)}var m=(r=t=function(P){g(E,P);function E(){var C,M,R,L;h(this,E);for(var j=arguments.length,$=Array(j),ne=0;ne<j;ne++)$[ne]=arguments[ne];return L=(M=(R=p(this,(C=E.__proto__||Object.getPrototypeOf(E)).call.apply(C,[this].concat($))),R),R.handleClickButton=function(U){U.onClick&&U.onClick(),R.close()},R.handleClickOverlay=function(U){var z=R.props,te=z.closeOnClickOutside,ue=z.onClickOutside,X=U.target===R.overlay;te&&X&&(ue(),R.close()),U.stopPropagation()},R.close=function(){var U=R.props.afterClose;Y(),B(R.props),S(U)},R.keyboard=function(U){var z=R.props,te=z.closeOnEscape,ue=z.onKeypressEscape,X=z.onkeyPress,me=z.keyCodeForClose,G=U.keyCode,Q=G===27;me.includes(G)&&R.close(),te&&Q&&(ue(U),R.close()),X&&X()},R.componentDidMount=function(){document.addEventListener("keydown",R.keyboard,!1)},R.componentWillUnmount=function(){document.removeEventListener("keydown",R.keyboard,!1),R.props.willUnmount()},R.renderCustomUI=function(){var U=R.props,z=U.title,te=U.message,ue=U.buttons,X=U.customUI,me={title:z,message:te,buttons:ue,onClose:R.close};return X(me)},M),p(R,L)}return e(E,[{key:"render",value:function(){var M=this,R=this.props,L=R.title,j=R.message,$=R.buttons,ne=R.childrenElement,U=R.customUI,z=R.overlayClassName;return a.default.createElement("div",{className:"react-confirm-alert-overlay "+z,ref:function(ue){return M.overlay=ue},onClick:this.handleClickOverlay},a.default.createElement("div",{className:"react-confirm-alert"},U?this.renderCustomUI():a.default.createElement("div",{className:"react-confirm-alert-body"},L&&a.default.createElement("h1",null,L),j,ne(),a.default.createElement("div",{className:"react-confirm-alert-button-group"},$.map(function(te,ue){return a.default.createElement("button",n({key:ue,className:te.className},te,{onClick:function(me){return M.handleClickButton(te)}}),te.label)})))))}}]),E}(i.Component),t.propTypes={title:s.default.string,message:s.default.string,buttons:s.default.array.isRequired,childrenElement:s.default.func,customUI:s.default.func,closeOnClickOutside:s.default.bool,closeOnEscape:s.default.bool,keyCodeForClose:s.default.arrayOf(s.default.number),willUnmount:s.default.func,afterClose:s.default.func,onClickOutside:s.default.func,onKeypressEscape:s.default.func,onkeyPress:s.default.func,overlayClassName:s.default.string},t.defaultProps={buttons:[{label:"Cancel",onClick:function(){return null},className:null},{label:"Confirm",onClick:function(){return null},className:null}],childrenElement:function(){return null},closeOnClickOutside:!0,closeOnEscape:!0,keyCodeForClose:[],willUnmount:function(){return null},afterClose:function(){return null},onClickOutside:function(){return null},onKeypressEscape:function(){return null}},r);Hh.default=m;var _=null,b="react-confirm-alert";function T(){var P=document.getElementById("react-confirm-alert-firm-svg");if(!P){var E="http://www.w3.org/2000/svg",C=document.createElementNS(E,"feGaussianBlur");C.setAttribute("stdDeviation","0.3");var M=document.createElementNS(E,"filter");M.setAttribute("id","gaussian-blur"),M.appendChild(C);var R=document.createElementNS(E,"svg");R.setAttribute("id","react-confirm-alert-firm-svg"),R.setAttribute("class","react-confirm-alert-svg"),R.appendChild(M),document.body.appendChild(R)}}function S(P){var E=document.getElementById("react-confirm-alert-firm-svg");E&&E.parentNode.removeChild(E),document.body.children[0].classList.remove("react-confirm-alert-blur"),P()}function D(P){var E=document.getElementById(P.targetId||b);P.targetId&&!E&&console.error("React Confirm Alert:","Can not get element id (#"+P.targetId+")"),E?(_=(0,u.createRoot)(E),_.render(a.default.createElement(m,P))):(document.body.children[0].classList.add("react-confirm-alert-blur"),E=document.createElement("div"),E.id=b,document.body.appendChild(E),_=(0,u.createRoot)(E),_.render(a.default.createElement(m,P)))}function B(P){var E=document.getElementById(P.targetId||b);E&&_.unmount(E)}function V(){document.body.classList.add("react-confirm-alert-body-element")}function Y(){document.body.classList.remove("react-confirm-alert-body-element")}function q(P){V(),T(),D(P)}return Hh}var hU=fU();function dU(n,e){return e.forEach(function(t){t&&typeof t!="string"&&!Array.isArray(t)&&Object.keys(t).forEach(function(r){if(r!=="default"&&!(r in n)){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}})}),Object.freeze(n)}function NS(n,e){return new Promise(function(t,r){let i;return pU(n).then(function(a){try{return i=a,t(new Blob([e.slice(0,2),i,e.slice(2)],{type:"image/jpeg"}))}catch(o){return r(o)}},r)})}const pU=n=>new Promise((e,t)=>{const r=new FileReader;r.addEventListener("load",({target:{result:i}})=>{const a=new DataView(i);let o=0;if(a.getUint16(o)!==65496)return t("not a valid JPEG");for(o+=2;;){const s=a.getUint16(o);if(s===65498)break;const u=a.getUint16(o+2);if(s===65505&&a.getUint32(o+4)===1165519206){const f=o+10;let h;switch(a.getUint16(f)){case 18761:h=!0;break;case 19789:h=!1;break;default:return t("TIFF header contains invalid endian")}if(a.getUint16(f+2,h)!==42)return t("TIFF header contains invalid version");const p=a.getUint32(f+4,h),g=f+p+2+12*a.getUint16(f+p,h);for(let m=f+p+2;m<g;m+=12)if(a.getUint16(m,h)==274){if(a.getUint16(m+2,h)!==3)return t("Orientation data type is invalid");if(a.getUint32(m+4,h)!==1)return t("Orientation data count is invalid");a.setUint16(m+8,1,h);break}return e(i.slice(o,o+2+u))}o+=2+u}return e(new Blob)}),r.readAsArrayBuffer(n)});var Lg={},gU={get exports(){return Lg},set exports(n){Lg=n}};(function(n){var e,t,r={};gU.exports=r,r.parse=function(i,a){for(var o=r.bin.readUshort,s=r.bin.readUint,u=0,f={},h=new Uint8Array(i),p=h.length-4;s(h,p)!=101010256;)p--;u=p,u+=4;var g=o(h,u+=4);o(h,u+=2);var m=s(h,u+=2),_=s(h,u+=4);u+=4,u=_;for(var b=0;b<g;b++){s(h,u),u+=4,u+=4,u+=4,s(h,u+=4),m=s(h,u+=4);var T=s(h,u+=4),S=o(h,u+=4),D=o(h,u+2),B=o(h,u+4);u+=6;var V=s(h,u+=8);u+=4,u+=S+D+B,r._readLocal(h,V,f,m,T,a)}return f},r._readLocal=function(i,a,o,s,u,f){var h=r.bin.readUshort,p=r.bin.readUint;p(i,a),h(i,a+=4),h(i,a+=2);var g=h(i,a+=2);p(i,a+=2),p(i,a+=4),a+=4;var m=h(i,a+=8),_=h(i,a+=2);a+=2;var b=r.bin.readUTF8(i,a,m);if(a+=m,a+=_,f)o[b]={size:u,csize:s};else{var T=new Uint8Array(i.buffer,a);if(g==0)o[b]=new Uint8Array(T.buffer.slice(a,a+s));else{if(g!=8)throw"unknown compression method: "+g;var S=new Uint8Array(u);r.inflateRaw(T,S),o[b]=S}}},r.inflateRaw=function(i,a){return r.F.inflate(i,a)},r.inflate=function(i,a){return i[0],i[1],r.inflateRaw(new Uint8Array(i.buffer,i.byteOffset+2,i.length-6),a)},r.deflate=function(i,a){a==null&&(a={level:6});var o=0,s=new Uint8Array(50+Math.floor(1.1*i.length));s[o]=120,s[o+1]=156,o+=2,o=r.F.deflateRaw(i,s,o,a.level);var u=r.adler(i,0,i.length);return s[o+0]=u>>>24&255,s[o+1]=u>>>16&255,s[o+2]=u>>>8&255,s[o+3]=u>>>0&255,new Uint8Array(s.buffer,0,o+4)},r.deflateRaw=function(i,a){a==null&&(a={level:6});var o=new Uint8Array(50+Math.floor(1.1*i.length)),s=r.F.deflateRaw(i,o,s,a.level);return new Uint8Array(o.buffer,0,s)},r.encode=function(i,a){a==null&&(a=!1);var o=0,s=r.bin.writeUint,u=r.bin.writeUshort,f={};for(var h in i){var p=!r._noNeed(h)&&!a,g=i[h],m=r.crc.crc(g,0,g.length);f[h]={cpr:p,usize:g.length,crc:m,file:p?r.deflateRaw(g):g}}for(var h in f)o+=f[h].file.length+30+46+2*r.bin.sizeUTF8(h);o+=22;var _=new Uint8Array(o),b=0,T=[];for(var h in f){var S=f[h];T.push(b),b=r._writeHeader(_,b,h,S,0)}var D=0,B=b;for(var h in f)S=f[h],T.push(b),b=r._writeHeader(_,b,h,S,1,T[D++]);var V=b-B;return s(_,b,101010256),b+=4,u(_,b+=4,D),u(_,b+=2,D),s(_,b+=2,V),s(_,b+=4,B),b+=4,b+=2,_.buffer},r._noNeed=function(i){var a=i.split(".").pop().toLowerCase();return"png,jpg,jpeg,zip".indexOf(a)!=-1},r._writeHeader=function(i,a,o,s,u,f){var h=r.bin.writeUint,p=r.bin.writeUshort,g=s.file;return h(i,a,u==0?67324752:33639248),a+=4,u==1&&(a+=2),p(i,a,20),p(i,a+=2,0),p(i,a+=2,s.cpr?8:0),h(i,a+=2,0),h(i,a+=4,s.crc),h(i,a+=4,g.length),h(i,a+=4,s.usize),p(i,a+=4,r.bin.sizeUTF8(o)),p(i,a+=2,0),a+=2,u==1&&(a+=2,a+=2,h(i,a+=6,f),a+=4),a+=r.bin.writeUTF8(i,a,o),u==0&&(i.set(g,a),a+=g.length),a},r.crc={table:function(){for(var i=new Uint32Array(256),a=0;a<256;a++){for(var o=a,s=0;s<8;s++)1&o?o=3988292384^o>>>1:o>>>=1;i[a]=o}return i}(),update:function(i,a,o,s){for(var u=0;u<s;u++)i=r.crc.table[255&(i^a[o+u])]^i>>>8;return i},crc:function(i,a,o){return 4294967295^r.crc.update(4294967295,i,a,o)}},r.adler=function(i,a,o){for(var s=1,u=0,f=a,h=a+o;f<h;){for(var p=Math.min(f+5552,h);f<p;)u+=s+=i[f++];s%=65521,u%=65521}return u<<16|s},r.bin={readUshort:function(i,a){return i[a]|i[a+1]<<8},writeUshort:function(i,a,o){i[a]=255&o,i[a+1]=o>>8&255},readUint:function(i,a){return 16777216*i[a+3]+(i[a+2]<<16|i[a+1]<<8|i[a])},writeUint:function(i,a,o){i[a]=255&o,i[a+1]=o>>8&255,i[a+2]=o>>16&255,i[a+3]=o>>24&255},readASCII:function(i,a,o){for(var s="",u=0;u<o;u++)s+=String.fromCharCode(i[a+u]);return s},writeASCII:function(i,a,o){for(var s=0;s<o.length;s++)i[a+s]=o.charCodeAt(s)},pad:function(i){return i.length<2?"0"+i:i},readUTF8:function(i,a,o){for(var s,u="",f=0;f<o;f++)u+="%"+r.bin.pad(i[a+f].toString(16));try{s=decodeURIComponent(u)}catch{return r.bin.readASCII(i,a,o)}return s},writeUTF8:function(i,a,o){for(var s=o.length,u=0,f=0;f<s;f++){var h=o.charCodeAt(f);if((4294967168&h)==0)i[a+u]=h,u++;else if((4294965248&h)==0)i[a+u]=192|h>>6,i[a+u+1]=128|h>>0&63,u+=2;else if((4294901760&h)==0)i[a+u]=224|h>>12,i[a+u+1]=128|h>>6&63,i[a+u+2]=128|h>>0&63,u+=3;else{if((4292870144&h)!=0)throw"e";i[a+u]=240|h>>18,i[a+u+1]=128|h>>12&63,i[a+u+2]=128|h>>6&63,i[a+u+3]=128|h>>0&63,u+=4}}return u},sizeUTF8:function(i){for(var a=i.length,o=0,s=0;s<a;s++){var u=i.charCodeAt(s);if((4294967168&u)==0)o++;else if((4294965248&u)==0)o+=2;else if((4294901760&u)==0)o+=3;else{if((4292870144&u)!=0)throw"e";o+=4}}return o}},r.F={},r.F.deflateRaw=function(i,a,o,s){var u=[[0,0,0,0,0],[4,4,8,4,0],[4,5,16,8,0],[4,6,16,16,0],[4,10,16,32,0],[8,16,32,32,0],[8,16,128,128,0],[8,32,128,256,0],[32,128,258,1024,1],[32,258,258,4096,1]][s],f=r.F.U,h=r.F._goodIndex;r.F._hash;var p=r.F._putsE,g=0,m=o<<3,_=0,b=i.length;if(s==0){for(;g<b;)p(a,m,g+(R=Math.min(65535,b-g))==b?1:0),m=r.F._copyExact(i,g,R,a,m+8),g+=R;return m>>>3}var T=f.lits,S=f.strt,D=f.prev,B=0,V=0,Y=0,q=0,P=0,E=0;for(b>2&&(S[E=r.F._hash(i,0)]=0),g=0;g<b;g++){if(P=E,g+1<b-2){E=r.F._hash(i,g+1);var C=g+1&32767;D[C]=S[E],S[E]=C}if(_<=g){(B>14e3||V>26697)&&b-g>100&&(_<g&&(T[B]=g-_,B+=2,_=g),m=r.F._writeBlock(g==b-1||_==b?1:0,T,B,q,i,Y,g-Y,a,m),B=V=q=0,Y=g);var M=0;g<b-2&&(M=r.F._bestMatch(i,g,D,P,Math.min(u[2],b-g),u[3]));var R=M>>>16,L=65535&M;if(M!=0){L=65535&M;var j=h(R=M>>>16,f.of0);f.lhst[257+j]++;var $=h(L,f.df0);f.dhst[$]++,q+=f.exb[j]+f.dxb[$],T[B]=R<<23|g-_,T[B+1]=L<<16|j<<8|$,B+=2,_=g+R}else f.lhst[i[g]]++;V++}}for(Y==g&&i.length!=0||(_<g&&(T[B]=g-_,B+=2,_=g),m=r.F._writeBlock(1,T,B,q,i,Y,g-Y,a,m),B=0,V=0,B=V=q=0,Y=g);(7&m)!=0;)m++;return m>>>3},r.F._bestMatch=function(i,a,o,s,u,f){var h=32767&a,p=o[h],g=h-p+32768&32767;if(p==h||s!=r.F._hash(i,a-g))return 0;for(var m=0,_=0,b=Math.min(32767,a);g<=b&&--f!=0&&p!=h;){if(m==0||i[a+m]==i[a+m-g]){var T=r.F._howLong(i,a,g);if(T>m){if(_=g,(m=T)>=u)break;g+2<T&&(T=g+2);for(var S=0,D=0;D<T-2;D++){var B=a-g+D+32768&32767,V=B-o[B]+32768&32767;V>S&&(S=V,p=B)}}}g+=(h=p)-(p=o[h])+32768&32767}return m<<16|_},r.F._howLong=function(i,a,o){if(i[a]!=i[a-o]||i[a+1]!=i[a+1-o]||i[a+2]!=i[a+2-o])return 0;var s=a,u=Math.min(i.length,a+258);for(a+=3;a<u&&i[a]==i[a-o];)a++;return a-s},r.F._hash=function(i,a){return(i[a]<<8|i[a+1])+(i[a+2]<<4)&65535},r.saved=0,r.F._writeBlock=function(i,a,o,s,u,f,h,p,g){var m,_,b,T,S,D,B,V,Y,q=r.F.U,P=r.F._putsF,E=r.F._putsE;q.lhst[256]++,_=(m=r.F.getTrees())[0],b=m[1],T=m[2],S=m[3],D=m[4],B=m[5],V=m[6],Y=m[7];var C=32+((g+3&7)==0?0:8-(g+3&7))+(h<<3),M=s+r.F.contSize(q.fltree,q.lhst)+r.F.contSize(q.fdtree,q.dhst),R=s+r.F.contSize(q.ltree,q.lhst)+r.F.contSize(q.dtree,q.dhst);R+=14+3*B+r.F.contSize(q.itree,q.ihst)+(2*q.ihst[16]+3*q.ihst[17]+7*q.ihst[18]);for(var L=0;L<286;L++)q.lhst[L]=0;for(L=0;L<30;L++)q.dhst[L]=0;for(L=0;L<19;L++)q.ihst[L]=0;var j=C<M&&C<R?0:M<R?1:2;if(P(p,g,i),P(p,g+1,j),g+=3,j==0){for(;(7&g)!=0;)g++;g=r.F._copyExact(u,f,h,p,g)}else{var $,ne;if(j==1&&($=q.fltree,ne=q.fdtree),j==2){r.F.makeCodes(q.ltree,_),r.F.revCodes(q.ltree,_),r.F.makeCodes(q.dtree,b),r.F.revCodes(q.dtree,b),r.F.makeCodes(q.itree,T),r.F.revCodes(q.itree,T),$=q.ltree,ne=q.dtree,E(p,g,S-257),E(p,g+=5,D-1),E(p,g+=5,B-4),g+=4;for(var U=0;U<B;U++)E(p,g+3*U,q.itree[1+(q.ordr[U]<<1)]);g+=3*B,g=r.F._codeTiny(V,q.itree,p,g),g=r.F._codeTiny(Y,q.itree,p,g)}for(var z=f,te=0;te<o;te+=2){for(var ue=a[te],X=ue>>>23,me=z+(8388607&ue);z<me;)g=r.F._writeLit(u[z++],$,p,g);if(X!=0){var G=a[te+1],Q=G>>16,ee=G>>8&255,ie=255&G;E(p,g=r.F._writeLit(257+ee,$,p,g),X-q.of0[ee]),g+=q.exb[ee],P(p,g=r.F._writeLit(ie,ne,p,g),Q-q.df0[ie]),g+=q.dxb[ie],z+=X}}g=r.F._writeLit(256,$,p,g)}return g},r.F._copyExact=function(i,a,o,s,u){var f=u>>>3;return s[f]=o,s[f+1]=o>>>8,s[f+2]=255-s[f],s[f+3]=255-s[f+1],f+=4,s.set(new Uint8Array(i.buffer,a,o),f),u+(o+4<<3)},r.F.getTrees=function(){for(var i=r.F.U,a=r.F._hufTree(i.lhst,i.ltree,15),o=r.F._hufTree(i.dhst,i.dtree,15),s=[],u=r.F._lenCodes(i.ltree,s),f=[],h=r.F._lenCodes(i.dtree,f),p=0;p<s.length;p+=2)i.ihst[s[p]]++;for(p=0;p<f.length;p+=2)i.ihst[f[p]]++;for(var g=r.F._hufTree(i.ihst,i.itree,7),m=19;m>4&&i.itree[1+(i.ordr[m-1]<<1)]==0;)m--;return[a,o,g,u,h,m,s,f]},r.F.getSecond=function(i){for(var a=[],o=0;o<i.length;o+=2)a.push(i[o+1]);return a},r.F.nonZero=function(i){for(var a="",o=0;o<i.length;o+=2)i[o+1]!=0&&(a+=(o>>1)+",");return a},r.F.contSize=function(i,a){for(var o=0,s=0;s<a.length;s++)o+=a[s]*i[1+(s<<1)];return o},r.F._codeTiny=function(i,a,o,s){for(var u=0;u<i.length;u+=2){var f=i[u],h=i[u+1];s=r.F._writeLit(f,a,o,s);var p=f==16?2:f==17?3:7;f>15&&(r.F._putsE(o,s,h,p),s+=p)}return s},r.F._lenCodes=function(i,a){for(var o=i.length;o!=2&&i[o-1]==0;)o-=2;for(var s=0;s<o;s+=2){var u=i[s+1],f=s+3<o?i[s+3]:-1,h=s+5<o?i[s+5]:-1,p=s==0?-1:i[s-1];if(u==0&&f==u&&h==u){for(var g=s+5;g+2<o&&i[g+2]==u;)g+=2;(m=Math.min(g+1-s>>>1,138))<11?a.push(17,m-3):a.push(18,m-11),s+=2*m-2}else if(u==p&&f==u&&h==u){for(g=s+5;g+2<o&&i[g+2]==u;)g+=2;var m=Math.min(g+1-s>>>1,6);a.push(16,m-3),s+=2*m-2}else a.push(u,0)}return o>>>1},r.F._hufTree=function(i,a,o){var s=[],u=i.length,f=a.length,h=0;for(h=0;h<f;h+=2)a[h]=0,a[h+1]=0;for(h=0;h<u;h++)i[h]!=0&&s.push({lit:h,f:i[h]});var p=s.length,g=s.slice(0);if(p==0)return 0;if(p==1){var m=s[0].lit;return g=m==0?1:0,a[1+(m<<1)]=1,a[1+(g<<1)]=1,1}s.sort(function(V,Y){return V.f-Y.f});var _=s[0],b=s[1],T=0,S=1,D=2;for(s[0]={lit:-1,f:_.f+b.f,l:_,r:b,d:0};S!=p-1;)_=T!=S&&(D==p||s[T].f<s[D].f)?s[T++]:s[D++],b=T!=S&&(D==p||s[T].f<s[D].f)?s[T++]:s[D++],s[S++]={lit:-1,f:_.f+b.f,l:_,r:b};var B=r.F.setDepth(s[S-1],0);for(B>o&&(r.F.restrictDepth(g,o,B),B=o),h=0;h<p;h++)a[1+(g[h].lit<<1)]=g[h].d;return B},r.F.setDepth=function(i,a){return i.lit!=-1?(i.d=a,a):Math.max(r.F.setDepth(i.l,a+1),r.F.setDepth(i.r,a+1))},r.F.restrictDepth=function(i,a,o){var s=0,u=1<<o-a,f=0;for(i.sort(function(p,g){return g.d==p.d?p.f-g.f:g.d-p.d}),s=0;s<i.length&&i[s].d>a;s++){var h=i[s].d;i[s].d=a,f+=u-(1<<o-h)}for(f>>>=o-a;f>0;)(h=i[s].d)<a?(i[s].d++,f-=1<<a-h-1):s++;for(;s>=0;s--)i[s].d==a&&f<0&&(i[s].d--,f++);f!=0&&console.log("debt left")},r.F._goodIndex=function(i,a){var o=0;return a[16|o]<=i&&(o|=16),a[8|o]<=i&&(o|=8),a[4|o]<=i&&(o|=4),a[2|o]<=i&&(o|=2),a[1|o]<=i&&(o|=1),o},r.F._writeLit=function(i,a,o,s){return r.F._putsF(o,s,a[i<<1]),s+a[1+(i<<1)]},r.F.inflate=function(i,a){var o=Uint8Array;if(i[0]==3&&i[1]==0)return a||new o(0);var s=r.F,u=s._bitsF,f=s._bitsE,h=s._decodeTiny,p=s.makeCodes,g=s.codes2map,m=s._get17,_=s.U,b=a==null;b&&(a=new o(i.length>>>2<<3));for(var T,S,D=0,B=0,V=0,Y=0,q=0,P=0,E=0,C=0,M=0;D==0;)if(D=u(i,M,1),B=u(i,M+1,2),M+=3,B!=0){if(b&&(a=r.F._check(a,C+(1<<17))),B==1&&(T=_.flmap,S=_.fdmap,P=511,E=31),B==2){V=f(i,M,5)+257,Y=f(i,M+5,5)+1,q=f(i,M+10,4)+4,M+=14;for(var R=0;R<38;R+=2)_.itree[R]=0,_.itree[R+1]=0;var L=1;for(R=0;R<q;R++){var j=f(i,M+3*R,3);_.itree[1+(_.ordr[R]<<1)]=j,j>L&&(L=j)}M+=3*q,p(_.itree,L),g(_.itree,L,_.imap),T=_.lmap,S=_.dmap,M=h(_.imap,(1<<L)-1,V+Y,i,M,_.ttree);var $=s._copyOut(_.ttree,0,V,_.ltree);P=(1<<$)-1;var ne=s._copyOut(_.ttree,V,Y,_.dtree);E=(1<<ne)-1,p(_.ltree,$),g(_.ltree,$,T),p(_.dtree,ne),g(_.dtree,ne,S)}for(;;){var U=T[m(i,M)&P];M+=15&U;var z=U>>>4;if(!(z>>>8))a[C++]=z;else{if(z==256)break;var te=C+z-254;if(z>264){var ue=_.ldef[z-257];te=C+(ue>>>3)+f(i,M,7&ue),M+=7&ue}var X=S[m(i,M)&E];M+=15&X;var me=X>>>4,G=_.ddef[me],Q=(G>>>4)+u(i,M,15&G);for(M+=15&G,b&&(a=r.F._check(a,C+(1<<17)));C<te;)a[C]=a[C++-Q],a[C]=a[C++-Q],a[C]=a[C++-Q],a[C]=a[C++-Q];C=te}}}else{(7&M)!=0&&(M+=8-(7&M));var ee=4+(M>>>3),ie=i[ee-4]|i[ee-3]<<8;b&&(a=r.F._check(a,C+ie)),a.set(new o(i.buffer,i.byteOffset+ee,ie),C),M=ee+ie<<3,C+=ie}return a.length==C?a:a.slice(0,C)},r.F._check=function(i,a){var o=i.length;if(a<=o)return i;var s=new Uint8Array(Math.max(o<<1,a));return s.set(i,0),s},r.F._decodeTiny=function(i,a,o,s,u,f){for(var h=r.F._bitsE,p=r.F._get17,g=0;g<o;){var m=i[p(s,u)&a];u+=15&m;var _=m>>>4;if(_<=15)f[g]=_,g++;else{var b=0,T=0;_==16?(T=3+h(s,u,2),u+=2,b=f[g-1]):_==17?(T=3+h(s,u,3),u+=3):_==18&&(T=11+h(s,u,7),u+=7);for(var S=g+T;g<S;)f[g]=b,g++}}return u},r.F._copyOut=function(i,a,o,s){for(var u=0,f=0,h=s.length>>>1;f<o;){var p=i[f+a];s[f<<1]=0,s[1+(f<<1)]=p,p>u&&(u=p),f++}for(;f<h;)s[f<<1]=0,s[1+(f<<1)]=0,f++;return u},r.F.makeCodes=function(i,a){for(var o,s,u,f,h=r.F.U,p=i.length,g=h.bl_count,m=0;m<=a;m++)g[m]=0;for(m=1;m<p;m+=2)g[i[m]]++;var _=h.next_code;for(o=0,g[0]=0,s=1;s<=a;s++)o=o+g[s-1]<<1,_[s]=o;for(u=0;u<p;u+=2)(f=i[u+1])!=0&&(i[u]=_[f],_[f]++)},r.F.codes2map=function(i,a,o){for(var s=i.length,u=r.F.U.rev15,f=0;f<s;f+=2)if(i[f+1]!=0)for(var h=f>>1,p=i[f+1],g=h<<4|p,m=a-p,_=i[f]<<m,b=_+(1<<m);_!=b;)o[u[_]>>>15-a]=g,_++},r.F.revCodes=function(i,a){for(var o=r.F.U.rev15,s=15-a,u=0;u<i.length;u+=2){var f=i[u]<<a-i[u+1];i[u]=o[f]>>>s}},r.F._putsE=function(i,a,o){o<<=7&a;var s=a>>>3;i[s]|=o,i[s+1]|=o>>>8},r.F._putsF=function(i,a,o){o<<=7&a;var s=a>>>3;i[s]|=o,i[s+1]|=o>>>8,i[s+2]|=o>>>16},r.F._bitsE=function(i,a,o){return(i[a>>>3]|i[1+(a>>>3)]<<8)>>>(7&a)&(1<<o)-1},r.F._bitsF=function(i,a,o){return(i[a>>>3]|i[1+(a>>>3)]<<8|i[2+(a>>>3)]<<16)>>>(7&a)&(1<<o)-1},r.F._get17=function(i,a){return(i[a>>>3]|i[1+(a>>>3)]<<8|i[2+(a>>>3)]<<16)>>>(7&a)},r.F._get25=function(i,a){return(i[a>>>3]|i[1+(a>>>3)]<<8|i[2+(a>>>3)]<<16|i[3+(a>>>3)]<<24)>>>(7&a)},r.F.U=(e=Uint16Array,t=Uint32Array,{next_code:new e(16),bl_count:new e(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new e(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new t(32),flmap:new e(512),fltree:[],fdmap:new e(32),fdtree:[],lmap:new e(32768),ltree:[],ttree:[],dmap:new e(32768),dtree:[],imap:new e(512),itree:[],rev15:new e(32768),lhst:new t(286),dhst:new t(30),ihst:new t(19),lits:new t(15e3),strt:new e(65536),prev:new e(32768)}),function(){for(var i=r.F.U,a=0;a<32768;a++){var o=a;o=(4278255360&(o=(4042322160&(o=(3435973836&(o=(2863311530&o)>>>1|(1431655765&o)<<1))>>>2|(858993459&o)<<2))>>>4|(252645135&o)<<4))>>>8|(16711935&o)<<8,i.rev15[a]=(o>>>16|o<<16)>>>17}function s(u,f,h){for(;f--!=0;)u.push(0,h)}for(a=0;a<32;a++)i.ldef[a]=i.of0[a]<<3|i.exb[a],i.ddef[a]=i.df0[a]<<4|i.dxb[a];s(i.fltree,144,8),s(i.fltree,112,9),s(i.fltree,24,7),s(i.fltree,8,8),r.F.makeCodes(i.fltree,9),r.F.codes2map(i.fltree,9,i.flmap),r.F.revCodes(i.fltree,9),s(i.fdtree,32,5),r.F.makeCodes(i.fdtree,5),r.F.codes2map(i.fdtree,5,i.fdmap),r.F.revCodes(i.fdtree,5),s(i.itree,19,0),s(i.ltree,286,0),s(i.dtree,30,0),s(i.ttree,320,0)}()})();var mU=dU({__proto__:null,default:Lg},[Lg]);const tl=function(){var n={nextZero(h,p){for(;h[p]!=0;)p++;return p},readUshort:(h,p)=>h[p]<<8|h[p+1],writeUshort(h,p,g){h[p]=g>>8&255,h[p+1]=255&g},readUint:(h,p)=>16777216*h[p]+(h[p+1]<<16|h[p+2]<<8|h[p+3]),writeUint(h,p,g){h[p]=g>>24&255,h[p+1]=g>>16&255,h[p+2]=g>>8&255,h[p+3]=255&g},readASCII(h,p,g){let m="";for(let _=0;_<g;_++)m+=String.fromCharCode(h[p+_]);return m},writeASCII(h,p,g){for(let m=0;m<g.length;m++)h[p+m]=g.charCodeAt(m)},readBytes(h,p,g){const m=[];for(let _=0;_<g;_++)m.push(h[p+_]);return m},pad:h=>h.length<2?`0${h}`:h,readUTF8(h,p,g){let m,_="";for(let b=0;b<g;b++)_+=`%${n.pad(h[p+b].toString(16))}`;try{m=decodeURIComponent(_)}catch{return n.readASCII(h,p,g)}return m}};function e(h,p,g,m){const _=p*g,b=a(m),T=Math.ceil(p*b/8),S=new Uint8Array(4*_),D=new Uint32Array(S.buffer),{ctype:B}=m,{depth:V}=m,Y=n.readUshort;if(B==6){const ue=_<<2;if(V==8)for(var q=0;q<ue;q+=4)S[q]=h[q],S[q+1]=h[q+1],S[q+2]=h[q+2],S[q+3]=h[q+3];if(V==16)for(q=0;q<ue;q++)S[q]=h[q<<1]}else if(B==2){const ue=m.tabs.tRNS;if(ue==null){if(V==8)for(q=0;q<_;q++){var P=3*q;D[q]=255<<24|h[P+2]<<16|h[P+1]<<8|h[P]}if(V==16)for(q=0;q<_;q++)P=6*q,D[q]=255<<24|h[P+4]<<16|h[P+2]<<8|h[P]}else{var E=ue[0];const X=ue[1],me=ue[2];if(V==8)for(q=0;q<_;q++){var C=q<<2;P=3*q,D[q]=255<<24|h[P+2]<<16|h[P+1]<<8|h[P],h[P]==E&&h[P+1]==X&&h[P+2]==me&&(S[C+3]=0)}if(V==16)for(q=0;q<_;q++)C=q<<2,P=6*q,D[q]=255<<24|h[P+4]<<16|h[P+2]<<8|h[P],Y(h,P)==E&&Y(h,P+2)==X&&Y(h,P+4)==me&&(S[C+3]=0)}}else if(B==3){const ue=m.tabs.PLTE,X=m.tabs.tRNS,me=X?X.length:0;if(V==1)for(var M=0;M<g;M++){var R=M*T,L=M*p;for(q=0;q<p;q++){C=L+q<<2;var j=3*($=h[R+(q>>3)]>>7-((7&q)<<0)&1);S[C]=ue[j],S[C+1]=ue[j+1],S[C+2]=ue[j+2],S[C+3]=$<me?X[$]:255}}if(V==2)for(M=0;M<g;M++)for(R=M*T,L=M*p,q=0;q<p;q++)C=L+q<<2,j=3*($=h[R+(q>>2)]>>6-((3&q)<<1)&3),S[C]=ue[j],S[C+1]=ue[j+1],S[C+2]=ue[j+2],S[C+3]=$<me?X[$]:255;if(V==4)for(M=0;M<g;M++)for(R=M*T,L=M*p,q=0;q<p;q++)C=L+q<<2,j=3*($=h[R+(q>>1)]>>4-((1&q)<<2)&15),S[C]=ue[j],S[C+1]=ue[j+1],S[C+2]=ue[j+2],S[C+3]=$<me?X[$]:255;if(V==8)for(q=0;q<_;q++){var $;C=q<<2,j=3*($=h[q]),S[C]=ue[j],S[C+1]=ue[j+1],S[C+2]=ue[j+2],S[C+3]=$<me?X[$]:255}}else if(B==4){if(V==8)for(q=0;q<_;q++){C=q<<2;var ne=h[U=q<<1];S[C]=ne,S[C+1]=ne,S[C+2]=ne,S[C+3]=h[U+1]}if(V==16)for(q=0;q<_;q++){var U;C=q<<2,ne=h[U=q<<2],S[C]=ne,S[C+1]=ne,S[C+2]=ne,S[C+3]=h[U+2]}}else if(B==0)for(E=m.tabs.tRNS?m.tabs.tRNS:-1,M=0;M<g;M++){const ue=M*T,X=M*p;if(V==1)for(var z=0;z<p;z++){var te=(ne=255*(h[ue+(z>>>3)]>>>7-(7&z)&1))==255*E?0:255;D[X+z]=te<<24|ne<<16|ne<<8|ne}else if(V==2)for(z=0;z<p;z++)te=(ne=85*(h[ue+(z>>>2)]>>>6-((3&z)<<1)&3))==85*E?0:255,D[X+z]=te<<24|ne<<16|ne<<8|ne;else if(V==4)for(z=0;z<p;z++)te=(ne=17*(h[ue+(z>>>1)]>>>4-((1&z)<<2)&15))==17*E?0:255,D[X+z]=te<<24|ne<<16|ne<<8|ne;else if(V==8)for(z=0;z<p;z++)te=(ne=h[ue+z])==E?0:255,D[X+z]=te<<24|ne<<16|ne<<8|ne;else if(V==16)for(z=0;z<p;z++)ne=h[ue+(z<<1)],te=Y(h,ue+(z<<1))==E?0:255,D[X+z]=te<<24|ne<<16|ne<<8|ne}return S}function t(h,p,g,m){const _=a(h),b=Math.ceil(g*_/8),T=new Uint8Array((b+1+h.interlace)*m);return p=h.tabs.CgBI?i(p,T):r(p,T),h.interlace==0?p=o(p,h,0,g,m):h.interlace==1&&(p=function(D,B){const V=B.width,Y=B.height,q=a(B),P=q>>3,E=Math.ceil(V*q/8),C=new Uint8Array(Y*E);let M=0;const R=[0,0,4,0,2,0,1],L=[0,4,0,2,0,1,0],j=[8,8,8,4,4,2,2],$=[8,8,4,4,2,2,1];let ne=0;for(;ne<7;){const z=j[ne],te=$[ne];let ue=0,X=0,me=R[ne];for(;me<Y;)me+=z,X++;let G=L[ne];for(;G<V;)G+=te,ue++;const Q=Math.ceil(ue*q/8);o(D,B,M,ue,X);let ee=0,ie=R[ne];for(;ie<Y;){let de=L[ne],Ee=M+ee*Q<<3;for(;de<V;){var U;if(q==1&&(U=(U=D[Ee>>3])>>7-(7&Ee)&1,C[ie*E+(de>>3)]|=U<<7-((7&de)<<0)),q==2&&(U=(U=D[Ee>>3])>>6-(7&Ee)&3,C[ie*E+(de>>2)]|=U<<6-((3&de)<<1)),q==4&&(U=(U=D[Ee>>3])>>4-(7&Ee)&15,C[ie*E+(de>>1)]|=U<<4-((1&de)<<2)),q>=8){const be=ie*E+de*P;for(let Te=0;Te<P;Te++)C[be+Te]=D[(Ee>>3)+Te]}Ee+=q,de+=te}ee++,ie+=z}ue*X!=0&&(M+=X*(1+Q)),ne+=1}return C}(p,h)),p}function r(h,p){return i(new Uint8Array(h.buffer,2,h.length-6),p)}var i=function(){const h={H:{}};return h.H.N=function(p,g){const m=Uint8Array;let _,b,T=0,S=0,D=0,B=0,V=0,Y=0,q=0,P=0,E=0;if(p[0]==3&&p[1]==0)return g||new m(0);const C=h.H,M=C.b,R=C.e,L=C.R,j=C.n,$=C.A,ne=C.Z,U=C.m,z=g==null;for(z&&(g=new m(p.length>>>2<<5));T==0;)if(T=M(p,E,1),S=M(p,E+1,2),E+=3,S!=0){if(z&&(g=h.H.W(g,P+(1<<17))),S==1&&(_=U.J,b=U.h,Y=511,q=31),S==2){D=R(p,E,5)+257,B=R(p,E+5,5)+1,V=R(p,E+10,4)+4,E+=14;let ue=1;for(var te=0;te<38;te+=2)U.Q[te]=0,U.Q[te+1]=0;for(te=0;te<V;te++){const G=R(p,E+3*te,3);U.Q[1+(U.X[te]<<1)]=G,G>ue&&(ue=G)}E+=3*V,j(U.Q,ue),$(U.Q,ue,U.u),_=U.w,b=U.d,E=L(U.u,(1<<ue)-1,D+B,p,E,U.v);const X=C.V(U.v,0,D,U.C);Y=(1<<X)-1;const me=C.V(U.v,D,B,U.D);q=(1<<me)-1,j(U.C,X),$(U.C,X,_),j(U.D,me),$(U.D,me,b)}for(;;){const ue=_[ne(p,E)&Y];E+=15&ue;const X=ue>>>4;if(!(X>>>8))g[P++]=X;else{if(X==256)break;{let me=P+X-254;if(X>264){const de=U.q[X-257];me=P+(de>>>3)+R(p,E,7&de),E+=7&de}const G=b[ne(p,E)&q];E+=15&G;const Q=G>>>4,ee=U.c[Q],ie=(ee>>>4)+M(p,E,15&ee);for(E+=15&ee;P<me;)g[P]=g[P++-ie],g[P]=g[P++-ie],g[P]=g[P++-ie],g[P]=g[P++-ie];P=me}}}}else{(7&E)!=0&&(E+=8-(7&E));const ue=4+(E>>>3),X=p[ue-4]|p[ue-3]<<8;z&&(g=h.H.W(g,P+X)),g.set(new m(p.buffer,p.byteOffset+ue,X),P),E=ue+X<<3,P+=X}return g.length==P?g:g.slice(0,P)},h.H.W=function(p,g){const m=p.length;if(g<=m)return p;const _=new Uint8Array(m<<1);return _.set(p,0),_},h.H.R=function(p,g,m,_,b,T){const S=h.H.e,D=h.H.Z;let B=0;for(;B<m;){const V=p[D(_,b)&g];b+=15&V;const Y=V>>>4;if(Y<=15)T[B]=Y,B++;else{let q=0,P=0;Y==16?(P=3+S(_,b,2),b+=2,q=T[B-1]):Y==17?(P=3+S(_,b,3),b+=3):Y==18&&(P=11+S(_,b,7),b+=7);const E=B+P;for(;B<E;)T[B]=q,B++}}return b},h.H.V=function(p,g,m,_){let b=0,T=0;const S=_.length>>>1;for(;T<m;){const D=p[T+g];_[T<<1]=0,_[1+(T<<1)]=D,D>b&&(b=D),T++}for(;T<S;)_[T<<1]=0,_[1+(T<<1)]=0,T++;return b},h.H.n=function(p,g){const m=h.H.m,_=p.length;let b,T,S,D;const B=m.j;for(var V=0;V<=g;V++)B[V]=0;for(V=1;V<_;V+=2)B[p[V]]++;const Y=m.K;for(b=0,B[0]=0,T=1;T<=g;T++)b=b+B[T-1]<<1,Y[T]=b;for(S=0;S<_;S+=2)D=p[S+1],D!=0&&(p[S]=Y[D],Y[D]++)},h.H.A=function(p,g,m){const _=p.length,b=h.H.m.r;for(let T=0;T<_;T+=2)if(p[T+1]!=0){const S=T>>1,D=p[T+1],B=S<<4|D,V=g-D;let Y=p[T]<<V;const q=Y+(1<<V);for(;Y!=q;)m[b[Y]>>>15-g]=B,Y++}},h.H.l=function(p,g){const m=h.H.m.r,_=15-g;for(let b=0;b<p.length;b+=2){const T=p[b]<<g-p[b+1];p[b]=m[T]>>>_}},h.H.M=function(p,g,m){m<<=7&g;const _=g>>>3;p[_]|=m,p[_+1]|=m>>>8},h.H.I=function(p,g,m){m<<=7&g;const _=g>>>3;p[_]|=m,p[_+1]|=m>>>8,p[_+2]|=m>>>16},h.H.e=function(p,g,m){return(p[g>>>3]|p[1+(g>>>3)]<<8)>>>(7&g)&(1<<m)-1},h.H.b=function(p,g,m){return(p[g>>>3]|p[1+(g>>>3)]<<8|p[2+(g>>>3)]<<16)>>>(7&g)&(1<<m)-1},h.H.Z=function(p,g){return(p[g>>>3]|p[1+(g>>>3)]<<8|p[2+(g>>>3)]<<16)>>>(7&g)},h.H.i=function(p,g){return(p[g>>>3]|p[1+(g>>>3)]<<8|p[2+(g>>>3)]<<16|p[3+(g>>>3)]<<24)>>>(7&g)},h.H.m=function(){const p=Uint16Array,g=Uint32Array;return{K:new p(16),j:new p(16),X:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],T:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],q:new p(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],z:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],c:new g(32),J:new p(512),_:[],h:new p(32),$:[],w:new p(32768),C:[],v:[],d:new p(32768),D:[],u:new p(512),Q:[],r:new p(32768),s:new g(286),Y:new g(30),a:new g(19),t:new g(15e3),k:new p(65536),g:new p(32768)}}(),function(){const p=h.H.m;for(var g=0;g<32768;g++){let _=g;_=(2863311530&_)>>>1|(1431655765&_)<<1,_=(3435973836&_)>>>2|(858993459&_)<<2,_=(4042322160&_)>>>4|(252645135&_)<<4,_=(4278255360&_)>>>8|(16711935&_)<<8,p.r[g]=(_>>>16|_<<16)>>>17}function m(_,b,T){for(;b--!=0;)_.push(0,T)}for(g=0;g<32;g++)p.q[g]=p.S[g]<<3|p.T[g],p.c[g]=p.p[g]<<4|p.z[g];m(p._,144,8),m(p._,112,9),m(p._,24,7),m(p._,8,8),h.H.n(p._,9),h.H.A(p._,9,p.J),h.H.l(p._,9),m(p.$,32,5),h.H.n(p.$,5),h.H.A(p.$,5,p.h),h.H.l(p.$,5),m(p.Q,19,0),m(p.C,286,0),m(p.D,30,0),m(p.v,320,0)}(),h.H.N}();function a(h){return[1,null,3,1,2,null,4][h.ctype]*h.depth}function o(h,p,g,m,_){let b=a(p);const T=Math.ceil(m*b/8);let S,D;b=Math.ceil(b/8);let B=h[g],V=0;if(B>1&&(h[g]=[0,0,1][B-2]),B==3)for(V=b;V<T;V++)h[V+1]=h[V+1]+(h[V+1-b]>>>1)&255;for(let Y=0;Y<_;Y++)if(S=g+Y*T,D=S+Y+1,B=h[D-1],V=0,B==0)for(;V<T;V++)h[S+V]=h[D+V];else if(B==1){for(;V<b;V++)h[S+V]=h[D+V];for(;V<T;V++)h[S+V]=h[D+V]+h[S+V-b]}else if(B==2)for(;V<T;V++)h[S+V]=h[D+V]+h[S+V-T];else if(B==3){for(;V<b;V++)h[S+V]=h[D+V]+(h[S+V-T]>>>1);for(;V<T;V++)h[S+V]=h[D+V]+(h[S+V-T]+h[S+V-b]>>>1)}else{for(;V<b;V++)h[S+V]=h[D+V]+s(0,h[S+V-T],0);for(;V<T;V++)h[S+V]=h[D+V]+s(h[S+V-b],h[S+V-T],h[S+V-b-T])}return h}function s(h,p,g){const m=h+p-g,_=m-h,b=m-p,T=m-g;return _*_<=b*b&&_*_<=T*T?h:b*b<=T*T?p:g}function u(h,p,g){g.width=n.readUint(h,p),p+=4,g.height=n.readUint(h,p),p+=4,g.depth=h[p],p++,g.ctype=h[p],p++,g.compress=h[p],p++,g.filter=h[p],p++,g.interlace=h[p],p++}function f(h,p,g,m,_,b,T,S,D){const B=Math.min(p,_),V=Math.min(g,b);let Y=0,q=0;for(let ne=0;ne<V;ne++)for(let U=0;U<B;U++)if(T>=0&&S>=0?(Y=ne*p+U<<2,q=(S+ne)*_+T+U<<2):(Y=(-S+ne)*p-T+U<<2,q=ne*_+U<<2),D==0)m[q]=h[Y],m[q+1]=h[Y+1],m[q+2]=h[Y+2],m[q+3]=h[Y+3];else if(D==1){var P=h[Y+3]*.00392156862745098,E=h[Y]*P,C=h[Y+1]*P,M=h[Y+2]*P,R=m[q+3]*(1/255),L=m[q]*R,j=m[q+1]*R,$=m[q+2]*R;const z=1-P,te=P+R*z,ue=te==0?0:1/te;m[q+3]=255*te,m[q+0]=(E+L*z)*ue,m[q+1]=(C+j*z)*ue,m[q+2]=(M+$*z)*ue}else if(D==2)P=h[Y+3],E=h[Y],C=h[Y+1],M=h[Y+2],R=m[q+3],L=m[q],j=m[q+1],$=m[q+2],P==R&&E==L&&C==j&&M==$?(m[q]=0,m[q+1]=0,m[q+2]=0,m[q+3]=0):(m[q]=E,m[q+1]=C,m[q+2]=M,m[q+3]=P);else if(D==3){if(P=h[Y+3],E=h[Y],C=h[Y+1],M=h[Y+2],R=m[q+3],L=m[q],j=m[q+1],$=m[q+2],P==R&&E==L&&C==j&&M==$)continue;if(P<220&&R>20)return!1}return!0}return{decode:function(p){const g=new Uint8Array(p);let m=8;const _=n,b=_.readUshort,T=_.readUint,S={tabs:{},frames:[]},D=new Uint8Array(g.length);let B,V=0,Y=0;const q=[137,80,78,71,13,10,26,10];for(var P=0;P<8;P++)if(g[P]!=q[P])throw"The input is not a PNG file!";for(;m<g.length;){const ne=_.readUint(g,m);m+=4;const U=_.readASCII(g,m,4);if(m+=4,U=="IHDR")u(g,m,S);else if(U=="iCCP"){for(var E=m;g[E]!=0;)E++;_.readASCII(g,m,E-m),g[E+1];const z=g.slice(E+2,m+ne);let te=null;try{te=r(z)}catch{te=i(z)}S.tabs[U]=te}else if(U=="CgBI")S.tabs[U]=g.slice(m,m+4);else if(U=="IDAT"){for(P=0;P<ne;P++)D[V+P]=g[m+P];V+=ne}else if(U=="acTL")S.tabs[U]={num_frames:T(g,m),num_plays:T(g,m+4)},B=new Uint8Array(g.length);else if(U=="fcTL"){Y!=0&&(($=S.frames[S.frames.length-1]).data=t(S,B.slice(0,Y),$.rect.width,$.rect.height),Y=0);const z={x:T(g,m+12),y:T(g,m+16),width:T(g,m+4),height:T(g,m+8)};let te=b(g,m+22);te=b(g,m+20)/(te==0?100:te);const ue={rect:z,delay:Math.round(1e3*te),dispose:g[m+24],blend:g[m+25]};S.frames.push(ue)}else if(U=="fdAT"){for(P=0;P<ne-4;P++)B[Y+P]=g[m+P+4];Y+=ne-4}else if(U=="pHYs")S.tabs[U]=[_.readUint(g,m),_.readUint(g,m+4),g[m+8]];else if(U=="cHRM")for(S.tabs[U]=[],P=0;P<8;P++)S.tabs[U].push(_.readUint(g,m+4*P));else if(U=="tEXt"||U=="zTXt"){S.tabs[U]==null&&(S.tabs[U]={});var C=_.nextZero(g,m),M=_.readASCII(g,m,C-m),R=m+ne-C-1;if(U=="tEXt")j=_.readASCII(g,C+1,R);else{var L=r(g.slice(C+2,C+2+R));j=_.readUTF8(L,0,L.length)}S.tabs[U][M]=j}else if(U=="iTXt"){S.tabs[U]==null&&(S.tabs[U]={}),C=0,E=m,C=_.nextZero(g,E),M=_.readASCII(g,E,C-E);const z=g[E=C+1];var j;g[E+1],E+=2,C=_.nextZero(g,E),_.readASCII(g,E,C-E),E=C+1,C=_.nextZero(g,E),_.readUTF8(g,E,C-E),R=ne-((E=C+1)-m),z==0?j=_.readUTF8(g,E,R):(L=r(g.slice(E,E+R)),j=_.readUTF8(L,0,L.length)),S.tabs[U][M]=j}else if(U=="PLTE")S.tabs[U]=_.readBytes(g,m,ne);else if(U=="hIST"){const z=S.tabs.PLTE.length/3;for(S.tabs[U]=[],P=0;P<z;P++)S.tabs[U].push(b(g,m+2*P))}else if(U=="tRNS")S.ctype==3?S.tabs[U]=_.readBytes(g,m,ne):S.ctype==0?S.tabs[U]=b(g,m):S.ctype==2&&(S.tabs[U]=[b(g,m),b(g,m+2),b(g,m+4)]);else if(U=="gAMA")S.tabs[U]=_.readUint(g,m)/1e5;else if(U=="sRGB")S.tabs[U]=g[m];else if(U=="bKGD")S.ctype==0||S.ctype==4?S.tabs[U]=[b(g,m)]:S.ctype==2||S.ctype==6?S.tabs[U]=[b(g,m),b(g,m+2),b(g,m+4)]:S.ctype==3&&(S.tabs[U]=g[m]);else if(U=="IEND")break;m+=ne,_.readUint(g,m),m+=4}var $;return Y!=0&&(($=S.frames[S.frames.length-1]).data=t(S,B.slice(0,Y),$.rect.width,$.rect.height)),S.data=t(S,D,S.width,S.height),delete S.compress,delete S.interlace,delete S.filter,S},toRGBA8:function(p){const g=p.width,m=p.height;if(p.tabs.acTL==null)return[e(p.data,g,m,p).buffer];const _=[];p.frames[0].data==null&&(p.frames[0].data=p.data);const b=g*m*4,T=new Uint8Array(b),S=new Uint8Array(b),D=new Uint8Array(b);for(let V=0;V<p.frames.length;V++){const Y=p.frames[V],q=Y.rect.x,P=Y.rect.y,E=Y.rect.width,C=Y.rect.height,M=e(Y.data,E,C,p);if(V!=0)for(var B=0;B<b;B++)D[B]=T[B];if(Y.blend==0?f(M,E,C,T,g,m,q,P,0):Y.blend==1&&f(M,E,C,T,g,m,q,P,1),_.push(T.buffer.slice(0)),Y.dispose!=0){if(Y.dispose==1)f(S,E,C,T,g,m,q,P,0);else if(Y.dispose==2)for(B=0;B<b;B++)T[B]=D[B]}}return _},_paeth:s,_copyTile:f,_bin:n}}();(function(){const{_copyTile:n}=tl,{_bin:e}=tl,t=tl._paeth;var r={table:function(){const E=new Uint32Array(256);for(let C=0;C<256;C++){let M=C;for(let R=0;R<8;R++)1&M?M=3988292384^M>>>1:M>>>=1;E[C]=M}return E}(),update(E,C,M,R){for(let L=0;L<R;L++)E=r.table[255&(E^C[M+L])]^E>>>8;return E},crc:(E,C,M)=>4294967295^r.update(4294967295,E,C,M)};function i(E,C,M,R){C[M]+=E[0]*R>>4,C[M+1]+=E[1]*R>>4,C[M+2]+=E[2]*R>>4,C[M+3]+=E[3]*R>>4}function a(E){return Math.max(0,Math.min(255,E))}function o(E,C){const M=E[0]-C[0],R=E[1]-C[1],L=E[2]-C[2],j=E[3]-C[3];return M*M+R*R+L*L+j*j}function s(E,C,M,R,L,j,$){$==null&&($=1);const ne=R.length,U=[];for(var z=0;z<ne;z++){const ie=R[z];U.push([ie>>>0&255,ie>>>8&255,ie>>>16&255,ie>>>24&255])}for(z=0;z<ne;z++){let ie=4294967295;for(var te=0,ue=0;ue<ne;ue++){var X=o(U[z],U[ue]);ue!=z&&X<ie&&(ie=X,te=ue)}}const me=new Uint32Array(L.buffer),G=new Int16Array(C*M*4),Q=[0,8,2,10,12,4,14,6,3,11,1,9,15,7,13,5];for(z=0;z<Q.length;z++)Q[z]=255*((Q[z]+.5)/16-.5);for(let ie=0;ie<M;ie++)for(let de=0;de<C;de++){var ee;z=4*(ie*C+de),$!=2?ee=[a(E[z]+G[z]),a(E[z+1]+G[z+1]),a(E[z+2]+G[z+2]),a(E[z+3]+G[z+3])]:(X=Q[4*(3&ie)+(3&de)],ee=[a(E[z]+X),a(E[z+1]+X),a(E[z+2]+X),a(E[z+3]+X)]),te=0;let Ee=16777215;for(ue=0;ue<ne;ue++){const Ge=o(ee,U[ue]);Ge<Ee&&(Ee=Ge,te=ue)}const be=U[te],Te=[ee[0]-be[0],ee[1]-be[1],ee[2]-be[2],ee[3]-be[3]];$==1&&(de!=C-1&&i(Te,G,z+4,7),ie!=M-1&&(de!=0&&i(Te,G,z+4*C-4,3),i(Te,G,z+4*C,5),de!=C-1&&i(Te,G,z+4*C+4,1))),j[z>>2]=te,me[z>>2]=R[te]}}function u(E,C,M,R,L){L==null&&(L={});const{crc:j}=r,$=e.writeUint,ne=e.writeUshort,U=e.writeASCII;let z=8;const te=E.frames.length>1;let ue,X=!1,me=33+(te?20:0);if(L.sRGB!=null&&(me+=13),L.pHYs!=null&&(me+=21),L.iCCP!=null&&(ue=pako.deflate(L.iCCP),me+=21+ue.length+4),E.ctype==3){for(var G=E.plte.length,Q=0;Q<G;Q++)E.plte[Q]>>>24!=255&&(X=!0);me+=8+3*G+4+(X?8+1*G+4:0)}for(var ee=0;ee<E.frames.length;ee++)te&&(me+=38),me+=(be=E.frames[ee]).cimg.length+12,ee!=0&&(me+=4);me+=12;const ie=new Uint8Array(me),de=[137,80,78,71,13,10,26,10];for(Q=0;Q<8;Q++)ie[Q]=de[Q];if($(ie,z,13),z+=4,U(ie,z,"IHDR"),z+=4,$(ie,z,C),z+=4,$(ie,z,M),z+=4,ie[z]=E.depth,z++,ie[z]=E.ctype,z++,ie[z]=0,z++,ie[z]=0,z++,ie[z]=0,z++,$(ie,z,j(ie,z-17,17)),z+=4,L.sRGB!=null&&($(ie,z,1),z+=4,U(ie,z,"sRGB"),z+=4,ie[z]=L.sRGB,z++,$(ie,z,j(ie,z-5,5)),z+=4),L.iCCP!=null){const Te=13+ue.length;$(ie,z,Te),z+=4,U(ie,z,"iCCP"),z+=4,U(ie,z,"ICC profile"),z+=11,z+=2,ie.set(ue,z),z+=ue.length,$(ie,z,j(ie,z-(Te+4),Te+4)),z+=4}if(L.pHYs!=null&&($(ie,z,9),z+=4,U(ie,z,"pHYs"),z+=4,$(ie,z,L.pHYs[0]),z+=4,$(ie,z,L.pHYs[1]),z+=4,ie[z]=L.pHYs[2],z++,$(ie,z,j(ie,z-13,13)),z+=4),te&&($(ie,z,8),z+=4,U(ie,z,"acTL"),z+=4,$(ie,z,E.frames.length),z+=4,$(ie,z,L.loop!=null?L.loop:0),z+=4,$(ie,z,j(ie,z-12,12)),z+=4),E.ctype==3){for($(ie,z,3*(G=E.plte.length)),z+=4,U(ie,z,"PLTE"),z+=4,Q=0;Q<G;Q++){const Te=3*Q,Ge=E.plte[Q],He=255&Ge,rt=Ge>>>8&255,st=Ge>>>16&255;ie[z+Te+0]=He,ie[z+Te+1]=rt,ie[z+Te+2]=st}if(z+=3*G,$(ie,z,j(ie,z-3*G-4,3*G+4)),z+=4,X){for($(ie,z,G),z+=4,U(ie,z,"tRNS"),z+=4,Q=0;Q<G;Q++)ie[z+Q]=E.plte[Q]>>>24&255;z+=G,$(ie,z,j(ie,z-G-4,G+4)),z+=4}}let Ee=0;for(ee=0;ee<E.frames.length;ee++){var be=E.frames[ee];te&&($(ie,z,26),z+=4,U(ie,z,"fcTL"),z+=4,$(ie,z,Ee++),z+=4,$(ie,z,be.rect.width),z+=4,$(ie,z,be.rect.height),z+=4,$(ie,z,be.rect.x),z+=4,$(ie,z,be.rect.y),z+=4,ne(ie,z,R[ee]),z+=2,ne(ie,z,1e3),z+=2,ie[z]=be.dispose,z++,ie[z]=be.blend,z++,$(ie,z,j(ie,z-30,30)),z+=4);const Te=be.cimg;$(ie,z,(G=Te.length)+(ee==0?0:4)),z+=4;const Ge=z;U(ie,z,ee==0?"IDAT":"fdAT"),z+=4,ee!=0&&($(ie,z,Ee++),z+=4),ie.set(Te,z),z+=G,$(ie,z,j(ie,Ge,z-Ge)),z+=4}return $(ie,z,0),z+=4,U(ie,z,"IEND"),z+=4,$(ie,z,j(ie,z-4,4)),z+=4,ie.buffer}function f(E,C,M){for(let R=0;R<E.frames.length;R++){const L=E.frames[R];L.rect.width;const j=L.rect.height,$=new Uint8Array(j*L.bpl+j);L.cimg=m(L.img,j,L.bpp,L.bpl,$,C,M)}}function h(E,C,M,R,L){const j=L[0],$=L[1],ne=L[2],U=L[3],z=L[4],te=L[5];let ue=6,X=8,me=255;for(var G=0;G<E.length;G++){const ge=new Uint8Array(E[G]);for(var Q=ge.length,ee=0;ee<Q;ee+=4)me&=ge[ee+3]}const ie=me!=255,de=function(gt,lt,Xe,it,at,ot){const ct=[];for(var mt=0;mt<gt.length;mt++){const Ot=new Uint8Array(gt[mt]),ut=new Uint32Array(Ot.buffer);var Rt;let mn=0,Vt=0,Xn=lt,Yt=Xe,An=it?1:0;if(mt!=0){const di=ot||it||mt==1||ct[mt-2].dispose!=0?1:2;let on=0,da=1e9;for(let Cn=0;Cn<di;Cn++){var _t=new Uint8Array(gt[mt-1-Cn]);const Lr=new Uint32Array(gt[mt-1-Cn]);let or=lt,vn=Xe,Tt=-1,tn=-1;for(let kn=0;kn<Xe;kn++)for(let dr=0;dr<lt;dr++)ut[Nt=kn*lt+dr]!=Lr[Nt]&&(dr<or&&(or=dr),dr>Tt&&(Tt=dr),kn<vn&&(vn=kn),kn>tn&&(tn=kn));Tt==-1&&(or=vn=Tt=tn=0),at&&((1&or)==1&&or--,(1&vn)==1&&vn--);const Ei=(Tt-or+1)*(tn-vn+1);Ei<da&&(da=Ei,on=Cn,mn=or,Vt=vn,Xn=Tt-or+1,Yt=tn-vn+1)}_t=new Uint8Array(gt[mt-1-on]),on==1&&(ct[mt-1].dispose=2),Rt=new Uint8Array(Xn*Yt*4),n(_t,lt,Xe,Rt,Xn,Yt,-mn,-Vt,0),An=n(Ot,lt,Xe,Rt,Xn,Yt,-mn,-Vt,3)?1:0,An==1?g(Ot,lt,Xe,Rt,{x:mn,y:Vt,width:Xn,height:Yt}):n(Ot,lt,Xe,Rt,Xn,Yt,-mn,-Vt,0)}else Rt=Ot.slice(0);ct.push({rect:{x:mn,y:Vt,width:Xn,height:Yt},img:Rt,blend:An,dispose:0})}if(it)for(mt=0;mt<ct.length;mt++){if((xt=ct[mt]).blend==1)continue;const Ot=xt.rect,ut=ct[mt-1].rect,mn=Math.min(Ot.x,ut.x),Vt=Math.min(Ot.y,ut.y),Xn={x:mn,y:Vt,width:Math.max(Ot.x+Ot.width,ut.x+ut.width)-mn,height:Math.max(Ot.y+Ot.height,ut.y+ut.height)-Vt};ct[mt-1].dispose=1,mt-1!=0&&p(gt,lt,Xe,ct,mt-1,Xn,at),p(gt,lt,Xe,ct,mt,Xn,at)}let bt=0;if(gt.length!=1)for(var Nt=0;Nt<ct.length;Nt++){var xt;bt+=(xt=ct[Nt]).rect.width*xt.rect.height}return ct}(E,C,M,j,$,ne),Ee={},be=[],Te=[];if(R!=0){const ge=[];for(ee=0;ee<de.length;ee++)ge.push(de[ee].img.buffer);const gt=function(at){let ot=0;for(var ct=0;ct<at.length;ct++)ot+=at[ct].byteLength;const mt=new Uint8Array(ot);let Rt=0;for(ct=0;ct<at.length;ct++){const _t=new Uint8Array(at[ct]),bt=_t.length;for(let Nt=0;Nt<bt;Nt+=4){let xt=_t[Nt],Ot=_t[Nt+1],ut=_t[Nt+2];const mn=_t[Nt+3];mn==0&&(xt=Ot=ut=0),mt[Rt+Nt]=xt,mt[Rt+Nt+1]=Ot,mt[Rt+Nt+2]=ut,mt[Rt+Nt+3]=mn}Rt+=bt}return mt.buffer}(ge),lt=b(gt,R);for(ee=0;ee<lt.plte.length;ee++)be.push(lt.plte[ee].est.rgba);let Xe=0;for(ee=0;ee<de.length;ee++){const it=(He=de[ee]).img.length;var Ge=new Uint8Array(lt.inds.buffer,Xe>>2,it>>2);Te.push(Ge);const at=new Uint8Array(lt.abuf,Xe,it);te&&s(He.img,He.rect.width,He.rect.height,be,at,Ge),He.img.set(at),Xe+=it}}else for(G=0;G<de.length;G++){var He=de[G];const ge=new Uint32Array(He.img.buffer);var rt=He.rect.width;for(Q=ge.length,Ge=new Uint8Array(Q),Te.push(Ge),ee=0;ee<Q;ee++){const gt=ge[ee];if(ee!=0&&gt==ge[ee-1])Ge[ee]=Ge[ee-1];else if(ee>rt&&gt==ge[ee-rt])Ge[ee]=Ge[ee-rt];else{let lt=Ee[gt];if(lt==null&&(Ee[gt]=lt=be.length,be.push(gt),be.length>=300))break;Ge[ee]=lt}}}const st=be.length;for(st<=256&&z==0&&(X=st<=2?1:st<=4?2:st<=16?4:8,X=Math.max(X,U)),G=0;G<de.length;G++){(He=de[G]).rect.x,He.rect.y,rt=He.rect.width;const ge=He.rect.height;let gt=He.img;new Uint32Array(gt.buffer);let lt=4*rt,Xe=4;if(st<=256&&z==0){lt=Math.ceil(X*rt/8);var wt=new Uint8Array(lt*ge);const it=Te[G];for(let at=0;at<ge;at++){ee=at*lt;const ot=at*rt;if(X==8)for(var Be=0;Be<rt;Be++)wt[ee+Be]=it[ot+Be];else if(X==4)for(Be=0;Be<rt;Be++)wt[ee+(Be>>1)]|=it[ot+Be]<<4-4*(1&Be);else if(X==2)for(Be=0;Be<rt;Be++)wt[ee+(Be>>2)]|=it[ot+Be]<<6-2*(3&Be);else if(X==1)for(Be=0;Be<rt;Be++)wt[ee+(Be>>3)]|=it[ot+Be]<<7-1*(7&Be)}gt=wt,ue=3,Xe=1}else if(ie==0&&de.length==1){wt=new Uint8Array(rt*ge*3);const it=rt*ge;for(ee=0;ee<it;ee++){const at=3*ee,ot=4*ee;wt[at]=gt[ot],wt[at+1]=gt[ot+1],wt[at+2]=gt[ot+2]}gt=wt,ue=2,Xe=3,lt=3*rt}He.img=gt,He.bpl=lt,He.bpp=Xe}return{ctype:ue,depth:X,plte:be,frames:de}}function p(E,C,M,R,L,j,$){const ne=Uint8Array,U=Uint32Array,z=new ne(E[L-1]),te=new U(E[L-1]),ue=L+1<E.length?new ne(E[L+1]):null,X=new ne(E[L]),me=new U(X.buffer);let G=C,Q=M,ee=-1,ie=-1;for(let Ee=0;Ee<j.height;Ee++)for(let be=0;be<j.width;be++){const Te=j.x+be,Ge=j.y+Ee,He=Ge*C+Te,rt=me[He];rt==0||R[L-1].dispose==0&&te[He]==rt&&(ue==null||ue[4*He+3]!=0)||(Te<G&&(G=Te),Te>ee&&(ee=Te),Ge<Q&&(Q=Ge),Ge>ie&&(ie=Ge))}ee==-1&&(G=Q=ee=ie=0),$&&((1&G)==1&&G--,(1&Q)==1&&Q--),j={x:G,y:Q,width:ee-G+1,height:ie-Q+1};const de=R[L];de.rect=j,de.blend=1,de.img=new Uint8Array(j.width*j.height*4),R[L-1].dispose==0?(n(z,C,M,de.img,j.width,j.height,-j.x,-j.y,0),g(X,C,M,de.img,j)):n(X,C,M,de.img,j.width,j.height,-j.x,-j.y,0)}function g(E,C,M,R,L){n(E,C,M,R,L.width,L.height,-L.x,-L.y,2)}function m(E,C,M,R,L,j,$){const ne=[];let U,z=[0,1,2,3,4];j!=-1?z=[j]:(C*R>5e5||M==1)&&(z=[0]),$&&(U={level:0});const te=mU;for(var ue=0;ue<z.length;ue++){for(let G=0;G<C;G++)_(L,E,G,R,M,z[ue]);ne.push(te.deflate(L,U))}let X,me=1e9;for(ue=0;ue<ne.length;ue++)ne[ue].length<me&&(X=ue,me=ne[ue].length);return ne[X]}function _(E,C,M,R,L,j){const $=M*R;let ne=$+M;if(E[ne]=j,ne++,j==0)if(R<500)for(var U=0;U<R;U++)E[ne+U]=C[$+U];else E.set(new Uint8Array(C.buffer,$,R),ne);else if(j==1){for(U=0;U<L;U++)E[ne+U]=C[$+U];for(U=L;U<R;U++)E[ne+U]=C[$+U]-C[$+U-L]+256&255}else if(M==0){for(U=0;U<L;U++)E[ne+U]=C[$+U];if(j==2)for(U=L;U<R;U++)E[ne+U]=C[$+U];if(j==3)for(U=L;U<R;U++)E[ne+U]=C[$+U]-(C[$+U-L]>>1)+256&255;if(j==4)for(U=L;U<R;U++)E[ne+U]=C[$+U]-t(C[$+U-L],0,0)+256&255}else{if(j==2)for(U=0;U<R;U++)E[ne+U]=C[$+U]+256-C[$+U-R]&255;if(j==3){for(U=0;U<L;U++)E[ne+U]=C[$+U]+256-(C[$+U-R]>>1)&255;for(U=L;U<R;U++)E[ne+U]=C[$+U]+256-(C[$+U-R]+C[$+U-L]>>1)&255}if(j==4){for(U=0;U<L;U++)E[ne+U]=C[$+U]+256-t(0,C[$+U-R],0)&255;for(U=L;U<R;U++)E[ne+U]=C[$+U]+256-t(C[$+U-L],C[$+U-R],C[$+U-L-R])&255}}}function b(E,C){const M=new Uint8Array(E),R=M.slice(0),L=new Uint32Array(R.buffer),j=T(R,C),$=j[0],ne=j[1],U=M.length,z=new Uint8Array(U>>2);let te;if(M.length<2e7)for(var ue=0;ue<U;ue+=4)te=S($,X=M[ue]*(1/255),me=M[ue+1]*(1/255),G=M[ue+2]*(1/255),Q=M[ue+3]*(1/255)),z[ue>>2]=te.ind,L[ue>>2]=te.est.rgba;else for(ue=0;ue<U;ue+=4){var X=M[ue]*.00392156862745098,me=M[ue+1]*(1/255),G=M[ue+2]*(1/255),Q=M[ue+3]*(1/255);for(te=$;te.left;)te=D(te.est,X,me,G,Q)<=0?te.left:te.right;z[ue>>2]=te.ind,L[ue>>2]=te.est.rgba}return{abuf:R.buffer,inds:z,plte:ne}}function T(E,C,M){M==null&&(M=1e-4);const R=new Uint32Array(E.buffer),L={i0:0,i1:E.length,bst:null,est:null,tdst:0,left:null,right:null};L.bst=Y(E,L.i0,L.i1),L.est=q(L.bst);const j=[L];for(;j.length<C;){let ne=0,U=0;for(var $=0;$<j.length;$++)j[$].est.L>ne&&(ne=j[$].est.L,U=$);if(ne<M)break;const z=j[U],te=B(E,R,z.i0,z.i1,z.est.e,z.est.eMq255);if(z.i0>=te||z.i1<=te){z.est.L=0;continue}const ue={i0:z.i0,i1:te,bst:null,est:null,tdst:0,left:null,right:null};ue.bst=Y(E,ue.i0,ue.i1),ue.est=q(ue.bst);const X={i0:te,i1:z.i1,bst:null,est:null,tdst:0,left:null,right:null};for(X.bst={R:[],m:[],N:z.bst.N-ue.bst.N},$=0;$<16;$++)X.bst.R[$]=z.bst.R[$]-ue.bst.R[$];for($=0;$<4;$++)X.bst.m[$]=z.bst.m[$]-ue.bst.m[$];X.est=q(X.bst),z.left=ue,z.right=X,j[U]=ue,j.push(X)}for(j.sort((ne,U)=>U.bst.N-ne.bst.N),$=0;$<j.length;$++)j[$].ind=$;return[L,j]}function S(E,C,M,R,L){if(E.left==null)return E.tdst=function(ue,X,me,G,Q){const ee=X-ue[0],ie=me-ue[1],de=G-ue[2],Ee=Q-ue[3];return ee*ee+ie*ie+de*de+Ee*Ee}(E.est.q,C,M,R,L),E;const j=D(E.est,C,M,R,L);let $=E.left,ne=E.right;j>0&&($=E.right,ne=E.left);const U=S($,C,M,R,L);if(U.tdst<=j*j)return U;const z=S(ne,C,M,R,L);return z.tdst<U.tdst?z:U}function D(E,C,M,R,L){const{e:j}=E;return j[0]*C+j[1]*M+j[2]*R+j[3]*L-E.eMq}function B(E,C,M,R,L,j){for(R-=4;M<R;){for(;V(E,M,L)<=j;)M+=4;for(;V(E,R,L)>j;)R-=4;if(M>=R)break;const $=C[M>>2];C[M>>2]=C[R>>2],C[R>>2]=$,M+=4,R-=4}for(;V(E,M,L)>j;)M-=4;return M+4}function V(E,C,M){return E[C]*M[0]+E[C+1]*M[1]+E[C+2]*M[2]+E[C+3]*M[3]}function Y(E,C,M){const R=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],L=[0,0,0,0],j=M-C>>2;for(let $=C;$<M;$+=4){const ne=E[$]*.00392156862745098,U=E[$+1]*(1/255),z=E[$+2]*(1/255),te=E[$+3]*(1/255);L[0]+=ne,L[1]+=U,L[2]+=z,L[3]+=te,R[0]+=ne*ne,R[1]+=ne*U,R[2]+=ne*z,R[3]+=ne*te,R[5]+=U*U,R[6]+=U*z,R[7]+=U*te,R[10]+=z*z,R[11]+=z*te,R[15]+=te*te}return R[4]=R[1],R[8]=R[2],R[9]=R[6],R[12]=R[3],R[13]=R[7],R[14]=R[11],{R,m:L,N:j}}function q(E){const{R:C}=E,{m:M}=E,{N:R}=E,L=M[0],j=M[1],$=M[2],ne=M[3],U=R==0?0:1/R,z=[C[0]-L*L*U,C[1]-L*j*U,C[2]-L*$*U,C[3]-L*ne*U,C[4]-j*L*U,C[5]-j*j*U,C[6]-j*$*U,C[7]-j*ne*U,C[8]-$*L*U,C[9]-$*j*U,C[10]-$*$*U,C[11]-$*ne*U,C[12]-ne*L*U,C[13]-ne*j*U,C[14]-ne*$*U,C[15]-ne*ne*U],te=z,ue=P;let X=[Math.random(),Math.random(),Math.random(),Math.random()],me=0,G=0;if(R!=0)for(let ee=0;ee<16&&(X=ue.multVec(te,X),G=Math.sqrt(ue.dot(X,X)),X=ue.sml(1/G,X),!(ee!=0&&Math.abs(G-me)<1e-9));ee++)me=G;const Q=[L*U,j*U,$*U,ne*U];return{Cov:z,q:Q,e:X,L:me,eMq255:ue.dot(ue.sml(255,Q),X),eMq:ue.dot(X,Q),rgba:(Math.round(255*Q[3])<<24|Math.round(255*Q[2])<<16|Math.round(255*Q[1])<<8|Math.round(255*Q[0])<<0)>>>0}}var P={multVec:(E,C)=>[E[0]*C[0]+E[1]*C[1]+E[2]*C[2]+E[3]*C[3],E[4]*C[0]+E[5]*C[1]+E[6]*C[2]+E[7]*C[3],E[8]*C[0]+E[9]*C[1]+E[10]*C[2]+E[11]*C[3],E[12]*C[0]+E[13]*C[1]+E[14]*C[2]+E[15]*C[3]],dot:(E,C)=>E[0]*C[0]+E[1]*C[1]+E[2]*C[2]+E[3]*C[3],sml:(E,C)=>[E*C[0],E*C[1],E*C[2],E*C[3]]};tl.encode=function(C,M,R,L,j,$,ne){L==null&&(L=0),ne==null&&(ne=!1);const U=h(C,M,R,L,[!1,!1,!1,0,ne,!1]);return f(U,-1),u(U,M,R,j,$)},tl.encodeLL=function(C,M,R,L,j,$,ne,U){const z={ctype:0+(L==1?0:2)+(j==0?0:4),depth:$,frames:[]},te=(L+j)*$,ue=te*M;for(let X=0;X<C.length;X++)z.frames.push({rect:{x:0,y:0,width:M,height:R},img:new Uint8Array(C[X]),blend:0,dispose:1,bpp:Math.ceil(te/8),bpl:Math.ceil(ue/8)});return f(z,0,!0),u(z,M,R,ne,U)},tl.encode.compress=h,tl.encode.dither=s,tl.quantize=b,tl.quantize.getKDtree=T,tl.quantize.getNearest=S})();const OS={toArrayBuffer(n,e){const t=n.width,r=n.height,i=t<<2,a=n.getContext("2d").getImageData(0,0,t,r),o=new Uint32Array(a.data.buffer),s=(32*t+31)/32<<2,u=s*r,f=122+u,h=new ArrayBuffer(f),p=new DataView(h),g=1<<20;let m,_,b,T,S=g,D=0,B=0,V=0;function Y(E){p.setUint16(B,E,!0),B+=2}function q(E){p.setUint32(B,E,!0),B+=4}function P(E){B+=E}Y(19778),q(f),P(4),q(122),q(108),q(t),q(-r>>>0),Y(1),Y(32),q(3),q(u),q(2835),q(2835),P(8),q(16711680),q(65280),q(255),q(4278190080),q(1466527264),function E(){for(;D<r&&S>0;){for(T=122+D*s,m=0;m<i;)S--,_=o[V++],b=_>>>24,p.setUint32(T+m,_<<8|b),m+=4;D++}V<o.length?(S=g,setTimeout(E,OS._dly)):e(h)}()},toBlob(n,e){this.toArrayBuffer(n,t=>{e(new Blob([t],{type:"image/bmp"}))})},_dly:9};var mo={CHROME:"CHROME",FIREFOX:"FIREFOX",DESKTOP_SAFARI:"DESKTOP_SAFARI",IE:"IE",IOS:"IOS",ETC:"ETC"},vU={[mo.CHROME]:16384,[mo.FIREFOX]:11180,[mo.DESKTOP_SAFARI]:16384,[mo.IE]:8192,[mo.IOS]:4096,[mo.ETC]:8192};const ux=typeof window<"u",DS=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,kg=ux&&window.cordova&&window.cordova.require&&window.cordova.require("cordova/modulemapper"),yU=(ux||DS)&&(kg&&kg.getOriginalSymbol(window,"File")||typeof File<"u"&&File),PS=(ux||DS)&&(kg&&kg.getOriginalSymbol(window,"FileReader")||typeof FileReader<"u"&&FileReader);function cx(n,e,t=Date.now()){return new Promise(r=>{const i=n.split(","),a=i[0].match(/:(.*?);/)[1],o=globalThis.atob(i[1]);let s=o.length;const u=new Uint8Array(s);for(;s--;)u[s]=o.charCodeAt(s);const f=new Blob([u],{type:a});f.name=e,f.lastModified=t,r(f)})}function LS(n){return new Promise((e,t)=>{const r=new PS;r.onload=()=>e(r.result),r.onerror=i=>t(i),r.readAsDataURL(n)})}function kS(n){return new Promise((e,t)=>{const r=new Image;r.onload=()=>e(r),r.onerror=i=>t(i),r.src=n})}function Yf(){if(Yf.cachedResult!==void 0)return Yf.cachedResult;let n=mo.ETC;const{userAgent:e}=navigator;return/Chrom(e|ium)/i.test(e)?n=mo.CHROME:/iP(ad|od|hone)/i.test(e)&&/WebKit/i.test(e)?n=mo.IOS:/Safari/i.test(e)?n=mo.DESKTOP_SAFARI:/Firefox/i.test(e)?n=mo.FIREFOX:(/MSIE/i.test(e)||document.documentMode)&&(n=mo.IE),Yf.cachedResult=n,Yf.cachedResult}function MS(n,e){const t=Yf(),r=vU[t];let i=n,a=e,o=i*a;const s=i>a?a/i:i/a;for(;o>r*r;){const u=(r+i)/2,f=(r+a)/2;u<f?(a=f,i=f*s):(a=u*s,i=u),o=i*a}return{width:i,height:a}}function N2(n,e){let t,r;try{if(t=new OffscreenCanvas(n,e),r=t.getContext("2d"),r===null)throw new Error("getContext of OffscreenCanvas returns null")}catch{t=document.createElement("canvas"),r=t.getContext("2d")}return t.width=n,t.height=e,[t,r]}function BS(n,e){const{width:t,height:r}=MS(n.width,n.height),[i,a]=N2(t,r);return e&&/jpe?g/.test(e)&&(a.fillStyle="white",a.fillRect(0,0,i.width,i.height)),a.drawImage(n,0,0,i.width,i.height),i}function tg(){return tg.cachedResult!==void 0||(tg.cachedResult=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&typeof document<"u"&&"ontouchend"in document),tg.cachedResult}function Mg(n,e={}){return new Promise(function(t,r){let i,a;var o=function(){try{return a=BS(i,e.fileType||n.type),t([i,a])}catch(u){return r(u)}},s=function(u){try{var f=function(h){try{throw h}catch(p){return r(p)}};try{let h;return LS(n).then(function(p){try{return h=p,kS(h).then(function(g){try{return i=g,function(){try{return o()}catch(m){return r(m)}}()}catch(m){return f(m)}},f)}catch(g){return f(g)}},f)}catch(h){f(h)}}catch(h){return r(h)}};try{if(tg()||[mo.DESKTOP_SAFARI,mo.MOBILE_SAFARI].includes(Yf()))throw new Error("Skip createImageBitmap on IOS and Safari");return createImageBitmap(n).then(function(u){try{return i=u,o()}catch{return s()}},s)}catch{s()}})}function Bg(n,e,t,r,i=1){return new Promise(function(a,o){let s;if(e==="image/png"){let f,h,p;return f=n.getContext("2d"),{data:h}=f.getImageData(0,0,n.width,n.height),p=tl.encode([h.buffer],n.width,n.height,4096*i),s=new Blob([p],{type:e}),s.name=t,s.lastModified=r,u.call(this)}{let f=function(){return u.call(this)};if(e==="image/bmp")return new Promise(h=>OS.toBlob(n,h)).then((function(h){try{return s=h,s.name=t,s.lastModified=r,f.call(this)}catch(p){return o(p)}}).bind(this),o);{let h=function(){return f.call(this)};if(typeof OffscreenCanvas=="function"&&n instanceof OffscreenCanvas)return n.convertToBlob({type:e,quality:i}).then((function(p){try{return s=p,s.name=t,s.lastModified=r,h.call(this)}catch(g){return o(g)}}).bind(this),o);{let p;return p=n.toDataURL(e,i),cx(p,t,r).then((function(g){try{return s=g,h.call(this)}catch(m){return o(m)}}).bind(this),o)}}}function u(){return a(s)}})}function Wl(n){n.width=0,n.height=0}function rd(){return new Promise(function(n,e){let t,r,i,a;return rd.cachedResult!==void 0?n(rd.cachedResult):cx("data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q==","test.jpg",Date.now()).then(function(o){try{return t=o,Mg(t).then(function(s){try{return r=s[1],Bg(r,t.type,t.name,t.lastModified).then(function(u){try{return i=u,Wl(r),Mg(i).then(function(f){try{return a=f[0],rd.cachedResult=a.width===1&&a.height===2,n(rd.cachedResult)}catch(h){return e(h)}},e)}catch(f){return e(f)}},e)}catch(u){return e(u)}},e)}catch(s){return e(s)}},e)})}function FS(n){return new Promise((e,t)=>{const r=new PS;r.onload=i=>{const a=new DataView(i.target.result);if(a.getUint16(0,!1)!=65496)return e(-2);const o=a.byteLength;let s=2;for(;s<o;){if(a.getUint16(s+2,!1)<=8)return e(-1);const u=a.getUint16(s,!1);if(s+=2,u==65505){if(a.getUint32(s+=2,!1)!=1165519206)return e(-1);const f=a.getUint16(s+=6,!1)==18761;s+=a.getUint32(s+4,f);const h=a.getUint16(s,f);s+=2;for(let p=0;p<h;p++)if(a.getUint16(s+12*p,f)==274)return e(a.getUint16(s+12*p+8,f))}else{if((65280&u)!=65280)break;s+=a.getUint16(s,!1)}}return e(-1)},r.onerror=i=>t(i),r.readAsArrayBuffer(n)})}function jS(n,e){const{width:t}=n,{height:r}=n,{maxWidthOrHeight:i}=e;let a,o=n;return isFinite(i)&&(t>i||r>i)&&([o,a]=N2(t,r),t>r?(o.width=i,o.height=r/t*i):(o.width=t/r*i,o.height=i),a.drawImage(n,0,0,o.width,o.height),Wl(n)),o}function US(n,e){const{width:t}=n,{height:r}=n,[i,a]=N2(t,r);switch(e>4&&e<9?(i.width=r,i.height=t):(i.width=t,i.height=r),e){case 2:a.transform(-1,0,0,1,t,0);break;case 3:a.transform(-1,0,0,-1,t,r);break;case 4:a.transform(1,0,0,-1,0,r);break;case 5:a.transform(0,1,1,0,0,0);break;case 6:a.transform(0,1,-1,0,r,0);break;case 7:a.transform(0,-1,-1,0,r,t);break;case 8:a.transform(0,-1,1,0,0,t)}return a.drawImage(n,0,0,t,r),Wl(n),i}function a4(n,e,t=0){return new Promise(function(r,i){let a,o,s,u,f,h,p,g,m,_,b,T,S,D,B,V,Y,q,P,E;function C(R=5){if(e.signal&&e.signal.aborted)throw e.signal.reason;a+=R,e.onProgress(Math.min(a,100))}function M(R){if(e.signal&&e.signal.aborted)throw e.signal.reason;a=Math.min(Math.max(R,a),100),e.onProgress(a)}return a=t,o=e.maxIteration||10,s=1024*e.maxSizeMB*1024,C(),Mg(n,e).then((function(R){try{return[,u]=R,C(),f=jS(u,e),C(),new Promise(function(L,j){var $;if(!($=e.exifOrientation))return FS(n).then((function(U){try{return $=U,ne.call(this)}catch(z){return j(z)}}).bind(this),j);function ne(){return L($)}return ne.call(this)}).then((function(L){try{return h=L,C(),rd().then((function(j){try{return p=j?f:US(f,h),C(),g=e.initialQuality||1,m=e.fileType||n.type,Bg(p,m,n.name,n.lastModified,g).then((function($){try{{let U=function(){if(o--&&(B>s||B>S)){let te,ue;return te=E?.95*P.width:P.width,ue=E?.95*P.height:P.height,[Y,q]=N2(te,ue),q.drawImage(P,0,0,te,ue),g*=m==="image/png"?.85:.95,Bg(Y,m,n.name,n.lastModified,g).then(function(X){try{return V=X,Wl(P),P=Y,B=V.size,M(Math.min(99,Math.floor((D-B)/(D-s)*100))),U}catch(me){return i(me)}},i)}return[1]},z=function(){return Wl(P),Wl(Y),Wl(f),Wl(p),Wl(u),M(100),r(V)};if(_=$,C(),b=_.size>s,T=_.size>n.size,!b&&!T)return M(100),r(_);var ne;return S=n.size,D=_.size,B=D,P=p,E=!e.alwaysKeepResolution&&b,(ne=(function(te){for(;te;){if(te.then)return void te.then(ne,i);try{if(te.pop){if(te.length)return te.pop()?z.call(this):te;te=U}else te=te.call(this)}catch(ue){return i(ue)}}}).bind(this))(U)}}catch(U){return i(U)}}).bind(this),i)}catch($){return i($)}}).bind(this),i)}catch(j){return i(j)}}).bind(this),i)}catch(L){return i(L)}}).bind(this),i)})}const xU=`
let scriptImported = false
self.addEventListener('message', async (e) => {
  const { file, id, imageCompressionLibUrl, options } = e.data
  options.onProgress = (progress) => self.postMessage({ progress, id })
  try {
    if (!scriptImported) {
      // console.log('[worker] importScripts', imageCompressionLibUrl)
      self.importScripts(imageCompressionLibUrl)
      scriptImported = true
    }
    // console.log('[worker] self', self)
    const compressedFile = await imageCompression(file, options)
    self.postMessage({ file: compressedFile, id })
  } catch (e) {
    // console.error('[worker] error', e)
    self.postMessage({ error: e.message + '\\n' + e.stack, id })
  }
})
`;let bv;function _U(n,e){return new Promise((t,r)=>{bv||(bv=function(o){const s=[];return s.push(o),URL.createObjectURL(new Blob(s))}(xU));const i=new Worker(bv);i.addEventListener("message",function(o){if(e.signal&&e.signal.aborted)i.terminate();else if(o.data.progress===void 0){if(o.data.error)return r(new Error(o.data.error)),void i.terminate();t(o.data.file),i.terminate()}else e.onProgress(o.data.progress)}),i.addEventListener("error",r),e.signal&&e.signal.addEventListener("abort",()=>{r(e.signal.reason),i.terminate()}),i.postMessage({file:n,imageCompressionLibUrl:e.libURL,options:{...e,onProgress:void 0,signal:void 0}})})}function Oa(n,e){return new Promise(function(t,r){let i,a,o,s,u,f;if(i={...e},o=0,{onProgress:s}=i,i.maxSizeMB=i.maxSizeMB||Number.POSITIVE_INFINITY,u=typeof i.useWebWorker!="boolean"||i.useWebWorker,delete i.useWebWorker,i.onProgress=m=>{o=m,typeof s=="function"&&s(o)},!(n instanceof Blob||n instanceof yU))return r(new Error("The file given is not an instance of Blob or File"));if(!/^image/.test(n.type))return r(new Error("The file given is not an image"));if(f=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,!u||typeof Worker!="function"||f)return a4(n,i).then((function(m){try{return a=m,g.call(this)}catch(_){return r(_)}}).bind(this),r);var h=(function(){try{return g.call(this)}catch(m){return r(m)}}).bind(this),p=function(m){try{return a4(n,i).then(function(_){try{return a=_,h()}catch(b){return r(b)}},r)}catch(_){return r(_)}};try{return i.libURL=i.libURL||"https://cdn.jsdelivr.net/npm/browser-image-compression@2.0.2/dist/browser-image-compression.js",_U(n,i).then(function(m){try{return a=m,h()}catch{return p()}},p)}catch{p()}function g(){try{a.name=n.name,a.lastModified=n.lastModified}catch{}try{i.preserveExif&&n.type==="image/jpeg"&&(!i.fileType||i.fileType&&i.fileType===n.type)&&(a=NS(n,a))}catch{}return t(a)}})}Oa.getDataUrlFromFile=LS,Oa.getFilefromDataUrl=cx,Oa.loadImage=kS,Oa.drawImageInCanvas=BS,Oa.drawFileInCanvas=Mg,Oa.canvasToFile=Bg,Oa.getExifOrientation=FS,Oa.handleMaxWidthOrHeight=jS,Oa.followExifOrientation=US,Oa.cleanupCanvasMemory=Wl,Oa.isAutoOrientationInBrowser=rd,Oa.approximateBelowMaximumCanvasSizeOfBrowser=MS,Oa.copyExifWithoutOrientation=NS,Oa.getBrowserName=Yf,Oa.version="2.0.2";const wU=async n=>{const e="https://api.cloudinary.com/v1_1/dpegnxew7/image/upload",t=new FormData;return t.append("file",n),t.append("upload_preset","GmachSystem"),(await(await fetch(e,{method:"POST",body:t})).json()).secure_url},bU=({editingItem:n,name:e,quantity:t,imageUrl:r,imageFile:i,onNameChange:a,onQuantityChange:o,onImageUrlChange:s,onImageFileChange:u,onCancel:f,onSubmit:h,publicComment:p,internalComment:g,onPublicCommentChange:m,onInternalCommentChange:_})=>{const b=ve.useRef(null);return ve.useEffect(()=>{const T=D=>{b.current&&!b.current.contains(D.target)&&f()},S=D=>{D.key==="Escape"&&f()};return document.addEventListener("mousedown",T),document.addEventListener("keydown",S),()=>{document.removeEventListener("mousedown",T),document.removeEventListener("keydown",S)}},[f]),O.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3,direction:"ltr",padding:"1rem"},children:O.jsxs("div",{ref:b,style:{position:"relative",background:"white",padding:"2rem",borderRadius:"12px",width:"95%",maxWidth:"500px",direction:"rtl",textAlign:"initial",maxHeight:"90vh",overflowY:"auto",boxSizing:"border-box"},children:[O.jsx("button",{onClick:f,style:{position:"absolute",top:"1rem",right:"1rem",background:"none",border:"none",fontSize:"1.8rem",cursor:"pointer",lineHeight:1,color:"#666",width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center"},"aria-label":"סגור",children:"×"}),O.jsx("h3",{style:{textAlign:"center",marginBottom:"2rem",fontSize:"1.5rem",color:"#333"},children:n?"עריכת מוצר":"הוספת מוצר חדש"}),O.jsxs("form",{onSubmit:h,children:[O.jsxs("div",{style:A1,children:[O.jsx("label",{style:E1,children:"שם המוצר:"}),O.jsx("input",{dir:"rtl",type:"text",value:e,onChange:a,required:!0,style:Gh})]}),O.jsxs("div",{style:A1,children:[O.jsx("label",{style:E1,children:"כמות:"}),O.jsx("input",{dir:"rtl",type:"number",value:t,onChange:o,required:!0,style:Gh})]}),O.jsxs("div",{style:A1,children:[O.jsx("label",{style:E1,children:"הערה לפרסום (חיצונית):"}),O.jsx("input",{dir:"rtl",type:"text",value:p,onChange:m,style:Gh})]}),O.jsxs("div",{style:A1,children:[O.jsx("label",{style:E1,children:"הערה פנימית:"}),O.jsx("input",{dir:"rtl",type:"text",value:g,onChange:_,style:Gh})]}),O.jsxs("div",{style:A1,children:[O.jsx("label",{style:E1,children:"תמונה (או כתובת URL):"}),O.jsx("input",{dir:"rtl",type:"text",value:r,onChange:s,placeholder:"הדבק כתובת תמונה (או העלה קובץ)",style:Gh}),O.jsx("input",{type:"file",accept:"image/*",onChange:async T=>{const S=T.target.files[0];if(S){const D=await wU(S);s({target:{value:D}}),_n.success("התמונה הועלתה בהצלחה!")}},style:{...Gh,marginTop:"0.5rem",padding:"8px"}})]}),(r||i)&&O.jsx("div",{style:{marginBottom:"1.5rem",textAlign:"center",padding:"1rem",backgroundColor:"#f8f9fa",borderRadius:"8px"},children:O.jsx("img",{src:i?URL.createObjectURL(i):r,alt:"preview",style:{maxHeight:"150px",maxWidth:"100%",objectFit:"contain",borderRadius:"6px",border:"1px solid #ddd"}})}),O.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"center",marginTop:"2rem",flexWrap:"wrap"},children:[O.jsx("button",{type:"submit",style:{...EU,minWidth:"120px"},children:n?"שמור שינויים":"הוסף מוצר"}),O.jsx("button",{type:"button",onClick:f,style:{...SU,minWidth:"120px"},children:"ביטול"})]})]})]})})},A1={marginBottom:"1.5rem",width:"100%"},E1={display:"block",marginBottom:"0.5rem",fontWeight:"600",color:"#333",fontSize:"1rem"},Gh={width:"100%",padding:"12px",borderRadius:"8px",border:"2px solid #e0e0e0",fontSize:"16px",boxSizing:"border-box",transition:"border-color 0.2s ease",backgroundColor:"#fff",fontFamily:"inherit",outline:"none"},AU=`
  input:focus {
    border-color: #1976d2 !important;
    box-shadow: 0 0 0 3px rgba(25, 118, 210, 0.1) !important;
  }
`,EU={padding:"12px 20px",backgroundColor:"#1976d2",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"16px",fontWeight:"600",transition:"background-color 0.2s ease",flex:"1",maxWidth:"200px"},SU={padding:"12px 20px",backgroundColor:"#6c757d",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"16px",fontWeight:"600",transition:"background-color 0.2s ease",flex:"1",maxWidth:"200px"};if(typeof document<"u"){const n=document.createElement("style");n.textContent=`
    ${AU}
    
    @media (max-width: 768px) {
      input, textarea, select {
        font-size: 16px !important;
        transform: none !important;
      }
      
      .modal-content {
        margin: 1rem;
        max-height: calc(100vh - 2rem);
      }
    }
    
    /* מניעת זום במובייל */
    @media screen and (max-width: 768px) {
      input[type="text"],
      input[type="number"],
      input[type="email"],
      input[type="tel"],
      input[type="url"],
      textarea {
        font-size: 16px;
      }
    }
  `,document.head.appendChild(n)}var VS={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},o4=Ln.createContext&&Ln.createContext(VS),CU=["attr","size","title"];function TU(n,e){if(n==null)return{};var t=IU(n,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function IU(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}function Fg(){return Fg=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Fg.apply(this,arguments)}function s4(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function jg(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?s4(Object(t),!0).forEach(function(r){RU(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):s4(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function RU(n,e,t){return e=NU(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function NU(n){var e=OU(n,"string");return typeof e=="symbol"?e:e+""}function OU(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function zS(n){return n&&n.map((e,t)=>Ln.createElement(e.tag,jg({key:t},e.attr),zS(e.child)))}function O2(n){return e=>Ln.createElement(DU,Fg({attr:jg({},n.attr)},e),zS(n.child))}function DU(n){var e=t=>{var{attr:r,size:i,title:a}=n,o=TU(n,CU),s=i||t.size||"1em",u;return t.className&&(u=t.className),n.className&&(u=(u?u+" ":"")+n.className),Ln.createElement("svg",Fg({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,r,o,{className:u,style:jg(jg({color:n.color||t.color},t.style),n.style),height:s,width:s,xmlns:"http://www.w3.org/2000/svg"}),a&&Ln.createElement("title",null,a),n.children)};return o4!==void 0?Ln.createElement(o4.Consumer,null,t=>e(t)):e(VS)}function PU(n){return O2({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M402.6 83.2l90.2 90.2c3.8 3.8 3.8 10 0 13.8L274.4 405.6l-92.8 10.3c-12.4 1.4-22.9-9.1-21.5-21.5l10.3-92.8L388.8 83.2c3.8-3.8 10-3.8 13.8 0zm162-22.9l-48.8-48.8c-15.2-15.2-39.9-15.2-55.2 0l-35.4 35.4c-3.8 3.8-3.8 10 0 13.8l90.2 90.2c3.8 3.8 10 3.8 13.8 0l35.4-35.4c15.2-15.3 15.2-40 0-55.2zM384 346.2V448H64V128h229.8c3.2 0 6.2-1.3 8.5-3.5l40-40c7.6-7.6 2.2-20.5-8.5-20.5H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V306.2c0-10.7-12.9-16-20.5-8.5l-40 40c-2.2 2.3-3.5 5.3-3.5 8.5z"},child:[]}]})(n)}function LU(n){return O2({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"},child:[]}]})(n)}function l4(n){return O2({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16zM53.2 467a48 48 0 0 0 47.9 45h245.8a48 48 0 0 0 47.9-45L416 128H32z"},child:[]}]})(n)}function kU(n){return O2({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M212.333 224.333H12c-6.627 0-12-5.373-12-12V12C0 5.373 5.373 0 12 0h48c6.627 0 12 5.373 12 12v78.112C117.773 39.279 184.26 7.47 258.175 8.007c136.906.994 246.448 111.623 246.157 248.532C504.041 393.258 393.12 504 256.333 504c-64.089 0-122.496-24.313-166.51-64.215-5.099-4.622-5.334-12.554-.467-17.42l33.967-33.967c4.474-4.474 11.662-4.717 16.401-.525C170.76 415.336 211.58 432 256.333 432c97.268 0 176-78.716 176-176 0-97.267-78.716-176-176-176-58.496 0-110.28 28.476-142.274 72.333h98.274c6.627 0 12 5.373 12 12v48c0 6.627-5.373 12-12 12z"},child:[]}]})(n)}const MU=()=>{const[n,e]=ve.useState(""),[t,r]=ve.useState(""),[i,a]=ve.useState([]),[o,s]=ve.useState([]),[u,f]=ve.useState(""),[h,p]=ve.useState(""),[g,m]=ve.useState(null),[_,b]=ve.useState(""),[T,S]=ve.useState(!1),[D,B]=ve.useState(!1),[V,Y]=ve.useState(null),[q,P]=ve.useState(""),[E,C]=ve.useState(""),{user:M}=w0(),R=(M==null?void 0:M.username)||"משתמש לא ידוע",L=ve.useRef(null);ve.useEffect(()=>{const X=document.createElement("style");return X.innerHTML=`
      input[type=number]::-webkit-inner-spin-button,
      input[type=number]::-webkit-outer-spin-button {
        -webkit-appearance: none;
        margin: 0;
      }
      input[type=number] { -moz-appearance: textfield; }
      
      /* רספונסיביות משופרת */
      .products-grid-mobile {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
        gap: 1.2rem;
        padding: 0;
      }
      
      .product-card-mobile {
        min-height: 380px;
        padding: 1rem;
      }
      
      .product-card-mobile img {
        height: 140px;
      }
      
      .product-card-mobile h3 {
        font-size: 1rem;
        margin: 0.5rem 0;
      }
      
      .product-card-mobile p {
        font-size: 0.875rem;
        margin: 0.25rem 0;
      }
      
      .product-card-mobile .button-group {
        flex-direction: row;
        gap: 0.5rem;
        width: 100%;
      }
      
      .product-card-mobile button {
        font-size: 0.8rem;
        padding: 6px 10px;
        flex: 1;
      }
      
      /* מובייל בלבד */
      @media (max-width: 768px) {
        .products-grid-mobile {
          grid-template-columns: 1fr 1fr !important;
          gap: 0.75rem !important;
          padding: 0 0.5rem;
        }
        
        .product-card-mobile {
          min-height: 320px !important;
          padding: 0.75rem !important;
        }
        
        .product-card-mobile img {
          height: 100px !important;
        }
        
        .product-card-mobile h3 {
          font-size: 0.9rem !important;
          margin: 0.5rem 0 !important;
        }
        
        .product-card-mobile p {
          font-size: 0.8rem !important;
          margin: 0.25rem 0 !important;
        }
        
        .product-card-mobile .button-group {
          flex-direction: column !important;
          gap: 0.3rem !important;
        }
        
        .product-card-mobile button {
          font-size: 0.75rem !important;
          padding: 4px 8px !important;
          width: 100% !important;
        }
      }
    `,document.head.appendChild(X),()=>document.head.removeChild(X)},[]);const j=async()=>{const me=(await bi(Tr(nn,"orders"))).docs.map(ie=>ie.data()).filter(ie=>ie.status==="open"),G=new Set;me.forEach(ie=>{var de;(de=ie.items)==null||de.forEach(Ee=>{G.add(Ee.id)})});const ee=(await bi(Tr(nn,"items"))).docs.filter(ie=>ie.data().isDeleted!==!0).map(ie=>{const de=ie.data();return{id:ie.id,...de,inUse:G.has(ie.id)}});a(ee)},$=async()=>{const X=await bi(Tr(nn,"deletedItems"));s(X.docs.map(me=>({id:me.id,...me.data()})))};ve.useEffect(()=>{j(),$()},[]),ve.useEffect(()=>{const X=G=>{D&&L.current&&!L.current.contains(G.target)&&B(!1)},me=G=>{G.key==="Escape"&&B(!1)};return document.addEventListener("mousedown",X),document.addEventListener("keydown",me),()=>{document.removeEventListener("mousedown",X),document.removeEventListener("keydown",me)}},[D]);const ne=i.filter(X=>X.name.toLowerCase().includes(u.toLowerCase())),U=o.filter(X=>X.name.toLowerCase().includes(h.toLowerCase())),z=async X=>{if(window.confirm("האם את/ה בטוח/ה שברצונך למחוק את המוצר?"))try{await wj(X,R),_n.success("המוצר הוסר מהרשימה."),j(),$()}catch{_n.error("שגיאה במחיקת המוצר")}},te=async X=>{if(window.confirm("האם ברצונך להשיב את המוצר למלאי?"))try{await bj(X,R),_n.success("המוצר הושב למלאי בהצלחה."),j(),$()}catch{_n.error("שגיאה בהחזרת המוצר")}},ue=async X=>{X.preventDefault();try{const me=Wu(Tr(nn,"items"),Ju("name","==",n.trim())),G=await bi(me);let Q=_;if(g){const ee=await Oa(g,{maxSizeMB:.2,maxWidthOrHeight:1024,useWebWorker:!0}),ie=Tk.ref(`items/${Date.now()}-${g.name}`);await ie.put(ee),Q=await ie.getDownloadURL()}if(V)await cl(Jr(nn,"items",V.id),{name:n,quantity:parseInt(t),imageUrl:Q,publicComment:q,internalComment:E,updatedBy:R,updatedAt:Ya()}),_n.success("המוצר עודכן בהצלחה");else if(G.empty)await Jb({name:n,quantity:parseInt(t),imageUrl:Q,publicComment:q,internalComment:E,createdBy:R,updatedBy:R,createdAt:Ya(),updatedAt:Ya()}),_n.success(`המוצר "${n}" נוסף בהצלחה`);else{const ee=G.docs[0].data();hU.confirmAlert({title:"המוצר כבר קיים",message:`המוצר "${n}" כבר קיים בכמות ${ee.quantity}.
האם להוסיף ${t}?`,buttons:[{label:"כן",onClick:async()=>{await Jb({name:n,quantity:parseInt(t),imageUrl:Q,publicComment:q,internalComment:E,createdBy:R,updatedBy:R,createdAt:Ya(),updatedAt:Ya()}),_n.success("הכמות עודכנה בהצלחה"),j(),$()}},{label:"לא",onClick:()=>_n.info("בוטל")}]});return}e(""),r(""),m(null),b(""),P(""),C(""),S(!1),Y(null),j(),$()}catch{_n.error("הוספת המוצר נכשלה")}};return O.jsxs("div",{className:"page-container",style:{padding:"1rem",direction:"rtl"},children:[O.jsxs("div",{style:{width:"100%"},children:[O.jsx("h2",{children:"ניהול מוצרים"}),O.jsxs("div",{style:{display:"flex",justifyContent:"flex-start",gap:"1rem",marginBottom:"1rem",flexWrap:"wrap"},children:[O.jsxs("button",{onClick:()=>{Y(null),e(""),r(""),b(""),m(null),S(!0),P(""),C("")},className:"btn-primary",style:{backgroundColor:"#1976d2",color:"white",border:"none",borderRadius:"6px",padding:"8px 12px",fontSize:"14px",display:"flex",alignItems:"center",gap:"6px",cursor:"pointer"},children:[O.jsx(LU,{size:14})," הוספת מוצר"]}),O.jsxs("button",{onClick:()=>B(!0),className:"btn-secondary",style:{backgroundColor:"#6c757d",color:"white",border:"none",borderRadius:"6px",padding:"8px 12px",fontSize:"14px",display:"flex",alignItems:"center",gap:"6px",cursor:"pointer"},children:[O.jsx(l4,{size:14})," מוצרים שנמחקו"]})]}),O.jsx("input",{type:"text",dir:"rtl",placeholder:"חיפוש מוצר...",value:u,onChange:X=>f(X.target.value),className:"search-input",style:{padding:"10px",borderRadius:"6px",fontSize:"1rem",border:"1px solid #ccc",width:"100%",marginBottom:"1rem",boxSizing:"border-box"}}),O.jsx("div",{className:"products-grid-mobile",children:ne.length===0?O.jsx("p",{style:{gridColumn:"1 / -1",textAlign:"center"},children:"לא נמצא מוצרים במלאי."}):ne.map(X=>O.jsxs("div",{className:"product-card product-card-mobile",style:{width:"100%",border:"1px solid #e0e0e0",borderRadius:"10px",backgroundColor:"#fff",padding:"1rem",boxShadow:"0 2px 6px rgba(0,0,0,0.06)",display:"flex",flexDirection:"column",justifyContent:"space-between",alignItems:"center",textAlign:"center",transition:"transform 0.2s",boxSizing:"border-box"},children:[O.jsx("img",{src:X.imageUrl||"/no-image-available.png",alt:X.name,style:{width:"100%",height:"140px",objectFit:"cover",borderRadius:"6px",marginBottom:"0.5rem"}}),O.jsx("h3",{style:{margin:"0.5rem 0",fontSize:"1rem"},children:X.name}),O.jsxs("p",{style:{margin:"0.25rem 0"},children:["כמות: ",X.quantity]}),X.internalComment&&O.jsxs("p",{style:{fontSize:"0.8rem",color:"#999",marginTop:"0.25rem",margin:"0.25rem 0"},children:["📌 ",X.internalComment]}),O.jsxs("p",{style:{fontSize:"0.85rem",color:"#555",margin:"0.25rem 0"},children:["מזהה מוצר: ",X.ItemId]}),X.inUse&&O.jsx("p",{style:{color:"#d97706",fontWeight:"bold",fontSize:"0.85rem",margin:"0.25rem 0"},children:"🕐 מוצר זה נמצא בהזמנה פעילה"}),O.jsxs("div",{className:"button-group",style:{display:"flex",gap:"0.5rem",marginTop:"auto",width:"100%"},children:[O.jsxs("button",{onClick:()=>{Y(X),e(X.name),r(X.quantity.toString()),b(X.imageUrl||""),m(null),S(!0),P(X.publicComment||""),C(X.internalComment||"")},style:{backgroundColor:"#6c757d",color:"white",border:"none",padding:"6px 10px",borderRadius:"5px",fontSize:"14px",display:"flex",alignItems:"center",justifyContent:"center",gap:"6px",cursor:"pointer",flex:"1"},children:[O.jsx(PU,{size:14})," עריכה"]}),O.jsxs("button",{onClick:()=>z(X.id),style:{backgroundColor:"#d32f2f",color:"white",border:"none",padding:"6px 10px",borderRadius:"5px",fontSize:"14px",display:"flex",alignItems:"center",justifyContent:"center",gap:"6px",cursor:"pointer",flex:"1"},children:[O.jsx(l4,{size:14})," מחיקה"]})]})]},X.id))})]}),D&&O.jsx("div",{className:"modal-overlay",style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3,padding:"1rem"},children:O.jsxs("div",{className:"modal-content",ref:L,style:{position:"relative",backgroundColor:"white",borderRadius:"8px",width:"90%",maxWidth:"800px",maxHeight:"80%",overflowY:"auto",padding:"2rem",direction:"rtl"},children:[O.jsx("h2",{children:"מוצרים שנמחקו"}),O.jsx("button",{onClick:()=>B(!1),style:{position:"absolute",top:"1rem",right:"1rem",background:"none",border:"none",fontSize:"1.5rem",cursor:"pointer"},children:"×"}),O.jsx("input",{type:"text",dir:"rtl",placeholder:"חיפוש מוצרים שנמחקו...",value:h,onChange:X=>p(X.target.value),className:"search-input",style:{padding:"10px",borderRadius:"6px",fontSize:"1rem",border:"1px solid #ccc",width:"100%",margin:"1rem 0",boxSizing:"border-box"}}),O.jsx("div",{className:"products-grid-mobile",children:U.length===0?O.jsx("p",{style:{gridColumn:"1 / -1",textAlign:"center"},children:"אין פריטים שנמחקו."}):U.map(X=>O.jsxs("div",{className:"product-card-mobile",style:{width:"100%",border:"1px solid #e0e0e0",borderRadius:"10px",backgroundColor:"#fff",padding:"1rem",boxShadow:"0 2px 6px rgba(0,0,0,0.06)",display:"flex",flexDirection:"column",justifyContent:"space-between",alignItems:"center",textAlign:"center",boxSizing:"border-box"},children:[O.jsx("img",{src:X.imageUrl||"/no-image-available.png",alt:X.name,style:{width:"100%",height:"120px",objectFit:"cover",borderRadius:"6px",marginBottom:"0.5rem"}}),O.jsx("h3",{style:{margin:"0.5rem 0"},children:X.name}),O.jsxs("p",{style:{margin:"0.25rem 0"},children:["כמות: ",X.quantity]}),O.jsxs("button",{onClick:()=>te(X.id),style:{backgroundColor:"#28a745",color:"white",border:"none",padding:"6px 10px",borderRadius:"5px",fontSize:"14px",display:"flex",alignItems:"center",gap:"6px",cursor:"pointer",marginTop:"auto"},children:[O.jsx(kU,{size:14})," השבה"]})]},X.id))})]})}),T&&O.jsx(bU,{editingItem:V,name:n,quantity:t,imageUrl:_,imageFile:g,publicComment:q,internalComment:E,onNameChange:X=>e(X.target.value.trimStart()),onQuantityChange:X=>r(X.target.value.trimStart()),onImageUrlChange:X=>b(X.target.value),onImageFileChange:X=>m(X.target.files[0]),onPublicCommentChange:X=>P(X.target.value),onInternalCommentChange:X=>C(X.target.value),onCancel:()=>S(!1),onSubmit:ue}),O.jsx(sU,{position:"bottom-right",autoClose:3e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0,theme:"light"})]})},BU=()=>{const[n,e]=ve.useState([]),[t,r]=ve.useState(""),[i,a]=ve.useState(!0);if(ve.useEffect(()=>{const s=Tr(nn,"items"),u=LE(s,f=>{const h=f.docs.map(p=>p.data()).filter(p=>p.isDeleted!==!0);e(h),a(!1)});return()=>u()},[]),i)return O.jsxs("div",{style:{padding:"2rem",textAlign:"center"},children:[O.jsx("h2",{children:"טוען קטלוג"}),O.jsx("div",{className:"spinner"})]});const o=n.filter(s=>s.name.toLowerCase().includes(t.toLowerCase()));return O.jsxs("div",{style:{padding:"2rem",direction:"rtl",textAlign:"right",paddingLeft:"1rem",paddingRight:"1rem"},children:[O.jsx("h2",{children:"קטלוג"}),O.jsx("input",{type:"text",placeholder:"חיפוש פריט",value:t,onChange:s=>r(s.target.value),dir:"rtl",style:{padding:"10px",width:"100%",marginBottom:"1.5rem",borderRadius:"6px",border:"1px solid #ccc",fontSize:"1rem",boxSizing:"border-box"}}),O.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"1rem",marginTop:"1rem"},children:o.length===0?O.jsxs("div",{style:{textAlign:"center",gridColumn:"1 / -1",marginTop:"2rem"},children:[O.jsx("h3",{children:"לא נמצאו פריטים."}),O.jsx("p",{children:"אנה נסה לחפש שוב."})]}):o.map(s=>O.jsxs("div",{style:{border:"1px solid #ccc",padding:"0.8rem",borderRadius:"8px",boxShadow:"2px 2px 6px rgba(0,0,0,0.1)",backgroundColor:"white",display:"flex",flexDirection:"column",justifyContent:"space-between",transition:"transform 0.2s ease-in-out",opacity:1,filter:"none",minHeight:"200px",maxWidth:"100%"},children:[O.jsx("img",{src:s.imageUrl||"/no-image-available.png",alt:s.name,style:{width:"100%",height:"120px",objectFit:"cover",display:"block",borderRadius:"4px",marginBottom:"0.5rem"}}),O.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",justifyContent:"space-between"},children:[O.jsx("h3",{style:{marginBottom:"0.5rem",fontSize:"0.9rem",lineHeight:"1.2",textAlign:"center"},children:s.name}),s.publicComment&&O.jsxs("p",{style:{fontSize:"0.75rem",color:"#444",textAlign:"center",margin:"0.3rem 0 0 0"},children:["📝 ",s.publicComment]})]})]},s.ItemId))}),O.jsx("style",{jsx:!0,children:`
        @media (max-width: 768px) {
          div[style*="gridTemplateColumns"] {
            grid-template-columns: repeat(2, 1fr) !important;
            gap: 0.8rem !important;
          }
        }
        
        @media (max-width: 480px) {
          div[style*="gridTemplateColumns"] {
            grid-template-columns: repeat(2, 1fr) !important;
            gap: 0.6rem !important;
          }
        }
      `})]})},FU=()=>{const{id:n}=CT(),[e,t]=ve.useState(null),[r,i]=ve.useState(!0);return ve.useEffect(()=>{(async()=>{const o=Wu(Tr(nn,"items"),Ju("ItemId","==",parseInt(n))),s=await bi(o);if(s.empty)t(null);else{const u=s.docs[0];t({id:u.id,...u.data()})}i(!1)})()},[n]),r?O.jsx("div",{style:{padding:"2rem"},children:"Loading item details..."}):e?O.jsxs("div",{style:{padding:"2rem"},children:[O.jsx("h2",{children:e.name}),O.jsxs("p",{children:[O.jsx("strong",{children:"Quantity:"})," ",e.quantity]}),O.jsx("img",{src:e.imageUrl||"/no-image-available.png",alt:e.name,style:{width:"100%",height:"200px",objectFit:"cover",borderRadius:"8px",marginBottom:"1rem"}}),O.jsxs("p",{children:[O.jsx("strong",{children:"Item ID:"})," ",e.ItemId]}),e.publicComment&&O.jsxs("p",{children:[O.jsx("strong",{children:"הערה:"})," ",e.publicComment]}),e.internalComment&&O.jsxs("p",{style:{color:"#777"},children:[O.jsx("strong",{children:"הערה פנימית:"})," ",e.internalComment]}),O.jsxs("p",{style:{fontSize:"0.85rem",color:"#666"},children:["נוצר על ידי: ",e.createdBy||"לא ידוע"]}),O.jsxs("p",{style:{fontSize:"0.85rem",color:"#666"},children:["עודכן לאחרונה על ידי: ",e.updatedBy||"לא ידוע"]}),e.createdAt&&O.jsxs("p",{style:{fontSize:"0.85rem",color:"#666"},children:["נוצר בתאריך: ",new Date(e.createdAt.seconds*1e3).toLocaleString("he-IL")]}),e.updatedAt&&O.jsxs("p",{style:{fontSize:"0.85rem",color:"#666"},children:["עודכן בתאריך: ",new Date(e.updatedAt.seconds*1e3).toLocaleString("he-IL")]})]}):O.jsx("div",{style:{padding:"2rem"},children:"Item not found."})};/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jU=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),UU=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()),u4=n=>{const e=UU(n);return e.charAt(0).toUpperCase()+e.slice(1)},qS=(...n)=>n.filter((e,t,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===t).join(" ").trim(),VU=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var zU={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qU=ve.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:i="",children:a,iconNode:o,...s},u)=>ve.createElement("svg",{ref:u,...zU,width:e,height:e,stroke:n,strokeWidth:r?Number(t)*24/Number(e):t,className:qS("lucide",i),...!a&&!VU(s)&&{"aria-hidden":"true"},...s},[...o.map(([f,h])=>ve.createElement(f,h)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qr=(n,e)=>{const t=ve.forwardRef(({className:r,...i},a)=>ve.createElement(qU,{ref:a,iconNode:e,className:qS(`lucide-${jU(u4(n))}`,`lucide-${n}`,r),...i}));return t.displayName=u4(n),t};/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HU=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],GU=qr("arrow-right",HU);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WU=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],a0=qr("calendar",WU);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $U=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],XU=qr("chart-column",$U);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YU=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],KU=qr("chevron-left",YU);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QU=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],ZU=qr("chevron-right",QU);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JU=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Ny=qr("circle-check-big",JU);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eV=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],tV=qr("circle-x",eV);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nV=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"m9 14 2 2 4-4",key:"df797q"}]],rV=qr("clipboard-check",nV);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iV=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],aV=qr("clock",iV);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oV=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],sV=qr("download",oV);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lV=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],uV=qr("eye",lV);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cV=[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]],fV=qr("message-circle",cV);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hV=[["path",{d:"M5 12h14",key:"1ays0h"}]],dV=qr("minus",hV);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pV=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],Kf=qr("package",pV);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gV=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],Ug=qr("phone",gV);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mV=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],vV=qr("plus",mV);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yV=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],HS=qr("save",yV);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xV=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],GS=qr("search",xV);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _V=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],WS=qr("square-pen",_V);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wV=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],bV=qr("trash-2",wV);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AV=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],EV=qr("triangle-alert",AV);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SV=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],CV=qr("user",SV);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TV=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],$S=qr("x",TV),IV=["ינואר","פברואר","מרץ","אפריל","מאי","יוני","יולי","אוגוסט","ספטמבר","אוקטובר","נובמבר","דצמבר"],RV=["א","ב","ג","ד","ה","ו","ש"],NV=n=>new Date(n.getFullYear(),n.getMonth()+1,0).getDate(),OV=n=>{const e=new Date(n.getFullYear(),n.getMonth(),1).getDay();return e===0?6:e-1},DV=({currentDate:n,events:e=[],setCurrentDate:t,setSelectedEvents:r,setSelectedDate:i,setShowReport:a})=>{const o=g=>{if(!Array.isArray(e))return[];const m=new Date(n.getFullYear(),n.getMonth(),g);return e.filter(_=>{if(!_.date)return!1;const b=new Date(_.date);return b.getDate()===m.getDate()&&b.getMonth()===m.getMonth()&&b.getFullYear()===m.getFullYear()})},s=g=>{const m=o(g),_=new Map;return m.forEach(b=>{_.has(b.orderId)||_.set(b.orderId,{...b,allEventsForOrder:m.filter(T=>T.orderId===b.orderId)})}),Array.from(_.values())},u=g=>{const m=o(g);m.length>0&&m.every(b=>b.type==="השאלה פעילה")||m.length>0&&(r(m),i(new Date(n.getFullYear(),n.getMonth(),g)),a(!0))},f=NV(n),h=OV(n),p=[];for(let g=0;g<h;g++)p.push(O.jsx("div",{className:"day-cell empty"},`empty-${g}`));for(let g=1;g<=f;g++){const m=o(g),_=s(g),b=m.filter(V=>V.type==="השאלה"),T=m.filter(V=>V.type==="החזרה");m.filter(V=>V.type==="השאלה פעילה");const S=m.length>0,D=_.length;let B="day-cell";S&&(B+=" has-events"),b.length>0&&(B+=" pickup-day"),T.length>0&&(B+=" return-day"),p.push(O.jsxs("div",{className:B,onClick:()=>u(g),style:{cursor:m.some(V=>V.type!=="השאלה פעילה")?"pointer":"default"},children:[O.jsx("span",{className:"day-number",children:g}),O.jsxs("div",{className:"event-icons",children:[b.length>0&&O.jsxs("div",{className:"event-tag pickup-tag",title:"איסוף מוצרים",children:["📦 ",b.length>1&&b.length]}),T.length>0&&O.jsxs("div",{className:"event-tag return-tag",title:"החזרת מוצרים",children:["🔄 ",T.length>1&&T.length]})]}),D>0&&O.jsx("div",{className:"event-count",title:`${D} הזמנות`,children:D})]},g))}return O.jsxs("div",{className:"calendar-container",children:[O.jsxs("div",{className:"calendar-header",children:[O.jsx("button",{onClick:()=>t(new Date(n.getFullYear(),n.getMonth()-1,1)),children:O.jsx(ZU,{size:20})}),O.jsxs("h2",{className:"calendar-title",children:[O.jsx(a0,{size:24})," ",IV[n.getMonth()]," ",n.getFullYear()]}),O.jsx("button",{onClick:()=>t(new Date(n.getFullYear(),n.getMonth()+1,1)),children:O.jsx(KU,{size:20})})]}),O.jsx("div",{className:"day-names",children:RV.map(g=>O.jsx("div",{className:"day-name",children:g},g))}),O.jsx("div",{className:"calendar-grid",children:p}),O.jsxs("div",{className:"calendar-footer",children:[O.jsxs("div",{className:"calendar-legend",children:[O.jsx("span",{className:"legend-item",children:"📦 איסוף מוצרים"}),O.jsx("span",{className:"legend-item",children:"🔄 החזרת מוצרים"})]}),O.jsxs("div",{className:"calendar-stats",children:['לחץ על יום עם אירועים כדי לראות פרטים • סה"כ אירועים: ',Array.isArray(e)?e.length:0]}),(!Array.isArray(e)||e.length===0)&&O.jsx("div",{className:"warning",children:"אין אירועים נטענים - בדוק את החיבור למסד הנתונים"})]})]})},PV=({show:n,selectedDate:e,selectedEvents:t,allItems:r,setShowReport:i,setShowItemsModal:a,setEditItemModal:o,fetchItemsAndOrders:s,onStartReturnInspection:u})=>{if(ve.useEffect(()=>(n?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[n]),!n)return null;const f=async _=>{try{return await Y5(Jr(nn,"orders",_)),!0}catch(b){throw console.error("Error deleting order:",b),b}},p=(_=>{const b=new Map;return _.forEach(T=>{b.has(T.orderId)||b.set(T.orderId,{orderId:T.orderId,clientName:T.clientName,phone:T.phone,items:T.items,pickupDate:T.pickupDate,returnDate:T.returnDate,events:[]}),b.get(T.orderId).events.push(T)}),Array.from(b.values())})(t),g=async _=>{if(_&&window.confirm("האם אתה בטוח שברצונך למחוק את ההזמנה?"))try{await f(_),await s(),i(!1),alert("ההזמנה נמחקה בהצלחה.")}catch(b){console.error(b),alert("מחיקה נכשלה. נסה שוב.")}},m=_=>{_.target===_.currentTarget&&i(!1)};return O.jsxs(O.Fragment,{children:[O.jsx("style",{jsx:!0,global:!0,children:`
        .modal-overlay {
          position: fixed !important;
          top: 0 !important;
          left: 0 !important;
          right: 0 !important;
          bottom: 0 !important;
          background-color: rgba(0, 0, 0, 0.5) !important;
          display: flex !important;
          align-items: center !important;
          justify-content: center !important;
          padding: 1rem !important;
          z-index: 99999 !important;
        }
        
        .modal-content {
          background: white !important;
          border-radius: 12px !important;
          box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25) !important;
          width: 100% !important;
          max-width: 32rem !important;
          max-height: 90vh !important;
          overflow: hidden !important;
          position: relative !important;
          z-index: 100000 !important;
        }
        
        @media (min-width: 768px) {
          .modal-content {
            max-width: 42rem !important;
          }
        }
      `}),O.jsx("div",{className:"modal-overlay",onClick:m,children:O.jsxs("div",{className:"modal-content",dir:"rtl",onClick:_=>_.stopPropagation(),children:[O.jsxs("div",{style:{background:"linear-gradient(to right, #2563eb, #1d4ed8)",color:"white",padding:"1.5rem"},children:[O.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[O.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[O.jsx(a0,{size:24}),O.jsxs("h3",{style:{fontSize:"1.25rem",fontWeight:"bold",margin:0},children:["אירועים ליום ",e==null?void 0:e.toLocaleDateString("he-IL")]})]}),O.jsx("button",{onClick:()=>i(!1),style:{background:"none",border:"none",color:"white",fontSize:"1.5rem",cursor:"pointer",padding:"0.25rem"},children:"×"})]}),O.jsxs("div",{style:{marginTop:"0.5rem",color:"#bfdbfe"},children:[p.length," הזמנ",p.length!==1?"ות":"ה"]})]}),O.jsx("div",{style:{padding:"1.5rem",overflowY:"auto",maxHeight:"calc(90vh - 200px)"},children:O.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:p.map((_,b)=>O.jsxs("div",{style:{border:"1px solid #e5e7eb",borderRadius:"8px",background:"white",boxShadow:"0 1px 3px 0 rgba(0, 0, 0, 0.1)"},children:[O.jsxs("div",{style:{padding:"1rem",borderBottom:"1px solid #f3f4f6"},children:[O.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"0.75rem"},children:O.jsxs("div",{style:{flex:1},children:[O.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem"},children:[O.jsx("h4",{style:{fontSize:"1.125rem",fontWeight:"bold",color:"#1f2937",margin:0},children:_.clientName}),O.jsxs("span",{style:{padding:"0.25rem 0.75rem",borderRadius:"9999px",fontSize:"0.75rem",fontWeight:"500",background:"#3b82f6",color:"white"},children:["הזמנה #",b+1]})]}),O.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",fontSize:"0.875rem",color:"#4b5563",marginBottom:"0.5rem"},children:[O.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[O.jsx(Ug,{size:16}),O.jsx("span",{children:_.phone})]}),O.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[O.jsx(a0,{size:16}),O.jsxs("span",{children:[new Date(_.pickupDate).toLocaleDateString("he-IL")," - ",new Date(_.returnDate).toLocaleDateString("he-IL")]})]})]}),O.jsx("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap",marginBottom:"0.75rem"},children:_.events.map((T,S)=>O.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem",padding:"0.25rem 0.5rem",borderRadius:"12px",fontSize:"0.75rem",fontWeight:"500",background:T.type==="השאלה"?"#10b981":T.type==="החזרה"?"#f59e0b":"#3b82f6",color:"white"},children:[O.jsx("span",{children:T.icon}),O.jsx("span",{children:T.description}),T.isMultiDay&&O.jsxs("span",{style:{fontSize:"0.65rem",opacity:.8},children:["(יום ",T.dayNumber,"/",T.totalDays,")"]})]},S))})]})}),_.items&&_.items.length>0&&O.jsxs("div",{style:{marginBottom:"1rem"},children:[O.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem"},children:[O.jsx(Kf,{size:16,style:{color:"#6b7280"}}),O.jsxs("span",{style:{fontSize:"0.875rem",fontWeight:"500",color:"#374151"},children:["פריטים (",_.items.reduce((T,S)=>T+(S.quantity||1),0),")"]})]}),O.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem"},children:[_.items.slice(0,3).map((T,S)=>O.jsxs("div",{style:{background:"#f9fafb",padding:"0.25rem 0.75rem",borderRadius:"9999px",fontSize:"0.75rem",color:"#4b5563",border:"1px solid #e5e7eb"},children:[T.name," ",T.quantity>1?`(×${T.quantity})`:""]},S)),_.items.length>3&&O.jsxs("div",{style:{background:"#eff6ff",padding:"0.25rem 0.75rem",borderRadius:"9999px",fontSize:"0.75rem",color:"#2563eb",border:"1px solid #dbeafe"},children:["+",_.items.length-3," נוספים"]})]})]})]}),O.jsx("div",{style:{padding:"1rem",background:"#f9fafb"},children:O.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"0.75rem",flexWrap:"wrap"},children:[_.events.some(T=>T.icon==="📦")&&O.jsxs("button",{onClick:()=>o({open:!0,eventId:`${_.orderId}-edit`,items:_.items.map(T=>({...T}))}),style:{display:"flex",alignItems:"center",gap:"0.5rem",background:"#2563eb",color:"white",padding:"0.5rem 1rem",borderRadius:"8px",border:"none",cursor:"pointer",fontSize:"0.875rem"},children:[O.jsx(WS,{size:16}),"ערוך הזמנה"]}),O.jsxs("button",{onClick:()=>{const T=t.filter(S=>S.orderId===_.orderId);a(T)},style:{display:"flex",alignItems:"center",gap:"0.5rem",background:"#059669",color:"white",padding:"0.5rem 1rem",borderRadius:"8px",border:"none",cursor:"pointer",fontSize:"0.875rem"},children:[O.jsx(uV,{size:16}),"הצג פרטים"]}),_.events.some(T=>T.icon==="📦")&&O.jsxs("button",{onClick:()=>g(_.orderId),style:{display:"flex",alignItems:"center",gap:"0.5rem",background:"#dc2626",color:"white",padding:"0.5rem 1rem",borderRadius:"8px",border:"none",cursor:"pointer",fontSize:"0.875rem"},children:[O.jsx(bV,{size:16}),"מחק"]}),u&&_.events.some(T=>T.type==="החזרה")&&O.jsxs("button",{onClick:()=>u(_.orderId),style:{display:"flex",alignItems:"center",gap:"0.5rem",background:"#f59e0b",color:"white",padding:"0.5rem 1rem",borderRadius:"8px",border:"none",cursor:"pointer",fontSize:"0.875rem"},children:[O.jsx(rV,{size:16}),"בדיקת החזרה"]})]})})]},_.orderId))})}),O.jsx("div",{style:{background:"#f9fafb",padding:"1rem 1.5rem",borderTop:"1px solid #e5e7eb"},children:O.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[O.jsxs("div",{style:{fontSize:"0.875rem",color:"#4b5563"},children:['סה"כ ',p.reduce((_,b)=>{var T;return _+(((T=b.items)==null?void 0:T.reduce((S,D)=>S+(D.quantity||1),0))||0)},0)," פריטים"]}),O.jsx("button",{onClick:()=>i(!1),style:{background:"#2563eb",color:"white",padding:"0.5rem 1.5rem",borderRadius:"8px",border:"none",cursor:"pointer"},children:"סגור"})]})})]})})]})},LV=({show:n,setShow:e,selectedEvents:t,allItems:r})=>{var o;if(ve.useEffect(()=>(n?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[n]),!n)return null;const i=((o=t==null?void 0:t[0])==null?void 0:o.items)||[],a=s=>{s.target===s.currentTarget&&e(!1)};return O.jsxs(O.Fragment,{children:[O.jsx("style",{jsx:!0,global:!0,children:`
        .items-modal-overlay {
          position: fixed !important;
          top: 0 !important;
          left: 0 !important;
          right: 0 !important;
          bottom: 0 !important;
          background-color: rgba(0, 0, 0, 0.5) !important;
          display: flex !important;
          align-items: center !important;
          justify-content: center !important;
          padding: 1rem !important;
          z-index: 99999 !important;
        }
        
        .items-modal-content {
          background: white !important;
          border-radius: 12px !important;
          box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25) !important;
          width: 100% !important;
          max-width: 28rem !important;
          max-height: 90vh !important;
          overflow: hidden !important;
          position: relative !important;
          z-index: 100000 !important;
        }
      `}),O.jsx("div",{className:"items-modal-overlay",onClick:a,children:O.jsxs("div",{className:"items-modal-content",dir:"rtl",onClick:s=>s.stopPropagation(),children:[O.jsxs("div",{style:{background:"linear-gradient(to right, #059669, #047857)",color:"white",padding:"1.5rem"},children:[O.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[O.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[O.jsx(Kf,{size:24}),O.jsx("h2",{style:{fontSize:"1.25rem",fontWeight:"bold",margin:0},children:"רשימת מוצרים"})]}),O.jsx("button",{onClick:()=>e(!1),style:{background:"none",border:"none",color:"white",fontSize:"1.5rem",cursor:"pointer",padding:"0.25rem"},children:O.jsx($S,{size:20})})]}),O.jsxs("div",{style:{marginTop:"0.5rem",color:"#a7f3d0"},children:[i.length," פריט",i.length!==1?"ים":""," בהזמנה"]})]}),O.jsx("div",{style:{padding:"1.5rem",overflowY:"auto",maxHeight:"calc(90vh - 180px)"},children:i.length>0?O.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:i.map((s,u)=>(r.find(f=>f.name===s.name),O.jsx("div",{style:{border:"1px solid #e5e7eb",borderRadius:"8px",padding:"1rem",background:"#f9fafb"},children:O.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[s.imageUrl&&O.jsx("img",{src:s.imageUrl,alt:s.name,style:{width:"4rem",height:"4rem",objectFit:"cover",borderRadius:"8px",border:"2px solid #e5e7eb"}}),O.jsxs("div",{style:{flex:1},children:[O.jsx("div",{style:{fontSize:"1.125rem",fontWeight:"bold",color:"#1f2937",marginBottom:"0.25rem"},children:s.name}),O.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",fontSize:"0.875rem",color:"#6b7280"},children:[O.jsxs("span",{children:[O.jsx("strong",{children:"כמות:"})," ",s.quantity]}),O.jsxs("span",{children:[O.jsx("strong",{children:"מזהה מוצר:"}),O.jsx("code",{style:{background:"#f3f4f6",padding:"0.125rem 0.375rem",borderRadius:"4px",marginRight:"0.25rem"},children:s.itemId||"לא נמצא"})]})]})]}),O.jsxs("div",{style:{background:"#2563eb",color:"white",padding:"0.5rem 1rem",borderRadius:"20px",fontSize:"0.875rem",fontWeight:"bold"},children:["×",s.quantity]})]})},u)))}):O.jsxs("div",{style:{textAlign:"center",padding:"2rem",color:"#6b7280"},children:[O.jsx(Kf,{size:48,style:{color:"#d1d5db",marginBottom:"1rem"}}),O.jsx("p",{children:"אין פריטים בהזמנה זו"})]})}),O.jsx("div",{style:{background:"#f9fafb",padding:"1rem 1.5rem",borderTop:"1px solid #e5e7eb"},children:O.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[O.jsxs("div",{style:{fontSize:"0.875rem",color:"#4b5563"},children:['סה"כ כמות: ',i.reduce((s,u)=>s+(u.quantity||1),0)]}),O.jsx("button",{onClick:()=>e(!1),style:{background:"#059669",color:"white",padding:"0.5rem 1.5rem",borderRadius:"8px",border:"none",cursor:"pointer",fontWeight:"500"},children:"סגור"})]})})]})})]})},kV=({show:n,data:e,setData:t,allItems:r,setShowReport:i,fetchItemsAndOrders:a,allEvents:o})=>{const[s,u]=ve.useState({items:[]}),[f,h]=ve.useState(!1),[p,g]=ve.useState(""),[m,_]=ve.useState({pickupDate:null,returnDate:null});if(ve.useEffect(()=>(n?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[n]),ve.useEffect(()=>{if(n&&e.eventId&&o.length>0){console.log("🚀 Initializing edit modal");const P=e.eventId.split("-")[0],E=o.filter(C=>C.orderId===P);if(E.length>0){const C=E[0];_({pickupDate:new Date(C.pickupDate),returnDate:new Date(C.returnDate)}),console.log("📅 Order dates:",{pickup:C.pickupDate,return:C.returnDate})}u({items:[...e.items||[]]})}},[n,e,o]),!n)return null;const b=P=>{var ne,U;const E=r.find(z=>z.name===P);if(!E)return console.warn(`❌ Stock not found for ${P}`),0;const C=E.quantity||0,M=(ne=e.eventId)==null?void 0:ne.split("-")[0];if(!m.pickupDate||!m.returnDate)return console.warn("⚠️ Missing pickup/return dates for current order."),C;console.log(`🔎 Checking "${P}" availability from ${m.pickupDate.toDateString()} to ${m.returnDate.toDateString()}`),console.log(`📦 Total stock from database: ${C}`);let R=0;const L=new Set;o.forEach(z=>{if(z.orderId===M||L.has(`${z.orderId}-${P}`))return;const te=new Date(z.pickupDate),ue=new Date(z.returnDate);if(te<=m.returnDate&&ue>=m.pickupDate&&z.items){const me=z.items.find(G=>G.name===P);me&&(console.log(`➡️ Overlapping Order ID: ${z.orderId}`),console.log(`    Dates: ${te.toDateString()} - ${ue.toDateString()}`),console.log(`    Reserved: ${me.quantity}`),R+=me.quantity||0,L.add(`${z.orderId}-${P}`))}});const j=((U=s.items.find(z=>z.name===P))==null?void 0:U.quantity)||0,$=C-R-j;return console.log(`✅ Available: ${$} = ${C} - ${R} - ${j} (already in order)`),Math.max(0,$)},T=P=>{console.log("➕ Trying to add item:",P.name);const E=b(P.name);if(E<=0){alert(`❌ לא ניתן להוסיף מ-${P.name}. זמין: ${E}`);return}const C=s.items.findIndex(M=>M.name===P.name);if(C>=0){const M=[...s.items];M[C]={...M[C],quantity:M[C].quantity+1},u({...s,items:M})}else{const M={name:P.name,quantity:1,ItemId:P.ItemId||P.itemId||P.id,itemId:P.ItemId||P.itemId||P.id,id:P.id,imageUrl:P.imageUrl||""};u({...s,items:[...s.items,M]})}},S=(P,E)=>{var L;if(console.log(`🔄 Updating ${P} to quantity: ${E}`),E<=0){u({...s,items:s.items.filter(j=>j.name!==P)});return}const C=((L=s.items.find(j=>j.name===P))==null?void 0:L.quantity)||0,M=b(P)+C;if(E>M){alert(`❌ לא ניתן להזמין ${E} מ-${P}. זמין: ${M}`);return}const R=s.items.map(j=>j.name===P?{...j,quantity:E}:j);u({...s,items:R})},D=P=>{console.log("🗑️ Removing item:",P),u({...s,items:s.items.filter(E=>E.name!==P)})},B=async()=>{var P;try{h(!0);const E=(P=e.eventId)==null?void 0:P.split("-")[0];if(!E)throw new Error("שגיאה: לא נמצא מזהה הזמנה");console.log("💾 Saving items:",s.items);const C=s.items.map(M=>({...M,ItemId:M.ItemId||M.itemId||M.id,itemId:M.ItemId||M.itemId||M.id}));await cl(Jr(nn,"orders",E),{items:C}),await a(),t({open:!1,eventId:null,items:[]}),i(!1),alert("🎉 השינויים נשמרו בהצלחה!")}catch(E){console.error("❌ שגיאה בשמירה:",E),alert(E.message||"שמירה נכשלה. נסה שוב.")}finally{h(!1)}},V=()=>{t({open:!1,eventId:null,items:[]})},Y=r.filter(P=>P.name.toLowerCase().includes(p.toLowerCase())),q=P=>{P.target===P.currentTarget&&V()};return O.jsxs(O.Fragment,{children:[O.jsx("style",{jsx:!0,global:!0,children:`
        .edit-modal-overlay {
          position: fixed !important;
          top: 0 !important;
          left: 0 !important;
          right: 0 !important;
          bottom: 0 !important;
          background-color: rgba(0, 0, 0, 0.5) !important;
          display: flex !important;
          align-items: flex-start !important;
          justify-content: center !important;
          padding: 0.5rem !important;
          z-index: 99999 !important;
          overflow-x: hidden !important;
          padding-top: 1rem !important;
        }
        
        .edit-modal-content {
          background: white !important;
          border-radius: 12px !important;
          box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25) !important;
          width: 100% !important;
          max-width: 56rem !important;
          max-height: 96vh !important;
          overflow: hidden !important;
          position: relative !important;
          z-index: 100000 !important;
          display: flex !important;
          flex-direction: column !important;
        }

        @media (max-width: 768px) {
          .edit-modal-overlay {
            padding: 0.25rem !important;
            padding-top: 0.5rem !important;
          }
          
          .edit-modal-content {
            max-height: 98vh !important;
            border-radius: 8px !important;
          }
          
          .modal-footer-mobile {
            flex-direction: column !important;
            gap: 0.5rem !important;
          }
          
          .modal-footer-mobile button {
            width: 100% !important;
          }
        }

        @keyframes spin {
          0% { transform: rotate(0deg); }
          100% { transform: rotate(360deg); }
        }
      `}),O.jsx("div",{className:"edit-modal-overlay",onClick:q,children:O.jsxs("div",{className:"edit-modal-content",dir:"rtl",onClick:P=>P.stopPropagation(),children:[O.jsxs("div",{style:{background:"linear-gradient(to right, #2563eb, #1d4ed8)",color:"white",padding:"1rem",flexShrink:0},children:[O.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[O.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[O.jsx(WS,{size:24}),O.jsx("h3",{style:{fontSize:"1.25rem",fontWeight:"bold",margin:0},children:"עריכת הזמנה"})]}),O.jsx("button",{onClick:V,style:{background:"none",border:"none",color:"white",fontSize:"1.5rem",cursor:"pointer",padding:"0.25rem"},children:"×"})]}),m.pickupDate&&m.returnDate&&O.jsxs("div",{style:{marginTop:"0.5rem",fontSize:"0.875rem",color:"#bfdbfe"},children:["📅 תאריכי ההזמנה: ",m.pickupDate.toLocaleDateString("he-IL")," - ",m.returnDate.toLocaleDateString("he-IL")]})]}),O.jsxs("div",{style:{padding:"1rem",overflowY:"auto",flex:1},children:[O.jsxs("div",{style:{marginBottom:"1.5rem"},children:[O.jsxs("h4",{style:{fontSize:"1.125rem",fontWeight:"600",marginBottom:"1rem",color:"#1f2937"},children:["פריטים נוכחיים בהזמנה (",s.items.length,")"]}),s.items.length>0?O.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:s.items.map((P,E)=>{const C=r.find(L=>L.name===P.name),R=b(P.name)+P.quantity;return O.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",background:"#f9fafb",padding:"0.75rem",borderRadius:"8px",border:"1px solid #e5e7eb"},children:[O.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",flex:1,minWidth:0},children:[(C==null?void 0:C.imageUrl)&&O.jsx("img",{src:C.imageUrl,alt:P.name,style:{width:"2.5rem",height:"2.5rem",objectFit:"cover",borderRadius:"6px",flexShrink:0}}),O.jsxs("div",{style:{minWidth:0,flex:1},children:[O.jsx("div",{style:{fontWeight:"500",color:"#1f2937",fontSize:"0.9rem"},children:P.name}),O.jsxs("div",{style:{fontSize:"0.75rem",color:"#6b7280"},children:["מזהה: ",(C==null?void 0:C.ItemId)||(C==null?void 0:C.itemId)||"לא נמצא"]}),O.jsxs("div",{style:{fontSize:"0.7rem",color:"#059669",fontWeight:"500"},children:["מקסימום: ",R]})]})]}),O.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.4rem",flexShrink:0},children:[O.jsx("button",{onClick:()=>S(P.name,P.quantity-1),style:{background:"#ef4444",color:"white",width:"1.8rem",height:"1.8rem",borderRadius:"50%",border:"none",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},disabled:f,children:O.jsx(dV,{size:12})}),O.jsx("span",{style:{width:"1.5rem",textAlign:"center",fontWeight:"500",fontSize:"0.9rem"},children:P.quantity}),O.jsx("button",{onClick:()=>S(P.name,P.quantity+1),style:{background:P.quantity>=R?"#9ca3af":"#10b981",color:"white",width:"1.8rem",height:"1.8rem",borderRadius:"50%",border:"none",cursor:P.quantity>=R?"not-allowed":"pointer",display:"flex",alignItems:"center",justifyContent:"center"},disabled:f||P.quantity>=R,children:O.jsx(vV,{size:12})}),O.jsx("button",{onClick:()=>D(P.name),style:{background:"#ef4444",color:"white",padding:"0.2rem 0.5rem",borderRadius:"6px",border:"none",cursor:"pointer",marginRight:"0.3rem",fontSize:"0.75rem"},disabled:f,children:"הסר"})]})]},E)})}):O.jsx("div",{style:{textAlign:"center",padding:"1rem",color:"#6b7280"},children:"אין פריטים בהזמנה"})]}),O.jsxs("div",{children:[O.jsx("h4",{style:{fontSize:"1.125rem",fontWeight:"600",marginBottom:"1rem",color:"#1f2937"},children:"הוסף פריטים מהמלאי"}),O.jsx("div",{style:{marginBottom:"1rem"},children:O.jsxs("div",{style:{position:"relative"},children:[O.jsx(GS,{size:18,style:{position:"absolute",right:"0.75rem",top:"50%",transform:"translateY(-50%)",color:"#6b7280"}}),O.jsx("input",{type:"text",placeholder:"חפש פריט...",value:p,onChange:P=>g(P.target.value),style:{width:"100%",padding:"0.75rem 2.8rem 0.75rem 0.75rem",border:"1px solid #d1d5db",borderRadius:"8px",fontSize:"16px",boxSizing:"border-box"},disabled:f})]})}),O.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(160px, 1fr))",gap:"0.75rem",maxHeight:"10rem",overflowY:"auto",overflowX:"hidden"},children:Y.map((P,E)=>{var j;const C=s.items.some($=>$.name===P.name),M=C?(j=s.items.find($=>$.name===P.name))==null?void 0:j.quantity:0,R=b(P.name),L=M<R+M;return O.jsx("div",{onClick:()=>!f&&L&&T(P),style:{padding:"0.6rem",borderRadius:"8px",border:C?"2px solid #3b82f6":"1px solid #e5e7eb",background:C?"#eff6ff":"white",cursor:f||!L?"not-allowed":"pointer",transition:"all 0.2s",opacity:f||!L?.6:1},children:O.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[P.imageUrl&&O.jsx("img",{src:P.imageUrl,alt:P.name,style:{width:"2rem",height:"2rem",objectFit:"cover",borderRadius:"6px",flexShrink:0}}),O.jsxs("div",{style:{flex:1,minWidth:0},children:[O.jsx("div",{style:{fontWeight:"500",fontSize:"0.8rem",color:"#1f2937",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:P.name}),O.jsxs("div",{style:{fontSize:"0.7rem",color:"#6b7280"},children:["מזהה: ",P.itemId||P.ItemId]}),O.jsxs("div",{style:{fontSize:"0.65rem",color:R>0?"#059669":"#dc2626",fontWeight:"500"},children:["זמין: ",R]}),C&&O.jsxs("div",{style:{fontSize:"0.65rem",color:"#2563eb",fontWeight:"500"},children:["בהזמנה: ",M]})]})]})},E)})})]})]}),O.jsx("div",{style:{background:"#f9fafb",padding:"1rem",borderTop:"1px solid #e5e7eb",flexShrink:0},children:O.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},className:"modal-footer-mobile",children:[O.jsxs("div",{style:{fontSize:"0.875rem",color:"#4b5563"},children:['סה"כ פריטים: ',s.items.reduce((P,E)=>P+E.quantity,0)]}),O.jsxs("div",{style:{display:"flex",gap:"0.75rem"},className:"modal-footer-mobile",children:[O.jsx("button",{onClick:V,disabled:f,style:{background:"#6b7280",color:"white",padding:"0.5rem 1.5rem",borderRadius:"8px",border:"none",cursor:f?"not-allowed":"pointer",fontSize:"0.875rem",opacity:f?.6:1},children:"ביטול"}),O.jsx("button",{onClick:B,disabled:f||s.items.length===0,style:{background:s.items.length===0?"#9ca3af":"#2563eb",color:"white",padding:"0.5rem 1.5rem",borderRadius:"8px",border:"none",cursor:s.items.length===0||f?"not-allowed":"pointer",fontSize:"0.875rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:f?O.jsxs(O.Fragment,{children:[O.jsx("div",{style:{width:"1rem",height:"1rem",border:"2px solid #ffffff",borderTop:"2px solid transparent",borderRadius:"50%",animation:"spin 1s linear infinite"}}),"שומר..."]}):O.jsxs(O.Fragment,{children:[O.jsx(HS,{size:16}),"שמור שינויים"]})})]})]})})]})})]})},MV=({show:n,order:e,onClose:t,onCompleteInspection:r,allItems:i=[],updateItemQuantities:a})=>{const[o,s]=ve.useState([]),[u,f]=ve.useState(""),[h,p]=ve.useState(!1);if(ve.useEffect(()=>{if(n&&(e!=null&&e.items)){const b=e.items.map(T=>({itemId:T.id||T.itemId,name:T.name,quantityExpected:T.quantity||1,quantityReturned:T.quantity||1,isFullyReturned:!0,condition:"good",damageDescription:"",repairCost:0,notes:""}));s(b),f("")}},[n,e]),ve.useEffect(()=>(n?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[n]),!n||!e)return null;const g=(b,T,S)=>{s(D=>D.map((B,V)=>{if(V===b){const Y={...B,[T]:S};return Y.isFullyReturned=S>=B.quantityExpected,S<B.quantityExpected?Y.condition="lost":Y.condition==="lost"&&(Y.condition="good"),Y}return B}))},m=async()=>{const b=o.reduce((B,V)=>B+V.quantityExpected,0),T=o.reduce((B,V)=>B+V.quantityReturned,0);o.filter(B=>B.condition==="damaged").length,o.filter(B=>B.condition==="lost").length;const S=Math.round(T/b*100),D=`האם אתה בטוח שברצונך לסיים את בדיקת ההחזרה?

סיכום:
• פריטים שהושאלו: ${b}/${b}
• פריטים שחזרו: ${T}/${b}
• אחוז החזרה: ${S}%

ההזמנה תעבור לאיסוף ההזמנות הסגורות.`;if(window.confirm(D))try{p(!0);const B=o.reduce((E,C)=>E+C.quantityExpected,0),V=o.reduce((E,C)=>E+C.quantityReturned,0),Y=o.filter(E=>E.condition==="damaged").length,q=o.reduce((E,C)=>E+(C.repairCost||0),0),P={totalItemsExpected:B,totalItemsReturned:V,totalDamages:Y,totalRepairCost:q,managerNotes:u,customerNotified:!1,customerAgreedToCharges:!1};for(const E of o){const C=i.find(M=>M.id===E.itemId||M.name===E.name);if(C){let M=0;const R=E.quantityExpected-E.quantityReturned,L=E.condition==="damaged"?E.quantityReturned:0;M=R+L;const j=C.quantity-M,$=Math.max(0,j);console.log(`עדכון מלאי - ${C.name}:`,{originalStock:C.quantity,expectedReturn:E.quantityExpected,quantityReturned:E.quantityReturned,condition:E.condition,itemsNotReturned:R,damagedItems:L,totalToRemove:M,newStock:$}),M>0&&await cl(Jr(nn,"items",C.id),{quantity:$,lastUpdated:Ya()})}}await r(e.id,o,P),a&&await a(),t()}catch(B){console.error("Error completing return inspection:",B),alert("שגיאה בהשלמת בדיקת החזרה. נסה שוב.")}finally{p(!1)}},_=b=>{b.target===b.currentTarget&&window.confirm("האם אתה בטוח שברצונך לסגור את חלון בדיקת החזרה?")&&t()};return O.jsxs(O.Fragment,{children:[O.jsx("style",{jsx:!0,global:!0,children:`
        .return-inspection-overlay {
          position: fixed !important;
          top: 0 !important;
          left: 0 !important;
          right: 0 !important;
          bottom: 0 !important;
          background-color: rgba(0, 0, 0, 0.7) !important;
          display: flex !important;
          align-items: flex-start !important;
          justify-content: center !important;
          padding: 0.5rem !important;
          z-index: 99999 !important;
          overflow-x: hidden !important;
          padding-top: 1rem !important;
        }
        
        .return-inspection-content {
          background: white !important;
          border-radius: 12px !important;
          box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25) !important;
          width: 100% !important;
          max-width: 56rem !important;
          max-height: 96vh !important;
          overflow: hidden !important;
          position: relative !important;
          z-index: 100000 !important;
          display: flex !important;
          flex-direction: column !important;
        }

        @media (max-width: 768px) {
          .return-inspection-overlay {
            padding: 0.25rem !important;
            padding-top: 0.5rem !important;
          }
          
          .return-inspection-content {
            max-height: 98vh !important;
            border-radius: 8px !important;
          }
          
          .footer-mobile {
            flex-direction: column !important;
            gap: 0.5rem !important;
            align-items: stretch !important;
          }
          
          .footer-mobile button {
            width: 100% !important;
          }
          
          .footer-mobile .summary-text {
            text-align: center !important;
            margin-bottom: 0.5rem !important;
          }
        }

        @keyframes spin {
          0% { transform: rotate(0deg); }
          100% { transform: rotate(360deg); }
        }
      `}),O.jsx("div",{className:"return-inspection-overlay",onClick:_,children:O.jsxs("div",{className:"return-inspection-content",dir:"rtl",onClick:b=>b.stopPropagation(),children:[O.jsx("div",{style:{background:"linear-gradient(to right, #fb923c, #f97316)",color:"white",padding:"1rem",flexShrink:0},children:O.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[O.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[O.jsx(Ny,{size:24}),O.jsxs("div",{children:[O.jsx("h2",{style:{fontSize:"1.25rem",fontWeight:"bold",margin:0},children:"בדיקת החזרת מוצרים"}),O.jsxs("div",{style:{fontSize:"0.875rem",marginTop:"0.25rem",opacity:.9},children:["לקוח: ",e.clientName," • ",e.phone]})]})]}),O.jsx("button",{onClick:t,style:{background:"none",border:"none",color:"white",fontSize:"1.5rem",cursor:"pointer",padding:"0.25rem"},children:"×"})]})}),O.jsx("div",{style:{padding:"1rem",overflowY:"auto",flex:1},children:O.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:o.map((b,T)=>{var S,D;return O.jsxs("div",{style:{border:"1px solid #e5e7eb",borderRadius:"12px",padding:"1rem",background:"#ffffff",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[O.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:O.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[O.jsx("img",{src:((S=e.items.find(B=>B.id===b.itemId))==null?void 0:S.imageUrl)||"/no-image-available.png",alt:b.name,style:{width:"40px",height:"40px",objectFit:"cover",borderRadius:"8px",border:"1px solid #e5e7eb",flexShrink:0}}),O.jsxs("div",{style:{minWidth:0,flex:1},children:[O.jsx("h4",{style:{fontSize:"1rem",fontWeight:"bold",margin:0,color:"#1f2937"},children:b.name}),O.jsxs("div",{style:{fontSize:"0.75rem",color:"#6b7280",marginTop:"0.25rem"},children:["מזהה: ",b.ItemId||((D=e.items.find(B=>B.id===b.itemId))==null?void 0:D.ItemId)||b.itemId]}),O.jsxs("div",{style:{fontSize:"0.75rem",color:"#6b7280"},children:["כמות מוזמנת: ",b.quantityExpected]})]})]})}),O.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",gap:"1rem"},children:[O.jsx("span",{style:{fontSize:"0.875rem",fontWeight:"500",color:"#374151"},children:"כמות שחזרה:"}),O.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[O.jsx("button",{onClick:()=>{const B=Math.max(0,b.quantityReturned-1);g(T,"quantityReturned",B)},disabled:b.quantityReturned<=0,style:{background:b.quantityReturned<=0?"#d1d5db":"#ef4444",color:"white",border:"none",borderRadius:"50%",width:"36px",height:"36px",fontSize:"18px",fontWeight:"bold",cursor:b.quantityReturned<=0?"not-allowed":"pointer",display:"flex",alignItems:"center",justifyContent:"center",opacity:b.quantityReturned<=0?.6:1},children:"-"}),O.jsx("span",{style:{fontSize:"1.5rem",fontWeight:"bold",minWidth:"40px",textAlign:"center",color:"#1f2937"},children:b.quantityReturned}),O.jsx("button",{onClick:()=>{const B=Math.min(b.quantityExpected,b.quantityReturned+1);g(T,"quantityReturned",B)},disabled:b.quantityReturned>=b.quantityExpected,style:{background:b.quantityReturned>=b.quantityExpected?"#d1d5db":"#10b981",color:"white",border:"none",borderRadius:"50%",width:"36px",height:"36px",fontSize:"18px",fontWeight:"bold",cursor:b.quantityReturned>=b.quantityExpected?"not-allowed":"pointer",display:"flex",alignItems:"center",justifyContent:"center",opacity:b.quantityReturned>=b.quantityExpected?.6:1},children:"+"})]})]}),b.quantityReturned<b.quantityExpected&&O.jsx("div",{style:{marginTop:"0.75rem",padding:"0.5rem",background:"#fef3c7",borderRadius:"6px",textAlign:"center"},children:O.jsxs("span",{style:{fontSize:"0.875rem",color:"#92400e",fontWeight:"500"},children:["⚠️ חסרים ",b.quantityExpected-b.quantityReturned," פריטים"]})})]},T)})})}),O.jsx("div",{style:{background:"#f9fafb",padding:"1rem",borderTop:"1px solid #e5e7eb",flexShrink:0},children:O.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},className:"footer-mobile",children:[O.jsx("div",{style:{fontSize:"0.875rem",color:"#6b7280"},className:"summary-text",children:"בדיקת החזרה תעביר את ההזמנה להיסטוריה"}),O.jsxs("div",{style:{display:"flex",gap:"0.75rem"},className:"footer-mobile",children:[O.jsx("button",{onClick:t,disabled:h,style:{background:"#6b7280",color:"white",padding:"0.75rem 1.5rem",borderRadius:"8px",border:"none",cursor:h?"not-allowed":"pointer",fontSize:"0.875rem",opacity:h?.6:1},children:"ביטול"}),O.jsx("button",{onClick:m,disabled:h,style:{background:"#f59e0b",color:"white",padding:"0.75rem 1.5rem",borderRadius:"8px",border:"none",cursor:h?"not-allowed":"pointer",fontSize:"0.875rem",display:"flex",alignItems:"center",gap:"0.5rem",opacity:h?.6:1,justifyContent:"center"},children:h?O.jsxs(O.Fragment,{children:[O.jsx("div",{style:{width:"1rem",height:"1rem",border:"2px solid #ffffff",borderTop:"2px solid transparent",borderRadius:"50%",animation:"spin 1s linear infinite"}}),"מעבד..."]}):O.jsxs(O.Fragment,{children:[O.jsx(HS,{size:16}),"השלם בדיקת החזרה"]})})]})]})})]})})]})},BV=({allItems:n,itemsMap:e,events:t,setAllItems:r,setItemsMap:i,setEvents:a,fetchItemsAndOrders:o})=>{const[s,u]=ve.useState(new Date),[f,h]=ve.useState([]),[p,g]=ve.useState(!1),[m,_]=ve.useState(null),[b,T]=ve.useState(!1),[S,D]=ve.useState({open:!1,eventId:null,items:[]}),[B,V]=ve.useState({show:!1,order:null}),Y=async E=>{try{const C=t.filter(M=>M.orderId===E);if(C.length>0){const M={id:E,clientName:C[0].clientName,phone:C[0].phone,items:C[0].items,pickupDate:C[0].pickupDate,returnDate:C[0].returnDate};V({show:!0,order:M}),g(!1)}}catch(C){console.error("Error initializing return inspection:",C),alert("שגיאה בהתחלת בדיקת החזרה. נסה שוב.")}},q=async E=>{try{const C={status:"closed","returnInspection.inspectionStatus":"completed","returnInspection.inspectedBy":"סגירה ידנית","returnInspection.inspectionDate":Ya(),"returnInspection.managerNotes":"הזמנה נסגרה ידנית על ידי המנהל","returnInspection.totalItemsReturned":0,"returnInspection.totalDamages":0,"returnInspection.totalRepairCost":0,closedAt:Ya(),manuallyClosedAt:Ya()};await cl(Jr(nn,"orders",E),C),await o(),g(!1),alert("ההזמנה נסגרה ידנית והועברה להיסטוריה!")}catch(C){console.error("Error manually closing order:",C),alert("שגיאה בסגירת ההזמנה. נסה שוב.")}},P=async(E,C,M)=>{try{const R={status:"closed",returnInspection:{inspectionStatus:"completed",inspectedBy:"מנהל המערכת",inspectionDate:Ya(),itemInspections:C.map(L=>({itemId:L.itemId,name:L.name,quantityExpected:L.quantityExpected,quantityReturned:L.quantityReturned,condition:L.condition,damageDescription:L.damageDescription||"",repairCost:L.repairCost||0,notes:L.notes||"",inspectedAt:new Date().toISOString()})),totalItemsReturned:M.totalItemsReturned,totalItemsExpected:M.totalItemsExpected,totalDamages:M.totalDamages,totalRepairCost:M.totalRepairCost,managerNotes:M.managerNotes,customerNotified:M.customerNotified,customerAgreedToCharges:M.customerAgreedToCharges},closedAt:Ya()};await cl(Jr(nn,"orders",E),R),await o(),V({show:!1,order:null}),alert("בדיקת החזרה הושלמה בהצלחה! ההזמנה הועברה להיסטוריה.")}catch(R){console.error("Error completing return inspection:",R),alert("שגיאה בהשלמת בדיקת החזרה. נסה שוב.")}};return O.jsxs("div",{className:"mt-6",children:[O.jsx(DV,{currentDate:s,events:t,setCurrentDate:u,setSelectedEvents:h,setSelectedDate:_,setShowReport:g}),O.jsx(PV,{show:p,selectedDate:m,selectedEvents:f,allItems:n,setShowReport:g,setShowItemsModal:T,setEditItemModal:D,fetchItemsAndOrders:o,onStartReturnInspection:Y,onCloseOrderManually:q}),O.jsx(LV,{show:!!b,setShow:()=>T(!1),selectedEvents:b,allItems:n}),O.jsx(kV,{show:S.open,data:S,setData:D,allItems:n,setShowReport:g,fetchItemsAndOrders:o,allEvents:t}),O.jsx(MV,{show:B.show,order:B.order,onClose:()=>V({show:!1,order:null}),onCompleteInspection:P,allItems:n,updateItemQuantities:o})]})},c4=n=>{const e=new Date(n);return e.setHours(0,0,0,0),e},FV=async(n,e)=>{const t=c4(new Date);for(const r of n.docs){const i=r.data();!i.pickupDate||i.stockUpdated||c4(new Date(i.pickupDate))>t||await cl(Jr(e,"orders",r.id),{stockUpdated:!0})}},jV=(n,e)=>n.docs.flatMap(t=>{const r=t.data();if(r.status==="closed")return[];const i=(o=[])=>o.map(s=>{const u=e.find(f=>f.id===s.id);return{...s,imageUrl:(u==null?void 0:u.imageUrl)||null,itemId:(u==null?void 0:u.itemId)||"לא נמצא"}}),a=[];if(r.pickupDate&&r.returnDate){const o=new Date(r.pickupDate),s=new Date(r.returnDate);o.setHours(0,0,0,0),s.setHours(0,0,0,0);const u=Math.ceil((s-o)/(1e3*60*60*24));for(let f=0;f<=u;f++){if(f!==0&&f!==u)continue;const h=new Date(o);h.setDate(o.getDate()+f);let p,g,m;f===0?(p="השאלה",g="📦",m="איסוף מוצרים"):f===u&&(p="החזרה",g="🔄",m="החזרת מוצרים"),a.push({id:`${t.id}-${h.toISOString().slice(0,10)}`,orderId:t.id,date:new Date(h),clientName:r.clientName,phone:r.phone,type:p,icon:g,description:m,items:i(r.items),pickupDate:r.pickupDate,returnDate:r.returnDate,dayNumber:f+1,totalDays:u+1,isMultiDay:u>0})}}return a}),UV=async(n,e,t,r)=>{try{const a=(await bi(Tr(n,"items"))).docs.map(f=>{const h=f.data();return{id:f.id,itemId:h.ItemId,name:h.name,imageUrl:h.imageUrl,quantity:h.quantity||0,isDeleted:h.isDeleted||!1}}).filter(f=>!f.isDeleted);console.log("📊 Items loaded with quantities:",a.map(f=>({name:f.name,quantity:f.quantity}))),e(a);const o={};a.forEach(f=>{o[f.name]=f.imageUrl||null}),t(o);const s=await bi(Tr(n,"orders"));await FV(s,n);const u=jV(s,a);r(u)}catch(i){console.error("שגיאה בטעינת ההזמנות והפריטים:",i)}},VV=()=>{const[n,e]=ve.useState([]),[t,r]=ve.useState({}),[i,a]=ve.useState([]),[o,s]=ve.useState(!0),[u,f]=ve.useState(null),h=async()=>{try{s(!0),f(null),await UV(nn,e,r,a)}catch(p){console.error("Error fetching calendar data:",p),f("שגיאה בטעינת נתוני היומן. אנא נסה שוב.")}finally{s(!1)}};return ve.useEffect(()=>{h()},[]),o?O.jsx("div",{className:"flex justify-center items-center min-h-screen",children:O.jsxs("div",{className:"text-center",children:[O.jsx("div",{className:"spinner-border animate-spin inline-block w-8 h-8 border-4 rounded-full border-blue-600 border-t-transparent"}),O.jsx("p",{className:"mt-4 text-gray-600",children:"טוען נתוני יומן..."})]})}):u?O.jsx("div",{className:"flex justify-center items-center min-h-screen",children:O.jsxs("div",{className:"text-center",children:[O.jsx("p",{className:"text-red-600 mb-4",children:u}),O.jsx("button",{onClick:h,className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"נסה שוב"})]})}):O.jsx("div",{className:"container mx-auto px-4",children:O.jsx(BV,{allItems:n,itemsMap:t,events:i,setAllItems:e,setItemsMap:r,setEvents:a,fetchItemsAndOrders:h})})},zV=()=>{const[n,e]=ve.useState(!1),[t,r]=ve.useState(!1),[i,a]=ve.useState("phone"),[o,s]=ve.useState("fade-in"),u="054-257-5886",f="+972 54-257-5886",h=()=>{window.open(`tel:${u}`,"_self")},p=()=>{const m=encodeURIComponent("שלום, אני מעוניין לקבל מידע נוסף על השירות");window.open(`https://wa.me/${f}?text=${m}`,"_blank")},g=()=>{n?(r(!0),s("fade-out"),setTimeout(()=>{a("phone"),s("fade-in")},150),setTimeout(()=>{e(!1),r(!1)},250)):(e(!0),s("fade-out"),setTimeout(()=>{a("close"),s("fade-in")},150))};return O.jsxs(O.Fragment,{children:[O.jsx("style",{jsx:!0,children:`
        .contact-bubble {
          position: fixed;
          bottom: 20px;
          right: 20px;
          z-index: 9999;
          font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        }

        .bubble-main {
          background: linear-gradient(135deg, #2563eb 0%, #3b82f6 100%);
          color: white;
          border-radius: 50px;
          box-shadow: 0 8px 25px rgba(37, 99, 235, 0.3);
          cursor: pointer;
          transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
          border: none;
          display: flex;
          align-items: center;
          gap: 8px;
          padding: 12px 20px;
          font-weight: 500;
          font-size: 14px;
          overflow: hidden;
          position: relative;
        }

        .bubble-main:hover {
          transform: translateY(-2px);
          box-shadow: 0 12px 35px rgba(37, 99, 235, 0.4);
          background: linear-gradient(135deg, #1d4ed8 0%, #2563eb 100%);
        }

        .bubble-main.collapsed {
          width: 56px;
          height: 56px;
          padding: 0;
          justify-content: center;
          border-radius: 50%;
          transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }

        /* אנימציה לתוכן הכפתור */
        .bubble-content {
          display: flex;
          align-items: center;
          gap: 8px;
          transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .bubble-content.fade-out {
          opacity: 0;
          transform: scale(0.8);
        }

        .bubble-content.fade-in {
          opacity: 1;
          transform: scale(1);
        }

        .expanded-menu {
          position: absolute;
          bottom: 70px;
          right: 0;
          background: white;
          border-radius: 12px;
          box-shadow: 0 10px 40px rgba(0, 0, 0, 0.15);
          padding: 16px;
          min-width: 240px;
          border: 1px solid #e5e7eb;
          animation: slideUp 0.3s ease;
        }

        @keyframes slideUp {
          from {
            opacity: 0;
            transform: translateY(10px) scale(0.95);
          }
          to {
            opacity: 1;
            transform: translateY(0) scale(1);
          }
        }

        @keyframes slideDown {
          from {
            opacity: 1;
            transform: translateY(0) scale(1);
          }
          to {
            opacity: 0;
            transform: translateY(10px) scale(0.95);
          }
        }

        .expanded-menu.closing {
          animation: slideDown 0.25s ease forwards;
        }

        .menu-item {
          display: flex;
          align-items: center;
          gap: 12px;
          padding: 12px;
          border-radius: 8px;
          cursor: pointer;
          transition: background-color 0.2s;
          border: none;
          width: 100%;
          text-align: right;
          background: none;
          color: #374151;
          font-size: 14px;
        }

        .menu-item:hover {
          background-color: #f3f4f6;
        }

        .menu-item.phone {
          color: #2563eb;
        }

        .menu-item.whatsapp {
          color: #10b981;
        }

        .menu-header {
          text-align: center;
          margin-bottom: 12px;
          color: #1f2937;
          font-weight: 600;
          font-size: 16px;
        }

        .pulse {
          animation: pulse 2s infinite;
        }

        @keyframes pulse {
          0% {
            box-shadow: 0 8px 25px rgba(37, 99, 235, 0.3);
          }
          50% {
            box-shadow: 0 8px 25px rgba(37, 99, 235, 0.5);
          }
          100% {
            box-shadow: 0 8px 25px rgba(37, 99, 235, 0.3);
          }
        }

        @media (max-width: 768px) {
          .contact-bubble {
            bottom: 80px;
            right: 15px;
          }
          
          .expanded-menu {
            width: 220px;
            right: 10px; /* הזז ימינה כדי שלא יחתוך */
            bottom: 65px;
            padding: 14px;
            border-radius: 10px;
          }
          
          .bubble-main {
            padding: 12px 18px;
            font-size: 14px;
            min-height: 48px;
          }
          
          .bubble-main.collapsed {
            width: 56px;
            height: 56px;
            padding: 0;
          }
          
          .menu-item {
            padding: 12px;
            font-size: 14px;
            min-height: 50px;
          }
          
          .menu-header {
            font-size: 16px;
            margin-bottom: 12px;
          }
        }
      `}),O.jsxs("div",{className:"contact-bubble",children:[(n||t)&&O.jsxs("div",{className:`expanded-menu ${t?"closing":""}`,dir:"rtl",children:[O.jsx("div",{className:"menu-header",children:"צור קשר"}),O.jsxs("button",{onClick:h,className:"menu-item phone",children:[O.jsx(Ug,{size:20}),O.jsxs("div",{children:[O.jsx("div",{style:{fontWeight:"500"},children:"התקשר אלינו"}),O.jsx("div",{style:{fontSize:"12px",color:"#6b7280"},children:u})]})]}),O.jsxs("button",{onClick:p,className:"menu-item whatsapp",children:[O.jsx(fV,{size:20}),O.jsxs("div",{children:[O.jsx("div",{style:{fontWeight:"500"},children:"WhatsApp"}),O.jsx("div",{style:{fontSize:"12px",color:"#6b7280"},children:"שלח הודעה מהירה"})]})]})]}),O.jsx("button",{onClick:g,className:`bubble-main ${n?"":"collapsed pulse"}`,"aria-label":"צור קשר",children:O.jsx("div",{className:`bubble-content ${o}`,children:i==="close"?O.jsxs(O.Fragment,{children:[O.jsx($S,{size:20}),O.jsx("span",{children:"סגור"})]}):O.jsx(Ug,{size:24})})})]})]})},qV="modulepreload",HV=function(n){return"/"+n},f4={},Oy=function(e,t,r){let i=Promise.resolve();if(t&&t.length>0){let o=function(f){return Promise.all(f.map(h=>Promise.resolve(h).then(p=>({status:"fulfilled",value:p}),p=>({status:"rejected",reason:p}))))};document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),u=(s==null?void 0:s.nonce)||(s==null?void 0:s.getAttribute("nonce"));i=o(t.map(f=>{if(f=HV(f),f in f4)return;f4[f]=!0;const h=f.endsWith(".css"),p=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${f}"]${p}`))return;const g=document.createElement("link");if(g.rel=h?"stylesheet":qV,h||(g.as="script"),g.crossOrigin="",g.href=f,u&&g.setAttribute("nonce",u),document.head.appendChild(g),h)return new Promise((m,_)=>{g.addEventListener("load",m),g.addEventListener("error",()=>_(new Error(`Unable to preload CSS for ${f}`)))})}))}function a(o){const s=new Event("vite:preloadError",{cancelable:!0});if(s.payload=o,window.dispatchEvent(s),!s.defaultPrevented)throw o}return i.then(o=>{for(const s of o||[])s.status==="rejected"&&a(s.reason);return e().catch(a)})};function ar(n){"@babel/helpers - typeof";return ar=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ar(n)}var ka=Uint8Array,$o=Uint16Array,fx=Int32Array,D2=new ka([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),P2=new ka([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Dy=new ka([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),XS=function(n,e){for(var t=new $o(31),r=0;r<31;++r)t[r]=e+=1<<n[r-1];for(var i=new fx(t[30]),r=1;r<30;++r)for(var a=t[r];a<t[r+1];++a)i[a]=a-t[r]<<5|r;return{b:t,r:i}},YS=XS(D2,2),KS=YS.b,Py=YS.r;KS[28]=258,Py[258]=28;var QS=XS(P2,0),GV=QS.b,h4=QS.r,Ly=new $o(32768);for(var Cr=0;Cr<32768;++Cr){var qc=(Cr&43690)>>1|(Cr&21845)<<1;qc=(qc&52428)>>2|(qc&13107)<<2,qc=(qc&61680)>>4|(qc&3855)<<4,Ly[Cr]=((qc&65280)>>8|(qc&255)<<8)>>1}var Jl=function(n,e,t){for(var r=n.length,i=0,a=new $o(e);i<r;++i)n[i]&&++a[n[i]-1];var o=new $o(e);for(i=1;i<e;++i)o[i]=o[i-1]+a[i-1]<<1;var s;if(t){s=new $o(1<<e);var u=15-e;for(i=0;i<r;++i)if(n[i])for(var f=i<<4|n[i],h=e-n[i],p=o[n[i]-1]++<<h,g=p|(1<<h)-1;p<=g;++p)s[Ly[p]>>u]=f}else for(s=new $o(r),i=0;i<r;++i)n[i]&&(s[i]=Ly[o[n[i]-1]++]>>15-n[i]);return s},hf=new ka(288);for(var Cr=0;Cr<144;++Cr)hf[Cr]=8;for(var Cr=144;Cr<256;++Cr)hf[Cr]=9;for(var Cr=256;Cr<280;++Cr)hf[Cr]=7;for(var Cr=280;Cr<288;++Cr)hf[Cr]=8;var o0=new ka(32);for(var Cr=0;Cr<32;++Cr)o0[Cr]=5;var WV=Jl(hf,9,0),$V=Jl(hf,9,1),XV=Jl(o0,5,0),YV=Jl(o0,5,1),Av=function(n){for(var e=n[0],t=1;t<n.length;++t)n[t]>e&&(e=n[t]);return e},Qs=function(n,e,t){var r=e/8|0;return(n[r]|n[r+1]<<8)>>(e&7)&t},Ev=function(n,e){var t=e/8|0;return(n[t]|n[t+1]<<8|n[t+2]<<16)>>(e&7)},hx=function(n){return(n+7)/8|0},ZS=function(n,e,t){return(t==null||t>n.length)&&(t=n.length),new ka(n.subarray(e,t))},KV=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],nl=function(n,e,t){var r=new Error(e||KV[n]);if(r.code=n,Error.captureStackTrace&&Error.captureStackTrace(r,nl),!t)throw r;return r},QV=function(n,e,t,r){var i=n.length,a=0;if(!i||e.f&&!e.l)return t||new ka(0);var o=!t,s=o||e.i!=2,u=e.i;o&&(t=new ka(i*3));var f=function(He){var rt=t.length;if(He>rt){var st=new ka(Math.max(rt*2,He));st.set(t),t=st}},h=e.f||0,p=e.p||0,g=e.b||0,m=e.l,_=e.d,b=e.m,T=e.n,S=i*8;do{if(!m){h=Qs(n,p,1);var D=Qs(n,p+1,3);if(p+=3,D)if(D==1)m=$V,_=YV,b=9,T=5;else if(D==2){var q=Qs(n,p,31)+257,P=Qs(n,p+10,15)+4,E=q+Qs(n,p+5,31)+1;p+=14;for(var C=new ka(E),M=new ka(19),R=0;R<P;++R)M[Dy[R]]=Qs(n,p+R*3,7);p+=P*3;for(var L=Av(M),j=(1<<L)-1,$=Jl(M,L,1),R=0;R<E;){var ne=$[Qs(n,p,j)];p+=ne&15;var B=ne>>4;if(B<16)C[R++]=B;else{var U=0,z=0;for(B==16?(z=3+Qs(n,p,3),p+=2,U=C[R-1]):B==17?(z=3+Qs(n,p,7),p+=3):B==18&&(z=11+Qs(n,p,127),p+=7);z--;)C[R++]=U}}var te=C.subarray(0,q),ue=C.subarray(q);b=Av(te),T=Av(ue),m=Jl(te,b,1),_=Jl(ue,T,1)}else nl(1);else{var B=hx(p)+4,V=n[B-4]|n[B-3]<<8,Y=B+V;if(Y>i){u&&nl(0);break}s&&f(g+V),t.set(n.subarray(B,Y),g),e.b=g+=V,e.p=p=Y*8,e.f=h;continue}if(p>S){u&&nl(0);break}}s&&f(g+131072);for(var X=(1<<b)-1,me=(1<<T)-1,G=p;;G=p){var U=m[Ev(n,p)&X],Q=U>>4;if(p+=U&15,p>S){u&&nl(0);break}if(U||nl(2),Q<256)t[g++]=Q;else if(Q==256){G=p,m=null;break}else{var ee=Q-254;if(Q>264){var R=Q-257,ie=D2[R];ee=Qs(n,p,(1<<ie)-1)+KS[R],p+=ie}var de=_[Ev(n,p)&me],Ee=de>>4;de||nl(3),p+=de&15;var ue=GV[Ee];if(Ee>3){var ie=P2[Ee];ue+=Ev(n,p)&(1<<ie)-1,p+=ie}if(p>S){u&&nl(0);break}s&&f(g+131072);var be=g+ee;if(g<ue){var Te=a-ue,Ge=Math.min(ue,be);for(Te+g<0&&nl(3);g<Ge;++g)t[g]=r[Te+g]}for(;g<be;++g)t[g]=t[g-ue]}}e.l=m,e.p=G,e.b=g,e.f=h,m&&(h=1,e.m=b,e.d=_,e.n=T)}while(!h);return g!=t.length&&o?ZS(t,0,g):t.subarray(0,g)},ju=function(n,e,t){t<<=e&7;var r=e/8|0;n[r]|=t,n[r+1]|=t>>8},S1=function(n,e,t){t<<=e&7;var r=e/8|0;n[r]|=t,n[r+1]|=t>>8,n[r+2]|=t>>16},Sv=function(n,e){for(var t=[],r=0;r<n.length;++r)n[r]&&t.push({s:r,f:n[r]});var i=t.length,a=t.slice();if(!i)return{t:e8,l:0};if(i==1){var o=new ka(t[0].s+1);return o[t[0].s]=1,{t:o,l:1}}t.sort(function(Y,q){return Y.f-q.f}),t.push({s:-1,f:25001});var s=t[0],u=t[1],f=0,h=1,p=2;for(t[0]={s:-1,f:s.f+u.f,l:s,r:u};h!=i-1;)s=t[t[f].f<t[p].f?f++:p++],u=t[f!=h&&t[f].f<t[p].f?f++:p++],t[h++]={s:-1,f:s.f+u.f,l:s,r:u};for(var g=a[0].s,r=1;r<i;++r)a[r].s>g&&(g=a[r].s);var m=new $o(g+1),_=ky(t[h-1],m,0);if(_>e){var r=0,b=0,T=_-e,S=1<<T;for(a.sort(function(q,P){return m[P.s]-m[q.s]||q.f-P.f});r<i;++r){var D=a[r].s;if(m[D]>e)b+=S-(1<<_-m[D]),m[D]=e;else break}for(b>>=T;b>0;){var B=a[r].s;m[B]<e?b-=1<<e-m[B]++-1:++r}for(;r>=0&&b;--r){var V=a[r].s;m[V]==e&&(--m[V],++b)}_=e}return{t:new ka(m),l:_}},ky=function(n,e,t){return n.s==-1?Math.max(ky(n.l,e,t+1),ky(n.r,e,t+1)):e[n.s]=t},d4=function(n){for(var e=n.length;e&&!n[--e];);for(var t=new $o(++e),r=0,i=n[0],a=1,o=function(u){t[r++]=u},s=1;s<=e;++s)if(n[s]==i&&s!=e)++a;else{if(!i&&a>2){for(;a>138;a-=138)o(32754);a>2&&(o(a>10?a-11<<5|28690:a-3<<5|12305),a=0)}else if(a>3){for(o(i),--a;a>6;a-=6)o(8304);a>2&&(o(a-3<<5|8208),a=0)}for(;a--;)o(i);a=1,i=n[s]}return{c:t.subarray(0,r),n:e}},C1=function(n,e){for(var t=0,r=0;r<e.length;++r)t+=n[r]*e[r];return t},JS=function(n,e,t){var r=t.length,i=hx(e+2);n[i]=r&255,n[i+1]=r>>8,n[i+2]=n[i]^255,n[i+3]=n[i+1]^255;for(var a=0;a<r;++a)n[i+a+4]=t[a];return(i+4+r)*8},p4=function(n,e,t,r,i,a,o,s,u,f,h){ju(e,h++,t),++i[256];for(var p=Sv(i,15),g=p.t,m=p.l,_=Sv(a,15),b=_.t,T=_.l,S=d4(g),D=S.c,B=S.n,V=d4(b),Y=V.c,q=V.n,P=new $o(19),E=0;E<D.length;++E)++P[D[E]&31];for(var E=0;E<Y.length;++E)++P[Y[E]&31];for(var C=Sv(P,7),M=C.t,R=C.l,L=19;L>4&&!M[Dy[L-1]];--L);var j=f+5<<3,$=C1(i,hf)+C1(a,o0)+o,ne=C1(i,g)+C1(a,b)+o+14+3*L+C1(P,M)+2*P[16]+3*P[17]+7*P[18];if(u>=0&&j<=$&&j<=ne)return JS(e,h,n.subarray(u,u+f));var U,z,te,ue;if(ju(e,h,1+(ne<$)),h+=2,ne<$){U=Jl(g,m,0),z=g,te=Jl(b,T,0),ue=b;var X=Jl(M,R,0);ju(e,h,B-257),ju(e,h+5,q-1),ju(e,h+10,L-4),h+=14;for(var E=0;E<L;++E)ju(e,h+3*E,M[Dy[E]]);h+=3*L;for(var me=[D,Y],G=0;G<2;++G)for(var Q=me[G],E=0;E<Q.length;++E){var ee=Q[E]&31;ju(e,h,X[ee]),h+=M[ee],ee>15&&(ju(e,h,Q[E]>>5&127),h+=Q[E]>>12)}}else U=WV,z=hf,te=XV,ue=o0;for(var E=0;E<s;++E){var ie=r[E];if(ie>255){var ee=ie>>18&31;S1(e,h,U[ee+257]),h+=z[ee+257],ee>7&&(ju(e,h,ie>>23&31),h+=D2[ee]);var de=ie&31;S1(e,h,te[de]),h+=ue[de],de>3&&(S1(e,h,ie>>5&8191),h+=P2[de])}else S1(e,h,U[ie]),h+=z[ie]}return S1(e,h,U[256]),h+z[256]},ZV=new fx([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),e8=new ka(0),JV=function(n,e,t,r,i,a){var o=a.z||n.length,s=new ka(r+o+5*(1+Math.ceil(o/7e3))+i),u=s.subarray(r,s.length-i),f=a.l,h=(a.r||0)&7;if(e){h&&(u[0]=a.r>>3);for(var p=ZV[e-1],g=p>>13,m=p&8191,_=(1<<t)-1,b=a.p||new $o(32768),T=a.h||new $o(_+1),S=Math.ceil(t/3),D=2*S,B=function(wt){return(n[wt]^n[wt+1]<<S^n[wt+2]<<D)&_},V=new fx(25e3),Y=new $o(288),q=new $o(32),P=0,E=0,C=a.i||0,M=0,R=a.w||0,L=0;C+2<o;++C){var j=B(C),$=C&32767,ne=T[j];if(b[$]=ne,T[j]=$,R<=C){var U=o-C;if((P>7e3||M>24576)&&(U>423||!f)){h=p4(n,u,0,V,Y,q,E,M,L,C-L,h),M=P=E=0,L=C;for(var z=0;z<286;++z)Y[z]=0;for(var z=0;z<30;++z)q[z]=0}var te=2,ue=0,X=m,me=$-ne&32767;if(U>2&&j==B(C-me))for(var G=Math.min(g,U)-1,Q=Math.min(32767,C),ee=Math.min(258,U);me<=Q&&--X&&$!=ne;){if(n[C+te]==n[C+te-me]){for(var ie=0;ie<ee&&n[C+ie]==n[C+ie-me];++ie);if(ie>te){if(te=ie,ue=me,ie>G)break;for(var de=Math.min(me,ie-2),Ee=0,z=0;z<de;++z){var be=C-me+z&32767,Te=b[be],Ge=be-Te&32767;Ge>Ee&&(Ee=Ge,ne=be)}}}$=ne,ne=b[$],me+=$-ne&32767}if(ue){V[M++]=268435456|Py[te]<<18|h4[ue];var He=Py[te]&31,rt=h4[ue]&31;E+=D2[He]+P2[rt],++Y[257+He],++q[rt],R=C+te,++P}else V[M++]=n[C],++Y[n[C]]}}for(C=Math.max(C,R);C<o;++C)V[M++]=n[C],++Y[n[C]];h=p4(n,u,f,V,Y,q,E,M,L,C-L,h),f||(a.r=h&7|u[h/8|0]<<3,h-=7,a.h=T,a.p=b,a.i=C,a.w=R)}else{for(var C=a.w||0;C<o+f;C+=65535){var st=C+65535;st>=o&&(u[h/8|0]=f,st=o),h=JS(u,h+1,n.subarray(C,st))}a.i=o}return ZS(s,0,r+hx(h)+i)},t8=function(){var n=1,e=0;return{p:function(t){for(var r=n,i=e,a=t.length|0,o=0;o!=a;){for(var s=Math.min(o+2655,a);o<s;++o)i+=r+=t[o];r=(r&65535)+15*(r>>16),i=(i&65535)+15*(i>>16)}n=r,e=i},d:function(){return n%=65521,e%=65521,(n&255)<<24|(n&65280)<<8|(e&255)<<8|e>>8}}},ez=function(n,e,t,r,i){if(!i&&(i={l:1},e.dictionary)){var a=e.dictionary.subarray(-32768),o=new ka(a.length+n.length);o.set(a),o.set(n,a.length),n=o,i.w=a.length}return JV(n,e.level==null?6:e.level,e.mem==null?i.l?Math.ceil(Math.max(8,Math.min(13,Math.log(n.length)))*1.5):20:12+e.mem,t,r,i)},n8=function(n,e,t){for(;t;++e)n[e]=t,t>>>=8},tz=function(n,e){var t=e.level,r=t==0?0:t<6?1:t==9?3:2;if(n[0]=120,n[1]=r<<6|(e.dictionary&&32),n[1]|=31-(n[0]<<8|n[1])%31,e.dictionary){var i=t8();i.p(e.dictionary),n8(n,2,i.d())}},nz=function(n,e){return((n[0]&15)!=8||n[0]>>4>7||(n[0]<<8|n[1])%31)&&nl(6,"invalid zlib data"),(n[1]>>5&1)==1&&nl(6,"invalid zlib data: "+(n[1]&32?"need":"unexpected")+" dictionary"),(n[1]>>3&4)+2};function My(n,e){e||(e={});var t=t8();t.p(n);var r=ez(n,e,e.dictionary?6:2,4);return tz(r,e),n8(r,r.length-4,t.d()),r}function rz(n,e){return QV(n.subarray(nz(n),-4),{i:2},e,e)}var iz=typeof TextDecoder<"u"&&new TextDecoder,az=0;try{iz.decode(e8,{stream:!0}),az=1}catch{}var Gt=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function Cv(){Gt.console&&typeof Gt.console.log=="function"&&Gt.console.log.apply(Gt.console,arguments)}var mr={log:Cv,warn:function(n){Gt.console&&(typeof Gt.console.warn=="function"?Gt.console.warn.apply(Gt.console,arguments):Cv.call(null,arguments))},error:function(n){Gt.console&&(typeof Gt.console.error=="function"?Gt.console.error.apply(Gt.console,arguments):Cv(n))}};function Tv(n,e,t){var r=new XMLHttpRequest;r.open("GET",n),r.responseType="blob",r.onload=function(){Hf(r.response,e,t)},r.onerror=function(){mr.error("could not download file")},r.send()}function g4(n){var e=new XMLHttpRequest;e.open("HEAD",n,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function Mp(n){try{n.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),n.dispatchEvent(e)}}var H1,By,Hf=Gt.saveAs||((typeof window>"u"?"undefined":ar(window))!=="object"||window!==Gt?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(n,e,t){var r=Gt.URL||Gt.webkitURL,i=document.createElement("a");e=e||n.name||"download",i.download=e,i.rel="noopener",typeof n=="string"?(i.href=n,i.origin!==location.origin?g4(i.href)?Tv(n,e,t):Mp(i,i.target="_blank"):Mp(i)):(i.href=r.createObjectURL(n),setTimeout(function(){r.revokeObjectURL(i.href)},4e4),setTimeout(function(){Mp(i)},0))}:"msSaveOrOpenBlob"in navigator?function(n,e,t){if(e=e||n.name||"download",typeof n=="string")if(g4(n))Tv(n,e,t);else{var r=document.createElement("a");r.href=n,r.target="_blank",setTimeout(function(){Mp(r)})}else navigator.msSaveOrOpenBlob(function(i,a){return a===void 0?a={autoBom:!1}:ar(a)!=="object"&&(mr.warn("Deprecated: Expected third argument to be a object"),a={autoBom:!a}),a.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob(["\uFEFF",i],{type:i.type}):i}(n,t),e)}:function(n,e,t,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof n=="string")return Tv(n,e,t);var i=n.type==="application/octet-stream",a=/constructor/i.test(Gt.HTMLElement)||Gt.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||i&&a)&&(typeof FileReader>"u"?"undefined":ar(FileReader))==="object"){var s=new FileReader;s.onloadend=function(){var h=s.result;h=o?h:h.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=h:location=h,r=null},s.readAsDataURL(n)}else{var u=Gt.URL||Gt.webkitURL,f=u.createObjectURL(n);r?r.location=f:location.href=f,r=null,setTimeout(function(){u.revokeObjectURL(f)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function r8(n){var e;n=n||"",this.ok=!1,n.charAt(0)=="#"&&(n=n.substr(1,6)),n={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[n=(n=n.replace(/ /g,"")).toLowerCase()]||n;for(var t=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(s){return[parseInt(s[1]),parseInt(s[2]),parseInt(s[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(s){return[parseInt(s[1],16),parseInt(s[2],16),parseInt(s[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(s){return[parseInt(s[1]+s[1],16),parseInt(s[2]+s[2],16),parseInt(s[3]+s[3],16)]}}],r=0;r<t.length;r++){var i=t[r].re,a=t[r].process,o=i.exec(n);o&&(e=a(o),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var s=this.r.toString(16),u=this.g.toString(16),f=this.b.toString(16);return s.length==1&&(s="0"+s),u.length==1&&(u="0"+u),f.length==1&&(f="0"+f),"#"+s+u+f}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function Iv(n,e){var t=n[0],r=n[1],i=n[2],a=n[3];t=Ta(t,r,i,a,e[0],7,-680876936),a=Ta(a,t,r,i,e[1],12,-389564586),i=Ta(i,a,t,r,e[2],17,606105819),r=Ta(r,i,a,t,e[3],22,-1044525330),t=Ta(t,r,i,a,e[4],7,-176418897),a=Ta(a,t,r,i,e[5],12,1200080426),i=Ta(i,a,t,r,e[6],17,-1473231341),r=Ta(r,i,a,t,e[7],22,-45705983),t=Ta(t,r,i,a,e[8],7,1770035416),a=Ta(a,t,r,i,e[9],12,-1958414417),i=Ta(i,a,t,r,e[10],17,-42063),r=Ta(r,i,a,t,e[11],22,-1990404162),t=Ta(t,r,i,a,e[12],7,1804603682),a=Ta(a,t,r,i,e[13],12,-40341101),i=Ta(i,a,t,r,e[14],17,-1502002290),t=Ia(t,r=Ta(r,i,a,t,e[15],22,1236535329),i,a,e[1],5,-165796510),a=Ia(a,t,r,i,e[6],9,-1069501632),i=Ia(i,a,t,r,e[11],14,643717713),r=Ia(r,i,a,t,e[0],20,-373897302),t=Ia(t,r,i,a,e[5],5,-701558691),a=Ia(a,t,r,i,e[10],9,38016083),i=Ia(i,a,t,r,e[15],14,-660478335),r=Ia(r,i,a,t,e[4],20,-405537848),t=Ia(t,r,i,a,e[9],5,568446438),a=Ia(a,t,r,i,e[14],9,-1019803690),i=Ia(i,a,t,r,e[3],14,-187363961),r=Ia(r,i,a,t,e[8],20,1163531501),t=Ia(t,r,i,a,e[13],5,-1444681467),a=Ia(a,t,r,i,e[2],9,-51403784),i=Ia(i,a,t,r,e[7],14,1735328473),t=Ra(t,r=Ia(r,i,a,t,e[12],20,-1926607734),i,a,e[5],4,-378558),a=Ra(a,t,r,i,e[8],11,-2022574463),i=Ra(i,a,t,r,e[11],16,1839030562),r=Ra(r,i,a,t,e[14],23,-35309556),t=Ra(t,r,i,a,e[1],4,-1530992060),a=Ra(a,t,r,i,e[4],11,1272893353),i=Ra(i,a,t,r,e[7],16,-155497632),r=Ra(r,i,a,t,e[10],23,-1094730640),t=Ra(t,r,i,a,e[13],4,681279174),a=Ra(a,t,r,i,e[0],11,-358537222),i=Ra(i,a,t,r,e[3],16,-722521979),r=Ra(r,i,a,t,e[6],23,76029189),t=Ra(t,r,i,a,e[9],4,-640364487),a=Ra(a,t,r,i,e[12],11,-421815835),i=Ra(i,a,t,r,e[15],16,530742520),t=Na(t,r=Ra(r,i,a,t,e[2],23,-995338651),i,a,e[0],6,-198630844),a=Na(a,t,r,i,e[7],10,1126891415),i=Na(i,a,t,r,e[14],15,-1416354905),r=Na(r,i,a,t,e[5],21,-57434055),t=Na(t,r,i,a,e[12],6,1700485571),a=Na(a,t,r,i,e[3],10,-1894986606),i=Na(i,a,t,r,e[10],15,-1051523),r=Na(r,i,a,t,e[1],21,-2054922799),t=Na(t,r,i,a,e[8],6,1873313359),a=Na(a,t,r,i,e[15],10,-30611744),i=Na(i,a,t,r,e[6],15,-1560198380),r=Na(r,i,a,t,e[13],21,1309151649),t=Na(t,r,i,a,e[4],6,-145523070),a=Na(a,t,r,i,e[11],10,-1120210379),i=Na(i,a,t,r,e[2],15,718787259),r=Na(r,i,a,t,e[9],21,-343485551),n[0]=Qc(t,n[0]),n[1]=Qc(r,n[1]),n[2]=Qc(i,n[2]),n[3]=Qc(a,n[3])}function L2(n,e,t,r,i,a){return e=Qc(Qc(e,n),Qc(r,a)),Qc(e<<i|e>>>32-i,t)}function Ta(n,e,t,r,i,a,o){return L2(e&t|~e&r,n,e,i,a,o)}function Ia(n,e,t,r,i,a,o){return L2(e&r|t&~r,n,e,i,a,o)}function Ra(n,e,t,r,i,a,o){return L2(e^t^r,n,e,i,a,o)}function Na(n,e,t,r,i,a,o){return L2(t^(e|~r),n,e,i,a,o)}function i8(n){var e,t=n.length,r=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=n.length;e+=64)Iv(r,oz(n.substring(e-64,e)));n=n.substring(e-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<n.length;e++)i[e>>2]|=n.charCodeAt(e)<<(e%4<<3);if(i[e>>2]|=128<<(e%4<<3),e>55)for(Iv(r,i),e=0;e<16;e++)i[e]=0;return i[14]=8*t,Iv(r,i),r}function oz(n){var e,t=[];for(e=0;e<64;e+=4)t[e>>2]=n.charCodeAt(e)+(n.charCodeAt(e+1)<<8)+(n.charCodeAt(e+2)<<16)+(n.charCodeAt(e+3)<<24);return t}H1=Gt.atob.bind(Gt),By=Gt.btoa.bind(Gt);var m4="0123456789abcdef".split("");function sz(n){for(var e="",t=0;t<4;t++)e+=m4[n>>8*t+4&15]+m4[n>>8*t&15];return e}function lz(n){return String.fromCharCode((255&n)>>0,(65280&n)>>8,(16711680&n)>>16,(4278190080&n)>>24)}function Fy(n){return i8(n).map(lz).join("")}var uz=function(n){for(var e=0;e<n.length;e++)n[e]=sz(n[e]);return n.join("")}(i8("hello"))!="5d41402abc4b2a76b9719d911017c592";function Qc(n,e){if(uz){var t=(65535&n)+(65535&e);return(n>>16)+(e>>16)+(t>>16)<<16|65535&t}return n+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function jy(n,e){var t,r,i,a;if(n!==t){for(var o=(i=n,a=1+(256/n.length>>0),new Array(a+1).join(i)),s=[],u=0;u<256;u++)s[u]=u;var f=0;for(u=0;u<256;u++){var h=s[u];f=(f+h+o.charCodeAt(u))%256,s[u]=s[f],s[f]=h}t=n,r=s}else s=r;var p=e.length,g=0,m=0,_="";for(u=0;u<p;u++)m=(m+(h=s[g=(g+1)%256]))%256,s[g]=s[m],s[m]=h,o=s[(s[g]+s[m])%256],_+=String.fromCharCode(e.charCodeAt(u)^o);return _}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var v4={print:4,modify:8,copy:16,"annot-forms":32};function Zh(n,e,t,r){this.v=1,this.r=2;var i=192;n.forEach(function(s){if(v4.perm!==void 0)throw new Error("Invalid permission: "+s);i+=v4[s]}),this.padding="(¿N^NuAd\0NVÿú\b..\0¶Ðh>/\f©þdSiz";var a=(e+this.padding).substr(0,32),o=(t+this.padding).substr(0,32);this.O=this.processOwnerPassword(a,o),this.P=-(1+(255^i)),this.encryptionKey=Fy(a+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=jy(this.encryptionKey,this.padding)}function Jh(n){if(/[^\u0000-\u00ff]/.test(n))throw new Error("Invalid PDF Name Object: "+n+", Only accept ASCII characters.");for(var e="",t=n.length,r=0;r<t;r++){var i=n.charCodeAt(r);i<33||i===35||i===37||i===40||i===41||i===47||i===60||i===62||i===91||i===93||i===123||i===125||i>126?e+="#"+("0"+i.toString(16)).slice(-2):e+=n[r]}return e}function y4(n){if(ar(n)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(t,r,i){if(i=i||!1,typeof t!="string"||typeof r!="function"||typeof i!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(t)||(e[t]={});var a=Math.random().toString(35);return e[t][a]=[r,!!i],a},this.unsubscribe=function(t){for(var r in e)if(e[r][t])return delete e[r][t],Object.keys(e[r]).length===0&&delete e[r],!0;return!1},this.publish=function(t){if(e.hasOwnProperty(t)){var r=Array.prototype.slice.call(arguments,1),i=[];for(var a in e[t]){var o=e[t][a];try{o[0].apply(n,r)}catch(s){Gt.console&&mr.error("jsPDF PubSub Error",s.message,s)}o[1]&&i.push(a)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function Vg(n){if(!(this instanceof Vg))return new Vg(n);var e="opacity,stroke-opacity".split(",");for(var t in n)n.hasOwnProperty(t)&&e.indexOf(t)>=0&&(this[t]=n[t]);this.id="",this.objectNumber=-1}function a8(n,e){this.gState=n,this.matrix=e,this.id="",this.objectNumber=-1}function Gf(n,e,t,r,i){if(!(this instanceof Gf))return new Gf(n,e,t,r,i);this.type=n==="axial"?2:3,this.coords=e,this.colors=t,a8.call(this,r,i)}function id(n,e,t,r,i){if(!(this instanceof id))return new id(n,e,t,r,i);this.boundingBox=n,this.xStep=e,this.yStep=t,this.stream="",this.cloneIndex=0,a8.call(this,r,i)}function qt(n){var e,t=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],i=arguments[2],a=arguments[3],o=[],s=1,u=16,f="S",h=null;ar(n=n||{})==="object"&&(t=n.orientation,r=n.unit||r,i=n.format||i,a=n.compress||n.compressPdf||a,(h=n.encryption||null)!==null&&(h.userPassword=h.userPassword||"",h.ownerPassword=h.ownerPassword||"",h.userPermissions=h.userPermissions||[]),s=typeof n.userUnit=="number"?Math.abs(n.userUnit):1,n.precision!==void 0&&(e=n.precision),n.floatPrecision!==void 0&&(u=n.floatPrecision),f=n.defaultPathOperation||"S"),o=n.filters||(a===!0?["FlateEncode"]:o),r=r||"mm",t=(""+(t||"P")).toLowerCase();var p=n.putOnlyUsedFonts||!1,g={},m={internal:{},__private__:{}};m.__private__.PubSub=y4;var _="1.3",b=m.__private__.getPdfVersion=function(){return _};m.__private__.setPdfVersion=function(N){_=N};var T={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};m.__private__.getPageFormats=function(){return T};var S=m.__private__.getPageFormat=function(N){return T[N]};i=i||"a4";var D={COMPAT:"compat",ADVANCED:"advanced"},B=D.COMPAT;function V(){this.saveGraphicsState(),ge(new vt(ut,0,0,-ut,0,Vi()*ut).toString()+" cm"),this.setFontSize(this.getFontSize()/ut),f="n",B=D.ADVANCED}function Y(){this.restoreGraphicsState(),f="S",B=D.COMPAT}var q=m.__private__.combineFontStyleAndFontWeight=function(N,J){if(N=="bold"&&J=="normal"||N=="bold"&&J==400||N=="normal"&&J=="italic"||N=="bold"&&J=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return J&&(N=J==400||J==="normal"?N==="italic"?"italic":"normal":J!=700&&J!=="bold"||N!=="normal"?(J==700?"bold":J)+""+N:"bold"),N};m.advancedAPI=function(N){var J=B===D.COMPAT;return J&&V.call(this),typeof N!="function"||(N(this),J&&Y.call(this)),this},m.compatAPI=function(N){var J=B===D.ADVANCED;return J&&Y.call(this),typeof N!="function"||(N(this),J&&V.call(this)),this},m.isAdvancedAPI=function(){return B===D.ADVANCED};var P,E=function(N){if(B!==D.ADVANCED)throw new Error(N+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},C=m.roundToPrecision=m.__private__.roundToPrecision=function(N,J){var pe=e||J;if(isNaN(N)||isNaN(pe))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return N.toFixed(pe).replace(/0+$/,"")};P=m.hpf=m.__private__.hpf=typeof u=="number"?function(N){if(isNaN(N))throw new Error("Invalid argument passed to jsPDF.hpf");return C(N,u)}:u==="smart"?function(N){if(isNaN(N))throw new Error("Invalid argument passed to jsPDF.hpf");return C(N,N>-1&&N<1?16:5)}:function(N){if(isNaN(N))throw new Error("Invalid argument passed to jsPDF.hpf");return C(N,16)};var M=m.f2=m.__private__.f2=function(N){if(isNaN(N))throw new Error("Invalid argument passed to jsPDF.f2");return C(N,2)},R=m.__private__.f3=function(N){if(isNaN(N))throw new Error("Invalid argument passed to jsPDF.f3");return C(N,3)},L=m.scale=m.__private__.scale=function(N){if(isNaN(N))throw new Error("Invalid argument passed to jsPDF.scale");return B===D.COMPAT?N*ut:B===D.ADVANCED?N:void 0},j=function(N){return B===D.COMPAT?Vi()-N:B===D.ADVANCED?N:void 0},$=function(N){return L(j(N))};m.__private__.setPrecision=m.setPrecision=function(N){typeof parseInt(N,10)=="number"&&(e=parseInt(N,10))};var ne,U="00000000000000000000000000000000",z=m.__private__.getFileId=function(){return U},te=m.__private__.setFileId=function(N){return U=N!==void 0&&/^[a-fA-F0-9]{32}$/.test(N)?N.toUpperCase():U.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),h!==null&&(Jn=new Zh(h.userPermissions,h.userPassword,h.ownerPassword,U)),U};m.setFileId=function(N){return te(N),this},m.getFileId=function(){return z()};var ue=m.__private__.convertDateToPDFDate=function(N){var J=N.getTimezoneOffset(),pe=J<0?"+":"-",xe=Math.floor(Math.abs(J/60)),Ie=Math.abs(J%60),Ve=[pe,ee(xe),"'",ee(Ie),"'"].join("");return["D:",N.getFullYear(),ee(N.getMonth()+1),ee(N.getDate()),ee(N.getHours()),ee(N.getMinutes()),ee(N.getSeconds()),Ve].join("")},X=m.__private__.convertPDFDateToDate=function(N){var J=parseInt(N.substr(2,4),10),pe=parseInt(N.substr(6,2),10)-1,xe=parseInt(N.substr(8,2),10),Ie=parseInt(N.substr(10,2),10),Ve=parseInt(N.substr(12,2),10),tt=parseInt(N.substr(14,2),10);return new Date(J,pe,xe,Ie,Ve,tt,0)},me=m.__private__.setCreationDate=function(N){var J;if(N===void 0&&(N=new Date),N instanceof Date)J=ue(N);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(N))throw new Error("Invalid argument passed to jsPDF.setCreationDate");J=N}return ne=J},G=m.__private__.getCreationDate=function(N){var J=ne;return N==="jsDate"&&(J=X(ne)),J};m.setCreationDate=function(N){return me(N),this},m.getCreationDate=function(N){return G(N)};var Q,ee=m.__private__.padd2=function(N){return("0"+parseInt(N)).slice(-2)},ie=m.__private__.padd2Hex=function(N){return("00"+(N=N.toString())).substr(N.length)},de=0,Ee=[],be=[],Te=0,Ge=[],He=[],rt=!1,st=be,wt=function(){de=0,Te=0,be=[],Ee=[],Ge=[],Zi=Ir(),pi=Ir()};m.__private__.setCustomOutputDestination=function(N){rt=!0,st=N};var Be=function(N){rt||(st=N)};m.__private__.resetCustomOutputDestination=function(){rt=!1,st=be};var ge=m.__private__.out=function(N){return N=N.toString(),Te+=N.length+1,st.push(N),st},gt=m.__private__.write=function(N){return ge(arguments.length===1?N.toString():Array.prototype.join.call(arguments," "))},lt=m.__private__.getArrayBuffer=function(N){for(var J=N.length,pe=new ArrayBuffer(J),xe=new Uint8Array(pe);J--;)xe[J]=N.charCodeAt(J);return pe},Xe=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];m.__private__.getStandardFonts=function(){return Xe};var it=n.fontSize||16;m.__private__.setFontSize=m.setFontSize=function(N){return it=B===D.ADVANCED?N/ut:N,this};var at,ot=m.__private__.getFontSize=m.getFontSize=function(){return B===D.COMPAT?it:it*ut},ct=n.R2L||!1;m.__private__.setR2L=m.setR2L=function(N){return ct=N,this},m.__private__.getR2L=m.getR2L=function(){return ct};var mt,Rt=m.__private__.setZoomMode=function(N){var J=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(N))at=N;else if(isNaN(N)){if(J.indexOf(N)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+N+'" is not recognized.');at=N}else at=parseInt(N,10)};m.__private__.getZoomMode=function(){return at};var _t,bt=m.__private__.setPageMode=function(N){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(N)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+N+'" is not recognized.');mt=N};m.__private__.getPageMode=function(){return mt};var Nt=m.__private__.setLayoutMode=function(N){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(N)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+N+'" is not recognized.');_t=N};m.__private__.getLayoutMode=function(){return _t},m.__private__.setDisplayMode=m.setDisplayMode=function(N,J,pe){return Rt(N),Nt(J),bt(pe),this};var xt={title:"",subject:"",author:"",keywords:"",creator:""};m.__private__.getDocumentProperty=function(N){if(Object.keys(xt).indexOf(N)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return xt[N]},m.__private__.getDocumentProperties=function(){return xt},m.__private__.setDocumentProperties=m.setProperties=m.setDocumentProperties=function(N){for(var J in xt)xt.hasOwnProperty(J)&&N[J]&&(xt[J]=N[J]);return this},m.__private__.setDocumentProperty=function(N,J){if(Object.keys(xt).indexOf(N)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return xt[N]=J};var Ot,ut,mn,Vt,Xn,Yt={},An={},di=[],on={},da={},Cn={},Lr={},or=null,vn=0,Tt=[],tn=new y4(m),Ei=n.hotfixes||[],kn={},dr={},ja=[],vt=function N(J,pe,xe,Ie,Ve,tt){if(!(this instanceof N))return new N(J,pe,xe,Ie,Ve,tt);isNaN(J)&&(J=1),isNaN(pe)&&(pe=0),isNaN(xe)&&(xe=0),isNaN(Ie)&&(Ie=1),isNaN(Ve)&&(Ve=0),isNaN(tt)&&(tt=0),this._matrix=[J,pe,xe,Ie,Ve,tt]};Object.defineProperty(vt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(N){this._matrix[0]=N}}),Object.defineProperty(vt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(N){this._matrix[1]=N}}),Object.defineProperty(vt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(N){this._matrix[2]=N}}),Object.defineProperty(vt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(N){this._matrix[3]=N}}),Object.defineProperty(vt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(N){this._matrix[4]=N}}),Object.defineProperty(vt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(N){this._matrix[5]=N}}),Object.defineProperty(vt.prototype,"a",{get:function(){return this._matrix[0]},set:function(N){this._matrix[0]=N}}),Object.defineProperty(vt.prototype,"b",{get:function(){return this._matrix[1]},set:function(N){this._matrix[1]=N}}),Object.defineProperty(vt.prototype,"c",{get:function(){return this._matrix[2]},set:function(N){this._matrix[2]=N}}),Object.defineProperty(vt.prototype,"d",{get:function(){return this._matrix[3]},set:function(N){this._matrix[3]=N}}),Object.defineProperty(vt.prototype,"e",{get:function(){return this._matrix[4]},set:function(N){this._matrix[4]=N}}),Object.defineProperty(vt.prototype,"f",{get:function(){return this._matrix[5]},set:function(N){this._matrix[5]=N}}),Object.defineProperty(vt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(vt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(vt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(vt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),vt.prototype.join=function(N){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(P).join(N)},vt.prototype.multiply=function(N){var J=N.sx*this.sx+N.shy*this.shx,pe=N.sx*this.shy+N.shy*this.sy,xe=N.shx*this.sx+N.sy*this.shx,Ie=N.shx*this.shy+N.sy*this.sy,Ve=N.tx*this.sx+N.ty*this.shx+this.tx,tt=N.tx*this.shy+N.ty*this.sy+this.ty;return new vt(J,pe,xe,Ie,Ve,tt)},vt.prototype.decompose=function(){var N=this.sx,J=this.shy,pe=this.shx,xe=this.sy,Ie=this.tx,Ve=this.ty,tt=Math.sqrt(N*N+J*J),ht=(N/=tt)*pe+(J/=tt)*xe;pe-=N*ht,xe-=J*ht;var x=Math.sqrt(pe*pe+xe*xe);return ht/=x,N*(xe/=x)<J*(pe/=x)&&(N=-N,J=-J,ht=-ht,tt=-tt),{scale:new vt(tt,0,0,x,0,0),translate:new vt(1,0,0,1,Ie,Ve),rotate:new vt(N,J,-J,N,0,0),skew:new vt(1,0,ht,1,0,0)}},vt.prototype.toString=function(N){return this.join(" ")},vt.prototype.inversed=function(){var N=this.sx,J=this.shy,pe=this.shx,xe=this.sy,Ie=this.tx,Ve=this.ty,tt=1/(N*xe-J*pe),ht=xe*tt,x=-J*tt,F=-pe*tt,W=N*tt;return new vt(ht,x,F,W,-ht*Ie-F*Ve,-x*Ie-W*Ve)},vt.prototype.applyToPoint=function(N){var J=N.x*this.sx+N.y*this.shx+this.tx,pe=N.x*this.shy+N.y*this.sy+this.ty;return new Os(J,pe)},vt.prototype.applyToRectangle=function(N){var J=this.applyToPoint(N),pe=this.applyToPoint(new Os(N.x+N.w,N.y+N.h));return new xl(J.x,J.y,pe.x-J.x,pe.y-J.y)},vt.prototype.clone=function(){var N=this.sx,J=this.shy,pe=this.shx,xe=this.sy,Ie=this.tx,Ve=this.ty;return new vt(N,J,pe,xe,Ie,Ve)},m.Matrix=vt;var Hn=m.matrixMult=function(N,J){return J.multiply(N)},Gn=new vt(1,0,0,1,0,0);m.unitMatrix=m.identityMatrix=Gn;var pr=function(N,J){if(!da[N]){var pe=(J instanceof Gf?"Sh":"P")+(Object.keys(on).length+1).toString(10);J.id=pe,da[N]=pe,on[pe]=J,tn.publish("addPattern",J)}};m.ShadingPattern=Gf,m.TilingPattern=id,m.addShadingPattern=function(N,J){return E("addShadingPattern()"),pr(N,J),this},m.beginTilingPattern=function(N){E("beginTilingPattern()"),is(N.boundingBox[0],N.boundingBox[1],N.boundingBox[2]-N.boundingBox[0],N.boundingBox[3]-N.boundingBox[1],N.matrix)},m.endTilingPattern=function(N,J){E("endTilingPattern()"),J.stream=He[Q].join(`
`),pr(N,J),tn.publish("endTilingPattern",J),ja.pop().restore()};var wr=m.__private__.newObject=function(){var N=Ir();return Hr(N,!0),N},Ir=m.__private__.newObjectDeferred=function(){return de++,Ee[de]=function(){return Te},de},Hr=function(N,J){return J=typeof J=="boolean"&&J,Ee[N]=Te,J&&ge(N+" 0 obj"),N},Es=m.__private__.newAdditionalObject=function(){var N={objId:Ir(),content:""};return Ge.push(N),N},Zi=Ir(),pi=Ir(),ei=m.__private__.decodeColorString=function(N){var J=N.split(" ");if(J.length!==2||J[1]!=="g"&&J[1]!=="G")J.length===5&&(J[4]==="k"||J[4]==="K")&&(J=[(1-J[0])*(1-J[3]),(1-J[1])*(1-J[3]),(1-J[2])*(1-J[3]),"r"]);else{var pe=parseFloat(J[0]);J=[pe,pe,pe,"r"]}for(var xe="#",Ie=0;Ie<3;Ie++)xe+=("0"+Math.floor(255*parseFloat(J[Ie])).toString(16)).slice(-2);return xe},Gr=m.__private__.encodeColorString=function(N){var J;typeof N=="string"&&(N={ch1:N});var pe=N.ch1,xe=N.ch2,Ie=N.ch3,Ve=N.ch4,tt=N.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof pe=="string"&&pe.charAt(0)!=="#"){var ht=new r8(pe);if(ht.ok)pe=ht.toHex();else if(!/^\d*\.?\d*$/.test(pe))throw new Error('Invalid color "'+pe+'" passed to jsPDF.encodeColorString.')}if(typeof pe=="string"&&/^#[0-9A-Fa-f]{3}$/.test(pe)&&(pe="#"+pe[1]+pe[1]+pe[2]+pe[2]+pe[3]+pe[3]),typeof pe=="string"&&/^#[0-9A-Fa-f]{6}$/.test(pe)){var x=parseInt(pe.substr(1),16);pe=x>>16&255,xe=x>>8&255,Ie=255&x}if(xe===void 0||Ve===void 0&&pe===xe&&xe===Ie)if(typeof pe=="string")J=pe+" "+tt[0];else switch(N.precision){case 2:J=M(pe/255)+" "+tt[0];break;case 3:default:J=R(pe/255)+" "+tt[0]}else if(Ve===void 0||ar(Ve)==="object"){if(Ve&&!isNaN(Ve.a)&&Ve.a===0)return J=["1.","1.","1.",tt[1]].join(" ");if(typeof pe=="string")J=[pe,xe,Ie,tt[1]].join(" ");else switch(N.precision){case 2:J=[M(pe/255),M(xe/255),M(Ie/255),tt[1]].join(" ");break;default:case 3:J=[R(pe/255),R(xe/255),R(Ie/255),tt[1]].join(" ")}}else if(typeof pe=="string")J=[pe,xe,Ie,Ve,tt[2]].join(" ");else switch(N.precision){case 2:J=[M(pe),M(xe),M(Ie),M(Ve),tt[2]].join(" ");break;case 3:default:J=[R(pe),R(xe),R(Ie),R(Ve),tt[2]].join(" ")}return J},ti=m.__private__.getFilters=function(){return o},sr=m.__private__.putStream=function(N){var J=(N=N||{}).data||"",pe=N.filters||ti(),xe=N.alreadyAppliedFilters||[],Ie=N.addLength1||!1,Ve=J.length,tt=N.objectId,ht=function(jt){return jt};if(h!==null&&tt===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");h!==null&&(ht=Jn.encryptor(tt,0));var x={};pe===!0&&(pe=["FlateEncode"]);var F=N.additionalKeyValues||[],W=(x=qt.API.processDataByFilters!==void 0?qt.API.processDataByFilters(J,pe):{data:J,reverseChain:[]}).reverseChain+(Array.isArray(xe)?xe.join(" "):xe.toString());if(x.data.length!==0&&(F.push({key:"Length",value:x.data.length}),Ie===!0&&F.push({key:"Length1",value:Ve})),W.length!=0)if(W.split("/").length-1==1)F.push({key:"Filter",value:W});else{F.push({key:"Filter",value:"["+W+"]"});for(var se=0;se<F.length;se+=1)if(F[se].key==="DecodeParms"){for(var Ce=[],Le=0;Le<x.reverseChain.split("/").length-1;Le+=1)Ce.push("null");Ce.push(F[se].value),F[se].value="["+Ce.join(" ")+"]"}}ge("<<");for(var nt=0;nt<F.length;nt++)ge("/"+F[nt].key+" "+F[nt].value);ge(">>"),x.data.length!==0&&(ge("stream"),ge(ht(x.data)),ge("endstream"))},Mn=m.__private__.putPage=function(N){var J=N.number,pe=N.data,xe=N.objId,Ie=N.contentsObjId;Hr(xe,!0),ge("<</Type /Page"),ge("/Parent "+N.rootDictionaryObjId+" 0 R"),ge("/Resources "+N.resourceDictionaryObjId+" 0 R"),ge("/MediaBox ["+parseFloat(P(N.mediaBox.bottomLeftX))+" "+parseFloat(P(N.mediaBox.bottomLeftY))+" "+P(N.mediaBox.topRightX)+" "+P(N.mediaBox.topRightY)+"]"),N.cropBox!==null&&ge("/CropBox ["+P(N.cropBox.bottomLeftX)+" "+P(N.cropBox.bottomLeftY)+" "+P(N.cropBox.topRightX)+" "+P(N.cropBox.topRightY)+"]"),N.bleedBox!==null&&ge("/BleedBox ["+P(N.bleedBox.bottomLeftX)+" "+P(N.bleedBox.bottomLeftY)+" "+P(N.bleedBox.topRightX)+" "+P(N.bleedBox.topRightY)+"]"),N.trimBox!==null&&ge("/TrimBox ["+P(N.trimBox.bottomLeftX)+" "+P(N.trimBox.bottomLeftY)+" "+P(N.trimBox.topRightX)+" "+P(N.trimBox.topRightY)+"]"),N.artBox!==null&&ge("/ArtBox ["+P(N.artBox.bottomLeftX)+" "+P(N.artBox.bottomLeftY)+" "+P(N.artBox.topRightX)+" "+P(N.artBox.topRightY)+"]"),typeof N.userUnit=="number"&&N.userUnit!==1&&ge("/UserUnit "+N.userUnit),tn.publish("putPage",{objId:xe,pageContext:Tt[J],pageNumber:J,page:pe}),ge("/Contents "+Ie+" 0 R"),ge(">>"),ge("endobj");var Ve=pe.join(`
`);return B===D.ADVANCED&&(Ve+=`
Q`),Hr(Ie,!0),sr({data:Ve,filters:ti(),objectId:Ie}),ge("endobj"),xe},Eo=m.__private__.putPages=function(){var N,J,pe=[];for(N=1;N<=vn;N++)Tt[N].objId=Ir(),Tt[N].contentsObjId=Ir();for(N=1;N<=vn;N++)pe.push(Mn({number:N,data:He[N],objId:Tt[N].objId,contentsObjId:Tt[N].contentsObjId,mediaBox:Tt[N].mediaBox,cropBox:Tt[N].cropBox,bleedBox:Tt[N].bleedBox,trimBox:Tt[N].trimBox,artBox:Tt[N].artBox,userUnit:Tt[N].userUnit,rootDictionaryObjId:Zi,resourceDictionaryObjId:pi}));Hr(Zi,!0),ge("<</Type /Pages");var xe="/Kids [";for(J=0;J<vn;J++)xe+=pe[J]+" 0 R ";ge(xe+"]"),ge("/Count "+vn),ge(">>"),ge("endobj"),tn.publish("postPutPages")},So=function(N){tn.publish("putFont",{font:N,out:ge,newObject:wr,putStream:sr}),N.isAlreadyPutted!==!0&&(N.objectNumber=wr(),ge("<<"),ge("/Type /Font"),ge("/BaseFont /"+Jh(N.postScriptName)),ge("/Subtype /Type1"),typeof N.encoding=="string"&&ge("/Encoding /"+N.encoding),ge("/FirstChar 32"),ge("/LastChar 255"),ge(">>"),ge("endobj"))},Bi=function(){for(var N in Yt)Yt.hasOwnProperty(N)&&(p===!1||p===!0&&g.hasOwnProperty(N))&&So(Yt[N])},pa=function(N){N.objectNumber=wr();var J=[];J.push({key:"Type",value:"/XObject"}),J.push({key:"Subtype",value:"/Form"}),J.push({key:"BBox",value:"["+[P(N.x),P(N.y),P(N.x+N.width),P(N.y+N.height)].join(" ")+"]"}),J.push({key:"Matrix",value:"["+N.matrix.toString()+"]"});var pe=N.pages[1].join(`
`);sr({data:pe,additionalKeyValues:J,objectId:N.objectNumber}),ge("endobj")},Ss=function(){for(var N in kn)kn.hasOwnProperty(N)&&pa(kn[N])},lu=function(N,J){var pe,xe=[],Ie=1/(J-1);for(pe=0;pe<1;pe+=Ie)xe.push(pe);if(xe.push(1),N[0].offset!=0){var Ve={offset:0,color:N[0].color};N.unshift(Ve)}if(N[N.length-1].offset!=1){var tt={offset:1,color:N[N.length-1].color};N.push(tt)}for(var ht="",x=0,F=0;F<xe.length;F++){for(pe=xe[F];pe>N[x+1].offset;)x++;var W=N[x].offset,se=(pe-W)/(N[x+1].offset-W),Ce=N[x].color,Le=N[x+1].color;ht+=ie(Math.round((1-se)*Ce[0]+se*Le[0]).toString(16))+ie(Math.round((1-se)*Ce[1]+se*Le[1]).toString(16))+ie(Math.round((1-se)*Ce[2]+se*Le[2]).toString(16))}return ht.trim()},Cs=function(N,J){J||(J=21);var pe=wr(),xe=lu(N.colors,J),Ie=[];Ie.push({key:"FunctionType",value:"0"}),Ie.push({key:"Domain",value:"[0.0 1.0]"}),Ie.push({key:"Size",value:"["+J+"]"}),Ie.push({key:"BitsPerSample",value:"8"}),Ie.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Ie.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),sr({data:xe,additionalKeyValues:Ie,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:pe}),ge("endobj"),N.objectNumber=wr(),ge("<< /ShadingType "+N.type),ge("/ColorSpace /DeviceRGB");var Ve="/Coords ["+P(parseFloat(N.coords[0]))+" "+P(parseFloat(N.coords[1]))+" ";N.type===2?Ve+=P(parseFloat(N.coords[2]))+" "+P(parseFloat(N.coords[3])):Ve+=P(parseFloat(N.coords[2]))+" "+P(parseFloat(N.coords[3]))+" "+P(parseFloat(N.coords[4]))+" "+P(parseFloat(N.coords[5])),ge(Ve+="]"),N.matrix&&ge("/Matrix ["+N.matrix.toString()+"]"),ge("/Function "+pe+" 0 R"),ge("/Extend [true true]"),ge(">>"),ge("endobj")},ic=function(N,J){var pe=Ir(),xe=wr();J.push({resourcesOid:pe,objectOid:xe}),N.objectNumber=xe;var Ie=[];Ie.push({key:"Type",value:"/Pattern"}),Ie.push({key:"PatternType",value:"1"}),Ie.push({key:"PaintType",value:"1"}),Ie.push({key:"TilingType",value:"1"}),Ie.push({key:"BBox",value:"["+N.boundingBox.map(P).join(" ")+"]"}),Ie.push({key:"XStep",value:P(N.xStep)}),Ie.push({key:"YStep",value:P(N.yStep)}),Ie.push({key:"Resources",value:pe+" 0 R"}),N.matrix&&Ie.push({key:"Matrix",value:"["+N.matrix.toString()+"]"}),sr({data:N.stream,additionalKeyValues:Ie,objectId:N.objectNumber}),ge("endobj")},Ua=function(N){var J;for(J in on)on.hasOwnProperty(J)&&(on[J]instanceof Gf?Cs(on[J]):on[J]instanceof id&&ic(on[J],N))},Va=function(N){for(var J in N.objectNumber=wr(),ge("<<"),N)switch(J){case"opacity":ge("/ca "+M(N[J]));break;case"stroke-opacity":ge("/CA "+M(N[J]))}ge(">>"),ge("endobj")},ni=function(){var N;for(N in Cn)Cn.hasOwnProperty(N)&&Va(Cn[N])},Co=function(){for(var N in ge("/XObject <<"),kn)kn.hasOwnProperty(N)&&kn[N].objectNumber>=0&&ge("/"+N+" "+kn[N].objectNumber+" 0 R");tn.publish("putXobjectDict"),ge(">>")},ac=function(){Jn.oid=wr(),ge("<<"),ge("/Filter /Standard"),ge("/V "+Jn.v),ge("/R "+Jn.r),ge("/U <"+Jn.toHexString(Jn.U)+">"),ge("/O <"+Jn.toHexString(Jn.O)+">"),ge("/P "+Jn.P),ge(">>"),ge("endobj")},Qa=function(){for(var N in ge("/Font <<"),Yt)Yt.hasOwnProperty(N)&&(p===!1||p===!0&&g.hasOwnProperty(N))&&ge("/"+N+" "+Yt[N].objectNumber+" 0 R");ge(">>")},dl=function(){if(Object.keys(on).length>0){for(var N in ge("/Shading <<"),on)on.hasOwnProperty(N)&&on[N]instanceof Gf&&on[N].objectNumber>=0&&ge("/"+N+" "+on[N].objectNumber+" 0 R");tn.publish("putShadingPatternDict"),ge(">>")}},To=function(N){if(Object.keys(on).length>0){for(var J in ge("/Pattern <<"),on)on.hasOwnProperty(J)&&on[J]instanceof m.TilingPattern&&on[J].objectNumber>=0&&on[J].objectNumber<N&&ge("/"+J+" "+on[J].objectNumber+" 0 R");tn.publish("putTilingPatternDict"),ge(">>")}},uu=function(){if(Object.keys(Cn).length>0){var N;for(N in ge("/ExtGState <<"),Cn)Cn.hasOwnProperty(N)&&Cn[N].objectNumber>=0&&ge("/"+N+" "+Cn[N].objectNumber+" 0 R");tn.publish("putGStateDict"),ge(">>")}},lr=function(N){Hr(N.resourcesOid,!0),ge("<<"),ge("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),Qa(),dl(),To(N.objectOid),uu(),Co(),ge(">>"),ge("endobj")},gi=function(){var N=[];Bi(),ni(),Ss(),Ua(N),tn.publish("putResources"),N.forEach(lr),lr({resourcesOid:pi,objectOid:Number.MAX_SAFE_INTEGER}),tn.publish("postPutResources")},pl=function(){tn.publish("putAdditionalObjects");for(var N=0;N<Ge.length;N++){var J=Ge[N];Hr(J.objId,!0),ge(J.content),ge("endobj")}tn.publish("postPutAdditionalObjects")},oc=function(N){An[N.fontName]=An[N.fontName]||{},An[N.fontName][N.fontStyle]=N.id},Yo=function(N,J,pe,xe,Ie){var Ve={id:"F"+(Object.keys(Yt).length+1).toString(10),postScriptName:N,fontName:J,fontStyle:pe,encoding:xe,isStandardFont:Ie||!1,metadata:{}};return tn.publish("addFont",{font:Ve,instance:this}),Yt[Ve.id]=Ve,oc(Ve),Ve.id},cu=function(N){for(var J=0,pe=Xe.length;J<pe;J++){var xe=Yo.call(this,N[J][0],N[J][1],N[J][2],Xe[J][3],!0);p===!1&&(g[xe]=!0);var Ie=N[J][0].split("-");oc({id:xe,fontName:Ie[0],fontStyle:Ie[1]||""})}tn.publish("addFonts",{fonts:Yt,dictionary:An})},Si=function(N){return N.foo=function(){try{return N.apply(this,arguments)}catch(xe){var J=xe.stack||"";~J.indexOf(" at ")&&(J=J.split(" at ")[1]);var pe="Error in function "+J.split(`
`)[0].split("<")[0]+": "+xe.message;if(!Gt.console)throw new Error(pe);Gt.console.error(pe,xe),Gt.alert&&alert(pe)}},N.foo.bar=N,N.foo},gl=function(N,J){var pe,xe,Ie,Ve,tt,ht,x,F,W;if(Ie=(J=J||{}).sourceEncoding||"Unicode",tt=J.outputEncoding,(J.autoencode||tt)&&Yt[Ot].metadata&&Yt[Ot].metadata[Ie]&&Yt[Ot].metadata[Ie].encoding&&(Ve=Yt[Ot].metadata[Ie].encoding,!tt&&Yt[Ot].encoding&&(tt=Yt[Ot].encoding),!tt&&Ve.codePages&&(tt=Ve.codePages[0]),typeof tt=="string"&&(tt=Ve[tt]),tt)){for(x=!1,ht=[],pe=0,xe=N.length;pe<xe;pe++)(F=tt[N.charCodeAt(pe)])?ht.push(String.fromCharCode(F)):ht.push(N[pe]),ht[pe].charCodeAt(0)>>8&&(x=!0);N=ht.join("")}for(pe=N.length;x===void 0&&pe!==0;)N.charCodeAt(pe-1)>>8&&(x=!0),pe--;if(!x)return N;for(ht=J.noBOM?[]:[254,255],pe=0,xe=N.length;pe<xe;pe++){if((W=(F=N.charCodeAt(pe))>>8)>>8)throw new Error("Character at position "+pe+" of string '"+N+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");ht.push(W),ht.push(F-(W<<8))}return String.fromCharCode.apply(void 0,ht)},En=m.__private__.pdfEscape=m.pdfEscape=function(N,J){return gl(N,J).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Ci=m.__private__.beginPage=function(N){He[++vn]=[],Tt[vn]={objId:0,contentsObjId:0,userUnit:Number(s),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(N[0]),topRightY:Number(N[1])}},Za(vn),Be(He[Q])},Ko=function(N,J){var pe,xe,Ie;switch(t=J||t,typeof N=="string"&&(pe=S(N.toLowerCase()),Array.isArray(pe)&&(xe=pe[0],Ie=pe[1])),Array.isArray(N)&&(xe=N[0]*ut,Ie=N[1]*ut),isNaN(xe)&&(xe=i[0],Ie=i[1]),(xe>14400||Ie>14400)&&(mr.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),xe=Math.min(14400,xe),Ie=Math.min(14400,Ie)),i=[xe,Ie],t.substr(0,1)){case"l":Ie>xe&&(i=[Ie,xe]);break;case"p":xe>Ie&&(i=[Ie,xe])}Ci(i),pu(es),ge(Ti),gu!==0&&ge(gu+" J"),Ns!==0&&ge(Ns+" j"),tn.publish("addPage",{pageNumber:vn})},Qo=function(N){N>0&&N<=vn&&(He.splice(N,1),Tt.splice(N,1),vn--,Q>vn&&(Q=vn),this.setPage(Q))},Za=function(N){N>0&&N<=vn&&(Q=N)},Bn=m.__private__.getNumberOfPages=m.getNumberOfPages=function(){return He.length-1},Zo=function(N,J,pe){var xe,Ie=void 0;return pe=pe||{},N=N!==void 0?N:Yt[Ot].fontName,J=J!==void 0?J:Yt[Ot].fontStyle,xe=N.toLowerCase(),An[xe]!==void 0&&An[xe][J]!==void 0?Ie=An[xe][J]:An[N]!==void 0&&An[N][J]!==void 0?Ie=An[N][J]:pe.disableWarning===!1&&mr.warn("Unable to look up font label for font '"+N+"', '"+J+"'. Refer to getFontList() for available fonts."),Ie||pe.noFallback||(Ie=An.times[J])==null&&(Ie=An.times.normal),Ie},ga=m.__private__.putInfo=function(){var N=wr(),J=function(xe){return xe};for(var pe in h!==null&&(J=Jn.encryptor(N,0)),ge("<<"),ge("/Producer ("+En(J("jsPDF "+qt.version))+")"),xt)xt.hasOwnProperty(pe)&&xt[pe]&&ge("/"+pe.substr(0,1).toUpperCase()+pe.substr(1)+" ("+En(J(xt[pe]))+")");ge("/CreationDate ("+En(J(ne))+")"),ge(">>"),ge("endobj")},Io=m.__private__.putCatalog=function(N){var J=(N=N||{}).rootDictionaryObjId||Zi;switch(wr(),ge("<<"),ge("/Type /Catalog"),ge("/Pages "+J+" 0 R"),at||(at="fullwidth"),at){case"fullwidth":ge("/OpenAction [3 0 R /FitH null]");break;case"fullheight":ge("/OpenAction [3 0 R /FitV null]");break;case"fullpage":ge("/OpenAction [3 0 R /Fit]");break;case"original":ge("/OpenAction [3 0 R /XYZ null null 1]");break;default:var pe=""+at;pe.substr(pe.length-1)==="%"&&(at=parseInt(at)/100),typeof at=="number"&&ge("/OpenAction [3 0 R /XYZ null null "+M(at)+"]")}switch(_t||(_t="continuous"),_t){case"continuous":ge("/PageLayout /OneColumn");break;case"single":ge("/PageLayout /SinglePage");break;case"two":case"twoleft":ge("/PageLayout /TwoColumnLeft");break;case"tworight":ge("/PageLayout /TwoColumnRight")}mt&&ge("/PageMode /"+mt),tn.publish("putCatalog"),ge(">>"),ge("endobj")},sc=m.__private__.putTrailer=function(){ge("trailer"),ge("<<"),ge("/Size "+(de+1)),ge("/Root "+de+" 0 R"),ge("/Info "+(de-1)+" 0 R"),h!==null&&ge("/Encrypt "+Jn.oid+" 0 R"),ge("/ID [ <"+U+"> <"+U+"> ]"),ge(">>")},fu=m.__private__.putHeader=function(){ge("%PDF-"+_),ge("%ºß¬à")},hu=m.__private__.putXRef=function(){var N="0000000000";ge("xref"),ge("0 "+(de+1)),ge("0000000000 65535 f ");for(var J=1;J<=de;J++)typeof Ee[J]=="function"?ge((N+Ee[J]()).slice(-10)+" 00000 n "):Ee[J]!==void 0?ge((N+Ee[J]).slice(-10)+" 00000 n "):ge("0000000000 00000 n ")},Ro=m.__private__.buildDocument=function(){wt(),Be(be),tn.publish("buildDocument"),fu(),Eo(),pl(),gi(),h!==null&&ac(),ga(),Io();var N=Te;return hu(),sc(),ge("startxref"),ge(""+N),ge("%%EOF"),Be(He[Q]),be.join(`
`)},ml=m.__private__.getBlob=function(N){return new Blob([lt(N)],{type:"application/pdf"})},No=m.output=m.__private__.output=Si(function(N,J){switch(typeof(J=J||{})=="string"?J={filename:J}:J.filename=J.filename||"generated.pdf",N){case void 0:return Ro();case"save":m.save(J.filename);break;case"arraybuffer":return lt(Ro());case"blob":return ml(Ro());case"bloburi":case"bloburl":if(Gt.URL!==void 0&&typeof Gt.URL.createObjectURL=="function")return Gt.URL&&Gt.URL.createObjectURL(ml(Ro()))||void 0;mr.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var pe="",xe=Ro();try{pe=By(xe)}catch{pe=By(unescape(encodeURIComponent(xe)))}return"data:application/pdf;filename="+J.filename+";base64,"+pe;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Gt)==="[object Window]"){var Ie="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Ve=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';J.pdfObjectUrl&&(Ie=J.pdfObjectUrl,Ve="");var tt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Ie+'"'+Ve+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(J)+");<\/script></body></html>",ht=Gt.open();return ht!==null&&ht.document.write(tt),ht}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Gt)==="[object Window]"){var x='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(J.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+J.filename+'" width="500px" height="400px" /></body></html>',F=Gt.open();if(F!==null){F.document.write(x);var W=this;F.document.documentElement.querySelector("#pdfViewer").onload=function(){F.document.title=J.filename,F.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(W.output("bloburl"))}}return F}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Gt)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var se='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",J)+'"></iframe></body></html>',Ce=Gt.open();if(Ce!==null&&(Ce.document.write(se),Ce.document.title=J.filename),Ce||typeof safari>"u")return Ce;break;case"datauri":case"dataurl":return Gt.document.location.href=this.output("datauristring",J);default:return null}}),Ja=function(N){return Array.isArray(Ei)===!0&&Ei.indexOf(N)>-1};switch(r){case"pt":ut=1;break;case"mm":ut=72/25.4;break;case"cm":ut=72/2.54;break;case"in":ut=72;break;case"px":ut=Ja("px_scaling")==1?.75:96/72;break;case"pc":case"em":ut=12;break;case"ex":ut=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);ut=r}var Jn=null;me(),te();var Oo=function(N){return h!==null?Jn.encryptor(N,0):function(J){return J}},eo=m.__private__.getPageInfo=m.getPageInfo=function(N){if(isNaN(N)||N%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Tt[N].objId,pageNumber:N,pageContext:Tt[N]}},Ft=m.__private__.getPageInfoByObjId=function(N){if(isNaN(N)||N%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var J in Tt)if(Tt[J].objId===N)break;return eo(J)},to=m.__private__.getCurrentPageInfo=m.getCurrentPageInfo=function(){return{objId:Tt[Q].objId,pageNumber:Q,pageContext:Tt[Q]}};m.addPage=function(){return Ko.apply(this,arguments),this},m.setPage=function(){return Za.apply(this,arguments),Be.call(this,He[Q]),this},m.insertPage=function(N){return this.addPage(),this.movePage(Q,N),this},m.movePage=function(N,J){var pe,xe;if(N>J){pe=He[N],xe=Tt[N];for(var Ie=N;Ie>J;Ie--)He[Ie]=He[Ie-1],Tt[Ie]=Tt[Ie-1];He[J]=pe,Tt[J]=xe,this.setPage(J)}else if(N<J){pe=He[N],xe=Tt[N];for(var Ve=N;Ve<J;Ve++)He[Ve]=He[Ve+1],Tt[Ve]=Tt[Ve+1];He[J]=pe,Tt[J]=xe,this.setPage(J)}return this},m.deletePage=function(){return Qo.apply(this,arguments),this},m.__private__.text=m.text=function(N,J,pe,xe,Ie){var Ve,tt,ht,x,F,W,se,Ce,Le,nt=(xe=xe||{}).scope||this;if(typeof N=="number"&&typeof J=="number"&&(typeof pe=="string"||Array.isArray(pe))){var jt=pe;pe=J,J=N,N=jt}if(arguments[3]instanceof vt?(E("The transform parameter of text() with a Matrix value"),Le=Ie):(ht=arguments[4],x=arguments[5],ar(se=arguments[3])==="object"&&se!==null||(typeof ht=="string"&&(x=ht,ht=null),typeof se=="string"&&(x=se,se=null),typeof se=="number"&&(ht=se,se=null),xe={flags:se,angle:ht,align:x})),isNaN(J)||isNaN(pe)||N==null)throw new Error("Invalid arguments passed to jsPDF.text");if(N.length===0)return nt;var dn="",Kt=!1,Fn=typeof xe.lineHeightFactor=="number"?xe.lineHeightFactor:hn,Yn=nt.internal.scaleFactor;function ao(ln){return ln=ln.split("	").join(Array(xe.TabLen||9).join(" ")),En(ln,se)}function kr(ln){for(var un,ur=ln.concat(),Mr=[],so=ur.length;so--;)typeof(un=ur.shift())=="string"?Mr.push(un):Array.isArray(ln)&&(un.length===1||un[1]===void 0&&un[2]===void 0)?Mr.push(un[0]):Mr.push([un[0],un[1],un[2]]);return Mr}function xa(ln,un){var ur;if(typeof ln=="string")ur=un(ln)[0];else if(Array.isArray(ln)){for(var Mr,so,Nl=ln.concat(),Ol=[],Ms=Nl.length;Ms--;)typeof(Mr=Nl.shift())=="string"?Ol.push(un(Mr)[0]):Array.isArray(Mr)&&typeof Mr[0]=="string"&&(so=un(Mr[0],Mr[1],Mr[2]),Ol.push([so[0],so[1],so[2]]));ur=Ol}return ur}var os=!1,wl=!0;if(typeof N=="string")os=!0;else if(Array.isArray(N)){var fc=N.concat();tt=[];for(var mu,ri=fc.length;ri--;)(typeof(mu=fc.shift())!="string"||Array.isArray(mu)&&typeof mu[0]!="string")&&(wl=!1);os=wl}if(os===!1)throw new Error('Type of text must be string or Array. "'+N+'" is not recognized.');typeof N=="string"&&(N=N.match(/[\r?\n]/)?N.split(/\r\n|\r|\n/g):[N]);var bl=it/nt.internal.scaleFactor,vu=bl*(Fn-1);switch(xe.baseline){case"bottom":pe-=vu;break;case"top":pe+=bl-vu;break;case"hanging":pe+=bl-2*vu;break;case"middle":pe+=bl/2-vu}if((W=xe.maxWidth||0)>0&&(typeof N=="string"?N=nt.splitTextToSize(N,W):Object.prototype.toString.call(N)==="[object Array]"&&(N=N.reduce(function(ln,un){return ln.concat(nt.splitTextToSize(un,W))},[]))),Ve={text:N,x:J,y:pe,options:xe,mutex:{pdfEscape:En,activeFontKey:Ot,fonts:Yt,activeFontSize:it}},tn.publish("preProcessText",Ve),N=Ve.text,ht=(xe=Ve.options).angle,!(Le instanceof vt)&&ht&&typeof ht=="number"){ht*=Math.PI/180,xe.rotationDirection===0&&(ht=-ht),B===D.ADVANCED&&(ht=-ht);var yu=Math.cos(ht),hc=Math.sin(ht);Le=new vt(yu,hc,-hc,yu,0,0)}else ht&&ht instanceof vt&&(Le=ht);B!==D.ADVANCED||Le||(Le=Gn),(F=xe.charSpace||Rs)!==void 0&&(dn+=P(L(F))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Ce=xe.horizontalScale)!==void 0&&(dn+=P(100*Ce)+` Tz
`),xe.lang;var _a=-1,Dd=xe.renderingMode!==void 0?xe.renderingMode:xe.stroke,yf=nt.internal.getCurrentPageInfo().pageContext;switch(Dd){case 0:case!1:case"fill":_a=0;break;case 1:case!0:case"stroke":_a=1;break;case 2:case"fillThenStroke":_a=2;break;case 3:case"invisible":_a=3;break;case 4:case"fillAndAddForClipping":_a=4;break;case 5:case"strokeAndAddPathForClipping":_a=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":_a=6;break;case 7:case"addToPathForClipping":_a=7}var ph=yf.usedRenderingMode!==void 0?yf.usedRenderingMode:-1;_a!==-1?dn+=_a+` Tr
`:ph!==-1&&(dn+=`0 Tr
`),_a!==-1&&(yf.usedRenderingMode=_a),x=xe.align||"left";var oo,mi=it*Fn,Al=nt.internal.pageSize.getWidth(),xf=Yt[Ot];F=xe.charSpace||Rs,W=xe.maxWidth||0,se=Object.assign({autoencode:!0,noBOM:!0},xe.flags);var Ls=[],El=function(ln){return nt.getStringUnitWidth(ln,{font:xf,charSpace:F,fontSize:it,doKerning:!1})*it/Yn};if(Object.prototype.toString.call(N)==="[object Array]"){var ea;tt=kr(N),x!=="left"&&(oo=tt.map(El));var Ii,Sl=0;if(x==="right"){J-=oo[0],N=[],ri=tt.length;for(var wa=0;wa<ri;wa++)wa===0?(Ii=Ui(J),ea=$r(pe)):(Ii=L(Sl-oo[wa]),ea=-mi),N.push([tt[wa],Ii,ea]),Sl=oo[wa]}else if(x==="center"){J-=oo[0]/2,N=[],ri=tt.length;for(var ko=0;ko<ri;ko++)ko===0?(Ii=Ui(J),ea=$r(pe)):(Ii=L((Sl-oo[ko])/2),ea=-mi),N.push([tt[ko],Ii,ea]),Sl=oo[ko]}else if(x==="left"){N=[],ri=tt.length;for(var ss=0;ss<ri;ss++)N.push(tt[ss])}else if(x==="justify"&&xf.encoding==="Identity-H"){N=[],ri=tt.length,W=W!==0?W:Al;for(var Mo=0,Rr=0;Rr<ri;Rr++)if(ea=Rr===0?$r(pe):-mi,Ii=Rr===0?Ui(J):Mo,Rr<ri-1){var Bo=L((W-oo[Rr])/(tt[Rr].split(" ").length-1)),Xr=tt[Rr].split(" ");N.push([Xr[0]+" ",Ii,ea]),Mo=0;for(var ba=1;ba<Xr.length;ba++){var xu=(El(Xr[ba-1]+" "+Xr[ba])-El(Xr[ba]))*Yn+Bo;ba==Xr.length-1?N.push([Xr[ba],xu,0]):N.push([Xr[ba]+" ",xu,0]),Mo-=xu}}else N.push([tt[Rr],Ii,ea]);N.push(["",Mo,0])}else{if(x!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(N=[],ri=tt.length,W=W!==0?W:Al,Rr=0;Rr<ri;Rr++)ea=Rr===0?$r(pe):-mi,Ii=Rr===0?Ui(J):0,Rr<ri-1?Ls.push(P(L((W-oo[Rr])/(tt[Rr].split(" ").length-1)))):Ls.push(0),N.push([tt[Rr],Ii,ea])}}var ls=typeof xe.R2L=="boolean"?xe.R2L:ct;ls===!0&&(N=xa(N,function(ln,un,ur){return[ln.split("").reverse().join(""),un,ur]})),Ve={text:N,x:J,y:pe,options:xe,mutex:{pdfEscape:En,activeFontKey:Ot,fonts:Yt,activeFontSize:it}},tn.publish("postProcessText",Ve),N=Ve.text,Kt=Ve.mutex.isHex||!1;var dc=Yt[Ot].encoding;dc!=="WinAnsiEncoding"&&dc!=="StandardEncoding"||(N=xa(N,function(ln,un,ur){return[ao(ln),un,ur]})),tt=kr(N),N=[];for(var Cl,Tl,Il,_u=0,pc=1,Rl=Array.isArray(tt[0])?pc:_u,ks="",wu=function(ln,un,ur){var Mr="";return ur instanceof vt?(ur=typeof xe.angle=="number"?Hn(ur,new vt(1,0,0,1,ln,un)):Hn(new vt(1,0,0,1,ln,un),ur),B===D.ADVANCED&&(ur=Hn(new vt(1,0,0,-1,0,0),ur)),Mr=ur.join(" ")+` Tm
`):Mr=P(ln)+" "+P(un)+` Td
`,Mr},Nr=0;Nr<tt.length;Nr++){switch(ks="",Rl){case pc:Il=(Kt?"<":"(")+tt[Nr][0]+(Kt?">":")"),Cl=parseFloat(tt[Nr][1]),Tl=parseFloat(tt[Nr][2]);break;case _u:Il=(Kt?"<":"(")+tt[Nr]+(Kt?">":")"),Cl=Ui(J),Tl=$r(pe)}Ls!==void 0&&Ls[Nr]!==void 0&&(ks=Ls[Nr]+` Tw
`),Nr===0?N.push(ks+wu(Cl,Tl,Le)+Il):Rl===_u?N.push(ks+Il):Rl===pc&&N.push(ks+wu(Cl,Tl,Le)+Il)}N=Rl===_u?N.join(` Tj
T* `):N.join(` Tj
`),N+=` Tj
`;var qa=`BT
/`;return qa+=Ot+" "+it+` Tf
`,qa+=P(it*Fn)+` TL
`,qa+=Po+`
`,qa+=dn,qa+=N,ge(qa+="ET"),g[Ot]=!0,nt};var lc=m.__private__.clip=m.clip=function(N){return ge(N==="evenodd"?"W*":"W"),this};m.clipEvenOdd=function(){return lc("evenodd")},m.__private__.discardPath=m.discardPath=function(){return ge("n"),this};var Fi=m.__private__.isValidStyle=function(N){var J=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(N)!==-1&&(J=!0),J};m.__private__.setDefaultPathOperation=m.setDefaultPathOperation=function(N){return Fi(N)&&(f=N),this};var ma=m.__private__.getStyle=m.getStyle=function(N){var J=f;switch(N){case"D":case"S":J="S";break;case"F":J="f";break;case"FD":case"DF":J="B";break;case"f":case"f*":case"B":case"B*":J=N}return J},Ji=m.close=function(){return ge("h"),this};m.stroke=function(){return ge("S"),this},m.fill=function(N){return no("f",N),this},m.fillEvenOdd=function(N){return no("f*",N),this},m.fillStroke=function(N){return no("B",N),this},m.fillStrokeEvenOdd=function(N){return no("B*",N),this};var no=function(N,J){ar(J)==="object"?Do(J,N):ge(N)},va=function(N){N===null||B===D.ADVANCED&&N===void 0||(N=ma(N),ge(N))};function Jo(N,J,pe,xe,Ie){var Ve=new id(J||this.boundingBox,pe||this.xStep,xe||this.yStep,this.gState,Ie||this.matrix);Ve.stream=this.stream;var tt=N+"$$"+this.cloneIndex+++"$$";return pr(tt,Ve),Ve}var Do=function(N,J){var pe=da[N.key],xe=on[pe];if(xe instanceof Gf)ge("q"),ge(du(J)),xe.gState&&m.setGState(xe.gState),ge(N.matrix.toString()+" cm"),ge("/"+pe+" sh"),ge("Q");else if(xe instanceof id){var Ie=new vt(1,0,0,-1,0,Vi());N.matrix&&(Ie=Ie.multiply(N.matrix||Gn),pe=Jo.call(xe,N.key,N.boundingBox,N.xStep,N.yStep,Ie).id),ge("q"),ge("/Pattern cs"),ge("/"+pe+" scn"),xe.gState&&m.setGState(xe.gState),ge(J),ge("Q")}},du=function(N){switch(N){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},ya=m.moveTo=function(N,J){return ge(P(L(N))+" "+P($(J))+" m"),this},ji=m.lineTo=function(N,J){return ge(P(L(N))+" "+P($(J))+" l"),this},ro=m.curveTo=function(N,J,pe,xe,Ie,Ve){return ge([P(L(N)),P($(J)),P(L(pe)),P($(xe)),P(L(Ie)),P($(Ve)),"c"].join(" ")),this};m.__private__.line=m.line=function(N,J,pe,xe,Ie){if(isNaN(N)||isNaN(J)||isNaN(pe)||isNaN(xe)||!Fi(Ie))throw new Error("Invalid arguments passed to jsPDF.line");return B===D.COMPAT?this.lines([[pe-N,xe-J]],N,J,[1,1],Ie||"S"):this.lines([[pe-N,xe-J]],N,J,[1,1]).stroke()},m.__private__.lines=m.lines=function(N,J,pe,xe,Ie,Ve){var tt,ht,x,F,W,se,Ce,Le,nt,jt,dn,Kt;if(typeof N=="number"&&(Kt=pe,pe=J,J=N,N=Kt),xe=xe||[1,1],Ve=Ve||!1,isNaN(J)||isNaN(pe)||!Array.isArray(N)||!Array.isArray(xe)||!Fi(Ie)||typeof Ve!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(ya(J,pe),tt=xe[0],ht=xe[1],F=N.length,jt=J,dn=pe,x=0;x<F;x++)(W=N[x]).length===2?(jt=W[0]*tt+jt,dn=W[1]*ht+dn,ji(jt,dn)):(se=W[0]*tt+jt,Ce=W[1]*ht+dn,Le=W[2]*tt+jt,nt=W[3]*ht+dn,jt=W[4]*tt+jt,dn=W[5]*ht+dn,ro(se,Ce,Le,nt,jt,dn));return Ve&&Ji(),va(Ie),this},m.path=function(N){for(var J=0;J<N.length;J++){var pe=N[J],xe=pe.c;switch(pe.op){case"m":ya(xe[0],xe[1]);break;case"l":ji(xe[0],xe[1]);break;case"c":ro.apply(this,xe);break;case"h":Ji()}}return this},m.__private__.rect=m.rect=function(N,J,pe,xe,Ie){if(isNaN(N)||isNaN(J)||isNaN(pe)||isNaN(xe)||!Fi(Ie))throw new Error("Invalid arguments passed to jsPDF.rect");return B===D.COMPAT&&(xe=-xe),ge([P(L(N)),P($(J)),P(L(pe)),P(L(xe)),"re"].join(" ")),va(Ie),this},m.__private__.triangle=m.triangle=function(N,J,pe,xe,Ie,Ve,tt){if(isNaN(N)||isNaN(J)||isNaN(pe)||isNaN(xe)||isNaN(Ie)||isNaN(Ve)||!Fi(tt))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[pe-N,xe-J],[Ie-pe,Ve-xe],[N-Ie,J-Ve]],N,J,[1,1],tt,!0),this},m.__private__.roundedRect=m.roundedRect=function(N,J,pe,xe,Ie,Ve,tt){if(isNaN(N)||isNaN(J)||isNaN(pe)||isNaN(xe)||isNaN(Ie)||isNaN(Ve)||!Fi(tt))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var ht=4/3*(Math.SQRT2-1);return Ie=Math.min(Ie,.5*pe),Ve=Math.min(Ve,.5*xe),this.lines([[pe-2*Ie,0],[Ie*ht,0,Ie,Ve-Ve*ht,Ie,Ve],[0,xe-2*Ve],[0,Ve*ht,-Ie*ht,Ve,-Ie,Ve],[2*Ie-pe,0],[-Ie*ht,0,-Ie,-Ve*ht,-Ie,-Ve],[0,2*Ve-xe],[0,-Ve*ht,Ie*ht,-Ve,Ie,-Ve]],N+Ie,J,[1,1],tt,!0),this},m.__private__.ellipse=m.ellipse=function(N,J,pe,xe,Ie){if(isNaN(N)||isNaN(J)||isNaN(pe)||isNaN(xe)||!Fi(Ie))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Ve=4/3*(Math.SQRT2-1)*pe,tt=4/3*(Math.SQRT2-1)*xe;return ya(N+pe,J),ro(N+pe,J-tt,N+Ve,J-xe,N,J-xe),ro(N-Ve,J-xe,N-pe,J-tt,N-pe,J),ro(N-pe,J+tt,N-Ve,J+xe,N,J+xe),ro(N+Ve,J+xe,N+pe,J+tt,N+pe,J),va(Ie),this},m.__private__.circle=m.circle=function(N,J,pe,xe){if(isNaN(N)||isNaN(J)||isNaN(pe)||!Fi(xe))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(N,J,pe,pe,xe)},m.setFont=function(N,J,pe){return pe&&(J=q(J,pe)),Ot=Zo(N,J,{disableWarning:!1}),this};var Wr=m.__private__.getFont=m.getFont=function(){return Yt[Zo.apply(m,arguments)]};m.__private__.getFontList=m.getFontList=function(){var N,J,pe={};for(N in An)if(An.hasOwnProperty(N))for(J in pe[N]=[],An[N])An[N].hasOwnProperty(J)&&pe[N].push(J);return pe},m.addFont=function(N,J,pe,xe,Ie){var Ve=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Ve.indexOf(arguments[3])!==-1?Ie=arguments[3]:arguments[3]&&Ve.indexOf(arguments[3])==-1&&(pe=q(pe,xe)),Ie=Ie||"Identity-H",Yo.call(this,N,J,pe,Ie)};var hn,es=n.lineWidth||.200025,io=m.__private__.getLineWidth=m.getLineWidth=function(){return es},pu=m.__private__.setLineWidth=m.setLineWidth=function(N){return es=N,ge(P(L(N))+" w"),this};m.__private__.setLineDash=qt.API.setLineDash=qt.API.setLineDashPattern=function(N,J){if(N=N||[],J=J||0,isNaN(J)||!Array.isArray(N))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return N=N.map(function(pe){return P(L(pe))}).join(" "),J=P(L(J)),ge("["+N+"] "+J+" d"),this};var Ts=m.__private__.getLineHeight=m.getLineHeight=function(){return it*hn};m.__private__.getLineHeight=m.getLineHeight=function(){return it*hn};var Is=m.__private__.setLineHeightFactor=m.setLineHeightFactor=function(N){return typeof(N=N||1.15)=="number"&&(hn=N),this},za=m.__private__.getLineHeightFactor=m.getLineHeightFactor=function(){return hn};Is(n.lineHeight);var Ui=m.__private__.getHorizontalCoordinate=function(N){return L(N)},$r=m.__private__.getVerticalCoordinate=function(N){return B===D.ADVANCED?N:Tt[Q].mediaBox.topRightY-Tt[Q].mediaBox.bottomLeftY-L(N)},uc=m.__private__.getHorizontalCoordinateString=m.getHorizontalCoordinateString=function(N){return P(Ui(N))},ts=m.__private__.getVerticalCoordinateString=m.getVerticalCoordinateString=function(N){return P($r(N))},Ti=n.strokeColor||"0 G";m.__private__.getStrokeColor=m.getDrawColor=function(){return ei(Ti)},m.__private__.setStrokeColor=m.setDrawColor=function(N,J,pe,xe){return Ti=Gr({ch1:N,ch2:J,ch3:pe,ch4:xe,pdfColorType:"draw",precision:2}),ge(Ti),this};var ns=n.fillColor||"0 g";m.__private__.getFillColor=m.getFillColor=function(){return ei(ns)},m.__private__.setFillColor=m.setFillColor=function(N,J,pe,xe){return ns=Gr({ch1:N,ch2:J,ch3:pe,ch4:xe,pdfColorType:"fill",precision:2}),ge(ns),this};var Po=n.textColor||"0 g",vl=m.__private__.getTextColor=m.getTextColor=function(){return ei(Po)};m.__private__.setTextColor=m.setTextColor=function(N,J,pe,xe){return Po=Gr({ch1:N,ch2:J,ch3:pe,ch4:xe,pdfColorType:"text",precision:3}),this};var Rs=n.charSpace,yl=m.__private__.getCharSpace=m.getCharSpace=function(){return parseFloat(Rs||0)};m.__private__.setCharSpace=m.setCharSpace=function(N){if(isNaN(N))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Rs=N,this};var gu=0;m.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},m.__private__.setLineCap=m.setLineCap=function(N){var J=m.CapJoinStyles[N];if(J===void 0)throw new Error("Line cap style of '"+N+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return gu=J,ge(J+" J"),this};var Ns=0;m.__private__.setLineJoin=m.setLineJoin=function(N){var J=m.CapJoinStyles[N];if(J===void 0)throw new Error("Line join style of '"+N+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Ns=J,ge(J+" j"),this},m.__private__.setLineMiterLimit=m.__private__.setMiterLimit=m.setLineMiterLimit=m.setMiterLimit=function(N){if(N=N||0,isNaN(N))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return ge(P(L(N))+" M"),this},m.GState=Vg,m.setGState=function(N){(N=typeof N=="string"?Cn[Lr[N]]:rs(null,N)).equals(or)||(ge("/"+N.id+" gs"),or=N)};var rs=function(N,J){if(!N||!Lr[N]){var pe=!1;for(var xe in Cn)if(Cn.hasOwnProperty(xe)&&Cn[xe].equals(J)){pe=!0;break}if(pe)J=Cn[xe];else{var Ie="GS"+(Object.keys(Cn).length+1).toString(10);Cn[Ie]=J,J.id=Ie}return N&&(Lr[N]=J.id),tn.publish("addGState",J),J}};m.addGState=function(N,J){return rs(N,J),this},m.saveGraphicsState=function(){return ge("q"),di.push({key:Ot,size:it,color:Po}),this},m.restoreGraphicsState=function(){ge("Q");var N=di.pop();return Ot=N.key,it=N.size,Po=N.color,or=null,this},m.setCurrentTransformationMatrix=function(N){return ge(N.toString()+" cm"),this},m.comment=function(N){return ge("#"+N),this};var Os=function(N,J){var pe=N||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return pe},set:function(Ve){isNaN(Ve)||(pe=parseFloat(Ve))}});var xe=J||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return xe},set:function(Ve){isNaN(Ve)||(xe=parseFloat(Ve))}});var Ie="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Ie},set:function(Ve){Ie=Ve.toString()}}),this},xl=function(N,J,pe,xe){Os.call(this,N,J),this.type="rect";var Ie=pe||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Ie},set:function(tt){isNaN(tt)||(Ie=parseFloat(tt))}});var Ve=xe||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Ve},set:function(tt){isNaN(tt)||(Ve=parseFloat(tt))}}),this},Ds=function(){this.page=vn,this.currentPage=Q,this.pages=He.slice(0),this.pagesContext=Tt.slice(0),this.x=mn,this.y=Vt,this.matrix=Xn,this.width=as(Q),this.height=Vi(Q),this.outputDestination=st,this.id="",this.objectNumber=-1};Ds.prototype.restore=function(){vn=this.page,Q=this.currentPage,Tt=this.pagesContext,He=this.pages,mn=this.x,Vt=this.y,Xn=this.matrix,Ps(Q,this.width),_l(Q,this.height),st=this.outputDestination};var is=function(N,J,pe,xe,Ie){ja.push(new Ds),vn=Q=0,He=[],mn=N,Vt=J,Xn=Ie,Ci([pe,xe])},cc=function(N){if(dr[N])ja.pop().restore();else{var J=new Ds,pe="Xo"+(Object.keys(kn).length+1).toString(10);J.id=pe,dr[N]=pe,kn[pe]=J,tn.publish("addFormObject",J),ja.pop().restore()}};for(var Lo in m.beginFormObject=function(N,J,pe,xe,Ie){return is(N,J,pe,xe,Ie),this},m.endFormObject=function(N){return cc(N),this},m.doFormObject=function(N,J){var pe=kn[dr[N]];return ge("q"),ge(J.toString()+" cm"),ge("/"+pe.id+" Do"),ge("Q"),this},m.getFormObject=function(N){var J=kn[dr[N]];return{x:J.x,y:J.y,width:J.width,height:J.height,matrix:J.matrix}},m.save=function(N,J){return N=N||"generated.pdf",(J=J||{}).returnPromise=J.returnPromise||!1,J.returnPromise===!1?(Hf(ml(Ro()),N),typeof Hf.unload=="function"&&Gt.setTimeout&&setTimeout(Hf.unload,911),this):new Promise(function(pe,xe){try{var Ie=Hf(ml(Ro()),N);typeof Hf.unload=="function"&&Gt.setTimeout&&setTimeout(Hf.unload,911),pe(Ie)}catch(Ve){xe(Ve.message)}})},qt.API)qt.API.hasOwnProperty(Lo)&&(Lo==="events"&&qt.API.events.length?function(N,J){var pe,xe,Ie;for(Ie=J.length-1;Ie!==-1;Ie--)pe=J[Ie][0],xe=J[Ie][1],N.subscribe.apply(N,[pe].concat(typeof xe=="function"?[xe]:xe))}(tn,qt.API.events):m[Lo]=qt.API[Lo]);var as=m.getPageWidth=function(N){return(Tt[N=N||Q].mediaBox.topRightX-Tt[N].mediaBox.bottomLeftX)/ut},Ps=m.setPageWidth=function(N,J){Tt[N].mediaBox.topRightX=J*ut+Tt[N].mediaBox.bottomLeftX},Vi=m.getPageHeight=function(N){return(Tt[N=N||Q].mediaBox.topRightY-Tt[N].mediaBox.bottomLeftY)/ut},_l=m.setPageHeight=function(N,J){Tt[N].mediaBox.topRightY=J*ut+Tt[N].mediaBox.bottomLeftY};return m.internal={pdfEscape:En,getStyle:ma,getFont:Wr,getFontSize:ot,getCharSpace:yl,getTextColor:vl,getLineHeight:Ts,getLineHeightFactor:za,getLineWidth:io,write:gt,getHorizontalCoordinate:Ui,getVerticalCoordinate:$r,getCoordinateString:uc,getVerticalCoordinateString:ts,collections:{},newObject:wr,newAdditionalObject:Es,newObjectDeferred:Ir,newObjectDeferredBegin:Hr,getFilters:ti,putStream:sr,events:tn,scaleFactor:ut,pageSize:{getWidth:function(){return as(Q)},setWidth:function(N){Ps(Q,N)},getHeight:function(){return Vi(Q)},setHeight:function(N){_l(Q,N)}},encryptionOptions:h,encryption:Jn,getEncryptor:Oo,output:No,getNumberOfPages:Bn,pages:He,out:ge,f2:M,f3:R,getPageInfo:eo,getPageInfoByObjId:Ft,getCurrentPageInfo:to,getPDFVersion:b,Point:Os,Rectangle:xl,Matrix:vt,hasHotfix:Ja},Object.defineProperty(m.internal.pageSize,"width",{get:function(){return as(Q)},set:function(N){Ps(Q,N)},enumerable:!0,configurable:!0}),Object.defineProperty(m.internal.pageSize,"height",{get:function(){return Vi(Q)},set:function(N){_l(Q,N)},enumerable:!0,configurable:!0}),cu.call(m,Xe),Ot="F1",Ko(i,t),tn.publish("initialized"),m}Zh.prototype.lsbFirstWord=function(n){return String.fromCharCode(n>>0&255,n>>8&255,n>>16&255,n>>24&255)},Zh.prototype.toHexString=function(n){return n.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Zh.prototype.hexToBytes=function(n){for(var e=[],t=0;t<n.length;t+=2)e.push(String.fromCharCode(parseInt(n.substr(t,2),16)));return e.join("")},Zh.prototype.processOwnerPassword=function(n,e){return jy(Fy(e).substr(0,5),n)},Zh.prototype.encryptor=function(n,e){var t=Fy(this.encryptionKey+String.fromCharCode(255&n,n>>8&255,n>>16&255,255&e,e>>8&255)).substr(0,10);return function(r){return jy(t,r)}},Vg.prototype.equals=function(n){var e,t="id,objectNumber,equals";if(!n||ar(n)!==ar(this))return!1;var r=0;for(e in this)if(!(t.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!n.hasOwnProperty(e)||this[e]!==n[e])return!1;r++}for(e in n)n.hasOwnProperty(e)&&t.indexOf(e)<0&&r--;return r===0},qt.API={events:[]},qt.version="3.0.1";var Zr=qt.API,dx=1,dh=function(n){return n.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Wh=function(n){return n.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Jt=function(n){return n.toFixed(2)},Hc=function(n){return n.toFixed(5)};Zr.__acroform__={};var Ao=function(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n},x4=function(n){return n*dx},Hl=function(n){var e=new s8,t=Ct.internal.getHeight(n)||0,r=Ct.internal.getWidth(n)||0;return e.BBox=[0,0,Number(Jt(r)),Number(Jt(t))],e},cz=Zr.__acroform__.setBit=function(n,e){if(n=n||0,e=e||0,isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return n|=1<<e},fz=Zr.__acroform__.clearBit=function(n,e){if(n=n||0,e=e||0,isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return n&=~(1<<e)},hz=Zr.__acroform__.getBit=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return(n&1<<e)==0?0:1},ci=Zr.__acroform__.getBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return hz(n,e-1)},fi=Zr.__acroform__.setBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return cz(n,e-1)},hi=Zr.__acroform__.clearBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return fz(n,e-1)},dz=Zr.__acroform__.calculateCoordinates=function(n,e){var t=e.internal.getHorizontalCoordinate,r=e.internal.getVerticalCoordinate,i=n[0],a=n[1],o=n[2],s=n[3],u={};return u.lowerLeft_X=t(i)||0,u.lowerLeft_Y=r(a+s)||0,u.upperRight_X=t(i+o)||0,u.upperRight_Y=r(a)||0,[Number(Jt(u.lowerLeft_X)),Number(Jt(u.lowerLeft_Y)),Number(Jt(u.upperRight_X)),Number(Jt(u.upperRight_Y))]},pz=function(n){if(n.appearanceStreamContent)return n.appearanceStreamContent;if(n.V||n.DV){var e=[],t=n._V||n.DV,r=Uy(n,t),i=n.scope.internal.getFont(n.fontName,n.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(n.scope.__private__.encodeColorString(n.color)),e.push("/"+i+" "+Jt(r.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(r.text),e.push("ET"),e.push("Q"),e.push("EMC");var a=Hl(n);return a.scope=n.scope,a.stream=e.join(`
`),a}},Uy=function(n,e){var t=n.fontSize===0?n.maxFontSize:n.fontSize,r={text:"",fontSize:""},i=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");i=n.multiline?i.map(function(R){return R.split(`
`)}):i.map(function(R){return[R]});var a=t,o=Ct.internal.getHeight(n)||0;o=o<0?-o:o;var s=Ct.internal.getWidth(n)||0;s=s<0?-s:s;var u=function(R,L,j){if(R+1<i.length){var $=L+" "+i[R+1][0];return Bp($,n,j).width<=s-4}return!1};a++;e:for(;a>0;){e="",a--;var f,h,p=Bp("3",n,a).height,g=n.multiline?o-a:(o-p)/2,m=g+=2,_=0,b=0,T=0;if(a<=0){e=`(...) Tj
`,e+="% Width of Text: "+Bp(e,n,a=12).width+", FieldWidth:"+s+`
`;break}for(var S="",D=0,B=0;B<i.length;B++)if(i.hasOwnProperty(B)){var V=!1;if(i[B].length!==1&&T!==i[B].length-1){if((p+2)*(D+2)+2>o)continue e;S+=i[B][T],V=!0,b=B,B--}else{S=(S+=i[B][T]+" ").substr(S.length-1)==" "?S.substr(0,S.length-1):S;var Y=parseInt(B),q=u(Y,S,a),P=B>=i.length-1;if(q&&!P){S+=" ",T=0;continue}if(q||P){if(P)b=Y;else if(n.multiline&&(p+2)*(D+2)+2>o)continue e}else{if(!n.multiline||(p+2)*(D+2)+2>o)continue e;b=Y}}for(var E="",C=_;C<=b;C++){var M=i[C];if(n.multiline){if(C===b){E+=M[T]+" ",T=(T+1)%M.length;continue}if(C===_){E+=M[M.length-1]+" ";continue}}E+=M[0]+" "}switch(E=E.substr(E.length-1)==" "?E.substr(0,E.length-1):E,h=Bp(E,n,a).width,n.textAlign){case"right":f=s-h-2;break;case"center":f=(s-h)/2;break;case"left":default:f=2}e+=Jt(f)+" "+Jt(m)+` Td
`,e+="("+dh(E)+`) Tj
`,e+=-Jt(f)+` 0 Td
`,m=-(a+2),h=0,_=V?b:b+1,D++,S=""}break}return r.text=e,r.fontSize=a,r},Bp=function(n,e,t){var r=e.scope.internal.getFont(e.fontName,e.fontStyle),i=e.scope.getStringUnitWidth(n,{font:r,fontSize:parseFloat(t),charSpace:0})*parseFloat(t);return{height:e.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(t),charSpace:0})*parseFloat(t)*1.5,width:i}},gz={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},mz=function(n,e){var t={type:"reference",object:n};e.internal.getPageInfo(n.page).pageContext.annotations.find(function(r){return r.type===t.type&&r.object===t.object})===void 0&&e.internal.getPageInfo(n.page).pageContext.annotations.push(t)},vz=function(n,e){for(var t in n)if(n.hasOwnProperty(t)){var r=t,i=n[t];e.internal.newObjectDeferredBegin(i.objId,!0),ar(i)==="object"&&typeof i.putStream=="function"&&i.putStream(),delete n[r]}},yz=function(n,e){if(e.scope=n,n.internal!==void 0&&(n.internal.acroformPlugin===void 0||n.internal.acroformPlugin.isInitialized===!1)){if(fl.FieldNum=0,n.internal.acroformPlugin=JSON.parse(JSON.stringify(gz)),n.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");dx=n.internal.scaleFactor,n.internal.acroformPlugin.acroFormDictionaryRoot=new l8,n.internal.acroformPlugin.acroFormDictionaryRoot.scope=n,n.internal.acroformPlugin.acroFormDictionaryRoot._eventID=n.internal.events.subscribe("postPutResources",function(){(function(t){t.internal.events.unsubscribe(t.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete t.internal.acroformPlugin.acroFormDictionaryRoot._eventID,t.internal.acroformPlugin.printedOut=!0})(n)}),n.internal.events.subscribe("buildDocument",function(){(function(t){t.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=t.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in r)if(r.hasOwnProperty(i)){var a=r[i];a.objId=void 0,a.hasAnnotation&&mz(a,t)}})(n)}),n.internal.events.subscribe("putCatalog",function(){(function(t){if(t.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");t.internal.write("/AcroForm "+t.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(n)}),n.internal.events.subscribe("postPutPages",function(t){(function(r,i){var a=!r;for(var o in r||(i.internal.newObjectDeferredBegin(i.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),i.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||i.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(o)){var s=r[o],u=[],f=s.Rect;if(s.Rect&&(s.Rect=dz(s.Rect,i)),i.internal.newObjectDeferredBegin(s.objId,!0),s.DA=Ct.createDefaultAppearanceStream(s),ar(s)==="object"&&typeof s.getKeyValueListForStream=="function"&&(u=s.getKeyValueListForStream()),s.Rect=f,s.hasAppearanceStream&&!s.appearanceStreamContent){var h=pz(s);u.push({key:"AP",value:"<</N "+h+">>"}),i.internal.acroformPlugin.xForms.push(h)}if(s.appearanceStreamContent){var p="";for(var g in s.appearanceStreamContent)if(s.appearanceStreamContent.hasOwnProperty(g)){var m=s.appearanceStreamContent[g];if(p+="/"+g+" ",p+="<<",Object.keys(m).length>=1||Array.isArray(m)){for(var o in m)if(m.hasOwnProperty(o)){var _=m[o];typeof _=="function"&&(_=_.call(i,s)),p+="/"+o+" "+_+" ",i.internal.acroformPlugin.xForms.indexOf(_)>=0||i.internal.acroformPlugin.xForms.push(_)}}else typeof(_=m)=="function"&&(_=_.call(i,s)),p+="/"+o+" "+_,i.internal.acroformPlugin.xForms.indexOf(_)>=0||i.internal.acroformPlugin.xForms.push(_);p+=">>"}u.push({key:"AP",value:`<<
`+p+">>"})}i.internal.putStream({additionalKeyValues:u,objectId:s.objId}),i.internal.out("endobj")}a&&vz(i.internal.acroformPlugin.xForms,i)})(t,n)}),n.internal.acroformPlugin.isInitialized=!0}},o8=Zr.__acroform__.arrayToPdfArray=function(n,e,t){var r=function(o){return o};if(Array.isArray(n)){for(var i="[",a=0;a<n.length;a++)switch(a!==0&&(i+=" "),ar(n[a])){case"boolean":case"number":case"object":i+=n[a].toString();break;case"string":n[a].substr(0,1)!=="/"?(e!==void 0&&t&&(r=t.internal.getEncryptor(e)),i+="("+dh(r(n[a].toString()))+")"):i+=n[a].toString()}return i+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},Rv=function(n,e,t){var r=function(i){return i};return e!==void 0&&t&&(r=t.internal.getEncryptor(e)),(n=n||"").toString(),n="("+dh(r(n))+")"},Xl=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(n){this._objId=n}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Xl.prototype.toString=function(){return this.objId+" 0 R"},Xl.prototype.putStream=function(){var n=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:n,objectId:this.objId}),this.scope.internal.out("endobj")},Xl.prototype.getKeyValueListForStream=function(){var n=[],e=Object.getOwnPropertyNames(this).filter(function(a){return a!="content"&&a!="appearanceStreamContent"&&a!="scope"&&a!="objId"&&a.substring(0,1)!="_"});for(var t in e)if(Object.getOwnPropertyDescriptor(this,e[t]).configurable===!1){var r=e[t],i=this[r];i&&(Array.isArray(i)?n.push({key:r,value:o8(i,this.objId,this.scope)}):i instanceof Xl?(i.scope=this.scope,n.push({key:r,value:i.objId+" 0 R"})):typeof i!="function"&&n.push({key:r,value:i}))}return n};var s8=function(){Xl.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var n,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(t){n=t.trim()},get:function(){return n||null}})};Ao(s8,Xl);var l8=function(){Xl.call(this);var n,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(n){var t=function(r){return r};return this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),"("+dh(t(n))+")"}},set:function(t){n=t}})};Ao(l8,Xl);var fl=function n(){Xl.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(S){if(isNaN(S))throw new Error('Invalid value "'+S+'" for attribute F supplied.');e=S}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!ci(e,3)},set:function(S){S?this.F=fi(e,3):this.F=hi(e,3)}});var t=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return t},set:function(S){if(isNaN(S))throw new Error('Invalid value "'+S+'" for attribute Ff supplied.');t=S}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(S){r=S!==void 0?S:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(S){r[0]=S}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(S){r[1]=S}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(S){r[2]=S}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(S){r[3]=S}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(S){switch(S){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=S;break;default:throw new Error('Invalid value "'+S+'" for attribute FT supplied.')}}});var a=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!a||a.length<1){if(this instanceof zg)return;a="FieldObject"+n.FieldNum++}var S=function(D){return D};return this.scope&&(S=this.scope.internal.getEncryptor(this.objId)),"("+dh(S(a))+")"},set:function(S){a=S.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return a},set:function(S){a=S}});var o="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return o},set:function(S){o=S}});var s="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return s},set:function(S){s=S}});var u=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return u},set:function(S){u=S}});var f=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return f===void 0?50/dx:f},set:function(S){f=S}});var h="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return h},set:function(S){h=S}});var p="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!p||this instanceof zg||this instanceof Jf))return Rv(p,this.objId,this.scope)},set:function(S){S=S.toString(),p=S}});var g=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(g)return this instanceof Yi?g:Rv(g,this.objId,this.scope)},set:function(S){S=S.toString(),g=this instanceof Yi?S:S.substr(0,1)==="("?Wh(S.substr(1,S.length-2)):Wh(S)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Yi?Wh(g.substr(1,g.length-1)):g},set:function(S){S=S.toString(),g=this instanceof Yi?"/"+S:S}});var m=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(m)return m},set:function(S){this.V=S}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(m)return this instanceof Yi?m:Rv(m,this.objId,this.scope)},set:function(S){S=S.toString(),m=this instanceof Yi?S:S.substr(0,1)==="("?Wh(S.substr(1,S.length-2)):Wh(S)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Yi?Wh(m.substr(1,m.length-1)):m},set:function(S){S=S.toString(),m=this instanceof Yi?"/"+S:S}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var _,b=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return b},set:function(S){S=!!S,b=S}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(_)return _},set:function(S){_=S}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!ci(this.Ff,1)},set:function(S){S?this.Ff=fi(this.Ff,1):this.Ff=hi(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!ci(this.Ff,2)},set:function(S){S?this.Ff=fi(this.Ff,2):this.Ff=hi(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!ci(this.Ff,3)},set:function(S){S?this.Ff=fi(this.Ff,3):this.Ff=hi(this.Ff,3)}});var T=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(T!==null)return T},set:function(S){if([0,1,2].indexOf(S)===-1)throw new Error('Invalid value "'+S+'" for attribute Q supplied.');T=S}}),Object.defineProperty(this,"textAlign",{get:function(){var S;switch(T){case 0:default:S="left";break;case 1:S="center";break;case 2:S="right"}return S},configurable:!0,enumerable:!0,set:function(S){switch(S){case"right":case 2:T=2;break;case"center":case 1:T=1;break;case"left":case 0:default:T=0}}})};Ao(fl,Xl);var ud=function(){fl.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var n=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return n},set:function(t){n=t}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return n},set:function(t){n=t}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return o8(e,this.objId,this.scope)},set:function(t){var r,i;i=[],typeof(r=t)=="string"&&(i=function(a,o,s){s||(s=1);for(var u,f=[];u=o.exec(a);)f.push(u[s]);return f}(r,/\((.*?)\)/g)),e=i}}),this.getOptions=function(){return e},this.setOptions=function(t){e=t,this.sort&&e.sort()},this.addOption=function(t){t=(t=t||"").toString(),e.push(t),this.sort&&e.sort()},this.removeOption=function(t,r){for(r=r||!1,t=(t=t||"").toString();e.indexOf(t)!==-1&&(e.splice(e.indexOf(t),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!ci(this.Ff,18)},set:function(t){t?this.Ff=fi(this.Ff,18):this.Ff=hi(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!ci(this.Ff,19)},set:function(t){this.combo===!0&&(t?this.Ff=fi(this.Ff,19):this.Ff=hi(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!ci(this.Ff,20)},set:function(t){t?(this.Ff=fi(this.Ff,20),e.sort()):this.Ff=hi(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!ci(this.Ff,22)},set:function(t){t?this.Ff=fi(this.Ff,22):this.Ff=hi(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!ci(this.Ff,23)},set:function(t){t?this.Ff=fi(this.Ff,23):this.Ff=hi(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!ci(this.Ff,27)},set:function(t){t?this.Ff=fi(this.Ff,27):this.Ff=hi(this.Ff,27)}}),this.hasAppearanceStream=!1};Ao(ud,fl);var cd=function(){ud.call(this),this.fontName="helvetica",this.combo=!1};Ao(cd,ud);var fd=function(){cd.call(this),this.combo=!0};Ao(fd,cd);var ng=function(){fd.call(this),this.edit=!0};Ao(ng,fd);var Yi=function(){fl.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!ci(this.Ff,15)},set:function(t){t?this.Ff=fi(this.Ff,15):this.Ff=hi(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!ci(this.Ff,16)},set:function(t){t?this.Ff=fi(this.Ff,16):this.Ff=hi(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!ci(this.Ff,17)},set:function(t){t?this.Ff=fi(this.Ff,17):this.Ff=hi(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!ci(this.Ff,26)},set:function(t){t?this.Ff=fi(this.Ff,26):this.Ff=hi(this.Ff,26)}});var n,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var t=function(a){return a};if(this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var r,i=[];for(r in i.push("<<"),e)i.push("/"+r+" ("+dh(t(e[r]))+")");return i.push(">>"),i.join(`
`)}},set:function(t){ar(t)==="object"&&(e=t)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(t){typeof t=="string"&&(e.CA=t)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(t){n=t}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(t){n="/"+t}})};Ao(Yi,fl);var rg=function(){Yi.call(this),this.pushButton=!0};Ao(rg,Yi);var hd=function(){Yi.call(this),this.radio=!0,this.pushButton=!1;var n=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return n},set:function(e){n=e!==void 0?e:[]}})};Ao(hd,Yi);var zg=function(){var n,e;fl.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return n},set:function(i){n=i}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(i){e=i}});var t,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(s){return s};this.scope&&(i=this.scope.internal.getEncryptor(this.objId));var a,o=[];for(a in o.push("<<"),r)o.push("/"+a+" ("+dh(i(r[a]))+")");return o.push(">>"),o.join(`
`)},set:function(i){ar(i)==="object"&&(r=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(i){typeof i=="string"&&(r.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(i){t=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(i){t="/"+i}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Ct.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Ao(zg,fl),hd.prototype.setAppearance=function(n){if(!("createAppearanceStream"in n)||!("getCA"in n))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var t=this.Kids[e];t.appearanceStreamContent=n.createAppearanceStream(t.optionName),t.caption=n.getCA()}},hd.prototype.createOption=function(n){var e=new zg;return e.Parent=this,e.optionName=n,this.Kids.push(e),xz.call(this.scope,e),e};var ig=function(){Yi.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Ct.CheckBox.createAppearanceStream()};Ao(ig,Yi);var Jf=function(){fl.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!ci(this.Ff,13)},set:function(e){e?this.Ff=fi(this.Ff,13):this.Ff=hi(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!ci(this.Ff,21)},set:function(e){e?this.Ff=fi(this.Ff,21):this.Ff=hi(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!ci(this.Ff,23)},set:function(e){e?this.Ff=fi(this.Ff,23):this.Ff=hi(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!ci(this.Ff,24)},set:function(e){e?this.Ff=fi(this.Ff,24):this.Ff=hi(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!ci(this.Ff,25)},set:function(e){e?this.Ff=fi(this.Ff,25):this.Ff=hi(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!ci(this.Ff,26)},set:function(e){e?this.Ff=fi(this.Ff,26):this.Ff=hi(this.Ff,26)}});var n=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return n},set:function(e){n=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return n},set:function(e){Number.isInteger(e)&&(n=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Ao(Jf,fl);var ag=function(){Jf.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!ci(this.Ff,14)},set:function(n){n?this.Ff=fi(this.Ff,14):this.Ff=hi(this.Ff,14)}}),this.password=!0};Ao(ag,Jf);var Ct={CheckBox:{createAppearanceStream:function(){return{N:{On:Ct.CheckBox.YesNormal},D:{On:Ct.CheckBox.YesPushDown,Off:Ct.CheckBox.OffPushDown}}},YesPushDown:function(n){var e=Hl(n);e.scope=n.scope;var t=[],r=n.scope.internal.getFont(n.fontName,n.fontStyle).id,i=n.scope.__private__.encodeColorString(n.color),a=Uy(n,n.caption);return t.push("0.749023 g"),t.push("0 0 "+Jt(Ct.internal.getWidth(n))+" "+Jt(Ct.internal.getHeight(n))+" re"),t.push("f"),t.push("BMC"),t.push("q"),t.push("0 0 1 rg"),t.push("/"+r+" "+Jt(a.fontSize)+" Tf "+i),t.push("BT"),t.push(a.text),t.push("ET"),t.push("Q"),t.push("EMC"),e.stream=t.join(`
`),e},YesNormal:function(n){var e=Hl(n);e.scope=n.scope;var t=n.scope.internal.getFont(n.fontName,n.fontStyle).id,r=n.scope.__private__.encodeColorString(n.color),i=[],a=Ct.internal.getHeight(n),o=Ct.internal.getWidth(n),s=Uy(n,n.caption);return i.push("1 g"),i.push("0 0 "+Jt(o)+" "+Jt(a)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+Jt(o-1)+" "+Jt(a-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+t+" "+Jt(s.fontSize)+" Tf "+r),i.push(s.text),i.push("ET"),i.push("Q"),e.stream=i.join(`
`),e},OffPushDown:function(n){var e=Hl(n);e.scope=n.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+Jt(Ct.internal.getWidth(n))+" "+Jt(Ct.internal.getHeight(n))+" re"),t.push("f"),e.stream=t.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(n){var e={D:{Off:Ct.RadioButton.Circle.OffPushDown},N:{}};return e.N[n]=Ct.RadioButton.Circle.YesNormal,e.D[n]=Ct.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(n){var e=Hl(n);e.scope=n.scope;var t=[],r=Ct.internal.getWidth(n)<=Ct.internal.getHeight(n)?Ct.internal.getWidth(n)/4:Ct.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var i=Ct.internal.Bezier_C,a=Number((r*i).toFixed(5));return t.push("q"),t.push("1 0 0 1 "+Hc(Ct.internal.getWidth(n)/2)+" "+Hc(Ct.internal.getHeight(n)/2)+" cm"),t.push(r+" 0 m"),t.push(r+" "+a+" "+a+" "+r+" 0 "+r+" c"),t.push("-"+a+" "+r+" -"+r+" "+a+" -"+r+" 0 c"),t.push("-"+r+" -"+a+" -"+a+" -"+r+" 0 -"+r+" c"),t.push(a+" -"+r+" "+r+" -"+a+" "+r+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(n){var e=Hl(n);e.scope=n.scope;var t=[],r=Ct.internal.getWidth(n)<=Ct.internal.getHeight(n)?Ct.internal.getWidth(n)/4:Ct.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),a=Number((i*Ct.internal.Bezier_C).toFixed(5)),o=Number((r*Ct.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+Hc(Ct.internal.getWidth(n)/2)+" "+Hc(Ct.internal.getHeight(n)/2)+" cm"),t.push(i+" 0 m"),t.push(i+" "+a+" "+a+" "+i+" 0 "+i+" c"),t.push("-"+a+" "+i+" -"+i+" "+a+" -"+i+" 0 c"),t.push("-"+i+" -"+a+" -"+a+" -"+i+" 0 -"+i+" c"),t.push(a+" -"+i+" "+i+" -"+a+" "+i+" 0 c"),t.push("f"),t.push("Q"),t.push("0 g"),t.push("q"),t.push("1 0 0 1 "+Hc(Ct.internal.getWidth(n)/2)+" "+Hc(Ct.internal.getHeight(n)/2)+" cm"),t.push(r+" 0 m"),t.push(r+" "+o+" "+o+" "+r+" 0 "+r+" c"),t.push("-"+o+" "+r+" -"+r+" "+o+" -"+r+" 0 c"),t.push("-"+r+" -"+o+" -"+o+" -"+r+" 0 -"+r+" c"),t.push(o+" -"+r+" "+r+" -"+o+" "+r+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},OffPushDown:function(n){var e=Hl(n);e.scope=n.scope;var t=[],r=Ct.internal.getWidth(n)<=Ct.internal.getHeight(n)?Ct.internal.getWidth(n)/4:Ct.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),a=Number((i*Ct.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+Hc(Ct.internal.getWidth(n)/2)+" "+Hc(Ct.internal.getHeight(n)/2)+" cm"),t.push(i+" 0 m"),t.push(i+" "+a+" "+a+" "+i+" 0 "+i+" c"),t.push("-"+a+" "+i+" -"+i+" "+a+" -"+i+" 0 c"),t.push("-"+i+" -"+a+" -"+a+" -"+i+" 0 -"+i+" c"),t.push(a+" -"+i+" "+i+" -"+a+" "+i+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e}},Cross:{createAppearanceStream:function(n){var e={D:{Off:Ct.RadioButton.Cross.OffPushDown},N:{}};return e.N[n]=Ct.RadioButton.Cross.YesNormal,e.D[n]=Ct.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(n){var e=Hl(n);e.scope=n.scope;var t=[],r=Ct.internal.calculateCross(n);return t.push("q"),t.push("1 1 "+Jt(Ct.internal.getWidth(n)-2)+" "+Jt(Ct.internal.getHeight(n)-2)+" re"),t.push("W"),t.push("n"),t.push(Jt(r.x1.x)+" "+Jt(r.x1.y)+" m"),t.push(Jt(r.x2.x)+" "+Jt(r.x2.y)+" l"),t.push(Jt(r.x4.x)+" "+Jt(r.x4.y)+" m"),t.push(Jt(r.x3.x)+" "+Jt(r.x3.y)+" l"),t.push("s"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(n){var e=Hl(n);e.scope=n.scope;var t=Ct.internal.calculateCross(n),r=[];return r.push("0.749023 g"),r.push("0 0 "+Jt(Ct.internal.getWidth(n))+" "+Jt(Ct.internal.getHeight(n))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+Jt(Ct.internal.getWidth(n)-2)+" "+Jt(Ct.internal.getHeight(n)-2)+" re"),r.push("W"),r.push("n"),r.push(Jt(t.x1.x)+" "+Jt(t.x1.y)+" m"),r.push(Jt(t.x2.x)+" "+Jt(t.x2.y)+" l"),r.push(Jt(t.x4.x)+" "+Jt(t.x4.y)+" m"),r.push(Jt(t.x3.x)+" "+Jt(t.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(n){var e=Hl(n);e.scope=n.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+Jt(Ct.internal.getWidth(n))+" "+Jt(Ct.internal.getHeight(n))+" re"),t.push("f"),e.stream=t.join(`
`),e}}},createDefaultAppearanceStream:function(n){var e=n.scope.internal.getFont(n.fontName,n.fontStyle).id,t=n.scope.__private__.encodeColorString(n.color);return"/"+e+" "+n.fontSize+" Tf "+t}};Ct.internal={Bezier_C:.551915024494,calculateCross:function(n){var e=Ct.internal.getWidth(n),t=Ct.internal.getHeight(n),r=Math.min(e,t);return{x1:{x:(e-r)/2,y:(t-r)/2+r},x2:{x:(e-r)/2+r,y:(t-r)/2},x3:{x:(e-r)/2,y:(t-r)/2},x4:{x:(e-r)/2+r,y:(t-r)/2+r}}}},Ct.internal.getWidth=function(n){var e=0;return ar(n)==="object"&&(e=x4(n.Rect[2])),e},Ct.internal.getHeight=function(n){var e=0;return ar(n)==="object"&&(e=x4(n.Rect[3])),e};var xz=Zr.addField=function(n){if(yz(this,n),!(n instanceof fl))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=n).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),n.page=n.scope.internal.getCurrentPageInfo().pageNumber,this};Zr.AcroFormChoiceField=ud,Zr.AcroFormListBox=cd,Zr.AcroFormComboBox=fd,Zr.AcroFormEditBox=ng,Zr.AcroFormButton=Yi,Zr.AcroFormPushButton=rg,Zr.AcroFormRadioButton=hd,Zr.AcroFormCheckBox=ig,Zr.AcroFormTextField=Jf,Zr.AcroFormPasswordField=ag,Zr.AcroFormAppearance=Ct,Zr.AcroForm={ChoiceField:ud,ListBox:cd,ComboBox:fd,EditBox:ng,Button:Yi,PushButton:rg,RadioButton:hd,CheckBox:ig,TextField:Jf,PasswordField:ag,Appearance:Ct},qt.AcroForm={ChoiceField:ud,ListBox:cd,ComboBox:fd,EditBox:ng,Button:Yi,PushButton:rg,RadioButton:hd,CheckBox:ig,TextField:Jf,PasswordField:ag,Appearance:Ct};qt.AcroForm;function u8(n){return n.reduce(function(e,t,r){return e[t]=r,e},{})}(function(n){n.__addimage__={};var e="UNKNOWN",t={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},r=n.__addimage__.getImageFileTypeByImageData=function(R,L){var j,$,ne,U,z,te=e;if((L=L||e)==="RGBA"||R.data!==void 0&&R.data instanceof Uint8ClampedArray&&"height"in R&&"width"in R)return"RGBA";if(q(R))for(z in t)for(ne=t[z],j=0;j<ne.length;j+=1){for(U=!0,$=0;$<ne[j].length;$+=1)if(ne[j][$]!==void 0&&ne[j][$]!==R[$]){U=!1;break}if(U===!0){te=z;break}}else for(z in t)for(ne=t[z],j=0;j<ne.length;j+=1){for(U=!0,$=0;$<ne[j].length;$+=1)if(ne[j][$]!==void 0&&ne[j][$]!==R.charCodeAt($)){U=!1;break}if(U===!0){te=z;break}}return te===e&&L!==e&&(te=L),te},i=function R(L){for(var j=this.internal.write,$=this.internal.putStream,ne=(0,this.internal.getFilters)();ne.indexOf("FlateEncode")!==-1;)ne.splice(ne.indexOf("FlateEncode"),1);L.objectId=this.internal.newObject();var U=[];if(U.push({key:"Type",value:"/XObject"}),U.push({key:"Subtype",value:"/Image"}),U.push({key:"Width",value:L.width}),U.push({key:"Height",value:L.height}),L.colorSpace===T.INDEXED?U.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(L.palette.length/3-1)+" "+("sMask"in L&&L.sMask!==void 0?L.objectId+2:L.objectId+1)+" 0 R]"}):(U.push({key:"ColorSpace",value:"/"+L.colorSpace}),L.colorSpace===T.DEVICE_CMYK&&U.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),U.push({key:"BitsPerComponent",value:L.bitsPerComponent}),"decodeParameters"in L&&L.decodeParameters!==void 0&&U.push({key:"DecodeParms",value:"<<"+L.decodeParameters+">>"}),"transparency"in L&&Array.isArray(L.transparency)){for(var z="",te=0,ue=L.transparency.length;te<ue;te++)z+=L.transparency[te]+" "+L.transparency[te]+" ";U.push({key:"Mask",value:"["+z+"]"})}L.sMask!==void 0&&U.push({key:"SMask",value:L.objectId+1+" 0 R"});var X=L.filter!==void 0?["/"+L.filter]:void 0;if($({data:L.data,additionalKeyValues:U,alreadyAppliedFilters:X,objectId:L.objectId}),j("endobj"),"sMask"in L&&L.sMask!==void 0){var me="/Predictor "+L.predictor+" /Colors 1 /BitsPerComponent "+L.bitsPerComponent+" /Columns "+L.width,G={width:L.width,height:L.height,colorSpace:"DeviceGray",bitsPerComponent:L.bitsPerComponent,decodeParameters:me,data:L.sMask};"filter"in L&&(G.filter=L.filter),R.call(this,G)}if(L.colorSpace===T.INDEXED){var Q=this.internal.newObject();$({data:E(new Uint8Array(L.palette)),objectId:Q}),j("endobj")}},a=function(){var R=this.internal.collections.addImage_images;for(var L in R)i.call(this,R[L])},o=function(){var R,L=this.internal.collections.addImage_images,j=this.internal.write;for(var $ in L)j("/I"+(R=L[$]).index,R.objectId,"0","R")},s=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",a),this.internal.events.subscribe("putXobjectDict",o))},u=function(){var R=this.internal.collections.addImage_images;return s.call(this),R},f=function(){return Object.keys(this.internal.collections.addImage_images).length},h=function(R){return typeof n["process"+R.toUpperCase()]=="function"},p=function(R){return ar(R)==="object"&&R.nodeType===1},g=function(R,L){if(R.nodeName==="IMG"&&R.hasAttribute("src")){var j=""+R.getAttribute("src");if(j.indexOf("data:image/")===0)return H1(unescape(j).split("base64,").pop());var $=n.loadFile(j,!0);if($!==void 0)return $}if(R.nodeName==="CANVAS"){if(R.width===0||R.height===0)throw new Error("Given canvas must have data. Canvas width: "+R.width+", height: "+R.height);var ne;switch(L){case"PNG":ne="image/png";break;case"WEBP":ne="image/webp";break;case"JPEG":case"JPG":default:ne="image/jpeg"}return H1(R.toDataURL(ne,1).split("base64,").pop())}},m=function(R){var L=this.internal.collections.addImage_images;if(L){for(var j in L)if(R===L[j].alias)return L[j]}},_=function(R,L,j){return R||L||(R=-96,L=-96),R<0&&(R=-1*j.width*72/R/this.internal.scaleFactor),L<0&&(L=-1*j.height*72/L/this.internal.scaleFactor),R===0&&(R=L*j.width/j.height),L===0&&(L=R*j.height/j.width),[R,L]},b=function(R,L,j,$,ne,U){var z=_.call(this,j,$,ne),te=this.internal.getCoordinateString,ue=this.internal.getVerticalCoordinateString,X=u.call(this);if(j=z[0],$=z[1],X[ne.index]=ne,U){U*=Math.PI/180;var me=Math.cos(U),G=Math.sin(U),Q=function(ie){return ie.toFixed(4)},ee=[Q(me),Q(G),Q(-1*G),Q(me),0,0,"cm"]}this.internal.write("q"),U?(this.internal.write([1,"0","0",1,te(R),ue(L+$),"cm"].join(" ")),this.internal.write(ee.join(" ")),this.internal.write([te(j),"0","0",te($),"0","0","cm"].join(" "))):this.internal.write([te(j),"0","0",te($),te(R),ue(L+$),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+ne.index+" Do"),this.internal.write("Q")},T=n.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};n.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var S=n.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},D=n.__addimage__.sHashCode=function(R){var L,j,$=0;if(typeof R=="string")for(j=R.length,L=0;L<j;L++)$=($<<5)-$+R.charCodeAt(L),$|=0;else if(q(R))for(j=R.byteLength/2,L=0;L<j;L++)$=($<<5)-$+R[L],$|=0;return $},B=n.__addimage__.validateStringAsBase64=function(R){(R=R||"").toString().trim();var L=!0;return R.length===0&&(L=!1),R.length%4!=0&&(L=!1),/^[A-Za-z0-9+/]+$/.test(R.substr(0,R.length-2))===!1&&(L=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(R.substr(-2))===!1&&(L=!1),L},V=n.__addimage__.extractImageFromDataUrl=function(R){if(R==null||!(R=R.trim()).startsWith("data:"))return null;var L=R.indexOf(",");return L<0?null:R.substring(0,L).trim().endsWith("base64")?R.substring(L+1):null},Y=n.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};n.__addimage__.isArrayBuffer=function(R){return Y()&&R instanceof ArrayBuffer};var q=n.__addimage__.isArrayBufferView=function(R){return Y()&&typeof Uint32Array<"u"&&(R instanceof Int8Array||R instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&R instanceof Uint8ClampedArray||R instanceof Int16Array||R instanceof Uint16Array||R instanceof Int32Array||R instanceof Uint32Array||R instanceof Float32Array||R instanceof Float64Array)},P=n.__addimage__.binaryStringToUint8Array=function(R){for(var L=R.length,j=new Uint8Array(L),$=0;$<L;$++)j[$]=R.charCodeAt($);return j},E=n.__addimage__.arrayBufferToBinaryString=function(R){for(var L="",j=q(R)?R:new Uint8Array(R),$=0;$<j.length;$+=8192)L+=String.fromCharCode.apply(null,j.subarray($,$+8192));return L};n.addImage=function(){var R,L,j,$,ne,U,z,te,ue;if(typeof arguments[1]=="number"?(L=e,j=arguments[1],$=arguments[2],ne=arguments[3],U=arguments[4],z=arguments[5],te=arguments[6],ue=arguments[7]):(L=arguments[1],j=arguments[2],$=arguments[3],ne=arguments[4],U=arguments[5],z=arguments[6],te=arguments[7],ue=arguments[8]),ar(R=arguments[0])==="object"&&!p(R)&&"imageData"in R){var X=R;R=X.imageData,L=X.format||L||e,j=X.x||j||0,$=X.y||$||0,ne=X.w||X.width||ne,U=X.h||X.height||U,z=X.alias||z,te=X.compression||te,ue=X.rotation||X.angle||ue}var me=this.internal.getFilters();if(te===void 0&&me.indexOf("FlateEncode")!==-1&&(te="SLOW"),isNaN(j)||isNaN($))throw new Error("Invalid coordinates passed to jsPDF.addImage");s.call(this);var G=C.call(this,R,L,z,te);return b.call(this,j,$,ne,U,G,ue),this};var C=function(R,L,j,$){var ne,U,z;if(typeof R=="string"&&r(R)===e){R=unescape(R);var te=M(R,!1);(te!==""||(te=n.loadFile(R,!0))!==void 0)&&(R=te)}if(p(R)&&(R=g(R,L)),L=r(R,L),!h(L))throw new Error("addImage does not support files of type '"+L+"', please ensure that a plugin for '"+L+"' support is added.");if(((z=j)==null||z.length===0)&&(j=function(ue){return typeof ue=="string"||q(ue)?D(ue):q(ue.data)?D(ue.data):null}(R)),(ne=m.call(this,j))||(Y()&&(R instanceof Uint8Array||L==="RGBA"||(U=R,R=P(R))),ne=this["process"+L.toUpperCase()](R,f.call(this),j,function(ue){return ue&&typeof ue=="string"&&(ue=ue.toUpperCase()),ue in n.image_compression?ue:S.NONE}($),U)),!ne)throw new Error("An unknown error occurred whilst processing the image.");return ne},M=n.__addimage__.convertBase64ToBinaryString=function(R,L){L=typeof L!="boolean"||L;var j,$="";if(typeof R=="string"){var ne;j=(ne=V(R))!==null&&ne!==void 0?ne:R;try{$=H1(j)}catch(U){if(L)throw B(j)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+U.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return $};n.getImageProperties=function(R){var L,j,$="";if(p(R)&&(R=g(R)),typeof R=="string"&&r(R)===e&&(($=M(R,!1))===""&&($=n.loadFile(R)||""),R=$),j=r(R),!h(j))throw new Error("addImage does not support files of type '"+j+"', please ensure that a plugin for '"+j+"' support is added.");if(!Y()||R instanceof Uint8Array||(R=P(R)),!(L=this["process"+j.toUpperCase()](R)))throw new Error("An unknown error occurred whilst processing the image");return L.fileType=j,L}})(qt.API),function(n){var e=function(t){if(t!==void 0&&t!="")return!0};qt.API.events.push(["addPage",function(t){this.internal.getPageInfo(t.pageNumber).pageContext.annotations=[]}]),n.events.push(["putPage",function(t){for(var r,i,a,o=this.internal.getCoordinateString,s=this.internal.getVerticalCoordinateString,u=this.internal.getPageInfoByObjId(t.objId),f=t.pageContext.annotations,h=!1,p=0;p<f.length&&!h;p++)switch((r=f[p]).type){case"link":(e(r.options.url)||e(r.options.pageNumber))&&(h=!0);break;case"reference":case"text":case"freetext":h=!0}if(h!=0){this.internal.write("/Annots [");for(var g=0;g<f.length;g++){r=f[g];var m=this.internal.pdfEscape,_=this.internal.getEncryptor(t.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var b=this.internal.newAdditionalObject(),T=this.internal.newAdditionalObject(),S=this.internal.getEncryptor(b.objId),D=r.title||"Note";a="<</Type /Annot /Subtype /Text "+(i="/Rect ["+o(r.bounds.x)+" "+s(r.bounds.y+r.bounds.h)+" "+o(r.bounds.x+r.bounds.w)+" "+s(r.bounds.y)+"] ")+"/Contents ("+m(S(r.contents))+")",a+=" /Popup "+T.objId+" 0 R",a+=" /P "+u.objId+" 0 R",a+=" /T ("+m(S(D))+") >>",b.content=a;var B=b.objId+" 0 R";a="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+o(r.bounds.x+30)+" "+s(r.bounds.y+r.bounds.h)+" "+o(r.bounds.x+r.bounds.w+30)+" "+s(r.bounds.y)+"] ")+" /Parent "+B,r.open&&(a+=" /Open true"),a+=" >>",T.content=a,this.internal.write(b.objId,"0 R",T.objId,"0 R");break;case"freetext":i="/Rect ["+o(r.bounds.x)+" "+s(r.bounds.y)+" "+o(r.bounds.x+r.bounds.w)+" "+s(r.bounds.y+r.bounds.h)+"] ";var V=r.color||"#000000";a="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+m(_(r.contents))+")",a+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+V+")",a+=" /Border [0 0 0]",a+=" >>",this.internal.write(a);break;case"link":if(r.options.name){var Y=this.annotations._nameMap[r.options.name];r.options.pageNumber=Y.page,r.options.top=Y.y}else r.options.top||(r.options.top=0);if(i="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",a="",r.options.url)a="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+m(_(r.options.url))+") >>";else if(r.options.pageNumber)switch(a="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":a+=" /Fit]";break;case"FitH":a+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,a+=" /FitV "+r.options.left+"]";break;case"XYZ":default:var q=s(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),a+=" /XYZ "+r.options.left+" "+q+" "+r.options.zoom+"]"}a!=""&&(a+=" >>",this.internal.write(a))}}this.internal.write("]")}}]),n.createAnnotation=function(t){var r=this.internal.getCurrentPageInfo();switch(t.type){case"link":this.link(t.bounds.x,t.bounds.y,t.bounds.w,t.bounds.h,t);break;case"text":case"freetext":r.pageContext.annotations.push(t)}},n.link=function(t,r,i,a,o){var s=this.internal.getCurrentPageInfo(),u=this.internal.getCoordinateString,f=this.internal.getVerticalCoordinateString;s.pageContext.annotations.push({finalBounds:{x:u(t),y:f(r),w:u(t+i),h:f(r+a)},options:o,type:"link"})},n.textWithLink=function(t,r,i,a){var o,s,u=this.getTextWidth(t),f=this.internal.getLineHeight()/this.internal.scaleFactor;if(a.maxWidth!==void 0){s=a.maxWidth;var h=this.splitTextToSize(t,s).length;o=Math.ceil(f*h)}else s=u,o=f;return this.text(t,r,i,a),i+=.2*f,a.align==="center"&&(r-=u/2),a.align==="right"&&(r-=u),this.link(r,i-f,s,o,a),u},n.getTextWidth=function(t){var r=this.internal.getFontSize();return this.getStringUnitWidth(t)*r/this.internal.scaleFactor}}(qt.API),function(n){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},t={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];n.__arabicParser__={};var a=n.__arabicParser__.isInArabicSubstitutionA=function(b){return e[b.charCodeAt(0)]!==void 0},o=n.__arabicParser__.isArabicLetter=function(b){return typeof b=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(b)},s=n.__arabicParser__.isArabicEndLetter=function(b){return o(b)&&a(b)&&e[b.charCodeAt(0)].length<=2},u=n.__arabicParser__.isArabicAlfLetter=function(b){return o(b)&&i.indexOf(b.charCodeAt(0))>=0};n.__arabicParser__.arabicLetterHasIsolatedForm=function(b){return o(b)&&a(b)&&e[b.charCodeAt(0)].length>=1};var f=n.__arabicParser__.arabicLetterHasFinalForm=function(b){return o(b)&&a(b)&&e[b.charCodeAt(0)].length>=2};n.__arabicParser__.arabicLetterHasInitialForm=function(b){return o(b)&&a(b)&&e[b.charCodeAt(0)].length>=3};var h=n.__arabicParser__.arabicLetterHasMedialForm=function(b){return o(b)&&a(b)&&e[b.charCodeAt(0)].length==4},p=n.__arabicParser__.resolveLigatures=function(b){var T=0,S=t,D="",B=0;for(T=0;T<b.length;T+=1)S[b.charCodeAt(T)]!==void 0?(B++,typeof(S=S[b.charCodeAt(T)])=="number"&&(D+=String.fromCharCode(S),S=t,B=0),T===b.length-1&&(S=t,D+=b.charAt(T-(B-1)),T-=B-1,B=0)):(S=t,D+=b.charAt(T-B),T-=B,B=0);return D};n.__arabicParser__.isArabicDiacritic=function(b){return b!==void 0&&r[b.charCodeAt(0)]!==void 0};var g=n.__arabicParser__.getCorrectForm=function(b,T,S){return o(b)?a(b)===!1?-1:!f(b)||!o(T)&&!o(S)||!o(S)&&s(T)||s(b)&&!o(T)||s(b)&&u(T)||s(b)&&s(T)?0:h(b)&&o(T)&&!s(T)&&o(S)&&f(S)?3:s(b)||!o(S)?1:2:-1},m=function(b){var T=0,S=0,D=0,B="",V="",Y="",q=(b=b||"").split("\\s+"),P=[];for(T=0;T<q.length;T+=1){for(P.push(""),S=0;S<q[T].length;S+=1)B=q[T][S],V=q[T][S-1],Y=q[T][S+1],o(B)?(D=g(B,V,Y),P[T]+=D!==-1?String.fromCharCode(e[B.charCodeAt(0)][D]):B):P[T]+=B;P[T]=p(P[T])}return P.join(" ")},_=n.__arabicParser__.processArabic=n.processArabic=function(){var b,T=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,S=[];if(Array.isArray(T)){var D=0;for(S=[],D=0;D<T.length;D+=1)Array.isArray(T[D])?S.push([m(T[D][0]),T[D][1],T[D][2]]):S.push([m(T[D])]);b=S}else b=m(T);return typeof arguments[0]=="string"?b:(arguments[0].text=b,arguments[0])};n.events.push(["preProcessText",_])}(qt.API),qt.API.autoPrint=function(n){var e;switch((n=n||{}).variant=n.variant||"non-conform",n.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})}return this},function(n){var e=function(){var t=void 0;Object.defineProperty(this,"pdf",{get:function(){return t},set:function(s){t=s}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(s){r=isNaN(s)||Number.isInteger(s)===!1||s<0?150:s,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(s){i=isNaN(s)||Number.isInteger(s)===!1||s<0?300:s,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var a=[];Object.defineProperty(this,"childNodes",{get:function(){return a},set:function(s){a=s}});var o={};Object.defineProperty(this,"style",{get:function(){return o},set:function(s){o=s}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(t,r){var i;if((t=t||"2d")!=="2d")return null;for(i in r)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=r[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},n.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(qt.API),function(n){var e={left:0,top:0,bottom:0,right:0},t=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new a,this.internal.__cell__.pages=1},a=function(){var u=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return u},set:function(b){u=b}});var f=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return f},set:function(b){f=b}});var h=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return h},set:function(b){h=b}});var p=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return p},set:function(b){p=b}});var g=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return g},set:function(b){g=b}});var m=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return m},set:function(b){m=b}});var _=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return _},set:function(b){_=b}}),this};a.prototype.clone=function(){return new a(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},a.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},n.setHeaderFunction=function(u){return r.call(this),this.internal.__cell__.headerFunction=typeof u=="function"?u:void 0,this},n.getTextDimensions=function(u,f){r.call(this);var h=(f=f||{}).fontSize||this.getFontSize(),p=f.font||this.getFont(),g=f.scaleFactor||this.internal.scaleFactor,m=0,_=0,b=0,T=this;if(!Array.isArray(u)&&typeof u!="string"){if(typeof u!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");u=String(u)}var S=f.maxWidth;S>0?typeof u=="string"?u=this.splitTextToSize(u,S):Object.prototype.toString.call(u)==="[object Array]"&&(u=u.reduce(function(B,V){return B.concat(T.splitTextToSize(V,S))},[])):u=Array.isArray(u)?u:[u];for(var D=0;D<u.length;D++)m<(b=this.getStringUnitWidth(u[D],{font:p})*h)&&(m=b);return m!==0&&(_=u.length),{w:m/=g,h:Math.max((_*h*this.getLineHeightFactor()-h*(this.getLineHeightFactor()-1))/g,0)}},n.cellAddPage=function(){r.call(this),this.addPage();var u=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new a(u.left,u.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var o=n.cell=function(){var u;u=arguments[0]instanceof a?arguments[0]:new a(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),r.call(this);var f=this.internal.__cell__.lastCell,h=this.internal.__cell__.padding,p=this.internal.__cell__.margins||e,g=this.internal.__cell__.tableHeaderRow,m=this.internal.__cell__.printHeaders;return f.lineNumber!==void 0&&(f.lineNumber===u.lineNumber?(u.x=(f.x||0)+(f.width||0),u.y=f.y||0):f.y+f.height+u.height+p.bottom>this.getPageHeight()?(this.cellAddPage(),u.y=p.top,m&&g&&(this.printHeaderRow(u.lineNumber,!0),u.y+=g[0].height)):u.y=f.y+f.height||u.y),u.text[0]!==void 0&&(this.rect(u.x,u.y,u.width,u.height,t===!0?"FD":void 0),u.align==="right"?this.text(u.text,u.x+u.width-h,u.y+h,{align:"right",baseline:"top"}):u.align==="center"?this.text(u.text,u.x+u.width/2,u.y+h,{align:"center",baseline:"top",maxWidth:u.width-h-h}):this.text(u.text,u.x+h,u.y+h,{align:"left",baseline:"top",maxWidth:u.width-h-h})),this.internal.__cell__.lastCell=u,this};n.table=function(u,f,h,p,g){if(r.call(this),!h)throw new Error("No data for PDF table.");var m,_,b,T,S=[],D=[],B=[],V={},Y={},q=[],P=[],E=(g=g||{}).autoSize||!1,C=g.printHeaders!==!1,M=g.css&&g.css["font-size"]!==void 0?16*g.css["font-size"]:g.fontSize||12,R=g.margins||Object.assign({width:this.getPageWidth()},e),L=typeof g.padding=="number"?g.padding:3,j=g.headerBackgroundColor||"#c8c8c8",$=g.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=C,this.internal.__cell__.margins=R,this.internal.__cell__.table_font_size=M,this.internal.__cell__.padding=L,this.internal.__cell__.headerBackgroundColor=j,this.internal.__cell__.headerTextColor=$,this.setFontSize(M),p==null)D=S=Object.keys(h[0]),B=S.map(function(){return"left"});else if(Array.isArray(p)&&ar(p[0])==="object")for(S=p.map(function(X){return X.name}),D=p.map(function(X){return X.prompt||X.name||""}),B=p.map(function(X){return X.align||"left"}),m=0;m<p.length;m+=1)Y[p[m].name]=p[m].width*(19.049976/25.4);else Array.isArray(p)&&typeof p[0]=="string"&&(D=S=p,B=S.map(function(){return"left"}));if(E||Array.isArray(p)&&typeof p[0]=="string")for(m=0;m<S.length;m+=1){for(V[T=S[m]]=h.map(function(X){return X[T]}),this.setFont(void 0,"bold"),q.push(this.getTextDimensions(D[m],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),_=V[T],this.setFont(void 0,"normal"),b=0;b<_.length;b+=1)q.push(this.getTextDimensions(_[b],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);Y[T]=Math.max.apply(null,q)+L+L,q=[]}if(C){var ne={};for(m=0;m<S.length;m+=1)ne[S[m]]={},ne[S[m]].text=D[m],ne[S[m]].align=B[m];var U=s.call(this,ne,Y);P=S.map(function(X){return new a(u,f,Y[X],U,ne[X].text,void 0,ne[X].align)}),this.setTableHeaderRow(P),this.printHeaderRow(1,!1)}var z=p.reduce(function(X,me){return X[me.name]=me.align,X},{});for(m=0;m<h.length;m+=1){"rowStart"in g&&g.rowStart instanceof Function&&g.rowStart({row:m,data:h[m]},this);var te=s.call(this,h[m],Y);for(b=0;b<S.length;b+=1){var ue=h[m][S[b]];"cellStart"in g&&g.cellStart instanceof Function&&g.cellStart({row:m,col:b,data:ue},this),o.call(this,new a(u,f,Y[S[b]],te,ue,m+2,z[S[b]]))}}return this.internal.__cell__.table_x=u,this.internal.__cell__.table_y=f,this};var s=function(u,f){var h=this.internal.__cell__.padding,p=this.internal.__cell__.table_font_size,g=this.internal.scaleFactor;return Object.keys(u).map(function(m){var _=u[m];return this.splitTextToSize(_.hasOwnProperty("text")?_.text:_,f[m]-h-h)},this).map(function(m){return this.getLineHeightFactor()*m.length*p/g+h+h},this).reduce(function(m,_){return Math.max(m,_)},0)};n.setTableHeaderRow=function(u){r.call(this),this.internal.__cell__.tableHeaderRow=u},n.printHeaderRow=function(u,f){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var h;if(t=!0,typeof this.internal.__cell__.headerFunction=="function"){var p=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new a(p[0],p[1],p[2],p[3],void 0,-1)}this.setFont(void 0,"bold");for(var g=[],m=0;m<this.internal.__cell__.tableHeaderRow.length;m+=1){h=this.internal.__cell__.tableHeaderRow[m].clone(),f&&(h.y=this.internal.__cell__.margins.top||0,g.push(h)),h.lineNumber=u;var _=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),o.call(this,h),this.setTextColor(_)}g.length>0&&this.setTableHeaderRow(g),this.setFont(void 0,"normal"),t=!1}}(qt.API);var c8={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},f8=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],Vy=u8(f8),h8=[100,200,300,400,500,600,700,800,900],_z=u8(h8);function zy(n){var e=n.family.replace(/"|'/g,"").toLowerCase(),t=function(a){return c8[a=a||"normal"]?a:"normal"}(n.style),r=function(a){if(!a)return 400;if(typeof a=="number")return a>=100&&a<=900&&a%100==0?a:400;if(/^\d00$/.test(a))return parseInt(a);switch(a){case"bold":return 700;case"normal":default:return 400}}(n.weight),i=function(a){return typeof Vy[a=a||"normal"]=="number"?a:"normal"}(n.stretch);return{family:e,style:t,weight:r,stretch:i,src:n.src||[],ref:n.ref||{name:e,style:[i,t,r].join(" ")}}}function _4(n,e,t,r){var i;for(i=t;i>=0&&i<e.length;i+=r)if(n[e[i]])return n[e[i]];for(i=t;i>=0&&i<e.length;i-=r)if(n[e[i]])return n[e[i]]}var wz={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},w4={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function b4(n){return[n.stretch,n.style,n.weight,n.family].join(" ")}function bz(n,e,t){for(var r=(t=t||{}).defaultFontFamily||"times",i=Object.assign({},wz,t.genericFontFamilies||{}),a=null,o=null,s=0;s<e.length;++s)if(i[(a=zy(e[s])).family]&&(a.family=i[a.family]),n.hasOwnProperty(a.family)){o=n[a.family];break}if(!(o=o||n[r]))throw new Error("Could not find a font-family for the rule '"+b4(a)+"' and default family '"+r+"'.");if(o=function(u,f){if(f[u])return f[u];var h=Vy[u],p=h<=Vy.normal?-1:1,g=_4(f,f8,h,p);if(!g)throw new Error("Could not find a matching font-stretch value for "+u);return g}(a.stretch,o),o=function(u,f){if(f[u])return f[u];for(var h=c8[u],p=0;p<h.length;++p)if(f[h[p]])return f[h[p]];throw new Error("Could not find a matching font-style for "+u)}(a.style,o),!(o=function(u,f){if(f[u])return f[u];if(u===400&&f[500])return f[500];if(u===500&&f[400])return f[400];var h=_z[u],p=_4(f,h8,h,u<400?-1:1);if(!p)throw new Error("Could not find a matching font-weight for value "+u);return p}(a.weight,o)))throw new Error("Failed to resolve a font for the rule '"+b4(a)+"'.");return o}function A4(n){return n.trimLeft()}function Az(n,e){for(var t=0;t<n.length;){if(n.charAt(t)===e)return[n.substring(0,t),n.substring(t+1)];t+=1}return null}function Ez(n){var e=n.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],n.substring(e[0].length)]}var Fp,E4,S4,Nv=["times"];(function(n){var e,t,r,i,a,o,s,u,f,h=function(G){return G=G||{},this.isStrokeTransparent=G.isStrokeTransparent||!1,this.strokeOpacity=G.strokeOpacity||1,this.strokeStyle=G.strokeStyle||"#000000",this.fillStyle=G.fillStyle||"#000000",this.isFillTransparent=G.isFillTransparent||!1,this.fillOpacity=G.fillOpacity||1,this.font=G.font||"10px sans-serif",this.textBaseline=G.textBaseline||"alphabetic",this.textAlign=G.textAlign||"left",this.lineWidth=G.lineWidth||1,this.lineJoin=G.lineJoin||"miter",this.lineCap=G.lineCap||"butt",this.path=G.path||[],this.transform=G.transform!==void 0?G.transform.clone():new u,this.globalCompositeOperation=G.globalCompositeOperation||"normal",this.globalAlpha=G.globalAlpha||1,this.clip_path=G.clip_path||[],this.currentPoint=G.currentPoint||new o,this.miterLimit=G.miterLimit||10,this.lastPoint=G.lastPoint||new o,this.lineDashOffset=G.lineDashOffset||0,this.lineDash=G.lineDash||[],this.margin=G.margin||[0,0,0,0],this.prevPageLastElemOffset=G.prevPageLastElemOffset||0,this.ignoreClearRect=typeof G.ignoreClearRect!="boolean"||G.ignoreClearRect,this};n.events.push(["initialized",function(){this.context2d=new p(this),e=this.internal.f2,t=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,a=this.internal.getVerticalCoordinate,o=this.internal.Point,s=this.internal.Rectangle,u=this.internal.Matrix,f=new h}]);var p=function(G){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var Q=G;Object.defineProperty(this,"pdf",{get:function(){return Q}});var ee=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return ee},set:function(Be){ee=!!Be}});var ie=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return ie},set:function(Be){ie=!!Be}});var de=0;Object.defineProperty(this,"posX",{get:function(){return de},set:function(Be){isNaN(Be)||(de=Be)}});var Ee=0;Object.defineProperty(this,"posY",{get:function(){return Ee},set:function(Be){isNaN(Be)||(Ee=Be)}}),Object.defineProperty(this,"margin",{get:function(){return f.margin},set:function(Be){var ge;typeof Be=="number"?ge=[Be,Be,Be,Be]:((ge=new Array(4))[0]=Be[0],ge[1]=Be.length>=2?Be[1]:ge[0],ge[2]=Be.length>=3?Be[2]:ge[0],ge[3]=Be.length>=4?Be[3]:ge[1]),f.margin=ge}});var be=!1;Object.defineProperty(this,"autoPaging",{get:function(){return be},set:function(Be){be=Be}});var Te=0;Object.defineProperty(this,"lastBreak",{get:function(){return Te},set:function(Be){Te=Be}});var Ge=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Ge},set:function(Be){Ge=Be}}),Object.defineProperty(this,"ctx",{get:function(){return f},set:function(Be){Be instanceof h&&(f=Be)}}),Object.defineProperty(this,"path",{get:function(){return f.path},set:function(Be){f.path=Be}});var He=[];Object.defineProperty(this,"ctxStack",{get:function(){return He},set:function(Be){He=Be}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(Be){var ge;ge=g(Be),this.ctx.fillStyle=ge.style,this.ctx.isFillTransparent=ge.a===0,this.ctx.fillOpacity=ge.a,this.pdf.setFillColor(ge.r,ge.g,ge.b,{a:ge.a}),this.pdf.setTextColor(ge.r,ge.g,ge.b,{a:ge.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(Be){var ge=g(Be);this.ctx.strokeStyle=ge.style,this.ctx.isStrokeTransparent=ge.a===0,this.ctx.strokeOpacity=ge.a,ge.a===0?this.pdf.setDrawColor(255,255,255):(ge.a,this.pdf.setDrawColor(ge.r,ge.g,ge.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(Be){["butt","round","square"].indexOf(Be)!==-1&&(this.ctx.lineCap=Be,this.pdf.setLineCap(Be))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(Be){isNaN(Be)||(this.ctx.lineWidth=Be,this.pdf.setLineWidth(Be))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(Be){["bevel","round","miter"].indexOf(Be)!==-1&&(this.ctx.lineJoin=Be,this.pdf.setLineJoin(Be))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(Be){isNaN(Be)||(this.ctx.miterLimit=Be,this.pdf.setMiterLimit(Be))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(Be){this.ctx.textBaseline=Be}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(Be){["right","end","center","left","start"].indexOf(Be)!==-1&&(this.ctx.textAlign=Be)}});var rt=null;function st(Be,ge){if(rt===null){var gt=function(lt){var Xe=[];return Object.keys(lt).forEach(function(it){lt[it].forEach(function(at){var ot=null;switch(at){case"bold":ot={family:it,weight:"bold"};break;case"italic":ot={family:it,style:"italic"};break;case"bolditalic":ot={family:it,weight:"bold",style:"italic"};break;case"":case"normal":ot={family:it}}ot!==null&&(ot.ref={name:it,style:at},Xe.push(ot))})}),Xe}(Be.getFontList());rt=function(lt){for(var Xe={},it=0;it<lt.length;++it){var at=zy(lt[it]),ot=at.family,ct=at.stretch,mt=at.style,Rt=at.weight;Xe[ot]=Xe[ot]||{},Xe[ot][ct]=Xe[ot][ct]||{},Xe[ot][ct][mt]=Xe[ot][ct][mt]||{},Xe[ot][ct][mt][Rt]=at}return Xe}(gt.concat(ge))}return rt}var wt=null;Object.defineProperty(this,"fontFaces",{get:function(){return wt},set:function(Be){rt=null,wt=Be}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(Be){var ge;if(this.ctx.font=Be,(ge=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(Be))!==null){var gt=ge[1];ge[2];var lt=ge[3],Xe=ge[4];ge[5];var it=ge[6],at=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Xe)[2];Xe=Math.floor(at==="px"?parseFloat(Xe)*this.pdf.internal.scaleFactor:at==="em"?parseFloat(Xe)*this.pdf.getFontSize():parseFloat(Xe)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Xe);var ot=function(xt){var Ot,ut,mn=[],Vt=xt.trim();if(Vt==="")return Nv;if(Vt in w4)return[w4[Vt]];for(;Vt!=="";){switch(ut=null,Ot=(Vt=A4(Vt)).charAt(0)){case'"':case"'":ut=Az(Vt.substring(1),Ot);break;default:ut=Ez(Vt)}if(ut===null||(mn.push(ut[0]),(Vt=A4(ut[1]))!==""&&Vt.charAt(0)!==","))return Nv;Vt=Vt.replace(/^,/,"")}return mn}(it);if(this.fontFaces){var ct=bz(st(this.pdf,this.fontFaces),ot.map(function(xt){return{family:xt,stretch:"normal",weight:lt,style:gt}}));this.pdf.setFont(ct.ref.name,ct.ref.style)}else{var mt="";(lt==="bold"||parseInt(lt,10)>=700||gt==="bold")&&(mt="bold"),gt==="italic"&&(mt+="italic"),mt.length===0&&(mt="normal");for(var Rt="",_t={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},bt=0;bt<ot.length;bt++){if(this.pdf.internal.getFont(ot[bt],mt,{noFallback:!0,disableWarning:!0})!==void 0){Rt=ot[bt];break}if(mt==="bolditalic"&&this.pdf.internal.getFont(ot[bt],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Rt=ot[bt],mt="bold";else if(this.pdf.internal.getFont(ot[bt],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Rt=ot[bt],mt="normal";break}}if(Rt===""){for(var Nt=0;Nt<ot.length;Nt++)if(_t[ot[Nt]]){Rt=_t[ot[Nt]];break}}Rt=Rt===""?"Times":Rt,this.pdf.setFont(Rt,mt)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(Be){this.ctx.globalCompositeOperation=Be}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(Be){this.ctx.globalAlpha=Be}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(Be){this.ctx.lineDashOffset=Be,me.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(Be){this.ctx.lineDash=Be,me.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(Be){this.ctx.ignoreClearRect=!!Be}})};p.prototype.setLineDash=function(G){this.lineDash=G},p.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},p.prototype.fill=function(){V.call(this,"fill",!1)},p.prototype.stroke=function(){V.call(this,"stroke",!1)},p.prototype.beginPath=function(){this.path=[{type:"begin"}]},p.prototype.moveTo=function(G,Q){if(isNaN(G)||isNaN(Q))throw mr.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var ee=this.ctx.transform.applyToPoint(new o(G,Q));this.path.push({type:"mt",x:ee.x,y:ee.y}),this.ctx.lastPoint=new o(G,Q)},p.prototype.closePath=function(){var G=new o(0,0),Q=0;for(Q=this.path.length-1;Q!==-1;Q--)if(this.path[Q].type==="begin"&&ar(this.path[Q+1])==="object"&&typeof this.path[Q+1].x=="number"){G=new o(this.path[Q+1].x,this.path[Q+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new o(G.x,G.y)},p.prototype.lineTo=function(G,Q){if(isNaN(G)||isNaN(Q))throw mr.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var ee=this.ctx.transform.applyToPoint(new o(G,Q));this.path.push({type:"lt",x:ee.x,y:ee.y}),this.ctx.lastPoint=new o(ee.x,ee.y)},p.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),V.call(this,null,!0)},p.prototype.quadraticCurveTo=function(G,Q,ee,ie){if(isNaN(ee)||isNaN(ie)||isNaN(G)||isNaN(Q))throw mr.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var de=this.ctx.transform.applyToPoint(new o(ee,ie)),Ee=this.ctx.transform.applyToPoint(new o(G,Q));this.path.push({type:"qct",x1:Ee.x,y1:Ee.y,x:de.x,y:de.y}),this.ctx.lastPoint=new o(de.x,de.y)},p.prototype.bezierCurveTo=function(G,Q,ee,ie,de,Ee){if(isNaN(de)||isNaN(Ee)||isNaN(G)||isNaN(Q)||isNaN(ee)||isNaN(ie))throw mr.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var be=this.ctx.transform.applyToPoint(new o(de,Ee)),Te=this.ctx.transform.applyToPoint(new o(G,Q)),Ge=this.ctx.transform.applyToPoint(new o(ee,ie));this.path.push({type:"bct",x1:Te.x,y1:Te.y,x2:Ge.x,y2:Ge.y,x:be.x,y:be.y}),this.ctx.lastPoint=new o(be.x,be.y)},p.prototype.arc=function(G,Q,ee,ie,de,Ee){if(isNaN(G)||isNaN(Q)||isNaN(ee)||isNaN(ie)||isNaN(de))throw mr.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(Ee=!!Ee,!this.ctx.transform.isIdentity){var be=this.ctx.transform.applyToPoint(new o(G,Q));G=be.x,Q=be.y;var Te=this.ctx.transform.applyToPoint(new o(0,ee)),Ge=this.ctx.transform.applyToPoint(new o(0,0));ee=Math.sqrt(Math.pow(Te.x-Ge.x,2)+Math.pow(Te.y-Ge.y,2))}Math.abs(de-ie)>=2*Math.PI&&(ie=0,de=2*Math.PI),this.path.push({type:"arc",x:G,y:Q,radius:ee,startAngle:ie,endAngle:de,counterclockwise:Ee})},p.prototype.arcTo=function(G,Q,ee,ie,de){throw new Error("arcTo not implemented.")},p.prototype.rect=function(G,Q,ee,ie){if(isNaN(G)||isNaN(Q)||isNaN(ee)||isNaN(ie))throw mr.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(G,Q),this.lineTo(G+ee,Q),this.lineTo(G+ee,Q+ie),this.lineTo(G,Q+ie),this.lineTo(G,Q),this.lineTo(G+ee,Q),this.lineTo(G,Q)},p.prototype.fillRect=function(G,Q,ee,ie){if(isNaN(G)||isNaN(Q)||isNaN(ee)||isNaN(ie))throw mr.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!m.call(this)){var de={};this.lineCap!=="butt"&&(de.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(de.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(G,Q,ee,ie),this.fill(),de.hasOwnProperty("lineCap")&&(this.lineCap=de.lineCap),de.hasOwnProperty("lineJoin")&&(this.lineJoin=de.lineJoin)}},p.prototype.strokeRect=function(G,Q,ee,ie){if(isNaN(G)||isNaN(Q)||isNaN(ee)||isNaN(ie))throw mr.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");_.call(this)||(this.beginPath(),this.rect(G,Q,ee,ie),this.stroke())},p.prototype.clearRect=function(G,Q,ee,ie){if(isNaN(G)||isNaN(Q)||isNaN(ee)||isNaN(ie))throw mr.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(G,Q,ee,ie))},p.prototype.save=function(G){G=typeof G!="boolean"||G;for(var Q=this.pdf.internal.getCurrentPageInfo().pageNumber,ee=0;ee<this.pdf.internal.getNumberOfPages();ee++)this.pdf.setPage(ee+1),this.pdf.internal.out("q");if(this.pdf.setPage(Q),G){this.ctx.fontSize=this.pdf.internal.getFontSize();var ie=new h(this.ctx);this.ctxStack.push(this.ctx),this.ctx=ie}},p.prototype.restore=function(G){G=typeof G!="boolean"||G;for(var Q=this.pdf.internal.getCurrentPageInfo().pageNumber,ee=0;ee<this.pdf.internal.getNumberOfPages();ee++)this.pdf.setPage(ee+1),this.pdf.internal.out("Q");this.pdf.setPage(Q),G&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},p.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var g=function(G){var Q,ee,ie,de;if(G.isCanvasGradient===!0&&(G=G.getColor()),!G)return{r:0,g:0,b:0,a:0,style:G};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(G))Q=0,ee=0,ie=0,de=0;else{var Ee=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(G);if(Ee!==null)Q=parseInt(Ee[1]),ee=parseInt(Ee[2]),ie=parseInt(Ee[3]),de=1;else if((Ee=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(G))!==null)Q=parseInt(Ee[1]),ee=parseInt(Ee[2]),ie=parseInt(Ee[3]),de=parseFloat(Ee[4]);else{if(de=1,typeof G=="string"&&G.charAt(0)!=="#"){var be=new r8(G);G=be.ok?be.toHex():"#000000"}G.length===4?(Q=G.substring(1,2),Q+=Q,ee=G.substring(2,3),ee+=ee,ie=G.substring(3,4),ie+=ie):(Q=G.substring(1,3),ee=G.substring(3,5),ie=G.substring(5,7)),Q=parseInt(Q,16),ee=parseInt(ee,16),ie=parseInt(ie,16)}}return{r:Q,g:ee,b:ie,a:de,style:G}},m=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},_=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};p.prototype.fillText=function(G,Q,ee,ie){if(isNaN(Q)||isNaN(ee)||typeof G!="string")throw mr.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(ie=isNaN(ie)?void 0:ie,!m.call(this)){var de=te(this.ctx.transform.rotation),Ee=this.ctx.transform.scaleX;L.call(this,{text:G,x:Q,y:ee,scale:Ee,angle:de,align:this.textAlign,maxWidth:ie})}},p.prototype.strokeText=function(G,Q,ee,ie){if(isNaN(Q)||isNaN(ee)||typeof G!="string")throw mr.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!_.call(this)){ie=isNaN(ie)?void 0:ie;var de=te(this.ctx.transform.rotation),Ee=this.ctx.transform.scaleX;L.call(this,{text:G,x:Q,y:ee,scale:Ee,renderingMode:"stroke",angle:de,align:this.textAlign,maxWidth:ie})}},p.prototype.measureText=function(G){if(typeof G!="string")throw mr.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var Q=this.pdf,ee=this.pdf.internal.scaleFactor,ie=Q.internal.getFontSize(),de=Q.getStringUnitWidth(G)*ie/Q.internal.scaleFactor,Ee=function(be){var Te=(be=be||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return Te}}),this};return new Ee({width:de*=Math.round(96*ee/72*1e4)/1e4})},p.prototype.scale=function(G,Q){if(isNaN(G)||isNaN(Q))throw mr.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var ee=new u(G,0,0,Q,0,0);this.ctx.transform=this.ctx.transform.multiply(ee)},p.prototype.rotate=function(G){if(isNaN(G))throw mr.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var Q=new u(Math.cos(G),Math.sin(G),-Math.sin(G),Math.cos(G),0,0);this.ctx.transform=this.ctx.transform.multiply(Q)},p.prototype.translate=function(G,Q){if(isNaN(G)||isNaN(Q))throw mr.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var ee=new u(1,0,0,1,G,Q);this.ctx.transform=this.ctx.transform.multiply(ee)},p.prototype.transform=function(G,Q,ee,ie,de,Ee){if(isNaN(G)||isNaN(Q)||isNaN(ee)||isNaN(ie)||isNaN(de)||isNaN(Ee))throw mr.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var be=new u(G,Q,ee,ie,de,Ee);this.ctx.transform=this.ctx.transform.multiply(be)},p.prototype.setTransform=function(G,Q,ee,ie,de,Ee){G=isNaN(G)?1:G,Q=isNaN(Q)?0:Q,ee=isNaN(ee)?0:ee,ie=isNaN(ie)?1:ie,de=isNaN(de)?0:de,Ee=isNaN(Ee)?0:Ee,this.ctx.transform=new u(G,Q,ee,ie,de,Ee)};var b=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};p.prototype.drawImage=function(G,Q,ee,ie,de,Ee,be,Te,Ge){var He=this.pdf.getImageProperties(G),rt=1,st=1,wt=1,Be=1;ie!==void 0&&Te!==void 0&&(wt=Te/ie,Be=Ge/de,rt=He.width/ie*Te/ie,st=He.height/de*Ge/de),Ee===void 0&&(Ee=Q,be=ee,Q=0,ee=0),ie!==void 0&&Te===void 0&&(Te=ie,Ge=de),ie===void 0&&Te===void 0&&(Te=He.width,Ge=He.height);for(var ge,gt=this.ctx.transform.decompose(),lt=te(gt.rotate.shx),Xe=new u,it=(Xe=(Xe=(Xe=Xe.multiply(gt.translate)).multiply(gt.skew)).multiply(gt.scale)).applyToRectangle(new s(Ee-Q*wt,be-ee*Be,ie*rt,de*st)),at=T.call(this,it),ot=[],ct=0;ct<at.length;ct+=1)ot.indexOf(at[ct])===-1&&ot.push(at[ct]);if(B(ot),this.autoPaging)for(var mt=ot[0],Rt=ot[ot.length-1],_t=mt;_t<Rt+1;_t++){this.pdf.setPage(_t);var bt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Nt=_t===1?this.posY+this.margin[0]:this.margin[0],xt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ot=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],ut=_t===1?0:xt+(_t-2)*Ot;if(this.ctx.clip_path.length!==0){var mn=this.path;ge=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=D(ge,this.posX+this.margin[3],-ut+Nt+this.ctx.prevPageLastElemOffset),Y.call(this,"fill",!0),this.path=mn}var Vt=JSON.parse(JSON.stringify(it));Vt=D([Vt],this.posX+this.margin[3],-ut+Nt+this.ctx.prevPageLastElemOffset)[0];var Xn=(_t>mt||_t<Rt)&&b.call(this);Xn&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],bt,Ot,null).clip().discardPath()),this.pdf.addImage(G,"JPEG",Vt.x,Vt.y,Vt.w,Vt.h,null,null,lt),Xn&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(G,"JPEG",it.x,it.y,it.w,it.h,null,null,lt)};var T=function(G,Q,ee){var ie=[];Q=Q||this.pdf.internal.pageSize.width,ee=ee||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var de=this.posY+this.ctx.prevPageLastElemOffset;switch(G.type){default:case"mt":case"lt":ie.push(Math.floor((G.y+de)/ee)+1);break;case"arc":ie.push(Math.floor((G.y+de-G.radius)/ee)+1),ie.push(Math.floor((G.y+de+G.radius)/ee)+1);break;case"qct":var Ee=ue(this.ctx.lastPoint.x,this.ctx.lastPoint.y,G.x1,G.y1,G.x,G.y);ie.push(Math.floor((Ee.y+de)/ee)+1),ie.push(Math.floor((Ee.y+Ee.h+de)/ee)+1);break;case"bct":var be=X(this.ctx.lastPoint.x,this.ctx.lastPoint.y,G.x1,G.y1,G.x2,G.y2,G.x,G.y);ie.push(Math.floor((be.y+de)/ee)+1),ie.push(Math.floor((be.y+be.h+de)/ee)+1);break;case"rect":ie.push(Math.floor((G.y+de)/ee)+1),ie.push(Math.floor((G.y+G.h+de)/ee)+1)}for(var Te=0;Te<ie.length;Te+=1)for(;this.pdf.internal.getNumberOfPages()<ie[Te];)S.call(this);return ie},S=function(){var G=this.fillStyle,Q=this.strokeStyle,ee=this.font,ie=this.lineCap,de=this.lineWidth,Ee=this.lineJoin;this.pdf.addPage(),this.fillStyle=G,this.strokeStyle=Q,this.font=ee,this.lineCap=ie,this.lineWidth=de,this.lineJoin=Ee},D=function(G,Q,ee){for(var ie=0;ie<G.length;ie++)switch(G[ie].type){case"bct":G[ie].x2+=Q,G[ie].y2+=ee;case"qct":G[ie].x1+=Q,G[ie].y1+=ee;case"mt":case"lt":case"arc":default:G[ie].x+=Q,G[ie].y+=ee}return G},B=function(G){return G.sort(function(Q,ee){return Q-ee})},V=function(G,Q){for(var ee,ie,de=this.fillStyle,Ee=this.strokeStyle,be=this.lineCap,Te=this.lineWidth,Ge=Math.abs(Te*this.ctx.transform.scaleX),He=this.lineJoin,rt=JSON.parse(JSON.stringify(this.path)),st=JSON.parse(JSON.stringify(this.path)),wt=[],Be=0;Be<st.length;Be++)if(st[Be].x!==void 0)for(var ge=T.call(this,st[Be]),gt=0;gt<ge.length;gt+=1)wt.indexOf(ge[gt])===-1&&wt.push(ge[gt]);for(var lt=0;lt<wt.length;lt++)for(;this.pdf.internal.getNumberOfPages()<wt[lt];)S.call(this);if(B(wt),this.autoPaging)for(var Xe=wt[0],it=wt[wt.length-1],at=Xe;at<it+1;at++){this.pdf.setPage(at),this.fillStyle=de,this.strokeStyle=Ee,this.lineCap=be,this.lineWidth=Ge,this.lineJoin=He;var ot=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],ct=at===1?this.posY+this.margin[0]:this.margin[0],mt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Rt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],_t=at===1?0:mt+(at-2)*Rt;if(this.ctx.clip_path.length!==0){var bt=this.path;ee=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=D(ee,this.posX+this.margin[3],-_t+ct+this.ctx.prevPageLastElemOffset),Y.call(this,G,!0),this.path=bt}if(ie=JSON.parse(JSON.stringify(rt)),this.path=D(ie,this.posX+this.margin[3],-_t+ct+this.ctx.prevPageLastElemOffset),Q===!1||at===0){var Nt=(at>Xe||at<it)&&b.call(this);Nt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ot,Rt,null).clip().discardPath()),Y.call(this,G,Q),Nt&&this.pdf.restoreGraphicsState()}this.lineWidth=Te}else this.lineWidth=Ge,Y.call(this,G,Q),this.lineWidth=Te;this.path=rt},Y=function(G,Q){if((G!=="stroke"||Q||!_.call(this))&&(G==="stroke"||Q||!m.call(this))){for(var ee,ie,de=[],Ee=this.path,be=0;be<Ee.length;be++){var Te=Ee[be];switch(Te.type){case"begin":de.push({begin:!0});break;case"close":de.push({close:!0});break;case"mt":de.push({start:Te,deltas:[],abs:[]});break;case"lt":var Ge=de.length;if(Ee[be-1]&&!isNaN(Ee[be-1].x)&&(ee=[Te.x-Ee[be-1].x,Te.y-Ee[be-1].y],Ge>0)){for(;Ge>=0;Ge--)if(de[Ge-1].close!==!0&&de[Ge-1].begin!==!0){de[Ge-1].deltas.push(ee),de[Ge-1].abs.push(Te);break}}break;case"bct":ee=[Te.x1-Ee[be-1].x,Te.y1-Ee[be-1].y,Te.x2-Ee[be-1].x,Te.y2-Ee[be-1].y,Te.x-Ee[be-1].x,Te.y-Ee[be-1].y],de[de.length-1].deltas.push(ee);break;case"qct":var He=Ee[be-1].x+2/3*(Te.x1-Ee[be-1].x),rt=Ee[be-1].y+2/3*(Te.y1-Ee[be-1].y),st=Te.x+2/3*(Te.x1-Te.x),wt=Te.y+2/3*(Te.y1-Te.y),Be=Te.x,ge=Te.y;ee=[He-Ee[be-1].x,rt-Ee[be-1].y,st-Ee[be-1].x,wt-Ee[be-1].y,Be-Ee[be-1].x,ge-Ee[be-1].y],de[de.length-1].deltas.push(ee);break;case"arc":de.push({deltas:[],abs:[],arc:!0}),Array.isArray(de[de.length-1].abs)&&de[de.length-1].abs.push(Te)}}ie=Q?null:G==="stroke"?"stroke":"fill";for(var gt=!1,lt=0;lt<de.length;lt++)if(de[lt].arc)for(var Xe=de[lt].abs,it=0;it<Xe.length;it++){var at=Xe[it];at.type==="arc"?E.call(this,at.x,at.y,at.radius,at.startAngle,at.endAngle,at.counterclockwise,void 0,Q,!gt):j.call(this,at.x,at.y),gt=!0}else if(de[lt].close===!0)this.pdf.internal.out("h"),gt=!1;else if(de[lt].begin!==!0){var ot=de[lt].start.x,ct=de[lt].start.y;$.call(this,de[lt].deltas,ot,ct),gt=!0}ie&&C.call(this,ie),Q&&M.call(this)}},q=function(G){var Q=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,ee=Q*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return G-ee;case"top":return G+Q-ee;case"hanging":return G+Q-2*ee;case"middle":return G+Q/2-ee;case"ideographic":return G;case"alphabetic":default:return G}},P=function(G){return G+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};p.prototype.createLinearGradient=function(){var G=function(){};return G.colorStops=[],G.addColorStop=function(Q,ee){this.colorStops.push([Q,ee])},G.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},G.isCanvasGradient=!0,G},p.prototype.createPattern=function(){return this.createLinearGradient()},p.prototype.createRadialGradient=function(){return this.createLinearGradient()};var E=function(G,Q,ee,ie,de,Ee,be,Te,Ge){for(var He=U.call(this,ee,ie,de,Ee),rt=0;rt<He.length;rt++){var st=He[rt];rt===0&&(Ge?R.call(this,st.x1+G,st.y1+Q):j.call(this,st.x1+G,st.y1+Q)),ne.call(this,G,Q,st.x2,st.y2,st.x3,st.y3,st.x4,st.y4)}Te?M.call(this):C.call(this,be)},C=function(G){switch(G){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},M=function(){this.pdf.clip(),this.pdf.discardPath()},R=function(G,Q){this.pdf.internal.out(t(G)+" "+r(Q)+" m")},L=function(G){var Q;switch(G.align){case"right":case"end":Q="right";break;case"center":Q="center";break;case"left":case"start":default:Q="left"}var ee=this.pdf.getTextDimensions(G.text),ie=q.call(this,G.y),de=P.call(this,ie)-ee.h,Ee=this.ctx.transform.applyToPoint(new o(G.x,ie)),be=this.ctx.transform.decompose(),Te=new u;Te=(Te=(Te=Te.multiply(be.translate)).multiply(be.skew)).multiply(be.scale);for(var Ge,He,rt,st=this.ctx.transform.applyToRectangle(new s(G.x,ie,ee.w,ee.h)),wt=Te.applyToRectangle(new s(G.x,de,ee.w,ee.h)),Be=T.call(this,wt),ge=[],gt=0;gt<Be.length;gt+=1)ge.indexOf(Be[gt])===-1&&ge.push(Be[gt]);if(B(ge),this.autoPaging)for(var lt=ge[0],Xe=ge[ge.length-1],it=lt;it<Xe+1;it++){this.pdf.setPage(it);var at=it===1?this.posY+this.margin[0]:this.margin[0],ot=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],ct=this.pdf.internal.pageSize.height-this.margin[2],mt=ct-this.margin[0],Rt=this.pdf.internal.pageSize.width-this.margin[1],_t=Rt-this.margin[3],bt=it===1?0:ot+(it-2)*mt;if(this.ctx.clip_path.length!==0){var Nt=this.path;Ge=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=D(Ge,this.posX+this.margin[3],-1*bt+at),Y.call(this,"fill",!0),this.path=Nt}var xt=D([JSON.parse(JSON.stringify(wt))],this.posX+this.margin[3],-bt+at+this.ctx.prevPageLastElemOffset)[0];G.scale>=.01&&(He=this.pdf.internal.getFontSize(),this.pdf.setFontSize(He*G.scale),rt=this.lineWidth,this.lineWidth=rt*G.scale);var Ot=this.autoPaging!=="text";if(Ot||xt.y+xt.h<=ct){if(Ot||xt.y>=at&&xt.x<=Rt){var ut=Ot?G.text:this.pdf.splitTextToSize(G.text,G.maxWidth||Rt-xt.x)[0],mn=D([JSON.parse(JSON.stringify(st))],this.posX+this.margin[3],-bt+at+this.ctx.prevPageLastElemOffset)[0],Vt=Ot&&(it>lt||it<Xe)&&b.call(this);Vt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],_t,mt,null).clip().discardPath()),this.pdf.text(ut,mn.x,mn.y,{angle:G.angle,align:Q,renderingMode:G.renderingMode}),Vt&&this.pdf.restoreGraphicsState()}}else xt.y<ct&&(this.ctx.prevPageLastElemOffset+=ct-xt.y);G.scale>=.01&&(this.pdf.setFontSize(He),this.lineWidth=rt)}else G.scale>=.01&&(He=this.pdf.internal.getFontSize(),this.pdf.setFontSize(He*G.scale),rt=this.lineWidth,this.lineWidth=rt*G.scale),this.pdf.text(G.text,Ee.x+this.posX,Ee.y+this.posY,{angle:G.angle,align:Q,renderingMode:G.renderingMode,maxWidth:G.maxWidth}),G.scale>=.01&&(this.pdf.setFontSize(He),this.lineWidth=rt)},j=function(G,Q,ee,ie){ee=ee||0,ie=ie||0,this.pdf.internal.out(t(G+ee)+" "+r(Q+ie)+" l")},$=function(G,Q,ee){return this.pdf.lines(G,Q,ee,null,null)},ne=function(G,Q,ee,ie,de,Ee,be,Te){this.pdf.internal.out([e(i(ee+G)),e(a(ie+Q)),e(i(de+G)),e(a(Ee+Q)),e(i(be+G)),e(a(Te+Q)),"c"].join(" "))},U=function(G,Q,ee,ie){for(var de=2*Math.PI,Ee=Math.PI/2;Q>ee;)Q-=de;var be=Math.abs(ee-Q);be<de&&ie&&(be=de-be);for(var Te=[],Ge=ie?-1:1,He=Q;be>1e-5;){var rt=He+Ge*Math.min(be,Ee);Te.push(z.call(this,G,He,rt)),be-=Math.abs(rt-He),He=rt}return Te},z=function(G,Q,ee){var ie=(ee-Q)/2,de=G*Math.cos(ie),Ee=G*Math.sin(ie),be=de,Te=-Ee,Ge=be*be+Te*Te,He=Ge+be*de+Te*Ee,rt=4/3*(Math.sqrt(2*Ge*He)-He)/(be*Ee-Te*de),st=be-rt*Te,wt=Te+rt*be,Be=st,ge=-wt,gt=ie+Q,lt=Math.cos(gt),Xe=Math.sin(gt);return{x1:G*Math.cos(Q),y1:G*Math.sin(Q),x2:st*lt-wt*Xe,y2:st*Xe+wt*lt,x3:Be*lt-ge*Xe,y3:Be*Xe+ge*lt,x4:G*Math.cos(ee),y4:G*Math.sin(ee)}},te=function(G){return 180*G/Math.PI},ue=function(G,Q,ee,ie,de,Ee){var be=G+.5*(ee-G),Te=Q+.5*(ie-Q),Ge=de+.5*(ee-de),He=Ee+.5*(ie-Ee),rt=Math.min(G,de,be,Ge),st=Math.max(G,de,be,Ge),wt=Math.min(Q,Ee,Te,He),Be=Math.max(Q,Ee,Te,He);return new s(rt,wt,st-rt,Be-wt)},X=function(G,Q,ee,ie,de,Ee,be,Te){var Ge,He,rt,st,wt,Be,ge,gt,lt,Xe,it,at,ot,ct,mt=ee-G,Rt=ie-Q,_t=de-ee,bt=Ee-ie,Nt=be-de,xt=Te-Ee;for(He=0;He<41;He++)lt=(ge=(rt=G+(Ge=He/40)*mt)+Ge*((wt=ee+Ge*_t)-rt))+Ge*(wt+Ge*(de+Ge*Nt-wt)-ge),Xe=(gt=(st=Q+Ge*Rt)+Ge*((Be=ie+Ge*bt)-st))+Ge*(Be+Ge*(Ee+Ge*xt-Be)-gt),He==0?(it=lt,at=Xe,ot=lt,ct=Xe):(it=Math.min(it,lt),at=Math.min(at,Xe),ot=Math.max(ot,lt),ct=Math.max(ct,Xe));return new s(Math.round(it),Math.round(at),Math.round(ot-it),Math.round(ct-at))},me=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var G,Q,ee=(G=this.ctx.lineDash,Q=this.ctx.lineDashOffset,JSON.stringify({lineDash:G,lineDashOffset:Q}));this.prevLineDash!==ee&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=ee)}}})(qt.API),function(n){var e=function(a){var o,s,u,f,h,p,g,m,_,b;for(s=[],u=0,f=(a+=o="\0\0\0\0".slice(a.length%4||4)).length;f>u;u+=4)(h=(a.charCodeAt(u)<<24)+(a.charCodeAt(u+1)<<16)+(a.charCodeAt(u+2)<<8)+a.charCodeAt(u+3))!==0?(p=(h=((h=((h=((h=(h-(b=h%85))/85)-(_=h%85))/85)-(m=h%85))/85)-(g=h%85))/85)%85,s.push(p+33,g+33,m+33,_+33,b+33)):s.push(122);return function(T,S){for(var D=S;D>0;D--)T.pop()}(s,o.length),String.fromCharCode.apply(String,s)+"~>"},t=function(a){var o,s,u,f,h,p=String,g="length",m=255,_="charCodeAt",b="slice",T="replace";for(a[b](-2),a=a[b](0,-2)[T](/\s/g,"")[T]("z","!!!!!"),u=[],f=0,h=(a+=o="uuuuu"[b](a[g]%5||5))[g];h>f;f+=5)s=52200625*(a[_](f)-33)+614125*(a[_](f+1)-33)+7225*(a[_](f+2)-33)+85*(a[_](f+3)-33)+(a[_](f+4)-33),u.push(m&s>>24,m&s>>16,m&s>>8,m&s);return function(S,D){for(var B=D;B>0;B--)S.pop()}(u,o[g]),p.fromCharCode.apply(p,u)},r=function(a){var o=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((a=a.replace(/\s/g,"")).indexOf(">")!==-1&&(a=a.substr(0,a.indexOf(">"))),a.length%2&&(a+="0"),o.test(a)===!1)return"";for(var s="",u=0;u<a.length;u+=2)s+=String.fromCharCode("0x"+(a[u]+a[u+1]));return s},i=function(a){for(var o=new Uint8Array(a.length),s=a.length;s--;)o[s]=a.charCodeAt(s);return a=(o=My(o)).reduce(function(u,f){return u+String.fromCharCode(f)},"")};n.processDataByFilters=function(a,o){var s=0,u=a||"",f=[];for(typeof(o=o||[])=="string"&&(o=[o]),s=0;s<o.length;s+=1)switch(o[s]){case"ASCII85Decode":case"/ASCII85Decode":u=t(u),f.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":u=e(u),f.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":u=r(u),f.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":u=u.split("").map(function(h){return("0"+h.charCodeAt().toString(16)).slice(-2)}).join("")+">",f.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":u=i(u),f.push("/FlateDecode");break;default:throw new Error('The filter: "'+o[s]+'" is not implemented')}return{data:u,reverseChain:f.reverse().join(" ")}}}(qt.API),function(n){n.loadFile=function(e,t,r){return function(i,a,o){a=a!==!1,o=typeof o=="function"?o:function(){};var s=void 0;try{s=function(u,f,h){var p=new XMLHttpRequest,g=0,m=function(_){var b=_.length,T=[],S=String.fromCharCode;for(g=0;g<b;g+=1)T.push(S(255&_.charCodeAt(g)));return T.join("")};if(p.open("GET",u,!f),p.overrideMimeType("text/plain; charset=x-user-defined"),f===!1&&(p.onload=function(){p.status===200?h(m(this.responseText)):h(void 0)}),p.send(null),f&&p.status===200)return m(p.responseText)}(i,a,o)}catch{}return s}(e,t,r)},n.loadImageFile=n.loadFile}(qt.API),function(n){function e(){return(Gt.html2canvas?Promise.resolve(Gt.html2canvas):Oy(()=>import("./html2canvas.esm-CBrSDip1.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load html2canvas: "+o))}).then(function(o){return o.default?o.default:o})}function t(){return(Gt.DOMPurify?Promise.resolve(Gt.DOMPurify):Oy(()=>import("./purify.es-CQJ0hv7W.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load dompurify: "+o))}).then(function(o){return o.default?o.default:o})}var r=function(o){var s=ar(o);return s==="undefined"?"undefined":s==="string"||o instanceof String?"string":s==="number"||o instanceof Number?"number":s==="function"||o instanceof Function?"function":o&&o.constructor===Array?"array":o&&o.nodeType===1?"element":s==="object"?"object":"unknown"},i=function(o,s){var u=document.createElement(o);for(var f in s.className&&(u.className=s.className),s.innerHTML&&s.dompurify&&(u.innerHTML=s.dompurify.sanitize(s.innerHTML)),s.style)u.style[f]=s.style[f];return u},a=function o(s){var u=Object.assign(o.convert(Promise.resolve()),JSON.parse(JSON.stringify(o.template))),f=o.convert(Promise.resolve(),u);return f=(f=f.setProgress(1,o,1,[o])).set(s)};(a.prototype=Object.create(Promise.prototype)).constructor=a,a.convert=function(o,s){return o.__proto__=s||a.prototype,o},a.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},a.prototype.from=function(o,s){return this.then(function(){switch(s=s||function(u){switch(r(u)){case"string":return"string";case"element":return u.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(o)){case"string":return this.then(t).then(function(u){return this.set({src:i("div",{innerHTML:o,dompurify:u})})});case"element":return this.set({src:o});case"canvas":return this.set({canvas:o});case"img":return this.set({img:o});default:return this.error("Unknown source type.")}})},a.prototype.to=function(o){switch(o){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},a.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var o={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},s=function u(f,h){for(var p=f.nodeType===3?document.createTextNode(f.nodeValue):f.cloneNode(!1),g=f.firstChild;g;g=g.nextSibling)h!==!0&&g.nodeType===1&&g.nodeName==="SCRIPT"||p.appendChild(u(g,h));return f.nodeType===1&&(f.nodeName==="CANVAS"?(p.width=f.width,p.height=f.height,p.getContext("2d").drawImage(f,0,0)):f.nodeName!=="TEXTAREA"&&f.nodeName!=="SELECT"||(p.value=f.value),p.addEventListener("load",function(){p.scrollTop=f.scrollTop,p.scrollLeft=f.scrollLeft},!0)),p}(this.prop.src,this.opt.html2canvas.javascriptEnabled);s.tagName==="BODY"&&(o.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:o}),this.prop.container.appendChild(s),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},a.prototype.toCanvas=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(e).then(function(s){var u=Object.assign({},this.opt.html2canvas);return delete u.onrendered,s(this.prop.container,u)}).then(function(s){(this.opt.html2canvas.onrendered||function(){})(s),this.prop.canvas=s,document.body.removeChild(this.prop.overlay)})},a.prototype.toContext2d=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(e).then(function(s){var u=this.opt.jsPDF,f=this.opt.fontFaces,h=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,p=Object.assign({async:!0,allowTaint:!0,scale:h,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete p.onrendered,u.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,u.context2d.posX=this.opt.x,u.context2d.posY=this.opt.y,u.context2d.margin=this.opt.margin,u.context2d.fontFaces=f,f)for(var g=0;g<f.length;++g){var m=f[g],_=m.src.find(function(b){return b.format==="truetype"});_&&u.addFont(_.url,m.ref.name,m.ref.style)}return p.windowHeight=p.windowHeight||0,p.windowHeight=p.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):p.windowHeight,u.context2d.save(!0),s(this.prop.container,p)}).then(function(s){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(s),this.prop.canvas=s,document.body.removeChild(this.prop.overlay)})},a.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var o=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=o})},a.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},a.prototype.output=function(o,s,u){return(u=u||"pdf").toLowerCase()==="img"||u.toLowerCase()==="image"?this.outputImg(o,s):this.outputPdf(o,s)},a.prototype.outputPdf=function(o,s){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(o,s)})},a.prototype.outputImg=function(o){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(o){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+o+'" is not supported.'}})},a.prototype.save=function(o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(o?{filename:o}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},a.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},a.prototype.set=function(o){if(r(o)!=="object")return this;var s=Object.keys(o||{}).map(function(u){if(u in a.template.prop)return function(){this.prop[u]=o[u]};switch(u){case"margin":return this.setMargin.bind(this,o.margin);case"jsPDF":return function(){return this.opt.jsPDF=o.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,o.pageSize);default:return function(){this.opt[u]=o[u]}}},this);return this.then(function(){return this.thenList(s)})},a.prototype.get=function(o,s){return this.then(function(){var u=o in a.template.prop?this.prop[o]:this.opt[o];return s?s(u):u})},a.prototype.setMargin=function(o){return this.then(function(){switch(r(o)){case"number":o=[o,o,o,o];case"array":if(o.length===2&&(o=[o[0],o[1],o[0],o[1]]),o.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=o}).then(this.setPageSize)},a.prototype.setPageSize=function(o){function s(u,f){return Math.floor(u*f/72*96)}return this.then(function(){(o=o||qt.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(o.inner={width:o.width-this.opt.margin[1]-this.opt.margin[3],height:o.height-this.opt.margin[0]-this.opt.margin[2]},o.inner.px={width:s(o.inner.width,o.k),height:s(o.inner.height,o.k)},o.inner.ratio=o.inner.height/o.inner.width),this.prop.pageSize=o})},a.prototype.setProgress=function(o,s,u,f){return o!=null&&(this.progress.val=o),s!=null&&(this.progress.state=s),u!=null&&(this.progress.n=u),f!=null&&(this.progress.stack=f),this.progress.ratio=this.progress.val/this.progress.state,this},a.prototype.updateProgress=function(o,s,u,f){return this.setProgress(o?this.progress.val+o:null,s||null,u?this.progress.n+u:null,f?this.progress.stack.concat(f):null)},a.prototype.then=function(o,s){var u=this;return this.thenCore(o,s,function(f,h){return u.updateProgress(null,null,1,[f]),Promise.prototype.then.call(this,function(p){return u.updateProgress(null,f),p}).then(f,h).then(function(p){return u.updateProgress(1),p})})},a.prototype.thenCore=function(o,s,u){u=u||Promise.prototype.then,o&&(o=o.bind(this)),s&&(s=s.bind(this));var f=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:a.convert(Object.assign({},this),Promise.prototype),h=u.call(f,o,s);return a.convert(h,this.__proto__)},a.prototype.thenExternal=function(o,s){return Promise.prototype.then.call(this,o,s)},a.prototype.thenList=function(o){var s=this;return o.forEach(function(u){s=s.thenCore(u)}),s},a.prototype.catch=function(o){o&&(o=o.bind(this));var s=Promise.prototype.catch.call(this,o);return a.convert(s,this)},a.prototype.catchExternal=function(o){return Promise.prototype.catch.call(this,o)},a.prototype.error=function(o){return this.then(function(){throw new Error(o)})},a.prototype.using=a.prototype.set,a.prototype.saveAs=a.prototype.save,a.prototype.export=a.prototype.output,a.prototype.run=a.prototype.then,qt.getPageSize=function(o,s,u){if(ar(o)==="object"){var f=o;o=f.orientation,s=f.unit||s,u=f.format||u}s=s||"mm",u=u||"a4",o=(""+(o||"P")).toLowerCase();var h,p=(""+u).toLowerCase(),g={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(s){case"pt":h=1;break;case"mm":h=72/25.4;break;case"cm":h=72/2.54;break;case"in":h=72;break;case"px":h=.75;break;case"pc":case"em":h=12;break;case"ex":h=6;break;default:throw"Invalid unit: "+s}var m,_=0,b=0;if(g.hasOwnProperty(p))_=g[p][1]/h,b=g[p][0]/h;else try{_=u[1],b=u[0]}catch{throw new Error("Invalid format: "+u)}if(o==="p"||o==="portrait")o="p",b>_&&(m=b,b=_,_=m);else{if(o!=="l"&&o!=="landscape")throw"Invalid orientation: "+o;o="l",_>b&&(m=b,b=_,_=m)}return{width:b,height:_,unit:s,k:h,orientation:o}},n.html=function(o,s){(s=s||{}).callback=s.callback||function(){},s.html2canvas=s.html2canvas||{},s.html2canvas.canvas=s.html2canvas.canvas||this.canvas,s.jsPDF=s.jsPDF||this,s.fontFaces=s.fontFaces?s.fontFaces.map(zy):null;var u=new a(s);return s.worker?u:u.from(o).doCallback()}}(qt.API),qt.API.addJS=function(n){return S4=n,this.internal.events.subscribe("postPutResources",function(){Fp=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Fp+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),E4=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+S4+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){Fp!==void 0&&E4!==void 0&&this.internal.out("/Names <</JavaScript "+Fp+" 0 R>>")}),this},function(n){var e;n.events.push(["postPutResources",function(){var t=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=t.outline.render().split(/\r\n/),a=0;a<i.length;a++){var o=i[a],s=r.exec(o);if(s!=null){var u=s[1];t.internal.newObjectDeferredBegin(u,!1)}t.internal.write(o)}if(this.outline.createNamedDestinations){var f=this.internal.pages.length,h=[];for(a=0;a<f;a++){var p=t.internal.newObject();h.push(p);var g=t.internal.getPageInfo(a+1);t.internal.write("<< /D["+g.objId+" 0 R /XYZ null null null]>> endobj")}var m=t.internal.newObject();for(t.internal.write("<< /Names [ "),a=0;a<h.length;a++)t.internal.write("(page_"+(a+1)+")"+h[a]+" 0 R");t.internal.write(" ] >>","endobj"),e=t.internal.newObject(),t.internal.write("<< /Dests "+m+" 0 R"),t.internal.write(">>","endobj")}}]),n.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+e+" 0 R"))}]),n.events.push(["initialized",function(){var t=this;t.outline={createNamedDestinations:!1,root:{children:[]}},t.outline.add=function(r,i,a){var o={title:i,options:a,children:[]};return r==null&&(r=this.root),r.children.push(o),o},t.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=t,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},t.outline.genIds_r=function(r){r.id=t.internal.newObjectDeferred();for(var i=0;i<r.children.length;i++)this.genIds_r(r.children[i])},t.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},t.outline.renderItems=function(r){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,a=0;a<r.children.length;a++){var o=r.children[a];this.objStart(o),this.line("/Title "+this.makeString(o.title)),this.line("/Parent "+this.makeRef(r)),a>0&&this.line("/Prev "+this.makeRef(r.children[a-1])),a<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[a+1])),o.children.length>0&&(this.line("/First "+this.makeRef(o.children[0])),this.line("/Last "+this.makeRef(o.children[o.children.length-1])));var s=this.count=this.count_r({count:0},o);if(s>0&&this.line("/Count "+s),o.options&&o.options.pageNumber){var u=t.internal.getPageInfo(o.options.pageNumber);this.line("/Dest ["+u.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var f=0;f<r.children.length;f++)this.renderItems(r.children[f])},t.outline.line=function(r){this.ctx.val+=r+`\r
`},t.outline.makeRef=function(r){return r.id+" 0 R"},t.outline.makeString=function(r){return"("+t.internal.pdfEscape(r)+")"},t.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},t.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},t.outline.count_r=function(r,i){for(var a=0;a<i.children.length;a++)r.count++,this.count_r(r,i.children[a]);return r.count}}])}(qt.API),function(n){var e=[192,193,194,195,196,197,198,199];n.processJPEG=function(t,r,i,a,o,s){var u,f=this.decode.DCT_DECODE,h=null;if(typeof t=="string"||this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t)){switch(t=o||t,t=this.__addimage__.isArrayBuffer(t)?new Uint8Array(t):t,(u=function(p){for(var g,m=256*p.charCodeAt(4)+p.charCodeAt(5),_=p.length,b={width:0,height:0,numcomponents:1},T=4;T<_;T+=2){if(T+=m,e.indexOf(p.charCodeAt(T+1))!==-1){g=256*p.charCodeAt(T+5)+p.charCodeAt(T+6),b={width:256*p.charCodeAt(T+7)+p.charCodeAt(T+8),height:g,numcomponents:p.charCodeAt(T+9)};break}m=256*p.charCodeAt(T+2)+p.charCodeAt(T+3)}return b}(t=this.__addimage__.isArrayBufferView(t)?this.__addimage__.arrayBufferToBinaryString(t):t)).numcomponents){case 1:s=this.color_spaces.DEVICE_GRAY;break;case 4:s=this.color_spaces.DEVICE_CMYK;break;case 3:s=this.color_spaces.DEVICE_RGB}h={data:t,width:u.width,height:u.height,colorSpace:s,bitsPerComponent:8,filter:f,index:r,alias:i}}return h}}(qt.API);var $h,jp,C4,T4,I4,Sz=function(){var n,e,t;function r(a){var o,s,u,f,h,p,g,m,_,b,T,S,D,B;for(this.data=a,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},p=null;;){switch(o=this.readUInt32(),_=(function(){var V,Y;for(Y=[],V=0;V<4;++V)Y.push(String.fromCharCode(this.data[this.pos++]));return Y}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(o);break;case"fcTL":p&&this.animation.frames.push(p),this.pos+=4,p={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},h=this.readUInt16(),f=this.readUInt16()||100,p.delay=1e3*h/f,p.disposeOp=this.data[this.pos++],p.blendOp=this.data[this.pos++],p.data=[];break;case"IDAT":case"fdAT":for(_==="fdAT"&&(this.pos+=4,o-=4),a=(p!=null?p.data:void 0)||this.imgData,S=0;0<=o?S<o:S>o;0<=o?++S:--S)a.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(u=this.palette.length/3,this.transparency.indexed=this.read(o),this.transparency.indexed.length>u)throw new Error("More transparent colors than palette size");if((b=u-this.transparency.indexed.length)>0)for(D=0;0<=b?D<b:D>b;0<=b?++D:--D)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(o)[0];break;case 2:this.transparency.rgb=this.read(o)}break;case"tEXt":g=(T=this.read(o)).indexOf(0),m=String.fromCharCode.apply(String,T.slice(0,g)),this.text[m]=String.fromCharCode.apply(String,T.slice(g+1));break;case"IEND":return p&&this.animation.frames.push(p),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(B=this.colorType)===4||B===6,s=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*s,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=o}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}r.prototype.read=function(a){var o,s;for(s=[],o=0;0<=a?o<a:o>a;0<=a?++o:--o)s.push(this.data[this.pos++]);return s},r.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.decodePixels=function(a){var o=this.pixelBitlength/8,s=new Uint8Array(this.width*this.height*o),u=0,f=this;if(a==null&&(a=this.imgData),a.length===0)return new Uint8Array(0);function h(p,g,m,_){var b,T,S,D,B,V,Y,q,P,E,C,M,R,L,j,$,ne,U,z,te,ue,X=Math.ceil((f.width-p)/m),me=Math.ceil((f.height-g)/_),G=f.width==X&&f.height==me;for(L=o*X,M=G?s:new Uint8Array(L*me),V=a.length,R=0,T=0;R<me&&u<V;){switch(a[u++]){case 0:for(D=ne=0;ne<L;D=ne+=1)M[T++]=a[u++];break;case 1:for(D=U=0;U<L;D=U+=1)b=a[u++],B=D<o?0:M[T-o],M[T++]=(b+B)%256;break;case 2:for(D=z=0;z<L;D=z+=1)b=a[u++],S=(D-D%o)/o,j=R&&M[(R-1)*L+S*o+D%o],M[T++]=(j+b)%256;break;case 3:for(D=te=0;te<L;D=te+=1)b=a[u++],S=(D-D%o)/o,B=D<o?0:M[T-o],j=R&&M[(R-1)*L+S*o+D%o],M[T++]=(b+Math.floor((B+j)/2))%256;break;case 4:for(D=ue=0;ue<L;D=ue+=1)b=a[u++],S=(D-D%o)/o,B=D<o?0:M[T-o],R===0?j=$=0:(j=M[(R-1)*L+S*o+D%o],$=S&&M[(R-1)*L+(S-1)*o+D%o]),Y=B+j-$,q=Math.abs(Y-B),E=Math.abs(Y-j),C=Math.abs(Y-$),P=q<=E&&q<=C?B:E<=C?j:$,M[T++]=(b+P)%256;break;default:throw new Error("Invalid filter algorithm: "+a[u-1])}if(!G){var Q=((g+R*_)*f.width+p)*o,ee=R*L;for(D=0;D<X;D+=1){for(var ie=0;ie<o;ie+=1)s[Q++]=M[ee++];Q+=(m-1)*o}}R++}}return a=rz(a),f.interlaceMethod==1?(h(0,0,8,8),h(4,0,8,8),h(0,4,4,8),h(2,0,4,4),h(0,2,2,4),h(1,0,2,2),h(0,1,1,2)):h(0,0,1,1),s},r.prototype.decodePalette=function(){var a,o,s,u,f,h,p,g,m;for(s=this.palette,h=this.transparency.indexed||[],f=new Uint8Array((h.length||0)+s.length),u=0,a=0,o=p=0,g=s.length;p<g;o=p+=3)f[u++]=s[o],f[u++]=s[o+1],f[u++]=s[o+2],f[u++]=(m=h[a++])!=null?m:255;return f},r.prototype.copyToImageData=function(a,o){var s,u,f,h,p,g,m,_,b,T,S;if(u=this.colors,b=null,s=this.hasAlphaChannel,this.palette.length&&(b=(S=this._decodedPalette)!=null?S:this._decodedPalette=this.decodePalette(),u=4,s=!0),_=(f=a.data||a).length,p=b||o,h=g=0,u===1)for(;h<_;)m=b?4*o[h/4]:g,T=p[m++],f[h++]=T,f[h++]=T,f[h++]=T,f[h++]=s?p[m++]:255,g=m;else for(;h<_;)m=b?4*o[h/4]:g,f[h++]=p[m++],f[h++]=p[m++],f[h++]=p[m++],f[h++]=s?p[m++]:255,g=m},r.prototype.decode=function(){var a;return a=new Uint8Array(this.width*this.height*4),this.copyToImageData(a,this.decodePixels()),a};var i=function(){if(Object.prototype.toString.call(Gt)==="[object Window]"){try{e=Gt.document.createElement("canvas"),t=e.getContext("2d")}catch{return!1}return!0}return!1};return i(),n=function(a){var o;if(i()===!0)return t.width=a.width,t.height=a.height,t.clearRect(0,0,a.width,a.height),t.putImageData(a,0,0),(o=new Image).src=e.toDataURL(),o;throw new Error("This method requires a Browser with Canvas-capability.")},r.prototype.decodeFrames=function(a){var o,s,u,f,h,p,g,m;if(this.animation){for(m=[],s=h=0,p=(g=this.animation.frames).length;h<p;s=++h)o=g[s],u=a.createImageData(o.width,o.height),f=this.decodePixels(new Uint8Array(o.data)),this.copyToImageData(u,f),o.imageData=u,m.push(o.image=n(u));return m}},r.prototype.renderFrame=function(a,o){var s,u,f;return s=(u=this.animation.frames)[o],f=u[o-1],o===0&&a.clearRect(0,0,this.width,this.height),(f!=null?f.disposeOp:void 0)===1?a.clearRect(f.xOffset,f.yOffset,f.width,f.height):(f!=null?f.disposeOp:void 0)===2&&a.putImageData(f.imageData,f.xOffset,f.yOffset),s.blendOp===0&&a.clearRect(s.xOffset,s.yOffset,s.width,s.height),a.drawImage(s.image,s.xOffset,s.yOffset)},r.prototype.animate=function(a){var o,s,u,f,h,p,g=this;return s=0,p=this.animation,f=p.numFrames,u=p.frames,h=p.numPlays,(o=function(){var m,_;if(m=s++%f,_=u[m],g.renderFrame(a,m),f>1&&s/f<h)return g.animation._timeout=setTimeout(o,_.delay)})()},r.prototype.stopAnimation=function(){var a;return clearTimeout((a=this.animation)!=null?a._timeout:void 0)},r.prototype.render=function(a){var o,s;return a._png&&a._png.stopAnimation(),a._png=this,a.width=this.width,a.height=this.height,o=a.getContext("2d"),this.animation?(this.decodeFrames(o),this.animate(o)):(s=o.createImageData(this.width,this.height),this.copyToImageData(s,this.decodePixels()),o.putImageData(s,0,0))},r}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function Cz(n){var e=0;if(n[e++]!==71||n[e++]!==73||n[e++]!==70||n[e++]!==56||(n[e++]+1&253)!=56||n[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var t=n[e++]|n[e++]<<8,r=n[e++]|n[e++]<<8,i=n[e++],a=i>>7,o=1<<(7&i)+1;n[e++],n[e++];var s=null,u=null;a&&(s=e,u=o,e+=3*o);var f=!0,h=[],p=0,g=null,m=0,_=null;for(this.width=t,this.height=r;f&&e<n.length;)switch(n[e++]){case 33:switch(n[e++]){case 255:if(n[e]!==11||n[e+1]==78&&n[e+2]==69&&n[e+3]==84&&n[e+4]==83&&n[e+5]==67&&n[e+6]==65&&n[e+7]==80&&n[e+8]==69&&n[e+9]==50&&n[e+10]==46&&n[e+11]==48&&n[e+12]==3&&n[e+13]==1&&n[e+16]==0)e+=14,_=n[e++]|n[e++]<<8,e++;else for(e+=12;;){if(!((R=n[e++])>=0))throw Error("Invalid block size");if(R===0)break;e+=R}break;case 249:if(n[e++]!==4||n[e+4]!==0)throw new Error("Invalid graphics extension block.");var b=n[e++];p=n[e++]|n[e++]<<8,g=n[e++],(1&b)==0&&(g=null),m=b>>2&7,e++;break;case 254:for(;;){if(!((R=n[e++])>=0))throw Error("Invalid block size");if(R===0)break;e+=R}break;default:throw new Error("Unknown graphic control label: 0x"+n[e-1].toString(16))}break;case 44:var T=n[e++]|n[e++]<<8,S=n[e++]|n[e++]<<8,D=n[e++]|n[e++]<<8,B=n[e++]|n[e++]<<8,V=n[e++],Y=V>>6&1,q=1<<(7&V)+1,P=s,E=u,C=!1;V>>7&&(C=!0,P=e,E=q,e+=3*q);var M=e;for(e++;;){var R;if(!((R=n[e++])>=0))throw Error("Invalid block size");if(R===0)break;e+=R}h.push({x:T,y:S,width:D,height:B,has_local_palette:C,palette_offset:P,palette_size:E,data_offset:M,data_length:e-M,transparent_index:g,interlaced:!!Y,delay:p,disposal:m});break;case 59:f=!1;break;default:throw new Error("Unknown gif block: 0x"+n[e-1].toString(16))}this.numFrames=function(){return h.length},this.loopCount=function(){return _},this.frameInfo=function(L){if(L<0||L>=h.length)throw new Error("Frame index out of range.");return h[L]},this.decodeAndBlitFrameBGRA=function(L,j){var $=this.frameInfo(L),ne=$.width*$.height,U=new Uint8Array(ne);R4(n,$.data_offset,U,ne);var z=$.palette_offset,te=$.transparent_index;te===null&&(te=256);var ue=$.width,X=t-ue,me=ue,G=4*($.y*t+$.x),Q=4*(($.y+$.height)*t+$.x),ee=G,ie=4*X;$.interlaced===!0&&(ie+=4*t*7);for(var de=8,Ee=0,be=U.length;Ee<be;++Ee){var Te=U[Ee];if(me===0&&(me=ue,(ee+=ie)>=Q&&(ie=4*X+4*t*(de-1),ee=G+(ue+X)*(de<<1),de>>=1)),Te===te)ee+=4;else{var Ge=n[z+3*Te],He=n[z+3*Te+1],rt=n[z+3*Te+2];j[ee++]=rt,j[ee++]=He,j[ee++]=Ge,j[ee++]=255}--me}},this.decodeAndBlitFrameRGBA=function(L,j){var $=this.frameInfo(L),ne=$.width*$.height,U=new Uint8Array(ne);R4(n,$.data_offset,U,ne);var z=$.palette_offset,te=$.transparent_index;te===null&&(te=256);var ue=$.width,X=t-ue,me=ue,G=4*($.y*t+$.x),Q=4*(($.y+$.height)*t+$.x),ee=G,ie=4*X;$.interlaced===!0&&(ie+=4*t*7);for(var de=8,Ee=0,be=U.length;Ee<be;++Ee){var Te=U[Ee];if(me===0&&(me=ue,(ee+=ie)>=Q&&(ie=4*X+4*t*(de-1),ee=G+(ue+X)*(de<<1),de>>=1)),Te===te)ee+=4;else{var Ge=n[z+3*Te],He=n[z+3*Te+1],rt=n[z+3*Te+2];j[ee++]=Ge,j[ee++]=He,j[ee++]=rt,j[ee++]=255}--me}}}function R4(n,e,t,r){for(var i=n[e++],a=1<<i,o=a+1,s=o+1,u=i+1,f=(1<<u)-1,h=0,p=0,g=0,m=n[e++],_=new Int32Array(4096),b=null;;){for(;h<16&&m!==0;)p|=n[e++]<<h,h+=8,m===1?m=n[e++]:--m;if(h<u)break;var T=p&f;if(p>>=u,h-=u,T!==a){if(T===o)break;for(var S=T<s?T:b,D=0,B=S;B>a;)B=_[B]>>8,++D;var V=B;if(g+D+(S!==T?1:0)>r)return void mr.log("Warning, gif stream longer than expected.");t[g++]=V;var Y=g+=D;for(S!==T&&(t[g++]=V),B=S;D--;)B=_[B],t[--Y]=255&B,B>>=8;b!==null&&s<4096&&(_[s++]=b<<8|V,s>=f+1&&u<12&&(++u,f=f<<1|1)),b=T}else s=o+1,f=(1<<(u=i+1))-1,b=null}return g!==r&&mr.log("Warning, gif stream shorter than expected."),t}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function Ov(n){var e,t,r,i,a,o=Math.floor,s=new Array(64),u=new Array(64),f=new Array(64),h=new Array(64),p=new Array(65535),g=new Array(65535),m=new Array(64),_=new Array(64),b=[],T=0,S=7,D=new Array(64),B=new Array(64),V=new Array(64),Y=new Array(256),q=new Array(2048),P=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],E=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],C=[0,1,2,3,4,5,6,7,8,9,10,11],M=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],R=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],L=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],j=[0,1,2,3,4,5,6,7,8,9,10,11],$=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],ne=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function U(G,Q){for(var ee=0,ie=0,de=new Array,Ee=1;Ee<=16;Ee++){for(var be=1;be<=G[Ee];be++)de[Q[ie]]=[],de[Q[ie]][0]=ee,de[Q[ie]][1]=Ee,ie++,ee++;ee*=2}return de}function z(G){for(var Q=G[0],ee=G[1]-1;ee>=0;)Q&1<<ee&&(T|=1<<S),ee--,--S<0&&(T==255?(te(255),te(0)):te(T),S=7,T=0)}function te(G){b.push(G)}function ue(G){te(G>>8&255),te(255&G)}function X(G,Q,ee,ie,de){for(var Ee,be=de[0],Te=de[240],Ge=function(Xe,it){var at,ot,ct,mt,Rt,_t,bt,Nt,xt,Ot,ut=0;for(xt=0;xt<8;++xt){at=Xe[ut],ot=Xe[ut+1],ct=Xe[ut+2],mt=Xe[ut+3],Rt=Xe[ut+4],_t=Xe[ut+5],bt=Xe[ut+6];var mn=at+(Nt=Xe[ut+7]),Vt=at-Nt,Xn=ot+bt,Yt=ot-bt,An=ct+_t,di=ct-_t,on=mt+Rt,da=mt-Rt,Cn=mn+on,Lr=mn-on,or=Xn+An,vn=Xn-An;Xe[ut]=Cn+or,Xe[ut+4]=Cn-or;var Tt=.707106781*(vn+Lr);Xe[ut+2]=Lr+Tt,Xe[ut+6]=Lr-Tt;var tn=.382683433*((Cn=da+di)-(vn=Yt+Vt)),Ei=.5411961*Cn+tn,kn=1.306562965*vn+tn,dr=.707106781*(or=di+Yt),ja=Vt+dr,vt=Vt-dr;Xe[ut+5]=vt+Ei,Xe[ut+3]=vt-Ei,Xe[ut+1]=ja+kn,Xe[ut+7]=ja-kn,ut+=8}for(ut=0,xt=0;xt<8;++xt){at=Xe[ut],ot=Xe[ut+8],ct=Xe[ut+16],mt=Xe[ut+24],Rt=Xe[ut+32],_t=Xe[ut+40],bt=Xe[ut+48];var Hn=at+(Nt=Xe[ut+56]),Gn=at-Nt,pr=ot+bt,wr=ot-bt,Ir=ct+_t,Hr=ct-_t,Es=mt+Rt,Zi=mt-Rt,pi=Hn+Es,ei=Hn-Es,Gr=pr+Ir,ti=pr-Ir;Xe[ut]=pi+Gr,Xe[ut+32]=pi-Gr;var sr=.707106781*(ti+ei);Xe[ut+16]=ei+sr,Xe[ut+48]=ei-sr;var Mn=.382683433*((pi=Zi+Hr)-(ti=wr+Gn)),Eo=.5411961*pi+Mn,So=1.306562965*ti+Mn,Bi=.707106781*(Gr=Hr+wr),pa=Gn+Bi,Ss=Gn-Bi;Xe[ut+40]=Ss+Eo,Xe[ut+24]=Ss-Eo,Xe[ut+8]=pa+So,Xe[ut+56]=pa-So,ut++}for(xt=0;xt<64;++xt)Ot=Xe[xt]*it[xt],m[xt]=Ot>0?Ot+.5|0:Ot-.5|0;return m}(G,Q),He=0;He<64;++He)_[P[He]]=Ge[He];var rt=_[0]-ee;ee=_[0],rt==0?z(ie[0]):(z(ie[g[Ee=32767+rt]]),z(p[Ee]));for(var st=63;st>0&&_[st]==0;)st--;if(st==0)return z(be),ee;for(var wt,Be=1;Be<=st;){for(var ge=Be;_[Be]==0&&Be<=st;)++Be;var gt=Be-ge;if(gt>=16){wt=gt>>4;for(var lt=1;lt<=wt;++lt)z(Te);gt&=15}Ee=32767+_[Be],z(de[(gt<<4)+g[Ee]]),z(p[Ee]),Be++}return st!=63&&z(be),ee}function me(G){G=Math.min(Math.max(G,1),100),a!=G&&(function(Q){for(var ee=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],ie=0;ie<64;ie++){var de=o((ee[ie]*Q+50)/100);de=Math.min(Math.max(de,1),255),s[P[ie]]=de}for(var Ee=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],be=0;be<64;be++){var Te=o((Ee[be]*Q+50)/100);Te=Math.min(Math.max(Te,1),255),u[P[be]]=Te}for(var Ge=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],He=0,rt=0;rt<8;rt++)for(var st=0;st<8;st++)f[He]=1/(s[P[He]]*Ge[rt]*Ge[st]*8),h[He]=1/(u[P[He]]*Ge[rt]*Ge[st]*8),He++}(G<50?Math.floor(5e3/G):Math.floor(200-2*G)),a=G)}this.encode=function(G,Q){Q&&me(Q),b=new Array,T=0,S=7,ue(65496),ue(65504),ue(16),te(74),te(70),te(73),te(70),te(0),te(1),te(1),te(0),ue(1),ue(1),te(0),te(0),function(){ue(65499),ue(132),te(0);for(var ot=0;ot<64;ot++)te(s[ot]);te(1);for(var ct=0;ct<64;ct++)te(u[ct])}(),function(ot,ct){ue(65472),ue(17),te(8),ue(ct),ue(ot),te(3),te(1),te(17),te(0),te(2),te(17),te(1),te(3),te(17),te(1)}(G.width,G.height),function(){ue(65476),ue(418),te(0);for(var ot=0;ot<16;ot++)te(E[ot+1]);for(var ct=0;ct<=11;ct++)te(C[ct]);te(16);for(var mt=0;mt<16;mt++)te(M[mt+1]);for(var Rt=0;Rt<=161;Rt++)te(R[Rt]);te(1);for(var _t=0;_t<16;_t++)te(L[_t+1]);for(var bt=0;bt<=11;bt++)te(j[bt]);te(17);for(var Nt=0;Nt<16;Nt++)te($[Nt+1]);for(var xt=0;xt<=161;xt++)te(ne[xt])}(),ue(65498),ue(12),te(3),te(1),te(0),te(2),te(17),te(3),te(17),te(0),te(63),te(0);var ee=0,ie=0,de=0;T=0,S=7,this.encode.displayName="_encode_";for(var Ee,be,Te,Ge,He,rt,st,wt,Be,ge=G.data,gt=G.width,lt=G.height,Xe=4*gt,it=0;it<lt;){for(Ee=0;Ee<Xe;){for(He=Xe*it+Ee,st=-1,wt=0,Be=0;Be<64;Be++)rt=He+(wt=Be>>3)*Xe+(st=4*(7&Be)),it+wt>=lt&&(rt-=Xe*(it+1+wt-lt)),Ee+st>=Xe&&(rt-=Ee+st-Xe+4),be=ge[rt++],Te=ge[rt++],Ge=ge[rt++],D[Be]=(q[be]+q[Te+256>>0]+q[Ge+512>>0]>>16)-128,B[Be]=(q[be+768>>0]+q[Te+1024>>0]+q[Ge+1280>>0]>>16)-128,V[Be]=(q[be+1280>>0]+q[Te+1536>>0]+q[Ge+1792>>0]>>16)-128;ee=X(D,f,ee,e,r),ie=X(B,h,ie,t,i),de=X(V,h,de,t,i),Ee+=32}it+=8}if(S>=0){var at=[];at[1]=S+1,at[0]=(1<<S+1)-1,z(at)}return ue(65497),new Uint8Array(b)},n=n||50,function(){for(var G=String.fromCharCode,Q=0;Q<256;Q++)Y[Q]=G(Q)}(),e=U(E,C),t=U(L,j),r=U(M,R),i=U($,ne),function(){for(var G=1,Q=2,ee=1;ee<=15;ee++){for(var ie=G;ie<Q;ie++)g[32767+ie]=ee,p[32767+ie]=[],p[32767+ie][1]=ee,p[32767+ie][0]=ie;for(var de=-(Q-1);de<=-G;de++)g[32767+de]=ee,p[32767+de]=[],p[32767+de][1]=ee,p[32767+de][0]=Q-1+de;G<<=1,Q<<=1}}(),function(){for(var G=0;G<256;G++)q[G]=19595*G,q[G+256>>0]=38470*G,q[G+512>>0]=7471*G+32768,q[G+768>>0]=-11059*G,q[G+1024>>0]=-21709*G,q[G+1280>>0]=32768*G+8421375,q[G+1536>>0]=-27439*G,q[G+1792>>0]=-5329*G}(),me(n)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function Zs(n,e){if(this.pos=0,this.buffer=n,this.datav=new DataView(n.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function N4(n){function e(E){if(!E)throw Error("assert :P")}function t(E,C,M){for(var R=0;4>R;R++)if(E[C+R]!=M.charCodeAt(R))return!0;return!1}function r(E,C,M,R,L){for(var j=0;j<L;j++)E[C+j]=M[R+j]}function i(E,C,M,R){for(var L=0;L<R;L++)E[C+L]=M}function a(E){return new Int32Array(E)}function o(E,C){for(var M=[],R=0;R<E;R++)M.push(new C);return M}function s(E,C){var M=[];return function R(L,j,$){for(var ne=$[j],U=0;U<ne&&(L.push($.length>j+1?[]:new C),!($.length<j+1));U++)R(L[U],j+1,$)}(M,0,E),M}var u=function(){var E=this;function C(y,A){for(var k=1<<A-1>>>0;y&k;)k>>>=1;return k?(y&k-1)+k:y}function M(y,A,k,H,Z){e(!(H%k));do y[A+(H-=k)]=Z;while(0<H)}function R(y,A,k,H,Z){if(e(2328>=Z),512>=Z)var re=a(512);else if((re=a(Z))==null)return 0;return function(ae,oe,ce,he,_e,Pe){var Oe,Re,Ke=oe,Ue=1<<ce,we=a(16),Se=a(16);for(e(_e!=0),e(he!=null),e(ae!=null),e(0<ce),Re=0;Re<_e;++Re){if(15<he[Re])return 0;++we[he[Re]]}if(we[0]==_e)return 0;for(Se[1]=0,Oe=1;15>Oe;++Oe){if(we[Oe]>1<<Oe)return 0;Se[Oe+1]=Se[Oe]+we[Oe]}for(Re=0;Re<_e;++Re)Oe=he[Re],0<he[Re]&&(Pe[Se[Oe]++]=Re);if(Se[15]==1)return(he=new L).g=0,he.value=Pe[0],M(ae,Ke,1,Ue,he),Ue;var qe,Qe=-1,$e=Ue-1,yt=0,ft=1,Dt=1,dt=1<<ce;for(Re=0,Oe=1,_e=2;Oe<=ce;++Oe,_e<<=1){if(ft+=Dt<<=1,0>(Dt-=we[Oe]))return 0;for(;0<we[Oe];--we[Oe])(he=new L).g=Oe,he.value=Pe[Re++],M(ae,Ke+yt,_e,dt,he),yt=C(yt,Oe)}for(Oe=ce+1,_e=2;15>=Oe;++Oe,_e<<=1){if(ft+=Dt<<=1,0>(Dt-=we[Oe]))return 0;for(;0<we[Oe];--we[Oe]){if(he=new L,(yt&$e)!=Qe){for(Ke+=dt,qe=1<<(Qe=Oe)-ce;15>Qe&&!(0>=(qe-=we[Qe]));)++Qe,qe<<=1;Ue+=dt=1<<(qe=Qe-ce),ae[oe+(Qe=yt&$e)].g=qe+ce,ae[oe+Qe].value=Ke-oe-Qe}he.g=Oe-ce,he.value=Pe[Re++],M(ae,Ke+(yt>>ce),_e,dt,he),yt=C(yt,Oe)}}return ft!=2*Se[15]-1?0:Ue}(y,A,k,H,Z,re)}function L(){this.value=this.g=0}function j(){this.value=this.g=0}function $(){this.G=o(5,L),this.H=a(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=o(ri,j)}function ne(y,A,k,H){e(y!=null),e(A!=null),e(2147483648>H),y.Ca=254,y.I=0,y.b=-8,y.Ka=0,y.oa=A,y.pa=k,y.Jd=A,y.Yc=k+H,y.Zc=4<=H?k+H-4+1:k,Ee(y)}function U(y,A){for(var k=0;0<A--;)k|=Te(y,128)<<A;return k}function z(y,A){var k=U(y,A);return be(y)?-k:k}function te(y,A,k,H){var Z,re=0;for(e(y!=null),e(A!=null),e(4294967288>H),y.Sb=H,y.Ra=0,y.u=0,y.h=0,4<H&&(H=4),Z=0;Z<H;++Z)re+=A[k+Z]<<8*Z;y.Ra=re,y.bb=H,y.oa=A,y.pa=k}function ue(y){for(;8<=y.u&&y.bb<y.Sb;)y.Ra>>>=8,y.Ra+=y.oa[y.pa+y.bb]<<yu-8>>>0,++y.bb,y.u-=8;ee(y)&&(y.h=1,y.u=0)}function X(y,A){if(e(0<=A),!y.h&&A<=vu){var k=Q(y)&bl[A];return y.u+=A,ue(y),k}return y.h=1,y.u=0}function me(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function G(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function Q(y){return y.Ra>>>(y.u&yu-1)>>>0}function ee(y){return e(y.bb<=y.Sb),y.h||y.bb==y.Sb&&y.u>yu}function ie(y,A){y.u=A,y.h=ee(y)}function de(y){y.u>=hc&&(e(y.u>=hc),ue(y))}function Ee(y){e(y!=null&&y.oa!=null),y.pa<y.Zc?(y.I=(y.oa[y.pa++]|y.I<<8)>>>0,y.b+=8):(e(y!=null&&y.oa!=null),y.pa<y.Yc?(y.b+=8,y.I=y.oa[y.pa++]|y.I<<8):y.Ka?y.b=0:(y.I<<=8,y.b+=8,y.Ka=1))}function be(y){return U(y,1)}function Te(y,A){var k=y.Ca;0>y.b&&Ee(y);var H=y.b,Z=k*A>>>8,re=(y.I>>>H>Z)+0;for(re?(k-=Z,y.I-=Z+1<<H>>>0):k=Z+1,H=k,Z=0;256<=H;)Z+=8,H>>=8;return H=7^Z+_a[H],y.b-=H,y.Ca=(k<<H)-1,re}function Ge(y,A,k){y[A+0]=k>>24&255,y[A+1]=k>>16&255,y[A+2]=k>>8&255,y[A+3]=k>>0&255}function He(y,A){return y[A+0]<<0|y[A+1]<<8}function rt(y,A){return He(y,A)|y[A+2]<<16}function st(y,A){return He(y,A)|He(y,A+2)<<16}function wt(y,A){var k=1<<A;return e(y!=null),e(0<A),y.X=a(k),y.X==null?0:(y.Mb=32-A,y.Xa=A,1)}function Be(y,A){e(y!=null),e(A!=null),e(y.Xa==A.Xa),r(A.X,0,y.X,0,1<<A.Xa)}function ge(){this.X=[],this.Xa=this.Mb=0}function gt(y,A,k,H){e(k!=null),e(H!=null);var Z=k[0],re=H[0];return Z==0&&(Z=(y*re+A/2)/A),re==0&&(re=(A*Z+y/2)/y),0>=Z||0>=re?0:(k[0]=Z,H[0]=re,1)}function lt(y,A){return y+(1<<A)-1>>>A}function Xe(y,A){return((4278255360&y)+(4278255360&A)>>>0&4278255360)+((16711935&y)+(16711935&A)>>>0&16711935)>>>0}function it(y,A){E[A]=function(k,H,Z,re,ae,oe,ce){var he;for(he=0;he<ae;++he){var _e=E[y](oe[ce+he-1],Z,re+he);oe[ce+he]=Xe(k[H+he],_e)}}}function at(){this.ud=this.hd=this.jd=0}function ot(y,A){return((4278124286&(y^A))>>>1)+(y&A)>>>0}function ct(y){return 0<=y&&256>y?y:0>y?0:255<y?255:void 0}function mt(y,A){return ct(y+(y-A+.5>>1))}function Rt(y,A,k){return Math.abs(A-k)-Math.abs(y-k)}function _t(y,A,k,H,Z,re,ae){for(H=re[ae-1],k=0;k<Z;++k)re[ae+k]=H=Xe(y[A+k],H)}function bt(y,A,k,H,Z){var re;for(re=0;re<k;++re){var ae=y[A+re],oe=ae>>8&255,ce=16711935&(ce=(ce=16711935&ae)+((oe<<16)+oe));H[Z+re]=(4278255360&ae)+ce>>>0}}function Nt(y,A){A.jd=y>>0&255,A.hd=y>>8&255,A.ud=y>>16&255}function xt(y,A,k,H,Z,re){var ae;for(ae=0;ae<H;++ae){var oe=A[k+ae],ce=oe>>>8,he=oe,_e=255&(_e=(_e=oe>>>16)+((y.jd<<24>>24)*(ce<<24>>24)>>>5));he=255&(he=(he=he+((y.hd<<24>>24)*(ce<<24>>24)>>>5))+((y.ud<<24>>24)*(_e<<24>>24)>>>5)),Z[re+ae]=(4278255360&oe)+(_e<<16)+he}}function Ot(y,A,k,H,Z){E[A]=function(re,ae,oe,ce,he,_e,Pe,Oe,Re){for(ce=Pe;ce<Oe;++ce)for(Pe=0;Pe<Re;++Pe)he[_e++]=Z(oe[H(re[ae++])])},E[y]=function(re,ae,oe,ce,he,_e,Pe){var Oe=8>>re.b,Re=re.Ea,Ke=re.K[0],Ue=re.w;if(8>Oe)for(re=(1<<re.b)-1,Ue=(1<<Oe)-1;ae<oe;++ae){var we,Se=0;for(we=0;we<Re;++we)we&re||(Se=H(ce[he++])),_e[Pe++]=Z(Ke[Se&Ue]),Se>>=Oe}else E["VP8LMapColor"+k](ce,he,Ke,Ue,_e,Pe,ae,oe,Re)}}function ut(y,A,k,H,Z){for(k=A+k;A<k;){var re=y[A++];H[Z++]=re>>16&255,H[Z++]=re>>8&255,H[Z++]=re>>0&255}}function mn(y,A,k,H,Z){for(k=A+k;A<k;){var re=y[A++];H[Z++]=re>>16&255,H[Z++]=re>>8&255,H[Z++]=re>>0&255,H[Z++]=re>>24&255}}function Vt(y,A,k,H,Z){for(k=A+k;A<k;){var re=(ae=y[A++])>>16&240|ae>>12&15,ae=ae>>0&240|ae>>28&15;H[Z++]=re,H[Z++]=ae}}function Xn(y,A,k,H,Z){for(k=A+k;A<k;){var re=(ae=y[A++])>>16&248|ae>>13&7,ae=ae>>5&224|ae>>3&31;H[Z++]=re,H[Z++]=ae}}function Yt(y,A,k,H,Z){for(k=A+k;A<k;){var re=y[A++];H[Z++]=re>>0&255,H[Z++]=re>>8&255,H[Z++]=re>>16&255}}function An(y,A,k,H,Z,re){if(re==0)for(k=A+k;A<k;)Ge(H,((re=y[A++])[0]>>24|re[1]>>8&65280|re[2]<<8&16711680|re[3]<<24)>>>0),Z+=32;else r(H,Z,y,A,k)}function di(y,A){E[A][0]=E[y+"0"],E[A][1]=E[y+"1"],E[A][2]=E[y+"2"],E[A][3]=E[y+"3"],E[A][4]=E[y+"4"],E[A][5]=E[y+"5"],E[A][6]=E[y+"6"],E[A][7]=E[y+"7"],E[A][8]=E[y+"8"],E[A][9]=E[y+"9"],E[A][10]=E[y+"10"],E[A][11]=E[y+"11"],E[A][12]=E[y+"12"],E[A][13]=E[y+"13"],E[A][14]=E[y+"0"],E[A][15]=E[y+"0"]}function on(y){return y==wf||y==Dl||y==Fs||y==mc}function da(){this.eb=[],this.size=this.A=this.fb=0}function Cn(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Lr(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new da,this.f.kb=new Cn,this.sd=null}function or(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function vn(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Tt(y){return alert("todo:WebPSamplerProcessPlane"),y.T}function tn(y,A){var k=y.T,H=A.ba.f.RGBA,Z=H.eb,re=H.fb+y.ka*H.A,ae=yi[A.ba.S],oe=y.y,ce=y.O,he=y.f,_e=y.N,Pe=y.ea,Oe=y.W,Re=A.cc,Ke=A.dc,Ue=A.Mc,we=A.Nc,Se=y.ka,qe=y.ka+y.T,Qe=y.U,$e=Qe+1>>1;for(Se==0?ae(oe,ce,null,null,he,_e,Pe,Oe,he,_e,Pe,Oe,Z,re,null,null,Qe):(ae(A.ec,A.fc,oe,ce,Re,Ke,Ue,we,he,_e,Pe,Oe,Z,re-H.A,Z,re,Qe),++k);Se+2<qe;Se+=2)Re=he,Ke=_e,Ue=Pe,we=Oe,_e+=y.Rc,Oe+=y.Rc,re+=2*H.A,ae(oe,(ce+=2*y.fa)-y.fa,oe,ce,Re,Ke,Ue,we,he,_e,Pe,Oe,Z,re-H.A,Z,re,Qe);return ce+=y.fa,y.j+qe<y.o?(r(A.ec,A.fc,oe,ce,Qe),r(A.cc,A.dc,he,_e,$e),r(A.Mc,A.Nc,Pe,Oe,$e),k--):1&qe||ae(oe,ce,null,null,he,_e,Pe,Oe,he,_e,Pe,Oe,Z,re+H.A,null,null,Qe),k}function Ei(y,A,k){var H=y.F,Z=[y.J];if(H!=null){var re=y.U,ae=A.ba.S,oe=ae==Au||ae==Fs;A=A.ba.f.RGBA;var ce=[0],he=y.ka;ce[0]=y.T,y.Kb&&(he==0?--ce[0]:(--he,Z[0]-=y.width),y.j+y.ka+y.T==y.o&&(ce[0]=y.o-y.j-he));var _e=A.eb;he=A.fb+he*A.A,y=un(H,Z[0],y.width,re,ce,_e,he+(oe?0:3),A.A),e(k==ce),y&&on(ae)&&qa(_e,he,oe,re,ce,A.A)}return 0}function kn(y){var A=y.ma,k=A.ba.S,H=11>k,Z=k==gc||k==_f||k==Au||k==Bs||k==12||on(k);if(A.memory=null,A.Ib=null,A.Jb=null,A.Nd=null,!wl(A.Oa,y,Z?11:12))return 0;if(Z&&on(k)&&tt(),y.da)alert("todo:use_scaling");else{if(H){if(A.Ib=Tt,y.Kb){if(k=y.U+1>>1,A.memory=a(y.U+2*k),A.memory==null)return 0;A.ec=A.memory,A.fc=0,A.cc=A.ec,A.dc=A.fc+y.U,A.Mc=A.cc,A.Nc=A.dc+k,A.Ib=tn,tt()}}else alert("todo:EmitYUV");Z&&(A.Jb=Ei,H&&Ie())}if(H&&!R0){for(y=0;256>y;++y)B2[y]=89858*(y-128)+ai>>ds,Ef[y]=-22014*(y-128)+ai,Ld[y]=-45773*(y-128),oi[y]=113618*(y-128)+ai>>ds;for(y=kl;y<wh;++y)A=76283*(y-16)+ai>>ds,Sf[y-kl]=Fn(A,255),kd[y-kl]=Fn(A+8>>4,15);R0=1}return 1}function dr(y){var A=y.ma,k=y.U,H=y.T;return e(!(1&y.ka)),0>=k||0>=H?0:(k=A.Ib(y,A),A.Jb!=null&&A.Jb(y,A,k),A.Dc+=k,1)}function ja(y){y.ma.memory=null}function vt(y,A,k,H){return X(y,8)!=47?0:(A[0]=X(y,14)+1,k[0]=X(y,14)+1,H[0]=X(y,1),X(y,3)!=0?0:!y.h)}function Hn(y,A){if(4>y)return y+1;var k=y-2>>1;return(2+(1&y)<<k)+X(A,k)+1}function Gn(y,A){return 120<A?A-120:1<=(k=((k=Us[A-1])>>4)*y+(8-(15&k)))?k:1;var k}function pr(y,A,k){var H=Q(k),Z=y[A+=255&H].g-8;return 0<Z&&(ie(k,k.u+8),H=Q(k),A+=y[A].value,A+=H&(1<<Z)-1),ie(k,k.u+y[A].g),y[A].value}function wr(y,A,k){return k.g+=y.g,k.value+=y.value<<A>>>0,e(8>=k.g),y.g}function Ir(y,A,k){var H=y.xc;return e((A=H==0?0:y.vc[y.md*(k>>H)+(A>>H)])<y.Wb),y.Ya[A]}function Hr(y,A,k,H){var Z=y.ab,re=y.c*A,ae=y.C;A=ae+A;var oe=k,ce=H;for(H=y.Ta,k=y.Ua;0<Z--;){var he=y.gc[Z],_e=ae,Pe=A,Oe=oe,Re=ce,Ke=(ce=H,oe=k,he.Ea);switch(e(_e<Pe),e(Pe<=he.nc),he.hc){case 2:ph(Oe,Re,(Pe-_e)*Ke,ce,oe);break;case 0:var Ue=_e,we=Pe,Se=ce,qe=oe,Qe=(dt=he).Ea;Ue==0&&(Dd(Oe,Re,null,null,1,Se,qe),_t(Oe,Re+1,0,0,Qe-1,Se,qe+1),Re+=Qe,qe+=Qe,++Ue);for(var $e=1<<dt.b,yt=$e-1,ft=lt(Qe,dt.b),Dt=dt.K,dt=dt.w+(Ue>>dt.b)*ft;Ue<we;){var Tn=Dt,jn=dt,sn=1;for(yf(Oe,Re,Se,qe-Qe,1,Se,qe);sn<Qe;){var rn=(sn&~yt)+$e;rn>Qe&&(rn=Qe),(0,Ls[Tn[jn++]>>8&15])(Oe,Re+ +sn,Se,qe+sn-Qe,rn-sn,Se,qe+sn),sn=rn}Re+=Qe,qe+=Qe,++Ue&yt||(dt+=ft)}Pe!=he.nc&&r(ce,oe-Ke,ce,oe+(Pe-_e-1)*Ke,Ke);break;case 1:for(Ke=Oe,we=Re,Qe=(Oe=he.Ea)-(qe=Oe&~(Se=(Re=1<<he.b)-1)),Ue=lt(Oe,he.b),$e=he.K,he=he.w+(_e>>he.b)*Ue;_e<Pe;){for(yt=$e,ft=he,Dt=new at,dt=we+qe,Tn=we+Oe;we<dt;)Nt(yt[ft++],Dt),El(Dt,Ke,we,Re,ce,oe),we+=Re,oe+=Re;we<Tn&&(Nt(yt[ft++],Dt),El(Dt,Ke,we,Qe,ce,oe),we+=Qe,oe+=Qe),++_e&Se||(he+=Ue)}break;case 3:if(Oe==ce&&Re==oe&&0<he.b){for(we=ce,Oe=Ke=oe+(Pe-_e)*Ke-(qe=(Pe-_e)*lt(he.Ea,he.b)),Re=ce,Se=oe,Ue=[],qe=(Qe=qe)-1;0<=qe;--qe)Ue[qe]=Re[Se+qe];for(qe=Qe-1;0<=qe;--qe)we[Oe+qe]=Ue[qe];oo(he,_e,Pe,ce,Ke,ce,oe)}else oo(he,_e,Pe,Oe,Re,ce,oe)}oe=H,ce=k}ce!=k&&r(H,k,oe,ce,re)}function Es(y,A){var k=y.V,H=y.Ba+y.c*y.C,Z=A-y.C;if(e(A<=y.l.o),e(16>=Z),0<Z){var re=y.l,ae=y.Ta,oe=y.Ua,ce=re.width;if(Hr(y,Z,k,H),Z=oe=[oe],e((k=y.C)<(H=A)),e(re.v<re.va),H>re.o&&(H=re.o),k<re.j){var he=re.j-k;k=re.j,Z[0]+=he*ce}if(k>=H?k=0:(Z[0]+=4*re.v,re.ka=k-re.j,re.U=re.va-re.v,re.T=H-k,k=1),k){if(oe=oe[0],11>(k=y.ca).S){var _e=k.f.RGBA,Pe=(H=k.S,Z=re.U,re=re.T,he=_e.eb,_e.A),Oe=re;for(_e=_e.fb+y.Ma*_e.A;0<Oe--;){var Re=ae,Ke=oe,Ue=Z,we=he,Se=_e;switch(H){case zi:ea(Re,Ke,Ue,we,Se);break;case gc:Ii(Re,Ke,Ue,we,Se);break;case wf:Ii(Re,Ke,Ue,we,Se),qa(we,Se,0,Ue,1,0);break;case us:ko(Re,Ke,Ue,we,Se);break;case _f:An(Re,Ke,Ue,we,Se,1);break;case Dl:An(Re,Ke,Ue,we,Se,1),qa(we,Se,0,Ue,1,0);break;case Au:An(Re,Ke,Ue,we,Se,0);break;case Fs:An(Re,Ke,Ue,we,Se,0),qa(we,Se,1,Ue,1,0);break;case Bs:Sl(Re,Ke,Ue,we,Se);break;case mc:Sl(Re,Ke,Ue,we,Se),ln(we,Se,Ue,1,0);break;case mh:wa(Re,Ke,Ue,we,Se);break;default:e(0)}oe+=ce,_e+=Pe}y.Ma+=re}else alert("todo:EmitRescaledRowsYUVA");e(y.Ma<=k.height)}}y.C=A,e(y.C<=y.i)}function Zi(y){var A;if(0<y.ua)return 0;for(A=0;A<y.Wb;++A){var k=y.Ya[A].G,H=y.Ya[A].H;if(0<k[1][H[1]+0].g||0<k[2][H[2]+0].g||0<k[3][H[3]+0].g)return 0}return 1}function pi(y,A,k,H,Z,re){if(y.Z!=0){var ae=y.qd,oe=y.rd;for(e(fs[y.Z]!=null);A<k;++A)fs[y.Z](ae,oe,H,Z,H,Z,re),ae=H,oe=Z,Z+=re;y.qd=ae,y.rd=oe}}function ei(y,A){var k=y.l.ma,H=k.Z==0||k.Z==1?y.l.j:y.C;if(H=y.C<H?H:y.C,e(A<=y.l.o),A>H){var Z=y.l.width,re=k.ca,ae=k.tb+Z*H,oe=y.V,ce=y.Ba+y.c*H,he=y.gc;e(y.ab==1),e(he[0].hc==3),Al(he[0],H,A,oe,ce,re,ae),pi(k,H,A,re,ae,Z)}y.C=y.Ma=A}function Gr(y,A,k,H,Z,re,ae){var oe=y.$/H,ce=y.$%H,he=y.m,_e=y.s,Pe=k+y.$,Oe=Pe;Z=k+H*Z;var Re=k+H*re,Ke=280+_e.ua,Ue=y.Pb?oe:16777216,we=0<_e.ua?_e.Wa:null,Se=_e.wc,qe=Pe<Re?Ir(_e,ce,oe):null;e(y.C<re),e(Re<=Z);var Qe=!1;e:for(;;){for(;Qe||Pe<Re;){var $e=0;if(oe>=Ue){var yt=Pe-k;e((Ue=y).Pb),Ue.wd=Ue.m,Ue.xd=yt,0<Ue.s.ua&&Be(Ue.s.Wa,Ue.s.vb),Ue=oe+C0}if(ce&Se||(qe=Ir(_e,ce,oe)),e(qe!=null),qe.Qb&&(A[Pe]=qe.qb,Qe=!0),!Qe)if(de(he),qe.jc){$e=he,yt=A;var ft=Pe,Dt=qe.pd[Q($e)&ri-1];e(qe.jc),256>Dt.g?(ie($e,$e.u+Dt.g),yt[ft]=Dt.value,$e=0):(ie($e,$e.u+Dt.g-256),e(256<=Dt.value),$e=Dt.value),$e==0&&(Qe=!0)}else $e=pr(qe.G[0],qe.H[0],he);if(he.h)break;if(Qe||256>$e){if(!Qe)if(qe.nd)A[Pe]=(qe.qb|$e<<8)>>>0;else{if(de(he),Qe=pr(qe.G[1],qe.H[1],he),de(he),yt=pr(qe.G[2],qe.H[2],he),ft=pr(qe.G[3],qe.H[3],he),he.h)break;A[Pe]=(ft<<24|Qe<<16|$e<<8|yt)>>>0}if(Qe=!1,++Pe,++ce>=H&&(ce=0,++oe,ae!=null&&oe<=re&&!(oe%16)&&ae(y,oe),we!=null))for(;Oe<Pe;)$e=A[Oe++],we.X[(506832829*$e&4294967295)>>>we.Mb]=$e}else if(280>$e){if($e=Hn($e-256,he),yt=pr(qe.G[4],qe.H[4],he),de(he),yt=Gn(H,yt=Hn(yt,he)),he.h)break;if(Pe-k<yt||Z-Pe<$e)break e;for(ft=0;ft<$e;++ft)A[Pe+ft]=A[Pe+ft-yt];for(Pe+=$e,ce+=$e;ce>=H;)ce-=H,++oe,ae!=null&&oe<=re&&!(oe%16)&&ae(y,oe);if(e(Pe<=Z),ce&Se&&(qe=Ir(_e,ce,oe)),we!=null)for(;Oe<Pe;)$e=A[Oe++],we.X[(506832829*$e&4294967295)>>>we.Mb]=$e}else{if(!($e<Ke))break e;for(Qe=$e-280,e(we!=null);Oe<Pe;)$e=A[Oe++],we.X[(506832829*$e&4294967295)>>>we.Mb]=$e;$e=Pe,e(!(Qe>>>(yt=we).Xa)),A[$e]=yt.X[Qe],Qe=!0}Qe||e(he.h==ee(he))}if(y.Pb&&he.h&&Pe<Z)e(y.m.h),y.a=5,y.m=y.wd,y.$=y.xd,0<y.s.ua&&Be(y.s.vb,y.s.Wa);else{if(he.h)break e;ae!=null&&ae(y,oe>re?re:oe),y.a=0,y.$=Pe-k}return 1}return y.a=3,0}function ti(y){e(y!=null),y.vc=null,y.yc=null,y.Ya=null;var A=y.Wa;A!=null&&(A.X=null),y.vb=null,e(y!=null)}function sr(){var y=new cc;return y==null?null:(y.a=0,y.xb=vc,di("Predictor","VP8LPredictors"),di("Predictor","VP8LPredictors_C"),di("PredictorAdd","VP8LPredictorsAdd"),di("PredictorAdd","VP8LPredictorsAdd_C"),ph=bt,El=xt,ea=ut,Ii=mn,Sl=Vt,wa=Xn,ko=Yt,E.VP8LMapColor32b=mi,E.VP8LMapColor8b=xf,y)}function Mn(y,A,k,H,Z){var re=1,ae=[y],oe=[A],ce=H.m,he=H.s,_e=null,Pe=0;e:for(;;){if(k)for(;re&&X(ce,1);){var Oe=ae,Re=oe,Ke=H,Ue=1,we=Ke.m,Se=Ke.gc[Ke.ab],qe=X(we,2);if(Ke.Oc&1<<qe)re=0;else{switch(Ke.Oc|=1<<qe,Se.hc=qe,Se.Ea=Oe[0],Se.nc=Re[0],Se.K=[null],++Ke.ab,e(4>=Ke.ab),qe){case 0:case 1:Se.b=X(we,3)+2,Ue=Mn(lt(Se.Ea,Se.b),lt(Se.nc,Se.b),0,Ke,Se.K),Se.K=Se.K[0];break;case 3:var Qe,$e=X(we,8)+1,yt=16<$e?0:4<$e?1:2<$e?2:3;if(Oe[0]=lt(Se.Ea,yt),Se.b=yt,Qe=Ue=Mn($e,1,0,Ke,Se.K)){var ft,Dt=$e,dt=Se,Tn=1<<(8>>dt.b),jn=a(Tn);if(jn==null)Qe=0;else{var sn=dt.K[0],rn=dt.w;for(jn[0]=dt.K[0][0],ft=1;ft<1*Dt;++ft)jn[ft]=Xe(sn[rn+ft],jn[ft-1]);for(;ft<4*Tn;++ft)jn[ft]=0;dt.K[0]=null,dt.K[0]=jn,Qe=1}}Ue=Qe;break;case 2:break;default:e(0)}re=Ue}}if(ae=ae[0],oe=oe[0],re&&X(ce,1)&&!(re=1<=(Pe=X(ce,4))&&11>=Pe)){H.a=3;break e}var Kn;if(Kn=re)t:{var Un,Qt,er,Lt=H,Ht=ae,Sn=oe,In=Pe,xi=k,si=Lt.m,Br=Lt.s,Fr=[null],Yr=1,co=0,Vn=Su[In];n:for(;;){if(xi&&X(si,1)){var Kr=X(si,3)+2,Fo=lt(Ht,Kr),Ml=lt(Sn,Kr),Iu=Fo*Ml;if(!Mn(Fo,Ml,0,Lt,Fr))break n;for(Fr=Fr[0],Br.xc=Kr,Un=0;Un<Iu;++Un){var Bl=Fr[Un]>>8&65535;Fr[Un]=Bl,Bl>=Yr&&(Yr=Bl+1)}}if(si.h)break n;for(Qt=0;5>Qt;++Qt){var vr=Ha[Qt];!Qt&&0<In&&(vr+=1<<In),co<vr&&(co=vr)}var Cf=o(Yr*Vn,L),bh=Yr,na=o(bh,$);if(na==null)var br=null;else e(65536>=bh),br=na;var Ru=a(co);if(br==null||Ru==null||Cf==null){Lt.a=1;break n}var Fl=Cf;for(Un=er=0;Un<Yr;++Un){var Aa=br[Un],jl=Aa.G,Ea=Aa.H,Tf=0,xc=1,Ah=0;for(Qt=0;5>Qt;++Qt){vr=Ha[Qt],jl[Qt]=Fl,Ea[Qt]=er,!Qt&&0<In&&(vr+=1<<In);i:{var If,Eh=vr,Rf=Lt,_c=Ru,D0=Fl,P0=er,Nf=0,Hs=Rf.m,j2=X(Hs,1);if(i(_c,0,0,Eh),j2){var L0=X(Hs,1)+1,k0=X(Hs,1),Md=X(Hs,k0==0?1:8);_c[Md]=1,L0==2&&(_c[Md=X(Hs,8)]=1);var wc=1}else{var Bd=a(19),Fd=X(Hs,4)+4;if(19<Fd){Rf.a=3;var Of=0;break i}for(If=0;If<Fd;++If)Bd[js[If]]=X(Hs,3);var Sh=void 0,bc=void 0,M0=Rf,B0=Bd,Gs=Eh,Df=_c,Ch=0,jo=M0.m,Ac=8,jd=o(128,L);r:for(;R(jd,0,7,B0,19);){if(X(jo,1)){var F0=2+2*X(jo,3);if((Sh=2+X(jo,F0))>Gs)break r}else Sh=Gs;for(bc=0;bc<Gs&&Sh--;){de(jo);var Ud=jd[0+(127&Q(jo))];ie(jo,jo.u+Ud.g);var Nu=Ud.value;if(16>Nu)Df[bc++]=Nu,Nu!=0&&(Ac=Nu);else{var j0=Nu==16,Vd=Nu-16,zd=uo[Vd],qd=X(jo,vh[Vd])+zd;if(bc+qd>Gs)break r;for(var U0=j0?Ac:0;0<qd--;)Df[bc++]=U0}}Ch=1;break r}Ch||(M0.a=3),wc=Ch}(wc=wc&&!Hs.h)&&(Nf=R(D0,P0,8,_c,Eh)),wc&&Nf!=0?Of=Nf:(Rf.a=3,Of=0)}if(Of==0)break n;if(xc&&Eu[Qt]==1&&(xc=Fl[er].g==0),Tf+=Fl[er].g,er+=Of,3>=Qt){var Ou,Th=Ru[0];for(Ou=1;Ou<vr;++Ou)Ru[Ou]>Th&&(Th=Ru[Ou]);Ah+=Th}}if(Aa.nd=xc,Aa.Qb=0,xc&&(Aa.qb=(jl[3][Ea[3]+0].value<<24|jl[1][Ea[1]+0].value<<16|jl[2][Ea[2]+0].value)>>>0,Tf==0&&256>jl[0][Ea[0]+0].value&&(Aa.Qb=1,Aa.qb+=jl[0][Ea[0]+0].value<<8)),Aa.jc=!Aa.Qb&&6>Ah,Aa.jc){var Pf,Ws=Aa;for(Pf=0;Pf<ri;++Pf){var ps=Pf,$s=Ws.pd[ps],Lf=Ws.G[0][Ws.H[0]+ps];256<=Lf.value?($s.g=Lf.g+256,$s.value=Lf.value):($s.g=0,$s.value=0,ps>>=wr(Lf,8,$s),ps>>=wr(Ws.G[1][Ws.H[1]+ps],16,$s),ps>>=wr(Ws.G[2][Ws.H[2]+ps],0,$s),wr(Ws.G[3][Ws.H[3]+ps],24,$s))}}}Br.vc=Fr,Br.Wb=Yr,Br.Ya=br,Br.yc=Cf,Kn=1;break t}Kn=0}if(!(re=Kn)){H.a=3;break e}if(0<Pe){if(he.ua=1<<Pe,!wt(he.Wa,Pe)){H.a=1,re=0;break e}}else he.ua=0;var kf=H,Hd=ae,V0=oe,Gd=kf.s,Wd=Gd.xc;if(kf.c=Hd,kf.i=V0,Gd.md=lt(Hd,Wd),Gd.wc=Wd==0?-1:(1<<Wd)-1,k){H.xb=I0;break e}if((_e=a(ae*oe))==null){H.a=1,re=0;break e}re=(re=Gr(H,_e,0,ae,oe,oe,null))&&!ce.h;break e}return re?(Z!=null?Z[0]=_e:(e(_e==null),e(k)),H.$=0,k||ti(he)):ti(he),re}function Eo(y,A){var k=y.c*y.i,H=k+A+16*A;return e(y.c<=A),y.V=a(H),y.V==null?(y.Ta=null,y.Ua=0,y.a=1,0):(y.Ta=y.V,y.Ua=y.Ba+k+A,1)}function So(y,A){var k=y.C,H=A-k,Z=y.V,re=y.Ba+y.c*k;for(e(A<=y.l.o);0<H;){var ae=16<H?16:H,oe=y.l.ma,ce=y.l.width,he=ce*ae,_e=oe.ca,Pe=oe.tb+ce*k,Oe=y.Ta,Re=y.Ua;Hr(y,ae,Z,re),ur(Oe,Re,_e,Pe,he),pi(oe,k,k+ae,_e,Pe,ce),H-=ae,Z+=ae*y.c,k+=ae}e(k==A),y.C=y.Ma=A}function Bi(){this.ub=this.yd=this.td=this.Rb=0}function pa(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Ss(){this.Fb=this.Bb=this.Cb=0,this.Zb=a(4),this.Lb=a(4)}function lu(){this.Yb=function(){var y=[];return function A(k,H,Z){for(var re=Z[H],ae=0;ae<re&&(k.push(Z.length>H+1?[]:0),!(Z.length<H+1));ae++)A(k[ae],H+1,Z)}(y,0,[3,11]),y}()}function Cs(){this.jb=a(3),this.Wc=s([4,8],lu),this.Xc=s([4,17],lu)}function ic(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new a(4),this.od=new a(4)}function Ua(){this.ld=this.La=this.dd=this.tc=0}function Va(){this.Na=this.la=0}function ni(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Co(){this.ad=a(384),this.Za=0,this.Ob=a(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function ac(){this.uc=this.M=this.Nb=0,this.wa=Array(new Ua),this.Y=0,this.ya=Array(new Co),this.aa=0,this.l=new To}function Qa(){this.y=a(16),this.f=a(8),this.ea=a(8)}function dl(){this.cb=this.a=0,this.sc="",this.m=new me,this.Od=new Bi,this.Kc=new pa,this.ed=new ic,this.Qa=new Ss,this.Ic=this.$c=this.Aa=0,this.D=new ac,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=o(8,me),this.ia=0,this.pb=o(4,ni),this.Pa=new Cs,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Qa),this.Hd=0,this.rb=Array(new Va),this.sb=0,this.wa=Array(new Ua),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Co),this.L=this.aa=0,this.gd=s([4,2],Ua),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function To(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function uu(){var y=new dl;return y!=null&&(y.a=0,y.sc="OK",y.cb=0,y.Xb=0,ii||(ii=oc)),y}function lr(y,A,k){return y.a==0&&(y.a=A,y.sc=k,y.cb=0),0}function gi(y,A,k){return 3<=k&&y[A+0]==157&&y[A+1]==1&&y[A+2]==42}function pl(y,A){if(y==null)return 0;if(y.a=0,y.sc="OK",A==null)return lr(y,2,"null VP8Io passed to VP8GetHeaders()");var k=A.data,H=A.w,Z=A.ha;if(4>Z)return lr(y,7,"Truncated header.");var re=k[H+0]|k[H+1]<<8|k[H+2]<<16,ae=y.Od;if(ae.Rb=!(1&re),ae.td=re>>1&7,ae.yd=re>>4&1,ae.ub=re>>5,3<ae.td)return lr(y,3,"Incorrect keyframe parameters.");if(!ae.yd)return lr(y,4,"Frame not displayable.");H+=3,Z-=3;var oe=y.Kc;if(ae.Rb){if(7>Z)return lr(y,7,"cannot parse picture header");if(!gi(k,H,Z))return lr(y,3,"Bad code word");oe.c=16383&(k[H+4]<<8|k[H+3]),oe.Td=k[H+4]>>6,oe.i=16383&(k[H+6]<<8|k[H+5]),oe.Ud=k[H+6]>>6,H+=7,Z-=7,y.za=oe.c+15>>4,y.Ub=oe.i+15>>4,A.width=oe.c,A.height=oe.i,A.Da=0,A.j=0,A.v=0,A.va=A.width,A.o=A.height,A.da=0,A.ib=A.width,A.hb=A.height,A.U=A.width,A.T=A.height,i((re=y.Pa).jb,0,255,re.jb.length),e((re=y.Qa)!=null),re.Cb=0,re.Bb=0,re.Fb=1,i(re.Zb,0,0,re.Zb.length),i(re.Lb,0,0,re.Lb)}if(ae.ub>Z)return lr(y,7,"bad partition length");ne(re=y.m,k,H,ae.ub),H+=ae.ub,Z-=ae.ub,ae.Rb&&(oe.Ld=be(re),oe.Kd=be(re)),oe=y.Qa;var ce,he=y.Pa;if(e(re!=null),e(oe!=null),oe.Cb=be(re),oe.Cb){if(oe.Bb=be(re),be(re)){for(oe.Fb=be(re),ce=0;4>ce;++ce)oe.Zb[ce]=be(re)?z(re,7):0;for(ce=0;4>ce;++ce)oe.Lb[ce]=be(re)?z(re,6):0}if(oe.Bb)for(ce=0;3>ce;++ce)he.jb[ce]=be(re)?U(re,8):255}else oe.Bb=0;if(re.Ka)return lr(y,3,"cannot parse segment header");if((oe=y.ed).zd=be(re),oe.Tb=U(re,6),oe.wb=U(re,3),oe.Pc=be(re),oe.Pc&&be(re)){for(he=0;4>he;++he)be(re)&&(oe.vd[he]=z(re,6));for(he=0;4>he;++he)be(re)&&(oe.od[he]=z(re,6))}if(y.L=oe.Tb==0?0:oe.zd?1:2,re.Ka)return lr(y,3,"cannot parse filter header");var _e=Z;if(Z=ce=H,H=ce+_e,oe=_e,y.Xb=(1<<U(y.m,2))-1,_e<3*(he=y.Xb))k=7;else{for(ce+=3*he,oe-=3*he,_e=0;_e<he;++_e){var Pe=k[Z+0]|k[Z+1]<<8|k[Z+2]<<16;Pe>oe&&(Pe=oe),ne(y.Jc[+_e],k,ce,Pe),ce+=Pe,oe-=Pe,Z+=3}ne(y.Jc[+he],k,ce,oe),k=ce<H?0:5}if(k!=0)return lr(y,k,"cannot parse partitions");for(k=U(ce=y.m,7),Z=be(ce)?z(ce,4):0,H=be(ce)?z(ce,4):0,oe=be(ce)?z(ce,4):0,he=be(ce)?z(ce,4):0,ce=be(ce)?z(ce,4):0,_e=y.Qa,Pe=0;4>Pe;++Pe){if(_e.Cb){var Oe=_e.Zb[Pe];_e.Fb||(Oe+=k)}else{if(0<Pe){y.pb[Pe]=y.pb[0];continue}Oe=k}var Re=y.pb[Pe];Re.Sc[0]=bf[Fn(Oe+Z,127)],Re.Sc[1]=Af[Fn(Oe+0,127)],Re.Eb[0]=2*bf[Fn(Oe+H,127)],Re.Eb[1]=101581*Af[Fn(Oe+oe,127)]>>16,8>Re.Eb[1]&&(Re.Eb[1]=8),Re.Qc[0]=bf[Fn(Oe+he,117)],Re.Qc[1]=Af[Fn(Oe+ce,127)],Re.lc=Oe+ce}if(!ae.Rb)return lr(y,4,"Not a key frame.");for(be(re),ae=y.Pa,k=0;4>k;++k){for(Z=0;8>Z;++Z)for(H=0;3>H;++H)for(oe=0;11>oe;++oe)he=Te(re,Cu[k][Z][H][oe])?U(re,8):cs[k][Z][H][oe],ae.Wc[k][Z].Yb[H][oe]=he;for(Z=0;17>Z;++Z)ae.Xc[k][Z]=ae.Wc[k][T0[Z]]}return y.kc=be(re),y.kc&&(y.Bd=U(re,8)),y.cb=1}function oc(y,A,k,H,Z,re,ae){var oe=A[Z].Yb[k];for(k=0;16>Z;++Z){if(!Te(y,oe[k+0]))return Z;for(;!Te(y,oe[k+1]);)if(oe=A[++Z].Yb[0],k=0,Z==16)return 16;var ce=A[Z+1].Yb;if(Te(y,oe[k+2])){var he=y,_e=0;if(Te(he,(Oe=oe)[(Pe=k)+3]))if(Te(he,Oe[Pe+6])){for(oe=0,Pe=2*(_e=Te(he,Oe[Pe+8]))+(Oe=Te(he,Oe[Pe+9+_e])),_e=0,Oe=Or[Pe];Oe[oe];++oe)_e+=_e+Te(he,Oe[oe]);_e+=3+(8<<Pe)}else Te(he,Oe[Pe+7])?(_e=7+2*Te(he,165),_e+=Te(he,145)):_e=5+Te(he,159);else _e=Te(he,Oe[Pe+4])?3+Te(he,Oe[Pe+5]):2;oe=ce[2]}else _e=1,oe=ce[1];ce=ae+Dn[Z],0>(he=y).b&&Ee(he);var Pe,Oe=he.b,Re=(Pe=he.Ca>>1)-(he.I>>Oe)>>31;--he.b,he.Ca+=Re,he.Ca|=1,he.I-=(Pe+1&Re)<<Oe,re[ce]=((_e^Re)-Re)*H[(0<Z)+0]}return 16}function Yo(y){var A=y.rb[y.sb-1];A.la=0,A.Na=0,i(y.zc,0,0,y.zc.length),y.ja=0}function cu(y,A){if(y==null)return 0;if(A==null)return lr(y,2,"NULL VP8Io parameter in VP8Decode().");if(!y.cb&&!pl(y,A))return 0;if(e(y.cb),A.ac==null||A.ac(A)){A.ob&&(y.L=0);var k=qs[y.L];if(y.L==2?(y.yb=0,y.zb=0):(y.yb=A.v-k>>4,y.zb=A.j-k>>4,0>y.yb&&(y.yb=0),0>y.zb&&(y.zb=0)),y.Va=A.o+15+k>>4,y.Hb=A.va+15+k>>4,y.Hb>y.za&&(y.Hb=y.za),y.Va>y.Ub&&(y.Va=y.Ub),0<y.L){var H=y.ed;for(k=0;4>k;++k){var Z;if(y.Qa.Cb){var re=y.Qa.Lb[k];y.Qa.Fb||(re+=H.Tb)}else re=H.Tb;for(Z=0;1>=Z;++Z){var ae=y.gd[k][Z],oe=re;if(H.Pc&&(oe+=H.vd[0],Z&&(oe+=H.od[0])),0<(oe=0>oe?0:63<oe?63:oe)){var ce=oe;0<H.wb&&(ce=4<H.wb?ce>>2:ce>>1)>9-H.wb&&(ce=9-H.wb),1>ce&&(ce=1),ae.dd=ce,ae.tc=2*oe+ce,ae.ld=40<=oe?2:15<=oe?1:0}else ae.tc=0;ae.La=Z}}}k=0}else lr(y,6,"Frame setup failed"),k=y.a;if(k=k==0){if(k){y.$c=0,0<y.Aa||(y.Ic=N0);e:{k=y.Ic,H=4*(ce=y.za);var he=32*ce,_e=ce+1,Pe=0<y.L?ce*(0<y.Aa?2:1):0,Oe=(y.Aa==2?2:1)*ce;if((ae=H+832+(Z=3*(16*k+qs[y.L])/2*he)+(re=y.Fa!=null&&0<y.Fa.length?y.Kc.c*y.Kc.i:0))!=ae)k=0;else{if(ae>y.Vb){if(y.Vb=0,y.Ec=a(ae),y.Fc=0,y.Ec==null){k=lr(y,1,"no memory during frame initialization.");break e}y.Vb=ae}ae=y.Ec,oe=y.Fc,y.Ac=ae,y.Bc=oe,oe+=H,y.Gd=o(he,Qa),y.Hd=0,y.rb=o(_e+1,Va),y.sb=1,y.wa=Pe?o(Pe,Ua):null,y.Y=0,y.D.Nb=0,y.D.wa=y.wa,y.D.Y=y.Y,0<y.Aa&&(y.D.Y+=ce),e(!0),y.oc=ae,y.pc=oe,oe+=832,y.ya=o(Oe,Co),y.aa=0,y.D.ya=y.ya,y.D.aa=y.aa,y.Aa==2&&(y.D.aa+=ce),y.R=16*ce,y.B=8*ce,ce=(he=qs[y.L])*y.R,he=he/2*y.B,y.sa=ae,y.ta=oe+ce,y.qa=y.sa,y.ra=y.ta+16*k*y.R+he,y.Ha=y.qa,y.Ia=y.ra+8*k*y.B+he,y.$c=0,oe+=Z,y.mb=re?ae:null,y.nb=re?oe:null,e(oe+re<=y.Fc+y.Vb),Yo(y),i(y.Ac,y.Bc,0,H),k=1}}if(k){if(A.ka=0,A.y=y.sa,A.O=y.ta,A.f=y.qa,A.N=y.ra,A.ea=y.Ha,A.Vd=y.Ia,A.fa=y.R,A.Rc=y.B,A.F=null,A.J=0,!Ms){for(k=-255;255>=k;++k)Mr[255+k]=0>k?-k:k;for(k=-1020;1020>=k;++k)so[1020+k]=-128>k?-128:127<k?127:k;for(k=-112;112>=k;++k)Nl[112+k]=-16>k?-16:15<k?15:k;for(k=-255;510>=k;++k)Ol[255+k]=0>k?0:255<k?255:k;Ms=1}ss=ga,Mo=Qo,Bo=Za,Xr=Bn,ba=Zo,Rr=Ko,xu=ns,ls=Po,dc=yl,Cl=gu,Tl=vl,Il=Rs,_u=Ns,pc=rs,Rl=za,ks=Ui,wu=$r,Nr=uc,ta[0]=Fi,ta[1]=sc,ta[2]=to,ta[3]=lc,ta[4]=ma,ta[5]=no,ta[6]=Ji,ta[7]=va,ta[8]=Do,ta[9]=Jo,Vs[0]=Ja,Vs[1]=hu,Vs[2]=Ro,Vs[3]=ml,Vs[4]=Jn,Vs[5]=Oo,Vs[6]=eo,Ga[0]=ro,Ga[1]=fu,Ga[2]=du,Ga[3]=ya,Ga[4]=hn,Ga[5]=Wr,Ga[6]=es,k=1}else k=0}k&&(k=function(Re,Ke){for(Re.M=0;Re.M<Re.Va;++Re.M){var Ue,we=Re.Jc[Re.M&Re.Xb],Se=Re.m,qe=Re;for(Ue=0;Ue<qe.za;++Ue){var Qe=Se,$e=qe,yt=$e.Ac,ft=$e.Bc+4*Ue,Dt=$e.zc,dt=$e.ya[$e.aa+Ue];if($e.Qa.Bb?dt.$b=Te(Qe,$e.Pa.jb[0])?2+Te(Qe,$e.Pa.jb[2]):Te(Qe,$e.Pa.jb[1]):dt.$b=0,$e.kc&&(dt.Ad=Te(Qe,$e.Bd)),dt.Za=!Te(Qe,145)+0,dt.Za){var Tn=dt.Ob,jn=0;for($e=0;4>$e;++$e){var sn,rn=Dt[0+$e];for(sn=0;4>sn;++sn){rn=Pd[yt[ft+sn]][rn];for(var Kn=Pl[Te(Qe,rn[0])];0<Kn;)Kn=Pl[2*Kn+Te(Qe,rn[Kn])];rn=-Kn,yt[ft+sn]=rn}r(Tn,jn,yt,ft,4),jn+=4,Dt[0+$e]=rn}}else rn=Te(Qe,156)?Te(Qe,128)?1:3:Te(Qe,163)?2:0,dt.Ob[0]=rn,i(yt,ft,rn,4),i(Dt,0,rn,4);dt.Dd=Te(Qe,142)?Te(Qe,114)?Te(Qe,183)?1:3:2:0}if(qe.m.Ka)return lr(Re,7,"Premature end-of-partition0 encountered.");for(;Re.ja<Re.za;++Re.ja){if(qe=we,Qe=(Se=Re).rb[Se.sb-1],yt=Se.rb[Se.sb+Se.ja],Ue=Se.ya[Se.aa+Se.ja],ft=Se.kc?Ue.Ad:0)Qe.la=yt.la=0,Ue.Za||(Qe.Na=yt.Na=0),Ue.Hc=0,Ue.Gc=0,Ue.ia=0;else{var Un,Qt;if(Qe=yt,yt=qe,ft=Se.Pa.Xc,Dt=Se.ya[Se.aa+Se.ja],dt=Se.pb[Dt.$b],$e=Dt.ad,Tn=0,jn=Se.rb[Se.sb-1],rn=sn=0,i($e,Tn,0,384),Dt.Za)var er=0,Lt=ft[3];else{Kn=a(16);var Ht=Qe.Na+jn.Na;if(Ht=ii(yt,ft[1],Ht,dt.Eb,0,Kn,0),Qe.Na=jn.Na=(0<Ht)+0,1<Ht)ss(Kn,0,$e,Tn);else{var Sn=Kn[0]+3>>3;for(Kn=0;256>Kn;Kn+=16)$e[Tn+Kn]=Sn}er=1,Lt=ft[0]}var In=15&Qe.la,xi=15&jn.la;for(Kn=0;4>Kn;++Kn){var si=1&xi;for(Sn=Qt=0;4>Sn;++Sn)In=In>>1|(si=(Ht=ii(yt,Lt,Ht=si+(1&In),dt.Sc,er,$e,Tn))>er)<<7,Qt=Qt<<2|(3<Ht?3:1<Ht?2:$e[Tn+0]!=0),Tn+=16;In>>=4,xi=xi>>1|si<<7,sn=(sn<<8|Qt)>>>0}for(Lt=In,er=xi>>4,Un=0;4>Un;Un+=2){for(Qt=0,In=Qe.la>>4+Un,xi=jn.la>>4+Un,Kn=0;2>Kn;++Kn){for(si=1&xi,Sn=0;2>Sn;++Sn)Ht=si+(1&In),In=In>>1|(si=0<(Ht=ii(yt,ft[2],Ht,dt.Qc,0,$e,Tn)))<<3,Qt=Qt<<2|(3<Ht?3:1<Ht?2:$e[Tn+0]!=0),Tn+=16;In>>=2,xi=xi>>1|si<<5}rn|=Qt<<4*Un,Lt|=In<<4<<Un,er|=(240&xi)<<Un}Qe.la=Lt,jn.la=er,Dt.Hc=sn,Dt.Gc=rn,Dt.ia=43690&rn?0:dt.ia,ft=!(sn|rn)}if(0<Se.L&&(Se.wa[Se.Y+Se.ja]=Se.gd[Ue.$b][Ue.Za],Se.wa[Se.Y+Se.ja].La|=!ft),qe.Ka)return lr(Re,7,"Premature end-of-file encountered.")}if(Yo(Re),Se=Ke,qe=1,Ue=(we=Re).D,Qe=0<we.L&&we.M>=we.zb&&we.M<=we.Va,we.Aa==0)e:{if(Ue.M=we.M,Ue.uc=Qe,xa(we,Ue),qe=1,Ue=(Qt=we.D).Nb,Qe=(rn=qs[we.L])*we.R,yt=rn/2*we.B,Kn=16*Ue*we.R,Sn=8*Ue*we.B,ft=we.sa,Dt=we.ta-Qe+Kn,dt=we.qa,$e=we.ra-yt+Sn,Tn=we.Ha,jn=we.Ia-yt+Sn,xi=(In=Qt.M)==0,sn=In>=we.Va-1,we.Aa==2&&xa(we,Qt),Qt.uc)for(si=(Ht=we).D.M,e(Ht.D.uc),Qt=Ht.yb;Qt<Ht.Hb;++Qt){er=Qt,Lt=si;var Br=(Fr=(vr=Ht).D).Nb;Un=vr.R;var Fr=Fr.wa[Fr.Y+er],Yr=vr.sa,co=vr.ta+16*Br*Un+16*er,Vn=Fr.dd,Kr=Fr.tc;if(Kr!=0)if(e(3<=Kr),vr.L==1)0<er&&ks(Yr,co,Un,Kr+4),Fr.La&&Nr(Yr,co,Un,Kr),0<Lt&&Rl(Yr,co,Un,Kr+4),Fr.La&&wu(Yr,co,Un,Kr);else{var Fo=vr.B,Ml=vr.qa,Iu=vr.ra+8*Br*Fo+8*er,Bl=vr.Ha,vr=vr.Ia+8*Br*Fo+8*er;Br=Fr.ld,0<er&&(ls(Yr,co,Un,Kr+4,Vn,Br),Cl(Ml,Iu,Bl,vr,Fo,Kr+4,Vn,Br)),Fr.La&&(Il(Yr,co,Un,Kr,Vn,Br),pc(Ml,Iu,Bl,vr,Fo,Kr,Vn,Br)),0<Lt&&(xu(Yr,co,Un,Kr+4,Vn,Br),dc(Ml,Iu,Bl,vr,Fo,Kr+4,Vn,Br)),Fr.La&&(Tl(Yr,co,Un,Kr,Vn,Br),_u(Ml,Iu,Bl,vr,Fo,Kr,Vn,Br))}}if(we.ia&&alert("todo:DitherRow"),Se.put!=null){if(Qt=16*In,In=16*(In+1),xi?(Se.y=we.sa,Se.O=we.ta+Kn,Se.f=we.qa,Se.N=we.ra+Sn,Se.ea=we.Ha,Se.W=we.Ia+Sn):(Qt-=rn,Se.y=ft,Se.O=Dt,Se.f=dt,Se.N=$e,Se.ea=Tn,Se.W=jn),sn||(In-=rn),In>Se.o&&(In=Se.o),Se.F=null,Se.J=null,we.Fa!=null&&0<we.Fa.length&&Qt<In&&(Se.J=_l(we,Se,Qt,In-Qt),Se.F=we.mb,Se.F==null&&Se.F.length==0)){qe=lr(we,3,"Could not decode alpha data.");break e}Qt<Se.j&&(rn=Se.j-Qt,Qt=Se.j,e(!(1&rn)),Se.O+=we.R*rn,Se.N+=we.B*(rn>>1),Se.W+=we.B*(rn>>1),Se.F!=null&&(Se.J+=Se.width*rn)),Qt<In&&(Se.O+=Se.v,Se.N+=Se.v>>1,Se.W+=Se.v>>1,Se.F!=null&&(Se.J+=Se.v),Se.ka=Qt-Se.j,Se.U=Se.va-Se.v,Se.T=In-Qt,qe=Se.put(Se))}Ue+1!=we.Ic||sn||(r(we.sa,we.ta-Qe,ft,Dt+16*we.R,Qe),r(we.qa,we.ra-yt,dt,$e+8*we.B,yt),r(we.Ha,we.Ia-yt,Tn,jn+8*we.B,yt))}if(!qe)return lr(Re,6,"Output aborted.")}return 1}(y,A)),A.bc!=null&&A.bc(A),k&=1}return k?(y.cb=0,k):0}function Si(y,A,k,H,Z){Z=y[A+k+32*H]+(Z>>3),y[A+k+32*H]=-256&Z?0>Z?0:255:Z}function gl(y,A,k,H,Z,re){Si(y,A,0,k,H+Z),Si(y,A,1,k,H+re),Si(y,A,2,k,H-re),Si(y,A,3,k,H-Z)}function En(y){return(20091*y>>16)+y}function Ci(y,A,k,H){var Z,re=0,ae=a(16);for(Z=0;4>Z;++Z){var oe=y[A+0]+y[A+8],ce=y[A+0]-y[A+8],he=(35468*y[A+4]>>16)-En(y[A+12]),_e=En(y[A+4])+(35468*y[A+12]>>16);ae[re+0]=oe+_e,ae[re+1]=ce+he,ae[re+2]=ce-he,ae[re+3]=oe-_e,re+=4,A++}for(Z=re=0;4>Z;++Z)oe=(y=ae[re+0]+4)+ae[re+8],ce=y-ae[re+8],he=(35468*ae[re+4]>>16)-En(ae[re+12]),Si(k,H,0,0,oe+(_e=En(ae[re+4])+(35468*ae[re+12]>>16))),Si(k,H,1,0,ce+he),Si(k,H,2,0,ce-he),Si(k,H,3,0,oe-_e),re++,H+=32}function Ko(y,A,k,H){var Z=y[A+0]+4,re=35468*y[A+4]>>16,ae=En(y[A+4]),oe=35468*y[A+1]>>16;gl(k,H,0,Z+ae,y=En(y[A+1]),oe),gl(k,H,1,Z+re,y,oe),gl(k,H,2,Z-re,y,oe),gl(k,H,3,Z-ae,y,oe)}function Qo(y,A,k,H,Z){Ci(y,A,k,H),Z&&Ci(y,A+16,k,H+4)}function Za(y,A,k,H){Mo(y,A+0,k,H,1),Mo(y,A+32,k,H+128,1)}function Bn(y,A,k,H){var Z;for(y=y[A+0]+4,Z=0;4>Z;++Z)for(A=0;4>A;++A)Si(k,H,A,Z,y)}function Zo(y,A,k,H){y[A+0]&&Xr(y,A+0,k,H),y[A+16]&&Xr(y,A+16,k,H+4),y[A+32]&&Xr(y,A+32,k,H+128),y[A+48]&&Xr(y,A+48,k,H+128+4)}function ga(y,A,k,H){var Z,re=a(16);for(Z=0;4>Z;++Z){var ae=y[A+0+Z]+y[A+12+Z],oe=y[A+4+Z]+y[A+8+Z],ce=y[A+4+Z]-y[A+8+Z],he=y[A+0+Z]-y[A+12+Z];re[0+Z]=ae+oe,re[8+Z]=ae-oe,re[4+Z]=he+ce,re[12+Z]=he-ce}for(Z=0;4>Z;++Z)ae=(y=re[0+4*Z]+3)+re[3+4*Z],oe=re[1+4*Z]+re[2+4*Z],ce=re[1+4*Z]-re[2+4*Z],he=y-re[3+4*Z],k[H+0]=ae+oe>>3,k[H+16]=he+ce>>3,k[H+32]=ae-oe>>3,k[H+48]=he-ce>>3,H+=64}function Io(y,A,k){var H,Z=A-32,re=vi,ae=255-y[Z-1];for(H=0;H<k;++H){var oe,ce=re,he=ae+y[A-1];for(oe=0;oe<k;++oe)y[A+oe]=ce[he+y[Z+oe]];A+=32}}function sc(y,A){Io(y,A,4)}function fu(y,A){Io(y,A,8)}function hu(y,A){Io(y,A,16)}function Ro(y,A){var k;for(k=0;16>k;++k)r(y,A+32*k,y,A-32,16)}function ml(y,A){var k;for(k=16;0<k;--k)i(y,A,y[A-1],16),A+=32}function No(y,A,k){var H;for(H=0;16>H;++H)i(A,k+32*H,y,16)}function Ja(y,A){var k,H=16;for(k=0;16>k;++k)H+=y[A-1+32*k]+y[A+k-32];No(H>>5,y,A)}function Jn(y,A){var k,H=8;for(k=0;16>k;++k)H+=y[A-1+32*k];No(H>>4,y,A)}function Oo(y,A){var k,H=8;for(k=0;16>k;++k)H+=y[A+k-32];No(H>>4,y,A)}function eo(y,A){No(128,y,A)}function Ft(y,A,k){return y+2*A+k+2>>2}function to(y,A){var k,H=A-32;for(H=new Uint8Array([Ft(y[H-1],y[H+0],y[H+1]),Ft(y[H+0],y[H+1],y[H+2]),Ft(y[H+1],y[H+2],y[H+3]),Ft(y[H+2],y[H+3],y[H+4])]),k=0;4>k;++k)r(y,A+32*k,H,0,H.length)}function lc(y,A){var k=y[A-1],H=y[A-1+32],Z=y[A-1+64],re=y[A-1+96];Ge(y,A+0,16843009*Ft(y[A-1-32],k,H)),Ge(y,A+32,16843009*Ft(k,H,Z)),Ge(y,A+64,16843009*Ft(H,Z,re)),Ge(y,A+96,16843009*Ft(Z,re,re))}function Fi(y,A){var k,H=4;for(k=0;4>k;++k)H+=y[A+k-32]+y[A-1+32*k];for(H>>=3,k=0;4>k;++k)i(y,A+32*k,H,4)}function ma(y,A){var k=y[A-1+0],H=y[A-1+32],Z=y[A-1+64],re=y[A-1-32],ae=y[A+0-32],oe=y[A+1-32],ce=y[A+2-32],he=y[A+3-32];y[A+0+96]=Ft(H,Z,y[A-1+96]),y[A+1+96]=y[A+0+64]=Ft(k,H,Z),y[A+2+96]=y[A+1+64]=y[A+0+32]=Ft(re,k,H),y[A+3+96]=y[A+2+64]=y[A+1+32]=y[A+0+0]=Ft(ae,re,k),y[A+3+64]=y[A+2+32]=y[A+1+0]=Ft(oe,ae,re),y[A+3+32]=y[A+2+0]=Ft(ce,oe,ae),y[A+3+0]=Ft(he,ce,oe)}function Ji(y,A){var k=y[A+1-32],H=y[A+2-32],Z=y[A+3-32],re=y[A+4-32],ae=y[A+5-32],oe=y[A+6-32],ce=y[A+7-32];y[A+0+0]=Ft(y[A+0-32],k,H),y[A+1+0]=y[A+0+32]=Ft(k,H,Z),y[A+2+0]=y[A+1+32]=y[A+0+64]=Ft(H,Z,re),y[A+3+0]=y[A+2+32]=y[A+1+64]=y[A+0+96]=Ft(Z,re,ae),y[A+3+32]=y[A+2+64]=y[A+1+96]=Ft(re,ae,oe),y[A+3+64]=y[A+2+96]=Ft(ae,oe,ce),y[A+3+96]=Ft(oe,ce,ce)}function no(y,A){var k=y[A-1+0],H=y[A-1+32],Z=y[A-1+64],re=y[A-1-32],ae=y[A+0-32],oe=y[A+1-32],ce=y[A+2-32],he=y[A+3-32];y[A+0+0]=y[A+1+64]=re+ae+1>>1,y[A+1+0]=y[A+2+64]=ae+oe+1>>1,y[A+2+0]=y[A+3+64]=oe+ce+1>>1,y[A+3+0]=ce+he+1>>1,y[A+0+96]=Ft(Z,H,k),y[A+0+64]=Ft(H,k,re),y[A+0+32]=y[A+1+96]=Ft(k,re,ae),y[A+1+32]=y[A+2+96]=Ft(re,ae,oe),y[A+2+32]=y[A+3+96]=Ft(ae,oe,ce),y[A+3+32]=Ft(oe,ce,he)}function va(y,A){var k=y[A+0-32],H=y[A+1-32],Z=y[A+2-32],re=y[A+3-32],ae=y[A+4-32],oe=y[A+5-32],ce=y[A+6-32],he=y[A+7-32];y[A+0+0]=k+H+1>>1,y[A+1+0]=y[A+0+64]=H+Z+1>>1,y[A+2+0]=y[A+1+64]=Z+re+1>>1,y[A+3+0]=y[A+2+64]=re+ae+1>>1,y[A+0+32]=Ft(k,H,Z),y[A+1+32]=y[A+0+96]=Ft(H,Z,re),y[A+2+32]=y[A+1+96]=Ft(Z,re,ae),y[A+3+32]=y[A+2+96]=Ft(re,ae,oe),y[A+3+64]=Ft(ae,oe,ce),y[A+3+96]=Ft(oe,ce,he)}function Jo(y,A){var k=y[A-1+0],H=y[A-1+32],Z=y[A-1+64],re=y[A-1+96];y[A+0+0]=k+H+1>>1,y[A+2+0]=y[A+0+32]=H+Z+1>>1,y[A+2+32]=y[A+0+64]=Z+re+1>>1,y[A+1+0]=Ft(k,H,Z),y[A+3+0]=y[A+1+32]=Ft(H,Z,re),y[A+3+32]=y[A+1+64]=Ft(Z,re,re),y[A+3+64]=y[A+2+64]=y[A+0+96]=y[A+1+96]=y[A+2+96]=y[A+3+96]=re}function Do(y,A){var k=y[A-1+0],H=y[A-1+32],Z=y[A-1+64],re=y[A-1+96],ae=y[A-1-32],oe=y[A+0-32],ce=y[A+1-32],he=y[A+2-32];y[A+0+0]=y[A+2+32]=k+ae+1>>1,y[A+0+32]=y[A+2+64]=H+k+1>>1,y[A+0+64]=y[A+2+96]=Z+H+1>>1,y[A+0+96]=re+Z+1>>1,y[A+3+0]=Ft(oe,ce,he),y[A+2+0]=Ft(ae,oe,ce),y[A+1+0]=y[A+3+32]=Ft(k,ae,oe),y[A+1+32]=y[A+3+64]=Ft(H,k,ae),y[A+1+64]=y[A+3+96]=Ft(Z,H,k),y[A+1+96]=Ft(re,Z,H)}function du(y,A){var k;for(k=0;8>k;++k)r(y,A+32*k,y,A-32,8)}function ya(y,A){var k;for(k=0;8>k;++k)i(y,A,y[A-1],8),A+=32}function ji(y,A,k){var H;for(H=0;8>H;++H)i(A,k+32*H,y,8)}function ro(y,A){var k,H=8;for(k=0;8>k;++k)H+=y[A+k-32]+y[A-1+32*k];ji(H>>4,y,A)}function Wr(y,A){var k,H=4;for(k=0;8>k;++k)H+=y[A+k-32];ji(H>>3,y,A)}function hn(y,A){var k,H=4;for(k=0;8>k;++k)H+=y[A-1+32*k];ji(H>>3,y,A)}function es(y,A){ji(128,y,A)}function io(y,A,k){var H=y[A-k],Z=y[A+0],re=3*(Z-H)+gh[1020+y[A-2*k]-y[A+k]],ae=bu[112+(re+4>>3)];y[A-k]=vi[255+H+bu[112+(re+3>>3)]],y[A+0]=vi[255+Z-ae]}function pu(y,A,k,H){var Z=y[A+0],re=y[A+k];return lo[255+y[A-2*k]-y[A-k]]>H||lo[255+re-Z]>H}function Ts(y,A,k,H){return 4*lo[255+y[A-k]-y[A+0]]+lo[255+y[A-2*k]-y[A+k]]<=H}function Is(y,A,k,H,Z){var re=y[A-3*k],ae=y[A-2*k],oe=y[A-k],ce=y[A+0],he=y[A+k],_e=y[A+2*k],Pe=y[A+3*k];return 4*lo[255+oe-ce]+lo[255+ae-he]>H?0:lo[255+y[A-4*k]-re]<=Z&&lo[255+re-ae]<=Z&&lo[255+ae-oe]<=Z&&lo[255+Pe-_e]<=Z&&lo[255+_e-he]<=Z&&lo[255+he-ce]<=Z}function za(y,A,k,H){var Z=2*H+1;for(H=0;16>H;++H)Ts(y,A+H,k,Z)&&io(y,A+H,k)}function Ui(y,A,k,H){var Z=2*H+1;for(H=0;16>H;++H)Ts(y,A+H*k,1,Z)&&io(y,A+H*k,1)}function $r(y,A,k,H){var Z;for(Z=3;0<Z;--Z)za(y,A+=4*k,k,H)}function uc(y,A,k,H){var Z;for(Z=3;0<Z;--Z)Ui(y,A+=4,k,H)}function ts(y,A,k,H,Z,re,ae,oe){for(re=2*re+1;0<Z--;){if(Is(y,A,k,re,ae))if(pu(y,A,k,oe))io(y,A,k);else{var ce=y,he=A,_e=k,Pe=ce[he-2*_e],Oe=ce[he-_e],Re=ce[he+0],Ke=ce[he+_e],Ue=ce[he+2*_e],we=27*(qe=gh[1020+3*(Re-Oe)+gh[1020+Pe-Ke]])+63>>7,Se=18*qe+63>>7,qe=9*qe+63>>7;ce[he-3*_e]=vi[255+ce[he-3*_e]+qe],ce[he-2*_e]=vi[255+Pe+Se],ce[he-_e]=vi[255+Oe+we],ce[he+0]=vi[255+Re-we],ce[he+_e]=vi[255+Ke-Se],ce[he+2*_e]=vi[255+Ue-qe]}A+=H}}function Ti(y,A,k,H,Z,re,ae,oe){for(re=2*re+1;0<Z--;){if(Is(y,A,k,re,ae))if(pu(y,A,k,oe))io(y,A,k);else{var ce=y,he=A,_e=k,Pe=ce[he-_e],Oe=ce[he+0],Re=ce[he+_e],Ke=bu[112+((Ue=3*(Oe-Pe))+4>>3)],Ue=bu[112+(Ue+3>>3)],we=Ke+1>>1;ce[he-2*_e]=vi[255+ce[he-2*_e]+we],ce[he-_e]=vi[255+Pe+Ue],ce[he+0]=vi[255+Oe-Ke],ce[he+_e]=vi[255+Re-we]}A+=H}}function ns(y,A,k,H,Z,re){ts(y,A,k,1,16,H,Z,re)}function Po(y,A,k,H,Z,re){ts(y,A,1,k,16,H,Z,re)}function vl(y,A,k,H,Z,re){var ae;for(ae=3;0<ae;--ae)Ti(y,A+=4*k,k,1,16,H,Z,re)}function Rs(y,A,k,H,Z,re){var ae;for(ae=3;0<ae;--ae)Ti(y,A+=4,1,k,16,H,Z,re)}function yl(y,A,k,H,Z,re,ae,oe){ts(y,A,Z,1,8,re,ae,oe),ts(k,H,Z,1,8,re,ae,oe)}function gu(y,A,k,H,Z,re,ae,oe){ts(y,A,1,Z,8,re,ae,oe),ts(k,H,1,Z,8,re,ae,oe)}function Ns(y,A,k,H,Z,re,ae,oe){Ti(y,A+4*Z,Z,1,8,re,ae,oe),Ti(k,H+4*Z,Z,1,8,re,ae,oe)}function rs(y,A,k,H,Z,re,ae,oe){Ti(y,A+4,1,Z,8,re,ae,oe),Ti(k,H+4,1,Z,8,re,ae,oe)}function Os(){this.ba=new Lr,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new vn,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function xl(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Ds(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function is(){this.ua=0,this.Wa=new ge,this.vb=new ge,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new $,this.yc=new L}function cc(){this.xb=this.a=0,this.l=new To,this.ca=new Lr,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new G,this.Pb=0,this.wd=new G,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new is,this.ab=0,this.gc=o(4,Ds),this.Oc=0}function Lo(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new To,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function as(y,A,k,H,Z,re,ae){for(y=y==null?0:y[A+0],A=0;A<ae;++A)Z[re+A]=y+k[H+A]&255,y=Z[re+A]}function Ps(y,A,k,H,Z,re,ae){var oe;if(y==null)as(null,null,k,H,Z,re,ae);else for(oe=0;oe<ae;++oe)Z[re+oe]=y[A+oe]+k[H+oe]&255}function Vi(y,A,k,H,Z,re,ae){if(y==null)as(null,null,k,H,Z,re,ae);else{var oe,ce=y[A+0],he=ce,_e=ce;for(oe=0;oe<ae;++oe)he=_e+(ce=y[A+oe])-he,_e=k[H+oe]+(-256&he?0>he?0:255:he)&255,he=ce,Z[re+oe]=_e}}function _l(y,A,k,H){var Z=A.width,re=A.o;if(e(y!=null&&A!=null),0>k||0>=H||k+H>re)return null;if(!y.Cc){if(y.ga==null){var ae;if(y.ga=new Lo,(ae=y.ga==null)||(ae=A.width*A.o,e(y.Gb.length==0),y.Gb=a(ae),y.Uc=0,y.Gb==null?ae=0:(y.mb=y.Gb,y.nb=y.Uc,y.rc=null,ae=1),ae=!ae),!ae){ae=y.ga;var oe=y.Fa,ce=y.P,he=y.qc,_e=y.mb,Pe=y.nb,Oe=ce+1,Re=he-1,Ke=ae.l;if(e(oe!=null&&_e!=null&&A!=null),fs[0]=null,fs[1]=as,fs[2]=Ps,fs[3]=Vi,ae.ca=_e,ae.tb=Pe,ae.c=A.width,ae.i=A.height,e(0<ae.c&&0<ae.i),1>=he)A=0;else if(ae.$a=oe[ce+0]>>0&3,ae.Z=oe[ce+0]>>2&3,ae.Lc=oe[ce+0]>>4&3,ce=oe[ce+0]>>6&3,0>ae.$a||1<ae.$a||4<=ae.Z||1<ae.Lc||ce)A=0;else if(Ke.put=dr,Ke.ac=kn,Ke.bc=ja,Ke.ma=ae,Ke.width=A.width,Ke.height=A.height,Ke.Da=A.Da,Ke.v=A.v,Ke.va=A.va,Ke.j=A.j,Ke.o=A.o,ae.$a)e:{e(ae.$a==1),A=sr();t:for(;;){if(A==null){A=0;break e}if(e(ae!=null),ae.mc=A,A.c=ae.c,A.i=ae.i,A.l=ae.l,A.l.ma=ae,A.l.width=ae.c,A.l.height=ae.i,A.a=0,te(A.m,oe,Oe,Re),!Mn(ae.c,ae.i,1,A,null)||(A.ab==1&&A.gc[0].hc==3&&Zi(A.s)?(ae.ic=1,oe=A.c*A.i,A.Ta=null,A.Ua=0,A.V=a(oe),A.Ba=0,A.V==null?(A.a=1,A=0):A=1):(ae.ic=0,A=Eo(A,ae.c)),!A))break t;A=1;break e}ae.mc=null,A=0}else A=Re>=ae.c*ae.i;ae=!A}if(ae)return null;y.ga.Lc!=1?y.Ga=0:H=re-k}e(y.ga!=null),e(k+H<=re);e:{if(A=(oe=y.ga).c,re=oe.l.o,oe.$a==0){if(Oe=y.rc,Re=y.Vc,Ke=y.Fa,ce=y.P+1+k*A,he=y.mb,_e=y.nb+k*A,e(ce<=y.P+y.qc),oe.Z!=0)for(e(fs[oe.Z]!=null),ae=0;ae<H;++ae)fs[oe.Z](Oe,Re,Ke,ce,he,_e,A),Oe=he,Re=_e,_e+=A,ce+=A;else for(ae=0;ae<H;++ae)r(he,_e,Ke,ce,A),Oe=he,Re=_e,_e+=A,ce+=A;y.rc=Oe,y.Vc=Re}else{if(e(oe.mc!=null),A=k+H,e((ae=oe.mc)!=null),e(A<=ae.i),ae.C>=A)A=1;else if(oe.ic||Ie(),oe.ic){oe=ae.V,Oe=ae.Ba,Re=ae.c;var Ue=ae.i,we=(Ke=1,ce=ae.$/Re,he=ae.$%Re,_e=ae.m,Pe=ae.s,ae.$),Se=Re*Ue,qe=Re*A,Qe=Pe.wc,$e=we<qe?Ir(Pe,he,ce):null;e(we<=Se),e(A<=Ue),e(Zi(Pe));t:for(;;){for(;!_e.h&&we<qe;){if(he&Qe||($e=Ir(Pe,he,ce)),e($e!=null),de(_e),256>(Ue=pr($e.G[0],$e.H[0],_e)))oe[Oe+we]=Ue,++we,++he>=Re&&(he=0,++ce<=A&&!(ce%16)&&ei(ae,ce));else{if(!(280>Ue)){Ke=0;break t}Ue=Hn(Ue-256,_e);var yt,ft=pr($e.G[4],$e.H[4],_e);if(de(_e),!(we>=(ft=Gn(Re,ft=Hn(ft,_e)))&&Se-we>=Ue)){Ke=0;break t}for(yt=0;yt<Ue;++yt)oe[Oe+we+yt]=oe[Oe+we+yt-ft];for(we+=Ue,he+=Ue;he>=Re;)he-=Re,++ce<=A&&!(ce%16)&&ei(ae,ce);we<qe&&he&Qe&&($e=Ir(Pe,he,ce))}e(_e.h==ee(_e))}ei(ae,ce>A?A:ce);break t}!Ke||_e.h&&we<Se?(Ke=0,ae.a=_e.h?5:3):ae.$=we,A=Ke}else A=Gr(ae,ae.V,ae.Ba,ae.c,ae.i,A,So);if(!A){H=0;break e}}k+H>=re&&(y.Cc=1),H=1}if(!H)return null;if(y.Cc&&((H=y.ga)!=null&&(H.mc=null),y.ga=null,0<y.Ga))return alert("todo:WebPDequantizeLevels"),null}return y.nb+k*Z}function N(y,A,k,H,Z,re){for(;0<Z--;){var ae,oe=y,ce=A+(k?1:0),he=y,_e=A+(k?0:3);for(ae=0;ae<H;++ae){var Pe=he[_e+4*ae];Pe!=255&&(Pe*=32897,oe[ce+4*ae+0]=oe[ce+4*ae+0]*Pe>>23,oe[ce+4*ae+1]=oe[ce+4*ae+1]*Pe>>23,oe[ce+4*ae+2]=oe[ce+4*ae+2]*Pe>>23)}A+=re}}function J(y,A,k,H,Z){for(;0<H--;){var re;for(re=0;re<k;++re){var ae=y[A+2*re+0],oe=15&(he=y[A+2*re+1]),ce=4369*oe,he=(240&he|he>>4)*ce>>16;y[A+2*re+0]=(240&ae|ae>>4)*ce>>16&240|(15&ae|ae<<4)*ce>>16>>4&15,y[A+2*re+1]=240&he|oe}A+=Z}}function pe(y,A,k,H,Z,re,ae,oe){var ce,he,_e=255;for(he=0;he<Z;++he){for(ce=0;ce<H;++ce){var Pe=y[A+ce];re[ae+4*ce]=Pe,_e&=Pe}A+=k,ae+=oe}return _e!=255}function xe(y,A,k,H,Z){var re;for(re=0;re<Z;++re)k[H+re]=y[A+re]>>8}function Ie(){qa=N,ln=J,un=pe,ur=xe}function Ve(y,A,k){E[y]=function(H,Z,re,ae,oe,ce,he,_e,Pe,Oe,Re,Ke,Ue,we,Se,qe,Qe){var $e,yt=Qe-1>>1,ft=oe[ce+0]|he[_e+0]<<16,Dt=Pe[Oe+0]|Re[Ke+0]<<16;e(H!=null);var dt=3*ft+Dt+131074>>2;for(A(H[Z+0],255&dt,dt>>16,Ue,we),re!=null&&(dt=3*Dt+ft+131074>>2,A(re[ae+0],255&dt,dt>>16,Se,qe)),$e=1;$e<=yt;++$e){var Tn=oe[ce+$e]|he[_e+$e]<<16,jn=Pe[Oe+$e]|Re[Ke+$e]<<16,sn=ft+Tn+Dt+jn+524296,rn=sn+2*(Tn+Dt)>>3;dt=rn+ft>>1,ft=(sn=sn+2*(ft+jn)>>3)+Tn>>1,A(H[Z+2*$e-1],255&dt,dt>>16,Ue,we+(2*$e-1)*k),A(H[Z+2*$e-0],255&ft,ft>>16,Ue,we+(2*$e-0)*k),re!=null&&(dt=sn+Dt>>1,ft=rn+jn>>1,A(re[ae+2*$e-1],255&dt,dt>>16,Se,qe+(2*$e-1)*k),A(re[ae+2*$e+0],255&ft,ft>>16,Se,qe+(2*$e+0)*k)),ft=Tn,Dt=jn}1&Qe||(dt=3*ft+Dt+131074>>2,A(H[Z+Qe-1],255&dt,dt>>16,Ue,we+(Qe-1)*k),re!=null&&(dt=3*Dt+ft+131074>>2,A(re[ae+Qe-1],255&dt,dt>>16,Se,qe+(Qe-1)*k)))}}function tt(){yi[zi]=zs,yi[gc]=hs,yi[us]=Ll,yi[_f]=yh,yi[Au]=xh,yi[Bs]=yc,yi[mh]=_h,yi[wf]=hs,yi[Dl]=yh,yi[Fs]=xh,yi[mc]=yc}function ht(y){return y&-16384?0>y?0:255:y>>M2}function x(y,A){return ht((19077*y>>8)+(26149*A>>8)-14234)}function F(y,A,k){return ht((19077*y>>8)-(6419*A>>8)-(13320*k>>8)+8708)}function W(y,A){return ht((19077*y>>8)+(33050*A>>8)-17685)}function se(y,A,k,H,Z){H[Z+0]=x(y,k),H[Z+1]=F(y,A,k),H[Z+2]=W(y,A)}function Ce(y,A,k,H,Z){H[Z+0]=W(y,A),H[Z+1]=F(y,A,k),H[Z+2]=x(y,k)}function Le(y,A,k,H,Z){var re=F(y,A,k);A=re<<3&224|W(y,A)>>3,H[Z+0]=248&x(y,k)|re>>5,H[Z+1]=A}function nt(y,A,k,H,Z){var re=240&W(y,A)|15;H[Z+0]=240&x(y,k)|F(y,A,k)>>4,H[Z+1]=re}function jt(y,A,k,H,Z){H[Z+0]=255,se(y,A,k,H,Z+1)}function dn(y,A,k,H,Z){Ce(y,A,k,H,Z),H[Z+3]=255}function Kt(y,A,k,H,Z){se(y,A,k,H,Z),H[Z+3]=255}function Fn(y,A){return 0>y?0:y>A?A:y}function Yn(y,A,k){E[y]=function(H,Z,re,ae,oe,ce,he,_e,Pe){for(var Oe=_e+(-2&Pe)*k;_e!=Oe;)A(H[Z+0],re[ae+0],oe[ce+0],he,_e),A(H[Z+1],re[ae+0],oe[ce+0],he,_e+k),Z+=2,++ae,++ce,_e+=2*k;1&Pe&&A(H[Z+0],re[ae+0],oe[ce+0],he,_e)}}function ao(y,A,k){return k==0?y==0?A==0?6:5:A==0?4:0:k}function kr(y,A,k,H,Z){switch(y>>>30){case 3:Mo(A,k,H,Z,0);break;case 2:Rr(A,k,H,Z);break;case 1:Xr(A,k,H,Z)}}function xa(y,A){var k,H,Z=A.M,re=A.Nb,ae=y.oc,oe=y.pc+40,ce=y.oc,he=y.pc+584,_e=y.oc,Pe=y.pc+600;for(k=0;16>k;++k)ae[oe+32*k-1]=129;for(k=0;8>k;++k)ce[he+32*k-1]=129,_e[Pe+32*k-1]=129;for(0<Z?ae[oe-1-32]=ce[he-1-32]=_e[Pe-1-32]=129:(i(ae,oe-32-1,127,21),i(ce,he-32-1,127,9),i(_e,Pe-32-1,127,9)),H=0;H<y.za;++H){var Oe=A.ya[A.aa+H];if(0<H){for(k=-1;16>k;++k)r(ae,oe+32*k-4,ae,oe+32*k+12,4);for(k=-1;8>k;++k)r(ce,he+32*k-4,ce,he+32*k+4,4),r(_e,Pe+32*k-4,_e,Pe+32*k+4,4)}var Re=y.Gd,Ke=y.Hd+H,Ue=Oe.ad,we=Oe.Hc;if(0<Z&&(r(ae,oe-32,Re[Ke].y,0,16),r(ce,he-32,Re[Ke].f,0,8),r(_e,Pe-32,Re[Ke].ea,0,8)),Oe.Za){var Se=ae,qe=oe-32+16;for(0<Z&&(H>=y.za-1?i(Se,qe,Re[Ke].y[15],4):r(Se,qe,Re[Ke+1].y,0,4)),k=0;4>k;k++)Se[qe+128+k]=Se[qe+256+k]=Se[qe+384+k]=Se[qe+0+k];for(k=0;16>k;++k,we<<=2)Se=ae,qe=oe+Tu[k],ta[Oe.Ob[k]](Se,qe),kr(we,Ue,16*+k,Se,qe)}else if(Se=ao(H,Z,Oe.Ob[0]),Vs[Se](ae,oe),we!=0)for(k=0;16>k;++k,we<<=2)kr(we,Ue,16*+k,ae,oe+Tu[k]);for(k=Oe.Gc,Se=ao(H,Z,Oe.Dd),Ga[Se](ce,he),Ga[Se](_e,Pe),we=Ue,Se=ce,qe=he,255&(Oe=k>>0)&&(170&Oe?Bo(we,256,Se,qe):ba(we,256,Se,qe)),Oe=_e,we=Pe,255&(k>>=8)&&(170&k?Bo(Ue,320,Oe,we):ba(Ue,320,Oe,we)),Z<y.Ub-1&&(r(Re[Ke].y,0,ae,oe+480,16),r(Re[Ke].f,0,ce,he+224,8),r(Re[Ke].ea,0,_e,Pe+224,8)),k=8*re*y.B,Re=y.sa,Ke=y.ta+16*H+16*re*y.R,Ue=y.qa,Oe=y.ra+8*H+k,we=y.Ha,Se=y.Ia+8*H+k,k=0;16>k;++k)r(Re,Ke+k*y.R,ae,oe+32*k,16);for(k=0;8>k;++k)r(Ue,Oe+k*y.B,ce,he+32*k,8),r(we,Se+k*y.B,_e,Pe+32*k,8)}}function os(y,A,k,H,Z,re,ae,oe,ce){var he=[0],_e=[0],Pe=0,Oe=ce!=null?ce.kd:0,Re=ce??new xl;if(y==null||12>k)return 7;Re.data=y,Re.w=A,Re.ha=k,A=[A],k=[k],Re.gb=[Re.gb];e:{var Ke=A,Ue=k,we=Re.gb;if(e(y!=null),e(Ue!=null),e(we!=null),we[0]=0,12<=Ue[0]&&!t(y,Ke[0],"RIFF")){if(t(y,Ke[0]+8,"WEBP")){we=3;break e}var Se=st(y,Ke[0]+4);if(12>Se||4294967286<Se){we=3;break e}if(Oe&&Se>Ue[0]-8){we=7;break e}we[0]=Se,Ke[0]+=12,Ue[0]-=12}we=0}if(we!=0)return we;for(Se=0<Re.gb[0],k=k[0];;){e:{var qe=y;Ue=A,we=k;var Qe=he,$e=_e,yt=Ke=[0];if((dt=Pe=[Pe])[0]=0,8>we[0])we=7;else{if(!t(qe,Ue[0],"VP8X")){if(st(qe,Ue[0]+4)!=10){we=3;break e}if(18>we[0]){we=7;break e}var ft=st(qe,Ue[0]+8),Dt=1+rt(qe,Ue[0]+12);if(2147483648<=Dt*(qe=1+rt(qe,Ue[0]+15))){we=3;break e}yt!=null&&(yt[0]=ft),Qe!=null&&(Qe[0]=Dt),$e!=null&&($e[0]=qe),Ue[0]+=18,we[0]-=18,dt[0]=1}we=0}}if(Pe=Pe[0],Ke=Ke[0],we!=0)return we;if(Ue=!!(2&Ke),!Se&&Pe)return 3;if(re!=null&&(re[0]=!!(16&Ke)),ae!=null&&(ae[0]=Ue),oe!=null&&(oe[0]=0),ae=he[0],Ke=_e[0],Pe&&Ue&&ce==null){we=0;break}if(4>k){we=7;break}if(Se&&Pe||!Se&&!Pe&&!t(y,A[0],"ALPH")){k=[k],Re.na=[Re.na],Re.P=[Re.P],Re.Sa=[Re.Sa];e:{ft=y,we=A,Se=k;var dt=Re.gb;Qe=Re.na,$e=Re.P,yt=Re.Sa,Dt=22,e(ft!=null),e(Se!=null),qe=we[0];var Tn=Se[0];for(e(Qe!=null),e(yt!=null),Qe[0]=null,$e[0]=null,yt[0]=0;;){if(we[0]=qe,Se[0]=Tn,8>Tn){we=7;break e}var jn=st(ft,qe+4);if(4294967286<jn){we=3;break e}var sn=8+jn+1&-2;if(Dt+=sn,0<dt&&Dt>dt){we=3;break e}if(!t(ft,qe,"VP8 ")||!t(ft,qe,"VP8L")){we=0;break e}if(Tn[0]<sn){we=7;break e}t(ft,qe,"ALPH")||(Qe[0]=ft,$e[0]=qe+8,yt[0]=jn),qe+=sn,Tn-=sn}}if(k=k[0],Re.na=Re.na[0],Re.P=Re.P[0],Re.Sa=Re.Sa[0],we!=0)break}k=[k],Re.Ja=[Re.Ja],Re.xa=[Re.xa];e:if(dt=y,we=A,Se=k,Qe=Re.gb[0],$e=Re.Ja,yt=Re.xa,ft=we[0],qe=!t(dt,ft,"VP8 "),Dt=!t(dt,ft,"VP8L"),e(dt!=null),e(Se!=null),e($e!=null),e(yt!=null),8>Se[0])we=7;else{if(qe||Dt){if(dt=st(dt,ft+4),12<=Qe&&dt>Qe-12){we=3;break e}if(Oe&&dt>Se[0]-8){we=7;break e}$e[0]=dt,we[0]+=8,Se[0]-=8,yt[0]=Dt}else yt[0]=5<=Se[0]&&dt[ft+0]==47&&!(dt[ft+4]>>5),$e[0]=Se[0];we=0}if(k=k[0],Re.Ja=Re.Ja[0],Re.xa=Re.xa[0],A=A[0],we!=0)break;if(4294967286<Re.Ja)return 3;if(oe==null||Ue||(oe[0]=Re.xa?2:1),ae=[ae],Ke=[Ke],Re.xa){if(5>k){we=7;break}oe=ae,Oe=Ke,Ue=re,y==null||5>k?y=0:5<=k&&y[A+0]==47&&!(y[A+4]>>5)?(Se=[0],dt=[0],Qe=[0],te($e=new G,y,A,k),vt($e,Se,dt,Qe)?(oe!=null&&(oe[0]=Se[0]),Oe!=null&&(Oe[0]=dt[0]),Ue!=null&&(Ue[0]=Qe[0]),y=1):y=0):y=0}else{if(10>k){we=7;break}oe=Ke,y==null||10>k||!gi(y,A+3,k-3)?y=0:(Oe=y[A+0]|y[A+1]<<8|y[A+2]<<16,Ue=16383&(y[A+7]<<8|y[A+6]),y=16383&(y[A+9]<<8|y[A+8]),1&Oe||3<(Oe>>1&7)||!(Oe>>4&1)||Oe>>5>=Re.Ja||!Ue||!y?y=0:(ae&&(ae[0]=Ue),oe&&(oe[0]=y),y=1))}if(!y||(ae=ae[0],Ke=Ke[0],Pe&&(he[0]!=ae||_e[0]!=Ke)))return 3;ce!=null&&(ce[0]=Re,ce.offset=A-ce.w,e(4294967286>A-ce.w),e(ce.offset==ce.ha-k));break}return we==0||we==7&&Pe&&ce==null?(re!=null&&(re[0]|=Re.na!=null&&0<Re.na.length),H!=null&&(H[0]=ae),Z!=null&&(Z[0]=Ke),0):we}function wl(y,A,k){var H=A.width,Z=A.height,re=0,ae=0,oe=H,ce=Z;if(A.Da=y!=null&&0<y.Da,A.Da&&(oe=y.cd,ce=y.bd,re=y.v,ae=y.j,11>k||(re&=-2,ae&=-2),0>re||0>ae||0>=oe||0>=ce||re+oe>H||ae+ce>Z))return 0;if(A.v=re,A.j=ae,A.va=re+oe,A.o=ae+ce,A.U=oe,A.T=ce,A.da=y!=null&&0<y.da,A.da){if(!gt(oe,ce,k=[y.ib],re=[y.hb]))return 0;A.ib=k[0],A.hb=re[0]}return A.ob=y!=null&&y.ob,A.Kb=y==null||!y.Sd,A.da&&(A.ob=A.ib<3*H/4&&A.hb<3*Z/4,A.Kb=0),1}function fc(y){if(y==null)return 2;if(11>y.S){var A=y.f.RGBA;A.fb+=(y.height-1)*A.A,A.A=-A.A}else A=y.f.kb,y=y.height,A.O+=(y-1)*A.fa,A.fa=-A.fa,A.N+=(y-1>>1)*A.Ab,A.Ab=-A.Ab,A.W+=(y-1>>1)*A.Db,A.Db=-A.Db,A.F!=null&&(A.J+=(y-1)*A.lb,A.lb=-A.lb);return 0}function mu(y,A,k,H){if(H==null||0>=y||0>=A)return 2;if(k!=null){if(k.Da){var Z=k.cd,re=k.bd,ae=-2&k.v,oe=-2&k.j;if(0>ae||0>oe||0>=Z||0>=re||ae+Z>y||oe+re>A)return 2;y=Z,A=re}if(k.da){if(!gt(y,A,Z=[k.ib],re=[k.hb]))return 2;y=Z[0],A=re[0]}}H.width=y,H.height=A;e:{var ce=H.width,he=H.height;if(y=H.S,0>=ce||0>=he||!(y>=zi&&13>y))y=2;else{if(0>=H.Rd&&H.sd==null){ae=re=Z=A=0;var _e=(oe=ce*O0[y])*he;if(11>y||(re=(he+1)/2*(A=(ce+1)/2),y==12&&(ae=(Z=ce)*he)),(he=a(_e+2*re+ae))==null){y=1;break e}H.sd=he,11>y?((ce=H.f.RGBA).eb=he,ce.fb=0,ce.A=oe,ce.size=_e):((ce=H.f.kb).y=he,ce.O=0,ce.fa=oe,ce.Fd=_e,ce.f=he,ce.N=0+_e,ce.Ab=A,ce.Cd=re,ce.ea=he,ce.W=0+_e+re,ce.Db=A,ce.Ed=re,y==12&&(ce.F=he,ce.J=0+_e+2*re),ce.Tc=ae,ce.lb=Z)}if(A=1,Z=H.S,re=H.width,ae=H.height,Z>=zi&&13>Z)if(11>Z)y=H.f.RGBA,A&=(oe=Math.abs(y.A))*(ae-1)+re<=y.size,A&=oe>=re*O0[Z],A&=y.eb!=null;else{y=H.f.kb,oe=(re+1)/2,_e=(ae+1)/2,ce=Math.abs(y.fa),he=Math.abs(y.Ab);var Pe=Math.abs(y.Db),Oe=Math.abs(y.lb),Re=Oe*(ae-1)+re;A&=ce*(ae-1)+re<=y.Fd,A&=he*(_e-1)+oe<=y.Cd,A=(A&=Pe*(_e-1)+oe<=y.Ed)&ce>=re&he>=oe&Pe>=oe,A&=y.y!=null,A&=y.f!=null,A&=y.ea!=null,Z==12&&(A&=Oe>=re,A&=Re<=y.Tc,A&=y.F!=null)}else A=0;y=A?0:2}}return y!=0||k!=null&&k.fd&&(y=fc(H)),y}var ri=64,bl=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],vu=24,yu=32,hc=8,_a=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];it("Predictor0","PredictorAdd0"),E.Predictor0=function(){return 4278190080},E.Predictor1=function(y){return y},E.Predictor2=function(y,A,k){return A[k+0]},E.Predictor3=function(y,A,k){return A[k+1]},E.Predictor4=function(y,A,k){return A[k-1]},E.Predictor5=function(y,A,k){return ot(ot(y,A[k+1]),A[k+0])},E.Predictor6=function(y,A,k){return ot(y,A[k-1])},E.Predictor7=function(y,A,k){return ot(y,A[k+0])},E.Predictor8=function(y,A,k){return ot(A[k-1],A[k+0])},E.Predictor9=function(y,A,k){return ot(A[k+0],A[k+1])},E.Predictor10=function(y,A,k){return ot(ot(y,A[k-1]),ot(A[k+0],A[k+1]))},E.Predictor11=function(y,A,k){var H=A[k+0];return 0>=Rt(H>>24&255,y>>24&255,(A=A[k-1])>>24&255)+Rt(H>>16&255,y>>16&255,A>>16&255)+Rt(H>>8&255,y>>8&255,A>>8&255)+Rt(255&H,255&y,255&A)?H:y},E.Predictor12=function(y,A,k){var H=A[k+0];return(ct((y>>24&255)+(H>>24&255)-((A=A[k-1])>>24&255))<<24|ct((y>>16&255)+(H>>16&255)-(A>>16&255))<<16|ct((y>>8&255)+(H>>8&255)-(A>>8&255))<<8|ct((255&y)+(255&H)-(255&A)))>>>0},E.Predictor13=function(y,A,k){var H=A[k-1];return(mt((y=ot(y,A[k+0]))>>24&255,H>>24&255)<<24|mt(y>>16&255,H>>16&255)<<16|mt(y>>8&255,H>>8&255)<<8|mt(y>>0&255,H>>0&255))>>>0};var Dd=E.PredictorAdd0;E.PredictorAdd1=_t,it("Predictor2","PredictorAdd2"),it("Predictor3","PredictorAdd3"),it("Predictor4","PredictorAdd4"),it("Predictor5","PredictorAdd5"),it("Predictor6","PredictorAdd6"),it("Predictor7","PredictorAdd7"),it("Predictor8","PredictorAdd8"),it("Predictor9","PredictorAdd9"),it("Predictor10","PredictorAdd10"),it("Predictor11","PredictorAdd11"),it("Predictor12","PredictorAdd12"),it("Predictor13","PredictorAdd13");var yf=E.PredictorAdd2;Ot("ColorIndexInverseTransform","MapARGB","32b",function(y){return y>>8&255},function(y){return y}),Ot("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(y){return y},function(y){return y>>8&255});var ph,oo=E.ColorIndexInverseTransform,mi=E.MapARGB,Al=E.VP8LColorIndexInverseTransformAlpha,xf=E.MapAlpha,Ls=E.VP8LPredictorsAdd=[];Ls.length=16,(E.VP8LPredictors=[]).length=16,(E.VP8LPredictorsAdd_C=[]).length=16,(E.VP8LPredictors_C=[]).length=16;var El,ea,Ii,Sl,wa,ko,ss,Mo,Rr,Bo,Xr,ba,xu,ls,dc,Cl,Tl,Il,_u,pc,Rl,ks,wu,Nr,qa,ln,un,ur,Mr=a(511),so=a(2041),Nl=a(225),Ol=a(767),Ms=0,gh=so,bu=Nl,vi=Ol,lo=Mr,zi=0,gc=1,us=2,_f=3,Au=4,Bs=5,mh=6,wf=7,Dl=8,Fs=9,mc=10,vh=[2,3,7],uo=[3,3,11],Ha=[280,256,256,256,40],Eu=[0,1,1,1,0],js=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Us=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Su=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],C0=8,bf=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Af=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],ii=null,Or=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],Dn=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],Pl=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],cs=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],Pd=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],Cu=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],T0=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Vs=[],ta=[],Ga=[],I0=1,vc=2,fs=[],yi=[];Ve("UpsampleRgbLinePair",se,3),Ve("UpsampleBgrLinePair",Ce,3),Ve("UpsampleRgbaLinePair",Kt,4),Ve("UpsampleBgraLinePair",dn,4),Ve("UpsampleArgbLinePair",jt,4),Ve("UpsampleRgba4444LinePair",nt,2),Ve("UpsampleRgb565LinePair",Le,2);var zs=E.UpsampleRgbLinePair,Ll=E.UpsampleBgrLinePair,hs=E.UpsampleRgbaLinePair,yh=E.UpsampleBgraLinePair,xh=E.UpsampleArgbLinePair,yc=E.UpsampleRgba4444LinePair,_h=E.UpsampleRgb565LinePair,ds=16,ai=1<<ds-1,kl=-227,wh=482,M2=6,R0=0,B2=a(256),oi=a(256),Ld=a(256),Ef=a(256),Sf=a(wh-kl),kd=a(wh-kl);Yn("YuvToRgbRow",se,3),Yn("YuvToBgrRow",Ce,3),Yn("YuvToRgbaRow",Kt,4),Yn("YuvToBgraRow",dn,4),Yn("YuvToArgbRow",jt,4),Yn("YuvToRgba4444Row",nt,2),Yn("YuvToRgb565Row",Le,2);var Tu=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],qs=[0,2,8],F2=[8,7,6,4,4,2,2,2,1,1,1,1],N0=1;this.WebPDecodeRGBA=function(y,A,k,H,Z){var re=gc,ae=new Os,oe=new Lr;ae.ba=oe,oe.S=re,oe.width=[oe.width],oe.height=[oe.height];var ce=oe.width,he=oe.height,_e=new or;if(_e==null||y==null)var Pe=2;else e(_e!=null),Pe=os(y,A,k,_e.width,_e.height,_e.Pd,_e.Qd,_e.format,null);if(Pe!=0?ce=0:(ce!=null&&(ce[0]=_e.width[0]),he!=null&&(he[0]=_e.height[0]),ce=1),ce){oe.width=oe.width[0],oe.height=oe.height[0],H!=null&&(H[0]=oe.width),Z!=null&&(Z[0]=oe.height);e:{if(H=new To,(Z=new xl).data=y,Z.w=A,Z.ha=k,Z.kd=1,A=[0],e(Z!=null),((y=os(Z.data,Z.w,Z.ha,null,null,null,A,null,Z))==0||y==7)&&A[0]&&(y=4),(A=y)==0){if(e(ae!=null),H.data=Z.data,H.w=Z.w+Z.offset,H.ha=Z.ha-Z.offset,H.put=dr,H.ac=kn,H.bc=ja,H.ma=ae,Z.xa){if((y=sr())==null){ae=1;break e}if(function(Oe,Re){var Ke=[0],Ue=[0],we=[0];t:for(;;){if(Oe==null)return 0;if(Re==null)return Oe.a=2,0;if(Oe.l=Re,Oe.a=0,te(Oe.m,Re.data,Re.w,Re.ha),!vt(Oe.m,Ke,Ue,we)){Oe.a=3;break t}if(Oe.xb=vc,Re.width=Ke[0],Re.height=Ue[0],!Mn(Ke[0],Ue[0],1,Oe,null))break t;return 1}return e(Oe.a!=0),0}(y,H)){if(H=(A=mu(H.width,H.height,ae.Oa,ae.ba))==0){t:{H=y;n:for(;;){if(H==null){H=0;break t}if(e(H.s.yc!=null),e(H.s.Ya!=null),e(0<H.s.Wb),e((k=H.l)!=null),e((Z=k.ma)!=null),H.xb!=0){if(H.ca=Z.ba,H.tb=Z.tb,e(H.ca!=null),!wl(Z.Oa,k,_f)){H.a=2;break n}if(!Eo(H,k.width)||k.da)break n;if((k.da||on(H.ca.S))&&Ie(),11>H.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),H.ca.f.kb.F!=null&&Ie()),H.Pb&&0<H.s.ua&&H.s.vb.X==null&&!wt(H.s.vb,H.s.Wa.Xa)){H.a=1;break n}H.xb=0}if(!Gr(H,H.V,H.Ba,H.c,H.i,k.o,Es))break n;Z.Dc=H.Ma,H=1;break t}e(H.a!=0),H=0}H=!H}H&&(A=y.a)}else A=y.a}else{if((y=new uu)==null){ae=1;break e}if(y.Fa=Z.na,y.P=Z.P,y.qc=Z.Sa,pl(y,H)){if((A=mu(H.width,H.height,ae.Oa,ae.ba))==0){if(y.Aa=0,k=ae.Oa,e((Z=y)!=null),k!=null){if(0<(ce=0>(ce=k.Md)?0:100<ce?255:255*ce/100)){for(he=_e=0;4>he;++he)12>(Pe=Z.pb[he]).lc&&(Pe.ia=ce*F2[0>Pe.lc?0:Pe.lc]>>3),_e|=Pe.ia;_e&&(alert("todo:VP8InitRandom"),Z.ia=1)}Z.Ga=k.Id,100<Z.Ga?Z.Ga=100:0>Z.Ga&&(Z.Ga=0)}cu(y,H)||(A=y.a)}}else A=y.a}A==0&&ae.Oa!=null&&ae.Oa.fd&&(A=fc(ae.ba))}ae=A}re=ae!=0?null:11>re?oe.f.RGBA.eb:oe.f.kb.y}else re=null;return re};var O0=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function f(E,C){for(var M="",R=0;R<4;R++)M+=String.fromCharCode(E[C++]);return M}function h(E,C){return(E[C+0]<<0|E[C+1]<<8|E[C+2]<<16)>>>0}function p(E,C){return(E[C+0]<<0|E[C+1]<<8|E[C+2]<<16|E[C+3]<<24)>>>0}new u;var g=[0],m=[0],_=[],b=new u,T=n,S=function(E,C){var M={},R=0,L=!1,j=0,$=0;if(M.frames=[],!function(Q,ee,ie,de){for(var Ee=0;Ee<de;Ee++)if(Q[ee+Ee]!=ie.charCodeAt(Ee))return!0;return!1}(E,C,"RIFF",4)){for(p(E,C+=4),C+=8;C<E.length;){var ne=f(E,C),U=p(E,C+=4);C+=4;var z=U+(1&U);switch(ne){case"VP8 ":case"VP8L":M.frames[R]===void 0&&(M.frames[R]={}),(X=M.frames[R]).src_off=L?$:C-8,X.src_size=j+U+8,R++,L&&(L=!1,j=0,$=0);break;case"VP8X":(X=M.header={}).feature_flags=E[C];var te=C+4;X.canvas_width=1+h(E,te),te+=3,X.canvas_height=1+h(E,te),te+=3;break;case"ALPH":L=!0,j=z+8,$=C-8;break;case"ANIM":(X=M.header).bgcolor=p(E,C),te=C+4,X.loop_count=(me=E)[(G=te)+0]<<0|me[G+1]<<8,te+=2;break;case"ANMF":var ue,X;(X=M.frames[R]={}).offset_x=2*h(E,C),C+=3,X.offset_y=2*h(E,C),C+=3,X.width=1+h(E,C),C+=3,X.height=1+h(E,C),C+=3,X.duration=h(E,C),C+=3,ue=E[C++],X.dispose=1&ue,X.blend=ue>>1&1}ne!="ANMF"&&(C+=z)}var me,G;return M}}(T,0);S.response=T,S.rgbaoutput=!0,S.dataurl=!1;var D=S.header?S.header:null,B=S.frames?S.frames:null;if(D){D.loop_counter=D.loop_count,g=[D.canvas_height],m=[D.canvas_width];for(var V=0;V<B.length&&B[V].blend!=0;V++);}var Y=B[0],q=b.WebPDecodeRGBA(T,Y.src_off,Y.src_size,m,g);Y.rgba=q,Y.imgwidth=m[0],Y.imgheight=g[0];for(var P=0;P<m[0]*g[0]*4;P++)_[P]=q[P];return this.width=m,this.height=g,this.data=_,this}(function(n){var e=function(){return typeof My=="function"},t=function(g,m,_,b){var T=4,S=o;switch(b){case n.image_compression.FAST:T=1,S=a;break;case n.image_compression.MEDIUM:T=6,S=s;break;case n.image_compression.SLOW:T=9,S=u}g=r(g,m,_,S);var D=My(g,{level:T});return n.__addimage__.arrayBufferToBinaryString(D)},r=function(g,m,_,b){for(var T,S,D,B=g.length/m,V=new Uint8Array(g.length+B),Y=h(),q=0;q<B;q+=1){if(D=q*m,T=g.subarray(D,D+m),b)V.set(b(T,_,S),D+q);else{for(var P,E=Y.length,C=[];P<E;P+=1)C[P]=Y[P](T,_,S);var M=p(C.concat());V.set(C[M],D+q)}S=T}return V},i=function(g){var m=Array.apply([],g);return m.unshift(0),m},a=function(g,m){var _,b=[],T=g.length;b[0]=1;for(var S=0;S<T;S+=1)_=g[S-m]||0,b[S+1]=g[S]-_+256&255;return b},o=function(g,m,_){var b,T=[],S=g.length;T[0]=2;for(var D=0;D<S;D+=1)b=_&&_[D]||0,T[D+1]=g[D]-b+256&255;return T},s=function(g,m,_){var b,T,S=[],D=g.length;S[0]=3;for(var B=0;B<D;B+=1)b=g[B-m]||0,T=_&&_[B]||0,S[B+1]=g[B]+256-(b+T>>>1)&255;return S},u=function(g,m,_){var b,T,S,D,B=[],V=g.length;B[0]=4;for(var Y=0;Y<V;Y+=1)b=g[Y-m]||0,T=_&&_[Y]||0,S=_&&_[Y-m]||0,D=f(b,T,S),B[Y+1]=g[Y]-D+256&255;return B},f=function(g,m,_){if(g===m&&m===_)return g;var b=Math.abs(m-_),T=Math.abs(g-_),S=Math.abs(g+m-_-_);return b<=T&&b<=S?g:T<=S?m:_},h=function(){return[i,a,o,s,u]},p=function(g){var m=g.map(function(_){return _.reduce(function(b,T){return b+Math.abs(T)},0)});return m.indexOf(Math.min.apply(null,m))};n.processPNG=function(g,m,_,b){var T,S,D,B,V,Y,q,P,E,C,M,R,L,j,$,ne=this.decode.FLATE_DECODE,U="";if(this.__addimage__.isArrayBuffer(g)&&(g=new Uint8Array(g)),this.__addimage__.isArrayBufferView(g)){if(g=(D=new Sz(g)).imgData,S=D.bits,T=D.colorSpace,V=D.colors,[4,6].indexOf(D.colorType)!==-1){if(D.bits===8){E=(P=D.pixelBitlength==32?new Uint32Array(D.decodePixels().buffer):D.pixelBitlength==16?new Uint16Array(D.decodePixels().buffer):new Uint8Array(D.decodePixels().buffer)).length,M=new Uint8Array(E*D.colors),C=new Uint8Array(E);var z,te=D.pixelBitlength-D.bits;for(j=0,$=0;j<E;j++){for(L=P[j],z=0;z<te;)M[$++]=L>>>z&255,z+=D.bits;C[j]=L>>>z&255}}if(D.bits===16){E=(P=new Uint32Array(D.decodePixels().buffer)).length,M=new Uint8Array(E*(32/D.pixelBitlength)*D.colors),C=new Uint8Array(E*(32/D.pixelBitlength)),R=D.colors>1,j=0,$=0;for(var ue=0;j<E;)L=P[j++],M[$++]=L>>>0&255,R&&(M[$++]=L>>>16&255,L=P[j++],M[$++]=L>>>0&255),C[ue++]=L>>>16&255;S=8}b!==n.image_compression.NONE&&e()?(g=t(M,D.width*D.colors,D.colors,b),q=t(C,D.width,1,b)):(g=M,q=C,ne=void 0)}if(D.colorType===3&&(T=this.color_spaces.INDEXED,Y=D.palette,D.transparency.indexed)){var X=D.transparency.indexed,me=0;for(j=0,E=X.length;j<E;++j)me+=X[j];if((me/=255)===E-1&&X.indexOf(0)!==-1)B=[X.indexOf(0)];else if(me!==E){for(P=D.decodePixels(),C=new Uint8Array(P.length),j=0,E=P.length;j<E;j++)C[j]=X[P[j]];q=t(C,D.width,1)}}var G=function(Q){var ee;switch(Q){case n.image_compression.FAST:ee=11;break;case n.image_compression.MEDIUM:ee=13;break;case n.image_compression.SLOW:ee=14;break;default:ee=12}return ee}(b);return ne===this.decode.FLATE_DECODE&&(U="/Predictor "+G+" "),U+="/Colors "+V+" /BitsPerComponent "+S+" /Columns "+D.width,(this.__addimage__.isArrayBuffer(g)||this.__addimage__.isArrayBufferView(g))&&(g=this.__addimage__.arrayBufferToBinaryString(g)),(q&&this.__addimage__.isArrayBuffer(q)||this.__addimage__.isArrayBufferView(q))&&(q=this.__addimage__.arrayBufferToBinaryString(q)),{alias:_,data:g,index:m,filter:ne,decodeParameters:U,transparency:B,palette:Y,sMask:q,predictor:G,width:D.width,height:D.height,bitsPerComponent:S,colorSpace:T}}}})(qt.API),function(n){n.processGIF89A=function(e,t,r,i){var a=new Cz(e),o=a.width,s=a.height,u=[];a.decodeAndBlitFrameRGBA(0,u);var f={data:u,width:o,height:s},h=new Ov(100).encode(f,100);return n.processJPEG.call(this,h,t,r,i)},n.processGIF87A=n.processGIF89A}(qt.API),Zs.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var n=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(n);for(var e=0;e<n;e++){var t=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:i,green:r,blue:t,quad:a}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Zs.prototype.parseBGR=function(){this.pos=this.offset;try{var n="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[n]()}catch(t){mr.log("bit decode error:"+t)}},Zs.prototype.bit1=function(){var n,e=Math.ceil(this.width/8),t=e%4;for(n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<e;i++)for(var a=this.datav.getUint8(this.pos++,!0),o=r*this.width*4+8*i*4,s=0;s<8&&8*i+s<this.width;s++){var u=this.palette[a>>7-s&1];this.data[o+4*s]=u.blue,this.data[o+4*s+1]=u.green,this.data[o+4*s+2]=u.red,this.data[o+4*s+3]=255}t!==0&&(this.pos+=4-t)}},Zs.prototype.bit4=function(){for(var n=Math.ceil(this.width/2),e=n%4,t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,i=0;i<n;i++){var a=this.datav.getUint8(this.pos++,!0),o=r*this.width*4+2*i*4,s=a>>4,u=15&a,f=this.palette[s];if(this.data[o]=f.blue,this.data[o+1]=f.green,this.data[o+2]=f.red,this.data[o+3]=255,2*i+1>=this.width)break;f=this.palette[u],this.data[o+4]=f.blue,this.data[o+4+1]=f.green,this.data[o+4+2]=f.red,this.data[o+4+3]=255}e!==0&&(this.pos+=4-e)}},Zs.prototype.bit8=function(){for(var n=this.width%4,e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var i=this.datav.getUint8(this.pos++,!0),a=t*this.width*4+4*r;if(i<this.palette.length){var o=this.palette[i];this.data[a]=o.red,this.data[a+1]=o.green,this.data[a+2]=o.blue,this.data[a+3]=255}else this.data[a]=255,this.data[a+1]=255,this.data[a+2]=255,this.data[a+3]=255}n!==0&&(this.pos+=4-n)}},Zs.prototype.bit15=function(){for(var n=this.width%3,e=parseInt("11111",2),t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,i=0;i<this.width;i++){var a=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(a&e)/e*255|0,s=(a>>5&e)/e*255|0,u=(a>>10&e)/e*255|0,f=a>>15?255:0,h=r*this.width*4+4*i;this.data[h]=u,this.data[h+1]=s,this.data[h+2]=o,this.data[h+3]=f}this.pos+=n}},Zs.prototype.bit16=function(){for(var n=this.width%3,e=parseInt("11111",2),t=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var i=this.bottom_up?r:this.height-1-r,a=0;a<this.width;a++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var s=(o&e)/e*255|0,u=(o>>5&t)/t*255|0,f=(o>>11)/e*255|0,h=i*this.width*4+4*a;this.data[h]=f,this.data[h+1]=u,this.data[h+2]=s,this.data[h+3]=255}this.pos+=n}},Zs.prototype.bit24=function(){for(var n=this.height-1;n>=0;n--){for(var e=this.bottom_up?n:this.height-1-n,t=0;t<this.width;t++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),o=e*this.width*4+4*t;this.data[o]=a,this.data[o+1]=i,this.data[o+2]=r,this.data[o+3]=255}this.pos+=this.width%4}},Zs.prototype.bit32=function(){for(var n=this.height-1;n>=0;n--)for(var e=this.bottom_up?n:this.height-1-n,t=0;t<this.width;t++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),s=e*this.width*4+4*t;this.data[s]=a,this.data[s+1]=i,this.data[s+2]=r,this.data[s+3]=o}},Zs.prototype.getData=function(){return this.data},function(n){n.processBMP=function(e,t,r,i){var a=new Zs(e,!1),o=a.width,s=a.height,u={data:a.getData(),width:o,height:s},f=new Ov(100).encode(u,100);return n.processJPEG.call(this,f,t,r,i)}}(qt.API),N4.prototype.getData=function(){return this.data},function(n){n.processWEBP=function(e,t,r,i){var a=new N4(e),o=a.width,s=a.height,u={data:a.getData(),width:o,height:s},f=new Ov(100).encode(u,100);return n.processJPEG.call(this,f,t,r,i)}}(qt.API),qt.API.processRGBA=function(n,e,t){for(var r=n.data,i=r.length,a=new Uint8Array(i/4*3),o=new Uint8Array(i/4),s=0,u=0,f=0;f<i;f+=4){var h=r[f],p=r[f+1],g=r[f+2],m=r[f+3];a[s++]=h,a[s++]=p,a[s++]=g,o[u++]=m}var _=this.__addimage__.arrayBufferToBinaryString(a);return{alpha:this.__addimage__.arrayBufferToBinaryString(o),data:_,index:e,alias:t,colorSpace:"DeviceRGB",bitsPerComponent:8,width:n.width,height:n.height}},qt.API.setLanguage=function(n){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[n]!==void 0&&(this.internal.languageSettings.languageCode=n,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},$h=qt.API,jp=$h.getCharWidthsArray=function(n,e){var t,r,i=(e=e||{}).font||this.internal.getFont(),a=e.fontSize||this.internal.getFontSize(),o=e.charSpace||this.internal.getCharSpace(),s=e.widths?e.widths:i.metadata.Unicode.widths,u=s.fof?s.fof:1,f=e.kerning?e.kerning:i.metadata.Unicode.kerning,h=f.fof?f.fof:1,p=e.doKerning!==!1,g=0,m=n.length,_=0,b=s[0]||u,T=[];for(t=0;t<m;t++)r=n.charCodeAt(t),typeof i.metadata.widthOfString=="function"?T.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(r))+o*(1e3/a)||0)/1e3):(g=p&&ar(f[r])==="object"&&!isNaN(parseInt(f[r][_],10))?f[r][_]/h:0,T.push((s[r]||b)/u+g)),_=r;return T},C4=$h.getStringUnitWidth=function(n,e){var t=(e=e||{}).fontSize||this.internal.getFontSize(),r=e.font||this.internal.getFont(),i=e.charSpace||this.internal.getCharSpace();return $h.processArabic&&(n=$h.processArabic(n)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(n,t,i)/t:jp.apply(this,arguments).reduce(function(a,o){return a+o},0)},T4=function(n,e,t,r){for(var i=[],a=0,o=n.length,s=0;a!==o&&s+e[a]<t;)s+=e[a],a++;i.push(n.slice(0,a));var u=a;for(s=0;a!==o;)s+e[a]>r&&(i.push(n.slice(u,a)),s=0,u=a),s+=e[a],a++;return u!==a&&i.push(n.slice(u,a)),i},I4=function(n,e,t){t||(t={});var r,i,a,o,s,u,f,h=[],p=[h],g=t.textIndent||0,m=0,_=0,b=n.split(" "),T=jp.apply(this,[" ",t])[0];if(u=t.lineIndent===-1?b[0].length+2:t.lineIndent||0){var S=Array(u).join(" "),D=[];b.map(function(V){(V=V.split(/\s*\n/)).length>1?D=D.concat(V.map(function(Y,q){return(q&&Y.length?`
`:"")+Y})):D.push(V[0])}),b=D,u=C4.apply(this,[S,t])}for(a=0,o=b.length;a<o;a++){var B=0;if(r=b[a],u&&r[0]==`
`&&(r=r.substr(1),B=1),g+m+(_=(i=jp.apply(this,[r,t])).reduce(function(V,Y){return V+Y},0))>e||B){if(_>e){for(s=T4.apply(this,[r,i,e-(g+m),e]),h.push(s.shift()),h=[s.pop()];s.length;)p.push([s.shift()]);_=i.slice(r.length-(h[0]?h[0].length:0)).reduce(function(V,Y){return V+Y},0)}else h=[r];p.push(h),g=_+u,m=T}else h.push(r),g+=m+_,m=T}return f=u?function(V,Y){return(Y?S:"")+V.join(" ")}:function(V){return V.join(" ")},p.map(f)},$h.splitTextToSize=function(n,e,t){var r,i=(t=t||{}).fontSize||this.internal.getFontSize(),a=(function(h){if(h.widths&&h.kerning)return{widths:h.widths,kerning:h.kerning};var p=this.internal.getFont(h.fontName,h.fontStyle);return p.metadata.Unicode?{widths:p.metadata.Unicode.widths||{0:1},kerning:p.metadata.Unicode.kerning||{}}:{font:p.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,t);r=Array.isArray(n)?n:String(n).split(/\r?\n/);var o=1*this.internal.scaleFactor*e/i;a.textIndent=t.textIndent?1*t.textIndent*this.internal.scaleFactor/i:0,a.lineIndent=t.lineIndent;var s,u,f=[];for(s=0,u=r.length;s<u;s++)f=f.concat(I4.apply(this,[r[s],o,a]));return f},function(n){n.__fontmetrics__=n.__fontmetrics__||{};for(var e="klmnopqrstuvwxyz",t={},r={},i=0;i<e.length;i++)t[e[i]]="0123456789abcdef"[i],r["0123456789abcdef"[i]]=e[i];var a=function(p){return"0x"+parseInt(p,10).toString(16)},o=n.__fontmetrics__.compress=function(p){var g,m,_,b,T=["{"];for(var S in p){if(g=p[S],isNaN(parseInt(S,10))?m="'"+S+"'":(S=parseInt(S,10),m=(m=a(S).slice(2)).slice(0,-1)+r[m.slice(-1)]),typeof g=="number")g<0?(_=a(g).slice(3),b="-"):(_=a(g).slice(2),b=""),_=b+_.slice(0,-1)+r[_.slice(-1)];else{if(ar(g)!=="object")throw new Error("Don't know what to do with value type "+ar(g)+".");_=o(g)}T.push(m+_)}return T.push("}"),T.join("")},s=n.__fontmetrics__.uncompress=function(p){if(typeof p!="string")throw new Error("Invalid argument passed to uncompress.");for(var g,m,_,b,T={},S=1,D=T,B=[],V="",Y="",q=p.length-1,P=1;P<q;P+=1)(b=p[P])=="'"?g?(_=g.join(""),g=void 0):g=[]:g?g.push(b):b=="{"?(B.push([D,_]),D={},_=void 0):b=="}"?((m=B.pop())[0][m[1]]=D,_=void 0,D=m[0]):b=="-"?S=-1:_===void 0?t.hasOwnProperty(b)?(V+=t[b],_=parseInt(V,16)*S,S=1,V=""):V+=b:t.hasOwnProperty(b)?(Y+=t[b],D[_]=parseInt(Y,16)*S,S=1,_=void 0,Y=""):Y+=b;return T},u={codePages:["WinAnsiEncoding"],WinAnsiEncoding:s("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},f={Unicode:{Courier:u,"Courier-Bold":u,"Courier-BoldOblique":u,"Courier-Oblique":u,Helvetica:u,"Helvetica-Bold":u,"Helvetica-BoldOblique":u,"Helvetica-Oblique":u,"Times-Roman":u,"Times-Bold":u,"Times-BoldItalic":u,"Times-Italic":u}},h={Unicode:{"Courier-Oblique":s("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":s("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":s("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:s("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":s("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":s("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:s("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:s("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":s("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:s("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":s("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":s("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":s("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":s("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};n.events.push(["addFont",function(p){var g=p.font,m=h.Unicode[g.postScriptName];m&&(g.metadata.Unicode={},g.metadata.Unicode.widths=m.widths,g.metadata.Unicode.kerning=m.kerning);var _=f.Unicode[g.postScriptName];_&&(g.metadata.Unicode.encoding=_,g.encoding=_.codePages[0])}])}(qt.API),function(n){var e=function(t){for(var r=t.length,i=new Uint8Array(r),a=0;a<r;a++)i[a]=t.charCodeAt(a);return i};n.API.events.push(["addFont",function(t){var r=void 0,i=t.font,a=t.instance;if(!i.isStandardFont){if(a===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if(typeof(r=a.existsFileInVFS(i.postScriptName)===!1?a.loadFile(i.postScriptName):a.getFileFromVFS(i.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");(function(o,s){s=/^\x00\x01\x00\x00/.test(s)?e(s):e(H1(s)),o.metadata=n.API.TTFFont.open(s),o.metadata.Unicode=o.metadata.Unicode||{encoding:{},kerning:{},widths:[]},o.metadata.glyIdsUsed=[0]})(i,r)}}])}(qt),function(n){function e(){return(Gt.canvg?Promise.resolve(Gt.canvg):Oy(()=>import("./index.es-CvtJLXcC.js"),[])).catch(function(t){return Promise.reject(new Error("Could not load canvg: "+t))}).then(function(t){return t.default?t.default:t})}qt.API.addSvgAsImage=function(t,r,i,a,o,s,u,f){if(isNaN(r)||isNaN(i))throw mr.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(a)||isNaN(o))throw mr.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var h=document.createElement("canvas");h.width=a,h.height=o;var p=h.getContext("2d");p.fillStyle="#fff",p.fillRect(0,0,h.width,h.height);var g={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},m=this;return e().then(function(_){return _.fromString(p,t,g)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(_){return _.render(g)}).then(function(){m.addImage(h.toDataURL("image/jpeg",1),r,i,a,o,u,f)})}}(),qt.API.putTotalPages=function(n){var e,t=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(n,"g"),t=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(n,this.internal.getFont()),"g"),t=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var i=0;i<this.internal.pages[r].length;i++)this.internal.pages[r][i]=this.internal.pages[r][i].replace(e,t);return this},qt.API.viewerPreferences=function(n,e){var t;n=n||{},e=e||!1;var r,i,a,o={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},s=Object.keys(o),u=[],f=0,h=0,p=0;function g(_,b){var T,S=!1;for(T=0;T<_.length;T+=1)_[T]===b&&(S=!0);return S}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(o)),this.internal.viewerpreferences.isSubscribed=!1),t=this.internal.viewerpreferences.configuration,n==="reset"||e===!0){var m=s.length;for(p=0;p<m;p+=1)t[s[p]].value=t[s[p]].defaultValue,t[s[p]].explicitSet=!1}if(ar(n)==="object"){for(i in n)if(a=n[i],g(s,i)&&a!==void 0){if(t[i].type==="boolean"&&typeof a=="boolean")t[i].value=a;else if(t[i].type==="name"&&g(t[i].valueSet,a))t[i].value=a;else if(t[i].type==="integer"&&Number.isInteger(a))t[i].value=a;else if(t[i].type==="array"){for(f=0;f<a.length;f+=1)if(r=!0,a[f].length===1&&typeof a[f][0]=="number")u.push(String(a[f]-1));else if(a[f].length>1){for(h=0;h<a[f].length;h+=1)typeof a[f][h]!="number"&&(r=!1);r===!0&&u.push([a[f][0]-1,a[f][1]-1].join(" "))}t[i].value="["+u.join(" ")+"]"}else t[i].value=t[i].defaultValue;t[i].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var _,b=[];for(_ in t)t[_].explicitSet===!0&&(t[_].type==="name"?b.push("/"+_+" /"+t[_].value):b.push("/"+_+" "+t[_].value));b.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+b.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=t,this},function(n){var e=function(){var r='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',i=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),a=unescape(encodeURIComponent(r)),o=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),s=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),u=unescape(encodeURIComponent("</x:xmpmeta>")),f=a.length+o.length+s.length+i.length+u.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+f+" >>"),this.internal.write("stream"),this.internal.write(i+a+o+s+u),this.internal.write("endstream"),this.internal.write("endobj")},t=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};n.addMetadata=function(r,i){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:r,namespaceuri:i||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",t),this.internal.events.subscribe("postPutResources",e)),this}}(qt.API),function(n){var e=n.API,t=e.pdfEscape16=function(a,o){for(var s,u=o.metadata.Unicode.widths,f=["","0","00","000","0000"],h=[""],p=0,g=a.length;p<g;++p){if(s=o.metadata.characterToGlyph(a.charCodeAt(p)),o.metadata.glyIdsUsed.push(s),o.metadata.toUnicode[s]=a.charCodeAt(p),u.indexOf(s)==-1&&(u.push(s),u.push([parseInt(o.metadata.widthOfGlyph(s),10)])),s=="0")return h.join("");s=s.toString(16),h.push(f[4-s.length],s)}return h.join("")},r=function(a){var o,s,u,f,h,p,g;for(h=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,u=[],p=0,g=(s=Object.keys(a).sort(function(m,_){return m-_})).length;p<g;p++)o=s[p],u.length>=100&&(h+=`
`+u.length+` beginbfchar
`+u.join(`
`)+`
endbfchar`,u=[]),a[o]!==void 0&&a[o]!==null&&typeof a[o].toString=="function"&&(f=("0000"+a[o].toString(16)).slice(-4),o=("0000"+(+o).toString(16)).slice(-4),u.push("<"+o+"><"+f+">"));return u.length&&(h+=`
`+u.length+` beginbfchar
`+u.join(`
`)+`
endbfchar
`),h+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(a){(function(o){var s=o.font,u=o.out,f=o.newObject,h=o.putStream;if(s.metadata instanceof n.API.TTFFont&&s.encoding==="Identity-H"){for(var p=s.metadata.Unicode.widths,g=s.metadata.subset.encode(s.metadata.glyIdsUsed,1),m="",_=0;_<g.length;_++)m+=String.fromCharCode(g[_]);var b=f();h({data:m,addLength1:!0,objectId:b}),u("endobj");var T=f();h({data:r(s.metadata.toUnicode),addLength1:!0,objectId:T}),u("endobj");var S=f();u("<<"),u("/Type /FontDescriptor"),u("/FontName /"+Jh(s.fontName)),u("/FontFile2 "+b+" 0 R"),u("/FontBBox "+n.API.PDFObject.convert(s.metadata.bbox)),u("/Flags "+s.metadata.flags),u("/StemV "+s.metadata.stemV),u("/ItalicAngle "+s.metadata.italicAngle),u("/Ascent "+s.metadata.ascender),u("/Descent "+s.metadata.decender),u("/CapHeight "+s.metadata.capHeight),u(">>"),u("endobj");var D=f();u("<<"),u("/Type /Font"),u("/BaseFont /"+Jh(s.fontName)),u("/FontDescriptor "+S+" 0 R"),u("/W "+n.API.PDFObject.convert(p)),u("/CIDToGIDMap /Identity"),u("/DW 1000"),u("/Subtype /CIDFontType2"),u("/CIDSystemInfo"),u("<<"),u("/Supplement 0"),u("/Registry (Adobe)"),u("/Ordering ("+s.encoding+")"),u(">>"),u(">>"),u("endobj"),s.objectNumber=f(),u("<<"),u("/Type /Font"),u("/Subtype /Type0"),u("/ToUnicode "+T+" 0 R"),u("/BaseFont /"+Jh(s.fontName)),u("/Encoding /"+s.encoding),u("/DescendantFonts ["+D+" 0 R]"),u(">>"),u("endobj"),s.isAlreadyPutted=!0}})(a)}]),e.events.push(["putFont",function(a){(function(o){var s=o.font,u=o.out,f=o.newObject,h=o.putStream;if(s.metadata instanceof n.API.TTFFont&&s.encoding==="WinAnsiEncoding"){for(var p=s.metadata.rawData,g="",m=0;m<p.length;m++)g+=String.fromCharCode(p[m]);var _=f();h({data:g,addLength1:!0,objectId:_}),u("endobj");var b=f();h({data:r(s.metadata.toUnicode),addLength1:!0,objectId:b}),u("endobj");var T=f();u("<<"),u("/Descent "+s.metadata.decender),u("/CapHeight "+s.metadata.capHeight),u("/StemV "+s.metadata.stemV),u("/Type /FontDescriptor"),u("/FontFile2 "+_+" 0 R"),u("/Flags 96"),u("/FontBBox "+n.API.PDFObject.convert(s.metadata.bbox)),u("/FontName /"+Jh(s.fontName)),u("/ItalicAngle "+s.metadata.italicAngle),u("/Ascent "+s.metadata.ascender),u(">>"),u("endobj"),s.objectNumber=f();for(var S=0;S<s.metadata.hmtx.widths.length;S++)s.metadata.hmtx.widths[S]=parseInt(s.metadata.hmtx.widths[S]*(1e3/s.metadata.head.unitsPerEm));u("<</Subtype/TrueType/Type/Font/ToUnicode "+b+" 0 R/BaseFont/"+Jh(s.fontName)+"/FontDescriptor "+T+" 0 R/Encoding/"+s.encoding+" /FirstChar 29 /LastChar 255 /Widths "+n.API.PDFObject.convert(s.metadata.hmtx.widths)+">>"),u("endobj"),s.isAlreadyPutted=!0}})(a)}]);var i=function(a){var o,s=a.text||"",u=a.x,f=a.y,h=a.options||{},p=a.mutex||{},g=p.pdfEscape,m=p.activeFontKey,_=p.fonts,b=m,T="",S=0,D="",B=_[b].encoding;if(_[b].encoding!=="Identity-H")return{text:s,x:u,y:f,options:h,mutex:p};for(D=s,b=m,Array.isArray(s)&&(D=s[0]),S=0;S<D.length;S+=1)_[b].metadata.hasOwnProperty("cmap")&&(o=_[b].metadata.cmap.unicode.codeMap[D[S].charCodeAt(0)]),o||D[S].charCodeAt(0)<256&&_[b].metadata.hasOwnProperty("Unicode")?T+=D[S]:T+="";var V="";return parseInt(b.slice(1))<14||B==="WinAnsiEncoding"?V=g(T,b).split("").map(function(Y){return Y.charCodeAt(0).toString(16)}).join(""):B==="Identity-H"&&(V=t(T,_[b])),p.isHex=!0,{text:V,x:u,y:f,options:h,mutex:p}};e.events.push(["postProcessText",function(a){var o=a.text||"",s=[],u={text:o,x:a.x,y:a.y,options:a.options,mutex:a.mutex};if(Array.isArray(o)){var f=0;for(f=0;f<o.length;f+=1)Array.isArray(o[f])&&o[f].length===3?s.push([i(Object.assign({},u,{text:o[f][0]})).text,o[f][1],o[f][2]]):s.push(i(Object.assign({},u,{text:o[f]})).text);a.text=s}else a.text=i(Object.assign({},u,{text:o})).text}])}(qt),function(n){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};n.existsFileInVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0},n.addFileToVFS=function(t,r){return e.call(this),this.internal.vFS[t]=r,this},n.getFileFromVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0?this.internal.vFS[t]:null}}(qt.API),function(n){n.__bidiEngine__=n.prototype.__bidiEngine__=function(r){var i,a,o,s,u,f,h,p=e,g=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],m=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],_={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},b={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},T=["(",")","(","<",">","<","[","]","[","{","}","{","«","»","«","‹","›","‹","⁅","⁆","⁅","⁽","⁾","⁽","₍","₎","₍","≤","≥","≤","〈","〉","〈","﹙","﹚","﹙","﹛","﹜","﹛","﹝","﹞","﹝","﹤","﹥","﹤"],S=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),D=!1,B=0;this.__bidiEngine__={};var V=function(R){var L=R.charCodeAt(),j=L>>8,$=b[j];return $!==void 0?p[256*$+(255&L)]:j===252||j===253?"AL":S.test(j)?"L":j===8?"R":"N"},Y=function(R){for(var L,j=0;j<R.length;j++){if((L=V(R.charAt(j)))==="L")return!1;if(L==="R")return!0}return!1},q=function(R,L,j,$){var ne,U,z,te,ue=L[$];switch(ue){case"L":case"R":D=!1;break;case"N":case"AN":break;case"EN":D&&(ue="AN");break;case"AL":D=!0,ue="R";break;case"WS":ue="N";break;case"CS":$<1||$+1>=L.length||(ne=j[$-1])!=="EN"&&ne!=="AN"||(U=L[$+1])!=="EN"&&U!=="AN"?ue="N":D&&(U="AN"),ue=U===ne?U:"N";break;case"ES":ue=(ne=$>0?j[$-1]:"B")==="EN"&&$+1<L.length&&L[$+1]==="EN"?"EN":"N";break;case"ET":if($>0&&j[$-1]==="EN"){ue="EN";break}if(D){ue="N";break}for(z=$+1,te=L.length;z<te&&L[z]==="ET";)z++;ue=z<te&&L[z]==="EN"?"EN":"N";break;case"NSM":if(o&&!s){for(te=L.length,z=$+1;z<te&&L[z]==="NSM";)z++;if(z<te){var X=R[$],me=X>=1425&&X<=2303||X===64286;if(ne=L[z],me&&(ne==="R"||ne==="AL")){ue="R";break}}}ue=$<1||(ne=L[$-1])==="B"?"N":j[$-1];break;case"B":D=!1,i=!0,ue=B;break;case"S":a=!0,ue="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":D=!1;break;case"BN":ue="N"}return ue},P=function(R,L,j){var $=R.split("");return j&&E($,j,{hiLevel:B}),$.reverse(),L&&L.reverse(),$.join("")},E=function(R,L,j){var $,ne,U,z,te,ue=-1,X=R.length,me=0,G=[],Q=B?m:g,ee=[];for(D=!1,i=!1,a=!1,ne=0;ne<X;ne++)ee[ne]=V(R[ne]);for(U=0;U<X;U++){if(te=me,G[U]=q(R,ee,G,U),$=240&(me=Q[te][_[G[U]]]),me&=15,L[U]=z=Q[me][5],$>0)if($===16){for(ne=ue;ne<U;ne++)L[ne]=1;ue=-1}else ue=-1;if(Q[me][6])ue===-1&&(ue=U);else if(ue>-1){for(ne=ue;ne<U;ne++)L[ne]=z;ue=-1}ee[U]==="B"&&(L[U]=0),j.hiLevel|=z}a&&function(ie,de,Ee){for(var be=0;be<Ee;be++)if(ie[be]==="S"){de[be]=B;for(var Te=be-1;Te>=0&&ie[Te]==="WS";Te--)de[Te]=B}}(ee,L,X)},C=function(R,L,j,$,ne){if(!(ne.hiLevel<R)){if(R===1&&B===1&&!i)return L.reverse(),void(j&&j.reverse());for(var U,z,te,ue,X=L.length,me=0;me<X;){if($[me]>=R){for(te=me+1;te<X&&$[te]>=R;)te++;for(ue=me,z=te-1;ue<z;ue++,z--)U=L[ue],L[ue]=L[z],L[z]=U,j&&(U=j[ue],j[ue]=j[z],j[z]=U);me=te}me++}}},M=function(R,L,j){var $=R.split(""),ne={hiLevel:B};return j||(j=[]),E($,j,ne),function(U,z,te){if(te.hiLevel!==0&&h)for(var ue,X=0;X<U.length;X++)z[X]===1&&(ue=T.indexOf(U[X]))>=0&&(U[X]=T[ue+1])}($,j,ne),C(2,$,L,j,ne),C(1,$,L,j,ne),$.join("")};return this.__bidiEngine__.doBidiReorder=function(R,L,j){if(function(ne,U){if(U)for(var z=0;z<ne.length;z++)U[z]=z;s===void 0&&(s=Y(ne)),f===void 0&&(f=Y(ne))}(R,L),o||!u||f)if(o&&u&&s^f)B=s?1:0,R=P(R,L,j);else if(!o&&u&&f)B=s?1:0,R=M(R,L,j),R=P(R,L);else if(!o||s||u||f){if(o&&!u&&s^f)R=P(R,L),s?(B=0,R=M(R,L,j)):(B=1,R=M(R,L,j),R=P(R,L));else if(o&&s&&!u&&f)B=1,R=M(R,L,j),R=P(R,L);else if(!o&&!u&&s^f){var $=h;s?(B=1,R=M(R,L,j),B=0,h=!1,R=M(R,L,j),h=$):(B=0,R=M(R,L,j),R=P(R,L),B=1,h=!1,R=M(R,L,j),h=$,R=P(R,L))}}else B=0,R=M(R,L,j);else B=s?1:0,R=M(R,L,j);return R},this.__bidiEngine__.setOptions=function(R){R&&(o=R.isInputVisual,u=R.isOutputVisual,s=R.isInputRtl,f=R.isOutputRtl,h=R.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],t=new n.__bidiEngine__({isInputVisual:!0});n.API.events.push(["postProcessText",function(r){var i=r.text;r.x,r.y;var a=r.options||{};r.mutex,a.lang;var o=[];if(a.isInputVisual=typeof a.isInputVisual!="boolean"||a.isInputVisual,t.setOptions(a),Object.prototype.toString.call(i)==="[object Array]"){var s=0;for(o=[],s=0;s<i.length;s+=1)Object.prototype.toString.call(i[s])==="[object Array]"?o.push([t.doBidiReorder(i[s][0]),i[s][1],i[s][2]]):o.push([t.doBidiReorder(i[s])]);r.text=o}else r.text=t.doBidiReorder(i);t.setOptions({isInputVisual:!0})}])}(qt),qt.API.TTFFont=function(){function n(e){var t;if(this.rawData=e,t=this.contents=new df(e),this.contents.pos=4,t.readString(4)==="ttcf")throw new Error("TTCF not supported.");t.pos=0,this.parse(),this.subset=new Vz(this),this.registerTTF()}return n.open=function(e){return new n(e)},n.prototype.parse=function(){return this.directory=new Tz(this.contents),this.head=new Rz(this),this.name=new Lz(this),this.cmap=new d8(this),this.toUnicode={},this.hhea=new Nz(this),this.maxp=new kz(this),this.hmtx=new Mz(this),this.post=new Dz(this),this.os2=new Oz(this),this.loca=new Uz(this),this.glyf=new Bz(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},n.prototype.registerTTF=function(){var e,t,r,i,a;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var o,s,u,f;for(f=[],o=0,s=(u=this.bbox).length;o<s;o++)e=u[o],f.push(Math.round(e*this.scaleFactor));return f}).call(this),this.stemV=0,this.post.exists?(r=255&(i=this.post.italic_angle),(32768&(t=i>>16))!=0&&(t=-(1+(65535^t))),this.italicAngle=+(t+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(a=this.familyClass)===1||a===2||a===3||a===4||a===5||a===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},n.prototype.characterToGlyph=function(e){var t;return((t=this.cmap.unicode)!=null?t.codeMap[e]:void 0)||0},n.prototype.widthOfGlyph=function(e){var t;return t=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*t},n.prototype.widthOfString=function(e,t,r){var i,a,o,s;for(o=0,a=0,s=(e=""+e).length;0<=s?a<s:a>s;a=0<=s?++a:--a)i=e.charCodeAt(a),o+=this.widthOfGlyph(this.characterToGlyph(i))+r*(1e3/t)||0;return o*(t/1e3)},n.prototype.lineHeight=function(e,t){var r;return t==null&&(t=!1),r=t?this.lineGap:0,(this.ascender+r-this.decender)/1e3*e},n}();var hl,df=function(){function n(e){this.data=e??[],this.pos=0,this.length=this.data.length}return n.prototype.readByte=function(){return this.data[this.pos++]},n.prototype.writeByte=function(e){return this.data[this.pos++]=e},n.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},n.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},n.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},n.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},n.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},n.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},n.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},n.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},n.prototype.readString=function(e){var t,r;for(r=[],t=0;0<=e?t<e:t>e;t=0<=e?++t:--t)r[t]=String.fromCharCode(this.readByte());return r.join("")},n.prototype.writeString=function(e){var t,r,i;for(i=[],t=0,r=e.length;0<=r?t<r:t>r;t=0<=r?++t:--t)i.push(this.writeByte(e.charCodeAt(t)));return i},n.prototype.readShort=function(){return this.readInt16()},n.prototype.writeShort=function(e){return this.writeInt16(e)},n.prototype.readLongLong=function(){var e,t,r,i,a,o,s,u;return e=this.readByte(),t=this.readByte(),r=this.readByte(),i=this.readByte(),a=this.readByte(),o=this.readByte(),s=this.readByte(),u=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^t)+1099511627776*(255^r)+4294967296*(255^i)+16777216*(255^a)+65536*(255^o)+256*(255^s)+(255^u)+1):72057594037927940*e+281474976710656*t+1099511627776*r+4294967296*i+16777216*a+65536*o+256*s+u},n.prototype.writeLongLong=function(e){var t,r;return t=Math.floor(e/4294967296),r=4294967295&e,this.writeByte(t>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},n.prototype.readInt=function(){return this.readInt32()},n.prototype.writeInt=function(e){return this.writeInt32(e)},n.prototype.read=function(e){var t,r;for(t=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)t.push(this.readByte());return t},n.prototype.write=function(e){var t,r,i,a;for(a=[],r=0,i=e.length;r<i;r++)t=e[r],a.push(this.writeByte(t));return a},n}(),Tz=function(){var n;function e(t){var r,i,a;for(this.scalarType=t.readInt(),this.tableCount=t.readShort(),this.searchRange=t.readShort(),this.entrySelector=t.readShort(),this.rangeShift=t.readShort(),this.tables={},i=0,a=this.tableCount;0<=a?i<a:i>a;i=0<=a?++i:--i)r={tag:t.readString(4),checksum:t.readInt(),offset:t.readInt(),length:t.readInt()},this.tables[r.tag]=r}return e.prototype.encode=function(t){var r,i,a,o,s,u,f,h,p,g,m,_,b;for(b in m=Object.keys(t).length,u=Math.log(2),p=16*Math.floor(Math.log(m)/u),o=Math.floor(p/u),h=16*m-p,(i=new df).writeInt(this.scalarType),i.writeShort(m),i.writeShort(p),i.writeShort(o),i.writeShort(h),a=16*m,f=i.pos+a,s=null,_=[],t)for(g=t[b],i.writeString(b),i.writeInt(n(g)),i.writeInt(f),i.writeInt(g.length),_=_.concat(g),b==="head"&&(s=f),f+=g.length;f%4;)_.push(0),f++;return i.write(_),r=2981146554-n(i.data),i.pos=s+8,i.writeUInt32(r),i.data},n=function(t){var r,i,a,o;for(t=p8.call(t);t.length%4;)t.push(0);for(a=new df(t),i=0,r=0,o=t.length;r<o;r=r+=4)i+=a.readUInt32();return 4294967295&i},e}(),Iz={}.hasOwnProperty,su=function(n,e){for(var t in e)Iz.call(e,t)&&(n[t]=e[t]);function r(){this.constructor=n}return r.prototype=e.prototype,n.prototype=new r,n.__super__=e.prototype,n};hl=function(){function n(e){var t;this.file=e,t=this.file.directory.tables[this.tag],this.exists=!!t,t&&(this.offset=t.offset,this.length=t.length,this.parse(this.file.contents))}return n.prototype.parse=function(){},n.prototype.encode=function(){},n.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},n}();var Rz=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return su(e,hl),e.prototype.tag="head",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.revision=t.readInt(),this.checkSumAdjustment=t.readInt(),this.magicNumber=t.readInt(),this.flags=t.readShort(),this.unitsPerEm=t.readShort(),this.created=t.readLongLong(),this.modified=t.readLongLong(),this.xMin=t.readShort(),this.yMin=t.readShort(),this.xMax=t.readShort(),this.yMax=t.readShort(),this.macStyle=t.readShort(),this.lowestRecPPEM=t.readShort(),this.fontDirectionHint=t.readShort(),this.indexToLocFormat=t.readShort(),this.glyphDataFormat=t.readShort()},e.prototype.encode=function(t){var r;return(r=new df).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(t),r.writeShort(this.glyphDataFormat),r.data},e}(),O4=function(){function n(e,t){var r,i,a,o,s,u,f,h,p,g,m,_,b,T,S,D,B;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=t+e.readInt(),p=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(u=0;u<256;++u)this.codeMap[u]=e.readByte();break;case 4:for(m=e.readUInt16(),g=m/2,e.pos+=6,a=function(){var V,Y;for(Y=[],u=V=0;0<=g?V<g:V>g;u=0<=g?++V:--V)Y.push(e.readUInt16());return Y}(),e.pos+=2,b=function(){var V,Y;for(Y=[],u=V=0;0<=g?V<g:V>g;u=0<=g?++V:--V)Y.push(e.readUInt16());return Y}(),f=function(){var V,Y;for(Y=[],u=V=0;0<=g?V<g:V>g;u=0<=g?++V:--V)Y.push(e.readUInt16());return Y}(),h=function(){var V,Y;for(Y=[],u=V=0;0<=g?V<g:V>g;u=0<=g?++V:--V)Y.push(e.readUInt16());return Y}(),i=(this.length-e.pos+this.offset)/2,s=function(){var V,Y;for(Y=[],u=V=0;0<=i?V<i:V>i;u=0<=i?++V:--V)Y.push(e.readUInt16());return Y}(),u=S=0,B=a.length;S<B;u=++S)for(T=a[u],r=D=_=b[u];_<=T?D<=T:D>=T;r=_<=T?++D:--D)h[u]===0?o=r+f[u]:(o=s[h[u]/2+(r-_)-(g-u)]||0)!==0&&(o+=f[u]),this.codeMap[r]=65535&o}e.pos=p}return n.encode=function(e,t){var r,i,a,o,s,u,f,h,p,g,m,_,b,T,S,D,B,V,Y,q,P,E,C,M,R,L,j,$,ne,U,z,te,ue,X,me,G,Q,ee,ie,de,Ee,be,Te,Ge,He,rt;switch($=new df,o=Object.keys(e).sort(function(st,wt){return st-wt}),t){case"macroman":for(b=0,T=function(){var st=[];for(_=0;_<256;++_)st.push(0);return st}(),D={0:0},a={},ne=0,ue=o.length;ne<ue;ne++)D[Te=e[i=o[ne]]]==null&&(D[Te]=++b),a[i]={old:e[i],new:D[e[i]]},T[i]=D[e[i]];return $.writeUInt16(1),$.writeUInt16(0),$.writeUInt32(12),$.writeUInt16(0),$.writeUInt16(262),$.writeUInt16(0),$.write(T),{charMap:a,subtable:$.data,maxGlyphID:b+1};case"unicode":for(L=[],p=[],B=0,D={},r={},S=f=null,U=0,X=o.length;U<X;U++)D[Y=e[i=o[U]]]==null&&(D[Y]=++B),r[i]={old:Y,new:D[Y]},s=D[Y]-i,S!=null&&s===f||(S&&p.push(S),L.push(i),f=s),S=i;for(S&&p.push(S),p.push(65535),L.push(65535),M=2*(C=L.length),E=2*Math.pow(Math.log(C)/Math.LN2,2),g=Math.log(E/2)/Math.LN2,P=2*C-E,u=[],q=[],m=[],_=z=0,me=L.length;z<me;_=++z){if(R=L[_],h=p[_],R===65535){u.push(0),q.push(0);break}if(R-(j=r[R].new)>=32768)for(u.push(0),q.push(2*(m.length+C-_)),i=te=R;R<=h?te<=h:te>=h;i=R<=h?++te:--te)m.push(r[i].new);else u.push(j-R),q.push(0)}for($.writeUInt16(3),$.writeUInt16(1),$.writeUInt32(12),$.writeUInt16(4),$.writeUInt16(16+8*C+2*m.length),$.writeUInt16(0),$.writeUInt16(M),$.writeUInt16(E),$.writeUInt16(g),$.writeUInt16(P),Ee=0,G=p.length;Ee<G;Ee++)i=p[Ee],$.writeUInt16(i);for($.writeUInt16(0),be=0,Q=L.length;be<Q;be++)i=L[be],$.writeUInt16(i);for(Ge=0,ee=u.length;Ge<ee;Ge++)s=u[Ge],$.writeUInt16(s);for(He=0,ie=q.length;He<ie;He++)V=q[He],$.writeUInt16(V);for(rt=0,de=m.length;rt<de;rt++)b=m[rt],$.writeUInt16(b);return{charMap:r,subtable:$.data,maxGlyphID:B+1}}},n}(),d8=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return su(e,hl),e.prototype.tag="cmap",e.prototype.parse=function(t){var r,i,a;for(t.pos=this.offset,this.version=t.readUInt16(),a=t.readUInt16(),this.tables=[],this.unicode=null,i=0;0<=a?i<a:i>a;i=0<=a?++i:--i)r=new O4(t,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},e.encode=function(t,r){var i,a;return r==null&&(r="macroman"),i=O4.encode(t,r),(a=new df).writeUInt16(0),a.writeUInt16(1),i.table=a.data.concat(i.subtable),i},e}(),Nz=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return su(e,hl),e.prototype.tag="hhea",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.ascender=t.readShort(),this.decender=t.readShort(),this.lineGap=t.readShort(),this.advanceWidthMax=t.readShort(),this.minLeftSideBearing=t.readShort(),this.minRightSideBearing=t.readShort(),this.xMaxExtent=t.readShort(),this.caretSlopeRise=t.readShort(),this.caretSlopeRun=t.readShort(),this.caretOffset=t.readShort(),t.pos+=8,this.metricDataFormat=t.readShort(),this.numberOfMetrics=t.readUInt16()},e}(),Oz=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return su(e,hl),e.prototype.tag="OS/2",e.prototype.parse=function(t){if(t.pos=this.offset,this.version=t.readUInt16(),this.averageCharWidth=t.readShort(),this.weightClass=t.readUInt16(),this.widthClass=t.readUInt16(),this.type=t.readShort(),this.ySubscriptXSize=t.readShort(),this.ySubscriptYSize=t.readShort(),this.ySubscriptXOffset=t.readShort(),this.ySubscriptYOffset=t.readShort(),this.ySuperscriptXSize=t.readShort(),this.ySuperscriptYSize=t.readShort(),this.ySuperscriptXOffset=t.readShort(),this.ySuperscriptYOffset=t.readShort(),this.yStrikeoutSize=t.readShort(),this.yStrikeoutPosition=t.readShort(),this.familyClass=t.readShort(),this.panose=function(){var r,i;for(i=[],r=0;r<10;++r)i.push(t.readByte());return i}(),this.charRange=function(){var r,i;for(i=[],r=0;r<4;++r)i.push(t.readInt());return i}(),this.vendorID=t.readString(4),this.selection=t.readShort(),this.firstCharIndex=t.readShort(),this.lastCharIndex=t.readShort(),this.version>0&&(this.ascent=t.readShort(),this.descent=t.readShort(),this.lineGap=t.readShort(),this.winAscent=t.readShort(),this.winDescent=t.readShort(),this.codePageRange=function(){var r,i;for(i=[],r=0;r<2;r=++r)i.push(t.readInt());return i}(),this.version>1))return this.xHeight=t.readShort(),this.capHeight=t.readShort(),this.defaultChar=t.readShort(),this.breakChar=t.readShort(),this.maxContext=t.readShort()},e}(),Dz=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return su(e,hl),e.prototype.tag="post",e.prototype.parse=function(t){var r,i,a;switch(t.pos=this.offset,this.format=t.readInt(),this.italicAngle=t.readInt(),this.underlinePosition=t.readShort(),this.underlineThickness=t.readShort(),this.isFixedPitch=t.readInt(),this.minMemType42=t.readInt(),this.maxMemType42=t.readInt(),this.minMemType1=t.readInt(),this.maxMemType1=t.readInt(),this.format){case 65536:break;case 131072:var o;for(i=t.readUInt16(),this.glyphNameIndex=[],o=0;0<=i?o<i:o>i;o=0<=i?++o:--o)this.glyphNameIndex.push(t.readUInt16());for(this.names=[],a=[];t.pos<this.offset+this.length;)r=t.readByte(),a.push(this.names.push(t.readString(r)));return a;case 151552:return i=t.readUInt16(),this.offsets=t.read(i);case 196608:break;case 262144:return this.map=(function(){var s,u,f;for(f=[],o=s=0,u=this.file.maxp.numGlyphs;0<=u?s<u:s>u;o=0<=u?++s:--s)f.push(t.readUInt32());return f}).call(this)}},e}(),Pz=function(n,e){this.raw=n,this.length=n.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},Lz=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return su(e,hl),e.prototype.tag="name",e.prototype.parse=function(t){var r,i,a,o,s,u,f,h,p,g,m;for(t.pos=this.offset,t.readShort(),r=t.readShort(),u=t.readShort(),i=[],o=0;0<=r?o<r:o>r;o=0<=r?++o:--o)i.push({platformID:t.readShort(),encodingID:t.readShort(),languageID:t.readShort(),nameID:t.readShort(),length:t.readShort(),offset:this.offset+u+t.readShort()});for(f={},o=p=0,g=i.length;p<g;o=++p)a=i[o],t.pos=a.offset,h=t.readString(a.length),s=new Pz(h,a),f[m=a.nameID]==null&&(f[m]=[]),f[a.nameID].push(s);this.strings=f,this.copyright=f[0],this.fontFamily=f[1],this.fontSubfamily=f[2],this.uniqueSubfamily=f[3],this.fontName=f[4],this.version=f[5];try{this.postscriptName=f[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=f[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=f[7],this.manufacturer=f[8],this.designer=f[9],this.description=f[10],this.vendorUrl=f[11],this.designerUrl=f[12],this.license=f[13],this.licenseUrl=f[14],this.preferredFamily=f[15],this.preferredSubfamily=f[17],this.compatibleFull=f[18],this.sampleText=f[19]},e}(),kz=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return su(e,hl),e.prototype.tag="maxp",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.numGlyphs=t.readUInt16(),this.maxPoints=t.readUInt16(),this.maxContours=t.readUInt16(),this.maxCompositePoints=t.readUInt16(),this.maxComponentContours=t.readUInt16(),this.maxZones=t.readUInt16(),this.maxTwilightPoints=t.readUInt16(),this.maxStorage=t.readUInt16(),this.maxFunctionDefs=t.readUInt16(),this.maxInstructionDefs=t.readUInt16(),this.maxStackElements=t.readUInt16(),this.maxSizeOfInstructions=t.readUInt16(),this.maxComponentElements=t.readUInt16(),this.maxComponentDepth=t.readUInt16()},e}(),Mz=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return su(e,hl),e.prototype.tag="hmtx",e.prototype.parse=function(t){var r,i,a,o,s,u,f;for(t.pos=this.offset,this.metrics=[],r=0,u=this.file.hhea.numberOfMetrics;0<=u?r<u:r>u;r=0<=u?++r:--r)this.metrics.push({advance:t.readUInt16(),lsb:t.readInt16()});for(a=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var h,p;for(p=[],r=h=0;0<=a?h<a:h>a;r=0<=a?++h:--h)p.push(t.readInt16());return p}(),this.widths=(function(){var h,p,g,m;for(m=[],h=0,p=(g=this.metrics).length;h<p;h++)o=g[h],m.push(o.advance);return m}).call(this),i=this.widths[this.widths.length-1],f=[],r=s=0;0<=a?s<a:s>a;r=0<=a?++s:--s)f.push(this.widths.push(i));return f},e.prototype.forGlyph=function(t){return t in this.metrics?this.metrics[t]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[t-this.metrics.length]}},e}(),p8=[].slice,Bz=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return su(e,hl),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(t){var r,i,a,o,s,u,f,h,p,g;return t in this.cache?this.cache[t]:(o=this.file.loca,r=this.file.contents,i=o.indexOf(t),(a=o.lengthOf(t))===0?this.cache[t]=null:(r.pos=this.offset+i,s=(u=new df(r.read(a))).readShort(),h=u.readShort(),g=u.readShort(),f=u.readShort(),p=u.readShort(),this.cache[t]=s===-1?new jz(u,h,g,f,p):new Fz(u,s,h,g,f,p),this.cache[t]))},e.prototype.encode=function(t,r,i){var a,o,s,u,f;for(s=[],o=[],u=0,f=r.length;u<f;u++)a=t[r[u]],o.push(s.length),a&&(s=s.concat(a.encode(i)));return o.push(s.length),{table:s,offsets:o}},e}(),Fz=function(){function n(e,t,r,i,a,o){this.raw=e,this.numberOfContours=t,this.xMin=r,this.yMin=i,this.xMax=a,this.yMax=o,this.compound=!1}return n.prototype.encode=function(){return this.raw.data},n}(),jz=function(){function n(e,t,r,i,a){var o,s;for(this.raw=e,this.xMin=t,this.yMin=r,this.xMax=i,this.yMax=a,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],o=this.raw;s=o.readShort(),this.glyphOffsets.push(o.pos),this.glyphIDs.push(o.readUInt16()),32&s;)o.pos+=1&s?4:2,128&s?o.pos+=8:64&s?o.pos+=4:8&s&&(o.pos+=2)}return n.prototype.encode=function(){var e,t,r;for(t=new df(p8.call(this.raw.data)),e=0,r=this.glyphIDs.length;e<r;++e)t.pos=this.glyphOffsets[e];return t.data},n}(),Uz=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return su(e,hl),e.prototype.tag="loca",e.prototype.parse=function(t){var r,i;return t.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var a,o;for(o=[],i=0,a=this.length;i<a;i+=2)o.push(2*t.readUInt16());return o}).call(this):(function(){var a,o;for(o=[],i=0,a=this.length;i<a;i+=4)o.push(t.readUInt32());return o}).call(this)},e.prototype.indexOf=function(t){return this.offsets[t]},e.prototype.lengthOf=function(t){return this.offsets[t+1]-this.offsets[t]},e.prototype.encode=function(t,r){for(var i=new Uint32Array(this.offsets.length),a=0,o=0,s=0;s<i.length;++s)if(i[s]=a,o<r.length&&r[o]==s){++o,i[s]=a;var u=this.offsets[s],f=this.offsets[s+1]-u;f>0&&(a+=f)}for(var h=new Array(4*i.length),p=0;p<i.length;++p)h[4*p+3]=255&i[p],h[4*p+2]=(65280&i[p])>>8,h[4*p+1]=(16711680&i[p])>>16,h[4*p]=(4278190080&i[p])>>24;return h},e}(),Vz=function(){function n(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return n.prototype.generateCmap=function(){var e,t,r,i,a;for(t in i=this.font.cmap.tables[0].codeMap,e={},a=this.subset)r=a[t],e[t]=i[r];return e},n.prototype.glyphsFor=function(e){var t,r,i,a,o,s,u;for(i={},o=0,s=e.length;o<s;o++)i[a=e[o]]=this.font.glyf.glyphFor(a);for(a in t=[],i)(r=i[a])!=null&&r.compound&&t.push.apply(t,r.glyphIDs);if(t.length>0)for(a in u=this.glyphsFor(t))r=u[a],i[a]=r;return i},n.prototype.encode=function(e,t){var r,i,a,o,s,u,f,h,p,g,m,_,b,T,S;for(i in r=d8.encode(this.generateCmap(),"unicode"),o=this.glyphsFor(e),m={0:0},S=r.charMap)m[(u=S[i]).old]=u.new;for(_ in g=r.maxGlyphID,o)_ in m||(m[_]=g++);return h=function(D){var B,V;for(B in V={},D)V[D[B]]=B;return V}(m),p=Object.keys(h).sort(function(D,B){return D-B}),b=function(){var D,B,V;for(V=[],D=0,B=p.length;D<B;D++)s=p[D],V.push(h[s]);return V}(),a=this.font.glyf.encode(o,b,m),f=this.font.loca.encode(a.offsets,b),T={cmap:this.font.cmap.raw(),glyf:a.table,loca:f,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(t)},this.font.os2.exists&&(T["OS/2"]=this.font.os2.raw()),this.font.directory.encode(T)},n}();qt.API.PDFObject=function(){var n;function e(){}return n=function(t,r){return(Array(r+1).join("0")+t).slice(-r)},e.convert=function(t){var r,i,a,o;if(Array.isArray(t))return"["+function(){var s,u,f;for(f=[],s=0,u=t.length;s<u;s++)r=t[s],f.push(e.convert(r));return f}().join(" ")+"]";if(typeof t=="string")return"/"+t;if(t!=null&&t.isString)return"("+t+")";if(t instanceof Date)return"(D:"+n(t.getUTCFullYear(),4)+n(t.getUTCMonth(),2)+n(t.getUTCDate(),2)+n(t.getUTCHours(),2)+n(t.getUTCMinutes(),2)+n(t.getUTCSeconds(),2)+"Z)";if({}.toString.call(t)==="[object Object]"){for(i in a=["<<"],t)o=t[i],a.push("/"+i+" "+e.convert(o));return a.push(">>"),a.join(`
`)}return""+t},e}();function g8(n,e,t,r,i){r=r||{};var a=1.15,o=i.internal.scaleFactor,s=i.internal.getFontSize()/o,u=i.getLineHeightFactor?i.getLineHeightFactor():a,f=s*u,h=/\r\n|\r|\n/g,p="",g=1;if((r.valign==="middle"||r.valign==="bottom"||r.halign==="center"||r.halign==="right")&&(p=typeof n=="string"?n.split(h):n,g=p.length||1),t+=s*(2-a),r.valign==="middle"?t-=g/2*f:r.valign==="bottom"&&(t-=g*f),r.halign==="center"||r.halign==="right"){var m=s;if(r.halign==="center"&&(m*=.5),p&&g>=1){for(var _=0;_<p.length;_++)i.text(p[_],e-i.getStringUnitWidth(p[_])*m,t),t+=f;return i}e-=i.getStringUnitWidth(n)*m}return r.halign==="justify"?i.text(n,e,t,{maxWidth:r.maxWidth||100,align:"justify"}):i.text(n,e,t),i}var D4={},dd=function(){function n(e){this.jsPDFDocument=e,this.userStyles={textColor:e.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:e.internal.getFontSize(),fontStyle:e.internal.getFont().fontStyle,font:e.internal.getFont().fontName,lineWidth:e.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:e.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return n.setDefaults=function(e,t){t===void 0&&(t=null),t?t.__autoTableDocumentDefaults=e:D4=e},n.unifyColor=function(e){return Array.isArray(e)?e:typeof e=="number"?[e,e,e]:typeof e=="string"?[e]:null},n.prototype.applyStyles=function(e,t){var r,i,a;t===void 0&&(t=!1),e.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(e.fontStyle);var o=this.jsPDFDocument.internal.getFont(),s=o.fontStyle,u=o.fontName;if(e.font&&(u=e.font),e.fontStyle){s=e.fontStyle;var f=this.getFontList()[u];f&&f.indexOf(s)===-1&&this.jsPDFDocument.setFontStyle&&(this.jsPDFDocument.setFontStyle(f[0]),s=f[0])}if(this.jsPDFDocument.setFont(u,s),e.fontSize&&this.jsPDFDocument.setFontSize(e.fontSize),!t){var h=n.unifyColor(e.fillColor);h&&(r=this.jsPDFDocument).setFillColor.apply(r,h),h=n.unifyColor(e.textColor),h&&(i=this.jsPDFDocument).setTextColor.apply(i,h),h=n.unifyColor(e.lineColor),h&&(a=this.jsPDFDocument).setDrawColor.apply(a,h),typeof e.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(e.lineWidth)}},n.prototype.splitTextToSize=function(e,t,r){return this.jsPDFDocument.splitTextToSize(e,t,r)},n.prototype.rect=function(e,t,r,i,a){return this.jsPDFDocument.rect(e,t,r,i,a)},n.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},n.prototype.getTextWidth=function(e){return this.jsPDFDocument.getTextWidth(e)},n.prototype.getDocument=function(){return this.jsPDFDocument},n.prototype.setPage=function(e){this.jsPDFDocument.setPage(e)},n.prototype.addPage=function(){return this.jsPDFDocument.addPage()},n.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},n.prototype.getGlobalOptions=function(){return D4||{}},n.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},n.prototype.pageSize=function(){var e=this.jsPDFDocument.internal.pageSize;return e.width==null&&(e={width:e.getWidth(),height:e.getHeight()}),e},n.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},n.prototype.getLineHeightFactor=function(){var e=this.jsPDFDocument;return e.getLineHeightFactor?e.getLineHeightFactor():1.15},n.prototype.getLineHeight=function(e){return e/this.scaleFactor()*this.getLineHeightFactor()},n.prototype.pageNumber=function(){var e=this.jsPDFDocument.internal.getCurrentPageInfo();return e?e.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},n}(),qy=function(n,e){return qy=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},qy(n,e)};function m8(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");qy(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var v8=function(n){m8(e,n);function e(t){var r=n.call(this)||this;return r._element=t,r}return e}(Array);function zz(n){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/n,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}function qz(n){var e={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return e[n]}function qg(n,e,t){t.applyStyles(e,!0);var r=Array.isArray(n)?n:[n],i=r.map(function(a){return t.getTextWidth(a)}).reduce(function(a,o){return Math.max(a,o)},0);return i}function y8(n,e,t,r){var i=e.settings.tableLineWidth,a=e.settings.tableLineColor;n.applyStyles({lineWidth:i,lineColor:a});var o=x8(i,!1);o&&n.rect(t.x,t.y,e.getWidth(n.pageSize().width),r.y-t.y,o)}function x8(n,e){var t=n>0,r=e||e===0;return t&&r?"DF":t?"S":r?"F":null}function k2(n,e){var t,r,i,a;if(n=n||e,Array.isArray(n)){if(n.length>=4)return{top:n[0],right:n[1],bottom:n[2],left:n[3]};if(n.length===3)return{top:n[0],right:n[1],bottom:n[2],left:n[1]};if(n.length===2)return{top:n[0],right:n[1],bottom:n[0],left:n[1]};n.length===1?n=n[0]:n=e}return typeof n=="object"?(typeof n.vertical=="number"&&(n.top=n.vertical,n.bottom=n.vertical),typeof n.horizontal=="number"&&(n.right=n.horizontal,n.left=n.horizontal),{left:(t=n.left)!==null&&t!==void 0?t:e,top:(r=n.top)!==null&&r!==void 0?r:e,right:(i=n.right)!==null&&i!==void 0?i:e,bottom:(a=n.bottom)!==null&&a!==void 0?a:e}):(typeof n!="number"&&(n=e),{top:n,right:n,bottom:n,left:n})}function _8(n,e){var t=k2(e.settings.margin,0);return n.pageSize().width-(t.left+t.right)}function Hz(n,e,t,r,i){var a={},o=1.3333333333333333,s=Dv(e,function(B){return i.getComputedStyle(B).backgroundColor});s!=null&&(a.fillColor=s);var u=Dv(e,function(B){return i.getComputedStyle(B).color});u!=null&&(a.textColor=u);var f=Wz(r,t);f&&(a.cellPadding=f);var h="borderTopColor",p=o*t,g=r.borderTopWidth;if(r.borderBottomWidth===g&&r.borderRightWidth===g&&r.borderLeftWidth===g){var m=(parseFloat(g)||0)/p;m&&(a.lineWidth=m)}else a.lineWidth={top:(parseFloat(r.borderTopWidth)||0)/p,right:(parseFloat(r.borderRightWidth)||0)/p,bottom:(parseFloat(r.borderBottomWidth)||0)/p,left:(parseFloat(r.borderLeftWidth)||0)/p},a.lineWidth.top||(a.lineWidth.right?h="borderRightColor":a.lineWidth.bottom?h="borderBottomColor":a.lineWidth.left&&(h="borderLeftColor"));var _=Dv(e,function(B){return i.getComputedStyle(B)[h]});_!=null&&(a.lineColor=_);var b=["left","right","center","justify"];b.indexOf(r.textAlign)!==-1&&(a.halign=r.textAlign),b=["middle","bottom","top"],b.indexOf(r.verticalAlign)!==-1&&(a.valign=r.verticalAlign);var T=parseInt(r.fontSize||"");isNaN(T)||(a.fontSize=T/o);var S=Gz(r);S&&(a.fontStyle=S);var D=(r.fontFamily||"").toLowerCase();return n.indexOf(D)!==-1&&(a.font=D),a}function Gz(n){var e="";return(n.fontWeight==="bold"||n.fontWeight==="bolder"||parseInt(n.fontWeight)>=700)&&(e="bold"),(n.fontStyle==="italic"||n.fontStyle==="oblique")&&(e+="italic"),e}function Dv(n,e){var t=w8(n,e);if(!t)return null;var r=t.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!r||!Array.isArray(r))return null;var i=[parseInt(r[1]),parseInt(r[2]),parseInt(r[3])],a=parseInt(r[4]);return a===0||isNaN(i[0])||isNaN(i[1])||isNaN(i[2])?null:i}function w8(n,e){var t=e(n);return t==="rgba(0, 0, 0, 0)"||t==="transparent"||t==="initial"||t==="inherit"?n.parentElement==null?null:w8(n.parentElement,e):t}function Wz(n,e){var t=[n.paddingTop,n.paddingRight,n.paddingBottom,n.paddingLeft],r=96/(72/e),i=(parseInt(n.lineHeight)-parseInt(n.fontSize))/e/2,a=t.map(function(s){return parseInt(s||"0")/r}),o=k2(a,0);return i>o.top&&(o.top=i),i>o.bottom&&(o.bottom=i),o}function b8(n,e,t,r,i){var a,o;r===void 0&&(r=!1),i===void 0&&(i=!1);var s;typeof e=="string"?s=t.document.querySelector(e):s=e;var u=Object.keys(n.getFontList()),f=n.scaleFactor(),h=[],p=[],g=[];if(!s)return console.error("Html table could not be found with input: ",e),{head:h,body:p,foot:g};for(var m=0;m<s.rows.length;m++){var _=s.rows[m],b=(o=(a=_==null?void 0:_.parentElement)===null||a===void 0?void 0:a.tagName)===null||o===void 0?void 0:o.toLowerCase(),T=$z(u,f,t,_,r,i);T&&(b==="thead"?h.push(T):b==="tfoot"?g.push(T):p.push(T))}return{head:h,body:p,foot:g}}function $z(n,e,t,r,i,a){for(var o=new v8(r),s=0;s<r.cells.length;s++){var u=r.cells[s],f=t.getComputedStyle(u);if(i||f.display!=="none"){var h=void 0;a&&(h=Hz(n,u,e,f,t)),o.push({rowSpan:u.rowSpan,colSpan:u.colSpan,styles:h,_element:u,content:Xz(u)})}}var p=t.getComputedStyle(r);if(o.length>0&&(i||p.display!=="none"))return o}function Xz(n){var e=n.cloneNode(!0);return e.innerHTML=e.innerHTML.replace(/\n/g,"").replace(/ +/g," "),e.innerHTML=e.innerHTML.split(/<br.*?>/).map(function(t){return t.trim()}).join(`
`),e.innerText||e.textContent||""}function Yz(n,e,t){for(var r=0,i=[n,e,t];r<i.length;r++){var a=i[r];a&&typeof a!="object"&&console.error("The options parameter should be of type object, is: "+typeof a),a.startY&&typeof a.startY!="number"&&(console.error("Invalid value for startY option",a.startY),delete a.startY)}}function zu(n,e,t,r,i){if(n==null)throw new TypeError("Cannot convert undefined or null to object");for(var a=Object(n),o=1;o<arguments.length;o++){var s=arguments[o];if(s!=null)for(var u in s)Object.prototype.hasOwnProperty.call(s,u)&&(a[u]=s[u])}return a}function A8(n,e){var t=new dd(n),r=t.getDocumentOptions(),i=t.getGlobalOptions();Yz(i,r,e);var a=zu({},i,r,e),o;typeof window<"u"&&(o=window);var s=Kz(i,r,e),u=Qz(i,r,e),f=Zz(t,a),h=eq(t,a,o);return{id:e.tableId,content:h,hooks:u,styles:s,settings:f}}function Kz(n,e,t){for(var r={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},i=function(u){if(u==="columnStyles"){var f=n[u],h=e[u],p=t[u];r.columnStyles=zu({},f,h,p)}else{var g=[n,e,t],m=g.map(function(_){return _[u]||{}});r[u]=zu({},m[0],m[1],m[2])}},a=0,o=Object.keys(r);a<o.length;a++){var s=o[a];i(s)}return r}function Qz(n,e,t){for(var r=[n,e,t],i={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},a=0,o=r;a<o.length;a++){var s=o[a];s.didParseCell&&i.didParseCell.push(s.didParseCell),s.willDrawCell&&i.willDrawCell.push(s.willDrawCell),s.didDrawCell&&i.didDrawCell.push(s.didDrawCell),s.willDrawPage&&i.willDrawPage.push(s.willDrawPage),s.didDrawPage&&i.didDrawPage.push(s.didDrawPage)}return i}function Zz(n,e){var t,r,i,a,o,s,u,f,h,p,g,m,_=k2(e.margin,40/n.scaleFactor()),b=(t=Jz(n,e.startY))!==null&&t!==void 0?t:_.top,T;e.showFoot===!0?T="everyPage":e.showFoot===!1?T="never":T=(r=e.showFoot)!==null&&r!==void 0?r:"everyPage";var S;e.showHead===!0?S="everyPage":e.showHead===!1?S="never":S=(i=e.showHead)!==null&&i!==void 0?i:"everyPage";var D=(a=e.useCss)!==null&&a!==void 0?a:!1,B=e.theme||(D?"plain":"striped"),V=!!e.horizontalPageBreak,Y=(o=e.horizontalPageBreakRepeat)!==null&&o!==void 0?o:null;return{includeHiddenHtml:(s=e.includeHiddenHtml)!==null&&s!==void 0?s:!1,useCss:D,theme:B,startY:b,margin:_,pageBreak:(u=e.pageBreak)!==null&&u!==void 0?u:"auto",rowPageBreak:(f=e.rowPageBreak)!==null&&f!==void 0?f:"auto",tableWidth:(h=e.tableWidth)!==null&&h!==void 0?h:"auto",showHead:S,showFoot:T,tableLineWidth:(p=e.tableLineWidth)!==null&&p!==void 0?p:0,tableLineColor:(g=e.tableLineColor)!==null&&g!==void 0?g:200,horizontalPageBreak:V,horizontalPageBreakRepeat:Y,horizontalPageBreakBehaviour:(m=e.horizontalPageBreakBehaviour)!==null&&m!==void 0?m:"afterAllRows"}}function Jz(n,e){var t=n.getLastAutoTable(),r=n.scaleFactor(),i=n.pageNumber(),a=!1;if(t&&t.startPageNumber){var o=t.startPageNumber+t.pageNumber-1;a=o===i}return typeof e=="number"?e:(e==null||e===!1)&&a&&(t==null?void 0:t.finalY)!=null?t.finalY+20/r:null}function eq(n,e,t){var r=e.head||[],i=e.body||[],a=e.foot||[];if(e.html){var o=e.includeHiddenHtml;if(t){var s=b8(n,e.html,t,o,e.useCss)||{};r=s.head||r,i=s.body||r,a=s.foot||r}else console.error("Cannot parse html in non browser environment")}var u=e.columns||tq(r,i,a);return{columns:u,head:r,body:i,foot:a}}function tq(n,e,t){var r=n[0]||e[0]||t[0]||[],i=[];return Object.keys(r).filter(function(a){return a!=="_element"}).forEach(function(a){var o=1,s;Array.isArray(r)?s=r[parseInt(a)]:s=r[a],typeof s=="object"&&!Array.isArray(s)&&(o=(s==null?void 0:s.colSpan)||1);for(var u=0;u<o;u++){var f=void 0;Array.isArray(r)?f=i.length:f=a+(u>0?"_".concat(u):"");var h={dataKey:f};i.push(h)}}),i}var Hy=function(){function n(e,t,r){this.table=t,this.pageNumber=t.pageNumber,this.settings=t.settings,this.cursor=r,this.doc=e.getDocument()}return n}(),nq=function(n){m8(e,n);function e(t,r,i,a,o,s){var u=n.call(this,t,r,s)||this;return u.cell=i,u.row=a,u.column=o,u.section=a.section,u}return e}(Hy),rq=function(){function n(e,t){this.pageNumber=1,this.id=e.id,this.settings=e.settings,this.styles=e.styles,this.hooks=e.hooks,this.columns=t.columns,this.head=t.head,this.body=t.body,this.foot=t.foot}return n.prototype.getHeadHeight=function(e){return this.head.reduce(function(t,r){return t+r.getMaxCellHeight(e)},0)},n.prototype.getFootHeight=function(e){return this.foot.reduce(function(t,r){return t+r.getMaxCellHeight(e)},0)},n.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},n.prototype.callCellHooks=function(e,t,r,i,a,o){for(var s=0,u=t;s<u.length;s++){var f=u[s],h=new nq(e,this,r,i,a,o),p=f(h)===!1;if(r.text=Array.isArray(r.text)?r.text:[r.text],p)return!1}return!0},n.prototype.callEndPageHooks=function(e,t){e.applyStyles(e.userStyles);for(var r=0,i=this.hooks.didDrawPage;r<i.length;r++){var a=i[r];a(new Hy(e,this,t))}},n.prototype.callWillDrawPageHooks=function(e,t){for(var r=0,i=this.hooks.willDrawPage;r<i.length;r++){var a=i[r];a(new Hy(e,this,t))}},n.prototype.getWidth=function(e){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var t=this.columns.reduce(function(i,a){return i+a.wrappedWidth},0);return t}else{var r=this.settings.margin;return e-r.left-r.right}},n}(),E8=function(){function n(e,t,r,i,a){a===void 0&&(a=!1),this.height=0,this.raw=e,e instanceof v8&&(this.raw=e._element,this.element=e._element),this.index=t,this.section=r,this.cells=i,this.spansMultiplePages=a}return n.prototype.getMaxCellHeight=function(e){var t=this;return e.reduce(function(r,i){var a;return Math.max(r,((a=t.cells[i.index])===null||a===void 0?void 0:a.height)||0)},0)},n.prototype.hasRowSpan=function(e){var t=this;return e.filter(function(r){var i=t.cells[r.index];return i?i.rowSpan>1:!1}).length>0},n.prototype.canEntireRowFit=function(e,t){return this.getMaxCellHeight(t)<=e},n.prototype.getMinimumRowHeight=function(e,t){var r=this;return e.reduce(function(i,a){var o=r.cells[a.index];if(!o)return 0;var s=t.getLineHeight(o.styles.fontSize),u=o.padding("vertical"),f=u+s;return f>i?f:i},0)},n}(),S8=function(){function n(e,t,r){var i;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=t,this.section=r,this.raw=e;var a=e;e!=null&&typeof e=="object"&&!Array.isArray(e)?(this.rowSpan=e.rowSpan||1,this.colSpan=e.colSpan||1,a=(i=e.content)!==null&&i!==void 0?i:e,e._element&&(this.raw=e._element)):(this.rowSpan=1,this.colSpan=1);var o=a!=null?""+a:"",s=/\r\n|\r|\n/g;this.text=o.split(s)}return n.prototype.getTextPos=function(){var e;if(this.styles.valign==="top")e=this.y+this.padding("top");else if(this.styles.valign==="bottom")e=this.y+this.height-this.padding("bottom");else{var t=this.height-this.padding("vertical");e=this.y+t/2+this.padding("top")}var r;if(this.styles.halign==="right")r=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var i=this.width-this.padding("horizontal");r=this.x+i/2+this.padding("left")}else r=this.x+this.padding("left");return{x:r,y:e}},n.prototype.getContentHeight=function(e,t){t===void 0&&(t=1.15);var r=Array.isArray(this.text)?this.text.length:1,i=this.styles.fontSize/e*t,a=r*i+this.padding("vertical");return Math.max(a,this.styles.minCellHeight)},n.prototype.padding=function(e){var t=k2(this.styles.cellPadding,0);return e==="vertical"?t.top+t.bottom:e==="horizontal"?t.left+t.right:t[e]},n}(),iq=function(){function n(e,t,r){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=e,this.raw=t,this.index=r}return n.prototype.getMaxCustomCellWidth=function(e){for(var t=0,r=0,i=e.allRows();r<i.length;r++){var a=i[r],o=a.cells[this.index];o&&typeof o.styles.cellWidth=="number"&&(t=Math.max(t,o.styles.cellWidth))}return t},n}();function aq(n,e){oq(n,e);var t=[],r=0;e.columns.forEach(function(a){var o=a.getMaxCustomCellWidth(e);o?a.width=o:(a.width=a.wrappedWidth,t.push(a)),r+=a.width});var i=e.getWidth(n.pageSize().width)-r;i&&(i=Gy(t,i,function(a){return Math.max(a.minReadableWidth,a.minWidth)})),i&&(i=Gy(t,i,function(a){return a.minWidth})),i=Math.abs(i),!e.settings.horizontalPageBreak&&i>.1/n.scaleFactor()&&(i=i<1?i:Math.round(i),console.warn("Of the table content, ".concat(i," units width could not fit page"))),lq(e),uq(e,n),sq(e)}function oq(n,e){var t=n.scaleFactor(),r=e.settings.horizontalPageBreak,i=_8(n,e);e.allRows().forEach(function(a){for(var o=0,s=e.columns;o<s.length;o++){var u=s[o],f=a.cells[u.index];if(f){var h=e.hooks.didParseCell;e.callCellHooks(n,h,f,a,u,null);var p=f.padding("horizontal");f.contentWidth=qg(f.text,f.styles,n)+p;var g=qg(f.text.join(" ").split(/[^\S\u00A0]+/),f.styles,n);if(f.minReadableWidth=g+f.padding("horizontal"),typeof f.styles.cellWidth=="number")f.minWidth=f.styles.cellWidth,f.wrappedWidth=f.styles.cellWidth;else if(f.styles.cellWidth==="wrap"||r===!0)f.contentWidth>i?(f.minWidth=i,f.wrappedWidth=i):(f.minWidth=f.contentWidth,f.wrappedWidth=f.contentWidth);else{var m=10/t;f.minWidth=f.styles.minCellWidth||m,f.wrappedWidth=f.contentWidth,f.minWidth>f.wrappedWidth&&(f.wrappedWidth=f.minWidth)}}}}),e.allRows().forEach(function(a){for(var o=0,s=e.columns;o<s.length;o++){var u=s[o],f=a.cells[u.index];if(f&&f.colSpan===1)u.wrappedWidth=Math.max(u.wrappedWidth,f.wrappedWidth),u.minWidth=Math.max(u.minWidth,f.minWidth),u.minReadableWidth=Math.max(u.minReadableWidth,f.minReadableWidth);else{var h=e.styles.columnStyles[u.dataKey]||e.styles.columnStyles[u.index]||{},p=h.cellWidth||h.minCellWidth;p&&typeof p=="number"&&(u.minWidth=p,u.wrappedWidth=p)}f&&(f.colSpan>1&&!u.minWidth&&(u.minWidth=f.minWidth),f.colSpan>1&&!u.wrappedWidth&&(u.wrappedWidth=f.minWidth))}})}function Gy(n,e,t){for(var r=e,i=n.reduce(function(m,_){return m+_.wrappedWidth},0),a=0;a<n.length;a++){var o=n[a],s=o.wrappedWidth/i,u=r*s,f=o.width+u,h=t(o),p=f<h?h:f;e-=p-o.width,o.width=p}if(e=Math.round(e*1e10)/1e10,e){var g=n.filter(function(m){return e<0?m.width>t(m):!0});g.length&&(e=Gy(g,e,t))}return e}function sq(n){for(var e={},t=1,r=n.allRows(),i=0;i<r.length;i++)for(var a=r[i],o=0,s=n.columns;o<s.length;o++){var u=s[o],f=e[u.index];if(t>1)t--,delete a.cells[u.index];else if(f)f.cell.height+=a.height,t=f.cell.colSpan,delete a.cells[u.index],f.left--,f.left<=1&&delete e[u.index];else{var h=a.cells[u.index];if(!h)continue;if(h.height=a.height,h.rowSpan>1){var p=r.length-i,g=h.rowSpan>p?p:h.rowSpan;e[u.index]={cell:h,left:g,row:a}}}}}function lq(n){for(var e=n.allRows(),t=0;t<e.length;t++)for(var r=e[t],i=null,a=0,o=0,s=0;s<n.columns.length;s++){var u=n.columns[s];if(o-=1,o>1&&n.columns[s+1])a+=u.width,delete r.cells[u.index];else if(i){var f=i;delete r.cells[u.index],i=null,f.width=u.width+a}else{var f=r.cells[u.index];if(!f)continue;if(o=f.colSpan,a=0,f.colSpan>1){i=f,a+=u.width;continue}f.width=u.width+a}}}function uq(n,e){for(var t={count:0,height:0},r=0,i=n.allRows();r<i.length;r++){for(var a=i[r],o=0,s=n.columns;o<s.length;o++){var u=s[o],f=a.cells[u.index];if(f){e.applyStyles(f.styles,!0);var h=f.width-f.padding("horizontal");if(f.styles.overflow==="linebreak")f.text=e.splitTextToSize(f.text,h+1/e.scaleFactor(),{fontSize:f.styles.fontSize});else if(f.styles.overflow==="ellipsize")f.text=P4(f.text,h,f.styles,e,"...");else if(f.styles.overflow==="hidden")f.text=P4(f.text,h,f.styles,e,"");else if(typeof f.styles.overflow=="function"){var p=f.styles.overflow(f.text,h);typeof p=="string"?f.text=[p]:f.text=p}f.contentHeight=f.getContentHeight(e.scaleFactor(),e.getLineHeightFactor());var g=f.contentHeight/f.rowSpan;f.rowSpan>1&&t.count*t.height<g*f.rowSpan?t={height:g,count:f.rowSpan}:t&&t.count>0&&t.height>g&&(g=t.height),g>a.height&&(a.height=g)}}t.count--}}function P4(n,e,t,r,i){return n.map(function(a){return cq(a,e,t,r,i)})}function cq(n,e,t,r,i){var a=1e4*r.scaleFactor();if(e=Math.ceil(e*a)/a,e>=qg(n,t,r))return n;for(;e<qg(n+i,t,r)&&!(n.length<=1);)n=n.substring(0,n.length-1);return n.trim()+i}function C8(n,e){var t=new dd(n),r=fq(e,t.scaleFactor()),i=new rq(e,r);return aq(t,i),t.applyStyles(t.userStyles),i}function fq(n,e){var t=n.content,r=dq(t.columns);if(t.head.length===0){var i=L4(r,"head");i&&t.head.push(i)}if(t.foot.length===0){var i=L4(r,"foot");i&&t.foot.push(i)}var a=n.settings.theme,o=n.styles;return{columns:r,head:Pv("head",t.head,r,o,a,e),body:Pv("body",t.body,r,o,a,e),foot:Pv("foot",t.foot,r,o,a,e)}}function Pv(n,e,t,r,i,a){var o={},s=e.map(function(u,f){for(var h=0,p={},g=0,m=0,_=0,b=t;_<b.length;_++){var T=b[_];if(o[T.index]==null||o[T.index].left===0)if(m===0){var S=void 0;Array.isArray(u)?S=u[T.index-g-h]:S=u[T.dataKey];var D={};typeof S=="object"&&!Array.isArray(S)&&(D=(S==null?void 0:S.styles)||{});var B=pq(n,T,f,i,r,a,D),V=new S8(S,B,n);p[T.dataKey]=V,p[T.index]=V,m=V.colSpan-1,o[T.index]={left:V.rowSpan-1,times:m}}else m--,g++;else o[T.index].left--,m=o[T.index].times,h++}return new E8(u,f,n,p)});return s}function L4(n,e){var t={};return n.forEach(function(r){if(r.raw!=null){var i=hq(e,r.raw);i!=null&&(t[r.dataKey]=i)}}),Object.keys(t).length>0?t:null}function hq(n,e){if(n==="head"){if(typeof e=="object")return e.header||null;if(typeof e=="string"||typeof e=="number")return e}else if(n==="foot"&&typeof e=="object")return e.footer;return null}function dq(n){return n.map(function(e,t){var r,i;return typeof e=="object"?i=(r=e.dataKey)!==null&&r!==void 0?r:t:i=t,new iq(i,e,t)})}function pq(n,e,t,r,i,a,o){var s=qz(r),u;n==="head"?u=i.headStyles:n==="body"?u=i.bodyStyles:n==="foot"&&(u=i.footStyles);var f=zu({},s.table,s[n],i.styles,u),h=i.columnStyles[e.dataKey]||i.columnStyles[e.index]||{},p=n==="body"?h:{},g=n==="body"&&t%2===0?zu({},s.alternateRow,i.alternateRowStyles):{},m=zz(a),_=zu({},m,f,g,p);return zu(_,o)}function gq(n,e,t){var r;t===void 0&&(t={});var i=_8(n,e),a=new Map,o=[],s=[],u=[];Array.isArray(e.settings.horizontalPageBreakRepeat)?u=e.settings.horizontalPageBreakRepeat:(typeof e.settings.horizontalPageBreakRepeat=="string"||typeof e.settings.horizontalPageBreakRepeat=="number")&&(u=[e.settings.horizontalPageBreakRepeat]),u.forEach(function(g){var m=e.columns.find(function(_){return _.dataKey===g||_.index===g});m&&!a.has(m.index)&&(a.set(m.index,!0),o.push(m.index),s.push(e.columns[m.index]),i-=m.wrappedWidth)});for(var f=!0,h=(r=t==null?void 0:t.start)!==null&&r!==void 0?r:0;h<e.columns.length;){if(a.has(h)){h++;continue}var p=e.columns[h].wrappedWidth;if(f||i>=p)f=!1,o.push(h),s.push(e.columns[h]),i-=p;else break;h++}return{colIndexes:o,columns:s,lastIndex:h-1}}function mq(n,e){for(var t=[],r=0;r<e.columns.length;r++){var i=gq(n,e,{start:r});i.columns.length&&(t.push(i),r=i.lastIndex)}return t}function T8(n,e){var t=e.settings,r=t.startY,i=t.margin,a={x:i.left,y:r},o=e.getHeadHeight(e.columns)+e.getFootHeight(e.columns),s=r+i.bottom+o;if(t.pageBreak==="avoid"){var u=e.body,f=u.reduce(function(g,m){return g+m.height},0);s+=f}var h=new dd(n);(t.pageBreak==="always"||t.startY!=null&&s>h.pageSize().height)&&(R8(h),a.y=i.top),e.callWillDrawPageHooks(h,a);var p=zu({},a);e.startPageNumber=h.pageNumber(),t.horizontalPageBreak?vq(h,e,p,a):(h.applyStyles(h.userStyles),(t.showHead==="firstPage"||t.showHead==="everyPage")&&e.head.forEach(function(g){return tc(h,e,g,a,e.columns)}),h.applyStyles(h.userStyles),e.body.forEach(function(g,m){var _=m===e.body.length-1;Hg(h,e,g,_,p,a,e.columns)}),h.applyStyles(h.userStyles),(t.showFoot==="lastPage"||t.showFoot==="everyPage")&&e.foot.forEach(function(g){return tc(h,e,g,a,e.columns)})),y8(h,e,p,a),e.callEndPageHooks(h,a),e.finalY=a.y,n.lastAutoTable=e,h.applyStyles(h.userStyles)}function vq(n,e,t,r){var i=mq(n,e),a=e.settings;if(a.horizontalPageBreakBehaviour==="afterAllRows")i.forEach(function(f,h){n.applyStyles(n.userStyles),h>0?G1(n,e,t,r,f.columns,!0):k4(n,e,r,f.columns),yq(n,e,t,r,f.columns),Lv(n,e,r,f.columns)});else for(var o=-1,s=i[0],u=function(){var f=o;if(s){n.applyStyles(n.userStyles);var h=s.columns;o>=0?G1(n,e,t,r,h,!0):k4(n,e,r,h),f=M4(n,e,o+1,r,h),Lv(n,e,r,h)}var p=f-o;i.slice(1).forEach(function(g){n.applyStyles(n.userStyles),G1(n,e,t,r,g.columns,!0),M4(n,e,o+1,r,g.columns,p),Lv(n,e,r,g.columns)}),o=f};o<e.body.length-1;)u()}function k4(n,e,t,r){var i=e.settings;n.applyStyles(n.userStyles),(i.showHead==="firstPage"||i.showHead==="everyPage")&&e.head.forEach(function(a){return tc(n,e,a,t,r)})}function yq(n,e,t,r,i){n.applyStyles(n.userStyles),e.body.forEach(function(a,o){var s=o===e.body.length-1;Hg(n,e,a,s,t,r,i)})}function M4(n,e,t,r,i,a){n.applyStyles(n.userStyles),a=a??e.body.length;var o=Math.min(t+a,e.body.length),s=-1;return e.body.slice(t,o).forEach(function(u,f){var h=t+f===e.body.length-1,p=I8(n,e,h,r);u.canEntireRowFit(p,i)&&(tc(n,e,u,r,i),s=t+f)}),s}function Lv(n,e,t,r){var i=e.settings;n.applyStyles(n.userStyles),(i.showFoot==="lastPage"||i.showFoot==="everyPage")&&e.foot.forEach(function(a){return tc(n,e,a,t,r)})}function xq(n,e,t){var r=t.getLineHeight(n.styles.fontSize),i=n.padding("vertical"),a=Math.floor((e-i)/r);return Math.max(0,a)}function _q(n,e,t,r){var i={};n.spansMultiplePages=!0,n.height=0;for(var a=0,o=0,s=t.columns;o<s.length;o++){var u=s[o],f=n.cells[u.index];if(f){Array.isArray(f.text)||(f.text=[f.text]);var h=new S8(f.raw,f.styles,f.section);h=zu(h,f),h.text=[];var p=xq(f,e,r);f.text.length>p&&(h.text=f.text.splice(p,f.text.length));var g=r.scaleFactor(),m=r.getLineHeightFactor();f.contentHeight=f.getContentHeight(g,m),f.contentHeight>=e&&(f.contentHeight=e,h.styles.minCellHeight-=e),f.contentHeight>n.height&&(n.height=f.contentHeight),h.contentHeight=h.getContentHeight(g,m),h.contentHeight>a&&(a=h.contentHeight),i[u.index]=h}}var _=new E8(n.raw,-1,n.section,i,!0);_.height=a;for(var b=0,T=t.columns;b<T.length;b++){var u=T[b],h=_.cells[u.index];h&&(h.height=_.height);var f=n.cells[u.index];f&&(f.height=n.height)}return _}function wq(n,e,t,r){var i=n.pageSize().height,a=r.settings.margin,o=a.top+a.bottom,s=i-o;e.section==="body"&&(s-=r.getHeadHeight(r.columns)+r.getFootHeight(r.columns));var u=e.getMinimumRowHeight(r.columns,n),f=u<t;if(u>s)return console.error("Will not be able to print row ".concat(e.index," correctly since it's minimum height is larger than page height")),!0;if(!f)return!1;var h=e.hasRowSpan(r.columns),p=e.getMaxCellHeight(r.columns)>s;return p?(h&&console.error("The content of row ".concat(e.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(h||r.settings.rowPageBreak==="avoid")}function Hg(n,e,t,r,i,a,o){var s=I8(n,e,r,a);if(t.canEntireRowFit(s,o))tc(n,e,t,a,o);else if(wq(n,t,s,e)){var u=_q(t,s,e,n);tc(n,e,t,a,o),G1(n,e,i,a,o),Hg(n,e,u,r,i,a,o)}else G1(n,e,i,a,o),Hg(n,e,t,r,i,a,o)}function tc(n,e,t,r,i){r.x=e.settings.margin.left;for(var a=0,o=i;a<o.length;a++){var s=o[a],u=t.cells[s.index];if(!u){r.x+=s.width;continue}n.applyStyles(u.styles),u.x=r.x,u.y=r.y;var f=e.callCellHooks(n,e.hooks.willDrawCell,u,t,s,r);if(f===!1){r.x+=s.width;continue}bq(n,u,r);var h=u.getTextPos();g8(u.text,h.x,h.y,{halign:u.styles.halign,valign:u.styles.valign,maxWidth:Math.ceil(u.width-u.padding("left")-u.padding("right"))},n.getDocument()),e.callCellHooks(n,e.hooks.didDrawCell,u,t,s,r),r.x+=s.width}r.y+=t.height}function bq(n,e,t){var r=e.styles;if(n.getDocument().setFillColor(n.getDocument().getFillColor()),typeof r.lineWidth=="number"){var i=x8(r.lineWidth,r.fillColor);i&&n.rect(e.x,t.y,e.width,e.height,i)}else typeof r.lineWidth=="object"&&(r.fillColor&&n.rect(e.x,t.y,e.width,e.height,"F"),Aq(n,e,t,r.lineWidth))}function Aq(n,e,t,r){var i,a,o,s;r.top&&(i=t.x,a=t.y,o=t.x+e.width,s=t.y,r.right&&(o+=.5*r.right),r.left&&(i-=.5*r.left),u(r.top,i,a,o,s)),r.bottom&&(i=t.x,a=t.y+e.height,o=t.x+e.width,s=t.y+e.height,r.right&&(o+=.5*r.right),r.left&&(i-=.5*r.left),u(r.bottom,i,a,o,s)),r.left&&(i=t.x,a=t.y,o=t.x,s=t.y+e.height,r.top&&(a-=.5*r.top),r.bottom&&(s+=.5*r.bottom),u(r.left,i,a,o,s)),r.right&&(i=t.x+e.width,a=t.y,o=t.x+e.width,s=t.y+e.height,r.top&&(a-=.5*r.top),r.bottom&&(s+=.5*r.bottom),u(r.right,i,a,o,s));function u(f,h,p,g,m){n.getDocument().setLineWidth(f),n.getDocument().line(h,p,g,m,"S")}}function I8(n,e,t,r){var i=e.settings.margin.bottom,a=e.settings.showFoot;return(a==="everyPage"||a==="lastPage"&&t)&&(i+=e.getFootHeight(e.columns)),n.pageSize().height-r.y-i}function G1(n,e,t,r,i,a){i===void 0&&(i=[]),a===void 0&&(a=!1),n.applyStyles(n.userStyles),e.settings.showFoot==="everyPage"&&!a&&e.foot.forEach(function(s){return tc(n,e,s,r,i)}),e.callEndPageHooks(n,r);var o=e.settings.margin;y8(n,e,t,r),R8(n),e.pageNumber++,r.x=o.left,r.y=o.top,t.y=o.top,e.callWillDrawPageHooks(n,r),e.settings.showHead==="everyPage"&&(e.head.forEach(function(s){return tc(n,e,s,r,i)}),n.applyStyles(n.userStyles))}function R8(n){var e=n.pageNumber();n.setPage(e+1);var t=n.pageNumber();return t===e?(n.addPage(),!0):!1}function Eq(n){n.API.autoTable=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=e[0],i=A8(this,r),a=C8(this,i);return T8(this,a),this},n.API.lastAutoTable=!1,n.API.autoTableText=function(e,t,r,i){g8(e,t,r,i,this)},n.API.autoTableSetDefaults=function(e){return dd.setDefaults(e,this),this},n.autoTableSetDefaults=function(e,t){dd.setDefaults(e,t)},n.API.autoTableHtmlToJson=function(e,t){var r;if(t===void 0&&(t=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var i=new dd(this),a=b8(i,e,window,t,!1),o=a.head,s=a.body,u=((r=o[0])===null||r===void 0?void 0:r.map(function(f){return f.content}))||[];return{columns:u,rows:s,data:s}}}var kv;function Sq(n,e){var t=A8(n,e),r=C8(n,t);T8(n,r)}try{if(typeof window<"u"&&window){var B4=window,F4=B4.jsPDF||((kv=B4.jspdf)===null||kv===void 0?void 0:kv.jsPDF);F4&&Eq(F4)}}catch(n){console.error("Could not apply autoTable plugin",n)}const Cq=({showStatsModal:n,setShowStatsModal:e,loanHistory:t})=>{const r=ve.useMemo(()=>{if(!t||t.length===0)return null;const i=$=>$?$.seconds?new Date($.seconds*1e3):new Date($):null,a=t.length,o=a,s=0,u=t.flatMap($=>$.items||[]),f=u.reduce(($,ne)=>$+(ne.quantity||1),0),h={};u.forEach($=>{const ne=$.name;h[ne]=(h[ne]||0)+($.quantity||1)});const p=Object.entries(h).sort(([,$],[,ne])=>ne-$).slice(0,5).map(([$,ne])=>({name:$,count:ne})),g={};t.forEach($=>{const ne=$.clientName||"לא צוין";g[ne]=(g[ne]||0)+1});const m=Object.entries(g).sort(([,$],[,ne])=>ne-$).slice(0,5).map(([$,ne])=>({name:$,count:ne})),_={};t.forEach($=>{const ne=$.volunteerName||"לא צוין";_[ne]=(_[ne]||0)+1});const b=Object.entries(_).sort(([,$],[,ne])=>ne-$).slice(0,5).map(([$,ne])=>({name:$,count:ne})),T=new Date().getMonth(),S=new Date().getFullYear(),D=t.filter($=>{const ne=i($.pickupDate);return ne?ne.getMonth()===T&&ne.getFullYear()===S:!1}).length,B=T===0?11:T-1,V=T===0?S-1:S,Y=t.filter($=>{const ne=i($.pickupDate);return ne?ne.getMonth()===B&&ne.getFullYear()===V:!1}).length,q=t.filter($=>$.pickupDate&&$.returnDate);let P=0;if(q.length>0){const $=q.reduce((ne,U)=>{const z=i(U.pickupDate),te=i(U.returnDate);if(!z||!te)return ne;const ue=Math.ceil((te-z)/(1e3*60*60*24));return ne+Math.max(0,ue)},0);P=Math.round($/q.length)}const E=t.filter($=>$.returnInspection),C=E.reduce(($,ne)=>{var U;return(U=ne.returnInspection)!=null&&U.itemInspections?$+ne.returnInspection.itemInspections.reduce((z,te)=>z+(te.quantityReturned||0),0):$},0),M=E.reduce(($,ne)=>{var U;return(U=ne.returnInspection)!=null&&U.itemInspections?$+ne.returnInspection.itemInspections.filter(z=>z.condition==="damaged").reduce((z,te)=>z+(te.quantityReturned||0),0):$},0),R=E.reduce(($,ne)=>{var U;return(U=ne.returnInspection)!=null&&U.itemInspections?$+ne.returnInspection.itemInspections.filter(z=>z.condition==="lost").reduce((z,te)=>z+Math.max(0,(te.quantityExpected||0)-(te.quantityReturned||0)),0):$},0),L={};t.forEach($=>{const ne=$.eventType||"לא צוין";L[ne]=(L[ne]||0)+1});const j=Object.entries(L).sort(([,$],[,ne])=>ne-$).slice(0,5).map(([$,ne])=>({name:$,count:ne}));return{totalLoans:a,activeLoans:s,completedLoans:o,totalItemsLoaned:f,totalItemsReturned:C,damagedItems:M,lostItems:R,mostPopularItems:p,topBorrowers:m,topVolunteers:b,topEventTypes:j,thisMonthLoans:D,lastMonthLoans:Y,averageDuration:P,loansWithInspection:E.length}},[t]);return n?r?O.jsx("div",{className:"modal-overlay",onClick:()=>e(!1),children:O.jsxs("div",{className:"modal-box",dir:"rtl",onClick:i=>i.stopPropagation(),style:{maxWidth:"800px",maxHeight:"90vh",overflowY:"auto"},children:[O.jsx("h2",{style:{textAlign:"center",marginBottom:"2rem",color:"#2196F3"},children:"📊 סטטיסטיקות השאלות"}),O.jsxs("div",{style:{marginBottom:"2rem"},children:[O.jsx("h3",{style:{borderBottom:"2px solid #2196F3",paddingBottom:"0.5rem",marginBottom:"1rem"},children:"📈 נתונים כלליים"}),O.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"1rem"},children:[O.jsxs("div",{style:{backgroundColor:"#e3f2fd",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[O.jsx("div",{style:{fontSize:"2rem",fontWeight:"bold",color:"#1976d2"},children:r.totalLoans}),O.jsx("div",{children:'סה"כ השאלות'})]}),O.jsxs("div",{style:{backgroundColor:"#e8f5e8",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[O.jsx("div",{style:{fontSize:"2rem",fontWeight:"bold",color:"#388e3c"},children:r.completedLoans}),O.jsx("div",{children:"השאלות שהושלמו"})]}),O.jsxs("div",{style:{backgroundColor:"#fff3e0",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[O.jsx("div",{style:{fontSize:"2rem",fontWeight:"bold",color:"#f57c00"},children:r.totalItemsLoaned}),O.jsx("div",{children:"פריטים הושאלו"})]}),O.jsxs("div",{style:{backgroundColor:"#f0fdf4",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[O.jsx("div",{style:{fontSize:"2rem",fontWeight:"bold",color:"#10b981"},children:r.totalItemsReturned}),O.jsx("div",{children:"פריטים הוחזרו"})]})]})]}),O.jsxs("div",{style:{marginBottom:"2rem"},children:[O.jsx("h3",{style:{borderBottom:"2px solid #2196F3",paddingBottom:"0.5rem",marginBottom:"1rem"},children:"📅 השוואה חודשית"}),O.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[O.jsxs("div",{style:{backgroundColor:"#e3f2fd",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[O.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#1976d2"},children:r.thisMonthLoans}),O.jsx("div",{children:"השאלות החודש"})]}),O.jsxs("div",{style:{backgroundColor:"#f5f5f5",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[O.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#666"},children:r.lastMonthLoans}),O.jsx("div",{children:"השאלות החודש שעבר"})]})]}),r.lastMonthLoans>0&&O.jsx("div",{style:{textAlign:"center",marginTop:"0.5rem",fontSize:"0.9rem"},children:r.thisMonthLoans>r.lastMonthLoans?O.jsxs("span",{style:{color:"#388e3c"},children:["⬆️ עלייה של ",((r.thisMonthLoans-r.lastMonthLoans)/r.lastMonthLoans*100).toFixed(1),"%"]}):r.thisMonthLoans<r.lastMonthLoans?O.jsxs("span",{style:{color:"#d32f2f"},children:["⬇️ ירידה של ",((r.lastMonthLoans-r.thisMonthLoans)/r.lastMonthLoans*100).toFixed(1),"%"]}):O.jsx("span",{style:{color:"#666"},children:"➡️ ללא שינוי"})})]}),O.jsxs("div",{style:{marginBottom:"2rem"},children:[O.jsx("h3",{style:{borderBottom:"2px solid #2196F3",paddingBottom:"0.5rem",marginBottom:"1rem"},children:"📦 סטטיסטיקות פריטים"}),O.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"1rem",marginBottom:"1rem"},children:[O.jsxs("div",{style:{backgroundColor:"#f8f9fa",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[O.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#1976d2"},children:r.totalItemsLoaned}),O.jsx("div",{children:'סה"כ פריטים הושאלו'})]}),O.jsxs("div",{style:{backgroundColor:"#e8f5e8",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[O.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#10b981"},children:r.totalItemsReturned}),O.jsx("div",{children:"פריטים הוחזרו"})]}),r.damagedItems>0&&O.jsxs("div",{style:{backgroundColor:"#fff3e0",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[O.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#f59e0b"},children:r.damagedItems}),O.jsx("div",{children:"פריטים פגומים"})]}),r.lostItems>0&&O.jsxs("div",{style:{backgroundColor:"#ffebee",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[O.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#ef4444"},children:r.lostItems}),O.jsx("div",{children:"פריטים אבודים"})]})]}),r.mostPopularItems.length>0&&O.jsxs("div",{children:[O.jsx("h4",{style:{marginBottom:"0.5rem"},children:"🏆 הפריטים הפופולריים ביותר:"}),r.mostPopularItems.map((i,a)=>O.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0.5rem",backgroundColor:a===0?"#fff3e0":"#f5f5f5",borderRadius:"4px",marginBottom:"0.3rem"},children:[O.jsxs("span",{children:[a+1,". ",i.name]}),O.jsxs("span",{style:{fontWeight:"bold",color:"#1976d2"},children:[i.count," פעמים"]})]},a))]})]}),r.topBorrowers.length>0&&O.jsxs("div",{style:{marginBottom:"2rem"},children:[O.jsx("h3",{style:{borderBottom:"2px solid #2196F3",paddingBottom:"0.5rem",marginBottom:"1rem"},children:"👥 הלקוחות הפעילים ביותר"}),r.topBorrowers.map((i,a)=>O.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0.5rem",backgroundColor:a===0?"#e8f5e8":"#f5f5f5",borderRadius:"4px",marginBottom:"0.3rem"},children:[O.jsxs("span",{children:[a+1,". ",i.name]}),O.jsxs("span",{style:{fontWeight:"bold",color:"#388e3c"},children:[i.count," השאלות"]})]},a))]}),r.topVolunteers.length>0&&O.jsxs("div",{style:{marginBottom:"2rem"},children:[O.jsx("h3",{style:{borderBottom:"2px solid #2196F3",paddingBottom:"0.5rem",marginBottom:"1rem"},children:"🌟 המתנדבות הפעילות ביותר"}),r.topVolunteers.map((i,a)=>O.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0.5rem",backgroundColor:a===0?"#e3f2fd":"#f5f5f5",borderRadius:"4px",marginBottom:"0.3rem"},children:[O.jsxs("span",{children:[a+1,". ",i.name]}),O.jsxs("span",{style:{fontWeight:"bold",color:"#1976d2"},children:[i.count," השאלות"]})]},a))]}),r.topEventTypes.length>0&&O.jsxs("div",{style:{marginBottom:"2rem"},children:[O.jsx("h3",{style:{borderBottom:"2px solid #2196F3",paddingBottom:"0.5rem",marginBottom:"1rem"},children:"🎉 סוגי האירועים הפופולריים"}),r.topEventTypes.map((i,a)=>O.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0.5rem",backgroundColor:a===0?"#f0fdf4":"#f5f5f5",borderRadius:"4px",marginBottom:"0.3rem"},children:[O.jsxs("span",{children:[a+1,". ",i.name]}),O.jsxs("span",{style:{fontWeight:"bold",color:"#10b981"},children:[i.count," פעמים"]})]},a))]}),r.averageDuration>0&&O.jsxs("div",{style:{marginBottom:"2rem"},children:[O.jsx("h3",{style:{borderBottom:"2px solid #2196F3",paddingBottom:"0.5rem",marginBottom:"1rem"},children:"⏱️ משך השאלה ממוצע"}),O.jsxs("div",{style:{backgroundColor:"#f8f9fa",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[O.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#1976d2"},children:[r.averageDuration," ימים"]}),O.jsxs("div",{style:{fontSize:"0.9rem",color:"#666"},children:["(מבוסס על ",t.filter(i=>i.pickupDate&&i.returnDate).length," השאלות)"]})]})]}),r.loansWithInspection>0&&O.jsxs("div",{style:{marginBottom:"2rem"},children:[O.jsx("h3",{style:{borderBottom:"2px solid #2196F3",paddingBottom:"0.5rem",marginBottom:"1rem"},children:"🔍 סיכום בדיקות החזרה"}),O.jsxs("div",{style:{backgroundColor:"#f0fdf4",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[O.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#10b981"},children:r.loansWithInspection}),O.jsxs("div",{style:{fontSize:"0.9rem",color:"#666"},children:["השאלות עם בדיקת החזרה מתוך ",r.totalLoans,' סה"כ']}),O.jsxs("div",{style:{fontSize:"0.8rem",color:"#666",marginTop:"0.5rem"},children:["(",(r.loansWithInspection/r.totalLoans*100).toFixed(1),"% מהשאלות נבדקו)"]})]})]}),O.jsx("div",{className:"modal-actions",children:O.jsx("button",{className:"btn btn-blue",onClick:()=>e(!1),children:"✔️ סגור"})})]})}):O.jsx("div",{className:"modal-overlay",onClick:()=>e(!1),children:O.jsxs("div",{className:"modal-box",dir:"rtl",onClick:i=>i.stopPropagation(),children:[O.jsx("h2",{style:{textAlign:"center",marginBottom:"2rem"},children:"📊 סטטיסטיקות השאלות"}),O.jsx("p",{style:{textAlign:"center"},children:"אין נתונים זמינים"}),O.jsx("div",{className:"modal-actions",children:O.jsx("button",{className:"btn btn-gray",onClick:()=>e(!1),children:"סגור"})})]})}):null};class S0{constructor(e=0,t="Network Error"){this.status=e,this.text=t}}const Tq=()=>{if(!(typeof localStorage>"u"))return{get:n=>Promise.resolve(localStorage.getItem(n)),set:(n,e)=>Promise.resolve(localStorage.setItem(n,e)),remove:n=>Promise.resolve(localStorage.removeItem(n))}},ua={origin:"https://api.emailjs.com",blockHeadless:!1,storageProvider:Tq()},px=n=>n?typeof n=="string"?{publicKey:n}:n.toString()==="[object Object]"?n:{}:{},Iq=(n,e="https://api.emailjs.com")=>{if(!n)return;const t=px(n);ua.publicKey=t.publicKey,ua.blockHeadless=t.blockHeadless,ua.storageProvider=t.storageProvider,ua.blockList=t.blockList,ua.limitRate=t.limitRate,ua.origin=t.origin||e},N8=async(n,e,t={})=>{const r=await fetch(ua.origin+n,{method:"POST",headers:t,body:e}),i=await r.text(),a=new S0(r.status,i);if(r.ok)return a;throw a},O8=(n,e,t)=>{if(!n||typeof n!="string")throw"The public key is required. Visit https://dashboard.emailjs.com/admin/account";if(!e||typeof e!="string")throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!t||typeof t!="string")throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates"},Rq=n=>{if(n&&n.toString()!=="[object Object]")throw"The template params have to be the object. Visit https://www.emailjs.com/docs/sdk/send/"},D8=n=>n.webdriver||!n.languages||n.languages.length===0,P8=()=>new S0(451,"Unavailable For Headless Browser"),Nq=(n,e)=>{if(!Array.isArray(n))throw"The BlockList list has to be an array";if(typeof e!="string")throw"The BlockList watchVariable has to be a string"},Oq=n=>{var e;return!((e=n.list)!=null&&e.length)||!n.watchVariable},Dq=(n,e)=>n instanceof FormData?n.get(e):n[e],L8=(n,e)=>{if(Oq(n))return!1;Nq(n.list,n.watchVariable);const t=Dq(e,n.watchVariable);return typeof t!="string"?!1:n.list.includes(t)},k8=()=>new S0(403,"Forbidden"),Pq=(n,e)=>{if(typeof n!="number"||n<0)throw"The LimitRate throttle has to be a positive number";if(e&&typeof e!="string")throw"The LimitRate ID has to be a non-empty string"},Lq=async(n,e,t)=>{const r=Number(await t.get(n)||0);return e-Date.now()+r},M8=async(n,e,t)=>{if(!e.throttle||!t)return!1;Pq(e.throttle,e.id);const r=e.id||n;return await Lq(r,e.throttle,t)>0?!0:(await t.set(r,Date.now().toString()),!1)},B8=()=>new S0(429,"Too Many Requests"),kq=async(n,e,t,r)=>{const i=px(r),a=i.publicKey||ua.publicKey,o=i.blockHeadless||ua.blockHeadless,s=i.storageProvider||ua.storageProvider,u={...ua.blockList,...i.blockList},f={...ua.limitRate,...i.limitRate};return o&&D8(navigator)?Promise.reject(P8()):(O8(a,n,e),Rq(t),t&&L8(u,t)?Promise.reject(k8()):await M8(location.pathname,f,s)?Promise.reject(B8()):N8("/api/v1.0/email/send",JSON.stringify({lib_version:"4.4.1",user_id:a,service_id:n,template_id:e,template_params:t}),{"Content-type":"application/json"}))},Mq=n=>{if(!n||n.nodeName!=="FORM")throw"The 3rd parameter is expected to be the HTML form element or the style selector of the form"},Bq=n=>typeof n=="string"?document.querySelector(n):n,Fq=async(n,e,t,r)=>{const i=px(r),a=i.publicKey||ua.publicKey,o=i.blockHeadless||ua.blockHeadless,s=ua.storageProvider||i.storageProvider,u={...ua.blockList,...i.blockList},f={...ua.limitRate,...i.limitRate};if(o&&D8(navigator))return Promise.reject(P8());const h=Bq(t);O8(a,n,e),Mq(h);const p=new FormData(h);return L8(u,p)?Promise.reject(k8()):await M8(location.pathname,f,s)?Promise.reject(B8()):(p.append("lib_version","4.4.1"),p.append("service_id",n),p.append("template_id",e),p.append("user_id",a),N8("/api/v1.0/email/send-form",p))},j4={init:Iq,send:kq,sendForm:Fq,EmailJSResponseStatus:S0},Mv={serviceId:"service_zbzqfa3",templateId:"template_02cqfdn",publicKey:"gJHtAe_l22dY8tKju"},jq=()=>{const[n,e]=ve.useState(!1),[t,r]=ve.useState(null),[i,a]=ve.useState(null);ve.useEffect(()=>{j4.init(Mv.publicKey),s();const f=setInterval(()=>{new Date().getHours()===9&&s()},60*60*1e3);return()=>clearInterval(f)},[]);const o=f=>f?new Date(f).toLocaleDateString("he-IL",{year:"numeric",month:"long",day:"numeric",weekday:"long"}):"",s=async()=>{var f,h;e(!0),a(null);try{const p=new Date,g=new Date(p);g.setDate(p.getDate()+2);const m=g.toISOString().split("T")[0];console.log(`📅 Checking for orders returning on: ${m}`);const _=Wu(Tr(nn,"orders"),Ju("status","in",["active","confirmed","picked_up","open"]),Ju("returnDate","==",m)),b=await bi(_),T={totalFound:b.size,emailsSent:0,alreadySent:0,errors:[]};if(b.empty){a({...T,message:"לא נמצאו הזמנות הדורשות תזכורת היום"}),r(new Date);return}for(const S of b.docs){const D=S.data(),B=S.id;if(D.reminderSent){T.alreadySent++;continue}try{const V={to_email:D.email,to_name:D.clientName,client_name:D.clientName,return_date:o(D.returnDate),volunteer_name:D.volunteerName||"צוות הארגון",volunteer_phone:D.phone||"לא צוין",organization_name:"גמח שמחת זקנתי",items_list:((f=D.items)==null?void 0:f.map(q=>`• ${q.name} - כמות: ${q.quantity}`).join(`
`))||"לא צוינו פריטים",total_items:((h=D.items)==null?void 0:h.reduce((q,P)=>q+P.quantity,0))||0,event_type:D.eventType||"כללי",pickup_date:o(D.pickupDate),order_id:B},Y=await j4.send(Mv.serviceId,Mv.templateId,V);console.log("✅ Email sent successfully:",Y),await cl(Jr(nn,"orders",B),{reminderSent:!0,reminderSentAt:Ai.now(),emailSentResult:{status:Y.status,text:Y.text,sentAt:new Date().toISOString()}}),T.emailsSent++}catch(V){console.error(`❌ Failed to send reminder for order ${B}:`,V),T.errors.push({orderId:B,email:D.email,clientName:D.clientName,error:V.message})}}a({...T,message:`בדיקה הושלמה: ${T.emailsSent} תזכורות נשלחו`})}catch(p){console.error("❌ Error in reminder check:",p),a({totalFound:0,emailsSent:0,errors:[{error:p.message}],message:"שגיאה בבדיקת תזכורות"})}finally{e(!1),r(new Date)}},u=()=>{s()};return O.jsxs("div",{style:{padding:"2rem",maxWidth:"800px",margin:"0 auto",fontFamily:"Arial, sans-serif"},dir:"rtl",children:[O.jsxs("div",{style:{background:"linear-gradient(to right, #3b82f6, #1e40af)",color:"white",padding:"2rem",borderRadius:"12px",marginBottom:"2rem",textAlign:"center"},children:[O.jsx("h1",{style:{margin:0,fontSize:"1.8rem"},children:"📧 מערכת תזכורות אוטומטית"}),O.jsx("p",{style:{margin:"0.5rem 0 0 0",opacity:.9},children:"תזכורות להחזרת פריטים - 2 ימים לפני תאריך החזרה"})]}),O.jsxs("div",{style:{background:"white",border:"1px solid #e5e7eb",borderRadius:"12px",padding:"2rem",marginBottom:"2rem",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[O.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[O.jsx("h2",{style:{margin:0,color:"#1f2937"},children:"סטטוס המערכת"}),O.jsx("button",{onClick:u,disabled:n,style:{background:n?"#9ca3af":"#10b981",color:"white",border:"none",padding:"0.75rem 1.5rem",borderRadius:"8px",cursor:n?"not-allowed":"pointer",fontSize:"1rem",fontWeight:"bold"},children:n?"🔄 בודק...":"🔍 בדוק תזכורות"})]}),t&&O.jsxs("div",{style:{background:"#f3f4f6",padding:"1rem",borderRadius:"8px",marginBottom:"1rem",fontSize:"0.9rem",color:"#6b7280"},children:[O.jsx("strong",{children:"בדיקה אחרונה:"})," ",t.toLocaleString("he-IL")]}),i&&O.jsxs("div",{style:{background:i.errors.length>0?"#fef2f2":"#f0fdf4",border:`1px solid ${i.errors.length>0?"#fecaca":"#bbf7d0"}`,borderRadius:"8px",padding:"1.5rem"},children:[O.jsx("h3",{style:{margin:"0 0 1rem 0",color:i.errors.length>0?"#dc2626":"#059669"},children:i.message}),O.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(120px, 1fr))",gap:"1rem",marginBottom:"1rem"},children:[O.jsxs("div",{style:{textAlign:"center"},children:[O.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#3b82f6"},children:i.totalFound}),O.jsx("div",{style:{fontSize:"0.875rem",color:"#6b7280"},children:"נמצאו"})]}),O.jsxs("div",{style:{textAlign:"center"},children:[O.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#10b981"},children:i.emailsSent}),O.jsx("div",{style:{fontSize:"0.875rem",color:"#6b7280"},children:"נשלחו"})]}),O.jsxs("div",{style:{textAlign:"center"},children:[O.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#f59e0b"},children:i.alreadySent}),O.jsx("div",{style:{fontSize:"0.875rem",color:"#6b7280"},children:"כבר נשלחו"})]}),O.jsxs("div",{style:{textAlign:"center"},children:[O.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#ef4444"},children:i.errors.length}),O.jsx("div",{style:{fontSize:"0.875rem",color:"#6b7280"},children:"שגיאות"})]})]}),i.errors.length>0&&O.jsxs("div",{style:{background:"white",border:"1px solid #fecaca",borderRadius:"6px",padding:"1rem"},children:[O.jsx("h4",{style:{margin:"0 0 0.5rem 0",color:"#dc2626"},children:"שגיאות:"}),i.errors.map((f,h)=>O.jsxs("div",{style:{fontSize:"0.875rem",color:"#7f1d1d",marginBottom:"0.25rem"},children:[f.clientName?`${f.clientName} (${f.email})`:"שגיאה כללית",": ",f.error]},h))]})]})]}),O.jsxs("div",{style:{background:"#fffbeb",border:"1px solid #fed7aa",borderRadius:"12px",padding:"2rem"},children:[O.jsx("h3",{style:{margin:"0 0 1rem 0",color:"#92400e"},children:"🔧 הוראות למנהלי המערכת"}),O.jsxs("ul",{style:{color:"#92400e",paddingRight:"1.5rem"},children:[O.jsx("li",{children:"המערכת בודקת אוטומטית כל יום ב-9:00 בבוקר"}),O.jsx("li",{children:"ניתן להפעיל בדיקה ידנית בכל עת באמצעות הכפתור למעלה"}),O.jsx("li",{children:"תזכורות נשלחות רק פעם אחת לכל הזמנה"}),O.jsx("li",{children:"המערכת שולחת תזכורות 2 ימים לפני תאריך ההחזרה"}),O.jsx("li",{children:"כל התזכורות נרשמות במסד הנתונים למעקב"})]})]})]})},Uq=()=>{var P,E;const[n,e]=ve.useState([]),[t,r]=ve.useState([]),[i,a]=ve.useState(null),[o,s]=ve.useState(""),[u,f]=ve.useState(""),[h,p]=ve.useState(""),[g,m]=ve.useState(!0),[_,b]=ve.useState(!1);ve.useEffect(()=>{(async()=>{try{m(!0),console.log("🔍 מחפש את כל ההזמנות...");const M=Wu(Tr(nn,"orders")),L=(await bi(M)).docs.map(ue=>({id:ue.id,...ue.data()}));console.log("📋 כל ההזמנות:",L),console.log("📊 סטטוסים:",L.map(ue=>({id:ue.id,client:ue.clientName,status:ue.status}))),console.log("🔍 מחפש הזמנות סגורות...");const j=Wu(Tr(nn,"orders"),Ju("status","==","closed")),ne=(await bi(j)).docs.map(ue=>({id:ue.id,...ue.data()}));console.log("✅ הזמנות סגורות:",ne),e(ne),console.log("🔍 מחפש הזמנות שהוחזרו...");const U=Wu(Tr(nn,"orders"),Ju("status","==","returned")),te=(await bi(U)).docs.map(ue=>({id:ue.id,...ue.data()}));console.log("🔄 הזמנות שהוחזרו:",te)}catch(M){console.error("❌ שגיאה בטעינת ההזמנות:",M)}finally{m(!1)}})()},[]);const T=C=>C?(C.seconds?new Date(C.seconds*1e3):new Date(C)).toLocaleDateString("he-IL",{year:"numeric",month:"2-digit",day:"2-digit"}):"",S=C=>C?(C.seconds?new Date(C.seconds*1e3):new Date(C)).toLocaleString("he-IL",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}):"",D=C=>{var U;if(!((U=C.returnInspection)!=null&&U.itemInspections))return{totalItemsExpected:0,totalItemsReturned:0,totalItemsNotReturned:0,totalDamagedItems:0,totalLostItems:0};const M=C.returnInspection.itemInspections,R=M.reduce((z,te)=>z+(te.quantityExpected||0),0),L=M.reduce((z,te)=>z+(te.quantityReturned||0),0),j=M.reduce((z,te)=>z+Math.max(0,(te.quantityExpected||0)-(te.quantityReturned||0)),0),$=M.filter(z=>z.condition==="damaged").reduce((z,te)=>z+(te.quantityReturned||0),0),ne=M.filter(z=>z.condition==="lost").reduce((z,te)=>z+Math.max(0,(te.quantityExpected||0)-(te.quantityReturned||0)),0);return{totalItemsExpected:R,totalItemsReturned:L,totalItemsNotReturned:j,totalDamagedItems:$,totalLostItems:ne}};ve.useEffect(()=>{const C=u?new Date(u):null,M=h?new Date(h):null,R=n.filter(L=>{var te,ue,X;const j=((te=L.clientName)==null?void 0:te.toLowerCase().includes(o.toLowerCase()))||"",$=((ue=L.phone)==null?void 0:ue.includes(o))||"",ne=j||$,U=(X=L.pickupDate)!=null&&X.seconds?new Date(L.pickupDate.seconds*1e3):new Date(L.pickupDate),z=(!C||U>=C)&&(!M||U<=M);return ne&&z});r(R)},[o,u,h,n]);const B=C=>{switch(C){case"good":return O.jsx(Ny,{size:16,style:{color:"#10b981"}});case"damaged":return O.jsx(EV,{size:16,style:{color:"#f59e0b"}});case"lost":return O.jsx(tV,{size:16,style:{color:"#ef4444"}});default:return O.jsx(Kf,{size:16,style:{color:"#6b7280"}})}},V=C=>{switch(C){case"good":return"תקין";case"damaged":return"פגום";case"lost":return"אבד/לא הוחזר";default:return"לא נבדק"}},Y=C=>{switch(C){case"good":return"#10b981";case"damaged":return"#f59e0b";case"lost":return"#ef4444";default:return"#6b7280"}},q=C=>{var j,$,ne;const M=new qt,R=D(C);M.setFont("helvetica"),M.setFontSize(16),M.text(`דוח השאלה - ${C.clientName}`,20,20),M.setFontSize(12),M.text(`מתנדבת: ${C.volunteerName}`,20,35),M.text(`טלפון: ${C.phone}`,20,45),M.text(`כתובת: ${C.address}`,20,55),M.text(`תאריך איסוף: ${T(C.pickupDate)}`,20,65),M.text(`תאריך החזרה: ${T(C.returnDate)}`,20,75),M.text(`סוג אירוע: ${C.eventType}`,20,85);const L=((j=C.items)==null?void 0:j.map((U,z)=>{var te,ue,X,me,G,Q;return[z+1,U.name,U.quantity,((X=(ue=(te=C.returnInspection)==null?void 0:te.itemInspections)==null?void 0:ue.find(ee=>ee.itemId===U.id))==null?void 0:X.quantityReturned)||"לא נבדק",((Q=(G=(me=C.returnInspection)==null?void 0:me.itemInspections)==null?void 0:G.find(ee=>ee.itemId===U.id))==null?void 0:Q.condition)||"לא נבדק"]}))||[];if(Sq(M,{head:[["#","פריט","הושאל","הוחזר","מצב"]],body:L,startY:95,styles:{fontSize:10}}),C.returnInspection){const U=M.lastAutoTable.finalY+15;M.setFontSize(14),M.text("סיכום בדיקת החזרה:",20,U),M.setFontSize(11),M.text(`סה"כ פריטים שהושאלו: ${R.totalItemsExpected}`,20,U+15),M.text(`סה"כ פריטים שהוחזרו: ${R.totalItemsReturned}`,20,U+25),M.text(`פריטים שלא הוחזרו: ${R.totalItemsNotReturned}`,20,U+35),M.text(`פריטים פגומים: ${R.totalDamagedItems}`,20,U+45),M.text(`פריטים אבודים: ${R.totalLostItems}`,20,U+55),M.text(`עלות נזקים: ₪${(($=C.returnInspection.summary)==null?void 0:$.totalRepairCost)||0}`,20,U+65),(ne=C.returnInspection.summary)!=null&&ne.managerNotes&&M.text(`הערות: ${C.returnInspection.summary.managerNotes}`,20,U+75),M.text(`תאריך בדיקה: ${S(C.returnInspection.completedAt)}`,20,U+85)}M.save(`השאלה_${C.clientName}_${T(C.pickupDate)}.pdf`)};return g?O.jsx("div",{className:"flex items-center justify-center min-h-screen",children:O.jsxs("div",{className:"text-center",children:[O.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),O.jsx("p",{className:"text-gray-600",children:"טוען היסטוריית השאלות..."})]})}):O.jsxs("div",{style:{padding:"1rem",maxWidth:"1200px",margin:"0 auto",fontFamily:"Arial, sans-serif"},dir:"rtl",children:[O.jsx("style",{children:`
        @media (max-width: 768px) {
          .date-input {
            appearance: none !important;
            -webkit-appearance: none !important;
            -moz-appearance: none !important;
            background: white !important;
            border: 2px solid #e5e7eb !important;
            border-radius: 8px !important;
            padding: 12px !important;
            font-size: 16px !important;
            text-align: center !important;
            direction: ltr !important;
            width: 100% !important;
            box-sizing: border-box !important;
            cursor: pointer !important;
            letter-spacing: 1px !important;
          }
          
          .date-input::-webkit-calendar-picker-indicator {
            opacity: 0 !important;
            position: absolute !important;
            left: 0 !important;
            right: 0 !important;
            width: 100% !important;
            height: 100% !important;
            cursor: pointer !important;
            background: transparent !important;
          }
          
          .date-input::-webkit-inner-spin-button,
          .date-input::-webkit-outer-spin-button {
            opacity: 0 !important;
            -webkit-appearance: none !important;
            margin: 0 !important;
          }
        }
      `}),O.jsxs("div",{style:{background:"linear-gradient(to right, #3b82f6, #1e40af)",color:"white",padding:"1.5rem",borderRadius:"12px",marginBottom:"2rem",display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:"1rem"},children:[O.jsxs("div",{style:{textAlign:window.innerWidth<768?"center":"right",flex:"1"},children:[O.jsx("h1",{style:{fontSize:"1.8rem",fontWeight:"bold",margin:0,marginBottom:"0.5rem"},children:"📚 היסטוריית השאלות"}),O.jsx("p",{style:{fontSize:"0.95rem",opacity:.9,margin:0},children:"כל ההזמנות שהושלמו עם פרטי בדיקת החזרה"})]}),O.jsxs("button",{onClick:()=>b(!0),style:{background:"rgba(255, 255, 255, 0.2)",border:"2px solid rgba(255, 255, 255, 0.3)",color:"white",padding:"0.75rem 1.5rem",borderRadius:"8px",cursor:"pointer",fontSize:"1rem",fontWeight:"bold",display:"flex",alignItems:"center",gap:"0.5rem",transition:"all 0.2s ease",backdropFilter:"blur(10px)",whiteSpace:"nowrap"},onMouseEnter:C=>{C.currentTarget.style.background="rgba(255, 255, 255, 0.3)",C.currentTarget.style.transform="translateY(-2px)"},onMouseLeave:C=>{C.currentTarget.style.background="rgba(255, 255, 255, 0.2)",C.currentTarget.style.transform="translateY(0)"},children:[O.jsx(XU,{size:20}),"📊 סטטיסטיקות"]})]}),!i&&O.jsxs(O.Fragment,{children:[O.jsxs("div",{style:{background:"white",padding:window.innerWidth<768?"1rem":"1.5rem",borderRadius:"12px",marginBottom:"2rem",boxShadow:"0 2px 8px rgba(0,0,0,0.1)",border:"1px solid #e5e7eb"},children:[O.jsxs("div",{style:{display:"flex",flexDirection:window.innerWidth<768?"column":"row",gap:"1rem",alignItems:window.innerWidth<768?"stretch":"end"},children:[O.jsxs("div",{style:{flex:window.innerWidth<768?"none":"2"},children:[O.jsxs("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:"#374151",marginBottom:"0.5rem"},children:[O.jsx(GS,{size:16,style:{display:"inline",marginLeft:"0.25rem"}}),"חיפוש לפי שם לקוח או טלפון"]}),O.jsx("input",{type:"text",value:o,onChange:C=>s(C.target.value),style:{width:"100%",padding:"0.75rem",border:"2px solid #e5e7eb",borderRadius:"8px",fontSize:"1rem",boxSizing:"border-box"},placeholder:"הקלד שם או טלפון..."})]}),O.jsxs("div",{style:{flex:"1"},children:[O.jsxs("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:"#374151",marginBottom:"0.5rem"},children:[O.jsx(a0,{size:16,style:{display:"inline",marginLeft:"0.25rem"}}),"מתאריך"]}),O.jsx("input",{type:"date",value:u,onChange:C=>f(C.target.value),className:"date-input",style:{width:"100%",padding:"0.75rem",border:"2px solid #e5e7eb",borderRadius:"8px",fontSize:"1rem",boxSizing:"border-box"}})]}),O.jsxs("div",{style:{flex:"1"},children:[O.jsxs("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:"#374151",marginBottom:"0.5rem"},children:[O.jsx(a0,{size:16,style:{display:"inline",marginLeft:"0.25rem"}}),"עד תאריך"]}),O.jsx("input",{type:"date",value:h,onChange:C=>p(C.target.value),className:"date-input",style:{width:"100%",padding:"0.75rem",border:"2px solid #e5e7eb",borderRadius:"8px",fontSize:"1rem",boxSizing:"border-box"}})]})]}),O.jsxs("div",{style:{marginTop:"1rem",padding:"0.75rem",background:"#f3f4f6",borderRadius:"8px",fontSize:"0.875rem",color:"#374151"},children:["נמצאו ",t.length," השאלות מתוך ",n.length,' סה"כ']})]}),O.jsx("div",{style:{display:"grid",gridTemplateColumns:window.innerWidth<768?"1fr":window.innerWidth<1024?"repeat(2, 1fr)":"repeat(3, 1fr)",gap:window.innerWidth<768?"1rem":"1.5rem"},children:t.length===0?O.jsxs("div",{style:{gridColumn:"1 / -1",textAlign:"center",padding:"3rem",background:"white",borderRadius:"12px",border:"1px solid #e5e7eb"},children:[O.jsx(Kf,{size:48,style:{color:"#9ca3af",marginBottom:"1rem"}}),O.jsx("h3",{style:{fontSize:"1.25rem",color:"#6b7280",margin:0},children:"לא נמצאו השאלות"}),O.jsx("p",{style:{color:"#9ca3af",margin:"0.5rem 0 0 0"},children:"נסה לשנות את פרמטרי החיפוש"})]}):t.map(C=>{var M;return O.jsxs("div",{onClick:()=>a(C),style:{background:"white",padding:window.innerWidth<768?"1rem":"1.5rem",borderRadius:"12px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)",border:"1px solid #e5e7eb",cursor:"pointer",transition:"all 0.2s ease",width:"100%",boxSizing:"border-box"},onMouseEnter:R=>{R.currentTarget.style.boxShadow="0 4px 12px rgba(0,0,0,0.15)",R.currentTarget.style.transform="translateY(-2px)"},onMouseLeave:R=>{R.currentTarget.style.boxShadow="0 2px 8px rgba(0,0,0,0.1)",R.currentTarget.style.transform="translateY(0)"},children:[O.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"1rem",flexWrap:"wrap",gap:"0.5rem"},children:[O.jsxs("div",{style:{flex:"1",minWidth:"0"},children:[O.jsx("h3",{style:{fontSize:window.innerWidth<768?"1rem":"1.25rem",fontWeight:"bold",margin:0,color:"#1f2937",wordBreak:"break-word"},children:C.clientName}),O.jsxs("p",{style:{fontSize:window.innerWidth<768?"0.75rem":"0.875rem",color:"#6b7280",margin:"0.25rem 0 0 0",display:"flex",alignItems:"center",gap:"0.25rem"},children:[O.jsx(CV,{size:window.innerWidth<768?12:14}),C.volunteerName]})]}),O.jsx("div",{style:{background:"#10b981",color:"white",padding:"0.25rem 0.75rem",borderRadius:"20px",fontSize:window.innerWidth<768?"0.6rem":"0.75rem",fontWeight:"bold",whiteSpace:"nowrap"},children:"הושלם"})]}),O.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr",gap:"0.5rem",fontSize:window.innerWidth<768?"0.75rem":"0.875rem",color:"#6b7280"},children:[O.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[O.jsx(Ug,{size:window.innerWidth<768?12:14}),O.jsx("span",{style:{wordBreak:"break-all"},children:C.phone})]}),O.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[O.jsx(aV,{size:window.innerWidth<768?12:14}),O.jsxs("span",{style:{fontSize:window.innerWidth<768?"0.7rem":"0.875rem"},children:[T(C.pickupDate)," → ",T(C.returnDate)]})]}),O.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[O.jsx(Kf,{size:window.innerWidth<768?12:14}),(M=C.items)==null?void 0:M.reduce((R,L)=>R+L.quantity,0)," פריטים"]})]})]},C.id)})})]}),i&&O.jsxs("div",{style:{background:"white",padding:window.innerWidth<768?"1rem":"2rem",borderRadius:"12px",boxShadow:"0 4px 16px rgba(0,0,0,0.1)",border:"1px solid #e5e7eb"},children:[O.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"2rem",paddingBottom:"1rem",borderBottom:"2px solid #e5e7eb",flexWrap:"wrap",gap:"1rem"},children:[O.jsxs("div",{children:[O.jsxs("h2",{style:{fontSize:window.innerWidth<768?"1.25rem":"2rem",fontWeight:"bold",margin:0,color:"#1f2937"},children:["השאלה - ",i.clientName]}),O.jsxs("p",{style:{fontSize:window.innerWidth<768?"0.875rem":"1rem",color:"#6b7280",margin:"0.5rem 0 0 0"},children:["הושלמה ב-",S((P=i.returnInspection)==null?void 0:P.completedAt)]})]}),O.jsxs("button",{onClick:()=>a(null),style:{background:"#6b7280",color:"white",padding:"0.75rem 1.5rem",borderRadius:"8px",border:"none",cursor:"pointer",fontSize:window.innerWidth<768?"0.875rem":"1rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[O.jsx(GU,{size:16}),"חזרה לרשימה"]})]}),O.jsxs("div",{style:{display:"grid",gridTemplateColumns:window.innerWidth<768?"1fr":"repeat(auto-fit, minmax(250px, 1fr))",gap:"1rem",marginBottom:"2rem",padding:"1.5rem",background:"#f9fafb",borderRadius:"8px",border:"1px solid #e5e7eb"},children:[O.jsxs("div",{children:[O.jsx("span",{style:{fontSize:"0.875rem",color:"#6b7280",display:"block"},children:"לקוח"}),O.jsx("span",{style:{fontSize:"1.1rem",fontWeight:"bold",color:"#1f2937"},children:i.clientName})]}),O.jsxs("div",{children:[O.jsx("span",{style:{fontSize:"0.875rem",color:"#6b7280",display:"block"},children:"מתנדבת"}),O.jsx("span",{style:{fontSize:"1.1rem",fontWeight:"bold",color:"#1f2937"},children:i.volunteerName})]}),O.jsxs("div",{children:[O.jsx("span",{style:{fontSize:"0.875rem",color:"#6b7280",display:"block"},children:"טלפון"}),O.jsx("span",{style:{fontSize:"1.1rem",fontWeight:"bold",color:"#1f2937"},children:i.phone})]}),O.jsxs("div",{children:[O.jsx("span",{style:{fontSize:"0.875rem",color:"#6b7280",display:"block"},children:"כתובת"}),O.jsx("span",{style:{fontSize:"1.1rem",fontWeight:"bold",color:"#1f2937"},children:i.address})]}),O.jsxs("div",{children:[O.jsx("span",{style:{fontSize:"0.875rem",color:"#6b7280",display:"block"},children:"תאריכים"}),O.jsxs("span",{style:{fontSize:"1.1rem",fontWeight:"bold",color:"#1f2937"},children:[T(i.pickupDate)," → ",T(i.returnDate)]})]}),O.jsxs("div",{children:[O.jsx("span",{style:{fontSize:"0.875rem",color:"#6b7280",display:"block"},children:"סוג אירוע"}),O.jsx("span",{style:{fontSize:"1.1rem",fontWeight:"bold",color:"#1f2937"},children:i.eventType})]})]}),O.jsxs("div",{style:{marginBottom:"2rem"},children:[O.jsx("h3",{style:{fontSize:"1.5rem",fontWeight:"bold",margin:"0 0 1rem 0",color:"#1f2937"},children:"📦 פריטים וסטטוס החזרה"}),O.jsx("div",{style:{display:"grid",gap:"1rem"},children:(E=i.items)==null?void 0:E.map((C,M)=>{var L,j;const R=(j=(L=i.returnInspection)==null?void 0:L.itemInspections)==null?void 0:j.find($=>$.itemId===C.id||$.name===C.name);return O.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"1rem",background:"white",border:"1px solid #e5e7eb",borderRadius:"8px",flexWrap:window.innerWidth<768?"wrap":"nowrap",gap:"0.5rem"},children:[O.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",flex:"1",minWidth:"200px"},children:[O.jsx(Kf,{size:20,style:{color:"#6b7280"}}),O.jsxs("div",{children:[O.jsx("h4",{style:{fontSize:"1.1rem",fontWeight:"bold",margin:0,color:"#1f2937"},children:C.name}),O.jsxs("p",{style:{fontSize:"0.875rem",color:"#6b7280",margin:"0.25rem 0 0 0"},children:["הושאל: ",C.quantity," | הוחזר: ",(R==null?void 0:R.quantityReturned)||0]})]})]}),O.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[B(R==null?void 0:R.condition),O.jsx("span",{style:{color:Y(R==null?void 0:R.condition),fontWeight:"bold",fontSize:"0.875rem"},children:V(R==null?void 0:R.condition)})]})]},M)})})]}),i.returnInspection&&(()=>{var M;const C=D(i);return O.jsxs("div",{style:{background:"#f0fdf4",border:"1px solid #10b981",borderRadius:"8px",padding:"1.5rem",marginBottom:"2rem"},children:[O.jsxs("h3",{style:{fontSize:"1.5rem",fontWeight:"bold",margin:"0 0 1rem 0",color:"#059669",display:"flex",alignItems:"center",gap:"0.5rem"},children:[O.jsx(Ny,{size:24}),"סיכום בדיקת החזרה"]}),O.jsxs("div",{style:{display:"grid",gridTemplateColumns:window.innerWidth<768?"1fr":"repeat(auto-fit, minmax(250px, 1fr))",gap:"2rem",marginBottom:"1rem"},children:[O.jsxs("div",{style:{textAlign:"center"},children:[O.jsx("span",{style:{fontSize:"1rem",color:"#059669",display:"block",marginBottom:"0.5rem"},children:"✅ פריטים שהוחזרו"}),O.jsx("span",{style:{fontSize:"2.5rem",fontWeight:"bold",color:"#10b981"},children:C.totalItemsReturned}),O.jsxs("span",{style:{fontSize:"0.875rem",color:"#6b7280",display:"block",marginTop:"0.25rem"},children:["מתוך ",C.totalItemsExpected]})]}),O.jsxs("div",{style:{textAlign:"center"},children:[O.jsx("span",{style:{fontSize:"1rem",color:"#059669",display:"block",marginBottom:"0.5rem"},children:"❌ פריטים שלא הוחזרו/פגומים"}),O.jsx("span",{style:{fontSize:"2.5rem",fontWeight:"bold",color:"#ef4444"},children:C.totalItemsNotReturned}),O.jsx("span",{style:{fontSize:"0.875rem",color:"#6b7280",display:"block",marginTop:"0.25rem"},children:"אבודים/פגומים/לא הוחזרו"})]})]}),((M=i.returnInspection.summary)==null?void 0:M.managerNotes)&&O.jsxs("div",{style:{background:"white",padding:"1rem",borderRadius:"8px",marginTop:"1rem"},children:[O.jsx("span",{style:{fontSize:"0.875rem",color:"#059669",display:"block",marginBottom:"0.5rem"},children:"הערות מנהל"}),O.jsx("p",{style:{fontSize:"1rem",color:"#1f2937",margin:0},children:i.returnInspection.summary.managerNotes})]})]})})(),O.jsx("div",{style:{display:"flex",justifyContent:"center",gap:"1rem"},children:O.jsxs("button",{onClick:()=>q(i),style:{background:"linear-gradient(to right, #10b981, #059669)",color:"white",padding:"0.75rem 1.5rem",borderRadius:"8px",border:"none",cursor:"pointer",fontSize:"1rem",fontWeight:"bold",display:"flex",alignItems:"center",gap:"0.5rem",boxShadow:"0 2px 4px rgba(16, 185, 129, 0.2)"},children:[O.jsx(sV,{size:16}),"ייצא כ-PDF"]})})]}),O.jsx(Cq,{showStatsModal:_,setShowStatsModal:b,loanHistory:n}),O.jsx(jq,{})]})};function Vq(){return O.jsxs(O.Fragment,{children:[O.jsx(Rk,{}),O.jsxs(VT,{children:[O.jsx(Js,{path:"/",element:O.jsx(Nk,{})}),O.jsx(Js,{path:"/login",element:O.jsx(Ok,{})}),O.jsx(Js,{path:"/register",element:O.jsx(Dk,{})}),O.jsx(Js,{path:"/manage-users",element:O.jsx(Pk,{})}),O.jsx(Js,{path:"/new-loan",element:O.jsx(Cj,{})}),O.jsx(Js,{path:"/manage-product",element:O.jsx(MU,{})}),O.jsx(Js,{path:"/catalog",element:O.jsx(BU,{})}),O.jsx(Js,{path:"/catalog/:id",element:O.jsx(FU,{})}),O.jsx(Js,{path:"/calendar",element:O.jsx(VV,{})}),O.jsx(Js,{path:"/history",element:O.jsx(Uq,{})})]}),O.jsx(zV,{})]})}YC.createRoot(document.getElementById("root")).render(O.jsx(Ln.StrictMode,{children:O.jsx(Ik,{children:O.jsx(fI,{children:O.jsx(Vq,{})})})}));export{ar as _,zq as c,U4 as g};
