(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=t(i);fetch(i.href,a)}})();var Xq=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function G4(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var $2={exports:{}},x1={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vw;function ZC(){if(vw)return x1;vw=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(r,i,a){var o=null;if(a!==void 0&&(o=""+a),i.key!==void 0&&(o=""+i.key),"key"in i){a={};for(var s in i)s!=="key"&&(a[s]=i[s])}else a=i;return i=a.ref,{$$typeof:n,type:r,key:o,ref:i!==void 0?i:null,props:a}}return x1.Fragment=e,x1.jsx=t,x1.jsxs=t,x1}var yw;function JC(){return yw||(yw=1,$2.exports=ZC()),$2.exports}var E=JC(),X2={exports:{}},an={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xw;function eT(){if(xw)return an;xw=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),o=Symbol.for("react.context"),s=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),p=Symbol.iterator;function g($){return $===null||typeof $!="object"?null:($=p&&$[p]||$["@@iterator"],typeof $=="function"?$:null)}var m={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,w={};function I($,ve,G){this.props=$,this.context=ve,this.refs=w,this.updater=G||m}I.prototype.isReactComponent={},I.prototype.setState=function($,ve){if(typeof $!="object"&&typeof $!="function"&&$!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,$,ve,"setState")},I.prototype.forceUpdate=function($){this.updater.enqueueForceUpdate(this,$,"forceUpdate")};function C(){}C.prototype=I.prototype;function P($,ve,G){this.props=$,this.context=ve,this.refs=w,this.updater=G||m}var B=P.prototype=new C;B.constructor=P,x(B,I.prototype),B.isPureReactComponent=!0;var V=Array.isArray,Y={H:null,A:null,T:null,S:null,V:null},q=Object.prototype.hasOwnProperty;function D($,ve,G,Q,te,ie){return G=ie.ref,{$$typeof:n,type:$,key:ve,ref:G!==void 0?G:null,props:ie}}function A($,ve){return D($.type,ve,void 0,void 0,void 0,$.props)}function T($){return typeof $=="object"&&$!==null&&$.$$typeof===n}function k($){var ve={"=":"=0",":":"=2"};return"$"+$.replace(/[=:]/g,function(G){return ve[G]})}var R=/\/+/g;function L($,ve){return typeof $=="object"&&$!==null&&$.key!=null?k(""+$.key):ve.toString(36)}function j(){}function H($){switch($.status){case"fulfilled":return $.value;case"rejected":throw $.reason;default:switch(typeof $.status=="string"?$.then(j,j):($.status="pending",$.then(function(ve){$.status==="pending"&&($.status="fulfilled",$.value=ve)},function(ve){$.status==="pending"&&($.status="rejected",$.reason=ve)})),$.status){case"fulfilled":return $.value;case"rejected":throw $.reason}}throw $}function ne($,ve,G,Q,te){var ie=typeof $;(ie==="undefined"||ie==="boolean")&&($=null);var de=!1;if($===null)de=!0;else switch(ie){case"bigint":case"string":case"number":de=!0;break;case"object":switch($.$$typeof){case n:case e:de=!0;break;case h:return de=$._init,ne(de($._payload),ve,G,Q,te)}}if(de)return te=te($),de=Q===""?"."+L($,0):Q,V(te)?(G="",de!=null&&(G=de.replace(R,"$&/")+"/"),ne(te,ve,G,"",function(Te){return Te})):te!=null&&(T(te)&&(te=A(te,G+(te.key==null||$&&$.key===te.key?"":(""+te.key).replace(R,"$&/")+"/")+de)),ve.push(te)),1;de=0;var Ae=Q===""?".":Q+":";if(V($))for(var be=0;be<$.length;be++)Q=$[be],ie=Ae+L(Q,be),de+=ne(Q,ve,G,ie,te);else if(be=g($),typeof be=="function")for($=be.call($),be=0;!(Q=$.next()).done;)Q=Q.value,ie=Ae+L(Q,be++),de+=ne(Q,ve,G,ie,te);else if(ie==="object"){if(typeof $.then=="function")return ne(H($),ve,G,Q,te);throw ve=String($),Error("Objects are not valid as a React child (found: "+(ve==="[object Object]"?"object with keys {"+Object.keys($).join(", ")+"}":ve)+"). If you meant to render a collection of children, use an array instead.")}return de}function U($,ve,G){if($==null)return $;var Q=[],te=0;return ne($,Q,"","",function(ie){return ve.call(G,ie,te++)}),Q}function z($){if($._status===-1){var ve=$._result;ve=ve(),ve.then(function(G){($._status===0||$._status===-1)&&($._status=1,$._result=G)},function(G){($._status===0||$._status===-1)&&($._status=2,$._result=G)}),$._status===-1&&($._status=0,$._result=ve)}if($._status===1)return $._result.default;throw $._result}var ee=typeof reportError=="function"?reportError:function($){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ve=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof $=="object"&&$!==null&&typeof $.message=="string"?String($.message):String($),error:$});if(!window.dispatchEvent(ve))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",$);return}console.error($)};function le(){}return an.Children={map:U,forEach:function($,ve,G){U($,function(){ve.apply(this,arguments)},G)},count:function($){var ve=0;return U($,function(){ve++}),ve},toArray:function($){return U($,function(ve){return ve})||[]},only:function($){if(!T($))throw Error("React.Children.only expected to receive a single React element child.");return $}},an.Component=I,an.Fragment=t,an.Profiler=i,an.PureComponent=P,an.StrictMode=r,an.Suspense=u,an.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Y,an.__COMPILER_RUNTIME={__proto__:null,c:function($){return Y.H.useMemoCache($)}},an.cache=function($){return function(){return $.apply(null,arguments)}},an.cloneElement=function($,ve,G){if($==null)throw Error("The argument must be a React element, but you passed "+$+".");var Q=x({},$.props),te=$.key,ie=void 0;if(ve!=null)for(de in ve.ref!==void 0&&(ie=void 0),ve.key!==void 0&&(te=""+ve.key),ve)!q.call(ve,de)||de==="key"||de==="__self"||de==="__source"||de==="ref"&&ve.ref===void 0||(Q[de]=ve[de]);var de=arguments.length-2;if(de===1)Q.children=G;else if(1<de){for(var Ae=Array(de),be=0;be<de;be++)Ae[be]=arguments[be+2];Q.children=Ae}return D($.type,te,void 0,void 0,ie,Q)},an.createContext=function($){return $={$$typeof:o,_currentValue:$,_currentValue2:$,_threadCount:0,Provider:null,Consumer:null},$.Provider=$,$.Consumer={$$typeof:a,_context:$},$},an.createElement=function($,ve,G){var Q,te={},ie=null;if(ve!=null)for(Q in ve.key!==void 0&&(ie=""+ve.key),ve)q.call(ve,Q)&&Q!=="key"&&Q!=="__self"&&Q!=="__source"&&(te[Q]=ve[Q]);var de=arguments.length-2;if(de===1)te.children=G;else if(1<de){for(var Ae=Array(de),be=0;be<de;be++)Ae[be]=arguments[be+2];te.children=Ae}if($&&$.defaultProps)for(Q in de=$.defaultProps,de)te[Q]===void 0&&(te[Q]=de[Q]);return D($,ie,void 0,void 0,null,te)},an.createRef=function(){return{current:null}},an.forwardRef=function($){return{$$typeof:s,render:$}},an.isValidElement=T,an.lazy=function($){return{$$typeof:h,_payload:{_status:-1,_result:$},_init:z}},an.memo=function($,ve){return{$$typeof:f,type:$,compare:ve===void 0?null:ve}},an.startTransition=function($){var ve=Y.T,G={};Y.T=G;try{var Q=$(),te=Y.S;te!==null&&te(G,Q),typeof Q=="object"&&Q!==null&&typeof Q.then=="function"&&Q.then(le,ee)}catch(ie){ee(ie)}finally{Y.T=ve}},an.unstable_useCacheRefresh=function(){return Y.H.useCacheRefresh()},an.use=function($){return Y.H.use($)},an.useActionState=function($,ve,G){return Y.H.useActionState($,ve,G)},an.useCallback=function($,ve){return Y.H.useCallback($,ve)},an.useContext=function($){return Y.H.useContext($)},an.useDebugValue=function(){},an.useDeferredValue=function($,ve){return Y.H.useDeferredValue($,ve)},an.useEffect=function($,ve,G){var Q=Y.H;if(typeof G=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return Q.useEffect($,ve)},an.useId=function(){return Y.H.useId()},an.useImperativeHandle=function($,ve,G){return Y.H.useImperativeHandle($,ve,G)},an.useInsertionEffect=function($,ve){return Y.H.useInsertionEffect($,ve)},an.useLayoutEffect=function($,ve){return Y.H.useLayoutEffect($,ve)},an.useMemo=function($,ve){return Y.H.useMemo($,ve)},an.useOptimistic=function($,ve){return Y.H.useOptimistic($,ve)},an.useReducer=function($,ve,G){return Y.H.useReducer($,ve,G)},an.useRef=function($){return Y.H.useRef($)},an.useState=function($){return Y.H.useState($)},an.useSyncExternalStore=function($,ve,G){return Y.H.useSyncExternalStore($,ve,G)},an.useTransition=function(){return Y.H.useTransition()},an.version="19.1.0",an}var _w;function Xg(){return _w||(_w=1,X2.exports=eT()),X2.exports}var ge=Xg();const kn=G4(ge);var Y2={exports:{}},_1={},K2={exports:{}},Q2={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ww;function tT(){return ww||(ww=1,function(n){function e(U,z){var ee=U.length;U.push(z);e:for(;0<ee;){var le=ee-1>>>1,$=U[le];if(0<i($,z))U[le]=z,U[ee]=$,ee=le;else break e}}function t(U){return U.length===0?null:U[0]}function r(U){if(U.length===0)return null;var z=U[0],ee=U.pop();if(ee!==z){U[0]=ee;e:for(var le=0,$=U.length,ve=$>>>1;le<ve;){var G=2*(le+1)-1,Q=U[G],te=G+1,ie=U[te];if(0>i(Q,ee))te<$&&0>i(ie,Q)?(U[le]=ie,U[te]=ee,le=te):(U[le]=Q,U[G]=ee,le=G);else if(te<$&&0>i(ie,ee))U[le]=ie,U[te]=ee,le=te;else break e}}return z}function i(U,z){var ee=U.sortIndex-z.sortIndex;return ee!==0?ee:U.id-z.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var o=Date,s=o.now();n.unstable_now=function(){return o.now()-s}}var u=[],f=[],h=1,p=null,g=3,m=!1,x=!1,w=!1,I=!1,C=typeof setTimeout=="function"?setTimeout:null,P=typeof clearTimeout=="function"?clearTimeout:null,B=typeof setImmediate<"u"?setImmediate:null;function V(U){for(var z=t(f);z!==null;){if(z.callback===null)r(f);else if(z.startTime<=U)r(f),z.sortIndex=z.expirationTime,e(u,z);else break;z=t(f)}}function Y(U){if(w=!1,V(U),!x)if(t(u)!==null)x=!0,q||(q=!0,L());else{var z=t(f);z!==null&&ne(Y,z.startTime-U)}}var q=!1,D=-1,A=5,T=-1;function k(){return I?!0:!(n.unstable_now()-T<A)}function R(){if(I=!1,q){var U=n.unstable_now();T=U;var z=!0;try{e:{x=!1,w&&(w=!1,P(D),D=-1),m=!0;var ee=g;try{t:{for(V(U),p=t(u);p!==null&&!(p.expirationTime>U&&k());){var le=p.callback;if(typeof le=="function"){p.callback=null,g=p.priorityLevel;var $=le(p.expirationTime<=U);if(U=n.unstable_now(),typeof $=="function"){p.callback=$,V(U),z=!0;break t}p===t(u)&&r(u),V(U)}else r(u);p=t(u)}if(p!==null)z=!0;else{var ve=t(f);ve!==null&&ne(Y,ve.startTime-U),z=!1}}break e}finally{p=null,g=ee,m=!1}z=void 0}}finally{z?L():q=!1}}}var L;if(typeof B=="function")L=function(){B(R)};else if(typeof MessageChannel<"u"){var j=new MessageChannel,H=j.port2;j.port1.onmessage=R,L=function(){H.postMessage(null)}}else L=function(){C(R,0)};function ne(U,z){D=C(function(){U(n.unstable_now())},z)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(U){U.callback=null},n.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<U?Math.floor(1e3/U):5},n.unstable_getCurrentPriorityLevel=function(){return g},n.unstable_next=function(U){switch(g){case 1:case 2:case 3:var z=3;break;default:z=g}var ee=g;g=z;try{return U()}finally{g=ee}},n.unstable_requestPaint=function(){I=!0},n.unstable_runWithPriority=function(U,z){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var ee=g;g=U;try{return z()}finally{g=ee}},n.unstable_scheduleCallback=function(U,z,ee){var le=n.unstable_now();switch(typeof ee=="object"&&ee!==null?(ee=ee.delay,ee=typeof ee=="number"&&0<ee?le+ee:le):ee=le,U){case 1:var $=-1;break;case 2:$=250;break;case 5:$=1073741823;break;case 4:$=1e4;break;default:$=5e3}return $=ee+$,U={id:h++,callback:z,priorityLevel:U,startTime:ee,expirationTime:$,sortIndex:-1},ee>le?(U.sortIndex=ee,e(f,U),t(u)===null&&U===t(f)&&(w?(P(D),D=-1):w=!0,ne(Y,ee-le))):(U.sortIndex=$,e(u,U),x||m||(x=!0,q||(q=!0,L()))),U},n.unstable_shouldYield=k,n.unstable_wrapCallback=function(U){var z=g;return function(){var ee=g;g=z;try{return U.apply(this,arguments)}finally{g=ee}}}}(Q2)),Q2}var bw;function nT(){return bw||(bw=1,K2.exports=tT()),K2.exports}var Z2={exports:{}},Ca={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Aw;function rT(){if(Aw)return Ca;Aw=1;var n=Xg();function e(u){var f="https://react.dev/errors/"+u;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var h=2;h<arguments.length;h++)f+="&args[]="+encodeURIComponent(arguments[h])}return"Minified React error #"+u+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var r={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},i=Symbol.for("react.portal");function a(u,f,h){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:p==null?null:""+p,children:u,containerInfo:f,implementation:h}}var o=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function s(u,f){if(u==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return Ca.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Ca.createPortal=function(u,f){var h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(e(299));return a(u,f,null,h)},Ca.flushSync=function(u){var f=o.T,h=r.p;try{if(o.T=null,r.p=2,u)return u()}finally{o.T=f,r.p=h,r.d.f()}},Ca.preconnect=function(u,f){typeof u=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,r.d.C(u,f))},Ca.prefetchDNS=function(u){typeof u=="string"&&r.d.D(u)},Ca.preinit=function(u,f){if(typeof u=="string"&&f&&typeof f.as=="string"){var h=f.as,p=s(h,f.crossOrigin),g=typeof f.integrity=="string"?f.integrity:void 0,m=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;h==="style"?r.d.S(u,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:p,integrity:g,fetchPriority:m}):h==="script"&&r.d.X(u,{crossOrigin:p,integrity:g,fetchPriority:m,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},Ca.preinitModule=function(u,f){if(typeof u=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var h=s(f.as,f.crossOrigin);r.d.M(u,{crossOrigin:h,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&r.d.M(u)},Ca.preload=function(u,f){if(typeof u=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var h=f.as,p=s(h,f.crossOrigin);r.d.L(u,h,{crossOrigin:p,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},Ca.preloadModule=function(u,f){if(typeof u=="string")if(f){var h=s(f.as,f.crossOrigin);r.d.m(u,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:h,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else r.d.m(u)},Ca.requestFormReset=function(u){r.d.r(u)},Ca.unstable_batchedUpdates=function(u,f){return u(f)},Ca.useFormState=function(u,f,h){return o.H.useFormState(u,f,h)},Ca.useFormStatus=function(){return o.H.useHostTransitionStatus()},Ca.version="19.1.0",Ca}var Ew;function iT(){if(Ew)return Z2.exports;Ew=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Z2.exports=rT(),Z2.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sw;function aT(){if(Sw)return _1;Sw=1;var n=nT(),e=Xg(),t=iT();function r(l){var c="https://react.dev/errors/"+l;if(1<arguments.length){c+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)c+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+l+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(l){return!(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11)}function a(l){var c=l,d=l;if(l.alternate)for(;c.return;)c=c.return;else{l=c;do c=l,(c.flags&4098)!==0&&(d=c.return),l=c.return;while(l)}return c.tag===3?d:null}function o(l){if(l.tag===13){var c=l.memoizedState;if(c===null&&(l=l.alternate,l!==null&&(c=l.memoizedState)),c!==null)return c.dehydrated}return null}function s(l){if(a(l)!==l)throw Error(r(188))}function u(l){var c=l.alternate;if(!c){if(c=a(l),c===null)throw Error(r(188));return c!==l?null:l}for(var d=l,v=c;;){var b=d.return;if(b===null)break;var N=b.alternate;if(N===null){if(v=b.return,v!==null){d=v;continue}break}if(b.child===N.child){for(N=b.child;N;){if(N===d)return s(b),l;if(N===v)return s(b),c;N=N.sibling}throw Error(r(188))}if(d.return!==v.return)d=b,v=N;else{for(var K=!1,ue=b.child;ue;){if(ue===d){K=!0,d=b,v=N;break}if(ue===v){K=!0,v=b,d=N;break}ue=ue.sibling}if(!K){for(ue=N.child;ue;){if(ue===d){K=!0,d=N,v=b;break}if(ue===v){K=!0,v=N,d=b;break}ue=ue.sibling}if(!K)throw Error(r(189))}}if(d.alternate!==v)throw Error(r(190))}if(d.tag!==3)throw Error(r(188));return d.stateNode.current===d?l:c}function f(l){var c=l.tag;if(c===5||c===26||c===27||c===6)return l;for(l=l.child;l!==null;){if(c=f(l),c!==null)return c;l=l.sibling}return null}var h=Object.assign,p=Symbol.for("react.element"),g=Symbol.for("react.transitional.element"),m=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),w=Symbol.for("react.strict_mode"),I=Symbol.for("react.profiler"),C=Symbol.for("react.provider"),P=Symbol.for("react.consumer"),B=Symbol.for("react.context"),V=Symbol.for("react.forward_ref"),Y=Symbol.for("react.suspense"),q=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),T=Symbol.for("react.activity"),k=Symbol.for("react.memo_cache_sentinel"),R=Symbol.iterator;function L(l){return l===null||typeof l!="object"?null:(l=R&&l[R]||l["@@iterator"],typeof l=="function"?l:null)}var j=Symbol.for("react.client.reference");function H(l){if(l==null)return null;if(typeof l=="function")return l.$$typeof===j?null:l.displayName||l.name||null;if(typeof l=="string")return l;switch(l){case x:return"Fragment";case I:return"Profiler";case w:return"StrictMode";case Y:return"Suspense";case q:return"SuspenseList";case T:return"Activity"}if(typeof l=="object")switch(l.$$typeof){case m:return"Portal";case B:return(l.displayName||"Context")+".Provider";case P:return(l._context.displayName||"Context")+".Consumer";case V:var c=l.render;return l=l.displayName,l||(l=c.displayName||c.name||"",l=l!==""?"ForwardRef("+l+")":"ForwardRef"),l;case D:return c=l.displayName||null,c!==null?c:H(l.type)||"Memo";case A:c=l._payload,l=l._init;try{return H(l(c))}catch{}}return null}var ne=Array.isArray,U=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,z=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ee={pending:!1,data:null,method:null,action:null},le=[],$=-1;function ve(l){return{current:l}}function G(l){0>$||(l.current=le[$],le[$]=null,$--)}function Q(l,c){$++,le[$]=l.current,l.current=c}var te=ve(null),ie=ve(null),de=ve(null),Ae=ve(null);function be(l,c){switch(Q(de,c),Q(ie,l),Q(te,null),c.nodeType){case 9:case 11:l=(l=c.documentElement)&&(l=l.namespaceURI)?W_(l):0;break;default:if(l=c.tagName,c=c.namespaceURI)c=W_(c),l=G_(c,l);else switch(l){case"svg":l=1;break;case"math":l=2;break;default:l=0}}G(te),Q(te,l)}function Te(){G(te),G(ie),G(de)}function We(l){l.memoizedState!==null&&Q(Ae,l);var c=te.current,d=G_(c,l.type);c!==d&&(Q(ie,l),Q(te,d))}function He(l){ie.current===l&&(G(te),G(ie)),Ae.current===l&&(G(Ae),p1._currentValue=ee)}var rt=Object.prototype.hasOwnProperty,st=n.unstable_scheduleCallback,wt=n.unstable_cancelCallback,Be=n.unstable_shouldYield,me=n.unstable_requestPaint,gt=n.unstable_now,lt=n.unstable_getCurrentPriorityLevel,Xe=n.unstable_ImmediatePriority,it=n.unstable_UserBlockingPriority,at=n.unstable_NormalPriority,ot=n.unstable_LowPriority,ct=n.unstable_IdlePriority,mt=n.log,Rt=n.unstable_setDisableYieldValue,_t=null,bt=null;function Nt(l){if(typeof mt=="function"&&Rt(l),bt&&typeof bt.setStrictMode=="function")try{bt.setStrictMode(_t,l)}catch{}}var xt=Math.clz32?Math.clz32:vn,Dt=Math.log,ut=Math.LN2;function vn(l){return l>>>=0,l===0?32:31-(Dt(l)/ut|0)|0}var zt=256,Yn=4194304;function Kt(l){var c=l&42;if(c!==0)return c;switch(l&-l){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return l&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return l}}function An(l,c,d){var v=l.pendingLanes;if(v===0)return 0;var b=0,N=l.suspendedLanes,K=l.pingedLanes;l=l.warmLanes;var ue=v&134217727;return ue!==0?(v=ue&~N,v!==0?b=Kt(v):(K&=ue,K!==0?b=Kt(K):d||(d=ue&~l,d!==0&&(b=Kt(d))))):(ue=v&~N,ue!==0?b=Kt(ue):K!==0?b=Kt(K):d||(d=v&~l,d!==0&&(b=Kt(d)))),b===0?0:c!==0&&c!==b&&(c&N)===0&&(N=b&-b,d=c&-c,N>=d||N===32&&(d&4194048)!==0)?c:b}function pi(l,c){return(l.pendingLanes&~(l.suspendedLanes&~l.pingedLanes)&c)===0}function on(l,c){switch(l){case 1:case 2:case 4:case 8:case 64:return c+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function pa(){var l=zt;return zt<<=1,(zt&4194048)===0&&(zt=256),l}function Cn(){var l=Yn;return Yn<<=1,(Yn&62914560)===0&&(Yn=4194304),l}function Mr(l){for(var c=[],d=0;31>d;d++)c.push(l);return c}function sr(l,c){l.pendingLanes|=c,c!==268435456&&(l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0)}function yn(l,c,d,v,b,N){var K=l.pendingLanes;l.pendingLanes=d,l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0,l.expiredLanes&=d,l.entangledLanes&=d,l.errorRecoveryDisabledLanes&=d,l.shellSuspendCounter=0;var ue=l.entanglements,ye=l.expirationTimes,ke=l.hiddenUpdates;for(d=K&~d;0<d;){var Ge=31-xt(d),Ze=1<<Ge;ue[Ge]=0,ye[Ge]=-1;var je=ke[Ge];if(je!==null)for(ke[Ge]=null,Ge=0;Ge<je.length;Ge++){var Fe=je[Ge];Fe!==null&&(Fe.lane&=-536870913)}d&=~Ze}v!==0&&Tt(l,v,0),N!==0&&b===0&&l.tag!==0&&(l.suspendedLanes|=N&~(K&~c))}function Tt(l,c,d){l.pendingLanes|=c,l.suspendedLanes&=~c;var v=31-xt(c);l.entangledLanes|=c,l.entanglements[v]=l.entanglements[v]|1073741824|d&4194090}function nn(l,c){var d=l.entangledLanes|=c;for(l=l.entanglements;d;){var v=31-xt(d),b=1<<v;b&c|l[v]&c&&(l[v]|=c),d&=~b}}function Si(l){switch(l){case 2:l=1;break;case 8:l=4;break;case 32:l=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:l=128;break;case 268435456:l=134217728;break;default:l=0}return l}function Mn(l){return l&=-l,2<l?8<l?(l&134217727)!==0?32:268435456:8:2}function pr(){var l=z.p;return l!==0?l:(l=window.event,l===void 0?32:fw(l.type))}function Ua(l,c){var d=z.p;try{return z.p=l,c()}finally{z.p=d}}var vt=Math.random().toString(36).slice(2),Wn="__reactFiber$"+vt,Gn="__reactProps$"+vt,gr="__reactContainer$"+vt,Er="__reactEvents$"+vt,Nr="__reactListeners$"+vt,Gr="__reactHandles$"+vt,Ts="__reactResources$"+vt,Ji="__reactMarker$"+vt;function gi(l){delete l[Wn],delete l[Gn],delete l[Er],delete l[Nr],delete l[Gr]}function ti(l){var c=l[Wn];if(c)return c;for(var d=l.parentNode;d;){if(c=d[gr]||d[Wn]){if(d=c.alternate,c.child!==null||d!==null&&d.child!==null)for(l=K_(l);l!==null;){if(d=l[Wn])return d;l=K_(l)}return c}l=d,d=l.parentNode}return null}function $r(l){if(l=l[Wn]||l[gr]){var c=l.tag;if(c===5||c===6||c===13||c===26||c===27||c===3)return l}return null}function ni(l){var c=l.tag;if(c===5||c===26||c===27||c===6)return l.stateNode;throw Error(r(33))}function lr(l){var c=l[Ts];return c||(c=l[Ts]={hoistableStyles:new Map,hoistableScripts:new Map}),c}function Bn(l){l[Ji]=!0}var So=new Set,Co={};function ji(l,c){ga(l,c),ga(l+"Capture",c)}function ga(l,c){for(Co[l]=c,l=0;l<c.length;l++)So.add(c[l])}var Is=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),lu={},Rs={};function ac(l){return rt.call(Rs,l)?!0:rt.call(lu,l)?!1:Is.test(l)?Rs[l]=!0:(lu[l]=!0,!1)}function Va(l,c,d){if(ac(c))if(d===null)l.removeAttribute(c);else{switch(typeof d){case"undefined":case"function":case"symbol":l.removeAttribute(c);return;case"boolean":var v=c.toLowerCase().slice(0,5);if(v!=="data-"&&v!=="aria-"){l.removeAttribute(c);return}}l.setAttribute(c,""+d)}}function za(l,c,d){if(d===null)l.removeAttribute(c);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(c);return}l.setAttribute(c,""+d)}}function ri(l,c,d,v){if(v===null)l.removeAttribute(d);else{switch(typeof v){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(d);return}l.setAttributeNS(c,d,""+v)}}var To,oc;function Za(l){if(To===void 0)try{throw Error()}catch(d){var c=d.stack.trim().match(/\n( *(at )?)/);To=c&&c[1]||"",oc=-1<d.stack.indexOf(`
    at`)?" (<anonymous>)":-1<d.stack.indexOf("@")?"@unknown:0:0":""}return`
`+To+l+oc}var pl=!1;function Io(l,c){if(!l||pl)return"";pl=!0;var d=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var v={DetermineComponentFrameRoot:function(){try{if(c){var Ze=function(){throw Error()};if(Object.defineProperty(Ze.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Ze,[])}catch(Fe){var je=Fe}Reflect.construct(l,[],Ze)}else{try{Ze.call()}catch(Fe){je=Fe}l.call(Ze.prototype)}}else{try{throw Error()}catch(Fe){je=Fe}(Ze=l())&&typeof Ze.catch=="function"&&Ze.catch(function(){})}}catch(Fe){if(Fe&&je&&typeof Fe.stack=="string")return[Fe.stack,je.stack]}return[null,null]}};v.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var b=Object.getOwnPropertyDescriptor(v.DetermineComponentFrameRoot,"name");b&&b.configurable&&Object.defineProperty(v.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var N=v.DetermineComponentFrameRoot(),K=N[0],ue=N[1];if(K&&ue){var ye=K.split(`
`),ke=ue.split(`
`);for(b=v=0;v<ye.length&&!ye[v].includes("DetermineComponentFrameRoot");)v++;for(;b<ke.length&&!ke[b].includes("DetermineComponentFrameRoot");)b++;if(v===ye.length||b===ke.length)for(v=ye.length-1,b=ke.length-1;1<=v&&0<=b&&ye[v]!==ke[b];)b--;for(;1<=v&&0<=b;v--,b--)if(ye[v]!==ke[b]){if(v!==1||b!==1)do if(v--,b--,0>b||ye[v]!==ke[b]){var Ge=`
`+ye[v].replace(" at new "," at ");return l.displayName&&Ge.includes("<anonymous>")&&(Ge=Ge.replace("<anonymous>",l.displayName)),Ge}while(1<=v&&0<=b);break}}}finally{pl=!1,Error.prepareStackTrace=d}return(d=l?l.displayName||l.name:"")?Za(d):""}function uu(l){switch(l.tag){case 26:case 27:case 5:return Za(l.type);case 16:return Za("Lazy");case 13:return Za("Suspense");case 19:return Za("SuspenseList");case 0:case 15:return Io(l.type,!1);case 11:return Io(l.type.render,!1);case 1:return Io(l.type,!0);case 31:return Za("Activity");default:return""}}function ur(l){try{var c="";do c+=uu(l),l=l.return;while(l);return c}catch(d){return`
Error generating stack: `+d.message+`
`+d.stack}}function mi(l){switch(typeof l){case"bigint":case"boolean":case"number":case"string":case"undefined":return l;case"object":return l;default:return""}}function gl(l){var c=l.type;return(l=l.nodeName)&&l.toLowerCase()==="input"&&(c==="checkbox"||c==="radio")}function sc(l){var c=gl(l)?"checked":"value",d=Object.getOwnPropertyDescriptor(l.constructor.prototype,c),v=""+l[c];if(!l.hasOwnProperty(c)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var b=d.get,N=d.set;return Object.defineProperty(l,c,{configurable:!0,get:function(){return b.call(this)},set:function(K){v=""+K,N.call(this,K)}}),Object.defineProperty(l,c,{enumerable:d.enumerable}),{getValue:function(){return v},setValue:function(K){v=""+K},stopTracking:function(){l._valueTracker=null,delete l[c]}}}}function Zo(l){l._valueTracker||(l._valueTracker=sc(l))}function cu(l){if(!l)return!1;var c=l._valueTracker;if(!c)return!0;var d=c.getValue(),v="";return l&&(v=gl(l)?l.checked?"true":"false":l.value),l=v,l!==d?(c.setValue(l),!0):!1}function Ci(l){if(l=l||(typeof document<"u"?document:void 0),typeof l>"u")return null;try{return l.activeElement||l.body}catch{return l.body}}var ml=/[\n"\\]/g;function En(l){return l.replace(ml,function(c){return"\\"+c.charCodeAt(0).toString(16)+" "})}function Ti(l,c,d,v,b,N,K,ue){l.name="",K!=null&&typeof K!="function"&&typeof K!="symbol"&&typeof K!="boolean"?l.type=K:l.removeAttribute("type"),c!=null?K==="number"?(c===0&&l.value===""||l.value!=c)&&(l.value=""+mi(c)):l.value!==""+mi(c)&&(l.value=""+mi(c)):K!=="submit"&&K!=="reset"||l.removeAttribute("value"),c!=null?es(l,K,mi(c)):d!=null?es(l,K,mi(d)):v!=null&&l.removeAttribute("value"),b==null&&N!=null&&(l.defaultChecked=!!N),b!=null&&(l.checked=b&&typeof b!="function"&&typeof b!="symbol"),ue!=null&&typeof ue!="function"&&typeof ue!="symbol"&&typeof ue!="boolean"?l.name=""+mi(ue):l.removeAttribute("name")}function Jo(l,c,d,v,b,N,K,ue){if(N!=null&&typeof N!="function"&&typeof N!="symbol"&&typeof N!="boolean"&&(l.type=N),c!=null||d!=null){if(!(N!=="submit"&&N!=="reset"||c!=null))return;d=d!=null?""+mi(d):"",c=c!=null?""+mi(c):d,ue||c===l.value||(l.value=c),l.defaultValue=c}v=v??b,v=typeof v!="function"&&typeof v!="symbol"&&!!v,l.checked=ue?l.checked:!!v,l.defaultChecked=!!v,K!=null&&typeof K!="function"&&typeof K!="symbol"&&typeof K!="boolean"&&(l.name=K)}function es(l,c,d){c==="number"&&Ci(l.ownerDocument)===l||l.defaultValue===""+d||(l.defaultValue=""+d)}function Ja(l,c,d,v){if(l=l.options,c){c={};for(var b=0;b<d.length;b++)c["$"+d[b]]=!0;for(d=0;d<l.length;d++)b=c.hasOwnProperty("$"+l[d].value),l[d].selected!==b&&(l[d].selected=b),b&&v&&(l[d].defaultSelected=!0)}else{for(d=""+mi(d),c=null,b=0;b<l.length;b++){if(l[b].value===d){l[b].selected=!0,v&&(l[b].defaultSelected=!0);return}c!==null||l[b].disabled||(c=l[b])}c!==null&&(c.selected=!0)}}function jn(l,c,d){if(c!=null&&(c=""+mi(c),c!==l.value&&(l.value=c),d==null)){l.defaultValue!==c&&(l.defaultValue=c);return}l.defaultValue=d!=null?""+mi(d):""}function ts(l,c,d,v){if(c==null){if(v!=null){if(d!=null)throw Error(r(92));if(ne(v)){if(1<v.length)throw Error(r(93));v=v[0]}d=v}d==null&&(d=""),c=d}d=mi(c),l.defaultValue=d,v=l.textContent,v===d&&v!==""&&v!==null&&(l.value=v)}function ma(l,c){if(c){var d=l.firstChild;if(d&&d===l.lastChild&&d.nodeType===3){d.nodeValue=c;return}}l.textContent=c}var Ro=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function lc(l,c,d){var v=c.indexOf("--")===0;d==null||typeof d=="boolean"||d===""?v?l.setProperty(c,""):c==="float"?l.cssFloat="":l[c]="":v?l.setProperty(c,d):typeof d!="number"||d===0||Ro.has(c)?c==="float"?l.cssFloat=d:l[c]=(""+d).trim():l[c]=d+"px"}function fu(l,c,d){if(c!=null&&typeof c!="object")throw Error(r(62));if(l=l.style,d!=null){for(var v in d)!d.hasOwnProperty(v)||c!=null&&c.hasOwnProperty(v)||(v.indexOf("--")===0?l.setProperty(v,""):v==="float"?l.cssFloat="":l[v]="");for(var b in c)v=c[b],c.hasOwnProperty(b)&&d[b]!==v&&lc(l,b,v)}else for(var N in c)c.hasOwnProperty(N)&&lc(l,N,c[N])}function hu(l){if(l.indexOf("-")===-1)return!1;switch(l){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var No=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),vl=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Do(l){return vl.test(""+l)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":l}var eo=null;function er(l){return l=l.target||l.srcElement||window,l.correspondingUseElement&&(l=l.correspondingUseElement),l.nodeType===3?l.parentNode:l}var Oo=null,to=null;function Ft(l){var c=$r(l);if(c&&(l=c.stateNode)){var d=l[Gn]||null;e:switch(l=c.stateNode,c.type){case"input":if(Ti(l,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name),c=d.name,d.type==="radio"&&c!=null){for(d=l;d.parentNode;)d=d.parentNode;for(d=d.querySelectorAll('input[name="'+En(""+c)+'"][type="radio"]'),c=0;c<d.length;c++){var v=d[c];if(v!==l&&v.form===l.form){var b=v[Gn]||null;if(!b)throw Error(r(90));Ti(v,b.value,b.defaultValue,b.defaultValue,b.checked,b.defaultChecked,b.type,b.name)}}for(c=0;c<d.length;c++)v=d[c],v.form===l.form&&cu(v)}break e;case"textarea":jn(l,d.value,d.defaultValue);break e;case"select":c=d.value,c!=null&&Ja(l,!!d.multiple,c,!1)}}}var no=!1;function uc(l,c,d){if(no)return l(c,d);no=!0;try{var v=l(c);return v}finally{if(no=!1,(Oo!==null||to!==null)&&(ap(),Oo&&(c=Oo,l=to,to=Oo=null,Ft(c),l)))for(c=0;c<l.length;c++)Ft(l[c])}}function Fi(l,c){var d=l.stateNode;if(d===null)return null;var v=d[Gn]||null;if(v===null)return null;d=v[c];e:switch(c){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(v=!v.disabled)||(l=l.type,v=!(l==="button"||l==="input"||l==="select"||l==="textarea")),l=!v;break e;default:l=!1}if(l)return null;if(d&&typeof d!="function")throw Error(r(231,c,typeof d));return d}var va=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ea=!1;if(va)try{var ro={};Object.defineProperty(ro,"passive",{get:function(){ea=!0}}),window.addEventListener("test",ro,ro),window.removeEventListener("test",ro,ro)}catch{ea=!1}var ya=null,ns=null,Po=null;function du(){if(Po)return Po;var l,c=ns,d=c.length,v,b="value"in ya?ya.value:ya.textContent,N=b.length;for(l=0;l<d&&c[l]===b[l];l++);var K=d-l;for(v=1;v<=K&&c[d-v]===b[N-v];v++);return Po=b.slice(l,1<v?1-v:void 0)}function xa(l){var c=l.keyCode;return"charCode"in l?(l=l.charCode,l===0&&c===13&&(l=13)):l=c,l===10&&(l=13),32<=l||l===13?l:0}function Ui(){return!0}function io(){return!1}function Xr(l){function c(d,v,b,N,K){this._reactName=d,this._targetInst=b,this.type=v,this.nativeEvent=N,this.target=K,this.currentTarget=null;for(var ue in l)l.hasOwnProperty(ue)&&(d=l[ue],this[ue]=d?d(N):N[ue]);return this.isDefaultPrevented=(N.defaultPrevented!=null?N.defaultPrevented:N.returnValue===!1)?Ui:io,this.isPropagationStopped=io,this}return h(c.prototype,{preventDefault:function(){this.defaultPrevented=!0;var d=this.nativeEvent;d&&(d.preventDefault?d.preventDefault():typeof d.returnValue!="unknown"&&(d.returnValue=!1),this.isDefaultPrevented=Ui)},stopPropagation:function(){var d=this.nativeEvent;d&&(d.stopPropagation?d.stopPropagation():typeof d.cancelBubble!="unknown"&&(d.cancelBubble=!0),this.isPropagationStopped=Ui)},persist:function(){},isPersistent:Ui}),c}var hn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(l){return l.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},rs=Xr(hn),ao=h({},hn,{view:0,detail:0}),pu=Xr(ao),Ns,Ds,qa,Vi=h({},ao,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ss,button:0,buttons:0,relatedTarget:function(l){return l.relatedTarget===void 0?l.fromElement===l.srcElement?l.toElement:l.fromElement:l.relatedTarget},movementX:function(l){return"movementX"in l?l.movementX:(l!==qa&&(qa&&l.type==="mousemove"?(Ns=l.screenX-qa.screenX,Ds=l.screenY-qa.screenY):Ds=Ns=0,qa=l),Ns)},movementY:function(l){return"movementY"in l?l.movementY:Ds}}),Yr=Xr(Vi),cc=h({},Vi,{dataTransfer:0}),is=Xr(cc),Ii=h({},ao,{relatedTarget:0}),as=Xr(Ii),Lo=h({},hn,{animationName:0,elapsedTime:0,pseudoElement:0}),yl=Xr(Lo),Os=h({},hn,{clipboardData:function(l){return"clipboardData"in l?l.clipboardData:window.clipboardData}}),xl=Xr(Os),gu=h({},hn,{data:0}),Ps=Xr(gu),os={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ls={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_l={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ks(l){var c=this.nativeEvent;return c.getModifierState?c.getModifierState(l):(l=_l[l])?!!c[l]:!1}function ss(){return ks}var fc=h({},ao,{key:function(l){if(l.key){var c=os[l.key]||l.key;if(c!=="Unidentified")return c}return l.type==="keypress"?(l=xa(l),l===13?"Enter":String.fromCharCode(l)):l.type==="keydown"||l.type==="keyup"?Ls[l.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ss,charCode:function(l){return l.type==="keypress"?xa(l):0},keyCode:function(l){return l.type==="keydown"||l.type==="keyup"?l.keyCode:0},which:function(l){return l.type==="keypress"?xa(l):l.type==="keydown"||l.type==="keyup"?l.keyCode:0}}),ko=Xr(fc),ls=h({},Vi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ms=Xr(ls),zi=h({},ao,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ss}),wl=Xr(zi),O=h({},hn,{propertyName:0,elapsedTime:0,pseudoElement:0}),J=Xr(O),pe=h({},Vi,{deltaX:function(l){return"deltaX"in l?l.deltaX:"wheelDeltaX"in l?-l.wheelDeltaX:0},deltaY:function(l){return"deltaY"in l?l.deltaY:"wheelDeltaY"in l?-l.wheelDeltaY:"wheelDelta"in l?-l.wheelDelta:0},deltaZ:0,deltaMode:0}),xe=Xr(pe),Ie=h({},hn,{newState:0,oldState:0}),Ve=Xr(Ie),tt=[9,13,27,32],ht=va&&"CompositionEvent"in window,_=null;va&&"documentMode"in document&&(_=document.documentMode);var F=va&&"TextEvent"in window&&!_,X=va&&(!ht||_&&8<_&&11>=_),se=" ",Ce=!1;function Le(l,c){switch(l){case"keyup":return tt.indexOf(c.keyCode)!==-1;case"keydown":return c.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function nt(l){return l=l.detail,typeof l=="object"&&"data"in l?l.data:null}var Ut=!1;function dn(l,c){switch(l){case"compositionend":return nt(c);case"keypress":return c.which!==32?null:(Ce=!0,se);case"textInput":return l=c.data,l===se&&Ce?null:l;default:return null}}function Qt(l,c){if(Ut)return l==="compositionend"||!ht&&Le(l,c)?(l=du(),Po=ns=ya=null,Ut=!1,l):null;switch(l){case"paste":return null;case"keypress":if(!(c.ctrlKey||c.altKey||c.metaKey)||c.ctrlKey&&c.altKey){if(c.char&&1<c.char.length)return c.char;if(c.which)return String.fromCharCode(c.which)}return null;case"compositionend":return X&&c.locale!=="ko"?null:c.data;default:return null}}var Fn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Kn(l){var c=l&&l.nodeName&&l.nodeName.toLowerCase();return c==="input"?!!Fn[l.type]:c==="textarea"}function oo(l,c,d,v){Oo?to?to.push(v):to=[v]:Oo=v,c=fp(c,"onChange"),0<c.length&&(d=new rs("onChange","change",null,d,v),l.push({event:d,listeners:c}))}var Br=null,_a=null;function us(l){U_(l,0)}function bl(l){var c=ni(l);if(cu(c))return l}function hc(l,c){if(l==="change")return c}var mu=!1;if(va){var ii;if(va){var Al="oninput"in document;if(!Al){var vu=document.createElement("div");vu.setAttribute("oninput","return;"),Al=typeof vu.oninput=="function"}ii=Al}else ii=!1;mu=ii&&(!document.documentMode||9<document.documentMode)}function yu(){Br&&(Br.detachEvent("onpropertychange",dc),_a=Br=null)}function dc(l){if(l.propertyName==="value"&&bl(_a)){var c=[];oo(c,_a,l,er(l)),uc(us,c)}}function wa(l,c,d){l==="focusin"?(yu(),Br=c,_a=d,Br.attachEvent("onpropertychange",dc)):l==="focusout"&&yu()}function kd(l){if(l==="selectionchange"||l==="keyup"||l==="keydown")return bl(_a)}function _f(l,c){if(l==="click")return bl(c)}function vh(l,c){if(l==="input"||l==="change")return bl(c)}function so(l,c){return l===c&&(l!==0||1/l===1/c)||l!==l&&c!==c}var vi=typeof Object.is=="function"?Object.is:so;function El(l,c){if(vi(l,c))return!0;if(typeof l!="object"||l===null||typeof c!="object"||c===null)return!1;var d=Object.keys(l),v=Object.keys(c);if(d.length!==v.length)return!1;for(v=0;v<d.length;v++){var b=d[v];if(!rt.call(c,b)||!vi(l[b],c[b]))return!1}return!0}function wf(l){for(;l&&l.firstChild;)l=l.firstChild;return l}function Bs(l,c){var d=wf(l);l=0;for(var v;d;){if(d.nodeType===3){if(v=l+d.textContent.length,l<=c&&v>=c)return{node:d,offset:c-l};l=v}e:{for(;d;){if(d.nextSibling){d=d.nextSibling;break e}d=d.parentNode}d=void 0}d=wf(d)}}function Sl(l,c){return l&&c?l===c?!0:l&&l.nodeType===3?!1:c&&c.nodeType===3?Sl(l,c.parentNode):"contains"in l?l.contains(c):l.compareDocumentPosition?!!(l.compareDocumentPosition(c)&16):!1:!1}function ta(l){l=l!=null&&l.ownerDocument!=null&&l.ownerDocument.defaultView!=null?l.ownerDocument.defaultView:window;for(var c=Ci(l.document);c instanceof l.HTMLIFrameElement;){try{var d=typeof c.contentWindow.location.href=="string"}catch{d=!1}if(d)l=c.contentWindow;else break;c=Ci(l.document)}return c}function Ri(l){var c=l&&l.nodeName&&l.nodeName.toLowerCase();return c&&(c==="input"&&(l.type==="text"||l.type==="search"||l.type==="tel"||l.type==="url"||l.type==="password")||c==="textarea"||l.contentEditable==="true")}var Cl=va&&"documentMode"in document&&11>=document.documentMode,ba=null,Mo=null,cs=null,Bo=!1;function Dr(l,c,d){var v=d.window===d?d.document:d.nodeType===9?d:d.ownerDocument;Bo||ba==null||ba!==Ci(v)||(v=ba,"selectionStart"in v&&Ri(v)?v={start:v.selectionStart,end:v.selectionEnd}:(v=(v.ownerDocument&&v.ownerDocument.defaultView||window).getSelection(),v={anchorNode:v.anchorNode,anchorOffset:v.anchorOffset,focusNode:v.focusNode,focusOffset:v.focusOffset}),cs&&El(cs,v)||(cs=v,v=fp(Mo,"onSelect"),0<v.length&&(c=new rs("onSelect","select",null,c,d),l.push({event:c,listeners:v}),c.target=ba)))}function jo(l,c){var d={};return d[l.toLowerCase()]=c.toLowerCase(),d["Webkit"+l]="webkit"+c,d["Moz"+l]="moz"+c,d}var Kr={animationend:jo("Animation","AnimationEnd"),animationiteration:jo("Animation","AnimationIteration"),animationstart:jo("Animation","AnimationStart"),transitionrun:jo("Transition","TransitionRun"),transitionstart:jo("Transition","TransitionStart"),transitioncancel:jo("Transition","TransitionCancel"),transitionend:jo("Transition","TransitionEnd")},Aa={},xu={};va&&(xu=document.createElement("div").style,"AnimationEvent"in window||(delete Kr.animationend.animation,delete Kr.animationiteration.animation,delete Kr.animationstart.animation),"TransitionEvent"in window||delete Kr.transitionend.transition);function fs(l){if(Aa[l])return Aa[l];if(!Kr[l])return l;var c=Kr[l],d;for(d in c)if(c.hasOwnProperty(d)&&d in xu)return Aa[l]=c[d];return l}var pc=fs("animationend"),Tl=fs("animationiteration"),Il=fs("animationstart"),Rl=fs("transitionrun"),_u=fs("transitionstart"),gc=fs("transitioncancel"),Nl=fs("transitionend"),js=new Map,wu="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");wu.push("scrollEnd");function Or(l,c){js.set(l,c),ji(c,[l])}var Ha=new WeakMap;function ln(l,c){if(typeof l=="object"&&l!==null){var d=Ha.get(l);return d!==void 0?d:(c={value:l,source:c,stack:ur(c)},Ha.set(l,c),c)}return{value:l,source:c,stack:ur(c)}}var un=[],cr=0,jr=0;function lo(){for(var l=cr,c=jr=cr=0;c<l;){var d=un[c];un[c++]=null;var v=un[c];un[c++]=null;var b=un[c];un[c++]=null;var N=un[c];if(un[c++]=null,v!==null&&b!==null){var K=v.pending;K===null?b.next=b:(b.next=K.next,K.next=b),v.pending=b}N!==0&&yh(d,b,N)}}function Dl(l,c,d,v){un[cr++]=l,un[cr++]=c,un[cr++]=d,un[cr++]=v,jr|=v,l.lanes|=v,l=l.alternate,l!==null&&(l.lanes|=v)}function Ol(l,c,d,v){return Dl(l,c,d,v),bu(l)}function Fs(l,c){return Dl(l,null,null,c),bu(l)}function yh(l,c,d){l.lanes|=d;var v=l.alternate;v!==null&&(v.lanes|=d);for(var b=!1,N=l.return;N!==null;)N.childLanes|=d,v=N.alternate,v!==null&&(v.childLanes|=d),N.tag===22&&(l=N.stateNode,l===null||l._visibility&1||(b=!0)),l=N,N=N.return;return l.tag===3?(N=l.stateNode,b&&c!==null&&(b=31-xt(d),l=N.hiddenUpdates,v=l[b],v===null?l[b]=[c]:v.push(c),c.lane=d|536870912),N):null}function bu(l){if(50<o1)throw o1=0,v2=null,Error(r(185));for(var c=l.return;c!==null;)l=c,c=l.return;return l.tag===3?l.stateNode:null}var yi={};function uo(l,c,d,v){this.tag=l,this.key=d,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=v,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function qi(l,c,d,v){return new uo(l,c,d,v)}function mc(l){return l=l.prototype,!(!l||!l.isReactComponent)}function hs(l,c){var d=l.alternate;return d===null?(d=qi(l.tag,c,l.key,l.mode),d.elementType=l.elementType,d.type=l.type,d.stateNode=l.stateNode,d.alternate=l,l.alternate=d):(d.pendingProps=c,d.type=l.type,d.flags=0,d.subtreeFlags=0,d.deletions=null),d.flags=l.flags&65011712,d.childLanes=l.childLanes,d.lanes=l.lanes,d.child=l.child,d.memoizedProps=l.memoizedProps,d.memoizedState=l.memoizedState,d.updateQueue=l.updateQueue,c=l.dependencies,d.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},d.sibling=l.sibling,d.index=l.index,d.ref=l.ref,d.refCleanup=l.refCleanup,d}function bf(l,c){l.flags&=65011714;var d=l.alternate;return d===null?(l.childLanes=0,l.lanes=c,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=d.childLanes,l.lanes=d.lanes,l.child=d.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=d.memoizedProps,l.memoizedState=d.memoizedState,l.updateQueue=d.updateQueue,l.type=d.type,c=d.dependencies,l.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext}),l}function Au(l,c,d,v,b,N){var K=0;if(v=l,typeof l=="function")mc(l)&&(K=1);else if(typeof l=="string")K=FC(l,d,te.current)?26:l==="html"||l==="head"||l==="body"?27:5;else e:switch(l){case T:return l=qi(31,d,c,b),l.elementType=T,l.lanes=N,l;case x:return Us(d.children,b,N,c);case w:K=8,b|=24;break;case I:return l=qi(12,d,c,b|2),l.elementType=I,l.lanes=N,l;case Y:return l=qi(13,d,c,b),l.elementType=Y,l.lanes=N,l;case q:return l=qi(19,d,c,b),l.elementType=q,l.lanes=N,l;default:if(typeof l=="object"&&l!==null)switch(l.$$typeof){case C:case B:K=10;break e;case P:K=9;break e;case V:K=11;break e;case D:K=14;break e;case A:K=16,v=null;break e}K=29,d=Error(r(130,l===null?"null":typeof l,"")),v=null}return c=qi(K,d,c,b),c.elementType=l,c.type=v,c.lanes=N,c}function Us(l,c,d,v){return l=qi(7,l,v,c),l.lanes=d,l}function xh(l,c,d){return l=qi(6,l,null,c),l.lanes=d,l}function Af(l,c,d){return c=qi(4,l.children!==null?l.children:[],l.key,c),c.lanes=d,c.stateNode={containerInfo:l.containerInfo,pendingChildren:null,implementation:l.implementation},c}var Pl=[],Vs=0,vc=null,_h=0,co=[],Wa=0,Eu=null,zs=1,qs="";function Su(l,c){Pl[Vs++]=_h,Pl[Vs++]=vc,vc=l,_h=c}function R0(l,c,d){co[Wa++]=zs,co[Wa++]=qs,co[Wa++]=Eu,Eu=l;var v=zs;l=qs;var b=32-xt(v)-1;v&=~(1<<b),d+=1;var N=32-xt(c)+b;if(30<N){var K=b-b%5;N=(v&(1<<K)-1).toString(32),v>>=K,b-=K,zs=1<<32-xt(c)+b|d<<b|v,qs=N+l}else zs=1<<N|d<<b|v,qs=l}function Ef(l){l.return!==null&&(Su(l,1),R0(l,1,0))}function Sf(l){for(;l===vc;)vc=Pl[--Vs],Pl[Vs]=null,_h=Pl[--Vs],Pl[Vs]=null;for(;l===Eu;)Eu=co[--Wa],co[Wa]=null,qs=co[--Wa],co[Wa]=null,zs=co[--Wa],co[Wa]=null}var ai=null,Pr=null,Pn=!1,Ll=null,ds=!1,Md=Error(r(519));function Cu(l){var c=Error(r(418,""));throw yc(ln(c,l)),Md}function N0(l){var c=l.stateNode,d=l.type,v=l.memoizedProps;switch(c[Wn]=l,c[Gn]=v,d){case"dialog":_n("cancel",c),_n("close",c);break;case"iframe":case"object":case"embed":_n("load",c);break;case"video":case"audio":for(d=0;d<l1.length;d++)_n(l1[d],c);break;case"source":_n("error",c);break;case"img":case"image":case"link":_n("error",c),_n("load",c);break;case"details":_n("toggle",c);break;case"input":_n("invalid",c),Jo(c,v.value,v.defaultValue,v.checked,v.defaultChecked,v.type,v.name,!0),Zo(c);break;case"select":_n("invalid",c);break;case"textarea":_n("invalid",c),ts(c,v.value,v.defaultValue,v.children),Zo(c)}d=v.children,typeof d!="string"&&typeof d!="number"&&typeof d!="bigint"||c.textContent===""+d||v.suppressHydrationWarning===!0||H_(c.textContent,d)?(v.popover!=null&&(_n("beforetoggle",c),_n("toggle",c)),v.onScroll!=null&&_n("scroll",c),v.onScrollEnd!=null&&_n("scrollend",c),v.onClick!=null&&(c.onclick=hp),c=!0):c=!1,c||Cu(l)}function Hs(l){for(ai=l.return;ai;)switch(ai.tag){case 5:case 13:ds=!1;return;case 27:case 3:ds=!0;return;default:ai=ai.return}}function na(l){if(l!==ai)return!1;if(!Pn)return Hs(l),Pn=!0,!1;var c=l.tag,d;if((d=c!==3&&c!==27)&&((d=c===5)&&(d=l.type,d=!(d!=="form"&&d!=="button")||P2(l.type,l.memoizedProps)),d=!d),d&&Pr&&Cu(l),Hs(l),c===13){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(r(317));e:{for(l=l.nextSibling,c=0;l;){if(l.nodeType===8)if(d=l.data,d==="/$"){if(c===0){Pr=Zs(l.nextSibling);break e}c--}else d!=="$"&&d!=="$!"&&d!=="$?"||c++;l=l.nextSibling}Pr=null}}else c===27?(c=Pr,kc(l.type)?(l=B2,B2=null,Pr=l):Pr=c):Pr=ai?Zs(l.stateNode.nextSibling):null;return!0}function Ga(){Pr=ai=null,Pn=!1}function D0(){var l=Ll;return l!==null&&(po===null?po=l:po.push.apply(po,l),Ll=null),l}function yc(l){Ll===null?Ll=[l]:Ll.push(l)}var ps=ve(null),xi=null,Ws=null;function kl(l,c,d){Q(ps,c._currentValue),c._currentValue=d}function gs(l){l._currentValue=ps.current,G(ps)}function wh(l,c,d){for(;l!==null;){var v=l.alternate;if((l.childLanes&c)!==c?(l.childLanes|=c,v!==null&&(v.childLanes|=c)):v!==null&&(v.childLanes&c)!==c&&(v.childLanes|=c),l===d)break;l=l.return}}function bh(l,c,d,v){var b=l.child;for(b!==null&&(b.return=l);b!==null;){var N=b.dependencies;if(N!==null){var K=b.child;N=N.firstContext;e:for(;N!==null;){var ue=N;N=b;for(var ye=0;ye<c.length;ye++)if(ue.context===c[ye]){N.lanes|=d,ue=N.alternate,ue!==null&&(ue.lanes|=d),wh(N.return,d,l),v||(K=null);break e}N=ue.next}}else if(b.tag===18){if(K=b.return,K===null)throw Error(r(341));K.lanes|=d,N=K.alternate,N!==null&&(N.lanes|=d),wh(K,d,l),K=null}else K=b.child;if(K!==null)K.return=b;else for(K=b;K!==null;){if(K===l){K=null;break}if(b=K.sibling,b!==null){b.return=K.return,K=b;break}K=K.return}b=K}}function xc(l,c,d,v){l=null;for(var b=c,N=!1;b!==null;){if(!N){if((b.flags&524288)!==0)N=!0;else if((b.flags&262144)!==0)break}if(b.tag===10){var K=b.alternate;if(K===null)throw Error(r(387));if(K=K.memoizedProps,K!==null){var ue=b.type;vi(b.pendingProps.value,K.value)||(l!==null?l.push(ue):l=[ue])}}else if(b===Ae.current){if(K=b.alternate,K===null)throw Error(r(387));K.memoizedState.memoizedState!==b.memoizedState.memoizedState&&(l!==null?l.push(p1):l=[p1])}b=b.return}l!==null&&bh(c,l,d,v),c.flags|=262144}function Ah(l){for(l=l.firstContext;l!==null;){if(!vi(l.context._currentValue,l.memoizedValue))return!0;l=l.next}return!1}function ms(l){xi=l,Ws=null,l=l.dependencies,l!==null&&(l.firstContext=null)}function oi(l){return Eh(xi,l)}function Ml(l,c){return xi===null&&ms(l),Eh(l,c)}function Eh(l,c){var d=c._currentValue;if(c={context:c,memoizedValue:d,next:null},Ws===null){if(l===null)throw Error(r(308));Ws=c,l.dependencies={lanes:0,firstContext:c},l.flags|=524288}else Ws=Ws.next=c;return d}var zm=typeof AbortController<"u"?AbortController:function(){var l=[],c=this.signal={aborted:!1,addEventListener:function(d,v){l.push(v)}};this.abort=function(){c.aborted=!0,l.forEach(function(d){return d()})}},O0=n.unstable_scheduleCallback,qm=n.unstable_NormalPriority,si={$$typeof:B,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Bd(){return{controller:new zm,data:new Map,refCount:0}}function Cf(l){l.refCount--,l.refCount===0&&O0(qm,function(){l.controller.abort()})}var Tf=null,jd=0,Tu=0,Gs=null;function Hm(l,c){if(Tf===null){var d=Tf=[];jd=0,Tu=E2(),Gs={status:"pending",value:void 0,then:function(v){d.push(v)}}}return jd++,c.then(P0,P0),c}function P0(){if(--jd===0&&Tf!==null){Gs!==null&&(Gs.status="fulfilled");var l=Tf;Tf=null,Tu=0,Gs=null;for(var c=0;c<l.length;c++)(0,l[c])()}}function L0(l,c){var d=[],v={status:"pending",value:null,reason:null,then:function(b){d.push(b)}};return l.then(function(){v.status="fulfilled",v.value=c;for(var b=0;b<d.length;b++)(0,d[b])(c)},function(b){for(v.status="rejected",v.reason=b,b=0;b<d.length;b++)(0,d[b])(void 0)}),v}var y=U.S;U.S=function(l,c){typeof c=="object"&&c!==null&&typeof c.then=="function"&&Hm(l,c),y!==null&&y(l,c)};var S=ve(null);function M(){var l=S.current;return l!==null?l:_r.pooledCache}function W(l,c){c===null?Q(S,S.current):Q(S,c.pool)}function Z(){var l=M();return l===null?null:{parent:si._currentValue,pool:l}}var re=Error(r(460)),ae=Error(r(474)),oe=Error(r(542)),ce={then:function(){}};function he(l){return l=l.status,l==="fulfilled"||l==="rejected"}function _e(){}function Pe(l,c,d){switch(d=l[d],d===void 0?l.push(c):d!==c&&(c.then(_e,_e),c=d),c.status){case"fulfilled":return c.value;case"rejected":throw l=c.reason,Ke(l),l;default:if(typeof c.status=="string")c.then(_e,_e);else{if(l=_r,l!==null&&100<l.shellSuspendCounter)throw Error(r(482));l=c,l.status="pending",l.then(function(v){if(c.status==="pending"){var b=c;b.status="fulfilled",b.value=v}},function(v){if(c.status==="pending"){var b=c;b.status="rejected",b.reason=v}})}switch(c.status){case"fulfilled":return c.value;case"rejected":throw l=c.reason,Ke(l),l}throw De=c,re}}var De=null;function Re(){if(De===null)throw Error(r(459));var l=De;return De=null,l}function Ke(l){if(l===re||l===oe)throw Error(r(483))}var Ue=!1;function we(l){l.updateQueue={baseState:l.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Se(l,c){l=l.updateQueue,c.updateQueue===l&&(c.updateQueue={baseState:l.baseState,firstBaseUpdate:l.firstBaseUpdate,lastBaseUpdate:l.lastBaseUpdate,shared:l.shared,callbacks:null})}function qe(l){return{lane:l,tag:0,payload:null,callback:null,next:null}}function Qe(l,c,d){var v=l.updateQueue;if(v===null)return null;if(v=v.shared,(nr&2)!==0){var b=v.pending;return b===null?c.next=c:(c.next=b.next,b.next=c),v.pending=c,c=bu(l),yh(l,null,d),c}return Dl(l,v,c,d),bu(l)}function $e(l,c,d){if(c=c.updateQueue,c!==null&&(c=c.shared,(d&4194048)!==0)){var v=c.lanes;v&=l.pendingLanes,d|=v,c.lanes=d,nn(l,d)}}function yt(l,c){var d=l.updateQueue,v=l.alternate;if(v!==null&&(v=v.updateQueue,d===v)){var b=null,N=null;if(d=d.firstBaseUpdate,d!==null){do{var K={lane:d.lane,tag:d.tag,payload:d.payload,callback:null,next:null};N===null?b=N=K:N=N.next=K,d=d.next}while(d!==null);N===null?b=N=c:N=N.next=c}else b=N=c;d={baseState:v.baseState,firstBaseUpdate:b,lastBaseUpdate:N,shared:v.shared,callbacks:v.callbacks},l.updateQueue=d;return}l=d.lastBaseUpdate,l===null?d.firstBaseUpdate=c:l.next=c,d.lastBaseUpdate=c}var ft=!1;function Ot(){if(ft){var l=Gs;if(l!==null)throw l}}function dt(l,c,d,v){ft=!1;var b=l.updateQueue;Ue=!1;var N=b.firstBaseUpdate,K=b.lastBaseUpdate,ue=b.shared.pending;if(ue!==null){b.shared.pending=null;var ye=ue,ke=ye.next;ye.next=null,K===null?N=ke:K.next=ke,K=ye;var Ge=l.alternate;Ge!==null&&(Ge=Ge.updateQueue,ue=Ge.lastBaseUpdate,ue!==K&&(ue===null?Ge.firstBaseUpdate=ke:ue.next=ke,Ge.lastBaseUpdate=ye))}if(N!==null){var Ze=b.baseState;K=0,Ge=ke=ye=null,ue=N;do{var je=ue.lane&-536870913,Fe=je!==ue.lane;if(Fe?(Rn&je)===je:(v&je)===je){je!==0&&je===Tu&&(ft=!0),Ge!==null&&(Ge=Ge.next={lane:0,tag:ue.tag,payload:ue.payload,callback:null,next:null});e:{var Yt=l,Vt=ue;je=c;var hr=d;switch(Vt.tag){case 1:if(Yt=Vt.payload,typeof Yt=="function"){Ze=Yt.call(hr,Ze,je);break e}Ze=Yt;break e;case 3:Yt.flags=Yt.flags&-65537|128;case 0:if(Yt=Vt.payload,je=typeof Yt=="function"?Yt.call(hr,Ze,je):Yt,je==null)break e;Ze=h({},Ze,je);break e;case 2:Ue=!0}}je=ue.callback,je!==null&&(l.flags|=64,Fe&&(l.flags|=8192),Fe=b.callbacks,Fe===null?b.callbacks=[je]:Fe.push(je))}else Fe={lane:je,tag:ue.tag,payload:ue.payload,callback:ue.callback,next:null},Ge===null?(ke=Ge=Fe,ye=Ze):Ge=Ge.next=Fe,K|=je;if(ue=ue.next,ue===null){if(ue=b.shared.pending,ue===null)break;Fe=ue,ue=Fe.next,Fe.next=null,b.lastBaseUpdate=Fe,b.shared.pending=null}}while(!0);Ge===null&&(ye=Ze),b.baseState=ye,b.firstBaseUpdate=ke,b.lastBaseUpdate=Ge,N===null&&(b.shared.lanes=0),Dc|=K,l.lanes=K,l.memoizedState=Ze}}function Tn(l,c){if(typeof l!="function")throw Error(r(191,l));l.call(c)}function Un(l,c){var d=l.callbacks;if(d!==null)for(l.callbacks=null,l=0;l<d.length;l++)Tn(d[l],c)}var sn=ve(null),rn=ve(0);function Qn(l,c){l=Bu,Q(rn,l),Q(sn,c),Bu=l|c.baseLanes}function Vn(){Q(rn,Bu),Q(sn,sn.current)}function Zt(){Bu=rn.current,G(sn),G(rn)}var tr=0,Lt=null,Wt=null,Sn=null,In=!1,_i=!1,li=!1,Fr=0,Ur=0,Qr=null,fo=0;function zn(){throw Error(r(321))}function Zr(l,c){if(c===null)return!1;for(var d=0;d<c.length&&d<l.length;d++)if(!vi(l[d],c[d]))return!1;return!0}function Fo(l,c,d,v,b,N){return tr=N,Lt=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,U.H=l===null||l.memoizedState===null?Ex:Sx,li=!1,N=d(v,b),li=!1,_i&&(N=Iu(c,d,v,b)),Bl(l),N}function Bl(l){U.H=G0;var c=Wt!==null&&Wt.next!==null;if(tr=0,Sn=Wt=Lt=null,In=!1,Ur=0,Qr=null,c)throw Error(r(300));l===null||Hi||(l=l.dependencies,l!==null&&Ah(l)&&(Hi=!0))}function Iu(l,c,d,v){Lt=l;var b=0;do{if(_i&&(Qr=null),Ur=0,_i=!1,25<=b)throw Error(r(301));if(b+=1,Sn=Wt=null,l.updateQueue!=null){var N=l.updateQueue;N.lastEffect=null,N.events=null,N.stores=null,N.memoCache!=null&&(N.memoCache.index=0)}U.H=K8,N=c(d,v)}while(_i);return N}function jl(){var l=U.H,c=l.useState()[0];return c=typeof c.then=="function"?Fl(c):c,l=l.useState()[0],(Wt!==null?Wt.memoizedState:null)!==l&&(Lt.flags|=1024),c}function xr(){var l=Fr!==0;return Fr=0,l}function If(l,c,d){c.updateQueue=l.updateQueue,c.flags&=-2053,l.lanes&=~d}function Sh(l){if(In){for(l=l.memoizedState;l!==null;){var c=l.queue;c!==null&&(c.pending=null),l=l.next}In=!1}tr=0,Sn=Wt=Lt=null,_i=!1,Ur=Fr=0,Qr=null}function ra(){var l={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Sn===null?Lt.memoizedState=Sn=l:Sn=Sn.next=l,Sn}function Sr(){if(Wt===null){var l=Lt.alternate;l=l!==null?l.memoizedState:null}else l=Wt.next;var c=Sn===null?Lt.memoizedState:Sn.next;if(c!==null)Sn=c,Wt=l;else{if(l===null)throw Lt.alternate===null?Error(r(467)):Error(r(310));Wt=l,l={memoizedState:Wt.memoizedState,baseState:Wt.baseState,baseQueue:Wt.baseQueue,queue:Wt.queue,next:null},Sn===null?Lt.memoizedState=Sn=l:Sn=Sn.next=l}return Sn}function Ru(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Fl(l){var c=Ur;return Ur+=1,Qr===null&&(Qr=[]),l=Pe(Qr,l,c),c=Lt,(Sn===null?c.memoizedState:Sn.next)===null&&(c=c.alternate,U.H=c===null||c.memoizedState===null?Ex:Sx),l}function Ea(l){if(l!==null&&typeof l=="object"){if(typeof l.then=="function")return Fl(l);if(l.$$typeof===B)return oi(l)}throw Error(r(438,String(l)))}function Ul(l){var c=null,d=Lt.updateQueue;if(d!==null&&(c=d.memoCache),c==null){var v=Lt.alternate;v!==null&&(v=v.updateQueue,v!==null&&(v=v.memoCache,v!=null&&(c={data:v.data.map(function(b){return b.slice()}),index:0})))}if(c==null&&(c={data:[],index:0}),d===null&&(d=Ru(),Lt.updateQueue=d),d.memoCache=c,d=c.data[c.index],d===void 0)for(d=c.data[c.index]=Array(l),v=0;v<l;v++)d[v]=k;return c.index++,d}function Sa(l,c){return typeof c=="function"?c(l):c}function Rf(l){var c=Sr();return _c(c,Wt,l)}function _c(l,c,d){var v=l.queue;if(v===null)throw Error(r(311));v.lastRenderedReducer=d;var b=l.baseQueue,N=v.pending;if(N!==null){if(b!==null){var K=b.next;b.next=N.next,N.next=K}c.baseQueue=b=N,v.pending=null}if(N=l.baseState,b===null)l.memoizedState=N;else{c=b.next;var ue=K=null,ye=null,ke=c,Ge=!1;do{var Ze=ke.lane&-536870913;if(Ze!==ke.lane?(Rn&Ze)===Ze:(tr&Ze)===Ze){var je=ke.revertLane;if(je===0)ye!==null&&(ye=ye.next={lane:0,revertLane:0,action:ke.action,hasEagerState:ke.hasEagerState,eagerState:ke.eagerState,next:null}),Ze===Tu&&(Ge=!0);else if((tr&je)===je){ke=ke.next,je===Tu&&(Ge=!0);continue}else Ze={lane:0,revertLane:ke.revertLane,action:ke.action,hasEagerState:ke.hasEagerState,eagerState:ke.eagerState,next:null},ye===null?(ue=ye=Ze,K=N):ye=ye.next=Ze,Lt.lanes|=je,Dc|=je;Ze=ke.action,li&&d(N,Ze),N=ke.hasEagerState?ke.eagerState:d(N,Ze)}else je={lane:Ze,revertLane:ke.revertLane,action:ke.action,hasEagerState:ke.hasEagerState,eagerState:ke.eagerState,next:null},ye===null?(ue=ye=je,K=N):ye=ye.next=je,Lt.lanes|=Ze,Dc|=Ze;ke=ke.next}while(ke!==null&&ke!==c);if(ye===null?K=N:ye.next=ue,!vi(N,l.memoizedState)&&(Hi=!0,Ge&&(d=Gs,d!==null)))throw d;l.memoizedState=N,l.baseState=K,l.baseQueue=ye,v.lastRenderedState=N}return b===null&&(v.lanes=0),[l.memoizedState,v.dispatch]}function Ch(l){var c=Sr(),d=c.queue;if(d===null)throw Error(r(311));d.lastRenderedReducer=l;var v=d.dispatch,b=d.pending,N=c.memoizedState;if(b!==null){d.pending=null;var K=b=b.next;do N=l(N,K.action),K=K.next;while(K!==b);vi(N,c.memoizedState)||(Hi=!0),c.memoizedState=N,c.baseQueue===null&&(c.baseState=N),d.lastRenderedState=N}return[N,v]}function Nf(l,c,d){var v=Lt,b=Sr(),N=Pn;if(N){if(d===void 0)throw Error(r(407));d=d()}else d=c();var K=!vi((Wt||b).memoizedState,d);K&&(b.memoizedState=d,Hi=!0),b=b.queue;var ue=wc.bind(null,v,b,l);if(Ec(2048,8,ue,[l]),b.getSnapshot!==c||K||Sn!==null&&Sn.memoizedState.tag&1){if(v.flags|=2048,Xs(9,Lf(),Df.bind(null,v,b,d,c),null),_r===null)throw Error(r(349));N||(tr&124)!==0||Th(v,c,d)}return d}function Th(l,c,d){l.flags|=16384,l={getSnapshot:c,value:d},c=Lt.updateQueue,c===null?(c=Ru(),Lt.updateQueue=c,c.stores=[l]):(d=c.stores,d===null?c.stores=[l]:d.push(l))}function Df(l,c,d,v){c.value=d,c.getSnapshot=v,k0(c)&&M0(l)}function wc(l,c,d){return d(function(){k0(c)&&M0(l)})}function k0(l){var c=l.getSnapshot;l=l.value;try{var d=c();return!vi(l,d)}catch{return!0}}function M0(l){var c=Fs(l,2);c!==null&&Wo(c,l,2)}function Of(l){var c=ra();if(typeof l=="function"){var d=l;if(l=d(),li){Nt(!0);try{d()}finally{Nt(!1)}}}return c.memoizedState=c.baseState=l,c.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Sa,lastRenderedState:l},c}function $s(l,c,d,v){return l.baseState=d,_c(l,Wt,typeof v=="function"?v:Sa)}function Wm(l,c,d,v,b){if(W0(l))throw Error(r(485));if(l=c.action,l!==null){var N={payload:b,action:l,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(K){N.listeners.push(K)}};U.T!==null?d(!0):N.isTransition=!1,v(N),d=c.pending,d===null?(N.next=c.pending=N,B0(c,N)):(N.next=d.next,c.pending=d.next=N)}}function B0(l,c){var d=c.action,v=c.payload,b=l.state;if(c.isTransition){var N=U.T,K={};U.T=K;try{var ue=d(b,v),ye=U.S;ye!==null&&ye(K,ue),j0(l,c,ue)}catch(ke){bc(l,c,ke)}finally{U.T=N}}else try{N=d(b,v),j0(l,c,N)}catch(ke){bc(l,c,ke)}}function j0(l,c,d){d!==null&&typeof d=="object"&&typeof d.then=="function"?d.then(function(v){Fd(l,c,v)},function(v){return bc(l,c,v)}):Fd(l,c,d)}function Fd(l,c,d){c.status="fulfilled",c.value=d,Ud(c),l.state=d,c=l.pending,c!==null&&(d=c.next,d===c?l.pending=null:(d=d.next,c.next=d,B0(l,d)))}function bc(l,c,d){var v=l.pending;if(l.pending=null,v!==null){v=v.next;do c.status="rejected",c.reason=d,Ud(c),c=c.next;while(c!==v)}l.action=null}function Ud(l){l=l.listeners;for(var c=0;c<l.length;c++)(0,l[c])()}function Vd(l,c){return c}function Pf(l,c){if(Pn){var d=_r.formState;if(d!==null){e:{var v=Lt;if(Pn){if(Pr){t:{for(var b=Pr,N=ds;b.nodeType!==8;){if(!N){b=null;break t}if(b=Zs(b.nextSibling),b===null){b=null;break t}}N=b.data,b=N==="F!"||N==="F"?b:null}if(b){Pr=Zs(b.nextSibling),v=b.data==="F!";break e}}Cu(v)}v=!1}v&&(c=d[0])}}return d=ra(),d.memoizedState=d.baseState=c,v={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Vd,lastRenderedState:c},d.queue=v,d=wx.bind(null,Lt,v),v.dispatch=d,v=Of(!1),N=Gm.bind(null,Lt,!1,v.queue),v=ra(),b={state:c,dispatch:null,action:l,pending:null},v.queue=b,d=Wm.bind(null,Lt,b,N,d),b.dispatch=d,v.memoizedState=l,[c,d,!1]}function Ih(l){var c=Sr();return Ac(c,Wt,l)}function Ac(l,c,d){if(c=_c(l,c,Vd)[0],l=Rf(Sa)[0],typeof c=="object"&&c!==null&&typeof c.then=="function")try{var v=Fl(c)}catch(K){throw K===re?oe:K}else v=c;c=Sr();var b=c.queue,N=b.dispatch;return d!==c.memoizedState&&(Lt.flags|=2048,Xs(9,Lf(),F0.bind(null,b,d),null)),[v,N,l]}function F0(l,c){l.action=c}function U0(l){var c=Sr(),d=Wt;if(d!==null)return Ac(c,d,l);Sr(),c=c.memoizedState,d=Sr();var v=d.queue.dispatch;return d.memoizedState=l,[c,v,!1]}function Xs(l,c,d,v){return l={tag:l,create:d,deps:v,inst:c,next:null},c=Lt.updateQueue,c===null&&(c=Ru(),Lt.updateQueue=c),d=c.lastEffect,d===null?c.lastEffect=l.next=l:(v=d.next,d.next=l,l.next=v,c.lastEffect=l),l}function Lf(){return{destroy:void 0,resource:void 0}}function Rh(){return Sr().memoizedState}function Uo(l,c,d,v){var b=ra();v=v===void 0?null:v,Lt.flags|=l,b.memoizedState=Xs(1|c,Lf(),d,v)}function Ec(l,c,d,v){var b=Sr();v=v===void 0?null:v;var N=b.memoizedState.inst;Wt!==null&&v!==null&&Zr(v,Wt.memoizedState.deps)?b.memoizedState=Xs(c,N,d,v):(Lt.flags|=l,b.memoizedState=Xs(1|c,N,d,v))}function zd(l,c){Uo(8390656,8,l,c)}function V0(l,c){Ec(2048,8,l,c)}function qd(l,c){return Ec(4,2,l,c)}function Nu(l,c){return Ec(4,4,l,c)}function z0(l,c){if(typeof c=="function"){l=l();var d=c(l);return function(){typeof d=="function"?d():c(null)}}if(c!=null)return l=l(),c.current=l,function(){c.current=null}}function Hd(l,c,d){d=d!=null?d.concat([l]):null,Ec(4,4,z0.bind(null,c,l),d)}function Wd(){}function Gd(l,c){var d=Sr();c=c===void 0?null:c;var v=d.memoizedState;return c!==null&&Zr(c,v[1])?v[0]:(d.memoizedState=[l,c],l)}function q0(l,c){var d=Sr();c=c===void 0?null:c;var v=d.memoizedState;if(c!==null&&Zr(c,v[1]))return v[0];if(v=l(),li){Nt(!0);try{l()}finally{Nt(!1)}}return d.memoizedState=[v,c],v}function Du(l,c,d){return d===void 0||(tr&1073741824)!==0?l.memoizedState=c:(l.memoizedState=d,l=v_(),Lt.lanes|=l,Dc|=l,d)}function Nh(l,c,d,v){return vi(d,c)?d:sn.current!==null?(l=Du(l,d,v),vi(l,c)||(Hi=!0),l):(tr&42)===0?(Hi=!0,l.memoizedState=d):(l=v_(),Lt.lanes|=l,Dc|=l,c)}function kf(l,c,d,v,b){var N=z.p;z.p=N!==0&&8>N?N:8;var K=U.T,ue={};U.T=ue,Gm(l,!1,c,d);try{var ye=b(),ke=U.S;if(ke!==null&&ke(ue,ye),ye!==null&&typeof ye=="object"&&typeof ye.then=="function"){var Ge=L0(ye,v);Kd(l,c,Ge,Ho(l))}else Kd(l,c,v,Ho(l))}catch(Ze){Kd(l,c,{then:function(){},status:"rejected",reason:Ze},Ho())}finally{z.p=N,U.T=K}}function Ys(){}function vs(l,c,d,v){if(l.tag!==5)throw Error(r(476));var b=Ks(l).queue;kf(l,b,c,ee,d===null?Ys:function(){return Mf(l),d(v)})}function Ks(l){var c=l.memoizedState;if(c!==null)return c;c={memoizedState:ee,baseState:ee,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Sa,lastRenderedState:ee},next:null};var d={};return c.next={memoizedState:d,baseState:d,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Sa,lastRenderedState:d},next:null},l.memoizedState=c,l=l.alternate,l!==null&&(l.memoizedState=c),c}function Mf(l){var c=Ks(l).next.queue;Kd(l,c,{},Ho())}function Bf(){return oi(p1)}function $d(){return Sr().memoizedState}function H0(){return Sr().memoizedState}function Xd(l){for(var c=l.return;c!==null;){switch(c.tag){case 24:case 3:var d=Ho();l=qe(d);var v=Qe(c,l,d);v!==null&&(Wo(v,c,d),$e(v,c,d)),c={cache:Bd()},l.payload=c;return}c=c.return}}function Yd(l,c,d){var v=Ho();d={lane:v,revertLane:0,action:d,hasEagerState:!1,eagerState:null,next:null},W0(l)?bx(c,d):(d=Ol(l,c,d,v),d!==null&&(Wo(d,l,v),Ax(d,c,v)))}function wx(l,c,d){var v=Ho();Kd(l,c,d,v)}function Kd(l,c,d,v){var b={lane:v,revertLane:0,action:d,hasEagerState:!1,eagerState:null,next:null};if(W0(l))bx(c,b);else{var N=l.alternate;if(l.lanes===0&&(N===null||N.lanes===0)&&(N=c.lastRenderedReducer,N!==null))try{var K=c.lastRenderedState,ue=N(K,d);if(b.hasEagerState=!0,b.eagerState=ue,vi(ue,K))return Dl(l,c,b,0),_r===null&&lo(),!1}catch{}finally{}if(d=Ol(l,c,b,v),d!==null)return Wo(d,l,v),Ax(d,c,v),!0}return!1}function Gm(l,c,d,v){if(v={lane:2,revertLane:E2(),action:v,hasEagerState:!1,eagerState:null,next:null},W0(l)){if(c)throw Error(r(479))}else c=Ol(l,d,v,2),c!==null&&Wo(c,l,2)}function W0(l){var c=l.alternate;return l===Lt||c!==null&&c===Lt}function bx(l,c){_i=In=!0;var d=l.pending;d===null?c.next=c:(c.next=d.next,d.next=c),l.pending=c}function Ax(l,c,d){if((d&4194048)!==0){var v=c.lanes;v&=l.pendingLanes,d|=v,c.lanes=d,nn(l,d)}}var G0={readContext:oi,use:Ea,useCallback:zn,useContext:zn,useEffect:zn,useImperativeHandle:zn,useLayoutEffect:zn,useInsertionEffect:zn,useMemo:zn,useReducer:zn,useRef:zn,useState:zn,useDebugValue:zn,useDeferredValue:zn,useTransition:zn,useSyncExternalStore:zn,useId:zn,useHostTransitionStatus:zn,useFormState:zn,useActionState:zn,useOptimistic:zn,useMemoCache:zn,useCacheRefresh:zn},Ex={readContext:oi,use:Ea,useCallback:function(l,c){return ra().memoizedState=[l,c===void 0?null:c],l},useContext:oi,useEffect:zd,useImperativeHandle:function(l,c,d){d=d!=null?d.concat([l]):null,Uo(4194308,4,z0.bind(null,c,l),d)},useLayoutEffect:function(l,c){return Uo(4194308,4,l,c)},useInsertionEffect:function(l,c){Uo(4,2,l,c)},useMemo:function(l,c){var d=ra();c=c===void 0?null:c;var v=l();if(li){Nt(!0);try{l()}finally{Nt(!1)}}return d.memoizedState=[v,c],v},useReducer:function(l,c,d){var v=ra();if(d!==void 0){var b=d(c);if(li){Nt(!0);try{d(c)}finally{Nt(!1)}}}else b=c;return v.memoizedState=v.baseState=b,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:l,lastRenderedState:b},v.queue=l,l=l.dispatch=Yd.bind(null,Lt,l),[v.memoizedState,l]},useRef:function(l){var c=ra();return l={current:l},c.memoizedState=l},useState:function(l){l=Of(l);var c=l.queue,d=wx.bind(null,Lt,c);return c.dispatch=d,[l.memoizedState,d]},useDebugValue:Wd,useDeferredValue:function(l,c){var d=ra();return Du(d,l,c)},useTransition:function(){var l=Of(!1);return l=kf.bind(null,Lt,l.queue,!0,!1),ra().memoizedState=l,[!1,l]},useSyncExternalStore:function(l,c,d){var v=Lt,b=ra();if(Pn){if(d===void 0)throw Error(r(407));d=d()}else{if(d=c(),_r===null)throw Error(r(349));(Rn&124)!==0||Th(v,c,d)}b.memoizedState=d;var N={value:d,getSnapshot:c};return b.queue=N,zd(wc.bind(null,v,N,l),[l]),v.flags|=2048,Xs(9,Lf(),Df.bind(null,v,N,d,c),null),d},useId:function(){var l=ra(),c=_r.identifierPrefix;if(Pn){var d=qs,v=zs;d=(v&~(1<<32-xt(v)-1)).toString(32)+d,c="«"+c+"R"+d,d=Fr++,0<d&&(c+="H"+d.toString(32)),c+="»"}else d=fo++,c="«"+c+"r"+d.toString(32)+"»";return l.memoizedState=c},useHostTransitionStatus:Bf,useFormState:Pf,useActionState:Pf,useOptimistic:function(l){var c=ra();c.memoizedState=c.baseState=l;var d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return c.queue=d,c=Gm.bind(null,Lt,!0,d),d.dispatch=c,[l,c]},useMemoCache:Ul,useCacheRefresh:function(){return ra().memoizedState=Xd.bind(null,Lt)}},Sx={readContext:oi,use:Ea,useCallback:Gd,useContext:oi,useEffect:V0,useImperativeHandle:Hd,useInsertionEffect:qd,useLayoutEffect:Nu,useMemo:q0,useReducer:Rf,useRef:Rh,useState:function(){return Rf(Sa)},useDebugValue:Wd,useDeferredValue:function(l,c){var d=Sr();return Nh(d,Wt.memoizedState,l,c)},useTransition:function(){var l=Rf(Sa)[0],c=Sr().memoizedState;return[typeof l=="boolean"?l:Fl(l),c]},useSyncExternalStore:Nf,useId:$d,useHostTransitionStatus:Bf,useFormState:Ih,useActionState:Ih,useOptimistic:function(l,c){var d=Sr();return $s(d,Wt,l,c)},useMemoCache:Ul,useCacheRefresh:H0},K8={readContext:oi,use:Ea,useCallback:Gd,useContext:oi,useEffect:V0,useImperativeHandle:Hd,useInsertionEffect:qd,useLayoutEffect:Nu,useMemo:q0,useReducer:Ch,useRef:Rh,useState:function(){return Ch(Sa)},useDebugValue:Wd,useDeferredValue:function(l,c){var d=Sr();return Wt===null?Du(d,l,c):Nh(d,Wt.memoizedState,l,c)},useTransition:function(){var l=Ch(Sa)[0],c=Sr().memoizedState;return[typeof l=="boolean"?l:Fl(l),c]},useSyncExternalStore:Nf,useId:$d,useHostTransitionStatus:Bf,useFormState:U0,useActionState:U0,useOptimistic:function(l,c){var d=Sr();return Wt!==null?$s(d,Wt,l,c):(d.baseState=l,[l,d.queue.dispatch])},useMemoCache:Ul,useCacheRefresh:H0},Dh=null,Qd=0;function $0(l){var c=Qd;return Qd+=1,Dh===null&&(Dh=[]),Pe(Dh,l,c)}function Zd(l,c){c=c.props.ref,l.ref=c!==void 0?c:null}function X0(l,c){throw c.$$typeof===p?Error(r(525)):(l=Object.prototype.toString.call(c),Error(r(31,l==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":l)))}function Cx(l){var c=l._init;return c(l._payload)}function Tx(l){function c(Ne,Ee){if(l){var Oe=Ne.deletions;Oe===null?(Ne.deletions=[Ee],Ne.flags|=16):Oe.push(Ee)}}function d(Ne,Ee){if(!l)return null;for(;Ee!==null;)c(Ne,Ee),Ee=Ee.sibling;return null}function v(Ne){for(var Ee=new Map;Ne!==null;)Ne.key!==null?Ee.set(Ne.key,Ne):Ee.set(Ne.index,Ne),Ne=Ne.sibling;return Ee}function b(Ne,Ee){return Ne=hs(Ne,Ee),Ne.index=0,Ne.sibling=null,Ne}function N(Ne,Ee,Oe){return Ne.index=Oe,l?(Oe=Ne.alternate,Oe!==null?(Oe=Oe.index,Oe<Ee?(Ne.flags|=67108866,Ee):Oe):(Ne.flags|=67108866,Ee)):(Ne.flags|=1048576,Ee)}function K(Ne){return l&&Ne.alternate===null&&(Ne.flags|=67108866),Ne}function ue(Ne,Ee,Oe,Ye){return Ee===null||Ee.tag!==6?(Ee=xh(Oe,Ne.mode,Ye),Ee.return=Ne,Ee):(Ee=b(Ee,Oe),Ee.return=Ne,Ee)}function ye(Ne,Ee,Oe,Ye){var St=Oe.type;return St===x?Ge(Ne,Ee,Oe.props.children,Ye,Oe.key):Ee!==null&&(Ee.elementType===St||typeof St=="object"&&St!==null&&St.$$typeof===A&&Cx(St)===Ee.type)?(Ee=b(Ee,Oe.props),Zd(Ee,Oe),Ee.return=Ne,Ee):(Ee=Au(Oe.type,Oe.key,Oe.props,null,Ne.mode,Ye),Zd(Ee,Oe),Ee.return=Ne,Ee)}function ke(Ne,Ee,Oe,Ye){return Ee===null||Ee.tag!==4||Ee.stateNode.containerInfo!==Oe.containerInfo||Ee.stateNode.implementation!==Oe.implementation?(Ee=Af(Oe,Ne.mode,Ye),Ee.return=Ne,Ee):(Ee=b(Ee,Oe.children||[]),Ee.return=Ne,Ee)}function Ge(Ne,Ee,Oe,Ye,St){return Ee===null||Ee.tag!==7?(Ee=Us(Oe,Ne.mode,Ye,St),Ee.return=Ne,Ee):(Ee=b(Ee,Oe),Ee.return=Ne,Ee)}function Ze(Ne,Ee,Oe){if(typeof Ee=="string"&&Ee!==""||typeof Ee=="number"||typeof Ee=="bigint")return Ee=xh(""+Ee,Ne.mode,Oe),Ee.return=Ne,Ee;if(typeof Ee=="object"&&Ee!==null){switch(Ee.$$typeof){case g:return Oe=Au(Ee.type,Ee.key,Ee.props,null,Ne.mode,Oe),Zd(Oe,Ee),Oe.return=Ne,Oe;case m:return Ee=Af(Ee,Ne.mode,Oe),Ee.return=Ne,Ee;case A:var Ye=Ee._init;return Ee=Ye(Ee._payload),Ze(Ne,Ee,Oe)}if(ne(Ee)||L(Ee))return Ee=Us(Ee,Ne.mode,Oe,null),Ee.return=Ne,Ee;if(typeof Ee.then=="function")return Ze(Ne,$0(Ee),Oe);if(Ee.$$typeof===B)return Ze(Ne,Ml(Ne,Ee),Oe);X0(Ne,Ee)}return null}function je(Ne,Ee,Oe,Ye){var St=Ee!==null?Ee.key:null;if(typeof Oe=="string"&&Oe!==""||typeof Oe=="number"||typeof Oe=="bigint")return St!==null?null:ue(Ne,Ee,""+Oe,Ye);if(typeof Oe=="object"&&Oe!==null){switch(Oe.$$typeof){case g:return Oe.key===St?ye(Ne,Ee,Oe,Ye):null;case m:return Oe.key===St?ke(Ne,Ee,Oe,Ye):null;case A:return St=Oe._init,Oe=St(Oe._payload),je(Ne,Ee,Oe,Ye)}if(ne(Oe)||L(Oe))return St!==null?null:Ge(Ne,Ee,Oe,Ye,null);if(typeof Oe.then=="function")return je(Ne,Ee,$0(Oe),Ye);if(Oe.$$typeof===B)return je(Ne,Ee,Ml(Ne,Oe),Ye);X0(Ne,Oe)}return null}function Fe(Ne,Ee,Oe,Ye,St){if(typeof Ye=="string"&&Ye!==""||typeof Ye=="number"||typeof Ye=="bigint")return Ne=Ne.get(Oe)||null,ue(Ee,Ne,""+Ye,St);if(typeof Ye=="object"&&Ye!==null){switch(Ye.$$typeof){case g:return Ne=Ne.get(Ye.key===null?Oe:Ye.key)||null,ye(Ee,Ne,Ye,St);case m:return Ne=Ne.get(Ye.key===null?Oe:Ye.key)||null,ke(Ee,Ne,Ye,St);case A:var pn=Ye._init;return Ye=pn(Ye._payload),Fe(Ne,Ee,Oe,Ye,St)}if(ne(Ye)||L(Ye))return Ne=Ne.get(Oe)||null,Ge(Ee,Ne,Ye,St,null);if(typeof Ye.then=="function")return Fe(Ne,Ee,Oe,$0(Ye),St);if(Ye.$$typeof===B)return Fe(Ne,Ee,Oe,Ml(Ee,Ye),St);X0(Ee,Ye)}return null}function Yt(Ne,Ee,Oe,Ye){for(var St=null,pn=null,Pt=Ee,qt=Ee=0,Gi=null;Pt!==null&&qt<Oe.length;qt++){Pt.index>qt?(Gi=Pt,Pt=null):Gi=Pt.sibling;var qn=je(Ne,Pt,Oe[qt],Ye);if(qn===null){Pt===null&&(Pt=Gi);break}l&&Pt&&qn.alternate===null&&c(Ne,Pt),Ee=N(qn,Ee,qt),pn===null?St=qn:pn.sibling=qn,pn=qn,Pt=Gi}if(qt===Oe.length)return d(Ne,Pt),Pn&&Su(Ne,qt),St;if(Pt===null){for(;qt<Oe.length;qt++)Pt=Ze(Ne,Oe[qt],Ye),Pt!==null&&(Ee=N(Pt,Ee,qt),pn===null?St=Pt:pn.sibling=Pt,pn=Pt);return Pn&&Su(Ne,qt),St}for(Pt=v(Pt);qt<Oe.length;qt++)Gi=Fe(Pt,Ne,qt,Oe[qt],Ye),Gi!==null&&(l&&Gi.alternate!==null&&Pt.delete(Gi.key===null?qt:Gi.key),Ee=N(Gi,Ee,qt),pn===null?St=Gi:pn.sibling=Gi,pn=Gi);return l&&Pt.forEach(function(Uc){return c(Ne,Uc)}),Pn&&Su(Ne,qt),St}function Vt(Ne,Ee,Oe,Ye){if(Oe==null)throw Error(r(151));for(var St=null,pn=null,Pt=Ee,qt=Ee=0,Gi=null,qn=Oe.next();Pt!==null&&!qn.done;qt++,qn=Oe.next()){Pt.index>qt?(Gi=Pt,Pt=null):Gi=Pt.sibling;var Uc=je(Ne,Pt,qn.value,Ye);if(Uc===null){Pt===null&&(Pt=Gi);break}l&&Pt&&Uc.alternate===null&&c(Ne,Pt),Ee=N(Uc,Ee,qt),pn===null?St=Uc:pn.sibling=Uc,pn=Uc,Pt=Gi}if(qn.done)return d(Ne,Pt),Pn&&Su(Ne,qt),St;if(Pt===null){for(;!qn.done;qt++,qn=Oe.next())qn=Ze(Ne,qn.value,Ye),qn!==null&&(Ee=N(qn,Ee,qt),pn===null?St=qn:pn.sibling=qn,pn=qn);return Pn&&Su(Ne,qt),St}for(Pt=v(Pt);!qn.done;qt++,qn=Oe.next())qn=Fe(Pt,Ne,qt,qn.value,Ye),qn!==null&&(l&&qn.alternate!==null&&Pt.delete(qn.key===null?qt:qn.key),Ee=N(qn,Ee,qt),pn===null?St=qn:pn.sibling=qn,pn=qn);return l&&Pt.forEach(function(QC){return c(Ne,QC)}),Pn&&Su(Ne,qt),St}function hr(Ne,Ee,Oe,Ye){if(typeof Oe=="object"&&Oe!==null&&Oe.type===x&&Oe.key===null&&(Oe=Oe.props.children),typeof Oe=="object"&&Oe!==null){switch(Oe.$$typeof){case g:e:{for(var St=Oe.key;Ee!==null;){if(Ee.key===St){if(St=Oe.type,St===x){if(Ee.tag===7){d(Ne,Ee.sibling),Ye=b(Ee,Oe.props.children),Ye.return=Ne,Ne=Ye;break e}}else if(Ee.elementType===St||typeof St=="object"&&St!==null&&St.$$typeof===A&&Cx(St)===Ee.type){d(Ne,Ee.sibling),Ye=b(Ee,Oe.props),Zd(Ye,Oe),Ye.return=Ne,Ne=Ye;break e}d(Ne,Ee);break}else c(Ne,Ee);Ee=Ee.sibling}Oe.type===x?(Ye=Us(Oe.props.children,Ne.mode,Ye,Oe.key),Ye.return=Ne,Ne=Ye):(Ye=Au(Oe.type,Oe.key,Oe.props,null,Ne.mode,Ye),Zd(Ye,Oe),Ye.return=Ne,Ne=Ye)}return K(Ne);case m:e:{for(St=Oe.key;Ee!==null;){if(Ee.key===St)if(Ee.tag===4&&Ee.stateNode.containerInfo===Oe.containerInfo&&Ee.stateNode.implementation===Oe.implementation){d(Ne,Ee.sibling),Ye=b(Ee,Oe.children||[]),Ye.return=Ne,Ne=Ye;break e}else{d(Ne,Ee);break}else c(Ne,Ee);Ee=Ee.sibling}Ye=Af(Oe,Ne.mode,Ye),Ye.return=Ne,Ne=Ye}return K(Ne);case A:return St=Oe._init,Oe=St(Oe._payload),hr(Ne,Ee,Oe,Ye)}if(ne(Oe))return Yt(Ne,Ee,Oe,Ye);if(L(Oe)){if(St=L(Oe),typeof St!="function")throw Error(r(150));return Oe=St.call(Oe),Vt(Ne,Ee,Oe,Ye)}if(typeof Oe.then=="function")return hr(Ne,Ee,$0(Oe),Ye);if(Oe.$$typeof===B)return hr(Ne,Ee,Ml(Ne,Oe),Ye);X0(Ne,Oe)}return typeof Oe=="string"&&Oe!==""||typeof Oe=="number"||typeof Oe=="bigint"?(Oe=""+Oe,Ee!==null&&Ee.tag===6?(d(Ne,Ee.sibling),Ye=b(Ee,Oe),Ye.return=Ne,Ne=Ye):(d(Ne,Ee),Ye=xh(Oe,Ne.mode,Ye),Ye.return=Ne,Ne=Ye),K(Ne)):d(Ne,Ee)}return function(Ne,Ee,Oe,Ye){try{Qd=0;var St=hr(Ne,Ee,Oe,Ye);return Dh=null,St}catch(Pt){if(Pt===re||Pt===oe)throw Pt;var pn=qi(29,Pt,null,Ne.mode);return pn.lanes=Ye,pn.return=Ne,pn}finally{}}}var Oh=Tx(!0),Ix=Tx(!1),ys=ve(null),Vl=null;function Sc(l){var c=l.alternate;Q(Ni,Ni.current&1),Q(ys,l),Vl===null&&(c===null||sn.current!==null||c.memoizedState!==null)&&(Vl=l)}function Rx(l){if(l.tag===22){if(Q(Ni,Ni.current),Q(ys,l),Vl===null){var c=l.alternate;c!==null&&c.memoizedState!==null&&(Vl=l)}}else Cc()}function Cc(){Q(Ni,Ni.current),Q(ys,ys.current)}function Ou(l){G(ys),Vl===l&&(Vl=null),G(Ni)}var Ni=ve(0);function Y0(l){for(var c=l;c!==null;){if(c.tag===13){var d=c.memoizedState;if(d!==null&&(d=d.dehydrated,d===null||d.data==="$?"||M2(d)))return c}else if(c.tag===19&&c.memoizedProps.revealOrder!==void 0){if((c.flags&128)!==0)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===l)break;for(;c.sibling===null;){if(c.return===null||c.return===l)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}function $m(l,c,d,v){c=l.memoizedState,d=d(v,c),d=d==null?c:h({},c,d),l.memoizedState=d,l.lanes===0&&(l.updateQueue.baseState=d)}var Xm={enqueueSetState:function(l,c,d){l=l._reactInternals;var v=Ho(),b=qe(v);b.payload=c,d!=null&&(b.callback=d),c=Qe(l,b,v),c!==null&&(Wo(c,l,v),$e(c,l,v))},enqueueReplaceState:function(l,c,d){l=l._reactInternals;var v=Ho(),b=qe(v);b.tag=1,b.payload=c,d!=null&&(b.callback=d),c=Qe(l,b,v),c!==null&&(Wo(c,l,v),$e(c,l,v))},enqueueForceUpdate:function(l,c){l=l._reactInternals;var d=Ho(),v=qe(d);v.tag=2,c!=null&&(v.callback=c),c=Qe(l,v,d),c!==null&&(Wo(c,l,d),$e(c,l,d))}};function Nx(l,c,d,v,b,N,K){return l=l.stateNode,typeof l.shouldComponentUpdate=="function"?l.shouldComponentUpdate(v,N,K):c.prototype&&c.prototype.isPureReactComponent?!El(d,v)||!El(b,N):!0}function Dx(l,c,d,v){l=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(d,v),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(d,v),c.state!==l&&Xm.enqueueReplaceState(c,c.state,null)}function jf(l,c){var d=c;if("ref"in c){d={};for(var v in c)v!=="ref"&&(d[v]=c[v])}if(l=l.defaultProps){d===c&&(d=h({},d));for(var b in l)d[b]===void 0&&(d[b]=l[b])}return d}var K0=typeof reportError=="function"?reportError:function(l){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var c=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof l=="object"&&l!==null&&typeof l.message=="string"?String(l.message):String(l),error:l});if(!window.dispatchEvent(c))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",l);return}console.error(l)};function Ox(l){K0(l)}function Px(l){console.error(l)}function Lx(l){K0(l)}function Q0(l,c){try{var d=l.onUncaughtError;d(c.value,{componentStack:c.stack})}catch(v){setTimeout(function(){throw v})}}function kx(l,c,d){try{var v=l.onCaughtError;v(d.value,{componentStack:d.stack,errorBoundary:c.tag===1?c.stateNode:null})}catch(b){setTimeout(function(){throw b})}}function Ym(l,c,d){return d=qe(d),d.tag=3,d.payload={element:null},d.callback=function(){Q0(l,c)},d}function Mx(l){return l=qe(l),l.tag=3,l}function Bx(l,c,d,v){var b=d.type.getDerivedStateFromError;if(typeof b=="function"){var N=v.value;l.payload=function(){return b(N)},l.callback=function(){kx(c,d,v)}}var K=d.stateNode;K!==null&&typeof K.componentDidCatch=="function"&&(l.callback=function(){kx(c,d,v),typeof b!="function"&&(Oc===null?Oc=new Set([this]):Oc.add(this));var ue=v.stack;this.componentDidCatch(v.value,{componentStack:ue!==null?ue:""})})}function Q8(l,c,d,v,b){if(d.flags|=32768,v!==null&&typeof v=="object"&&typeof v.then=="function"){if(c=d.alternate,c!==null&&xc(c,d,b,!0),d=ys.current,d!==null){switch(d.tag){case 13:return Vl===null?x2():d.alternate===null&&Jr===0&&(Jr=3),d.flags&=-257,d.flags|=65536,d.lanes=b,v===ce?d.flags|=16384:(c=d.updateQueue,c===null?d.updateQueue=new Set([v]):c.add(v),w2(l,v,b)),!1;case 22:return d.flags|=65536,v===ce?d.flags|=16384:(c=d.updateQueue,c===null?(c={transitions:null,markerInstances:null,retryQueue:new Set([v])},d.updateQueue=c):(d=c.retryQueue,d===null?c.retryQueue=new Set([v]):d.add(v)),w2(l,v,b)),!1}throw Error(r(435,d.tag))}return w2(l,v,b),x2(),!1}if(Pn)return c=ys.current,c!==null?((c.flags&65536)===0&&(c.flags|=256),c.flags|=65536,c.lanes=b,v!==Md&&(l=Error(r(422),{cause:v}),yc(ln(l,d)))):(v!==Md&&(c=Error(r(423),{cause:v}),yc(ln(c,d))),l=l.current.alternate,l.flags|=65536,b&=-b,l.lanes|=b,v=ln(v,d),b=Ym(l.stateNode,v,b),yt(l,b),Jr!==4&&(Jr=2)),!1;var N=Error(r(520),{cause:v});if(N=ln(N,d),a1===null?a1=[N]:a1.push(N),Jr!==4&&(Jr=2),c===null)return!0;v=ln(v,d),d=c;do{switch(d.tag){case 3:return d.flags|=65536,l=b&-b,d.lanes|=l,l=Ym(d.stateNode,v,l),yt(d,l),!1;case 1:if(c=d.type,N=d.stateNode,(d.flags&128)===0&&(typeof c.getDerivedStateFromError=="function"||N!==null&&typeof N.componentDidCatch=="function"&&(Oc===null||!Oc.has(N))))return d.flags|=65536,b&=-b,d.lanes|=b,b=Mx(b),Bx(b,l,d,v),yt(d,b),!1}d=d.return}while(d!==null);return!1}var jx=Error(r(461)),Hi=!1;function ia(l,c,d,v){c.child=l===null?Ix(c,null,d,v):Oh(c,l.child,d,v)}function Fx(l,c,d,v,b){d=d.render;var N=c.ref;if("ref"in v){var K={};for(var ue in v)ue!=="ref"&&(K[ue]=v[ue])}else K=v;return ms(c),v=Fo(l,c,d,K,N,b),ue=xr(),l!==null&&!Hi?(If(l,c,b),Pu(l,c,b)):(Pn&&ue&&Ef(c),c.flags|=1,ia(l,c,v,b),c.child)}function Ux(l,c,d,v,b){if(l===null){var N=d.type;return typeof N=="function"&&!mc(N)&&N.defaultProps===void 0&&d.compare===null?(c.tag=15,c.type=N,Vx(l,c,N,v,b)):(l=Au(d.type,null,v,c,c.mode,b),l.ref=c.ref,l.return=c,c.child=l)}if(N=l.child,!r2(l,b)){var K=N.memoizedProps;if(d=d.compare,d=d!==null?d:El,d(K,v)&&l.ref===c.ref)return Pu(l,c,b)}return c.flags|=1,l=hs(N,v),l.ref=c.ref,l.return=c,c.child=l}function Vx(l,c,d,v,b){if(l!==null){var N=l.memoizedProps;if(El(N,v)&&l.ref===c.ref)if(Hi=!1,c.pendingProps=v=N,r2(l,b))(l.flags&131072)!==0&&(Hi=!0);else return c.lanes=l.lanes,Pu(l,c,b)}return Km(l,c,d,v,b)}function zx(l,c,d){var v=c.pendingProps,b=v.children,N=l!==null?l.memoizedState:null;if(v.mode==="hidden"){if((c.flags&128)!==0){if(v=N!==null?N.baseLanes|d:d,l!==null){for(b=c.child=l.child,N=0;b!==null;)N=N|b.lanes|b.childLanes,b=b.sibling;c.childLanes=N&~v}else c.childLanes=0,c.child=null;return qx(l,c,v,d)}if((d&536870912)!==0)c.memoizedState={baseLanes:0,cachePool:null},l!==null&&W(c,N!==null?N.cachePool:null),N!==null?Qn(c,N):Vn(),Rx(c);else return c.lanes=c.childLanes=536870912,qx(l,c,N!==null?N.baseLanes|d:d,d)}else N!==null?(W(c,N.cachePool),Qn(c,N),Cc(),c.memoizedState=null):(l!==null&&W(c,null),Vn(),Cc());return ia(l,c,b,d),c.child}function qx(l,c,d,v){var b=M();return b=b===null?null:{parent:si._currentValue,pool:b},c.memoizedState={baseLanes:d,cachePool:b},l!==null&&W(c,null),Vn(),Rx(c),l!==null&&xc(l,c,v,!0),null}function Z0(l,c){var d=c.ref;if(d===null)l!==null&&l.ref!==null&&(c.flags|=4194816);else{if(typeof d!="function"&&typeof d!="object")throw Error(r(284));(l===null||l.ref!==d)&&(c.flags|=4194816)}}function Km(l,c,d,v,b){return ms(c),d=Fo(l,c,d,v,void 0,b),v=xr(),l!==null&&!Hi?(If(l,c,b),Pu(l,c,b)):(Pn&&v&&Ef(c),c.flags|=1,ia(l,c,d,b),c.child)}function Hx(l,c,d,v,b,N){return ms(c),c.updateQueue=null,d=Iu(c,v,d,b),Bl(l),v=xr(),l!==null&&!Hi?(If(l,c,N),Pu(l,c,N)):(Pn&&v&&Ef(c),c.flags|=1,ia(l,c,d,N),c.child)}function Wx(l,c,d,v,b){if(ms(c),c.stateNode===null){var N=yi,K=d.contextType;typeof K=="object"&&K!==null&&(N=oi(K)),N=new d(v,N),c.memoizedState=N.state!==null&&N.state!==void 0?N.state:null,N.updater=Xm,c.stateNode=N,N._reactInternals=c,N=c.stateNode,N.props=v,N.state=c.memoizedState,N.refs={},we(c),K=d.contextType,N.context=typeof K=="object"&&K!==null?oi(K):yi,N.state=c.memoizedState,K=d.getDerivedStateFromProps,typeof K=="function"&&($m(c,d,K,v),N.state=c.memoizedState),typeof d.getDerivedStateFromProps=="function"||typeof N.getSnapshotBeforeUpdate=="function"||typeof N.UNSAFE_componentWillMount!="function"&&typeof N.componentWillMount!="function"||(K=N.state,typeof N.componentWillMount=="function"&&N.componentWillMount(),typeof N.UNSAFE_componentWillMount=="function"&&N.UNSAFE_componentWillMount(),K!==N.state&&Xm.enqueueReplaceState(N,N.state,null),dt(c,v,N,b),Ot(),N.state=c.memoizedState),typeof N.componentDidMount=="function"&&(c.flags|=4194308),v=!0}else if(l===null){N=c.stateNode;var ue=c.memoizedProps,ye=jf(d,ue);N.props=ye;var ke=N.context,Ge=d.contextType;K=yi,typeof Ge=="object"&&Ge!==null&&(K=oi(Ge));var Ze=d.getDerivedStateFromProps;Ge=typeof Ze=="function"||typeof N.getSnapshotBeforeUpdate=="function",ue=c.pendingProps!==ue,Ge||typeof N.UNSAFE_componentWillReceiveProps!="function"&&typeof N.componentWillReceiveProps!="function"||(ue||ke!==K)&&Dx(c,N,v,K),Ue=!1;var je=c.memoizedState;N.state=je,dt(c,v,N,b),Ot(),ke=c.memoizedState,ue||je!==ke||Ue?(typeof Ze=="function"&&($m(c,d,Ze,v),ke=c.memoizedState),(ye=Ue||Nx(c,d,ye,v,je,ke,K))?(Ge||typeof N.UNSAFE_componentWillMount!="function"&&typeof N.componentWillMount!="function"||(typeof N.componentWillMount=="function"&&N.componentWillMount(),typeof N.UNSAFE_componentWillMount=="function"&&N.UNSAFE_componentWillMount()),typeof N.componentDidMount=="function"&&(c.flags|=4194308)):(typeof N.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=v,c.memoizedState=ke),N.props=v,N.state=ke,N.context=K,v=ye):(typeof N.componentDidMount=="function"&&(c.flags|=4194308),v=!1)}else{N=c.stateNode,Se(l,c),K=c.memoizedProps,Ge=jf(d,K),N.props=Ge,Ze=c.pendingProps,je=N.context,ke=d.contextType,ye=yi,typeof ke=="object"&&ke!==null&&(ye=oi(ke)),ue=d.getDerivedStateFromProps,(ke=typeof ue=="function"||typeof N.getSnapshotBeforeUpdate=="function")||typeof N.UNSAFE_componentWillReceiveProps!="function"&&typeof N.componentWillReceiveProps!="function"||(K!==Ze||je!==ye)&&Dx(c,N,v,ye),Ue=!1,je=c.memoizedState,N.state=je,dt(c,v,N,b),Ot();var Fe=c.memoizedState;K!==Ze||je!==Fe||Ue||l!==null&&l.dependencies!==null&&Ah(l.dependencies)?(typeof ue=="function"&&($m(c,d,ue,v),Fe=c.memoizedState),(Ge=Ue||Nx(c,d,Ge,v,je,Fe,ye)||l!==null&&l.dependencies!==null&&Ah(l.dependencies))?(ke||typeof N.UNSAFE_componentWillUpdate!="function"&&typeof N.componentWillUpdate!="function"||(typeof N.componentWillUpdate=="function"&&N.componentWillUpdate(v,Fe,ye),typeof N.UNSAFE_componentWillUpdate=="function"&&N.UNSAFE_componentWillUpdate(v,Fe,ye)),typeof N.componentDidUpdate=="function"&&(c.flags|=4),typeof N.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof N.componentDidUpdate!="function"||K===l.memoizedProps&&je===l.memoizedState||(c.flags|=4),typeof N.getSnapshotBeforeUpdate!="function"||K===l.memoizedProps&&je===l.memoizedState||(c.flags|=1024),c.memoizedProps=v,c.memoizedState=Fe),N.props=v,N.state=Fe,N.context=ye,v=Ge):(typeof N.componentDidUpdate!="function"||K===l.memoizedProps&&je===l.memoizedState||(c.flags|=4),typeof N.getSnapshotBeforeUpdate!="function"||K===l.memoizedProps&&je===l.memoizedState||(c.flags|=1024),v=!1)}return N=v,Z0(l,c),v=(c.flags&128)!==0,N||v?(N=c.stateNode,d=v&&typeof d.getDerivedStateFromError!="function"?null:N.render(),c.flags|=1,l!==null&&v?(c.child=Oh(c,l.child,null,b),c.child=Oh(c,null,d,b)):ia(l,c,d,b),c.memoizedState=N.state,l=c.child):l=Pu(l,c,b),l}function Gx(l,c,d,v){return Ga(),c.flags|=256,ia(l,c,d,v),c.child}var Qm={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Zm(l){return{baseLanes:l,cachePool:Z()}}function Jm(l,c,d){return l=l!==null?l.childLanes&~d:0,c&&(l|=xs),l}function $x(l,c,d){var v=c.pendingProps,b=!1,N=(c.flags&128)!==0,K;if((K=N)||(K=l!==null&&l.memoizedState===null?!1:(Ni.current&2)!==0),K&&(b=!0,c.flags&=-129),K=(c.flags&32)!==0,c.flags&=-33,l===null){if(Pn){if(b?Sc(c):Cc(),Pn){var ue=Pr,ye;if(ye=ue){e:{for(ye=ue,ue=ds;ye.nodeType!==8;){if(!ue){ue=null;break e}if(ye=Zs(ye.nextSibling),ye===null){ue=null;break e}}ue=ye}ue!==null?(c.memoizedState={dehydrated:ue,treeContext:Eu!==null?{id:zs,overflow:qs}:null,retryLane:536870912,hydrationErrors:null},ye=qi(18,null,null,0),ye.stateNode=ue,ye.return=c,c.child=ye,ai=c,Pr=null,ye=!0):ye=!1}ye||Cu(c)}if(ue=c.memoizedState,ue!==null&&(ue=ue.dehydrated,ue!==null))return M2(ue)?c.lanes=32:c.lanes=536870912,null;Ou(c)}return ue=v.children,v=v.fallback,b?(Cc(),b=c.mode,ue=J0({mode:"hidden",children:ue},b),v=Us(v,b,d,null),ue.return=c,v.return=c,ue.sibling=v,c.child=ue,b=c.child,b.memoizedState=Zm(d),b.childLanes=Jm(l,K,d),c.memoizedState=Qm,v):(Sc(c),e2(c,ue))}if(ye=l.memoizedState,ye!==null&&(ue=ye.dehydrated,ue!==null)){if(N)c.flags&256?(Sc(c),c.flags&=-257,c=t2(l,c,d)):c.memoizedState!==null?(Cc(),c.child=l.child,c.flags|=128,c=null):(Cc(),b=v.fallback,ue=c.mode,v=J0({mode:"visible",children:v.children},ue),b=Us(b,ue,d,null),b.flags|=2,v.return=c,b.return=c,v.sibling=b,c.child=v,Oh(c,l.child,null,d),v=c.child,v.memoizedState=Zm(d),v.childLanes=Jm(l,K,d),c.memoizedState=Qm,c=b);else if(Sc(c),M2(ue)){if(K=ue.nextSibling&&ue.nextSibling.dataset,K)var ke=K.dgst;K=ke,v=Error(r(419)),v.stack="",v.digest=K,yc({value:v,source:null,stack:null}),c=t2(l,c,d)}else if(Hi||xc(l,c,d,!1),K=(d&l.childLanes)!==0,Hi||K){if(K=_r,K!==null&&(v=d&-d,v=(v&42)!==0?1:Si(v),v=(v&(K.suspendedLanes|d))!==0?0:v,v!==0&&v!==ye.retryLane))throw ye.retryLane=v,Fs(l,v),Wo(K,l,v),jx;ue.data==="$?"||x2(),c=t2(l,c,d)}else ue.data==="$?"?(c.flags|=192,c.child=l.child,c=null):(l=ye.treeContext,Pr=Zs(ue.nextSibling),ai=c,Pn=!0,Ll=null,ds=!1,l!==null&&(co[Wa++]=zs,co[Wa++]=qs,co[Wa++]=Eu,zs=l.id,qs=l.overflow,Eu=c),c=e2(c,v.children),c.flags|=4096);return c}return b?(Cc(),b=v.fallback,ue=c.mode,ye=l.child,ke=ye.sibling,v=hs(ye,{mode:"hidden",children:v.children}),v.subtreeFlags=ye.subtreeFlags&65011712,ke!==null?b=hs(ke,b):(b=Us(b,ue,d,null),b.flags|=2),b.return=c,v.return=c,v.sibling=b,c.child=v,v=b,b=c.child,ue=l.child.memoizedState,ue===null?ue=Zm(d):(ye=ue.cachePool,ye!==null?(ke=si._currentValue,ye=ye.parent!==ke?{parent:ke,pool:ke}:ye):ye=Z(),ue={baseLanes:ue.baseLanes|d,cachePool:ye}),b.memoizedState=ue,b.childLanes=Jm(l,K,d),c.memoizedState=Qm,v):(Sc(c),d=l.child,l=d.sibling,d=hs(d,{mode:"visible",children:v.children}),d.return=c,d.sibling=null,l!==null&&(K=c.deletions,K===null?(c.deletions=[l],c.flags|=16):K.push(l)),c.child=d,c.memoizedState=null,d)}function e2(l,c){return c=J0({mode:"visible",children:c},l.mode),c.return=l,l.child=c}function J0(l,c){return l=qi(22,l,null,c),l.lanes=0,l.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},l}function t2(l,c,d){return Oh(c,l.child,null,d),l=e2(c,c.pendingProps.children),l.flags|=2,c.memoizedState=null,l}function Xx(l,c,d){l.lanes|=c;var v=l.alternate;v!==null&&(v.lanes|=c),wh(l.return,c,d)}function n2(l,c,d,v,b){var N=l.memoizedState;N===null?l.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:v,tail:d,tailMode:b}:(N.isBackwards=c,N.rendering=null,N.renderingStartTime=0,N.last=v,N.tail=d,N.tailMode=b)}function Yx(l,c,d){var v=c.pendingProps,b=v.revealOrder,N=v.tail;if(ia(l,c,v.children,d),v=Ni.current,(v&2)!==0)v=v&1|2,c.flags|=128;else{if(l!==null&&(l.flags&128)!==0)e:for(l=c.child;l!==null;){if(l.tag===13)l.memoizedState!==null&&Xx(l,d,c);else if(l.tag===19)Xx(l,d,c);else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===c)break e;for(;l.sibling===null;){if(l.return===null||l.return===c)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}v&=1}switch(Q(Ni,v),b){case"forwards":for(d=c.child,b=null;d!==null;)l=d.alternate,l!==null&&Y0(l)===null&&(b=d),d=d.sibling;d=b,d===null?(b=c.child,c.child=null):(b=d.sibling,d.sibling=null),n2(c,!1,b,d,N);break;case"backwards":for(d=null,b=c.child,c.child=null;b!==null;){if(l=b.alternate,l!==null&&Y0(l)===null){c.child=b;break}l=b.sibling,b.sibling=d,d=b,b=l}n2(c,!0,d,null,N);break;case"together":n2(c,!1,null,null,void 0);break;default:c.memoizedState=null}return c.child}function Pu(l,c,d){if(l!==null&&(c.dependencies=l.dependencies),Dc|=c.lanes,(d&c.childLanes)===0)if(l!==null){if(xc(l,c,d,!1),(d&c.childLanes)===0)return null}else return null;if(l!==null&&c.child!==l.child)throw Error(r(153));if(c.child!==null){for(l=c.child,d=hs(l,l.pendingProps),c.child=d,d.return=c;l.sibling!==null;)l=l.sibling,d=d.sibling=hs(l,l.pendingProps),d.return=c;d.sibling=null}return c.child}function r2(l,c){return(l.lanes&c)!==0?!0:(l=l.dependencies,!!(l!==null&&Ah(l)))}function Z8(l,c,d){switch(c.tag){case 3:be(c,c.stateNode.containerInfo),kl(c,si,l.memoizedState.cache),Ga();break;case 27:case 5:We(c);break;case 4:be(c,c.stateNode.containerInfo);break;case 10:kl(c,c.type,c.memoizedProps.value);break;case 13:var v=c.memoizedState;if(v!==null)return v.dehydrated!==null?(Sc(c),c.flags|=128,null):(d&c.child.childLanes)!==0?$x(l,c,d):(Sc(c),l=Pu(l,c,d),l!==null?l.sibling:null);Sc(c);break;case 19:var b=(l.flags&128)!==0;if(v=(d&c.childLanes)!==0,v||(xc(l,c,d,!1),v=(d&c.childLanes)!==0),b){if(v)return Yx(l,c,d);c.flags|=128}if(b=c.memoizedState,b!==null&&(b.rendering=null,b.tail=null,b.lastEffect=null),Q(Ni,Ni.current),v)break;return null;case 22:case 23:return c.lanes=0,zx(l,c,d);case 24:kl(c,si,l.memoizedState.cache)}return Pu(l,c,d)}function Kx(l,c,d){if(l!==null)if(l.memoizedProps!==c.pendingProps)Hi=!0;else{if(!r2(l,d)&&(c.flags&128)===0)return Hi=!1,Z8(l,c,d);Hi=(l.flags&131072)!==0}else Hi=!1,Pn&&(c.flags&1048576)!==0&&R0(c,_h,c.index);switch(c.lanes=0,c.tag){case 16:e:{l=c.pendingProps;var v=c.elementType,b=v._init;if(v=b(v._payload),c.type=v,typeof v=="function")mc(v)?(l=jf(v,l),c.tag=1,c=Wx(null,c,v,l,d)):(c.tag=0,c=Km(null,c,v,l,d));else{if(v!=null){if(b=v.$$typeof,b===V){c.tag=11,c=Fx(null,c,v,l,d);break e}else if(b===D){c.tag=14,c=Ux(null,c,v,l,d);break e}}throw c=H(v)||v,Error(r(306,c,""))}}return c;case 0:return Km(l,c,c.type,c.pendingProps,d);case 1:return v=c.type,b=jf(v,c.pendingProps),Wx(l,c,v,b,d);case 3:e:{if(be(c,c.stateNode.containerInfo),l===null)throw Error(r(387));v=c.pendingProps;var N=c.memoizedState;b=N.element,Se(l,c),dt(c,v,null,d);var K=c.memoizedState;if(v=K.cache,kl(c,si,v),v!==N.cache&&bh(c,[si],d,!0),Ot(),v=K.element,N.isDehydrated)if(N={element:v,isDehydrated:!1,cache:K.cache},c.updateQueue.baseState=N,c.memoizedState=N,c.flags&256){c=Gx(l,c,v,d);break e}else if(v!==b){b=ln(Error(r(424)),c),yc(b),c=Gx(l,c,v,d);break e}else{switch(l=c.stateNode.containerInfo,l.nodeType){case 9:l=l.body;break;default:l=l.nodeName==="HTML"?l.ownerDocument.body:l}for(Pr=Zs(l.firstChild),ai=c,Pn=!0,Ll=null,ds=!0,d=Ix(c,null,v,d),c.child=d;d;)d.flags=d.flags&-3|4096,d=d.sibling}else{if(Ga(),v===b){c=Pu(l,c,d);break e}ia(l,c,v,d)}c=c.child}return c;case 26:return Z0(l,c),l===null?(d=ew(c.type,null,c.pendingProps,null))?c.memoizedState=d:Pn||(d=c.type,l=c.pendingProps,v=dp(de.current).createElement(d),v[Wn]=c,v[Gn]=l,oa(v,d,l),Bn(v),c.stateNode=v):c.memoizedState=ew(c.type,l.memoizedProps,c.pendingProps,l.memoizedState),null;case 27:return We(c),l===null&&Pn&&(v=c.stateNode=Q_(c.type,c.pendingProps,de.current),ai=c,ds=!0,b=Pr,kc(c.type)?(B2=b,Pr=Zs(v.firstChild)):Pr=b),ia(l,c,c.pendingProps.children,d),Z0(l,c),l===null&&(c.flags|=4194304),c.child;case 5:return l===null&&Pn&&((b=v=Pr)&&(v=CC(v,c.type,c.pendingProps,ds),v!==null?(c.stateNode=v,ai=c,Pr=Zs(v.firstChild),ds=!1,b=!0):b=!1),b||Cu(c)),We(c),b=c.type,N=c.pendingProps,K=l!==null?l.memoizedProps:null,v=N.children,P2(b,N)?v=null:K!==null&&P2(b,K)&&(c.flags|=32),c.memoizedState!==null&&(b=Fo(l,c,jl,null,null,d),p1._currentValue=b),Z0(l,c),ia(l,c,v,d),c.child;case 6:return l===null&&Pn&&((l=d=Pr)&&(d=TC(d,c.pendingProps,ds),d!==null?(c.stateNode=d,ai=c,Pr=null,l=!0):l=!1),l||Cu(c)),null;case 13:return $x(l,c,d);case 4:return be(c,c.stateNode.containerInfo),v=c.pendingProps,l===null?c.child=Oh(c,null,v,d):ia(l,c,v,d),c.child;case 11:return Fx(l,c,c.type,c.pendingProps,d);case 7:return ia(l,c,c.pendingProps,d),c.child;case 8:return ia(l,c,c.pendingProps.children,d),c.child;case 12:return ia(l,c,c.pendingProps.children,d),c.child;case 10:return v=c.pendingProps,kl(c,c.type,v.value),ia(l,c,v.children,d),c.child;case 9:return b=c.type._context,v=c.pendingProps.children,ms(c),b=oi(b),v=v(b),c.flags|=1,ia(l,c,v,d),c.child;case 14:return Ux(l,c,c.type,c.pendingProps,d);case 15:return Vx(l,c,c.type,c.pendingProps,d);case 19:return Yx(l,c,d);case 31:return v=c.pendingProps,d=c.mode,v={mode:v.mode,children:v.children},l===null?(d=J0(v,d),d.ref=c.ref,c.child=d,d.return=c,c=d):(d=hs(l.child,v),d.ref=c.ref,c.child=d,d.return=c,c=d),c;case 22:return zx(l,c,d);case 24:return ms(c),v=oi(si),l===null?(b=M(),b===null&&(b=_r,N=Bd(),b.pooledCache=N,N.refCount++,N!==null&&(b.pooledCacheLanes|=d),b=N),c.memoizedState={parent:v,cache:b},we(c),kl(c,si,b)):((l.lanes&d)!==0&&(Se(l,c),dt(c,null,null,d),Ot()),b=l.memoizedState,N=c.memoizedState,b.parent!==v?(b={parent:v,cache:v},c.memoizedState=b,c.lanes===0&&(c.memoizedState=c.updateQueue.baseState=b),kl(c,si,v)):(v=N.cache,kl(c,si,v),v!==b.cache&&bh(c,[si],d,!0))),ia(l,c,c.pendingProps.children,d),c.child;case 29:throw c.pendingProps}throw Error(r(156,c.tag))}function Lu(l){l.flags|=4}function Qx(l,c){if(c.type!=="stylesheet"||(c.state.loading&4)!==0)l.flags&=-16777217;else if(l.flags|=16777216,!aw(c)){if(c=ys.current,c!==null&&((Rn&4194048)===Rn?Vl!==null:(Rn&62914560)!==Rn&&(Rn&536870912)===0||c!==Vl))throw De=ce,ae;l.flags|=8192}}function ep(l,c){c!==null&&(l.flags|=4),l.flags&16384&&(c=l.tag!==22?Cn():536870912,l.lanes|=c,Mh|=c)}function Jd(l,c){if(!Pn)switch(l.tailMode){case"hidden":c=l.tail;for(var d=null;c!==null;)c.alternate!==null&&(d=c),c=c.sibling;d===null?l.tail=null:d.sibling=null;break;case"collapsed":d=l.tail;for(var v=null;d!==null;)d.alternate!==null&&(v=d),d=d.sibling;v===null?c||l.tail===null?l.tail=null:l.tail.sibling=null:v.sibling=null}}function Vr(l){var c=l.alternate!==null&&l.alternate.child===l.child,d=0,v=0;if(c)for(var b=l.child;b!==null;)d|=b.lanes|b.childLanes,v|=b.subtreeFlags&65011712,v|=b.flags&65011712,b.return=l,b=b.sibling;else for(b=l.child;b!==null;)d|=b.lanes|b.childLanes,v|=b.subtreeFlags,v|=b.flags,b.return=l,b=b.sibling;return l.subtreeFlags|=v,l.childLanes=d,c}function J8(l,c,d){var v=c.pendingProps;switch(Sf(c),c.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Vr(c),null;case 1:return Vr(c),null;case 3:return d=c.stateNode,v=null,l!==null&&(v=l.memoizedState.cache),c.memoizedState.cache!==v&&(c.flags|=2048),gs(si),Te(),d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null),(l===null||l.child===null)&&(na(c)?Lu(c):l===null||l.memoizedState.isDehydrated&&(c.flags&256)===0||(c.flags|=1024,D0())),Vr(c),null;case 26:return d=c.memoizedState,l===null?(Lu(c),d!==null?(Vr(c),Qx(c,d)):(Vr(c),c.flags&=-16777217)):d?d!==l.memoizedState?(Lu(c),Vr(c),Qx(c,d)):(Vr(c),c.flags&=-16777217):(l.memoizedProps!==v&&Lu(c),Vr(c),c.flags&=-16777217),null;case 27:He(c),d=de.current;var b=c.type;if(l!==null&&c.stateNode!=null)l.memoizedProps!==v&&Lu(c);else{if(!v){if(c.stateNode===null)throw Error(r(166));return Vr(c),null}l=te.current,na(c)?N0(c):(l=Q_(b,v,d),c.stateNode=l,Lu(c))}return Vr(c),null;case 5:if(He(c),d=c.type,l!==null&&c.stateNode!=null)l.memoizedProps!==v&&Lu(c);else{if(!v){if(c.stateNode===null)throw Error(r(166));return Vr(c),null}if(l=te.current,na(c))N0(c);else{switch(b=dp(de.current),l){case 1:l=b.createElementNS("http://www.w3.org/2000/svg",d);break;case 2:l=b.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;default:switch(d){case"svg":l=b.createElementNS("http://www.w3.org/2000/svg",d);break;case"math":l=b.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;case"script":l=b.createElement("div"),l.innerHTML="<script><\/script>",l=l.removeChild(l.firstChild);break;case"select":l=typeof v.is=="string"?b.createElement("select",{is:v.is}):b.createElement("select"),v.multiple?l.multiple=!0:v.size&&(l.size=v.size);break;default:l=typeof v.is=="string"?b.createElement(d,{is:v.is}):b.createElement(d)}}l[Wn]=c,l[Gn]=v;e:for(b=c.child;b!==null;){if(b.tag===5||b.tag===6)l.appendChild(b.stateNode);else if(b.tag!==4&&b.tag!==27&&b.child!==null){b.child.return=b,b=b.child;continue}if(b===c)break e;for(;b.sibling===null;){if(b.return===null||b.return===c)break e;b=b.return}b.sibling.return=b.return,b=b.sibling}c.stateNode=l;e:switch(oa(l,d,v),d){case"button":case"input":case"select":case"textarea":l=!!v.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&Lu(c)}}return Vr(c),c.flags&=-16777217,null;case 6:if(l&&c.stateNode!=null)l.memoizedProps!==v&&Lu(c);else{if(typeof v!="string"&&c.stateNode===null)throw Error(r(166));if(l=de.current,na(c)){if(l=c.stateNode,d=c.memoizedProps,v=null,b=ai,b!==null)switch(b.tag){case 27:case 5:v=b.memoizedProps}l[Wn]=c,l=!!(l.nodeValue===d||v!==null&&v.suppressHydrationWarning===!0||H_(l.nodeValue,d)),l||Cu(c)}else l=dp(l).createTextNode(v),l[Wn]=c,c.stateNode=l}return Vr(c),null;case 13:if(v=c.memoizedState,l===null||l.memoizedState!==null&&l.memoizedState.dehydrated!==null){if(b=na(c),v!==null&&v.dehydrated!==null){if(l===null){if(!b)throw Error(r(318));if(b=c.memoizedState,b=b!==null?b.dehydrated:null,!b)throw Error(r(317));b[Wn]=c}else Ga(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;Vr(c),b=!1}else b=D0(),l!==null&&l.memoizedState!==null&&(l.memoizedState.hydrationErrors=b),b=!0;if(!b)return c.flags&256?(Ou(c),c):(Ou(c),null)}if(Ou(c),(c.flags&128)!==0)return c.lanes=d,c;if(d=v!==null,l=l!==null&&l.memoizedState!==null,d){v=c.child,b=null,v.alternate!==null&&v.alternate.memoizedState!==null&&v.alternate.memoizedState.cachePool!==null&&(b=v.alternate.memoizedState.cachePool.pool);var N=null;v.memoizedState!==null&&v.memoizedState.cachePool!==null&&(N=v.memoizedState.cachePool.pool),N!==b&&(v.flags|=2048)}return d!==l&&d&&(c.child.flags|=8192),ep(c,c.updateQueue),Vr(c),null;case 4:return Te(),l===null&&I2(c.stateNode.containerInfo),Vr(c),null;case 10:return gs(c.type),Vr(c),null;case 19:if(G(Ni),b=c.memoizedState,b===null)return Vr(c),null;if(v=(c.flags&128)!==0,N=b.rendering,N===null)if(v)Jd(b,!1);else{if(Jr!==0||l!==null&&(l.flags&128)!==0)for(l=c.child;l!==null;){if(N=Y0(l),N!==null){for(c.flags|=128,Jd(b,!1),l=N.updateQueue,c.updateQueue=l,ep(c,l),c.subtreeFlags=0,l=d,d=c.child;d!==null;)bf(d,l),d=d.sibling;return Q(Ni,Ni.current&1|2),c.child}l=l.sibling}b.tail!==null&&gt()>rp&&(c.flags|=128,v=!0,Jd(b,!1),c.lanes=4194304)}else{if(!v)if(l=Y0(N),l!==null){if(c.flags|=128,v=!0,l=l.updateQueue,c.updateQueue=l,ep(c,l),Jd(b,!0),b.tail===null&&b.tailMode==="hidden"&&!N.alternate&&!Pn)return Vr(c),null}else 2*gt()-b.renderingStartTime>rp&&d!==536870912&&(c.flags|=128,v=!0,Jd(b,!1),c.lanes=4194304);b.isBackwards?(N.sibling=c.child,c.child=N):(l=b.last,l!==null?l.sibling=N:c.child=N,b.last=N)}return b.tail!==null?(c=b.tail,b.rendering=c,b.tail=c.sibling,b.renderingStartTime=gt(),c.sibling=null,l=Ni.current,Q(Ni,v?l&1|2:l&1),c):(Vr(c),null);case 22:case 23:return Ou(c),Zt(),v=c.memoizedState!==null,l!==null?l.memoizedState!==null!==v&&(c.flags|=8192):v&&(c.flags|=8192),v?(d&536870912)!==0&&(c.flags&128)===0&&(Vr(c),c.subtreeFlags&6&&(c.flags|=8192)):Vr(c),d=c.updateQueue,d!==null&&ep(c,d.retryQueue),d=null,l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(d=l.memoizedState.cachePool.pool),v=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(v=c.memoizedState.cachePool.pool),v!==d&&(c.flags|=2048),l!==null&&G(S),null;case 24:return d=null,l!==null&&(d=l.memoizedState.cache),c.memoizedState.cache!==d&&(c.flags|=2048),gs(si),Vr(c),null;case 25:return null;case 30:return null}throw Error(r(156,c.tag))}function eC(l,c){switch(Sf(c),c.tag){case 1:return l=c.flags,l&65536?(c.flags=l&-65537|128,c):null;case 3:return gs(si),Te(),l=c.flags,(l&65536)!==0&&(l&128)===0?(c.flags=l&-65537|128,c):null;case 26:case 27:case 5:return He(c),null;case 13:if(Ou(c),l=c.memoizedState,l!==null&&l.dehydrated!==null){if(c.alternate===null)throw Error(r(340));Ga()}return l=c.flags,l&65536?(c.flags=l&-65537|128,c):null;case 19:return G(Ni),null;case 4:return Te(),null;case 10:return gs(c.type),null;case 22:case 23:return Ou(c),Zt(),l!==null&&G(S),l=c.flags,l&65536?(c.flags=l&-65537|128,c):null;case 24:return gs(si),null;case 25:return null;default:return null}}function Zx(l,c){switch(Sf(c),c.tag){case 3:gs(si),Te();break;case 26:case 27:case 5:He(c);break;case 4:Te();break;case 13:Ou(c);break;case 19:G(Ni);break;case 10:gs(c.type);break;case 22:case 23:Ou(c),Zt(),l!==null&&G(S);break;case 24:gs(si)}}function e1(l,c){try{var d=c.updateQueue,v=d!==null?d.lastEffect:null;if(v!==null){var b=v.next;d=b;do{if((d.tag&l)===l){v=void 0;var N=d.create,K=d.inst;v=N(),K.destroy=v}d=d.next}while(d!==b)}}catch(ue){mr(c,c.return,ue)}}function Tc(l,c,d){try{var v=c.updateQueue,b=v!==null?v.lastEffect:null;if(b!==null){var N=b.next;v=N;do{if((v.tag&l)===l){var K=v.inst,ue=K.destroy;if(ue!==void 0){K.destroy=void 0,b=c;var ye=d,ke=ue;try{ke()}catch(Ge){mr(b,ye,Ge)}}}v=v.next}while(v!==N)}}catch(Ge){mr(c,c.return,Ge)}}function Jx(l){var c=l.updateQueue;if(c!==null){var d=l.stateNode;try{Un(c,d)}catch(v){mr(l,l.return,v)}}}function e_(l,c,d){d.props=jf(l.type,l.memoizedProps),d.state=l.memoizedState;try{d.componentWillUnmount()}catch(v){mr(l,c,v)}}function t1(l,c){try{var d=l.ref;if(d!==null){switch(l.tag){case 26:case 27:case 5:var v=l.stateNode;break;case 30:v=l.stateNode;break;default:v=l.stateNode}typeof d=="function"?l.refCleanup=d(v):d.current=v}}catch(b){mr(l,c,b)}}function zl(l,c){var d=l.ref,v=l.refCleanup;if(d!==null)if(typeof v=="function")try{v()}catch(b){mr(l,c,b)}finally{l.refCleanup=null,l=l.alternate,l!=null&&(l.refCleanup=null)}else if(typeof d=="function")try{d(null)}catch(b){mr(l,c,b)}else d.current=null}function t_(l){var c=l.type,d=l.memoizedProps,v=l.stateNode;try{e:switch(c){case"button":case"input":case"select":case"textarea":d.autoFocus&&v.focus();break e;case"img":d.src?v.src=d.src:d.srcSet&&(v.srcset=d.srcSet)}}catch(b){mr(l,l.return,b)}}function i2(l,c,d){try{var v=l.stateNode;wC(v,l.type,d,c),v[Gn]=c}catch(b){mr(l,l.return,b)}}function n_(l){return l.tag===5||l.tag===3||l.tag===26||l.tag===27&&kc(l.type)||l.tag===4}function a2(l){e:for(;;){for(;l.sibling===null;){if(l.return===null||n_(l.return))return null;l=l.return}for(l.sibling.return=l.return,l=l.sibling;l.tag!==5&&l.tag!==6&&l.tag!==18;){if(l.tag===27&&kc(l.type)||l.flags&2||l.child===null||l.tag===4)continue e;l.child.return=l,l=l.child}if(!(l.flags&2))return l.stateNode}}function o2(l,c,d){var v=l.tag;if(v===5||v===6)l=l.stateNode,c?(d.nodeType===9?d.body:d.nodeName==="HTML"?d.ownerDocument.body:d).insertBefore(l,c):(c=d.nodeType===9?d.body:d.nodeName==="HTML"?d.ownerDocument.body:d,c.appendChild(l),d=d._reactRootContainer,d!=null||c.onclick!==null||(c.onclick=hp));else if(v!==4&&(v===27&&kc(l.type)&&(d=l.stateNode,c=null),l=l.child,l!==null))for(o2(l,c,d),l=l.sibling;l!==null;)o2(l,c,d),l=l.sibling}function tp(l,c,d){var v=l.tag;if(v===5||v===6)l=l.stateNode,c?d.insertBefore(l,c):d.appendChild(l);else if(v!==4&&(v===27&&kc(l.type)&&(d=l.stateNode),l=l.child,l!==null))for(tp(l,c,d),l=l.sibling;l!==null;)tp(l,c,d),l=l.sibling}function r_(l){var c=l.stateNode,d=l.memoizedProps;try{for(var v=l.type,b=c.attributes;b.length;)c.removeAttributeNode(b[0]);oa(c,v,d),c[Wn]=l,c[Gn]=d}catch(N){mr(l,l.return,N)}}var ku=!1,ui=!1,s2=!1,i_=typeof WeakSet=="function"?WeakSet:Set,Wi=null;function tC(l,c){if(l=l.containerInfo,D2=xp,l=ta(l),Ri(l)){if("selectionStart"in l)var d={start:l.selectionStart,end:l.selectionEnd};else e:{d=(d=l.ownerDocument)&&d.defaultView||window;var v=d.getSelection&&d.getSelection();if(v&&v.rangeCount!==0){d=v.anchorNode;var b=v.anchorOffset,N=v.focusNode;v=v.focusOffset;try{d.nodeType,N.nodeType}catch{d=null;break e}var K=0,ue=-1,ye=-1,ke=0,Ge=0,Ze=l,je=null;t:for(;;){for(var Fe;Ze!==d||b!==0&&Ze.nodeType!==3||(ue=K+b),Ze!==N||v!==0&&Ze.nodeType!==3||(ye=K+v),Ze.nodeType===3&&(K+=Ze.nodeValue.length),(Fe=Ze.firstChild)!==null;)je=Ze,Ze=Fe;for(;;){if(Ze===l)break t;if(je===d&&++ke===b&&(ue=K),je===N&&++Ge===v&&(ye=K),(Fe=Ze.nextSibling)!==null)break;Ze=je,je=Ze.parentNode}Ze=Fe}d=ue===-1||ye===-1?null:{start:ue,end:ye}}else d=null}d=d||{start:0,end:0}}else d=null;for(O2={focusedElem:l,selectionRange:d},xp=!1,Wi=c;Wi!==null;)if(c=Wi,l=c.child,(c.subtreeFlags&1024)!==0&&l!==null)l.return=c,Wi=l;else for(;Wi!==null;){switch(c=Wi,N=c.alternate,l=c.flags,c.tag){case 0:break;case 11:case 15:break;case 1:if((l&1024)!==0&&N!==null){l=void 0,d=c,b=N.memoizedProps,N=N.memoizedState,v=d.stateNode;try{var Yt=jf(d.type,b,d.elementType===d.type);l=v.getSnapshotBeforeUpdate(Yt,N),v.__reactInternalSnapshotBeforeUpdate=l}catch(Vt){mr(d,d.return,Vt)}}break;case 3:if((l&1024)!==0){if(l=c.stateNode.containerInfo,d=l.nodeType,d===9)k2(l);else if(d===1)switch(l.nodeName){case"HEAD":case"HTML":case"BODY":k2(l);break;default:l.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((l&1024)!==0)throw Error(r(163))}if(l=c.sibling,l!==null){l.return=c.return,Wi=l;break}Wi=c.return}}function a_(l,c,d){var v=d.flags;switch(d.tag){case 0:case 11:case 15:Ic(l,d),v&4&&e1(5,d);break;case 1:if(Ic(l,d),v&4)if(l=d.stateNode,c===null)try{l.componentDidMount()}catch(K){mr(d,d.return,K)}else{var b=jf(d.type,c.memoizedProps);c=c.memoizedState;try{l.componentDidUpdate(b,c,l.__reactInternalSnapshotBeforeUpdate)}catch(K){mr(d,d.return,K)}}v&64&&Jx(d),v&512&&t1(d,d.return);break;case 3:if(Ic(l,d),v&64&&(l=d.updateQueue,l!==null)){if(c=null,d.child!==null)switch(d.child.tag){case 27:case 5:c=d.child.stateNode;break;case 1:c=d.child.stateNode}try{Un(l,c)}catch(K){mr(d,d.return,K)}}break;case 27:c===null&&v&4&&r_(d);case 26:case 5:Ic(l,d),c===null&&v&4&&t_(d),v&512&&t1(d,d.return);break;case 12:Ic(l,d);break;case 13:Ic(l,d),v&4&&l_(l,d),v&64&&(l=d.memoizedState,l!==null&&(l=l.dehydrated,l!==null&&(d=cC.bind(null,d),IC(l,d))));break;case 22:if(v=d.memoizedState!==null||ku,!v){c=c!==null&&c.memoizedState!==null||ui,b=ku;var N=ui;ku=v,(ui=c)&&!N?Rc(l,d,(d.subtreeFlags&8772)!==0):Ic(l,d),ku=b,ui=N}break;case 30:break;default:Ic(l,d)}}function o_(l){var c=l.alternate;c!==null&&(l.alternate=null,o_(c)),l.child=null,l.deletions=null,l.sibling=null,l.tag===5&&(c=l.stateNode,c!==null&&gi(c)),l.stateNode=null,l.return=null,l.dependencies=null,l.memoizedProps=null,l.memoizedState=null,l.pendingProps=null,l.stateNode=null,l.updateQueue=null}var Lr=null,ho=!1;function Mu(l,c,d){for(d=d.child;d!==null;)s_(l,c,d),d=d.sibling}function s_(l,c,d){if(bt&&typeof bt.onCommitFiberUnmount=="function")try{bt.onCommitFiberUnmount(_t,d)}catch{}switch(d.tag){case 26:ui||zl(d,c),Mu(l,c,d),d.memoizedState?d.memoizedState.count--:d.stateNode&&(d=d.stateNode,d.parentNode.removeChild(d));break;case 27:ui||zl(d,c);var v=Lr,b=ho;kc(d.type)&&(Lr=d.stateNode,ho=!1),Mu(l,c,d),c1(d.stateNode),Lr=v,ho=b;break;case 5:ui||zl(d,c);case 6:if(v=Lr,b=ho,Lr=null,Mu(l,c,d),Lr=v,ho=b,Lr!==null)if(ho)try{(Lr.nodeType===9?Lr.body:Lr.nodeName==="HTML"?Lr.ownerDocument.body:Lr).removeChild(d.stateNode)}catch(N){mr(d,c,N)}else try{Lr.removeChild(d.stateNode)}catch(N){mr(d,c,N)}break;case 18:Lr!==null&&(ho?(l=Lr,Y_(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,d.stateNode),y1(l)):Y_(Lr,d.stateNode));break;case 4:v=Lr,b=ho,Lr=d.stateNode.containerInfo,ho=!0,Mu(l,c,d),Lr=v,ho=b;break;case 0:case 11:case 14:case 15:ui||Tc(2,d,c),ui||Tc(4,d,c),Mu(l,c,d);break;case 1:ui||(zl(d,c),v=d.stateNode,typeof v.componentWillUnmount=="function"&&e_(d,c,v)),Mu(l,c,d);break;case 21:Mu(l,c,d);break;case 22:ui=(v=ui)||d.memoizedState!==null,Mu(l,c,d),ui=v;break;default:Mu(l,c,d)}}function l_(l,c){if(c.memoizedState===null&&(l=c.alternate,l!==null&&(l=l.memoizedState,l!==null&&(l=l.dehydrated,l!==null))))try{y1(l)}catch(d){mr(c,c.return,d)}}function nC(l){switch(l.tag){case 13:case 19:var c=l.stateNode;return c===null&&(c=l.stateNode=new i_),c;case 22:return l=l.stateNode,c=l._retryCache,c===null&&(c=l._retryCache=new i_),c;default:throw Error(r(435,l.tag))}}function l2(l,c){var d=nC(l);c.forEach(function(v){var b=fC.bind(null,l,v);d.has(v)||(d.add(v),v.then(b,b))})}function Vo(l,c){var d=c.deletions;if(d!==null)for(var v=0;v<d.length;v++){var b=d[v],N=l,K=c,ue=K;e:for(;ue!==null;){switch(ue.tag){case 27:if(kc(ue.type)){Lr=ue.stateNode,ho=!1;break e}break;case 5:Lr=ue.stateNode,ho=!1;break e;case 3:case 4:Lr=ue.stateNode.containerInfo,ho=!0;break e}ue=ue.return}if(Lr===null)throw Error(r(160));s_(N,K,b),Lr=null,ho=!1,N=b.alternate,N!==null&&(N.return=null),b.return=null}if(c.subtreeFlags&13878)for(c=c.child;c!==null;)u_(c,l),c=c.sibling}var Qs=null;function u_(l,c){var d=l.alternate,v=l.flags;switch(l.tag){case 0:case 11:case 14:case 15:Vo(c,l),zo(l),v&4&&(Tc(3,l,l.return),e1(3,l),Tc(5,l,l.return));break;case 1:Vo(c,l),zo(l),v&512&&(ui||d===null||zl(d,d.return)),v&64&&ku&&(l=l.updateQueue,l!==null&&(v=l.callbacks,v!==null&&(d=l.shared.hiddenCallbacks,l.shared.hiddenCallbacks=d===null?v:d.concat(v))));break;case 26:var b=Qs;if(Vo(c,l),zo(l),v&512&&(ui||d===null||zl(d,d.return)),v&4){var N=d!==null?d.memoizedState:null;if(v=l.memoizedState,d===null)if(v===null)if(l.stateNode===null){e:{v=l.type,d=l.memoizedProps,b=b.ownerDocument||b;t:switch(v){case"title":N=b.getElementsByTagName("title")[0],(!N||N[Ji]||N[Wn]||N.namespaceURI==="http://www.w3.org/2000/svg"||N.hasAttribute("itemprop"))&&(N=b.createElement(v),b.head.insertBefore(N,b.querySelector("head > title"))),oa(N,v,d),N[Wn]=l,Bn(N),v=N;break e;case"link":var K=rw("link","href",b).get(v+(d.href||""));if(K){for(var ue=0;ue<K.length;ue++)if(N=K[ue],N.getAttribute("href")===(d.href==null||d.href===""?null:d.href)&&N.getAttribute("rel")===(d.rel==null?null:d.rel)&&N.getAttribute("title")===(d.title==null?null:d.title)&&N.getAttribute("crossorigin")===(d.crossOrigin==null?null:d.crossOrigin)){K.splice(ue,1);break t}}N=b.createElement(v),oa(N,v,d),b.head.appendChild(N);break;case"meta":if(K=rw("meta","content",b).get(v+(d.content||""))){for(ue=0;ue<K.length;ue++)if(N=K[ue],N.getAttribute("content")===(d.content==null?null:""+d.content)&&N.getAttribute("name")===(d.name==null?null:d.name)&&N.getAttribute("property")===(d.property==null?null:d.property)&&N.getAttribute("http-equiv")===(d.httpEquiv==null?null:d.httpEquiv)&&N.getAttribute("charset")===(d.charSet==null?null:d.charSet)){K.splice(ue,1);break t}}N=b.createElement(v),oa(N,v,d),b.head.appendChild(N);break;default:throw Error(r(468,v))}N[Wn]=l,Bn(N),v=N}l.stateNode=v}else iw(b,l.type,l.stateNode);else l.stateNode=nw(b,v,l.memoizedProps);else N!==v?(N===null?d.stateNode!==null&&(d=d.stateNode,d.parentNode.removeChild(d)):N.count--,v===null?iw(b,l.type,l.stateNode):nw(b,v,l.memoizedProps)):v===null&&l.stateNode!==null&&i2(l,l.memoizedProps,d.memoizedProps)}break;case 27:Vo(c,l),zo(l),v&512&&(ui||d===null||zl(d,d.return)),d!==null&&v&4&&i2(l,l.memoizedProps,d.memoizedProps);break;case 5:if(Vo(c,l),zo(l),v&512&&(ui||d===null||zl(d,d.return)),l.flags&32){b=l.stateNode;try{ma(b,"")}catch(Fe){mr(l,l.return,Fe)}}v&4&&l.stateNode!=null&&(b=l.memoizedProps,i2(l,b,d!==null?d.memoizedProps:b)),v&1024&&(s2=!0);break;case 6:if(Vo(c,l),zo(l),v&4){if(l.stateNode===null)throw Error(r(162));v=l.memoizedProps,d=l.stateNode;try{d.nodeValue=v}catch(Fe){mr(l,l.return,Fe)}}break;case 3:if(mp=null,b=Qs,Qs=pp(c.containerInfo),Vo(c,l),Qs=b,zo(l),v&4&&d!==null&&d.memoizedState.isDehydrated)try{y1(c.containerInfo)}catch(Fe){mr(l,l.return,Fe)}s2&&(s2=!1,c_(l));break;case 4:v=Qs,Qs=pp(l.stateNode.containerInfo),Vo(c,l),zo(l),Qs=v;break;case 12:Vo(c,l),zo(l);break;case 13:Vo(c,l),zo(l),l.child.flags&8192&&l.memoizedState!==null!=(d!==null&&d.memoizedState!==null)&&(p2=gt()),v&4&&(v=l.updateQueue,v!==null&&(l.updateQueue=null,l2(l,v)));break;case 22:b=l.memoizedState!==null;var ye=d!==null&&d.memoizedState!==null,ke=ku,Ge=ui;if(ku=ke||b,ui=Ge||ye,Vo(c,l),ui=Ge,ku=ke,zo(l),v&8192)e:for(c=l.stateNode,c._visibility=b?c._visibility&-2:c._visibility|1,b&&(d===null||ye||ku||ui||Ff(l)),d=null,c=l;;){if(c.tag===5||c.tag===26){if(d===null){ye=d=c;try{if(N=ye.stateNode,b)K=N.style,typeof K.setProperty=="function"?K.setProperty("display","none","important"):K.display="none";else{ue=ye.stateNode;var Ze=ye.memoizedProps.style,je=Ze!=null&&Ze.hasOwnProperty("display")?Ze.display:null;ue.style.display=je==null||typeof je=="boolean"?"":(""+je).trim()}}catch(Fe){mr(ye,ye.return,Fe)}}}else if(c.tag===6){if(d===null){ye=c;try{ye.stateNode.nodeValue=b?"":ye.memoizedProps}catch(Fe){mr(ye,ye.return,Fe)}}}else if((c.tag!==22&&c.tag!==23||c.memoizedState===null||c===l)&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===l)break e;for(;c.sibling===null;){if(c.return===null||c.return===l)break e;d===c&&(d=null),c=c.return}d===c&&(d=null),c.sibling.return=c.return,c=c.sibling}v&4&&(v=l.updateQueue,v!==null&&(d=v.retryQueue,d!==null&&(v.retryQueue=null,l2(l,d))));break;case 19:Vo(c,l),zo(l),v&4&&(v=l.updateQueue,v!==null&&(l.updateQueue=null,l2(l,v)));break;case 30:break;case 21:break;default:Vo(c,l),zo(l)}}function zo(l){var c=l.flags;if(c&2){try{for(var d,v=l.return;v!==null;){if(n_(v)){d=v;break}v=v.return}if(d==null)throw Error(r(160));switch(d.tag){case 27:var b=d.stateNode,N=a2(l);tp(l,N,b);break;case 5:var K=d.stateNode;d.flags&32&&(ma(K,""),d.flags&=-33);var ue=a2(l);tp(l,ue,K);break;case 3:case 4:var ye=d.stateNode.containerInfo,ke=a2(l);o2(l,ke,ye);break;default:throw Error(r(161))}}catch(Ge){mr(l,l.return,Ge)}l.flags&=-3}c&4096&&(l.flags&=-4097)}function c_(l){if(l.subtreeFlags&1024)for(l=l.child;l!==null;){var c=l;c_(c),c.tag===5&&c.flags&1024&&c.stateNode.reset(),l=l.sibling}}function Ic(l,c){if(c.subtreeFlags&8772)for(c=c.child;c!==null;)a_(l,c.alternate,c),c=c.sibling}function Ff(l){for(l=l.child;l!==null;){var c=l;switch(c.tag){case 0:case 11:case 14:case 15:Tc(4,c,c.return),Ff(c);break;case 1:zl(c,c.return);var d=c.stateNode;typeof d.componentWillUnmount=="function"&&e_(c,c.return,d),Ff(c);break;case 27:c1(c.stateNode);case 26:case 5:zl(c,c.return),Ff(c);break;case 22:c.memoizedState===null&&Ff(c);break;case 30:Ff(c);break;default:Ff(c)}l=l.sibling}}function Rc(l,c,d){for(d=d&&(c.subtreeFlags&8772)!==0,c=c.child;c!==null;){var v=c.alternate,b=l,N=c,K=N.flags;switch(N.tag){case 0:case 11:case 15:Rc(b,N,d),e1(4,N);break;case 1:if(Rc(b,N,d),v=N,b=v.stateNode,typeof b.componentDidMount=="function")try{b.componentDidMount()}catch(ke){mr(v,v.return,ke)}if(v=N,b=v.updateQueue,b!==null){var ue=v.stateNode;try{var ye=b.shared.hiddenCallbacks;if(ye!==null)for(b.shared.hiddenCallbacks=null,b=0;b<ye.length;b++)Tn(ye[b],ue)}catch(ke){mr(v,v.return,ke)}}d&&K&64&&Jx(N),t1(N,N.return);break;case 27:r_(N);case 26:case 5:Rc(b,N,d),d&&v===null&&K&4&&t_(N),t1(N,N.return);break;case 12:Rc(b,N,d);break;case 13:Rc(b,N,d),d&&K&4&&l_(b,N);break;case 22:N.memoizedState===null&&Rc(b,N,d),t1(N,N.return);break;case 30:break;default:Rc(b,N,d)}c=c.sibling}}function u2(l,c){var d=null;l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(d=l.memoizedState.cachePool.pool),l=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(l=c.memoizedState.cachePool.pool),l!==d&&(l!=null&&l.refCount++,d!=null&&Cf(d))}function c2(l,c){l=null,c.alternate!==null&&(l=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==l&&(c.refCount++,l!=null&&Cf(l))}function ql(l,c,d,v){if(c.subtreeFlags&10256)for(c=c.child;c!==null;)f_(l,c,d,v),c=c.sibling}function f_(l,c,d,v){var b=c.flags;switch(c.tag){case 0:case 11:case 15:ql(l,c,d,v),b&2048&&e1(9,c);break;case 1:ql(l,c,d,v);break;case 3:ql(l,c,d,v),b&2048&&(l=null,c.alternate!==null&&(l=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==l&&(c.refCount++,l!=null&&Cf(l)));break;case 12:if(b&2048){ql(l,c,d,v),l=c.stateNode;try{var N=c.memoizedProps,K=N.id,ue=N.onPostCommit;typeof ue=="function"&&ue(K,c.alternate===null?"mount":"update",l.passiveEffectDuration,-0)}catch(ye){mr(c,c.return,ye)}}else ql(l,c,d,v);break;case 13:ql(l,c,d,v);break;case 23:break;case 22:N=c.stateNode,K=c.alternate,c.memoizedState!==null?N._visibility&2?ql(l,c,d,v):n1(l,c):N._visibility&2?ql(l,c,d,v):(N._visibility|=2,Ph(l,c,d,v,(c.subtreeFlags&10256)!==0)),b&2048&&u2(K,c);break;case 24:ql(l,c,d,v),b&2048&&c2(c.alternate,c);break;default:ql(l,c,d,v)}}function Ph(l,c,d,v,b){for(b=b&&(c.subtreeFlags&10256)!==0,c=c.child;c!==null;){var N=l,K=c,ue=d,ye=v,ke=K.flags;switch(K.tag){case 0:case 11:case 15:Ph(N,K,ue,ye,b),e1(8,K);break;case 23:break;case 22:var Ge=K.stateNode;K.memoizedState!==null?Ge._visibility&2?Ph(N,K,ue,ye,b):n1(N,K):(Ge._visibility|=2,Ph(N,K,ue,ye,b)),b&&ke&2048&&u2(K.alternate,K);break;case 24:Ph(N,K,ue,ye,b),b&&ke&2048&&c2(K.alternate,K);break;default:Ph(N,K,ue,ye,b)}c=c.sibling}}function n1(l,c){if(c.subtreeFlags&10256)for(c=c.child;c!==null;){var d=l,v=c,b=v.flags;switch(v.tag){case 22:n1(d,v),b&2048&&u2(v.alternate,v);break;case 24:n1(d,v),b&2048&&c2(v.alternate,v);break;default:n1(d,v)}c=c.sibling}}var r1=8192;function Lh(l){if(l.subtreeFlags&r1)for(l=l.child;l!==null;)h_(l),l=l.sibling}function h_(l){switch(l.tag){case 26:Lh(l),l.flags&r1&&l.memoizedState!==null&&VC(Qs,l.memoizedState,l.memoizedProps);break;case 5:Lh(l);break;case 3:case 4:var c=Qs;Qs=pp(l.stateNode.containerInfo),Lh(l),Qs=c;break;case 22:l.memoizedState===null&&(c=l.alternate,c!==null&&c.memoizedState!==null?(c=r1,r1=16777216,Lh(l),r1=c):Lh(l));break;default:Lh(l)}}function d_(l){var c=l.alternate;if(c!==null&&(l=c.child,l!==null)){c.child=null;do c=l.sibling,l.sibling=null,l=c;while(l!==null)}}function i1(l){var c=l.deletions;if((l.flags&16)!==0){if(c!==null)for(var d=0;d<c.length;d++){var v=c[d];Wi=v,g_(v,l)}d_(l)}if(l.subtreeFlags&10256)for(l=l.child;l!==null;)p_(l),l=l.sibling}function p_(l){switch(l.tag){case 0:case 11:case 15:i1(l),l.flags&2048&&Tc(9,l,l.return);break;case 3:i1(l);break;case 12:i1(l);break;case 22:var c=l.stateNode;l.memoizedState!==null&&c._visibility&2&&(l.return===null||l.return.tag!==13)?(c._visibility&=-3,np(l)):i1(l);break;default:i1(l)}}function np(l){var c=l.deletions;if((l.flags&16)!==0){if(c!==null)for(var d=0;d<c.length;d++){var v=c[d];Wi=v,g_(v,l)}d_(l)}for(l=l.child;l!==null;){switch(c=l,c.tag){case 0:case 11:case 15:Tc(8,c,c.return),np(c);break;case 22:d=c.stateNode,d._visibility&2&&(d._visibility&=-3,np(c));break;default:np(c)}l=l.sibling}}function g_(l,c){for(;Wi!==null;){var d=Wi;switch(d.tag){case 0:case 11:case 15:Tc(8,d,c);break;case 23:case 22:if(d.memoizedState!==null&&d.memoizedState.cachePool!==null){var v=d.memoizedState.cachePool.pool;v!=null&&v.refCount++}break;case 24:Cf(d.memoizedState.cache)}if(v=d.child,v!==null)v.return=d,Wi=v;else e:for(d=l;Wi!==null;){v=Wi;var b=v.sibling,N=v.return;if(o_(v),v===d){Wi=null;break e}if(b!==null){b.return=N,Wi=b;break e}Wi=N}}}var rC={getCacheForType:function(l){var c=oi(si),d=c.data.get(l);return d===void 0&&(d=l(),c.data.set(l,d)),d}},iC=typeof WeakMap=="function"?WeakMap:Map,nr=0,_r=null,xn=null,Rn=0,rr=0,qo=null,Nc=!1,kh=!1,f2=!1,Bu=0,Jr=0,Dc=0,Uf=0,h2=0,xs=0,Mh=0,a1=null,po=null,d2=!1,p2=0,rp=1/0,ip=null,Oc=null,aa=0,Pc=null,Bh=null,jh=0,g2=0,m2=null,m_=null,o1=0,v2=null;function Ho(){if((nr&2)!==0&&Rn!==0)return Rn&-Rn;if(U.T!==null){var l=Tu;return l!==0?l:E2()}return pr()}function v_(){xs===0&&(xs=(Rn&536870912)===0||Pn?pa():536870912);var l=ys.current;return l!==null&&(l.flags|=32),xs}function Wo(l,c,d){(l===_r&&(rr===2||rr===9)||l.cancelPendingCommit!==null)&&(Fh(l,0),Lc(l,Rn,xs,!1)),sr(l,d),((nr&2)===0||l!==_r)&&(l===_r&&((nr&2)===0&&(Uf|=d),Jr===4&&Lc(l,Rn,xs,!1)),Hl(l))}function y_(l,c,d){if((nr&6)!==0)throw Error(r(327));var v=!d&&(c&124)===0&&(c&l.expiredLanes)===0||pi(l,c),b=v?sC(l,c):_2(l,c,!0),N=v;do{if(b===0){kh&&!v&&Lc(l,c,0,!1);break}else{if(d=l.current.alternate,N&&!aC(d)){b=_2(l,c,!1),N=!1;continue}if(b===2){if(N=c,l.errorRecoveryDisabledLanes&N)var K=0;else K=l.pendingLanes&-536870913,K=K!==0?K:K&536870912?536870912:0;if(K!==0){c=K;e:{var ue=l;b=a1;var ye=ue.current.memoizedState.isDehydrated;if(ye&&(Fh(ue,K).flags|=256),K=_2(ue,K,!1),K!==2){if(f2&&!ye){ue.errorRecoveryDisabledLanes|=N,Uf|=N,b=4;break e}N=po,po=b,N!==null&&(po===null?po=N:po.push.apply(po,N))}b=K}if(N=!1,b!==2)continue}}if(b===1){Fh(l,0),Lc(l,c,0,!0);break}e:{switch(v=l,N=b,N){case 0:case 1:throw Error(r(345));case 4:if((c&4194048)!==c)break;case 6:Lc(v,c,xs,!Nc);break e;case 2:po=null;break;case 3:case 5:break;default:throw Error(r(329))}if((c&62914560)===c&&(b=p2+300-gt(),10<b)){if(Lc(v,c,xs,!Nc),An(v,0,!0)!==0)break e;v.timeoutHandle=$_(x_.bind(null,v,d,po,ip,d2,c,xs,Uf,Mh,Nc,N,2,-0,0),b);break e}x_(v,d,po,ip,d2,c,xs,Uf,Mh,Nc,N,0,-0,0)}}break}while(!0);Hl(l)}function x_(l,c,d,v,b,N,K,ue,ye,ke,Ge,Ze,je,Fe){if(l.timeoutHandle=-1,Ze=c.subtreeFlags,(Ze&8192||(Ze&16785408)===16785408)&&(d1={stylesheets:null,count:0,unsuspend:UC},h_(c),Ze=zC(),Ze!==null)){l.cancelPendingCommit=Ze(C_.bind(null,l,c,N,d,v,b,K,ue,ye,Ge,1,je,Fe)),Lc(l,N,K,!ke);return}C_(l,c,N,d,v,b,K,ue,ye)}function aC(l){for(var c=l;;){var d=c.tag;if((d===0||d===11||d===15)&&c.flags&16384&&(d=c.updateQueue,d!==null&&(d=d.stores,d!==null)))for(var v=0;v<d.length;v++){var b=d[v],N=b.getSnapshot;b=b.value;try{if(!vi(N(),b))return!1}catch{return!1}}if(d=c.child,c.subtreeFlags&16384&&d!==null)d.return=c,c=d;else{if(c===l)break;for(;c.sibling===null;){if(c.return===null||c.return===l)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function Lc(l,c,d,v){c&=~h2,c&=~Uf,l.suspendedLanes|=c,l.pingedLanes&=~c,v&&(l.warmLanes|=c),v=l.expirationTimes;for(var b=c;0<b;){var N=31-xt(b),K=1<<N;v[N]=-1,b&=~K}d!==0&&Tt(l,d,c)}function ap(){return(nr&6)===0?(s1(0),!1):!0}function y2(){if(xn!==null){if(rr===0)var l=xn.return;else l=xn,Ws=xi=null,Sh(l),Dh=null,Qd=0,l=xn;for(;l!==null;)Zx(l.alternate,l),l=l.return;xn=null}}function Fh(l,c){var d=l.timeoutHandle;d!==-1&&(l.timeoutHandle=-1,AC(d)),d=l.cancelPendingCommit,d!==null&&(l.cancelPendingCommit=null,d()),y2(),_r=l,xn=d=hs(l.current,null),Rn=c,rr=0,qo=null,Nc=!1,kh=pi(l,c),f2=!1,Mh=xs=h2=Uf=Dc=Jr=0,po=a1=null,d2=!1,(c&8)!==0&&(c|=c&32);var v=l.entangledLanes;if(v!==0)for(l=l.entanglements,v&=c;0<v;){var b=31-xt(v),N=1<<b;c|=l[b],v&=~N}return Bu=c,lo(),d}function __(l,c){Lt=null,U.H=G0,c===re||c===oe?(c=Re(),rr=3):c===ae?(c=Re(),rr=4):rr=c===jx?8:c!==null&&typeof c=="object"&&typeof c.then=="function"?6:1,qo=c,xn===null&&(Jr=1,Q0(l,ln(c,l.current)))}function w_(){var l=U.H;return U.H=G0,l===null?G0:l}function b_(){var l=U.A;return U.A=rC,l}function x2(){Jr=4,Nc||(Rn&4194048)!==Rn&&ys.current!==null||(kh=!0),(Dc&134217727)===0&&(Uf&134217727)===0||_r===null||Lc(_r,Rn,xs,!1)}function _2(l,c,d){var v=nr;nr|=2;var b=w_(),N=b_();(_r!==l||Rn!==c)&&(ip=null,Fh(l,c)),c=!1;var K=Jr;e:do try{if(rr!==0&&xn!==null){var ue=xn,ye=qo;switch(rr){case 8:y2(),K=6;break e;case 3:case 2:case 9:case 6:ys.current===null&&(c=!0);var ke=rr;if(rr=0,qo=null,Uh(l,ue,ye,ke),d&&kh){K=0;break e}break;default:ke=rr,rr=0,qo=null,Uh(l,ue,ye,ke)}}oC(),K=Jr;break}catch(Ge){__(l,Ge)}while(!0);return c&&l.shellSuspendCounter++,Ws=xi=null,nr=v,U.H=b,U.A=N,xn===null&&(_r=null,Rn=0,lo()),K}function oC(){for(;xn!==null;)A_(xn)}function sC(l,c){var d=nr;nr|=2;var v=w_(),b=b_();_r!==l||Rn!==c?(ip=null,rp=gt()+500,Fh(l,c)):kh=pi(l,c);e:do try{if(rr!==0&&xn!==null){c=xn;var N=qo;t:switch(rr){case 1:rr=0,qo=null,Uh(l,c,N,1);break;case 2:case 9:if(he(N)){rr=0,qo=null,E_(c);break}c=function(){rr!==2&&rr!==9||_r!==l||(rr=7),Hl(l)},N.then(c,c);break e;case 3:rr=7;break e;case 4:rr=5;break e;case 7:he(N)?(rr=0,qo=null,E_(c)):(rr=0,qo=null,Uh(l,c,N,7));break;case 5:var K=null;switch(xn.tag){case 26:K=xn.memoizedState;case 5:case 27:var ue=xn;if(!K||aw(K)){rr=0,qo=null;var ye=ue.sibling;if(ye!==null)xn=ye;else{var ke=ue.return;ke!==null?(xn=ke,op(ke)):xn=null}break t}}rr=0,qo=null,Uh(l,c,N,5);break;case 6:rr=0,qo=null,Uh(l,c,N,6);break;case 8:y2(),Jr=6;break e;default:throw Error(r(462))}}lC();break}catch(Ge){__(l,Ge)}while(!0);return Ws=xi=null,U.H=v,U.A=b,nr=d,xn!==null?0:(_r=null,Rn=0,lo(),Jr)}function lC(){for(;xn!==null&&!Be();)A_(xn)}function A_(l){var c=Kx(l.alternate,l,Bu);l.memoizedProps=l.pendingProps,c===null?op(l):xn=c}function E_(l){var c=l,d=c.alternate;switch(c.tag){case 15:case 0:c=Hx(d,c,c.pendingProps,c.type,void 0,Rn);break;case 11:c=Hx(d,c,c.pendingProps,c.type.render,c.ref,Rn);break;case 5:Sh(c);default:Zx(d,c),c=xn=bf(c,Bu),c=Kx(d,c,Bu)}l.memoizedProps=l.pendingProps,c===null?op(l):xn=c}function Uh(l,c,d,v){Ws=xi=null,Sh(c),Dh=null,Qd=0;var b=c.return;try{if(Q8(l,b,c,d,Rn)){Jr=1,Q0(l,ln(d,l.current)),xn=null;return}}catch(N){if(b!==null)throw xn=b,N;Jr=1,Q0(l,ln(d,l.current)),xn=null;return}c.flags&32768?(Pn||v===1?l=!0:kh||(Rn&536870912)!==0?l=!1:(Nc=l=!0,(v===2||v===9||v===3||v===6)&&(v=ys.current,v!==null&&v.tag===13&&(v.flags|=16384))),S_(c,l)):op(c)}function op(l){var c=l;do{if((c.flags&32768)!==0){S_(c,Nc);return}l=c.return;var d=J8(c.alternate,c,Bu);if(d!==null){xn=d;return}if(c=c.sibling,c!==null){xn=c;return}xn=c=l}while(c!==null);Jr===0&&(Jr=5)}function S_(l,c){do{var d=eC(l.alternate,l);if(d!==null){d.flags&=32767,xn=d;return}if(d=l.return,d!==null&&(d.flags|=32768,d.subtreeFlags=0,d.deletions=null),!c&&(l=l.sibling,l!==null)){xn=l;return}xn=l=d}while(l!==null);Jr=6,xn=null}function C_(l,c,d,v,b,N,K,ue,ye){l.cancelPendingCommit=null;do sp();while(aa!==0);if((nr&6)!==0)throw Error(r(327));if(c!==null){if(c===l.current)throw Error(r(177));if(N=c.lanes|c.childLanes,N|=jr,yn(l,d,N,K,ue,ye),l===_r&&(xn=_r=null,Rn=0),Bh=c,Pc=l,jh=d,g2=N,m2=b,m_=v,(c.subtreeFlags&10256)!==0||(c.flags&10256)!==0?(l.callbackNode=null,l.callbackPriority=0,hC(at,function(){return D_(),null})):(l.callbackNode=null,l.callbackPriority=0),v=(c.flags&13878)!==0,(c.subtreeFlags&13878)!==0||v){v=U.T,U.T=null,b=z.p,z.p=2,K=nr,nr|=4;try{tC(l,c,d)}finally{nr=K,z.p=b,U.T=v}}aa=1,T_(),I_(),R_()}}function T_(){if(aa===1){aa=0;var l=Pc,c=Bh,d=(c.flags&13878)!==0;if((c.subtreeFlags&13878)!==0||d){d=U.T,U.T=null;var v=z.p;z.p=2;var b=nr;nr|=4;try{u_(c,l);var N=O2,K=ta(l.containerInfo),ue=N.focusedElem,ye=N.selectionRange;if(K!==ue&&ue&&ue.ownerDocument&&Sl(ue.ownerDocument.documentElement,ue)){if(ye!==null&&Ri(ue)){var ke=ye.start,Ge=ye.end;if(Ge===void 0&&(Ge=ke),"selectionStart"in ue)ue.selectionStart=ke,ue.selectionEnd=Math.min(Ge,ue.value.length);else{var Ze=ue.ownerDocument||document,je=Ze&&Ze.defaultView||window;if(je.getSelection){var Fe=je.getSelection(),Yt=ue.textContent.length,Vt=Math.min(ye.start,Yt),hr=ye.end===void 0?Vt:Math.min(ye.end,Yt);!Fe.extend&&Vt>hr&&(K=hr,hr=Vt,Vt=K);var Ne=Bs(ue,Vt),Ee=Bs(ue,hr);if(Ne&&Ee&&(Fe.rangeCount!==1||Fe.anchorNode!==Ne.node||Fe.anchorOffset!==Ne.offset||Fe.focusNode!==Ee.node||Fe.focusOffset!==Ee.offset)){var Oe=Ze.createRange();Oe.setStart(Ne.node,Ne.offset),Fe.removeAllRanges(),Vt>hr?(Fe.addRange(Oe),Fe.extend(Ee.node,Ee.offset)):(Oe.setEnd(Ee.node,Ee.offset),Fe.addRange(Oe))}}}}for(Ze=[],Fe=ue;Fe=Fe.parentNode;)Fe.nodeType===1&&Ze.push({element:Fe,left:Fe.scrollLeft,top:Fe.scrollTop});for(typeof ue.focus=="function"&&ue.focus(),ue=0;ue<Ze.length;ue++){var Ye=Ze[ue];Ye.element.scrollLeft=Ye.left,Ye.element.scrollTop=Ye.top}}xp=!!D2,O2=D2=null}finally{nr=b,z.p=v,U.T=d}}l.current=c,aa=2}}function I_(){if(aa===2){aa=0;var l=Pc,c=Bh,d=(c.flags&8772)!==0;if((c.subtreeFlags&8772)!==0||d){d=U.T,U.T=null;var v=z.p;z.p=2;var b=nr;nr|=4;try{a_(l,c.alternate,c)}finally{nr=b,z.p=v,U.T=d}}aa=3}}function R_(){if(aa===4||aa===3){aa=0,me();var l=Pc,c=Bh,d=jh,v=m_;(c.subtreeFlags&10256)!==0||(c.flags&10256)!==0?aa=5:(aa=0,Bh=Pc=null,N_(l,l.pendingLanes));var b=l.pendingLanes;if(b===0&&(Oc=null),Mn(d),c=c.stateNode,bt&&typeof bt.onCommitFiberRoot=="function")try{bt.onCommitFiberRoot(_t,c,void 0,(c.current.flags&128)===128)}catch{}if(v!==null){c=U.T,b=z.p,z.p=2,U.T=null;try{for(var N=l.onRecoverableError,K=0;K<v.length;K++){var ue=v[K];N(ue.value,{componentStack:ue.stack})}}finally{U.T=c,z.p=b}}(jh&3)!==0&&sp(),Hl(l),b=l.pendingLanes,(d&4194090)!==0&&(b&42)!==0?l===v2?o1++:(o1=0,v2=l):o1=0,s1(0)}}function N_(l,c){(l.pooledCacheLanes&=c)===0&&(c=l.pooledCache,c!=null&&(l.pooledCache=null,Cf(c)))}function sp(l){return T_(),I_(),R_(),D_()}function D_(){if(aa!==5)return!1;var l=Pc,c=g2;g2=0;var d=Mn(jh),v=U.T,b=z.p;try{z.p=32>d?32:d,U.T=null,d=m2,m2=null;var N=Pc,K=jh;if(aa=0,Bh=Pc=null,jh=0,(nr&6)!==0)throw Error(r(331));var ue=nr;if(nr|=4,p_(N.current),f_(N,N.current,K,d),nr=ue,s1(0,!1),bt&&typeof bt.onPostCommitFiberRoot=="function")try{bt.onPostCommitFiberRoot(_t,N)}catch{}return!0}finally{z.p=b,U.T=v,N_(l,c)}}function O_(l,c,d){c=ln(d,c),c=Ym(l.stateNode,c,2),l=Qe(l,c,2),l!==null&&(sr(l,2),Hl(l))}function mr(l,c,d){if(l.tag===3)O_(l,l,d);else for(;c!==null;){if(c.tag===3){O_(c,l,d);break}else if(c.tag===1){var v=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof v.componentDidCatch=="function"&&(Oc===null||!Oc.has(v))){l=ln(d,l),d=Mx(2),v=Qe(c,d,2),v!==null&&(Bx(d,v,c,l),sr(v,2),Hl(v));break}}c=c.return}}function w2(l,c,d){var v=l.pingCache;if(v===null){v=l.pingCache=new iC;var b=new Set;v.set(c,b)}else b=v.get(c),b===void 0&&(b=new Set,v.set(c,b));b.has(d)||(f2=!0,b.add(d),l=uC.bind(null,l,c,d),c.then(l,l))}function uC(l,c,d){var v=l.pingCache;v!==null&&v.delete(c),l.pingedLanes|=l.suspendedLanes&d,l.warmLanes&=~d,_r===l&&(Rn&d)===d&&(Jr===4||Jr===3&&(Rn&62914560)===Rn&&300>gt()-p2?(nr&2)===0&&Fh(l,0):h2|=d,Mh===Rn&&(Mh=0)),Hl(l)}function P_(l,c){c===0&&(c=Cn()),l=Fs(l,c),l!==null&&(sr(l,c),Hl(l))}function cC(l){var c=l.memoizedState,d=0;c!==null&&(d=c.retryLane),P_(l,d)}function fC(l,c){var d=0;switch(l.tag){case 13:var v=l.stateNode,b=l.memoizedState;b!==null&&(d=b.retryLane);break;case 19:v=l.stateNode;break;case 22:v=l.stateNode._retryCache;break;default:throw Error(r(314))}v!==null&&v.delete(c),P_(l,d)}function hC(l,c){return st(l,c)}var lp=null,Vh=null,b2=!1,up=!1,A2=!1,Vf=0;function Hl(l){l!==Vh&&l.next===null&&(Vh===null?lp=Vh=l:Vh=Vh.next=l),up=!0,b2||(b2=!0,pC())}function s1(l,c){if(!A2&&up){A2=!0;do for(var d=!1,v=lp;v!==null;){if(l!==0){var b=v.pendingLanes;if(b===0)var N=0;else{var K=v.suspendedLanes,ue=v.pingedLanes;N=(1<<31-xt(42|l)+1)-1,N&=b&~(K&~ue),N=N&201326741?N&201326741|1:N?N|2:0}N!==0&&(d=!0,B_(v,N))}else N=Rn,N=An(v,v===_r?N:0,v.cancelPendingCommit!==null||v.timeoutHandle!==-1),(N&3)===0||pi(v,N)||(d=!0,B_(v,N));v=v.next}while(d);A2=!1}}function dC(){L_()}function L_(){up=b2=!1;var l=0;Vf!==0&&(bC()&&(l=Vf),Vf=0);for(var c=gt(),d=null,v=lp;v!==null;){var b=v.next,N=k_(v,c);N===0?(v.next=null,d===null?lp=b:d.next=b,b===null&&(Vh=d)):(d=v,(l!==0||(N&3)!==0)&&(up=!0)),v=b}s1(l)}function k_(l,c){for(var d=l.suspendedLanes,v=l.pingedLanes,b=l.expirationTimes,N=l.pendingLanes&-62914561;0<N;){var K=31-xt(N),ue=1<<K,ye=b[K];ye===-1?((ue&d)===0||(ue&v)!==0)&&(b[K]=on(ue,c)):ye<=c&&(l.expiredLanes|=ue),N&=~ue}if(c=_r,d=Rn,d=An(l,l===c?d:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),v=l.callbackNode,d===0||l===c&&(rr===2||rr===9)||l.cancelPendingCommit!==null)return v!==null&&v!==null&&wt(v),l.callbackNode=null,l.callbackPriority=0;if((d&3)===0||pi(l,d)){if(c=d&-d,c===l.callbackPriority)return c;switch(v!==null&&wt(v),Mn(d)){case 2:case 8:d=it;break;case 32:d=at;break;case 268435456:d=ct;break;default:d=at}return v=M_.bind(null,l),d=st(d,v),l.callbackPriority=c,l.callbackNode=d,c}return v!==null&&v!==null&&wt(v),l.callbackPriority=2,l.callbackNode=null,2}function M_(l,c){if(aa!==0&&aa!==5)return l.callbackNode=null,l.callbackPriority=0,null;var d=l.callbackNode;if(sp()&&l.callbackNode!==d)return null;var v=Rn;return v=An(l,l===_r?v:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),v===0?null:(y_(l,v,c),k_(l,gt()),l.callbackNode!=null&&l.callbackNode===d?M_.bind(null,l):null)}function B_(l,c){if(sp())return null;y_(l,c,!0)}function pC(){EC(function(){(nr&6)!==0?st(Xe,dC):L_()})}function E2(){return Vf===0&&(Vf=pa()),Vf}function j_(l){return l==null||typeof l=="symbol"||typeof l=="boolean"?null:typeof l=="function"?l:Do(""+l)}function F_(l,c){var d=c.ownerDocument.createElement("input");return d.name=c.name,d.value=c.value,l.id&&d.setAttribute("form",l.id),c.parentNode.insertBefore(d,c),l=new FormData(l),d.parentNode.removeChild(d),l}function gC(l,c,d,v,b){if(c==="submit"&&d&&d.stateNode===b){var N=j_((b[Gn]||null).action),K=v.submitter;K&&(c=(c=K[Gn]||null)?j_(c.formAction):K.getAttribute("formAction"),c!==null&&(N=c,K=null));var ue=new rs("action","action",null,v,b);l.push({event:ue,listeners:[{instance:null,listener:function(){if(v.defaultPrevented){if(Vf!==0){var ye=K?F_(b,K):new FormData(b);vs(d,{pending:!0,data:ye,method:b.method,action:N},null,ye)}}else typeof N=="function"&&(ue.preventDefault(),ye=K?F_(b,K):new FormData(b),vs(d,{pending:!0,data:ye,method:b.method,action:N},N,ye))},currentTarget:b}]})}}for(var S2=0;S2<wu.length;S2++){var C2=wu[S2],mC=C2.toLowerCase(),vC=C2[0].toUpperCase()+C2.slice(1);Or(mC,"on"+vC)}Or(pc,"onAnimationEnd"),Or(Tl,"onAnimationIteration"),Or(Il,"onAnimationStart"),Or("dblclick","onDoubleClick"),Or("focusin","onFocus"),Or("focusout","onBlur"),Or(Rl,"onTransitionRun"),Or(_u,"onTransitionStart"),Or(gc,"onTransitionCancel"),Or(Nl,"onTransitionEnd"),ga("onMouseEnter",["mouseout","mouseover"]),ga("onMouseLeave",["mouseout","mouseover"]),ga("onPointerEnter",["pointerout","pointerover"]),ga("onPointerLeave",["pointerout","pointerover"]),ji("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ji("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ji("onBeforeInput",["compositionend","keypress","textInput","paste"]),ji("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ji("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ji("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var l1="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),yC=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(l1));function U_(l,c){c=(c&4)!==0;for(var d=0;d<l.length;d++){var v=l[d],b=v.event;v=v.listeners;e:{var N=void 0;if(c)for(var K=v.length-1;0<=K;K--){var ue=v[K],ye=ue.instance,ke=ue.currentTarget;if(ue=ue.listener,ye!==N&&b.isPropagationStopped())break e;N=ue,b.currentTarget=ke;try{N(b)}catch(Ge){K0(Ge)}b.currentTarget=null,N=ye}else for(K=0;K<v.length;K++){if(ue=v[K],ye=ue.instance,ke=ue.currentTarget,ue=ue.listener,ye!==N&&b.isPropagationStopped())break e;N=ue,b.currentTarget=ke;try{N(b)}catch(Ge){K0(Ge)}b.currentTarget=null,N=ye}}}}function _n(l,c){var d=c[Er];d===void 0&&(d=c[Er]=new Set);var v=l+"__bubble";d.has(v)||(V_(c,l,2,!1),d.add(v))}function T2(l,c,d){var v=0;c&&(v|=4),V_(d,l,v,c)}var cp="_reactListening"+Math.random().toString(36).slice(2);function I2(l){if(!l[cp]){l[cp]=!0,So.forEach(function(d){d!=="selectionchange"&&(yC.has(d)||T2(d,!1,l),T2(d,!0,l))});var c=l.nodeType===9?l:l.ownerDocument;c===null||c[cp]||(c[cp]=!0,T2("selectionchange",!1,c))}}function V_(l,c,d,v){switch(fw(c)){case 2:var b=WC;break;case 8:b=GC;break;default:b=z2}d=b.bind(null,c,d,l),b=void 0,!ea||c!=="touchstart"&&c!=="touchmove"&&c!=="wheel"||(b=!0),v?b!==void 0?l.addEventListener(c,d,{capture:!0,passive:b}):l.addEventListener(c,d,!0):b!==void 0?l.addEventListener(c,d,{passive:b}):l.addEventListener(c,d,!1)}function R2(l,c,d,v,b){var N=v;if((c&1)===0&&(c&2)===0&&v!==null)e:for(;;){if(v===null)return;var K=v.tag;if(K===3||K===4){var ue=v.stateNode.containerInfo;if(ue===b)break;if(K===4)for(K=v.return;K!==null;){var ye=K.tag;if((ye===3||ye===4)&&K.stateNode.containerInfo===b)return;K=K.return}for(;ue!==null;){if(K=ti(ue),K===null)return;if(ye=K.tag,ye===5||ye===6||ye===26||ye===27){v=N=K;continue e}ue=ue.parentNode}}v=v.return}uc(function(){var ke=N,Ge=er(d),Ze=[];e:{var je=js.get(l);if(je!==void 0){var Fe=rs,Yt=l;switch(l){case"keypress":if(xa(d)===0)break e;case"keydown":case"keyup":Fe=ko;break;case"focusin":Yt="focus",Fe=as;break;case"focusout":Yt="blur",Fe=as;break;case"beforeblur":case"afterblur":Fe=as;break;case"click":if(d.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Fe=Yr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Fe=is;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Fe=wl;break;case pc:case Tl:case Il:Fe=yl;break;case Nl:Fe=J;break;case"scroll":case"scrollend":Fe=pu;break;case"wheel":Fe=xe;break;case"copy":case"cut":case"paste":Fe=xl;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Fe=Ms;break;case"toggle":case"beforetoggle":Fe=Ve}var Vt=(c&4)!==0,hr=!Vt&&(l==="scroll"||l==="scrollend"),Ne=Vt?je!==null?je+"Capture":null:je;Vt=[];for(var Ee=ke,Oe;Ee!==null;){var Ye=Ee;if(Oe=Ye.stateNode,Ye=Ye.tag,Ye!==5&&Ye!==26&&Ye!==27||Oe===null||Ne===null||(Ye=Fi(Ee,Ne),Ye!=null&&Vt.push(u1(Ee,Ye,Oe))),hr)break;Ee=Ee.return}0<Vt.length&&(je=new Fe(je,Yt,null,d,Ge),Ze.push({event:je,listeners:Vt}))}}if((c&7)===0){e:{if(je=l==="mouseover"||l==="pointerover",Fe=l==="mouseout"||l==="pointerout",je&&d!==eo&&(Yt=d.relatedTarget||d.fromElement)&&(ti(Yt)||Yt[gr]))break e;if((Fe||je)&&(je=Ge.window===Ge?Ge:(je=Ge.ownerDocument)?je.defaultView||je.parentWindow:window,Fe?(Yt=d.relatedTarget||d.toElement,Fe=ke,Yt=Yt?ti(Yt):null,Yt!==null&&(hr=a(Yt),Vt=Yt.tag,Yt!==hr||Vt!==5&&Vt!==27&&Vt!==6)&&(Yt=null)):(Fe=null,Yt=ke),Fe!==Yt)){if(Vt=Yr,Ye="onMouseLeave",Ne="onMouseEnter",Ee="mouse",(l==="pointerout"||l==="pointerover")&&(Vt=Ms,Ye="onPointerLeave",Ne="onPointerEnter",Ee="pointer"),hr=Fe==null?je:ni(Fe),Oe=Yt==null?je:ni(Yt),je=new Vt(Ye,Ee+"leave",Fe,d,Ge),je.target=hr,je.relatedTarget=Oe,Ye=null,ti(Ge)===ke&&(Vt=new Vt(Ne,Ee+"enter",Yt,d,Ge),Vt.target=Oe,Vt.relatedTarget=hr,Ye=Vt),hr=Ye,Fe&&Yt)t:{for(Vt=Fe,Ne=Yt,Ee=0,Oe=Vt;Oe;Oe=zh(Oe))Ee++;for(Oe=0,Ye=Ne;Ye;Ye=zh(Ye))Oe++;for(;0<Ee-Oe;)Vt=zh(Vt),Ee--;for(;0<Oe-Ee;)Ne=zh(Ne),Oe--;for(;Ee--;){if(Vt===Ne||Ne!==null&&Vt===Ne.alternate)break t;Vt=zh(Vt),Ne=zh(Ne)}Vt=null}else Vt=null;Fe!==null&&z_(Ze,je,Fe,Vt,!1),Yt!==null&&hr!==null&&z_(Ze,hr,Yt,Vt,!0)}}e:{if(je=ke?ni(ke):window,Fe=je.nodeName&&je.nodeName.toLowerCase(),Fe==="select"||Fe==="input"&&je.type==="file")var St=hc;else if(Kn(je))if(mu)St=vh;else{St=kd;var pn=wa}else Fe=je.nodeName,!Fe||Fe.toLowerCase()!=="input"||je.type!=="checkbox"&&je.type!=="radio"?ke&&hu(ke.elementType)&&(St=hc):St=_f;if(St&&(St=St(l,ke))){oo(Ze,St,d,Ge);break e}pn&&pn(l,je,ke),l==="focusout"&&ke&&je.type==="number"&&ke.memoizedProps.value!=null&&es(je,"number",je.value)}switch(pn=ke?ni(ke):window,l){case"focusin":(Kn(pn)||pn.contentEditable==="true")&&(ba=pn,Mo=ke,cs=null);break;case"focusout":cs=Mo=ba=null;break;case"mousedown":Bo=!0;break;case"contextmenu":case"mouseup":case"dragend":Bo=!1,Dr(Ze,d,Ge);break;case"selectionchange":if(Cl)break;case"keydown":case"keyup":Dr(Ze,d,Ge)}var Pt;if(ht)e:{switch(l){case"compositionstart":var qt="onCompositionStart";break e;case"compositionend":qt="onCompositionEnd";break e;case"compositionupdate":qt="onCompositionUpdate";break e}qt=void 0}else Ut?Le(l,d)&&(qt="onCompositionEnd"):l==="keydown"&&d.keyCode===229&&(qt="onCompositionStart");qt&&(X&&d.locale!=="ko"&&(Ut||qt!=="onCompositionStart"?qt==="onCompositionEnd"&&Ut&&(Pt=du()):(ya=Ge,ns="value"in ya?ya.value:ya.textContent,Ut=!0)),pn=fp(ke,qt),0<pn.length&&(qt=new Ps(qt,l,null,d,Ge),Ze.push({event:qt,listeners:pn}),Pt?qt.data=Pt:(Pt=nt(d),Pt!==null&&(qt.data=Pt)))),(Pt=F?dn(l,d):Qt(l,d))&&(qt=fp(ke,"onBeforeInput"),0<qt.length&&(pn=new Ps("onBeforeInput","beforeinput",null,d,Ge),Ze.push({event:pn,listeners:qt}),pn.data=Pt)),gC(Ze,l,ke,d,Ge)}U_(Ze,c)})}function u1(l,c,d){return{instance:l,listener:c,currentTarget:d}}function fp(l,c){for(var d=c+"Capture",v=[];l!==null;){var b=l,N=b.stateNode;if(b=b.tag,b!==5&&b!==26&&b!==27||N===null||(b=Fi(l,d),b!=null&&v.unshift(u1(l,b,N)),b=Fi(l,c),b!=null&&v.push(u1(l,b,N))),l.tag===3)return v;l=l.return}return[]}function zh(l){if(l===null)return null;do l=l.return;while(l&&l.tag!==5&&l.tag!==27);return l||null}function z_(l,c,d,v,b){for(var N=c._reactName,K=[];d!==null&&d!==v;){var ue=d,ye=ue.alternate,ke=ue.stateNode;if(ue=ue.tag,ye!==null&&ye===v)break;ue!==5&&ue!==26&&ue!==27||ke===null||(ye=ke,b?(ke=Fi(d,N),ke!=null&&K.unshift(u1(d,ke,ye))):b||(ke=Fi(d,N),ke!=null&&K.push(u1(d,ke,ye)))),d=d.return}K.length!==0&&l.push({event:c,listeners:K})}var xC=/\r\n?/g,_C=/\u0000|\uFFFD/g;function q_(l){return(typeof l=="string"?l:""+l).replace(xC,`
`).replace(_C,"")}function H_(l,c){return c=q_(c),q_(l)===c}function hp(){}function fr(l,c,d,v,b,N){switch(d){case"children":typeof v=="string"?c==="body"||c==="textarea"&&v===""||ma(l,v):(typeof v=="number"||typeof v=="bigint")&&c!=="body"&&ma(l,""+v);break;case"className":za(l,"class",v);break;case"tabIndex":za(l,"tabindex",v);break;case"dir":case"role":case"viewBox":case"width":case"height":za(l,d,v);break;case"style":fu(l,v,N);break;case"data":if(c!=="object"){za(l,"data",v);break}case"src":case"href":if(v===""&&(c!=="a"||d!=="href")){l.removeAttribute(d);break}if(v==null||typeof v=="function"||typeof v=="symbol"||typeof v=="boolean"){l.removeAttribute(d);break}v=Do(""+v),l.setAttribute(d,v);break;case"action":case"formAction":if(typeof v=="function"){l.setAttribute(d,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof N=="function"&&(d==="formAction"?(c!=="input"&&fr(l,c,"name",b.name,b,null),fr(l,c,"formEncType",b.formEncType,b,null),fr(l,c,"formMethod",b.formMethod,b,null),fr(l,c,"formTarget",b.formTarget,b,null)):(fr(l,c,"encType",b.encType,b,null),fr(l,c,"method",b.method,b,null),fr(l,c,"target",b.target,b,null)));if(v==null||typeof v=="symbol"||typeof v=="boolean"){l.removeAttribute(d);break}v=Do(""+v),l.setAttribute(d,v);break;case"onClick":v!=null&&(l.onclick=hp);break;case"onScroll":v!=null&&_n("scroll",l);break;case"onScrollEnd":v!=null&&_n("scrollend",l);break;case"dangerouslySetInnerHTML":if(v!=null){if(typeof v!="object"||!("__html"in v))throw Error(r(61));if(d=v.__html,d!=null){if(b.children!=null)throw Error(r(60));l.innerHTML=d}}break;case"multiple":l.multiple=v&&typeof v!="function"&&typeof v!="symbol";break;case"muted":l.muted=v&&typeof v!="function"&&typeof v!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(v==null||typeof v=="function"||typeof v=="boolean"||typeof v=="symbol"){l.removeAttribute("xlink:href");break}d=Do(""+v),l.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",d);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":v!=null&&typeof v!="function"&&typeof v!="symbol"?l.setAttribute(d,""+v):l.removeAttribute(d);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":v&&typeof v!="function"&&typeof v!="symbol"?l.setAttribute(d,""):l.removeAttribute(d);break;case"capture":case"download":v===!0?l.setAttribute(d,""):v!==!1&&v!=null&&typeof v!="function"&&typeof v!="symbol"?l.setAttribute(d,v):l.removeAttribute(d);break;case"cols":case"rows":case"size":case"span":v!=null&&typeof v!="function"&&typeof v!="symbol"&&!isNaN(v)&&1<=v?l.setAttribute(d,v):l.removeAttribute(d);break;case"rowSpan":case"start":v==null||typeof v=="function"||typeof v=="symbol"||isNaN(v)?l.removeAttribute(d):l.setAttribute(d,v);break;case"popover":_n("beforetoggle",l),_n("toggle",l),Va(l,"popover",v);break;case"xlinkActuate":ri(l,"http://www.w3.org/1999/xlink","xlink:actuate",v);break;case"xlinkArcrole":ri(l,"http://www.w3.org/1999/xlink","xlink:arcrole",v);break;case"xlinkRole":ri(l,"http://www.w3.org/1999/xlink","xlink:role",v);break;case"xlinkShow":ri(l,"http://www.w3.org/1999/xlink","xlink:show",v);break;case"xlinkTitle":ri(l,"http://www.w3.org/1999/xlink","xlink:title",v);break;case"xlinkType":ri(l,"http://www.w3.org/1999/xlink","xlink:type",v);break;case"xmlBase":ri(l,"http://www.w3.org/XML/1998/namespace","xml:base",v);break;case"xmlLang":ri(l,"http://www.w3.org/XML/1998/namespace","xml:lang",v);break;case"xmlSpace":ri(l,"http://www.w3.org/XML/1998/namespace","xml:space",v);break;case"is":Va(l,"is",v);break;case"innerText":case"textContent":break;default:(!(2<d.length)||d[0]!=="o"&&d[0]!=="O"||d[1]!=="n"&&d[1]!=="N")&&(d=No.get(d)||d,Va(l,d,v))}}function N2(l,c,d,v,b,N){switch(d){case"style":fu(l,v,N);break;case"dangerouslySetInnerHTML":if(v!=null){if(typeof v!="object"||!("__html"in v))throw Error(r(61));if(d=v.__html,d!=null){if(b.children!=null)throw Error(r(60));l.innerHTML=d}}break;case"children":typeof v=="string"?ma(l,v):(typeof v=="number"||typeof v=="bigint")&&ma(l,""+v);break;case"onScroll":v!=null&&_n("scroll",l);break;case"onScrollEnd":v!=null&&_n("scrollend",l);break;case"onClick":v!=null&&(l.onclick=hp);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Co.hasOwnProperty(d))e:{if(d[0]==="o"&&d[1]==="n"&&(b=d.endsWith("Capture"),c=d.slice(2,b?d.length-7:void 0),N=l[Gn]||null,N=N!=null?N[d]:null,typeof N=="function"&&l.removeEventListener(c,N,b),typeof v=="function")){typeof N!="function"&&N!==null&&(d in l?l[d]=null:l.hasAttribute(d)&&l.removeAttribute(d)),l.addEventListener(c,v,b);break e}d in l?l[d]=v:v===!0?l.setAttribute(d,""):Va(l,d,v)}}}function oa(l,c,d){switch(c){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":_n("error",l),_n("load",l);var v=!1,b=!1,N;for(N in d)if(d.hasOwnProperty(N)){var K=d[N];if(K!=null)switch(N){case"src":v=!0;break;case"srcSet":b=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,c));default:fr(l,c,N,K,d,null)}}b&&fr(l,c,"srcSet",d.srcSet,d,null),v&&fr(l,c,"src",d.src,d,null);return;case"input":_n("invalid",l);var ue=N=K=b=null,ye=null,ke=null;for(v in d)if(d.hasOwnProperty(v)){var Ge=d[v];if(Ge!=null)switch(v){case"name":b=Ge;break;case"type":K=Ge;break;case"checked":ye=Ge;break;case"defaultChecked":ke=Ge;break;case"value":N=Ge;break;case"defaultValue":ue=Ge;break;case"children":case"dangerouslySetInnerHTML":if(Ge!=null)throw Error(r(137,c));break;default:fr(l,c,v,Ge,d,null)}}Jo(l,N,ue,ye,ke,K,b,!1),Zo(l);return;case"select":_n("invalid",l),v=K=N=null;for(b in d)if(d.hasOwnProperty(b)&&(ue=d[b],ue!=null))switch(b){case"value":N=ue;break;case"defaultValue":K=ue;break;case"multiple":v=ue;default:fr(l,c,b,ue,d,null)}c=N,d=K,l.multiple=!!v,c!=null?Ja(l,!!v,c,!1):d!=null&&Ja(l,!!v,d,!0);return;case"textarea":_n("invalid",l),N=b=v=null;for(K in d)if(d.hasOwnProperty(K)&&(ue=d[K],ue!=null))switch(K){case"value":v=ue;break;case"defaultValue":b=ue;break;case"children":N=ue;break;case"dangerouslySetInnerHTML":if(ue!=null)throw Error(r(91));break;default:fr(l,c,K,ue,d,null)}ts(l,v,b,N),Zo(l);return;case"option":for(ye in d)if(d.hasOwnProperty(ye)&&(v=d[ye],v!=null))switch(ye){case"selected":l.selected=v&&typeof v!="function"&&typeof v!="symbol";break;default:fr(l,c,ye,v,d,null)}return;case"dialog":_n("beforetoggle",l),_n("toggle",l),_n("cancel",l),_n("close",l);break;case"iframe":case"object":_n("load",l);break;case"video":case"audio":for(v=0;v<l1.length;v++)_n(l1[v],l);break;case"image":_n("error",l),_n("load",l);break;case"details":_n("toggle",l);break;case"embed":case"source":case"link":_n("error",l),_n("load",l);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ke in d)if(d.hasOwnProperty(ke)&&(v=d[ke],v!=null))switch(ke){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,c));default:fr(l,c,ke,v,d,null)}return;default:if(hu(c)){for(Ge in d)d.hasOwnProperty(Ge)&&(v=d[Ge],v!==void 0&&N2(l,c,Ge,v,d,void 0));return}}for(ue in d)d.hasOwnProperty(ue)&&(v=d[ue],v!=null&&fr(l,c,ue,v,d,null))}function wC(l,c,d,v){switch(c){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var b=null,N=null,K=null,ue=null,ye=null,ke=null,Ge=null;for(Fe in d){var Ze=d[Fe];if(d.hasOwnProperty(Fe)&&Ze!=null)switch(Fe){case"checked":break;case"value":break;case"defaultValue":ye=Ze;default:v.hasOwnProperty(Fe)||fr(l,c,Fe,null,v,Ze)}}for(var je in v){var Fe=v[je];if(Ze=d[je],v.hasOwnProperty(je)&&(Fe!=null||Ze!=null))switch(je){case"type":N=Fe;break;case"name":b=Fe;break;case"checked":ke=Fe;break;case"defaultChecked":Ge=Fe;break;case"value":K=Fe;break;case"defaultValue":ue=Fe;break;case"children":case"dangerouslySetInnerHTML":if(Fe!=null)throw Error(r(137,c));break;default:Fe!==Ze&&fr(l,c,je,Fe,v,Ze)}}Ti(l,K,ue,ye,ke,Ge,N,b);return;case"select":Fe=K=ue=je=null;for(N in d)if(ye=d[N],d.hasOwnProperty(N)&&ye!=null)switch(N){case"value":break;case"multiple":Fe=ye;default:v.hasOwnProperty(N)||fr(l,c,N,null,v,ye)}for(b in v)if(N=v[b],ye=d[b],v.hasOwnProperty(b)&&(N!=null||ye!=null))switch(b){case"value":je=N;break;case"defaultValue":ue=N;break;case"multiple":K=N;default:N!==ye&&fr(l,c,b,N,v,ye)}c=ue,d=K,v=Fe,je!=null?Ja(l,!!d,je,!1):!!v!=!!d&&(c!=null?Ja(l,!!d,c,!0):Ja(l,!!d,d?[]:"",!1));return;case"textarea":Fe=je=null;for(ue in d)if(b=d[ue],d.hasOwnProperty(ue)&&b!=null&&!v.hasOwnProperty(ue))switch(ue){case"value":break;case"children":break;default:fr(l,c,ue,null,v,b)}for(K in v)if(b=v[K],N=d[K],v.hasOwnProperty(K)&&(b!=null||N!=null))switch(K){case"value":je=b;break;case"defaultValue":Fe=b;break;case"children":break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(r(91));break;default:b!==N&&fr(l,c,K,b,v,N)}jn(l,je,Fe);return;case"option":for(var Yt in d)if(je=d[Yt],d.hasOwnProperty(Yt)&&je!=null&&!v.hasOwnProperty(Yt))switch(Yt){case"selected":l.selected=!1;break;default:fr(l,c,Yt,null,v,je)}for(ye in v)if(je=v[ye],Fe=d[ye],v.hasOwnProperty(ye)&&je!==Fe&&(je!=null||Fe!=null))switch(ye){case"selected":l.selected=je&&typeof je!="function"&&typeof je!="symbol";break;default:fr(l,c,ye,je,v,Fe)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Vt in d)je=d[Vt],d.hasOwnProperty(Vt)&&je!=null&&!v.hasOwnProperty(Vt)&&fr(l,c,Vt,null,v,je);for(ke in v)if(je=v[ke],Fe=d[ke],v.hasOwnProperty(ke)&&je!==Fe&&(je!=null||Fe!=null))switch(ke){case"children":case"dangerouslySetInnerHTML":if(je!=null)throw Error(r(137,c));break;default:fr(l,c,ke,je,v,Fe)}return;default:if(hu(c)){for(var hr in d)je=d[hr],d.hasOwnProperty(hr)&&je!==void 0&&!v.hasOwnProperty(hr)&&N2(l,c,hr,void 0,v,je);for(Ge in v)je=v[Ge],Fe=d[Ge],!v.hasOwnProperty(Ge)||je===Fe||je===void 0&&Fe===void 0||N2(l,c,Ge,je,v,Fe);return}}for(var Ne in d)je=d[Ne],d.hasOwnProperty(Ne)&&je!=null&&!v.hasOwnProperty(Ne)&&fr(l,c,Ne,null,v,je);for(Ze in v)je=v[Ze],Fe=d[Ze],!v.hasOwnProperty(Ze)||je===Fe||je==null&&Fe==null||fr(l,c,Ze,je,v,Fe)}var D2=null,O2=null;function dp(l){return l.nodeType===9?l:l.ownerDocument}function W_(l){switch(l){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function G_(l,c){if(l===0)switch(c){case"svg":return 1;case"math":return 2;default:return 0}return l===1&&c==="foreignObject"?0:l}function P2(l,c){return l==="textarea"||l==="noscript"||typeof c.children=="string"||typeof c.children=="number"||typeof c.children=="bigint"||typeof c.dangerouslySetInnerHTML=="object"&&c.dangerouslySetInnerHTML!==null&&c.dangerouslySetInnerHTML.__html!=null}var L2=null;function bC(){var l=window.event;return l&&l.type==="popstate"?l===L2?!1:(L2=l,!0):(L2=null,!1)}var $_=typeof setTimeout=="function"?setTimeout:void 0,AC=typeof clearTimeout=="function"?clearTimeout:void 0,X_=typeof Promise=="function"?Promise:void 0,EC=typeof queueMicrotask=="function"?queueMicrotask:typeof X_<"u"?function(l){return X_.resolve(null).then(l).catch(SC)}:$_;function SC(l){setTimeout(function(){throw l})}function kc(l){return l==="head"}function Y_(l,c){var d=c,v=0,b=0;do{var N=d.nextSibling;if(l.removeChild(d),N&&N.nodeType===8)if(d=N.data,d==="/$"){if(0<v&&8>v){d=v;var K=l.ownerDocument;if(d&1&&c1(K.documentElement),d&2&&c1(K.body),d&4)for(d=K.head,c1(d),K=d.firstChild;K;){var ue=K.nextSibling,ye=K.nodeName;K[Ji]||ye==="SCRIPT"||ye==="STYLE"||ye==="LINK"&&K.rel.toLowerCase()==="stylesheet"||d.removeChild(K),K=ue}}if(b===0){l.removeChild(N),y1(c);return}b--}else d==="$"||d==="$?"||d==="$!"?b++:v=d.charCodeAt(0)-48;else v=0;d=N}while(d);y1(c)}function k2(l){var c=l.firstChild;for(c&&c.nodeType===10&&(c=c.nextSibling);c;){var d=c;switch(c=c.nextSibling,d.nodeName){case"HTML":case"HEAD":case"BODY":k2(d),gi(d);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(d.rel.toLowerCase()==="stylesheet")continue}l.removeChild(d)}}function CC(l,c,d,v){for(;l.nodeType===1;){var b=d;if(l.nodeName.toLowerCase()!==c.toLowerCase()){if(!v&&(l.nodeName!=="INPUT"||l.type!=="hidden"))break}else if(v){if(!l[Ji])switch(c){case"meta":if(!l.hasAttribute("itemprop"))break;return l;case"link":if(N=l.getAttribute("rel"),N==="stylesheet"&&l.hasAttribute("data-precedence"))break;if(N!==b.rel||l.getAttribute("href")!==(b.href==null||b.href===""?null:b.href)||l.getAttribute("crossorigin")!==(b.crossOrigin==null?null:b.crossOrigin)||l.getAttribute("title")!==(b.title==null?null:b.title))break;return l;case"style":if(l.hasAttribute("data-precedence"))break;return l;case"script":if(N=l.getAttribute("src"),(N!==(b.src==null?null:b.src)||l.getAttribute("type")!==(b.type==null?null:b.type)||l.getAttribute("crossorigin")!==(b.crossOrigin==null?null:b.crossOrigin))&&N&&l.hasAttribute("async")&&!l.hasAttribute("itemprop"))break;return l;default:return l}}else if(c==="input"&&l.type==="hidden"){var N=b.name==null?null:""+b.name;if(b.type==="hidden"&&l.getAttribute("name")===N)return l}else return l;if(l=Zs(l.nextSibling),l===null)break}return null}function TC(l,c,d){if(c==="")return null;for(;l.nodeType!==3;)if((l.nodeType!==1||l.nodeName!=="INPUT"||l.type!=="hidden")&&!d||(l=Zs(l.nextSibling),l===null))return null;return l}function M2(l){return l.data==="$!"||l.data==="$?"&&l.ownerDocument.readyState==="complete"}function IC(l,c){var d=l.ownerDocument;if(l.data!=="$?"||d.readyState==="complete")c();else{var v=function(){c(),d.removeEventListener("DOMContentLoaded",v)};d.addEventListener("DOMContentLoaded",v),l._reactRetry=v}}function Zs(l){for(;l!=null;l=l.nextSibling){var c=l.nodeType;if(c===1||c===3)break;if(c===8){if(c=l.data,c==="$"||c==="$!"||c==="$?"||c==="F!"||c==="F")break;if(c==="/$")return null}}return l}var B2=null;function K_(l){l=l.previousSibling;for(var c=0;l;){if(l.nodeType===8){var d=l.data;if(d==="$"||d==="$!"||d==="$?"){if(c===0)return l;c--}else d==="/$"&&c++}l=l.previousSibling}return null}function Q_(l,c,d){switch(c=dp(d),l){case"html":if(l=c.documentElement,!l)throw Error(r(452));return l;case"head":if(l=c.head,!l)throw Error(r(453));return l;case"body":if(l=c.body,!l)throw Error(r(454));return l;default:throw Error(r(451))}}function c1(l){for(var c=l.attributes;c.length;)l.removeAttributeNode(c[0]);gi(l)}var _s=new Map,Z_=new Set;function pp(l){return typeof l.getRootNode=="function"?l.getRootNode():l.nodeType===9?l:l.ownerDocument}var ju=z.d;z.d={f:RC,r:NC,D:DC,C:OC,L:PC,m:LC,X:MC,S:kC,M:BC};function RC(){var l=ju.f(),c=ap();return l||c}function NC(l){var c=$r(l);c!==null&&c.tag===5&&c.type==="form"?Mf(c):ju.r(l)}var qh=typeof document>"u"?null:document;function J_(l,c,d){var v=qh;if(v&&typeof c=="string"&&c){var b=En(c);b='link[rel="'+l+'"][href="'+b+'"]',typeof d=="string"&&(b+='[crossorigin="'+d+'"]'),Z_.has(b)||(Z_.add(b),l={rel:l,crossOrigin:d,href:c},v.querySelector(b)===null&&(c=v.createElement("link"),oa(c,"link",l),Bn(c),v.head.appendChild(c)))}}function DC(l){ju.D(l),J_("dns-prefetch",l,null)}function OC(l,c){ju.C(l,c),J_("preconnect",l,c)}function PC(l,c,d){ju.L(l,c,d);var v=qh;if(v&&l&&c){var b='link[rel="preload"][as="'+En(c)+'"]';c==="image"&&d&&d.imageSrcSet?(b+='[imagesrcset="'+En(d.imageSrcSet)+'"]',typeof d.imageSizes=="string"&&(b+='[imagesizes="'+En(d.imageSizes)+'"]')):b+='[href="'+En(l)+'"]';var N=b;switch(c){case"style":N=Hh(l);break;case"script":N=Wh(l)}_s.has(N)||(l=h({rel:"preload",href:c==="image"&&d&&d.imageSrcSet?void 0:l,as:c},d),_s.set(N,l),v.querySelector(b)!==null||c==="style"&&v.querySelector(f1(N))||c==="script"&&v.querySelector(h1(N))||(c=v.createElement("link"),oa(c,"link",l),Bn(c),v.head.appendChild(c)))}}function LC(l,c){ju.m(l,c);var d=qh;if(d&&l){var v=c&&typeof c.as=="string"?c.as:"script",b='link[rel="modulepreload"][as="'+En(v)+'"][href="'+En(l)+'"]',N=b;switch(v){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":N=Wh(l)}if(!_s.has(N)&&(l=h({rel:"modulepreload",href:l},c),_s.set(N,l),d.querySelector(b)===null)){switch(v){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(d.querySelector(h1(N)))return}v=d.createElement("link"),oa(v,"link",l),Bn(v),d.head.appendChild(v)}}}function kC(l,c,d){ju.S(l,c,d);var v=qh;if(v&&l){var b=lr(v).hoistableStyles,N=Hh(l);c=c||"default";var K=b.get(N);if(!K){var ue={loading:0,preload:null};if(K=v.querySelector(f1(N)))ue.loading=5;else{l=h({rel:"stylesheet",href:l,"data-precedence":c},d),(d=_s.get(N))&&j2(l,d);var ye=K=v.createElement("link");Bn(ye),oa(ye,"link",l),ye._p=new Promise(function(ke,Ge){ye.onload=ke,ye.onerror=Ge}),ye.addEventListener("load",function(){ue.loading|=1}),ye.addEventListener("error",function(){ue.loading|=2}),ue.loading|=4,gp(K,c,v)}K={type:"stylesheet",instance:K,count:1,state:ue},b.set(N,K)}}}function MC(l,c){ju.X(l,c);var d=qh;if(d&&l){var v=lr(d).hoistableScripts,b=Wh(l),N=v.get(b);N||(N=d.querySelector(h1(b)),N||(l=h({src:l,async:!0},c),(c=_s.get(b))&&F2(l,c),N=d.createElement("script"),Bn(N),oa(N,"link",l),d.head.appendChild(N)),N={type:"script",instance:N,count:1,state:null},v.set(b,N))}}function BC(l,c){ju.M(l,c);var d=qh;if(d&&l){var v=lr(d).hoistableScripts,b=Wh(l),N=v.get(b);N||(N=d.querySelector(h1(b)),N||(l=h({src:l,async:!0,type:"module"},c),(c=_s.get(b))&&F2(l,c),N=d.createElement("script"),Bn(N),oa(N,"link",l),d.head.appendChild(N)),N={type:"script",instance:N,count:1,state:null},v.set(b,N))}}function ew(l,c,d,v){var b=(b=de.current)?pp(b):null;if(!b)throw Error(r(446));switch(l){case"meta":case"title":return null;case"style":return typeof d.precedence=="string"&&typeof d.href=="string"?(c=Hh(d.href),d=lr(b).hoistableStyles,v=d.get(c),v||(v={type:"style",instance:null,count:0,state:null},d.set(c,v)),v):{type:"void",instance:null,count:0,state:null};case"link":if(d.rel==="stylesheet"&&typeof d.href=="string"&&typeof d.precedence=="string"){l=Hh(d.href);var N=lr(b).hoistableStyles,K=N.get(l);if(K||(b=b.ownerDocument||b,K={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},N.set(l,K),(N=b.querySelector(f1(l)))&&!N._p&&(K.instance=N,K.state.loading=5),_s.has(l)||(d={rel:"preload",as:"style",href:d.href,crossOrigin:d.crossOrigin,integrity:d.integrity,media:d.media,hrefLang:d.hrefLang,referrerPolicy:d.referrerPolicy},_s.set(l,d),N||jC(b,l,d,K.state))),c&&v===null)throw Error(r(528,""));return K}if(c&&v!==null)throw Error(r(529,""));return null;case"script":return c=d.async,d=d.src,typeof d=="string"&&c&&typeof c!="function"&&typeof c!="symbol"?(c=Wh(d),d=lr(b).hoistableScripts,v=d.get(c),v||(v={type:"script",instance:null,count:0,state:null},d.set(c,v)),v):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,l))}}function Hh(l){return'href="'+En(l)+'"'}function f1(l){return'link[rel="stylesheet"]['+l+"]"}function tw(l){return h({},l,{"data-precedence":l.precedence,precedence:null})}function jC(l,c,d,v){l.querySelector('link[rel="preload"][as="style"]['+c+"]")?v.loading=1:(c=l.createElement("link"),v.preload=c,c.addEventListener("load",function(){return v.loading|=1}),c.addEventListener("error",function(){return v.loading|=2}),oa(c,"link",d),Bn(c),l.head.appendChild(c))}function Wh(l){return'[src="'+En(l)+'"]'}function h1(l){return"script[async]"+l}function nw(l,c,d){if(c.count++,c.instance===null)switch(c.type){case"style":var v=l.querySelector('style[data-href~="'+En(d.href)+'"]');if(v)return c.instance=v,Bn(v),v;var b=h({},d,{"data-href":d.href,"data-precedence":d.precedence,href:null,precedence:null});return v=(l.ownerDocument||l).createElement("style"),Bn(v),oa(v,"style",b),gp(v,d.precedence,l),c.instance=v;case"stylesheet":b=Hh(d.href);var N=l.querySelector(f1(b));if(N)return c.state.loading|=4,c.instance=N,Bn(N),N;v=tw(d),(b=_s.get(b))&&j2(v,b),N=(l.ownerDocument||l).createElement("link"),Bn(N);var K=N;return K._p=new Promise(function(ue,ye){K.onload=ue,K.onerror=ye}),oa(N,"link",v),c.state.loading|=4,gp(N,d.precedence,l),c.instance=N;case"script":return N=Wh(d.src),(b=l.querySelector(h1(N)))?(c.instance=b,Bn(b),b):(v=d,(b=_s.get(N))&&(v=h({},d),F2(v,b)),l=l.ownerDocument||l,b=l.createElement("script"),Bn(b),oa(b,"link",v),l.head.appendChild(b),c.instance=b);case"void":return null;default:throw Error(r(443,c.type))}else c.type==="stylesheet"&&(c.state.loading&4)===0&&(v=c.instance,c.state.loading|=4,gp(v,d.precedence,l));return c.instance}function gp(l,c,d){for(var v=d.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),b=v.length?v[v.length-1]:null,N=b,K=0;K<v.length;K++){var ue=v[K];if(ue.dataset.precedence===c)N=ue;else if(N!==b)break}N?N.parentNode.insertBefore(l,N.nextSibling):(c=d.nodeType===9?d.head:d,c.insertBefore(l,c.firstChild))}function j2(l,c){l.crossOrigin==null&&(l.crossOrigin=c.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=c.referrerPolicy),l.title==null&&(l.title=c.title)}function F2(l,c){l.crossOrigin==null&&(l.crossOrigin=c.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=c.referrerPolicy),l.integrity==null&&(l.integrity=c.integrity)}var mp=null;function rw(l,c,d){if(mp===null){var v=new Map,b=mp=new Map;b.set(d,v)}else b=mp,v=b.get(d),v||(v=new Map,b.set(d,v));if(v.has(l))return v;for(v.set(l,null),d=d.getElementsByTagName(l),b=0;b<d.length;b++){var N=d[b];if(!(N[Ji]||N[Wn]||l==="link"&&N.getAttribute("rel")==="stylesheet")&&N.namespaceURI!=="http://www.w3.org/2000/svg"){var K=N.getAttribute(c)||"";K=l+K;var ue=v.get(K);ue?ue.push(N):v.set(K,[N])}}return v}function iw(l,c,d){l=l.ownerDocument||l,l.head.insertBefore(d,c==="title"?l.querySelector("head > title"):null)}function FC(l,c,d){if(d===1||c.itemProp!=null)return!1;switch(l){case"meta":case"title":return!0;case"style":if(typeof c.precedence!="string"||typeof c.href!="string"||c.href==="")break;return!0;case"link":if(typeof c.rel!="string"||typeof c.href!="string"||c.href===""||c.onLoad||c.onError)break;switch(c.rel){case"stylesheet":return l=c.disabled,typeof c.precedence=="string"&&l==null;default:return!0}case"script":if(c.async&&typeof c.async!="function"&&typeof c.async!="symbol"&&!c.onLoad&&!c.onError&&c.src&&typeof c.src=="string")return!0}return!1}function aw(l){return!(l.type==="stylesheet"&&(l.state.loading&3)===0)}var d1=null;function UC(){}function VC(l,c,d){if(d1===null)throw Error(r(475));var v=d1;if(c.type==="stylesheet"&&(typeof d.media!="string"||matchMedia(d.media).matches!==!1)&&(c.state.loading&4)===0){if(c.instance===null){var b=Hh(d.href),N=l.querySelector(f1(b));if(N){l=N._p,l!==null&&typeof l=="object"&&typeof l.then=="function"&&(v.count++,v=vp.bind(v),l.then(v,v)),c.state.loading|=4,c.instance=N,Bn(N);return}N=l.ownerDocument||l,d=tw(d),(b=_s.get(b))&&j2(d,b),N=N.createElement("link"),Bn(N);var K=N;K._p=new Promise(function(ue,ye){K.onload=ue,K.onerror=ye}),oa(N,"link",d),c.instance=N}v.stylesheets===null&&(v.stylesheets=new Map),v.stylesheets.set(c,l),(l=c.state.preload)&&(c.state.loading&3)===0&&(v.count++,c=vp.bind(v),l.addEventListener("load",c),l.addEventListener("error",c))}}function zC(){if(d1===null)throw Error(r(475));var l=d1;return l.stylesheets&&l.count===0&&U2(l,l.stylesheets),0<l.count?function(c){var d=setTimeout(function(){if(l.stylesheets&&U2(l,l.stylesheets),l.unsuspend){var v=l.unsuspend;l.unsuspend=null,v()}},6e4);return l.unsuspend=c,function(){l.unsuspend=null,clearTimeout(d)}}:null}function vp(){if(this.count--,this.count===0){if(this.stylesheets)U2(this,this.stylesheets);else if(this.unsuspend){var l=this.unsuspend;this.unsuspend=null,l()}}}var yp=null;function U2(l,c){l.stylesheets=null,l.unsuspend!==null&&(l.count++,yp=new Map,c.forEach(qC,l),yp=null,vp.call(l))}function qC(l,c){if(!(c.state.loading&4)){var d=yp.get(l);if(d)var v=d.get(null);else{d=new Map,yp.set(l,d);for(var b=l.querySelectorAll("link[data-precedence],style[data-precedence]"),N=0;N<b.length;N++){var K=b[N];(K.nodeName==="LINK"||K.getAttribute("media")!=="not all")&&(d.set(K.dataset.precedence,K),v=K)}v&&d.set(null,v)}b=c.instance,K=b.getAttribute("data-precedence"),N=d.get(K)||v,N===v&&d.set(null,b),d.set(K,b),this.count++,v=vp.bind(this),b.addEventListener("load",v),b.addEventListener("error",v),N?N.parentNode.insertBefore(b,N.nextSibling):(l=l.nodeType===9?l.head:l,l.insertBefore(b,l.firstChild)),c.state.loading|=4}}var p1={$$typeof:B,Provider:null,Consumer:null,_currentValue:ee,_currentValue2:ee,_threadCount:0};function HC(l,c,d,v,b,N,K,ue){this.tag=1,this.containerInfo=l,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Mr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Mr(0),this.hiddenUpdates=Mr(null),this.identifierPrefix=v,this.onUncaughtError=b,this.onCaughtError=N,this.onRecoverableError=K,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=ue,this.incompleteTransitions=new Map}function ow(l,c,d,v,b,N,K,ue,ye,ke,Ge,Ze){return l=new HC(l,c,d,K,ue,ye,ke,Ze),c=1,N===!0&&(c|=24),N=qi(3,null,null,c),l.current=N,N.stateNode=l,c=Bd(),c.refCount++,l.pooledCache=c,c.refCount++,N.memoizedState={element:v,isDehydrated:d,cache:c},we(N),l}function sw(l){return l?(l=yi,l):yi}function lw(l,c,d,v,b,N){b=sw(b),v.context===null?v.context=b:v.pendingContext=b,v=qe(c),v.payload={element:d},N=N===void 0?null:N,N!==null&&(v.callback=N),d=Qe(l,v,c),d!==null&&(Wo(d,l,c),$e(d,l,c))}function uw(l,c){if(l=l.memoizedState,l!==null&&l.dehydrated!==null){var d=l.retryLane;l.retryLane=d!==0&&d<c?d:c}}function V2(l,c){uw(l,c),(l=l.alternate)&&uw(l,c)}function cw(l){if(l.tag===13){var c=Fs(l,67108864);c!==null&&Wo(c,l,67108864),V2(l,67108864)}}var xp=!0;function WC(l,c,d,v){var b=U.T;U.T=null;var N=z.p;try{z.p=2,z2(l,c,d,v)}finally{z.p=N,U.T=b}}function GC(l,c,d,v){var b=U.T;U.T=null;var N=z.p;try{z.p=8,z2(l,c,d,v)}finally{z.p=N,U.T=b}}function z2(l,c,d,v){if(xp){var b=q2(v);if(b===null)R2(l,c,v,_p,d),hw(l,v);else if(XC(b,l,c,d,v))v.stopPropagation();else if(hw(l,v),c&4&&-1<$C.indexOf(l)){for(;b!==null;){var N=$r(b);if(N!==null)switch(N.tag){case 3:if(N=N.stateNode,N.current.memoizedState.isDehydrated){var K=Kt(N.pendingLanes);if(K!==0){var ue=N;for(ue.pendingLanes|=2,ue.entangledLanes|=2;K;){var ye=1<<31-xt(K);ue.entanglements[1]|=ye,K&=~ye}Hl(N),(nr&6)===0&&(rp=gt()+500,s1(0))}}break;case 13:ue=Fs(N,2),ue!==null&&Wo(ue,N,2),ap(),V2(N,2)}if(N=q2(v),N===null&&R2(l,c,v,_p,d),N===b)break;b=N}b!==null&&v.stopPropagation()}else R2(l,c,v,null,d)}}function q2(l){return l=er(l),H2(l)}var _p=null;function H2(l){if(_p=null,l=ti(l),l!==null){var c=a(l);if(c===null)l=null;else{var d=c.tag;if(d===13){if(l=o(c),l!==null)return l;l=null}else if(d===3){if(c.stateNode.current.memoizedState.isDehydrated)return c.tag===3?c.stateNode.containerInfo:null;l=null}else c!==l&&(l=null)}}return _p=l,null}function fw(l){switch(l){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(lt()){case Xe:return 2;case it:return 8;case at:case ot:return 32;case ct:return 268435456;default:return 32}default:return 32}}var W2=!1,Mc=null,Bc=null,jc=null,g1=new Map,m1=new Map,Fc=[],$C="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function hw(l,c){switch(l){case"focusin":case"focusout":Mc=null;break;case"dragenter":case"dragleave":Bc=null;break;case"mouseover":case"mouseout":jc=null;break;case"pointerover":case"pointerout":g1.delete(c.pointerId);break;case"gotpointercapture":case"lostpointercapture":m1.delete(c.pointerId)}}function v1(l,c,d,v,b,N){return l===null||l.nativeEvent!==N?(l={blockedOn:c,domEventName:d,eventSystemFlags:v,nativeEvent:N,targetContainers:[b]},c!==null&&(c=$r(c),c!==null&&cw(c)),l):(l.eventSystemFlags|=v,c=l.targetContainers,b!==null&&c.indexOf(b)===-1&&c.push(b),l)}function XC(l,c,d,v,b){switch(c){case"focusin":return Mc=v1(Mc,l,c,d,v,b),!0;case"dragenter":return Bc=v1(Bc,l,c,d,v,b),!0;case"mouseover":return jc=v1(jc,l,c,d,v,b),!0;case"pointerover":var N=b.pointerId;return g1.set(N,v1(g1.get(N)||null,l,c,d,v,b)),!0;case"gotpointercapture":return N=b.pointerId,m1.set(N,v1(m1.get(N)||null,l,c,d,v,b)),!0}return!1}function dw(l){var c=ti(l.target);if(c!==null){var d=a(c);if(d!==null){if(c=d.tag,c===13){if(c=o(d),c!==null){l.blockedOn=c,Ua(l.priority,function(){if(d.tag===13){var v=Ho();v=Si(v);var b=Fs(d,v);b!==null&&Wo(b,d,v),V2(d,v)}});return}}else if(c===3&&d.stateNode.current.memoizedState.isDehydrated){l.blockedOn=d.tag===3?d.stateNode.containerInfo:null;return}}}l.blockedOn=null}function wp(l){if(l.blockedOn!==null)return!1;for(var c=l.targetContainers;0<c.length;){var d=q2(l.nativeEvent);if(d===null){d=l.nativeEvent;var v=new d.constructor(d.type,d);eo=v,d.target.dispatchEvent(v),eo=null}else return c=$r(d),c!==null&&cw(c),l.blockedOn=d,!1;c.shift()}return!0}function pw(l,c,d){wp(l)&&d.delete(c)}function YC(){W2=!1,Mc!==null&&wp(Mc)&&(Mc=null),Bc!==null&&wp(Bc)&&(Bc=null),jc!==null&&wp(jc)&&(jc=null),g1.forEach(pw),m1.forEach(pw)}function bp(l,c){l.blockedOn===c&&(l.blockedOn=null,W2||(W2=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,YC)))}var Ap=null;function gw(l){Ap!==l&&(Ap=l,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Ap===l&&(Ap=null);for(var c=0;c<l.length;c+=3){var d=l[c],v=l[c+1],b=l[c+2];if(typeof v!="function"){if(H2(v||d)===null)continue;break}var N=$r(d);N!==null&&(l.splice(c,3),c-=3,vs(N,{pending:!0,data:b,method:d.method,action:v},v,b))}}))}function y1(l){function c(ye){return bp(ye,l)}Mc!==null&&bp(Mc,l),Bc!==null&&bp(Bc,l),jc!==null&&bp(jc,l),g1.forEach(c),m1.forEach(c);for(var d=0;d<Fc.length;d++){var v=Fc[d];v.blockedOn===l&&(v.blockedOn=null)}for(;0<Fc.length&&(d=Fc[0],d.blockedOn===null);)dw(d),d.blockedOn===null&&Fc.shift();if(d=(l.ownerDocument||l).$$reactFormReplay,d!=null)for(v=0;v<d.length;v+=3){var b=d[v],N=d[v+1],K=b[Gn]||null;if(typeof N=="function")K||gw(d);else if(K){var ue=null;if(N&&N.hasAttribute("formAction")){if(b=N,K=N[Gn]||null)ue=K.formAction;else if(H2(b)!==null)continue}else ue=K.action;typeof ue=="function"?d[v+1]=ue:(d.splice(v,3),v-=3),gw(d)}}}function G2(l){this._internalRoot=l}Ep.prototype.render=G2.prototype.render=function(l){var c=this._internalRoot;if(c===null)throw Error(r(409));var d=c.current,v=Ho();lw(d,v,l,c,null,null)},Ep.prototype.unmount=G2.prototype.unmount=function(){var l=this._internalRoot;if(l!==null){this._internalRoot=null;var c=l.containerInfo;lw(l.current,2,null,l,null,null),ap(),c[gr]=null}};function Ep(l){this._internalRoot=l}Ep.prototype.unstable_scheduleHydration=function(l){if(l){var c=pr();l={blockedOn:null,target:l,priority:c};for(var d=0;d<Fc.length&&c!==0&&c<Fc[d].priority;d++);Fc.splice(d,0,l),d===0&&dw(l)}};var mw=e.version;if(mw!=="19.1.0")throw Error(r(527,mw,"19.1.0"));z.findDOMNode=function(l){var c=l._reactInternals;if(c===void 0)throw typeof l.render=="function"?Error(r(188)):(l=Object.keys(l).join(","),Error(r(268,l)));return l=u(c),l=l!==null?f(l):null,l=l===null?null:l.stateNode,l};var KC={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:U,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Sp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Sp.isDisabled&&Sp.supportsFiber)try{_t=Sp.inject(KC),bt=Sp}catch{}}return _1.createRoot=function(l,c){if(!i(l))throw Error(r(299));var d=!1,v="",b=Ox,N=Px,K=Lx,ue=null;return c!=null&&(c.unstable_strictMode===!0&&(d=!0),c.identifierPrefix!==void 0&&(v=c.identifierPrefix),c.onUncaughtError!==void 0&&(b=c.onUncaughtError),c.onCaughtError!==void 0&&(N=c.onCaughtError),c.onRecoverableError!==void 0&&(K=c.onRecoverableError),c.unstable_transitionCallbacks!==void 0&&(ue=c.unstable_transitionCallbacks)),c=ow(l,1,!1,null,null,d,v,b,N,K,ue,null),l[gr]=c.current,I2(l),new G2(c)},_1.hydrateRoot=function(l,c,d){if(!i(l))throw Error(r(299));var v=!1,b="",N=Ox,K=Px,ue=Lx,ye=null,ke=null;return d!=null&&(d.unstable_strictMode===!0&&(v=!0),d.identifierPrefix!==void 0&&(b=d.identifierPrefix),d.onUncaughtError!==void 0&&(N=d.onUncaughtError),d.onCaughtError!==void 0&&(K=d.onCaughtError),d.onRecoverableError!==void 0&&(ue=d.onRecoverableError),d.unstable_transitionCallbacks!==void 0&&(ye=d.unstable_transitionCallbacks),d.formState!==void 0&&(ke=d.formState)),c=ow(l,1,!0,c,d??null,v,b,N,K,ue,ye,ke),c.context=sw(null),d=c.current,v=Ho(),v=Si(v),b=qe(v),b.callback=null,Qe(d,b,v),d=v,c.current.lanes=d,sr(c,d),Hl(c),l[gr]=c.current,I2(l),new Ep(c)},_1.version="19.1.0",_1}var Cw;function $4(){if(Cw)return Y2.exports;Cw=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Y2.exports=aT(),Y2.exports}var oT=$4();const sT=G4(oT);var w1={},Tw;function lT(){if(Tw)return w1;Tw=1,Object.defineProperty(w1,"__esModule",{value:!0}),w1.parse=o,w1.serialize=f;const n=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,t=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,r=/^[\u0020-\u003A\u003D-\u007E]*$/,i=Object.prototype.toString,a=(()=>{const g=function(){};return g.prototype=Object.create(null),g})();function o(g,m){const x=new a,w=g.length;if(w<2)return x;const I=(m==null?void 0:m.decode)||h;let C=0;do{const P=g.indexOf("=",C);if(P===-1)break;const B=g.indexOf(";",C),V=B===-1?w:B;if(P>V){C=g.lastIndexOf(";",P-1)+1;continue}const Y=s(g,C,P),q=u(g,P,Y),D=g.slice(Y,q);if(x[D]===void 0){let A=s(g,P+1,V),T=u(g,V,A);const k=I(g.slice(A,T));x[D]=k}C=V+1}while(C<w);return x}function s(g,m,x){do{const w=g.charCodeAt(m);if(w!==32&&w!==9)return m}while(++m<x);return x}function u(g,m,x){for(;m>x;){const w=g.charCodeAt(--m);if(w!==32&&w!==9)return m+1}return x}function f(g,m,x){const w=(x==null?void 0:x.encode)||encodeURIComponent;if(!n.test(g))throw new TypeError(`argument name is invalid: ${g}`);const I=w(m);if(!e.test(I))throw new TypeError(`argument val is invalid: ${m}`);let C=g+"="+I;if(!x)return C;if(x.maxAge!==void 0){if(!Number.isInteger(x.maxAge))throw new TypeError(`option maxAge is invalid: ${x.maxAge}`);C+="; Max-Age="+x.maxAge}if(x.domain){if(!t.test(x.domain))throw new TypeError(`option domain is invalid: ${x.domain}`);C+="; Domain="+x.domain}if(x.path){if(!r.test(x.path))throw new TypeError(`option path is invalid: ${x.path}`);C+="; Path="+x.path}if(x.expires){if(!p(x.expires)||!Number.isFinite(x.expires.valueOf()))throw new TypeError(`option expires is invalid: ${x.expires}`);C+="; Expires="+x.expires.toUTCString()}if(x.httpOnly&&(C+="; HttpOnly"),x.secure&&(C+="; Secure"),x.partitioned&&(C+="; Partitioned"),x.priority)switch(typeof x.priority=="string"?x.priority.toLowerCase():void 0){case"low":C+="; Priority=Low";break;case"medium":C+="; Priority=Medium";break;case"high":C+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${x.priority}`)}if(x.sameSite)switch(typeof x.sameSite=="string"?x.sameSite.toLowerCase():x.sameSite){case!0:case"strict":C+="; SameSite=Strict";break;case"lax":C+="; SameSite=Lax";break;case"none":C+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${x.sameSite}`)}return C}function h(g){if(g.indexOf("%")===-1)return g;try{return decodeURIComponent(g)}catch{return g}}function p(g){return i.call(g)==="[object Date]"}return w1}lT();var Iw="popstate";function uT(n={}){function e(r,i){let{pathname:a,search:o,hash:s}=r.location;return qv("",{pathname:a,search:o,hash:s},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function t(r,i){return typeof i=="string"?i:Y1(i)}return fT(e,t,null,n)}function zr(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function tu(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function cT(){return Math.random().toString(36).substring(2,10)}function Rw(n,e){return{usr:n.state,key:n.key,idx:e}}function qv(n,e,t=null,r){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?Cd(e):e,state:t,key:e&&e.key||r||cT()}}function Y1({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function Cd(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substring(r),n=n.substring(0,r)),n&&(e.pathname=n)}return e}function fT(n,e,t,r={}){let{window:i=document.defaultView,v5Compat:a=!1}=r,o=i.history,s="POP",u=null,f=h();f==null&&(f=0,o.replaceState({...o.state,idx:f},""));function h(){return(o.state||{idx:null}).idx}function p(){s="POP";let I=h(),C=I==null?null:I-f;f=I,u&&u({action:s,location:w.location,delta:C})}function g(I,C){s="PUSH";let P=qv(w.location,I,C);f=h()+1;let B=Rw(P,f),V=w.createHref(P);try{o.pushState(B,"",V)}catch(Y){if(Y instanceof DOMException&&Y.name==="DataCloneError")throw Y;i.location.assign(V)}a&&u&&u({action:s,location:w.location,delta:1})}function m(I,C){s="REPLACE";let P=qv(w.location,I,C);f=h();let B=Rw(P,f),V=w.createHref(P);o.replaceState(B,"",V),a&&u&&u({action:s,location:w.location,delta:0})}function x(I){return hT(I)}let w={get action(){return s},get location(){return n(i,o)},listen(I){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(Iw,p),u=I,()=>{i.removeEventListener(Iw,p),u=null}},createHref(I){return e(i,I)},createURL:x,encodeLocation(I){let C=x(I);return{pathname:C.pathname,search:C.search,hash:C.hash}},push:g,replace:m,go(I){return o.go(I)}};return w}function hT(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),zr(t,"No window.location.(origin|href) available to create URL");let r=typeof n=="string"?n:Y1(n);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=t+r),new URL(r,t)}function X4(n,e,t="/"){return dT(n,e,t,!1)}function dT(n,e,t,r){let i=typeof e=="string"?Cd(e):e,a=$u(i.pathname||"/",t);if(a==null)return null;let o=Y4(n);pT(o);let s=null;for(let u=0;s==null&&u<o.length;++u){let f=ST(a);s=AT(o[u],f,r)}return s}function Y4(n,e=[],t=[],r=""){let i=(a,o,s)=>{let u={relativePath:s===void 0?a.path||"":s,caseSensitive:a.caseSensitive===!0,childrenIndex:o,route:a};u.relativePath.startsWith("/")&&(zr(u.relativePath.startsWith(r),`Absolute route path "${u.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),u.relativePath=u.relativePath.slice(r.length));let f=qu([r,u.relativePath]),h=t.concat(u);a.children&&a.children.length>0&&(zr(a.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${f}".`),Y4(a.children,e,h,f)),!(a.path==null&&!a.index)&&e.push({path:f,score:wT(f,a.index),routesMeta:h})};return n.forEach((a,o)=>{var s;if(a.path===""||!((s=a.path)!=null&&s.includes("?")))i(a,o);else for(let u of K4(a.path))i(a,o,u)}),e}function K4(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,i=t.endsWith("?"),a=t.replace(/\?$/,"");if(r.length===0)return i?[a,""]:[a];let o=K4(r.join("/")),s=[];return s.push(...o.map(u=>u===""?a:[a,u].join("/"))),i&&s.push(...o),s.map(u=>n.startsWith("/")&&u===""?"/":u)}function pT(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:bT(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}var gT=/^:[\w-]+$/,mT=3,vT=2,yT=1,xT=10,_T=-2,Nw=n=>n==="*";function wT(n,e){let t=n.split("/"),r=t.length;return t.some(Nw)&&(r+=_T),e&&(r+=vT),t.filter(i=>!Nw(i)).reduce((i,a)=>i+(gT.test(a)?mT:a===""?yT:xT),r)}function bT(n,e){return n.length===e.length&&n.slice(0,-1).every((r,i)=>r===e[i])?n[n.length-1]-e[e.length-1]:0}function AT(n,e,t=!1){let{routesMeta:r}=n,i={},a="/",o=[];for(let s=0;s<r.length;++s){let u=r[s],f=s===r.length-1,h=a==="/"?e:e.slice(a.length)||"/",p=ug({path:u.relativePath,caseSensitive:u.caseSensitive,end:f},h),g=u.route;if(!p&&f&&t&&!r[r.length-1].route.index&&(p=ug({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},h)),!p)return null;Object.assign(i,p.params),o.push({params:i,pathname:qu([a,p.pathname]),pathnameBase:RT(qu([a,p.pathnameBase])),route:g}),p.pathnameBase!=="/"&&(a=qu([a,p.pathnameBase]))}return o}function ug(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=ET(n.path,n.caseSensitive,n.end),i=e.match(t);if(!i)return null;let a=i[0],o=a.replace(/(.)\/+$/,"$1"),s=i.slice(1);return{params:r.reduce((f,{paramName:h,isOptional:p},g)=>{if(h==="*"){let x=s[g]||"";o=a.slice(0,a.length-x.length).replace(/(.)\/+$/,"$1")}const m=s[g];return p&&!m?f[h]=void 0:f[h]=(m||"").replace(/%2F/g,"/"),f},{}),pathname:a,pathnameBase:o,pattern:n}}function ET(n,e=!1,t=!0){tu(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let r=[],i="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,s,u)=>(r.push({paramName:s,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),i+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":n!==""&&n!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function ST(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return tu(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function $u(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}function CT(n,e="/"){let{pathname:t,search:r="",hash:i=""}=typeof n=="string"?Cd(n):n;return{pathname:t?t.startsWith("/")?t:TT(t,e):e,search:NT(r),hash:DT(i)}}function TT(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(i=>{i===".."?t.length>1&&t.pop():i!=="."&&t.push(i)}),t.length>1?t.join("/"):"/"}function J2(n,e,t,r){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function IT(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function Q4(n){let e=IT(n);return e.map((t,r)=>r===e.length-1?t.pathname:t.pathnameBase)}function Z4(n,e,t,r=!1){let i;typeof n=="string"?i=Cd(n):(i={...n},zr(!i.pathname||!i.pathname.includes("?"),J2("?","pathname","search",i)),zr(!i.pathname||!i.pathname.includes("#"),J2("#","pathname","hash",i)),zr(!i.search||!i.search.includes("#"),J2("#","search","hash",i)));let a=n===""||i.pathname==="",o=a?"/":i.pathname,s;if(o==null)s=t;else{let p=e.length-1;if(!r&&o.startsWith("..")){let g=o.split("/");for(;g[0]==="..";)g.shift(),p-=1;i.pathname=g.join("/")}s=p>=0?e[p]:"/"}let u=CT(i,s),f=o&&o!=="/"&&o.endsWith("/"),h=(a||o===".")&&t.endsWith("/");return!u.pathname.endsWith("/")&&(f||h)&&(u.pathname+="/"),u}var qu=n=>n.join("/").replace(/\/\/+/g,"/"),RT=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),NT=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,DT=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function OT(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}var J4=["POST","PUT","PATCH","DELETE"];new Set(J4);var PT=["GET",...J4];new Set(PT);var Td=ge.createContext(null);Td.displayName="DataRouter";var Yg=ge.createContext(null);Yg.displayName="DataRouterState";var eA=ge.createContext({isTransitioning:!1});eA.displayName="ViewTransition";var LT=ge.createContext(new Map);LT.displayName="Fetchers";var kT=ge.createContext(null);kT.displayName="Await";var au=ge.createContext(null);au.displayName="Navigation";var c0=ge.createContext(null);c0.displayName="Location";var nc=ge.createContext({outlet:null,matches:[],isDataRoute:!1});nc.displayName="Route";var Qy=ge.createContext(null);Qy.displayName="RouteError";function MT(n,{relative:e}={}){zr(f0(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:r}=ge.useContext(au),{hash:i,pathname:a,search:o}=h0(n,{relative:e}),s=a;return t!=="/"&&(s=a==="/"?t:qu([t,a])),r.createHref({pathname:s,search:o,hash:i})}function f0(){return ge.useContext(c0)!=null}function ch(){return zr(f0(),"useLocation() may be used only in the context of a <Router> component."),ge.useContext(c0).location}var tA="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function nA(n){ge.useContext(au).static||ge.useLayoutEffect(n)}function Zy(){let{isDataRoute:n}=ge.useContext(nc);return n?YT():BT()}function BT(){zr(f0(),"useNavigate() may be used only in the context of a <Router> component.");let n=ge.useContext(Td),{basename:e,navigator:t}=ge.useContext(au),{matches:r}=ge.useContext(nc),{pathname:i}=ch(),a=JSON.stringify(Q4(r)),o=ge.useRef(!1);return nA(()=>{o.current=!0}),ge.useCallback((u,f={})=>{if(tu(o.current,tA),!o.current)return;if(typeof u=="number"){t.go(u);return}let h=Z4(u,JSON.parse(a),i,f.relative==="path");n==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:qu([e,h.pathname])),(f.replace?t.replace:t.push)(h,f.state,f)},[e,t,a,i,n])}ge.createContext(null);function h0(n,{relative:e}={}){let{matches:t}=ge.useContext(nc),{pathname:r}=ch(),i=JSON.stringify(Q4(t));return ge.useMemo(()=>Z4(n,JSON.parse(i),r,e==="path"),[n,i,r,e])}function jT(n,e){return rA(n,e)}function rA(n,e,t,r){var C;zr(f0(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=ge.useContext(au),{matches:a}=ge.useContext(nc),o=a[a.length-1],s=o?o.params:{},u=o?o.pathname:"/",f=o?o.pathnameBase:"/",h=o&&o.route;{let P=h&&h.path||"";iA(u,!h||P.endsWith("*")||P.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${u}" (under <Route path="${P}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${P}"> to <Route path="${P==="/"?"*":`${P}/*`}">.`)}let p=ch(),g;if(e){let P=typeof e=="string"?Cd(e):e;zr(f==="/"||((C=P.pathname)==null?void 0:C.startsWith(f)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${f}" but pathname "${P.pathname}" was given in the \`location\` prop.`),g=P}else g=p;let m=g.pathname||"/",x=m;if(f!=="/"){let P=f.replace(/^\//,"").split("/");x="/"+m.replace(/^\//,"").split("/").slice(P.length).join("/")}let w=X4(n,{pathname:x});tu(h||w!=null,`No routes matched location "${g.pathname}${g.search}${g.hash}" `),tu(w==null||w[w.length-1].route.element!==void 0||w[w.length-1].route.Component!==void 0||w[w.length-1].route.lazy!==void 0,`Matched leaf route at location "${g.pathname}${g.search}${g.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let I=qT(w&&w.map(P=>Object.assign({},P,{params:Object.assign({},s,P.params),pathname:qu([f,i.encodeLocation?i.encodeLocation(P.pathname).pathname:P.pathname]),pathnameBase:P.pathnameBase==="/"?f:qu([f,i.encodeLocation?i.encodeLocation(P.pathnameBase).pathname:P.pathnameBase])})),a,t,r);return e&&I?ge.createElement(c0.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...g},navigationType:"POP"}},I):I}function FT(){let n=XT(),e=OT(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},a={padding:"2px 4px",backgroundColor:r},o=null;return console.error("Error handled by React Router default ErrorBoundary:",n),o=ge.createElement(ge.Fragment,null,ge.createElement("p",null,"💿 Hey developer 👋"),ge.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",ge.createElement("code",{style:a},"ErrorBoundary")," or"," ",ge.createElement("code",{style:a},"errorElement")," prop on your route.")),ge.createElement(ge.Fragment,null,ge.createElement("h2",null,"Unexpected Application Error!"),ge.createElement("h3",{style:{fontStyle:"italic"}},e),t?ge.createElement("pre",{style:i},t):null,o)}var UT=ge.createElement(FT,null),VT=class extends ge.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){console.error("React Router caught the following error during render",n,e)}render(){return this.state.error!==void 0?ge.createElement(nc.Provider,{value:this.props.routeContext},ge.createElement(Qy.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function zT({routeContext:n,match:e,children:t}){let r=ge.useContext(Td);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),ge.createElement(nc.Provider,{value:n},t)}function qT(n,e=[],t=null,r=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let i=n,a=t==null?void 0:t.errors;if(a!=null){let u=i.findIndex(f=>f.route.id&&(a==null?void 0:a[f.route.id])!==void 0);zr(u>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),i=i.slice(0,Math.min(i.length,u+1))}let o=!1,s=-1;if(t)for(let u=0;u<i.length;u++){let f=i[u];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(s=u),f.route.id){let{loaderData:h,errors:p}=t,g=f.route.loader&&!h.hasOwnProperty(f.route.id)&&(!p||p[f.route.id]===void 0);if(f.route.lazy||g){o=!0,s>=0?i=i.slice(0,s+1):i=[i[0]];break}}}return i.reduceRight((u,f,h)=>{let p,g=!1,m=null,x=null;t&&(p=a&&f.route.id?a[f.route.id]:void 0,m=f.route.errorElement||UT,o&&(s<0&&h===0?(iA("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),g=!0,x=null):s===h&&(g=!0,x=f.route.hydrateFallbackElement||null)));let w=e.concat(i.slice(0,h+1)),I=()=>{let C;return p?C=m:g?C=x:f.route.Component?C=ge.createElement(f.route.Component,null):f.route.element?C=f.route.element:C=u,ge.createElement(zT,{match:f,routeContext:{outlet:u,matches:w,isDataRoute:t!=null},children:C})};return t&&(f.route.ErrorBoundary||f.route.errorElement||h===0)?ge.createElement(VT,{location:t.location,revalidation:t.revalidation,component:m,error:p,children:I(),routeContext:{outlet:null,matches:w,isDataRoute:!0}}):I()},null)}function Jy(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function HT(n){let e=ge.useContext(Td);return zr(e,Jy(n)),e}function WT(n){let e=ge.useContext(Yg);return zr(e,Jy(n)),e}function GT(n){let e=ge.useContext(nc);return zr(e,Jy(n)),e}function e5(n){let e=GT(n),t=e.matches[e.matches.length-1];return zr(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function $T(){return e5("useRouteId")}function XT(){var r;let n=ge.useContext(Qy),e=WT("useRouteError"),t=e5("useRouteError");return n!==void 0?n:(r=e.errors)==null?void 0:r[t]}function YT(){let{router:n}=HT("useNavigate"),e=e5("useNavigate"),t=ge.useRef(!1);return nA(()=>{t.current=!0}),ge.useCallback(async(i,a={})=>{tu(t.current,tA),t.current&&(typeof i=="number"?n.navigate(i):await n.navigate(i,{fromRouteId:e,...a}))},[n,e])}var Dw={};function iA(n,e,t){!e&&!Dw[n]&&(Dw[n]=!0,tu(!1,t))}ge.memo(KT);function KT({routes:n,future:e,state:t}){return rA(n,void 0,t,e)}function Go(n){zr(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function QT({basename:n="/",children:e=null,location:t,navigationType:r="POP",navigator:i,static:a=!1}){zr(!f0(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=n.replace(/^\/*/,"/"),s=ge.useMemo(()=>({basename:o,navigator:i,static:a,future:{}}),[o,i,a]);typeof t=="string"&&(t=Cd(t));let{pathname:u="/",search:f="",hash:h="",state:p=null,key:g="default"}=t,m=ge.useMemo(()=>{let x=$u(u,o);return x==null?null:{location:{pathname:x,search:f,hash:h,state:p,key:g},navigationType:r}},[o,u,f,h,p,g,r]);return tu(m!=null,`<Router basename="${o}"> is not able to match the URL "${u}${f}${h}" because it does not start with the basename, so the <Router> won't render anything.`),m==null?null:ge.createElement(au.Provider,{value:s},ge.createElement(c0.Provider,{children:e,value:m}))}function ZT({children:n,location:e}){return jT(Hv(n),e)}function Hv(n,e=[]){let t=[];return ge.Children.forEach(n,(r,i)=>{if(!ge.isValidElement(r))return;let a=[...e,i];if(r.type===ge.Fragment){t.push.apply(t,Hv(r.props.children,a));return}zr(r.type===Go,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),zr(!r.props.index||!r.props.children,"An index route cannot have child routes.");let o={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Hv(r.props.children,a)),t.push(o)}),t}var qp="get",Hp="application/x-www-form-urlencoded";function Kg(n){return n!=null&&typeof n.tagName=="string"}function JT(n){return Kg(n)&&n.tagName.toLowerCase()==="button"}function eI(n){return Kg(n)&&n.tagName.toLowerCase()==="form"}function tI(n){return Kg(n)&&n.tagName.toLowerCase()==="input"}function nI(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function rI(n,e){return n.button===0&&(!e||e==="_self")&&!nI(n)}var Cp=null;function iI(){if(Cp===null)try{new FormData(document.createElement("form"),0),Cp=!1}catch{Cp=!0}return Cp}var aI=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function ev(n){return n!=null&&!aI.has(n)?(tu(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Hp}"`),null):n}function oI(n,e){let t,r,i,a,o;if(eI(n)){let s=n.getAttribute("action");r=s?$u(s,e):null,t=n.getAttribute("method")||qp,i=ev(n.getAttribute("enctype"))||Hp,a=new FormData(n)}else if(JT(n)||tI(n)&&(n.type==="submit"||n.type==="image")){let s=n.form;if(s==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let u=n.getAttribute("formaction")||s.getAttribute("action");if(r=u?$u(u,e):null,t=n.getAttribute("formmethod")||s.getAttribute("method")||qp,i=ev(n.getAttribute("formenctype"))||ev(s.getAttribute("enctype"))||Hp,a=new FormData(s,n),!iI()){let{name:f,type:h,value:p}=n;if(h==="image"){let g=f?`${f}.`:"";a.append(`${g}x`,"0"),a.append(`${g}y`,"0")}else f&&a.append(f,p)}}else{if(Kg(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=qp,r=null,i=Hp,o=n}return a&&i==="text/plain"&&(o=a,a=void 0),{action:r,method:t.toLowerCase(),encType:i,formData:a,body:o}}function t5(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}async function sI(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function lI(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function uI(n,e,t){let r=await Promise.all(n.map(async i=>{let a=e.routes[i.route.id];if(a){let o=await sI(a,t);return o.links?o.links():[]}return[]}));return dI(r.flat(1).filter(lI).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function Ow(n,e,t,r,i,a){let o=(u,f)=>t[f]?u.route.id!==t[f].route.id:!0,s=(u,f)=>{var h;return t[f].pathname!==u.pathname||((h=t[f].route.path)==null?void 0:h.endsWith("*"))&&t[f].params["*"]!==u.params["*"]};return a==="assets"?e.filter((u,f)=>o(u,f)||s(u,f)):a==="data"?e.filter((u,f)=>{var p;let h=r.routes[u.route.id];if(!h||!h.hasLoader)return!1;if(o(u,f)||s(u,f))return!0;if(u.route.shouldRevalidate){let g=u.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((p=t[0])==null?void 0:p.params)||{},nextUrl:new URL(n,window.origin),nextParams:u.params,defaultShouldRevalidate:!0});if(typeof g=="boolean")return g}return!0}):[]}function cI(n,e,{includeHydrateFallback:t}={}){return fI(n.map(r=>{let i=e.routes[r.route.id];if(!i)return[];let a=[i.module];return i.clientActionModule&&(a=a.concat(i.clientActionModule)),i.clientLoaderModule&&(a=a.concat(i.clientLoaderModule)),t&&i.hydrateFallbackModule&&(a=a.concat(i.hydrateFallbackModule)),i.imports&&(a=a.concat(i.imports)),a}).flat(1))}function fI(n){return[...new Set(n)]}function hI(n){let e={},t=Object.keys(n).sort();for(let r of t)e[r]=n[r];return e}function dI(n,e){let t=new Set;return new Set(e),n.reduce((r,i)=>{let a=JSON.stringify(hI(i));return t.has(a)||(t.add(a),r.push({key:a,link:i})),r},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var pI=new Set([100,101,204,205]);function gI(n,e){let t=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return t.pathname==="/"?t.pathname="_root.data":e&&$u(t.pathname,e)==="/"?t.pathname=`${e.replace(/\/$/,"")}/_root.data`:t.pathname=`${t.pathname.replace(/\/$/,"")}.data`,t}function aA(){let n=ge.useContext(Td);return t5(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function mI(){let n=ge.useContext(Yg);return t5(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var n5=ge.createContext(void 0);n5.displayName="FrameworkContext";function oA(){let n=ge.useContext(n5);return t5(n,"You must render this element inside a <HydratedRouter> element"),n}function vI(n,e){let t=ge.useContext(n5),[r,i]=ge.useState(!1),[a,o]=ge.useState(!1),{onFocus:s,onBlur:u,onMouseEnter:f,onMouseLeave:h,onTouchStart:p}=e,g=ge.useRef(null);ge.useEffect(()=>{if(n==="render"&&o(!0),n==="viewport"){let w=C=>{C.forEach(P=>{o(P.isIntersecting)})},I=new IntersectionObserver(w,{threshold:.5});return g.current&&I.observe(g.current),()=>{I.disconnect()}}},[n]),ge.useEffect(()=>{if(r){let w=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(w)}}},[r]);let m=()=>{i(!0)},x=()=>{i(!1),o(!1)};return t?n!=="intent"?[a,g,{}]:[a,g,{onFocus:b1(s,m),onBlur:b1(u,x),onMouseEnter:b1(f,m),onMouseLeave:b1(h,x),onTouchStart:b1(p,m)}]:[!1,g,{}]}function b1(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function yI({page:n,...e}){let{router:t}=aA(),r=ge.useMemo(()=>X4(t.routes,n,t.basename),[t.routes,n,t.basename]);return r?ge.createElement(_I,{page:n,matches:r,...e}):null}function xI(n){let{manifest:e,routeModules:t}=oA(),[r,i]=ge.useState([]);return ge.useEffect(()=>{let a=!1;return uI(n,e,t).then(o=>{a||i(o)}),()=>{a=!0}},[n,e,t]),r}function _I({page:n,matches:e,...t}){let r=ch(),{manifest:i,routeModules:a}=oA(),{basename:o}=aA(),{loaderData:s,matches:u}=mI(),f=ge.useMemo(()=>Ow(n,e,u,i,r,"data"),[n,e,u,i,r]),h=ge.useMemo(()=>Ow(n,e,u,i,r,"assets"),[n,e,u,i,r]),p=ge.useMemo(()=>{if(n===r.pathname+r.search+r.hash)return[];let x=new Set,w=!1;if(e.forEach(C=>{var B;let P=i.routes[C.route.id];!P||!P.hasLoader||(!f.some(V=>V.route.id===C.route.id)&&C.route.id in s&&((B=a[C.route.id])!=null&&B.shouldRevalidate)||P.hasClientLoader?w=!0:x.add(C.route.id))}),x.size===0)return[];let I=gI(n,o);return w&&x.size>0&&I.searchParams.set("_routes",e.filter(C=>x.has(C.route.id)).map(C=>C.route.id).join(",")),[I.pathname+I.search]},[o,s,r,i,f,e,n,a]),g=ge.useMemo(()=>cI(h,i),[h,i]),m=xI(h);return ge.createElement(ge.Fragment,null,p.map(x=>ge.createElement("link",{key:x,rel:"prefetch",as:"fetch",href:x,...t})),g.map(x=>ge.createElement("link",{key:x,rel:"modulepreload",href:x,...t})),m.map(({key:x,link:w})=>ge.createElement("link",{key:x,...w})))}function wI(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var sA=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{sA&&(window.__reactRouterVersion="7.6.2")}catch{}function bI({basename:n,children:e,window:t}){let r=ge.useRef();r.current==null&&(r.current=uT({window:t,v5Compat:!0}));let i=r.current,[a,o]=ge.useState({action:i.action,location:i.location}),s=ge.useCallback(u=>{ge.startTransition(()=>o(u))},[o]);return ge.useLayoutEffect(()=>i.listen(s),[i,s]),ge.createElement(QT,{basename:n,children:e,location:a.location,navigationType:a.action,navigator:i})}var lA=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,wr=ge.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:i,reloadDocument:a,replace:o,state:s,target:u,to:f,preventScrollReset:h,viewTransition:p,...g},m){let{basename:x}=ge.useContext(au),w=typeof f=="string"&&lA.test(f),I,C=!1;if(typeof f=="string"&&w&&(I=f,sA))try{let T=new URL(window.location.href),k=f.startsWith("//")?new URL(T.protocol+f):new URL(f),R=$u(k.pathname,x);k.origin===T.origin&&R!=null?f=R+k.search+k.hash:C=!0}catch{tu(!1,`<Link to="${f}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let P=MT(f,{relative:i}),[B,V,Y]=vI(r,g),q=CI(f,{replace:o,state:s,target:u,preventScrollReset:h,relative:i,viewTransition:p});function D(T){e&&e(T),T.defaultPrevented||q(T)}let A=ge.createElement("a",{...g,...Y,href:I||P,onClick:C||a?e:D,ref:wI(m,V),target:u,"data-discover":!w&&t==="render"?"true":void 0});return B&&!w?ge.createElement(ge.Fragment,null,A,ge.createElement(yI,{page:P})):A});wr.displayName="Link";var AI=ge.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:i=!1,style:a,to:o,viewTransition:s,children:u,...f},h){let p=h0(o,{relative:f.relative}),g=ch(),m=ge.useContext(Yg),{navigator:x,basename:w}=ge.useContext(au),I=m!=null&&DI(p)&&s===!0,C=x.encodeLocation?x.encodeLocation(p).pathname:p.pathname,P=g.pathname,B=m&&m.navigation&&m.navigation.location?m.navigation.location.pathname:null;t||(P=P.toLowerCase(),B=B?B.toLowerCase():null,C=C.toLowerCase()),B&&w&&(B=$u(B,w)||B);const V=C!=="/"&&C.endsWith("/")?C.length-1:C.length;let Y=P===C||!i&&P.startsWith(C)&&P.charAt(V)==="/",q=B!=null&&(B===C||!i&&B.startsWith(C)&&B.charAt(C.length)==="/"),D={isActive:Y,isPending:q,isTransitioning:I},A=Y?e:void 0,T;typeof r=="function"?T=r(D):T=[r,Y?"active":null,q?"pending":null,I?"transitioning":null].filter(Boolean).join(" ");let k=typeof a=="function"?a(D):a;return ge.createElement(wr,{...f,"aria-current":A,className:T,ref:h,style:k,to:o,viewTransition:s},typeof u=="function"?u(D):u)});AI.displayName="NavLink";var EI=ge.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:r,replace:i,state:a,method:o=qp,action:s,onSubmit:u,relative:f,preventScrollReset:h,viewTransition:p,...g},m)=>{let x=RI(),w=NI(s,{relative:f}),I=o.toLowerCase()==="get"?"get":"post",C=typeof s=="string"&&lA.test(s),P=B=>{if(u&&u(B),B.defaultPrevented)return;B.preventDefault();let V=B.nativeEvent.submitter,Y=(V==null?void 0:V.getAttribute("formmethod"))||o;x(V||B.currentTarget,{fetcherKey:e,method:Y,navigate:t,replace:i,state:a,relative:f,preventScrollReset:h,viewTransition:p})};return ge.createElement("form",{ref:m,method:I,action:w,onSubmit:r?u:P,...g,"data-discover":!C&&n==="render"?"true":void 0})});EI.displayName="Form";function SI(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function uA(n){let e=ge.useContext(Td);return zr(e,SI(n)),e}function CI(n,{target:e,replace:t,state:r,preventScrollReset:i,relative:a,viewTransition:o}={}){let s=Zy(),u=ch(),f=h0(n,{relative:a});return ge.useCallback(h=>{if(rI(h,e)){h.preventDefault();let p=t!==void 0?t:Y1(u)===Y1(f);s(n,{replace:p,state:r,preventScrollReset:i,relative:a,viewTransition:o})}},[u,s,f,t,r,e,n,i,a,o])}var TI=0,II=()=>`__${String(++TI)}__`;function RI(){let{router:n}=uA("useSubmit"),{basename:e}=ge.useContext(au),t=$T();return ge.useCallback(async(r,i={})=>{let{action:a,method:o,encType:s,formData:u,body:f}=oI(r,e);if(i.navigate===!1){let h=i.fetcherKey||II();await n.fetch(h,t,i.action||a,{preventScrollReset:i.preventScrollReset,formData:u,body:f,formMethod:i.method||o,formEncType:i.encType||s,flushSync:i.flushSync})}else await n.navigate(i.action||a,{preventScrollReset:i.preventScrollReset,formData:u,body:f,formMethod:i.method||o,formEncType:i.encType||s,replace:i.replace,state:i.state,fromRouteId:t,flushSync:i.flushSync,viewTransition:i.viewTransition})},[n,e,t])}function NI(n,{relative:e}={}){let{basename:t}=ge.useContext(au),r=ge.useContext(nc);zr(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),a={...h0(n||".",{relative:e})},o=ch();if(n==null){a.search=o.search;let s=new URLSearchParams(a.search),u=s.getAll("index");if(u.some(h=>h==="")){s.delete("index"),u.filter(p=>p).forEach(p=>s.append("index",p));let h=s.toString();a.search=h?`?${h}`:""}}return(!n||n===".")&&i.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(a.pathname=a.pathname==="/"?t:qu([t,a.pathname])),Y1(a)}function DI(n,e={}){let t=ge.useContext(eA);zr(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=uA("useViewTransitionState"),i=h0(n,{relative:e.relative});if(!t.isTransitioning)return!1;let a=$u(t.currentLocation.pathname,r)||t.currentLocation.pathname,o=$u(t.nextLocation.pathname,r)||t.nextLocation.pathname;return ug(i.pathname,o)!=null||ug(i.pathname,a)!=null}[...pI];const OI=()=>{};var Pw={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cA=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},PI=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const a=n[t++];e[r++]=String.fromCharCode((i&31)<<6|a&63)}else if(i>239&&i<365){const a=n[t++],o=n[t++],s=n[t++],u=((i&7)<<18|(a&63)<<12|(o&63)<<6|s&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const a=n[t++],o=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(a&63)<<6|o&63)}}return e.join("")},fA={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const a=n[i],o=i+1<n.length,s=o?n[i+1]:0,u=i+2<n.length,f=u?n[i+2]:0,h=a>>2,p=(a&3)<<4|s>>4;let g=(s&15)<<2|f>>6,m=f&63;u||(m=64,o||(g=64)),r.push(t[h],t[p],t[g],t[m])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(cA(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):PI(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const a=t[n.charAt(i++)],s=i<n.length?t[n.charAt(i)]:0;++i;const f=i<n.length?t[n.charAt(i)]:64;++i;const p=i<n.length?t[n.charAt(i)]:64;if(++i,a==null||s==null||f==null||p==null)throw new LI;const g=a<<2|s>>4;if(r.push(g),f!==64){const m=s<<4&240|f>>2;if(r.push(m),p!==64){const x=f<<6&192|p;r.push(x)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class LI extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const kI=function(n){const e=cA(n);return fA.encodeByteArray(e,!0)},cg=function(n){return kI(n).replace(/\./g,"")},hA=function(n){try{return fA.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MI(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BI=()=>MI().__FIREBASE_DEFAULTS__,jI=()=>{if(typeof process>"u"||typeof Pw>"u")return;const n=Pw.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},FI=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&hA(n[1]);return e&&JSON.parse(e)},Qg=()=>{try{return OI()||BI()||jI()||FI()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},dA=n=>{var e,t;return(t=(e=Qg())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},pA=n=>{const e=dA(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},gA=()=>{var n;return(n=Qg())===null||n===void 0?void 0:n.config},mA=n=>{var e;return(e=Qg())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UI{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Id(n){return n.endsWith(".cloudworkstations.dev")}async function r5(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vA(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,a=n.sub||n.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},n);return[cg(JSON.stringify(t)),cg(JSON.stringify(o)),""].join(".")}const U1={};function VI(){const n={prod:[],emulator:[]};for(const e of Object.keys(U1))U1[e]?n.emulator.push(e):n.prod.push(e);return n}function zI(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let Lw=!1;function i5(n,e){if(typeof window>"u"||typeof document>"u"||!Id(window.location.host)||U1[n]===e||U1[n]||Lw)return;U1[n]=e;function t(g){return`__firebase__banner__${g}`}const r="__firebase__banner",a=VI().prod.length>0;function o(){const g=document.getElementById(r);g&&g.remove()}function s(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function u(g,m){g.setAttribute("width","24"),g.setAttribute("id",m),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function f(){const g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{Lw=!0,o()},g}function h(g,m){g.setAttribute("id",m),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function p(){const g=zI(r),m=t("text"),x=document.getElementById(m)||document.createElement("span"),w=t("learnmore"),I=document.getElementById(w)||document.createElement("a"),C=t("preprendIcon"),P=document.getElementById(C)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){const B=g.element;s(B),h(I,w);const V=f();u(P,C),B.append(P,x,I,V),document.body.appendChild(B)}a?(x.innerText="Preview backend disconnected.",P.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(P.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,x.innerText="Preview backend running in this workspace."),x.setAttribute("id",m)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ja(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function qI(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ja())}function HI(){var n;const e=(n=Qg())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function WI(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function yA(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function GI(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function $I(){const n=ja();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function XI(){return!HI()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function xA(){try{return typeof indexedDB=="object"}catch{return!1}}function _A(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var a;e(((a=i.error)===null||a===void 0?void 0:a.message)||"")}}catch(t){e(t)}})}function YI(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KI="FirebaseError";class Cs extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=KI,Object.setPrototypeOf(this,Cs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,fh.prototype.create)}}class fh{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,a=this.errors[e],o=a?QI(a,r):"Error",s=`${this.serviceName}: ${o} (${i}).`;return new Cs(i,s,r)}}function QI(n,e){return n.replace(ZI,(t,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const ZI=/\{\$([^}]+)}/g;function JI(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function of(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const a=n[i],o=e[i];if(kw(a)&&kw(o)){if(!of(a,o))return!1}else if(a!==o)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function kw(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d0(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function N1(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,a]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(a)}}),e}function D1(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function e7(n,e){const t=new t7(n,e);return t.subscribe.bind(t)}class t7{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");n7(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=tv),i.error===void 0&&(i.error=tv),i.complete===void 0&&(i.complete=tv);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function n7(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function tv(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r7=1e3,i7=2,a7=4*60*60*1e3,o7=.5;function Mw(n,e=r7,t=i7){const r=e*Math.pow(t,n),i=Math.round(o7*r*(Math.random()-.5)*2);return Math.min(a7,r+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qr(n){return n&&n._delegate?n._delegate:n}class Ss{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hf="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s7{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new UI;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(a){if(i)return null;throw a}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(u7(e))try{this.getOrInitializeService({instanceIdentifier:Hf})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const a=this.getOrInitializeService({instanceIdentifier:i});r.resolve(a)}catch{}}}}clearInstance(e=Hf){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Hf){return this.instances.has(e)}getOptions(e=Hf){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[a,o]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(a);r===s&&o.resolve(i)}return i}onInit(e,t){var r;const i=this.normalizeInstanceIdentifier(t),a=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;a.add(e),this.onInitCallbacks.set(i,a);const o=this.instances.get(i);return o&&e(o,i),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:l7(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Hf){return this.component?this.component.multipleInstances?e:Hf:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function l7(n){return n===Hf?void 0:n}function u7(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c7{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new s7(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var wn;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(wn||(wn={}));const f7={debug:wn.DEBUG,verbose:wn.VERBOSE,info:wn.INFO,warn:wn.WARN,error:wn.ERROR,silent:wn.SILENT},h7=wn.INFO,d7={[wn.DEBUG]:"log",[wn.VERBOSE]:"log",[wn.INFO]:"info",[wn.WARN]:"warn",[wn.ERROR]:"error"},p7=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),i=d7[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Zg{constructor(e){this.name=e,this._logLevel=h7,this._logHandler=p7,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in wn))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?f7[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,wn.DEBUG,...e),this._logHandler(this,wn.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,wn.VERBOSE,...e),this._logHandler(this,wn.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,wn.INFO,...e),this._logHandler(this,wn.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,wn.WARN,...e),this._logHandler(this,wn.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,wn.ERROR,...e),this._logHandler(this,wn.ERROR,...e)}}const g7=(n,e)=>e.some(t=>n instanceof t);let Bw,jw;function m7(){return Bw||(Bw=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function v7(){return jw||(jw=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const wA=new WeakMap,Wv=new WeakMap,bA=new WeakMap,nv=new WeakMap,a5=new WeakMap;function y7(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",a),n.removeEventListener("error",o)},a=()=>{t(Jc(n.result)),i()},o=()=>{r(n.error),i()};n.addEventListener("success",a),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&wA.set(t,n)}).catch(()=>{}),a5.set(e,n),e}function x7(n){if(Wv.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",a),n.removeEventListener("error",o),n.removeEventListener("abort",o)},a=()=>{t(),i()},o=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",a),n.addEventListener("error",o),n.addEventListener("abort",o)});Wv.set(n,e)}let Gv={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Wv.get(n);if(e==="objectStoreNames")return n.objectStoreNames||bA.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Jc(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function _7(n){Gv=n(Gv)}function w7(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(rv(this),e,...t);return bA.set(r,e.sort?e.sort():[e]),Jc(r)}:v7().includes(n)?function(...e){return n.apply(rv(this),e),Jc(wA.get(this))}:function(...e){return Jc(n.apply(rv(this),e))}}function b7(n){return typeof n=="function"?w7(n):(n instanceof IDBTransaction&&x7(n),g7(n,m7())?new Proxy(n,Gv):n)}function Jc(n){if(n instanceof IDBRequest)return y7(n);if(nv.has(n))return nv.get(n);const e=b7(n);return e!==n&&(nv.set(n,e),a5.set(e,n)),e}const rv=n=>a5.get(n);function AA(n,e,{blocked:t,upgrade:r,blocking:i,terminated:a}={}){const o=indexedDB.open(n,e),s=Jc(o);return r&&o.addEventListener("upgradeneeded",u=>{r(Jc(o.result),u.oldVersion,u.newVersion,Jc(o.transaction),u)}),t&&o.addEventListener("blocked",u=>t(u.oldVersion,u.newVersion,u)),s.then(u=>{a&&u.addEventListener("close",()=>a()),i&&u.addEventListener("versionchange",f=>i(f.oldVersion,f.newVersion,f))}).catch(()=>{}),s}const A7=["get","getKey","getAll","getAllKeys","count"],E7=["put","add","delete","clear"],iv=new Map;function Fw(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(iv.get(e))return iv.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=E7.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||A7.includes(t)))return;const a=async function(o,...s){const u=this.transaction(o,i?"readwrite":"readonly");let f=u.store;return r&&(f=f.index(s.shift())),(await Promise.all([f[t](...s),i&&u.done]))[0]};return iv.set(e,a),a}_7(n=>({...n,get:(e,t,r)=>Fw(e,t)||n.get(e,t,r),has:(e,t)=>!!Fw(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S7{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(C7(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function C7(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const $v="@firebase/app",Uw="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xu=new Zg("@firebase/app"),T7="@firebase/app-compat",I7="@firebase/analytics-compat",R7="@firebase/analytics",N7="@firebase/app-check-compat",D7="@firebase/app-check",O7="@firebase/auth",P7="@firebase/auth-compat",L7="@firebase/database",k7="@firebase/data-connect",M7="@firebase/database-compat",B7="@firebase/functions",j7="@firebase/functions-compat",F7="@firebase/installations",U7="@firebase/installations-compat",V7="@firebase/messaging",z7="@firebase/messaging-compat",q7="@firebase/performance",H7="@firebase/performance-compat",W7="@firebase/remote-config",G7="@firebase/remote-config-compat",$7="@firebase/storage",X7="@firebase/storage-compat",Y7="@firebase/firestore",K7="@firebase/ai",Q7="@firebase/firestore-compat",Z7="firebase",J7="11.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xv="[DEFAULT]",eR={[$v]:"fire-core",[T7]:"fire-core-compat",[R7]:"fire-analytics",[I7]:"fire-analytics-compat",[D7]:"fire-app-check",[N7]:"fire-app-check-compat",[O7]:"fire-auth",[P7]:"fire-auth-compat",[L7]:"fire-rtdb",[k7]:"fire-data-connect",[M7]:"fire-rtdb-compat",[B7]:"fire-fn",[j7]:"fire-fn-compat",[F7]:"fire-iid",[U7]:"fire-iid-compat",[V7]:"fire-fcm",[z7]:"fire-fcm-compat",[q7]:"fire-perf",[H7]:"fire-perf-compat",[W7]:"fire-rc",[G7]:"fire-rc-compat",[$7]:"fire-gcs",[X7]:"fire-gcs-compat",[Y7]:"fire-fst",[Q7]:"fire-fst-compat",[K7]:"fire-vertex","fire-js":"fire-js",[Z7]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fg=new Map,tR=new Map,Yv=new Map;function Vw(n,e){try{n.container.addComponent(e)}catch(t){Xu.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function ul(n){const e=n.name;if(Yv.has(e))return Xu.debug(`There were multiple attempts to register component ${e}.`),!1;Yv.set(e,n);for(const t of fg.values())Vw(t,n);for(const t of tR.values())Vw(t,n);return!0}function gf(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function $o(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nR={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ef=new fh("app","Firebase",nR);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rR{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ss("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ef.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hh=J7;function EA(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Xv,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw ef.create("bad-app-name",{appName:String(i)});if(t||(t=gA()),!t)throw ef.create("no-options");const a=fg.get(i);if(a){if(of(t,a.options)&&of(r,a.config))return a;throw ef.create("duplicate-app",{appName:i})}const o=new c7(i);for(const u of Yv.values())o.addComponent(u);const s=new rR(t,r,o);return fg.set(i,s),s}function Jg(n=Xv){const e=fg.get(n);if(!e&&n===Xv&&gA())return EA();if(!e)throw ef.create("no-app",{appName:n});return e}function _o(n,e,t){var r;let i=(r=eR[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);const a=i.match(/\s|\//),o=e.match(/\s|\//);if(a||o){const s=[`Unable to register library "${i}" with version "${e}":`];a&&s.push(`library name "${i}" contains illegal characters (whitespace or "/")`),a&&o&&s.push("and"),o&&s.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Xu.warn(s.join(" "));return}ul(new Ss(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iR="firebase-heartbeat-database",aR=1,K1="firebase-heartbeat-store";let av=null;function SA(){return av||(av=AA(iR,aR,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(K1)}catch(t){console.warn(t)}}}}).catch(n=>{throw ef.create("idb-open",{originalErrorMessage:n.message})})),av}async function oR(n){try{const t=(await SA()).transaction(K1),r=await t.objectStore(K1).get(CA(n));return await t.done,r}catch(e){if(e instanceof Cs)Xu.warn(e.message);else{const t=ef.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Xu.warn(t.message)}}}async function zw(n,e){try{const r=(await SA()).transaction(K1,"readwrite");await r.objectStore(K1).put(e,CA(n)),await r.done}catch(t){if(t instanceof Cs)Xu.warn(t.message);else{const r=ef.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Xu.warn(r.message)}}}function CA(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sR=1024,lR=30;class uR{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new fR(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=qw();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(o=>o.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:i}),this._heartbeatsCache.heartbeats.length>lR){const o=hR(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Xu.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=qw(),{heartbeatsToSend:r,unsentEntries:i}=cR(this._heartbeatsCache.heartbeats),a=cg(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(t){return Xu.warn(t),""}}}function qw(){return new Date().toISOString().substring(0,10)}function cR(n,e=sR){const t=[];let r=n.slice();for(const i of n){const a=t.find(o=>o.agent===i.agent);if(a){if(a.dates.push(i.date),Hw(t)>e){a.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),Hw(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class fR{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return xA()?_A().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await oR(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return zw(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return zw(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Hw(n){return cg(JSON.stringify({version:2,heartbeats:n})).length}function hR(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dR(n){ul(new Ss("platform-logger",e=>new S7(e),"PRIVATE")),ul(new Ss("heartbeat",e=>new uR(e),"PRIVATE")),_o($v,Uw,n),_o($v,Uw,"esm2017"),_o("fire-js","")}dR("");function o5(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function TA(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const pR=TA,IA=new fh("auth","Firebase",TA());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hg=new Zg("@firebase/auth");function gR(n,...e){hg.logLevel<=wn.WARN&&hg.warn(`Auth (${hh}): ${n}`,...e)}function Wp(n,...e){hg.logLevel<=wn.ERROR&&hg.error(`Auth (${hh}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cl(n,...e){throw s5(n,...e)}function Kl(n,...e){return s5(n,...e)}function RA(n,e,t){const r=Object.assign(Object.assign({},pR()),{[e]:t});return new fh("auth","Firebase",r).create(e,{appName:n.name})}function Hu(n){return RA(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function s5(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return IA.create(n,...e)}function $t(n,e,...t){if(!n)throw s5(e,...t)}function Uu(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Wp(e),new Error(e)}function Yu(n,e){n||Uu(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kv(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function mR(){return Ww()==="http:"||Ww()==="https:"}function Ww(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vR(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(mR()||yA()||"connection"in navigator)?navigator.onLine:!0}function yR(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p0{constructor(e,t){this.shortDelay=e,this.longDelay=t,Yu(t>e,"Short delay should be less than long delay!"),this.isMobile=qI()||GI()}get(){return vR()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l5(n,e){Yu(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NA{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Uu("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Uu("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Uu("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xR={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _R=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],wR=new p0(3e4,6e4);function rc(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function ic(n,e,t,r,i={}){return DA(n,i,async()=>{let a={},o={};r&&(e==="GET"?o=r:a={body:JSON.stringify(r)});const s=d0(Object.assign({key:n.config.apiKey},o)).slice(1),u=await n._getAdditionalHeaders();u["Content-Type"]="application/json",n.languageCode&&(u["X-Firebase-Locale"]=n.languageCode);const f=Object.assign({method:e,headers:u},a);return WI()||(f.referrerPolicy="no-referrer"),n.emulatorConfig&&Id(n.emulatorConfig.host)&&(f.credentials="include"),NA.fetch()(await OA(n,n.config.apiHost,t,s),f)})}async function DA(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},xR),e);try{const i=new AR(n),a=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();const o=await a.json();if("needConfirmation"in o)throw Tp(n,"account-exists-with-different-credential",o);if(a.ok&&!("errorMessage"in o))return o;{const s=a.ok?o.errorMessage:o.error.message,[u,f]=s.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Tp(n,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw Tp(n,"email-already-in-use",o);if(u==="USER_DISABLED")throw Tp(n,"user-disabled",o);const h=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw RA(n,h,f);cl(n,h)}}catch(i){if(i instanceof Cs)throw i;cl(n,"network-request-failed",{message:String(i)})}}async function g0(n,e,t,r,i={}){const a=await ic(n,e,t,r,i);return"mfaPendingCredential"in a&&cl(n,"multi-factor-auth-required",{_serverResponse:a}),a}async function OA(n,e,t,r){const i=`${e}${t}?${r}`,a=n,o=a.config.emulator?l5(n.config,i):`${n.config.apiScheme}://${i}`;return _R.includes(t)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(o).toString():o}function bR(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class AR{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Kl(this.auth,"network-request-failed")),wR.get())})}}function Tp(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=Kl(n,e,r);return i.customData._tokenResponse=t,i}function Gw(n){return n!==void 0&&n.enterprise!==void 0}class ER{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return bR(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function SR(n,e){return ic(n,"GET","/v2/recaptchaConfig",rc(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CR(n,e){return ic(n,"POST","/v1/accounts:delete",e)}async function dg(n,e){return ic(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V1(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function TR(n,e=!1){const t=qr(n),r=await t.getIdToken(e),i=u5(r);$t(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const a=typeof i.firebase=="object"?i.firebase:void 0,o=a==null?void 0:a.sign_in_provider;return{claims:i,token:r,authTime:V1(ov(i.auth_time)),issuedAtTime:V1(ov(i.iat)),expirationTime:V1(ov(i.exp)),signInProvider:o||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function ov(n){return Number(n)*1e3}function u5(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Wp("JWT malformed, contained fewer than 3 sections"),null;try{const i=hA(t);return i?JSON.parse(i):(Wp("Failed to decode base64 JWT payload"),null)}catch(i){return Wp("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function $w(n){const e=u5(n);return $t(e,"internal-error"),$t(typeof e.exp<"u","internal-error"),$t(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Q1(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof Cs&&IR(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function IR({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RR{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qv{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=V1(this.lastLoginAt),this.creationTime=V1(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pg(n){var e;const t=n.auth,r=await n.getIdToken(),i=await Q1(n,dg(t,{idToken:r}));$t(i==null?void 0:i.users.length,t,"internal-error");const a=i.users[0];n._notifyReloadListener(a);const o=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?PA(a.providerUserInfo):[],s=DR(n.providerData,o),u=n.isAnonymous,f=!(n.email&&a.passwordHash)&&!(s!=null&&s.length),h=u?f:!1,p={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:s,metadata:new Qv(a.createdAt,a.lastLoginAt),isAnonymous:h};Object.assign(n,p)}async function NR(n){const e=qr(n);await pg(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function DR(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function PA(n){return n.map(e=>{var{providerId:t}=e,r=o5(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OR(n,e){const t=await DA(n,{},async()=>{const r=d0({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:a}=n.config,o=await OA(n,i,"/v1/token",`key=${a}`),s=await n._getAdditionalHeaders();return s["Content-Type"]="application/x-www-form-urlencoded",NA.fetch()(o,{method:"POST",headers:s,body:r})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function PR(n,e){return ic(n,"POST","/v2/accounts:revokeToken",rc(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ld{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){$t(e.idToken,"internal-error"),$t(typeof e.idToken<"u","internal-error"),$t(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):$w(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){$t(e.length!==0,"internal-error");const t=$w(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:($t(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:i,expiresIn:a}=await OR(e,t);this.updateTokensAndExpiration(r,i,Number(a))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:a}=t,o=new ld;return r&&($t(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&($t(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),a&&($t(typeof a=="number","internal-error",{appName:e}),o.expirationTime=a),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ld,this.toJSON())}_performRefresh(){return Uu("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vc(n,e){$t(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class sl{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,a=o5(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new RR(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new Qv(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await Q1(this,this.stsTokenManager.getToken(this.auth,e));return $t(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return TR(this,e)}reload(){return NR(this)}_assign(e){this!==e&&($t(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new sl(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){$t(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await pg(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if($o(this.auth.app))return Promise.reject(Hu(this.auth));const e=await this.getIdToken();return await Q1(this,CR(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,a,o,s,u,f,h;const p=(r=t.displayName)!==null&&r!==void 0?r:void 0,g=(i=t.email)!==null&&i!==void 0?i:void 0,m=(a=t.phoneNumber)!==null&&a!==void 0?a:void 0,x=(o=t.photoURL)!==null&&o!==void 0?o:void 0,w=(s=t.tenantId)!==null&&s!==void 0?s:void 0,I=(u=t._redirectEventId)!==null&&u!==void 0?u:void 0,C=(f=t.createdAt)!==null&&f!==void 0?f:void 0,P=(h=t.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:B,emailVerified:V,isAnonymous:Y,providerData:q,stsTokenManager:D}=t;$t(B&&D,e,"internal-error");const A=ld.fromJSON(this.name,D);$t(typeof B=="string",e,"internal-error"),Vc(p,e.name),Vc(g,e.name),$t(typeof V=="boolean",e,"internal-error"),$t(typeof Y=="boolean",e,"internal-error"),Vc(m,e.name),Vc(x,e.name),Vc(w,e.name),Vc(I,e.name),Vc(C,e.name),Vc(P,e.name);const T=new sl({uid:B,auth:e,email:g,emailVerified:V,displayName:p,isAnonymous:Y,photoURL:x,phoneNumber:m,tenantId:w,stsTokenManager:A,createdAt:C,lastLoginAt:P});return q&&Array.isArray(q)&&(T.providerData=q.map(k=>Object.assign({},k))),I&&(T._redirectEventId=I),T}static async _fromIdTokenResponse(e,t,r=!1){const i=new ld;i.updateFromServerResponse(t);const a=new sl({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await pg(a),a}static async _fromGetAccountInfoResponse(e,t,r){const i=t.users[0];$t(i.localId!==void 0,"internal-error");const a=i.providerUserInfo!==void 0?PA(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(a!=null&&a.length),s=new ld;s.updateFromIdToken(r);const u=new sl({uid:i.localId,auth:e,stsTokenManager:s,isAnonymous:o}),f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new Qv(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(a!=null&&a.length)};return Object.assign(u,f),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xw=new Map;function Vu(n){Yu(n instanceof Function,"Expected a class definition");let e=Xw.get(n);return e?(Yu(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,Xw.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LA{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}LA.type="NONE";const Yw=LA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gp(n,e,t){return`firebase:${n}:${e}:${t}`}class ud{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:a}=this.auth;this.fullUserKey=Gp(this.userKey,i.apiKey,a),this.fullPersistenceKey=Gp("persistence",i.apiKey,a),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await dg(this.auth,{idToken:e}).catch(()=>{});return t?sl._fromGetAccountInfoResponse(this.auth,t,e):null}return sl._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new ud(Vu(Yw),e,r);const i=(await Promise.all(t.map(async f=>{if(await f._isAvailable())return f}))).filter(f=>f);let a=i[0]||Vu(Yw);const o=Gp(r,e.config.apiKey,e.name);let s=null;for(const f of t)try{const h=await f._get(o);if(h){let p;if(typeof h=="string"){const g=await dg(e,{idToken:h}).catch(()=>{});if(!g)break;p=await sl._fromGetAccountInfoResponse(e,g,h)}else p=sl._fromJSON(e,h);f!==a&&(s=p),a=f;break}}catch{}const u=i.filter(f=>f._shouldAllowMigration);return!a._shouldAllowMigration||!u.length?new ud(a,e,r):(a=u[0],s&&await a._set(o,s.toJSON()),await Promise.all(t.map(async f=>{if(f!==a)try{await f._remove(o)}catch{}})),new ud(a,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kw(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(jA(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(kA(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(UA(e))return"Blackberry";if(VA(e))return"Webos";if(MA(e))return"Safari";if((e.includes("chrome/")||BA(e))&&!e.includes("edge/"))return"Chrome";if(FA(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function kA(n=ja()){return/firefox\//i.test(n)}function MA(n=ja()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function BA(n=ja()){return/crios\//i.test(n)}function jA(n=ja()){return/iemobile/i.test(n)}function FA(n=ja()){return/android/i.test(n)}function UA(n=ja()){return/blackberry/i.test(n)}function VA(n=ja()){return/webos/i.test(n)}function c5(n=ja()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function LR(n=ja()){var e;return c5(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function kR(){return $I()&&document.documentMode===10}function zA(n=ja()){return c5(n)||FA(n)||VA(n)||UA(n)||/windows phone/i.test(n)||jA(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qA(n,e=[]){let t;switch(n){case"Browser":t=Kw(ja());break;case"Worker":t=`${Kw(ja())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${hh}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MR{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=a=>new Promise((o,s)=>{try{const u=e(a);o(u)}catch(u){s(u)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BR(n,e={}){return ic(n,"GET","/v2/passwordPolicy",rc(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jR=6;class FR{constructor(e){var t,r,i,a;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=o.minPasswordLength)!==null&&t!==void 0?t:jR,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(a=e.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,a,o,s;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(t=u.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(a=u.containsUppercaseLetter)!==null&&a!==void 0?a:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(s=u.containsNonAlphanumericCharacter)!==null&&s!==void 0?s:!0),u}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UR{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Qw(this),this.idTokenSubscription=new Qw(this),this.beforeStateQueue=new MR(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=IA,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Vu(t)),this._initializationPromise=this.queue(async()=>{var r,i,a;if(!this._deleted&&(this.persistenceManager=await ud.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((a=this.currentUser)===null||a===void 0?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await dg(this,{idToken:e}),r=await sl._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if($o(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(s=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(s,s))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,s=i==null?void 0:i._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===s)&&(u!=null&&u.user)&&(i=u.user,a=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return $t(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await pg(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=yR()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if($o(this.app))return Promise.reject(Hu(this));const t=e?qr(e):null;return t&&$t(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&$t(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return $o(this.app)?Promise.reject(Hu(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return $o(this.app)?Promise.reject(Hu(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Vu(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await BR(this),t=new FR(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new fh("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await PR(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Vu(e)||this._popupRedirectResolver;$t(t,this,"argument-error"),this.redirectPersistenceManager=await ud.create(this,[Vu(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const a=typeof t=="function"?t:t.next.bind(t);let o=!1;const s=this._isInitialized?Promise.resolve():this._initializationPromise;if($t(s,this,"internal-error"),s.then(()=>{o||a(this.currentUser)}),typeof t=="function"){const u=e.addObserver(t,r,i);return()=>{o=!0,u()}}else{const u=e.addObserver(t);return()=>{o=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return $t(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=qA(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){var e;if($o(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&gR(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function mf(n){return qr(n)}class Qw{constructor(e){this.auth=e,this.observer=null,this.addObserver=e7(t=>this.observer=t)}get next(){return $t(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let em={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function VR(n){em=n}function HA(n){return em.loadJS(n)}function zR(){return em.recaptchaEnterpriseScript}function qR(){return em.gapiScript}function HR(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class WR{constructor(){this.enterprise=new GR}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class GR{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const $R="recaptcha-enterprise",WA="NO_RECAPTCHA";class XR{constructor(e){this.type=$R,this.auth=mf(e)}async verify(e="verify",t=!1){async function r(a){if(!t){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(o,s)=>{SR(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)s(new Error("recaptcha Enterprise site key undefined"));else{const f=new ER(u);return a.tenantId==null?a._agentRecaptchaConfig=f:a._tenantRecaptchaConfigs[a.tenantId]=f,o(f.siteKey)}}).catch(u=>{s(u)})})}function i(a,o,s){const u=window.grecaptcha;Gw(u)?u.enterprise.ready(()=>{u.enterprise.execute(a,{action:e}).then(f=>{o(f)}).catch(()=>{o(WA)})}):s(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new WR().execute("siteKey",{action:"verify"}):new Promise((a,o)=>{r(this.auth).then(s=>{if(!t&&Gw(window.grecaptcha))i(s,a,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let u=zR();u.length!==0&&(u+=s),HA(u).then(()=>{i(s,a,o)}).catch(f=>{o(f)})}}).catch(s=>{o(s)})})}}async function Zw(n,e,t,r=!1,i=!1){const a=new XR(n);let o;if(i)o=WA;else try{o=await a.verify(t)}catch{o=await a.verify(t,!0)}const s=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in s){const u=s.phoneEnrollmentInfo.phoneNumber,f=s.phoneEnrollmentInfo.recaptchaToken;Object.assign(s,{phoneEnrollmentInfo:{phoneNumber:u,recaptchaToken:f,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in s){const u=s.phoneSignInInfo.recaptchaToken;Object.assign(s,{phoneSignInInfo:{recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return s}return r?Object.assign(s,{captchaResp:o}):Object.assign(s,{captchaResponse:o}),Object.assign(s,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(s,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),s}async function gg(n,e,t,r,i){var a;if(!((a=n._getRecaptchaConfig())===null||a===void 0)&&a.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await Zw(n,e,t,t==="getOobCode");return r(n,o)}else return r(n,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const s=await Zw(n,e,t,t==="getOobCode");return r(n,s)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YR(n,e){const t=gf(n,"auth");if(t.isInitialized()){const i=t.getImmediate(),a=t.getOptions();if(of(a,e??{}))return i;cl(i,"already-initialized")}return t.initialize({options:e})}function KR(n,e){const t=(e==null?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(Vu);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function QR(n,e,t){const r=mf(n);$t(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,a=GA(e),{host:o,port:s}=ZR(e),u=s===null?"":`:${s}`,f={url:`${a}//${o}${u}/`},h=Object.freeze({host:o,port:s,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){$t(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),$t(of(f,r.config.emulator)&&of(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=f,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,Id(o)?(r5(`${a}//${o}${u}`),i5("Auth",!0)):JR()}function GA(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function ZR(n){const e=GA(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const a=i[1];return{host:a,port:Jw(r.substr(a.length+1))}}else{const[a,o]=r.split(":");return{host:a,port:Jw(o)}}}function Jw(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function JR(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f5{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Uu("not implemented")}_getIdTokenResponse(e){return Uu("not implemented")}_linkToIdToken(e,t){return Uu("not implemented")}_getReauthenticationResolver(e){return Uu("not implemented")}}async function eN(n,e){return ic(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tN(n,e){return g0(n,"POST","/v1/accounts:signInWithPassword",rc(n,e))}async function $A(n,e){return ic(n,"POST","/v1/accounts:sendOobCode",rc(n,e))}async function nN(n,e){return $A(n,e)}async function rN(n,e){return $A(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iN(n,e){return g0(n,"POST","/v1/accounts:signInWithEmailLink",rc(n,e))}async function aN(n,e){return g0(n,"POST","/v1/accounts:signInWithEmailLink",rc(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z1 extends f5{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new Z1(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new Z1(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return gg(e,t,"signInWithPassword",tN);case"emailLink":return iN(e,{email:this._email,oobCode:this._password});default:cl(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return gg(e,r,"signUpPassword",eN);case"emailLink":return aN(e,{idToken:t,email:this._email,oobCode:this._password});default:cl(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cd(n,e){return g0(n,"POST","/v1/accounts:signInWithIdp",rc(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oN="http://localhost";class th extends f5{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new th(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):cl("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=t,a=o5(t,["providerId","signInMethod"]);if(!r||!i)return null;const o=new th(r,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}_getIdTokenResponse(e){const t=this.buildRequest();return cd(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,cd(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,cd(e,t)}buildRequest(){const e={requestUri:oN,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=d0(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sN(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function lN(n){const e=N1(D1(n)).link,t=e?N1(D1(e)).deep_link_id:null,r=N1(D1(n)).deep_link_id;return(r?N1(D1(r)).link:null)||r||t||e||n}class h5{constructor(e){var t,r,i,a,o,s;const u=N1(D1(e)),f=(t=u.apiKey)!==null&&t!==void 0?t:null,h=(r=u.oobCode)!==null&&r!==void 0?r:null,p=sN((i=u.mode)!==null&&i!==void 0?i:null);$t(f&&h&&p,"argument-error"),this.apiKey=f,this.operation=p,this.code=h,this.continueUrl=(a=u.continueUrl)!==null&&a!==void 0?a:null,this.languageCode=(o=u.lang)!==null&&o!==void 0?o:null,this.tenantId=(s=u.tenantId)!==null&&s!==void 0?s:null}static parseLink(e){const t=lN(e);try{return new h5(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rd{constructor(){this.providerId=Rd.PROVIDER_ID}static credential(e,t){return Z1._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=h5.parseLink(t);return $t(r,"argument-error"),Z1._fromEmailAndCode(e,r.code,r.tenantId)}}Rd.PROVIDER_ID="password";Rd.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Rd.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XA{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m0 extends XA{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $c extends m0{constructor(){super("facebook.com")}static credential(e){return th._fromParams({providerId:$c.PROVIDER_ID,signInMethod:$c.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return $c.credentialFromTaggedObject(e)}static credentialFromError(e){return $c.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return $c.credential(e.oauthAccessToken)}catch{return null}}}$c.FACEBOOK_SIGN_IN_METHOD="facebook.com";$c.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xc extends m0{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return th._fromParams({providerId:Xc.PROVIDER_ID,signInMethod:Xc.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Xc.credentialFromTaggedObject(e)}static credentialFromError(e){return Xc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return Xc.credential(t,r)}catch{return null}}}Xc.GOOGLE_SIGN_IN_METHOD="google.com";Xc.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yc extends m0{constructor(){super("github.com")}static credential(e){return th._fromParams({providerId:Yc.PROVIDER_ID,signInMethod:Yc.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Yc.credentialFromTaggedObject(e)}static credentialFromError(e){return Yc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Yc.credential(e.oauthAccessToken)}catch{return null}}}Yc.GITHUB_SIGN_IN_METHOD="github.com";Yc.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kc extends m0{constructor(){super("twitter.com")}static credential(e,t){return th._fromParams({providerId:Kc.PROVIDER_ID,signInMethod:Kc.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Kc.credentialFromTaggedObject(e)}static credentialFromError(e){return Kc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return Kc.credential(t,r)}catch{return null}}}Kc.TWITTER_SIGN_IN_METHOD="twitter.com";Kc.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uN(n,e){return g0(n,"POST","/v1/accounts:signUp",rc(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nh{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){const a=await sl._fromIdTokenResponse(e,r,i),o=eb(r);return new nh({user:a,providerId:o,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const i=eb(r);return new nh({user:e,providerId:i,_tokenResponse:r,operationType:t})}}function eb(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mg extends Cs{constructor(e,t,r,i){var a;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,mg.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new mg(e,t,r,i)}}function YA(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?mg._fromErrorAndOperation(n,a,e,r):a})}async function cN(n,e,t=!1){const r=await Q1(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return nh._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fN(n,e,t=!1){const{auth:r}=n;if($o(r.app))return Promise.reject(Hu(r));const i="reauthenticate";try{const a=await Q1(n,YA(r,i,e,n),t);$t(a.idToken,r,"internal-error");const o=u5(a.idToken);$t(o,r,"internal-error");const{sub:s}=o;return $t(n.uid===s,r,"user-mismatch"),nh._forOperation(n,i,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&cl(r,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KA(n,e,t=!1){if($o(n.app))return Promise.reject(Hu(n));const r="signIn",i=await YA(n,r,e),a=await nh._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(a.user),a}async function hN(n,e){return KA(mf(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QA(n){const e=mf(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function dN(n,e,t){const r=mf(n);await gg(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",rN)}async function pN(n,e,t){if($o(n.app))return Promise.reject(Hu(n));const r=mf(n),o=await gg(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",uN).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&QA(n),u}),s=await nh._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(s.user),s}function gN(n,e,t){return $o(n.app)?Promise.reject(Hu(n)):hN(qr(n),Rd.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&QA(n),r})}async function mN(n,e){const t=qr(n),i={requestType:"VERIFY_EMAIL",idToken:await n.getIdToken()},{email:a}=await nN(t.auth,i);a!==n.email&&await n.reload()}function vN(n,e,t,r){return qr(n).onIdTokenChanged(e,t,r)}function yN(n,e,t){return qr(n).beforeAuthStateChanged(e,t)}function xN(n,e,t,r){return qr(n).onAuthStateChanged(e,t,r)}function _N(n){return qr(n).signOut()}const vg="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZA{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(vg,"1"),this.storage.removeItem(vg),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wN=1e3,bN=10;class JA extends ZA{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=zA(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),i=this.localCache[t];r!==i&&e(t,i,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((o,s,u)=>{this.notifyListeners(o,u)});return}const r=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!t&&this.localCache[r]===o||this.notifyListeners(r,o)},a=this.storage.getItem(r);kR()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,bN):i()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},wN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}JA.type="LOCAL";const AN=JA;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e6 extends ZA{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}e6.type="SESSION";const t6=e6;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EN(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tm{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;const r=new tm(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:i,data:a}=t.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const s=Array.from(o).map(async f=>f(t.origin,a)),u=await EN(s);t.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:u})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}tm.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d5(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SN{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let a,o;return new Promise((s,u)=>{const f=d5("",20);i.port1.start();const h=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(p){const g=p;if(g.data.eventId===f)switch(g.data.status){case"ack":clearTimeout(h),a=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),s(g.data.response);break;default:clearTimeout(h),clearTimeout(a),u(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:f,data:t},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ql(){return window}function CN(n){Ql().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n6(){return typeof Ql().WorkerGlobalScope<"u"&&typeof Ql().importScripts=="function"}async function TN(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function IN(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function RN(){return n6()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r6="firebaseLocalStorageDb",NN=1,yg="firebaseLocalStorage",i6="fbase_key";class v0{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function nm(n,e){return n.transaction([yg],e?"readwrite":"readonly").objectStore(yg)}function DN(){const n=indexedDB.deleteDatabase(r6);return new v0(n).toPromise()}function Zv(){const n=indexedDB.open(r6,NN);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(yg,{keyPath:i6})}catch(i){t(i)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(yg)?e(r):(r.close(),await DN(),e(await Zv()))})})}async function tb(n,e,t){const r=nm(n,!0).put({[i6]:e,value:t});return new v0(r).toPromise()}async function ON(n,e){const t=nm(n,!1).get(e),r=await new v0(t).toPromise();return r===void 0?null:r.value}function nb(n,e){const t=nm(n,!0).delete(e);return new v0(t).toPromise()}const PN=800,LN=3;class a6{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Zv(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>LN)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return n6()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=tm._getInstance(RN()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await TN(),!this.activeServiceWorker)return;this.sender=new SN(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((t=r[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||IN()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Zv();return await tb(e,vg,"1"),await nb(e,vg),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>tb(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>ON(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>nb(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const a=nm(i,!1).getAll();return new v0(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:a}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(a)&&(this.notifyListeners(i,a),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),PN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}a6.type="LOCAL";const kN=a6;new p0(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MN(n,e){return e?Vu(e):($t(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p5 extends f5{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return cd(e,this._buildIdpRequest())}_linkToIdToken(e,t){return cd(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return cd(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function BN(n){return KA(n.auth,new p5(n),n.bypassAuthState)}function jN(n){const{auth:e,user:t}=n;return $t(t,e,"internal-error"),fN(t,new p5(n),n.bypassAuthState)}async function FN(n){const{auth:e,user:t}=n;return $t(t,e,"internal-error"),cN(t,new p5(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o6{constructor(e,t,r,i,a=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:i,tenantId:a,error:o,type:s}=e;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:t,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(s)(u))}catch(f){this.reject(f)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return BN;case"linkViaPopup":case"linkViaRedirect":return FN;case"reauthViaPopup":case"reauthViaRedirect":return jN;default:cl(this.auth,"internal-error")}}resolve(e){Yu(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Yu(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UN=new p0(2e3,1e4);class rd extends o6{constructor(e,t,r,i,a){super(e,t,i,a),this.provider=r,this.authWindow=null,this.pollId=null,rd.currentPopupAction&&rd.currentPopupAction.cancel(),rd.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return $t(e,this.auth,"internal-error"),e}async onExecution(){Yu(this.filter.length===1,"Popup operations only handle one event");const e=d5();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Kl(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Kl(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,rd.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if(!((r=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Kl(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,UN.get())};e()}}rd.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VN="pendingRedirect",$p=new Map;class zN extends o6{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=$p.get(this.auth._key());if(!e){try{const r=await qN(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}$p.set(this.auth._key(),e)}return this.bypassAuthState||$p.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function qN(n,e){const t=GN(e),r=WN(n);if(!await r._isAvailable())return!1;const i=await r._get(t)==="true";return await r._remove(t),i}function HN(n,e){$p.set(n._key(),e)}function WN(n){return Vu(n._redirectPersistence)}function GN(n){return Gp(VN,n.config.apiKey,n.name)}async function $N(n,e,t=!1){if($o(n.app))return Promise.reject(Hu(n));const r=mf(n),i=MN(r,e),o=await new zN(r,i,t).execute();return o&&!t&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XN=10*60*1e3;class YN{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!KN(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!s6(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(Kl(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=XN&&this.cachedEventUids.clear(),this.cachedEventUids.has(rb(e))}saveEventToCache(e){this.cachedEventUids.add(rb(e)),this.lastProcessedEventTime=Date.now()}}function rb(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function s6({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function KN(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return s6(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QN(n,e={}){return ic(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZN=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,JN=/^https?/;async function e9(n){if(n.config.emulator)return;const{authorizedDomains:e}=await QN(n);for(const t of e)try{if(t9(t))return}catch{}cl(n,"unauthorized-domain")}function t9(n){const e=Kv(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const o=new URL(n);return o.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&o.hostname===r}if(!JN.test(t))return!1;if(ZN.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n9=new p0(3e4,6e4);function ib(){const n=Ql().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function r9(n){return new Promise((e,t)=>{var r,i,a;function o(){ib(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{ib(),t(Kl(n,"network-request-failed"))},timeout:n9.get()})}if(!((i=(r=Ql().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((a=Ql().gapi)===null||a===void 0)&&a.load)o();else{const s=HR("iframefcb");return Ql()[s]=()=>{gapi.load?o():t(Kl(n,"network-request-failed"))},HA(`${qR()}?onload=${s}`).catch(u=>t(u))}}).catch(e=>{throw Xp=null,e})}let Xp=null;function i9(n){return Xp=Xp||r9(n),Xp}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a9=new p0(5e3,15e3),o9="__/auth/iframe",s9="emulator/auth/iframe",l9={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},u9=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function c9(n){const e=n.config;$t(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?l5(e,s9):`https://${n.config.authDomain}/${o9}`,r={apiKey:e.apiKey,appName:n.name,v:hh},i=u9.get(n.config.apiHost);i&&(r.eid=i);const a=n._getFrameworks();return a.length&&(r.fw=a.join(",")),`${t}?${d0(r).slice(1)}`}async function f9(n){const e=await i9(n),t=Ql().gapi;return $t(t,n,"internal-error"),e.open({where:document.body,url:c9(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:l9,dontclear:!0},r=>new Promise(async(i,a)=>{await r.restyle({setHideOnLeave:!1});const o=Kl(n,"network-request-failed"),s=Ql().setTimeout(()=>{a(o)},a9.get());function u(){Ql().clearTimeout(s),i(r)}r.ping(u).then(u,()=>{a(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h9={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},d9=500,p9=600,g9="_blank",m9="http://localhost";class ab{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function v9(n,e,t,r=d9,i=p9){const a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let s="";const u=Object.assign(Object.assign({},h9),{width:r.toString(),height:i.toString(),top:a,left:o}),f=ja().toLowerCase();t&&(s=BA(f)?g9:t),kA(f)&&(e=e||m9,u.scrollbars="yes");const h=Object.entries(u).reduce((g,[m,x])=>`${g}${m}=${x},`,"");if(LR(f)&&s!=="_self")return y9(e||"",s),new ab(null);const p=window.open(e||"",s,h);$t(p,n,"popup-blocked");try{p.focus()}catch{}return new ab(p)}function y9(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x9="__/auth/handler",_9="emulator/auth/handler",w9=encodeURIComponent("fac");async function ob(n,e,t,r,i,a){$t(n.config.authDomain,n,"auth-domain-config-required"),$t(n.config.apiKey,n,"invalid-api-key");const o={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:hh,eventId:i};if(e instanceof XA){e.setDefaultLanguage(n.languageCode),o.providerId=e.providerId||"",JI(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,p]of Object.entries({}))o[h]=p}if(e instanceof m0){const h=e.getScopes().filter(p=>p!=="");h.length>0&&(o.scopes=h.join(","))}n.tenantId&&(o.tid=n.tenantId);const s=o;for(const h of Object.keys(s))s[h]===void 0&&delete s[h];const u=await n._getAppCheckToken(),f=u?`#${w9}=${encodeURIComponent(u)}`:"";return`${b9(n)}?${d0(s).slice(1)}${f}`}function b9({config:n}){return n.emulator?l5(n,_9):`https://${n.authDomain}/${x9}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sv="webStorageSupport";class A9{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=t6,this._completeRedirectFn=$N,this._overrideRedirectResult=HN}async _openPopup(e,t,r,i){var a;Yu((a=this.eventManagers[e._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const o=await ob(e,t,r,Kv(),i);return v9(e,o,d5())}async _openRedirect(e,t,r,i){await this._originValidation(e);const a=await ob(e,t,r,Kv(),i);return CN(a),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:a}=this.eventManagers[t];return i?Promise.resolve(i):(Yu(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await f9(e),r=new YN(e);return t.register("authEvent",i=>($t(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(sv,{type:sv},i=>{var a;const o=(a=i==null?void 0:i[0])===null||a===void 0?void 0:a[sv];o!==void 0&&t(!!o),cl(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=e9(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return zA()||MA()||c5()}}const E9=A9;var sb="@firebase/auth",lb="1.10.6";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S9{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){$t(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C9(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function T9(n){ul(new Ss("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:o,authDomain:s}=r.options;$t(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:s,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:qA(n)},f=new UR(r,i,a,u);return KR(f,t),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),ul(new Ss("auth-internal",e=>{const t=mf(e.getProvider("auth").getImmediate());return(r=>new S9(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),_o(sb,lb,C9(n)),_o(sb,lb,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I9=5*60,R9=mA("authIdTokenMaxAge")||I9;let ub=null;const N9=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>R9)return;const i=t==null?void 0:t.token;ub!==i&&(ub=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function D9(n=Jg()){const e=gf(n,"auth");if(e.isInitialized())return e.getImmediate();const t=YR(n,{popupRedirectResolver:E9,persistence:[kN,AN,t6]}),r=mA("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(r,location.origin);if(location.origin===a.origin){const o=N9(a.toString());yN(t,o,()=>o(t.currentUser)),vN(t,s=>o(s))}}const i=dA("auth");return i&&QR(t,`http://${i}`),t}function O9(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}VR({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{const a=Kl("internal-error");a.customData=i,t(a)},r.type="text/javascript",r.charset="UTF-8",O9().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});T9("Browser");var cb=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var tf,l6;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(D,A){function T(){}T.prototype=A.prototype,D.D=A.prototype,D.prototype=new T,D.prototype.constructor=D,D.C=function(k,R,L){for(var j=Array(arguments.length-2),H=2;H<arguments.length;H++)j[H-2]=arguments[H];return A.prototype[R].apply(k,j)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(D,A,T){T||(T=0);var k=Array(16);if(typeof A=="string")for(var R=0;16>R;++R)k[R]=A.charCodeAt(T++)|A.charCodeAt(T++)<<8|A.charCodeAt(T++)<<16|A.charCodeAt(T++)<<24;else for(R=0;16>R;++R)k[R]=A[T++]|A[T++]<<8|A[T++]<<16|A[T++]<<24;A=D.g[0],T=D.g[1],R=D.g[2];var L=D.g[3],j=A+(L^T&(R^L))+k[0]+3614090360&4294967295;A=T+(j<<7&4294967295|j>>>25),j=L+(R^A&(T^R))+k[1]+3905402710&4294967295,L=A+(j<<12&4294967295|j>>>20),j=R+(T^L&(A^T))+k[2]+606105819&4294967295,R=L+(j<<17&4294967295|j>>>15),j=T+(A^R&(L^A))+k[3]+3250441966&4294967295,T=R+(j<<22&4294967295|j>>>10),j=A+(L^T&(R^L))+k[4]+4118548399&4294967295,A=T+(j<<7&4294967295|j>>>25),j=L+(R^A&(T^R))+k[5]+1200080426&4294967295,L=A+(j<<12&4294967295|j>>>20),j=R+(T^L&(A^T))+k[6]+2821735955&4294967295,R=L+(j<<17&4294967295|j>>>15),j=T+(A^R&(L^A))+k[7]+4249261313&4294967295,T=R+(j<<22&4294967295|j>>>10),j=A+(L^T&(R^L))+k[8]+1770035416&4294967295,A=T+(j<<7&4294967295|j>>>25),j=L+(R^A&(T^R))+k[9]+2336552879&4294967295,L=A+(j<<12&4294967295|j>>>20),j=R+(T^L&(A^T))+k[10]+4294925233&4294967295,R=L+(j<<17&4294967295|j>>>15),j=T+(A^R&(L^A))+k[11]+2304563134&4294967295,T=R+(j<<22&4294967295|j>>>10),j=A+(L^T&(R^L))+k[12]+1804603682&4294967295,A=T+(j<<7&4294967295|j>>>25),j=L+(R^A&(T^R))+k[13]+4254626195&4294967295,L=A+(j<<12&4294967295|j>>>20),j=R+(T^L&(A^T))+k[14]+2792965006&4294967295,R=L+(j<<17&4294967295|j>>>15),j=T+(A^R&(L^A))+k[15]+1236535329&4294967295,T=R+(j<<22&4294967295|j>>>10),j=A+(R^L&(T^R))+k[1]+4129170786&4294967295,A=T+(j<<5&4294967295|j>>>27),j=L+(T^R&(A^T))+k[6]+3225465664&4294967295,L=A+(j<<9&4294967295|j>>>23),j=R+(A^T&(L^A))+k[11]+643717713&4294967295,R=L+(j<<14&4294967295|j>>>18),j=T+(L^A&(R^L))+k[0]+3921069994&4294967295,T=R+(j<<20&4294967295|j>>>12),j=A+(R^L&(T^R))+k[5]+3593408605&4294967295,A=T+(j<<5&4294967295|j>>>27),j=L+(T^R&(A^T))+k[10]+38016083&4294967295,L=A+(j<<9&4294967295|j>>>23),j=R+(A^T&(L^A))+k[15]+3634488961&4294967295,R=L+(j<<14&4294967295|j>>>18),j=T+(L^A&(R^L))+k[4]+3889429448&4294967295,T=R+(j<<20&4294967295|j>>>12),j=A+(R^L&(T^R))+k[9]+568446438&4294967295,A=T+(j<<5&4294967295|j>>>27),j=L+(T^R&(A^T))+k[14]+3275163606&4294967295,L=A+(j<<9&4294967295|j>>>23),j=R+(A^T&(L^A))+k[3]+4107603335&4294967295,R=L+(j<<14&4294967295|j>>>18),j=T+(L^A&(R^L))+k[8]+1163531501&4294967295,T=R+(j<<20&4294967295|j>>>12),j=A+(R^L&(T^R))+k[13]+2850285829&4294967295,A=T+(j<<5&4294967295|j>>>27),j=L+(T^R&(A^T))+k[2]+4243563512&4294967295,L=A+(j<<9&4294967295|j>>>23),j=R+(A^T&(L^A))+k[7]+1735328473&4294967295,R=L+(j<<14&4294967295|j>>>18),j=T+(L^A&(R^L))+k[12]+2368359562&4294967295,T=R+(j<<20&4294967295|j>>>12),j=A+(T^R^L)+k[5]+4294588738&4294967295,A=T+(j<<4&4294967295|j>>>28),j=L+(A^T^R)+k[8]+2272392833&4294967295,L=A+(j<<11&4294967295|j>>>21),j=R+(L^A^T)+k[11]+1839030562&4294967295,R=L+(j<<16&4294967295|j>>>16),j=T+(R^L^A)+k[14]+4259657740&4294967295,T=R+(j<<23&4294967295|j>>>9),j=A+(T^R^L)+k[1]+2763975236&4294967295,A=T+(j<<4&4294967295|j>>>28),j=L+(A^T^R)+k[4]+1272893353&4294967295,L=A+(j<<11&4294967295|j>>>21),j=R+(L^A^T)+k[7]+4139469664&4294967295,R=L+(j<<16&4294967295|j>>>16),j=T+(R^L^A)+k[10]+3200236656&4294967295,T=R+(j<<23&4294967295|j>>>9),j=A+(T^R^L)+k[13]+681279174&4294967295,A=T+(j<<4&4294967295|j>>>28),j=L+(A^T^R)+k[0]+3936430074&4294967295,L=A+(j<<11&4294967295|j>>>21),j=R+(L^A^T)+k[3]+3572445317&4294967295,R=L+(j<<16&4294967295|j>>>16),j=T+(R^L^A)+k[6]+76029189&4294967295,T=R+(j<<23&4294967295|j>>>9),j=A+(T^R^L)+k[9]+3654602809&4294967295,A=T+(j<<4&4294967295|j>>>28),j=L+(A^T^R)+k[12]+3873151461&4294967295,L=A+(j<<11&4294967295|j>>>21),j=R+(L^A^T)+k[15]+530742520&4294967295,R=L+(j<<16&4294967295|j>>>16),j=T+(R^L^A)+k[2]+3299628645&4294967295,T=R+(j<<23&4294967295|j>>>9),j=A+(R^(T|~L))+k[0]+4096336452&4294967295,A=T+(j<<6&4294967295|j>>>26),j=L+(T^(A|~R))+k[7]+1126891415&4294967295,L=A+(j<<10&4294967295|j>>>22),j=R+(A^(L|~T))+k[14]+2878612391&4294967295,R=L+(j<<15&4294967295|j>>>17),j=T+(L^(R|~A))+k[5]+4237533241&4294967295,T=R+(j<<21&4294967295|j>>>11),j=A+(R^(T|~L))+k[12]+1700485571&4294967295,A=T+(j<<6&4294967295|j>>>26),j=L+(T^(A|~R))+k[3]+2399980690&4294967295,L=A+(j<<10&4294967295|j>>>22),j=R+(A^(L|~T))+k[10]+4293915773&4294967295,R=L+(j<<15&4294967295|j>>>17),j=T+(L^(R|~A))+k[1]+2240044497&4294967295,T=R+(j<<21&4294967295|j>>>11),j=A+(R^(T|~L))+k[8]+1873313359&4294967295,A=T+(j<<6&4294967295|j>>>26),j=L+(T^(A|~R))+k[15]+4264355552&4294967295,L=A+(j<<10&4294967295|j>>>22),j=R+(A^(L|~T))+k[6]+2734768916&4294967295,R=L+(j<<15&4294967295|j>>>17),j=T+(L^(R|~A))+k[13]+1309151649&4294967295,T=R+(j<<21&4294967295|j>>>11),j=A+(R^(T|~L))+k[4]+4149444226&4294967295,A=T+(j<<6&4294967295|j>>>26),j=L+(T^(A|~R))+k[11]+3174756917&4294967295,L=A+(j<<10&4294967295|j>>>22),j=R+(A^(L|~T))+k[2]+718787259&4294967295,R=L+(j<<15&4294967295|j>>>17),j=T+(L^(R|~A))+k[9]+3951481745&4294967295,D.g[0]=D.g[0]+A&4294967295,D.g[1]=D.g[1]+(R+(j<<21&4294967295|j>>>11))&4294967295,D.g[2]=D.g[2]+R&4294967295,D.g[3]=D.g[3]+L&4294967295}r.prototype.u=function(D,A){A===void 0&&(A=D.length);for(var T=A-this.blockSize,k=this.B,R=this.h,L=0;L<A;){if(R==0)for(;L<=T;)i(this,D,L),L+=this.blockSize;if(typeof D=="string"){for(;L<A;)if(k[R++]=D.charCodeAt(L++),R==this.blockSize){i(this,k),R=0;break}}else for(;L<A;)if(k[R++]=D[L++],R==this.blockSize){i(this,k),R=0;break}}this.h=R,this.o+=A},r.prototype.v=function(){var D=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);D[0]=128;for(var A=1;A<D.length-8;++A)D[A]=0;var T=8*this.o;for(A=D.length-8;A<D.length;++A)D[A]=T&255,T/=256;for(this.u(D),D=Array(16),A=T=0;4>A;++A)for(var k=0;32>k;k+=8)D[T++]=this.g[A]>>>k&255;return D};function a(D,A){var T=s;return Object.prototype.hasOwnProperty.call(T,D)?T[D]:T[D]=A(D)}function o(D,A){this.h=A;for(var T=[],k=!0,R=D.length-1;0<=R;R--){var L=D[R]|0;k&&L==A||(T[R]=L,k=!1)}this.g=T}var s={};function u(D){return-128<=D&&128>D?a(D,function(A){return new o([A|0],0>A?-1:0)}):new o([D|0],0>D?-1:0)}function f(D){if(isNaN(D)||!isFinite(D))return p;if(0>D)return I(f(-D));for(var A=[],T=1,k=0;D>=T;k++)A[k]=D/T|0,T*=4294967296;return new o(A,0)}function h(D,A){if(D.length==0)throw Error("number format error: empty string");if(A=A||10,2>A||36<A)throw Error("radix out of range: "+A);if(D.charAt(0)=="-")return I(h(D.substring(1),A));if(0<=D.indexOf("-"))throw Error('number format error: interior "-" character');for(var T=f(Math.pow(A,8)),k=p,R=0;R<D.length;R+=8){var L=Math.min(8,D.length-R),j=parseInt(D.substring(R,R+L),A);8>L?(L=f(Math.pow(A,L)),k=k.j(L).add(f(j))):(k=k.j(T),k=k.add(f(j)))}return k}var p=u(0),g=u(1),m=u(16777216);n=o.prototype,n.m=function(){if(w(this))return-I(this).m();for(var D=0,A=1,T=0;T<this.g.length;T++){var k=this.i(T);D+=(0<=k?k:4294967296+k)*A,A*=4294967296}return D},n.toString=function(D){if(D=D||10,2>D||36<D)throw Error("radix out of range: "+D);if(x(this))return"0";if(w(this))return"-"+I(this).toString(D);for(var A=f(Math.pow(D,6)),T=this,k="";;){var R=V(T,A).g;T=C(T,R.j(A));var L=((0<T.g.length?T.g[0]:T.h)>>>0).toString(D);if(T=R,x(T))return L+k;for(;6>L.length;)L="0"+L;k=L+k}},n.i=function(D){return 0>D?0:D<this.g.length?this.g[D]:this.h};function x(D){if(D.h!=0)return!1;for(var A=0;A<D.g.length;A++)if(D.g[A]!=0)return!1;return!0}function w(D){return D.h==-1}n.l=function(D){return D=C(this,D),w(D)?-1:x(D)?0:1};function I(D){for(var A=D.g.length,T=[],k=0;k<A;k++)T[k]=~D.g[k];return new o(T,~D.h).add(g)}n.abs=function(){return w(this)?I(this):this},n.add=function(D){for(var A=Math.max(this.g.length,D.g.length),T=[],k=0,R=0;R<=A;R++){var L=k+(this.i(R)&65535)+(D.i(R)&65535),j=(L>>>16)+(this.i(R)>>>16)+(D.i(R)>>>16);k=j>>>16,L&=65535,j&=65535,T[R]=j<<16|L}return new o(T,T[T.length-1]&-2147483648?-1:0)};function C(D,A){return D.add(I(A))}n.j=function(D){if(x(this)||x(D))return p;if(w(this))return w(D)?I(this).j(I(D)):I(I(this).j(D));if(w(D))return I(this.j(I(D)));if(0>this.l(m)&&0>D.l(m))return f(this.m()*D.m());for(var A=this.g.length+D.g.length,T=[],k=0;k<2*A;k++)T[k]=0;for(k=0;k<this.g.length;k++)for(var R=0;R<D.g.length;R++){var L=this.i(k)>>>16,j=this.i(k)&65535,H=D.i(R)>>>16,ne=D.i(R)&65535;T[2*k+2*R]+=j*ne,P(T,2*k+2*R),T[2*k+2*R+1]+=L*ne,P(T,2*k+2*R+1),T[2*k+2*R+1]+=j*H,P(T,2*k+2*R+1),T[2*k+2*R+2]+=L*H,P(T,2*k+2*R+2)}for(k=0;k<A;k++)T[k]=T[2*k+1]<<16|T[2*k];for(k=A;k<2*A;k++)T[k]=0;return new o(T,0)};function P(D,A){for(;(D[A]&65535)!=D[A];)D[A+1]+=D[A]>>>16,D[A]&=65535,A++}function B(D,A){this.g=D,this.h=A}function V(D,A){if(x(A))throw Error("division by zero");if(x(D))return new B(p,p);if(w(D))return A=V(I(D),A),new B(I(A.g),I(A.h));if(w(A))return A=V(D,I(A)),new B(I(A.g),A.h);if(30<D.g.length){if(w(D)||w(A))throw Error("slowDivide_ only works with positive integers.");for(var T=g,k=A;0>=k.l(D);)T=Y(T),k=Y(k);var R=q(T,1),L=q(k,1);for(k=q(k,2),T=q(T,2);!x(k);){var j=L.add(k);0>=j.l(D)&&(R=R.add(T),L=j),k=q(k,1),T=q(T,1)}return A=C(D,R.j(A)),new B(R,A)}for(R=p;0<=D.l(A);){for(T=Math.max(1,Math.floor(D.m()/A.m())),k=Math.ceil(Math.log(T)/Math.LN2),k=48>=k?1:Math.pow(2,k-48),L=f(T),j=L.j(A);w(j)||0<j.l(D);)T-=k,L=f(T),j=L.j(A);x(L)&&(L=g),R=R.add(L),D=C(D,j)}return new B(R,D)}n.A=function(D){return V(this,D).h},n.and=function(D){for(var A=Math.max(this.g.length,D.g.length),T=[],k=0;k<A;k++)T[k]=this.i(k)&D.i(k);return new o(T,this.h&D.h)},n.or=function(D){for(var A=Math.max(this.g.length,D.g.length),T=[],k=0;k<A;k++)T[k]=this.i(k)|D.i(k);return new o(T,this.h|D.h)},n.xor=function(D){for(var A=Math.max(this.g.length,D.g.length),T=[],k=0;k<A;k++)T[k]=this.i(k)^D.i(k);return new o(T,this.h^D.h)};function Y(D){for(var A=D.g.length+1,T=[],k=0;k<A;k++)T[k]=D.i(k)<<1|D.i(k-1)>>>31;return new o(T,D.h)}function q(D,A){var T=A>>5;A%=32;for(var k=D.g.length-T,R=[],L=0;L<k;L++)R[L]=0<A?D.i(L+T)>>>A|D.i(L+T+1)<<32-A:D.i(L+T);return new o(R,D.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,l6=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=f,o.fromString=h,tf=o}).apply(typeof cb<"u"?cb:typeof self<"u"?self:typeof window<"u"?window:{});var Ip=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var u6,O1,c6,Yp,Jv,f6,h6,d6;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(_,F,X){return _==Array.prototype||_==Object.prototype||(_[F]=X.value),_};function t(_){_=[typeof globalThis=="object"&&globalThis,_,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ip=="object"&&Ip];for(var F=0;F<_.length;++F){var X=_[F];if(X&&X.Math==Math)return X}throw Error("Cannot find global object")}var r=t(this);function i(_,F){if(F)e:{var X=r;_=_.split(".");for(var se=0;se<_.length-1;se++){var Ce=_[se];if(!(Ce in X))break e;X=X[Ce]}_=_[_.length-1],se=X[_],F=F(se),F!=se&&F!=null&&e(X,_,{configurable:!0,writable:!0,value:F})}}function a(_,F){_ instanceof String&&(_+="");var X=0,se=!1,Ce={next:function(){if(!se&&X<_.length){var Le=X++;return{value:F(Le,_[Le]),done:!1}}return se=!0,{done:!0,value:void 0}}};return Ce[Symbol.iterator]=function(){return Ce},Ce}i("Array.prototype.values",function(_){return _||function(){return a(this,function(F,X){return X})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},s=this||self;function u(_){var F=typeof _;return F=F!="object"?F:_?Array.isArray(_)?"array":F:"null",F=="array"||F=="object"&&typeof _.length=="number"}function f(_){var F=typeof _;return F=="object"&&_!=null||F=="function"}function h(_,F,X){return _.call.apply(_.bind,arguments)}function p(_,F,X){if(!_)throw Error();if(2<arguments.length){var se=Array.prototype.slice.call(arguments,2);return function(){var Ce=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(Ce,se),_.apply(F,Ce)}}return function(){return _.apply(F,arguments)}}function g(_,F,X){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,g.apply(null,arguments)}function m(_,F){var X=Array.prototype.slice.call(arguments,1);return function(){var se=X.slice();return se.push.apply(se,arguments),_.apply(this,se)}}function x(_,F){function X(){}X.prototype=F.prototype,_.aa=F.prototype,_.prototype=new X,_.prototype.constructor=_,_.Qb=function(se,Ce,Le){for(var nt=Array(arguments.length-2),Ut=2;Ut<arguments.length;Ut++)nt[Ut-2]=arguments[Ut];return F.prototype[Ce].apply(se,nt)}}function w(_){const F=_.length;if(0<F){const X=Array(F);for(let se=0;se<F;se++)X[se]=_[se];return X}return[]}function I(_,F){for(let X=1;X<arguments.length;X++){const se=arguments[X];if(u(se)){const Ce=_.length||0,Le=se.length||0;_.length=Ce+Le;for(let nt=0;nt<Le;nt++)_[Ce+nt]=se[nt]}else _.push(se)}}class C{constructor(F,X){this.i=F,this.j=X,this.h=0,this.g=null}get(){let F;return 0<this.h?(this.h--,F=this.g,this.g=F.next,F.next=null):F=this.i(),F}}function P(_){return/^[\s\xa0]*$/.test(_)}function B(){var _=s.navigator;return _&&(_=_.userAgent)?_:""}function V(_){return V[" "](_),_}V[" "]=function(){};var Y=B().indexOf("Gecko")!=-1&&!(B().toLowerCase().indexOf("webkit")!=-1&&B().indexOf("Edge")==-1)&&!(B().indexOf("Trident")!=-1||B().indexOf("MSIE")!=-1)&&B().indexOf("Edge")==-1;function q(_,F,X){for(const se in _)F.call(X,_[se],se,_)}function D(_,F){for(const X in _)F.call(void 0,_[X],X,_)}function A(_){const F={};for(const X in _)F[X]=_[X];return F}const T="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function k(_,F){let X,se;for(let Ce=1;Ce<arguments.length;Ce++){se=arguments[Ce];for(X in se)_[X]=se[X];for(let Le=0;Le<T.length;Le++)X=T[Le],Object.prototype.hasOwnProperty.call(se,X)&&(_[X]=se[X])}}function R(_){var F=1;_=_.split(":");const X=[];for(;0<F&&_.length;)X.push(_.shift()),F--;return _.length&&X.push(_.join(":")),X}function L(_){s.setTimeout(()=>{throw _},0)}function j(){var _=le;let F=null;return _.g&&(F=_.g,_.g=_.g.next,_.g||(_.h=null),F.next=null),F}class H{constructor(){this.h=this.g=null}add(F,X){const se=ne.get();se.set(F,X),this.h?this.h.next=se:this.g=se,this.h=se}}var ne=new C(()=>new U,_=>_.reset());class U{constructor(){this.next=this.g=this.h=null}set(F,X){this.h=F,this.g=X,this.next=null}reset(){this.next=this.g=this.h=null}}let z,ee=!1,le=new H,$=()=>{const _=s.Promise.resolve(void 0);z=()=>{_.then(ve)}};var ve=()=>{for(var _;_=j();){try{_.h.call(_.g)}catch(X){L(X)}var F=ne;F.j(_),100>F.h&&(F.h++,_.next=F.g,F.g=_)}ee=!1};function G(){this.s=this.s,this.C=this.C}G.prototype.s=!1,G.prototype.ma=function(){this.s||(this.s=!0,this.N())},G.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Q(_,F){this.type=_,this.g=this.target=F,this.defaultPrevented=!1}Q.prototype.h=function(){this.defaultPrevented=!0};var te=function(){if(!s.addEventListener||!Object.defineProperty)return!1;var _=!1,F=Object.defineProperty({},"passive",{get:function(){_=!0}});try{const X=()=>{};s.addEventListener("test",X,F),s.removeEventListener("test",X,F)}catch{}return _}();function ie(_,F){if(Q.call(this,_?_.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,_){var X=this.type=_.type,se=_.changedTouches&&_.changedTouches.length?_.changedTouches[0]:null;if(this.target=_.target||_.srcElement,this.g=F,F=_.relatedTarget){if(Y){e:{try{V(F.nodeName);var Ce=!0;break e}catch{}Ce=!1}Ce||(F=null)}}else X=="mouseover"?F=_.fromElement:X=="mouseout"&&(F=_.toElement);this.relatedTarget=F,se?(this.clientX=se.clientX!==void 0?se.clientX:se.pageX,this.clientY=se.clientY!==void 0?se.clientY:se.pageY,this.screenX=se.screenX||0,this.screenY=se.screenY||0):(this.clientX=_.clientX!==void 0?_.clientX:_.pageX,this.clientY=_.clientY!==void 0?_.clientY:_.pageY,this.screenX=_.screenX||0,this.screenY=_.screenY||0),this.button=_.button,this.key=_.key||"",this.ctrlKey=_.ctrlKey,this.altKey=_.altKey,this.shiftKey=_.shiftKey,this.metaKey=_.metaKey,this.pointerId=_.pointerId||0,this.pointerType=typeof _.pointerType=="string"?_.pointerType:de[_.pointerType]||"",this.state=_.state,this.i=_,_.defaultPrevented&&ie.aa.h.call(this)}}x(ie,Q);var de={2:"touch",3:"pen",4:"mouse"};ie.prototype.h=function(){ie.aa.h.call(this);var _=this.i;_.preventDefault?_.preventDefault():_.returnValue=!1};var Ae="closure_listenable_"+(1e6*Math.random()|0),be=0;function Te(_,F,X,se,Ce){this.listener=_,this.proxy=null,this.src=F,this.type=X,this.capture=!!se,this.ha=Ce,this.key=++be,this.da=this.fa=!1}function We(_){_.da=!0,_.listener=null,_.proxy=null,_.src=null,_.ha=null}function He(_){this.src=_,this.g={},this.h=0}He.prototype.add=function(_,F,X,se,Ce){var Le=_.toString();_=this.g[Le],_||(_=this.g[Le]=[],this.h++);var nt=st(_,F,se,Ce);return-1<nt?(F=_[nt],X||(F.fa=!1)):(F=new Te(F,this.src,Le,!!se,Ce),F.fa=X,_.push(F)),F};function rt(_,F){var X=F.type;if(X in _.g){var se=_.g[X],Ce=Array.prototype.indexOf.call(se,F,void 0),Le;(Le=0<=Ce)&&Array.prototype.splice.call(se,Ce,1),Le&&(We(F),_.g[X].length==0&&(delete _.g[X],_.h--))}}function st(_,F,X,se){for(var Ce=0;Ce<_.length;++Ce){var Le=_[Ce];if(!Le.da&&Le.listener==F&&Le.capture==!!X&&Le.ha==se)return Ce}return-1}var wt="closure_lm_"+(1e6*Math.random()|0),Be={};function me(_,F,X,se,Ce){if(Array.isArray(F)){for(var Le=0;Le<F.length;Le++)me(_,F[Le],X,se,Ce);return null}return X=Rt(X),_&&_[Ae]?_.K(F,X,f(se)?!!se.capture:!1,Ce):gt(_,F,X,!1,se,Ce)}function gt(_,F,X,se,Ce,Le){if(!F)throw Error("Invalid event type");var nt=f(Ce)?!!Ce.capture:!!Ce,Ut=ct(_);if(Ut||(_[wt]=Ut=new He(_)),X=Ut.add(F,X,se,nt,Le),X.proxy)return X;if(se=lt(),X.proxy=se,se.src=_,se.listener=X,_.addEventListener)te||(Ce=nt),Ce===void 0&&(Ce=!1),_.addEventListener(F.toString(),se,Ce);else if(_.attachEvent)_.attachEvent(at(F.toString()),se);else if(_.addListener&&_.removeListener)_.addListener(se);else throw Error("addEventListener and attachEvent are unavailable.");return X}function lt(){function _(X){return F.call(_.src,_.listener,X)}const F=ot;return _}function Xe(_,F,X,se,Ce){if(Array.isArray(F))for(var Le=0;Le<F.length;Le++)Xe(_,F[Le],X,se,Ce);else se=f(se)?!!se.capture:!!se,X=Rt(X),_&&_[Ae]?(_=_.i,F=String(F).toString(),F in _.g&&(Le=_.g[F],X=st(Le,X,se,Ce),-1<X&&(We(Le[X]),Array.prototype.splice.call(Le,X,1),Le.length==0&&(delete _.g[F],_.h--)))):_&&(_=ct(_))&&(F=_.g[F.toString()],_=-1,F&&(_=st(F,X,se,Ce)),(X=-1<_?F[_]:null)&&it(X))}function it(_){if(typeof _!="number"&&_&&!_.da){var F=_.src;if(F&&F[Ae])rt(F.i,_);else{var X=_.type,se=_.proxy;F.removeEventListener?F.removeEventListener(X,se,_.capture):F.detachEvent?F.detachEvent(at(X),se):F.addListener&&F.removeListener&&F.removeListener(se),(X=ct(F))?(rt(X,_),X.h==0&&(X.src=null,F[wt]=null)):We(_)}}}function at(_){return _ in Be?Be[_]:Be[_]="on"+_}function ot(_,F){if(_.da)_=!0;else{F=new ie(F,this);var X=_.listener,se=_.ha||_.src;_.fa&&it(_),_=X.call(se,F)}return _}function ct(_){return _=_[wt],_ instanceof He?_:null}var mt="__closure_events_fn_"+(1e9*Math.random()>>>0);function Rt(_){return typeof _=="function"?_:(_[mt]||(_[mt]=function(F){return _.handleEvent(F)}),_[mt])}function _t(){G.call(this),this.i=new He(this),this.M=this,this.F=null}x(_t,G),_t.prototype[Ae]=!0,_t.prototype.removeEventListener=function(_,F,X,se){Xe(this,_,F,X,se)};function bt(_,F){var X,se=_.F;if(se)for(X=[];se;se=se.F)X.push(se);if(_=_.M,se=F.type||F,typeof F=="string")F=new Q(F,_);else if(F instanceof Q)F.target=F.target||_;else{var Ce=F;F=new Q(se,_),k(F,Ce)}if(Ce=!0,X)for(var Le=X.length-1;0<=Le;Le--){var nt=F.g=X[Le];Ce=Nt(nt,se,!0,F)&&Ce}if(nt=F.g=_,Ce=Nt(nt,se,!0,F)&&Ce,Ce=Nt(nt,se,!1,F)&&Ce,X)for(Le=0;Le<X.length;Le++)nt=F.g=X[Le],Ce=Nt(nt,se,!1,F)&&Ce}_t.prototype.N=function(){if(_t.aa.N.call(this),this.i){var _=this.i,F;for(F in _.g){for(var X=_.g[F],se=0;se<X.length;se++)We(X[se]);delete _.g[F],_.h--}}this.F=null},_t.prototype.K=function(_,F,X,se){return this.i.add(String(_),F,!1,X,se)},_t.prototype.L=function(_,F,X,se){return this.i.add(String(_),F,!0,X,se)};function Nt(_,F,X,se){if(F=_.i.g[String(F)],!F)return!0;F=F.concat();for(var Ce=!0,Le=0;Le<F.length;++Le){var nt=F[Le];if(nt&&!nt.da&&nt.capture==X){var Ut=nt.listener,dn=nt.ha||nt.src;nt.fa&&rt(_.i,nt),Ce=Ut.call(dn,se)!==!1&&Ce}}return Ce&&!se.defaultPrevented}function xt(_,F,X){if(typeof _=="function")X&&(_=g(_,X));else if(_&&typeof _.handleEvent=="function")_=g(_.handleEvent,_);else throw Error("Invalid listener argument");return 2147483647<Number(F)?-1:s.setTimeout(_,F||0)}function Dt(_){_.g=xt(()=>{_.g=null,_.i&&(_.i=!1,Dt(_))},_.l);const F=_.h;_.h=null,_.m.apply(null,F)}class ut extends G{constructor(F,X){super(),this.m=F,this.l=X,this.h=null,this.i=!1,this.g=null}j(F){this.h=arguments,this.g?this.i=!0:Dt(this)}N(){super.N(),this.g&&(s.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function vn(_){G.call(this),this.h=_,this.g={}}x(vn,G);var zt=[];function Yn(_){q(_.g,function(F,X){this.g.hasOwnProperty(X)&&it(F)},_),_.g={}}vn.prototype.N=function(){vn.aa.N.call(this),Yn(this)},vn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Kt=s.JSON.stringify,An=s.JSON.parse,pi=class{stringify(_){return s.JSON.stringify(_,void 0)}parse(_){return s.JSON.parse(_,void 0)}};function on(){}on.prototype.h=null;function pa(_){return _.h||(_.h=_.i())}function Cn(){}var Mr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function sr(){Q.call(this,"d")}x(sr,Q);function yn(){Q.call(this,"c")}x(yn,Q);var Tt={},nn=null;function Si(){return nn=nn||new _t}Tt.La="serverreachability";function Mn(_){Q.call(this,Tt.La,_)}x(Mn,Q);function pr(_){const F=Si();bt(F,new Mn(F))}Tt.STAT_EVENT="statevent";function Ua(_,F){Q.call(this,Tt.STAT_EVENT,_),this.stat=F}x(Ua,Q);function vt(_){const F=Si();bt(F,new Ua(F,_))}Tt.Ma="timingevent";function Wn(_,F){Q.call(this,Tt.Ma,_),this.size=F}x(Wn,Q);function Gn(_,F){if(typeof _!="function")throw Error("Fn must not be null and must be a function");return s.setTimeout(function(){_()},F)}function gr(){this.g=!0}gr.prototype.xa=function(){this.g=!1};function Er(_,F,X,se,Ce,Le){_.info(function(){if(_.g)if(Le)for(var nt="",Ut=Le.split("&"),dn=0;dn<Ut.length;dn++){var Qt=Ut[dn].split("=");if(1<Qt.length){var Fn=Qt[0];Qt=Qt[1];var Kn=Fn.split("_");nt=2<=Kn.length&&Kn[1]=="type"?nt+(Fn+"="+Qt+"&"):nt+(Fn+"=redacted&")}}else nt=null;else nt=Le;return"XMLHTTP REQ ("+se+") [attempt "+Ce+"]: "+F+`
`+X+`
`+nt})}function Nr(_,F,X,se,Ce,Le,nt){_.info(function(){return"XMLHTTP RESP ("+se+") [ attempt "+Ce+"]: "+F+`
`+X+`
`+Le+" "+nt})}function Gr(_,F,X,se){_.info(function(){return"XMLHTTP TEXT ("+F+"): "+Ji(_,X)+(se?" "+se:"")})}function Ts(_,F){_.info(function(){return"TIMEOUT: "+F})}gr.prototype.info=function(){};function Ji(_,F){if(!_.g)return F;if(!F)return null;try{var X=JSON.parse(F);if(X){for(_=0;_<X.length;_++)if(Array.isArray(X[_])){var se=X[_];if(!(2>se.length)){var Ce=se[1];if(Array.isArray(Ce)&&!(1>Ce.length)){var Le=Ce[0];if(Le!="noop"&&Le!="stop"&&Le!="close")for(var nt=1;nt<Ce.length;nt++)Ce[nt]=""}}}}return Kt(X)}catch{return F}}var gi={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ti={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},$r;function ni(){}x(ni,on),ni.prototype.g=function(){return new XMLHttpRequest},ni.prototype.i=function(){return{}},$r=new ni;function lr(_,F,X,se){this.j=_,this.i=F,this.l=X,this.R=se||1,this.U=new vn(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Bn}function Bn(){this.i=null,this.g="",this.h=!1}var So={},Co={};function ji(_,F,X){_.L=1,_.v=ts(Ti(F)),_.m=X,_.P=!0,ga(_,null)}function ga(_,F){_.F=Date.now(),Rs(_),_.A=Ti(_.v);var X=_.A,se=_.R;Array.isArray(se)||(se=[String(se)]),Ft(X.i,"t",se),_.C=0,X=_.j.J,_.h=new Bn,_.g=J(_.j,X?F:null,!_.m),0<_.O&&(_.M=new ut(g(_.Y,_,_.g),_.O)),F=_.U,X=_.g,se=_.ca;var Ce="readystatechange";Array.isArray(Ce)||(Ce&&(zt[0]=Ce.toString()),Ce=zt);for(var Le=0;Le<Ce.length;Le++){var nt=me(X,Ce[Le],se||F.handleEvent,!1,F.h||F);if(!nt)break;F.g[nt.key]=nt}F=_.H?A(_.H):{},_.m?(_.u||(_.u="POST"),F["Content-Type"]="application/x-www-form-urlencoded",_.g.ea(_.A,_.u,_.m,F)):(_.u="GET",_.g.ea(_.A,_.u,null,F)),pr(),Er(_.i,_.u,_.A,_.l,_.R,_.m)}lr.prototype.ca=function(_){_=_.target;const F=this.M;F&&Yr(_)==3?F.j():this.Y(_)},lr.prototype.Y=function(_){try{if(_==this.g)e:{const Kn=Yr(this.g);var F=this.g.Ba();const oo=this.g.Z();if(!(3>Kn)&&(Kn!=3||this.g&&(this.h.h||this.g.oa()||cc(this.g)))){this.J||Kn!=4||F==7||(F==8||0>=oo?pr(3):pr(2)),Va(this);var X=this.g.Z();this.X=X;t:if(Is(this)){var se=cc(this.g);_="";var Ce=se.length,Le=Yr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ri(this),za(this);var nt="";break t}this.h.i=new s.TextDecoder}for(F=0;F<Ce;F++)this.h.h=!0,_+=this.h.i.decode(se[F],{stream:!(Le&&F==Ce-1)});se.length=0,this.h.g+=_,this.C=0,nt=this.h.g}else nt=this.g.oa();if(this.o=X==200,Nr(this.i,this.u,this.A,this.l,this.R,Kn,X),this.o){if(this.T&&!this.K){t:{if(this.g){var Ut,dn=this.g;if((Ut=dn.g?dn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!P(Ut)){var Qt=Ut;break t}}Qt=null}if(X=Qt)Gr(this.i,this.l,X,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,To(this,X);else{this.o=!1,this.s=3,vt(12),ri(this),za(this);break e}}if(this.P){X=!0;let Br;for(;!this.J&&this.C<nt.length;)if(Br=lu(this,nt),Br==Co){Kn==4&&(this.s=4,vt(14),X=!1),Gr(this.i,this.l,null,"[Incomplete Response]");break}else if(Br==So){this.s=4,vt(15),Gr(this.i,this.l,nt,"[Invalid Chunk]"),X=!1;break}else Gr(this.i,this.l,Br,null),To(this,Br);if(Is(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Kn!=4||nt.length!=0||this.h.h||(this.s=1,vt(16),X=!1),this.o=this.o&&X,!X)Gr(this.i,this.l,nt,"[Invalid Chunked Response]"),ri(this),za(this);else if(0<nt.length&&!this.W){this.W=!0;var Fn=this.j;Fn.g==this&&Fn.ba&&!Fn.M&&(Fn.j.info("Great, no buffering proxy detected. Bytes received: "+nt.length),ss(Fn),Fn.M=!0,vt(11))}}else Gr(this.i,this.l,nt,null),To(this,nt);Kn==4&&ri(this),this.o&&!this.J&&(Kn==4?ls(this.j,this):(this.o=!1,Rs(this)))}else is(this.g),X==400&&0<nt.indexOf("Unknown SID")?(this.s=3,vt(12)):(this.s=0,vt(13)),ri(this),za(this)}}}catch{}finally{}};function Is(_){return _.g?_.u=="GET"&&_.L!=2&&_.j.Ca:!1}function lu(_,F){var X=_.C,se=F.indexOf(`
`,X);return se==-1?Co:(X=Number(F.substring(X,se)),isNaN(X)?So:(se+=1,se+X>F.length?Co:(F=F.slice(se,se+X),_.C=se+X,F)))}lr.prototype.cancel=function(){this.J=!0,ri(this)};function Rs(_){_.S=Date.now()+_.I,ac(_,_.I)}function ac(_,F){if(_.B!=null)throw Error("WatchDog timer not null");_.B=Gn(g(_.ba,_),F)}function Va(_){_.B&&(s.clearTimeout(_.B),_.B=null)}lr.prototype.ba=function(){this.B=null;const _=Date.now();0<=_-this.S?(Ts(this.i,this.A),this.L!=2&&(pr(),vt(17)),ri(this),this.s=2,za(this)):ac(this,this.S-_)};function za(_){_.j.G==0||_.J||ls(_.j,_)}function ri(_){Va(_);var F=_.M;F&&typeof F.ma=="function"&&F.ma(),_.M=null,Yn(_.U),_.g&&(F=_.g,_.g=null,F.abort(),F.ma())}function To(_,F){try{var X=_.j;if(X.G!=0&&(X.g==_||uu(X.h,_))){if(!_.K&&uu(X.h,_)&&X.G==3){try{var se=X.Da.g.parse(F)}catch{se=null}if(Array.isArray(se)&&se.length==3){var Ce=se;if(Ce[0]==0){e:if(!X.u){if(X.g)if(X.g.F+3e3<_.F)ko(X),yl(X);else break e;ks(X),vt(18)}}else X.za=Ce[1],0<X.za-X.T&&37500>Ce[2]&&X.F&&X.v==0&&!X.C&&(X.C=Gn(g(X.Za,X),6e3));if(1>=Io(X.h)&&X.ca){try{X.ca()}catch{}X.ca=void 0}}else zi(X,11)}else if((_.K||X.g==_)&&ko(X),!P(F))for(Ce=X.Da.g.parse(F),F=0;F<Ce.length;F++){let Qt=Ce[F];if(X.T=Qt[0],Qt=Qt[1],X.G==2)if(Qt[0]=="c"){X.K=Qt[1],X.ia=Qt[2];const Fn=Qt[3];Fn!=null&&(X.la=Fn,X.j.info("VER="+X.la));const Kn=Qt[4];Kn!=null&&(X.Aa=Kn,X.j.info("SVER="+X.Aa));const oo=Qt[5];oo!=null&&typeof oo=="number"&&0<oo&&(se=1.5*oo,X.L=se,X.j.info("backChannelRequestTimeoutMs_="+se)),se=X;const Br=_.g;if(Br){const _a=Br.g?Br.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(_a){var Le=se.h;Le.g||_a.indexOf("spdy")==-1&&_a.indexOf("quic")==-1&&_a.indexOf("h2")==-1||(Le.j=Le.l,Le.g=new Set,Le.h&&(ur(Le,Le.h),Le.h=null))}if(se.D){const us=Br.g?Br.g.getResponseHeader("X-HTTP-Session-Id"):null;us&&(se.ya=us,jn(se.I,se.D,us))}}X.G=3,X.l&&X.l.ua(),X.ba&&(X.R=Date.now()-_.F,X.j.info("Handshake RTT: "+X.R+"ms")),se=X;var nt=_;if(se.qa=O(se,se.J?se.ia:null,se.W),nt.K){mi(se.h,nt);var Ut=nt,dn=se.L;dn&&(Ut.I=dn),Ut.B&&(Va(Ut),Rs(Ut)),se.g=nt}else _l(se);0<X.i.length&&xl(X)}else Qt[0]!="stop"&&Qt[0]!="close"||zi(X,7);else X.G==3&&(Qt[0]=="stop"||Qt[0]=="close"?Qt[0]=="stop"?zi(X,7):Lo(X):Qt[0]!="noop"&&X.l&&X.l.ta(Qt),X.v=0)}}pr(4)}catch{}}var oc=class{constructor(_,F){this.g=_,this.map=F}};function Za(_){this.l=_||10,s.PerformanceNavigationTiming?(_=s.performance.getEntriesByType("navigation"),_=0<_.length&&(_[0].nextHopProtocol=="hq"||_[0].nextHopProtocol=="h2")):_=!!(s.chrome&&s.chrome.loadTimes&&s.chrome.loadTimes()&&s.chrome.loadTimes().wasFetchedViaSpdy),this.j=_?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function pl(_){return _.h?!0:_.g?_.g.size>=_.j:!1}function Io(_){return _.h?1:_.g?_.g.size:0}function uu(_,F){return _.h?_.h==F:_.g?_.g.has(F):!1}function ur(_,F){_.g?_.g.add(F):_.h=F}function mi(_,F){_.h&&_.h==F?_.h=null:_.g&&_.g.has(F)&&_.g.delete(F)}Za.prototype.cancel=function(){if(this.i=gl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const _ of this.g.values())_.cancel();this.g.clear()}};function gl(_){if(_.h!=null)return _.i.concat(_.h.D);if(_.g!=null&&_.g.size!==0){let F=_.i;for(const X of _.g.values())F=F.concat(X.D);return F}return w(_.i)}function sc(_){if(_.V&&typeof _.V=="function")return _.V();if(typeof Map<"u"&&_ instanceof Map||typeof Set<"u"&&_ instanceof Set)return Array.from(_.values());if(typeof _=="string")return _.split("");if(u(_)){for(var F=[],X=_.length,se=0;se<X;se++)F.push(_[se]);return F}F=[],X=0;for(se in _)F[X++]=_[se];return F}function Zo(_){if(_.na&&typeof _.na=="function")return _.na();if(!_.V||typeof _.V!="function"){if(typeof Map<"u"&&_ instanceof Map)return Array.from(_.keys());if(!(typeof Set<"u"&&_ instanceof Set)){if(u(_)||typeof _=="string"){var F=[];_=_.length;for(var X=0;X<_;X++)F.push(X);return F}F=[],X=0;for(const se in _)F[X++]=se;return F}}}function cu(_,F){if(_.forEach&&typeof _.forEach=="function")_.forEach(F,void 0);else if(u(_)||typeof _=="string")Array.prototype.forEach.call(_,F,void 0);else for(var X=Zo(_),se=sc(_),Ce=se.length,Le=0;Le<Ce;Le++)F.call(void 0,se[Le],X&&X[Le],_)}var Ci=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ml(_,F){if(_){_=_.split("&");for(var X=0;X<_.length;X++){var se=_[X].indexOf("="),Ce=null;if(0<=se){var Le=_[X].substring(0,se);Ce=_[X].substring(se+1)}else Le=_[X];F(Le,Ce?decodeURIComponent(Ce.replace(/\+/g," ")):"")}}}function En(_){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,_ instanceof En){this.h=_.h,Jo(this,_.j),this.o=_.o,this.g=_.g,es(this,_.s),this.l=_.l;var F=_.i,X=new eo;X.i=F.i,F.g&&(X.g=new Map(F.g),X.h=F.h),Ja(this,X),this.m=_.m}else _&&(F=String(_).match(Ci))?(this.h=!1,Jo(this,F[1]||"",!0),this.o=ma(F[2]||""),this.g=ma(F[3]||"",!0),es(this,F[4]),this.l=ma(F[5]||"",!0),Ja(this,F[6]||"",!0),this.m=ma(F[7]||"")):(this.h=!1,this.i=new eo(null,this.h))}En.prototype.toString=function(){var _=[],F=this.j;F&&_.push(Ro(F,fu,!0),":");var X=this.g;return(X||F=="file")&&(_.push("//"),(F=this.o)&&_.push(Ro(F,fu,!0),"@"),_.push(encodeURIComponent(String(X)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),X=this.s,X!=null&&_.push(":",String(X))),(X=this.l)&&(this.g&&X.charAt(0)!="/"&&_.push("/"),_.push(Ro(X,X.charAt(0)=="/"?No:hu,!0))),(X=this.i.toString())&&_.push("?",X),(X=this.m)&&_.push("#",Ro(X,Do)),_.join("")};function Ti(_){return new En(_)}function Jo(_,F,X){_.j=X?ma(F,!0):F,_.j&&(_.j=_.j.replace(/:$/,""))}function es(_,F){if(F){if(F=Number(F),isNaN(F)||0>F)throw Error("Bad port number "+F);_.s=F}else _.s=null}function Ja(_,F,X){F instanceof eo?(_.i=F,uc(_.i,_.h)):(X||(F=Ro(F,vl)),_.i=new eo(F,_.h))}function jn(_,F,X){_.i.set(F,X)}function ts(_){return jn(_,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),_}function ma(_,F){return _?F?decodeURI(_.replace(/%25/g,"%2525")):decodeURIComponent(_):""}function Ro(_,F,X){return typeof _=="string"?(_=encodeURI(_).replace(F,lc),X&&(_=_.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_):null}function lc(_){return _=_.charCodeAt(0),"%"+(_>>4&15).toString(16)+(_&15).toString(16)}var fu=/[#\/\?@]/g,hu=/[#\?:]/g,No=/[#\?]/g,vl=/[#\?@]/g,Do=/#/g;function eo(_,F){this.h=this.g=null,this.i=_||null,this.j=!!F}function er(_){_.g||(_.g=new Map,_.h=0,_.i&&ml(_.i,function(F,X){_.add(decodeURIComponent(F.replace(/\+/g," ")),X)}))}n=eo.prototype,n.add=function(_,F){er(this),this.i=null,_=no(this,_);var X=this.g.get(_);return X||this.g.set(_,X=[]),X.push(F),this.h+=1,this};function Oo(_,F){er(_),F=no(_,F),_.g.has(F)&&(_.i=null,_.h-=_.g.get(F).length,_.g.delete(F))}function to(_,F){return er(_),F=no(_,F),_.g.has(F)}n.forEach=function(_,F){er(this),this.g.forEach(function(X,se){X.forEach(function(Ce){_.call(F,Ce,se,this)},this)},this)},n.na=function(){er(this);const _=Array.from(this.g.values()),F=Array.from(this.g.keys()),X=[];for(let se=0;se<F.length;se++){const Ce=_[se];for(let Le=0;Le<Ce.length;Le++)X.push(F[se])}return X},n.V=function(_){er(this);let F=[];if(typeof _=="string")to(this,_)&&(F=F.concat(this.g.get(no(this,_))));else{_=Array.from(this.g.values());for(let X=0;X<_.length;X++)F=F.concat(_[X])}return F},n.set=function(_,F){return er(this),this.i=null,_=no(this,_),to(this,_)&&(this.h-=this.g.get(_).length),this.g.set(_,[F]),this.h+=1,this},n.get=function(_,F){return _?(_=this.V(_),0<_.length?String(_[0]):F):F};function Ft(_,F,X){Oo(_,F),0<X.length&&(_.i=null,_.g.set(no(_,F),w(X)),_.h+=X.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const _=[],F=Array.from(this.g.keys());for(var X=0;X<F.length;X++){var se=F[X];const Le=encodeURIComponent(String(se)),nt=this.V(se);for(se=0;se<nt.length;se++){var Ce=Le;nt[se]!==""&&(Ce+="="+encodeURIComponent(String(nt[se]))),_.push(Ce)}}return this.i=_.join("&")};function no(_,F){return F=String(F),_.j&&(F=F.toLowerCase()),F}function uc(_,F){F&&!_.j&&(er(_),_.i=null,_.g.forEach(function(X,se){var Ce=se.toLowerCase();se!=Ce&&(Oo(this,se),Ft(this,Ce,X))},_)),_.j=F}function Fi(_,F){const X=new gr;if(s.Image){const se=new Image;se.onload=m(ea,X,"TestLoadImage: loaded",!0,F,se),se.onerror=m(ea,X,"TestLoadImage: error",!1,F,se),se.onabort=m(ea,X,"TestLoadImage: abort",!1,F,se),se.ontimeout=m(ea,X,"TestLoadImage: timeout",!1,F,se),s.setTimeout(function(){se.ontimeout&&se.ontimeout()},1e4),se.src=_}else F(!1)}function va(_,F){const X=new gr,se=new AbortController,Ce=setTimeout(()=>{se.abort(),ea(X,"TestPingServer: timeout",!1,F)},1e4);fetch(_,{signal:se.signal}).then(Le=>{clearTimeout(Ce),Le.ok?ea(X,"TestPingServer: ok",!0,F):ea(X,"TestPingServer: server error",!1,F)}).catch(()=>{clearTimeout(Ce),ea(X,"TestPingServer: error",!1,F)})}function ea(_,F,X,se,Ce){try{Ce&&(Ce.onload=null,Ce.onerror=null,Ce.onabort=null,Ce.ontimeout=null),se(X)}catch{}}function ro(){this.g=new pi}function ya(_,F,X){const se=X||"";try{cu(_,function(Ce,Le){let nt=Ce;f(Ce)&&(nt=Kt(Ce)),F.push(se+Le+"="+encodeURIComponent(nt))})}catch(Ce){throw F.push(se+"type="+encodeURIComponent("_badmap")),Ce}}function ns(_){this.l=_.Ub||null,this.j=_.eb||!1}x(ns,on),ns.prototype.g=function(){return new Po(this.l,this.j)},ns.prototype.i=function(_){return function(){return _}}({});function Po(_,F){_t.call(this),this.D=_,this.o=F,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}x(Po,_t),n=Po.prototype,n.open=function(_,F){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=_,this.A=F,this.readyState=1,Ui(this)},n.send=function(_){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const F={headers:this.u,method:this.B,credentials:this.m,cache:void 0};_&&(F.body=_),(this.D||s).fetch(new Request(this.A,F)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,xa(this)),this.readyState=0},n.Sa=function(_){if(this.g&&(this.l=_,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=_.headers,this.readyState=2,Ui(this)),this.g&&(this.readyState=3,Ui(this),this.g)))if(this.responseType==="arraybuffer")_.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof s.ReadableStream<"u"&&"body"in _){if(this.j=_.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;du(this)}else _.text().then(this.Ra.bind(this),this.ga.bind(this))};function du(_){_.j.read().then(_.Pa.bind(_)).catch(_.ga.bind(_))}n.Pa=function(_){if(this.g){if(this.o&&_.value)this.response.push(_.value);else if(!this.o){var F=_.value?_.value:new Uint8Array(0);(F=this.v.decode(F,{stream:!_.done}))&&(this.response=this.responseText+=F)}_.done?xa(this):Ui(this),this.readyState==3&&du(this)}},n.Ra=function(_){this.g&&(this.response=this.responseText=_,xa(this))},n.Qa=function(_){this.g&&(this.response=_,xa(this))},n.ga=function(){this.g&&xa(this)};function xa(_){_.readyState=4,_.l=null,_.j=null,_.v=null,Ui(_)}n.setRequestHeader=function(_,F){this.u.append(_,F)},n.getResponseHeader=function(_){return this.h&&this.h.get(_.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const _=[],F=this.h.entries();for(var X=F.next();!X.done;)X=X.value,_.push(X[0]+": "+X[1]),X=F.next();return _.join(`\r
`)};function Ui(_){_.onreadystatechange&&_.onreadystatechange.call(_)}Object.defineProperty(Po.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(_){this.m=_?"include":"same-origin"}});function io(_){let F="";return q(_,function(X,se){F+=se,F+=":",F+=X,F+=`\r
`}),F}function Xr(_,F,X){e:{for(se in X){var se=!1;break e}se=!0}se||(X=io(X),typeof _=="string"?X!=null&&encodeURIComponent(String(X)):jn(_,F,X))}function hn(_){_t.call(this),this.headers=new Map,this.o=_||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}x(hn,_t);var rs=/^https?$/i,ao=["POST","PUT"];n=hn.prototype,n.Ha=function(_){this.J=_},n.ea=function(_,F,X,se){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+_);F=F?F.toUpperCase():"GET",this.D=_,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():$r.g(),this.v=this.o?pa(this.o):pa($r),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(F,String(_),!0),this.B=!1}catch(Le){pu(this,Le);return}if(_=X||"",X=new Map(this.headers),se)if(Object.getPrototypeOf(se)===Object.prototype)for(var Ce in se)X.set(Ce,se[Ce]);else if(typeof se.keys=="function"&&typeof se.get=="function")for(const Le of se.keys())X.set(Le,se.get(Le));else throw Error("Unknown input type for opt_headers: "+String(se));se=Array.from(X.keys()).find(Le=>Le.toLowerCase()=="content-type"),Ce=s.FormData&&_ instanceof s.FormData,!(0<=Array.prototype.indexOf.call(ao,F,void 0))||se||Ce||X.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Le,nt]of X)this.g.setRequestHeader(Le,nt);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Vi(this),this.u=!0,this.g.send(_),this.u=!1}catch(Le){pu(this,Le)}};function pu(_,F){_.h=!1,_.g&&(_.j=!0,_.g.abort(),_.j=!1),_.l=F,_.m=5,Ns(_),qa(_)}function Ns(_){_.A||(_.A=!0,bt(_,"complete"),bt(_,"error"))}n.abort=function(_){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=_||7,bt(this,"complete"),bt(this,"abort"),qa(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),qa(this,!0)),hn.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Ds(this):this.bb())},n.bb=function(){Ds(this)};function Ds(_){if(_.h&&typeof o<"u"&&(!_.v[1]||Yr(_)!=4||_.Z()!=2)){if(_.u&&Yr(_)==4)xt(_.Ea,0,_);else if(bt(_,"readystatechange"),Yr(_)==4){_.h=!1;try{const nt=_.Z();e:switch(nt){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var F=!0;break e;default:F=!1}var X;if(!(X=F)){var se;if(se=nt===0){var Ce=String(_.D).match(Ci)[1]||null;!Ce&&s.self&&s.self.location&&(Ce=s.self.location.protocol.slice(0,-1)),se=!rs.test(Ce?Ce.toLowerCase():"")}X=se}if(X)bt(_,"complete"),bt(_,"success");else{_.m=6;try{var Le=2<Yr(_)?_.g.statusText:""}catch{Le=""}_.l=Le+" ["+_.Z()+"]",Ns(_)}}finally{qa(_)}}}}function qa(_,F){if(_.g){Vi(_);const X=_.g,se=_.v[0]?()=>{}:null;_.g=null,_.v=null,F||bt(_,"ready");try{X.onreadystatechange=se}catch{}}}function Vi(_){_.I&&(s.clearTimeout(_.I),_.I=null)}n.isActive=function(){return!!this.g};function Yr(_){return _.g?_.g.readyState:0}n.Z=function(){try{return 2<Yr(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(_){if(this.g){var F=this.g.responseText;return _&&F.indexOf(_)==0&&(F=F.substring(_.length)),An(F)}};function cc(_){try{if(!_.g)return null;if("response"in _.g)return _.g.response;switch(_.H){case"":case"text":return _.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in _.g)return _.g.mozResponseArrayBuffer}return null}catch{return null}}function is(_){const F={};_=(_.g&&2<=Yr(_)&&_.g.getAllResponseHeaders()||"").split(`\r
`);for(let se=0;se<_.length;se++){if(P(_[se]))continue;var X=R(_[se]);const Ce=X[0];if(X=X[1],typeof X!="string")continue;X=X.trim();const Le=F[Ce]||[];F[Ce]=Le,Le.push(X)}D(F,function(se){return se.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ii(_,F,X){return X&&X.internalChannelParams&&X.internalChannelParams[_]||F}function as(_){this.Aa=0,this.i=[],this.j=new gr,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ii("failFast",!1,_),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ii("baseRetryDelayMs",5e3,_),this.cb=Ii("retryDelaySeedMs",1e4,_),this.Wa=Ii("forwardChannelMaxRetries",2,_),this.wa=Ii("forwardChannelRequestTimeoutMs",2e4,_),this.pa=_&&_.xmlHttpFactory||void 0,this.Xa=_&&_.Tb||void 0,this.Ca=_&&_.useFetchStreams||!1,this.L=void 0,this.J=_&&_.supportsCrossDomainXhr||!1,this.K="",this.h=new Za(_&&_.concurrentRequestLimit),this.Da=new ro,this.P=_&&_.fastHandshake||!1,this.O=_&&_.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=_&&_.Rb||!1,_&&_.xa&&this.j.xa(),_&&_.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&_&&_.detectBufferingProxy||!1,this.ja=void 0,_&&_.longPollingTimeout&&0<_.longPollingTimeout&&(this.ja=_.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=as.prototype,n.la=8,n.G=1,n.connect=function(_,F,X,se){vt(0),this.W=_,this.H=F||{},X&&se!==void 0&&(this.H.OSID=X,this.H.OAID=se),this.F=this.X,this.I=O(this,null,this.W),xl(this)};function Lo(_){if(Os(_),_.G==3){var F=_.U++,X=Ti(_.I);if(jn(X,"SID",_.K),jn(X,"RID",F),jn(X,"TYPE","terminate"),os(_,X),F=new lr(_,_.j,F),F.L=2,F.v=ts(Ti(X)),X=!1,s.navigator&&s.navigator.sendBeacon)try{X=s.navigator.sendBeacon(F.v.toString(),"")}catch{}!X&&s.Image&&(new Image().src=F.v,X=!0),X||(F.g=J(F.j,null),F.g.ea(F.v)),F.F=Date.now(),Rs(F)}wl(_)}function yl(_){_.g&&(ss(_),_.g.cancel(),_.g=null)}function Os(_){yl(_),_.u&&(s.clearTimeout(_.u),_.u=null),ko(_),_.h.cancel(),_.s&&(typeof _.s=="number"&&s.clearTimeout(_.s),_.s=null)}function xl(_){if(!pl(_.h)&&!_.s){_.s=!0;var F=_.Ga;z||$(),ee||(z(),ee=!0),le.add(F,_),_.B=0}}function gu(_,F){return Io(_.h)>=_.h.j-(_.s?1:0)?!1:_.s?(_.i=F.D.concat(_.i),!0):_.G==1||_.G==2||_.B>=(_.Va?0:_.Wa)?!1:(_.s=Gn(g(_.Ga,_,F),Ms(_,_.B)),_.B++,!0)}n.Ga=function(_){if(this.s)if(this.s=null,this.G==1){if(!_){this.U=Math.floor(1e5*Math.random()),_=this.U++;const Ce=new lr(this,this.j,_);let Le=this.o;if(this.S&&(Le?(Le=A(Le),k(Le,this.S)):Le=this.S),this.m!==null||this.O||(Ce.H=Le,Le=null),this.P)e:{for(var F=0,X=0;X<this.i.length;X++){t:{var se=this.i[X];if("__data__"in se.map&&(se=se.map.__data__,typeof se=="string")){se=se.length;break t}se=void 0}if(se===void 0)break;if(F+=se,4096<F){F=X;break e}if(F===4096||X===this.i.length-1){F=X+1;break e}}F=1e3}else F=1e3;F=Ls(this,Ce,F),X=Ti(this.I),jn(X,"RID",_),jn(X,"CVER",22),this.D&&jn(X,"X-HTTP-Session-Id",this.D),os(this,X),Le&&(this.O?F="headers="+encodeURIComponent(String(io(Le)))+"&"+F:this.m&&Xr(X,this.m,Le)),ur(this.h,Ce),this.Ua&&jn(X,"TYPE","init"),this.P?(jn(X,"$req",F),jn(X,"SID","null"),Ce.T=!0,ji(Ce,X,null)):ji(Ce,X,F),this.G=2}}else this.G==3&&(_?Ps(this,_):this.i.length==0||pl(this.h)||Ps(this))};function Ps(_,F){var X;F?X=F.l:X=_.U++;const se=Ti(_.I);jn(se,"SID",_.K),jn(se,"RID",X),jn(se,"AID",_.T),os(_,se),_.m&&_.o&&Xr(se,_.m,_.o),X=new lr(_,_.j,X,_.B+1),_.m===null&&(X.H=_.o),F&&(_.i=F.D.concat(_.i)),F=Ls(_,X,1e3),X.I=Math.round(.5*_.wa)+Math.round(.5*_.wa*Math.random()),ur(_.h,X),ji(X,se,F)}function os(_,F){_.H&&q(_.H,function(X,se){jn(F,se,X)}),_.l&&cu({},function(X,se){jn(F,se,X)})}function Ls(_,F,X){X=Math.min(_.i.length,X);var se=_.l?g(_.l.Na,_.l,_):null;e:{var Ce=_.i;let Le=-1;for(;;){const nt=["count="+X];Le==-1?0<X?(Le=Ce[0].g,nt.push("ofs="+Le)):Le=0:nt.push("ofs="+Le);let Ut=!0;for(let dn=0;dn<X;dn++){let Qt=Ce[dn].g;const Fn=Ce[dn].map;if(Qt-=Le,0>Qt)Le=Math.max(0,Ce[dn].g-100),Ut=!1;else try{ya(Fn,nt,"req"+Qt+"_")}catch{se&&se(Fn)}}if(Ut){se=nt.join("&");break e}}}return _=_.i.splice(0,X),F.D=_,se}function _l(_){if(!_.g&&!_.u){_.Y=1;var F=_.Fa;z||$(),ee||(z(),ee=!0),le.add(F,_),_.v=0}}function ks(_){return _.g||_.u||3<=_.v?!1:(_.Y++,_.u=Gn(g(_.Fa,_),Ms(_,_.v)),_.v++,!0)}n.Fa=function(){if(this.u=null,fc(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var _=2*this.R;this.j.info("BP detection timer enabled: "+_),this.A=Gn(g(this.ab,this),_)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,vt(10),yl(this),fc(this))};function ss(_){_.A!=null&&(s.clearTimeout(_.A),_.A=null)}function fc(_){_.g=new lr(_,_.j,"rpc",_.Y),_.m===null&&(_.g.H=_.o),_.g.O=0;var F=Ti(_.qa);jn(F,"RID","rpc"),jn(F,"SID",_.K),jn(F,"AID",_.T),jn(F,"CI",_.F?"0":"1"),!_.F&&_.ja&&jn(F,"TO",_.ja),jn(F,"TYPE","xmlhttp"),os(_,F),_.m&&_.o&&Xr(F,_.m,_.o),_.L&&(_.g.I=_.L);var X=_.g;_=_.ia,X.L=1,X.v=ts(Ti(F)),X.m=null,X.P=!0,ga(X,_)}n.Za=function(){this.C!=null&&(this.C=null,yl(this),ks(this),vt(19))};function ko(_){_.C!=null&&(s.clearTimeout(_.C),_.C=null)}function ls(_,F){var X=null;if(_.g==F){ko(_),ss(_),_.g=null;var se=2}else if(uu(_.h,F))X=F.D,mi(_.h,F),se=1;else return;if(_.G!=0){if(F.o)if(se==1){X=F.m?F.m.length:0,F=Date.now()-F.F;var Ce=_.B;se=Si(),bt(se,new Wn(se,X)),xl(_)}else _l(_);else if(Ce=F.s,Ce==3||Ce==0&&0<F.X||!(se==1&&gu(_,F)||se==2&&ks(_)))switch(X&&0<X.length&&(F=_.h,F.i=F.i.concat(X)),Ce){case 1:zi(_,5);break;case 4:zi(_,10);break;case 3:zi(_,6);break;default:zi(_,2)}}}function Ms(_,F){let X=_.Ta+Math.floor(Math.random()*_.cb);return _.isActive()||(X*=2),X*F}function zi(_,F){if(_.j.info("Error code "+F),F==2){var X=g(_.fb,_),se=_.Xa;const Ce=!se;se=new En(se||"//www.google.com/images/cleardot.gif"),s.location&&s.location.protocol=="http"||Jo(se,"https"),ts(se),Ce?Fi(se.toString(),X):va(se.toString(),X)}else vt(2);_.G=0,_.l&&_.l.sa(F),wl(_),Os(_)}n.fb=function(_){_?(this.j.info("Successfully pinged google.com"),vt(2)):(this.j.info("Failed to ping google.com"),vt(1))};function wl(_){if(_.G=0,_.ka=[],_.l){const F=gl(_.h);(F.length!=0||_.i.length!=0)&&(I(_.ka,F),I(_.ka,_.i),_.h.i.length=0,w(_.i),_.i.length=0),_.l.ra()}}function O(_,F,X){var se=X instanceof En?Ti(X):new En(X);if(se.g!="")F&&(se.g=F+"."+se.g),es(se,se.s);else{var Ce=s.location;se=Ce.protocol,F=F?F+"."+Ce.hostname:Ce.hostname,Ce=+Ce.port;var Le=new En(null);se&&Jo(Le,se),F&&(Le.g=F),Ce&&es(Le,Ce),X&&(Le.l=X),se=Le}return X=_.D,F=_.ya,X&&F&&jn(se,X,F),jn(se,"VER",_.la),os(_,se),se}function J(_,F,X){if(F&&!_.J)throw Error("Can't create secondary domain capable XhrIo object.");return F=_.Ca&&!_.pa?new hn(new ns({eb:X})):new hn(_.pa),F.Ha(_.J),F}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function pe(){}n=pe.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function xe(){}xe.prototype.g=function(_,F){return new Ie(_,F)};function Ie(_,F){_t.call(this),this.g=new as(F),this.l=_,this.h=F&&F.messageUrlParams||null,_=F&&F.messageHeaders||null,F&&F.clientProtocolHeaderRequired&&(_?_["X-Client-Protocol"]="webchannel":_={"X-Client-Protocol":"webchannel"}),this.g.o=_,_=F&&F.initMessageHeaders||null,F&&F.messageContentType&&(_?_["X-WebChannel-Content-Type"]=F.messageContentType:_={"X-WebChannel-Content-Type":F.messageContentType}),F&&F.va&&(_?_["X-WebChannel-Client-Profile"]=F.va:_={"X-WebChannel-Client-Profile":F.va}),this.g.S=_,(_=F&&F.Sb)&&!P(_)&&(this.g.m=_),this.v=F&&F.supportsCrossDomainXhr||!1,this.u=F&&F.sendRawJson||!1,(F=F&&F.httpSessionIdParam)&&!P(F)&&(this.g.D=F,_=this.h,_!==null&&F in _&&(_=this.h,F in _&&delete _[F])),this.j=new ht(this)}x(Ie,_t),Ie.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ie.prototype.close=function(){Lo(this.g)},Ie.prototype.o=function(_){var F=this.g;if(typeof _=="string"){var X={};X.__data__=_,_=X}else this.u&&(X={},X.__data__=Kt(_),_=X);F.i.push(new oc(F.Ya++,_)),F.G==3&&xl(F)},Ie.prototype.N=function(){this.g.l=null,delete this.j,Lo(this.g),delete this.g,Ie.aa.N.call(this)};function Ve(_){sr.call(this),_.__headers__&&(this.headers=_.__headers__,this.statusCode=_.__status__,delete _.__headers__,delete _.__status__);var F=_.__sm__;if(F){e:{for(const X in F){_=X;break e}_=void 0}(this.i=_)&&(_=this.i,F=F!==null&&_ in F?F[_]:void 0),this.data=F}else this.data=_}x(Ve,sr);function tt(){yn.call(this),this.status=1}x(tt,yn);function ht(_){this.g=_}x(ht,pe),ht.prototype.ua=function(){bt(this.g,"a")},ht.prototype.ta=function(_){bt(this.g,new Ve(_))},ht.prototype.sa=function(_){bt(this.g,new tt)},ht.prototype.ra=function(){bt(this.g,"b")},xe.prototype.createWebChannel=xe.prototype.g,Ie.prototype.send=Ie.prototype.o,Ie.prototype.open=Ie.prototype.m,Ie.prototype.close=Ie.prototype.close,d6=function(){return new xe},h6=function(){return Si()},f6=Tt,Jv={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},gi.NO_ERROR=0,gi.TIMEOUT=8,gi.HTTP_ERROR=6,Yp=gi,ti.COMPLETE="complete",c6=ti,Cn.EventType=Mr,Mr.OPEN="a",Mr.CLOSE="b",Mr.ERROR="c",Mr.MESSAGE="d",_t.prototype.listen=_t.prototype.K,O1=Cn,hn.prototype.listenOnce=hn.prototype.L,hn.prototype.getLastError=hn.prototype.Ka,hn.prototype.getLastErrorCode=hn.prototype.Ba,hn.prototype.getStatus=hn.prototype.Z,hn.prototype.getResponseJson=hn.prototype.Oa,hn.prototype.getResponseText=hn.prototype.oa,hn.prototype.send=hn.prototype.ea,hn.prototype.setWithCredentials=hn.prototype.Ha,u6=hn}).apply(typeof Ip<"u"?Ip:typeof self<"u"?self:typeof window<"u"?window:{});const fb="@firebase/firestore",hb="4.7.17";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let La=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};La.UNAUTHENTICATED=new La(null),La.GOOGLE_CREDENTIALS=new La("google-credentials-uid"),La.FIRST_PARTY=new La("first-party-uid"),La.MOCK_USER=new La("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Nd="11.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rh=new Zg("@firebase/firestore");function Qh(){return rh.logLevel}function At(n,...e){if(rh.logLevel<=wn.DEBUG){const t=e.map(g5);rh.debug(`Firestore (${Nd}): ${n}`,...t)}}function Ku(n,...e){if(rh.logLevel<=wn.ERROR){const t=e.map(g5);rh.error(`Firestore (${Nd}): ${n}`,...t)}}function vd(n,...e){if(rh.logLevel<=wn.WARN){const t=e.map(g5);rh.warn(`Firestore (${Nd}): ${n}`,...t)}}function g5(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xt(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,p6(n,r,t)}function p6(n,e,t){let r=`FIRESTORE (${Nd}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw Ku(r),new Error(r)}function Jn(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||p6(e,i,r)}function tn(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const et={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Et extends Cs{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wu{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g6{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class P9{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(La.UNAUTHENTICATED))}shutdown(){}}class L9{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class k9{constructor(e){this.t=e,this.currentUser=La.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Jn(this.o===void 0,42304);let r=this.i;const i=u=>this.i!==r?(r=this.i,t(u)):Promise.resolve();let a=new Wu;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new Wu,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const u=a;e.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},s=u=>{At("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>s(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?s(u):(At("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Wu)}},0),o()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(At("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Jn(typeof r.accessToken=="string",31837,{l:r}),new g6(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Jn(e===null||typeof e=="string",2055,{h:e}),new La(e)}}class M9{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=La.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class B9{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new M9(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(La.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class db{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class j9{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,$o(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Jn(this.o===void 0,3512);const r=a=>{a.error!=null&&At("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const o=a.token!==this.m;return this.m=a.token,At("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const i=a=>{At("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(a=>i(a)),setTimeout(()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?i(a):At("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new db(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Jn(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new db(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F9(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m6(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v6{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=F9(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<t&&(r+=e.charAt(i[a]%62))}return r}}function fn(n,e){return n<e?-1:n>e?1:0}function ey(n,e){let t=0;for(;t<n.length&&t<e.length;){const r=n.codePointAt(t),i=e.codePointAt(t);if(r!==i){if(r<128&&i<128)return fn(r,i);{const a=m6(),o=U9(a.encode(pb(n,t)),a.encode(pb(e,t)));return o!==0?o:fn(r,i)}}t+=r>65535?2:1}return fn(n.length,e.length)}function pb(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function U9(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return fn(n[t],e[t]);return fn(n.length,e.length)}function yd(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gb=-62135596800,mb=1e6;class Ei{static now(){return Ei.fromMillis(Date.now())}static fromDate(e){return Ei.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*mb);return new Ei(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Et(et.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Et(et.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<gb)throw new Et(et.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Et(et.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/mb}_compareTo(e){return this.seconds===e.seconds?fn(this.nanoseconds,e.nanoseconds):fn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-gb;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jt{static fromTimestamp(e){return new Jt(e)}static min(){return new Jt(new Ei(0,0))}static max(){return new Jt(new Ei(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vb="__name__";class Gl{constructor(e,t,r){t===void 0?t=0:t>e.length&&Xt(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&Xt(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return Gl.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Gl?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const a=Gl.compareSegments(e.get(i),t.get(i));if(a!==0)return a}return fn(e.length,t.length)}static compareSegments(e,t){const r=Gl.isNumericId(e),i=Gl.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?Gl.extractNumericId(e).compare(Gl.extractNumericId(t)):ey(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return tf.fromString(e.substring(4,e.length-2))}}class Ir extends Gl{construct(e,t,r){return new Ir(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Et(et.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new Ir(t)}static emptyPath(){return new Ir([])}}const V9=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class fa extends Gl{construct(e,t,r){return new fa(e,t,r)}static isValidIdentifier(e){return V9.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),fa.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===vb}static keyField(){return new fa([vb])}static fromServerFormat(e){const t=[];let r="",i=0;const a=()=>{if(r.length===0)throw new Et(et.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let o=!1;for(;i<e.length;){const s=e[i];if(s==="\\"){if(i+1===e.length)throw new Et(et.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new Et(et.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else s==="`"?(o=!o,i++):s!=="."||o?(r+=s,i++):(a(),i++)}if(a(),o)throw new Et(et.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new fa(t)}static emptyPath(){return new fa([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mt{constructor(e){this.path=e}static fromPath(e){return new Mt(Ir.fromString(e))}static fromName(e){return new Mt(Ir.fromString(e).popFirst(5))}static empty(){return new Mt(Ir.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ir.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Ir.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Mt(new Ir(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J1=-1;function z9(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Jt.fromTimestamp(r===1e9?new Ei(t+1,0):new Ei(t,r));return new sf(i,Mt.empty(),e)}function q9(n){return new sf(n.readTime,n.key,J1)}class sf{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new sf(Jt.min(),Mt.empty(),J1)}static max(){return new sf(Jt.max(),Mt.empty(),J1)}}function H9(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Mt.comparator(n.documentKey,e.documentKey),t!==0?t:fn(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W9="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class G9{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dd(n){if(n.code!==et.FAILED_PRECONDITION||n.message!==W9)throw n;At("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Je{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Xt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Je((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Je?t:Je.resolve(t)}catch(t){return Je.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Je.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Je.reject(t)}static resolve(e){return new Je((t,r)=>{t(e)})}static reject(e){return new Je((t,r)=>{r(e)})}static waitFor(e){return new Je((t,r)=>{let i=0,a=0,o=!1;e.forEach(s=>{++i,s.next(()=>{++a,o&&a===i&&t()},u=>r(u))}),o=!0,a===i&&t()})}static or(e){let t=Je.resolve(!1);for(const r of e)t=t.next(i=>i?Je.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,a)=>{r.push(t.call(this,i,a))}),this.waitFor(r)}static mapArray(e,t){return new Je((r,i)=>{const a=e.length,o=new Array(a);let s=0;for(let u=0;u<a;u++){const f=u;t(e[f]).next(h=>{o[f]=h,++s,s===a&&r(o)},h=>i(h))}})}static doWhile(e,t){return new Je((r,i)=>{const a=()=>{e()===!0?t().next(()=>{a()},i):r()};a()})}}function $9(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Od(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rm{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ue(r),this.ce=r=>t.writeSequenceNumber(r))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}rm.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m5=-1;function im(n){return n==null}function xg(n){return n===0&&1/n==-1/0}function X9(n){return typeof n=="number"&&Number.isInteger(n)&&!xg(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y6="";function Y9(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=yb(e)),e=K9(n.get(t),e);return yb(e)}function K9(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const a=n.charAt(i);switch(a){case"\0":t+="";break;case y6:t+="";break;default:t+=a}}return t}function yb(n){return n+y6+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xb(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function vf(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function x6(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hr{constructor(e,t){this.comparator=e,this.root=t||ua.EMPTY}insert(e,t){return new Hr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ua.BLACK,null,null))}remove(e){return new Hr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ua.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Rp(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Rp(this.root,e,this.comparator,!1)}getReverseIterator(){return new Rp(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Rp(this.root,e,this.comparator,!0)}}class Rp{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ua{constructor(e,t,r,i,a){this.key=e,this.value=t,this.color=r??ua.RED,this.left=i??ua.EMPTY,this.right=a??ua.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,a){return new ua(e??this.key,t??this.value,r??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,t,r),null):a===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return ua.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return ua.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ua.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ua.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Xt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Xt(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Xt(27949);return e+(this.isRed()?0:1)}}ua.EMPTY=null,ua.RED=!0,ua.BLACK=!1;ua.EMPTY=new class{constructor(){this.size=0}get key(){throw Xt(57766)}get value(){throw Xt(16141)}get color(){throw Xt(16727)}get left(){throw Xt(29726)}get right(){throw Xt(36894)}copy(e,t,r,i,a){return this}insert(e,t,r){return new ua(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bi{constructor(e){this.comparator=e,this.data=new Hr(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new _b(this.data.getIterator())}getIteratorFrom(e){return new _b(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Bi)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(this.comparator(i,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Bi(this.comparator);return t.data=e,t}}class _b{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xo{constructor(e){this.fields=e,e.sort(fa.comparator)}static empty(){return new Xo([])}unionWith(e){let t=new Bi(fa.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Xo(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return yd(this.fields,e.fields,(t,r)=>t.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _6 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class da{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(i){try{return atob(i)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new _6("Invalid base64 string: "+a):a}}(e);return new da(t)}static fromUint8Array(e){const t=function(i){let a="";for(let o=0;o<i.length;++o)a+=String.fromCharCode(i[o]);return a}(e);return new da(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return fn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}da.EMPTY_BYTE_STRING=new da("");const Q9=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function lf(n){if(Jn(!!n,39018),typeof n=="string"){let e=0;const t=Q9.exec(n);if(Jn(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ci(n.seconds),nanos:ci(n.nanos)}}function ci(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function uf(n){return typeof n=="string"?da.fromBase64String(n):da.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w6="server_timestamp",b6="__type__",A6="__previous_value__",E6="__local_write_time__";function v5(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[b6])===null||t===void 0?void 0:t.stringValue)===w6}function am(n){const e=n.mapValue.fields[A6];return v5(e)?am(e):e}function e0(n){const e=lf(n.mapValue.fields[E6].timestampValue);return new Ei(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z9{constructor(e,t,r,i,a,o,s,u,f,h){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=s,this.longPollingOptions=u,this.useFetchStreams=f,this.isUsingEmulator=h}}const _g="(default)";class t0{constructor(e,t){this.projectId=e,this.database=t||_g}static empty(){return new t0("","")}get isDefaultDatabase(){return this.database===_g}isEqual(e){return e instanceof t0&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S6="__type__",J9="__max__",Np={mapValue:{}},C6="__vector__",wg="value";function cf(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?v5(n)?4:tD(n)?9007199254740991:eD(n)?10:11:Xt(28295,{value:n})}function nu(n,e){if(n===e)return!0;const t=cf(n);if(t!==cf(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return e0(n).isEqual(e0(e));case 3:return function(i,a){if(typeof i.timestampValue=="string"&&typeof a.timestampValue=="string"&&i.timestampValue.length===a.timestampValue.length)return i.timestampValue===a.timestampValue;const o=lf(i.timestampValue),s=lf(a.timestampValue);return o.seconds===s.seconds&&o.nanos===s.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,a){return uf(i.bytesValue).isEqual(uf(a.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,a){return ci(i.geoPointValue.latitude)===ci(a.geoPointValue.latitude)&&ci(i.geoPointValue.longitude)===ci(a.geoPointValue.longitude)}(n,e);case 2:return function(i,a){if("integerValue"in i&&"integerValue"in a)return ci(i.integerValue)===ci(a.integerValue);if("doubleValue"in i&&"doubleValue"in a){const o=ci(i.doubleValue),s=ci(a.doubleValue);return o===s?xg(o)===xg(s):isNaN(o)&&isNaN(s)}return!1}(n,e);case 9:return yd(n.arrayValue.values||[],e.arrayValue.values||[],nu);case 10:case 11:return function(i,a){const o=i.mapValue.fields||{},s=a.mapValue.fields||{};if(xb(o)!==xb(s))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(s[u]===void 0||!nu(o[u],s[u])))return!1;return!0}(n,e);default:return Xt(52216,{left:n})}}function n0(n,e){return(n.values||[]).find(t=>nu(t,e))!==void 0}function xd(n,e){if(n===e)return 0;const t=cf(n),r=cf(e);if(t!==r)return fn(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return fn(n.booleanValue,e.booleanValue);case 2:return function(a,o){const s=ci(a.integerValue||a.doubleValue),u=ci(o.integerValue||o.doubleValue);return s<u?-1:s>u?1:s===u?0:isNaN(s)?isNaN(u)?0:-1:1}(n,e);case 3:return wb(n.timestampValue,e.timestampValue);case 4:return wb(e0(n),e0(e));case 5:return ey(n.stringValue,e.stringValue);case 6:return function(a,o){const s=uf(a),u=uf(o);return s.compareTo(u)}(n.bytesValue,e.bytesValue);case 7:return function(a,o){const s=a.split("/"),u=o.split("/");for(let f=0;f<s.length&&f<u.length;f++){const h=fn(s[f],u[f]);if(h!==0)return h}return fn(s.length,u.length)}(n.referenceValue,e.referenceValue);case 8:return function(a,o){const s=fn(ci(a.latitude),ci(o.latitude));return s!==0?s:fn(ci(a.longitude),ci(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return bb(n.arrayValue,e.arrayValue);case 10:return function(a,o){var s,u,f,h;const p=a.fields||{},g=o.fields||{},m=(s=p[wg])===null||s===void 0?void 0:s.arrayValue,x=(u=g[wg])===null||u===void 0?void 0:u.arrayValue,w=fn(((f=m==null?void 0:m.values)===null||f===void 0?void 0:f.length)||0,((h=x==null?void 0:x.values)===null||h===void 0?void 0:h.length)||0);return w!==0?w:bb(m,x)}(n.mapValue,e.mapValue);case 11:return function(a,o){if(a===Np.mapValue&&o===Np.mapValue)return 0;if(a===Np.mapValue)return 1;if(o===Np.mapValue)return-1;const s=a.fields||{},u=Object.keys(s),f=o.fields||{},h=Object.keys(f);u.sort(),h.sort();for(let p=0;p<u.length&&p<h.length;++p){const g=ey(u[p],h[p]);if(g!==0)return g;const m=xd(s[u[p]],f[h[p]]);if(m!==0)return m}return fn(u.length,h.length)}(n.mapValue,e.mapValue);default:throw Xt(23264,{Pe:t})}}function wb(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return fn(n,e);const t=lf(n),r=lf(e),i=fn(t.seconds,r.seconds);return i!==0?i:fn(t.nanos,r.nanos)}function bb(n,e){const t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){const a=xd(t[i],r[i]);if(a)return a}return fn(t.length,r.length)}function _d(n){return ty(n)}function ty(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=lf(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return uf(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return Mt.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(const a of t.values||[])i?i=!1:r+=",",r+=ty(a);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let i="{",a=!0;for(const o of r)a?a=!1:i+=",",i+=`${o}:${ty(t.fields[o])}`;return i+"}"}(n.mapValue):Xt(61005,{value:n})}function Kp(n){switch(cf(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=am(n);return e?16+Kp(e):16;case 5:return 2*n.stringValue.length;case 6:return uf(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,a)=>i+Kp(a),0)}(n.arrayValue);case 10:case 11:return function(r){let i=0;return vf(r.fields,(a,o)=>{i+=a.length+Kp(o)}),i}(n.mapValue);default:throw Xt(13486,{value:n})}}function Ab(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function ny(n){return!!n&&"integerValue"in n}function y5(n){return!!n&&"arrayValue"in n}function Eb(n){return!!n&&"nullValue"in n}function Sb(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Qp(n){return!!n&&"mapValue"in n}function eD(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[S6])===null||t===void 0?void 0:t.stringValue)===C6}function z1(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return vf(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=z1(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=z1(n.arrayValue.values[t]);return e}return Object.assign({},n)}function tD(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===J9}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yo{constructor(e){this.value=e}static empty(){return new yo({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Qp(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=z1(t)}setAll(e){let t=fa.emptyPath(),r={},i=[];e.forEach((o,s)=>{if(!t.isImmediateParentOf(s)){const u=this.getFieldsMap(t);this.applyChanges(u,r,i),r={},i=[],t=s.popLast()}o?r[s.lastSegment()]=z1(o):i.push(s.lastSegment())});const a=this.getFieldsMap(t);this.applyChanges(a,r,i)}delete(e){const t=this.field(e.popLast());Qp(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return nu(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Qp(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){vf(t,(i,a)=>e[i]=a);for(const i of r)delete e[i]}clone(){return new yo(z1(this.value))}}function T6(n){const e=[];return vf(n.fields,(t,r)=>{const i=new fa([t]);if(Qp(r)){const a=T6(r.mapValue).fields;if(a.length===0)e.push(i);else for(const o of a)e.push(i.child(o))}else e.push(i)}),new Xo(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ka{constructor(e,t,r,i,a,o,s){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=a,this.data=o,this.documentState=s}static newInvalidDocument(e){return new ka(e,0,Jt.min(),Jt.min(),Jt.min(),yo.empty(),0)}static newFoundDocument(e,t,r,i){return new ka(e,1,t,Jt.min(),r,i,0)}static newNoDocument(e,t){return new ka(e,2,t,Jt.min(),Jt.min(),yo.empty(),0)}static newUnknownDocument(e,t){return new ka(e,3,t,Jt.min(),Jt.min(),yo.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Jt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=yo.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=yo.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Jt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ka&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ka(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bg{constructor(e,t){this.position=e,this.inclusive=t}}function Cb(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const a=e[i],o=n.position[i];if(a.field.isKeyField()?r=Mt.comparator(Mt.fromName(o.referenceValue),t.key):r=xd(o,t.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function Tb(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!nu(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ag{constructor(e,t="asc"){this.field=e,this.dir=t}}function nD(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I6{}class bi extends I6{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new iD(e,t,r):t==="array-contains"?new sD(e,r):t==="in"?new lD(e,r):t==="not-in"?new uD(e,r):t==="array-contains-any"?new cD(e,r):new bi(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new aD(e,r):new oD(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(xd(t,this.value)):t!==null&&cf(this.value)===cf(t)&&this.matchesComparison(xd(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Xt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class fl extends I6{constructor(e,t){super(),this.filters=e,this.op=t,this.Te=null}static create(e,t){return new fl(e,t)}matches(e){return R6(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function R6(n){return n.op==="and"}function N6(n){return rD(n)&&R6(n)}function rD(n){for(const e of n.filters)if(e instanceof fl)return!1;return!0}function ry(n){if(n instanceof bi)return n.field.canonicalString()+n.op.toString()+_d(n.value);if(N6(n))return n.filters.map(e=>ry(e)).join(",");{const e=n.filters.map(t=>ry(t)).join(",");return`${n.op}(${e})`}}function D6(n,e){return n instanceof bi?function(r,i){return i instanceof bi&&r.op===i.op&&r.field.isEqual(i.field)&&nu(r.value,i.value)}(n,e):n instanceof fl?function(r,i){return i instanceof fl&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((a,o,s)=>a&&D6(o,i.filters[s]),!0):!1}(n,e):void Xt(19439)}function O6(n){return n instanceof bi?function(t){return`${t.field.canonicalString()} ${t.op} ${_d(t.value)}`}(n):n instanceof fl?function(t){return t.op.toString()+" {"+t.getFilters().map(O6).join(" ,")+"}"}(n):"Filter"}class iD extends bi{constructor(e,t,r){super(e,t,r),this.key=Mt.fromName(r.referenceValue)}matches(e){const t=Mt.comparator(e.key,this.key);return this.matchesComparison(t)}}class aD extends bi{constructor(e,t){super(e,"in",t),this.keys=P6("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class oD extends bi{constructor(e,t){super(e,"not-in",t),this.keys=P6("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function P6(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>Mt.fromName(r.referenceValue))}class sD extends bi{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return y5(t)&&n0(t.arrayValue,this.value)}}class lD extends bi{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&n0(this.value.arrayValue,t)}}class uD extends bi{constructor(e,t){super(e,"not-in",t)}matches(e){if(n0(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!n0(this.value.arrayValue,t)}}class cD extends bi{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!y5(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>n0(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fD{constructor(e,t=null,r=[],i=[],a=null,o=null,s=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=s,this.Ie=null}}function Ib(n,e=null,t=[],r=[],i=null,a=null,o=null){return new fD(n,e,t,r,i,a,o)}function x5(n){const e=tn(n);if(e.Ie===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>ry(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(a){return a.field.canonicalString()+a.dir}(r)).join(","),im(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>_d(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>_d(r)).join(",")),e.Ie=t}return e.Ie}function _5(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!nD(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!D6(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Tb(n.startAt,e.startAt)&&Tb(n.endAt,e.endAt)}function iy(n){return Mt.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y0{constructor(e,t=null,r=[],i=[],a=null,o="F",s=null,u=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=s,this.endAt=u,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function hD(n,e,t,r,i,a,o,s){return new y0(n,e,t,r,i,a,o,s)}function om(n){return new y0(n)}function Rb(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function L6(n){return n.collectionGroup!==null}function q1(n){const e=tn(n);if(e.Ee===null){e.Ee=[];const t=new Set;for(const a of e.explicitOrderBy)e.Ee.push(a),t.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let s=new Bi(fa.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(f=>{f.isInequality()&&(s=s.add(f.field))})}),s})(e).forEach(a=>{t.has(a.canonicalString())||a.isKeyField()||e.Ee.push(new Ag(a,r))}),t.has(fa.keyField().canonicalString())||e.Ee.push(new Ag(fa.keyField(),r))}return e.Ee}function Zl(n){const e=tn(n);return e.de||(e.de=dD(e,q1(n))),e.de}function dD(n,e){if(n.limitType==="F")return Ib(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{const a=i.dir==="desc"?"asc":"desc";return new Ag(i.field,a)});const t=n.endAt?new bg(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new bg(n.startAt.position,n.startAt.inclusive):null;return Ib(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function ay(n,e){const t=n.filters.concat([e]);return new y0(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function oy(n,e,t){return new y0(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function sm(n,e){return _5(Zl(n),Zl(e))&&n.limitType===e.limitType}function k6(n){return`${x5(Zl(n))}|lt:${n.limitType}`}function Zh(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>O6(i)).join(", ")}]`),im(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>_d(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>_d(i)).join(",")),`Target(${r})`}(Zl(n))}; limitType=${n.limitType})`}function lm(n,e){return e.isFoundDocument()&&function(r,i){const a=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):Mt.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)}(n,e)&&function(r,i){for(const a of q1(r))if(!a.field.isKeyField()&&i.data.field(a.field)===null)return!1;return!0}(n,e)&&function(r,i){for(const a of r.filters)if(!a.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(o,s,u){const f=Cb(o,s,u);return o.inclusive?f<=0:f<0}(r.startAt,q1(r),i)||r.endAt&&!function(o,s,u){const f=Cb(o,s,u);return o.inclusive?f>=0:f>0}(r.endAt,q1(r),i))}(n,e)}function pD(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function M6(n){return(e,t)=>{let r=!1;for(const i of q1(n)){const a=gD(i,e,t);if(a!==0)return a;r=r||i.field.isKeyField()}return 0}}function gD(n,e,t){const r=n.field.isKeyField()?Mt.comparator(e.key,t.key):function(a,o,s){const u=o.data.field(a),f=s.data.field(a);return u!==null&&f!==null?xd(u,f):Xt(42886)}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Xt(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dh{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[i,a]of r)if(this.equalsFn(i,e))return a}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){vf(this.inner,(t,r)=>{for(const[i,a]of r)e(i,a)})}isEmpty(){return x6(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mD=new Hr(Mt.comparator);function Qu(){return mD}const B6=new Hr(Mt.comparator);function P1(...n){let e=B6;for(const t of n)e=e.insert(t.key,t);return e}function j6(n){let e=B6;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Xf(){return H1()}function F6(){return H1()}function H1(){return new dh(n=>n.toString(),(n,e)=>n.isEqual(e))}const vD=new Hr(Mt.comparator),yD=new Bi(Mt.comparator);function bn(...n){let e=yD;for(const t of n)e=e.add(t);return e}const xD=new Bi(fn);function _D(){return xD}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w5(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:xg(e)?"-0":e}}function U6(n){return{integerValue:""+n}}function wD(n,e){return X9(e)?U6(e):w5(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class um{constructor(){this._=void 0}}function bD(n,e,t){return n instanceof r0?function(i,a){const o={fields:{[b6]:{stringValue:w6},[E6]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return a&&v5(a)&&(a=am(a)),a&&(o.fields[A6]=a),{mapValue:o}}(t,e):n instanceof i0?z6(n,e):n instanceof a0?q6(n,e):function(i,a){const o=V6(i,a),s=Nb(o)+Nb(i.Re);return ny(o)&&ny(i.Re)?U6(s):w5(i.serializer,s)}(n,e)}function AD(n,e,t){return n instanceof i0?z6(n,e):n instanceof a0?q6(n,e):t}function V6(n,e){return n instanceof Eg?function(r){return ny(r)||function(a){return!!a&&"doubleValue"in a}(r)}(e)?e:{integerValue:0}:null}class r0 extends um{}class i0 extends um{constructor(e){super(),this.elements=e}}function z6(n,e){const t=H6(e);for(const r of n.elements)t.some(i=>nu(i,r))||t.push(r);return{arrayValue:{values:t}}}class a0 extends um{constructor(e){super(),this.elements=e}}function q6(n,e){let t=H6(e);for(const r of n.elements)t=t.filter(i=>!nu(i,r));return{arrayValue:{values:t}}}class Eg extends um{constructor(e,t){super(),this.serializer=e,this.Re=t}}function Nb(n){return ci(n.integerValue||n.doubleValue)}function H6(n){return y5(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ED{constructor(e,t){this.field=e,this.transform=t}}function SD(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof i0&&i instanceof i0||r instanceof a0&&i instanceof a0?yd(r.elements,i.elements,nu):r instanceof Eg&&i instanceof Eg?nu(r.Re,i.Re):r instanceof r0&&i instanceof r0}(n.transform,e.transform)}class CD{constructor(e,t){this.version=e,this.transformResults=t}}class As{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new As}static exists(e){return new As(void 0,e)}static updateTime(e){return new As(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Zp(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class cm{}function W6(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new b5(n.key,As.none()):new x0(n.key,n.data,As.none());{const t=n.data,r=yo.empty();let i=new Bi(fa.comparator);for(let a of e.fields)if(!i.has(a)){let o=t.field(a);o===null&&a.length>1&&(a=a.popLast(),o=t.field(a)),o===null?r.delete(a):r.set(a,o),i=i.add(a)}return new yf(n.key,r,new Xo(i.toArray()),As.none())}}function TD(n,e,t){n instanceof x0?function(i,a,o){const s=i.value.clone(),u=Ob(i.fieldTransforms,a,o.transformResults);s.setAll(u),a.convertToFoundDocument(o.version,s).setHasCommittedMutations()}(n,e,t):n instanceof yf?function(i,a,o){if(!Zp(i.precondition,a))return void a.convertToUnknownDocument(o.version);const s=Ob(i.fieldTransforms,a,o.transformResults),u=a.data;u.setAll(G6(i)),u.setAll(s),a.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(n,e,t):function(i,a,o){a.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,t)}function W1(n,e,t,r){return n instanceof x0?function(a,o,s,u){if(!Zp(a.precondition,o))return s;const f=a.value.clone(),h=Pb(a.fieldTransforms,u,o);return f.setAll(h),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),null}(n,e,t,r):n instanceof yf?function(a,o,s,u){if(!Zp(a.precondition,o))return s;const f=Pb(a.fieldTransforms,u,o),h=o.data;return h.setAll(G6(a)),h.setAll(f),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),s===null?null:s.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(p=>p.field))}(n,e,t,r):function(a,o,s){return Zp(a.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):s}(n,e,t)}function ID(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),a=V6(r.transform,i||null);a!=null&&(t===null&&(t=yo.empty()),t.set(r.field,a))}return t||null}function Db(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&yd(r,i,(a,o)=>SD(a,o))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class x0 extends cm{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class yf extends cm{constructor(e,t,r,i,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function G6(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function Ob(n,e,t){const r=new Map;Jn(n.length===t.length,32656,{Ve:t.length,me:n.length});for(let i=0;i<t.length;i++){const a=n[i],o=a.transform,s=e.data.field(a.field);r.set(a.field,AD(o,s,t[i]))}return r}function Pb(n,e,t){const r=new Map;for(const i of n){const a=i.transform,o=t.data.field(i.field);r.set(i.field,bD(a,o,e))}return r}class b5 extends cm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class RD extends cm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ND{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&TD(a,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=W1(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=W1(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=F6();return this.mutations.forEach(i=>{const a=e.get(i.key),o=a.overlayedDocument;let s=this.applyToLocalView(o,a.mutatedFields);s=t.has(i.key)?null:s;const u=W6(o,s);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(Jt.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),bn())}isEqual(e){return this.batchId===e.batchId&&yd(this.mutations,e.mutations,(t,r)=>Db(t,r))&&yd(this.baseMutations,e.baseMutations,(t,r)=>Db(t,r))}}class A5{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Jn(e.mutations.length===r.length,58842,{fe:e.mutations.length,ge:r.length});let i=function(){return vD}();const a=e.mutations;for(let o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new A5(e,t,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DD{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OD{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var wi,Nn;function PD(n){switch(n){case et.OK:return Xt(64938);case et.CANCELLED:case et.UNKNOWN:case et.DEADLINE_EXCEEDED:case et.RESOURCE_EXHAUSTED:case et.INTERNAL:case et.UNAVAILABLE:case et.UNAUTHENTICATED:return!1;case et.INVALID_ARGUMENT:case et.NOT_FOUND:case et.ALREADY_EXISTS:case et.PERMISSION_DENIED:case et.FAILED_PRECONDITION:case et.ABORTED:case et.OUT_OF_RANGE:case et.UNIMPLEMENTED:case et.DATA_LOSS:return!0;default:return Xt(15467,{code:n})}}function $6(n){if(n===void 0)return Ku("GRPC error has no .code"),et.UNKNOWN;switch(n){case wi.OK:return et.OK;case wi.CANCELLED:return et.CANCELLED;case wi.UNKNOWN:return et.UNKNOWN;case wi.DEADLINE_EXCEEDED:return et.DEADLINE_EXCEEDED;case wi.RESOURCE_EXHAUSTED:return et.RESOURCE_EXHAUSTED;case wi.INTERNAL:return et.INTERNAL;case wi.UNAVAILABLE:return et.UNAVAILABLE;case wi.UNAUTHENTICATED:return et.UNAUTHENTICATED;case wi.INVALID_ARGUMENT:return et.INVALID_ARGUMENT;case wi.NOT_FOUND:return et.NOT_FOUND;case wi.ALREADY_EXISTS:return et.ALREADY_EXISTS;case wi.PERMISSION_DENIED:return et.PERMISSION_DENIED;case wi.FAILED_PRECONDITION:return et.FAILED_PRECONDITION;case wi.ABORTED:return et.ABORTED;case wi.OUT_OF_RANGE:return et.OUT_OF_RANGE;case wi.UNIMPLEMENTED:return et.UNIMPLEMENTED;case wi.DATA_LOSS:return et.DATA_LOSS;default:return Xt(39323,{code:n})}}(Nn=wi||(wi={}))[Nn.OK=0]="OK",Nn[Nn.CANCELLED=1]="CANCELLED",Nn[Nn.UNKNOWN=2]="UNKNOWN",Nn[Nn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Nn[Nn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Nn[Nn.NOT_FOUND=5]="NOT_FOUND",Nn[Nn.ALREADY_EXISTS=6]="ALREADY_EXISTS",Nn[Nn.PERMISSION_DENIED=7]="PERMISSION_DENIED",Nn[Nn.UNAUTHENTICATED=16]="UNAUTHENTICATED",Nn[Nn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Nn[Nn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Nn[Nn.ABORTED=10]="ABORTED",Nn[Nn.OUT_OF_RANGE=11]="OUT_OF_RANGE",Nn[Nn.UNIMPLEMENTED=12]="UNIMPLEMENTED",Nn[Nn.INTERNAL=13]="INTERNAL",Nn[Nn.UNAVAILABLE=14]="UNAVAILABLE",Nn[Nn.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LD=new tf([4294967295,4294967295],0);function Lb(n){const e=m6().encode(n),t=new l6;return t.update(e),new Uint8Array(t.digest())}function kb(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new tf([t,r],0),new tf([i,a],0)]}class E5{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new L1(`Invalid padding: ${t}`);if(r<0)throw new L1(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new L1(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new L1(`Invalid padding when bitmap length is 0: ${t}`);this.pe=8*e.length-t,this.ye=tf.fromNumber(this.pe)}we(e,t,r){let i=e.add(t.multiply(tf.fromNumber(r)));return i.compare(LD)===1&&(i=new tf([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ye).toNumber()}be(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;const t=Lb(e),[r,i]=kb(t);for(let a=0;a<this.hashCount;a++){const o=this.we(r,i,a);if(!this.be(o))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),o=new E5(a,i,t);return r.forEach(s=>o.insert(s)),o}insert(e){if(this.pe===0)return;const t=Lb(e),[r,i]=kb(t);for(let a=0;a<this.hashCount;a++){const o=this.we(r,i,a);this.Se(o)}}Se(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class L1 extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fm{constructor(e,t,r,i,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,_0.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new fm(Jt.min(),i,new Hr(fn),Qu(),bn())}}class _0{constructor(e,t,r,i,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new _0(r,t,bn(),bn(),bn())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jp{constructor(e,t,r,i){this.De=e,this.removedTargetIds=t,this.key=r,this.ve=i}}class X6{constructor(e,t){this.targetId=e,this.Ce=t}}class Y6{constructor(e,t,r=da.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class Mb{constructor(){this.Fe=0,this.Me=Bb(),this.xe=da.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=bn(),t=bn(),r=bn();return this.Me.forEach((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:Xt(38017,{changeType:a})}}),new _0(this.xe,this.Oe,e,t,r)}Qe(){this.Ne=!1,this.Me=Bb()}$e(e,t){this.Ne=!0,this.Me=this.Me.insert(e,t)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,Jn(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class kD{constructor(e){this.ze=e,this.je=new Map,this.He=Qu(),this.Je=Dp(),this.Ye=Dp(),this.Ze=new Hr(fn)}Xe(e){for(const t of e.De)e.ve&&e.ve.isFoundDocument()?this.et(t,e.ve):this.tt(t,e.key,e.ve);for(const t of e.removedTargetIds)this.tt(t,e.key,e.ve)}nt(e){this.forEachTarget(e,t=>{const r=this.rt(t);switch(e.state){case 0:this.it(t)&&r.ke(e.resumeToken);break;case 1:r.We(),r.Be||r.Qe(),r.ke(e.resumeToken);break;case 2:r.We(),r.Be||this.removeTarget(t);break;case 3:this.it(t)&&(r.Ge(),r.ke(e.resumeToken));break;case 4:this.it(t)&&(this.st(t),r.ke(e.resumeToken));break;default:Xt(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.je.forEach((r,i)=>{this.it(i)&&t(i)})}ot(e){const t=e.targetId,r=e.Ce.count,i=this._t(t);if(i){const a=i.target;if(iy(a))if(r===0){const o=new Mt(a.path);this.tt(t,o,ka.newNoDocument(o,Jt.min()))}else Jn(r===1,20013,{expectedCount:r});else{const o=this.ut(t);if(o!==r){const s=this.ct(e),u=s?this.lt(s,e,o):1;if(u!==0){this.st(t);const f=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,f)}}}}}ct(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:a=0}=t;let o,s;try{o=uf(r).toUint8Array()}catch(u){if(u instanceof _6)return vd("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{s=new E5(o,i,a)}catch(u){return vd(u instanceof L1?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return s.pe===0?null:s}lt(e,t,r){return t.Ce.count===r-this.Tt(e,t.targetId)?0:2}Tt(e,t){const r=this.ze.getRemoteKeysForTarget(t);let i=0;return r.forEach(a=>{const o=this.ze.Pt(),s=`projects/${o.projectId}/databases/${o.database}/documents/${a.path.canonicalString()}`;e.mightContain(s)||(this.tt(t,a,null),i++)}),i}It(e){const t=new Map;this.je.forEach((a,o)=>{const s=this._t(o);if(s){if(a.current&&iy(s.target)){const u=new Mt(s.target.path);this.Et(u).has(o)||this.dt(o,u)||this.tt(o,u,ka.newNoDocument(u,e))}a.Le&&(t.set(o,a.qe()),a.Qe())}});let r=bn();this.Ye.forEach((a,o)=>{let s=!0;o.forEachWhile(u=>{const f=this._t(u);return!f||f.purpose==="TargetPurposeLimboResolution"||(s=!1,!1)}),s&&(r=r.add(a))}),this.He.forEach((a,o)=>o.setReadTime(e));const i=new fm(e,t,this.Ze,this.He,r);return this.He=Qu(),this.Je=Dp(),this.Ye=Dp(),this.Ze=new Hr(fn),i}et(e,t){if(!this.it(e))return;const r=this.dt(e,t.key)?2:0;this.rt(e).$e(t.key,r),this.He=this.He.insert(t.key,t),this.Je=this.Je.insert(t.key,this.Et(t.key).add(e)),this.Ye=this.Ye.insert(t.key,this.At(t.key).add(e))}tt(e,t,r){if(!this.it(e))return;const i=this.rt(e);this.dt(e,t)?i.$e(t,1):i.Ue(t),this.Ye=this.Ye.insert(t,this.At(t).delete(e)),this.Ye=this.Ye.insert(t,this.At(t).add(e)),r&&(this.He=this.He.insert(t,r))}removeTarget(e){this.je.delete(e)}ut(e){const t=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let t=this.je.get(e);return t||(t=new Mb,this.je.set(e,t)),t}At(e){let t=this.Ye.get(e);return t||(t=new Bi(fn),this.Ye=this.Ye.insert(e,t)),t}Et(e){let t=this.Je.get(e);return t||(t=new Bi(fn),this.Je=this.Je.insert(e,t)),t}it(e){const t=this._t(e)!==null;return t||At("WatchChangeAggregator","Detected inactive target",e),t}_t(e){const t=this.je.get(e);return t&&t.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new Mb),this.ze.getRemoteKeysForTarget(e).forEach(t=>{this.tt(e,t,null)})}dt(e,t){return this.ze.getRemoteKeysForTarget(e).has(t)}}function Dp(){return new Hr(Mt.comparator)}function Bb(){return new Hr(Mt.comparator)}const MD={asc:"ASCENDING",desc:"DESCENDING"},BD={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},jD={and:"AND",or:"OR"};class FD{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function sy(n,e){return n.useProto3Json||im(e)?e:{value:e}}function Sg(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function K6(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function UD(n,e){return Sg(n,e.toTimestamp())}function Jl(n){return Jn(!!n,49232),Jt.fromTimestamp(function(t){const r=lf(t);return new Ei(r.seconds,r.nanos)}(n))}function S5(n,e){return ly(n,e).canonicalString()}function ly(n,e){const t=function(i){return new Ir(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function Q6(n){const e=Ir.fromString(n);return Jn(nE(e),10190,{key:e.toString()}),e}function uy(n,e){return S5(n.databaseId,e.path)}function lv(n,e){const t=Q6(e);if(t.get(1)!==n.databaseId.projectId)throw new Et(et.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Et(et.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Mt(J6(t))}function Z6(n,e){return S5(n.databaseId,e)}function VD(n){const e=Q6(n);return e.length===4?Ir.emptyPath():J6(e)}function cy(n){return new Ir(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function J6(n){return Jn(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function jb(n,e,t){return{name:uy(n,e),fields:t.value.mapValue.fields}}function zD(n,e){let t;if("targetChange"in e){e.targetChange;const r=function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:Xt(39313,{state:f})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],a=function(f,h){return f.useProto3Json?(Jn(h===void 0||typeof h=="string",58123),da.fromBase64String(h||"")):(Jn(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),da.fromUint8Array(h||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,s=o&&function(f){const h=f.code===void 0?et.UNKNOWN:$6(f.code);return new Et(h,f.message||"")}(o);t=new Y6(r,i,a,s||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=lv(n,r.document.name),a=Jl(r.document.updateTime),o=r.document.createTime?Jl(r.document.createTime):Jt.min(),s=new yo({mapValue:{fields:r.document.fields}}),u=ka.newFoundDocument(i,a,o,s),f=r.targetIds||[],h=r.removedTargetIds||[];t=new Jp(f,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=lv(n,r.document),a=r.readTime?Jl(r.readTime):Jt.min(),o=ka.newNoDocument(i,a),s=r.removedTargetIds||[];t=new Jp([],s,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=lv(n,r.document),a=r.removedTargetIds||[];t=new Jp([],a,i,null)}else{if(!("filter"in e))return Xt(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:a}=r,o=new OD(i,a),s=r.targetId;t=new X6(s,o)}}return t}function qD(n,e){let t;if(e instanceof x0)t={update:jb(n,e.key,e.value)};else if(e instanceof b5)t={delete:uy(n,e.key)};else if(e instanceof yf)t={update:jb(n,e.key,e.data),updateMask:ZD(e.fieldMask)};else{if(!(e instanceof RD))return Xt(16599,{ft:e.type});t={verify:uy(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(a,o){const s=o.transform;if(s instanceof r0)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(s instanceof i0)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:s.elements}};if(s instanceof a0)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:s.elements}};if(s instanceof Eg)return{fieldPath:o.field.canonicalString(),increment:s.Re};throw Xt(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,a){return a.updateTime!==void 0?{updateTime:UD(i,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:Xt(27497)}(n,e.precondition)),t}function HD(n,e){return n&&n.length>0?(Jn(e!==void 0,14353),n.map(t=>function(i,a){let o=i.updateTime?Jl(i.updateTime):Jl(a);return o.isEqual(Jt.min())&&(o=Jl(a)),new CD(o,i.transformResults||[])}(t,e))):[]}function WD(n,e){return{documents:[Z6(n,e.path)]}}function GD(n,e){const t={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=Z6(n,i);const a=function(f){if(f.length!==0)return tE(fl.create(f,"and"))}(e.filters);a&&(t.structuredQuery.where=a);const o=function(f){if(f.length!==0)return f.map(h=>function(g){return{field:Jh(g.field),direction:YD(g.dir)}}(h))}(e.orderBy);o&&(t.structuredQuery.orderBy=o);const s=sy(n,e.limit);return s!==null&&(t.structuredQuery.limit=s),e.startAt&&(t.structuredQuery.startAt=function(f){return{before:f.inclusive,values:f.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(f){return{before:!f.inclusive,values:f.position}}(e.endAt)),{gt:t,parent:i}}function $D(n){let e=VD(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Jn(r===1,65062);const h=t.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let a=[];t.where&&(a=function(p){const g=eE(p);return g instanceof fl&&N6(g)?g.getFilters():[g]}(t.where));let o=[];t.orderBy&&(o=function(p){return p.map(g=>function(x){return new Ag(ed(x.field),function(I){switch(I){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(x.direction))}(g))}(t.orderBy));let s=null;t.limit&&(s=function(p){let g;return g=typeof p=="object"?p.value:p,im(g)?null:g}(t.limit));let u=null;t.startAt&&(u=function(p){const g=!!p.before,m=p.values||[];return new bg(m,g)}(t.startAt));let f=null;return t.endAt&&(f=function(p){const g=!p.before,m=p.values||[];return new bg(m,g)}(t.endAt)),hD(e,i,o,a,s,"F",u,f)}function XD(n,e){const t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Xt(28987,{purpose:i})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function eE(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=ed(t.unaryFilter.field);return bi.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=ed(t.unaryFilter.field);return bi.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=ed(t.unaryFilter.field);return bi.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=ed(t.unaryFilter.field);return bi.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Xt(61313);default:return Xt(60726)}}(n):n.fieldFilter!==void 0?function(t){return bi.create(ed(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Xt(58110);default:return Xt(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return fl.create(t.compositeFilter.filters.map(r=>eE(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Xt(1026)}}(t.compositeFilter.op))}(n):Xt(30097,{filter:n})}function YD(n){return MD[n]}function KD(n){return BD[n]}function QD(n){return jD[n]}function Jh(n){return{fieldPath:n.canonicalString()}}function ed(n){return fa.fromServerFormat(n.fieldPath)}function tE(n){return n instanceof bi?function(t){if(t.op==="=="){if(Sb(t.value))return{unaryFilter:{field:Jh(t.field),op:"IS_NAN"}};if(Eb(t.value))return{unaryFilter:{field:Jh(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Sb(t.value))return{unaryFilter:{field:Jh(t.field),op:"IS_NOT_NAN"}};if(Eb(t.value))return{unaryFilter:{field:Jh(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Jh(t.field),op:KD(t.op),value:t.value}}}(n):n instanceof fl?function(t){const r=t.getFilters().map(i=>tE(i));return r.length===1?r[0]:{compositeFilter:{op:QD(t.op),filters:r}}}(n):Xt(54877,{filter:n})}function ZD(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function nE(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qc{constructor(e,t,r,i,a=Jt.min(),o=Jt.min(),s=da.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s,this.expectedCount=u}withSequenceNumber(e){return new Qc(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Qc(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Qc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Qc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JD{constructor(e){this.wt=e}}function eO(n){const e=$D({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?oy(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tO{constructor(){this.Cn=new nO}addToCollectionParentIndex(e,t){return this.Cn.add(t),Je.resolve()}getCollectionParents(e,t){return Je.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return Je.resolve()}deleteFieldIndex(e,t){return Je.resolve()}deleteAllFieldIndexes(e){return Je.resolve()}createTargetIndexes(e,t){return Je.resolve()}getDocumentsMatchingTarget(e,t){return Je.resolve(null)}getIndexType(e,t){return Je.resolve(0)}getFieldIndexes(e,t){return Je.resolve([])}getNextCollectionGroupToUpdate(e){return Je.resolve(null)}getMinOffset(e,t){return Je.resolve(sf.min())}getMinOffsetFromCollectionGroup(e,t){return Je.resolve(sf.min())}updateCollectionGroup(e,t,r){return Je.resolve()}updateIndexEntries(e,t){return Je.resolve()}}class nO{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Bi(Ir.comparator),a=!i.has(r);return this.index[t]=i.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Bi(Ir.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fb={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},rE=41943040;class mo{static withCacheSize(e){return new mo(e,mo.DEFAULT_COLLECTION_PERCENTILE,mo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */mo.DEFAULT_COLLECTION_PERCENTILE=10,mo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,mo.DEFAULT=new mo(rE,mo.DEFAULT_COLLECTION_PERCENTILE,mo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),mo.DISABLED=new mo(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wd{constructor(e){this.ur=e}next(){return this.ur+=2,this.ur}static cr(){return new wd(0)}static lr(){return new wd(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ub="LruGarbageCollector",rO=1048576;function Vb([n,e],[t,r]){const i=fn(n,t);return i===0?fn(e,r):i}class iO{constructor(e){this.Er=e,this.buffer=new Bi(Vb),this.dr=0}Ar(){return++this.dr}Rr(e){const t=[e,this.Ar()];if(this.buffer.size<this.Er)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();Vb(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class aO{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Vr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.mr(6e4)}stop(){this.Vr&&(this.Vr.cancel(),this.Vr=null)}get started(){return this.Vr!==null}mr(e){At(Ub,`Garbage collection scheduled in ${e}ms`),this.Vr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Vr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Od(t)?At(Ub,"Ignoring IndexedDB error during garbage collection: ",t):await Dd(t)}await this.mr(3e5)})}}class oO{constructor(e,t){this.gr=e,this.params=t}calculateTargetCount(e,t){return this.gr.pr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return Je.resolve(rm.le);const r=new iO(t);return this.gr.forEachTarget(e,i=>r.Rr(i.sequenceNumber)).next(()=>this.gr.yr(e,i=>r.Rr(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.gr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.gr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(At("LruGarbageCollector","Garbage collection skipped; disabled"),Je.resolve(Fb)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(At("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Fb):this.wr(e,t))}getCacheSize(e){return this.gr.getCacheSize(e)}wr(e,t){let r,i,a,o,s,u,f;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(At("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,o=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,s=Date.now(),this.removeTargets(e,r,t))).next(p=>(a=p,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(f=Date.now(),Qh()<=wn.DEBUG&&At("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${i} in `+(s-o)+`ms
	Removed ${a} targets in `+(u-s)+`ms
	Removed ${p} documents in `+(f-u)+`ms
Total Duration: ${f-h}ms`),Je.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:p})))}}function sO(n,e){return new oO(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lO{constructor(){this.changes=new dh(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,ka.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?Je.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uO{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cO{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&W1(r.mutation,i,Xo.empty(),Ei.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,bn()).next(()=>r))}getLocalViewOfDocuments(e,t,r=bn()){const i=Xf();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(a=>{let o=P1();return a.forEach((s,u)=>{o=o.insert(s,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){const r=Xf();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,bn()))}populateOverlays(e,t,r){const i=[];return r.forEach(a=>{t.has(a)||i.push(a)}),this.documentOverlayCache.getOverlays(e,i).next(a=>{a.forEach((o,s)=>{t.set(o,s)})})}computeViews(e,t,r,i){let a=Qu();const o=H1(),s=function(){return H1()}();return t.forEach((u,f)=>{const h=r.get(f.key);i.has(f.key)&&(h===void 0||h.mutation instanceof yf)?a=a.insert(f.key,f):h!==void 0?(o.set(f.key,h.mutation.getFieldMask()),W1(h.mutation,f,h.mutation.getFieldMask(),Ei.now())):o.set(f.key,Xo.empty())}),this.recalculateAndSaveOverlays(e,a).next(u=>(u.forEach((f,h)=>o.set(f,h)),t.forEach((f,h)=>{var p;return s.set(f,new uO(h,(p=o.get(f))!==null&&p!==void 0?p:null))}),s))}recalculateAndSaveOverlays(e,t){const r=H1();let i=new Hr((o,s)=>o-s),a=bn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(const s of o)s.keys().forEach(u=>{const f=t.get(u);if(f===null)return;let h=r.get(u)||Xo.empty();h=s.applyToLocalView(f,h),r.set(u,h);const p=(i.get(s.batchId)||bn()).add(u);i=i.insert(s.batchId,p)})}).next(()=>{const o=[],s=i.getReverseIterator();for(;s.hasNext();){const u=s.getNext(),f=u.key,h=u.value,p=F6();h.forEach(g=>{if(!a.has(g)){const m=W6(t.get(g),r.get(g));m!==null&&p.set(g,m),a=a.add(g)}}),o.push(this.documentOverlayCache.saveOverlays(e,f,p))}return Je.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(o){return Mt.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):L6(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(a=>{const o=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-a.size):Je.resolve(Xf());let s=J1,u=a;return o.next(f=>Je.forEach(f,(h,p)=>(s<p.largestBatchId&&(s=p.largestBatchId),a.get(h)?Je.resolve():this.remoteDocumentCache.getEntry(e,h).next(g=>{u=u.insert(h,g)}))).next(()=>this.populateOverlays(e,f,a)).next(()=>this.computeViews(e,u,f,bn())).next(h=>({batchId:s,changes:j6(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Mt(t)).next(r=>{let i=P1();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const a=t.collectionGroup;let o=P1();return this.indexManager.getCollectionParents(e,a).next(s=>Je.forEach(s,u=>{const f=function(p,g){return new y0(g,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(t,u.child(a));return this.getDocumentsMatchingCollectionQuery(e,f,r,i).next(h=>{h.forEach((p,g)=>{o=o.insert(p,g)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r,i){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(a=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,a,i))).next(o=>{a.forEach((u,f)=>{const h=f.getKey();o.get(h)===null&&(o=o.insert(h,ka.newInvalidDocument(h)))});let s=P1();return o.forEach((u,f)=>{const h=a.get(u);h!==void 0&&W1(h.mutation,f,Xo.empty(),Ei.now()),lm(t,f)&&(s=s.insert(u,f))}),s})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fO{constructor(e){this.serializer=e,this.kr=new Map,this.qr=new Map}getBundleMetadata(e,t){return Je.resolve(this.kr.get(t))}saveBundleMetadata(e,t){return this.kr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:Jl(i.createTime)}}(t)),Je.resolve()}getNamedQuery(e,t){return Je.resolve(this.qr.get(t))}saveNamedQuery(e,t){return this.qr.set(t.name,function(i){return{name:i.name,query:eO(i.bundledQuery),readTime:Jl(i.readTime)}}(t)),Je.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hO{constructor(){this.overlays=new Hr(Mt.comparator),this.Qr=new Map}getOverlay(e,t){return Je.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Xf();return Je.forEach(t,i=>this.getOverlay(e,i).next(a=>{a!==null&&r.set(i,a)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,a)=>{this.St(e,t,a)}),Je.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.Qr.get(r);return i!==void 0&&(i.forEach(a=>this.overlays=this.overlays.remove(a)),this.Qr.delete(r)),Je.resolve()}getOverlaysForCollection(e,t,r){const i=Xf(),a=t.length+1,o=new Mt(t.child("")),s=this.overlays.getIteratorFrom(o);for(;s.hasNext();){const u=s.getNext().value,f=u.getKey();if(!t.isPrefixOf(f.path))break;f.path.length===a&&u.largestBatchId>r&&i.set(u.getKey(),u)}return Je.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let a=new Hr((f,h)=>f-h);const o=this.overlays.getIterator();for(;o.hasNext();){const f=o.getNext().value;if(f.getKey().getCollectionGroup()===t&&f.largestBatchId>r){let h=a.get(f.largestBatchId);h===null&&(h=Xf(),a=a.insert(f.largestBatchId,h)),h.set(f.getKey(),f)}}const s=Xf(),u=a.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((f,h)=>s.set(f,h)),!(s.size()>=i)););return Je.resolve(s)}St(e,t,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.Qr.get(i.largestBatchId).delete(r.key);this.Qr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new DD(t,r));let a=this.Qr.get(t);a===void 0&&(a=bn(),this.Qr.set(t,a)),this.Qr.set(t,a.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dO{constructor(){this.sessionToken=da.EMPTY_BYTE_STRING}getSessionToken(e){return Je.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Je.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C5{constructor(){this.$r=new Bi(Yi.Ur),this.Kr=new Bi(Yi.Wr)}isEmpty(){return this.$r.isEmpty()}addReference(e,t){const r=new Yi(e,t);this.$r=this.$r.add(r),this.Kr=this.Kr.add(r)}Gr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.zr(new Yi(e,t))}jr(e,t){e.forEach(r=>this.removeReference(r,t))}Hr(e){const t=new Mt(new Ir([])),r=new Yi(t,e),i=new Yi(t,e+1),a=[];return this.Kr.forEachInRange([r,i],o=>{this.zr(o),a.push(o.key)}),a}Jr(){this.$r.forEach(e=>this.zr(e))}zr(e){this.$r=this.$r.delete(e),this.Kr=this.Kr.delete(e)}Yr(e){const t=new Mt(new Ir([])),r=new Yi(t,e),i=new Yi(t,e+1);let a=bn();return this.Kr.forEachInRange([r,i],o=>{a=a.add(o.key)}),a}containsKey(e){const t=new Yi(e,0),r=this.$r.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class Yi{constructor(e,t){this.key=e,this.Zr=t}static Ur(e,t){return Mt.comparator(e.key,t.key)||fn(e.Zr,t.Zr)}static Wr(e,t){return fn(e.Zr,t.Zr)||Mt.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pO{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.nr=1,this.Xr=new Bi(Yi.Ur)}checkEmpty(e){return Je.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){const a=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new ND(a,t,r,i);this.mutationQueue.push(o);for(const s of i)this.Xr=this.Xr.add(new Yi(s.key,a)),this.indexManager.addToCollectionParentIndex(e,s.key.path.popLast());return Je.resolve(o)}lookupMutationBatch(e,t){return Je.resolve(this.ei(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=this.ti(r),a=i<0?0:i;return Je.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return Je.resolve(this.mutationQueue.length===0?m5:this.nr-1)}getAllMutationBatches(e){return Je.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Yi(t,0),i=new Yi(t,Number.POSITIVE_INFINITY),a=[];return this.Xr.forEachInRange([r,i],o=>{const s=this.ei(o.Zr);a.push(s)}),Je.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Bi(fn);return t.forEach(i=>{const a=new Yi(i,0),o=new Yi(i,Number.POSITIVE_INFINITY);this.Xr.forEachInRange([a,o],s=>{r=r.add(s.Zr)})}),Je.resolve(this.ni(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let a=r;Mt.isDocumentKey(a)||(a=a.child(""));const o=new Yi(new Mt(a),0);let s=new Bi(fn);return this.Xr.forEachWhile(u=>{const f=u.key.path;return!!r.isPrefixOf(f)&&(f.length===i&&(s=s.add(u.Zr)),!0)},o),Je.resolve(this.ni(s))}ni(e){const t=[];return e.forEach(r=>{const i=this.ei(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){Jn(this.ri(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Xr;return Je.forEach(t.mutations,i=>{const a=new Yi(i.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Xr=r})}sr(e){}containsKey(e,t){const r=new Yi(t,0),i=this.Xr.firstAfterOrEqual(r);return Je.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,Je.resolve()}ri(e,t){return this.ti(e)}ti(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}ei(e){const t=this.ti(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gO{constructor(e){this.ii=e,this.docs=function(){return new Hr(Mt.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),a=i?i.size:0,o=this.ii(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return Je.resolve(r?r.document.mutableCopy():ka.newInvalidDocument(t))}getEntries(e,t){let r=Qu();return t.forEach(i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():ka.newInvalidDocument(i))}),Je.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let a=Qu();const o=t.path,s=new Mt(o.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(s);for(;u.hasNext();){const{key:f,value:{document:h}}=u.getNext();if(!o.isPrefixOf(f.path))break;f.path.length>o.length+1||H9(q9(h),r)<=0||(i.has(h.key)||lm(t,h))&&(a=a.insert(h.key,h.mutableCopy()))}return Je.resolve(a)}getAllFromCollectionGroup(e,t,r,i){Xt(9500)}si(e,t){return Je.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new mO(this)}getSize(e){return Je.resolve(this.size)}}class mO extends lO{constructor(e){super(),this.Br=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Br.addEntry(e,i)):this.Br.removeEntry(r)}),Je.waitFor(t)}getFromCache(e,t){return this.Br.getEntry(e,t)}getAllFromCache(e,t){return this.Br.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vO{constructor(e){this.persistence=e,this.oi=new dh(t=>x5(t),_5),this.lastRemoteSnapshotVersion=Jt.min(),this.highestTargetId=0,this._i=0,this.ai=new C5,this.targetCount=0,this.ui=wd.cr()}forEachTarget(e,t){return this.oi.forEach((r,i)=>t(i)),Je.resolve()}getLastRemoteSnapshotVersion(e){return Je.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Je.resolve(this._i)}allocateTargetId(e){return this.highestTargetId=this.ui.next(),Je.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this._i&&(this._i=t),Je.resolve()}Tr(e){this.oi.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ui=new wd(t),this.highestTargetId=t),e.sequenceNumber>this._i&&(this._i=e.sequenceNumber)}addTargetData(e,t){return this.Tr(t),this.targetCount+=1,Je.resolve()}updateTargetData(e,t){return this.Tr(t),Je.resolve()}removeTargetData(e,t){return this.oi.delete(t.target),this.ai.Hr(t.targetId),this.targetCount-=1,Je.resolve()}removeTargets(e,t,r){let i=0;const a=[];return this.oi.forEach((o,s)=>{s.sequenceNumber<=t&&r.get(s.targetId)===null&&(this.oi.delete(o),a.push(this.removeMatchingKeysForTargetId(e,s.targetId)),i++)}),Je.waitFor(a).next(()=>i)}getTargetCount(e){return Je.resolve(this.targetCount)}getTargetData(e,t){const r=this.oi.get(t)||null;return Je.resolve(r)}addMatchingKeys(e,t,r){return this.ai.Gr(t,r),Je.resolve()}removeMatchingKeys(e,t,r){this.ai.jr(t,r);const i=this.persistence.referenceDelegate,a=[];return i&&t.forEach(o=>{a.push(i.markPotentiallyOrphaned(e,o))}),Je.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.ai.Hr(t),Je.resolve()}getMatchingKeysForTargetId(e,t){const r=this.ai.Yr(t);return Je.resolve(r)}containsKey(e,t){return Je.resolve(this.ai.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iE{constructor(e,t){this.ci={},this.overlays={},this.li=new rm(0),this.hi=!1,this.hi=!0,this.Pi=new dO,this.referenceDelegate=e(this),this.Ti=new vO(this),this.indexManager=new tO,this.remoteDocumentCache=function(i){return new gO(i)}(r=>this.referenceDelegate.Ii(r)),this.serializer=new JD(t),this.Ei=new fO(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.hi=!1,Promise.resolve()}get started(){return this.hi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new hO,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ci[e.toKey()];return r||(r=new pO(t,this.referenceDelegate),this.ci[e.toKey()]=r),r}getGlobalsCache(){return this.Pi}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ei}runTransaction(e,t,r){At("MemoryPersistence","Starting transaction:",e);const i=new yO(this.li.next());return this.referenceDelegate.di(),r(i).next(a=>this.referenceDelegate.Ai(i).next(()=>a)).toPromise().then(a=>(i.raiseOnCommittedEvent(),a))}Ri(e,t){return Je.or(Object.values(this.ci).map(r=>()=>r.containsKey(e,t)))}}class yO extends G9{constructor(e){super(),this.currentSequenceNumber=e}}class T5{constructor(e){this.persistence=e,this.Vi=new C5,this.mi=null}static fi(e){return new T5(e)}get gi(){if(this.mi)return this.mi;throw Xt(60996)}addReference(e,t,r){return this.Vi.addReference(r,t),this.gi.delete(r.toString()),Je.resolve()}removeReference(e,t,r){return this.Vi.removeReference(r,t),this.gi.add(r.toString()),Je.resolve()}markPotentiallyOrphaned(e,t){return this.gi.add(t.toString()),Je.resolve()}removeTarget(e,t){this.Vi.Hr(t.targetId).forEach(i=>this.gi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(a=>this.gi.add(a.toString()))}).next(()=>r.removeTargetData(e,t))}di(){this.mi=new Set}Ai(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Je.forEach(this.gi,r=>{const i=Mt.fromPath(r);return this.pi(e,i).next(a=>{a||t.removeEntry(i,Jt.min())})}).next(()=>(this.mi=null,t.apply(e)))}updateLimboDocument(e,t){return this.pi(e,t).next(r=>{r?this.gi.delete(t.toString()):this.gi.add(t.toString())})}Ii(e){return 0}pi(e,t){return Je.or([()=>Je.resolve(this.Vi.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ri(e,t)])}}class Cg{constructor(e,t){this.persistence=e,this.yi=new dh(r=>Y9(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=sO(this,t)}static fi(e,t){return new Cg(e,t)}di(){}Ai(e){return Je.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}pr(e){const t=this.br(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}br(e){let t=0;return this.yr(e,r=>{t++}).next(()=>t)}yr(e,t){return Je.forEach(this.yi,(r,i)=>this.Dr(e,r,i).next(a=>a?Je.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const i=this.persistence.getRemoteDocumentCache(),a=i.newChangeBuffer();return i.si(e,o=>this.Dr(e,o,t).next(s=>{s||(r++,a.removeEntry(o,Jt.min()))})).next(()=>a.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.yi.set(t,e.currentSequenceNumber),Je.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.yi.set(r,e.currentSequenceNumber),Je.resolve()}removeReference(e,t,r){return this.yi.set(r,e.currentSequenceNumber),Je.resolve()}updateLimboDocument(e,t){return this.yi.set(t,e.currentSequenceNumber),Je.resolve()}Ii(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Kp(e.data.value)),t}Dr(e,t,r){return Je.or([()=>this.persistence.Ri(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const i=this.yi.get(t);return Je.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I5{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.ds=r,this.As=i}static Rs(e,t){let r=bn(),i=bn();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new I5(e,t.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xO{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _O{constructor(){this.Vs=!1,this.fs=!1,this.gs=100,this.ps=function(){return XI()?8:$9(ja())>0?6:4}()}initialize(e,t){this.ys=e,this.indexManager=t,this.Vs=!0}getDocumentsMatchingQuery(e,t,r,i){const a={result:null};return this.ws(e,t).next(o=>{a.result=o}).next(()=>{if(!a.result)return this.bs(e,t,i,r).next(o=>{a.result=o})}).next(()=>{if(a.result)return;const o=new xO;return this.Ss(e,t,o).next(s=>{if(a.result=s,this.fs)return this.Ds(e,t,o,s.size)})}).next(()=>a.result)}Ds(e,t,r,i){return r.documentReadCount<this.gs?(Qh()<=wn.DEBUG&&At("QueryEngine","SDK will not create cache indexes for query:",Zh(t),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),Je.resolve()):(Qh()<=wn.DEBUG&&At("QueryEngine","Query:",Zh(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.ps*i?(Qh()<=wn.DEBUG&&At("QueryEngine","The SDK decides to create cache indexes for query:",Zh(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Zl(t))):Je.resolve())}ws(e,t){if(Rb(t))return Je.resolve(null);let r=Zl(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=oy(t,null,"F"),r=Zl(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(a=>{const o=bn(...a);return this.ys.getDocuments(e,o).next(s=>this.indexManager.getMinOffset(e,r).next(u=>{const f=this.vs(t,s);return this.Cs(t,f,o,u.readTime)?this.ws(e,oy(t,null,"F")):this.Fs(e,f,t,u)}))})))}bs(e,t,r,i){return Rb(t)||i.isEqual(Jt.min())?Je.resolve(null):this.ys.getDocuments(e,r).next(a=>{const o=this.vs(t,a);return this.Cs(t,o,r,i)?Je.resolve(null):(Qh()<=wn.DEBUG&&At("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Zh(t)),this.Fs(e,o,t,z9(i,J1)).next(s=>s))})}vs(e,t){let r=new Bi(M6(e));return t.forEach((i,a)=>{lm(e,a)&&(r=r.add(a))}),r}Cs(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const a=e.limitType==="F"?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Ss(e,t,r){return Qh()<=wn.DEBUG&&At("QueryEngine","Using full collection scan to execute query:",Zh(t)),this.ys.getDocumentsMatchingQuery(e,t,sf.min(),r)}Fs(e,t,r,i){return this.ys.getDocumentsMatchingQuery(e,r,i).next(a=>(t.forEach(o=>{a=a.insert(o.key,o)}),a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R5="LocalStore",wO=3e8;class bO{constructor(e,t,r,i){this.persistence=e,this.Ms=t,this.serializer=i,this.xs=new Hr(fn),this.Os=new dh(a=>x5(a),_5),this.Ns=new Map,this.Bs=e.getRemoteDocumentCache(),this.Ti=e.getTargetCache(),this.Ei=e.getBundleCache(),this.Ls(r)}Ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new cO(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.xs))}}function AO(n,e,t,r){return new bO(n,e,t,r)}async function aE(n,e){const t=tn(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(a=>(i=a,t.Ls(e),t.mutationQueue.getAllMutationBatches(r))).next(a=>{const o=[],s=[];let u=bn();for(const f of i){o.push(f.batchId);for(const h of f.mutations)u=u.add(h.key)}for(const f of a){s.push(f.batchId);for(const h of f.mutations)u=u.add(h.key)}return t.localDocuments.getDocuments(r,u).next(f=>({ks:f,removedBatchIds:o,addedBatchIds:s}))})})}function EO(n,e){const t=tn(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),a=t.Bs.newChangeBuffer({trackRemovals:!0});return function(s,u,f,h){const p=f.batch,g=p.keys();let m=Je.resolve();return g.forEach(x=>{m=m.next(()=>h.getEntry(u,x)).next(w=>{const I=f.docVersions.get(x);Jn(I!==null,48541),w.version.compareTo(I)<0&&(p.applyToRemoteDocument(w,f),w.isValidDocument()&&(w.setReadTime(f.commitVersion),h.addEntry(w)))})}),m.next(()=>s.mutationQueue.removeMutationBatch(u,p))}(t,r,e,a).next(()=>a.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(s){let u=bn();for(let f=0;f<s.mutationResults.length;++f)s.mutationResults[f].transformResults.length>0&&(u=u.add(s.batch.mutations[f].key));return u}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function oE(n){const e=tn(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ti.getLastRemoteSnapshotVersion(t))}function SO(n,e){const t=tn(n),r=e.snapshotVersion;let i=t.xs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const o=t.Bs.newChangeBuffer({trackRemovals:!0});i=t.xs;const s=[];e.targetChanges.forEach((h,p)=>{const g=i.get(p);if(!g)return;s.push(t.Ti.removeMatchingKeys(a,h.removedDocuments,p).next(()=>t.Ti.addMatchingKeys(a,h.addedDocuments,p)));let m=g.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(p)!==null?m=m.withResumeToken(da.EMPTY_BYTE_STRING,Jt.min()).withLastLimboFreeSnapshotVersion(Jt.min()):h.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(h.resumeToken,r)),i=i.insert(p,m),function(w,I,C){return w.resumeToken.approximateByteSize()===0||I.snapshotVersion.toMicroseconds()-w.snapshotVersion.toMicroseconds()>=wO?!0:C.addedDocuments.size+C.modifiedDocuments.size+C.removedDocuments.size>0}(g,m,h)&&s.push(t.Ti.updateTargetData(a,m))});let u=Qu(),f=bn();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&s.push(t.persistence.referenceDelegate.updateLimboDocument(a,h))}),s.push(CO(a,o,e.documentUpdates).next(h=>{u=h.qs,f=h.Qs})),!r.isEqual(Jt.min())){const h=t.Ti.getLastRemoteSnapshotVersion(a).next(p=>t.Ti.setTargetsMetadata(a,a.currentSequenceNumber,r));s.push(h)}return Je.waitFor(s).next(()=>o.apply(a)).next(()=>t.localDocuments.getLocalViewOfDocuments(a,u,f)).next(()=>u)}).then(a=>(t.xs=i,a))}function CO(n,e,t){let r=bn(),i=bn();return t.forEach(a=>r=r.add(a)),e.getEntries(n,r).next(a=>{let o=Qu();return t.forEach((s,u)=>{const f=a.get(s);u.isFoundDocument()!==f.isFoundDocument()&&(i=i.add(s)),u.isNoDocument()&&u.version.isEqual(Jt.min())?(e.removeEntry(s,u.readTime),o=o.insert(s,u)):!f.isValidDocument()||u.version.compareTo(f.version)>0||u.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(u),o=o.insert(s,u)):At(R5,"Ignoring outdated watch update for ",s,". Current version:",f.version," Watch version:",u.version)}),{qs:o,Qs:i}})}function TO(n,e){const t=tn(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=m5),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function IO(n,e){const t=tn(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Ti.getTargetData(r,e).next(a=>a?(i=a,Je.resolve(i)):t.Ti.allocateTargetId(r).next(o=>(i=new Qc(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.Ti.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.xs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.xs=t.xs.insert(r.targetId,r),t.Os.set(e,r.targetId)),r})}async function fy(n,e,t){const r=tn(n),i=r.xs.get(e),a=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",a,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Od(o))throw o;At(R5,`Failed to update sequence numbers for target ${e}: ${o}`)}r.xs=r.xs.remove(e),r.Os.delete(i.target)}function zb(n,e,t){const r=tn(n);let i=Jt.min(),a=bn();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,f,h){const p=tn(u),g=p.Os.get(h);return g!==void 0?Je.resolve(p.xs.get(g)):p.Ti.getTargetData(f,h)}(r,o,Zl(e)).next(s=>{if(s)return i=s.lastLimboFreeSnapshotVersion,r.Ti.getMatchingKeysForTargetId(o,s.targetId).next(u=>{a=u})}).next(()=>r.Ms.getDocumentsMatchingQuery(o,e,t?i:Jt.min(),t?a:bn())).next(s=>(RO(r,pD(e),s),{documents:s,$s:a})))}function RO(n,e,t){let r=n.Ns.get(e)||Jt.min();t.forEach((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),n.Ns.set(e,r)}class qb{constructor(){this.activeTargetIds=_D()}js(e){this.activeTargetIds=this.activeTargetIds.add(e)}Hs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}zs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class NO{constructor(){this.xo=new qb,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.xo.js(e),this.Oo[e]||"not-current"}updateQueryState(e,t,r){this.Oo[e]=t}removeLocalQueryTarget(e){this.xo.Hs(e)}isLocalQueryTarget(e){return this.xo.activeTargetIds.has(e)}clearQueryState(e){delete this.Oo[e]}getAllActiveQueryTargets(){return this.xo.activeTargetIds}isActiveQueryTarget(e){return this.xo.activeTargetIds.has(e)}start(){return this.xo=new qb,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DO{No(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hb="ConnectivityMonitor";class Wb{constructor(){this.Bo=()=>this.Lo(),this.ko=()=>this.qo(),this.Qo=[],this.$o()}No(e){this.Qo.push(e)}shutdown(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}$o(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}Lo(){At(Hb,"Network connectivity changed: AVAILABLE");for(const e of this.Qo)e(0)}qo(){At(Hb,"Network connectivity changed: UNAVAILABLE");for(const e of this.Qo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Op=null;function hy(){return Op===null?Op=function(){return 268435456+Math.round(2147483648*Math.random())}():Op++,"0x"+Op.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uv="RestConnection",OO={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class PO{get Uo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Ko=t+"://"+e.host,this.Wo=`projects/${r}/databases/${i}`,this.Go=this.databaseId.database===_g?`project_id=${r}`:`project_id=${r}&database_id=${i}`}zo(e,t,r,i,a){const o=hy(),s=this.jo(e,t.toUriEncodedString());At(uv,`Sending RPC '${e}' ${o}:`,s,r);const u={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(u,i,a);const{host:f}=new URL(s),h=Id(f);return this.Jo(e,s,u,r,h).then(p=>(At(uv,`Received RPC '${e}' ${o}: `,p),p),p=>{throw vd(uv,`RPC '${e}' ${o} failed with error: `,p,"url: ",s,"request:",r),p})}Yo(e,t,r,i,a,o){return this.zo(e,t,r,i,a)}Ho(e,t,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Nd}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,a)=>e[a]=i),r&&r.headers.forEach((i,a)=>e[a]=i)}jo(e,t){const r=OO[e];return`${this.Ko}/v1/${t}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LO{constructor(e){this.Zo=e.Zo,this.Xo=e.Xo}e_(e){this.t_=e}n_(e){this.r_=e}i_(e){this.s_=e}onMessage(e){this.o_=e}close(){this.Xo()}send(e){this.Zo(e)}__(){this.t_()}a_(){this.r_()}u_(e){this.s_(e)}c_(e){this.o_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ta="WebChannelConnection";class kO extends PO{constructor(e){super(e),this.l_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,i,a){const o=hy();return new Promise((s,u)=>{const f=new u6;f.setWithCredentials(!0),f.listenOnce(c6.COMPLETE,()=>{try{switch(f.getLastErrorCode()){case Yp.NO_ERROR:const p=f.getResponseJson();At(Ta,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(p)),s(p);break;case Yp.TIMEOUT:At(Ta,`RPC '${e}' ${o} timed out`),u(new Et(et.DEADLINE_EXCEEDED,"Request time out"));break;case Yp.HTTP_ERROR:const g=f.getStatus();if(At(Ta,`RPC '${e}' ${o} failed with status:`,g,"response text:",f.getResponseText()),g>0){let m=f.getResponseJson();Array.isArray(m)&&(m=m[0]);const x=m==null?void 0:m.error;if(x&&x.status&&x.message){const w=function(C){const P=C.toLowerCase().replace(/_/g,"-");return Object.values(et).indexOf(P)>=0?P:et.UNKNOWN}(x.status);u(new Et(w,x.message))}else u(new Et(et.UNKNOWN,"Server responded with status "+f.getStatus()))}else u(new Et(et.UNAVAILABLE,"Connection failed."));break;default:Xt(9055,{h_:e,streamId:o,P_:f.getLastErrorCode(),T_:f.getLastError()})}}finally{At(Ta,`RPC '${e}' ${o} completed.`)}});const h=JSON.stringify(i);At(Ta,`RPC '${e}' ${o} sending request:`,i),f.send(t,"POST",h,r,15)})}I_(e,t,r){const i=hy(),a=[this.Ko,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=d6(),s=h6(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(u.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Ho(u.initMessageHeaders,t,r),u.encodeInitMessageHeaders=!0;const h=a.join("");At(Ta,`Creating RPC '${e}' stream ${i}: ${h}`,u);const p=o.createWebChannel(h,u);this.E_(p);let g=!1,m=!1;const x=new LO({Zo:I=>{m?At(Ta,`Not sending because RPC '${e}' stream ${i} is closed:`,I):(g||(At(Ta,`Opening RPC '${e}' stream ${i} transport.`),p.open(),g=!0),At(Ta,`RPC '${e}' stream ${i} sending:`,I),p.send(I))},Xo:()=>p.close()}),w=(I,C,P)=>{I.listen(C,B=>{try{P(B)}catch(V){setTimeout(()=>{throw V},0)}})};return w(p,O1.EventType.OPEN,()=>{m||(At(Ta,`RPC '${e}' stream ${i} transport opened.`),x.__())}),w(p,O1.EventType.CLOSE,()=>{m||(m=!0,At(Ta,`RPC '${e}' stream ${i} transport closed`),x.u_(),this.d_(p))}),w(p,O1.EventType.ERROR,I=>{m||(m=!0,vd(Ta,`RPC '${e}' stream ${i} transport errored. Name:`,I.name,"Message:",I.message),x.u_(new Et(et.UNAVAILABLE,"The operation could not be completed")))}),w(p,O1.EventType.MESSAGE,I=>{var C;if(!m){const P=I.data[0];Jn(!!P,16349);const B=P,V=(B==null?void 0:B.error)||((C=B[0])===null||C===void 0?void 0:C.error);if(V){At(Ta,`RPC '${e}' stream ${i} received error:`,V);const Y=V.status;let q=function(T){const k=wi[T];if(k!==void 0)return $6(k)}(Y),D=V.message;q===void 0&&(q=et.INTERNAL,D="Unknown error status: "+Y+" with message "+V.message),m=!0,x.u_(new Et(q,D)),p.close()}else At(Ta,`RPC '${e}' stream ${i} received:`,P),x.c_(P)}}),w(s,f6.STAT_EVENT,I=>{I.stat===Jv.PROXY?At(Ta,`RPC '${e}' stream ${i} detected buffering proxy`):I.stat===Jv.NOPROXY&&At(Ta,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{x.a_()},0),x}terminate(){this.l_.forEach(e=>e.close()),this.l_=[]}E_(e){this.l_.push(e)}d_(e){this.l_=this.l_.filter(t=>t===e)}}function cv(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hm(n){return new FD(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sE{constructor(e,t,r=1e3,i=1.5,a=6e4){this.xi=e,this.timerId=t,this.A_=r,this.R_=i,this.V_=a,this.m_=0,this.f_=null,this.g_=Date.now(),this.reset()}reset(){this.m_=0}p_(){this.m_=this.V_}y_(e){this.cancel();const t=Math.floor(this.m_+this.w_()),r=Math.max(0,Date.now()-this.g_),i=Math.max(0,t-r);i>0&&At("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.m_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.f_=this.xi.enqueueAfterDelay(this.timerId,i,()=>(this.g_=Date.now(),e())),this.m_*=this.R_,this.m_<this.A_&&(this.m_=this.A_),this.m_>this.V_&&(this.m_=this.V_)}b_(){this.f_!==null&&(this.f_.skipDelay(),this.f_=null)}cancel(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}w_(){return(Math.random()-.5)*this.m_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gb="PersistentStream";class lE{constructor(e,t,r,i,a,o,s,u){this.xi=e,this.S_=r,this.D_=i,this.connection=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=s,this.listener=u,this.state=0,this.v_=0,this.C_=null,this.F_=null,this.stream=null,this.M_=0,this.x_=new sE(e,t)}O_(){return this.state===1||this.state===5||this.N_()}N_(){return this.state===2||this.state===3}start(){this.M_=0,this.state!==4?this.auth():this.B_()}async stop(){this.O_()&&await this.close(0)}L_(){this.state=0,this.x_.reset()}k_(){this.N_()&&this.C_===null&&(this.C_=this.xi.enqueueAfterDelay(this.S_,6e4,()=>this.q_()))}Q_(e){this.U_(),this.stream.send(e)}async q_(){if(this.N_())return this.close(0)}U_(){this.C_&&(this.C_.cancel(),this.C_=null)}K_(){this.F_&&(this.F_.cancel(),this.F_=null)}async close(e,t){this.U_(),this.K_(),this.x_.cancel(),this.v_++,e!==4?this.x_.reset():t&&t.code===et.RESOURCE_EXHAUSTED?(Ku(t.toString()),Ku("Using maximum backoff delay to prevent overloading the backend."),this.x_.p_()):t&&t.code===et.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.i_(t)}W_(){}auth(){this.state=1;const e=this.G_(this.v_),t=this.v_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.v_===t&&this.z_(r,i)},r=>{e(()=>{const i=new Et(et.UNKNOWN,"Fetching auth token failed: "+r.message);return this.j_(i)})})}z_(e,t){const r=this.G_(this.v_);this.stream=this.H_(e,t),this.stream.e_(()=>{r(()=>this.listener.e_())}),this.stream.n_(()=>{r(()=>(this.state=2,this.F_=this.xi.enqueueAfterDelay(this.D_,1e4,()=>(this.N_()&&(this.state=3),Promise.resolve())),this.listener.n_()))}),this.stream.i_(i=>{r(()=>this.j_(i))}),this.stream.onMessage(i=>{r(()=>++this.M_==1?this.J_(i):this.onNext(i))})}B_(){this.state=5,this.x_.y_(async()=>{this.state=0,this.start()})}j_(e){return At(Gb,`close with error: ${e}`),this.stream=null,this.close(4,e)}G_(e){return t=>{this.xi.enqueueAndForget(()=>this.v_===e?t():(At(Gb,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class MO extends lE{constructor(e,t,r,i,a,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.serializer=a}H_(e,t){return this.connection.I_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.x_.reset();const t=zD(this.serializer,e),r=function(a){if(!("targetChange"in a))return Jt.min();const o=a.targetChange;return o.targetIds&&o.targetIds.length?Jt.min():o.readTime?Jl(o.readTime):Jt.min()}(e);return this.listener.Y_(t,r)}Z_(e){const t={};t.database=cy(this.serializer),t.addTarget=function(a,o){let s;const u=o.target;if(s=iy(u)?{documents:WD(a,u)}:{query:GD(a,u).gt},s.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){s.resumeToken=K6(a,o.resumeToken);const f=sy(a,o.expectedCount);f!==null&&(s.expectedCount=f)}else if(o.snapshotVersion.compareTo(Jt.min())>0){s.readTime=Sg(a,o.snapshotVersion.toTimestamp());const f=sy(a,o.expectedCount);f!==null&&(s.expectedCount=f)}return s}(this.serializer,e);const r=XD(this.serializer,e);r&&(t.labels=r),this.Q_(t)}X_(e){const t={};t.database=cy(this.serializer),t.removeTarget=e,this.Q_(t)}}class BO extends lE{constructor(e,t,r,i,a,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,o),this.serializer=a}get ea(){return this.M_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.ea&&this.ta([])}H_(e,t){return this.connection.I_("Write",e,t)}J_(e){return Jn(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Jn(!e.writeResults||e.writeResults.length===0,55816),this.listener.na()}onNext(e){Jn(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.x_.reset();const t=HD(e.writeResults,e.commitTime),r=Jl(e.commitTime);return this.listener.ra(r,t)}ia(){const e={};e.database=cy(this.serializer),this.Q_(e)}ta(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>qD(this.serializer,r))};this.Q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jO{}class FO extends jO{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.sa=!1}oa(){if(this.sa)throw new Et(et.FAILED_PRECONDITION,"The client has already been terminated.")}zo(e,t,r,i){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,o])=>this.connection.zo(e,ly(t,r),i,a,o)).catch(a=>{throw a.name==="FirebaseError"?(a.code===et.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Et(et.UNKNOWN,a.toString())})}Yo(e,t,r,i,a){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Yo(e,ly(t,r),i,o,s,a)).catch(o=>{throw o.name==="FirebaseError"?(o.code===et.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Et(et.UNKNOWN,o.toString())})}terminate(){this.sa=!0,this.connection.terminate()}}class UO{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this._a=0,this.aa=null,this.ua=!0}ca(){this._a===0&&(this.la("Unknown"),this.aa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.aa=null,this.ha("Backend didn't respond within 10 seconds."),this.la("Offline"),Promise.resolve())))}Pa(e){this.state==="Online"?this.la("Unknown"):(this._a++,this._a>=1&&(this.Ta(),this.ha(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.la("Offline")))}set(e){this.Ta(),this._a=0,e==="Online"&&(this.ua=!1),this.la(e)}la(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ha(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ua?(Ku(t),this.ua=!1):At("OnlineStateTracker",t)}Ta(){this.aa!==null&&(this.aa.cancel(),this.aa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ih="RemoteStore";class VO{constructor(e,t,r,i,a){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ia=[],this.Ea=new Map,this.da=new Set,this.Aa=[],this.Ra=a,this.Ra.No(o=>{r.enqueueAndForget(async()=>{ph(this)&&(At(ih,"Restarting streams for network reachability change."),await async function(u){const f=tn(u);f.da.add(4),await w0(f),f.Va.set("Unknown"),f.da.delete(4),await dm(f)}(this))})}),this.Va=new UO(r,i)}}async function dm(n){if(ph(n))for(const e of n.Aa)await e(!0)}async function w0(n){for(const e of n.Aa)await e(!1)}function uE(n,e){const t=tn(n);t.Ea.has(e.targetId)||(t.Ea.set(e.targetId,e),P5(t)?O5(t):Pd(t).N_()&&D5(t,e))}function N5(n,e){const t=tn(n),r=Pd(t);t.Ea.delete(e),r.N_()&&cE(t,e),t.Ea.size===0&&(r.N_()?r.k_():ph(t)&&t.Va.set("Unknown"))}function D5(n,e){if(n.ma.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Jt.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Pd(n).Z_(e)}function cE(n,e){n.ma.Ke(e),Pd(n).X_(e)}function O5(n){n.ma=new kD({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>n.Ea.get(e)||null,Pt:()=>n.datastore.serializer.databaseId}),Pd(n).start(),n.Va.ca()}function P5(n){return ph(n)&&!Pd(n).O_()&&n.Ea.size>0}function ph(n){return tn(n).da.size===0}function fE(n){n.ma=void 0}async function zO(n){n.Va.set("Online")}async function qO(n){n.Ea.forEach((e,t)=>{D5(n,e)})}async function HO(n,e){fE(n),P5(n)?(n.Va.Pa(e),O5(n)):n.Va.set("Unknown")}async function WO(n,e,t){if(n.Va.set("Online"),e instanceof Y6&&e.state===2&&e.cause)try{await async function(i,a){const o=a.cause;for(const s of a.targetIds)i.Ea.has(s)&&(await i.remoteSyncer.rejectListen(s,o),i.Ea.delete(s),i.ma.removeTarget(s))}(n,e)}catch(r){At(ih,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Tg(n,r)}else if(e instanceof Jp?n.ma.Xe(e):e instanceof X6?n.ma.ot(e):n.ma.nt(e),!t.isEqual(Jt.min()))try{const r=await oE(n.localStore);t.compareTo(r)>=0&&await function(a,o){const s=a.ma.It(o);return s.targetChanges.forEach((u,f)=>{if(u.resumeToken.approximateByteSize()>0){const h=a.Ea.get(f);h&&a.Ea.set(f,h.withResumeToken(u.resumeToken,o))}}),s.targetMismatches.forEach((u,f)=>{const h=a.Ea.get(u);if(!h)return;a.Ea.set(u,h.withResumeToken(da.EMPTY_BYTE_STRING,h.snapshotVersion)),cE(a,u);const p=new Qc(h.target,u,f,h.sequenceNumber);D5(a,p)}),a.remoteSyncer.applyRemoteEvent(s)}(n,t)}catch(r){At(ih,"Failed to raise snapshot:",r),await Tg(n,r)}}async function Tg(n,e,t){if(!Od(e))throw e;n.da.add(1),await w0(n),n.Va.set("Offline"),t||(t=()=>oE(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{At(ih,"Retrying IndexedDB access"),await t(),n.da.delete(1),await dm(n)})}function hE(n,e){return e().catch(t=>Tg(n,t,e))}async function pm(n){const e=tn(n),t=ff(e);let r=e.Ia.length>0?e.Ia[e.Ia.length-1].batchId:m5;for(;GO(e);)try{const i=await TO(e.localStore,r);if(i===null){e.Ia.length===0&&t.k_();break}r=i.batchId,$O(e,i)}catch(i){await Tg(e,i)}dE(e)&&pE(e)}function GO(n){return ph(n)&&n.Ia.length<10}function $O(n,e){n.Ia.push(e);const t=ff(n);t.N_()&&t.ea&&t.ta(e.mutations)}function dE(n){return ph(n)&&!ff(n).O_()&&n.Ia.length>0}function pE(n){ff(n).start()}async function XO(n){ff(n).ia()}async function YO(n){const e=ff(n);for(const t of n.Ia)e.ta(t.mutations)}async function KO(n,e,t){const r=n.Ia.shift(),i=A5.from(r,e,t);await hE(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),await pm(n)}async function QO(n,e){e&&ff(n).ea&&await async function(r,i){if(function(o){return PD(o)&&o!==et.ABORTED}(i.code)){const a=r.Ia.shift();ff(r).L_(),await hE(r,()=>r.remoteSyncer.rejectFailedWrite(a.batchId,i)),await pm(r)}}(n,e),dE(n)&&pE(n)}async function $b(n,e){const t=tn(n);t.asyncQueue.verifyOperationInProgress(),At(ih,"RemoteStore received new credentials");const r=ph(t);t.da.add(3),await w0(t),r&&t.Va.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.da.delete(3),await dm(t)}async function ZO(n,e){const t=tn(n);e?(t.da.delete(2),await dm(t)):e||(t.da.add(2),await w0(t),t.Va.set("Unknown"))}function Pd(n){return n.fa||(n.fa=function(t,r,i){const a=tn(t);return a.oa(),new MO(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)}(n.datastore,n.asyncQueue,{e_:zO.bind(null,n),n_:qO.bind(null,n),i_:HO.bind(null,n),Y_:WO.bind(null,n)}),n.Aa.push(async e=>{e?(n.fa.L_(),P5(n)?O5(n):n.Va.set("Unknown")):(await n.fa.stop(),fE(n))})),n.fa}function ff(n){return n.ga||(n.ga=function(t,r,i){const a=tn(t);return a.oa(),new BO(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)}(n.datastore,n.asyncQueue,{e_:()=>Promise.resolve(),n_:XO.bind(null,n),i_:QO.bind(null,n),na:YO.bind(null,n),ra:KO.bind(null,n)}),n.Aa.push(async e=>{e?(n.ga.L_(),await pm(n)):(await n.ga.stop(),n.Ia.length>0&&(At(ih,`Stopping write stream with ${n.Ia.length} pending writes`),n.Ia=[]))})),n.ga}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L5{constructor(e,t,r,i,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new Wu,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,a){const o=Date.now()+r,s=new L5(e,t,o,i,a);return s.start(r),s}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Et(et.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function k5(n,e){if(Ku("AsyncQueue",`${e}: ${n}`),Od(n))return new Et(et.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fd{static emptySet(e){return new fd(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||Mt.comparator(t.key,r.key):(t,r)=>Mt.comparator(t.key,r.key),this.keyedMap=P1(),this.sortedSet=new Hr(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof fd)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new fd;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xb{constructor(){this.pa=new Hr(Mt.comparator)}track(e){const t=e.doc.key,r=this.pa.get(t);r?e.type!==0&&r.type===3?this.pa=this.pa.insert(t,e):e.type===3&&r.type!==1?this.pa=this.pa.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.pa=this.pa.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.pa=this.pa.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.pa=this.pa.remove(t):e.type===1&&r.type===2?this.pa=this.pa.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.pa=this.pa.insert(t,{type:2,doc:e.doc}):Xt(63341,{Vt:e,ya:r}):this.pa=this.pa.insert(t,e)}wa(){const e=[];return this.pa.inorderTraversal((t,r)=>{e.push(r)}),e}}class bd{constructor(e,t,r,i,a,o,s,u,f){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=u,this.hasCachedResults=f}static fromInitialDocuments(e,t,r,i,a){const o=[];return t.forEach(s=>{o.push({type:0,doc:s})}),new bd(e,t,fd.emptySet(t),o,r,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&sm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JO{constructor(){this.ba=void 0,this.Sa=[]}Da(){return this.Sa.some(e=>e.va())}}class eP{constructor(){this.queries=Yb(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){const i=tn(t),a=i.queries;i.queries=Yb(),a.forEach((o,s)=>{for(const u of s.Sa)u.onError(r)})})(this,new Et(et.ABORTED,"Firestore shutting down"))}}function Yb(){return new dh(n=>k6(n),sm)}async function M5(n,e){const t=tn(n);let r=3;const i=e.query;let a=t.queries.get(i);a?!a.Da()&&e.va()&&(r=2):(a=new JO,r=e.va()?0:1);try{switch(r){case 0:a.ba=await t.onListen(i,!0);break;case 1:a.ba=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(o){const s=k5(o,`Initialization of query '${Zh(e.query)}' failed`);return void e.onError(s)}t.queries.set(i,a),a.Sa.push(e),e.Fa(t.onlineState),a.ba&&e.Ma(a.ba)&&j5(t)}async function B5(n,e){const t=tn(n),r=e.query;let i=3;const a=t.queries.get(r);if(a){const o=a.Sa.indexOf(e);o>=0&&(a.Sa.splice(o,1),a.Sa.length===0?i=e.va()?0:1:!a.Da()&&e.va()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function tP(n,e){const t=tn(n);let r=!1;for(const i of e){const a=i.query,o=t.queries.get(a);if(o){for(const s of o.Sa)s.Ma(i)&&(r=!0);o.ba=i}}r&&j5(t)}function nP(n,e,t){const r=tn(n),i=r.queries.get(e);if(i)for(const a of i.Sa)a.onError(t);r.queries.delete(e)}function j5(n){n.Ca.forEach(e=>{e.next()})}var dy,Kb;(Kb=dy||(dy={})).xa="default",Kb.Cache="cache";class F5{constructor(e,t,r){this.query=e,this.Oa=t,this.Na=!1,this.Ba=null,this.onlineState="Unknown",this.options=r||{}}Ma(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new bd(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Na?this.La(e)&&(this.Oa.next(e),t=!0):this.ka(e,this.onlineState)&&(this.qa(e),t=!0),this.Ba=e,t}onError(e){this.Oa.error(e)}Fa(e){this.onlineState=e;let t=!1;return this.Ba&&!this.Na&&this.ka(this.Ba,e)&&(this.qa(this.Ba),t=!0),t}ka(e,t){if(!e.fromCache||!this.va())return!0;const r=t!=="Offline";return(!this.options.Qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}La(e){if(e.docChanges.length>0)return!0;const t=this.Ba&&this.Ba.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}qa(e){e=bd.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Na=!0,this.Oa.next(e)}va(){return this.options.source!==dy.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gE{constructor(e){this.key=e}}class mE{constructor(e){this.key=e}}class rP{constructor(e,t){this.query=e,this.Ha=t,this.Ja=null,this.hasCachedResults=!1,this.current=!1,this.Ya=bn(),this.mutatedKeys=bn(),this.Za=M6(e),this.Xa=new fd(this.Za)}get eu(){return this.Ha}tu(e,t){const r=t?t.nu:new Xb,i=t?t.Xa:this.Xa;let a=t?t.mutatedKeys:this.mutatedKeys,o=i,s=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,f=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{const g=i.get(h),m=lm(this.query,p)?p:null,x=!!g&&this.mutatedKeys.has(g.key),w=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let I=!1;g&&m?g.data.isEqual(m.data)?x!==w&&(r.track({type:3,doc:m}),I=!0):this.ru(g,m)||(r.track({type:2,doc:m}),I=!0,(u&&this.Za(m,u)>0||f&&this.Za(m,f)<0)&&(s=!0)):!g&&m?(r.track({type:0,doc:m}),I=!0):g&&!m&&(r.track({type:1,doc:g}),I=!0,(u||f)&&(s=!0)),I&&(m?(o=o.add(m),a=w?a.add(h):a.delete(h)):(o=o.delete(h),a=a.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),a=a.delete(h.key),r.track({type:1,doc:h})}return{Xa:o,nu:r,Cs:s,mutatedKeys:a}}ru(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const a=this.Xa;this.Xa=e.Xa,this.mutatedKeys=e.mutatedKeys;const o=e.nu.wa();o.sort((h,p)=>function(m,x){const w=I=>{switch(I){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Xt(20277,{Vt:I})}};return w(m)-w(x)}(h.type,p.type)||this.Za(h.doc,p.doc)),this.iu(r),i=i!=null&&i;const s=t&&!i?this.su():[],u=this.Ya.size===0&&this.current&&!i?1:0,f=u!==this.Ja;return this.Ja=u,o.length!==0||f?{snapshot:new bd(this.query,e.Xa,a,o,e.mutatedKeys,u===0,f,!1,!!r&&r.resumeToken.approximateByteSize()>0),ou:s}:{ou:s}}Fa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Xa:this.Xa,nu:new Xb,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{ou:[]}}_u(e){return!this.Ha.has(e)&&!!this.Xa.has(e)&&!this.Xa.get(e).hasLocalMutations}iu(e){e&&(e.addedDocuments.forEach(t=>this.Ha=this.Ha.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ha=this.Ha.delete(t)),this.current=e.current)}su(){if(!this.current)return[];const e=this.Ya;this.Ya=bn(),this.Xa.forEach(r=>{this._u(r.key)&&(this.Ya=this.Ya.add(r.key))});const t=[];return e.forEach(r=>{this.Ya.has(r)||t.push(new mE(r))}),this.Ya.forEach(r=>{e.has(r)||t.push(new gE(r))}),t}au(e){this.Ha=e.$s,this.Ya=bn();const t=this.tu(e.documents);return this.applyChanges(t,!0)}uu(){return bd.fromInitialDocuments(this.query,this.Xa,this.mutatedKeys,this.Ja===0,this.hasCachedResults)}}const U5="SyncEngine";class iP{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class aP{constructor(e){this.key=e,this.cu=!1}}class oP{constructor(e,t,r,i,a,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.lu={},this.hu=new dh(s=>k6(s),sm),this.Pu=new Map,this.Tu=new Set,this.Iu=new Hr(Mt.comparator),this.Eu=new Map,this.du=new C5,this.Au={},this.Ru=new Map,this.Vu=wd.lr(),this.onlineState="Unknown",this.mu=void 0}get isPrimaryClient(){return this.mu===!0}}async function sP(n,e,t=!0){const r=bE(n);let i;const a=r.hu.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),i=a.view.uu()):i=await vE(r,e,t,!0),i}async function lP(n,e){const t=bE(n);await vE(t,e,!0,!1)}async function vE(n,e,t,r){const i=await IO(n.localStore,Zl(e)),a=i.targetId,o=n.sharedClientState.addLocalQueryTarget(a,t);let s;return r&&(s=await uP(n,e,a,o==="current",i.resumeToken)),n.isPrimaryClient&&t&&uE(n.remoteStore,i),s}async function uP(n,e,t,r,i){n.fu=(p,g,m)=>async function(w,I,C,P){let B=I.view.tu(C);B.Cs&&(B=await zb(w.localStore,I.query,!1).then(({documents:D})=>I.view.tu(D,B)));const V=P&&P.targetChanges.get(I.targetId),Y=P&&P.targetMismatches.get(I.targetId)!=null,q=I.view.applyChanges(B,w.isPrimaryClient,V,Y);return Zb(w,I.targetId,q.ou),q.snapshot}(n,p,g,m);const a=await zb(n.localStore,e,!0),o=new rP(e,a.$s),s=o.tu(a.documents),u=_0.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),f=o.applyChanges(s,n.isPrimaryClient,u);Zb(n,t,f.ou);const h=new iP(e,t,o);return n.hu.set(e,h),n.Pu.has(t)?n.Pu.get(t).push(e):n.Pu.set(t,[e]),f.snapshot}async function cP(n,e,t){const r=tn(n),i=r.hu.get(e),a=r.Pu.get(i.targetId);if(a.length>1)return r.Pu.set(i.targetId,a.filter(o=>!sm(o,e))),void r.hu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await fy(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&N5(r.remoteStore,i.targetId),py(r,i.targetId)}).catch(Dd)):(py(r,i.targetId),await fy(r.localStore,i.targetId,!0))}async function fP(n,e){const t=tn(n),r=t.hu.get(e),i=t.Pu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),N5(t.remoteStore,r.targetId))}async function hP(n,e,t){const r=xP(n);try{const i=await function(o,s){const u=tn(o),f=Ei.now(),h=s.reduce((m,x)=>m.add(x.key),bn());let p,g;return u.persistence.runTransaction("Locally write mutations","readwrite",m=>{let x=Qu(),w=bn();return u.Bs.getEntries(m,h).next(I=>{x=I,x.forEach((C,P)=>{P.isValidDocument()||(w=w.add(C))})}).next(()=>u.localDocuments.getOverlayedDocuments(m,x)).next(I=>{p=I;const C=[];for(const P of s){const B=ID(P,p.get(P.key).overlayedDocument);B!=null&&C.push(new yf(P.key,B,T6(B.value.mapValue),As.exists(!0)))}return u.mutationQueue.addMutationBatch(m,f,C,s)}).next(I=>{g=I;const C=I.applyToLocalDocumentSet(p,w);return u.documentOverlayCache.saveOverlays(m,I.batchId,C)})}).then(()=>({batchId:g.batchId,changes:j6(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,s,u){let f=o.Au[o.currentUser.toKey()];f||(f=new Hr(fn)),f=f.insert(s,u),o.Au[o.currentUser.toKey()]=f}(r,i.batchId,t),await b0(r,i.changes),await pm(r.remoteStore)}catch(i){const a=k5(i,"Failed to persist write");t.reject(a)}}async function yE(n,e){const t=tn(n);try{const r=await SO(t.localStore,e);e.targetChanges.forEach((i,a)=>{const o=t.Eu.get(a);o&&(Jn(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?o.cu=!0:i.modifiedDocuments.size>0?Jn(o.cu,14607):i.removedDocuments.size>0&&(Jn(o.cu,42227),o.cu=!1))}),await b0(t,r,e)}catch(r){await Dd(r)}}function Qb(n,e,t){const r=tn(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const i=[];r.hu.forEach((a,o)=>{const s=o.view.Fa(e);s.snapshot&&i.push(s.snapshot)}),function(o,s){const u=tn(o);u.onlineState=s;let f=!1;u.queries.forEach((h,p)=>{for(const g of p.Sa)g.Fa(s)&&(f=!0)}),f&&j5(u)}(r.eventManager,e),i.length&&r.lu.Y_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function dP(n,e,t){const r=tn(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Eu.get(e),a=i&&i.key;if(a){let o=new Hr(Mt.comparator);o=o.insert(a,ka.newNoDocument(a,Jt.min()));const s=bn().add(a),u=new fm(Jt.min(),new Map,new Hr(fn),o,s);await yE(r,u),r.Iu=r.Iu.remove(a),r.Eu.delete(e),V5(r)}else await fy(r.localStore,e,!1).then(()=>py(r,e,t)).catch(Dd)}async function pP(n,e){const t=tn(n),r=e.batch.batchId;try{const i=await EO(t.localStore,e);_E(t,r,null),xE(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await b0(t,i)}catch(i){await Dd(i)}}async function gP(n,e,t){const r=tn(n);try{const i=await function(o,s){const u=tn(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",f=>{let h;return u.mutationQueue.lookupMutationBatch(f,s).next(p=>(Jn(p!==null,37113),h=p.keys(),u.mutationQueue.removeMutationBatch(f,p))).next(()=>u.mutationQueue.performConsistencyCheck(f)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(f,h,s)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,h)).next(()=>u.localDocuments.getDocuments(f,h))})}(r.localStore,e);_E(r,e,t),xE(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await b0(r,i)}catch(i){await Dd(i)}}function xE(n,e){(n.Ru.get(e)||[]).forEach(t=>{t.resolve()}),n.Ru.delete(e)}function _E(n,e,t){const r=tn(n);let i=r.Au[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(t?a.reject(t):a.resolve(),i=i.remove(e)),r.Au[r.currentUser.toKey()]=i}}function py(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Pu.get(e))n.hu.delete(r),t&&n.lu.gu(r,t);n.Pu.delete(e),n.isPrimaryClient&&n.du.Hr(e).forEach(r=>{n.du.containsKey(r)||wE(n,r)})}function wE(n,e){n.Tu.delete(e.path.canonicalString());const t=n.Iu.get(e);t!==null&&(N5(n.remoteStore,t),n.Iu=n.Iu.remove(e),n.Eu.delete(t),V5(n))}function Zb(n,e,t){for(const r of t)r instanceof gE?(n.du.addReference(r.key,e),mP(n,r)):r instanceof mE?(At(U5,"Document no longer in limbo: "+r.key),n.du.removeReference(r.key,e),n.du.containsKey(r.key)||wE(n,r.key)):Xt(19791,{pu:r})}function mP(n,e){const t=e.key,r=t.path.canonicalString();n.Iu.get(t)||n.Tu.has(r)||(At(U5,"New document in limbo: "+t),n.Tu.add(r),V5(n))}function V5(n){for(;n.Tu.size>0&&n.Iu.size<n.maxConcurrentLimboResolutions;){const e=n.Tu.values().next().value;n.Tu.delete(e);const t=new Mt(Ir.fromString(e)),r=n.Vu.next();n.Eu.set(r,new aP(t)),n.Iu=n.Iu.insert(t,r),uE(n.remoteStore,new Qc(Zl(om(t.path)),r,"TargetPurposeLimboResolution",rm.le))}}async function b0(n,e,t){const r=tn(n),i=[],a=[],o=[];r.hu.isEmpty()||(r.hu.forEach((s,u)=>{o.push(r.fu(u,e,t).then(f=>{var h;if((f||t)&&r.isPrimaryClient){const p=f?!f.fromCache:(h=t==null?void 0:t.targetChanges.get(u.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(f){i.push(f);const p=I5.Rs(u.targetId,f);a.push(p)}}))}),await Promise.all(o),r.lu.Y_(i),await async function(u,f){const h=tn(u);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>Je.forEach(f,g=>Je.forEach(g.ds,m=>h.persistence.referenceDelegate.addReference(p,g.targetId,m)).next(()=>Je.forEach(g.As,m=>h.persistence.referenceDelegate.removeReference(p,g.targetId,m)))))}catch(p){if(!Od(p))throw p;At(R5,"Failed to update sequence numbers: "+p)}for(const p of f){const g=p.targetId;if(!p.fromCache){const m=h.xs.get(g),x=m.snapshotVersion,w=m.withLastLimboFreeSnapshotVersion(x);h.xs=h.xs.insert(g,w)}}}(r.localStore,a))}async function vP(n,e){const t=tn(n);if(!t.currentUser.isEqual(e)){At(U5,"User change. New user:",e.toKey());const r=await aE(t.localStore,e);t.currentUser=e,function(a,o){a.Ru.forEach(s=>{s.forEach(u=>{u.reject(new Et(et.CANCELLED,o))})}),a.Ru.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await b0(t,r.ks)}}function yP(n,e){const t=tn(n),r=t.Eu.get(e);if(r&&r.cu)return bn().add(r.key);{let i=bn();const a=t.Pu.get(e);if(!a)return i;for(const o of a){const s=t.hu.get(o);i=i.unionWith(s.view.eu)}return i}}function bE(n){const e=tn(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=yE.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=yP.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=dP.bind(null,e),e.lu.Y_=tP.bind(null,e.eventManager),e.lu.gu=nP.bind(null,e.eventManager),e}function xP(n){const e=tn(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=pP.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=gP.bind(null,e),e}class Ig{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=hm(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Su(e),await this.persistence.start(),this.localStore=this.Du(e),this.gcScheduler=this.vu(e,this.localStore),this.indexBackfillerScheduler=this.Cu(e,this.localStore)}vu(e,t){return null}Cu(e,t){return null}Du(e){return AO(this.persistence,new _O,e.initialUser,this.serializer)}Su(e){return new iE(T5.fi,this.serializer)}bu(e){return new NO}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ig.provider={build:()=>new Ig};class _P extends Ig{constructor(e){super(),this.cacheSizeBytes=e}vu(e,t){Jn(this.persistence.referenceDelegate instanceof Cg,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new aO(r,e.asyncQueue,t)}Su(e){const t=this.cacheSizeBytes!==void 0?mo.withCacheSize(this.cacheSizeBytes):mo.DEFAULT;return new iE(r=>Cg.fi(r,t),this.serializer)}}class gy{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Qb(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=vP.bind(null,this.syncEngine),await ZO(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new eP}()}createDatastore(e){const t=hm(e.databaseInfo.databaseId),r=function(a){return new kO(a)}(e.databaseInfo);return function(a,o,s,u){return new FO(a,o,s,u)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,i,a,o,s){return new VO(r,i,a,o,s)}(this.localStore,this.datastore,e.asyncQueue,t=>Qb(this.syncEngine,t,0),function(){return Wb.C()?new Wb:new DO}())}createSyncEngine(e,t){return function(i,a,o,s,u,f,h){const p=new oP(i,a,o,s,u,f);return h&&(p.mu=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(i){const a=tn(i);At(ih,"RemoteStore shutting down."),a.da.add(5),await w0(a),a.Ra.shutdown(),a.Va.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}gy.provider={build:()=>new gy};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z5{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Mu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Mu(this.observer.error,e):Ku("Uncaught Error in snapshot listener:",e.toString()))}xu(){this.muted=!0}Mu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hf="FirestoreClient";class wP{constructor(e,t,r,i,a){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=La.UNAUTHENTICATED,this.clientId=v6.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,async o=>{At(hf,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(At(hf,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Wu;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=k5(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function fv(n,e){n.asyncQueue.verifyOperationInProgress(),At(hf,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async i=>{r.isEqual(i)||(await aE(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function Jb(n,e){n.asyncQueue.verifyOperationInProgress();const t=await bP(n);At(hf,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>$b(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>$b(e.remoteStore,i)),n._onlineComponents=e}async function bP(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){At(hf,"Using user provided OfflineComponentProvider");try{await fv(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(i){return i.name==="FirebaseError"?i.code===et.FAILED_PRECONDITION||i.code===et.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;vd("Error using user provided cache. Falling back to memory cache: "+t),await fv(n,new Ig)}}else At(hf,"Using default OfflineComponentProvider"),await fv(n,new _P(void 0));return n._offlineComponents}async function AE(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(At(hf,"Using user provided OnlineComponentProvider"),await Jb(n,n._uninitializedComponentsProvider._online)):(At(hf,"Using default OnlineComponentProvider"),await Jb(n,new gy))),n._onlineComponents}function AP(n){return AE(n).then(e=>e.syncEngine)}async function Rg(n){const e=await AE(n),t=e.eventManager;return t.onListen=sP.bind(null,e.syncEngine),t.onUnlisten=cP.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=lP.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=fP.bind(null,e.syncEngine),t}function EP(n,e,t={}){const r=new Wu;return n.asyncQueue.enqueueAndForget(async()=>function(a,o,s,u,f){const h=new z5({next:g=>{h.xu(),o.enqueueAndForget(()=>B5(a,p));const m=g.docs.has(s);!m&&g.fromCache?f.reject(new Et(et.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&g.fromCache&&u&&u.source==="server"?f.reject(new Et(et.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):f.resolve(g)},error:g=>f.reject(g)}),p=new F5(om(s.path),h,{includeMetadataChanges:!0,Qa:!0});return M5(a,p)}(await Rg(n),n.asyncQueue,e,t,r)),r.promise}function SP(n,e,t={}){const r=new Wu;return n.asyncQueue.enqueueAndForget(async()=>function(a,o,s,u,f){const h=new z5({next:g=>{h.xu(),o.enqueueAndForget(()=>B5(a,p)),g.fromCache&&u.source==="server"?f.reject(new Et(et.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(g)},error:g=>f.reject(g)}),p=new F5(s,h,{includeMetadataChanges:!0,Qa:!0});return M5(a,p)}(await Rg(n),n.asyncQueue,e,t,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EE(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e3=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SE(n,e,t){if(!t)throw new Et(et.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function CP(n,e,t,r){if(e===!0&&r===!0)throw new Et(et.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function t3(n){if(!Mt.isDocumentKey(n))throw new Et(et.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function n3(n){if(Mt.isDocumentKey(n))throw new Et(et.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function gm(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Xt(12329,{type:typeof n})}function wo(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Et(et.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=gm(n);throw new Et(et.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CE="firestore.googleapis.com",r3=!0;class i3{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Et(et.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=CE,this.ssl=r3}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:r3;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=rE;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<rO)throw new Et(et.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}CP("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=EE((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new Et(et.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new Et(et.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new Et(et.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class mm{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new i3({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Et(et.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Et(et.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new i3(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new P9;switch(r.type){case"firstParty":return new B9(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Et(et.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=e3.get(t);r&&(At("ComponentProvider","Removing Datastore"),e3.delete(t),r.terminate())}(this),Promise.resolve()}}function TP(n,e,t,r={}){var i;n=wo(n,mm);const a=Id(e),o=n._getSettings(),s=Object.assign(Object.assign({},o),{emulatorOptions:n._getEmulatorOptions()}),u=`${e}:${t}`;a&&(r5(`https://${u}`),i5("Firestore",!0)),o.host!==CE&&o.host!==u&&vd("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const f=Object.assign(Object.assign({},o),{host:u,ssl:a,emulatorOptions:r});if(!of(f,s)&&(n._setSettings(f),r.mockUserToken)){let h,p;if(typeof r.mockUserToken=="string")h=r.mockUserToken,p=La.MOCK_USER;else{h=vA(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);const g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new Et(et.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new La(g)}n._authCredentials=new L9(new g6(h,p))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gh{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new gh(this.firestore,e,this._query)}}class Ba{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new nf(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ba(this.firestore,e,this._key)}}class nf extends gh{constructor(e,t,r){super(e,t,om(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ba(this.firestore,null,new Mt(e))}withConverter(e){return new nf(this.firestore,e,this._path)}}function On(n,e,...t){if(n=qr(n),SE("collection","path",e),n instanceof mm){const r=Ir.fromString(e,...t);return n3(r),new nf(n,null,r)}{if(!(n instanceof Ba||n instanceof nf))throw new Et(et.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Ir.fromString(e,...t));return n3(r),new nf(n.firestore,null,r)}}function Ar(n,e,...t){if(n=qr(n),arguments.length===1&&(e=v6.newId()),SE("doc","path",e),n instanceof mm){const r=Ir.fromString(e,...t);return t3(r),new Ba(n,null,new Mt(r))}{if(!(n instanceof Ba||n instanceof nf))throw new Et(et.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Ir.fromString(e,...t));return t3(r),new Ba(n.firestore,n instanceof nf?n.converter:null,new Mt(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a3="AsyncQueue";class o3{constructor(e=Promise.resolve()){this.Ju=[],this.Yu=!1,this.Zu=[],this.Xu=null,this.ec=!1,this.tc=!1,this.nc=[],this.x_=new sE(this,"async_queue_retry"),this.rc=()=>{const r=cv();r&&At(a3,"Visibility state changed to "+r.visibilityState),this.x_.b_()},this.sc=e;const t=cv();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.rc)}get isShuttingDown(){return this.Yu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.oc(),this._c(e)}enterRestrictedMode(e){if(!this.Yu){this.Yu=!0,this.tc=e||!1;const t=cv();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.rc)}}enqueue(e){if(this.oc(),this.Yu)return new Promise(()=>{});const t=new Wu;return this._c(()=>this.Yu&&this.tc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ju.push(e),this.ac()))}async ac(){if(this.Ju.length!==0){try{await this.Ju[0](),this.Ju.shift(),this.x_.reset()}catch(e){if(!Od(e))throw e;At(a3,"Operation failed with retryable error: "+e)}this.Ju.length>0&&this.x_.y_(()=>this.ac())}}_c(e){const t=this.sc.then(()=>(this.ec=!0,e().catch(r=>{throw this.Xu=r,this.ec=!1,Ku("INTERNAL UNHANDLED ERROR: ",s3(r)),r}).then(r=>(this.ec=!1,r))));return this.sc=t,t}enqueueAfterDelay(e,t,r){this.oc(),this.nc.indexOf(e)>-1&&(t=0);const i=L5.createAndSchedule(this,e,t,r,a=>this.uc(a));return this.Zu.push(i),i}oc(){this.Xu&&Xt(47125,{cc:s3(this.Xu)})}verifyOperationInProgress(){}async lc(){let e;do e=this.sc,await e;while(e!==this.sc)}hc(e){for(const t of this.Zu)if(t.timerId===e)return!0;return!1}Pc(e){return this.lc().then(()=>{this.Zu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Zu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.lc()})}Tc(e){this.nc.push(e)}uc(e){const t=this.Zu.indexOf(e);this.Zu.splice(t,1)}}function s3(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l3(n){return function(t,r){if(typeof t!="object"||t===null)return!1;const i=t;for(const a of r)if(a in i&&typeof i[a]=="function")return!0;return!1}(n,["next","error","complete"])}class Zu extends mm{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new o3,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new o3(e),this._firestoreClient=void 0,await e}}}function IP(n,e){const t=typeof n=="object"?n:Jg(),r=typeof n=="string"?n:_g,i=gf(t,"firestore").getImmediate({identifier:r});if(!i._initialized){const a=pA("firestore");a&&TP(i,...a)}return i}function vm(n){if(n._terminated)throw new Et(et.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||RP(n),n._firestoreClient}function RP(n){var e,t,r;const i=n._freezeSettings(),a=function(s,u,f,h){return new Z9(s,u,f,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,EE(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new wP(n._authCredentials,n._appCheckCredentials,n._queue,a,n._componentsProvider&&function(s){const u=s==null?void 0:s._online.build();return{_offline:s==null?void 0:s._offline.build(u),_online:u}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ad{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ad(da.fromBase64String(e))}catch(t){throw new Et(et.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Ad(da.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ym{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Et(et.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new fa(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xm{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q5{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Et(et.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Et(et.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return fn(this._lat,e._lat)||fn(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H5{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==i[a])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NP=/^__.*__$/;class DP{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new yf(e,this.data,this.fieldMask,t,this.fieldTransforms):new x0(e,this.data,t,this.fieldTransforms)}}class TE{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new yf(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function IE(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Xt(40011,{Ic:n})}}class W5{constructor(e,t,r,i,a,o){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,a===void 0&&this.Ec(),this.fieldTransforms=a||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ic(){return this.settings.Ic}dc(e){return new W5(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ac(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.dc({path:r,Rc:!1});return i.Vc(e),i}mc(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.dc({path:r,Rc:!1});return i.Ec(),i}fc(e){return this.dc({path:void 0,Rc:!0})}gc(e){return Ng(e,this.settings.methodName,this.settings.yc||!1,this.path,this.settings.wc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Ec(){if(this.path)for(let e=0;e<this.path.length;e++)this.Vc(this.path.get(e))}Vc(e){if(e.length===0)throw this.gc("Document fields must not be empty");if(IE(this.Ic)&&NP.test(e))throw this.gc('Document fields cannot begin and end with "__"')}}class OP{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||hm(e)}bc(e,t,r,i=!1){return new W5({Ic:e,methodName:t,wc:r,path:fa.emptyPath(),Rc:!1,yc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function _m(n){const e=n._freezeSettings(),t=hm(n._databaseId);return new OP(n._databaseId,!!e.ignoreUndefinedProperties,t)}function RE(n,e,t,r,i,a={}){const o=n.bc(a.merge||a.mergeFields?2:0,e,t,i);$5("Data must be an object, but it was:",o,r);const s=NE(r,o);let u,f;if(a.merge)u=new Xo(o.fieldMask),f=o.fieldTransforms;else if(a.mergeFields){const h=[];for(const p of a.mergeFields){const g=my(e,p,t);if(!o.contains(g))throw new Et(et.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);OE(h,g)||h.push(g)}u=new Xo(h),f=o.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,f=o.fieldTransforms;return new DP(new yo(s),u,f)}class wm extends xm{_toFieldTransform(e){if(e.Ic!==2)throw e.Ic===1?e.gc(`${this._methodName}() can only appear at the top level of your update data`):e.gc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof wm}}class G5 extends xm{_toFieldTransform(e){return new ED(e.path,new r0)}isEqual(e){return e instanceof G5}}function PP(n,e,t,r){const i=n.bc(1,e,t);$5("Data must be an object, but it was:",i,r);const a=[],o=yo.empty();vf(r,(u,f)=>{const h=X5(e,u,t);f=qr(f);const p=i.mc(h);if(f instanceof wm)a.push(h);else{const g=A0(f,p);g!=null&&(a.push(h),o.set(h,g))}});const s=new Xo(a);return new TE(o,s,i.fieldTransforms)}function LP(n,e,t,r,i,a){const o=n.bc(1,e,t),s=[my(e,r,t)],u=[i];if(a.length%2!=0)throw new Et(et.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<a.length;g+=2)s.push(my(e,a[g])),u.push(a[g+1]);const f=[],h=yo.empty();for(let g=s.length-1;g>=0;--g)if(!OE(f,s[g])){const m=s[g];let x=u[g];x=qr(x);const w=o.mc(m);if(x instanceof wm)f.push(m);else{const I=A0(x,w);I!=null&&(f.push(m),h.set(m,I))}}const p=new Xo(f);return new TE(h,p,o.fieldTransforms)}function kP(n,e,t,r=!1){return A0(t,n.bc(r?4:3,e))}function A0(n,e){if(DE(n=qr(n)))return $5("Unsupported field value:",e,n),NE(n,e);if(n instanceof xm)return function(r,i){if(!IE(i.Ic))throw i.gc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.gc(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(i);a&&i.fieldTransforms.push(a)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Rc&&e.Ic!==4)throw e.gc("Nested arrays are not supported");return function(r,i){const a=[];let o=0;for(const s of r){let u=A0(s,i.fc(o));u==null&&(u={nullValue:"NULL_VALUE"}),a.push(u),o++}return{arrayValue:{values:a}}}(n,e)}return function(r,i){if((r=qr(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return wD(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=Ei.fromDate(r);return{timestampValue:Sg(i.serializer,a)}}if(r instanceof Ei){const a=new Ei(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Sg(i.serializer,a)}}if(r instanceof q5)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ad)return{bytesValue:K6(i.serializer,r._byteString)};if(r instanceof Ba){const a=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(a))throw i.gc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:S5(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof H5)return function(o,s){return{mapValue:{fields:{[S6]:{stringValue:C6},[wg]:{arrayValue:{values:o.toArray().map(f=>{if(typeof f!="number")throw s.gc("VectorValues must only contain numeric values.");return w5(s.serializer,f)})}}}}}}(r,i);throw i.gc(`Unsupported field value: ${gm(r)}`)}(n,e)}function NE(n,e){const t={};return x6(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):vf(n,(r,i)=>{const a=A0(i,e.Ac(r));a!=null&&(t[r]=a)}),{mapValue:{fields:t}}}function DE(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Ei||n instanceof q5||n instanceof Ad||n instanceof Ba||n instanceof xm||n instanceof H5)}function $5(n,e,t){if(!DE(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){const r=gm(t);throw r==="an object"?e.gc(n+" a custom object"):e.gc(n+" "+r)}}function my(n,e,t){if((e=qr(e))instanceof ym)return e._internalPath;if(typeof e=="string")return X5(n,e);throw Ng("Field path arguments must be of type string or ",n,!1,void 0,t)}const MP=new RegExp("[~\\*/\\[\\]]");function X5(n,e,t){if(e.search(MP)>=0)throw Ng(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new ym(...e.split("."))._internalPath}catch{throw Ng(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Ng(n,e,t,r,i){const a=r&&!r.isEmpty(),o=i!==void 0;let s=`Function ${e}() called with invalid data`;t&&(s+=" (via `toFirestore()`)"),s+=". ";let u="";return(a||o)&&(u+=" (found",a&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new Et(et.INVALID_ARGUMENT,s+n+u)}function OE(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PE{constructor(e,t,r,i,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new Ba(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new BP(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Y5("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class BP extends PE{data(){return super.data()}}function Y5(n,e){return typeof e=="string"?X5(n,e):e instanceof ym?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LE(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new Et(et.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class K5{}class jP extends K5{}function Gu(n,e,...t){let r=[];e instanceof K5&&r.push(e),r=r.concat(t),function(a){const o=a.filter(u=>u instanceof Q5).length,s=a.filter(u=>u instanceof bm).length;if(o>1||o>0&&s>0)throw new Et(et.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class bm extends jP{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new bm(e,t,r)}_apply(e){const t=this._parse(e);return kE(e._query,t),new gh(e.firestore,e.converter,ay(e._query,t))}_parse(e){const t=_m(e.firestore);return function(a,o,s,u,f,h,p){let g;if(f.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new Et(et.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){c3(p,h);const x=[];for(const w of p)x.push(u3(u,a,w));g={arrayValue:{values:x}}}else g=u3(u,a,p)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||c3(p,h),g=kP(s,o,p,h==="in"||h==="not-in");return bi.create(f,h,g)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function Ju(n,e,t){const r=e,i=Y5("where",n);return bm._create(i,r,t)}class Q5 extends K5{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Q5(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:fl.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(i,a){let o=i;const s=a.getFlattenedFilters();for(const u of s)kE(o,u),o=ay(o,u)}(e._query,t),new gh(e.firestore,e.converter,ay(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function u3(n,e,t){if(typeof(t=qr(t))=="string"){if(t==="")throw new Et(et.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!L6(e)&&t.indexOf("/")!==-1)throw new Et(et.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Ir.fromString(t));if(!Mt.isDocumentKey(r))throw new Et(et.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Ab(n,new Mt(r))}if(t instanceof Ba)return Ab(n,t._key);throw new Et(et.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${gm(t)}.`)}function c3(n,e){if(!Array.isArray(n)||n.length===0)throw new Et(et.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function kE(n,e){const t=function(i,a){for(const o of i)for(const s of o.getFlattenedFilters())if(a.indexOf(s.op)>=0)return s.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new Et(et.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Et(et.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class FP{convertValue(e,t="none"){switch(cf(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ci(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(uf(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Xt(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return vf(e,(i,a)=>{r[i]=this.convertValue(a,t)}),r}convertVectorValue(e){var t,r,i;const a=(i=(r=(t=e.fields)===null||t===void 0?void 0:t[wg].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>ci(o.doubleValue));return new H5(a)}convertGeoPoint(e){return new q5(ci(e.latitude),ci(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=am(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(e0(e));default:return null}}convertTimestamp(e){const t=lf(e);return new Ei(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Ir.fromString(e);Jn(nE(r),9688,{name:e});const i=new t0(r.get(1),r.get(3)),a=new Mt(r.popFirst(5));return i.isEqual(t)||Ku(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ME(n,e,t){let r;return r=n?n.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k1{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class BE extends PE{constructor(e,t,r,i,a,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new eg(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Y5("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class eg extends BE{data(e={}){return super.data(e)}}class jE{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new k1(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new eg(this._firestore,this._userDataWriter,r.key,r,new k1(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Et(et.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,a){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(s=>{const u=new eg(i._firestore,i._userDataWriter,s.doc.key,s.doc,new k1(i._snapshot.mutatedKeys.has(s.doc.key),i._snapshot.fromCache),i.query.converter);return s.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(s=>a||s.type!==3).map(s=>{const u=new eg(i._firestore,i._userDataWriter,s.doc.key,s.doc,new k1(i._snapshot.mutatedKeys.has(s.doc.key),i._snapshot.fromCache),i.query.converter);let f=-1,h=-1;return s.type!==0&&(f=o.indexOf(s.doc.key),o=o.delete(s.doc.key)),s.type!==1&&(o=o.add(s.doc),h=o.indexOf(s.doc.key)),{type:UP(s.type),doc:u,oldIndex:f,newIndex:h}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function UP(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Xt(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ed(n){n=wo(n,Ba);const e=wo(n.firestore,Zu);return EP(vm(e),n._key).then(t=>UE(e,n,t))}class Z5 extends FP{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ad(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ba(this.firestore,null,t)}}function yr(n){n=wo(n,gh);const e=wo(n.firestore,Zu),t=vm(e),r=new Z5(e);return LE(n._query),SP(t,n._query).then(i=>new jE(e,r,n,i))}function J5(n,e,t){n=wo(n,Ba);const r=wo(n.firestore,Zu),i=ME(n.converter,e);return Sm(r,[RE(_m(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,As.none())])}function Qa(n,e,t,...r){n=wo(n,Ba);const i=wo(n.firestore,Zu),a=_m(i);let o;return o=typeof(e=qr(e))=="string"||e instanceof ym?LP(a,"updateDoc",n._key,e,t,r):PP(a,"updateDoc",n._key,e),Sm(i,[o.toMutation(n._key,As.exists(!0))])}function Am(n){return Sm(wo(n.firestore,Zu),[new b5(n._key,As.none())])}function Em(n,e){const t=wo(n.firestore,Zu),r=Ar(n),i=ME(n.converter,e);return Sm(t,[RE(_m(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,As.exists(!1))]).then(()=>r)}function FE(n,...e){var t,r,i;n=qr(n);let a={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||l3(e[o])||(a=e[o],o++);const s={includeMetadataChanges:a.includeMetadataChanges,source:a.source};if(l3(e[o])){const p=e[o];e[o]=(t=p.next)===null||t===void 0?void 0:t.bind(p),e[o+1]=(r=p.error)===null||r===void 0?void 0:r.bind(p),e[o+2]=(i=p.complete)===null||i===void 0?void 0:i.bind(p)}let u,f,h;if(n instanceof Ba)f=wo(n.firestore,Zu),h=om(n._key.path),u={next:p=>{e[o]&&e[o](UE(f,n,p))},error:e[o+1],complete:e[o+2]};else{const p=wo(n,gh);f=wo(p.firestore,Zu),h=p._query;const g=new Z5(f);u={next:m=>{e[o]&&e[o](new jE(f,g,p,m))},error:e[o+1],complete:e[o+2]},LE(n._query)}return function(g,m,x,w){const I=new z5(w),C=new F5(m,I,x);return g.asyncQueue.enqueueAndForget(async()=>M5(await Rg(g),C)),()=>{I.xu(),g.asyncQueue.enqueueAndForget(async()=>B5(await Rg(g),C))}}(vm(f),h,s,u)}function Sm(n,e){return function(r,i){const a=new Wu;return r.asyncQueue.enqueueAndForget(async()=>hP(await AP(r),i,a)),a.promise}(vm(n),e)}function UE(n,e,t){const r=t.docs.get(e._key),i=new Z5(n);return new BE(n,i,e._key,r,new k1(t.hasPendingWrites,t.fromCache),e.converter)}function Ai(){return new G5("serverTimestamp")}(function(e,t=!0){(function(i){Nd=i})(hh),ul(new Ss("firestore",(r,{instanceIdentifier:i,options:a})=>{const o=r.getProvider("app").getImmediate(),s=new Zu(new k9(r.getProvider("auth-internal")),new j9(o,r.getProvider("app-check-internal")),function(f,h){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new Et(et.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new t0(f.options.projectId,h)}(o,i),o);return a=Object.assign({useFetchStreams:t},a),s._setSettings(a),s},"PUBLIC").setMultipleInstances(!0)),_o(fb,hb,e),_o(fb,hb,"esm2017")})();var VP="firebase",zP="11.9.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */_o(VP,zP,"app");const VE="@firebase/installations",ex="0.6.17";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zE=1e4,qE=`w:${ex}`,HE="FIS_v2",qP="https://firebaseinstallations.googleapis.com/v1",HP=60*60*1e3,WP="installations",GP="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $P={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},ah=new fh(WP,GP,$P);function WE(n){return n instanceof Cs&&n.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GE({projectId:n}){return`${qP}/projects/${n}/installations`}function $E(n){return{token:n.token,requestStatus:2,expiresIn:YP(n.expiresIn),creationTime:Date.now()}}async function XE(n,e){const r=(await e.json()).error;return ah.create("request-failed",{requestName:n,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function YE({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function XP(n,{refreshToken:e}){const t=YE(n);return t.append("Authorization",KP(e)),t}async function KE(n){const e=await n();return e.status>=500&&e.status<600?n():e}function YP(n){return Number(n.replace("s","000"))}function KP(n){return`${HE} ${n}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QP({appConfig:n,heartbeatServiceProvider:e},{fid:t}){const r=GE(n),i=YE(n),a=e.getImmediate({optional:!0});if(a){const f=await a.getHeartbeatsHeader();f&&i.append("x-firebase-client",f)}const o={fid:t,authVersion:HE,appId:n.appId,sdkVersion:qE},s={method:"POST",headers:i,body:JSON.stringify(o)},u=await KE(()=>fetch(r,s));if(u.ok){const f=await u.json();return{fid:f.fid||t,registrationStatus:2,refreshToken:f.refreshToken,authToken:$E(f.authToken)}}else throw await XE("Create Installation",u)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QE(n){return new Promise(e=>{setTimeout(e,n)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZP(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JP=/^[cdef][\w-]{21}$/,vy="";function eL(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const t=tL(n);return JP.test(t)?t:vy}catch{return vy}}function tL(n){return ZP(n).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cm(n){return`${n.appName}!${n.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZE=new Map;function JE(n,e){const t=Cm(n);eS(t,e),nL(t,e)}function eS(n,e){const t=ZE.get(n);if(t)for(const r of t)r(e)}function nL(n,e){const t=rL();t&&t.postMessage({key:n,fid:e}),iL()}let Yf=null;function rL(){return!Yf&&"BroadcastChannel"in self&&(Yf=new BroadcastChannel("[Firebase] FID Change"),Yf.onmessage=n=>{eS(n.data.key,n.data.fid)}),Yf}function iL(){ZE.size===0&&Yf&&(Yf.close(),Yf=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aL="firebase-installations-database",oL=1,oh="firebase-installations-store";let hv=null;function tx(){return hv||(hv=AA(aL,oL,{upgrade:(n,e)=>{switch(e){case 0:n.createObjectStore(oh)}}})),hv}async function Dg(n,e){const t=Cm(n),i=(await tx()).transaction(oh,"readwrite"),a=i.objectStore(oh),o=await a.get(t);return await a.put(e,t),await i.done,(!o||o.fid!==e.fid)&&JE(n,e.fid),e}async function tS(n){const e=Cm(n),r=(await tx()).transaction(oh,"readwrite");await r.objectStore(oh).delete(e),await r.done}async function Tm(n,e){const t=Cm(n),i=(await tx()).transaction(oh,"readwrite"),a=i.objectStore(oh),o=await a.get(t),s=e(o);return s===void 0?await a.delete(t):await a.put(s,t),await i.done,s&&(!o||o.fid!==s.fid)&&JE(n,s.fid),s}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nx(n){let e;const t=await Tm(n.appConfig,r=>{const i=sL(r),a=lL(n,i);return e=a.registrationPromise,a.installationEntry});return t.fid===vy?{installationEntry:await e}:{installationEntry:t,registrationPromise:e}}function sL(n){const e=n||{fid:eL(),registrationStatus:0};return nS(e)}function lL(n,e){if(e.registrationStatus===0){if(!navigator.onLine){const i=Promise.reject(ah.create("app-offline"));return{installationEntry:e,registrationPromise:i}}const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=uL(n,t);return{installationEntry:t,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:cL(n)}:{installationEntry:e}}async function uL(n,e){try{const t=await QP(n,e);return Dg(n.appConfig,t)}catch(t){throw WE(t)&&t.customData.serverCode===409?await tS(n.appConfig):await Dg(n.appConfig,{fid:e.fid,registrationStatus:0}),t}}async function cL(n){let e=await f3(n.appConfig);for(;e.registrationStatus===1;)await QE(100),e=await f3(n.appConfig);if(e.registrationStatus===0){const{installationEntry:t,registrationPromise:r}=await nx(n);return r||t}return e}function f3(n){return Tm(n,e=>{if(!e)throw ah.create("installation-not-found");return nS(e)})}function nS(n){return fL(n)?{fid:n.fid,registrationStatus:0}:n}function fL(n){return n.registrationStatus===1&&n.registrationTime+zE<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hL({appConfig:n,heartbeatServiceProvider:e},t){const r=dL(n,t),i=XP(n,t),a=e.getImmediate({optional:!0});if(a){const f=await a.getHeartbeatsHeader();f&&i.append("x-firebase-client",f)}const o={installation:{sdkVersion:qE,appId:n.appId}},s={method:"POST",headers:i,body:JSON.stringify(o)},u=await KE(()=>fetch(r,s));if(u.ok){const f=await u.json();return $E(f)}else throw await XE("Generate Auth Token",u)}function dL(n,{fid:e}){return`${GE(n)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rx(n,e=!1){let t;const r=await Tm(n.appConfig,a=>{if(!rS(a))throw ah.create("not-registered");const o=a.authToken;if(!e&&mL(o))return a;if(o.requestStatus===1)return t=pL(n,e),a;{if(!navigator.onLine)throw ah.create("app-offline");const s=yL(a);return t=gL(n,s),s}});return t?await t:r.authToken}async function pL(n,e){let t=await h3(n.appConfig);for(;t.authToken.requestStatus===1;)await QE(100),t=await h3(n.appConfig);const r=t.authToken;return r.requestStatus===0?rx(n,e):r}function h3(n){return Tm(n,e=>{if(!rS(e))throw ah.create("not-registered");const t=e.authToken;return xL(t)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function gL(n,e){try{const t=await hL(n,e),r=Object.assign(Object.assign({},e),{authToken:t});return await Dg(n.appConfig,r),t}catch(t){if(WE(t)&&(t.customData.serverCode===401||t.customData.serverCode===404))await tS(n.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await Dg(n.appConfig,r)}throw t}}function rS(n){return n!==void 0&&n.registrationStatus===2}function mL(n){return n.requestStatus===2&&!vL(n)}function vL(n){const e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+HP}function yL(n){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},n),{authToken:e})}function xL(n){return n.requestStatus===1&&n.requestTime+zE<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _L(n){const e=n,{installationEntry:t,registrationPromise:r}=await nx(e);return r?r.catch(console.error):rx(e).catch(console.error),t.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wL(n,e=!1){const t=n;return await bL(t),(await rx(t,e)).token}async function bL(n){const{registrationPromise:e}=await nx(n);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AL(n){if(!n||!n.options)throw dv("App Configuration");if(!n.name)throw dv("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!n.options[t])throw dv(t);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}function dv(n){return ah.create("missing-app-config-values",{valueName:n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iS="installations",EL="installations-internal",SL=n=>{const e=n.getProvider("app").getImmediate(),t=AL(e),r=gf(e,"heartbeat");return{app:e,appConfig:t,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},CL=n=>{const e=n.getProvider("app").getImmediate(),t=gf(e,iS).getImmediate();return{getId:()=>_L(t),getToken:i=>wL(t,i)}};function TL(){ul(new Ss(iS,SL,"PUBLIC")),ul(new Ss(EL,CL,"PRIVATE"))}TL();_o(VE,ex);_o(VE,ex,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Og="analytics",IL="firebase_id",RL="origin",NL=60*1e3,DL="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",ix="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bo=new Zg("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OL={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Qo=new fh("analytics","Analytics",OL);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PL(n){if(!n.startsWith(ix)){const e=Qo.create("invalid-gtag-resource",{gtagURL:n});return bo.warn(e.message),""}return n}function aS(n){return Promise.all(n.map(e=>e.catch(t=>t)))}function LL(n,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(n,e)),t}function kL(n,e){const t=LL("firebase-js-sdk-policy",{createScriptURL:PL}),r=document.createElement("script"),i=`${ix}?l=${n}&id=${e}`;r.src=t?t==null?void 0:t.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function ML(n){let e=[];return Array.isArray(window[n])?e=window[n]:window[n]=e,e}async function BL(n,e,t,r,i,a){const o=r[i];try{if(o)await e[o];else{const u=(await aS(t)).find(f=>f.measurementId===i);u&&await e[u.appId]}}catch(s){bo.error(s)}n("config",i,a)}async function jL(n,e,t,r,i){try{let a=[];if(i&&i.send_to){let o=i.send_to;Array.isArray(o)||(o=[o]);const s=await aS(t);for(const u of o){const f=s.find(p=>p.measurementId===u),h=f&&e[f.appId];if(h)a.push(h);else{a=[];break}}}a.length===0&&(a=Object.values(e)),await Promise.all(a),n("event",r,i||{})}catch(a){bo.error(a)}}function FL(n,e,t,r){async function i(a,...o){try{if(a==="event"){const[s,u]=o;await jL(n,e,t,s,u)}else if(a==="config"){const[s,u]=o;await BL(n,e,t,r,s,u)}else if(a==="consent"){const[s,u]=o;n("consent",s,u)}else if(a==="get"){const[s,u,f]=o;n("get",s,u,f)}else if(a==="set"){const[s]=o;n("set",s)}else n(a,...o)}catch(s){bo.error(s)}}return i}function UL(n,e,t,r,i){let a=function(...o){window[r].push(arguments)};return window[i]&&typeof window[i]=="function"&&(a=window[i]),window[i]=FL(a,n,e,t),{gtagCore:a,wrappedGtag:window[i]}}function VL(n){const e=window.document.getElementsByTagName("script");for(const t of Object.values(e))if(t.src&&t.src.includes(ix)&&t.src.includes(n))return t;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zL=30,qL=1e3;class HL{constructor(e={},t=qL){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const oS=new HL;function WL(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}async function GL(n){var e;const{appId:t,apiKey:r}=n,i={method:"GET",headers:WL(r)},a=DL.replace("{app-id}",t),o=await fetch(a,i);if(o.status!==200&&o.status!==304){let s="";try{const u=await o.json();!((e=u.error)===null||e===void 0)&&e.message&&(s=u.error.message)}catch{}throw Qo.create("config-fetch-failed",{httpStatus:o.status,responseMessage:s})}return o.json()}async function $L(n,e=oS,t){const{appId:r,apiKey:i,measurementId:a}=n.options;if(!r)throw Qo.create("no-app-id");if(!i){if(a)return{measurementId:a,appId:r};throw Qo.create("no-api-key")}const o=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},s=new KL;return setTimeout(async()=>{s.abort()},NL),sS({appId:r,apiKey:i,measurementId:a},o,s,e)}async function sS(n,{throttleEndTimeMillis:e,backoffCount:t},r,i=oS){var a;const{appId:o,measurementId:s}=n;try{await XL(r,e)}catch(u){if(s)return bo.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${s} provided in the "measurementId" field in the local Firebase config. [${u==null?void 0:u.message}]`),{appId:o,measurementId:s};throw u}try{const u=await GL(n);return i.deleteThrottleMetadata(o),u}catch(u){const f=u;if(!YL(f)){if(i.deleteThrottleMetadata(o),s)return bo.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${s} provided in the "measurementId" field in the local Firebase config. [${f==null?void 0:f.message}]`),{appId:o,measurementId:s};throw u}const h=Number((a=f==null?void 0:f.customData)===null||a===void 0?void 0:a.httpStatus)===503?Mw(t,i.intervalMillis,zL):Mw(t,i.intervalMillis),p={throttleEndTimeMillis:Date.now()+h,backoffCount:t+1};return i.setThrottleMetadata(o,p),bo.debug(`Calling attemptFetch again in ${h} millis`),sS(n,p,r,i)}}function XL(n,e){return new Promise((t,r)=>{const i=Math.max(e-Date.now(),0),a=setTimeout(t,i);n.addEventListener(()=>{clearTimeout(a),r(Qo.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function YL(n){if(!(n instanceof Cs)||!n.customData)return!1;const e=Number(n.customData.httpStatus);return e===429||e===500||e===503||e===504}class KL{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function QL(n,e,t,r,i){if(i&&i.global){n("event",t,r);return}else{const a=await e,o=Object.assign(Object.assign({},r),{send_to:a});n("event",t,o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZL(){if(xA())try{await _A()}catch(n){return bo.warn(Qo.create("indexeddb-unavailable",{errorInfo:n==null?void 0:n.toString()}).message),!1}else return bo.warn(Qo.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function JL(n,e,t,r,i,a,o){var s;const u=$L(n);u.then(m=>{t[m.measurementId]=m.appId,n.options.measurementId&&m.measurementId!==n.options.measurementId&&bo.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${m.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(m=>bo.error(m)),e.push(u);const f=ZL().then(m=>{if(m)return r.getId()}),[h,p]=await Promise.all([u,f]);VL(a)||kL(a,h.measurementId),i("js",new Date);const g=(s=o==null?void 0:o.config)!==null&&s!==void 0?s:{};return g[RL]="firebase",g.update=!0,p!=null&&(g[IL]=p),i("config",h.measurementId,g),h.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ek{constructor(e){this.app=e}_delete(){return delete G1[this.app.options.appId],Promise.resolve()}}let G1={},d3=[];const p3={};let pv="dataLayer",tk="gtag",g3,lS,m3=!1;function nk(){const n=[];if(yA()&&n.push("This is a browser extension environment."),YI()||n.push("Cookies are not available."),n.length>0){const e=n.map((r,i)=>`(${i+1}) ${r}`).join(" "),t=Qo.create("invalid-analytics-context",{errorInfo:e});bo.warn(t.message)}}function rk(n,e,t){nk();const r=n.options.appId;if(!r)throw Qo.create("no-app-id");if(!n.options.apiKey)if(n.options.measurementId)bo.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Qo.create("no-api-key");if(G1[r]!=null)throw Qo.create("already-exists",{id:r});if(!m3){ML(pv);const{wrappedGtag:a,gtagCore:o}=UL(G1,d3,p3,pv,tk);lS=a,g3=o,m3=!0}return G1[r]=JL(n,d3,p3,e,g3,pv,t),new ek(n)}function ik(n=Jg()){n=qr(n);const e=gf(n,Og);return e.isInitialized()?e.getImmediate():ak(n)}function ak(n,e={}){const t=gf(n,Og);if(t.isInitialized()){const i=t.getImmediate();if(of(e,t.getOptions()))return i;throw Qo.create("already-initialized")}return t.initialize({options:e})}function ok(n,e,t,r){n=qr(n),QL(lS,G1[n.app.options.appId],e,t,r).catch(i=>bo.error(i))}const v3="@firebase/analytics",y3="0.10.16";function sk(){ul(new Ss(Og,(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();return rk(r,i,t)},"PUBLIC")),ul(new Ss("analytics-internal",n,"PRIVATE")),_o(v3,y3),_o(v3,y3,"esm2017");function n(e){try{const t=e.getProvider(Og).getImmediate();return{logEvent:(r,i,a)=>ok(t,r,i,a)}}catch(t){throw Qo.create("interop-component-reg-failed",{reason:t})}}}sk();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uS="firebasestorage.googleapis.com",lk="storageBucket",uk=2*60*1e3,ck=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ou extends Cs{constructor(e,t,r=0){super(gv(e),`Firebase Storage: ${t} (${gv(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,ou.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return gv(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var ru;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(ru||(ru={}));function gv(n){return"storage/"+n}function fk(){const n="An unknown error occurred, please check the error payload for server response.";return new ou(ru.UNKNOWN,n)}function hk(){return new ou(ru.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function dk(){return new ou(ru.CANCELED,"User canceled the upload/download.")}function pk(n){return new ou(ru.INVALID_URL,"Invalid URL '"+n+"'.")}function gk(n){return new ou(ru.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function x3(n){return new ou(ru.INVALID_ARGUMENT,n)}function cS(){return new ou(ru.APP_DELETED,"The Firebase app was deleted.")}function mk(n){return new ou(ru.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ll{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=ll.makeFromUrl(e,t)}catch{return new ll(e,"")}if(r.path==="")return r;throw gk(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)";function a(V){V.path.charAt(V.path.length-1)==="/"&&(V.path_=V.path_.slice(0,-1))}const o="(/(.*))?$",s=new RegExp("^gs://"+i+o,"i"),u={bucket:1,path:3};function f(V){V.path_=decodeURIComponent(V.path)}const h="v[A-Za-z0-9_]+",p=t.replace(/[.]/g,"\\."),g="(/([^?#]*).*)?$",m=new RegExp(`^https?://${p}/${h}/b/${i}/o${g}`,"i"),x={bucket:1,path:3},w=t===uS?"(?:storage.googleapis.com|storage.cloud.google.com)":t,I="([^?#]*)",C=new RegExp(`^https?://${w}/${i}/${I}`,"i"),B=[{regex:s,indices:u,postModify:a},{regex:m,indices:x,postModify:f},{regex:C,indices:{bucket:1,path:2},postModify:f}];for(let V=0;V<B.length;V++){const Y=B[V],q=Y.regex.exec(e);if(q){const D=q[Y.indices.bucket];let A=q[Y.indices.path];A||(A=""),r=new ll(D,A),Y.postModify(r);break}}if(r==null)throw pk(e);return r}}class vk{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yk(n,e,t){let r=1,i=null,a=null,o=!1,s=0;function u(){return s===2}let f=!1;function h(...I){f||(f=!0,e.apply(null,I))}function p(I){i=setTimeout(()=>{i=null,n(m,u())},I)}function g(){a&&clearTimeout(a)}function m(I,...C){if(f){g();return}if(I){g(),h.call(null,I,...C);return}if(u()||o){g(),h.call(null,I,...C);return}r<64&&(r*=2);let B;s===1?(s=2,B=0):B=(r+Math.random())*1e3,p(B)}let x=!1;function w(I){x||(x=!0,g(),!f&&(i!==null?(I||(s=2),clearTimeout(i),p(0)):I||(s=1)))}return p(0),a=setTimeout(()=>{o=!0,w(!0)},t),w}function xk(n){n(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _k(n){return n!==void 0}function _3(n,e,t,r){if(r<e)throw x3(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw x3(`Invalid value for '${n}'. Expected ${t} or less.`)}function wk(n){const e=encodeURIComponent;let t="?";for(const r in n)if(n.hasOwnProperty(r)){const i=e(r)+"="+e(n[r]);t=t+i+"&"}return t=t.slice(0,-1),t}var Pg;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(Pg||(Pg={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bk(n,e){const t=n>=500&&n<600,i=[408,429].indexOf(n)!==-1,a=e.indexOf(n)!==-1;return t||i||a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ak{constructor(e,t,r,i,a,o,s,u,f,h,p,g=!0,m=!1){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=o,this.callback_=s,this.errorCallback_=u,this.timeout_=f,this.progressCallback_=h,this.connectionFactory_=p,this.retry=g,this.isUsingEmulator=m,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((x,w)=>{this.resolve_=x,this.reject_=w,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new Pp(!1,null,!0));return}const a=this.connectionFactory_();this.pendingConnection_=a;const o=s=>{const u=s.loaded,f=s.lengthComputable?s.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,f)};this.progressCallback_!==null&&a.addUploadProgressListener(o),a.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&a.removeUploadProgressListener(o),this.pendingConnection_=null;const s=a.getErrorCode()===Pg.NO_ERROR,u=a.getStatus();if(!s||bk(u,this.additionalRetryCodes_)&&this.retry){const h=a.getErrorCode()===Pg.ABORT;r(!1,new Pp(!1,null,h));return}const f=this.successCodes_.indexOf(u)!==-1;r(!0,new Pp(f,a))})},t=(r,i)=>{const a=this.resolve_,o=this.reject_,s=i.connection;if(i.wasSuccessCode)try{const u=this.callback_(s,s.getResponse());_k(u)?a(u):a()}catch(u){o(u)}else if(s!==null){const u=fk();u.serverResponse=s.getErrorText(),this.errorCallback_?o(this.errorCallback_(s,u)):o(u)}else if(i.canceled){const u=this.appDelete_?cS():dk();o(u)}else{const u=hk();o(u)}};this.canceled_?t(!1,new Pp(!1,null,!0)):this.backoffId_=yk(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&xk(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Pp{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function Ek(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function Sk(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function Ck(n,e){e&&(n["X-Firebase-GMPID"]=e)}function Tk(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function Ik(n,e,t,r,i,a,o=!0,s=!1){const u=wk(n.urlParams),f=n.url+u,h=Object.assign({},n.headers);return Ck(h,e),Ek(h,t),Sk(h,a),Tk(h,r),new Ak(f,n.method,h,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,o,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rk(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function Nk(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lg{constructor(e,t){this._service=e,t instanceof ll?this._location=t:this._location=ll.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Lg(e,t)}get root(){const e=new ll(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Nk(this._location.path)}get storage(){return this._service}get parent(){const e=Rk(this._location.path);if(e===null)return null;const t=new ll(this._location.bucket,e);return new Lg(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw mk(e)}}function w3(n,e){const t=e==null?void 0:e[lk];return t==null?null:ll.makeFromBucketSpec(t,n)}function Dk(n,e,t,r={}){n.host=`${e}:${t}`;const i=Id(e);i&&(r5(`https://${n.host}`),i5("Storage",!0)),n._isUsingEmulator=!0,n._protocol=i?"https":"http";const{mockUserToken:a}=r;a&&(n._overrideAuthToken=typeof a=="string"?a:vA(a,n.app.options.projectId))}class Ok{constructor(e,t,r,i,a,o=!1){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=a,this._isUsingEmulator=o,this._bucket=null,this._host=uS,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=uk,this._maxUploadRetryTime=ck,this._requests=new Set,i!=null?this._bucket=ll.makeFromBucketSpec(i,this._host):this._bucket=w3(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=ll.makeFromBucketSpec(this._url,e):this._bucket=w3(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){_3("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){_3("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if($o(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Lg(this,e)}_makeRequest(e,t,r,i,a=!0){if(this._deleted)return new vk(cS());{const o=Ik(e,this._appId,r,i,t,this._firebaseVersion,a,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,t){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,i).getPromise()}}const b3="@firebase/storage",A3="0.13.12";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fS="storage";function Pk(n=Jg(),e){n=qr(n);const r=gf(n,fS).getImmediate({identifier:e}),i=pA("storage");return i&&Lk(r,...i),r}function Lk(n,e,t,r={}){Dk(n,e,t,r)}function kk(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new Ok(t,r,i,e,hh)}function Mk(){ul(new Ss(fS,kk,"PUBLIC").setMultipleInstances(!0)),_o(b3,A3,""),_o(b3,A3,"esm2017")}Mk();const Bk={apiKey:"AIzaSyD2okbjcvN3V4Qpd4deo59qZZNNRBIWX58",authDomain:"gmach-inventory-system.firebaseapp.com",projectId:"gmach-inventory-system",storageBucket:"gmach-inventory-system.appspot.com",messagingSenderId:"687472851540",appId:"1:687472851540:web:f846506cccaaefc1e74bc1",measurementId:"G-ZM8S3K7E2V"},Im=EA(Bk);ik(Im);const o0=D9(Im),kt=IP(Im);Pk(Im);const hS=ge.createContext(),dS=({children:n})=>{const[e,t]=ge.useState(null),[r,i]=ge.useState(!0);return ge.useEffect(()=>{const a=xN(o0,async s=>{if(s&&s.emailVerified){const u=await Ed(Ar(kt,"users",s.uid));if(u.exists()){const f=u.data();t({uid:s.uid,email:s.email,username:f.username,role:f.role})}}else t(null)});return(async()=>{const s=await Ed(Ar(kt,"settings","onlineOrdering"));if(s.exists()){const u=s.data();i(u.enabled===!0)}})(),()=>a()},[]),E.jsx(hS.Provider,{value:{user:e,setUser:t,onlineOrderingEnabled:r,setOnlineOrderingEnabled:i},children:n})},xf=()=>ge.useContext(hS),jk=()=>{const{user:n,setUser:e}=xf(),t=Zy(),[r,i]=ge.useState(!1),[a,o]=ge.useState(null),[s,u]=ge.useState(null);ge.useEffect(()=>{const B=Ar(kt,"settings","onlineOrdering"),V=FE(B,Y=>{Y.exists()&&o(Y.data().enabled)},Y=>{console.error("שגיאה בקבלת עדכונים בזמן אמת:",Y)});return()=>V()},[]),ge.useEffect(()=>{const B=()=>{u(window.innerWidth<=768)};return B(),window.addEventListener("resize",B),()=>window.removeEventListener("resize",B)},[]);const f=async()=>{try{await _N(o0),e(null),t("/login")}catch(B){alert("שגיאה בהתנתקות: "+B.message)}},h=()=>{i(!1)},p=B=>{switch(B){case"MainAdmin":return"מנהל ראשי";case"GmachAdmin":return"מנהל גמח";default:return"משתמש"}};if(s===null)return null;const g={backgroundColor:"#f2f2f2",padding:"10px 0",direction:"rtl",borderBottom:"1px solid #ccc",position:"relative",zIndex:1e3},m={padding:"12px 16px",textDecoration:"none",color:"#0056b3",fontWeight:"500",fontSize:"16px",display:"block"},x={position:"absolute",top:"10px",left:s?"20px":"auto",right:s?"auto":"20px",display:"flex",alignItems:"center",gap:"10px",fontWeight:"bold",color:"#333"},w={backgroundColor:"#e74c3c",color:"white",border:"none",padding:"5px 10px",borderRadius:"4px",cursor:"pointer",fontSize:"14px"},I={position:"fixed",top:0,right:0,bottom:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.3)",zIndex:999},C={position:"fixed",top:0,right:r?0:"-70%",height:"100%",width:"70%",backgroundColor:"#fff",boxShadow:"0 0 12px rgba(0,0,0,0.25)",padding:"20px",display:"flex",flexDirection:"column",gap:"10px",transition:"right 0.3s ease",zIndex:1e3},P={display:"flex",justifyContent:"center",gap:"10px",padding:"10px 0"};return E.jsxs("div",{style:g,children:[s&&E.jsx("button",{onClick:()=>i(!0),style:{fontSize:"24px",background:"none",border:"none",cursor:"pointer",padding:"0 1rem"},children:"☰"}),!s&&E.jsxs("div",{style:P,children:[E.jsx(wr,{to:"/",style:m,children:"דף הבית"}),E.jsx(wr,{to:"/catalog",style:m,children:"קטלוג מוצרים"}),(n==null?void 0:n.role)==="User"&&E.jsxs(E.Fragment,{children:[E.jsx(wr,{to:"/my-orders",style:m,children:"ההזמנות שלי"}),a&&E.jsx(wr,{to:"/request",style:m,children:"בקשת השאלה"})]}),((n==null?void 0:n.role)==="GmachAdmin"||(n==null?void 0:n.role)==="MainAdmin")&&E.jsxs(E.Fragment,{children:[E.jsx(wr,{to:"/new-loan",style:m,children:"הזמנה חדשה"}),a&&E.jsx(wr,{to:"/requests",style:m,children:"בקשות להזמנה"}),E.jsx(wr,{to:"/Calendar",style:m,children:"השאלות פתוחות"}),E.jsx(wr,{to:"/history",style:m,children:"היסטוריית השאלות"}),E.jsx(wr,{to:"/manage-product",style:m,children:"ניהול מוצרים"})]}),(n==null?void 0:n.role)==="MainAdmin"&&E.jsx(wr,{to:"/manage-users",style:m,children:"ניהול משתמשים"}),!n&&E.jsxs(E.Fragment,{children:[E.jsx(wr,{to:"/login",style:m,children:"התחברות"}),E.jsx(wr,{to:"/register",style:m,children:"הרשמה"})]})]}),r&&s&&E.jsxs(E.Fragment,{children:[E.jsx("div",{style:I,onClick:h}),E.jsxs("div",{style:C,children:[E.jsx(wr,{to:"/",style:m,onClick:h,children:"דף הבית"}),E.jsx(wr,{to:"/catalog",style:m,onClick:h,children:"קטלוג מוצרים"}),(n==null?void 0:n.role)==="User"&&E.jsxs(E.Fragment,{children:[E.jsx(wr,{to:"/my-orders",style:m,onClick:h,children:"ההזמנות שלי"}),a&&E.jsx(wr,{to:"/request",style:m,onClick:h,children:"בקשת השאלה"})]}),((n==null?void 0:n.role)==="GmachAdmin"||(n==null?void 0:n.role)==="MainAdmin")&&E.jsxs(E.Fragment,{children:[E.jsx(wr,{to:"/new-loan",style:m,onClick:h,children:"הזמנה חדשה"}),a&&E.jsx(wr,{to:"/requests",style:m,onClick:h,children:"בקשות להזמנה"}),E.jsx(wr,{to:"/Calendar",style:m,onClick:h,children:"השאלות פתוחות"}),E.jsx(wr,{to:"/history",style:m,onClick:h,children:"היסטוריית השאלות"}),E.jsx(wr,{to:"/manage-product",style:m,onClick:h,children:"ניהול מוצרים"})]}),(n==null?void 0:n.role)==="MainAdmin"&&E.jsx(wr,{to:"/manage-users",style:m,onClick:h,children:"ניהול משתמשים"}),!n&&E.jsxs(E.Fragment,{children:[E.jsx(wr,{to:"/login",style:m,onClick:h,children:"התחברות"}),E.jsx(wr,{to:"/register",style:m,onClick:h,children:"הרשמה"})]})]})]}),n&&E.jsxs("div",{style:x,children:["שלום ",n.username," (",p(n.role),")",E.jsx("button",{style:w,onClick:f,children:"התנתק"})]})]})},Fk="/assets/GmachPic-D1t0vS9u.jpeg",Uk=()=>{const{user:n}=xf(),e={padding:"2rem",textAlign:"center",direction:"rtl",maxWidth:"1000px",margin:"0 auto"},t={fontSize:"24px",fontWeight:"bold",marginBottom:"1rem"},r={maxWidth:"800px",margin:"0 auto",fontSize:"16px",lineHeight:"1.8",color:"#333"},i={display:"flex",justifyContent:"center",marginTop:"2rem"},a={width:"100%",minHeight:"300px",aspectRatio:"16/9",border:"1px solid #ccc",borderRadius:"12px"},o={position:"fixed",bottom:"20px",right:"20px",backgroundColor:"#007bff",color:"white",padding:"12px 20px",borderRadius:"10px",fontWeight:"bold",boxShadow:"0 4px 10px rgba(0, 0, 0, 0.2)",zIndex:1e3,fontSize:"15px",maxWidth:"calc(100% - 40px)",wordWrap:"break-word"};return E.jsxs("div",{style:e,children:[E.jsx("h2",{style:t,children:'ברוכים הבאים לגמ"ח שמחת זקנתי'}),E.jsx("img",{src:Fk,alt:'תמונה של גמ"ח',style:{width:"65%",height:"auto",borderRadius:"12px",marginBottom:"2rem",maxWidth:"600px"}}),E.jsxs("div",{style:r,children:['פני פתחה את גמ"ח הציוד לשמחות ואירועים "שמחת זקנתי" לפני כ־10 שנים, לזכר סבה וסבתה – אברהם ואסתר ליבן ז"ל, ממקימי הקיבוץ. הגמ"ח החל לפעול מתוך ביתם ממש ולאחר מכן עבר למבנה שהוקצה ושופץ על ידי הקיבוץ.',E.jsx("br",{}),E.jsx("br",{}),'הגמ"ח מצריך תחזוקה מתמדת, התרמות, חידושים וסידור עם משתמשים רבים מהאזור. משתמשי הגמ"ח נהנים ממגוון ציוד עשיר, ויש להזמין כמה חודשים מראש.']}),E.jsxs("div",{style:{marginTop:"2rem"},children:[E.jsx("h3",{children:"📍 מיקום והגעה"}),E.jsxs("div",{children:[E.jsx("a",{href:"https://maps.app.goo.gl/zHkUGZDnGVsUrBCB6",target:"_blank",rel:"noopener noreferrer",children:"Google Maps"})," |"," ",E.jsx("a",{href:"https://waze.com/ul?ll=31.775887,34.703164",target:"_blank",rel:"noopener noreferrer",children:"Waze"})]})]}),E.jsx("div",{style:i,children:E.jsx("iframe",{src:"https://www.google.com/maps?q=31.7889462,34.79986&output=embed",width:"100%",height:"100%",style:a,allowFullScreen:"",loading:"lazy",title:'מיקום גמ"ח'})}),(!n||n.role==="User")&&E.jsxs("div",{style:o,children:["📞 לתיאום ולהגעה: ",E.jsx("a",{href:"tel:0501234567",style:{color:"white",textDecoration:"underline"},children:"050-1234567"})]})]})},Vk=()=>{const[n,e]=ge.useState(""),[t,r]=ge.useState(""),[i,a]=ge.useState(""),{setUser:o}=xf(),s=Zy(),u=async()=>{if(!n||!n.includes("@")){a("יש להזין אימייל תקין לשחזור סיסמה");return}try{await dN(o0,n),a("קישור לאיפוס סיסמה נשלח לאימייל")}catch(p){a("שגיאה בשליחת קישור לאיפוס סיסמה: "+p.message)}},f=async p=>{p.preventDefault(),a("");let g=n;if(!n.includes("@"))try{const m=Gu(On(kt,"users"),Ju("username","==",n)),x=await yr(m);if(!x.empty)g=x.docs[0].data().email;else{a("שם משתמש לא נמצא");return}}catch{a("שגיאה באחזור אימייל לפי שם משתמש");return}try{const x=(await gN(o0,g,t)).user;if(!x.emailVerified){a("נא לאמת את כתובת האימייל לפני ההתחברות");return}const w=Ar(kt,"users",x.uid),I=await Ed(w);if(I.exists()){const C=I.data();o({uid:x.uid,email:x.email,username:C.username,role:C.role}),s("/")}else a("לא נמצאו נתוני משתמש במסד הנתונים")}catch(m){switch(m.code){case"auth/invalid-credential":case"auth/wrong-password":a("סיסמה שגויה");break;case"auth/user-not-found":a("המשתמש לא נמצא");break;default:a("שגיאה: "+m.message)}}},h={container:{display:"flex",justifyContent:"center",alignItems:"center",height:"80vh",backgroundColor:"#f2f2f2"},form:{backgroundColor:"#fff",padding:"2rem",borderRadius:"12px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.1)",display:"flex",flexDirection:"column",width:"300px"},title:{textAlign:"center",marginBottom:"1.5rem",color:"#333"},input:{marginBottom:"1rem",padding:"0.8rem",fontSize:"1rem",borderRadius:"6px",border:"1px solid #ccc"},button:{backgroundColor:"#007bff",color:"white",border:"none",padding:"0.8rem",fontSize:"1rem",borderRadius:"6px",cursor:"pointer",transition:"background-color 0.3s ease"},error:{color:"red",marginBottom:"1rem",fontSize:"0.9rem",textAlign:"center"}};return E.jsx("div",{style:h.container,children:E.jsxs("form",{onSubmit:f,style:h.form,children:[E.jsx("h2",{style:h.title,children:"התחברות"}),E.jsx("input",{type:"text",placeholder:"שם משתמש או אימייל",value:n,onChange:p=>e(p.target.value),style:h.input,required:!0}),E.jsx("input",{type:"password",placeholder:"סיסמה",value:t,onChange:p=>r(p.target.value),style:h.input,required:!0}),i&&E.jsx("div",{style:h.error,children:i}),E.jsx("button",{type:"submit",style:h.button,children:"התחבר"}),E.jsx("button",{type:"button",onClick:u,style:{marginTop:"0.5rem",backgroundColor:"transparent",border:"none",color:"#007bff",textDecoration:"underline",cursor:"pointer",fontSize:"0.9rem"},children:"שכחת סיסמה?"})]})})},zk=()=>{const[n,e]=ge.useState(""),[t,r]=ge.useState(""),[i,a]=ge.useState(""),[o,s]=ge.useState(""),u=p=>p.length>=8&&/[a-zA-Z]/.test(p),f=async p=>{if(p.preventDefault(),!u(i)){s("הסיסמה חייבת להכיל לפחות 8 תווים ולפחות אות אחת באנגלית A-Z / a-z");return}try{const m=(await pN(o0,n,i)).user;await J5(Ar(kt,"users",m.uid),{email:n,username:t,role:"User"}),await mN(m),alert("נרשמת בהצלחה! נשלח אליך מייל לאימות.")}catch(g){s(g.message)}},h={container:{display:"flex",justifyContent:"center",alignItems:"center",height:"80vh",backgroundColor:"#f2f2f2"},form:{backgroundColor:"#fff",padding:"2rem",borderRadius:"12px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.1)",display:"flex",flexDirection:"column",width:"300px"},title:{textAlign:"center",marginBottom:"1.5rem",color:"#333"},input:{marginBottom:"1rem",padding:"0.8rem",fontSize:"1rem",borderRadius:"6px",border:"1px solid #ccc"},button:{backgroundColor:"#007bff",color:"white",border:"none",padding:"0.8rem",fontSize:"1rem",borderRadius:"6px",cursor:"pointer",transition:"background-color 0.3s ease"},error:{color:"red",marginBottom:"1rem",fontSize:"0.9rem",textAlign:"center"}};return E.jsx("div",{style:h.container,children:E.jsxs("form",{onSubmit:f,style:h.form,children:[E.jsx("h2",{style:h.title,children:"הרשמה"}),E.jsx("input",{type:"text",placeholder:"שם משתמש",value:t,onChange:p=>r(p.target.value),style:h.input,required:!0}),E.jsx("input",{type:"email",placeholder:"אימייל",value:n,onChange:p=>e(p.target.value),style:h.input,required:!0}),E.jsx("input",{type:"password",placeholder:"סיסמה",value:i,onChange:p=>a(p.target.value),style:h.input,required:!0}),o&&E.jsx("div",{style:h.error,children:o}),E.jsx("button",{type:"submit",style:h.button,children:"הרשם"})]})})},qk=({form:n,errors:e,handleChange:t,handleConfirm:r,handleClear:i,setShowCatalogPopup:a,saving:o})=>{const s=[{label:"שם מתנדבת",name:"volunteerName",required:!0},{label:"שם לקוח",name:"clientName",required:!0},{label:"מקום מגורים",name:"address",required:!0},{label:"מספר פלאפון",name:"phone",required:!0},{label:"אימייל",name:"email",required:!1},{label:"סוג האירוע",name:"eventType",required:!0},{label:"תאריך לקיחת מוצרים",name:"pickupDate",type:"date",required:!0},{label:"תאריך האירוע",name:"eventDate",type:"date",required:!0},{label:"תאריך החזרת מוצרים",name:"returnDate",type:"date",required:!0}];return E.jsxs("div",{className:"loan-form-box",children:[E.jsx("h2",{style:{textAlign:"center"},children:"הזמנה חדשה"}),s.map(({label:u,name:f,type:h="text",required:p})=>E.jsxs("div",{style:{marginBottom:"1.5rem",textAlign:"center"},children:[E.jsxs("label",{htmlFor:f,style:{display:"block",marginBottom:"0.3rem",maxWidth:"400px",margin:"0 auto",textAlign:"right"},children:[u,p&&" *"]}),E.jsx("input",{id:f,type:h,name:f,value:n[f],onChange:t,min:h==="date"?f==="pickupDate"?new Date().toISOString().split("T")[0]:f==="eventDate"||f==="returnDate"?n.pickupDate||new Date().toISOString().split("T")[0]:void 0:void 0,style:{display:"block",width:"100%",maxWidth:"400px",margin:"0 auto",padding:"10px",border:e[f]?"1px solid red":"1px solid #ccc",borderRadius:"6px",fontSize:"1rem"}}),e[f]&&E.jsx("div",{style:{color:"red",fontSize:"0.85rem",maxWidth:"400px",margin:"0.3rem auto 0",textAlign:"right"},children:e[f]})]},f)),E.jsx("div",{style:{display:"flex",justifyContent:"center",marginBottom:"1.5rem"},children:E.jsx("button",{className:"btn btn-blue",onClick:()=>a(!0),children:"בחירת מוצרים"})}),E.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"10px"},children:[E.jsx("button",{className:"btn btn-green",onClick:r,disabled:o,children:o?"שומר...":"אישור הזמנה"}),E.jsx("button",{className:"btn btn-red",onClick:i,disabled:o,children:"ביטול הזמנה"})]})]})};function Hk(n,e){var t=Object.setPrototypeOf;t?t(n,e):n.__proto__=e}function Wk(n,e){e===void 0&&(e=n.constructor);var t=Error.captureStackTrace;t&&t(n,e)}var Gk=function(){var n=function(t,r){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(i[o]=a[o])},n(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),$k=function(n){Gk(e,n);function e(t,r){var i=this.constructor,a=n.call(this,t,r)||this;return Object.defineProperty(a,"name",{value:i.name,enumerable:!1,configurable:!0}),Hk(a,i.prototype),Wk(a),a}return e}(Error),Xk=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Ao=function(n){Xk(e,n);function e(t){t===void 0&&(t=void 0);var r=n.call(this,t)||this;return r.message=t,r}return e.prototype.getKind=function(){var t=this.constructor;return t.kind},e.kind="Exception",e}($k),Yk=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),nl=function(n){Yk(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="ArgumentException",e}(Ao),Kk=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),jt=function(n){Kk(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="IllegalArgumentException",e}(Ao),Qk=function(){function n(e){if(this.binarizer=e,e===null)throw new jt("Binarizer must be non-null.")}return n.prototype.getWidth=function(){return this.binarizer.getWidth()},n.prototype.getHeight=function(){return this.binarizer.getHeight()},n.prototype.getBlackRow=function(e,t){return this.binarizer.getBlackRow(e,t)},n.prototype.getBlackMatrix=function(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix},n.prototype.isCropSupported=function(){return this.binarizer.getLuminanceSource().isCropSupported()},n.prototype.crop=function(e,t,r,i){var a=this.binarizer.getLuminanceSource().crop(e,t,r,i);return new n(this.binarizer.createBinarizer(a))},n.prototype.isRotateSupported=function(){return this.binarizer.getLuminanceSource().isRotateSupported()},n.prototype.rotateCounterClockwise=function(){var e=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new n(this.binarizer.createBinarizer(e))},n.prototype.rotateCounterClockwise45=function(){var e=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new n(this.binarizer.createBinarizer(e))},n.prototype.toString=function(){try{return this.getBlackMatrix().toString()}catch{return""}},n}(),Zk=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Qi=function(n){Zk(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.getChecksumInstance=function(){return new e},e.kind="ChecksumException",e}(Ao),Jk=function(){function n(e){this.source=e}return n.prototype.getLuminanceSource=function(){return this.source},n.prototype.getWidth=function(){return this.source.getWidth()},n.prototype.getHeight=function(){return this.source.getHeight()},n}(),br=function(){function n(){}return n.arraycopy=function(e,t,r,i,a){for(;a--;)r[i++]=e[t++]},n.currentTimeMillis=function(){return Date.now()},n}(),eM=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),ax=function(n){eM(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="IndexOutOfBoundsException",e}(Ao),tM=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),E3=function(n){tM(e,n);function e(t,r){t===void 0&&(t=void 0),r===void 0&&(r=void 0);var i=n.call(this,r)||this;return i.index=t,i.message=r,i}return e.kind="ArrayIndexOutOfBoundsException",e}(ax),nM=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ki=function(){function n(){}return n.fill=function(e,t){for(var r=0,i=e.length;r<i;r++)e[r]=t},n.fillWithin=function(e,t,r,i){n.rangeCheck(e.length,t,r);for(var a=t;a<r;a++)e[a]=i},n.rangeCheck=function(e,t,r){if(t>r)throw new jt("fromIndex("+t+") > toIndex("+r+")");if(t<0)throw new E3(t);if(r>e)throw new E3(r)},n.asList=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e},n.create=function(e,t,r){var i=Array.from({length:e});return i.map(function(a){return Array.from({length:t}).fill(r)})},n.createInt32Array=function(e,t,r){var i=Array.from({length:e});return i.map(function(a){return Int32Array.from({length:t}).fill(r)})},n.equals=function(e,t){if(!e||!t||!e.length||!t.length||e.length!==t.length)return!1;for(var r=0,i=e.length;r<i;r++)if(e[r]!==t[r])return!1;return!0},n.hashCode=function(e){var t,r;if(e===null)return 0;var i=1;try{for(var a=nM(e),o=a.next();!o.done;o=a.next()){var s=o.value;i=31*i+s}}catch(u){t={error:u}}finally{try{o&&!o.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}return i},n.fillUint8Array=function(e,t){for(var r=0;r!==e.length;r++)e[r]=t},n.copyOf=function(e,t){return e.slice(0,t)},n.copyOfUint8Array=function(e,t){if(e.length<=t){var r=new Uint8Array(t);return r.set(e),r}return e.slice(0,t)},n.copyOfRange=function(e,t,r){var i=r-t,a=new Int32Array(i);return br.arraycopy(e,t,a,0,i),a},n.binarySearch=function(e,t,r){r===void 0&&(r=n.numberComparator);for(var i=0,a=e.length-1;i<=a;){var o=a+i>>1,s=r(t,e[o]);if(s>0)i=o+1;else if(s<0)a=o-1;else return o}return-i-1},n.numberComparator=function(e,t){return e-t},n}(),gn=function(){function n(){}return n.numberOfTrailingZeros=function(e){var t;if(e===0)return 32;var r=31;return t=e<<16,t!==0&&(r-=16,e=t),t=e<<8,t!==0&&(r-=8,e=t),t=e<<4,t!==0&&(r-=4,e=t),t=e<<2,t!==0&&(r-=2,e=t),r-(e<<1>>>31)},n.numberOfLeadingZeros=function(e){if(e===0)return 32;var t=1;return e>>>16||(t+=16,e<<=16),e>>>24||(t+=8,e<<=8),e>>>28||(t+=4,e<<=4),e>>>30||(t+=2,e<<=2),t-=e>>>31,t},n.toHexString=function(e){return e.toString(16)},n.toBinaryString=function(e){return String(parseInt(String(e),2))},n.bitCount=function(e){return e=e-(e>>>1&1431655765),e=(e&858993459)+(e>>>2&858993459),e=e+(e>>>4)&252645135,e=e+(e>>>8),e=e+(e>>>16),e&63},n.truncDivision=function(e,t){return Math.trunc(e/t)},n.parseInt=function(e,t){return t===void 0&&(t=void 0),parseInt(e,t)},n.MIN_VALUE_32_BITS=-2147483648,n.MAX_VALUE=Number.MAX_SAFE_INTEGER,n}(),Zi=function(){function n(e,t){e===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=e,t==null?this.bits=n.makeArray(e):this.bits=t)}return n.prototype.getSize=function(){return this.size},n.prototype.getSizeInBytes=function(){return Math.floor((this.size+7)/8)},n.prototype.ensureCapacity=function(e){if(e>this.bits.length*32){var t=n.makeArray(e);br.arraycopy(this.bits,0,t,0,this.bits.length),this.bits=t}},n.prototype.get=function(e){return(this.bits[Math.floor(e/32)]&1<<(e&31))!==0},n.prototype.set=function(e){this.bits[Math.floor(e/32)]|=1<<(e&31)},n.prototype.flip=function(e){this.bits[Math.floor(e/32)]^=1<<(e&31)},n.prototype.getNextSet=function(e){var t=this.size;if(e>=t)return t;var r=this.bits,i=Math.floor(e/32),a=r[i];a&=~((1<<(e&31))-1);for(var o=r.length;a===0;){if(++i===o)return t;a=r[i]}var s=i*32+gn.numberOfTrailingZeros(a);return s>t?t:s},n.prototype.getNextUnset=function(e){var t=this.size;if(e>=t)return t;var r=this.bits,i=Math.floor(e/32),a=~r[i];a&=~((1<<(e&31))-1);for(var o=r.length;a===0;){if(++i===o)return t;a=~r[i]}var s=i*32+gn.numberOfTrailingZeros(a);return s>t?t:s},n.prototype.setBulk=function(e,t){this.bits[Math.floor(e/32)]=t},n.prototype.setRange=function(e,t){if(t<e||e<0||t>this.size)throw new jt;if(t!==e){t--;for(var r=Math.floor(e/32),i=Math.floor(t/32),a=this.bits,o=r;o<=i;o++){var s=o>r?0:e&31,u=o<i?31:t&31,f=(2<<u)-(1<<s);a[o]|=f}}},n.prototype.clear=function(){for(var e=this.bits.length,t=this.bits,r=0;r<e;r++)t[r]=0},n.prototype.isRange=function(e,t,r){if(t<e||e<0||t>this.size)throw new jt;if(t===e)return!0;t--;for(var i=Math.floor(e/32),a=Math.floor(t/32),o=this.bits,s=i;s<=a;s++){var u=s>i?0:e&31,f=s<a?31:t&31,h=(2<<f)-(1<<u)&4294967295;if((o[s]&h)!==(r?h:0))return!1}return!0},n.prototype.appendBit=function(e){this.ensureCapacity(this.size+1),e&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++},n.prototype.appendBits=function(e,t){if(t<0||t>32)throw new jt("Num bits must be between 0 and 32");this.ensureCapacity(this.size+t);for(var r=t;r>0;r--)this.appendBit((e>>r-1&1)===1)},n.prototype.appendBitArray=function(e){var t=e.size;this.ensureCapacity(this.size+t);for(var r=0;r<t;r++)this.appendBit(e.get(r))},n.prototype.xor=function(e){if(this.size!==e.size)throw new jt("Sizes don't match");for(var t=this.bits,r=0,i=t.length;r<i;r++)t[r]^=e.bits[r]},n.prototype.toBytes=function(e,t,r,i){for(var a=0;a<i;a++){for(var o=0,s=0;s<8;s++)this.get(e)&&(o|=1<<7-s),e++;t[r+a]=o}},n.prototype.getBitArray=function(){return this.bits},n.prototype.reverse=function(){for(var e=new Int32Array(this.bits.length),t=Math.floor((this.size-1)/32),r=t+1,i=this.bits,a=0;a<r;a++){var o=i[a];o=o>>1&1431655765|(o&1431655765)<<1,o=o>>2&858993459|(o&858993459)<<2,o=o>>4&252645135|(o&252645135)<<4,o=o>>8&16711935|(o&16711935)<<8,o=o>>16&65535|(o&65535)<<16,e[t-a]=o}if(this.size!==r*32){for(var s=r*32-this.size,u=e[0]>>>s,a=1;a<r;a++){var f=e[a];u|=f<<32-s,e[a-1]=u,u=f>>>s}e[r-1]=u}this.bits=e},n.makeArray=function(e){return new Int32Array(Math.floor((e+31)/32))},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.size===t.size&&ki.equals(this.bits,t.bits)},n.prototype.hashCode=function(){return 31*this.size+ki.hashCode(this.bits)},n.prototype.toString=function(){for(var e="",t=0,r=this.size;t<r;t++)(t&7)===0&&(e+=" "),e+=this.get(t)?"X":".";return e},n.prototype.clone=function(){return new n(this.size,this.bits.slice())},n.prototype.toArray=function(){for(var e=[],t=0,r=this.size;t<r;t++)e.push(this.get(t));return e},n}(),yy;(function(n){n[n.OTHER=0]="OTHER",n[n.PURE_BARCODE=1]="PURE_BARCODE",n[n.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",n[n.TRY_HARDER=3]="TRY_HARDER",n[n.CHARACTER_SET=4]="CHARACTER_SET",n[n.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",n[n.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",n[n.ENABLE_CODE_39_EXTENDED_MODE=7]="ENABLE_CODE_39_EXTENDED_MODE",n[n.ASSUME_GS1=8]="ASSUME_GS1",n[n.RETURN_CODABAR_START_END=9]="RETURN_CODABAR_START_END",n[n.NEED_RESULT_POINT_CALLBACK=10]="NEED_RESULT_POINT_CALLBACK",n[n.ALLOWED_EAN_EXTENSIONS=11]="ALLOWED_EAN_EXTENSIONS"})(yy||(yy={}));const kr=yy;var rM=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),pt=function(n){rM(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.getFormatInstance=function(){return new e},e.kind="FormatException",e}(Ao),iM=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ir;(function(n){n[n.Cp437=0]="Cp437",n[n.ISO8859_1=1]="ISO8859_1",n[n.ISO8859_2=2]="ISO8859_2",n[n.ISO8859_3=3]="ISO8859_3",n[n.ISO8859_4=4]="ISO8859_4",n[n.ISO8859_5=5]="ISO8859_5",n[n.ISO8859_6=6]="ISO8859_6",n[n.ISO8859_7=7]="ISO8859_7",n[n.ISO8859_8=8]="ISO8859_8",n[n.ISO8859_9=9]="ISO8859_9",n[n.ISO8859_10=10]="ISO8859_10",n[n.ISO8859_11=11]="ISO8859_11",n[n.ISO8859_13=12]="ISO8859_13",n[n.ISO8859_14=13]="ISO8859_14",n[n.ISO8859_15=14]="ISO8859_15",n[n.ISO8859_16=15]="ISO8859_16",n[n.SJIS=16]="SJIS",n[n.Cp1250=17]="Cp1250",n[n.Cp1251=18]="Cp1251",n[n.Cp1252=19]="Cp1252",n[n.Cp1256=20]="Cp1256",n[n.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",n[n.UTF8=22]="UTF8",n[n.ASCII=23]="ASCII",n[n.Big5=24]="Big5",n[n.GB18030=25]="GB18030",n[n.EUC_KR=26]="EUC_KR"})(ir||(ir={}));var Li=function(){function n(e,t,r){for(var i,a,o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];this.valueIdentifier=e,this.name=r,typeof t=="number"?this.values=Int32Array.from([t]):this.values=t,this.otherEncodingNames=o,n.VALUE_IDENTIFIER_TO_ECI.set(e,this),n.NAME_TO_ECI.set(r,this);for(var u=this.values,f=0,h=u.length;f!==h;f++){var p=u[f];n.VALUES_TO_ECI.set(p,this)}try{for(var g=iM(o),m=g.next();!m.done;m=g.next()){var x=m.value;n.NAME_TO_ECI.set(x,this)}}catch(w){i={error:w}}finally{try{m&&!m.done&&(a=g.return)&&a.call(g)}finally{if(i)throw i.error}}}return n.prototype.getValueIdentifier=function(){return this.valueIdentifier},n.prototype.getName=function(){return this.name},n.prototype.getValue=function(){return this.values[0]},n.getCharacterSetECIByValue=function(e){if(e<0||e>=900)throw new pt("incorect value");var t=n.VALUES_TO_ECI.get(e);if(t===void 0)throw new pt("incorect value");return t},n.getCharacterSetECIByName=function(e){var t=n.NAME_TO_ECI.get(e);if(t===void 0)throw new pt("incorect value");return t},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.getName()===t.getName()},n.VALUE_IDENTIFIER_TO_ECI=new Map,n.VALUES_TO_ECI=new Map,n.NAME_TO_ECI=new Map,n.Cp437=new n(ir.Cp437,Int32Array.from([0,2]),"Cp437"),n.ISO8859_1=new n(ir.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),n.ISO8859_2=new n(ir.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),n.ISO8859_3=new n(ir.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),n.ISO8859_4=new n(ir.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),n.ISO8859_5=new n(ir.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),n.ISO8859_6=new n(ir.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),n.ISO8859_7=new n(ir.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),n.ISO8859_8=new n(ir.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),n.ISO8859_9=new n(ir.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),n.ISO8859_10=new n(ir.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),n.ISO8859_11=new n(ir.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),n.ISO8859_13=new n(ir.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),n.ISO8859_14=new n(ir.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),n.ISO8859_15=new n(ir.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),n.ISO8859_16=new n(ir.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),n.SJIS=new n(ir.SJIS,20,"SJIS","Shift_JIS"),n.Cp1250=new n(ir.Cp1250,21,"Cp1250","windows-1250"),n.Cp1251=new n(ir.Cp1251,22,"Cp1251","windows-1251"),n.Cp1252=new n(ir.Cp1252,23,"Cp1252","windows-1252"),n.Cp1256=new n(ir.Cp1256,24,"Cp1256","windows-1256"),n.UnicodeBigUnmarked=new n(ir.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),n.UTF8=new n(ir.UTF8,26,"UTF8","UTF-8"),n.ASCII=new n(ir.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),n.Big5=new n(ir.Big5,28,"Big5"),n.GB18030=new n(ir.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),n.EUC_KR=new n(ir.EUC_KR,30,"EUC_KR","EUC-KR"),n}(),aM=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),tg=function(n){aM(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="UnsupportedOperationException",e}(Ao),Es=function(){function n(){}return n.decode=function(e,t){var r=this.encodingName(t);return this.customDecoder?this.customDecoder(e,r):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(r)?this.decodeFallback(e,r):new TextDecoder(r).decode(e)},n.shouldDecodeOnFallback=function(e){return!n.isBrowser()&&e==="ISO-8859-1"},n.encode=function(e,t){var r=this.encodingName(t);return this.customEncoder?this.customEncoder(e,r):typeof TextEncoder>"u"?this.encodeFallback(e):new TextEncoder().encode(e)},n.isBrowser=function(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"},n.encodingName=function(e){return typeof e=="string"?e:e.getName()},n.encodingCharacterSet=function(e){return e instanceof Li?e:Li.getCharacterSetECIByName(e)},n.decodeFallback=function(e,t){var r=this.encodingCharacterSet(t);if(n.isDecodeFallbackSupported(r)){for(var i="",a=0,o=e.length;a<o;a++){var s=e[a].toString(16);s.length<2&&(s="0"+s),i+="%"+s}return decodeURIComponent(i)}if(r.equals(Li.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(e.buffer));throw new tg("Encoding "+this.encodingName(t)+" not supported by fallback.")},n.isDecodeFallbackSupported=function(e){return e.equals(Li.UTF8)||e.equals(Li.ISO8859_1)||e.equals(Li.ASCII)},n.encodeFallback=function(e){for(var t=btoa(unescape(encodeURIComponent(e))),r=t.split(""),i=[],a=0;a<r.length;a++)i.push(r[a].charCodeAt(0));return new Uint8Array(i)},n}(),Dn=function(){function n(){}return n.castAsNonUtf8Char=function(e,t){t===void 0&&(t=null);var r=t?t.getName():this.ISO88591;return Es.decode(new Uint8Array([e]),r)},n.guessEncoding=function(e,t){if(t!=null&&t.get(kr.CHARACTER_SET)!==void 0)return t.get(kr.CHARACTER_SET).toString();for(var r=e.length,i=!0,a=!0,o=!0,s=0,u=0,f=0,h=0,p=0,g=0,m=0,x=0,w=0,I=0,C=0,P=e.length>3&&e[0]===239&&e[1]===187&&e[2]===191,B=0;B<r&&(i||a||o);B++){var V=e[B]&255;o&&(s>0?(V&128)===0?o=!1:s--:(V&128)!==0&&((V&64)===0?o=!1:(s++,(V&32)===0?u++:(s++,(V&16)===0?f++:(s++,(V&8)===0?h++:o=!1))))),i&&(V>127&&V<160?i=!1:V>159&&(V<192||V===215||V===247)&&C++),a&&(p>0?V<64||V===127||V>252?a=!1:p--:V===128||V===160||V>239?a=!1:V>160&&V<224?(g++,x=0,m++,m>w&&(w=m)):V>127?(p++,m=0,x++,x>I&&(I=x)):(m=0,x=0))}return o&&s>0&&(o=!1),a&&p>0&&(a=!1),o&&(P||u+f+h>0)?n.UTF8:a&&(n.ASSUME_SHIFT_JIS||w>=3||I>=3)?n.SHIFT_JIS:i&&a?w===2&&g===2||C*10>=r?n.SHIFT_JIS:n.ISO88591:i?n.ISO88591:a?n.SHIFT_JIS:o?n.UTF8:n.PLATFORM_DEFAULT_ENCODING},n.format=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var i=-1;function a(s,u,f,h,p,g){if(s==="%%")return"%";if(t[++i]!==void 0){s=h?parseInt(h.substr(1)):void 0;var m=p?parseInt(p.substr(1)):void 0,x;switch(g){case"s":x=t[i];break;case"c":x=t[i][0];break;case"f":x=parseFloat(t[i]).toFixed(s);break;case"p":x=parseFloat(t[i]).toPrecision(s);break;case"e":x=parseFloat(t[i]).toExponential(s);break;case"x":x=parseInt(t[i]).toString(m||16);break;case"d":x=parseFloat(parseInt(t[i],m||10).toPrecision(s)).toFixed(0);break}x=typeof x=="object"?JSON.stringify(x):(+x).toString(m);for(var w=parseInt(f),I=f&&f[0]+""=="0"?"0":" ";x.length<w;)x=u!==void 0?x+I:I+x;return x}}var o=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(o,a)},n.getBytes=function(e,t){return Es.encode(e,t)},n.getCharCode=function(e,t){return t===void 0&&(t=0),e.charCodeAt(t)},n.getCharAt=function(e){return String.fromCharCode(e)},n.SHIFT_JIS=Li.SJIS.getName(),n.GB2312="GB2312",n.ISO88591=Li.ISO8859_1.getName(),n.EUC_JP="EUC_JP",n.UTF8=Li.UTF8.getName(),n.PLATFORM_DEFAULT_ENCODING=n.UTF8,n.ASSUME_SHIFT_JIS=!1,n}(),cn=function(){function n(e){e===void 0&&(e=""),this.value=e}return n.prototype.enableDecoding=function(e){return this.encoding=e,this},n.prototype.append=function(e){return typeof e=="string"?this.value+=e.toString():this.encoding?this.value+=Dn.castAsNonUtf8Char(e,this.encoding):this.value+=String.fromCharCode(e),this},n.prototype.appendChars=function(e,t,r){for(var i=t;t<t+r;i++)this.append(e[i]);return this},n.prototype.length=function(){return this.value.length},n.prototype.charAt=function(e){return this.value.charAt(e)},n.prototype.deleteCharAt=function(e){this.value=this.value.substr(0,e)+this.value.substring(e+1)},n.prototype.setCharAt=function(e,t){this.value=this.value.substr(0,e)+t+this.value.substr(e+1)},n.prototype.substring=function(e,t){return this.value.substring(e,t)},n.prototype.setLengthToZero=function(){this.value=""},n.prototype.toString=function(){return this.value},n.prototype.insert=function(e,t){this.value=this.value.substring(0,e)+t+this.value.substring(e)},n}(),iu=function(){function n(e,t,r,i){if(this.width=e,this.height=t,this.rowSize=r,this.bits=i,t==null&&(t=e),this.height=t,e<1||t<1)throw new jt("Both dimensions must be greater than 0");r==null&&(r=Math.floor((e+31)/32)),this.rowSize=r,i==null&&(this.bits=new Int32Array(this.rowSize*this.height))}return n.parseFromBooleanArray=function(e){for(var t=e.length,r=e[0].length,i=new n(r,t),a=0;a<t;a++)for(var o=e[a],s=0;s<r;s++)o[s]&&i.set(s,a);return i},n.parseFromString=function(e,t,r){if(e===null)throw new jt("stringRepresentation cannot be null");for(var i=new Array(e.length),a=0,o=0,s=-1,u=0,f=0;f<e.length;)if(e.charAt(f)===`
`||e.charAt(f)==="\r"){if(a>o){if(s===-1)s=a-o;else if(a-o!==s)throw new jt("row lengths do not match");o=a,u++}f++}else if(e.substring(f,f+t.length)===t)f+=t.length,i[a]=!0,a++;else if(e.substring(f,f+r.length)===r)f+=r.length,i[a]=!1,a++;else throw new jt("illegal character encountered: "+e.substring(f));if(a>o){if(s===-1)s=a-o;else if(a-o!==s)throw new jt("row lengths do not match");u++}for(var h=new n(s,u),p=0;p<a;p++)i[p]&&h.set(Math.floor(p%s),Math.floor(p/s));return h},n.prototype.get=function(e,t){var r=t*this.rowSize+Math.floor(e/32);return(this.bits[r]>>>(e&31)&1)!==0},n.prototype.set=function(e,t){var r=t*this.rowSize+Math.floor(e/32);this.bits[r]|=1<<(e&31)&4294967295},n.prototype.unset=function(e,t){var r=t*this.rowSize+Math.floor(e/32);this.bits[r]&=~(1<<(e&31)&4294967295)},n.prototype.flip=function(e,t){var r=t*this.rowSize+Math.floor(e/32);this.bits[r]^=1<<(e&31)&4294967295},n.prototype.xor=function(e){if(this.width!==e.getWidth()||this.height!==e.getHeight()||this.rowSize!==e.getRowSize())throw new jt("input matrix dimensions do not match");for(var t=new Zi(Math.floor(this.width/32)+1),r=this.rowSize,i=this.bits,a=0,o=this.height;a<o;a++)for(var s=a*r,u=e.getRow(a,t).getBitArray(),f=0;f<r;f++)i[s+f]^=u[f]},n.prototype.clear=function(){for(var e=this.bits,t=e.length,r=0;r<t;r++)e[r]=0},n.prototype.setRegion=function(e,t,r,i){if(t<0||e<0)throw new jt("Left and top must be nonnegative");if(i<1||r<1)throw new jt("Height and width must be at least 1");var a=e+r,o=t+i;if(o>this.height||a>this.width)throw new jt("The region must fit inside the matrix");for(var s=this.rowSize,u=this.bits,f=t;f<o;f++)for(var h=f*s,p=e;p<a;p++)u[h+Math.floor(p/32)]|=1<<(p&31)&4294967295},n.prototype.getRow=function(e,t){t==null||t.getSize()<this.width?t=new Zi(this.width):t.clear();for(var r=this.rowSize,i=this.bits,a=e*r,o=0;o<r;o++)t.setBulk(o*32,i[a+o]);return t},n.prototype.setRow=function(e,t){br.arraycopy(t.getBitArray(),0,this.bits,e*this.rowSize,this.rowSize)},n.prototype.rotate180=function(){for(var e=this.getWidth(),t=this.getHeight(),r=new Zi(e),i=new Zi(e),a=0,o=Math.floor((t+1)/2);a<o;a++)r=this.getRow(a,r),i=this.getRow(t-1-a,i),r.reverse(),i.reverse(),this.setRow(a,i),this.setRow(t-1-a,r)},n.prototype.getEnclosingRectangle=function(){for(var e=this.width,t=this.height,r=this.rowSize,i=this.bits,a=e,o=t,s=-1,u=-1,f=0;f<t;f++)for(var h=0;h<r;h++){var p=i[f*r+h];if(p!==0){if(f<o&&(o=f),f>u&&(u=f),h*32<a){for(var g=0;(p<<31-g&4294967295)===0;)g++;h*32+g<a&&(a=h*32+g)}if(h*32+31>s){for(var g=31;!(p>>>g);)g--;h*32+g>s&&(s=h*32+g)}}}return s<a||u<o?null:Int32Array.from([a,o,s-a+1,u-o+1])},n.prototype.getTopLeftOnBit=function(){for(var e=this.rowSize,t=this.bits,r=0;r<t.length&&t[r]===0;)r++;if(r===t.length)return null;for(var i=r/e,a=r%e*32,o=t[r],s=0;(o<<31-s&4294967295)===0;)s++;return a+=s,Int32Array.from([a,i])},n.prototype.getBottomRightOnBit=function(){for(var e=this.rowSize,t=this.bits,r=t.length-1;r>=0&&t[r]===0;)r--;if(r<0)return null;for(var i=Math.floor(r/e),a=Math.floor(r%e)*32,o=t[r],s=31;!(o>>>s);)s--;return a+=s,Int32Array.from([a,i])},n.prototype.getWidth=function(){return this.width},n.prototype.getHeight=function(){return this.height},n.prototype.getRowSize=function(){return this.rowSize},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.width===t.width&&this.height===t.height&&this.rowSize===t.rowSize&&ki.equals(this.bits,t.bits)},n.prototype.hashCode=function(){var e=this.width;return e=31*e+this.width,e=31*e+this.height,e=31*e+this.rowSize,e=31*e+ki.hashCode(this.bits),e},n.prototype.toString=function(e,t,r){return e===void 0&&(e="X "),t===void 0&&(t="  "),r===void 0&&(r=`
`),this.buildToString(e,t,r)},n.prototype.buildToString=function(e,t,r){for(var i=new cn,a=0,o=this.height;a<o;a++){for(var s=0,u=this.width;s<u;s++)i.append(this.get(s,a)?e:t);i.append(r)}return i.toString()},n.prototype.clone=function(){return new n(this.width,this.height,this.rowSize,this.bits.slice())},n}(),oM=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),ze=function(n){oM(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.getNotFoundInstance=function(){return new e},e.kind="NotFoundException",e}(Ao),sM=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),lM=function(n){sM(e,n);function e(t){var r=n.call(this,t)||this;return r.luminances=e.EMPTY,r.buckets=new Int32Array(e.LUMINANCE_BUCKETS),r}return e.prototype.getBlackRow=function(t,r){var i=this.getLuminanceSource(),a=i.getWidth();r==null||r.getSize()<a?r=new Zi(a):r.clear(),this.initArrays(a);for(var o=i.getRow(t,this.luminances),s=this.buckets,u=0;u<a;u++)s[(o[u]&255)>>e.LUMINANCE_SHIFT]++;var f=e.estimateBlackPoint(s);if(a<3)for(var u=0;u<a;u++)(o[u]&255)<f&&r.set(u);else for(var h=o[0]&255,p=o[1]&255,u=1;u<a-1;u++){var g=o[u+1]&255;(p*4-h-g)/2<f&&r.set(u),h=p,p=g}return r},e.prototype.getBlackMatrix=function(){var t=this.getLuminanceSource(),r=t.getWidth(),i=t.getHeight(),a=new iu(r,i);this.initArrays(r);for(var o=this.buckets,s=1;s<5;s++)for(var u=Math.floor(i*s/5),f=t.getRow(u,this.luminances),h=Math.floor(r*4/5),p=Math.floor(r/5);p<h;p++){var g=f[p]&255;o[g>>e.LUMINANCE_SHIFT]++}for(var m=e.estimateBlackPoint(o),x=t.getMatrix(),s=0;s<i;s++)for(var w=s*r,p=0;p<r;p++){var g=x[w+p]&255;g<m&&a.set(p,s)}return a},e.prototype.createBinarizer=function(t){return new e(t)},e.prototype.initArrays=function(t){this.luminances.length<t&&(this.luminances=new Uint8ClampedArray(t));for(var r=this.buckets,i=0;i<e.LUMINANCE_BUCKETS;i++)r[i]=0},e.estimateBlackPoint=function(t){for(var r=t.length,i=0,a=0,o=0,s=0;s<r;s++)t[s]>o&&(a=s,o=t[s]),t[s]>i&&(i=t[s]);for(var u=0,f=0,s=0;s<r;s++){var h=s-a,p=t[s]*h*h;p>f&&(u=s,f=p)}if(a>u){var g=a;a=u,u=g}if(u-a<=r/16)throw new ze;for(var m=u-1,x=-1,s=u-1;s>a;s--){var w=s-a,p=w*w*(u-s)*(i-t[s]);p>x&&(m=s,x=p)}return m<<e.LUMINANCE_SHIFT},e.LUMINANCE_BITS=5,e.LUMINANCE_SHIFT=8-e.LUMINANCE_BITS,e.LUMINANCE_BUCKETS=1<<e.LUMINANCE_BITS,e.EMPTY=Uint8ClampedArray.from([0]),e}(Jk),uM=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),cM=function(n){uM(e,n);function e(t){var r=n.call(this,t)||this;return r.matrix=null,r}return e.prototype.getBlackMatrix=function(){if(this.matrix!==null)return this.matrix;var t=this.getLuminanceSource(),r=t.getWidth(),i=t.getHeight();if(r>=e.MINIMUM_DIMENSION&&i>=e.MINIMUM_DIMENSION){var a=t.getMatrix(),o=r>>e.BLOCK_SIZE_POWER;(r&e.BLOCK_SIZE_MASK)!==0&&o++;var s=i>>e.BLOCK_SIZE_POWER;(i&e.BLOCK_SIZE_MASK)!==0&&s++;var u=e.calculateBlackPoints(a,o,s,r,i),f=new iu(r,i);e.calculateThresholdForBlock(a,o,s,r,i,u,f),this.matrix=f}else this.matrix=n.prototype.getBlackMatrix.call(this);return this.matrix},e.prototype.createBinarizer=function(t){return new e(t)},e.calculateThresholdForBlock=function(t,r,i,a,o,s,u){for(var f=o-e.BLOCK_SIZE,h=a-e.BLOCK_SIZE,p=0;p<i;p++){var g=p<<e.BLOCK_SIZE_POWER;g>f&&(g=f);for(var m=e.cap(p,2,i-3),x=0;x<r;x++){var w=x<<e.BLOCK_SIZE_POWER;w>h&&(w=h);for(var I=e.cap(x,2,r-3),C=0,P=-2;P<=2;P++){var B=s[m+P];C+=B[I-2]+B[I-1]+B[I]+B[I+1]+B[I+2]}var V=C/25;e.thresholdBlock(t,w,g,V,a,u)}}},e.cap=function(t,r,i){return t<r?r:t>i?i:t},e.thresholdBlock=function(t,r,i,a,o,s){for(var u=0,f=i*o+r;u<e.BLOCK_SIZE;u++,f+=o)for(var h=0;h<e.BLOCK_SIZE;h++)(t[f+h]&255)<=a&&s.set(r+h,i+u)},e.calculateBlackPoints=function(t,r,i,a,o){for(var s=o-e.BLOCK_SIZE,u=a-e.BLOCK_SIZE,f=new Array(i),h=0;h<i;h++){f[h]=new Int32Array(r);var p=h<<e.BLOCK_SIZE_POWER;p>s&&(p=s);for(var g=0;g<r;g++){var m=g<<e.BLOCK_SIZE_POWER;m>u&&(m=u);for(var x=0,w=255,I=0,C=0,P=p*a+m;C<e.BLOCK_SIZE;C++,P+=a){for(var B=0;B<e.BLOCK_SIZE;B++){var V=t[P+B]&255;x+=V,V<w&&(w=V),V>I&&(I=V)}if(I-w>e.MIN_DYNAMIC_RANGE)for(C++,P+=a;C<e.BLOCK_SIZE;C++,P+=a)for(var B=0;B<e.BLOCK_SIZE;B++)x+=t[P+B]&255}var Y=x>>e.BLOCK_SIZE_POWER*2;if(I-w<=e.MIN_DYNAMIC_RANGE&&(Y=w/2,h>0&&g>0)){var q=(f[h-1][g]+2*f[h][g-1]+f[h-1][g-1])/4;w<q&&(Y=q)}f[h][g]=Y}}return f},e.BLOCK_SIZE_POWER=3,e.BLOCK_SIZE=1<<e.BLOCK_SIZE_POWER,e.BLOCK_SIZE_MASK=e.BLOCK_SIZE-1,e.MINIMUM_DIMENSION=e.BLOCK_SIZE*5,e.MIN_DYNAMIC_RANGE=24,e}(lM),Rm=function(){function n(e,t){this.width=e,this.height=t}return n.prototype.getWidth=function(){return this.width},n.prototype.getHeight=function(){return this.height},n.prototype.isCropSupported=function(){return!1},n.prototype.crop=function(e,t,r,i){throw new tg("This luminance source does not support cropping.")},n.prototype.isRotateSupported=function(){return!1},n.prototype.rotateCounterClockwise=function(){throw new tg("This luminance source does not support rotation by 90 degrees.")},n.prototype.rotateCounterClockwise45=function(){throw new tg("This luminance source does not support rotation by 45 degrees.")},n.prototype.toString=function(){for(var e=new Uint8ClampedArray(this.width),t=new cn,r=0;r<this.height;r++){for(var i=this.getRow(r,e),a=0;a<this.width;a++){var o=i[a]&255,s=void 0;o<64?s="#":o<128?s="+":o<192?s=".":s=" ",t.append(s)}t.append(`
`)}return t.toString()},n}(),fM=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),ox=function(n){fM(e,n);function e(t){var r=n.call(this,t.getWidth(),t.getHeight())||this;return r.delegate=t,r}return e.prototype.getRow=function(t,r){for(var i=this.delegate.getRow(t,r),a=this.getWidth(),o=0;o<a;o++)i[o]=255-(i[o]&255);return i},e.prototype.getMatrix=function(){for(var t=this.delegate.getMatrix(),r=this.getWidth()*this.getHeight(),i=new Uint8ClampedArray(r),a=0;a<r;a++)i[a]=255-(t[a]&255);return i},e.prototype.isCropSupported=function(){return this.delegate.isCropSupported()},e.prototype.crop=function(t,r,i,a){return new e(this.delegate.crop(t,r,i,a))},e.prototype.isRotateSupported=function(){return this.delegate.isRotateSupported()},e.prototype.invert=function(){return this.delegate},e.prototype.rotateCounterClockwise=function(){return new e(this.delegate.rotateCounterClockwise())},e.prototype.rotateCounterClockwise45=function(){return new e(this.delegate.rotateCounterClockwise45())},e}(Rm),hM=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),dM=function(n){hM(e,n);function e(t,r){r===void 0&&(r=!1);var i=n.call(this,t.width,t.height)||this;return i.canvas=t,i.tempCanvasElement=null,i.buffer=e.makeBufferFromCanvasImageData(t,r),i}return e.makeBufferFromCanvasImageData=function(t,r){r===void 0&&(r=!1);var i=t.getContext("2d").getImageData(0,0,t.width,t.height);return e.toGrayscaleBuffer(i.data,t.width,t.height,r)},e.toGrayscaleBuffer=function(t,r,i,a){a===void 0&&(a=!1);var o=new Uint8ClampedArray(r*i);if(e.FRAME_INDEX=!e.FRAME_INDEX,e.FRAME_INDEX||!a)for(var s=0,u=0,f=t.length;s<f;s+=4,u++){var h=void 0,p=t[s+3];if(p===0)h=255;else{var g=t[s],m=t[s+1],x=t[s+2];h=306*g+601*m+117*x+512>>10}o[u]=h}else for(var s=0,u=0,w=t.length;s<w;s+=4,u++){var h=void 0,p=t[s+3];if(p===0)h=255;else{var g=t[s],m=t[s+1],x=t[s+2];h=306*g+601*m+117*x+512>>10}o[u]=255-h}return o},e.prototype.getRow=function(t,r){if(t<0||t>=this.getHeight())throw new jt("Requested row is outside the image: "+t);var i=this.getWidth(),a=t*i;return r===null?r=this.buffer.slice(a,a+i):(r.length<i&&(r=new Uint8ClampedArray(i)),r.set(this.buffer.slice(a,a+i))),r},e.prototype.getMatrix=function(){return this.buffer},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(t,r,i,a){return n.prototype.crop.call(this,t,r,i,a),this},e.prototype.isRotateSupported=function(){return!0},e.prototype.rotateCounterClockwise=function(){return this.rotate(-90),this},e.prototype.rotateCounterClockwise45=function(){return this.rotate(-45),this},e.prototype.getTempCanvasElement=function(){if(this.tempCanvasElement===null){var t=this.canvas.ownerDocument.createElement("canvas");t.width=this.canvas.width,t.height=this.canvas.height,this.tempCanvasElement=t}return this.tempCanvasElement},e.prototype.rotate=function(t){var r=this.getTempCanvasElement(),i=r.getContext("2d"),a=t*e.DEGREE_TO_RADIANS,o=this.canvas.width,s=this.canvas.height,u=Math.ceil(Math.abs(Math.cos(a))*o+Math.abs(Math.sin(a))*s),f=Math.ceil(Math.abs(Math.sin(a))*o+Math.abs(Math.cos(a))*s);return r.width=u,r.height=f,i.translate(u/2,f/2),i.rotate(a),i.drawImage(this.canvas,o/-2,s/-2),this.buffer=e.makeBufferFromCanvasImageData(r),this},e.prototype.invert=function(){return new ox(this)},e.DEGREE_TO_RADIANS=Math.PI/180,e.FRAME_INDEX=!0,e}(Rm),pM=function(){function n(e,t,r){this.deviceId=e,this.label=t,this.kind="videoinput",this.groupId=r||void 0}return n.prototype.toJSON=function(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}},n}(),$a=function(n,e,t,r){function i(a){return a instanceof t?a:new t(function(o){o(a)})}return new(t||(t=Promise))(function(a,o){function s(h){try{f(r.next(h))}catch(p){o(p)}}function u(h){try{f(r.throw(h))}catch(p){o(p)}}function f(h){h.done?a(h.value):i(h.value).then(s,u)}f((r=r.apply(n,e||[])).next())})},Xa=function(n,e){var t={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,i,a,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(f){return function(h){return u([f,h])}}function u(f){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,i&&(a=f[0]&2?i.return:f[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,f[1])).done)return a;switch(i=0,a&&(f=[f[0]&2,a.value]),f[0]){case 0:case 1:a=f;break;case 4:return t.label++,{value:f[1],done:!1};case 5:t.label++,i=f[1],f=[0];continue;case 7:f=t.ops.pop(),t.trys.pop();continue;default:if(a=t.trys,!(a=a.length>0&&a[a.length-1])&&(f[0]===6||f[0]===2)){t=0;continue}if(f[0]===3&&(!a||f[1]>a[0]&&f[1]<a[3])){t.label=f[1];break}if(f[0]===6&&t.label<a[1]){t.label=a[1],a=f;break}if(a&&t.label<a[2]){t.label=a[2],t.ops.push(f);break}a[2]&&t.ops.pop(),t.trys.pop();continue}f=e.call(n,t)}catch(h){f=[6,h],i=0}finally{r=a=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}},gM=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Ld=function(){function n(e,t,r){t===void 0&&(t=500),this.reader=e,this.timeBetweenScansMillis=t,this._hints=r,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}return Object.defineProperty(n.prototype,"hasNavigator",{get:function(){return typeof navigator<"u"},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isMediaDevicesSuported",{get:function(){return this.hasNavigator&&!!navigator.mediaDevices},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"canEnumerateDevices",{get:function(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"timeBetweenDecodingAttempts",{get:function(){return this._timeBetweenDecodingAttempts},set:function(e){this._timeBetweenDecodingAttempts=e<0?0:e},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"hints",{get:function(){return this._hints},set:function(e){this._hints=e||null},enumerable:!1,configurable:!0}),n.prototype.listVideoInputDevices=function(){return $a(this,void 0,void 0,function(){var e,t,r,i,a,o,s,u,f,h,p,g;return Xa(this,function(m){switch(m.label){case 0:if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");return[4,navigator.mediaDevices.enumerateDevices()];case 1:e=m.sent(),t=[];try{for(r=gM(e),i=r.next();!i.done;i=r.next())a=i.value,o=a.kind==="video"?"videoinput":a.kind,o==="videoinput"&&(s=a.deviceId||a.id,u=a.label||"Video device "+(t.length+1),f=a.groupId,h={deviceId:s,label:u,kind:o,groupId:f},t.push(h))}catch(x){p={error:x}}finally{try{i&&!i.done&&(g=r.return)&&g.call(r)}finally{if(p)throw p.error}}return[2,t]}})})},n.prototype.getVideoInputDevices=function(){return $a(this,void 0,void 0,function(){var e;return Xa(this,function(t){switch(t.label){case 0:return[4,this.listVideoInputDevices()];case 1:return e=t.sent(),[2,e.map(function(r){return new pM(r.deviceId,r.label)})]}})})},n.prototype.findDeviceById=function(e){return $a(this,void 0,void 0,function(){var t;return Xa(this,function(r){switch(r.label){case 0:return[4,this.listVideoInputDevices()];case 1:return t=r.sent(),t?[2,t.find(function(i){return i.deviceId===e})]:[2,null]}})})},n.prototype.decodeFromInputVideoDevice=function(e,t){return $a(this,void 0,void 0,function(){return Xa(this,function(r){switch(r.label){case 0:return[4,this.decodeOnceFromVideoDevice(e,t)];case 1:return[2,r.sent()]}})})},n.prototype.decodeOnceFromVideoDevice=function(e,t){return $a(this,void 0,void 0,function(){var r,i;return Xa(this,function(a){switch(a.label){case 0:return this.reset(),e?r={deviceId:{exact:e}}:r={facingMode:"environment"},i={video:r},[4,this.decodeOnceFromConstraints(i,t)];case 1:return[2,a.sent()]}})})},n.prototype.decodeOnceFromConstraints=function(e,t){return $a(this,void 0,void 0,function(){var r;return Xa(this,function(i){switch(i.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return r=i.sent(),[4,this.decodeOnceFromStream(r,t)];case 2:return[2,i.sent()]}})})},n.prototype.decodeOnceFromStream=function(e,t){return $a(this,void 0,void 0,function(){var r,i;return Xa(this,function(a){switch(a.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,t)];case 1:return r=a.sent(),[4,this.decodeOnce(r)];case 2:return i=a.sent(),[2,i]}})})},n.prototype.decodeFromInputVideoDeviceContinuously=function(e,t,r){return $a(this,void 0,void 0,function(){return Xa(this,function(i){switch(i.label){case 0:return[4,this.decodeFromVideoDevice(e,t,r)];case 1:return[2,i.sent()]}})})},n.prototype.decodeFromVideoDevice=function(e,t,r){return $a(this,void 0,void 0,function(){var i,a;return Xa(this,function(o){switch(o.label){case 0:return e?i={deviceId:{exact:e}}:i={facingMode:"environment"},a={video:i},[4,this.decodeFromConstraints(a,t,r)];case 1:return[2,o.sent()]}})})},n.prototype.decodeFromConstraints=function(e,t,r){return $a(this,void 0,void 0,function(){var i;return Xa(this,function(a){switch(a.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return i=a.sent(),[4,this.decodeFromStream(i,t,r)];case 2:return[2,a.sent()]}})})},n.prototype.decodeFromStream=function(e,t,r){return $a(this,void 0,void 0,function(){var i;return Xa(this,function(a){switch(a.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,t)];case 1:return i=a.sent(),[4,this.decodeContinuously(i,r)];case 2:return[2,a.sent()]}})})},n.prototype.stopAsyncDecode=function(){this._stopAsyncDecode=!0},n.prototype.stopContinuousDecode=function(){this._stopContinuousDecode=!0},n.prototype.attachStreamToVideo=function(e,t){return $a(this,void 0,void 0,function(){var r;return Xa(this,function(i){switch(i.label){case 0:return r=this.prepareVideoElement(t),this.addVideoSource(r,e),this.videoElement=r,this.stream=e,[4,this.playVideoOnLoadAsync(r)];case 1:return i.sent(),[2,r]}})})},n.prototype.playVideoOnLoadAsync=function(e){var t=this;return new Promise(function(r,i){return t.playVideoOnLoad(e,function(){return r()})})},n.prototype.playVideoOnLoad=function(e,t){var r=this;this.videoEndedListener=function(){return r.stopStreams()},this.videoCanPlayListener=function(){return r.tryPlayVideo(e)},e.addEventListener("ended",this.videoEndedListener),e.addEventListener("canplay",this.videoCanPlayListener),e.addEventListener("playing",t),this.tryPlayVideo(e)},n.prototype.isVideoPlaying=function(e){return e.currentTime>0&&!e.paused&&!e.ended&&e.readyState>2},n.prototype.tryPlayVideo=function(e){return $a(this,void 0,void 0,function(){return Xa(this,function(t){switch(t.label){case 0:if(this.isVideoPlaying(e))return console.warn("Trying to play video that is already playing."),[2];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,e.play()];case 2:return t.sent(),[3,4];case 3:return t.sent(),console.warn("It was not possible to play the video."),[3,4];case 4:return[2]}})})},n.prototype.getMediaElement=function(e,t){var r=document.getElementById(e);if(!r)throw new nl("element with id '"+e+"' not found");if(r.nodeName.toLowerCase()!==t.toLowerCase())throw new nl("element with id '"+e+"' must be an "+t+" element");return r},n.prototype.decodeFromImage=function(e,t){if(!e&&!t)throw new nl("either imageElement with a src set or an url must be provided");return t&&!e?this.decodeFromImageUrl(t):this.decodeFromImageElement(e)},n.prototype.decodeFromVideo=function(e,t){if(!e&&!t)throw new nl("Either an element with a src set or an URL must be provided");return t&&!e?this.decodeFromVideoUrl(t):this.decodeFromVideoElement(e)},n.prototype.decodeFromVideoContinuously=function(e,t,r){if(e===void 0&&t===void 0)throw new nl("Either an element with a src set or an URL must be provided");return t&&!e?this.decodeFromVideoUrlContinuously(t,r):this.decodeFromVideoElementContinuously(e,r)},n.prototype.decodeFromImageElement=function(e){if(!e)throw new nl("An image element must be provided.");this.reset();var t=this.prepareImageElement(e);this.imageElement=t;var r;return this.isImageLoaded(t)?r=this.decodeOnce(t,!1,!0):r=this._decodeOnLoadImage(t),r},n.prototype.decodeFromVideoElement=function(e){var t=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideo(t)},n.prototype.decodeFromVideoElementContinuously=function(e,t){var r=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideoContinuously(r,t)},n.prototype._decodeFromVideoElementSetup=function(e){if(!e)throw new nl("A video element must be provided.");this.reset();var t=this.prepareVideoElement(e);return this.videoElement=t,t},n.prototype.decodeFromImageUrl=function(e){if(!e)throw new nl("An URL must be provided.");this.reset();var t=this.prepareImageElement();this.imageElement=t;var r=this._decodeOnLoadImage(t);return t.src=e,r},n.prototype.decodeFromVideoUrl=function(e){if(!e)throw new nl("An URL must be provided.");this.reset();var t=this.prepareVideoElement(),r=this.decodeFromVideoElement(t);return t.src=e,r},n.prototype.decodeFromVideoUrlContinuously=function(e,t){if(!e)throw new nl("An URL must be provided.");this.reset();var r=this.prepareVideoElement(),i=this.decodeFromVideoElementContinuously(r,t);return r.src=e,i},n.prototype._decodeOnLoadImage=function(e){var t=this;return new Promise(function(r,i){t.imageLoadedListener=function(){return t.decodeOnce(e,!1,!0).then(r,i)},e.addEventListener("load",t.imageLoadedListener)})},n.prototype._decodeOnLoadVideo=function(e){return $a(this,void 0,void 0,function(){return Xa(this,function(t){switch(t.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return t.sent(),[4,this.decodeOnce(e)];case 2:return[2,t.sent()]}})})},n.prototype._decodeOnLoadVideoContinuously=function(e,t){return $a(this,void 0,void 0,function(){return Xa(this,function(r){switch(r.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return r.sent(),this.decodeContinuously(e,t),[2]}})})},n.prototype.isImageLoaded=function(e){return!(!e.complete||e.naturalWidth===0)},n.prototype.prepareImageElement=function(e){var t;return typeof e>"u"&&(t=document.createElement("img"),t.width=200,t.height=200),typeof e=="string"&&(t=this.getMediaElement(e,"img")),e instanceof HTMLImageElement&&(t=e),t},n.prototype.prepareVideoElement=function(e){var t;return!e&&typeof document<"u"&&(t=document.createElement("video"),t.width=200,t.height=200),typeof e=="string"&&(t=this.getMediaElement(e,"video")),e instanceof HTMLVideoElement&&(t=e),t.setAttribute("autoplay","true"),t.setAttribute("muted","true"),t.setAttribute("playsinline","true"),t},n.prototype.decodeOnce=function(e,t,r){var i=this;t===void 0&&(t=!0),r===void 0&&(r=!0),this._stopAsyncDecode=!1;var a=function(o,s){if(i._stopAsyncDecode){s(new ze("Video stream has ended before any code could be detected.")),i._stopAsyncDecode=void 0;return}try{var u=i.decode(e);o(u)}catch(g){var f=t&&g instanceof ze,h=g instanceof Qi||g instanceof pt,p=h&&r;if(f||p)return setTimeout(a,i._timeBetweenDecodingAttempts,o,s);s(g)}};return new Promise(function(o,s){return a(o,s)})},n.prototype.decodeContinuously=function(e,t){var r=this;this._stopContinuousDecode=!1;var i=function(){if(r._stopContinuousDecode){r._stopContinuousDecode=void 0;return}try{var a=r.decode(e);t(a,null),setTimeout(i,r.timeBetweenScansMillis)}catch(u){t(null,u);var o=u instanceof Qi||u instanceof pt,s=u instanceof ze;(o||s)&&setTimeout(i,r._timeBetweenDecodingAttempts)}};i()},n.prototype.decode=function(e){var t=this.createBinaryBitmap(e);return this.decodeBitmap(t)},n.prototype.createBinaryBitmap=function(e){this.getCaptureCanvasContext(e);var t=!1;e instanceof HTMLVideoElement?(this.drawFrameOnCanvas(e),t=!0):this.drawImageOnCanvas(e);var r=this.getCaptureCanvas(e),i=new dM(r,t),a=new cM(i);return new Qk(a)},n.prototype.getCaptureCanvasContext=function(e){if(!this.captureCanvasContext){var t=this.getCaptureCanvas(e),r=void 0;try{r=t.getContext("2d",{willReadFrequently:!0})}catch{r=t.getContext("2d")}this.captureCanvasContext=r}return this.captureCanvasContext},n.prototype.getCaptureCanvas=function(e){if(!this.captureCanvas){var t=this.createCaptureCanvas(e);this.captureCanvas=t}return this.captureCanvas},n.prototype.drawFrameOnCanvas=function(e,t,r){t===void 0&&(t={sx:0,sy:0,sWidth:e.videoWidth,sHeight:e.videoHeight,dx:0,dy:0,dWidth:e.videoWidth,dHeight:e.videoHeight}),r===void 0&&(r=this.captureCanvasContext),r.drawImage(e,t.sx,t.sy,t.sWidth,t.sHeight,t.dx,t.dy,t.dWidth,t.dHeight)},n.prototype.drawImageOnCanvas=function(e,t,r){t===void 0&&(t={sx:0,sy:0,sWidth:e.naturalWidth,sHeight:e.naturalHeight,dx:0,dy:0,dWidth:e.naturalWidth,dHeight:e.naturalHeight}),r===void 0&&(r=this.captureCanvasContext),r.drawImage(e,t.sx,t.sy,t.sWidth,t.sHeight,t.dx,t.dy,t.dWidth,t.dHeight)},n.prototype.decodeBitmap=function(e){return this.reader.decode(e,this._hints)},n.prototype.createCaptureCanvas=function(e){if(typeof document>"u")return this._destroyCaptureCanvas(),null;var t=document.createElement("canvas"),r,i;return typeof e<"u"&&(e instanceof HTMLVideoElement?(r=e.videoWidth,i=e.videoHeight):e instanceof HTMLImageElement&&(r=e.naturalWidth||e.width,i=e.naturalHeight||e.height)),t.style.width=r+"px",t.style.height=i+"px",t.width=r,t.height=i,t},n.prototype.stopStreams=function(){this.stream&&(this.stream.getVideoTracks().forEach(function(e){return e.stop()}),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()},n.prototype.reset=function(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()},n.prototype._destroyVideoElement=function(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)},n.prototype._destroyImageElement=function(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)},n.prototype._destroyCaptureCanvas=function(){this.captureCanvasContext=void 0,this.captureCanvas=void 0},n.prototype.addVideoSource=function(e,t){try{e.srcObject=t}catch{e.src=URL.createObjectURL(t)}},n.prototype.cleanVideoSource=function(e){try{e.srcObject=null}catch{e.src=""}this.videoElement.removeAttribute("src")},n}(),Fa=function(){function n(e,t,r,i,a,o){r===void 0&&(r=t==null?0:8*t.length),o===void 0&&(o=br.currentTimeMillis()),this.text=e,this.rawBytes=t,this.numBits=r,this.resultPoints=i,this.format=a,this.timestamp=o,this.text=e,this.rawBytes=t,r==null?this.numBits=t==null?0:8*t.length:this.numBits=r,this.resultPoints=i,this.format=a,this.resultMetadata=null,o==null?this.timestamp=br.currentTimeMillis():this.timestamp=o}return n.prototype.getText=function(){return this.text},n.prototype.getRawBytes=function(){return this.rawBytes},n.prototype.getNumBits=function(){return this.numBits},n.prototype.getResultPoints=function(){return this.resultPoints},n.prototype.getBarcodeFormat=function(){return this.format},n.prototype.getResultMetadata=function(){return this.resultMetadata},n.prototype.putMetadata=function(e,t){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(e,t)},n.prototype.putAllMetadata=function(e){e!==null&&(this.resultMetadata===null?this.resultMetadata=e:this.resultMetadata=new Map(e))},n.prototype.addResultPoints=function(e){var t=this.resultPoints;if(t===null)this.resultPoints=e;else if(e!==null&&e.length>0){var r=new Array(t.length+e.length);br.arraycopy(t,0,r,0,t.length),br.arraycopy(e,0,r,t.length,e.length),this.resultPoints=r}},n.prototype.getTimestamp=function(){return this.timestamp},n.prototype.toString=function(){return this.text},n}(),xy;(function(n){n[n.AZTEC=0]="AZTEC",n[n.CODABAR=1]="CODABAR",n[n.CODE_39=2]="CODE_39",n[n.CODE_93=3]="CODE_93",n[n.CODE_128=4]="CODE_128",n[n.DATA_MATRIX=5]="DATA_MATRIX",n[n.EAN_8=6]="EAN_8",n[n.EAN_13=7]="EAN_13",n[n.ITF=8]="ITF",n[n.MAXICODE=9]="MAXICODE",n[n.PDF_417=10]="PDF_417",n[n.QR_CODE=11]="QR_CODE",n[n.RSS_14=12]="RSS_14",n[n.RSS_EXPANDED=13]="RSS_EXPANDED",n[n.UPC_A=14]="UPC_A",n[n.UPC_E=15]="UPC_E",n[n.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(xy||(xy={}));const Bt=xy;var _y;(function(n){n[n.OTHER=0]="OTHER",n[n.ORIENTATION=1]="ORIENTATION",n[n.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",n[n.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",n[n.ISSUE_NUMBER=4]="ISSUE_NUMBER",n[n.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",n[n.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",n[n.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",n[n.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",n[n.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",n[n.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(_y||(_y={}));const ha=_y;var Nm=function(){function n(e,t,r,i,a,o){a===void 0&&(a=-1),o===void 0&&(o=-1),this.rawBytes=e,this.text=t,this.byteSegments=r,this.ecLevel=i,this.structuredAppendSequenceNumber=a,this.structuredAppendParity=o,this.numBits=e==null?0:8*e.length}return n.prototype.getRawBytes=function(){return this.rawBytes},n.prototype.getNumBits=function(){return this.numBits},n.prototype.setNumBits=function(e){this.numBits=e},n.prototype.getText=function(){return this.text},n.prototype.getByteSegments=function(){return this.byteSegments},n.prototype.getECLevel=function(){return this.ecLevel},n.prototype.getErrorsCorrected=function(){return this.errorsCorrected},n.prototype.setErrorsCorrected=function(e){this.errorsCorrected=e},n.prototype.getErasures=function(){return this.erasures},n.prototype.setErasures=function(e){this.erasures=e},n.prototype.getOther=function(){return this.other},n.prototype.setOther=function(e){this.other=e},n.prototype.hasStructuredAppend=function(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0},n.prototype.getStructuredAppendParity=function(){return this.structuredAppendParity},n.prototype.getStructuredAppendSequenceNumber=function(){return this.structuredAppendSequenceNumber},n}(),M1=function(){function n(){}return n.prototype.exp=function(e){return this.expTable[e]},n.prototype.log=function(e){if(e===0)throw new jt;return this.logTable[e]},n.addOrSubtract=function(e,t){return e^t},n}(),rf=function(){function n(e,t){if(t.length===0)throw new jt;this.field=e;var r=t.length;if(r>1&&t[0]===0){for(var i=1;i<r&&t[i]===0;)i++;i===r?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(r-i),br.arraycopy(t,i,this.coefficients,0,this.coefficients.length))}else this.coefficients=t}return n.prototype.getCoefficients=function(){return this.coefficients},n.prototype.getDegree=function(){return this.coefficients.length-1},n.prototype.isZero=function(){return this.coefficients[0]===0},n.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},n.prototype.evaluateAt=function(e){if(e===0)return this.getCoefficient(0);var t=this.coefficients,r;if(e===1){r=0;for(var i=0,a=t.length;i!==a;i++){var o=t[i];r=M1.addOrSubtract(r,o)}return r}r=t[0];for(var s=t.length,u=this.field,i=1;i<s;i++)r=M1.addOrSubtract(u.multiply(e,r),t[i]);return r},n.prototype.addOrSubtract=function(e){if(!this.field.equals(e.field))throw new jt("GenericGFPolys do not have same GenericGF field");if(this.isZero())return e;if(e.isZero())return this;var t=this.coefficients,r=e.coefficients;if(t.length>r.length){var i=t;t=r,r=i}var a=new Int32Array(r.length),o=r.length-t.length;br.arraycopy(r,0,a,0,o);for(var s=o;s<r.length;s++)a[s]=M1.addOrSubtract(t[s-o],r[s]);return new n(this.field,a)},n.prototype.multiply=function(e){if(!this.field.equals(e.field))throw new jt("GenericGFPolys do not have same GenericGF field");if(this.isZero()||e.isZero())return this.field.getZero();for(var t=this.coefficients,r=t.length,i=e.coefficients,a=i.length,o=new Int32Array(r+a-1),s=this.field,u=0;u<r;u++)for(var f=t[u],h=0;h<a;h++)o[u+h]=M1.addOrSubtract(o[u+h],s.multiply(f,i[h]));return new n(s,o)},n.prototype.multiplyScalar=function(e){if(e===0)return this.field.getZero();if(e===1)return this;for(var t=this.coefficients.length,r=this.field,i=new Int32Array(t),a=this.coefficients,o=0;o<t;o++)i[o]=r.multiply(a[o],e);return new n(r,i)},n.prototype.multiplyByMonomial=function(e,t){if(e<0)throw new jt;if(t===0)return this.field.getZero();for(var r=this.coefficients,i=r.length,a=new Int32Array(i+e),o=this.field,s=0;s<i;s++)a[s]=o.multiply(r[s],t);return new n(o,a)},n.prototype.divide=function(e){if(!this.field.equals(e.field))throw new jt("GenericGFPolys do not have same GenericGF field");if(e.isZero())throw new jt("Divide by 0");for(var t=this.field,r=t.getZero(),i=this,a=e.getCoefficient(e.getDegree()),o=t.inverse(a);i.getDegree()>=e.getDegree()&&!i.isZero();){var s=i.getDegree()-e.getDegree(),u=t.multiply(i.getCoefficient(i.getDegree()),o),f=e.multiplyByMonomial(s,u),h=t.buildMonomial(s,u);r=r.addOrSubtract(h),i=i.addOrSubtract(f)}return[r,i]},n.prototype.toString=function(){for(var e="",t=this.getDegree();t>=0;t--){var r=this.getCoefficient(t);if(r!==0){if(r<0?(e+=" - ",r=-r):e.length>0&&(e+=" + "),t===0||r!==1){var i=this.field.log(r);i===0?e+="1":i===1?e+="a":(e+="a^",e+=i)}t!==0&&(t===1?e+="x":(e+="x^",e+=t))}}return e},n}(),mM=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),pS=function(n){mM(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="ArithmeticException",e}(Ao),vM=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),xo=function(n){vM(e,n);function e(t,r,i){var a=n.call(this)||this;a.primitive=t,a.size=r,a.generatorBase=i;for(var o=new Int32Array(r),s=1,u=0;u<r;u++)o[u]=s,s*=2,s>=r&&(s^=t,s&=r-1);a.expTable=o;for(var f=new Int32Array(r),u=0;u<r-1;u++)f[o[u]]=u;return a.logTable=f,a.zero=new rf(a,Int32Array.from([0])),a.one=new rf(a,Int32Array.from([1])),a}return e.prototype.getZero=function(){return this.zero},e.prototype.getOne=function(){return this.one},e.prototype.buildMonomial=function(t,r){if(t<0)throw new jt;if(r===0)return this.zero;var i=new Int32Array(t+1);return i[0]=r,new rf(this,i)},e.prototype.inverse=function(t){if(t===0)throw new pS;return this.expTable[this.size-this.logTable[t]-1]},e.prototype.multiply=function(t,r){return t===0||r===0?0:this.expTable[(this.logTable[t]+this.logTable[r])%(this.size-1)]},e.prototype.getSize=function(){return this.size},e.prototype.getGeneratorBase=function(){return this.generatorBase},e.prototype.toString=function(){return"GF(0x"+gn.toHexString(this.primitive)+","+this.size+")"},e.prototype.equals=function(t){return t===this},e.AZTEC_DATA_12=new e(4201,4096,1),e.AZTEC_DATA_10=new e(1033,1024,1),e.AZTEC_DATA_6=new e(67,64,1),e.AZTEC_PARAM=new e(19,16,1),e.QR_CODE_FIELD_256=new e(285,256,0),e.DATA_MATRIX_FIELD_256=new e(301,256,1),e.AZTEC_DATA_8=e.DATA_MATRIX_FIELD_256,e.MAXICODE_FIELD_64=e.AZTEC_DATA_6,e}(M1),yM=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Lp=function(n){yM(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="ReedSolomonException",e}(Ao),xM=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),E0=function(n){xM(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="IllegalStateException",e}(Ao),Dm=function(){function n(e){this.field=e}return n.prototype.decode=function(e,t){for(var r=this.field,i=new rf(r,e),a=new Int32Array(t),o=!0,s=0;s<t;s++){var u=i.evaluateAt(r.exp(s+r.getGeneratorBase()));a[a.length-1-s]=u,u!==0&&(o=!1)}if(!o)for(var f=new rf(r,a),h=this.runEuclideanAlgorithm(r.buildMonomial(t,1),f,t),p=h[0],g=h[1],m=this.findErrorLocations(p),x=this.findErrorMagnitudes(g,m),s=0;s<m.length;s++){var w=e.length-1-r.log(m[s]);if(w<0)throw new Lp("Bad error location");e[w]=xo.addOrSubtract(e[w],x[s])}},n.prototype.runEuclideanAlgorithm=function(e,t,r){if(e.getDegree()<t.getDegree()){var i=e;e=t,t=i}for(var a=this.field,o=e,s=t,u=a.getZero(),f=a.getOne();s.getDegree()>=(r/2|0);){var h=o,p=u;if(o=s,u=f,o.isZero())throw new Lp("r_{i-1} was zero");s=h;for(var g=a.getZero(),m=o.getCoefficient(o.getDegree()),x=a.inverse(m);s.getDegree()>=o.getDegree()&&!s.isZero();){var w=s.getDegree()-o.getDegree(),I=a.multiply(s.getCoefficient(s.getDegree()),x);g=g.addOrSubtract(a.buildMonomial(w,I)),s=s.addOrSubtract(o.multiplyByMonomial(w,I))}if(f=g.multiply(u).addOrSubtract(p),s.getDegree()>=o.getDegree())throw new E0("Division algorithm failed to reduce polynomial?")}var C=f.getCoefficient(0);if(C===0)throw new Lp("sigmaTilde(0) was zero");var P=a.inverse(C),B=f.multiplyScalar(P),V=s.multiplyScalar(P);return[B,V]},n.prototype.findErrorLocations=function(e){var t=e.getDegree();if(t===1)return Int32Array.from([e.getCoefficient(1)]);for(var r=new Int32Array(t),i=0,a=this.field,o=1;o<a.getSize()&&i<t;o++)e.evaluateAt(o)===0&&(r[i]=a.inverse(o),i++);if(i!==t)throw new Lp("Error locator degree does not match number of roots");return r},n.prototype.findErrorMagnitudes=function(e,t){for(var r=t.length,i=new Int32Array(r),a=this.field,o=0;o<r;o++){for(var s=a.inverse(t[o]),u=1,f=0;f<r;f++)if(o!==f){var h=a.multiply(t[f],s),p=(h&1)===0?h|1:h&-2;u=a.multiply(u,p)}i[o]=a.multiply(e.evaluateAt(s),a.inverse(u)),a.getGeneratorBase()!==0&&(i[o]=a.multiply(i[o],s))}return i},n}(),sa;(function(n){n[n.UPPER=0]="UPPER",n[n.LOWER=1]="LOWER",n[n.MIXED=2]="MIXED",n[n.DIGIT=3]="DIGIT",n[n.PUNCT=4]="PUNCT",n[n.BINARY=5]="BINARY"})(sa||(sa={}));var S3=function(){function n(){}return n.prototype.decode=function(e){this.ddata=e;var t=e.getBits(),r=this.extractBits(t),i=this.correctBits(r),a=n.convertBoolArrayToByteArray(i),o=n.getEncodedData(i),s=new Nm(a,o,null,null);return s.setNumBits(i.length),s},n.highLevelDecode=function(e){return this.getEncodedData(e)},n.getEncodedData=function(e){for(var t=e.length,r=sa.UPPER,i=sa.UPPER,a="",o=0;o<t;)if(i===sa.BINARY){if(t-o<5)break;var s=n.readCode(e,o,5);if(o+=5,s===0){if(t-o<11)break;s=n.readCode(e,o,11)+31,o+=11}for(var u=0;u<s;u++){if(t-o<8){o=t;break}var f=n.readCode(e,o,8);a+=Dn.castAsNonUtf8Char(f),o+=8}i=r}else{var h=i===sa.DIGIT?4:5;if(t-o<h)break;var f=n.readCode(e,o,h);o+=h;var p=n.getCharacter(i,f);p.startsWith("CTRL_")?(r=i,i=n.getTable(p.charAt(5)),p.charAt(6)==="L"&&(r=i)):(a+=p,i=r)}return a},n.getTable=function(e){switch(e){case"L":return sa.LOWER;case"P":return sa.PUNCT;case"M":return sa.MIXED;case"D":return sa.DIGIT;case"B":return sa.BINARY;case"U":default:return sa.UPPER}},n.getCharacter=function(e,t){switch(e){case sa.UPPER:return n.UPPER_TABLE[t];case sa.LOWER:return n.LOWER_TABLE[t];case sa.MIXED:return n.MIXED_TABLE[t];case sa.PUNCT:return n.PUNCT_TABLE[t];case sa.DIGIT:return n.DIGIT_TABLE[t];default:throw new E0("Bad table")}},n.prototype.correctBits=function(e){var t,r;this.ddata.getNbLayers()<=2?(r=6,t=xo.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(r=8,t=xo.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(r=10,t=xo.AZTEC_DATA_10):(r=12,t=xo.AZTEC_DATA_12);var i=this.ddata.getNbDatablocks(),a=e.length/r;if(a<i)throw new pt;for(var o=e.length%r,s=new Int32Array(a),u=0;u<a;u++,o+=r)s[u]=n.readCode(e,o,r);try{var f=new Dm(t);f.decode(s,a-i)}catch(I){throw new pt(I)}for(var h=(1<<r)-1,p=0,u=0;u<i;u++){var g=s[u];if(g===0||g===h)throw new pt;(g===1||g===h-1)&&p++}for(var m=new Array(i*r-p),x=0,u=0;u<i;u++){var g=s[u];if(g===1||g===h-1)m.fill(g>1,x,x+r-1),x+=r-1;else for(var w=r-1;w>=0;--w)m[x++]=(g&1<<w)!==0}return m},n.prototype.extractBits=function(e){var t=this.ddata.isCompact(),r=this.ddata.getNbLayers(),i=(t?11:14)+r*4,a=new Int32Array(i),o=new Array(this.totalBitsInLayer(r,t));if(t)for(var s=0;s<a.length;s++)a[s]=s;else for(var u=i+1+2*gn.truncDivision(gn.truncDivision(i,2)-1,15),f=i/2,h=gn.truncDivision(u,2),s=0;s<f;s++){var p=s+gn.truncDivision(s,15);a[f-s-1]=h-p-1,a[f+s]=h+p+1}for(var s=0,g=0;s<r;s++){for(var m=(r-s)*4+(t?9:12),x=s*2,w=i-1-x,I=0;I<m;I++)for(var C=I*2,P=0;P<2;P++)o[g+C+P]=e.get(a[x+P],a[x+I]),o[g+2*m+C+P]=e.get(a[x+I],a[w-P]),o[g+4*m+C+P]=e.get(a[w-P],a[w-I]),o[g+6*m+C+P]=e.get(a[w-I],a[x+P]);g+=m*8}return o},n.readCode=function(e,t,r){for(var i=0,a=t;a<t+r;a++)i<<=1,e[a]&&(i|=1);return i},n.readByte=function(e,t){var r=e.length-t;return r>=8?n.readCode(e,t,8):n.readCode(e,t,r)<<8-r},n.convertBoolArrayToByteArray=function(e){for(var t=new Uint8Array((e.length+7)/8),r=0;r<t.length;r++)t[r]=n.readByte(e,8*r);return t},n.prototype.totalBitsInLayer=function(e,t){return((t?88:112)+16*e)*e},n.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],n.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],n.MIXED_TABLE=["CTRL_PS"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~","","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],n.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],n.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"],n}(),Hn=function(){function n(){}return n.round=function(e){return isNaN(e)?0:e<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:e>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:e+(e<0?-.5:.5)|0},n.distance=function(e,t,r,i){var a=e-r,o=t-i;return Math.sqrt(a*a+o*o)},n.sum=function(e){for(var t=0,r=0,i=e.length;r!==i;r++){var a=e[r];t+=a}return t},n}(),wy=function(){function n(){}return n.floatToIntBits=function(e){return e},n.MAX_VALUE=Number.MAX_SAFE_INTEGER,n}(),It=function(){function n(e,t){this.x=e,this.y=t}return n.prototype.getX=function(){return this.x},n.prototype.getY=function(){return this.y},n.prototype.equals=function(e){if(e instanceof n){var t=e;return this.x===t.x&&this.y===t.y}return!1},n.prototype.hashCode=function(){return 31*wy.floatToIntBits(this.x)+wy.floatToIntBits(this.y)},n.prototype.toString=function(){return"("+this.x+","+this.y+")"},n.orderBestPatterns=function(e){var t=this.distance(e[0],e[1]),r=this.distance(e[1],e[2]),i=this.distance(e[0],e[2]),a,o,s;if(r>=t&&r>=i?(o=e[0],a=e[1],s=e[2]):i>=r&&i>=t?(o=e[1],a=e[0],s=e[2]):(o=e[2],a=e[0],s=e[1]),this.crossProductZ(a,o,s)<0){var u=a;a=s,s=u}e[0]=a,e[1]=o,e[2]=s},n.distance=function(e,t){return Hn.distance(e.x,e.y,t.x,t.y)},n.crossProductZ=function(e,t,r){var i=t.x,a=t.y;return(r.x-i)*(e.y-a)-(r.y-a)*(e.x-i)},n}(),sx=function(){function n(e,t){this.bits=e,this.points=t}return n.prototype.getBits=function(){return this.bits},n.prototype.getPoints=function(){return this.points},n}(),_M=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),wM=function(n){_M(e,n);function e(t,r,i,a,o){var s=n.call(this,t,r)||this;return s.compact=i,s.nbDatablocks=a,s.nbLayers=o,s}return e.prototype.getNbLayers=function(){return this.nbLayers},e.prototype.getNbDatablocks=function(){return this.nbDatablocks},e.prototype.isCompact=function(){return this.compact},e}(sx),by=function(){function n(e,t,r,i){this.image=e,this.height=e.getHeight(),this.width=e.getWidth(),t==null&&(t=n.INIT_SIZE),r==null&&(r=e.getWidth()/2|0),i==null&&(i=e.getHeight()/2|0);var a=t/2|0;if(this.leftInit=r-a,this.rightInit=r+a,this.upInit=i-a,this.downInit=i+a,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new ze}return n.prototype.detect=function(){for(var e=this.leftInit,t=this.rightInit,r=this.upInit,i=this.downInit,a=!1,o=!0,s=!1,u=!1,f=!1,h=!1,p=!1,g=this.width,m=this.height;o;){o=!1;for(var x=!0;(x||!u)&&t<g;)x=this.containsBlackPoint(r,i,t,!1),x?(t++,o=!0,u=!0):u||t++;if(t>=g){a=!0;break}for(var w=!0;(w||!f)&&i<m;)w=this.containsBlackPoint(e,t,i,!0),w?(i++,o=!0,f=!0):f||i++;if(i>=m){a=!0;break}for(var I=!0;(I||!h)&&e>=0;)I=this.containsBlackPoint(r,i,e,!1),I?(e--,o=!0,h=!0):h||e--;if(e<0){a=!0;break}for(var C=!0;(C||!p)&&r>=0;)C=this.containsBlackPoint(e,t,r,!0),C?(r--,o=!0,p=!0):p||r--;if(r<0){a=!0;break}o&&(s=!0)}if(!a&&s){for(var P=t-e,B=null,V=1;B===null&&V<P;V++)B=this.getBlackPointOnSegment(e,i-V,e+V,i);if(B==null)throw new ze;for(var Y=null,V=1;Y===null&&V<P;V++)Y=this.getBlackPointOnSegment(e,r+V,e+V,r);if(Y==null)throw new ze;for(var q=null,V=1;q===null&&V<P;V++)q=this.getBlackPointOnSegment(t,r+V,t-V,r);if(q==null)throw new ze;for(var D=null,V=1;D===null&&V<P;V++)D=this.getBlackPointOnSegment(t,i-V,t-V,i);if(D==null)throw new ze;return this.centerEdges(D,B,q,Y)}else throw new ze},n.prototype.getBlackPointOnSegment=function(e,t,r,i){for(var a=Hn.round(Hn.distance(e,t,r,i)),o=(r-e)/a,s=(i-t)/a,u=this.image,f=0;f<a;f++){var h=Hn.round(e+f*o),p=Hn.round(t+f*s);if(u.get(h,p))return new It(h,p)}return null},n.prototype.centerEdges=function(e,t,r,i){var a=e.getX(),o=e.getY(),s=t.getX(),u=t.getY(),f=r.getX(),h=r.getY(),p=i.getX(),g=i.getY(),m=n.CORR;return a<this.width/2?[new It(p-m,g+m),new It(s+m,u+m),new It(f-m,h-m),new It(a+m,o-m)]:[new It(p+m,g+m),new It(s+m,u-m),new It(f-m,h+m),new It(a-m,o-m)]},n.prototype.containsBlackPoint=function(e,t,r,i){var a=this.image;if(i){for(var o=e;o<=t;o++)if(a.get(o,r))return!0}else for(var s=e;s<=t;s++)if(a.get(r,s))return!0;return!1},n.INIT_SIZE=10,n.CORR=1,n}(),C3=function(){function n(){}return n.checkAndNudgePoints=function(e,t){for(var r=e.getWidth(),i=e.getHeight(),a=!0,o=0;o<t.length&&a;o+=2){var s=Math.floor(t[o]),u=Math.floor(t[o+1]);if(s<-1||s>r||u<-1||u>i)throw new ze;a=!1,s===-1?(t[o]=0,a=!0):s===r&&(t[o]=r-1,a=!0),u===-1?(t[o+1]=0,a=!0):u===i&&(t[o+1]=i-1,a=!0)}a=!0;for(var o=t.length-2;o>=0&&a;o-=2){var s=Math.floor(t[o]),u=Math.floor(t[o+1]);if(s<-1||s>r||u<-1||u>i)throw new ze;a=!1,s===-1?(t[o]=0,a=!0):s===r&&(t[o]=r-1,a=!0),u===-1?(t[o+1]=0,a=!0):u===i&&(t[o+1]=i-1,a=!0)}},n}(),gS=function(){function n(e,t,r,i,a,o,s,u,f){this.a11=e,this.a21=t,this.a31=r,this.a12=i,this.a22=a,this.a32=o,this.a13=s,this.a23=u,this.a33=f}return n.quadrilateralToQuadrilateral=function(e,t,r,i,a,o,s,u,f,h,p,g,m,x,w,I){var C=n.quadrilateralToSquare(e,t,r,i,a,o,s,u),P=n.squareToQuadrilateral(f,h,p,g,m,x,w,I);return P.times(C)},n.prototype.transformPoints=function(e){for(var t=e.length,r=this.a11,i=this.a12,a=this.a13,o=this.a21,s=this.a22,u=this.a23,f=this.a31,h=this.a32,p=this.a33,g=0;g<t;g+=2){var m=e[g],x=e[g+1],w=a*m+u*x+p;e[g]=(r*m+o*x+f)/w,e[g+1]=(i*m+s*x+h)/w}},n.prototype.transformPointsWithValues=function(e,t){for(var r=this.a11,i=this.a12,a=this.a13,o=this.a21,s=this.a22,u=this.a23,f=this.a31,h=this.a32,p=this.a33,g=e.length,m=0;m<g;m++){var x=e[m],w=t[m],I=a*x+u*w+p;e[m]=(r*x+o*w+f)/I,t[m]=(i*x+s*w+h)/I}},n.squareToQuadrilateral=function(e,t,r,i,a,o,s,u){var f=e-r+a-s,h=t-i+o-u;if(f===0&&h===0)return new n(r-e,a-r,e,i-t,o-i,t,0,0,1);var p=r-a,g=s-a,m=i-o,x=u-o,w=p*x-g*m,I=(f*x-g*h)/w,C=(p*h-f*m)/w;return new n(r-e+I*r,s-e+C*s,e,i-t+I*i,u-t+C*u,t,I,C,1)},n.quadrilateralToSquare=function(e,t,r,i,a,o,s,u){return n.squareToQuadrilateral(e,t,r,i,a,o,s,u).buildAdjoint()},n.prototype.buildAdjoint=function(){return new n(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)},n.prototype.times=function(e){return new n(this.a11*e.a11+this.a21*e.a12+this.a31*e.a13,this.a11*e.a21+this.a21*e.a22+this.a31*e.a23,this.a11*e.a31+this.a21*e.a32+this.a31*e.a33,this.a12*e.a11+this.a22*e.a12+this.a32*e.a13,this.a12*e.a21+this.a22*e.a22+this.a32*e.a23,this.a12*e.a31+this.a22*e.a32+this.a32*e.a33,this.a13*e.a11+this.a23*e.a12+this.a33*e.a13,this.a13*e.a21+this.a23*e.a22+this.a33*e.a23,this.a13*e.a31+this.a23*e.a32+this.a33*e.a33)},n}(),bM=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),AM=function(n){bM(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.sampleGrid=function(t,r,i,a,o,s,u,f,h,p,g,m,x,w,I,C,P,B,V){var Y=gS.quadrilateralToQuadrilateral(a,o,s,u,f,h,p,g,m,x,w,I,C,P,B,V);return this.sampleGridWithTransform(t,r,i,Y)},e.prototype.sampleGridWithTransform=function(t,r,i,a){if(r<=0||i<=0)throw new ze;for(var o=new iu(r,i),s=new Float32Array(2*r),u=0;u<i;u++){for(var f=s.length,h=u+.5,p=0;p<f;p+=2)s[p]=p/2+.5,s[p+1]=h;a.transformPoints(s),C3.checkAndNudgePoints(t,s);try{for(var p=0;p<f;p+=2)t.get(Math.floor(s[p]),Math.floor(s[p+1]))&&o.set(p/2,u)}catch{throw new ze}}return o},e}(C3),lx=function(){function n(){}return n.setGridSampler=function(e){n.gridSampler=e},n.getInstance=function(){return n.gridSampler},n.gridSampler=new AM,n}(),go=function(){function n(e,t){this.x=e,this.y=t}return n.prototype.toResultPoint=function(){return new It(this.getX(),this.getY())},n.prototype.getX=function(){return this.x},n.prototype.getY=function(){return this.y},n}(),EM=function(){function n(e){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=e}return n.prototype.detect=function(){return this.detectMirror(!1)},n.prototype.detectMirror=function(e){var t=this.getMatrixCenter(),r=this.getBullsEyeCorners(t);if(e){var i=r[0];r[0]=r[2],r[2]=i}this.extractParameters(r);var a=this.sampleGrid(this.image,r[this.shift%4],r[(this.shift+1)%4],r[(this.shift+2)%4],r[(this.shift+3)%4]),o=this.getMatrixCornerPoints(r);return new wM(a,o,this.compact,this.nbDataBlocks,this.nbLayers)},n.prototype.extractParameters=function(e){if(!this.isValidPoint(e[0])||!this.isValidPoint(e[1])||!this.isValidPoint(e[2])||!this.isValidPoint(e[3]))throw new ze;var t=2*this.nbCenterLayers,r=new Int32Array([this.sampleLine(e[0],e[1],t),this.sampleLine(e[1],e[2],t),this.sampleLine(e[2],e[3],t),this.sampleLine(e[3],e[0],t)]);this.shift=this.getRotation(r,t);for(var i=0,a=0;a<4;a++){var o=r[(this.shift+a)%4];this.compact?(i<<=7,i+=o>>1&127):(i<<=10,i+=(o>>2&992)+(o>>1&31))}var s=this.getCorrectedParameterData(i,this.compact);this.compact?(this.nbLayers=(s>>6)+1,this.nbDataBlocks=(s&63)+1):(this.nbLayers=(s>>11)+1,this.nbDataBlocks=(s&2047)+1)},n.prototype.getRotation=function(e,t){var r=0;e.forEach(function(a,o,s){var u=(a>>t-2<<1)+(a&1);r=(r<<3)+u}),r=((r&1)<<11)+(r>>1);for(var i=0;i<4;i++)if(gn.bitCount(r^this.EXPECTED_CORNER_BITS[i])<=2)return i;throw new ze},n.prototype.getCorrectedParameterData=function(e,t){var r,i;t?(r=7,i=2):(r=10,i=4);for(var a=r-i,o=new Int32Array(r),s=r-1;s>=0;--s)o[s]=e&15,e>>=4;try{var u=new Dm(xo.AZTEC_PARAM);u.decode(o,a)}catch{throw new ze}for(var f=0,s=0;s<i;s++)f=(f<<4)+o[s];return f},n.prototype.getBullsEyeCorners=function(e){var t=e,r=e,i=e,a=e,o=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){var s=this.getFirstDifferent(t,o,1,-1),u=this.getFirstDifferent(r,o,1,1),f=this.getFirstDifferent(i,o,-1,1),h=this.getFirstDifferent(a,o,-1,-1);if(this.nbCenterLayers>2){var p=this.distancePoint(h,s)*this.nbCenterLayers/(this.distancePoint(a,t)*(this.nbCenterLayers+2));if(p<.75||p>1.25||!this.isWhiteOrBlackRectangle(s,u,f,h))break}t=s,r=u,i=f,a=h,o=!o}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new ze;this.compact=this.nbCenterLayers===5;var g=new It(t.getX()+.5,t.getY()-.5),m=new It(r.getX()+.5,r.getY()+.5),x=new It(i.getX()-.5,i.getY()+.5),w=new It(a.getX()-.5,a.getY()-.5);return this.expandSquare([g,m,x,w],2*this.nbCenterLayers-3,2*this.nbCenterLayers)},n.prototype.getMatrixCenter=function(){var e,t,r,i;try{var a=new by(this.image).detect();e=a[0],t=a[1],r=a[2],i=a[3]}catch{var o=this.image.getWidth()/2,s=this.image.getHeight()/2;e=this.getFirstDifferent(new go(o+7,s-7),!1,1,-1).toResultPoint(),t=this.getFirstDifferent(new go(o+7,s+7),!1,1,1).toResultPoint(),r=this.getFirstDifferent(new go(o-7,s+7),!1,-1,1).toResultPoint(),i=this.getFirstDifferent(new go(o-7,s-7),!1,-1,-1).toResultPoint()}var u=Hn.round((e.getX()+i.getX()+t.getX()+r.getX())/4),f=Hn.round((e.getY()+i.getY()+t.getY()+r.getY())/4);try{var a=new by(this.image,15,u,f).detect();e=a[0],t=a[1],r=a[2],i=a[3]}catch{e=this.getFirstDifferent(new go(u+7,f-7),!1,1,-1).toResultPoint(),t=this.getFirstDifferent(new go(u+7,f+7),!1,1,1).toResultPoint(),r=this.getFirstDifferent(new go(u-7,f+7),!1,-1,1).toResultPoint(),i=this.getFirstDifferent(new go(u-7,f-7),!1,-1,-1).toResultPoint()}return u=Hn.round((e.getX()+i.getX()+t.getX()+r.getX())/4),f=Hn.round((e.getY()+i.getY()+t.getY()+r.getY())/4),new go(u,f)},n.prototype.getMatrixCornerPoints=function(e){return this.expandSquare(e,2*this.nbCenterLayers,this.getDimension())},n.prototype.sampleGrid=function(e,t,r,i,a){var o=lx.getInstance(),s=this.getDimension(),u=s/2-this.nbCenterLayers,f=s/2+this.nbCenterLayers;return o.sampleGrid(e,s,s,u,u,f,u,f,f,u,f,t.getX(),t.getY(),r.getX(),r.getY(),i.getX(),i.getY(),a.getX(),a.getY())},n.prototype.sampleLine=function(e,t,r){for(var i=0,a=this.distanceResultPoint(e,t),o=a/r,s=e.getX(),u=e.getY(),f=o*(t.getX()-e.getX())/a,h=o*(t.getY()-e.getY())/a,p=0;p<r;p++)this.image.get(Hn.round(s+p*f),Hn.round(u+p*h))&&(i|=1<<r-p-1);return i},n.prototype.isWhiteOrBlackRectangle=function(e,t,r,i){var a=3;e=new go(e.getX()-a,e.getY()+a),t=new go(t.getX()-a,t.getY()-a),r=new go(r.getX()+a,r.getY()-a),i=new go(i.getX()+a,i.getY()+a);var o=this.getColor(i,e);if(o===0)return!1;var s=this.getColor(e,t);return s!==o||(s=this.getColor(t,r),s!==o)?!1:(s=this.getColor(r,i),s===o)},n.prototype.getColor=function(e,t){for(var r=this.distancePoint(e,t),i=(t.getX()-e.getX())/r,a=(t.getY()-e.getY())/r,o=0,s=e.getX(),u=e.getY(),f=this.image.get(e.getX(),e.getY()),h=Math.ceil(r),p=0;p<h;p++)s+=i,u+=a,this.image.get(Hn.round(s),Hn.round(u))!==f&&o++;var g=o/r;return g>.1&&g<.9?0:g<=.1===f?1:-1},n.prototype.getFirstDifferent=function(e,t,r,i){for(var a=e.getX()+r,o=e.getY()+i;this.isValid(a,o)&&this.image.get(a,o)===t;)a+=r,o+=i;for(a-=r,o-=i;this.isValid(a,o)&&this.image.get(a,o)===t;)a+=r;for(a-=r;this.isValid(a,o)&&this.image.get(a,o)===t;)o+=i;return o-=i,new go(a,o)},n.prototype.expandSquare=function(e,t,r){var i=r/(2*t),a=e[0].getX()-e[2].getX(),o=e[0].getY()-e[2].getY(),s=(e[0].getX()+e[2].getX())/2,u=(e[0].getY()+e[2].getY())/2,f=new It(s+i*a,u+i*o),h=new It(s-i*a,u-i*o);a=e[1].getX()-e[3].getX(),o=e[1].getY()-e[3].getY(),s=(e[1].getX()+e[3].getX())/2,u=(e[1].getY()+e[3].getY())/2;var p=new It(s+i*a,u+i*o),g=new It(s-i*a,u-i*o),m=[f,p,h,g];return m},n.prototype.isValid=function(e,t){return e>=0&&e<this.image.getWidth()&&t>0&&t<this.image.getHeight()},n.prototype.isValidPoint=function(e){var t=Hn.round(e.getX()),r=Hn.round(e.getY());return this.isValid(t,r)},n.prototype.distancePoint=function(e,t){return Hn.distance(e.getX(),e.getY(),t.getX(),t.getY())},n.prototype.distanceResultPoint=function(e,t){return Hn.distance(e.getX(),e.getY(),t.getX(),t.getY())},n.prototype.getDimension=function(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(gn.truncDivision(this.nbLayers-4,8)+1)+15},n}(),Ay=function(){function n(){}return n.prototype.decode=function(e,t){t===void 0&&(t=null);var r=null,i=new EM(e.getBlackMatrix()),a=null,o=null;try{var s=i.detectMirror(!1);a=s.getPoints(),this.reportFoundResultPoints(t,a),o=new S3().decode(s)}catch(p){r=p}if(o==null)try{var s=i.detectMirror(!0);a=s.getPoints(),this.reportFoundResultPoints(t,a),o=new S3().decode(s)}catch(p){throw r??p}var u=new Fa(o.getText(),o.getRawBytes(),o.getNumBits(),a,Bt.AZTEC,br.currentTimeMillis()),f=o.getByteSegments();f!=null&&u.putMetadata(ha.BYTE_SEGMENTS,f);var h=o.getECLevel();return h!=null&&u.putMetadata(ha.ERROR_CORRECTION_LEVEL,h),u},n.prototype.reportFoundResultPoints=function(e,t){if(e!=null){var r=e.get(kr.NEED_RESULT_POINT_CALLBACK);r!=null&&t.forEach(function(i,a,o){r.foundPossibleResultPoint(i)})}},n.prototype.reset=function(){},n}(),SM=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();(function(n){SM(e,n);function e(t){return t===void 0&&(t=500),n.call(this,new Ay,t)||this}return e})(Ld);var Mi=function(){function n(){}return n.prototype.decode=function(e,t){try{return this.doDecode(e,t)}catch{var r=t&&t.get(kr.TRY_HARDER)===!0;if(r&&e.isRotateSupported()){var i=e.rotateCounterClockwise(),a=this.doDecode(i,t),o=a.getResultMetadata(),s=270;o!==null&&o.get(ha.ORIENTATION)===!0&&(s=s+o.get(ha.ORIENTATION)%360),a.putMetadata(ha.ORIENTATION,s);var u=a.getResultPoints();if(u!==null)for(var f=i.getHeight(),h=0;h<u.length;h++)u[h]=new It(f-u[h].getY()-1,u[h].getX());return a}else throw new ze}},n.prototype.reset=function(){},n.prototype.doDecode=function(e,t){var r=e.getWidth(),i=e.getHeight(),a=new Zi(r),o=t&&t.get(kr.TRY_HARDER)===!0,s=Math.max(1,i>>(o?8:5)),u;o?u=i:u=15;for(var f=Math.trunc(i/2),h=0;h<u;h++){var p=Math.trunc((h+1)/2),g=(h&1)===0,m=f+s*(g?p:-p);if(m<0||m>=i)break;try{a=e.getBlackRow(m,a)}catch{continue}for(var x=function(P){if(P===1&&(a.reverse(),t&&t.get(kr.NEED_RESULT_POINT_CALLBACK)===!0)){var B=new Map;t.forEach(function(q,D){return B.set(D,q)}),B.delete(kr.NEED_RESULT_POINT_CALLBACK),t=B}try{var V=w.decodeRow(m,a,t);if(P===1){V.putMetadata(ha.ORIENTATION,180);var Y=V.getResultPoints();Y!==null&&(Y[0]=new It(r-Y[0].getX()-1,Y[0].getY()),Y[1]=new It(r-Y[1].getX()-1,Y[1].getY()))}return{value:V}}catch{}},w=this,I=0;I<2;I++){var C=x(I);if(typeof C=="object")return C.value}}throw new ze},n.recordPattern=function(e,t,r){for(var i=r.length,a=0;a<i;a++)r[a]=0;var o=e.getSize();if(t>=o)throw new ze;for(var s=!e.get(t),u=0,f=t;f<o;){if(e.get(f)!==s)r[u]++;else{if(++u===i)break;r[u]=1,s=!s}f++}if(!(u===i||u===i-1&&f===o))throw new ze},n.recordPatternInReverse=function(e,t,r){for(var i=r.length,a=e.get(t);t>0&&i>=0;)e.get(--t)!==a&&(i--,a=!a);if(i>=0)throw new ze;n.recordPattern(e,t+1,r)},n.patternMatchVariance=function(e,t,r){for(var i=e.length,a=0,o=0,s=0;s<i;s++)a+=e[s],o+=t[s];if(a<o)return Number.POSITIVE_INFINITY;var u=a/o;r*=u;for(var f=0,h=0;h<i;h++){var p=e[h],g=t[h]*u,m=p>g?p-g:g-p;if(m>r)return Number.POSITIVE_INFINITY;f+=m}return f/a},n}(),CM=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),T3=function(n){CM(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.findStartPattern=function(t){for(var r=t.getSize(),i=t.getNextSet(0),a=0,o=Int32Array.from([0,0,0,0,0,0]),s=i,u=!1,f=6,h=i;h<r;h++)if(t.get(h)!==u)o[a]++;else{if(a===f-1){for(var p=e.MAX_AVG_VARIANCE,g=-1,m=e.CODE_START_A;m<=e.CODE_START_C;m++){var x=Mi.patternMatchVariance(o,e.CODE_PATTERNS[m],e.MAX_INDIVIDUAL_VARIANCE);x<p&&(p=x,g=m)}if(g>=0&&t.isRange(Math.max(0,s-(h-s)/2),s,!1))return Int32Array.from([s,h,g]);s+=o[0]+o[1],o=o.slice(2,o.length),o[a-1]=0,o[a]=0,a--}else a++;o[a]=1,u=!u}throw new ze},e.decodeCode=function(t,r,i){Mi.recordPattern(t,i,r);for(var a=e.MAX_AVG_VARIANCE,o=-1,s=0;s<e.CODE_PATTERNS.length;s++){var u=e.CODE_PATTERNS[s],f=this.patternMatchVariance(r,u,e.MAX_INDIVIDUAL_VARIANCE);f<a&&(a=f,o=s)}if(o>=0)return o;throw new ze},e.prototype.decodeRow=function(t,r,i){var a=i&&i.get(kr.ASSUME_GS1)===!0,o=e.findStartPattern(r),s=o[2],u=0,f=new Uint8Array(20);f[u++]=s;var h;switch(s){case e.CODE_START_A:h=e.CODE_CODE_A;break;case e.CODE_START_B:h=e.CODE_CODE_B;break;case e.CODE_START_C:h=e.CODE_CODE_C;break;default:throw new pt}for(var p=!1,g=!1,m="",x=o[0],w=o[1],I=Int32Array.from([0,0,0,0,0,0]),C=0,P=0,B=s,V=0,Y=!0,q=!1,D=!1;!p;){var A=g;switch(g=!1,C=P,P=e.decodeCode(r,I,w),f[u++]=P,P!==e.CODE_STOP&&(Y=!0),P!==e.CODE_STOP&&(V++,B+=V*P),x=w,w+=I.reduce(function(z,ee){return z+ee},0),P){case e.CODE_START_A:case e.CODE_START_B:case e.CODE_START_C:throw new pt}switch(h){case e.CODE_CODE_A:if(P<64)D===q?m+=String.fromCharCode(32+P):m+=String.fromCharCode(32+P+128),D=!1;else if(P<96)D===q?m+=String.fromCharCode(P-64):m+=String.fromCharCode(P+64),D=!1;else switch(P!==e.CODE_STOP&&(Y=!1),P){case e.CODE_FNC_1:a&&(m.length===0?m+="]C1":m+="");break;case e.CODE_FNC_2:case e.CODE_FNC_3:break;case e.CODE_FNC_4_A:!q&&D?(q=!0,D=!1):q&&D?(q=!1,D=!1):D=!0;break;case e.CODE_SHIFT:g=!0,h=e.CODE_CODE_B;break;case e.CODE_CODE_B:h=e.CODE_CODE_B;break;case e.CODE_CODE_C:h=e.CODE_CODE_C;break;case e.CODE_STOP:p=!0;break}break;case e.CODE_CODE_B:if(P<96)D===q?m+=String.fromCharCode(32+P):m+=String.fromCharCode(32+P+128),D=!1;else switch(P!==e.CODE_STOP&&(Y=!1),P){case e.CODE_FNC_1:a&&(m.length===0?m+="]C1":m+="");break;case e.CODE_FNC_2:case e.CODE_FNC_3:break;case e.CODE_FNC_4_B:!q&&D?(q=!0,D=!1):q&&D?(q=!1,D=!1):D=!0;break;case e.CODE_SHIFT:g=!0,h=e.CODE_CODE_A;break;case e.CODE_CODE_A:h=e.CODE_CODE_A;break;case e.CODE_CODE_C:h=e.CODE_CODE_C;break;case e.CODE_STOP:p=!0;break}break;case e.CODE_CODE_C:if(P<100)P<10&&(m+="0"),m+=P;else switch(P!==e.CODE_STOP&&(Y=!1),P){case e.CODE_FNC_1:a&&(m.length===0?m+="]C1":m+="");break;case e.CODE_CODE_A:h=e.CODE_CODE_A;break;case e.CODE_CODE_B:h=e.CODE_CODE_B;break;case e.CODE_STOP:p=!0;break}break}A&&(h=h===e.CODE_CODE_A?e.CODE_CODE_B:e.CODE_CODE_A)}var T=w-x;if(w=r.getNextUnset(w),!r.isRange(w,Math.min(r.getSize(),w+(w-x)/2),!1))throw new ze;if(B-=V*C,B%103!==C)throw new Qi;var k=m.length;if(k===0)throw new ze;k>0&&Y&&(h===e.CODE_CODE_C?m=m.substring(0,k-2):m=m.substring(0,k-1));for(var R=(o[1]+o[0])/2,L=x+T/2,j=f.length,H=new Uint8Array(j),ne=0;ne<j;ne++)H[ne]=f[ne];var U=[new It(R,t),new It(L,t)];return new Fa(m,H,0,U,Bt.CODE_128,new Date().getTime())},e.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],e.MAX_AVG_VARIANCE=.25,e.MAX_INDIVIDUAL_VARIANCE=.7,e.CODE_SHIFT=98,e.CODE_CODE_C=99,e.CODE_CODE_B=100,e.CODE_CODE_A=101,e.CODE_FNC_1=102,e.CODE_FNC_2=97,e.CODE_FNC_3=96,e.CODE_FNC_4_A=101,e.CODE_FNC_4_B=100,e.CODE_START_A=103,e.CODE_START_B=104,e.CODE_START_C=105,e.CODE_STOP=106,e}(Mi),TM=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),mv=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},I3=function(n){TM(e,n);function e(t,r){t===void 0&&(t=!1),r===void 0&&(r=!1);var i=n.call(this)||this;return i.usingCheckDigit=t,i.extendedMode=r,i.decodeRowResult="",i.counters=new Int32Array(9),i}return e.prototype.decodeRow=function(t,r,i){var a,o,s,u,f=this.counters;f.fill(0),this.decodeRowResult="";var h=e.findAsteriskPattern(r,f),p=r.getNextSet(h[1]),g=r.getSize(),m,x;do{e.recordPattern(r,p,f);var w=e.toNarrowWidePattern(f);if(w<0)throw new ze;m=e.patternToChar(w),this.decodeRowResult+=m,x=p;try{for(var I=(a=void 0,mv(f)),C=I.next();!C.done;C=I.next()){var P=C.value;p+=P}}catch(j){a={error:j}}finally{try{C&&!C.done&&(o=I.return)&&o.call(I)}finally{if(a)throw a.error}}p=r.getNextSet(p)}while(m!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var B=0;try{for(var V=mv(f),Y=V.next();!Y.done;Y=V.next()){var P=Y.value;B+=P}}catch(j){s={error:j}}finally{try{Y&&!Y.done&&(u=V.return)&&u.call(V)}finally{if(s)throw s.error}}var q=p-x-B;if(p!==g&&q*2<B)throw new ze;if(this.usingCheckDigit){for(var D=this.decodeRowResult.length-1,A=0,T=0;T<D;T++)A+=e.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(T));if(this.decodeRowResult.charAt(D)!==e.ALPHABET_STRING.charAt(A%43))throw new Qi;this.decodeRowResult=this.decodeRowResult.substring(0,D)}if(this.decodeRowResult.length===0)throw new ze;var k;this.extendedMode?k=e.decodeExtended(this.decodeRowResult):k=this.decodeRowResult;var R=(h[1]+h[0])/2,L=x+B/2;return new Fa(k,null,0,[new It(R,t),new It(L,t)],Bt.CODE_39,new Date().getTime())},e.findAsteriskPattern=function(t,r){for(var i=t.getSize(),a=t.getNextSet(0),o=0,s=a,u=!1,f=r.length,h=a;h<i;h++)if(t.get(h)!==u)r[o]++;else{if(o===f-1){if(this.toNarrowWidePattern(r)===e.ASTERISK_ENCODING&&t.isRange(Math.max(0,s-Math.floor((h-s)/2)),s,!1))return[s,h];s+=r[0]+r[1],r.copyWithin(0,2,2+o-1),r[o-1]=0,r[o]=0,o--}else o++;r[o]=1,u=!u}throw new ze},e.toNarrowWidePattern=function(t){var r,i,a=t.length,o=0,s;do{var u=2147483647;try{for(var f=(r=void 0,mv(t)),h=f.next();!h.done;h=f.next()){var p=h.value;p<u&&p>o&&(u=p)}}catch(w){r={error:w}}finally{try{h&&!h.done&&(i=f.return)&&i.call(f)}finally{if(r)throw r.error}}o=u,s=0;for(var g=0,m=0,x=0;x<a;x++){var p=t[x];p>o&&(m|=1<<a-1-x,s++,g+=p)}if(s===3){for(var x=0;x<a&&s>0;x++){var p=t[x];if(p>o&&(s--,p*2>=g))return-1}return m}}while(s>3);return-1},e.patternToChar=function(t){for(var r=0;r<e.CHARACTER_ENCODINGS.length;r++)if(e.CHARACTER_ENCODINGS[r]===t)return e.ALPHABET_STRING.charAt(r);if(t===e.ASTERISK_ENCODING)return"*";throw new ze},e.decodeExtended=function(t){for(var r=t.length,i="",a=0;a<r;a++){var o=t.charAt(a);if(o==="+"||o==="$"||o==="%"||o==="/"){var s=t.charAt(a+1),u="\0";switch(o){case"+":if(s>="A"&&s<="Z")u=String.fromCharCode(s.charCodeAt(0)+32);else throw new pt;break;case"$":if(s>="A"&&s<="Z")u=String.fromCharCode(s.charCodeAt(0)-64);else throw new pt;break;case"%":if(s>="A"&&s<="E")u=String.fromCharCode(s.charCodeAt(0)-38);else if(s>="F"&&s<="J")u=String.fromCharCode(s.charCodeAt(0)-11);else if(s>="K"&&s<="O")u=String.fromCharCode(s.charCodeAt(0)+16);else if(s>="P"&&s<="T")u=String.fromCharCode(s.charCodeAt(0)+43);else if(s==="U")u="\0";else if(s==="V")u="@";else if(s==="W")u="`";else if(s==="X"||s==="Y"||s==="Z")u="";else throw new pt;break;case"/":if(s>="A"&&s<="O")u=String.fromCharCode(s.charCodeAt(0)-32);else if(s==="Z")u=":";else throw new pt;break}i+=u,a++}else i+=o}return i},e.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",e.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],e.ASTERISK_ENCODING=148,e}(Mi),IM=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),vv=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},R3=function(n){IM(e,n);function e(){var t=n.call(this)||this;return t.decodeRowResult="",t.counters=new Int32Array(6),t}return e.prototype.decodeRow=function(t,r,i){var a,o,s,u,f=this.findAsteriskPattern(r),h=r.getNextSet(f[1]),p=r.getSize(),g=this.counters;g.fill(0),this.decodeRowResult="";var m,x;do{e.recordPattern(r,h,g);var w=this.toPattern(g);if(w<0)throw new ze;m=this.patternToChar(w),this.decodeRowResult+=m,x=h;try{for(var I=(a=void 0,vv(g)),C=I.next();!C.done;C=I.next()){var P=C.value;h+=P}}catch(T){a={error:T}}finally{try{C&&!C.done&&(o=I.return)&&o.call(I)}finally{if(a)throw a.error}}h=r.getNextSet(h)}while(m!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var B=0;try{for(var V=vv(g),Y=V.next();!Y.done;Y=V.next()){var P=Y.value;B+=P}}catch(T){s={error:T}}finally{try{Y&&!Y.done&&(u=V.return)&&u.call(V)}finally{if(s)throw s.error}}if(h===p||!r.get(h))throw new ze;if(this.decodeRowResult.length<2)throw new ze;this.checkChecksums(this.decodeRowResult),this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-2);var q=this.decodeExtended(this.decodeRowResult),D=(f[1]+f[0])/2,A=x+B/2;return new Fa(q,null,0,[new It(D,t),new It(A,t)],Bt.CODE_93,new Date().getTime())},e.prototype.findAsteriskPattern=function(t){var r=t.getSize(),i=t.getNextSet(0);this.counters.fill(0);for(var a=this.counters,o=i,s=!1,u=a.length,f=0,h=i;h<r;h++)if(t.get(h)!==s)a[f]++;else{if(f===u-1){if(this.toPattern(a)===e.ASTERISK_ENCODING)return new Int32Array([o,h]);o+=a[0]+a[1],a.copyWithin(0,2,2+f-1),a[f-1]=0,a[f]=0,f--}else f++;a[f]=1,s=!s}throw new ze},e.prototype.toPattern=function(t){var r,i,a=0;try{for(var o=vv(t),s=o.next();!s.done;s=o.next()){var u=s.value;a+=u}}catch(x){r={error:x}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}for(var f=0,h=t.length,p=0;p<h;p++){var g=Math.round(t[p]*9/a);if(g<1||g>4)return-1;if((p&1)===0)for(var m=0;m<g;m++)f=f<<1|1;else f<<=g}return f},e.prototype.patternToChar=function(t){for(var r=0;r<e.CHARACTER_ENCODINGS.length;r++)if(e.CHARACTER_ENCODINGS[r]===t)return e.ALPHABET_STRING.charAt(r);throw new ze},e.prototype.decodeExtended=function(t){for(var r=t.length,i="",a=0;a<r;a++){var o=t.charAt(a);if(o>="a"&&o<="d"){if(a>=r-1)throw new pt;var s=t.charAt(a+1),u="\0";switch(o){case"d":if(s>="A"&&s<="Z")u=String.fromCharCode(s.charCodeAt(0)+32);else throw new pt;break;case"a":if(s>="A"&&s<="Z")u=String.fromCharCode(s.charCodeAt(0)-64);else throw new pt;break;case"b":if(s>="A"&&s<="E")u=String.fromCharCode(s.charCodeAt(0)-38);else if(s>="F"&&s<="J")u=String.fromCharCode(s.charCodeAt(0)-11);else if(s>="K"&&s<="O")u=String.fromCharCode(s.charCodeAt(0)+16);else if(s>="P"&&s<="T")u=String.fromCharCode(s.charCodeAt(0)+43);else if(s==="U")u="\0";else if(s==="V")u="@";else if(s==="W")u="`";else if(s>="X"&&s<="Z")u="";else throw new pt;break;case"c":if(s>="A"&&s<="O")u=String.fromCharCode(s.charCodeAt(0)-32);else if(s==="Z")u=":";else throw new pt;break}i+=u,a++}else i+=o}return i},e.prototype.checkChecksums=function(t){var r=t.length;this.checkOneChecksum(t,r-2,20),this.checkOneChecksum(t,r-1,15)},e.prototype.checkOneChecksum=function(t,r,i){for(var a=1,o=0,s=r-1;s>=0;s--)o+=a*e.ALPHABET_STRING.indexOf(t.charAt(s)),++a>i&&(a=1);if(t.charAt(r)!==e.ALPHABET_STRING[o%47])throw new Qi},e.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%abcd*",e.CHARACTER_ENCODINGS=[276,328,324,322,296,292,290,336,274,266,424,420,418,404,402,394,360,356,354,308,282,344,332,326,300,278,436,434,428,422,406,410,364,358,310,314,302,468,466,458,366,374,430,294,474,470,306,350],e.ASTERISK_ENCODING=e.CHARACTER_ENCODINGS[47],e}(Mi),RM=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),NM=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},N3=function(n){RM(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.narrowLineWidth=-1,t}return e.prototype.decodeRow=function(t,r,i){var a,o,s=this.decodeStart(r),u=this.decodeEnd(r),f=new cn;e.decodeMiddle(r,s[1],u[0],f);var h=f.toString(),p=null;i!=null&&(p=i.get(kr.ALLOWED_LENGTHS)),p==null&&(p=e.DEFAULT_ALLOWED_LENGTHS);var g=h.length,m=!1,x=0;try{for(var w=NM(p),I=w.next();!I.done;I=w.next()){var C=I.value;if(g===C){m=!0;break}C>x&&(x=C)}}catch(V){a={error:V}}finally{try{I&&!I.done&&(o=w.return)&&o.call(w)}finally{if(a)throw a.error}}if(!m&&g>x&&(m=!0),!m)throw new pt;var P=[new It(s[1],t),new It(u[0],t)],B=new Fa(h,null,0,P,Bt.ITF,new Date().getTime());return B},e.decodeMiddle=function(t,r,i,a){var o=new Int32Array(10),s=new Int32Array(5),u=new Int32Array(5);for(o.fill(0),s.fill(0),u.fill(0);r<i;){Mi.recordPattern(t,r,o);for(var f=0;f<5;f++){var h=2*f;s[f]=o[h],u[f]=o[h+1]}var p=e.decodeDigit(s);a.append(p.toString()),p=this.decodeDigit(u),a.append(p.toString()),o.forEach(function(g){r+=g})}},e.prototype.decodeStart=function(t){var r=e.skipWhiteSpace(t),i=e.findGuardPattern(t,r,e.START_PATTERN);return this.narrowLineWidth=(i[1]-i[0])/4,this.validateQuietZone(t,i[0]),i},e.prototype.validateQuietZone=function(t,r){var i=this.narrowLineWidth*10;i=i<r?i:r;for(var a=r-1;i>0&&a>=0&&!t.get(a);a--)i--;if(i!==0)throw new ze},e.skipWhiteSpace=function(t){var r=t.getSize(),i=t.getNextSet(0);if(i===r)throw new ze;return i},e.prototype.decodeEnd=function(t){t.reverse();try{var r=e.skipWhiteSpace(t),i=void 0;try{i=e.findGuardPattern(t,r,e.END_PATTERN_REVERSED[0])}catch(o){o instanceof ze&&(i=e.findGuardPattern(t,r,e.END_PATTERN_REVERSED[1]))}this.validateQuietZone(t,i[0]);var a=i[0];return i[0]=t.getSize()-i[1],i[1]=t.getSize()-a,i}finally{t.reverse()}},e.findGuardPattern=function(t,r,i){var a=i.length,o=new Int32Array(a),s=t.getSize(),u=!1,f=0,h=r;o.fill(0);for(var p=r;p<s;p++)if(t.get(p)!==u)o[f]++;else{if(f===a-1){if(Mi.patternMatchVariance(o,i,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return[h,p];h+=o[0]+o[1],br.arraycopy(o,2,o,0,f-1),o[f-1]=0,o[f]=0,f--}else f++;o[f]=1,u=!u}throw new ze},e.decodeDigit=function(t){for(var r=e.MAX_AVG_VARIANCE,i=-1,a=e.PATTERNS.length,o=0;o<a;o++){var s=e.PATTERNS[o],u=Mi.patternMatchVariance(t,s,e.MAX_INDIVIDUAL_VARIANCE);u<r?(r=u,i=o):u===r&&(i=-1)}if(i>=0)return i%10;throw new ze},e.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],e.MAX_AVG_VARIANCE=.38,e.MAX_INDIVIDUAL_VARIANCE=.5,e.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],e.START_PATTERN=Int32Array.from([1,1,1,1]),e.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])],e}(Mi),DM=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Sd=function(n){DM(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.decodeRowStringBuffer="",t}return e.findStartGuardPattern=function(t){for(var r=!1,i,a=0,o=Int32Array.from([0,0,0]);!r;){o=Int32Array.from([0,0,0]),i=e.findGuardPattern(t,a,!1,this.START_END_PATTERN,o);var s=i[0];a=i[1];var u=s-(a-s);u>=0&&(r=t.isRange(u,s,!1))}return i},e.checkChecksum=function(t){return e.checkStandardUPCEANChecksum(t)},e.checkStandardUPCEANChecksum=function(t){var r=t.length;if(r===0)return!1;var i=parseInt(t.charAt(r-1),10);return e.getStandardUPCEANChecksum(t.substring(0,r-1))===i},e.getStandardUPCEANChecksum=function(t){for(var r=t.length,i=0,a=r-1;a>=0;a-=2){var o=t.charAt(a).charCodeAt(0)-48;if(o<0||o>9)throw new pt;i+=o}i*=3;for(var a=r-2;a>=0;a-=2){var o=t.charAt(a).charCodeAt(0)-48;if(o<0||o>9)throw new pt;i+=o}return(1e3-i)%10},e.decodeEnd=function(t,r){return e.findGuardPattern(t,r,!1,e.START_END_PATTERN,new Int32Array(e.START_END_PATTERN.length).fill(0))},e.findGuardPatternWithoutCounters=function(t,r,i,a){return this.findGuardPattern(t,r,i,a,new Int32Array(a.length))},e.findGuardPattern=function(t,r,i,a,o){var s=t.getSize();r=i?t.getNextUnset(r):t.getNextSet(r);for(var u=0,f=r,h=a.length,p=i,g=r;g<s;g++)if(t.get(g)!==p)o[u]++;else{if(u===h-1){if(Mi.patternMatchVariance(o,a,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return Int32Array.from([f,g]);f+=o[0]+o[1];for(var m=o.slice(2,o.length),x=0;x<u-1;x++)o[x]=m[x];o[u-1]=0,o[u]=0,u--}else u++;o[u]=1,p=!p}throw new ze},e.decodeDigit=function(t,r,i,a){this.recordPattern(t,i,r);for(var o=this.MAX_AVG_VARIANCE,s=-1,u=a.length,f=0;f<u;f++){var h=a[f],p=Mi.patternMatchVariance(r,h,e.MAX_INDIVIDUAL_VARIANCE);p<o&&(o=p,s=f)}if(s>=0)return s;throw new ze},e.MAX_AVG_VARIANCE=.48,e.MAX_INDIVIDUAL_VARIANCE=.7,e.START_END_PATTERN=Int32Array.from([1,1,1]),e.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),e.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),e.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])],e}(Mi),OM=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},PM=function(){function n(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return n.prototype.decodeRow=function(e,t,r){var i=this.decodeRowStringBuffer,a=this.decodeMiddle(t,r,i),o=i.toString(),s=n.parseExtensionString(o),u=[new It((r[0]+r[1])/2,e),new It(a,e)],f=new Fa(o,null,0,u,Bt.UPC_EAN_EXTENSION,new Date().getTime());return s!=null&&f.putAllMetadata(s),f},n.prototype.decodeMiddle=function(e,t,r){var i,a,o=this.decodeMiddleCounters;o[0]=0,o[1]=0,o[2]=0,o[3]=0;for(var s=e.getSize(),u=t[1],f=0,h=0;h<5&&u<s;h++){var p=Sd.decodeDigit(e,o,u,Sd.L_AND_G_PATTERNS);r+=String.fromCharCode(48+p%10);try{for(var g=(i=void 0,OM(o)),m=g.next();!m.done;m=g.next()){var x=m.value;u+=x}}catch(I){i={error:I}}finally{try{m&&!m.done&&(a=g.return)&&a.call(g)}finally{if(i)throw i.error}}p>=10&&(f|=1<<4-h),h!==4&&(u=e.getNextSet(u),u=e.getNextUnset(u))}if(r.length!==5)throw new ze;var w=this.determineCheckDigit(f);if(n.extensionChecksum(r.toString())!==w)throw new ze;return u},n.extensionChecksum=function(e){for(var t=e.length,r=0,i=t-2;i>=0;i-=2)r+=e.charAt(i).charCodeAt(0)-48;r*=3;for(var i=t-1;i>=0;i-=2)r+=e.charAt(i).charCodeAt(0)-48;return r*=3,r%10},n.prototype.determineCheckDigit=function(e){for(var t=0;t<10;t++)if(e===this.CHECK_DIGIT_ENCODINGS[t])return t;throw new ze},n.parseExtensionString=function(e){if(e.length!==5)return null;var t=n.parseExtension5String(e);return t==null?null:new Map([[ha.SUGGESTED_PRICE,t]])},n.parseExtension5String=function(e){var t;switch(e.charAt(0)){case"0":t="£";break;case"5":t="$";break;case"9":switch(e){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}t="";break;default:t="";break}var r=parseInt(e.substring(1)),i=(r/100).toString(),a=r%100,o=a<10?"0"+a:a.toString();return t+i+"."+o},n}(),LM=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},kM=function(){function n(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return n.prototype.decodeRow=function(e,t,r){var i=this.decodeRowStringBuffer,a=this.decodeMiddle(t,r,i),o=i.toString(),s=n.parseExtensionString(o),u=[new It((r[0]+r[1])/2,e),new It(a,e)],f=new Fa(o,null,0,u,Bt.UPC_EAN_EXTENSION,new Date().getTime());return s!=null&&f.putAllMetadata(s),f},n.prototype.decodeMiddle=function(e,t,r){var i,a,o=this.decodeMiddleCounters;o[0]=0,o[1]=0,o[2]=0,o[3]=0;for(var s=e.getSize(),u=t[1],f=0,h=0;h<2&&u<s;h++){var p=Sd.decodeDigit(e,o,u,Sd.L_AND_G_PATTERNS);r+=String.fromCharCode(48+p%10);try{for(var g=(i=void 0,LM(o)),m=g.next();!m.done;m=g.next()){var x=m.value;u+=x}}catch(w){i={error:w}}finally{try{m&&!m.done&&(a=g.return)&&a.call(g)}finally{if(i)throw i.error}}p>=10&&(f|=1<<1-h),h!==1&&(u=e.getNextSet(u),u=e.getNextUnset(u))}if(r.length!==2)throw new ze;if(parseInt(r.toString())%4!==f)throw new ze;return u},n.parseExtensionString=function(e){return e.length!==2?null:new Map([[ha.ISSUE_NUMBER,parseInt(e)]])},n}(),MM=function(){function n(){}return n.decodeRow=function(e,t,r){var i=Sd.findGuardPattern(t,r,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{var a=new PM;return a.decodeRow(e,t,i)}catch{var o=new kM;return o.decodeRow(e,t,i)}},n.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]),n}(),BM=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Pi=function(n){BM(e,n);function e(){var t=n.call(this)||this;t.decodeRowStringBuffer="",e.L_AND_G_PATTERNS=e.L_PATTERNS.map(function(s){return Int32Array.from(s)});for(var r=10;r<20;r++){for(var i=e.L_PATTERNS[r-10],a=new Int32Array(i.length),o=0;o<i.length;o++)a[o]=i[i.length-o-1];e.L_AND_G_PATTERNS[r]=a}return t}return e.prototype.decodeRow=function(t,r,i){var a=e.findStartGuardPattern(r),o=i==null?null:i.get(kr.NEED_RESULT_POINT_CALLBACK);if(o!=null){var s=new It((a[0]+a[1])/2,t);o.foundPossibleResultPoint(s)}var u=this.decodeMiddle(r,a,this.decodeRowStringBuffer),f=u.rowOffset,h=u.resultString;if(o!=null){var p=new It(f,t);o.foundPossibleResultPoint(p)}var g=e.decodeEnd(r,f);if(o!=null){var m=new It((g[0]+g[1])/2,t);o.foundPossibleResultPoint(m)}var x=g[1],w=x+(x-g[0]);if(w>=r.getSize()||!r.isRange(x,w,!1))throw new ze;var I=h.toString();if(I.length<8)throw new pt;if(!e.checkChecksum(I))throw new Qi;var C=(a[1]+a[0])/2,P=(g[1]+g[0])/2,B=this.getBarcodeFormat(),V=[new It(C,t),new It(P,t)],Y=new Fa(I,null,0,V,B,new Date().getTime()),q=0;try{var D=MM.decodeRow(t,r,g[1]);Y.putMetadata(ha.UPC_EAN_EXTENSION,D.getText()),Y.putAllMetadata(D.getResultMetadata()),Y.addResultPoints(D.getResultPoints()),q=D.getText().length}catch{}var A=i==null?null:i.get(kr.ALLOWED_EAN_EXTENSIONS);if(A!=null){var T=!1;for(var k in A)if(q.toString()===k){T=!0;break}if(!T)throw new ze}return B===Bt.EAN_13||Bt.UPC_A,Y},e.checkChecksum=function(t){return e.checkStandardUPCEANChecksum(t)},e.checkStandardUPCEANChecksum=function(t){var r=t.length;if(r===0)return!1;var i=parseInt(t.charAt(r-1),10);return e.getStandardUPCEANChecksum(t.substring(0,r-1))===i},e.getStandardUPCEANChecksum=function(t){for(var r=t.length,i=0,a=r-1;a>=0;a-=2){var o=t.charAt(a).charCodeAt(0)-48;if(o<0||o>9)throw new pt;i+=o}i*=3;for(var a=r-2;a>=0;a-=2){var o=t.charAt(a).charCodeAt(0)-48;if(o<0||o>9)throw new pt;i+=o}return(1e3-i)%10},e.decodeEnd=function(t,r){return e.findGuardPattern(t,r,!1,e.START_END_PATTERN,new Int32Array(e.START_END_PATTERN.length).fill(0))},e}(Sd),jM=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),D3=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Ey=function(n){jM(e,n);function e(){var t=n.call(this)||this;return t.decodeMiddleCounters=Int32Array.from([0,0,0,0]),t}return e.prototype.decodeMiddle=function(t,r,i){var a,o,s,u,f=this.decodeMiddleCounters;f[0]=0,f[1]=0,f[2]=0,f[3]=0;for(var h=t.getSize(),p=r[1],g=0,m=0;m<6&&p<h;m++){var x=Pi.decodeDigit(t,f,p,Pi.L_AND_G_PATTERNS);i+=String.fromCharCode(48+x%10);try{for(var w=(a=void 0,D3(f)),I=w.next();!I.done;I=w.next()){var C=I.value;p+=C}}catch(Y){a={error:Y}}finally{try{I&&!I.done&&(o=w.return)&&o.call(w)}finally{if(a)throw a.error}}x>=10&&(g|=1<<5-m)}i=e.determineFirstDigit(i,g);var P=Pi.findGuardPattern(t,p,!0,Pi.MIDDLE_PATTERN,new Int32Array(Pi.MIDDLE_PATTERN.length).fill(0));p=P[1];for(var m=0;m<6&&p<h;m++){var x=Pi.decodeDigit(t,f,p,Pi.L_PATTERNS);i+=String.fromCharCode(48+x);try{for(var B=(s=void 0,D3(f)),V=B.next();!V.done;V=B.next()){var C=V.value;p+=C}}catch(D){s={error:D}}finally{try{V&&!V.done&&(u=B.return)&&u.call(B)}finally{if(s)throw s.error}}}return{rowOffset:p,resultString:i}},e.prototype.getBarcodeFormat=function(){return Bt.EAN_13},e.determineFirstDigit=function(t,r){for(var i=0;i<10;i++)if(r===this.FIRST_DIGIT_ENCODINGS[i])return t=String.fromCharCode(48+i)+t,t;throw new ze},e.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26],e}(Pi),FM=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),O3=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},P3=function(n){FM(e,n);function e(){var t=n.call(this)||this;return t.decodeMiddleCounters=Int32Array.from([0,0,0,0]),t}return e.prototype.decodeMiddle=function(t,r,i){var a,o,s,u,f=this.decodeMiddleCounters;f[0]=0,f[1]=0,f[2]=0,f[3]=0;for(var h=t.getSize(),p=r[1],g=0;g<4&&p<h;g++){var m=Pi.decodeDigit(t,f,p,Pi.L_PATTERNS);i+=String.fromCharCode(48+m);try{for(var x=(a=void 0,O3(f)),w=x.next();!w.done;w=x.next()){var I=w.value;p+=I}}catch(V){a={error:V}}finally{try{w&&!w.done&&(o=x.return)&&o.call(x)}finally{if(a)throw a.error}}}var C=Pi.findGuardPattern(t,p,!0,Pi.MIDDLE_PATTERN,new Int32Array(Pi.MIDDLE_PATTERN.length).fill(0));p=C[1];for(var g=0;g<4&&p<h;g++){var m=Pi.decodeDigit(t,f,p,Pi.L_PATTERNS);i+=String.fromCharCode(48+m);try{for(var P=(s=void 0,O3(f)),B=P.next();!B.done;B=P.next()){var I=B.value;p+=I}}catch(q){s={error:q}}finally{try{B&&!B.done&&(u=P.return)&&u.call(P)}finally{if(s)throw s.error}}}return{rowOffset:p,resultString:i}},e.prototype.getBarcodeFormat=function(){return Bt.EAN_8},e}(Pi),UM=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),L3=function(n){UM(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.ean13Reader=new Ey,t}return e.prototype.getBarcodeFormat=function(){return Bt.UPC_A},e.prototype.decode=function(t,r){return this.maybeReturnResult(this.ean13Reader.decode(t))},e.prototype.decodeRow=function(t,r,i){return this.maybeReturnResult(this.ean13Reader.decodeRow(t,r,i))},e.prototype.decodeMiddle=function(t,r,i){return this.ean13Reader.decodeMiddle(t,r,i)},e.prototype.maybeReturnResult=function(t){var r=t.getText();if(r.charAt(0)==="0"){var i=new Fa(r.substring(1),null,null,t.getResultPoints(),Bt.UPC_A);return t.getResultMetadata()!=null&&i.putAllMetadata(t.getResultMetadata()),i}else throw new ze},e.prototype.reset=function(){this.ean13Reader.reset()},e}(Pi),VM=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),zM=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},k3=function(n){VM(e,n);function e(){var t=n.call(this)||this;return t.decodeMiddleCounters=new Int32Array(4),t}return e.prototype.decodeMiddle=function(t,r,i){var a,o,s=this.decodeMiddleCounters.map(function(I){return I});s[0]=0,s[1]=0,s[2]=0,s[3]=0;for(var u=t.getSize(),f=r[1],h=0,p=0;p<6&&f<u;p++){var g=e.decodeDigit(t,s,f,e.L_AND_G_PATTERNS);i+=String.fromCharCode(48+g%10);try{for(var m=(a=void 0,zM(s)),x=m.next();!x.done;x=m.next()){var w=x.value;f+=w}}catch(I){a={error:I}}finally{try{x&&!x.done&&(o=m.return)&&o.call(m)}finally{if(a)throw a.error}}g>=10&&(h|=1<<5-p)}return e.determineNumSysAndCheckDigit(new cn(i),h),f},e.prototype.decodeEnd=function(t,r){return e.findGuardPatternWithoutCounters(t,r,!0,e.MIDDLE_END_PATTERN)},e.prototype.checkChecksum=function(t){return Pi.checkChecksum(e.convertUPCEtoUPCA(t))},e.determineNumSysAndCheckDigit=function(t,r){for(var i=0;i<=1;i++)for(var a=0;a<10;a++)if(r===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[i][a]){t.insert(0,"0"+i),t.append("0"+a);return}throw ze.getNotFoundInstance()},e.prototype.getBarcodeFormat=function(){return Bt.UPC_E},e.convertUPCEtoUPCA=function(t){var r=t.slice(1,7).split("").map(function(o){return o.charCodeAt(0)}),i=new cn;i.append(t.charAt(0));var a=r[5];switch(a){case 0:case 1:case 2:i.appendChars(r,0,2),i.append(a),i.append("0000"),i.appendChars(r,2,3);break;case 3:i.appendChars(r,0,3),i.append("00000"),i.appendChars(r,3,2);break;case 4:i.appendChars(r,0,4),i.append("00000"),i.append(r[4]);break;default:i.appendChars(r,0,5),i.append("0000"),i.append(a);break}return t.length>=8&&i.append(t.charAt(7)),i.toString()},e.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),e.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,1])],e}(Pi),qM=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),M3=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},yv=function(n){qM(e,n);function e(t){var r=n.call(this)||this,i=t==null?null:t.get(kr.POSSIBLE_FORMATS),a=[];return i!=null&&(i.indexOf(Bt.EAN_13)>-1&&a.push(new Ey),i.indexOf(Bt.UPC_A)>-1&&a.push(new L3),i.indexOf(Bt.EAN_8)>-1&&a.push(new P3),i.indexOf(Bt.UPC_E)>-1&&a.push(new k3)),a.length===0&&(a.push(new Ey),a.push(new L3),a.push(new P3),a.push(new k3)),r.readers=a,r}return e.prototype.decodeRow=function(t,r,i){var a,o;try{for(var s=M3(this.readers),u=s.next();!u.done;u=s.next()){var f=u.value;try{var h=f.decodeRow(t,r,i),p=h.getBarcodeFormat()===Bt.EAN_13&&h.getText().charAt(0)==="0",g=i==null?null:i.get(kr.POSSIBLE_FORMATS),m=g==null||g.includes(Bt.UPC_A);if(p&&m){var x=h.getRawBytes(),w=new Fa(h.getText().substring(1),x,x?x.length:null,h.getResultPoints(),Bt.UPC_A);return w.putAllMetadata(h.getResultMetadata()),w}return h}catch{}}}catch(I){a={error:I}}finally{try{u&&!u.done&&(o=s.return)&&o.call(s)}finally{if(a)throw a.error}}throw new ze},e.prototype.reset=function(){var t,r;try{for(var i=M3(this.readers),a=i.next();!a.done;a=i.next()){var o=a.value;o.reset()}}catch(s){t={error:s}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}},e}(Mi),HM=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),WM=function(n){HM(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.CODA_BAR_CHAR_SET={nnnnnww:"0",nnnnwwn:"1",nnnwnnw:"2",wwnnnnn:"3",nnwnnwn:"4",wnnnnwn:"5",nwnnnnw:"6",nwnnwnn:"7",nwwnnnn:"8",wnnwnnn:"9",nnnwwnn:"-",nnwwnnn:"$",wnnnwnw:":",wnwnnnw:"/",wnwnwnn:".",nnwwwww:"+",nnwwnwn:"A",nwnwnnw:"B",nnnwnww:"C",nnnwwwn:"D"},t}return e.prototype.decodeRow=function(t,r,i){var a=this.getValidRowData(r);if(!a)throw new ze;var o=this.codaBarDecodeRow(a.row);if(!o)throw new ze;return new Fa(o,null,0,[new It(a.left,t),new It(a.right,t)],Bt.CODABAR,new Date().getTime())},e.prototype.getValidRowData=function(t){var r=t.toArray(),i=r.indexOf(!0);if(i===-1)return null;var a=r.lastIndexOf(!0);if(a<=i)return null;r=r.slice(i,a+1);for(var o=[],s=r[0],u=1,f=1;f<r.length;f++)r[f]===s?u++:(s=r[f],o.push(u),u=1);return o.push(u),o.length<23&&(o.length+1)%8!==0?null:{row:o,left:i,right:a}},e.prototype.codaBarDecodeRow=function(t){for(var r=[],i=Math.ceil(t.reduce(function(u,f){return(u+f)/2},0));t.length>0;){var a=t.splice(0,8).splice(0,7),o=a.map(function(u){return u<i?"n":"w"}).join("");if(this.CODA_BAR_CHAR_SET[o]===void 0)return null;r.push(this.CODA_BAR_CHAR_SET[o])}var s=r.join("");return this.validCodaBarString(s)?s:null},e.prototype.validCodaBarString=function(t){var r=/^[A-D].{1,}[A-D]$/;return r.test(t)},e}(Mi),GM=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),$M=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Wf=function(n){GM(e,n);function e(){var t=n.call(this)||this;return t.decodeFinderCounters=new Int32Array(4),t.dataCharacterCounters=new Int32Array(8),t.oddRoundingErrors=new Array(4),t.evenRoundingErrors=new Array(4),t.oddCounts=new Array(t.dataCharacterCounters.length/2),t.evenCounts=new Array(t.dataCharacterCounters.length/2),t}return e.prototype.getDecodeFinderCounters=function(){return this.decodeFinderCounters},e.prototype.getDataCharacterCounters=function(){return this.dataCharacterCounters},e.prototype.getOddRoundingErrors=function(){return this.oddRoundingErrors},e.prototype.getEvenRoundingErrors=function(){return this.evenRoundingErrors},e.prototype.getOddCounts=function(){return this.oddCounts},e.prototype.getEvenCounts=function(){return this.evenCounts},e.prototype.parseFinderValue=function(t,r){for(var i=0;i<r.length;i++)if(Mi.patternMatchVariance(t,r[i],e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return i;throw new ze},e.count=function(t){return Hn.sum(new Int32Array(t))},e.increment=function(t,r){for(var i=0,a=r[0],o=1;o<t.length;o++)r[o]>a&&(a=r[o],i=o);t[i]++},e.decrement=function(t,r){for(var i=0,a=r[0],o=1;o<t.length;o++)r[o]<a&&(a=r[o],i=o);t[i]--},e.isFinderPattern=function(t){var r,i,a=t[0]+t[1],o=a+t[2]+t[3],s=a/o;if(s>=e.MIN_FINDER_PATTERN_RATIO&&s<=e.MAX_FINDER_PATTERN_RATIO){var u=Number.MAX_SAFE_INTEGER,f=Number.MIN_SAFE_INTEGER;try{for(var h=$M(t),p=h.next();!p.done;p=h.next()){var g=p.value;g>f&&(f=g),g<u&&(u=g)}}catch(m){r={error:m}}finally{try{p&&!p.done&&(i=h.return)&&i.call(h)}finally{if(r)throw r.error}}return f<10*u}return!1},e.MAX_AVG_VARIANCE=.2,e.MAX_INDIVIDUAL_VARIANCE=.45,e.MIN_FINDER_PATTERN_RATIO=9.5/12,e.MAX_FINDER_PATTERN_RATIO=12.5/14,e}(Mi),kg=function(){function n(e,t){this.value=e,this.checksumPortion=t}return n.prototype.getValue=function(){return this.value},n.prototype.getChecksumPortion=function(){return this.checksumPortion},n.prototype.toString=function(){return this.value+"("+this.checksumPortion+")"},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.value===t.value&&this.checksumPortion===t.checksumPortion},n.prototype.hashCode=function(){return this.value^this.checksumPortion},n}(),mS=function(){function n(e,t,r,i,a){this.value=e,this.startEnd=t,this.value=e,this.startEnd=t,this.resultPoints=new Array,this.resultPoints.push(new It(r,a)),this.resultPoints.push(new It(i,a))}return n.prototype.getValue=function(){return this.value},n.prototype.getStartEnd=function(){return this.startEnd},n.prototype.getResultPoints=function(){return this.resultPoints},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.value===t.value},n.prototype.hashCode=function(){return this.value},n}(),XM=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},id=function(){function n(){}return n.getRSSvalue=function(e,t,r){var i,a,o=0;try{for(var s=XM(e),u=s.next();!u.done;u=s.next()){var f=u.value;o+=f}}catch(P){i={error:P}}finally{try{u&&!u.done&&(a=s.return)&&a.call(s)}finally{if(i)throw i.error}}for(var h=0,p=0,g=e.length,m=0;m<g-1;m++){var x=void 0;for(x=1,p|=1<<m;x<e[m];x++,p&=~(1<<m)){var w=n.combins(o-x-1,g-m-2);if(r&&p===0&&o-x-(g-m-1)>=g-m-1&&(w-=n.combins(o-x-(g-m),g-m-2)),g-m-1>1){for(var I=0,C=o-x-(g-m-2);C>t;C--)I+=n.combins(o-x-C-1,g-m-3);w-=I*(g-1-m)}else o-x>t&&w--;h+=w}o-=x}return h},n.combins=function(e,t){var r,i;e-t>t?(i=t,r=e-t):(i=e-t,r=t);for(var a=1,o=1,s=e;s>r;s--)a*=s,o<=i&&(a/=o,o++);for(;o<=i;)a/=o,o++;return a},n}(),YM=function(){function n(){}return n.buildBitArray=function(e){var t=e.length*2-1;e[e.length-1].getRightChar()==null&&(t-=1);for(var r=12*t,i=new Zi(r),a=0,o=e[0],s=o.getRightChar().getValue(),u=11;u>=0;--u)(s&1<<u)!==0&&i.set(a),a++;for(var u=1;u<e.length;++u){for(var f=e[u],h=f.getLeftChar().getValue(),p=11;p>=0;--p)(h&1<<p)!==0&&i.set(a),a++;if(f.getRightChar()!==null)for(var g=f.getRightChar().getValue(),p=11;p>=0;--p)(g&1<<p)!==0&&i.set(a),a++}return i},n}(),zf=function(){function n(e,t){t?this.decodedInformation=null:(this.finished=e,this.decodedInformation=t)}return n.prototype.getDecodedInformation=function(){return this.decodedInformation},n.prototype.isFinished=function(){return this.finished},n}(),ux=function(){function n(e){this.newPosition=e}return n.prototype.getNewPosition=function(){return this.newPosition},n}(),KM=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Js=function(n){KM(e,n);function e(t,r){var i=n.call(this,t)||this;return i.value=r,i}return e.prototype.getValue=function(){return this.value},e.prototype.isFNC1=function(){return this.value===e.FNC1},e.FNC1="$",e}(ux),QM=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),qf=function(n){QM(e,n);function e(t,r,i){var a=n.call(this,t)||this;return i?(a.remaining=!0,a.remainingValue=a.remainingValue):(a.remaining=!1,a.remainingValue=0),a.newString=r,a}return e.prototype.getNewString=function(){return this.newString},e.prototype.isRemaining=function(){return this.remaining},e.prototype.getRemainingValue=function(){return this.remainingValue},e}(ux),ZM=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Gh=function(n){ZM(e,n);function e(t,r,i){var a=n.call(this,t)||this;if(r<0||r>10||i<0||i>10)throw new pt;return a.firstDigit=r,a.secondDigit=i,a}return e.prototype.getFirstDigit=function(){return this.firstDigit},e.prototype.getSecondDigit=function(){return this.secondDigit},e.prototype.getValue=function(){return this.firstDigit*10+this.secondDigit},e.prototype.isFirstDigitFNC1=function(){return this.firstDigit===e.FNC1},e.prototype.isSecondDigitFNC1=function(){return this.secondDigit===e.FNC1},e.prototype.isAnyFNC1=function(){return this.firstDigit===e.FNC1||this.secondDigit===e.FNC1},e.FNC1=10,e}(ux),kp=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},JM=function(){function n(){}return n.parseFieldsInGeneralPurpose=function(e){var t,r,i,a,o,s,u,f;if(!e)return null;if(e.length<2)throw new ze;var h=e.substring(0,2);try{for(var p=kp(n.TWO_DIGIT_DATA_LENGTH),g=p.next();!g.done;g=p.next()){var m=g.value;if(m[0]===h)return m[1]===n.VARIABLE_LENGTH?n.processVariableAI(2,m[2],e):n.processFixedAI(2,m[1],e)}}catch(q){t={error:q}}finally{try{g&&!g.done&&(r=p.return)&&r.call(p)}finally{if(t)throw t.error}}if(e.length<3)throw new ze;var x=e.substring(0,3);try{for(var w=kp(n.THREE_DIGIT_DATA_LENGTH),I=w.next();!I.done;I=w.next()){var m=I.value;if(m[0]===x)return m[1]===n.VARIABLE_LENGTH?n.processVariableAI(3,m[2],e):n.processFixedAI(3,m[1],e)}}catch(q){i={error:q}}finally{try{I&&!I.done&&(a=w.return)&&a.call(w)}finally{if(i)throw i.error}}try{for(var C=kp(n.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH),P=C.next();!P.done;P=C.next()){var m=P.value;if(m[0]===x)return m[1]===n.VARIABLE_LENGTH?n.processVariableAI(4,m[2],e):n.processFixedAI(4,m[1],e)}}catch(q){o={error:q}}finally{try{P&&!P.done&&(s=C.return)&&s.call(C)}finally{if(o)throw o.error}}if(e.length<4)throw new ze;var B=e.substring(0,4);try{for(var V=kp(n.FOUR_DIGIT_DATA_LENGTH),Y=V.next();!Y.done;Y=V.next()){var m=Y.value;if(m[0]===B)return m[1]===n.VARIABLE_LENGTH?n.processVariableAI(4,m[2],e):n.processFixedAI(4,m[1],e)}}catch(q){u={error:q}}finally{try{Y&&!Y.done&&(f=V.return)&&f.call(V)}finally{if(u)throw u.error}}throw new ze},n.processFixedAI=function(e,t,r){if(r.length<e)throw new ze;var i=r.substring(0,e);if(r.length<e+t)throw new ze;var a=r.substring(e,e+t),o=r.substring(e+t),s="("+i+")"+a,u=n.parseFieldsInGeneralPurpose(o);return u==null?s:s+u},n.processVariableAI=function(e,t,r){var i=r.substring(0,e),a;r.length<e+t?a=r.length:a=e+t;var o=r.substring(e,a),s=r.substring(a),u="("+i+")"+o,f=n.parseFieldsInGeneralPurpose(s);return f==null?u:u+f},n.VARIABLE_LENGTH=[],n.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",n.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",n.VARIABLE_LENGTH,20],["22",n.VARIABLE_LENGTH,29],["30",n.VARIABLE_LENGTH,8],["37",n.VARIABLE_LENGTH,8],["90",n.VARIABLE_LENGTH,30],["91",n.VARIABLE_LENGTH,30],["92",n.VARIABLE_LENGTH,30],["93",n.VARIABLE_LENGTH,30],["94",n.VARIABLE_LENGTH,30],["95",n.VARIABLE_LENGTH,30],["96",n.VARIABLE_LENGTH,30],["97",n.VARIABLE_LENGTH,3],["98",n.VARIABLE_LENGTH,30],["99",n.VARIABLE_LENGTH,30]],n.THREE_DIGIT_DATA_LENGTH=[["240",n.VARIABLE_LENGTH,30],["241",n.VARIABLE_LENGTH,30],["242",n.VARIABLE_LENGTH,6],["250",n.VARIABLE_LENGTH,30],["251",n.VARIABLE_LENGTH,30],["253",n.VARIABLE_LENGTH,17],["254",n.VARIABLE_LENGTH,20],["400",n.VARIABLE_LENGTH,30],["401",n.VARIABLE_LENGTH,30],["402",17],["403",n.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",n.VARIABLE_LENGTH,20],["421",n.VARIABLE_LENGTH,15],["422",3],["423",n.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],n.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",n.VARIABLE_LENGTH,15],["391",n.VARIABLE_LENGTH,18],["392",n.VARIABLE_LENGTH,15],["393",n.VARIABLE_LENGTH,18],["703",n.VARIABLE_LENGTH,30]],n.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",n.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",n.VARIABLE_LENGTH,20],["8003",n.VARIABLE_LENGTH,30],["8004",n.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",n.VARIABLE_LENGTH,30],["8008",n.VARIABLE_LENGTH,12],["8018",18],["8020",n.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",n.VARIABLE_LENGTH,70],["8200",n.VARIABLE_LENGTH,70]],n}(),ng=function(){function n(e){this.buffer=new cn,this.information=e}return n.prototype.decodeAllCodes=function(e,t){var r=t,i=null;do{var a=this.decodeGeneralPurposeField(r,i),o=JM.parseFieldsInGeneralPurpose(a.getNewString());if(o!=null&&e.append(o),a.isRemaining()?i=""+a.getRemainingValue():i=null,r===a.getNewPosition())break;r=a.getNewPosition()}while(!0);return e.toString()},n.prototype.isStillNumeric=function(e){if(e+7>this.information.getSize())return e+4<=this.information.getSize();for(var t=e;t<e+3;++t)if(this.information.get(t))return!0;return this.information.get(e+3)},n.prototype.decodeNumeric=function(e){if(e+7>this.information.getSize()){var t=this.extractNumericValueFromBitArray(e,4);return t===0?new Gh(this.information.getSize(),Gh.FNC1,Gh.FNC1):new Gh(this.information.getSize(),t-1,Gh.FNC1)}var r=this.extractNumericValueFromBitArray(e,7),i=(r-8)/11,a=(r-8)%11;return new Gh(e+7,i,a)},n.prototype.extractNumericValueFromBitArray=function(e,t){return n.extractNumericValueFromBitArray(this.information,e,t)},n.extractNumericValueFromBitArray=function(e,t,r){for(var i=0,a=0;a<r;++a)e.get(t+a)&&(i|=1<<r-a-1);return i},n.prototype.decodeGeneralPurposeField=function(e,t){this.buffer.setLengthToZero(),t!=null&&this.buffer.append(t),this.current.setPosition(e);var r=this.parseBlocks();return r!=null&&r.isRemaining()?new qf(this.current.getPosition(),this.buffer.toString(),r.getRemainingValue()):new qf(this.current.getPosition(),this.buffer.toString())},n.prototype.parseBlocks=function(){var e,t;do{var r=this.current.getPosition();this.current.isAlpha()?(t=this.parseAlphaBlock(),e=t.isFinished()):this.current.isIsoIec646()?(t=this.parseIsoIec646Block(),e=t.isFinished()):(t=this.parseNumericBlock(),e=t.isFinished());var i=r!==this.current.getPosition();if(!i&&!e)break}while(!e);return t.getDecodedInformation()},n.prototype.parseNumericBlock=function(){for(;this.isStillNumeric(this.current.getPosition());){var e=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFirstDigitFNC1()){var t=void 0;return e.isSecondDigitFNC1()?t=new qf(this.current.getPosition(),this.buffer.toString()):t=new qf(this.current.getPosition(),this.buffer.toString(),e.getSecondDigit()),new zf(!0,t)}if(this.buffer.append(e.getFirstDigit()),e.isSecondDigitFNC1()){var t=new qf(this.current.getPosition(),this.buffer.toString());return new zf(!0,t)}this.buffer.append(e.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new zf(!1)},n.prototype.parseIsoIec646Block=function(){for(;this.isStillIsoIec646(this.current.getPosition());){var e=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var t=new qf(this.current.getPosition(),this.buffer.toString());return new zf(!0,t)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new zf(!1)},n.prototype.parseAlphaBlock=function(){for(;this.isStillAlpha(this.current.getPosition());){var e=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var t=new qf(this.current.getPosition(),this.buffer.toString());return new zf(!0,t)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new zf(!1)},n.prototype.isStillIsoIec646=function(e){if(e+5>this.information.getSize())return!1;var t=this.extractNumericValueFromBitArray(e,5);if(t>=5&&t<16)return!0;if(e+7>this.information.getSize())return!1;var r=this.extractNumericValueFromBitArray(e,7);if(r>=64&&r<116)return!0;if(e+8>this.information.getSize())return!1;var i=this.extractNumericValueFromBitArray(e,8);return i>=232&&i<253},n.prototype.decodeIsoIec646=function(e){var t=this.extractNumericValueFromBitArray(e,5);if(t===15)return new Js(e+5,Js.FNC1);if(t>=5&&t<15)return new Js(e+5,"0"+(t-5));var r=this.extractNumericValueFromBitArray(e,7);if(r>=64&&r<90)return new Js(e+7,""+(r+1));if(r>=90&&r<116)return new Js(e+7,""+(r+7));var i=this.extractNumericValueFromBitArray(e,8),a;switch(i){case 232:a="!";break;case 233:a='"';break;case 234:a="%";break;case 235:a="&";break;case 236:a="'";break;case 237:a="(";break;case 238:a=")";break;case 239:a="*";break;case 240:a="+";break;case 241:a=",";break;case 242:a="-";break;case 243:a=".";break;case 244:a="/";break;case 245:a=":";break;case 246:a=";";break;case 247:a="<";break;case 248:a="=";break;case 249:a=">";break;case 250:a="?";break;case 251:a="_";break;case 252:a=" ";break;default:throw new pt}return new Js(e+8,a)},n.prototype.isStillAlpha=function(e){if(e+5>this.information.getSize())return!1;var t=this.extractNumericValueFromBitArray(e,5);if(t>=5&&t<16)return!0;if(e+6>this.information.getSize())return!1;var r=this.extractNumericValueFromBitArray(e,6);return r>=16&&r<63},n.prototype.decodeAlphanumeric=function(e){var t=this.extractNumericValueFromBitArray(e,5);if(t===15)return new Js(e+5,Js.FNC1);if(t>=5&&t<15)return new Js(e+5,"0"+(t-5));var r=this.extractNumericValueFromBitArray(e,6);if(r>=32&&r<58)return new Js(e+6,""+(r+33));var i;switch(r){case 58:i="*";break;case 59:i=",";break;case 60:i="-";break;case 61:i=".";break;case 62:i="/";break;default:throw new E0("Decoding invalid alphanumeric value: "+r)}return new Js(e+6,i)},n.prototype.isAlphaTo646ToAlphaLatch=function(e){if(e+1>this.information.getSize())return!1;for(var t=0;t<5&&t+e<this.information.getSize();++t)if(t===2){if(!this.information.get(e+2))return!1}else if(this.information.get(e+t))return!1;return!0},n.prototype.isAlphaOr646ToNumericLatch=function(e){if(e+3>this.information.getSize())return!1;for(var t=e;t<e+3;++t)if(this.information.get(t))return!1;return!0},n.prototype.isNumericToAlphaNumericLatch=function(e){if(e+1>this.information.getSize())return!1;for(var t=0;t<4&&t+e<this.information.getSize();++t)if(this.information.get(e+t))return!1;return!0},n}(),vS=function(){function n(e){this.information=e,this.generalDecoder=new ng(e)}return n.prototype.getInformation=function(){return this.information},n.prototype.getGeneralDecoder=function(){return this.generalDecoder},n}(),eB=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),al=function(n){eB(e,n);function e(t){return n.call(this,t)||this}return e.prototype.encodeCompressedGtin=function(t,r){t.append("(01)");var i=t.length();t.append("9"),this.encodeCompressedGtinWithoutAI(t,r,i)},e.prototype.encodeCompressedGtinWithoutAI=function(t,r,i){for(var a=0;a<4;++a){var o=this.getGeneralDecoder().extractNumericValueFromBitArray(r+10*a,10);o/100===0&&t.append("0"),o/10===0&&t.append("0"),t.append(o)}e.appendCheckDigit(t,i)},e.appendCheckDigit=function(t,r){for(var i=0,a=0;a<13;a++){var o=t.charAt(a+r).charCodeAt(0)-48;i+=(a&1)===0?3*o:o}i=10-i%10,i===10&&(i=0),t.append(i)},e.GTIN_SIZE=40,e}(vS),tB=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),nB=function(n){tB(e,n);function e(t){return n.call(this,t)||this}return e.prototype.parseInformation=function(){var t=new cn;t.append("(01)");var r=t.length(),i=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE,4);return t.append(i),this.encodeCompressedGtinWithoutAI(t,e.HEADER_SIZE+4,r),this.getGeneralDecoder().decodeAllCodes(t,e.HEADER_SIZE+44)},e.HEADER_SIZE=4,e}(al),rB=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),iB=function(n){rB(e,n);function e(t){return n.call(this,t)||this}return e.prototype.parseInformation=function(){var t=new cn;return this.getGeneralDecoder().decodeAllCodes(t,e.HEADER_SIZE)},e.HEADER_SIZE=5,e}(vS),aB=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),rg=function(n){aB(e,n);function e(t){return n.call(this,t)||this}return e.prototype.encodeCompressedWeight=function(t,r,i){var a=this.getGeneralDecoder().extractNumericValueFromBitArray(r,i);this.addWeightCode(t,a);for(var o=this.checkWeight(a),s=1e5,u=0;u<5;++u)o/s===0&&t.append("0"),s/=10;t.append(o)},e}(al),oB=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),yS=function(n){oB(e,n);function e(t){return n.call(this,t)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()!==e.HEADER_SIZE+rg.GTIN_SIZE+e.WEIGHT_SIZE)throw new ze;var t=new cn;return this.encodeCompressedGtin(t,e.HEADER_SIZE),this.encodeCompressedWeight(t,e.HEADER_SIZE+rg.GTIN_SIZE,e.WEIGHT_SIZE),t.toString()},e.HEADER_SIZE=5,e.WEIGHT_SIZE=15,e}(rg),sB=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),lB=function(n){sB(e,n);function e(t){return n.call(this,t)||this}return e.prototype.addWeightCode=function(t,r){t.append("(3103)")},e.prototype.checkWeight=function(t){return t},e}(yS),uB=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),cB=function(n){uB(e,n);function e(t){return n.call(this,t)||this}return e.prototype.addWeightCode=function(t,r){r<1e4?t.append("(3202)"):t.append("(3203)")},e.prototype.checkWeight=function(t){return t<1e4?t:t-1e4},e}(yS),fB=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),hB=function(n){fB(e,n);function e(t){return n.call(this,t)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()<e.HEADER_SIZE+al.GTIN_SIZE)throw new ze;var t=new cn;this.encodeCompressedGtin(t,e.HEADER_SIZE);var r=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+al.GTIN_SIZE,e.LAST_DIGIT_SIZE);t.append("(392"),t.append(r),t.append(")");var i=this.getGeneralDecoder().decodeGeneralPurposeField(e.HEADER_SIZE+al.GTIN_SIZE+e.LAST_DIGIT_SIZE,null);return t.append(i.getNewString()),t.toString()},e.HEADER_SIZE=8,e.LAST_DIGIT_SIZE=2,e}(al),dB=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),pB=function(n){dB(e,n);function e(t){return n.call(this,t)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()<e.HEADER_SIZE+al.GTIN_SIZE)throw new ze;var t=new cn;this.encodeCompressedGtin(t,e.HEADER_SIZE);var r=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+al.GTIN_SIZE,e.LAST_DIGIT_SIZE);t.append("(393"),t.append(r),t.append(")");var i=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+al.GTIN_SIZE+e.LAST_DIGIT_SIZE,e.FIRST_THREE_DIGITS_SIZE);i/100===0&&t.append("0"),i/10===0&&t.append("0"),t.append(i);var a=this.getGeneralDecoder().decodeGeneralPurposeField(e.HEADER_SIZE+al.GTIN_SIZE+e.LAST_DIGIT_SIZE+e.FIRST_THREE_DIGITS_SIZE,null);return t.append(a.getNewString()),t.toString()},e.HEADER_SIZE=8,e.LAST_DIGIT_SIZE=2,e.FIRST_THREE_DIGITS_SIZE=10,e}(al),gB=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),zc=function(n){gB(e,n);function e(t,r,i){var a=n.call(this,t)||this;return a.dateCode=i,a.firstAIdigits=r,a}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()!==e.HEADER_SIZE+e.GTIN_SIZE+e.WEIGHT_SIZE+e.DATE_SIZE)throw new ze;var t=new cn;return this.encodeCompressedGtin(t,e.HEADER_SIZE),this.encodeCompressedWeight(t,e.HEADER_SIZE+e.GTIN_SIZE,e.WEIGHT_SIZE),this.encodeCompressedDate(t,e.HEADER_SIZE+e.GTIN_SIZE+e.WEIGHT_SIZE),t.toString()},e.prototype.encodeCompressedDate=function(t,r){var i=this.getGeneralDecoder().extractNumericValueFromBitArray(r,e.DATE_SIZE);if(i!==38400){t.append("("),t.append(this.dateCode),t.append(")");var a=i%32;i/=32;var o=i%12+1;i/=12;var s=i;s/10===0&&t.append("0"),t.append(s),o/10===0&&t.append("0"),t.append(o),a/10===0&&t.append("0"),t.append(a)}},e.prototype.addWeightCode=function(t,r){t.append("("),t.append(this.firstAIdigits),t.append(r/1e5),t.append(")")},e.prototype.checkWeight=function(t){return t%1e5},e.HEADER_SIZE=8,e.WEIGHT_SIZE=20,e.DATE_SIZE=16,e}(rg);function mB(n){try{if(n.get(1))return new nB(n);if(!n.get(2))return new iB(n);var e=ng.extractNumericValueFromBitArray(n,1,4);switch(e){case 4:return new lB(n);case 5:return new cB(n)}var t=ng.extractNumericValueFromBitArray(n,1,5);switch(t){case 12:return new hB(n);case 13:return new pB(n)}var r=ng.extractNumericValueFromBitArray(n,1,7);switch(r){case 56:return new zc(n,"310","11");case 57:return new zc(n,"320","11");case 58:return new zc(n,"310","13");case 59:return new zc(n,"320","13");case 60:return new zc(n,"310","15");case 61:return new zc(n,"320","15");case 62:return new zc(n,"310","17");case 63:return new zc(n,"320","17")}}catch(i){throw console.log(i),new E0("unknown decoder: "+n)}}var B3=function(){function n(e,t,r,i){this.leftchar=e,this.rightchar=t,this.finderpattern=r,this.maybeLast=i}return n.prototype.mayBeLast=function(){return this.maybeLast},n.prototype.getLeftChar=function(){return this.leftchar},n.prototype.getRightChar=function(){return this.rightchar},n.prototype.getFinderPattern=function(){return this.finderpattern},n.prototype.mustBeLast=function(){return this.rightchar==null},n.prototype.toString=function(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"},n.equals=function(e,t){return e instanceof n?n.equalsOrNull(e.leftchar,t.leftchar)&&n.equalsOrNull(e.rightchar,t.rightchar)&&n.equalsOrNull(e.finderpattern,t.finderpattern):!1},n.equalsOrNull=function(e,t){return e===null?t===null:n.equals(e,t)},n.prototype.hashCode=function(){var e=this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue();return e},n}(),vB=function(){function n(e,t,r){this.pairs=e,this.rowNumber=t,this.wasReversed=r}return n.prototype.getPairs=function(){return this.pairs},n.prototype.getRowNumber=function(){return this.rowNumber},n.prototype.isReversed=function(){return this.wasReversed},n.prototype.isEquivalent=function(e){return this.checkEqualitity(this,e)},n.prototype.toString=function(){return"{ "+this.pairs+" }"},n.prototype.equals=function(e,t){return e instanceof n?this.checkEqualitity(e,t)&&e.wasReversed===t.wasReversed:!1},n.prototype.checkEqualitity=function(e,t){if(!(!e||!t)){var r;return e.forEach(function(i,a){t.forEach(function(o){i.getLeftChar().getValue()===o.getLeftChar().getValue()&&i.getRightChar().getValue()===o.getRightChar().getValue()&&i.getFinderPatter().getValue()===o.getFinderPatter().getValue()&&(r=!0)})}),r}},n}(),yB=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),qc=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},xB=function(n){yB(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.pairs=new Array(e.MAX_PAIRS),t.rows=new Array,t.startEnd=[2],t}return e.prototype.decodeRow=function(t,r,i){this.pairs.length=0,this.startFromEven=!1;try{return e.constructResult(this.decodeRow2pairs(t,r))}catch{}return this.pairs.length=0,this.startFromEven=!0,e.constructResult(this.decodeRow2pairs(t,r))},e.prototype.reset=function(){this.pairs.length=0,this.rows.length=0},e.prototype.decodeRow2pairs=function(t,r){for(var i=!1;!i;)try{this.pairs.push(this.retrieveNextPair(r,this.pairs,t))}catch(s){if(s instanceof ze){if(!this.pairs.length)throw new ze;i=!0}}if(this.checkChecksum())return this.pairs;var a;if(this.rows.length?a=!0:a=!1,this.storeRow(t,!1),a){var o=this.checkRowsBoolean(!1);if(o!=null||(o=this.checkRowsBoolean(!0),o!=null))return o}throw new ze},e.prototype.checkRowsBoolean=function(t){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,t&&(this.rows=this.rows.reverse());var r=null;try{r=this.checkRows(new Array,0)}catch(i){console.log(i)}return t&&(this.rows=this.rows.reverse()),r},e.prototype.checkRows=function(t,r){for(var i,a,o=r;o<this.rows.length;o++){var s=this.rows[o];this.pairs.length=0;try{for(var u=(i=void 0,qc(t)),f=u.next();!f.done;f=u.next()){var h=f.value;this.pairs.push(h.getPairs())}}catch(g){i={error:g}}finally{try{f&&!f.done&&(a=u.return)&&a.call(u)}finally{if(i)throw i.error}}if(this.pairs.push(s.getPairs()),!!e.isValidSequence(this.pairs)){if(this.checkChecksum())return this.pairs;var p=new Array(t);p.push(s);try{return this.checkRows(p,o+1)}catch(g){console.log(g)}}}throw new ze},e.isValidSequence=function(t){var r,i;try{for(var a=qc(e.FINDER_PATTERN_SEQUENCES),o=a.next();!o.done;o=a.next()){var s=o.value;if(!(t.length>s.length)){for(var u=!0,f=0;f<t.length;f++)if(t[f].getFinderPattern().getValue()!==s[f]){u=!1;break}if(u)return!0}}}catch(h){r={error:h}}finally{try{o&&!o.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}return!1},e.prototype.storeRow=function(t,r){for(var i=0,a=!1,o=!1;i<this.rows.length;){var s=this.rows[i];if(s.getRowNumber()>t){o=s.isEquivalent(this.pairs);break}a=s.isEquivalent(this.pairs),i++}o||a||e.isPartialRow(this.pairs,this.rows)||(this.rows.push(i,new vB(this.pairs,t,r)),this.removePartialRows(this.pairs,this.rows))},e.prototype.removePartialRows=function(t,r){var i,a,o,s,u,f;try{for(var h=qc(r),p=h.next();!p.done;p=h.next()){var g=p.value;if(g.getPairs().length!==t.length){var m=!0;try{for(var x=(o=void 0,qc(g.getPairs())),w=x.next();!w.done;w=x.next()){var I=w.value,C=!1;try{for(var P=(u=void 0,qc(t)),B=P.next();!B.done;B=P.next()){var V=B.value;if(B3.equals(I,V)){C=!0;break}}}catch(Y){u={error:Y}}finally{try{B&&!B.done&&(f=P.return)&&f.call(P)}finally{if(u)throw u.error}}C||(m=!1)}}catch(Y){o={error:Y}}finally{try{w&&!w.done&&(s=x.return)&&s.call(x)}finally{if(o)throw o.error}}}}}catch(Y){i={error:Y}}finally{try{p&&!p.done&&(a=h.return)&&a.call(h)}finally{if(i)throw i.error}}},e.isPartialRow=function(t,r){var i,a,o,s,u,f;try{for(var h=qc(r),p=h.next();!p.done;p=h.next()){var g=p.value,m=!0;try{for(var x=(o=void 0,qc(t)),w=x.next();!w.done;w=x.next()){var I=w.value,C=!1;try{for(var P=(u=void 0,qc(g.getPairs())),B=P.next();!B.done;B=P.next()){var V=B.value;if(I.equals(V)){C=!0;break}}}catch(Y){u={error:Y}}finally{try{B&&!B.done&&(f=P.return)&&f.call(P)}finally{if(u)throw u.error}}if(!C){m=!1;break}}}catch(Y){o={error:Y}}finally{try{w&&!w.done&&(s=x.return)&&s.call(x)}finally{if(o)throw o.error}}if(m)return!0}}catch(Y){i={error:Y}}finally{try{p&&!p.done&&(a=h.return)&&a.call(h)}finally{if(i)throw i.error}}return!1},e.prototype.getRows=function(){return this.rows},e.constructResult=function(t){var r=YM.buildBitArray(t),i=mB(r),a=i.parseInformation(),o=t[0].getFinderPattern().getResultPoints(),s=t[t.length-1].getFinderPattern().getResultPoints(),u=[o[0],o[1],s[0],s[1]];return new Fa(a,null,null,u,Bt.RSS_EXPANDED,null)},e.prototype.checkChecksum=function(){var t=this.pairs.get(0),r=t.getLeftChar(),i=t.getRightChar();if(i===null)return!1;for(var a=i.getChecksumPortion(),o=2,s=1;s<this.pairs.size();++s){var u=this.pairs.get(s);a+=u.getLeftChar().getChecksumPortion(),o++;var f=u.getRightChar();f!=null&&(a+=f.getChecksumPortion(),o++)}a%=211;var h=211*(o-4)+a;return h===r.getValue()},e.getNextSecondBar=function(t,r){var i;return t.get(r)?(i=t.getNextUnset(r),i=t.getNextSet(i)):(i=t.getNextSet(r),i=t.getNextUnset(i)),i},e.prototype.retrieveNextPair=function(t,r,i){var a=r.length%2===0;this.startFromEven&&(a=!a);var o,s=!0,u=-1;do this.findNextPair(t,r,u),o=this.parseFoundFinderPattern(t,i,a),o===null?u=e.getNextSecondBar(t,this.startEnd[0]):s=!1;while(s);var f=this.decodeDataCharacter(t,o,a,!0);if(!this.isEmptyPair(r)&&r[r.length-1].mustBeLast())throw new ze;var h;try{h=this.decodeDataCharacter(t,o,a,!1)}catch(p){h=null,console.log(p)}return new B3(f,h,o,!0)},e.prototype.isEmptyPair=function(t){return t.length===0},e.prototype.findNextPair=function(t,r,i){var a=this.getDecodeFinderCounters();a[0]=0,a[1]=0,a[2]=0,a[3]=0;var o=t.getSize(),s;if(i>=0)s=i;else if(this.isEmptyPair(r))s=0;else{var u=r[r.length-1];s=u.getFinderPattern().getStartEnd()[1]}var f=r.length%2!==0;this.startFromEven&&(f=!f);for(var h=!1;s<o&&(h=!t.get(s),!!h);)s++;for(var p=0,g=s,m=s;m<o;m++)if(t.get(m)!==h)a[p]++;else{if(p===3){if(f&&e.reverseCounters(a),e.isFinderPattern(a)){this.startEnd[0]=g,this.startEnd[1]=m;return}f&&e.reverseCounters(a),g+=a[0]+a[1],a[0]=a[2],a[1]=a[3],a[2]=0,a[3]=0,p--}else p++;a[p]=1,h=!h}throw new ze},e.reverseCounters=function(t){for(var r=t.length,i=0;i<r/2;++i){var a=t[i];t[i]=t[r-i-1],t[r-i-1]=a}},e.prototype.parseFoundFinderPattern=function(t,r,i){var a,o,s;if(i){for(var u=this.startEnd[0]-1;u>=0&&!t.get(u);)u--;u++,a=this.startEnd[0]-u,o=u,s=this.startEnd[1]}else o=this.startEnd[0],s=t.getNextUnset(this.startEnd[1]+1),a=s-this.startEnd[1];var f=this.getDecodeFinderCounters();br.arraycopy(f,0,f,1,f.length-1),f[0]=a;var h;try{h=this.parseFinderValue(f,e.FINDER_PATTERNS)}catch{return null}return new mS(h,[o,s],o,s,r)},e.prototype.decodeDataCharacter=function(t,r,i,a){for(var o=this.getDataCharacterCounters(),s=0;s<o.length;s++)o[s]=0;if(a)e.recordPatternInReverse(t,r.getStartEnd()[0],o);else{e.recordPattern(t,r.getStartEnd()[1],o);for(var u=0,f=o.length-1;u<f;u++,f--){var h=o[u];o[u]=o[f],o[f]=h}}var p=17,g=Hn.sum(new Int32Array(o))/p,m=(r.getStartEnd()[1]-r.getStartEnd()[0])/15;if(Math.abs(g-m)/m>.3)throw new ze;for(var x=this.getOddCounts(),w=this.getEvenCounts(),I=this.getOddRoundingErrors(),C=this.getEvenRoundingErrors(),u=0;u<o.length;u++){var P=1*o[u]/g,B=P+.5;if(B<1){if(P<.3)throw new ze;B=1}else if(B>8){if(P>8.7)throw new ze;B=8}var V=u/2;(u&1)===0?(x[V]=B,I[V]=P-B):(w[V]=B,C[V]=P-B)}this.adjustOddEvenCounts(p);for(var Y=4*r.getValue()+(i?0:2)+(a?0:1)-1,q=0,D=0,u=x.length-1;u>=0;u--){if(e.isNotA1left(r,i,a)){var A=e.WEIGHTS[Y][2*u];D+=x[u]*A}q+=x[u]}for(var T=0,u=w.length-1;u>=0;u--)if(e.isNotA1left(r,i,a)){var A=e.WEIGHTS[Y][2*u+1];T+=w[u]*A}var k=D+T;if((q&1)!==0||q>13||q<4)throw new ze;var R=(13-q)/2,L=e.SYMBOL_WIDEST[R],j=9-L,H=id.getRSSvalue(x,L,!0),ne=id.getRSSvalue(w,j,!1),U=e.EVEN_TOTAL_SUBSET[R],z=e.GSUM[R],ee=H*U+ne+z;return new kg(ee,k)},e.isNotA1left=function(t,r,i){return!(t.getValue()===0&&r&&i)},e.prototype.adjustOddEvenCounts=function(t){var r=Hn.sum(new Int32Array(this.getOddCounts())),i=Hn.sum(new Int32Array(this.getEvenCounts())),a=!1,o=!1;r>13?o=!0:r<4&&(a=!0);var s=!1,u=!1;i>13?u=!0:i<4&&(s=!0);var f=r+i-t,h=(r&1)===1,p=(i&1)===0;if(f===1)if(h){if(p)throw new ze;o=!0}else{if(!p)throw new ze;u=!0}else if(f===-1)if(h){if(p)throw new ze;a=!0}else{if(!p)throw new ze;s=!0}else if(f===0){if(h){if(!p)throw new ze;r<i?(a=!0,u=!0):(o=!0,s=!0)}else if(p)throw new ze}else throw new ze;if(a){if(o)throw new ze;e.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(o&&e.decrement(this.getOddCounts(),this.getOddRoundingErrors()),s){if(u)throw new ze;e.increment(this.getEvenCounts(),this.getOddRoundingErrors())}u&&e.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},e.SYMBOL_WIDEST=[7,5,4,3,1],e.EVEN_TOTAL_SUBSET=[4,20,52,104,204],e.GSUM=[0,348,1388,2948,3988],e.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],e.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],e.FINDER_PAT_A=0,e.FINDER_PAT_B=1,e.FINDER_PAT_C=2,e.FINDER_PAT_D=3,e.FINDER_PAT_E=4,e.FINDER_PAT_F=5,e.FINDER_PATTERN_SEQUENCES=[[e.FINDER_PAT_A,e.FINDER_PAT_A],[e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B],[e.FINDER_PAT_A,e.FINDER_PAT_C,e.FINDER_PAT_B,e.FINDER_PAT_D],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_C],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_D,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_D],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_E],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F]],e.MAX_PAIRS=11,e}(Wf),_B=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),wB=function(n){_B(e,n);function e(t,r,i){var a=n.call(this,t,r)||this;return a.count=0,a.finderPattern=i,a}return e.prototype.getFinderPattern=function(){return this.finderPattern},e.prototype.getCount=function(){return this.count},e.prototype.incrementCount=function(){this.count++},e}(kg),bB=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),xv=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},j3=function(n){bB(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.possibleLeftPairs=[],t.possibleRightPairs=[],t}return e.prototype.decodeRow=function(t,r,i){var a,o,s,u,f=this.decodePair(r,!1,t,i);e.addOrTally(this.possibleLeftPairs,f),r.reverse();var h=this.decodePair(r,!0,t,i);e.addOrTally(this.possibleRightPairs,h),r.reverse();try{for(var p=xv(this.possibleLeftPairs),g=p.next();!g.done;g=p.next()){var m=g.value;if(m.getCount()>1)try{for(var x=(s=void 0,xv(this.possibleRightPairs)),w=x.next();!w.done;w=x.next()){var I=w.value;if(I.getCount()>1&&e.checkChecksum(m,I))return e.constructResult(m,I)}}catch(C){s={error:C}}finally{try{w&&!w.done&&(u=x.return)&&u.call(x)}finally{if(s)throw s.error}}}}catch(C){a={error:C}}finally{try{g&&!g.done&&(o=p.return)&&o.call(p)}finally{if(a)throw a.error}}throw new ze},e.addOrTally=function(t,r){var i,a;if(r!=null){var o=!1;try{for(var s=xv(t),u=s.next();!u.done;u=s.next()){var f=u.value;if(f.getValue()===r.getValue()){f.incrementCount(),o=!0;break}}}catch(h){i={error:h}}finally{try{u&&!u.done&&(a=s.return)&&a.call(s)}finally{if(i)throw i.error}}o||t.push(r)}},e.prototype.reset=function(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0},e.constructResult=function(t,r){for(var i=4537077*t.getValue()+r.getValue(),a=new String(i).toString(),o=new cn,s=13-a.length;s>0;s--)o.append("0");o.append(a);for(var u=0,s=0;s<13;s++){var f=o.charAt(s).charCodeAt(0)-48;u+=(s&1)===0?3*f:f}u=10-u%10,u===10&&(u=0),o.append(u.toString());var h=t.getFinderPattern().getResultPoints(),p=r.getFinderPattern().getResultPoints();return new Fa(o.toString(),null,0,[h[0],h[1],p[0],p[1]],Bt.RSS_14,new Date().getTime())},e.checkChecksum=function(t,r){var i=(t.getChecksumPortion()+16*r.getChecksumPortion())%79,a=9*t.getFinderPattern().getValue()+r.getFinderPattern().getValue();return a>72&&a--,a>8&&a--,i===a},e.prototype.decodePair=function(t,r,i,a){try{var o=this.findFinderPattern(t,r),s=this.parseFoundFinderPattern(t,i,r,o),u=a==null?null:a.get(kr.NEED_RESULT_POINT_CALLBACK);if(u!=null){var f=(o[0]+o[1])/2;r&&(f=t.getSize()-1-f),u.foundPossibleResultPoint(new It(f,i))}var h=this.decodeDataCharacter(t,s,!0),p=this.decodeDataCharacter(t,s,!1);return new wB(1597*h.getValue()+p.getValue(),h.getChecksumPortion()+4*p.getChecksumPortion(),s)}catch{return null}},e.prototype.decodeDataCharacter=function(t,r,i){for(var a=this.getDataCharacterCounters(),o=0;o<a.length;o++)a[o]=0;if(i)Mi.recordPatternInReverse(t,r.getStartEnd()[0],a);else{Mi.recordPattern(t,r.getStartEnd()[1]+1,a);for(var s=0,u=a.length-1;s<u;s++,u--){var f=a[s];a[s]=a[u],a[u]=f}}for(var h=i?16:15,p=Hn.sum(new Int32Array(a))/h,g=this.getOddCounts(),m=this.getEvenCounts(),x=this.getOddRoundingErrors(),w=this.getEvenRoundingErrors(),s=0;s<a.length;s++){var I=a[s]/p,C=Math.floor(I+.5);C<1?C=1:C>8&&(C=8);var P=Math.floor(s/2);(s&1)===0?(g[P]=C,x[P]=I-C):(m[P]=C,w[P]=I-C)}this.adjustOddEvenCounts(i,h);for(var B=0,V=0,s=g.length-1;s>=0;s--)V*=9,V+=g[s],B+=g[s];for(var Y=0,q=0,s=m.length-1;s>=0;s--)Y*=9,Y+=m[s],q+=m[s];var D=V+3*Y;if(i){if((B&1)!==0||B>12||B<4)throw new ze;var A=(12-B)/2,T=e.OUTSIDE_ODD_WIDEST[A],k=9-T,R=id.getRSSvalue(g,T,!1),L=id.getRSSvalue(m,k,!0),j=e.OUTSIDE_EVEN_TOTAL_SUBSET[A],H=e.OUTSIDE_GSUM[A];return new kg(R*j+L+H,D)}else{if((q&1)!==0||q>10||q<4)throw new ze;var A=(10-q)/2,T=e.INSIDE_ODD_WIDEST[A],k=9-T,R=id.getRSSvalue(g,T,!0),L=id.getRSSvalue(m,k,!1),ne=e.INSIDE_ODD_TOTAL_SUBSET[A],H=e.INSIDE_GSUM[A];return new kg(L*ne+R+H,D)}},e.prototype.findFinderPattern=function(t,r){var i=this.getDecodeFinderCounters();i[0]=0,i[1]=0,i[2]=0,i[3]=0;for(var a=t.getSize(),o=!1,s=0;s<a&&(o=!t.get(s),r!==o);)s++;for(var u=0,f=s,h=s;h<a;h++)if(t.get(h)!==o)i[u]++;else{if(u===3){if(Wf.isFinderPattern(i))return[f,h];f+=i[0]+i[1],i[0]=i[2],i[1]=i[3],i[2]=0,i[3]=0,u--}else u++;i[u]=1,o=!o}throw new ze},e.prototype.parseFoundFinderPattern=function(t,r,i,a){for(var o=t.get(a[0]),s=a[0]-1;s>=0&&o!==t.get(s);)s--;s++;var u=a[0]-s,f=this.getDecodeFinderCounters(),h=new Int32Array(f.length);br.arraycopy(f,0,h,1,f.length-1),h[0]=u;var p=this.parseFinderValue(h,e.FINDER_PATTERNS),g=s,m=a[1];return i&&(g=t.getSize()-1-g,m=t.getSize()-1-m),new mS(p,[s,a[1]],g,m,r)},e.prototype.adjustOddEvenCounts=function(t,r){var i=Hn.sum(new Int32Array(this.getOddCounts())),a=Hn.sum(new Int32Array(this.getEvenCounts())),o=!1,s=!1,u=!1,f=!1;t?(i>12?s=!0:i<4&&(o=!0),a>12?f=!0:a<4&&(u=!0)):(i>11?s=!0:i<5&&(o=!0),a>10?f=!0:a<4&&(u=!0));var h=i+a-r,p=(i&1)===(t?1:0),g=(a&1)===1;if(h===1)if(p){if(g)throw new ze;s=!0}else{if(!g)throw new ze;f=!0}else if(h===-1)if(p){if(g)throw new ze;o=!0}else{if(!g)throw new ze;u=!0}else if(h===0){if(p){if(!g)throw new ze;i<a?(o=!0,f=!0):(s=!0,u=!0)}else if(g)throw new ze}else throw new ze;if(o){if(s)throw new ze;Wf.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(s&&Wf.decrement(this.getOddCounts(),this.getOddRoundingErrors()),u){if(f)throw new ze;Wf.increment(this.getEvenCounts(),this.getOddRoundingErrors())}f&&Wf.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},e.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],e.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],e.OUTSIDE_GSUM=[0,161,961,2015,2715],e.INSIDE_GSUM=[0,336,1036,1516],e.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],e.INSIDE_ODD_WIDEST=[2,4,6,8],e.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])],e}(Wf),AB=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),B1=function(n){AB(e,n);function e(t){var r=n.call(this)||this;r.readers=[];var i=t?t.get(kr.POSSIBLE_FORMATS):null,a=t&&t.get(kr.ASSUME_CODE_39_CHECK_DIGIT)!==void 0,o=t&&t.get(kr.ENABLE_CODE_39_EXTENDED_MODE)!==void 0;return i&&((i.includes(Bt.EAN_13)||i.includes(Bt.UPC_A)||i.includes(Bt.EAN_8)||i.includes(Bt.UPC_E))&&r.readers.push(new yv(t)),i.includes(Bt.CODE_39)&&r.readers.push(new I3(a,o)),i.includes(Bt.CODE_93)&&r.readers.push(new R3),i.includes(Bt.CODE_128)&&r.readers.push(new T3),i.includes(Bt.ITF)&&r.readers.push(new N3),i.includes(Bt.CODABAR)&&r.readers.push(new WM),i.includes(Bt.RSS_14)&&r.readers.push(new j3),i.includes(Bt.RSS_EXPANDED)&&(console.warn("RSS Expanded reader IS NOT ready for production yet! use at your own risk."),r.readers.push(new xB))),r.readers.length===0&&(r.readers.push(new yv(t)),r.readers.push(new I3),r.readers.push(new R3),r.readers.push(new yv(t)),r.readers.push(new T3),r.readers.push(new N3),r.readers.push(new j3)),r}return e.prototype.decodeRow=function(t,r,i){for(var a=0;a<this.readers.length;a++)try{return this.readers[a].decodeRow(t,r,i)}catch{}throw new ze},e.prototype.reset=function(){this.readers.forEach(function(t){return t.reset()})},e}(Mi),EB=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();(function(n){EB(e,n);function e(t,r){return t===void 0&&(t=500),n.call(this,new B1(r),t,r)||this}return e})(Ld);var F3=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Zn=function(){function n(e,t,r){this.ecCodewords=e,this.ecBlocks=[t],r&&this.ecBlocks.push(r)}return n.prototype.getECCodewords=function(){return this.ecCodewords},n.prototype.getECBlocks=function(){return this.ecBlocks},n}(),$n=function(){function n(e,t){this.count=e,this.dataCodewords=t}return n.prototype.getCount=function(){return this.count},n.prototype.getDataCodewords=function(){return this.dataCodewords},n}(),SB=function(){function n(e,t,r,i,a,o){var s,u;this.versionNumber=e,this.symbolSizeRows=t,this.symbolSizeColumns=r,this.dataRegionSizeRows=i,this.dataRegionSizeColumns=a,this.ecBlocks=o;var f=0,h=o.getECCodewords(),p=o.getECBlocks();try{for(var g=F3(p),m=g.next();!m.done;m=g.next()){var x=m.value;f+=x.getCount()*(x.getDataCodewords()+h)}}catch(w){s={error:w}}finally{try{m&&!m.done&&(u=g.return)&&u.call(g)}finally{if(s)throw s.error}}this.totalCodewords=f}return n.prototype.getVersionNumber=function(){return this.versionNumber},n.prototype.getSymbolSizeRows=function(){return this.symbolSizeRows},n.prototype.getSymbolSizeColumns=function(){return this.symbolSizeColumns},n.prototype.getDataRegionSizeRows=function(){return this.dataRegionSizeRows},n.prototype.getDataRegionSizeColumns=function(){return this.dataRegionSizeColumns},n.prototype.getTotalCodewords=function(){return this.totalCodewords},n.prototype.getECBlocks=function(){return this.ecBlocks},n.getVersionForDimensions=function(e,t){var r,i;if((e&1)!==0||(t&1)!==0)throw new pt;try{for(var a=F3(n.VERSIONS),o=a.next();!o.done;o=a.next()){var s=o.value;if(s.symbolSizeRows===e&&s.symbolSizeColumns===t)return s}}catch(u){r={error:u}}finally{try{o&&!o.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}throw new pt},n.prototype.toString=function(){return""+this.versionNumber},n.buildVersions=function(){return[new n(1,10,10,8,8,new Zn(5,new $n(1,3))),new n(2,12,12,10,10,new Zn(7,new $n(1,5))),new n(3,14,14,12,12,new Zn(10,new $n(1,8))),new n(4,16,16,14,14,new Zn(12,new $n(1,12))),new n(5,18,18,16,16,new Zn(14,new $n(1,18))),new n(6,20,20,18,18,new Zn(18,new $n(1,22))),new n(7,22,22,20,20,new Zn(20,new $n(1,30))),new n(8,24,24,22,22,new Zn(24,new $n(1,36))),new n(9,26,26,24,24,new Zn(28,new $n(1,44))),new n(10,32,32,14,14,new Zn(36,new $n(1,62))),new n(11,36,36,16,16,new Zn(42,new $n(1,86))),new n(12,40,40,18,18,new Zn(48,new $n(1,114))),new n(13,44,44,20,20,new Zn(56,new $n(1,144))),new n(14,48,48,22,22,new Zn(68,new $n(1,174))),new n(15,52,52,24,24,new Zn(42,new $n(2,102))),new n(16,64,64,14,14,new Zn(56,new $n(2,140))),new n(17,72,72,16,16,new Zn(36,new $n(4,92))),new n(18,80,80,18,18,new Zn(48,new $n(4,114))),new n(19,88,88,20,20,new Zn(56,new $n(4,144))),new n(20,96,96,22,22,new Zn(68,new $n(4,174))),new n(21,104,104,24,24,new Zn(56,new $n(6,136))),new n(22,120,120,18,18,new Zn(68,new $n(6,175))),new n(23,132,132,20,20,new Zn(62,new $n(8,163))),new n(24,144,144,22,22,new Zn(62,new $n(8,156),new $n(2,155))),new n(25,8,18,6,16,new Zn(7,new $n(1,5))),new n(26,8,32,6,14,new Zn(11,new $n(1,10))),new n(27,12,26,10,24,new Zn(14,new $n(1,16))),new n(28,12,36,10,16,new Zn(18,new $n(1,22))),new n(29,16,36,14,16,new Zn(24,new $n(1,32))),new n(30,16,48,14,22,new Zn(28,new $n(1,49)))]},n.VERSIONS=n.buildVersions(),n}(),CB=function(){function n(e){var t=e.getHeight();if(t<8||t>144||(t&1)!==0)throw new pt;this.version=n.readVersion(e),this.mappingBitMatrix=this.extractDataRegion(e),this.readMappingMatrix=new iu(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}return n.prototype.getVersion=function(){return this.version},n.readVersion=function(e){var t=e.getHeight(),r=e.getWidth();return SB.getVersionForDimensions(t,r)},n.prototype.readCodewords=function(){var e=new Int8Array(this.version.getTotalCodewords()),t=0,r=4,i=0,a=this.mappingBitMatrix.getHeight(),o=this.mappingBitMatrix.getWidth(),s=!1,u=!1,f=!1,h=!1;do if(r===a&&i===0&&!s)e[t++]=this.readCorner1(a,o)&255,r-=2,i+=2,s=!0;else if(r===a-2&&i===0&&(o&3)!==0&&!u)e[t++]=this.readCorner2(a,o)&255,r-=2,i+=2,u=!0;else if(r===a+4&&i===2&&(o&7)===0&&!f)e[t++]=this.readCorner3(a,o)&255,r-=2,i+=2,f=!0;else if(r===a-2&&i===0&&(o&7)===4&&!h)e[t++]=this.readCorner4(a,o)&255,r-=2,i+=2,h=!0;else{do r<a&&i>=0&&!this.readMappingMatrix.get(i,r)&&(e[t++]=this.readUtah(r,i,a,o)&255),r-=2,i+=2;while(r>=0&&i<o);r+=1,i+=3;do r>=0&&i<o&&!this.readMappingMatrix.get(i,r)&&(e[t++]=this.readUtah(r,i,a,o)&255),r+=2,i-=2;while(r<a&&i>=0);r+=3,i+=1}while(r<a||i<o);if(t!==this.version.getTotalCodewords())throw new pt;return e},n.prototype.readModule=function(e,t,r,i){return e<0&&(e+=r,t+=4-(r+4&7)),t<0&&(t+=i,e+=4-(i+4&7)),this.readMappingMatrix.set(t,e),this.mappingBitMatrix.get(t,e)},n.prototype.readUtah=function(e,t,r,i){var a=0;return this.readModule(e-2,t-2,r,i)&&(a|=1),a<<=1,this.readModule(e-2,t-1,r,i)&&(a|=1),a<<=1,this.readModule(e-1,t-2,r,i)&&(a|=1),a<<=1,this.readModule(e-1,t-1,r,i)&&(a|=1),a<<=1,this.readModule(e-1,t,r,i)&&(a|=1),a<<=1,this.readModule(e,t-2,r,i)&&(a|=1),a<<=1,this.readModule(e,t-1,r,i)&&(a|=1),a<<=1,this.readModule(e,t,r,i)&&(a|=1),a},n.prototype.readCorner1=function(e,t){var r=0;return this.readModule(e-1,0,e,t)&&(r|=1),r<<=1,this.readModule(e-1,1,e,t)&&(r|=1),r<<=1,this.readModule(e-1,2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-1,e,t)&&(r|=1),r<<=1,this.readModule(1,t-1,e,t)&&(r|=1),r<<=1,this.readModule(2,t-1,e,t)&&(r|=1),r<<=1,this.readModule(3,t-1,e,t)&&(r|=1),r},n.prototype.readCorner2=function(e,t){var r=0;return this.readModule(e-3,0,e,t)&&(r|=1),r<<=1,this.readModule(e-2,0,e,t)&&(r|=1),r<<=1,this.readModule(e-1,0,e,t)&&(r|=1),r<<=1,this.readModule(0,t-4,e,t)&&(r|=1),r<<=1,this.readModule(0,t-3,e,t)&&(r|=1),r<<=1,this.readModule(0,t-2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-1,e,t)&&(r|=1),r<<=1,this.readModule(1,t-1,e,t)&&(r|=1),r},n.prototype.readCorner3=function(e,t){var r=0;return this.readModule(e-1,0,e,t)&&(r|=1),r<<=1,this.readModule(e-1,t-1,e,t)&&(r|=1),r<<=1,this.readModule(0,t-3,e,t)&&(r|=1),r<<=1,this.readModule(0,t-2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-1,e,t)&&(r|=1),r<<=1,this.readModule(1,t-3,e,t)&&(r|=1),r<<=1,this.readModule(1,t-2,e,t)&&(r|=1),r<<=1,this.readModule(1,t-1,e,t)&&(r|=1),r},n.prototype.readCorner4=function(e,t){var r=0;return this.readModule(e-3,0,e,t)&&(r|=1),r<<=1,this.readModule(e-2,0,e,t)&&(r|=1),r<<=1,this.readModule(e-1,0,e,t)&&(r|=1),r<<=1,this.readModule(0,t-2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-1,e,t)&&(r|=1),r<<=1,this.readModule(1,t-1,e,t)&&(r|=1),r<<=1,this.readModule(2,t-1,e,t)&&(r|=1),r<<=1,this.readModule(3,t-1,e,t)&&(r|=1),r},n.prototype.extractDataRegion=function(e){var t=this.version.getSymbolSizeRows(),r=this.version.getSymbolSizeColumns();if(e.getHeight()!==t)throw new jt("Dimension of bitMatrix must match the version size");for(var i=this.version.getDataRegionSizeRows(),a=this.version.getDataRegionSizeColumns(),o=t/i|0,s=r/a|0,u=o*i,f=s*a,h=new iu(f,u),p=0;p<o;++p)for(var g=p*i,m=0;m<s;++m)for(var x=m*a,w=0;w<i;++w)for(var I=p*(i+2)+1+w,C=g+w,P=0;P<a;++P){var B=m*(a+2)+1+P;if(e.get(B,I)){var V=x+P;h.set(V,C)}}return h},n}(),U3=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},TB=function(){function n(e,t){this.numDataCodewords=e,this.codewords=t}return n.getDataBlocks=function(e,t){var r,i,a,o,s=t.getECBlocks(),u=0,f=s.getECBlocks();try{for(var h=U3(f),p=h.next();!p.done;p=h.next()){var g=p.value;u+=g.getCount()}}catch(H){r={error:H}}finally{try{p&&!p.done&&(i=h.return)&&i.call(h)}finally{if(r)throw r.error}}var m=new Array(u),x=0;try{for(var w=U3(f),I=w.next();!I.done;I=w.next())for(var g=I.value,C=0;C<g.getCount();C++){var P=g.getDataCodewords(),B=s.getECCodewords()+P;m[x++]=new n(P,new Uint8Array(B))}}catch(H){a={error:H}}finally{try{I&&!I.done&&(o=w.return)&&o.call(w)}finally{if(a)throw a.error}}for(var V=m[0].codewords.length,Y=V-s.getECCodewords(),q=Y-1,D=0,C=0;C<q;C++)for(var A=0;A<x;A++)m[A].codewords[C]=e[D++];for(var T=t.getVersionNumber()===24,k=T?8:x,A=0;A<k;A++)m[A].codewords[Y-1]=e[D++];for(var R=m[0].codewords.length,C=Y;C<R;C++)for(var A=0;A<x;A++){var L=T?(A+8)%x:A,j=T&&L>7?C-1:C;m[L].codewords[j]=e[D++]}if(D!==e.length)throw new jt;return m},n.prototype.getNumDataCodewords=function(){return this.numDataCodewords},n.prototype.getCodewords=function(){return this.codewords},n}(),xS=function(){function n(e){this.bytes=e,this.byteOffset=0,this.bitOffset=0}return n.prototype.getBitOffset=function(){return this.bitOffset},n.prototype.getByteOffset=function(){return this.byteOffset},n.prototype.readBits=function(e){if(e<1||e>32||e>this.available())throw new jt(""+e);var t=0,r=this.bitOffset,i=this.byteOffset,a=this.bytes;if(r>0){var o=8-r,s=e<o?e:o,u=o-s,f=255>>8-s<<u;t=(a[i]&f)>>u,e-=s,r+=s,r===8&&(r=0,i++)}if(e>0){for(;e>=8;)t=t<<8|a[i]&255,i++,e-=8;if(e>0){var u=8-e,f=255>>u<<u;t=t<<e|(a[i]&f)>>u,r+=e}}return this.bitOffset=r,this.byteOffset=i,t},n.prototype.available=function(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset},n}(),Di;(function(n){n[n.PAD_ENCODE=0]="PAD_ENCODE",n[n.ASCII_ENCODE=1]="ASCII_ENCODE",n[n.C40_ENCODE=2]="C40_ENCODE",n[n.TEXT_ENCODE=3]="TEXT_ENCODE",n[n.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",n[n.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",n[n.BASE256_ENCODE=6]="BASE256_ENCODE"})(Di||(Di={}));var IB=function(){function n(){}return n.decode=function(e){var t=new xS(e),r=new cn,i=new cn,a=new Array,o=Di.ASCII_ENCODE;do if(o===Di.ASCII_ENCODE)o=this.decodeAsciiSegment(t,r,i);else{switch(o){case Di.C40_ENCODE:this.decodeC40Segment(t,r);break;case Di.TEXT_ENCODE:this.decodeTextSegment(t,r);break;case Di.ANSIX12_ENCODE:this.decodeAnsiX12Segment(t,r);break;case Di.EDIFACT_ENCODE:this.decodeEdifactSegment(t,r);break;case Di.BASE256_ENCODE:this.decodeBase256Segment(t,r,a);break;default:throw new pt}o=Di.ASCII_ENCODE}while(o!==Di.PAD_ENCODE&&t.available()>0);return i.length()>0&&r.append(i.toString()),new Nm(e,r.toString(),a.length===0?null:a,null)},n.decodeAsciiSegment=function(e,t,r){var i=!1;do{var a=e.readBits(8);if(a===0)throw new pt;if(a<=128)return i&&(a+=128),t.append(String.fromCharCode(a-1)),Di.ASCII_ENCODE;if(a===129)return Di.PAD_ENCODE;if(a<=229){var o=a-130;o<10&&t.append("0"),t.append(""+o)}else switch(a){case 230:return Di.C40_ENCODE;case 231:return Di.BASE256_ENCODE;case 232:t.append("");break;case 233:case 234:break;case 235:i=!0;break;case 236:t.append("[)>05"),r.insert(0,"");break;case 237:t.append("[)>06"),r.insert(0,"");break;case 238:return Di.ANSIX12_ENCODE;case 239:return Di.TEXT_ENCODE;case 240:return Di.EDIFACT_ENCODE;case 241:break;default:if(a!==254||e.available()!==0)throw new pt;break}}while(e.available()>0);return Di.ASCII_ENCODE},n.decodeC40Segment=function(e,t){var r=!1,i=[],a=0;do{if(e.available()===8)return;var o=e.readBits(8);if(o===254)return;this.parseTwoBytes(o,e.readBits(8),i);for(var s=0;s<3;s++){var u=i[s];switch(a){case 0:if(u<3)a=u+1;else if(u<this.C40_BASIC_SET_CHARS.length){var f=this.C40_BASIC_SET_CHARS[u];r?(t.append(String.fromCharCode(f.charCodeAt(0)+128)),r=!1):t.append(f)}else throw new pt;break;case 1:r?(t.append(String.fromCharCode(u+128)),r=!1):t.append(String.fromCharCode(u)),a=0;break;case 2:if(u<this.C40_SHIFT2_SET_CHARS.length){var f=this.C40_SHIFT2_SET_CHARS[u];r?(t.append(String.fromCharCode(f.charCodeAt(0)+128)),r=!1):t.append(f)}else switch(u){case 27:t.append("");break;case 30:r=!0;break;default:throw new pt}a=0;break;case 3:r?(t.append(String.fromCharCode(u+224)),r=!1):t.append(String.fromCharCode(u+96)),a=0;break;default:throw new pt}}}while(e.available()>0)},n.decodeTextSegment=function(e,t){var r=!1,i=[],a=0;do{if(e.available()===8)return;var o=e.readBits(8);if(o===254)return;this.parseTwoBytes(o,e.readBits(8),i);for(var s=0;s<3;s++){var u=i[s];switch(a){case 0:if(u<3)a=u+1;else if(u<this.TEXT_BASIC_SET_CHARS.length){var f=this.TEXT_BASIC_SET_CHARS[u];r?(t.append(String.fromCharCode(f.charCodeAt(0)+128)),r=!1):t.append(f)}else throw new pt;break;case 1:r?(t.append(String.fromCharCode(u+128)),r=!1):t.append(String.fromCharCode(u)),a=0;break;case 2:if(u<this.TEXT_SHIFT2_SET_CHARS.length){var f=this.TEXT_SHIFT2_SET_CHARS[u];r?(t.append(String.fromCharCode(f.charCodeAt(0)+128)),r=!1):t.append(f)}else switch(u){case 27:t.append("");break;case 30:r=!0;break;default:throw new pt}a=0;break;case 3:if(u<this.TEXT_SHIFT3_SET_CHARS.length){var f=this.TEXT_SHIFT3_SET_CHARS[u];r?(t.append(String.fromCharCode(f.charCodeAt(0)+128)),r=!1):t.append(f),a=0}else throw new pt;break;default:throw new pt}}}while(e.available()>0)},n.decodeAnsiX12Segment=function(e,t){var r=[];do{if(e.available()===8)return;var i=e.readBits(8);if(i===254)return;this.parseTwoBytes(i,e.readBits(8),r);for(var a=0;a<3;a++){var o=r[a];switch(o){case 0:t.append("\r");break;case 1:t.append("*");break;case 2:t.append(">");break;case 3:t.append(" ");break;default:if(o<14)t.append(String.fromCharCode(o+44));else if(o<40)t.append(String.fromCharCode(o+51));else throw new pt;break}}}while(e.available()>0)},n.parseTwoBytes=function(e,t,r){var i=(e<<8)+t-1,a=Math.floor(i/1600);r[0]=a,i-=a*1600,a=Math.floor(i/40),r[1]=a,r[2]=i-a*40},n.decodeEdifactSegment=function(e,t){do{if(e.available()<=16)return;for(var r=0;r<4;r++){var i=e.readBits(6);if(i===31){var a=8-e.getBitOffset();a!==8&&e.readBits(a);return}(i&32)===0&&(i|=64),t.append(String.fromCharCode(i))}}while(e.available()>0)},n.decodeBase256Segment=function(e,t,r){var i=1+e.getByteOffset(),a=this.unrandomize255State(e.readBits(8),i++),o;if(a===0?o=e.available()/8|0:a<250?o=a:o=250*(a-249)+this.unrandomize255State(e.readBits(8),i++),o<0)throw new pt;for(var s=new Uint8Array(o),u=0;u<o;u++){if(e.available()<8)throw new pt;s[u]=this.unrandomize255State(e.readBits(8),i++)}r.push(s);try{t.append(Es.decode(s,Dn.ISO88591))}catch(f){throw new E0("Platform does not support required encoding: "+f.message)}},n.unrandomize255State=function(e,t){var r=149*t%255+1,i=e-r;return i>=0?i:i+256},n.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],n.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],n.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],n.TEXT_SHIFT2_SET_CHARS=n.C40_SHIFT2_SET_CHARS,n.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""],n}(),RB=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},NB=function(){function n(){this.rsDecoder=new Dm(xo.DATA_MATRIX_FIELD_256)}return n.prototype.decode=function(e){var t,r,i=new CB(e),a=i.getVersion(),o=i.readCodewords(),s=TB.getDataBlocks(o,a),u=0;try{for(var f=RB(s),h=f.next();!h.done;h=f.next()){var p=h.value;u+=p.getNumDataCodewords()}}catch(B){t={error:B}}finally{try{h&&!h.done&&(r=f.return)&&r.call(f)}finally{if(t)throw t.error}}for(var g=new Uint8Array(u),m=s.length,x=0;x<m;x++){var w=s[x],I=w.getCodewords(),C=w.getNumDataCodewords();this.correctErrors(I,C);for(var P=0;P<C;P++)g[P*m+x]=I[P]}return IB.decode(g)},n.prototype.correctErrors=function(e,t){var r=new Int32Array(e);try{this.rsDecoder.decode(r,e.length-t)}catch{throw new Qi}for(var i=0;i<t;i++)e[i]=r[i]},n}(),DB=function(){function n(e){this.image=e,this.rectangleDetector=new by(this.image)}return n.prototype.detect=function(){var e=this.rectangleDetector.detect(),t=this.detectSolid1(e);if(t=this.detectSolid2(t),t[3]=this.correctTopRight(t),!t[3])throw new ze;t=this.shiftToModuleCenter(t);var r=t[0],i=t[1],a=t[2],o=t[3],s=this.transitionsBetween(r,o)+1,u=this.transitionsBetween(a,o)+1;(s&1)===1&&(s+=1),(u&1)===1&&(u+=1),4*s<7*u&&4*u<7*s&&(s=u=Math.max(s,u));var f=n.sampleGrid(this.image,r,i,a,o,s,u);return new sx(f,[r,i,a,o])},n.shiftPoint=function(e,t,r){var i=(t.getX()-e.getX())/(r+1),a=(t.getY()-e.getY())/(r+1);return new It(e.getX()+i,e.getY()+a)},n.moveAway=function(e,t,r){var i=e.getX(),a=e.getY();return i<t?i-=1:i+=1,a<r?a-=1:a+=1,new It(i,a)},n.prototype.detectSolid1=function(e){var t=e[0],r=e[1],i=e[3],a=e[2],o=this.transitionsBetween(t,r),s=this.transitionsBetween(r,i),u=this.transitionsBetween(i,a),f=this.transitionsBetween(a,t),h=o,p=[a,t,r,i];return h>s&&(h=s,p[0]=t,p[1]=r,p[2]=i,p[3]=a),h>u&&(h=u,p[0]=r,p[1]=i,p[2]=a,p[3]=t),h>f&&(p[0]=i,p[1]=a,p[2]=t,p[3]=r),p},n.prototype.detectSolid2=function(e){var t=e[0],r=e[1],i=e[2],a=e[3],o=this.transitionsBetween(t,a),s=n.shiftPoint(r,i,(o+1)*4),u=n.shiftPoint(i,r,(o+1)*4),f=this.transitionsBetween(s,t),h=this.transitionsBetween(u,a);return f<h?(e[0]=t,e[1]=r,e[2]=i,e[3]=a):(e[0]=r,e[1]=i,e[2]=a,e[3]=t),e},n.prototype.correctTopRight=function(e){var t=e[0],r=e[1],i=e[2],a=e[3],o=this.transitionsBetween(t,a),s=this.transitionsBetween(r,a),u=n.shiftPoint(t,r,(s+1)*4),f=n.shiftPoint(i,r,(o+1)*4);o=this.transitionsBetween(u,a),s=this.transitionsBetween(f,a);var h=new It(a.getX()+(i.getX()-r.getX())/(o+1),a.getY()+(i.getY()-r.getY())/(o+1)),p=new It(a.getX()+(t.getX()-r.getX())/(s+1),a.getY()+(t.getY()-r.getY())/(s+1));if(!this.isValid(h))return this.isValid(p)?p:null;if(!this.isValid(p))return h;var g=this.transitionsBetween(u,h)+this.transitionsBetween(f,h),m=this.transitionsBetween(u,p)+this.transitionsBetween(f,p);return g>m?h:p},n.prototype.shiftToModuleCenter=function(e){var t=e[0],r=e[1],i=e[2],a=e[3],o=this.transitionsBetween(t,a)+1,s=this.transitionsBetween(i,a)+1,u=n.shiftPoint(t,r,s*4),f=n.shiftPoint(i,r,o*4);o=this.transitionsBetween(u,a)+1,s=this.transitionsBetween(f,a)+1,(o&1)===1&&(o+=1),(s&1)===1&&(s+=1);var h=(t.getX()+r.getX()+i.getX()+a.getX())/4,p=(t.getY()+r.getY()+i.getY()+a.getY())/4;t=n.moveAway(t,h,p),r=n.moveAway(r,h,p),i=n.moveAway(i,h,p),a=n.moveAway(a,h,p);var g,m;return u=n.shiftPoint(t,r,s*4),u=n.shiftPoint(u,a,o*4),g=n.shiftPoint(r,t,s*4),g=n.shiftPoint(g,i,o*4),f=n.shiftPoint(i,a,s*4),f=n.shiftPoint(f,r,o*4),m=n.shiftPoint(a,i,s*4),m=n.shiftPoint(m,t,o*4),[u,g,f,m]},n.prototype.isValid=function(e){return e.getX()>=0&&e.getX()<this.image.getWidth()&&e.getY()>0&&e.getY()<this.image.getHeight()},n.sampleGrid=function(e,t,r,i,a,o,s){var u=lx.getInstance();return u.sampleGrid(e,o,s,.5,.5,o-.5,.5,o-.5,s-.5,.5,s-.5,t.getX(),t.getY(),a.getX(),a.getY(),i.getX(),i.getY(),r.getX(),r.getY())},n.prototype.transitionsBetween=function(e,t){var r=Math.trunc(e.getX()),i=Math.trunc(e.getY()),a=Math.trunc(t.getX()),o=Math.trunc(t.getY()),s=Math.abs(o-i)>Math.abs(a-r);if(s){var u=r;r=i,i=u,u=a,a=o,o=u}for(var f=Math.abs(a-r),h=Math.abs(o-i),p=-f/2,g=i<o?1:-1,m=r<a?1:-1,x=0,w=this.image.get(s?i:r,s?r:i),I=r,C=i;I!==a;I+=m){var P=this.image.get(s?C:I,s?I:C);if(P!==w&&(x++,w=P),p+=h,p>0){if(C===o)break;C+=g,p-=f}}return x},n}(),Sy=function(){function n(){this.decoder=new NB}return n.prototype.decode=function(e,t){t===void 0&&(t=null);var r,i;if(t!=null&&t.has(kr.PURE_BARCODE)){var a=n.extractPureBits(e.getBlackMatrix());r=this.decoder.decode(a),i=n.NO_POINTS}else{var o=new DB(e.getBlackMatrix()).detect();r=this.decoder.decode(o.getBits()),i=o.getPoints()}var s=r.getRawBytes(),u=new Fa(r.getText(),s,8*s.length,i,Bt.DATA_MATRIX,br.currentTimeMillis()),f=r.getByteSegments();f!=null&&u.putMetadata(ha.BYTE_SEGMENTS,f);var h=r.getECLevel();return h!=null&&u.putMetadata(ha.ERROR_CORRECTION_LEVEL,h),u},n.prototype.reset=function(){},n.extractPureBits=function(e){var t=e.getTopLeftOnBit(),r=e.getBottomRightOnBit();if(t==null||r==null)throw new ze;var i=this.moduleSize(t,e),a=t[1],o=r[1],s=t[0],u=r[0],f=(u-s+1)/i,h=(o-a+1)/i;if(f<=0||h<=0)throw new ze;var p=i/2;a+=p,s+=p;for(var g=new iu(f,h),m=0;m<h;m++)for(var x=a+m*i,w=0;w<f;w++)e.get(s+w*i,x)&&g.set(w,m);return g},n.moduleSize=function(e,t){for(var r=t.getWidth(),i=e[0],a=e[1];i<r&&t.get(i,a);)i++;if(i===r)throw new ze;var o=i-e[0];if(o===0)throw new ze;return o},n.NO_POINTS=[],n}(),OB=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();(function(n){OB(e,n);function e(t){return t===void 0&&(t=500),n.call(this,new Sy,t)||this}return e})(Ld);var ad;(function(n){n[n.L=0]="L",n[n.M=1]="M",n[n.Q=2]="Q",n[n.H=3]="H"})(ad||(ad={}));var PB=function(){function n(e,t,r){this.value=e,this.stringValue=t,this.bits=r,n.FOR_BITS.set(r,this),n.FOR_VALUE.set(e,this)}return n.prototype.getValue=function(){return this.value},n.prototype.getBits=function(){return this.bits},n.fromString=function(e){switch(e){case"L":return n.L;case"M":return n.M;case"Q":return n.Q;case"H":return n.H;default:throw new nl(e+"not available")}},n.prototype.toString=function(){return this.stringValue},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.value===t.value},n.forBits=function(e){if(e<0||e>=n.FOR_BITS.size)throw new jt;return n.FOR_BITS.get(e)},n.FOR_BITS=new Map,n.FOR_VALUE=new Map,n.L=new n(ad.L,"L",1),n.M=new n(ad.M,"M",0),n.Q=new n(ad.Q,"Q",3),n.H=new n(ad.H,"H",2),n}(),LB=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},_S=function(){function n(e){this.errorCorrectionLevel=PB.forBits(e>>3&3),this.dataMask=e&7}return n.numBitsDiffering=function(e,t){return gn.bitCount(e^t)},n.decodeFormatInformation=function(e,t){var r=n.doDecodeFormatInformation(e,t);return r!==null?r:n.doDecodeFormatInformation(e^n.FORMAT_INFO_MASK_QR,t^n.FORMAT_INFO_MASK_QR)},n.doDecodeFormatInformation=function(e,t){var r,i,a=Number.MAX_SAFE_INTEGER,o=0;try{for(var s=LB(n.FORMAT_INFO_DECODE_LOOKUP),u=s.next();!u.done;u=s.next()){var f=u.value,h=f[0];if(h===e||h===t)return new n(f[1]);var p=n.numBitsDiffering(e,h);p<a&&(o=f[1],a=p),e!==t&&(p=n.numBitsDiffering(t,h),p<a&&(o=f[1],a=p))}}catch(g){r={error:g}}finally{try{u&&!u.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}return a<=3?new n(o):null},n.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},n.prototype.getDataMask=function(){return this.dataMask},n.prototype.hashCode=function(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.errorCorrectionLevel===t.errorCorrectionLevel&&this.dataMask===t.dataMask},n.FORMAT_INFO_MASK_QR=21522,n.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])],n}(),kB=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Me=function(){function n(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this.ecCodewordsPerBlock=e,this.ecBlocks=t}return n.prototype.getECCodewordsPerBlock=function(){return this.ecCodewordsPerBlock},n.prototype.getNumBlocks=function(){var e,t,r=0,i=this.ecBlocks;try{for(var a=kB(i),o=a.next();!o.done;o=a.next()){var s=o.value;r+=s.getCount()}}catch(u){e={error:u}}finally{try{o&&!o.done&&(t=a.return)&&t.call(a)}finally{if(e)throw e.error}}return r},n.prototype.getTotalECCodewords=function(){return this.ecCodewordsPerBlock*this.getNumBlocks()},n.prototype.getECBlocks=function(){return this.ecBlocks},n}(),fe=function(){function n(e,t){this.count=e,this.dataCodewords=t}return n.prototype.getCount=function(){return this.count},n.prototype.getDataCodewords=function(){return this.dataCodewords},n}(),MB=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Zf=function(){function n(e,t){for(var r,i,a=[],o=2;o<arguments.length;o++)a[o-2]=arguments[o];this.versionNumber=e,this.alignmentPatternCenters=t,this.ecBlocks=a;var s=0,u=a[0].getECCodewordsPerBlock(),f=a[0].getECBlocks();try{for(var h=MB(f),p=h.next();!p.done;p=h.next()){var g=p.value;s+=g.getCount()*(g.getDataCodewords()+u)}}catch(m){r={error:m}}finally{try{p&&!p.done&&(i=h.return)&&i.call(h)}finally{if(r)throw r.error}}this.totalCodewords=s}return n.prototype.getVersionNumber=function(){return this.versionNumber},n.prototype.getAlignmentPatternCenters=function(){return this.alignmentPatternCenters},n.prototype.getTotalCodewords=function(){return this.totalCodewords},n.prototype.getDimensionForVersion=function(){return 17+4*this.versionNumber},n.prototype.getECBlocksForLevel=function(e){return this.ecBlocks[e.getValue()]},n.getProvisionalVersionForDimension=function(e){if(e%4!==1)throw new pt;try{return this.getVersionForNumber((e-17)/4)}catch{throw new pt}},n.getVersionForNumber=function(e){if(e<1||e>40)throw new jt;return n.VERSIONS[e-1]},n.decodeVersionInformation=function(e){for(var t=Number.MAX_SAFE_INTEGER,r=0,i=0;i<n.VERSION_DECODE_INFO.length;i++){var a=n.VERSION_DECODE_INFO[i];if(a===e)return n.getVersionForNumber(i+7);var o=_S.numBitsDiffering(e,a);o<t&&(r=i+7,t=o)}return t<=3?n.getVersionForNumber(r):null},n.prototype.buildFunctionPattern=function(){var e=this.getDimensionForVersion(),t=new iu(e);t.setRegion(0,0,9,9),t.setRegion(e-8,0,8,9),t.setRegion(0,e-8,9,8);for(var r=this.alignmentPatternCenters.length,i=0;i<r;i++)for(var a=this.alignmentPatternCenters[i]-2,o=0;o<r;o++)i===0&&(o===0||o===r-1)||i===r-1&&o===0||t.setRegion(this.alignmentPatternCenters[o]-2,a,5,5);return t.setRegion(6,9,1,e-17),t.setRegion(9,6,e-17,1),this.versionNumber>6&&(t.setRegion(e-11,0,3,6),t.setRegion(0,e-11,6,3)),t},n.prototype.toString=function(){return""+this.versionNumber},n.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),n.VERSIONS=[new n(1,new Int32Array(0),new Me(7,new fe(1,19)),new Me(10,new fe(1,16)),new Me(13,new fe(1,13)),new Me(17,new fe(1,9))),new n(2,Int32Array.from([6,18]),new Me(10,new fe(1,34)),new Me(16,new fe(1,28)),new Me(22,new fe(1,22)),new Me(28,new fe(1,16))),new n(3,Int32Array.from([6,22]),new Me(15,new fe(1,55)),new Me(26,new fe(1,44)),new Me(18,new fe(2,17)),new Me(22,new fe(2,13))),new n(4,Int32Array.from([6,26]),new Me(20,new fe(1,80)),new Me(18,new fe(2,32)),new Me(26,new fe(2,24)),new Me(16,new fe(4,9))),new n(5,Int32Array.from([6,30]),new Me(26,new fe(1,108)),new Me(24,new fe(2,43)),new Me(18,new fe(2,15),new fe(2,16)),new Me(22,new fe(2,11),new fe(2,12))),new n(6,Int32Array.from([6,34]),new Me(18,new fe(2,68)),new Me(16,new fe(4,27)),new Me(24,new fe(4,19)),new Me(28,new fe(4,15))),new n(7,Int32Array.from([6,22,38]),new Me(20,new fe(2,78)),new Me(18,new fe(4,31)),new Me(18,new fe(2,14),new fe(4,15)),new Me(26,new fe(4,13),new fe(1,14))),new n(8,Int32Array.from([6,24,42]),new Me(24,new fe(2,97)),new Me(22,new fe(2,38),new fe(2,39)),new Me(22,new fe(4,18),new fe(2,19)),new Me(26,new fe(4,14),new fe(2,15))),new n(9,Int32Array.from([6,26,46]),new Me(30,new fe(2,116)),new Me(22,new fe(3,36),new fe(2,37)),new Me(20,new fe(4,16),new fe(4,17)),new Me(24,new fe(4,12),new fe(4,13))),new n(10,Int32Array.from([6,28,50]),new Me(18,new fe(2,68),new fe(2,69)),new Me(26,new fe(4,43),new fe(1,44)),new Me(24,new fe(6,19),new fe(2,20)),new Me(28,new fe(6,15),new fe(2,16))),new n(11,Int32Array.from([6,30,54]),new Me(20,new fe(4,81)),new Me(30,new fe(1,50),new fe(4,51)),new Me(28,new fe(4,22),new fe(4,23)),new Me(24,new fe(3,12),new fe(8,13))),new n(12,Int32Array.from([6,32,58]),new Me(24,new fe(2,92),new fe(2,93)),new Me(22,new fe(6,36),new fe(2,37)),new Me(26,new fe(4,20),new fe(6,21)),new Me(28,new fe(7,14),new fe(4,15))),new n(13,Int32Array.from([6,34,62]),new Me(26,new fe(4,107)),new Me(22,new fe(8,37),new fe(1,38)),new Me(24,new fe(8,20),new fe(4,21)),new Me(22,new fe(12,11),new fe(4,12))),new n(14,Int32Array.from([6,26,46,66]),new Me(30,new fe(3,115),new fe(1,116)),new Me(24,new fe(4,40),new fe(5,41)),new Me(20,new fe(11,16),new fe(5,17)),new Me(24,new fe(11,12),new fe(5,13))),new n(15,Int32Array.from([6,26,48,70]),new Me(22,new fe(5,87),new fe(1,88)),new Me(24,new fe(5,41),new fe(5,42)),new Me(30,new fe(5,24),new fe(7,25)),new Me(24,new fe(11,12),new fe(7,13))),new n(16,Int32Array.from([6,26,50,74]),new Me(24,new fe(5,98),new fe(1,99)),new Me(28,new fe(7,45),new fe(3,46)),new Me(24,new fe(15,19),new fe(2,20)),new Me(30,new fe(3,15),new fe(13,16))),new n(17,Int32Array.from([6,30,54,78]),new Me(28,new fe(1,107),new fe(5,108)),new Me(28,new fe(10,46),new fe(1,47)),new Me(28,new fe(1,22),new fe(15,23)),new Me(28,new fe(2,14),new fe(17,15))),new n(18,Int32Array.from([6,30,56,82]),new Me(30,new fe(5,120),new fe(1,121)),new Me(26,new fe(9,43),new fe(4,44)),new Me(28,new fe(17,22),new fe(1,23)),new Me(28,new fe(2,14),new fe(19,15))),new n(19,Int32Array.from([6,30,58,86]),new Me(28,new fe(3,113),new fe(4,114)),new Me(26,new fe(3,44),new fe(11,45)),new Me(26,new fe(17,21),new fe(4,22)),new Me(26,new fe(9,13),new fe(16,14))),new n(20,Int32Array.from([6,34,62,90]),new Me(28,new fe(3,107),new fe(5,108)),new Me(26,new fe(3,41),new fe(13,42)),new Me(30,new fe(15,24),new fe(5,25)),new Me(28,new fe(15,15),new fe(10,16))),new n(21,Int32Array.from([6,28,50,72,94]),new Me(28,new fe(4,116),new fe(4,117)),new Me(26,new fe(17,42)),new Me(28,new fe(17,22),new fe(6,23)),new Me(30,new fe(19,16),new fe(6,17))),new n(22,Int32Array.from([6,26,50,74,98]),new Me(28,new fe(2,111),new fe(7,112)),new Me(28,new fe(17,46)),new Me(30,new fe(7,24),new fe(16,25)),new Me(24,new fe(34,13))),new n(23,Int32Array.from([6,30,54,78,102]),new Me(30,new fe(4,121),new fe(5,122)),new Me(28,new fe(4,47),new fe(14,48)),new Me(30,new fe(11,24),new fe(14,25)),new Me(30,new fe(16,15),new fe(14,16))),new n(24,Int32Array.from([6,28,54,80,106]),new Me(30,new fe(6,117),new fe(4,118)),new Me(28,new fe(6,45),new fe(14,46)),new Me(30,new fe(11,24),new fe(16,25)),new Me(30,new fe(30,16),new fe(2,17))),new n(25,Int32Array.from([6,32,58,84,110]),new Me(26,new fe(8,106),new fe(4,107)),new Me(28,new fe(8,47),new fe(13,48)),new Me(30,new fe(7,24),new fe(22,25)),new Me(30,new fe(22,15),new fe(13,16))),new n(26,Int32Array.from([6,30,58,86,114]),new Me(28,new fe(10,114),new fe(2,115)),new Me(28,new fe(19,46),new fe(4,47)),new Me(28,new fe(28,22),new fe(6,23)),new Me(30,new fe(33,16),new fe(4,17))),new n(27,Int32Array.from([6,34,62,90,118]),new Me(30,new fe(8,122),new fe(4,123)),new Me(28,new fe(22,45),new fe(3,46)),new Me(30,new fe(8,23),new fe(26,24)),new Me(30,new fe(12,15),new fe(28,16))),new n(28,Int32Array.from([6,26,50,74,98,122]),new Me(30,new fe(3,117),new fe(10,118)),new Me(28,new fe(3,45),new fe(23,46)),new Me(30,new fe(4,24),new fe(31,25)),new Me(30,new fe(11,15),new fe(31,16))),new n(29,Int32Array.from([6,30,54,78,102,126]),new Me(30,new fe(7,116),new fe(7,117)),new Me(28,new fe(21,45),new fe(7,46)),new Me(30,new fe(1,23),new fe(37,24)),new Me(30,new fe(19,15),new fe(26,16))),new n(30,Int32Array.from([6,26,52,78,104,130]),new Me(30,new fe(5,115),new fe(10,116)),new Me(28,new fe(19,47),new fe(10,48)),new Me(30,new fe(15,24),new fe(25,25)),new Me(30,new fe(23,15),new fe(25,16))),new n(31,Int32Array.from([6,30,56,82,108,134]),new Me(30,new fe(13,115),new fe(3,116)),new Me(28,new fe(2,46),new fe(29,47)),new Me(30,new fe(42,24),new fe(1,25)),new Me(30,new fe(23,15),new fe(28,16))),new n(32,Int32Array.from([6,34,60,86,112,138]),new Me(30,new fe(17,115)),new Me(28,new fe(10,46),new fe(23,47)),new Me(30,new fe(10,24),new fe(35,25)),new Me(30,new fe(19,15),new fe(35,16))),new n(33,Int32Array.from([6,30,58,86,114,142]),new Me(30,new fe(17,115),new fe(1,116)),new Me(28,new fe(14,46),new fe(21,47)),new Me(30,new fe(29,24),new fe(19,25)),new Me(30,new fe(11,15),new fe(46,16))),new n(34,Int32Array.from([6,34,62,90,118,146]),new Me(30,new fe(13,115),new fe(6,116)),new Me(28,new fe(14,46),new fe(23,47)),new Me(30,new fe(44,24),new fe(7,25)),new Me(30,new fe(59,16),new fe(1,17))),new n(35,Int32Array.from([6,30,54,78,102,126,150]),new Me(30,new fe(12,121),new fe(7,122)),new Me(28,new fe(12,47),new fe(26,48)),new Me(30,new fe(39,24),new fe(14,25)),new Me(30,new fe(22,15),new fe(41,16))),new n(36,Int32Array.from([6,24,50,76,102,128,154]),new Me(30,new fe(6,121),new fe(14,122)),new Me(28,new fe(6,47),new fe(34,48)),new Me(30,new fe(46,24),new fe(10,25)),new Me(30,new fe(2,15),new fe(64,16))),new n(37,Int32Array.from([6,28,54,80,106,132,158]),new Me(30,new fe(17,122),new fe(4,123)),new Me(28,new fe(29,46),new fe(14,47)),new Me(30,new fe(49,24),new fe(10,25)),new Me(30,new fe(24,15),new fe(46,16))),new n(38,Int32Array.from([6,32,58,84,110,136,162]),new Me(30,new fe(4,122),new fe(18,123)),new Me(28,new fe(13,46),new fe(32,47)),new Me(30,new fe(48,24),new fe(14,25)),new Me(30,new fe(42,15),new fe(32,16))),new n(39,Int32Array.from([6,26,54,82,110,138,166]),new Me(30,new fe(20,117),new fe(4,118)),new Me(28,new fe(40,47),new fe(7,48)),new Me(30,new fe(43,24),new fe(22,25)),new Me(30,new fe(10,15),new fe(67,16))),new n(40,Int32Array.from([6,30,58,86,114,142,170]),new Me(30,new fe(19,118),new fe(6,119)),new Me(28,new fe(18,47),new fe(31,48)),new Me(30,new fe(34,24),new fe(34,25)),new Me(30,new fe(20,15),new fe(61,16)))],n}(),$i;(function(n){n[n.DATA_MASK_000=0]="DATA_MASK_000",n[n.DATA_MASK_001=1]="DATA_MASK_001",n[n.DATA_MASK_010=2]="DATA_MASK_010",n[n.DATA_MASK_011=3]="DATA_MASK_011",n[n.DATA_MASK_100=4]="DATA_MASK_100",n[n.DATA_MASK_101=5]="DATA_MASK_101",n[n.DATA_MASK_110=6]="DATA_MASK_110",n[n.DATA_MASK_111=7]="DATA_MASK_111"})($i||($i={}));var V3=function(){function n(e,t){this.value=e,this.isMasked=t}return n.prototype.unmaskBitMatrix=function(e,t){for(var r=0;r<t;r++)for(var i=0;i<t;i++)this.isMasked(r,i)&&e.flip(i,r)},n.values=new Map([[$i.DATA_MASK_000,new n($i.DATA_MASK_000,function(e,t){return(e+t&1)===0})],[$i.DATA_MASK_001,new n($i.DATA_MASK_001,function(e,t){return(e&1)===0})],[$i.DATA_MASK_010,new n($i.DATA_MASK_010,function(e,t){return t%3===0})],[$i.DATA_MASK_011,new n($i.DATA_MASK_011,function(e,t){return(e+t)%3===0})],[$i.DATA_MASK_100,new n($i.DATA_MASK_100,function(e,t){return(Math.floor(e/2)+Math.floor(t/3)&1)===0})],[$i.DATA_MASK_101,new n($i.DATA_MASK_101,function(e,t){return e*t%6===0})],[$i.DATA_MASK_110,new n($i.DATA_MASK_110,function(e,t){return e*t%6<3})],[$i.DATA_MASK_111,new n($i.DATA_MASK_111,function(e,t){return(e+t+e*t%3&1)===0})]]),n}(),BB=function(){function n(e){var t=e.getHeight();if(t<21||(t&3)!==1)throw new pt;this.bitMatrix=e}return n.prototype.readFormatInformation=function(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;for(var e=0,t=0;t<6;t++)e=this.copyBit(t,8,e);e=this.copyBit(7,8,e),e=this.copyBit(8,8,e),e=this.copyBit(8,7,e);for(var r=5;r>=0;r--)e=this.copyBit(8,r,e);for(var i=this.bitMatrix.getHeight(),a=0,o=i-7,r=i-1;r>=o;r--)a=this.copyBit(8,r,a);for(var t=i-8;t<i;t++)a=this.copyBit(t,8,a);if(this.parsedFormatInfo=_S.decodeFormatInformation(e,a),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new pt},n.prototype.readVersion=function(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;var e=this.bitMatrix.getHeight(),t=Math.floor((e-17)/4);if(t<=6)return Zf.getVersionForNumber(t);for(var r=0,i=e-11,a=5;a>=0;a--)for(var o=e-9;o>=i;o--)r=this.copyBit(o,a,r);var s=Zf.decodeVersionInformation(r);if(s!==null&&s.getDimensionForVersion()===e)return this.parsedVersion=s,s;r=0;for(var o=5;o>=0;o--)for(var a=e-9;a>=i;a--)r=this.copyBit(o,a,r);if(s=Zf.decodeVersionInformation(r),s!==null&&s.getDimensionForVersion()===e)return this.parsedVersion=s,s;throw new pt},n.prototype.copyBit=function(e,t,r){var i=this.isMirror?this.bitMatrix.get(t,e):this.bitMatrix.get(e,t);return i?r<<1|1:r<<1},n.prototype.readCodewords=function(){var e=this.readFormatInformation(),t=this.readVersion(),r=V3.values.get(e.getDataMask()),i=this.bitMatrix.getHeight();r.unmaskBitMatrix(this.bitMatrix,i);for(var a=t.buildFunctionPattern(),o=!0,s=new Uint8Array(t.getTotalCodewords()),u=0,f=0,h=0,p=i-1;p>0;p-=2){p===6&&p--;for(var g=0;g<i;g++)for(var m=o?i-1-g:g,x=0;x<2;x++)a.get(p-x,m)||(h++,f<<=1,this.bitMatrix.get(p-x,m)&&(f|=1),h===8&&(s[u++]=f,h=0,f=0));o=!o}if(u!==t.getTotalCodewords())throw new pt;return s},n.prototype.remask=function(){if(this.parsedFormatInfo!==null){var e=V3.values.get(this.parsedFormatInfo.getDataMask()),t=this.bitMatrix.getHeight();e.unmaskBitMatrix(this.bitMatrix,t)}},n.prototype.setMirror=function(e){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=e},n.prototype.mirror=function(){for(var e=this.bitMatrix,t=0,r=e.getWidth();t<r;t++)for(var i=t+1,a=e.getHeight();i<a;i++)e.get(t,i)!==e.get(i,t)&&(e.flip(i,t),e.flip(t,i))},n}(),z3=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},jB=function(){function n(e,t){this.numDataCodewords=e,this.codewords=t}return n.getDataBlocks=function(e,t,r){var i,a,o,s;if(e.length!==t.getTotalCodewords())throw new jt;var u=t.getECBlocksForLevel(r),f=0,h=u.getECBlocks();try{for(var p=z3(h),g=p.next();!g.done;g=p.next()){var m=g.value;f+=m.getCount()}}catch(j){i={error:j}}finally{try{g&&!g.done&&(a=p.return)&&a.call(p)}finally{if(i)throw i.error}}var x=new Array(f),w=0;try{for(var I=z3(h),C=I.next();!C.done;C=I.next())for(var m=C.value,P=0;P<m.getCount();P++){var B=m.getDataCodewords(),V=u.getECCodewordsPerBlock()+B;x[w++]=new n(B,new Uint8Array(V))}}catch(j){o={error:j}}finally{try{C&&!C.done&&(s=I.return)&&s.call(I)}finally{if(o)throw o.error}}for(var Y=x[0].codewords.length,q=x.length-1;q>=0;){var D=x[q].codewords.length;if(D===Y)break;q--}q++;for(var A=Y-u.getECCodewordsPerBlock(),T=0,P=0;P<A;P++)for(var k=0;k<w;k++)x[k].codewords[P]=e[T++];for(var k=q;k<w;k++)x[k].codewords[A]=e[T++];for(var R=x[0].codewords.length,P=A;P<R;P++)for(var k=0;k<w;k++){var L=k<q?P:P+1;x[k].codewords[L]=e[T++]}return x},n.prototype.getNumDataCodewords=function(){return this.numDataCodewords},n.prototype.getCodewords=function(){return this.codewords},n}(),ws;(function(n){n[n.TERMINATOR=0]="TERMINATOR",n[n.NUMERIC=1]="NUMERIC",n[n.ALPHANUMERIC=2]="ALPHANUMERIC",n[n.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",n[n.BYTE=4]="BYTE",n[n.ECI=5]="ECI",n[n.KANJI=6]="KANJI",n[n.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",n[n.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",n[n.HANZI=9]="HANZI"})(ws||(ws={}));var Tr=function(){function n(e,t,r,i){this.value=e,this.stringValue=t,this.characterCountBitsForVersions=r,this.bits=i,n.FOR_BITS.set(i,this),n.FOR_VALUE.set(e,this)}return n.forBits=function(e){var t=n.FOR_BITS.get(e);if(t===void 0)throw new jt;return t},n.prototype.getCharacterCountBits=function(e){var t=e.getVersionNumber(),r;return t<=9?r=0:t<=26?r=1:r=2,this.characterCountBitsForVersions[r]},n.prototype.getValue=function(){return this.value},n.prototype.getBits=function(){return this.bits},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.value===t.value},n.prototype.toString=function(){return this.stringValue},n.FOR_BITS=new Map,n.FOR_VALUE=new Map,n.TERMINATOR=new n(ws.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),n.NUMERIC=new n(ws.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),n.ALPHANUMERIC=new n(ws.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),n.STRUCTURED_APPEND=new n(ws.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),n.BYTE=new n(ws.BYTE,"BYTE",Int32Array.from([8,16,16]),4),n.ECI=new n(ws.ECI,"ECI",Int32Array.from([0,0,0]),7),n.KANJI=new n(ws.KANJI,"KANJI",Int32Array.from([8,10,12]),8),n.FNC1_FIRST_POSITION=new n(ws.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),n.FNC1_SECOND_POSITION=new n(ws.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),n.HANZI=new n(ws.HANZI,"HANZI",Int32Array.from([8,10,12]),13),n}(),FB=function(){function n(){}return n.decode=function(e,t,r,i){var a=new xS(e),o=new cn,s=new Array,u=-1,f=-1;try{var h=null,p=!1,g=void 0;do{if(a.available()<4)g=Tr.TERMINATOR;else{var m=a.readBits(4);g=Tr.forBits(m)}switch(g){case Tr.TERMINATOR:break;case Tr.FNC1_FIRST_POSITION:case Tr.FNC1_SECOND_POSITION:p=!0;break;case Tr.STRUCTURED_APPEND:if(a.available()<16)throw new pt;u=a.readBits(8),f=a.readBits(8);break;case Tr.ECI:var x=n.parseECIValue(a);if(h=Li.getCharacterSetECIByValue(x),h===null)throw new pt;break;case Tr.HANZI:var w=a.readBits(4),I=a.readBits(g.getCharacterCountBits(t));w===n.GB2312_SUBSET&&n.decodeHanziSegment(a,o,I);break;default:var C=a.readBits(g.getCharacterCountBits(t));switch(g){case Tr.NUMERIC:n.decodeNumericSegment(a,o,C);break;case Tr.ALPHANUMERIC:n.decodeAlphanumericSegment(a,o,C,p);break;case Tr.BYTE:n.decodeByteSegment(a,o,C,h,s,i);break;case Tr.KANJI:n.decodeKanjiSegment(a,o,C);break;default:throw new pt}break}}while(g!==Tr.TERMINATOR)}catch{throw new pt}return new Nm(e,o.toString(),s.length===0?null:s,r===null?null:r.toString(),u,f)},n.decodeHanziSegment=function(e,t,r){if(r*13>e.available())throw new pt;for(var i=new Uint8Array(2*r),a=0;r>0;){var o=e.readBits(13),s=o/96<<8&4294967295|o%96;s<959?s+=41377:s+=42657,i[a]=s>>8&255,i[a+1]=s&255,a+=2,r--}try{t.append(Es.decode(i,Dn.GB2312))}catch(u){throw new pt(u)}},n.decodeKanjiSegment=function(e,t,r){if(r*13>e.available())throw new pt;for(var i=new Uint8Array(2*r),a=0;r>0;){var o=e.readBits(13),s=o/192<<8&4294967295|o%192;s<7936?s+=33088:s+=49472,i[a]=s>>8,i[a+1]=s,a+=2,r--}try{t.append(Es.decode(i,Dn.SHIFT_JIS))}catch(u){throw new pt(u)}},n.decodeByteSegment=function(e,t,r,i,a,o){if(8*r>e.available())throw new pt;for(var s=new Uint8Array(r),u=0;u<r;u++)s[u]=e.readBits(8);var f;i===null?f=Dn.guessEncoding(s,o):f=i.getName();try{t.append(Es.decode(s,f))}catch(h){throw new pt(h)}a.push(s)},n.toAlphaNumericChar=function(e){if(e>=n.ALPHANUMERIC_CHARS.length)throw new pt;return n.ALPHANUMERIC_CHARS[e]},n.decodeAlphanumericSegment=function(e,t,r,i){for(var a=t.length();r>1;){if(e.available()<11)throw new pt;var o=e.readBits(11);t.append(n.toAlphaNumericChar(Math.floor(o/45))),t.append(n.toAlphaNumericChar(o%45)),r-=2}if(r===1){if(e.available()<6)throw new pt;t.append(n.toAlphaNumericChar(e.readBits(6)))}if(i)for(var s=a;s<t.length();s++)t.charAt(s)==="%"&&(s<t.length()-1&&t.charAt(s+1)==="%"?t.deleteCharAt(s+1):t.setCharAt(s,""))},n.decodeNumericSegment=function(e,t,r){for(;r>=3;){if(e.available()<10)throw new pt;var i=e.readBits(10);if(i>=1e3)throw new pt;t.append(n.toAlphaNumericChar(Math.floor(i/100))),t.append(n.toAlphaNumericChar(Math.floor(i/10)%10)),t.append(n.toAlphaNumericChar(i%10)),r-=3}if(r===2){if(e.available()<7)throw new pt;var a=e.readBits(7);if(a>=100)throw new pt;t.append(n.toAlphaNumericChar(Math.floor(a/10))),t.append(n.toAlphaNumericChar(a%10))}else if(r===1){if(e.available()<4)throw new pt;var o=e.readBits(4);if(o>=10)throw new pt;t.append(n.toAlphaNumericChar(o))}},n.parseECIValue=function(e){var t=e.readBits(8);if((t&128)===0)return t&127;if((t&192)===128){var r=e.readBits(8);return(t&63)<<8&4294967295|r}if((t&224)===192){var i=e.readBits(16);return(t&31)<<16&4294967295|i}throw new pt},n.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",n.GB2312_SUBSET=1,n}(),wS=function(){function n(e){this.mirrored=e}return n.prototype.isMirrored=function(){return this.mirrored},n.prototype.applyMirroredCorrection=function(e){if(!(!this.mirrored||e===null||e.length<3)){var t=e[0];e[0]=e[2],e[2]=t}},n}(),q3=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},UB=function(){function n(){this.rsDecoder=new Dm(xo.QR_CODE_FIELD_256)}return n.prototype.decodeBooleanArray=function(e,t){return this.decodeBitMatrix(iu.parseFromBooleanArray(e),t)},n.prototype.decodeBitMatrix=function(e,t){var r=new BB(e),i=null;try{return this.decodeBitMatrixParser(r,t)}catch(o){i=o}try{r.remask(),r.setMirror(!0),r.readVersion(),r.readFormatInformation(),r.mirror();var a=this.decodeBitMatrixParser(r,t);return a.setOther(new wS(!0)),a}catch(o){throw i!==null?i:o}},n.prototype.decodeBitMatrixParser=function(e,t){var r,i,a,o,s=e.readVersion(),u=e.readFormatInformation().getErrorCorrectionLevel(),f=e.readCodewords(),h=jB.getDataBlocks(f,s,u),p=0;try{for(var g=q3(h),m=g.next();!m.done;m=g.next()){var x=m.value;p+=x.getNumDataCodewords()}}catch(q){r={error:q}}finally{try{m&&!m.done&&(i=g.return)&&i.call(g)}finally{if(r)throw r.error}}var w=new Uint8Array(p),I=0;try{for(var C=q3(h),P=C.next();!P.done;P=C.next()){var x=P.value,B=x.getCodewords(),V=x.getNumDataCodewords();this.correctErrors(B,V);for(var Y=0;Y<V;Y++)w[I++]=B[Y]}}catch(q){a={error:q}}finally{try{P&&!P.done&&(o=C.return)&&o.call(C)}finally{if(a)throw a.error}}return FB.decode(w,s,u,t)},n.prototype.correctErrors=function(e,t){var r=new Int32Array(e);try{this.rsDecoder.decode(r,e.length-t)}catch{throw new Qi}for(var i=0;i<t;i++)e[i]=r[i]},n}(),VB=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),zB=function(n){VB(e,n);function e(t,r,i){var a=n.call(this,t,r)||this;return a.estimatedModuleSize=i,a}return e.prototype.aboutEquals=function(t,r,i){if(Math.abs(r-this.getY())<=t&&Math.abs(i-this.getX())<=t){var a=Math.abs(t-this.estimatedModuleSize);return a<=1||a<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(t,r,i){var a=(this.getX()+r)/2,o=(this.getY()+t)/2,s=(this.estimatedModuleSize+i)/2;return new e(a,o,s)},e}(It),qB=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},HB=function(){function n(e,t,r,i,a,o,s){this.image=e,this.startX=t,this.startY=r,this.width=i,this.height=a,this.moduleSize=o,this.resultPointCallback=s,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}return n.prototype.find=function(){for(var e=this.startX,t=this.height,r=this.width,i=e+r,a=this.startY+t/2,o=new Int32Array(3),s=this.image,u=0;u<t;u++){var f=a+((u&1)===0?Math.floor((u+1)/2):-Math.floor((u+1)/2));o[0]=0,o[1]=0,o[2]=0;for(var h=e;h<i&&!s.get(h,f);)h++;for(var p=0;h<i;){if(s.get(h,f))if(p===1)o[1]++;else if(p===2){if(this.foundPatternCross(o)){var g=this.handlePossibleCenter(o,f,h);if(g!==null)return g}o[0]=o[2],o[1]=1,o[2]=0,p=1}else o[++p]++;else p===1&&p++,o[p]++;h++}if(this.foundPatternCross(o)){var g=this.handlePossibleCenter(o,f,i);if(g!==null)return g}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new ze},n.centerFromEnd=function(e,t){return t-e[2]-e[1]/2},n.prototype.foundPatternCross=function(e){for(var t=this.moduleSize,r=t/2,i=0;i<3;i++)if(Math.abs(t-e[i])>=r)return!1;return!0},n.prototype.crossCheckVertical=function(e,t,r,i){var a=this.image,o=a.getHeight(),s=this.crossCheckStateCount;s[0]=0,s[1]=0,s[2]=0;for(var u=e;u>=0&&a.get(t,u)&&s[1]<=r;)s[1]++,u--;if(u<0||s[1]>r)return NaN;for(;u>=0&&!a.get(t,u)&&s[0]<=r;)s[0]++,u--;if(s[0]>r)return NaN;for(u=e+1;u<o&&a.get(t,u)&&s[1]<=r;)s[1]++,u++;if(u===o||s[1]>r)return NaN;for(;u<o&&!a.get(t,u)&&s[2]<=r;)s[2]++,u++;if(s[2]>r)return NaN;var f=s[0]+s[1]+s[2];return 5*Math.abs(f-i)>=2*i?NaN:this.foundPatternCross(s)?n.centerFromEnd(s,u):NaN},n.prototype.handlePossibleCenter=function(e,t,r){var i,a,o=e[0]+e[1]+e[2],s=n.centerFromEnd(e,r),u=this.crossCheckVertical(t,s,2*e[1],o);if(!isNaN(u)){var f=(e[0]+e[1]+e[2])/3;try{for(var h=qB(this.possibleCenters),p=h.next();!p.done;p=h.next()){var g=p.value;if(g.aboutEquals(f,u,s))return g.combineEstimate(u,s,f)}}catch(x){i={error:x}}finally{try{p&&!p.done&&(a=h.return)&&a.call(h)}finally{if(i)throw i.error}}var m=new zB(s,u,f);this.possibleCenters.push(m),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(m)}return null},n}(),WB=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),GB=function(n){WB(e,n);function e(t,r,i,a){var o=n.call(this,t,r)||this;return o.estimatedModuleSize=i,o.count=a,a===void 0&&(o.count=1),o}return e.prototype.getEstimatedModuleSize=function(){return this.estimatedModuleSize},e.prototype.getCount=function(){return this.count},e.prototype.aboutEquals=function(t,r,i){if(Math.abs(r-this.getY())<=t&&Math.abs(i-this.getX())<=t){var a=Math.abs(t-this.estimatedModuleSize);return a<=1||a<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(t,r,i){var a=this.count+1,o=(this.count*this.getX()+r)/a,s=(this.count*this.getY()+t)/a,u=(this.count*this.estimatedModuleSize+i)/a;return new e(o,s,u,a)},e}(It),$B=function(){function n(e){this.bottomLeft=e[0],this.topLeft=e[1],this.topRight=e[2]}return n.prototype.getBottomLeft=function(){return this.bottomLeft},n.prototype.getTopLeft=function(){return this.topLeft},n.prototype.getTopRight=function(){return this.topRight},n}(),A1=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},XB=function(){function n(e,t){this.image=e,this.resultPointCallback=t,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=t}return n.prototype.getImage=function(){return this.image},n.prototype.getPossibleCenters=function(){return this.possibleCenters},n.prototype.find=function(e){var t=e!=null&&e.get(kr.TRY_HARDER)!==void 0,r=e!=null&&e.get(kr.PURE_BARCODE)!==void 0,i=this.image,a=i.getHeight(),o=i.getWidth(),s=Math.floor(3*a/(4*n.MAX_MODULES));(s<n.MIN_SKIP||t)&&(s=n.MIN_SKIP);for(var u=!1,f=new Int32Array(5),h=s-1;h<a&&!u;h+=s){f[0]=0,f[1]=0,f[2]=0,f[3]=0,f[4]=0;for(var p=0,g=0;g<o;g++)if(i.get(g,h))(p&1)===1&&p++,f[p]++;else if((p&1)===0)if(p===4)if(n.foundPatternCross(f)){var m=this.handlePossibleCenter(f,h,g,r);if(m===!0)if(s=2,this.hasSkipped===!0)u=this.haveMultiplyConfirmedCenters();else{var x=this.findRowSkip();x>f[2]&&(h+=x-f[2]-s,g=o-1)}else{f[0]=f[2],f[1]=f[3],f[2]=f[4],f[3]=1,f[4]=0,p=3;continue}p=0,f[0]=0,f[1]=0,f[2]=0,f[3]=0,f[4]=0}else f[0]=f[2],f[1]=f[3],f[2]=f[4],f[3]=1,f[4]=0,p=3;else f[++p]++;else f[p]++;if(n.foundPatternCross(f)){var m=this.handlePossibleCenter(f,h,o,r);m===!0&&(s=f[0],this.hasSkipped&&(u=this.haveMultiplyConfirmedCenters()))}}var w=this.selectBestPatterns();return It.orderBestPatterns(w),new $B(w)},n.centerFromEnd=function(e,t){return t-e[4]-e[3]-e[2]/2},n.foundPatternCross=function(e){for(var t=0,r=0;r<5;r++){var i=e[r];if(i===0)return!1;t+=i}if(t<7)return!1;var a=t/7,o=a/2;return Math.abs(a-e[0])<o&&Math.abs(a-e[1])<o&&Math.abs(3*a-e[2])<3*o&&Math.abs(a-e[3])<o&&Math.abs(a-e[4])<o},n.prototype.getCrossCheckStateCount=function(){var e=this.crossCheckStateCount;return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e},n.prototype.crossCheckDiagonal=function(e,t,r,i){for(var a=this.getCrossCheckStateCount(),o=0,s=this.image;e>=o&&t>=o&&s.get(t-o,e-o);)a[2]++,o++;if(e<o||t<o)return!1;for(;e>=o&&t>=o&&!s.get(t-o,e-o)&&a[1]<=r;)a[1]++,o++;if(e<o||t<o||a[1]>r)return!1;for(;e>=o&&t>=o&&s.get(t-o,e-o)&&a[0]<=r;)a[0]++,o++;if(a[0]>r)return!1;var u=s.getHeight(),f=s.getWidth();for(o=1;e+o<u&&t+o<f&&s.get(t+o,e+o);)a[2]++,o++;if(e+o>=u||t+o>=f)return!1;for(;e+o<u&&t+o<f&&!s.get(t+o,e+o)&&a[3]<r;)a[3]++,o++;if(e+o>=u||t+o>=f||a[3]>=r)return!1;for(;e+o<u&&t+o<f&&s.get(t+o,e+o)&&a[4]<r;)a[4]++,o++;if(a[4]>=r)return!1;var h=a[0]+a[1]+a[2]+a[3]+a[4];return Math.abs(h-i)<2*i&&n.foundPatternCross(a)},n.prototype.crossCheckVertical=function(e,t,r,i){for(var a=this.image,o=a.getHeight(),s=this.getCrossCheckStateCount(),u=e;u>=0&&a.get(t,u);)s[2]++,u--;if(u<0)return NaN;for(;u>=0&&!a.get(t,u)&&s[1]<=r;)s[1]++,u--;if(u<0||s[1]>r)return NaN;for(;u>=0&&a.get(t,u)&&s[0]<=r;)s[0]++,u--;if(s[0]>r)return NaN;for(u=e+1;u<o&&a.get(t,u);)s[2]++,u++;if(u===o)return NaN;for(;u<o&&!a.get(t,u)&&s[3]<r;)s[3]++,u++;if(u===o||s[3]>=r)return NaN;for(;u<o&&a.get(t,u)&&s[4]<r;)s[4]++,u++;if(s[4]>=r)return NaN;var f=s[0]+s[1]+s[2]+s[3]+s[4];return 5*Math.abs(f-i)>=2*i?NaN:n.foundPatternCross(s)?n.centerFromEnd(s,u):NaN},n.prototype.crossCheckHorizontal=function(e,t,r,i){for(var a=this.image,o=a.getWidth(),s=this.getCrossCheckStateCount(),u=e;u>=0&&a.get(u,t);)s[2]++,u--;if(u<0)return NaN;for(;u>=0&&!a.get(u,t)&&s[1]<=r;)s[1]++,u--;if(u<0||s[1]>r)return NaN;for(;u>=0&&a.get(u,t)&&s[0]<=r;)s[0]++,u--;if(s[0]>r)return NaN;for(u=e+1;u<o&&a.get(u,t);)s[2]++,u++;if(u===o)return NaN;for(;u<o&&!a.get(u,t)&&s[3]<r;)s[3]++,u++;if(u===o||s[3]>=r)return NaN;for(;u<o&&a.get(u,t)&&s[4]<r;)s[4]++,u++;if(s[4]>=r)return NaN;var f=s[0]+s[1]+s[2]+s[3]+s[4];return 5*Math.abs(f-i)>=i?NaN:n.foundPatternCross(s)?n.centerFromEnd(s,u):NaN},n.prototype.handlePossibleCenter=function(e,t,r,i){var a=e[0]+e[1]+e[2]+e[3]+e[4],o=n.centerFromEnd(e,r),s=this.crossCheckVertical(t,Math.floor(o),e[2],a);if(!isNaN(s)&&(o=this.crossCheckHorizontal(Math.floor(o),Math.floor(s),e[2],a),!isNaN(o)&&(!i||this.crossCheckDiagonal(Math.floor(s),Math.floor(o),e[2],a)))){for(var u=a/7,f=!1,h=this.possibleCenters,p=0,g=h.length;p<g;p++){var m=h[p];if(m.aboutEquals(u,s,o)){h[p]=m.combineEstimate(s,o,u),f=!0;break}}if(!f){var x=new GB(o,s,u);h.push(x),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(x)}return!0}return!1},n.prototype.findRowSkip=function(){var e,t,r=this.possibleCenters.length;if(r<=1)return 0;var i=null;try{for(var a=A1(this.possibleCenters),o=a.next();!o.done;o=a.next()){var s=o.value;if(s.getCount()>=n.CENTER_QUORUM)if(i==null)i=s;else return this.hasSkipped=!0,Math.floor((Math.abs(i.getX()-s.getX())-Math.abs(i.getY()-s.getY()))/2)}}catch(u){e={error:u}}finally{try{o&&!o.done&&(t=a.return)&&t.call(a)}finally{if(e)throw e.error}}return 0},n.prototype.haveMultiplyConfirmedCenters=function(){var e,t,r,i,a=0,o=0,s=this.possibleCenters.length;try{for(var u=A1(this.possibleCenters),f=u.next();!f.done;f=u.next()){var h=f.value;h.getCount()>=n.CENTER_QUORUM&&(a++,o+=h.getEstimatedModuleSize())}}catch(w){e={error:w}}finally{try{f&&!f.done&&(t=u.return)&&t.call(u)}finally{if(e)throw e.error}}if(a<3)return!1;var p=o/s,g=0;try{for(var m=A1(this.possibleCenters),x=m.next();!x.done;x=m.next()){var h=x.value;g+=Math.abs(h.getEstimatedModuleSize()-p)}}catch(w){r={error:w}}finally{try{x&&!x.done&&(i=m.return)&&i.call(m)}finally{if(r)throw r.error}}return g<=.05*o},n.prototype.selectBestPatterns=function(){var e,t,r,i,a=this.possibleCenters.length;if(a<3)throw new ze;var o=this.possibleCenters,s;if(a>3){var u=0,f=0;try{for(var h=A1(this.possibleCenters),p=h.next();!p.done;p=h.next()){var g=p.value,m=g.getEstimatedModuleSize();u+=m,f+=m*m}}catch(Y){e={error:Y}}finally{try{p&&!p.done&&(t=h.return)&&t.call(h)}finally{if(e)throw e.error}}s=u/a;var x=Math.sqrt(f/a-s*s);o.sort(function(Y,q){var D=Math.abs(q.getEstimatedModuleSize()-s),A=Math.abs(Y.getEstimatedModuleSize()-s);return D<A?-1:D>A?1:0});for(var w=Math.max(.2*s,x),I=0;I<o.length&&o.length>3;I++){var C=o[I];Math.abs(C.getEstimatedModuleSize()-s)>w&&(o.splice(I,1),I--)}}if(o.length>3){var u=0;try{for(var P=A1(o),B=P.next();!B.done;B=P.next()){var V=B.value;u+=V.getEstimatedModuleSize()}}catch(q){r={error:q}}finally{try{B&&!B.done&&(i=P.return)&&i.call(P)}finally{if(r)throw r.error}}s=u/o.length,o.sort(function(q,D){if(D.getCount()===q.getCount()){var A=Math.abs(D.getEstimatedModuleSize()-s),T=Math.abs(q.getEstimatedModuleSize()-s);return A<T?1:A>T?-1:0}else return D.getCount()-q.getCount()}),o.splice(3)}return[o[0],o[1],o[2]]},n.CENTER_QUORUM=2,n.MIN_SKIP=3,n.MAX_MODULES=57,n}(),YB=function(){function n(e){this.image=e}return n.prototype.getImage=function(){return this.image},n.prototype.getResultPointCallback=function(){return this.resultPointCallback},n.prototype.detect=function(e){this.resultPointCallback=e==null?null:e.get(kr.NEED_RESULT_POINT_CALLBACK);var t=new XB(this.image,this.resultPointCallback),r=t.find(e);return this.processFinderPatternInfo(r)},n.prototype.processFinderPatternInfo=function(e){var t=e.getTopLeft(),r=e.getTopRight(),i=e.getBottomLeft(),a=this.calculateModuleSize(t,r,i);if(a<1)throw new ze("No pattern found in proccess finder.");var o=n.computeDimension(t,r,i,a),s=Zf.getProvisionalVersionForDimension(o),u=s.getDimensionForVersion()-7,f=null;if(s.getAlignmentPatternCenters().length>0)for(var h=r.getX()-t.getX()+i.getX(),p=r.getY()-t.getY()+i.getY(),g=1-3/u,m=Math.floor(t.getX()+g*(h-t.getX())),x=Math.floor(t.getY()+g*(p-t.getY())),w=4;w<=16;w<<=1)try{f=this.findAlignmentInRegion(a,m,x,w);break}catch(B){if(!(B instanceof ze))throw B}var I=n.createTransform(t,r,i,f,o),C=n.sampleGrid(this.image,I,o),P;return f===null?P=[i,t,r]:P=[i,t,r,f],new sx(C,P)},n.createTransform=function(e,t,r,i,a){var o=a-3.5,s,u,f,h;return i!==null?(s=i.getX(),u=i.getY(),f=o-3,h=f):(s=t.getX()-e.getX()+r.getX(),u=t.getY()-e.getY()+r.getY(),f=o,h=o),gS.quadrilateralToQuadrilateral(3.5,3.5,o,3.5,f,h,3.5,o,e.getX(),e.getY(),t.getX(),t.getY(),s,u,r.getX(),r.getY())},n.sampleGrid=function(e,t,r){var i=lx.getInstance();return i.sampleGridWithTransform(e,r,r,t)},n.computeDimension=function(e,t,r,i){var a=Hn.round(It.distance(e,t)/i),o=Hn.round(It.distance(e,r)/i),s=Math.floor((a+o)/2)+7;switch(s&3){case 0:s++;break;case 2:s--;break;case 3:throw new ze("Dimensions could be not found.")}return s},n.prototype.calculateModuleSize=function(e,t,r){return(this.calculateModuleSizeOneWay(e,t)+this.calculateModuleSizeOneWay(e,r))/2},n.prototype.calculateModuleSizeOneWay=function(e,t){var r=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(e.getX()),Math.floor(e.getY()),Math.floor(t.getX()),Math.floor(t.getY())),i=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(t.getX()),Math.floor(t.getY()),Math.floor(e.getX()),Math.floor(e.getY()));return isNaN(r)?i/7:isNaN(i)?r/7:(r+i)/14},n.prototype.sizeOfBlackWhiteBlackRunBothWays=function(e,t,r,i){var a=this.sizeOfBlackWhiteBlackRun(e,t,r,i),o=1,s=e-(r-e);s<0?(o=e/(e-s),s=0):s>=this.image.getWidth()&&(o=(this.image.getWidth()-1-e)/(s-e),s=this.image.getWidth()-1);var u=Math.floor(t-(i-t)*o);return o=1,u<0?(o=t/(t-u),u=0):u>=this.image.getHeight()&&(o=(this.image.getHeight()-1-t)/(u-t),u=this.image.getHeight()-1),s=Math.floor(e+(s-e)*o),a+=this.sizeOfBlackWhiteBlackRun(e,t,s,u),a-1},n.prototype.sizeOfBlackWhiteBlackRun=function(e,t,r,i){var a=Math.abs(i-t)>Math.abs(r-e);if(a){var o=e;e=t,t=o,o=r,r=i,i=o}for(var s=Math.abs(r-e),u=Math.abs(i-t),f=-s/2,h=e<r?1:-1,p=t<i?1:-1,g=0,m=r+h,x=e,w=t;x!==m;x+=h){var I=a?w:x,C=a?x:w;if(g===1===this.image.get(I,C)){if(g===2)return Hn.distance(x,w,e,t);g++}if(f+=u,f>0){if(w===i)break;w+=p,f-=s}}return g===2?Hn.distance(r+h,i,e,t):NaN},n.prototype.findAlignmentInRegion=function(e,t,r,i){var a=Math.floor(i*e),o=Math.max(0,t-a),s=Math.min(this.image.getWidth()-1,t+a);if(s-o<e*3)throw new ze("Alignment top exceeds estimated module size.");var u=Math.max(0,r-a),f=Math.min(this.image.getHeight()-1,r+a);if(f-u<e*3)throw new ze("Alignment bottom exceeds estimated module size.");var h=new HB(this.image,o,u,s-o,f-u,e,this.resultPointCallback);return h.find()},n}(),Cy=function(){function n(){this.decoder=new UB}return n.prototype.getDecoder=function(){return this.decoder},n.prototype.decode=function(e,t){var r,i;if(t!=null&&t.get(kr.PURE_BARCODE)!==void 0){var a=n.extractPureBits(e.getBlackMatrix());r=this.decoder.decodeBitMatrix(a,t),i=n.NO_POINTS}else{var o=new YB(e.getBlackMatrix()).detect(t);r=this.decoder.decodeBitMatrix(o.getBits(),t),i=o.getPoints()}r.getOther()instanceof wS&&r.getOther().applyMirroredCorrection(i);var s=new Fa(r.getText(),r.getRawBytes(),void 0,i,Bt.QR_CODE,void 0),u=r.getByteSegments();u!==null&&s.putMetadata(ha.BYTE_SEGMENTS,u);var f=r.getECLevel();return f!==null&&s.putMetadata(ha.ERROR_CORRECTION_LEVEL,f),r.hasStructuredAppend()&&(s.putMetadata(ha.STRUCTURED_APPEND_SEQUENCE,r.getStructuredAppendSequenceNumber()),s.putMetadata(ha.STRUCTURED_APPEND_PARITY,r.getStructuredAppendParity())),s},n.prototype.reset=function(){},n.extractPureBits=function(e){var t=e.getTopLeftOnBit(),r=e.getBottomRightOnBit();if(t===null||r===null)throw new ze;var i=this.moduleSize(t,e),a=t[1],o=r[1],s=t[0],u=r[0];if(s>=u||a>=o)throw new ze;if(o-a!==u-s&&(u=s+(o-a),u>=e.getWidth()))throw new ze;var f=Math.round((u-s+1)/i),h=Math.round((o-a+1)/i);if(f<=0||h<=0)throw new ze;if(h!==f)throw new ze;var p=Math.floor(i/2);a+=p,s+=p;var g=s+Math.floor((f-1)*i)-u;if(g>0){if(g>p)throw new ze;s-=g}var m=a+Math.floor((h-1)*i)-o;if(m>0){if(m>p)throw new ze;a-=m}for(var x=new iu(f,h),w=0;w<h;w++)for(var I=a+Math.floor(w*i),C=0;C<f;C++)e.get(s+Math.floor(C*i),I)&&x.set(C,w);return x},n.moduleSize=function(e,t){for(var r=t.getHeight(),i=t.getWidth(),a=e[0],o=e[1],s=!0,u=0;a<i&&o<r;){if(s!==t.get(a,o)){if(++u===5)break;s=!s}a++,o++}if(a===i||o===r)throw new ze;return(a-e[0])/7},n.NO_POINTS=new Array,n}(),KB=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Ln=function(){function n(){}return n.prototype.PDF417Common=function(){},n.getBitCountSum=function(e){return Hn.sum(e)},n.toIntArray=function(e){var t,r;if(e==null||!e.length)return n.EMPTY_INT_ARRAY;var i=new Int32Array(e.length),a=0;try{for(var o=KB(e),s=o.next();!s.done;s=o.next()){var u=s.value;i[a++]=u}}catch(f){t={error:f}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}return i},n.getCodeword=function(e){var t=ki.binarySearch(n.SYMBOL_TABLE,e&262143);return t<0?-1:(n.CODEWORD_TABLE[t]-1)%n.NUMBER_OF_CODEWORDS},n.NUMBER_OF_CODEWORDS=929,n.MAX_CODEWORDS_IN_BARCODE=n.NUMBER_OF_CODEWORDS-1,n.MIN_ROWS_IN_BARCODE=3,n.MAX_ROWS_IN_BARCODE=90,n.MODULES_IN_CODEWORD=17,n.MODULES_IN_STOP_PATTERN=18,n.BARS_IN_MODULE=8,n.EMPTY_INT_ARRAY=new Int32Array([]),n.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),n.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]),n}(),QB=function(){function n(e,t){this.bits=e,this.points=t}return n.prototype.getBits=function(){return this.bits},n.prototype.getPoints=function(){return this.points},n}(),ZB=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},JB=function(){function n(){}return n.detectMultiple=function(e,t,r){var i=e.getBlackMatrix(),a=n.detect(r,i);return a.length||(i=i.clone(),i.rotate180(),a=n.detect(r,i)),new QB(i,a)},n.detect=function(e,t){for(var r,i,a=new Array,o=0,s=0,u=!1;o<t.getHeight();){var f=n.findVertices(t,o,s);if(f[0]==null&&f[3]==null){if(!u)break;u=!1,s=0;try{for(var h=(r=void 0,ZB(a)),p=h.next();!p.done;p=h.next()){var g=p.value;g[1]!=null&&(o=Math.trunc(Math.max(o,g[1].getY()))),g[3]!=null&&(o=Math.max(o,Math.trunc(g[3].getY())))}}catch(m){r={error:m}}finally{try{p&&!p.done&&(i=h.return)&&i.call(h)}finally{if(r)throw r.error}}o+=n.ROW_STEP;continue}if(u=!0,a.push(f),!e)break;f[2]!=null?(s=Math.trunc(f[2].getX()),o=Math.trunc(f[2].getY())):(s=Math.trunc(f[4].getX()),o=Math.trunc(f[4].getY()))}return a},n.findVertices=function(e,t,r){var i=e.getHeight(),a=e.getWidth(),o=new Array(8);return n.copyToResult(o,n.findRowsWithPattern(e,i,a,t,r,n.START_PATTERN),n.INDEXES_START_PATTERN),o[4]!=null&&(r=Math.trunc(o[4].getX()),t=Math.trunc(o[4].getY())),n.copyToResult(o,n.findRowsWithPattern(e,i,a,t,r,n.STOP_PATTERN),n.INDEXES_STOP_PATTERN),o},n.copyToResult=function(e,t,r){for(var i=0;i<r.length;i++)e[r[i]]=t[i]},n.findRowsWithPattern=function(e,t,r,i,a,o){for(var s=new Array(4),u=!1,f=new Int32Array(o.length);i<t;i+=n.ROW_STEP){var h=n.findGuardPattern(e,a,i,r,!1,o,f);if(h!=null){for(;i>0;){var p=n.findGuardPattern(e,a,--i,r,!1,o,f);if(p!=null)h=p;else{i++;break}}s[0]=new It(h[0],i),s[1]=new It(h[1],i),u=!0;break}}var g=i+1;if(u){for(var m=0,p=Int32Array.from([Math.trunc(s[0].getX()),Math.trunc(s[1].getX())]);g<t;g++){var h=n.findGuardPattern(e,p[0],g,r,!1,o,f);if(h!=null&&Math.abs(p[0]-h[0])<n.MAX_PATTERN_DRIFT&&Math.abs(p[1]-h[1])<n.MAX_PATTERN_DRIFT)p=h,m=0;else{if(m>n.SKIPPED_ROW_COUNT_MAX)break;m++}}g-=m+1,s[2]=new It(p[0],g),s[3]=new It(p[1],g)}return g-i<n.BARCODE_MIN_HEIGHT&&ki.fill(s,null),s},n.findGuardPattern=function(e,t,r,i,a,o,s){ki.fillWithin(s,0,s.length,0);for(var u=t,f=0;e.get(u,r)&&u>0&&f++<n.MAX_PIXEL_DRIFT;)u--;for(var h=u,p=0,g=o.length,m=a;h<i;h++){var x=e.get(h,r);if(x!==m)s[p]++;else{if(p===g-1){if(n.patternMatchVariance(s,o,n.MAX_INDIVIDUAL_VARIANCE)<n.MAX_AVG_VARIANCE)return new Int32Array([u,h]);u+=s[0]+s[1],br.arraycopy(s,2,s,0,p-1),s[p-1]=0,s[p]=0,p--}else p++;s[p]=1,m=!m}}return p===g-1&&n.patternMatchVariance(s,o,n.MAX_INDIVIDUAL_VARIANCE)<n.MAX_AVG_VARIANCE?new Int32Array([u,h-1]):null},n.patternMatchVariance=function(e,t,r){for(var i=e.length,a=0,o=0,s=0;s<i;s++)a+=e[s],o+=t[s];if(a<o)return 1/0;var u=a/o;r*=u;for(var f=0,h=0;h<i;h++){var p=e[h],g=t[h]*u,m=p>g?p-g:g-p;if(m>r)return 1/0;f+=m}return f/a},n.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),n.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),n.MAX_AVG_VARIANCE=.42,n.MAX_INDIVIDUAL_VARIANCE=.8,n.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),n.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),n.MAX_PIXEL_DRIFT=3,n.MAX_PATTERN_DRIFT=5,n.SKIPPED_ROW_COUNT_MAX=25,n.ROW_STEP=5,n.BARCODE_MIN_HEIGHT=10,n}(),ej=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Kf=function(){function n(e,t){if(t.length===0)throw new jt;this.field=e;var r=t.length;if(r>1&&t[0]===0){for(var i=1;i<r&&t[i]===0;)i++;i===r?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(r-i),br.arraycopy(t,i,this.coefficients,0,this.coefficients.length))}else this.coefficients=t}return n.prototype.getCoefficients=function(){return this.coefficients},n.prototype.getDegree=function(){return this.coefficients.length-1},n.prototype.isZero=function(){return this.coefficients[0]===0},n.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},n.prototype.evaluateAt=function(e){var t,r;if(e===0)return this.getCoefficient(0);if(e===1){var i=0;try{for(var a=ej(this.coefficients),o=a.next();!o.done;o=a.next()){var s=o.value;i=this.field.add(i,s)}}catch(p){t={error:p}}finally{try{o&&!o.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}return i}for(var u=this.coefficients[0],f=this.coefficients.length,h=1;h<f;h++)u=this.field.add(this.field.multiply(e,u),this.coefficients[h]);return u},n.prototype.add=function(e){if(!this.field.equals(e.field))throw new jt("ModulusPolys do not have same ModulusGF field");if(this.isZero())return e;if(e.isZero())return this;var t=this.coefficients,r=e.coefficients;if(t.length>r.length){var i=t;t=r,r=i}var a=new Int32Array(r.length),o=r.length-t.length;br.arraycopy(r,0,a,0,o);for(var s=o;s<r.length;s++)a[s]=this.field.add(t[s-o],r[s]);return new n(this.field,a)},n.prototype.subtract=function(e){if(!this.field.equals(e.field))throw new jt("ModulusPolys do not have same ModulusGF field");return e.isZero()?this:this.add(e.negative())},n.prototype.multiply=function(e){return e instanceof n?this.multiplyOther(e):this.multiplyScalar(e)},n.prototype.multiplyOther=function(e){if(!this.field.equals(e.field))throw new jt("ModulusPolys do not have same ModulusGF field");if(this.isZero()||e.isZero())return new n(this.field,new Int32Array([0]));for(var t=this.coefficients,r=t.length,i=e.coefficients,a=i.length,o=new Int32Array(r+a-1),s=0;s<r;s++)for(var u=t[s],f=0;f<a;f++)o[s+f]=this.field.add(o[s+f],this.field.multiply(u,i[f]));return new n(this.field,o)},n.prototype.negative=function(){for(var e=this.coefficients.length,t=new Int32Array(e),r=0;r<e;r++)t[r]=this.field.subtract(0,this.coefficients[r]);return new n(this.field,t)},n.prototype.multiplyScalar=function(e){if(e===0)return new n(this.field,new Int32Array([0]));if(e===1)return this;for(var t=this.coefficients.length,r=new Int32Array(t),i=0;i<t;i++)r[i]=this.field.multiply(this.coefficients[i],e);return new n(this.field,r)},n.prototype.multiplyByMonomial=function(e,t){if(e<0)throw new jt;if(t===0)return new n(this.field,new Int32Array([0]));for(var r=this.coefficients.length,i=new Int32Array(r+e),a=0;a<r;a++)i[a]=this.field.multiply(this.coefficients[a],t);return new n(this.field,i)},n.prototype.toString=function(){for(var e=new cn,t=this.getDegree();t>=0;t--){var r=this.getCoefficient(t);r!==0&&(r<0?(e.append(" - "),r=-r):e.length()>0&&e.append(" + "),(t===0||r!==1)&&e.append(r),t!==0&&(t===1?e.append("x"):(e.append("x^"),e.append(t))))}return e.toString()},n}(),tj=function(){function n(){}return n.prototype.add=function(e,t){return(e+t)%this.modulus},n.prototype.subtract=function(e,t){return(this.modulus+e-t)%this.modulus},n.prototype.exp=function(e){return this.expTable[e]},n.prototype.log=function(e){if(e===0)throw new jt;return this.logTable[e]},n.prototype.inverse=function(e){if(e===0)throw new pS;return this.expTable[this.modulus-this.logTable[e]-1]},n.prototype.multiply=function(e,t){return e===0||t===0?0:this.expTable[(this.logTable[e]+this.logTable[t])%(this.modulus-1)]},n.prototype.getSize=function(){return this.modulus},n.prototype.equals=function(e){return e===this},n}(),nj=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),rj=function(n){nj(e,n);function e(t,r){var i=n.call(this)||this;i.modulus=t,i.expTable=new Int32Array(t),i.logTable=new Int32Array(t);for(var a=1,o=0;o<t;o++)i.expTable[o]=a,a=a*r%t;for(var o=0;o<t-1;o++)i.logTable[i.expTable[o]]=o;return i.zero=new Kf(i,new Int32Array([0])),i.one=new Kf(i,new Int32Array([1])),i}return e.prototype.getZero=function(){return this.zero},e.prototype.getOne=function(){return this.one},e.prototype.buildMonomial=function(t,r){if(t<0)throw new jt;if(r===0)return this.zero;var i=new Int32Array(t+1);return i[0]=r,new Kf(this,i)},e.PDF417_GF=new e(Ln.NUMBER_OF_CODEWORDS,3),e}(tj),ij=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},aj=function(){function n(){this.field=rj.PDF417_GF}return n.prototype.decode=function(e,t,r){for(var i,a,o=new Kf(this.field,e),s=new Int32Array(t),u=!1,f=t;f>0;f--){var h=o.evaluateAt(this.field.exp(f));s[t-f]=h,h!==0&&(u=!0)}if(!u)return 0;var p=this.field.getOne();if(r!=null)try{for(var g=ij(r),m=g.next();!m.done;m=g.next()){var x=m.value,w=this.field.exp(e.length-1-x),I=new Kf(this.field,new Int32Array([this.field.subtract(0,w),1]));p=p.multiply(I)}}catch(A){i={error:A}}finally{try{m&&!m.done&&(a=g.return)&&a.call(g)}finally{if(i)throw i.error}}for(var C=new Kf(this.field,s),P=this.runEuclideanAlgorithm(this.field.buildMonomial(t,1),C,t),B=P[0],V=P[1],Y=this.findErrorLocations(B),q=this.findErrorMagnitudes(V,B,Y),f=0;f<Y.length;f++){var D=e.length-1-this.field.log(Y[f]);if(D<0)throw Qi.getChecksumInstance();e[D]=this.field.subtract(e[D],q[f])}return Y.length},n.prototype.runEuclideanAlgorithm=function(e,t,r){if(e.getDegree()<t.getDegree()){var i=e;e=t,t=i}for(var a=e,o=t,s=this.field.getZero(),u=this.field.getOne();o.getDegree()>=Math.round(r/2);){var f=a,h=s;if(a=o,s=u,a.isZero())throw Qi.getChecksumInstance();o=f;for(var p=this.field.getZero(),g=a.getCoefficient(a.getDegree()),m=this.field.inverse(g);o.getDegree()>=a.getDegree()&&!o.isZero();){var x=o.getDegree()-a.getDegree(),w=this.field.multiply(o.getCoefficient(o.getDegree()),m);p=p.add(this.field.buildMonomial(x,w)),o=o.subtract(a.multiplyByMonomial(x,w))}u=p.multiply(s).subtract(h).negative()}var I=u.getCoefficient(0);if(I===0)throw Qi.getChecksumInstance();var C=this.field.inverse(I),P=u.multiply(C),B=o.multiply(C);return[P,B]},n.prototype.findErrorLocations=function(e){for(var t=e.getDegree(),r=new Int32Array(t),i=0,a=1;a<this.field.getSize()&&i<t;a++)e.evaluateAt(a)===0&&(r[i]=this.field.inverse(a),i++);if(i!==t)throw Qi.getChecksumInstance();return r},n.prototype.findErrorMagnitudes=function(e,t,r){for(var i=t.getDegree(),a=new Int32Array(i),o=1;o<=i;o++)a[i-o]=this.field.multiply(o,t.getCoefficient(o));for(var s=new Kf(this.field,a),u=r.length,f=new Int32Array(u),o=0;o<u;o++){var h=this.field.inverse(r[o]),p=this.field.subtract(0,e.evaluateAt(h)),g=this.field.inverse(s.evaluateAt(h));f[o]=this.field.multiply(p,g)}return f},n}(),Ty=function(){function n(e,t,r,i,a){e instanceof n?this.constructor_2(e):this.constructor_1(e,t,r,i,a)}return n.prototype.constructor_1=function(e,t,r,i,a){var o=t==null||r==null,s=i==null||a==null;if(o&&s)throw new ze;o?(t=new It(0,i.getY()),r=new It(0,a.getY())):s&&(i=new It(e.getWidth()-1,t.getY()),a=new It(e.getWidth()-1,r.getY())),this.image=e,this.topLeft=t,this.bottomLeft=r,this.topRight=i,this.bottomRight=a,this.minX=Math.trunc(Math.min(t.getX(),r.getX())),this.maxX=Math.trunc(Math.max(i.getX(),a.getX())),this.minY=Math.trunc(Math.min(t.getY(),i.getY())),this.maxY=Math.trunc(Math.max(r.getY(),a.getY()))},n.prototype.constructor_2=function(e){this.image=e.image,this.topLeft=e.getTopLeft(),this.bottomLeft=e.getBottomLeft(),this.topRight=e.getTopRight(),this.bottomRight=e.getBottomRight(),this.minX=e.getMinX(),this.maxX=e.getMaxX(),this.minY=e.getMinY(),this.maxY=e.getMaxY()},n.merge=function(e,t){return e==null?t:t==null?e:new n(e.image,e.topLeft,e.bottomLeft,t.topRight,t.bottomRight)},n.prototype.addMissingRows=function(e,t,r){var i=this.topLeft,a=this.bottomLeft,o=this.topRight,s=this.bottomRight;if(e>0){var u=r?this.topLeft:this.topRight,f=Math.trunc(u.getY()-e);f<0&&(f=0);var h=new It(u.getX(),f);r?i=h:o=h}if(t>0){var p=r?this.bottomLeft:this.bottomRight,g=Math.trunc(p.getY()+t);g>=this.image.getHeight()&&(g=this.image.getHeight()-1);var m=new It(p.getX(),g);r?a=m:s=m}return new n(this.image,i,a,o,s)},n.prototype.getMinX=function(){return this.minX},n.prototype.getMaxX=function(){return this.maxX},n.prototype.getMinY=function(){return this.minY},n.prototype.getMaxY=function(){return this.maxY},n.prototype.getTopLeft=function(){return this.topLeft},n.prototype.getTopRight=function(){return this.topRight},n.prototype.getBottomLeft=function(){return this.bottomLeft},n.prototype.getBottomRight=function(){return this.bottomRight},n}(),oj=function(){function n(e,t,r,i){this.columnCount=e,this.errorCorrectionLevel=i,this.rowCountUpperPart=t,this.rowCountLowerPart=r,this.rowCount=t+r}return n.prototype.getColumnCount=function(){return this.columnCount},n.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},n.prototype.getRowCount=function(){return this.rowCount},n.prototype.getRowCountUpperPart=function(){return this.rowCountUpperPart},n.prototype.getRowCountLowerPart=function(){return this.rowCountLowerPart},n}(),cx=function(){function n(){this.buffer=""}return n.form=function(e,t){var r=-1;function i(o,s,u,f,h,p){if(o==="%%")return"%";if(t[++r]!==void 0){o=f?parseInt(f.substr(1)):void 0;var g=h?parseInt(h.substr(1)):void 0,m;switch(p){case"s":m=t[r];break;case"c":m=t[r][0];break;case"f":m=parseFloat(t[r]).toFixed(o);break;case"p":m=parseFloat(t[r]).toPrecision(o);break;case"e":m=parseFloat(t[r]).toExponential(o);break;case"x":m=parseInt(t[r]).toString(g||16);break;case"d":m=parseFloat(parseInt(t[r],g||10).toPrecision(o)).toFixed(0);break}m=typeof m=="object"?JSON.stringify(m):(+m).toString(g);for(var x=parseInt(u),w=u&&u[0]+""=="0"?"0":" ";m.length<x;)m=s!==void 0?m+w:w+m;return m}}var a=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(a,i)},n.prototype.format=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this.buffer+=n.form(e,t)},n.prototype.toString=function(){return this.buffer},n}(),sj=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},bS=function(){function n(e){this.boundingBox=new Ty(e),this.codewords=new Array(e.getMaxY()-e.getMinY()+1)}return n.prototype.getCodewordNearby=function(e){var t=this.getCodeword(e);if(t!=null)return t;for(var r=1;r<n.MAX_NEARBY_DISTANCE;r++){var i=this.imageRowToCodewordIndex(e)-r;if(i>=0&&(t=this.codewords[i],t!=null)||(i=this.imageRowToCodewordIndex(e)+r,i<this.codewords.length&&(t=this.codewords[i],t!=null)))return t}return null},n.prototype.imageRowToCodewordIndex=function(e){return e-this.boundingBox.getMinY()},n.prototype.setCodeword=function(e,t){this.codewords[this.imageRowToCodewordIndex(e)]=t},n.prototype.getCodeword=function(e){return this.codewords[this.imageRowToCodewordIndex(e)]},n.prototype.getBoundingBox=function(){return this.boundingBox},n.prototype.getCodewords=function(){return this.codewords},n.prototype.toString=function(){var e,t,r=new cx,i=0;try{for(var a=sj(this.codewords),o=a.next();!o.done;o=a.next()){var s=o.value;if(s==null){r.format("%3d:    |   %n",i++);continue}r.format("%3d: %3d|%3d%n",i++,s.getRowNumber(),s.getValue())}}catch(u){e={error:u}}finally{try{o&&!o.done&&(t=a.return)&&t.call(a)}finally{if(e)throw e.error}}return r.toString()},n.MAX_NEARBY_DISTANCE=5,n}(),lj=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},uj=function(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,a=[],o;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(o)throw o.error}}return a},j1=function(){function n(){this.values=new Map}return n.prototype.setValue=function(e){e=Math.trunc(e);var t=this.values.get(e);t==null&&(t=0),t++,this.values.set(e,t)},n.prototype.getValue=function(){var e,t,r=-1,i=new Array,a=function(p,g){var m={getKey:function(){return p},getValue:function(){return g}};m.getValue()>r?(r=m.getValue(),i=[],i.push(m.getKey())):m.getValue()===r&&i.push(m.getKey())};try{for(var o=lj(this.values.entries()),s=o.next();!s.done;s=o.next()){var u=uj(s.value,2),f=u[0],h=u[1];a(f,h)}}catch(p){e={error:p}}finally{try{s&&!s.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}return Ln.toIntArray(i)},n.prototype.getConfidence=function(e){return this.values.get(e)},n}(),cj=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),_v=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},H3=function(n){cj(e,n);function e(t,r){var i=n.call(this,t)||this;return i._isLeft=r,i}return e.prototype.setRowNumbers=function(){var t,r;try{for(var i=_v(this.getCodewords()),a=i.next();!a.done;a=i.next()){var o=a.value;o!=null&&o.setRowNumberAsRowIndicatorColumn()}}catch(s){t={error:s}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}},e.prototype.adjustCompleteIndicatorColumnRowNumbers=function(t){var r=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(r,t);for(var i=this.getBoundingBox(),a=this._isLeft?i.getTopLeft():i.getTopRight(),o=this._isLeft?i.getBottomLeft():i.getBottomRight(),s=this.imageRowToCodewordIndex(Math.trunc(a.getY())),u=this.imageRowToCodewordIndex(Math.trunc(o.getY())),f=-1,h=1,p=0,g=s;g<u;g++)if(r[g]!=null){var m=r[g],x=m.getRowNumber()-f;if(x===0)p++;else if(x===1)h=Math.max(h,p),p=1,f=m.getRowNumber();else if(x<0||m.getRowNumber()>=t.getRowCount()||x>g)r[g]=null;else{var w=void 0;h>2?w=(h-2)*x:w=x;for(var I=w>=g,C=1;C<=w&&!I;C++)I=r[g-C]!=null;I?r[g]=null:(f=m.getRowNumber(),p=1)}}},e.prototype.getRowHeights=function(){var t,r,i=this.getBarcodeMetadata();if(i==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(i);var a=new Int32Array(i.getRowCount());try{for(var o=_v(this.getCodewords()),s=o.next();!s.done;s=o.next()){var u=s.value;if(u!=null){var f=u.getRowNumber();if(f>=a.length)continue;a[f]++}}}catch(h){t={error:h}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}return a},e.prototype.adjustIncompleteIndicatorColumnRowNumbers=function(t){for(var r=this.getBoundingBox(),i=this._isLeft?r.getTopLeft():r.getTopRight(),a=this._isLeft?r.getBottomLeft():r.getBottomRight(),o=this.imageRowToCodewordIndex(Math.trunc(i.getY())),s=this.imageRowToCodewordIndex(Math.trunc(a.getY())),u=this.getCodewords(),f=-1,h=o;h<s;h++)if(u[h]!=null){var p=u[h];p.setRowNumberAsRowIndicatorColumn();var g=p.getRowNumber()-f;g===0||(g===1?f=p.getRowNumber():p.getRowNumber()>=t.getRowCount()?u[h]=null:f=p.getRowNumber())}},e.prototype.getBarcodeMetadata=function(){var t,r,i=this.getCodewords(),a=new j1,o=new j1,s=new j1,u=new j1;try{for(var f=_v(i),h=f.next();!h.done;h=f.next()){var p=h.value;if(p!=null){p.setRowNumberAsRowIndicatorColumn();var g=p.getValue()%30,m=p.getRowNumber();switch(this._isLeft||(m+=2),m%3){case 0:o.setValue(g*3+1);break;case 1:u.setValue(g/3),s.setValue(g%3);break;case 2:a.setValue(g+1);break}}}}catch(w){t={error:w}}finally{try{h&&!h.done&&(r=f.return)&&r.call(f)}finally{if(t)throw t.error}}if(a.getValue().length===0||o.getValue().length===0||s.getValue().length===0||u.getValue().length===0||a.getValue()[0]<1||o.getValue()[0]+s.getValue()[0]<Ln.MIN_ROWS_IN_BARCODE||o.getValue()[0]+s.getValue()[0]>Ln.MAX_ROWS_IN_BARCODE)return null;var x=new oj(a.getValue()[0],o.getValue()[0],s.getValue()[0],u.getValue()[0]);return this.removeIncorrectCodewords(i,x),x},e.prototype.removeIncorrectCodewords=function(t,r){for(var i=0;i<t.length;i++){var a=t[i];if(t[i]!=null){var o=a.getValue()%30,s=a.getRowNumber();if(s>r.getRowCount()){t[i]=null;continue}switch(this._isLeft||(s+=2),s%3){case 0:o*3+1!==r.getRowCountUpperPart()&&(t[i]=null);break;case 1:(Math.trunc(o/3)!==r.getErrorCorrectionLevel()||o%3!==r.getRowCountLowerPart())&&(t[i]=null);break;case 2:o+1!==r.getColumnCount()&&(t[i]=null);break}}}},e.prototype.isLeft=function(){return this._isLeft},e.prototype.toString=function(){return"IsLeft: "+this._isLeft+`
`+n.prototype.toString.call(this)},e}(bS),fj=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},hj=function(){function n(e,t){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=e,this.barcodeColumnCount=e.getColumnCount(),this.boundingBox=t,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}return n.prototype.getDetectionResultColumns=function(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);var e=Ln.MAX_CODEWORDS_IN_BARCODE,t;do t=e,e=this.adjustRowNumbersAndGetCount();while(e>0&&e<t);return this.detectionResultColumns},n.prototype.adjustIndicatorColumnRowNumbers=function(e){e!=null&&e.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)},n.prototype.adjustRowNumbersAndGetCount=function(){var e=this.adjustRowNumbersByRow();if(e===0)return 0;for(var t=1;t<this.barcodeColumnCount+1;t++)for(var r=this.detectionResultColumns[t].getCodewords(),i=0;i<r.length;i++)r[i]!=null&&(r[i].hasValidRowNumber()||this.adjustRowNumbers(t,i,r));return e},n.prototype.adjustRowNumbersByRow=function(){this.adjustRowNumbersFromBothRI();var e=this.adjustRowNumbersFromLRI();return e+this.adjustRowNumbersFromRRI()},n.prototype.adjustRowNumbersFromBothRI=function(){if(!(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)){for(var e=this.detectionResultColumns[0].getCodewords(),t=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),r=0;r<e.length;r++)if(e[r]!=null&&t[r]!=null&&e[r].getRowNumber()===t[r].getRowNumber())for(var i=1;i<=this.barcodeColumnCount;i++){var a=this.detectionResultColumns[i].getCodewords()[r];a!=null&&(a.setRowNumber(e[r].getRowNumber()),a.hasValidRowNumber()||(this.detectionResultColumns[i].getCodewords()[r]=null))}}},n.prototype.adjustRowNumbersFromRRI=function(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;for(var e=0,t=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),r=0;r<t.length;r++)if(t[r]!=null)for(var i=t[r].getRowNumber(),a=0,o=this.barcodeColumnCount+1;o>0&&a<this.ADJUST_ROW_NUMBER_SKIP;o--){var s=this.detectionResultColumns[o].getCodewords()[r];s!=null&&(a=n.adjustRowNumberIfValid(i,a,s),s.hasValidRowNumber()||e++)}return e},n.prototype.adjustRowNumbersFromLRI=function(){if(this.detectionResultColumns[0]==null)return 0;for(var e=0,t=this.detectionResultColumns[0].getCodewords(),r=0;r<t.length;r++)if(t[r]!=null)for(var i=t[r].getRowNumber(),a=0,o=1;o<this.barcodeColumnCount+1&&a<this.ADJUST_ROW_NUMBER_SKIP;o++){var s=this.detectionResultColumns[o].getCodewords()[r];s!=null&&(a=n.adjustRowNumberIfValid(i,a,s),s.hasValidRowNumber()||e++)}return e},n.adjustRowNumberIfValid=function(e,t,r){return r==null||r.hasValidRowNumber()||(r.isValidRowNumber(e)?(r.setRowNumber(e),t=0):++t),t},n.prototype.adjustRowNumbers=function(e,t,r){var i,a;if(this.detectionResultColumns[e-1]!=null){var o=r[t],s=this.detectionResultColumns[e-1].getCodewords(),u=s;this.detectionResultColumns[e+1]!=null&&(u=this.detectionResultColumns[e+1].getCodewords());var f=new Array(14);f[2]=s[t],f[3]=u[t],t>0&&(f[0]=r[t-1],f[4]=s[t-1],f[5]=u[t-1]),t>1&&(f[8]=r[t-2],f[10]=s[t-2],f[11]=u[t-2]),t<r.length-1&&(f[1]=r[t+1],f[6]=s[t+1],f[7]=u[t+1]),t<r.length-2&&(f[9]=r[t+2],f[12]=s[t+2],f[13]=u[t+2]);try{for(var h=fj(f),p=h.next();!p.done;p=h.next()){var g=p.value;if(n.adjustRowNumber(o,g))return}}catch(m){i={error:m}}finally{try{p&&!p.done&&(a=h.return)&&a.call(h)}finally{if(i)throw i.error}}}},n.adjustRowNumber=function(e,t){return t==null?!1:t.hasValidRowNumber()&&t.getBucket()===e.getBucket()?(e.setRowNumber(t.getRowNumber()),!0):!1},n.prototype.getBarcodeColumnCount=function(){return this.barcodeColumnCount},n.prototype.getBarcodeRowCount=function(){return this.barcodeMetadata.getRowCount()},n.prototype.getBarcodeECLevel=function(){return this.barcodeMetadata.getErrorCorrectionLevel()},n.prototype.setBoundingBox=function(e){this.boundingBox=e},n.prototype.getBoundingBox=function(){return this.boundingBox},n.prototype.setDetectionResultColumn=function(e,t){this.detectionResultColumns[e]=t},n.prototype.getDetectionResultColumn=function(e){return this.detectionResultColumns[e]},n.prototype.toString=function(){var e=this.detectionResultColumns[0];e==null&&(e=this.detectionResultColumns[this.barcodeColumnCount+1]);for(var t=new cx,r=0;r<e.getCodewords().length;r++){t.format("CW %3d:",r);for(var i=0;i<this.barcodeColumnCount+2;i++){if(this.detectionResultColumns[i]==null){t.format("    |   ");continue}var a=this.detectionResultColumns[i].getCodewords()[r];if(a==null){t.format("    |   ");continue}t.format(" %3d|%3d",a.getRowNumber(),a.getValue())}t.format("%n")}return t.toString()},n}(),dj=function(){function n(e,t,r,i){this.rowNumber=n.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(e),this.endX=Math.trunc(t),this.bucket=Math.trunc(r),this.value=Math.trunc(i)}return n.prototype.hasValidRowNumber=function(){return this.isValidRowNumber(this.rowNumber)},n.prototype.isValidRowNumber=function(e){return e!==n.BARCODE_ROW_UNKNOWN&&this.bucket===e%3*3},n.prototype.setRowNumberAsRowIndicatorColumn=function(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))},n.prototype.getWidth=function(){return this.endX-this.startX},n.prototype.getStartX=function(){return this.startX},n.prototype.getEndX=function(){return this.endX},n.prototype.getBucket=function(){return this.bucket},n.prototype.getValue=function(){return this.value},n.prototype.getRowNumber=function(){return this.rowNumber},n.prototype.setRowNumber=function(e){this.rowNumber=e},n.prototype.toString=function(){return this.rowNumber+"|"+this.value},n.BARCODE_ROW_UNKNOWN=-1,n}(),pj=function(){function n(){}return n.initialize=function(){for(var e=0;e<Ln.SYMBOL_TABLE.length;e++)for(var t=Ln.SYMBOL_TABLE[e],r=t&1,i=0;i<Ln.BARS_IN_MODULE;i++){for(var a=0;(t&1)===r;)a+=1,t>>=1;r=t&1,n.RATIOS_TABLE[e]||(n.RATIOS_TABLE[e]=new Array(Ln.BARS_IN_MODULE)),n.RATIOS_TABLE[e][Ln.BARS_IN_MODULE-i-1]=Math.fround(a/Ln.MODULES_IN_CODEWORD)}this.bSymbolTableReady=!0},n.getDecodedValue=function(e){var t=n.getDecodedCodewordValue(n.sampleBitCounts(e));return t!==-1?t:n.getClosestDecodedValue(e)},n.sampleBitCounts=function(e){for(var t=Hn.sum(e),r=new Int32Array(Ln.BARS_IN_MODULE),i=0,a=0,o=0;o<Ln.MODULES_IN_CODEWORD;o++){var s=t/(2*Ln.MODULES_IN_CODEWORD)+o*t/Ln.MODULES_IN_CODEWORD;a+e[i]<=s&&(a+=e[i],i++),r[i]++}return r},n.getDecodedCodewordValue=function(e){var t=n.getBitValue(e);return Ln.getCodeword(t)===-1?-1:t},n.getBitValue=function(e){for(var t=0,r=0;r<e.length;r++)for(var i=0;i<e[r];i++)t=t<<1|(r%2===0?1:0);return Math.trunc(t)},n.getClosestDecodedValue=function(e){var t=Hn.sum(e),r=new Array(Ln.BARS_IN_MODULE);if(t>1)for(var i=0;i<r.length;i++)r[i]=Math.fround(e[i]/t);var a=wy.MAX_VALUE,o=-1;this.bSymbolTableReady||n.initialize();for(var s=0;s<n.RATIOS_TABLE.length;s++){for(var u=0,f=n.RATIOS_TABLE[s],h=0;h<Ln.BARS_IN_MODULE;h++){var p=Math.fround(f[h]-r[h]);if(u+=Math.fround(p*p),u>=a)break}u<a&&(a=u,o=Ln.SYMBOL_TABLE[s])}return o},n.bSymbolTableReady=!1,n.RATIOS_TABLE=new Array(Ln.SYMBOL_TABLE.length).map(function(e){return new Array(Ln.BARS_IN_MODULE)}),n}(),gj=function(){function n(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}return n.prototype.getSegmentIndex=function(){return this.segmentIndex},n.prototype.setSegmentIndex=function(e){this.segmentIndex=e},n.prototype.getFileId=function(){return this.fileId},n.prototype.setFileId=function(e){this.fileId=e},n.prototype.getOptionalData=function(){return this.optionalData},n.prototype.setOptionalData=function(e){this.optionalData=e},n.prototype.isLastSegment=function(){return this.lastSegment},n.prototype.setLastSegment=function(e){this.lastSegment=e},n.prototype.getSegmentCount=function(){return this.segmentCount},n.prototype.setSegmentCount=function(e){this.segmentCount=e},n.prototype.getSender=function(){return this.sender||null},n.prototype.setSender=function(e){this.sender=e},n.prototype.getAddressee=function(){return this.addressee||null},n.prototype.setAddressee=function(e){this.addressee=e},n.prototype.getFileName=function(){return this.fileName},n.prototype.setFileName=function(e){this.fileName=e},n.prototype.getFileSize=function(){return this.fileSize},n.prototype.setFileSize=function(e){this.fileSize=e},n.prototype.getChecksum=function(){return this.checksum},n.prototype.setChecksum=function(e){this.checksum=e},n.prototype.getTimestamp=function(){return this.timestamp},n.prototype.setTimestamp=function(e){this.timestamp=e},n}(),W3=function(){function n(){}return n.parseLong=function(e,t){return t===void 0&&(t=void 0),parseInt(e,t)},n}(),mj=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),vj=function(n){mj(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="NullPointerException",e}(Ao),yj=function(){function n(){}return n.prototype.writeBytes=function(e){this.writeBytesOffset(e,0,e.length)},n.prototype.writeBytesOffset=function(e,t,r){if(e==null)throw new vj;if(t<0||t>e.length||r<0||t+r>e.length||t+r<0)throw new ax;if(r===0)return;for(var i=0;i<r;i++)this.write(e[t+i])},n.prototype.flush=function(){},n.prototype.close=function(){},n}(),xj=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),_j=function(n){xj(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e}(Ao),wj=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),bj=function(n){wj(e,n);function e(t){t===void 0&&(t=32);var r=n.call(this)||this;if(r.count=0,t<0)throw new jt("Negative initial size: "+t);return r.buf=new Uint8Array(t),r}return e.prototype.ensureCapacity=function(t){t-this.buf.length>0&&this.grow(t)},e.prototype.grow=function(t){var r=this.buf.length,i=r<<1;if(i-t<0&&(i=t),i<0){if(t<0)throw new _j;i=gn.MAX_VALUE}this.buf=ki.copyOfUint8Array(this.buf,i)},e.prototype.write=function(t){this.ensureCapacity(this.count+1),this.buf[this.count]=t,this.count+=1},e.prototype.writeBytesOffset=function(t,r,i){if(r<0||r>t.length||i<0||r+i-t.length>0)throw new ax;this.ensureCapacity(this.count+i),br.arraycopy(t,r,this.buf,this.count,i),this.count+=i},e.prototype.writeTo=function(t){t.writeBytesOffset(this.buf,0,this.count)},e.prototype.reset=function(){this.count=0},e.prototype.toByteArray=function(){return ki.copyOfUint8Array(this.buf,this.count)},e.prototype.size=function(){return this.count},e.prototype.toString=function(t){return t?typeof t=="string"?this.toString_string(t):this.toString_number(t):this.toString_void()},e.prototype.toString_void=function(){return new String(this.buf).toString()},e.prototype.toString_string=function(t){return new String(this.buf).toString()},e.prototype.toString_number=function(t){return new String(this.buf).toString()},e.prototype.close=function(){},e}(yj),dr;(function(n){n[n.ALPHA=0]="ALPHA",n[n.LOWER=1]="LOWER",n[n.MIXED=2]="MIXED",n[n.PUNCT=3]="PUNCT",n[n.ALPHA_SHIFT=4]="ALPHA_SHIFT",n[n.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(dr||(dr={}));function AS(){if(typeof window<"u")return window.BigInt||null;if(typeof global<"u")return global.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}var Mp;function Gc(n){if(typeof Mp>"u"&&(Mp=AS()),Mp===null)throw new Error("BigInt is not supported!");return Mp(n)}function Aj(){var n=[];n[0]=Gc(1);var e=Gc(900);n[1]=e;for(var t=2;t<16;t++)n[t]=n[t-1]*e;return n}var Ej=function(){function n(){}return n.decode=function(e,t){var r=new cn(""),i=Li.ISO8859_1;r.enableDecoding(i);for(var a=1,o=e[a++],s=new gj;a<e[0];){switch(o){case n.TEXT_COMPACTION_MODE_LATCH:a=n.textCompaction(e,a,r);break;case n.BYTE_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:a=n.byteCompaction(o,e,i,a,r);break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(e[a++]);break;case n.NUMERIC_COMPACTION_MODE_LATCH:a=n.numericCompaction(e,a,r);break;case n.ECI_CHARSET:Li.getCharacterSetECIByValue(e[a++]);break;case n.ECI_GENERAL_PURPOSE:a+=2;break;case n.ECI_USER_DEFINED:a++;break;case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:a=n.decodeMacroBlock(e,a,s);break;case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:throw new pt;default:a--,a=n.textCompaction(e,a,r);break}if(a<e.length)o=e[a++];else throw pt.getFormatInstance()}if(r.length()===0)throw pt.getFormatInstance();var u=new Nm(null,r.toString(),null,t);return u.setOther(s),u},n.decodeMacroBlock=function(e,t,r){if(t+n.NUMBER_OF_SEQUENCE_CODEWORDS>e[0])throw pt.getFormatInstance();for(var i=new Int32Array(n.NUMBER_OF_SEQUENCE_CODEWORDS),a=0;a<n.NUMBER_OF_SEQUENCE_CODEWORDS;a++,t++)i[a]=e[t];r.setSegmentIndex(gn.parseInt(n.decodeBase900toBase10(i,n.NUMBER_OF_SEQUENCE_CODEWORDS)));var o=new cn;t=n.textCompaction(e,t,o),r.setFileId(o.toString());var s=-1;for(e[t]===n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(s=t+1);t<e[0];)switch(e[t]){case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(t++,e[t]){case n.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:var u=new cn;t=n.textCompaction(e,t+1,u),r.setFileName(u.toString());break;case n.MACRO_PDF417_OPTIONAL_FIELD_SENDER:var f=new cn;t=n.textCompaction(e,t+1,f),r.setSender(f.toString());break;case n.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:var h=new cn;t=n.textCompaction(e,t+1,h),r.setAddressee(h.toString());break;case n.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:var p=new cn;t=n.numericCompaction(e,t+1,p),r.setSegmentCount(gn.parseInt(p.toString()));break;case n.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:var g=new cn;t=n.numericCompaction(e,t+1,g),r.setTimestamp(W3.parseLong(g.toString()));break;case n.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:var m=new cn;t=n.numericCompaction(e,t+1,m),r.setChecksum(gn.parseInt(m.toString()));break;case n.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:var x=new cn;t=n.numericCompaction(e,t+1,x),r.setFileSize(W3.parseLong(x.toString()));break;default:throw pt.getFormatInstance()}break;case n.MACRO_PDF417_TERMINATOR:t++,r.setLastSegment(!0);break;default:throw pt.getFormatInstance()}if(s!==-1){var w=t-s;r.isLastSegment()&&w--,r.setOptionalData(ki.copyOfRange(e,s,s+w))}return t},n.textCompaction=function(e,t,r){for(var i=new Int32Array((e[0]-t)*2),a=new Int32Array((e[0]-t)*2),o=0,s=!1;t<e[0]&&!s;){var u=e[t++];if(u<n.TEXT_COMPACTION_MODE_LATCH)i[o]=u/30,i[o+1]=u%30,o+=2;else switch(u){case n.TEXT_COMPACTION_MODE_LATCH:i[o++]=n.TEXT_COMPACTION_MODE_LATCH;break;case n.BYTE_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:case n.NUMERIC_COMPACTION_MODE_LATCH:case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:t--,s=!0;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i[o]=n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,u=e[t++],a[o]=u,o++;break}}return n.decodeTextCompaction(i,a,o,r),t},n.decodeTextCompaction=function(e,t,r,i){for(var a=dr.ALPHA,o=dr.ALPHA,s=0;s<r;){var u=e[s],f="";switch(a){case dr.ALPHA:if(u<26)f=String.fromCharCode(65+u);else switch(u){case 26:f=" ";break;case n.LL:a=dr.LOWER;break;case n.ML:a=dr.MIXED;break;case n.PS:o=a,a=dr.PUNCT_SHIFT;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[s]);break;case n.TEXT_COMPACTION_MODE_LATCH:a=dr.ALPHA;break}break;case dr.LOWER:if(u<26)f=String.fromCharCode(97+u);else switch(u){case 26:f=" ";break;case n.AS:o=a,a=dr.ALPHA_SHIFT;break;case n.ML:a=dr.MIXED;break;case n.PS:o=a,a=dr.PUNCT_SHIFT;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[s]);break;case n.TEXT_COMPACTION_MODE_LATCH:a=dr.ALPHA;break}break;case dr.MIXED:if(u<n.PL)f=n.MIXED_CHARS[u];else switch(u){case n.PL:a=dr.PUNCT;break;case 26:f=" ";break;case n.LL:a=dr.LOWER;break;case n.AL:a=dr.ALPHA;break;case n.PS:o=a,a=dr.PUNCT_SHIFT;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[s]);break;case n.TEXT_COMPACTION_MODE_LATCH:a=dr.ALPHA;break}break;case dr.PUNCT:if(u<n.PAL)f=n.PUNCT_CHARS[u];else switch(u){case n.PAL:a=dr.ALPHA;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[s]);break;case n.TEXT_COMPACTION_MODE_LATCH:a=dr.ALPHA;break}break;case dr.ALPHA_SHIFT:if(a=o,u<26)f=String.fromCharCode(65+u);else switch(u){case 26:f=" ";break;case n.TEXT_COMPACTION_MODE_LATCH:a=dr.ALPHA;break}break;case dr.PUNCT_SHIFT:if(a=o,u<n.PAL)f=n.PUNCT_CHARS[u];else switch(u){case n.PAL:a=dr.ALPHA;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[s]);break;case n.TEXT_COMPACTION_MODE_LATCH:a=dr.ALPHA;break}break}f!==""&&i.append(f),s++}},n.byteCompaction=function(e,t,r,i,a){var o=new bj,s=0,u=0,f=!1;switch(e){case n.BYTE_COMPACTION_MODE_LATCH:for(var h=new Int32Array(6),p=t[i++];i<t[0]&&!f;)switch(h[s++]=p,u=900*u+p,p=t[i++],p){case n.TEXT_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH:case n.NUMERIC_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:i--,f=!0;break;default:if(s%5===0&&s>0){for(var g=0;g<6;++g)o.write(Number(Gc(u)>>Gc(8*(5-g))));u=0,s=0}break}i===t[0]&&p<n.TEXT_COMPACTION_MODE_LATCH&&(h[s++]=p);for(var m=0;m<s;m++)o.write(h[m]);break;case n.BYTE_COMPACTION_MODE_LATCH_6:for(;i<t[0]&&!f;){var x=t[i++];if(x<n.TEXT_COMPACTION_MODE_LATCH)s++,u=900*u+x;else switch(x){case n.TEXT_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH:case n.NUMERIC_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:i--,f=!0;break}if(s%5===0&&s>0){for(var g=0;g<6;++g)o.write(Number(Gc(u)>>Gc(8*(5-g))));u=0,s=0}}break}return a.append(Es.decode(o.toByteArray(),r)),i},n.numericCompaction=function(e,t,r){for(var i=0,a=!1,o=new Int32Array(n.MAX_NUMERIC_CODEWORDS);t<e[0]&&!a;){var s=e[t++];if(t===e[0]&&(a=!0),s<n.TEXT_COMPACTION_MODE_LATCH)o[i]=s,i++;else switch(s){case n.TEXT_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:t--,a=!0;break}(i%n.MAX_NUMERIC_CODEWORDS===0||s===n.NUMERIC_COMPACTION_MODE_LATCH||a)&&i>0&&(r.append(n.decodeBase900toBase10(o,i)),i=0)}return t},n.decodeBase900toBase10=function(e,t){for(var r=Gc(0),i=0;i<t;i++)r+=n.EXP900[t-i-1]*Gc(e[i]);var a=r.toString();if(a.charAt(0)!=="1")throw new pt;return a.substring(1)},n.TEXT_COMPACTION_MODE_LATCH=900,n.BYTE_COMPACTION_MODE_LATCH=901,n.NUMERIC_COMPACTION_MODE_LATCH=902,n.BYTE_COMPACTION_MODE_LATCH_6=924,n.ECI_USER_DEFINED=925,n.ECI_GENERAL_PURPOSE=926,n.ECI_CHARSET=927,n.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,n.MACRO_PDF417_TERMINATOR=922,n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,n.MAX_NUMERIC_CODEWORDS=15,n.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,n.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,n.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,n.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,n.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,n.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,n.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,n.PL=25,n.LL=27,n.AS=27,n.ML=28,n.AL=28,n.PS=29,n.PAL=29,n.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,n.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",n.EXP900=AS()?Aj():[],n.NUMBER_OF_SEQUENCE_CODEWORDS=2,n}(),E1=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Sj=function(){function n(){}return n.decode=function(e,t,r,i,a,o,s){for(var u=new Ty(e,t,r,i,a),f=null,h=null,p,g=!0;;g=!1){if(t!=null&&(f=n.getRowIndicatorColumn(e,u,t,!0,o,s)),i!=null&&(h=n.getRowIndicatorColumn(e,u,i,!1,o,s)),p=n.merge(f,h),p==null)throw ze.getNotFoundInstance();var m=p.getBoundingBox();if(g&&m!=null&&(m.getMinY()<u.getMinY()||m.getMaxY()>u.getMaxY()))u=m;else break}p.setBoundingBox(u);var x=p.getBarcodeColumnCount()+1;p.setDetectionResultColumn(0,f),p.setDetectionResultColumn(x,h);for(var w=f!=null,I=1;I<=x;I++){var C=w?I:x-I;if(p.getDetectionResultColumn(C)===void 0){var P=void 0;C===0||C===x?P=new H3(u,C===0):P=new bS(u),p.setDetectionResultColumn(C,P);for(var B=-1,V=B,Y=u.getMinY();Y<=u.getMaxY();Y++){if(B=n.getStartColumn(p,C,Y,w),B<0||B>u.getMaxX()){if(V===-1)continue;B=V}var q=n.detectCodeword(e,u.getMinX(),u.getMaxX(),w,B,Y,o,s);q!=null&&(P.setCodeword(Y,q),V=B,o=Math.min(o,q.getWidth()),s=Math.max(s,q.getWidth()))}}}return n.createDecoderResult(p)},n.merge=function(e,t){if(e==null&&t==null)return null;var r=n.getBarcodeMetadata(e,t);if(r==null)return null;var i=Ty.merge(n.adjustBoundingBox(e),n.adjustBoundingBox(t));return new hj(r,i)},n.adjustBoundingBox=function(e){var t,r;if(e==null)return null;var i=e.getRowHeights();if(i==null)return null;var a=n.getMax(i),o=0;try{for(var s=E1(i),u=s.next();!u.done;u=s.next()){var f=u.value;if(o+=a-f,f>0)break}}catch(m){t={error:m}}finally{try{u&&!u.done&&(r=s.return)&&r.call(s)}finally{if(t)throw t.error}}for(var h=e.getCodewords(),p=0;o>0&&h[p]==null;p++)o--;for(var g=0,p=i.length-1;p>=0&&(g+=a-i[p],!(i[p]>0));p--);for(var p=h.length-1;g>0&&h[p]==null;p--)g--;return e.getBoundingBox().addMissingRows(o,g,e.isLeft())},n.getMax=function(e){var t,r,i=-1;try{for(var a=E1(e),o=a.next();!o.done;o=a.next()){var s=o.value;i=Math.max(i,s)}}catch(u){t={error:u}}finally{try{o&&!o.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}return i},n.getBarcodeMetadata=function(e,t){var r;if(e==null||(r=e.getBarcodeMetadata())==null)return t==null?null:t.getBarcodeMetadata();var i;return t==null||(i=t.getBarcodeMetadata())==null?r:r.getColumnCount()!==i.getColumnCount()&&r.getErrorCorrectionLevel()!==i.getErrorCorrectionLevel()&&r.getRowCount()!==i.getRowCount()?null:r},n.getRowIndicatorColumn=function(e,t,r,i,a,o){for(var s=new H3(t,i),u=0;u<2;u++)for(var f=u===0?1:-1,h=Math.trunc(Math.trunc(r.getX())),p=Math.trunc(Math.trunc(r.getY()));p<=t.getMaxY()&&p>=t.getMinY();p+=f){var g=n.detectCodeword(e,0,e.getWidth(),i,h,p,a,o);g!=null&&(s.setCodeword(p,g),i?h=g.getStartX():h=g.getEndX())}return s},n.adjustCodewordCount=function(e,t){var r=t[0][1],i=r.getValue(),a=e.getBarcodeColumnCount()*e.getBarcodeRowCount()-n.getNumberOfECCodeWords(e.getBarcodeECLevel());if(i.length===0){if(a<1||a>Ln.MAX_CODEWORDS_IN_BARCODE)throw ze.getNotFoundInstance();r.setValue(a)}else i[0]!==a&&r.setValue(a)},n.createDecoderResult=function(e){var t=n.createBarcodeMatrix(e);n.adjustCodewordCount(e,t);for(var r=new Array,i=new Int32Array(e.getBarcodeRowCount()*e.getBarcodeColumnCount()),a=[],o=new Array,s=0;s<e.getBarcodeRowCount();s++)for(var u=0;u<e.getBarcodeColumnCount();u++){var f=t[s][u+1].getValue(),h=s*e.getBarcodeColumnCount()+u;f.length===0?r.push(h):f.length===1?i[h]=f[0]:(o.push(h),a.push(f))}for(var p=new Array(a.length),g=0;g<p.length;g++)p[g]=a[g];return n.createDecoderResultFromAmbiguousValues(e.getBarcodeECLevel(),i,Ln.toIntArray(r),Ln.toIntArray(o),p)},n.createDecoderResultFromAmbiguousValues=function(e,t,r,i,a){for(var o=new Int32Array(i.length),s=100;s-- >0;){for(var u=0;u<o.length;u++)t[i[u]]=a[u][o[u]];try{return n.decodeCodewords(t,e,r)}catch(h){var f=h instanceof Qi;if(!f)throw h}if(o.length===0)throw Qi.getChecksumInstance();for(var u=0;u<o.length;u++)if(o[u]<a[u].length-1){o[u]++;break}else if(o[u]=0,u===o.length-1)throw Qi.getChecksumInstance()}throw Qi.getChecksumInstance()},n.createBarcodeMatrix=function(e){for(var t,r,i,a,o=Array.from({length:e.getBarcodeRowCount()},function(){return new Array(e.getBarcodeColumnCount()+2)}),s=0;s<o.length;s++)for(var u=0;u<o[s].length;u++)o[s][u]=new j1;var f=0;try{for(var h=E1(e.getDetectionResultColumns()),p=h.next();!p.done;p=h.next()){var g=p.value;if(g!=null)try{for(var m=(i=void 0,E1(g.getCodewords())),x=m.next();!x.done;x=m.next()){var w=x.value;if(w!=null){var I=w.getRowNumber();if(I>=0){if(I>=o.length)continue;o[I][f].setValue(w.getValue())}}}}catch(C){i={error:C}}finally{try{x&&!x.done&&(a=m.return)&&a.call(m)}finally{if(i)throw i.error}}f++}}catch(C){t={error:C}}finally{try{p&&!p.done&&(r=h.return)&&r.call(h)}finally{if(t)throw t.error}}return o},n.isValidBarcodeColumn=function(e,t){return t>=0&&t<=e.getBarcodeColumnCount()+1},n.getStartColumn=function(e,t,r,i){var a,o,s=i?1:-1,u=null;if(n.isValidBarcodeColumn(e,t-s)&&(u=e.getDetectionResultColumn(t-s).getCodeword(r)),u!=null)return i?u.getEndX():u.getStartX();if(u=e.getDetectionResultColumn(t).getCodewordNearby(r),u!=null)return i?u.getStartX():u.getEndX();if(n.isValidBarcodeColumn(e,t-s)&&(u=e.getDetectionResultColumn(t-s).getCodewordNearby(r)),u!=null)return i?u.getEndX():u.getStartX();for(var f=0;n.isValidBarcodeColumn(e,t-s);){t-=s;try{for(var h=(a=void 0,E1(e.getDetectionResultColumn(t).getCodewords())),p=h.next();!p.done;p=h.next()){var g=p.value;if(g!=null)return(i?g.getEndX():g.getStartX())+s*f*(g.getEndX()-g.getStartX())}}catch(m){a={error:m}}finally{try{p&&!p.done&&(o=h.return)&&o.call(h)}finally{if(a)throw a.error}}f++}return i?e.getBoundingBox().getMinX():e.getBoundingBox().getMaxX()},n.detectCodeword=function(e,t,r,i,a,o,s,u){a=n.adjustCodewordStartColumn(e,t,r,i,a,o);var f=n.getModuleBitCount(e,t,r,i,a,o);if(f==null)return null;var h,p=Hn.sum(f);if(i)h=a+p;else{for(var g=0;g<f.length/2;g++){var m=f[g];f[g]=f[f.length-1-g],f[f.length-1-g]=m}h=a,a=h-p}if(!n.checkCodewordSkew(p,s,u))return null;var x=pj.getDecodedValue(f),w=Ln.getCodeword(x);return w===-1?null:new dj(a,h,n.getCodewordBucketNumber(x),w)},n.getModuleBitCount=function(e,t,r,i,a,o){for(var s=a,u=new Int32Array(8),f=0,h=i?1:-1,p=i;(i?s<r:s>=t)&&f<u.length;)e.get(s,o)===p?(u[f]++,s+=h):(f++,p=!p);return f===u.length||s===(i?r:t)&&f===u.length-1?u:null},n.getNumberOfECCodeWords=function(e){return 2<<e},n.adjustCodewordStartColumn=function(e,t,r,i,a,o){for(var s=a,u=i?-1:1,f=0;f<2;f++){for(;(i?s>=t:s<r)&&i===e.get(s,o);){if(Math.abs(a-s)>n.CODEWORD_SKEW_SIZE)return a;s+=u}u=-u,i=!i}return s},n.checkCodewordSkew=function(e,t,r){return t-n.CODEWORD_SKEW_SIZE<=e&&e<=r+n.CODEWORD_SKEW_SIZE},n.decodeCodewords=function(e,t,r){if(e.length===0)throw pt.getFormatInstance();var i=1<<t+1,a=n.correctErrors(e,r,i);n.verifyCodewordCount(e,i);var o=Ej.decode(e,""+t);return o.setErrorsCorrected(a),o.setErasures(r.length),o},n.correctErrors=function(e,t,r){if(t!=null&&t.length>r/2+n.MAX_ERRORS||r<0||r>n.MAX_EC_CODEWORDS)throw Qi.getChecksumInstance();return n.errorCorrection.decode(e,r,t)},n.verifyCodewordCount=function(e,t){if(e.length<4)throw pt.getFormatInstance();var r=e[0];if(r>e.length)throw pt.getFormatInstance();if(r===0)if(t<e.length)e[0]=e.length-t;else throw pt.getFormatInstance()},n.getBitCountForCodeword=function(e){for(var t=new Int32Array(8),r=0,i=t.length-1;!((e&1)!==r&&(r=e&1,i--,i<0));)t[i]++,e>>=1;return t},n.getCodewordBucketNumber=function(e){return e instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(e):this.getCodewordBucketNumber_number(e)},n.getCodewordBucketNumber_number=function(e){return n.getCodewordBucketNumber(n.getBitCountForCodeword(e))},n.getCodewordBucketNumber_Int32Array=function(e){return(e[0]-e[2]+e[4]-e[6]+9)%9},n.toString=function(e){for(var t=new cx,r=0;r<e.length;r++){t.format("Row %2d: ",r);for(var i=0;i<e[r].length;i++){var a=e[r][i];a.getValue().length===0?t.format("        ",null):t.format("%4d(%2d)",a.getValue()[0],a.getConfidence(a.getValue()[0]))}t.format("%n")}return t.toString()},n.CODEWORD_SKEW_SIZE=2,n.MAX_ERRORS=3,n.MAX_EC_CODEWORDS=512,n.errorCorrection=new aj,n}(),Cj=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Iy=function(){function n(){}return n.prototype.decode=function(e,t){t===void 0&&(t=null);var r=n.decode(e,t,!1);if(r==null||r.length===0||r[0]==null)throw ze.getNotFoundInstance();return r[0]},n.prototype.decodeMultiple=function(e,t){t===void 0&&(t=null);try{return n.decode(e,t,!0)}catch(r){throw r instanceof pt||r instanceof Qi?ze.getNotFoundInstance():r}},n.decode=function(e,t,r){var i,a,o=new Array,s=JB.detectMultiple(e,t,r);try{for(var u=Cj(s.getPoints()),f=u.next();!f.done;f=u.next()){var h=f.value,p=Sj.decode(s.getBits(),h[4],h[5],h[6],h[7],n.getMinCodewordWidth(h),n.getMaxCodewordWidth(h)),g=new Fa(p.getText(),p.getRawBytes(),void 0,h,Bt.PDF_417);g.putMetadata(ha.ERROR_CORRECTION_LEVEL,p.getECLevel());var m=p.getOther();m!=null&&g.putMetadata(ha.PDF417_EXTRA_METADATA,m),o.push(g)}}catch(x){i={error:x}}finally{try{f&&!f.done&&(a=u.return)&&a.call(u)}finally{if(i)throw i.error}}return o.map(function(x){return x})},n.getMaxWidth=function(e,t){return e==null||t==null?0:Math.trunc(Math.abs(e.getX()-t.getX()))},n.getMinWidth=function(e,t){return e==null||t==null?gn.MAX_VALUE:Math.trunc(Math.abs(e.getX()-t.getX()))},n.getMaxCodewordWidth=function(e){return Math.floor(Math.max(Math.max(n.getMaxWidth(e[0],e[4]),n.getMaxWidth(e[6],e[2])*Ln.MODULES_IN_CODEWORD/Ln.MODULES_IN_STOP_PATTERN),Math.max(n.getMaxWidth(e[1],e[5]),n.getMaxWidth(e[7],e[3])*Ln.MODULES_IN_CODEWORD/Ln.MODULES_IN_STOP_PATTERN)))},n.getMinCodewordWidth=function(e){return Math.floor(Math.min(Math.min(n.getMinWidth(e[0],e[4]),n.getMinWidth(e[6],e[2])*Ln.MODULES_IN_CODEWORD/Ln.MODULES_IN_STOP_PATTERN),Math.min(n.getMinWidth(e[1],e[5]),n.getMinWidth(e[7],e[3])*Ln.MODULES_IN_CODEWORD/Ln.MODULES_IN_STOP_PATTERN)))},n.prototype.reset=function(){},n}(),Tj=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),G3=function(n){Tj(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="ReaderException",e}(Ao),$3=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Ij=function(){function n(){}return n.prototype.decode=function(e,t){return this.setHints(t),this.decodeInternal(e)},n.prototype.decodeWithState=function(e){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(e)},n.prototype.setHints=function(e){this.hints=e;var t=e!=null&&e.get(kr.TRY_HARDER)!==void 0,r=e==null?null:e.get(kr.POSSIBLE_FORMATS),i=new Array;if(r!=null){var a=r.some(function(o){return o===Bt.UPC_A||o===Bt.UPC_E||o===Bt.EAN_13||o===Bt.EAN_8||o===Bt.CODABAR||o===Bt.CODE_39||o===Bt.CODE_93||o===Bt.CODE_128||o===Bt.ITF||o===Bt.RSS_14||o===Bt.RSS_EXPANDED});a&&!t&&i.push(new B1(e)),r.includes(Bt.QR_CODE)&&i.push(new Cy),r.includes(Bt.DATA_MATRIX)&&i.push(new Sy),r.includes(Bt.AZTEC)&&i.push(new Ay),r.includes(Bt.PDF_417)&&i.push(new Iy),a&&t&&i.push(new B1(e))}i.length===0&&(t||i.push(new B1(e)),i.push(new Cy),i.push(new Sy),i.push(new Ay),i.push(new Iy),t&&i.push(new B1(e))),this.readers=i},n.prototype.reset=function(){var e,t;if(this.readers!==null)try{for(var r=$3(this.readers),i=r.next();!i.done;i=r.next()){var a=i.value;a.reset()}}catch(o){e={error:o}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}},n.prototype.decodeInternal=function(e){var t,r;if(this.readers===null)throw new G3("No readers where selected, nothing can be read.");try{for(var i=$3(this.readers),a=i.next();!a.done;a=i.next()){var o=a.value;try{return o.decode(e,this.hints)}catch(s){if(s instanceof G3)continue}}}catch(s){t={error:s}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}throw new ze("No MultiFormat Readers were able to detect the code.")},n}(),Rj=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Nj=function(n){Rj(e,n);function e(t,r){t===void 0&&(t=null),r===void 0&&(r=500);var i=this,a=new Ij;return a.setHints(t),i=n.call(this,a,r)||this,i}return e.prototype.decodeBitmap=function(t){return this.reader.decodeWithState(t)},e}(Ld),Dj=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();(function(n){Dj(e,n);function e(t){return t===void 0&&(t=500),n.call(this,new Iy,t)||this}return e})(Ld);var Oj=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();(function(n){Oj(e,n);function e(t){return t===void 0&&(t=500),n.call(this,new Cy,t)||this}return e})(Ld);var Ry;(function(n){n[n.ERROR_CORRECTION=0]="ERROR_CORRECTION",n[n.CHARACTER_SET=1]="CHARACTER_SET",n[n.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",n[n.DATA_MATRIX_COMPACT=3]="DATA_MATRIX_COMPACT",n[n.MIN_SIZE=4]="MIN_SIZE",n[n.MAX_SIZE=5]="MAX_SIZE",n[n.MARGIN=6]="MARGIN",n[n.PDF417_COMPACT=7]="PDF417_COMPACT",n[n.PDF417_COMPACTION=8]="PDF417_COMPACTION",n[n.PDF417_DIMENSIONS=9]="PDF417_DIMENSIONS",n[n.AZTEC_LAYERS=10]="AZTEC_LAYERS",n[n.QR_VERSION=11]="QR_VERSION",n[n.GS1_FORMAT=12]="GS1_FORMAT",n[n.FORCE_C40=13]="FORCE_C40"})(Ry||(Ry={}));const Bp=Ry;var ES=function(){function n(e){this.field=e,this.cachedGenerators=[],this.cachedGenerators.push(new rf(e,Int32Array.from([1])))}return n.prototype.buildGenerator=function(e){var t=this.cachedGenerators;if(e>=t.length)for(var r=t[t.length-1],i=this.field,a=t.length;a<=e;a++){var o=r.multiply(new rf(i,Int32Array.from([1,i.exp(a-1+i.getGeneratorBase())])));t.push(o),r=o}return t[e]},n.prototype.encode=function(e,t){if(t===0)throw new jt("No error correction bytes");var r=e.length-t;if(r<=0)throw new jt("No data bytes provided");var i=this.buildGenerator(t),a=new Int32Array(r);br.arraycopy(e,0,a,0,r);var o=new rf(this.field,a);o=o.multiplyByMonomial(t,1);for(var s=o.divide(i)[1],u=s.getCoefficients(),f=t-u.length,h=0;h<f;h++)e[r+h]=0;br.arraycopy(u,0,e,r+f,u.length)},n}(),F1=function(){function n(){}return n.applyMaskPenaltyRule1=function(e){return n.applyMaskPenaltyRule1Internal(e,!0)+n.applyMaskPenaltyRule1Internal(e,!1)},n.applyMaskPenaltyRule2=function(e){for(var t=0,r=e.getArray(),i=e.getWidth(),a=e.getHeight(),o=0;o<a-1;o++)for(var s=r[o],u=0;u<i-1;u++){var f=s[u];f===s[u+1]&&f===r[o+1][u]&&f===r[o+1][u+1]&&t++}return n.N2*t},n.applyMaskPenaltyRule3=function(e){for(var t=0,r=e.getArray(),i=e.getWidth(),a=e.getHeight(),o=0;o<a;o++)for(var s=0;s<i;s++){var u=r[o];s+6<i&&u[s]===1&&u[s+1]===0&&u[s+2]===1&&u[s+3]===1&&u[s+4]===1&&u[s+5]===0&&u[s+6]===1&&(n.isWhiteHorizontal(u,s-4,s)||n.isWhiteHorizontal(u,s+7,s+11))&&t++,o+6<a&&r[o][s]===1&&r[o+1][s]===0&&r[o+2][s]===1&&r[o+3][s]===1&&r[o+4][s]===1&&r[o+5][s]===0&&r[o+6][s]===1&&(n.isWhiteVertical(r,s,o-4,o)||n.isWhiteVertical(r,s,o+7,o+11))&&t++}return t*n.N3},n.isWhiteHorizontal=function(e,t,r){t=Math.max(t,0),r=Math.min(r,e.length);for(var i=t;i<r;i++)if(e[i]===1)return!1;return!0},n.isWhiteVertical=function(e,t,r,i){r=Math.max(r,0),i=Math.min(i,e.length);for(var a=r;a<i;a++)if(e[a][t]===1)return!1;return!0},n.applyMaskPenaltyRule4=function(e){for(var t=0,r=e.getArray(),i=e.getWidth(),a=e.getHeight(),o=0;o<a;o++)for(var s=r[o],u=0;u<i;u++)s[u]===1&&t++;var f=e.getHeight()*e.getWidth(),h=Math.floor(Math.abs(t*2-f)*10/f);return h*n.N4},n.getDataMaskBit=function(e,t,r){var i,a;switch(e){case 0:i=r+t&1;break;case 1:i=r&1;break;case 2:i=t%3;break;case 3:i=(r+t)%3;break;case 4:i=Math.floor(r/2)+Math.floor(t/3)&1;break;case 5:a=r*t,i=(a&1)+a%3;break;case 6:a=r*t,i=(a&1)+a%3&1;break;case 7:a=r*t,i=a%3+(r+t&1)&1;break;default:throw new jt("Invalid mask pattern: "+e)}return i===0},n.applyMaskPenaltyRule1Internal=function(e,t){for(var r=0,i=t?e.getHeight():e.getWidth(),a=t?e.getWidth():e.getHeight(),o=e.getArray(),s=0;s<i;s++){for(var u=0,f=-1,h=0;h<a;h++){var p=t?o[s][h]:o[h][s];p===f?u++:(u>=5&&(r+=n.N1+(u-5)),u=1,f=p)}u>=5&&(r+=n.N1+(u-5))}return r},n.N1=3,n.N2=3,n.N3=40,n.N4=10,n}(),Pj=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Lj=function(){function n(e,t){this.width=e,this.height=t;for(var r=new Array(t),i=0;i!==t;i++)r[i]=new Uint8Array(e);this.bytes=r}return n.prototype.getHeight=function(){return this.height},n.prototype.getWidth=function(){return this.width},n.prototype.get=function(e,t){return this.bytes[t][e]},n.prototype.getArray=function(){return this.bytes},n.prototype.setNumber=function(e,t,r){this.bytes[t][e]=r},n.prototype.setBoolean=function(e,t,r){this.bytes[t][e]=r?1:0},n.prototype.clear=function(e){var t,r;try{for(var i=Pj(this.bytes),a=i.next();!a.done;a=i.next()){var o=a.value;ki.fill(o,e)}}catch(s){t={error:s}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;if(this.width!==t.width||this.height!==t.height)return!1;for(var r=0,i=this.height;r<i;++r)for(var a=this.bytes[r],o=t.bytes[r],s=0,u=this.width;s<u;++s)if(a[s]!==o[s])return!1;return!0},n.prototype.toString=function(){for(var e=new cn,t=0,r=this.height;t<r;++t){for(var i=this.bytes[t],a=0,o=this.width;a<o;++a)switch(i[a]){case 0:e.append(" 0");break;case 1:e.append(" 1");break;default:e.append("  ");break}e.append(`
`)}return e.toString()},n}(),Ny=function(){function n(){this.maskPattern=-1}return n.prototype.getMode=function(){return this.mode},n.prototype.getECLevel=function(){return this.ecLevel},n.prototype.getVersion=function(){return this.version},n.prototype.getMaskPattern=function(){return this.maskPattern},n.prototype.getMatrix=function(){return this.matrix},n.prototype.toString=function(){var e=new cn;return e.append(`<<
`),e.append(" mode: "),e.append(this.mode?this.mode.toString():"null"),e.append(`
 ecLevel: `),e.append(this.ecLevel?this.ecLevel.toString():"null"),e.append(`
 version: `),e.append(this.version?this.version.toString():"null"),e.append(`
 maskPattern: `),e.append(this.maskPattern.toString()),this.matrix?(e.append(`
 matrix:
`),e.append(this.matrix.toString())):e.append(`
 matrix: null
`),e.append(`>>
`),e.toString()},n.prototype.setMode=function(e){this.mode=e},n.prototype.setECLevel=function(e){this.ecLevel=e},n.prototype.setVersion=function(e){this.version=e},n.prototype.setMaskPattern=function(e){this.maskPattern=e},n.prototype.setMatrix=function(e){this.matrix=e},n.isValidMaskPattern=function(e){return e>=0&&e<n.NUM_MASK_PATTERNS},n.NUM_MASK_PATTERNS=8,n}(),kj=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Cr=function(n){kj(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="WriterException",e}(Ao),X3=function(){function n(){}return n.clearMatrix=function(e){e.clear(255)},n.buildMatrix=function(e,t,r,i,a){n.clearMatrix(a),n.embedBasicPatterns(r,a),n.embedTypeInfo(t,i,a),n.maybeEmbedVersionInfo(r,a),n.embedDataBits(e,i,a)},n.embedBasicPatterns=function(e,t){n.embedPositionDetectionPatternsAndSeparators(t),n.embedDarkDotAtLeftBottomCorner(t),n.maybeEmbedPositionAdjustmentPatterns(e,t),n.embedTimingPatterns(t)},n.embedTypeInfo=function(e,t,r){var i=new Zi;n.makeTypeInfoBits(e,t,i);for(var a=0,o=i.getSize();a<o;++a){var s=i.get(i.getSize()-1-a),u=n.TYPE_INFO_COORDINATES[a],f=u[0],h=u[1];if(r.setBoolean(f,h,s),a<8){var p=r.getWidth()-a-1,g=8;r.setBoolean(p,g,s)}else{var p=8,g=r.getHeight()-7+(a-8);r.setBoolean(p,g,s)}}},n.maybeEmbedVersionInfo=function(e,t){if(!(e.getVersionNumber()<7)){var r=new Zi;n.makeVersionInfoBits(e,r);for(var i=6*3-1,a=0;a<6;++a)for(var o=0;o<3;++o){var s=r.get(i);i--,t.setBoolean(a,t.getHeight()-11+o,s),t.setBoolean(t.getHeight()-11+o,a,s)}}},n.embedDataBits=function(e,t,r){for(var i=0,a=-1,o=r.getWidth()-1,s=r.getHeight()-1;o>0;){for(o===6&&(o-=1);s>=0&&s<r.getHeight();){for(var u=0;u<2;++u){var f=o-u;if(n.isEmpty(r.get(f,s))){var h=void 0;i<e.getSize()?(h=e.get(i),++i):h=!1,t!==255&&F1.getDataMaskBit(t,f,s)&&(h=!h),r.setBoolean(f,s,h)}}s+=a}a=-a,s+=a,o-=2}if(i!==e.getSize())throw new Cr("Not all bits consumed: "+i+"/"+e.getSize())},n.findMSBSet=function(e){return 32-gn.numberOfLeadingZeros(e)},n.calculateBCHCode=function(e,t){if(t===0)throw new jt("0 polynomial");var r=n.findMSBSet(t);for(e<<=r-1;n.findMSBSet(e)>=r;)e^=t<<n.findMSBSet(e)-r;return e},n.makeTypeInfoBits=function(e,t,r){if(!Ny.isValidMaskPattern(t))throw new Cr("Invalid mask pattern");var i=e.getBits()<<3|t;r.appendBits(i,5);var a=n.calculateBCHCode(i,n.TYPE_INFO_POLY);r.appendBits(a,10);var o=new Zi;if(o.appendBits(n.TYPE_INFO_MASK_PATTERN,15),r.xor(o),r.getSize()!==15)throw new Cr("should not happen but we got: "+r.getSize())},n.makeVersionInfoBits=function(e,t){t.appendBits(e.getVersionNumber(),6);var r=n.calculateBCHCode(e.getVersionNumber(),n.VERSION_INFO_POLY);if(t.appendBits(r,12),t.getSize()!==18)throw new Cr("should not happen but we got: "+t.getSize())},n.isEmpty=function(e){return e===255},n.embedTimingPatterns=function(e){for(var t=8;t<e.getWidth()-8;++t){var r=(t+1)%2;n.isEmpty(e.get(t,6))&&e.setNumber(t,6,r),n.isEmpty(e.get(6,t))&&e.setNumber(6,t,r)}},n.embedDarkDotAtLeftBottomCorner=function(e){if(e.get(8,e.getHeight()-8)===0)throw new Cr;e.setNumber(8,e.getHeight()-8,1)},n.embedHorizontalSeparationPattern=function(e,t,r){for(var i=0;i<8;++i){if(!n.isEmpty(r.get(e+i,t)))throw new Cr;r.setNumber(e+i,t,0)}},n.embedVerticalSeparationPattern=function(e,t,r){for(var i=0;i<7;++i){if(!n.isEmpty(r.get(e,t+i)))throw new Cr;r.setNumber(e,t+i,0)}},n.embedPositionAdjustmentPattern=function(e,t,r){for(var i=0;i<5;++i)for(var a=n.POSITION_ADJUSTMENT_PATTERN[i],o=0;o<5;++o)r.setNumber(e+o,t+i,a[o])},n.embedPositionDetectionPattern=function(e,t,r){for(var i=0;i<7;++i)for(var a=n.POSITION_DETECTION_PATTERN[i],o=0;o<7;++o)r.setNumber(e+o,t+i,a[o])},n.embedPositionDetectionPatternsAndSeparators=function(e){var t=n.POSITION_DETECTION_PATTERN[0].length;n.embedPositionDetectionPattern(0,0,e),n.embedPositionDetectionPattern(e.getWidth()-t,0,e),n.embedPositionDetectionPattern(0,e.getWidth()-t,e);var r=8;n.embedHorizontalSeparationPattern(0,r-1,e),n.embedHorizontalSeparationPattern(e.getWidth()-r,r-1,e),n.embedHorizontalSeparationPattern(0,e.getWidth()-r,e);var i=7;n.embedVerticalSeparationPattern(i,0,e),n.embedVerticalSeparationPattern(e.getHeight()-i-1,0,e),n.embedVerticalSeparationPattern(i,e.getHeight()-i,e)},n.maybeEmbedPositionAdjustmentPatterns=function(e,t){if(!(e.getVersionNumber()<2))for(var r=e.getVersionNumber()-1,i=n.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[r],a=0,o=i.length;a!==o;a++){var s=i[a];if(s>=0)for(var u=0;u!==o;u++){var f=i[u];f>=0&&n.isEmpty(t.get(f,s))&&n.embedPositionAdjustmentPattern(f-2,s-2,t)}}},n.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),n.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),n.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),n.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),n.VERSION_INFO_POLY=7973,n.TYPE_INFO_POLY=1335,n.TYPE_INFO_MASK_PATTERN=21522,n}(),Mj=function(){function n(e,t){this.dataBytes=e,this.errorCorrectionBytes=t}return n.prototype.getDataBytes=function(){return this.dataBytes},n.prototype.getErrorCorrectionBytes=function(){return this.errorCorrectionBytes},n}(),Y3=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};(function(){function n(){}return n.calculateMaskPenalty=function(e){return F1.applyMaskPenaltyRule1(e)+F1.applyMaskPenaltyRule2(e)+F1.applyMaskPenaltyRule3(e)+F1.applyMaskPenaltyRule4(e)},n.encode=function(e,t,r){r===void 0&&(r=null);var i=n.DEFAULT_BYTE_MODE_ENCODING,a=r!==null&&r.get(Bp.CHARACTER_SET)!==void 0;a&&(i=r.get(Bp.CHARACTER_SET).toString());var o=this.chooseMode(e,i),s=new Zi;if(o===Tr.BYTE&&(a||n.DEFAULT_BYTE_MODE_ENCODING!==i)){var u=Li.getCharacterSetECIByName(i);u!==void 0&&this.appendECI(u,s)}this.appendModeInfo(o,s);var f=new Zi;this.appendBytes(e,o,f,i);var h;if(r!==null&&r.get(Bp.QR_VERSION)!==void 0){var p=Number.parseInt(r.get(Bp.QR_VERSION).toString(),10);h=Zf.getVersionForNumber(p);var g=this.calculateBitsNeeded(o,s,f,h);if(!this.willFit(g,h,t))throw new Cr("Data too big for requested version")}else h=this.recommendVersion(t,o,s,f);var m=new Zi;m.appendBitArray(s);var x=o===Tr.BYTE?f.getSizeInBytes():e.length;this.appendLengthInfo(x,h,o,m),m.appendBitArray(f);var w=h.getECBlocksForLevel(t),I=h.getTotalCodewords()-w.getTotalECCodewords();this.terminateBits(I,m);var C=this.interleaveWithECBytes(m,h.getTotalCodewords(),I,w.getNumBlocks()),P=new Ny;P.setECLevel(t),P.setMode(o),P.setVersion(h);var B=h.getDimensionForVersion(),V=new Lj(B,B),Y=this.chooseMaskPattern(C,t,h,V);return P.setMaskPattern(Y),X3.buildMatrix(C,t,h,Y,V),P.setMatrix(V),P},n.recommendVersion=function(e,t,r,i){var a=this.calculateBitsNeeded(t,r,i,Zf.getVersionForNumber(1)),o=this.chooseVersion(a,e),s=this.calculateBitsNeeded(t,r,i,o);return this.chooseVersion(s,e)},n.calculateBitsNeeded=function(e,t,r,i){return t.getSize()+e.getCharacterCountBits(i)+r.getSize()},n.getAlphanumericCode=function(e){return e<n.ALPHANUMERIC_TABLE.length?n.ALPHANUMERIC_TABLE[e]:-1},n.chooseMode=function(e,t){if(t===void 0&&(t=null),Li.SJIS.getName()===t&&this.isOnlyDoubleByteKanji(e))return Tr.KANJI;for(var r=!1,i=!1,a=0,o=e.length;a<o;++a){var s=e.charAt(a);if(n.isDigit(s))r=!0;else if(this.getAlphanumericCode(s.charCodeAt(0))!==-1)i=!0;else return Tr.BYTE}return i?Tr.ALPHANUMERIC:r?Tr.NUMERIC:Tr.BYTE},n.isOnlyDoubleByteKanji=function(e){var t;try{t=Es.encode(e,Li.SJIS)}catch{return!1}var r=t.length;if(r%2!==0)return!1;for(var i=0;i<r;i+=2){var a=t[i]&255;if((a<129||a>159)&&(a<224||a>235))return!1}return!0},n.chooseMaskPattern=function(e,t,r,i){for(var a=Number.MAX_SAFE_INTEGER,o=-1,s=0;s<Ny.NUM_MASK_PATTERNS;s++){X3.buildMatrix(e,t,r,s,i);var u=this.calculateMaskPenalty(i);u<a&&(a=u,o=s)}return o},n.chooseVersion=function(e,t){for(var r=1;r<=40;r++){var i=Zf.getVersionForNumber(r);if(n.willFit(e,i,t))return i}throw new Cr("Data too big")},n.willFit=function(e,t,r){var i=t.getTotalCodewords(),a=t.getECBlocksForLevel(r),o=a.getTotalECCodewords(),s=i-o,u=(e+7)/8;return s>=u},n.terminateBits=function(e,t){var r=e*8;if(t.getSize()>r)throw new Cr("data bits cannot fit in the QR Code"+t.getSize()+" > "+r);for(var i=0;i<4&&t.getSize()<r;++i)t.appendBit(!1);var a=t.getSize()&7;if(a>0)for(var i=a;i<8;i++)t.appendBit(!1);for(var o=e-t.getSizeInBytes(),i=0;i<o;++i)t.appendBits((i&1)===0?236:17,8);if(t.getSize()!==r)throw new Cr("Bits size does not equal capacity")},n.getNumDataBytesAndNumECBytesForBlockID=function(e,t,r,i,a,o){if(i>=r)throw new Cr("Block ID too large");var s=e%r,u=r-s,f=Math.floor(e/r),h=f+1,p=Math.floor(t/r),g=p+1,m=f-p,x=h-g;if(m!==x)throw new Cr("EC bytes mismatch");if(r!==u+s)throw new Cr("RS blocks mismatch");if(e!==(p+m)*u+(g+x)*s)throw new Cr("Total bytes mismatch");i<u?(a[0]=p,o[0]=m):(a[0]=g,o[0]=x)},n.interleaveWithECBytes=function(e,t,r,i){var a,o,s,u;if(e.getSizeInBytes()!==r)throw new Cr("Number of bits and data bytes does not match");for(var f=0,h=0,p=0,g=new Array,m=0;m<i;++m){var x=new Int32Array(1),w=new Int32Array(1);n.getNumDataBytesAndNumECBytesForBlockID(t,r,i,m,x,w);var I=x[0],C=new Uint8Array(I);e.toBytes(8*f,C,0,I);var P=n.generateECBytes(C,w[0]);g.push(new Mj(C,P)),h=Math.max(h,I),p=Math.max(p,P.length),f+=x[0]}if(r!==f)throw new Cr("Data bytes does not match offset");for(var B=new Zi,m=0;m<h;++m)try{for(var V=(a=void 0,Y3(g)),Y=V.next();!Y.done;Y=V.next()){var q=Y.value,C=q.getDataBytes();m<C.length&&B.appendBits(C[m],8)}}catch(k){a={error:k}}finally{try{Y&&!Y.done&&(o=V.return)&&o.call(V)}finally{if(a)throw a.error}}for(var m=0;m<p;++m)try{for(var D=(s=void 0,Y3(g)),A=D.next();!A.done;A=D.next()){var q=A.value,P=q.getErrorCorrectionBytes();m<P.length&&B.appendBits(P[m],8)}}catch(k){s={error:k}}finally{try{A&&!A.done&&(u=D.return)&&u.call(D)}finally{if(s)throw s.error}}if(t!==B.getSizeInBytes())throw new Cr("Interleaving error: "+t+" and "+B.getSizeInBytes()+" differ.");return B},n.generateECBytes=function(e,t){for(var r=e.length,i=new Int32Array(r+t),a=0;a<r;a++)i[a]=e[a]&255;new ES(xo.QR_CODE_FIELD_256).encode(i,t);for(var o=new Uint8Array(t),a=0;a<t;a++)o[a]=i[r+a];return o},n.appendModeInfo=function(e,t){t.appendBits(e.getBits(),4)},n.appendLengthInfo=function(e,t,r,i){var a=r.getCharacterCountBits(t);if(e>=1<<a)throw new Cr(e+" is bigger than "+((1<<a)-1));i.appendBits(e,a)},n.appendBytes=function(e,t,r,i){switch(t){case Tr.NUMERIC:n.appendNumericBytes(e,r);break;case Tr.ALPHANUMERIC:n.appendAlphanumericBytes(e,r);break;case Tr.BYTE:n.append8BitBytes(e,r,i);break;case Tr.KANJI:n.appendKanjiBytes(e,r);break;default:throw new Cr("Invalid mode: "+t)}},n.getDigit=function(e){return e.charCodeAt(0)-48},n.isDigit=function(e){var t=n.getDigit(e);return t>=0&&t<=9},n.appendNumericBytes=function(e,t){for(var r=e.length,i=0;i<r;){var a=n.getDigit(e.charAt(i));if(i+2<r){var o=n.getDigit(e.charAt(i+1)),s=n.getDigit(e.charAt(i+2));t.appendBits(a*100+o*10+s,10),i+=3}else if(i+1<r){var o=n.getDigit(e.charAt(i+1));t.appendBits(a*10+o,7),i+=2}else t.appendBits(a,4),i++}},n.appendAlphanumericBytes=function(e,t){for(var r=e.length,i=0;i<r;){var a=n.getAlphanumericCode(e.charCodeAt(i));if(a===-1)throw new Cr;if(i+1<r){var o=n.getAlphanumericCode(e.charCodeAt(i+1));if(o===-1)throw new Cr;t.appendBits(a*45+o,11),i+=2}else t.appendBits(a,6),i++}},n.append8BitBytes=function(e,t,r){var i;try{i=Es.encode(e,r)}catch(u){throw new Cr(u)}for(var a=0,o=i.length;a!==o;a++){var s=i[a];t.appendBits(s,8)}},n.appendKanjiBytes=function(e,t){var r;try{r=Es.encode(e,Li.SJIS)}catch(p){throw new Cr(p)}for(var i=r.length,a=0;a<i;a+=2){var o=r[a]&255,s=r[a+1]&255,u=o<<8&4294967295|s,f=-1;if(u>=33088&&u<=40956?f=u-33088:u>=57408&&u<=60351&&(f=u-49472),f===-1)throw new Cr("Invalid byte sequence");var h=(f>>8)*192+(f&255);t.appendBits(h,13)}},n.appendECI=function(e,t){t.appendBits(Tr.ECI.getBits(),4),t.appendBits(e.getValue(),8)},n.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),n.DEFAULT_BYTE_MODE_ENCODING=Li.UTF8.getName(),n})();var Bj=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();(function(n){Bj(e,n);function e(t,r,i,a,o,s,u,f){var h=n.call(this,s,u)||this;if(h.yuvData=t,h.dataWidth=r,h.dataHeight=i,h.left=a,h.top=o,a+s>r||o+u>i)throw new jt("Crop rectangle does not fit within image data.");return f&&h.reverseHorizontal(s,u),h}return e.prototype.getRow=function(t,r){if(t<0||t>=this.getHeight())throw new jt("Requested row is outside the image: "+t);var i=this.getWidth();(r==null||r.length<i)&&(r=new Uint8ClampedArray(i));var a=(t+this.top)*this.dataWidth+this.left;return br.arraycopy(this.yuvData,a,r,0,i),r},e.prototype.getMatrix=function(){var t=this.getWidth(),r=this.getHeight();if(t===this.dataWidth&&r===this.dataHeight)return this.yuvData;var i=t*r,a=new Uint8ClampedArray(i),o=this.top*this.dataWidth+this.left;if(t===this.dataWidth)return br.arraycopy(this.yuvData,o,a,0,i),a;for(var s=0;s<r;s++){var u=s*t;br.arraycopy(this.yuvData,o,a,u,t),o+=this.dataWidth}return a},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(t,r,i,a){return new e(this.yuvData,this.dataWidth,this.dataHeight,this.left+t,this.top+r,i,a,!1)},e.prototype.renderThumbnail=function(){for(var t=this.getWidth()/e.THUMBNAIL_SCALE_FACTOR,r=this.getHeight()/e.THUMBNAIL_SCALE_FACTOR,i=new Int32Array(t*r),a=this.yuvData,o=this.top*this.dataWidth+this.left,s=0;s<r;s++){for(var u=s*t,f=0;f<t;f++){var h=a[o+f*e.THUMBNAIL_SCALE_FACTOR]&255;i[u+f]=4278190080|h*65793}o+=this.dataWidth*e.THUMBNAIL_SCALE_FACTOR}return i},e.prototype.getThumbnailWidth=function(){return this.getWidth()/e.THUMBNAIL_SCALE_FACTOR},e.prototype.getThumbnailHeight=function(){return this.getHeight()/e.THUMBNAIL_SCALE_FACTOR},e.prototype.reverseHorizontal=function(t,r){for(var i=this.yuvData,a=0,o=this.top*this.dataWidth+this.left;a<r;a++,o+=this.dataWidth)for(var s=o+t/2,u=o,f=o+t-1;u<s;u++,f--){var h=i[u];i[u]=i[f],i[f]=h}},e.prototype.invert=function(){return new ox(this)},e.THUMBNAIL_SCALE_FACTOR=2,e})(Rm);var jj=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();(function(n){jj(e,n);function e(t,r,i,a,o,s,u){var f=n.call(this,r,i)||this;if(f.dataWidth=a,f.dataHeight=o,f.left=s,f.top=u,t.BYTES_PER_ELEMENT===4){for(var h=r*i,p=new Uint8ClampedArray(h),g=0;g<h;g++){var m=t[g],x=m>>16&255,w=m>>7&510,I=m&255;p[g]=(x+w+I)/4&255}f.luminances=p}else f.luminances=t;if(a===void 0&&(f.dataWidth=r),o===void 0&&(f.dataHeight=i),s===void 0&&(f.left=0),u===void 0&&(f.top=0),f.left+r>f.dataWidth||f.top+i>f.dataHeight)throw new jt("Crop rectangle does not fit within image data.");return f}return e.prototype.getRow=function(t,r){if(t<0||t>=this.getHeight())throw new jt("Requested row is outside the image: "+t);var i=this.getWidth();(r==null||r.length<i)&&(r=new Uint8ClampedArray(i));var a=(t+this.top)*this.dataWidth+this.left;return br.arraycopy(this.luminances,a,r,0,i),r},e.prototype.getMatrix=function(){var t=this.getWidth(),r=this.getHeight();if(t===this.dataWidth&&r===this.dataHeight)return this.luminances;var i=t*r,a=new Uint8ClampedArray(i),o=this.top*this.dataWidth+this.left;if(t===this.dataWidth)return br.arraycopy(this.luminances,o,a,0,i),a;for(var s=0;s<r;s++){var u=s*t;br.arraycopy(this.luminances,o,a,u,t),o+=this.dataWidth}return a},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(t,r,i,a){return new e(this.luminances,i,a,this.dataWidth,this.dataHeight,this.left+t,this.top+r)},e.prototype.invert=function(){return new ox(this)},e})(Rm);var Fj=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Uj=function(n){Fj(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.forName=function(t){return this.getCharacterSetECIByName(t)},e}(Li),Vj=function(){function n(){}return n.ISO_8859_1=Li.ISO8859_1,n}(),Dy,zj=301,qj=function(n,e){for(var t=1,r=0;r<255;r++)e[r]=t,n[t]=r,t*=2,t>=256&&(t^=zj);return{LOG:n,ALOG:e}};Dy=qj([],[]),Dy.LOG;Dy.ALOG;var K3;(function(n){n[n.FORCE_NONE=0]="FORCE_NONE",n[n.FORCE_SQUARE=1]="FORCE_SQUARE",n[n.FORCE_RECTANGLE=2]="FORCE_RECTANGLE"})(K3||(K3={}));var Q3=129,SS=230,Hj=231,Wj=235,Gj=236,$j=237,Xj=238,Yj=239,Kj=240,wv=254,Qj=254,Z3="[)>05",J3="[)>06",e4="",ar=0,la=1,Ya=2,Oi=3,Xi=4,Pa=5,Zj=function(){function n(){}return n.prototype.getEncodingMode=function(){return ar},n.prototype.encode=function(e){var t=ol.determineConsecutiveDigitCount(e.getMessage(),e.pos);if(t>=2)e.writeCodeword(this.encodeASCIIDigits(e.getMessage().charCodeAt(e.pos),e.getMessage().charCodeAt(e.pos+1))),e.pos+=2;else{var r=e.getCurrentChar(),i=ol.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(i!==this.getEncodingMode())switch(i){case Pa:e.writeCodeword(Hj),e.signalEncoderChange(Pa);return;case la:e.writeCodeword(SS),e.signalEncoderChange(la);return;case Oi:e.writeCodeword(Xj),e.signalEncoderChange(Oi);break;case Ya:e.writeCodeword(Yj),e.signalEncoderChange(Ya);break;case Xi:e.writeCodeword(Kj),e.signalEncoderChange(Xi);break;default:throw new Error("Illegal mode: "+i)}else ol.isExtendedASCII(r)?(e.writeCodeword(Wj),e.writeCodeword(r-128+1),e.pos++):(e.writeCodeword(r+1),e.pos++)}},n.prototype.encodeASCIIDigits=function(e,t){if(ol.isDigit(e)&&ol.isDigit(t)){var r=(e-48)*10+(t-48);return r+130}throw new Error("not digits: "+e+t)},n}(),Jj=function(){function n(){}return n.prototype.getEncodingMode=function(){return Pa},n.prototype.encode=function(e){var t=new cn;for(t.append(0);e.hasMoreCharacters();){var r=e.getCurrentChar();t.append(r),e.pos++;var i=ol.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(i!==this.getEncodingMode()){e.signalEncoderChange(ar);break}}var a=t.length()-1,o=1,s=e.getCodewordCount()+a+o;e.updateSymbolInfo(s);var u=e.getSymbolInfo().getDataCapacity()-s>0;if(e.hasMoreCharacters()||u)if(a<=249)t.setCharAt(0,Dn.getCharAt(a));else if(a<=1555)t.setCharAt(0,Dn.getCharAt(Math.floor(a/250)+249)),t.insert(1,Dn.getCharAt(a%250));else throw new Error("Message length not in valid ranges: "+a);for(var f=0,r=t.length();f<r;f++)e.writeCodeword(this.randomize255State(t.charAt(f).charCodeAt(0),e.getCodewordCount()+1))},n.prototype.randomize255State=function(e,t){var r=149*t%255+1,i=e+r;return i<=255?i:i-256},n}(),fx=function(){function n(){}return n.prototype.getEncodingMode=function(){return la},n.prototype.encodeMaximal=function(e){for(var t=new cn,r=0,i=e.pos,a=0;e.hasMoreCharacters();){var o=e.getCurrentChar();e.pos++,r=this.encodeChar(o,t),t.length()%3===0&&(i=e.pos,a=t.length())}if(a!==t.length()){var s=Math.floor(t.length()/3*2),u=Math.floor(e.getCodewordCount()+s+1);e.updateSymbolInfo(u);var f=e.getSymbolInfo().getDataCapacity()-u,h=Math.floor(t.length()%3);(h===2&&f!==2||h===1&&(r>3||f!==1))&&(e.pos=i)}t.length()>0&&e.writeCodeword(SS),this.handleEOD(e,t)},n.prototype.encode=function(e){for(var t=new cn;e.hasMoreCharacters();){var r=e.getCurrentChar();e.pos++;var i=this.encodeChar(r,t),a=Math.floor(t.length()/3)*2,o=e.getCodewordCount()+a;e.updateSymbolInfo(o);var s=e.getSymbolInfo().getDataCapacity()-o;if(!e.hasMoreCharacters()){var u=new cn;for(t.length()%3===2&&s!==2&&(i=this.backtrackOneCharacter(e,t,u,i));t.length()%3===1&&(i>3||s!==1);)i=this.backtrackOneCharacter(e,t,u,i);break}var f=t.length();if(f%3===0){var h=ol.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(h!==this.getEncodingMode()){e.signalEncoderChange(ar);break}}}this.handleEOD(e,t)},n.prototype.backtrackOneCharacter=function(e,t,r,i){var a=t.length(),o=t.toString().substring(0,a-i);t.setLengthToZero(),t.append(o),e.pos--;var s=e.getCurrentChar();return i=this.encodeChar(s,r),e.resetSymbolInfo(),i},n.prototype.writeNextTriplet=function(e,t){e.writeCodewords(this.encodeToCodewords(t.toString()));var r=t.toString().substring(3);t.setLengthToZero(),t.append(r)},n.prototype.handleEOD=function(e,t){var r=Math.floor(t.length()/3*2),i=t.length()%3,a=e.getCodewordCount()+r;e.updateSymbolInfo(a);var o=e.getSymbolInfo().getDataCapacity()-a;if(i===2){for(t.append("\0");t.length()>=3;)this.writeNextTriplet(e,t);e.hasMoreCharacters()&&e.writeCodeword(wv)}else if(o===1&&i===1){for(;t.length()>=3;)this.writeNextTriplet(e,t);e.hasMoreCharacters()&&e.writeCodeword(wv),e.pos--}else if(i===0){for(;t.length()>=3;)this.writeNextTriplet(e,t);(o>0||e.hasMoreCharacters())&&e.writeCodeword(wv)}else throw new Error("Unexpected case. Please report!");e.signalEncoderChange(ar)},n.prototype.encodeChar=function(e,t){if(e===32)return t.append(3),1;if(e>=48&&e<=57)return t.append(e-48+4),1;if(e>=65&&e<=90)return t.append(e-65+14),1;if(e<32)return t.append(0),t.append(e),2;if(e<=47)return t.append(1),t.append(e-33),2;if(e<=64)return t.append(1),t.append(e-58+15),2;if(e<=95)return t.append(1),t.append(e-91+22),2;if(e<=127)return t.append(2),t.append(e-96),2;t.append("1");var r=2;return r+=this.encodeChar(e-128,t),r},n.prototype.encodeToCodewords=function(e){var t=1600*e.charCodeAt(0)+40*e.charCodeAt(1)+e.charCodeAt(2)+1,r=t/256,i=t%256,a=new cn;return a.append(r),a.append(i),a.toString()},n}(),eF=function(){function n(){}return n.prototype.getEncodingMode=function(){return Xi},n.prototype.encode=function(e){for(var t=new cn;e.hasMoreCharacters();){var r=e.getCurrentChar();this.encodeChar(r,t),e.pos++;var i=t.length();if(i>=4){e.writeCodewords(this.encodeToCodewords(t.toString()));var a=t.toString().substring(4);t.setLengthToZero(),t.append(a);var o=ol.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(o!==this.getEncodingMode()){e.signalEncoderChange(ar);break}}}t.append(Dn.getCharAt(31)),this.handleEOD(e,t)},n.prototype.handleEOD=function(e,t){try{var r=t.length();if(r===0)return;if(r===1){e.updateSymbolInfo();var i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount(),a=e.getRemainingCharacters();if(a>i&&(e.updateSymbolInfo(e.getCodewordCount()+1),i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount()),a<=i&&i<=2)return}if(r>4)throw new Error("Count must not exceed 4");var o=r-1,s=this.encodeToCodewords(t.toString()),u=!e.hasMoreCharacters(),f=u&&o<=2;if(o<=2){e.updateSymbolInfo(e.getCodewordCount()+o);var i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount();i>=3&&(f=!1,e.updateSymbolInfo(e.getCodewordCount()+s.length))}f?(e.resetSymbolInfo(),e.pos-=o):e.writeCodewords(s)}finally{e.signalEncoderChange(ar)}},n.prototype.encodeChar=function(e,t){e>=32&&e<=63?t.append(e):e>=64&&e<=94?t.append(Dn.getCharAt(e-64)):ol.illegalCharacter(Dn.getCharAt(e))},n.prototype.encodeToCodewords=function(e){var t=e.length;if(t===0)throw new Error("StringBuilder must not be empty");var r=e.charAt(0).charCodeAt(0),i=t>=2?e.charAt(1).charCodeAt(0):0,a=t>=3?e.charAt(2).charCodeAt(0):0,o=t>=4?e.charAt(3).charCodeAt(0):0,s=(r<<18)+(i<<12)+(a<<6)+o,u=s>>16&255,f=s>>8&255,h=s&255,p=new cn;return p.append(u),t>=2&&p.append(f),t>=3&&p.append(h),p.toString()},n}(),tF=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),nF=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Xn=function(){function n(e,t,r,i,a,o,s,u){s===void 0&&(s=0),u===void 0&&(u=0),this.rectangular=e,this.dataCapacity=t,this.errorCodewords=r,this.matrixWidth=i,this.matrixHeight=a,this.dataRegions=o,this.rsBlockData=s,this.rsBlockError=u}return n.lookup=function(e,t,r,i,a){var o,s;t===void 0&&(t=0),r===void 0&&(r=null),i===void 0&&(i=null),a===void 0&&(a=!0);try{for(var u=nF(iF),f=u.next();!f.done;f=u.next()){var h=f.value;if(!(t===1&&h.rectangular)&&!(t===2&&!h.rectangular)&&!(r!=null&&(h.getSymbolWidth()<r.getWidth()||h.getSymbolHeight()<r.getHeight()))&&!(i!=null&&(h.getSymbolWidth()>i.getWidth()||h.getSymbolHeight()>i.getHeight()))&&e<=h.dataCapacity)return h}}catch(p){o={error:p}}finally{try{f&&!f.done&&(s=u.return)&&s.call(u)}finally{if(o)throw o.error}}if(a)throw new Error("Can't find a symbol arrangement that matches the message. Data codewords: "+e);return null},n.prototype.getHorizontalDataRegions=function(){switch(this.dataRegions){case 1:return 1;case 2:case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},n.prototype.getVerticalDataRegions=function(){switch(this.dataRegions){case 1:case 2:return 1;case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},n.prototype.getSymbolDataWidth=function(){return this.getHorizontalDataRegions()*this.matrixWidth},n.prototype.getSymbolDataHeight=function(){return this.getVerticalDataRegions()*this.matrixHeight},n.prototype.getSymbolWidth=function(){return this.getSymbolDataWidth()+this.getHorizontalDataRegions()*2},n.prototype.getSymbolHeight=function(){return this.getSymbolDataHeight()+this.getVerticalDataRegions()*2},n.prototype.getCodewordCount=function(){return this.dataCapacity+this.errorCodewords},n.prototype.getInterleavedBlockCount=function(){return this.rsBlockData?this.dataCapacity/this.rsBlockData:1},n.prototype.getDataCapacity=function(){return this.dataCapacity},n.prototype.getErrorCodewords=function(){return this.errorCodewords},n.prototype.getDataLengthForInterleavedBlock=function(e){return this.rsBlockData},n.prototype.getErrorLengthForInterleavedBlock=function(e){return this.rsBlockError},n}(),rF=function(n){tF(e,n);function e(){return n.call(this,!1,1558,620,22,22,36,-1,62)||this}return e.prototype.getInterleavedBlockCount=function(){return 10},e.prototype.getDataLengthForInterleavedBlock=function(t){return t<=8?156:155},e}(Xn),iF=[new Xn(!1,3,5,8,8,1),new Xn(!1,5,7,10,10,1),new Xn(!0,5,7,16,6,1),new Xn(!1,8,10,12,12,1),new Xn(!0,10,11,14,6,2),new Xn(!1,12,12,14,14,1),new Xn(!0,16,14,24,10,1),new Xn(!1,18,14,16,16,1),new Xn(!1,22,18,18,18,1),new Xn(!0,22,18,16,10,2),new Xn(!1,30,20,20,20,1),new Xn(!0,32,24,16,14,2),new Xn(!1,36,24,22,22,1),new Xn(!1,44,28,24,24,1),new Xn(!0,49,28,22,14,2),new Xn(!1,62,36,14,14,4),new Xn(!1,86,42,16,16,4),new Xn(!1,114,48,18,18,4),new Xn(!1,144,56,20,20,4),new Xn(!1,174,68,22,22,4),new Xn(!1,204,84,24,24,4,102,42),new Xn(!1,280,112,14,14,16,140,56),new Xn(!1,368,144,16,16,16,92,36),new Xn(!1,456,192,18,18,16,114,48),new Xn(!1,576,224,20,20,16,144,56),new Xn(!1,696,272,22,22,16,174,68),new Xn(!1,816,336,24,24,16,136,56),new Xn(!1,1050,408,18,18,36,175,68),new Xn(!1,1304,496,20,20,36,163,62),new rF],aF=function(){function n(e){this.msg=e,this.pos=0,this.skipAtEnd=0;for(var t=e.split("").map(function(s){return s.charCodeAt(0)}),r=new cn,i=0,a=t.length;i<a;i++){var o=String.fromCharCode(t[i]&255);if(o==="?"&&e.charAt(i)!=="?")throw new Error("Message contains characters outside ISO-8859-1 encoding.");r.append(o)}this.msg=r.toString(),this.shape=0,this.codewords=new cn,this.newEncoding=-1}return n.prototype.setSymbolShape=function(e){this.shape=e},n.prototype.setSizeConstraints=function(e,t){this.minSize=e,this.maxSize=t},n.prototype.getMessage=function(){return this.msg},n.prototype.setSkipAtEnd=function(e){this.skipAtEnd=e},n.prototype.getCurrentChar=function(){return this.msg.charCodeAt(this.pos)},n.prototype.getCurrent=function(){return this.msg.charCodeAt(this.pos)},n.prototype.getCodewords=function(){return this.codewords},n.prototype.writeCodewords=function(e){this.codewords.append(e)},n.prototype.writeCodeword=function(e){this.codewords.append(e)},n.prototype.getCodewordCount=function(){return this.codewords.length()},n.prototype.getNewEncoding=function(){return this.newEncoding},n.prototype.signalEncoderChange=function(e){this.newEncoding=e},n.prototype.resetEncoderSignal=function(){this.newEncoding=-1},n.prototype.hasMoreCharacters=function(){return this.pos<this.getTotalMessageCharCount()},n.prototype.getTotalMessageCharCount=function(){return this.msg.length-this.skipAtEnd},n.prototype.getRemainingCharacters=function(){return this.getTotalMessageCharCount()-this.pos},n.prototype.getSymbolInfo=function(){return this.symbolInfo},n.prototype.updateSymbolInfo=function(e){e===void 0&&(e=this.getCodewordCount()),(this.symbolInfo==null||e>this.symbolInfo.getDataCapacity())&&(this.symbolInfo=Xn.lookup(e,this.shape,this.minSize,this.maxSize,!0))},n.prototype.resetSymbolInfo=function(){this.symbolInfo=null},n}(),oF=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),sF=function(n){oF(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getEncodingMode=function(){return Oi},e.prototype.encode=function(t){for(var r=new cn;t.hasMoreCharacters();){var i=t.getCurrentChar();t.pos++,this.encodeChar(i,r);var a=r.length();if(a%3===0){this.writeNextTriplet(t,r);var o=ol.lookAheadTest(t.getMessage(),t.pos,this.getEncodingMode());if(o!==this.getEncodingMode()){t.signalEncoderChange(ar);break}}}this.handleEOD(t,r)},e.prototype.encodeChar=function(t,r){switch(t){case 13:r.append(0);break;case 42:r.append(1);break;case 62:r.append(2);break;case 32:r.append(3);break;default:t>=48&&t<=57?r.append(t-48+4):t>=65&&t<=90?r.append(t-65+14):ol.illegalCharacter(Dn.getCharAt(t));break}return 1},e.prototype.handleEOD=function(t,r){t.updateSymbolInfo();var i=t.getSymbolInfo().getDataCapacity()-t.getCodewordCount(),a=r.length();t.pos-=a,(t.getRemainingCharacters()>1||i>1||t.getRemainingCharacters()!==i)&&t.writeCodeword(Qj),t.getNewEncoding()<0&&t.signalEncoderChange(ar)},e}(fx),lF=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),uF=function(n){lF(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getEncodingMode=function(){return Ya},e.prototype.encodeChar=function(t,r){if(t===32)return r.append(3),1;if(t>=48&&t<=57)return r.append(t-48+4),1;if(t>=97&&t<=122)return r.append(t-97+14),1;if(t<32)return r.append(0),r.append(t),2;if(t<=47)return r.append(1),r.append(t-33),2;if(t<=64)return r.append(1),r.append(t-58+15),2;if(t>=91&&t<=95)return r.append(1),r.append(t-91+22),2;if(t===96)return r.append(2),r.append(0),2;if(t<=90)return r.append(2),r.append(t-65+1),2;if(t<=127)return r.append(2),r.append(t-123+27),2;r.append("1");var i=2;return i+=this.encodeChar(t-128,r),i},e}(fx),ol=function(){function n(){}return n.randomize253State=function(e){var t=149*e%253+1,r=Q3+t;return r<=254?r:r-254},n.encodeHighLevel=function(e,t,r,i,a){t===void 0&&(t=0),r===void 0&&(r=null),i===void 0&&(i=null),a===void 0&&(a=!1);var o=new fx,s=[new Zj,o,new uF,new sF,new eF,new Jj],u=new aF(e);u.setSymbolShape(t),u.setSizeConstraints(r,i),e.startsWith(Z3)&&e.endsWith(e4)?(u.writeCodeword(Gj),u.setSkipAtEnd(2),u.pos+=Z3.length):e.startsWith(J3)&&e.endsWith(e4)&&(u.writeCodeword($j),u.setSkipAtEnd(2),u.pos+=J3.length);var f=ar;for(a&&(o.encodeMaximal(u),f=u.getNewEncoding(),u.resetEncoderSignal());u.hasMoreCharacters();)s[f].encode(u),u.getNewEncoding()>=0&&(f=u.getNewEncoding(),u.resetEncoderSignal());var h=u.getCodewordCount();u.updateSymbolInfo();var p=u.getSymbolInfo().getDataCapacity();h<p&&f!==ar&&f!==Pa&&f!==Xi&&u.writeCodeword("þ");var g=u.getCodewords();for(g.length()<p&&g.append(Q3);g.length()<p;)g.append(this.randomize253State(g.length()+1));return u.getCodewords().toString()},n.lookAheadTest=function(e,t,r){var i=this.lookAheadTestIntern(e,t,r);if(r===Oi&&i===Oi){for(var a=Math.min(t+3,e.length),o=t;o<a;o++)if(!this.isNativeX12(e.charCodeAt(o)))return ar}else if(r===Xi&&i===Xi){for(var a=Math.min(t+4,e.length),o=t;o<a;o++)if(!this.isNativeEDIFACT(e.charCodeAt(o)))return ar}return i},n.lookAheadTestIntern=function(e,t,r){if(t>=e.length)return r;var i;r===ar?i=[0,1,1,1,1,1.25]:(i=[1,2,2,2,2,2.25],i[r]=0);for(var a=0,o=new Uint8Array(6),s=[];;){if(t+a===e.length){ki.fill(o,0),ki.fill(s,0);var u=this.findMinimums(i,s,gn.MAX_VALUE,o),f=this.getMinimumCount(o);if(s[ar]===u)return ar;if(f===1){if(o[Pa]>0)return Pa;if(o[Xi]>0)return Xi;if(o[Ya]>0)return Ya;if(o[Oi]>0)return Oi}return la}var h=e.charCodeAt(t+a);if(a++,this.isDigit(h)?i[ar]+=.5:this.isExtendedASCII(h)?(i[ar]=Math.ceil(i[ar]),i[ar]+=2):(i[ar]=Math.ceil(i[ar]),i[ar]++),this.isNativeC40(h)?i[la]+=2/3:this.isExtendedASCII(h)?i[la]+=8/3:i[la]+=4/3,this.isNativeText(h)?i[Ya]+=2/3:this.isExtendedASCII(h)?i[Ya]+=8/3:i[Ya]+=4/3,this.isNativeX12(h)?i[Oi]+=2/3:this.isExtendedASCII(h)?i[Oi]+=13/3:i[Oi]+=10/3,this.isNativeEDIFACT(h)?i[Xi]+=3/4:this.isExtendedASCII(h)?i[Xi]+=17/4:i[Xi]+=13/4,this.isSpecialB256(h)?i[Pa]+=4:i[Pa]++,a>=4){if(ki.fill(o,0),ki.fill(s,0),this.findMinimums(i,s,gn.MAX_VALUE,o),s[ar]<this.min(s[Pa],s[la],s[Ya],s[Oi],s[Xi]))return ar;if(s[Pa]<s[ar]||s[Pa]+1<this.min(s[la],s[Ya],s[Oi],s[Xi]))return Pa;if(s[Xi]+1<this.min(s[Pa],s[la],s[Ya],s[Oi],s[ar]))return Xi;if(s[Ya]+1<this.min(s[Pa],s[la],s[Xi],s[Oi],s[ar]))return Ya;if(s[Oi]+1<this.min(s[Pa],s[la],s[Xi],s[Ya],s[ar]))return Oi;if(s[la]+1<this.min(s[ar],s[Pa],s[Xi],s[Ya])){if(s[la]<s[Oi])return la;if(s[la]===s[Oi]){for(var p=t+a+1;p<e.length;){var g=e.charCodeAt(p);if(this.isX12TermSep(g))return Oi;if(!this.isNativeX12(g))break;p++}return la}}}}},n.min=function(e,t,r,i,a){var o=Math.min(e,Math.min(t,Math.min(r,i)));return a===void 0?o:Math.min(o,a)},n.findMinimums=function(e,t,r,i){for(var a=0;a<6;a++){var o=t[a]=Math.ceil(e[a]);r>o&&(r=o,ki.fill(i,0)),r===o&&(i[a]=i[a]+1)}return r},n.getMinimumCount=function(e){for(var t=0,r=0;r<6;r++)t+=e[r];return t||0},n.isDigit=function(e){return e>=48&&e<=57},n.isExtendedASCII=function(e){return e>=128&&e<=255},n.isNativeC40=function(e){return e===32||e>=48&&e<=57||e>=65&&e<=90},n.isNativeText=function(e){return e===32||e>=48&&e<=57||e>=97&&e<=122},n.isNativeX12=function(e){return this.isX12TermSep(e)||e===32||e>=48&&e<=57||e>=65&&e<=90},n.isX12TermSep=function(e){return e===13||e===42||e===62},n.isNativeEDIFACT=function(e){return e>=32&&e<=94},n.isSpecialB256=function(e){return!1},n.determineConsecutiveDigitCount=function(e,t){t===void 0&&(t=0);for(var r=e.length,i=t;i<r&&this.isDigit(e.charCodeAt(i));)i++;return i-t},n.illegalCharacter=function(e){var t=gn.toHexString(e.charCodeAt(0));throw t="0000".substring(0,4-t.length)+t,new Error("Illegal character: "+e+" (0x"+t+")")},n}(),bv=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},t4=function(){function n(e){this.charset=e,this.name=e.name}return n.prototype.canEncode=function(e){try{return Es.encode(e,this.charset)!=null}catch{return!1}},n}(),cF=function(){function n(e,t,r){var i,a,o,s,u,f;this.ENCODERS=["IBM437","ISO-8859-2","ISO-8859-3","ISO-8859-4","ISO-8859-5","ISO-8859-6","ISO-8859-7","ISO-8859-8","ISO-8859-9","ISO-8859-10","ISO-8859-11","ISO-8859-13","ISO-8859-14","ISO-8859-15","ISO-8859-16","windows-1250","windows-1251","windows-1252","windows-1256","Shift_JIS"].map(function(T){return new t4(Uj.forName(T))}),this.encoders=[];var h=[];h.push(new t4(Vj.ISO_8859_1));for(var p=t!=null&&t.name.startsWith("UTF"),g=0;g<e.length;g++){var m=!1;try{for(var x=(i=void 0,bv(h)),w=x.next();!w.done;w=x.next()){var I=w.value,C=e.charAt(g),P=C.charCodeAt(0);if(P===r||I.canEncode(C)){m=!0;break}}}catch(T){i={error:T}}finally{try{w&&!w.done&&(a=x.return)&&a.call(x)}finally{if(i)throw i.error}}if(!m)try{for(var B=(o=void 0,bv(this.ENCODERS)),V=B.next();!V.done;V=B.next()){var I=V.value;if(I.canEncode(e.charAt(g))){h.push(I),m=!0;break}}}catch(T){o={error:T}}finally{try{V&&!V.done&&(s=B.return)&&s.call(B)}finally{if(o)throw o.error}}m||(p=!0)}if(h.length===1&&!p)this.encoders=[h[0]];else{this.encoders=[];var Y=0;try{for(var q=bv(h),D=q.next();!D.done;D=q.next()){var I=D.value;this.encoders[Y++]=I}}catch(T){u={error:T}}finally{try{D&&!D.done&&(f=q.return)&&f.call(q)}finally{if(u)throw u.error}}}var A=-1;if(t!=null){for(var g=0;g<this.encoders.length;g++)if(this.encoders[g]!=null&&t.name===this.encoders[g].name){A=g;break}}this.priorityEncoderIndex=A}return n.prototype.length=function(){return this.encoders.length},n.prototype.getCharsetName=function(e){if(!(e<this.length()))throw new Error("index must be less than length");return this.encoders[e].name},n.prototype.getCharset=function(e){if(!(e<this.length()))throw new Error("index must be less than length");return this.encoders[e].charset},n.prototype.getECIValue=function(e){return this.encoders[e].charset.getValueIdentifier()},n.prototype.getPriorityEncoderIndex=function(){return this.priorityEncoderIndex},n.prototype.canEncode=function(e,t){if(!(t<this.length()))throw new Error("index must be less than length");return!0},n.prototype.encode=function(e,t){if(!(t<this.length()))throw new Error("index must be less than length");return Es.encode(Dn.getCharAt(e),this.encoders[t].name)},n}(),fF=3,hF=function(){function n(e,t,r){this.fnc1=r;var i=new cF(e,t,r);if(i.length()===1)for(var a=0;a<this.bytes.length;a++){var o=e.charAt(a).charCodeAt(0);this.bytes[a]=o===r?1e3:o}else this.bytes=this.encodeMinimally(e,i,r)}return n.prototype.getFNC1Character=function(){return this.fnc1},n.prototype.length=function(){return this.bytes.length},n.prototype.haveNCharacters=function(e,t){if(e+t-1>=this.bytes.length)return!1;for(var r=0;r<t;r++)if(this.isECI(e+r))return!1;return!0},n.prototype.charAt=function(e){if(e<0||e>=this.length())throw new Error(""+e);if(this.isECI(e))throw new Error("value at "+e+" is not a character but an ECI");return this.isFNC1(e)?this.fnc1:this.bytes[e]},n.prototype.subSequence=function(e,t){if(e<0||e>t||t>this.length())throw new Error(""+e);for(var r=new cn,i=e;i<t;i++){if(this.isECI(i))throw new Error("value at "+i+" is not a character but an ECI");r.append(this.charAt(i))}return r.toString()},n.prototype.isECI=function(e){if(e<0||e>=this.length())throw new Error(""+e);return this.bytes[e]>255&&this.bytes[e]<=999},n.prototype.isFNC1=function(e){if(e<0||e>=this.length())throw new Error(""+e);return this.bytes[e]===1e3},n.prototype.getECIValue=function(e){if(e<0||e>=this.length())throw new Error(""+e);if(!this.isECI(e))throw new Error("value at "+e+" is not an ECI but a character");return this.bytes[e]-256},n.prototype.addEdge=function(e,t,r){(e[t][r.encoderIndex]==null||e[t][r.encoderIndex].cachedTotalSize>r.cachedTotalSize)&&(e[t][r.encoderIndex]=r)},n.prototype.addEdges=function(e,t,r,i,a,o){var s=e.charAt(i).charCodeAt(0),u=0,f=t.length();t.getPriorityEncoderIndex()>=0&&(s===o||t.canEncode(s,t.getPriorityEncoderIndex()))&&(u=t.getPriorityEncoderIndex(),f=u+1);for(var h=u;h<f;h++)(s===o||t.canEncode(s,h))&&this.addEdge(r,i+1,new n4(s,t,h,a,o))},n.prototype.encodeMinimally=function(e,t,r){var i=e.length,a=new n4[i+1][t.length()];this.addEdges(e,t,a,0,null,r);for(var o=1;o<=i;o++){for(var s=0;s<t.length();s++)a[o][s]!=null&&o<i&&this.addEdges(e,t,a,o,a[o][s],r);for(var s=0;s<t.length();s++)a[o-1][s]=null}for(var u=-1,f=gn.MAX_VALUE,s=0;s<t.length();s++)if(a[i][s]!=null){var h=a[i][s];h.cachedTotalSize<f&&(f=h.cachedTotalSize,u=s)}if(u<0)throw new Error('Failed to encode "'+e+'"');for(var p=[],g=a[i][u];g!=null;){if(g.isFNC1())p.unshift(1e3);else for(var m=t.encode(g.c,g.encoderIndex),o=m.length-1;o>=0;o--)p.unshift(m[o]&255);var x=g.previous===null?0:g.previous.encoderIndex;x!==g.encoderIndex&&p.unshift(256+t.getECIValue(g.encoderIndex)),g=g.previous}for(var w=[],o=0;o<w.length;o++)w[o]=p[o];return w},n}(),n4=function(){function n(e,t,r,i,a){this.c=e,this.encoderSet=t,this.encoderIndex=r,this.previous=i,this.fnc1=a,this.c=e===a?1e3:e;var o=this.isFNC1()?1:t.encode(e,r).length,s=i===null?0:i.encoderIndex;s!==r&&(o+=fF),i!=null&&(o+=i.cachedTotalSize),this.cachedTotalSize=o}return n.prototype.isFNC1=function(){return this.c===1e3},n}(),dF=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();var r4;(function(n){n[n.ASCII=0]="ASCII",n[n.C40=1]="C40",n[n.TEXT=2]="TEXT",n[n.X12=3]="X12",n[n.EDF=4]="EDF",n[n.B256=5]="B256"})(r4||(r4={}));(function(n){dF(e,n);function e(t,r,i,a,o){var s=n.call(this,t,r,i)||this;return s.shape=a,s.macroId=o,s}return e.prototype.getMacroId=function(){return this.macroId},e.prototype.getShapeHint=function(){return this.shape},e})(hF);var pF=function(){function n(){}return n.prototype.isCompact=function(){return this.compact},n.prototype.setCompact=function(e){this.compact=e},n.prototype.getSize=function(){return this.size},n.prototype.setSize=function(e){this.size=e},n.prototype.getLayers=function(){return this.layers},n.prototype.setLayers=function(e){this.layers=e},n.prototype.getCodeWords=function(){return this.codeWords},n.prototype.setCodeWords=function(e){this.codeWords=e},n.prototype.getMatrix=function(){return this.matrix},n.prototype.setMatrix=function(e){this.matrix=e},n}(),i4=function(){function n(){}return n.singletonList=function(e){return[e]},n.min=function(e,t){return e.sort(t)[0]},n}(),gF=function(){function n(e){this.previous=e}return n.prototype.getPrevious=function(){return this.previous},n}(),mF=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),hx=function(n){mF(e,n);function e(t,r,i){var a=n.call(this,t)||this;return a.value=r,a.bitCount=i,a}return e.prototype.appendTo=function(t,r){t.appendBits(this.value,this.bitCount)},e.prototype.add=function(t,r){return new e(this,t,r)},e.prototype.addBinaryShift=function(t,r){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new e(this,t,r)},e.prototype.toString=function(){var t=this.value&(1<<this.bitCount)-1;return t|=1<<this.bitCount,"<"+gn.toBinaryString(t|1<<this.bitCount).substring(1)+">"},e}(gF),vF=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),yF=function(n){vF(e,n);function e(t,r,i){var a=n.call(this,t,0,0)||this;return a.binaryShiftStart=r,a.binaryShiftByteCount=i,a}return e.prototype.appendTo=function(t,r){for(var i=0;i<this.binaryShiftByteCount;i++)(i===0||i===31&&this.binaryShiftByteCount<=62)&&(t.appendBits(31,5),this.binaryShiftByteCount>62?t.appendBits(this.binaryShiftByteCount-31,16):i===0?t.appendBits(Math.min(this.binaryShiftByteCount,31),5):t.appendBits(this.binaryShiftByteCount-31,5)),t.appendBits(r[this.binaryShiftStart+i],8)},e.prototype.addBinaryShift=function(t,r){return new e(this,t,r)},e.prototype.toString=function(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"},e}(hx);function xF(n,e,t){return new yF(n,e,t)}function S1(n,e,t){return new hx(n,e,t)}var _F=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],af=0,Mg=1,bs=2,CS=3,Xl=4,wF=new hx(null,0,0),Av=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])],bF=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};function AF(n){var e,t;try{for(var r=bF(n),i=r.next();!i.done;i=r.next()){var a=i.value;ki.fill(a,-1)}}catch(o){e={error:o}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}return n[af][Xl]=0,n[Mg][Xl]=0,n[Mg][af]=28,n[CS][Xl]=0,n[bs][Xl]=0,n[bs][af]=15,n}var TS=AF(ki.createInt32Array(6,6)),EF=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},SF=function(){function n(e,t,r,i){this.token=e,this.mode=t,this.binaryShiftByteCount=r,this.bitCount=i}return n.prototype.getMode=function(){return this.mode},n.prototype.getToken=function(){return this.token},n.prototype.getBinaryShiftByteCount=function(){return this.binaryShiftByteCount},n.prototype.getBitCount=function(){return this.bitCount},n.prototype.latchAndAppend=function(e,t){var r=this.bitCount,i=this.token;if(e!==this.mode){var a=Av[this.mode][e];i=S1(i,a&65535,a>>16),r+=a>>16}var o=e===bs?4:5;return i=S1(i,t,o),new n(i,e,0,r+o)},n.prototype.shiftAndAppend=function(e,t){var r=this.token,i=this.mode===bs?4:5;return r=S1(r,TS[this.mode][e],i),r=S1(r,t,5),new n(r,this.mode,0,this.bitCount+i+5)},n.prototype.addBinaryShiftChar=function(e){var t=this.token,r=this.mode,i=this.bitCount;if(this.mode===Xl||this.mode===bs){var a=Av[r][af];t=S1(t,a&65535,a>>16),i+=a>>16,r=af}var o=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,s=new n(t,r,this.binaryShiftByteCount+1,i+o);return s.binaryShiftByteCount===2078&&(s=s.endBinaryShift(e+1)),s},n.prototype.endBinaryShift=function(e){if(this.binaryShiftByteCount===0)return this;var t=this.token;return t=xF(t,e-this.binaryShiftByteCount,this.binaryShiftByteCount),new n(t,this.mode,0,this.bitCount)},n.prototype.isBetterThanOrEqualTo=function(e){var t=this.bitCount+(Av[this.mode][e.mode]>>16);return this.binaryShiftByteCount<e.binaryShiftByteCount?t+=n.calculateBinaryShiftCost(e)-n.calculateBinaryShiftCost(this):this.binaryShiftByteCount>e.binaryShiftByteCount&&e.binaryShiftByteCount>0&&(t+=10),t<=e.bitCount},n.prototype.toBitArray=function(e){for(var t,r,i=[],a=this.endBinaryShift(e.length).token;a!==null;a=a.getPrevious())i.unshift(a);var o=new Zi;try{for(var s=EF(i),u=s.next();!u.done;u=s.next()){var f=u.value;f.appendTo(o,e)}}catch(h){t={error:h}}finally{try{u&&!u.done&&(r=s.return)&&r.call(s)}finally{if(t)throw t.error}}return o},n.prototype.toString=function(){return Dn.format("%s bits=%d bytes=%d",_F[this.mode],this.bitCount,this.binaryShiftByteCount)},n.calculateBinaryShiftCost=function(e){return e.binaryShiftByteCount>62?21:e.binaryShiftByteCount>31?20:e.binaryShiftByteCount>0?10:0},n.INITIAL_STATE=new n(wF,af,0,0),n}();function CF(n){var e=Dn.getCharCode(" "),t=Dn.getCharCode("."),r=Dn.getCharCode(",");n[af][e]=1;for(var i=Dn.getCharCode("Z"),a=Dn.getCharCode("A"),o=a;o<=i;o++)n[af][o]=o-a+2;n[Mg][e]=1;for(var s=Dn.getCharCode("z"),u=Dn.getCharCode("a"),o=u;o<=s;o++)n[Mg][o]=o-u+2;n[bs][e]=1;for(var f=Dn.getCharCode("9"),h=Dn.getCharCode("0"),o=h;o<=f;o++)n[bs][o]=o-h+2;n[bs][r]=12,n[bs][t]=13;for(var p=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""],g=0;g<p.length;g++)n[CS][Dn.getCharCode(p[g])]=g;for(var m=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"],g=0;g<m.length;g++)Dn.getCharCode(m[g])>0&&(n[Xl][Dn.getCharCode(m[g])]=g);return n}var Ev=CF(ki.createInt32Array(5,256)),jp=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},TF=function(){function n(e){this.text=e}return n.prototype.encode=function(){for(var e=Dn.getCharCode(" "),t=Dn.getCharCode(`
`),r=i4.singletonList(SF.INITIAL_STATE),i=0;i<this.text.length;i++){var a=void 0,o=i+1<this.text.length?this.text[i+1]:0;switch(this.text[i]){case Dn.getCharCode("\r"):a=o===t?2:0;break;case Dn.getCharCode("."):a=o===e?3:0;break;case Dn.getCharCode(","):a=o===e?4:0;break;case Dn.getCharCode(":"):a=o===e?5:0;break;default:a=0}a>0?(r=n.updateStateListForPair(r,i,a),i++):r=this.updateStateListForChar(r,i)}var s=i4.min(r,function(u,f){return u.getBitCount()-f.getBitCount()});return s.toBitArray(this.text)},n.prototype.updateStateListForChar=function(e,t){var r,i,a=[];try{for(var o=jp(e),s=o.next();!s.done;s=o.next()){var u=s.value;this.updateStateForChar(u,t,a)}}catch(f){r={error:f}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}return n.simplifyStates(a)},n.prototype.updateStateForChar=function(e,t,r){for(var i=this.text[t]&255,a=Ev[e.getMode()][i]>0,o=null,s=0;s<=Xl;s++){var u=Ev[s][i];if(u>0){if(o==null&&(o=e.endBinaryShift(t)),!a||s===e.getMode()||s===bs){var f=o.latchAndAppend(s,u);r.push(f)}if(!a&&TS[e.getMode()][s]>=0){var h=o.shiftAndAppend(s,u);r.push(h)}}}if(e.getBinaryShiftByteCount()>0||Ev[e.getMode()][i]===0){var p=e.addBinaryShiftChar(t);r.push(p)}},n.updateStateListForPair=function(e,t,r){var i,a,o=[];try{for(var s=jp(e),u=s.next();!u.done;u=s.next()){var f=u.value;this.updateStateForPair(f,t,r,o)}}catch(h){i={error:h}}finally{try{u&&!u.done&&(a=s.return)&&a.call(s)}finally{if(i)throw i.error}}return this.simplifyStates(o)},n.updateStateForPair=function(e,t,r,i){var a=e.endBinaryShift(t);if(i.push(a.latchAndAppend(Xl,r)),e.getMode()!==Xl&&i.push(a.shiftAndAppend(Xl,r)),r===3||r===4){var o=a.latchAndAppend(bs,16-r).latchAndAppend(bs,1);i.push(o)}if(e.getBinaryShiftByteCount()>0){var s=e.addBinaryShiftChar(t).addBinaryShiftChar(t+1);i.push(s)}},n.simplifyStates=function(e){var t,r,i,a,o=[];try{for(var s=jp(e),u=s.next();!u.done;u=s.next()){var f=u.value,h=!0,p=function(I){if(I.isBetterThanOrEqualTo(f))return h=!1,"break";f.isBetterThanOrEqualTo(I)&&(o=o.filter(function(C){return C!==I}))};try{for(var g=(i=void 0,jp(o)),m=g.next();!m.done;m=g.next()){var x=m.value,w=p(x);if(w==="break")break}}catch(I){i={error:I}}finally{try{m&&!m.done&&(a=g.return)&&a.call(g)}finally{if(i)throw i.error}}h&&o.push(f)}}catch(I){t={error:I}}finally{try{u&&!u.done&&(r=s.return)&&r.call(s)}finally{if(t)throw t.error}}return o},n}(),IF=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};(function(){function n(){}return n.encodeBytes=function(e){return n.encode(e,n.DEFAULT_EC_PERCENT,n.DEFAULT_AZTEC_LAYERS)},n.encode=function(e,t,r){var i=new TF(e).encode(),a=gn.truncDivision(i.getSize()*t,100)+11,o=i.getSize()+a,s,u,f,h,p;if(r!==n.DEFAULT_AZTEC_LAYERS){if(s=r<0,u=Math.abs(r),u>(s?n.MAX_NB_BITS_COMPACT:n.MAX_NB_BITS))throw new jt(Dn.format("Illegal value %s for layers",r));f=n.totalBitsInLayer(u,s),h=n.WORD_SIZE[u];var g=f-f%h;if(p=n.stuffBits(i,h),p.getSize()+a>g)throw new jt("Data to large for user specified layer");if(s&&p.getSize()>h*64)throw new jt("Data to large for user specified layer")}else{h=0,p=null;for(var m=0;;m++){if(m>n.MAX_NB_BITS)throw new jt("Data too large for an Aztec code");if(s=m<=3,u=s?m+1:m,f=n.totalBitsInLayer(u,s),!(o>f)){(p==null||h!==n.WORD_SIZE[u])&&(h=n.WORD_SIZE[u],p=n.stuffBits(i,h));var g=f-f%h;if(!(s&&p.getSize()>h*64)&&p.getSize()+a<=g)break}}}var x=n.generateCheckWords(p,f,h),w=p.getSize()/h,I=n.generateModeMessage(s,u,w),C=(s?11:14)+u*4,P=new Int32Array(C),B;if(s){B=C;for(var m=0;m<P.length;m++)P[m]=m}else{B=C+1+2*gn.truncDivision(gn.truncDivision(C,2)-1,15);for(var V=gn.truncDivision(C,2),Y=gn.truncDivision(B,2),m=0;m<V;m++){var q=m+gn.truncDivision(m,15);P[V-m-1]=Y-q-1,P[V+m]=Y+q+1}}for(var D=new iu(B),m=0,A=0;m<u;m++){for(var T=(u-m)*4+(s?9:12),k=0;k<T;k++)for(var R=k*2,L=0;L<2;L++)x.get(A+R+L)&&D.set(P[m*2+L],P[m*2+k]),x.get(A+T*2+R+L)&&D.set(P[m*2+k],P[C-1-m*2-L]),x.get(A+T*4+R+L)&&D.set(P[C-1-m*2-L],P[C-1-m*2-k]),x.get(A+T*6+R+L)&&D.set(P[C-1-m*2-k],P[m*2+L]);A+=T*8}if(n.drawModeMessage(D,s,B,I),s)n.drawBullsEye(D,gn.truncDivision(B,2),5);else{n.drawBullsEye(D,gn.truncDivision(B,2),7);for(var m=0,k=0;m<gn.truncDivision(C,2)-1;m+=15,k+=16)for(var L=gn.truncDivision(B,2)&1;L<B;L+=2)D.set(gn.truncDivision(B,2)-k,L),D.set(gn.truncDivision(B,2)+k,L),D.set(L,gn.truncDivision(B,2)-k),D.set(L,gn.truncDivision(B,2)+k)}var j=new pF;return j.setCompact(s),j.setSize(B),j.setLayers(u),j.setCodeWords(w),j.setMatrix(D),j},n.drawBullsEye=function(e,t,r){for(var i=0;i<r;i+=2)for(var a=t-i;a<=t+i;a++)e.set(a,t-i),e.set(a,t+i),e.set(t-i,a),e.set(t+i,a);e.set(t-r,t-r),e.set(t-r+1,t-r),e.set(t-r,t-r+1),e.set(t+r,t-r),e.set(t+r,t-r+1),e.set(t+r,t+r-1)},n.generateModeMessage=function(e,t,r){var i=new Zi;return e?(i.appendBits(t-1,2),i.appendBits(r-1,6),i=n.generateCheckWords(i,28,4)):(i.appendBits(t-1,5),i.appendBits(r-1,11),i=n.generateCheckWords(i,40,4)),i},n.drawModeMessage=function(e,t,r,i){var a=gn.truncDivision(r,2);if(t)for(var o=0;o<7;o++){var s=a-3+o;i.get(o)&&e.set(s,a-5),i.get(o+7)&&e.set(a+5,s),i.get(20-o)&&e.set(s,a+5),i.get(27-o)&&e.set(a-5,s)}else for(var o=0;o<10;o++){var s=a-5+o+gn.truncDivision(o,5);i.get(o)&&e.set(s,a-7),i.get(o+10)&&e.set(a+7,s),i.get(29-o)&&e.set(s,a+7),i.get(39-o)&&e.set(a-7,s)}},n.generateCheckWords=function(e,t,r){var i,a,o=e.getSize()/r,s=new ES(n.getGF(r)),u=gn.truncDivision(t,r),f=n.bitsToWords(e,r,u);s.encode(f,u-o);var h=t%r,p=new Zi;p.appendBits(0,h);try{for(var g=IF(Array.from(f)),m=g.next();!m.done;m=g.next()){var x=m.value;p.appendBits(x,r)}}catch(w){i={error:w}}finally{try{m&&!m.done&&(a=g.return)&&a.call(g)}finally{if(i)throw i.error}}return p},n.bitsToWords=function(e,t,r){var i=new Int32Array(r),a,o;for(a=0,o=e.getSize()/t;a<o;a++){for(var s=0,u=0;u<t;u++)s|=e.get(a*t+u)?1<<t-u-1:0;i[a]=s}return i},n.getGF=function(e){switch(e){case 4:return xo.AZTEC_PARAM;case 6:return xo.AZTEC_DATA_6;case 8:return xo.AZTEC_DATA_8;case 10:return xo.AZTEC_DATA_10;case 12:return xo.AZTEC_DATA_12;default:throw new jt("Unsupported word size "+e)}},n.stuffBits=function(e,t){for(var r=new Zi,i=e.getSize(),a=(1<<t)-2,o=0;o<i;o+=t){for(var s=0,u=0;u<t;u++)(o+u>=i||e.get(o+u))&&(s|=1<<t-1-u);(s&a)===a?(r.appendBits(s&a,t),o--):(s&a)===0?(r.appendBits(s|1,t),o--):r.appendBits(s,t)}return r},n.totalBitsInLayer=function(e,t){return((t?88:112)+16*e)*e},n.DEFAULT_EC_PERCENT=33,n.DEFAULT_AZTEC_LAYERS=0,n.MAX_NB_BITS=32,n.MAX_NB_BITS_COMPACT=4,n.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]),n})();const RF=({onScanSuccess:n,onClose:e})=>{const t=ge.useRef(null),r=ge.useRef(null);return ge.useEffect(()=>{const i=new Nj;return r.current=i,i.decodeFromVideoDevice(null,t.current,a=>{a&&(i.reset(),n(a.getText()))}),()=>{try{i.reset()}catch{}}},[n]),E.jsxs("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"#000000e6",zIndex:9999,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:[E.jsx("video",{ref:t,style:{width:"90%",maxWidth:"500px",borderRadius:"12px",border:"3px solid white"},muted:!0,autoPlay:!0,playsInline:!0}),E.jsx("button",{onClick:()=>{var i;(i=r.current)==null||i.reset(),e()},style:{marginTop:"1rem",padding:"10px 20px",backgroundColor:"#dc3545",color:"#fff",border:"none",borderRadius:"6px",fontSize:"16px",cursor:"pointer"},children:"סגור סורק"})]})};function IS(n){const e=[...new Set(n)].sort((t,r)=>t-r);for(let t=1;t<=e.length+1;t++)if(!e.includes(t))return t}async function a4({name:n,quantity:e,allowMerge:t=!1,existingItemId:r=null,imageUrl:i=null,publicComment:a="",internalComment:o="",createdBy:s="",updatedBy:u="",createdAt:f=null,updatedAt:h=null}){if(n=n.trim(),t&&r){const I=Ar(kt,"items",r),B=(await yr(Gu(On(kt,"items"),Ju("__name__","==",r)))).docs[0].data().quantity+e,V={quantity:B};return i&&(V.imageUrl=i),await Qa(I,V),{merged:!0,newQuantity:B}}const g=(await yr(On(kt,"items"))).docs.map(I=>I.data().ItemId).filter(I=>typeof I=="number"),m=IS(g),x=On(kt,"items"),w=Ar(x);return await J5(w,{name:n,quantity:e,imageUrl:i,ItemId:m,isActive:!0,createdAt:f,updatedAt:h,createdBy:s,updatedBy:u,publicComment:a,internalComment:o}),{added:!0,ItemId:m}}async function NF(n,e=""){const t=Ar(kt,"items",n),r=await Ed(t);if(!r.exists())throw new Error("Item not found");const{ItemId:i,...a}=r.data();await Em(On(kt,"deletedItems"),{...a,deletedAt:Ai(),deletedBy:e}),await Am(t)}async function DF(n,e=""){const t=Ar(kt,"deletedItems",n),r=await Ed(t);if(!r.exists())throw new Error("Deleted item not found");const i=r.data(),o=(await yr(On(kt,"items"))).docs.map(u=>u.data().ItemId).filter(u=>typeof u=="number"),s=IS(o);await J5(Ar(On(kt,"items")),{...i,ItemId:s,createdAt:Ai(),updatedAt:Ai(),createdBy:e,updatedBy:e,isActive:!0}),await Am(t)}async function OF(n){const e=Gu(On(kt,"items"),Ju("ItemId","==",Number(n))),t=await yr(e);if(!t.empty){const r=t.docs[0];return{id:r.id,...r.data()}}throw new Error("לא נמצא מוצר עם ברקוד זה")}const PF=({item:n,onConfirm:e,onCancel:t})=>{const[r,i]=ge.useState(1),a=r>=1&&r<=n.quantity;return E.jsx("div",{className:"modal-overlay",children:E.jsxs("div",{className:"modal-box",dir:"rtl",children:[E.jsx("h3",{style:{textAlign:"center"},children:n.name}),E.jsx("img",{src:n.imageUrl,alt:n.name,style:{width:"100%",maxHeight:"200px",objectFit:"cover"}}),E.jsxs("p",{children:["מזהה מוצר: ",n.ItemId]}),E.jsxs("p",{children:["כמות זמינה: ",n.quantity]}),E.jsxs("div",{style:{marginTop:"1rem"},children:[E.jsx("label",{children:"בחר כמות:"}),E.jsx("input",{type:"number",value:r,min:1,max:n.quantity,onChange:o=>i(+o.target.value),style:{width:"100%",padding:"10px",marginTop:"0.5rem",border:a?"1px solid #ccc":"2px solid red"}}),!a&&E.jsxs("p",{style:{color:"red",marginTop:"0.5rem"},children:["כמות לא תקינה. יש לבחור בין 1 ל־",n.quantity]})]}),E.jsxs("div",{style:{marginTop:"1.5rem",display:"flex",justifyContent:"space-between"},children:[E.jsx("button",{className:"btn btn-red",onClick:t,children:"ביטול"}),E.jsx("button",{className:"btn btn-green",onClick:()=>e(r),disabled:!a,children:"אישור"})]})]})})},RS=({showCatalogPopup:n,setShowCatalogPopup:e,searchTerm:t,setSearchTerm:r,availableItems:i,toggleSelectItem:a,changeQty:o,form:s,loadingItems:u,setAvailableItems:f})=>{const[h,p]=ge.useState(!1),[g,m]=ge.useState(null),[x,w]=ge.useState([]);if(ge.useEffect(()=>{n&&w([...i])},[n,i]),!n)return null;const I=async q=>{try{const D=await OF(q);if(x.some(T=>T.ItemId===D.ItemId&&T.selected)){alert("המוצר כבר קיים ברשימה"),p(!1);return}D.quantity>0?(m(D),p(!1)):(alert("המוצר לא זמין במלאי"),p(!1))}catch(D){alert(D.message),p(!1)}},C=q=>{w(D=>D.map(A=>A.id===q?{...A,selected:!A.selected,selectedQty:A.selected?0:1}:A))},P=(q,D)=>{let A=parseInt(D)||0;A>q.quantity&&(A=q.quantity),A<0&&(A=0),w(T=>T.map(k=>k.id===q.id?{...k,selectedQty:A,selected:A>0}:k))},B=()=>{x.forEach(q=>{var D,A;q.selected!==((D=i.find(T=>T.id===q.id))==null?void 0:D.selected)&&a(q.id),q.selectedQty!==((A=i.find(T=>T.id===q.id))==null?void 0:A.selectedQty)&&o(q.id,q.selectedQty)})},V=()=>{B(),e(!1)},Y=()=>{e(!1)};return E.jsxs("div",{className:"modal-overlay",onClick:Y,children:[E.jsxs("div",{className:"modal-box",dir:"rtl",onClick:q=>q.stopPropagation(),children:[E.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[E.jsx("button",{style:{width:"180px"},className:"btn btn-gray",onClick:()=>p(!0),children:"סריקת ברקוד"}),E.jsx("input",{type:"text",placeholder:"חיפוש מוצר...",value:t,onChange:q=>r(q.target.value),style:{padding:"8px",border:"1px solid #ccc",borderRadius:"6px",width:"60%"}})]}),E.jsxs("h3",{style:{textAlign:"center",marginBottom:"1rem"},children:["מוצרים זמינים (",s.pickupDate," → ",s.returnDate,")"]}),u?E.jsx("p",{style:{textAlign:"center"},children:"טוען מוצרים…"}):E.jsx("div",{className:"modal-grid",children:x.filter(q=>q.name.toLowerCase().includes(t.toLowerCase())).map(q=>E.jsxs("div",{className:`item-card ${q.selected?"selected":""}`,children:[E.jsx("img",{src:q.imageUrl||"/no-image-available.png",alt:q.name,className:"item-image"}),E.jsx("h4",{children:q.name}),E.jsxs("p",{children:["זמין: ",q.quantity]}),E.jsxs("p",{children:["מזהה מוצר: ",q.ItemId]}),E.jsxs("div",{style:{margin:"0.5rem 0"},children:[E.jsx("label",{style:{marginBottom:"0.3rem",display:"block"},children:"כמות:"}),E.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"5px"},children:[E.jsx("button",{onClick:()=>P(q,Math.max(0,q.selectedQty-1)),disabled:q.selectedQty<=0,style:{width:"30px",height:"30px",borderRadius:"50%",border:"1px solid #ccc",backgroundColor:q.selectedQty<=0?"#f5f5f5":"#fff",cursor:q.selectedQty<=0?"not-allowed":"pointer",fontSize:"16px",fontWeight:"bold",color:q.selectedQty<=0?"#ccc":"#333"},children:"-"}),E.jsx("input",{type:"number",min:0,max:q.quantity,value:q.selectedQty,onChange:D=>P(q,D.target.value),onBlur:D=>{(parseInt(D.target.value)||0)>q.quantity&&P(q,q.quantity)},style:{width:"50px",height:"30px",padding:"5px",textAlign:"center",borderRadius:"6px",border:q.selectedQty>q.quantity?"2px solid red":"1px solid #ccc",backgroundColor:q.selectedQty>0?"#e3f2fd":"#fff",fontSize:"14px",fontWeight:"bold",appearance:"textfield",MozAppearance:"textfield"}}),E.jsx("button",{onClick:()=>P(q,Math.min(q.quantity,q.selectedQty+1)),disabled:q.selectedQty>=q.quantity,style:{width:"30px",height:"30px",borderRadius:"50%",border:"1px solid #ccc",backgroundColor:q.selectedQty>=q.quantity?"#f5f5f5":"#fff",cursor:q.selectedQty>=q.quantity?"not-allowed":"pointer",fontSize:"16px",fontWeight:"bold",color:q.selectedQty>=q.quantity?"#ccc":"#333"},children:"+"})]}),q.selectedQty>q.quantity&&E.jsxs("div",{style:{color:"red",fontSize:"0.8rem",marginTop:"0.2rem"},children:["מקסימום: ",q.quantity]})]}),E.jsx("button",{onClick:()=>C(q.id),className:`btn ${q.selected?"btn-red":"btn-blue"}`,style:{width:"100%",marginTop:"0.5rem"},children:q.selected?"❌ הסר מוצר":"🛒 בחר מוצר"})]},q.id))}),E.jsxs("div",{className:"modal-actions",children:[E.jsx("button",{className:"btn btn-blue",onClick:V,children:"✔️ אישור"}),E.jsx("button",{className:"btn btn-gray",onClick:Y,children:"❌ ביטול"})]})]}),h&&E.jsx(RF,{onScanSuccess:I,onClose:()=>p(!1)}),g&&E.jsx(PF,{item:g,onCancel:()=>{m(null),p(!1)},onConfirm:q=>{const D={...g};w(A=>A.map(T=>T.ItemId===D.ItemId?{...T,selected:!0,selectedQty:q}:T)),m(null),p(!1)}})]})},LF=({onOrderCreated:n})=>{const[e,t]=ge.useState({volunteerName:"",clientName:"",address:"",phone:"",email:"",eventType:"",pickupDate:"",eventDate:"",returnDate:""}),[r,i]=ge.useState({}),[a,o]=ge.useState(!1),[s,u]=ge.useState([]),[f,h]=ge.useState(!1),[p,g]=ge.useState(""),[m,x]=ge.useState(!1),w=Y=>{t({...e,[Y.target.name]:Y.target.value})},I=()=>{const Y={},q=new Date().toISOString().split("T")[0],{pickupDate:D,eventDate:A,returnDate:T}=e;return e.volunteerName.trim()||(Y.volunteerName="שדה חובה"),e.clientName.trim()||(Y.clientName="שדה חובה"),e.address.trim()||(Y.address="שדה חובה"),e.phone.trim()?/^\d{10}$/.test(e.phone)||(Y.phone="מספר טלפון לא תקין"):Y.phone="שדה חובה",e.eventType.trim()||(Y.eventType="שדה חובה"),D||(Y.pickupDate="שדה חובה"),A||(Y.eventDate="שדה חובה"),T||(Y.returnDate="שדה חובה"),D&&D<q&&(Y.pickupDate="תאריך לא יכול להיות בעבר"),A&&D&&A<D&&(Y.eventDate="תאריך האירוע לא יכול להיות לפני לקיחה"),T&&D&&T<=D&&(Y.returnDate="החזרה אחרי לקיחה"),i(Y),Object.keys(Y).length===0},C=()=>{window.confirm("האם אתה בטוח שברצונך לבטל את ההזמנה?")&&(t({volunteerName:"",clientName:"",address:"",phone:"",email:"",eventType:"",pickupDate:"",eventDate:"",returnDate:""}),i({}),u([]),g(""),o(!1))},P=async()=>{if(!I())return;const q=(await yr(On(kt,"orders"))).docs.map(T=>T.data().simpleId).filter(T=>typeof T=="number"),D=q.length>0?Math.max(...q)+1:1,A=s.filter(T=>T.selected).map(T=>({id:T.id,ItemId:T.ItemId,name:T.name,quantity:T.selectedQty,imageUrl:T.imageUrl}));x(!0);try{const T=await Em(On(kt,"orders"),{...e,items:A,status:"open",simpleId:D,createdAt:Ai()});await Qa(T,{orderId:T.id}),t({volunteerName:"",clientName:"",address:"",phone:"",email:"",eventType:"",pickupDate:"",eventDate:"",returnDate:""}),u([]),g(""),o(!1),alert(`ההזמנה נשמרה! מס' הזמנה: ${D}`),n&&await n()}catch(T){console.error("שגיאה בשמירה:",T),alert("שגיאה בשמירת ההזמנה")}x(!1)};ge.useEffect(()=>{if(!a)return;(async()=>{h(!0);const q=D=>D?D.toDate?D.toDate():typeof D=="string"?new Date(D):D:null;try{const A=(await yr(On(kt,"items"))).docs.map(U=>({id:U.id,...U.data()})).filter(U=>U.isDeleted!==!0),T=await yr(On(kt,"orders")),k=q(e.pickupDate),R=q(e.returnDate),L=T.docs.map(U=>U.data()).filter(U=>{const z=q(U.pickupDate),ee=q(U.returnDate);return U.status==="open"&&z&&ee&&k&&R&&ee>=k&&z<=R}),j={};L.forEach(U=>{var z;(z=U.items)==null||z.forEach(ee=>{j[ee.id]=(j[ee.id]||0)+ee.quantity})});const H={};s.forEach(U=>{U.selected&&U.selectedQty>0&&(H[U.id]={selected:U.selected,selectedQty:U.selectedQty})});const ne=A.map(U=>{const z=(U.quantity||0)-(j[U.id]||0),ee=H[U.id];return{...U,quantity:z,selected:ee?ee.selected:!1,selectedQty:ee?ee.selectedQty:0}}).filter(U=>U.quantity>0);u(ne)}catch(D){console.error("שגיאה בחישוב זמינות:",D),u([])}h(!1)})()},[a,e.pickupDate,e.returnDate]);const B=Y=>{u(q=>q.map(D=>D.id===Y?{...D,selected:!D.selected,selectedQty:D.selected?0:1}:D))},V=(Y,q)=>{u(D=>D.map(A=>A.id===Y?{...A,selected:q>0,selectedQty:q}:A))};return E.jsxs("div",{className:"new-loan-container",children:[E.jsx(qk,{form:e,errors:r,handleChange:w,handleConfirm:P,handleClear:C,setShowCatalogPopup:o,saving:m}),E.jsx(RS,{showCatalogPopup:a,setShowCatalogPopup:o,searchTerm:p,setSearchTerm:g,setAvailableItems:u,availableItems:s,toggleSelectItem:B,changeQty:V,form:e,loadingItems:f})]})},kF=({onRequestSubmitted:n})=>{const{user:e}=xf(),[t,r]=ge.useState({clientName:"",address:"",phone:"",email:"",eventType:"",pickupDate:"",eventDate:"",returnDate:""}),[i,a]=ge.useState({}),[o,s]=ge.useState(!1),[u,f]=ge.useState([]),[h,p]=ge.useState(!1),[g,m]=ge.useState(""),[x,w]=ge.useState(!1),I=ge.useCallback(D=>{const{name:A,value:T}=D.target;r(k=>({...k,[A]:T}))},[]),C=()=>{const D={},A=new Date().toISOString().split("T")[0],{pickupDate:T,eventDate:k,returnDate:R}=t;return t.clientName.trim()||(D.clientName="שדה חובה"),t.address.trim()||(D.address="שדה חובה"),t.phone.trim()?/^\d{10}$/.test(t.phone)||(D.phone="מספר טלפון לא תקין"):D.phone="שדה חובה",t.eventType.trim()||(D.eventType="שדה חובה"),T||(D.pickupDate="שדה חובה"),k||(D.eventDate="שדה חובה"),R||(D.returnDate="שדה חובה"),T&&T<A&&(D.pickupDate="תאריך לא יכול להיות בעבר"),k&&T&&k<T&&(D.eventDate="תאריך האירוע לא יכול להיות לפני לקיחה"),R&&T&&R<=T&&(D.returnDate="החזרה אחרי לקיחה"),a(D),Object.keys(D).length===0},P=()=>{window.confirm("האם אתה בטוח שברצונך לבטל את הבקשה?")&&(r({clientName:"",address:"",phone:"",email:"",eventType:"",pickupDate:"",eventDate:"",returnDate:""}),a({}),f([]),m(""),s(!1))},B=async()=>{if(!C())return;const D=u.filter(A=>A.selected).map(A=>({id:A.id,ItemId:A.ItemId,name:A.name,quantity:A.selectedQty,imageUrl:A.imageUrl}));if(D.length===0){alert("יש לבחור לפחות פריט אחד");return}w(!0);try{await Em(On(kt,"orderRequests"),{...t,items:D,status:"pending",requestedBy:e.uid,requestedByUsername:e.username,requestedByEmail:e.email,requestedAt:Ai(),approvedBy:null,approvedAt:null}),r({clientName:"",address:"",phone:"",email:"",eventType:"",pickupDate:"",eventDate:"",returnDate:""}),f([]),m(""),s(!1),alert("🎉 הבקשה נשלחה בהצלחה! תקבל עדכון כאשר הבקשה תאושר."),n&&await n()}catch(A){console.error("שגיאה בשליחת הבקשה:",A),alert("שגיאה בשליחת הבקשה. אנא נסה שוב.")}w(!1)};ge.useEffect(()=>{if(!o)return;(async()=>{p(!0);const A=T=>T?T.toDate?T.toDate():typeof T=="string"?new Date(T):T:null;try{const k=(await yr(On(kt,"items"))).docs.map(ee=>({id:ee.id,...ee.data()})).filter(ee=>ee.isDeleted!==!0),R=await yr(On(kt,"orders")),L=A(t.pickupDate),j=A(t.returnDate),H=R.docs.map(ee=>ee.data()).filter(ee=>{const le=A(ee.pickupDate),$=A(ee.returnDate);return ee.status==="open"&&le&&$&&L&&j&&$>=L&&le<=j}),ne={};H.forEach(ee=>{var le;(le=ee.items)==null||le.forEach($=>{ne[$.id]=(ne[$.id]||0)+$.quantity})});const U={};u.forEach(ee=>{ee.selected&&ee.selectedQty>0&&(U[ee.id]={selected:ee.selected,selectedQty:ee.selectedQty})});const z=k.map(ee=>{const le=(ee.quantity||0)-(ne[ee.id]||0),$=U[ee.id];return{...ee,quantity:le,selected:$?$.selected:!1,selectedQty:$?$.selectedQty:0}}).filter(ee=>ee.quantity>0);f(z)}catch(T){console.error("שגיאה בחישוב זמינות:",T),f([])}p(!1)})()},[o,t.pickupDate,t.returnDate]);const V=D=>{f(A=>A.map(T=>T.id===D?{...T,selected:!T.selected,selectedQty:T.selected?0:1}:T))},Y=(D,A)=>{f(T=>T.map(k=>k.id===D?{...k,selected:A>0,selectedQty:A}:k))},q=[{label:"שם לקוח",name:"clientName",required:!0},{label:"מקום מגורים",name:"address",required:!0},{label:"מספר פלאפון",name:"phone",required:!0},{label:"אימייל",name:"email",required:!1},{label:"סוג האירוע",name:"eventType",required:!0},{label:"תאריך לקיחת מוצרים",name:"pickupDate",type:"date",required:!0},{label:"תאריך האירוע",name:"eventDate",type:"date",required:!0},{label:"תאריך החזרת מוצרים",name:"returnDate",type:"date",required:!0}];return E.jsxs("div",{className:"new-loan-container",children:[E.jsxs("div",{className:"loan-form-box",children:[E.jsx("h2",{style:{textAlign:"center"},children:"🙏 בקשת השאלה"}),E.jsx("p",{style:{textAlign:"center",color:"#666",marginBottom:"2rem"},children:"מלא את הפרטים והבקשה תישלח לאישור המנהלים"}),q.map(({label:D,name:A,type:T="text",required:k})=>E.jsxs("div",{style:{marginBottom:"1.5rem",textAlign:"center"},children:[E.jsxs("label",{htmlFor:A,style:{display:"block",marginBottom:"0.3rem",maxWidth:"400px",margin:"0 auto",textAlign:"right"},children:[D,k&&" *"]}),E.jsx("input",{id:A,type:T,name:A,value:t[A]||"",onChange:I,autoComplete:"off",min:T==="date"?A==="pickupDate"?new Date().toISOString().split("T")[0]:A==="eventDate"||A==="returnDate"?t.pickupDate||new Date().toISOString().split("T")[0]:void 0:void 0,style:{display:"block",width:"100%",maxWidth:"400px",margin:"0 auto",padding:"10px",border:i[A]?"1px solid red":"1px solid #ccc",borderRadius:"6px",fontSize:"1rem"}}),i[A]&&E.jsx("div",{style:{color:"red",fontSize:"0.85rem",maxWidth:"400px",margin:"0.3rem auto 0",textAlign:"right"},children:i[A]})]},A)),E.jsx("div",{style:{display:"flex",justifyContent:"center",marginBottom:"1.5rem"},children:E.jsx("button",{className:"btn btn-blue",onClick:()=>s(!0),children:"בחירת מוצרים"})}),E.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"10px"},children:[E.jsx("button",{className:"btn btn-green",onClick:B,disabled:x,children:x?"שולח בקשה...":"📨 שלח בקשה לאישור"}),E.jsx("button",{className:"btn btn-red",onClick:P,disabled:x,children:"ביטול"})]})]}),E.jsx(RS,{showCatalogPopup:o,setShowCatalogPopup:s,searchTerm:g,setSearchTerm:m,setAvailableItems:f,availableItems:u,toggleSelectItem:V,changeQty:Y,form:t,loadingItems:h})]})};/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MF=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),BF=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()),o4=n=>{const e=BF(n);return e.charAt(0).toUpperCase()+e.slice(1)},NS=(...n)=>n.filter((e,t,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===t).join(" ").trim(),jF=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var FF={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UF=ge.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:i="",children:a,iconNode:o,...s},u)=>ge.createElement("svg",{ref:u,...FF,width:e,height:e,stroke:n,strokeWidth:r?Number(t)*24/Number(e):t,className:NS("lucide",i),...!a&&!jF(s)&&{"aria-hidden":"true"},...s},[...o.map(([f,h])=>ge.createElement(f,h)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wr=(n,e)=>{const t=ge.forwardRef(({className:r,...i},a)=>ge.createElement(UF,{ref:a,iconNode:e,className:NS(`lucide-${MF(o4(n))}`,`lucide-${n}`,r),...i}));return t.displayName=o4(n),t};/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VF=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],zF=Wr("arrow-right",VF);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qF=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],sh=Wr("calendar",qF);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HF=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],WF=Wr("chart-column",HF);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GF=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],DS=Wr("chevron-left",GF);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $F=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],OS=Wr("chevron-right",$F);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XF=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],lh=Wr("circle-check-big",XF);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YF=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],S0=Wr("circle-x",YF);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KF=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"m9 14 2 2 4-4",key:"df797q"}]],QF=Wr("clipboard-check",KF);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZF=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],dx=Wr("clock",ZF);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JF=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],eU=Wr("download",JF);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tU=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],px=Wr("eye",tU);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nU=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],PS=Wr("map-pin",nU);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rU=[["path",{d:"M5 12h14",key:"1ays0h"}]],iU=Wr("minus",rU);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aU=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],Yo=Wr("package",aU);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oU=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],Om=Wr("phone",oU);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sU=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],lU=Wr("plus",sU);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uU=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],LS=Wr("save",uU);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cU=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],kS=Wr("search",cU);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fU=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],MS=Wr("square-pen",fU);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hU=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],BS=Wr("trash-2",hU);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dU=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],pU=Wr("triangle-alert",dU);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gU=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],jS=Wr("user",gU);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mU=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],vU=Wr("x",mU),yU=()=>{const{user:n}=xf(),[e,t]=ge.useState([]),[r,i]=ge.useState(!0),[a,o]=ge.useState(null),[s,u]=ge.useState(null),f=async()=>{try{i(!0);const w=(await yr(On(kt,"orderRequests"))).docs.map(I=>({id:I.id,...I.data()})).filter(I=>I.status==="pending").sort((I,C)=>{var V,Y;const P=((V=I.requestedAt)==null?void 0:V.seconds)||0;return(((Y=C.requestedAt)==null?void 0:Y.seconds)||0)-P});t(w)}catch(x){console.error("שגיאה בטעינת בקשות:",x)}finally{i(!1)}};ge.useEffect(()=>{f()},[]);const h=async x=>{if(window.confirm(`האם אתה בטוח שברצונך לאשר את הבקשה של ${x.clientName}?`)){u(x.id),console.log("🚀 מתחיל אישור בקשה:",x);try{console.log("📦 טוען נתוני מלאי והזמנות...");const w=await yr(On(kt,"items")),I=await yr(On(kt,"orders")),C=H=>H?H.toDate?H.toDate():typeof H=="string"?new Date(H):H:null,P=C(x.pickupDate),B=C(x.returnDate),V=I.docs.map(H=>H.data()).filter(H=>{const ne=C(H.pickupDate),U=C(H.returnDate);return H.status==="open"&&ne&&U&&P&&B&&U>=P&&ne<=B}),Y={};V.forEach(H=>{var ne;(ne=H.items)==null||ne.forEach(U=>{Y[U.id]=(Y[U.id]||0)+U.quantity})});const q=w.docs.map(H=>({id:H.id,...H.data()}));console.log("🔍 בודק זמינות פריטים...",x.items);let D=!0,A=[];for(const H of x.items){console.log(`🔎 בודק פריט: ${H.name}`,H);const ne=q.find(z=>z.id===H.id);if(!ne){console.log(`❌ פריט לא נמצא במלאי: ${H.name}`),D=!1,A.push(`${H.name} (לא נמצא במלאי)`);continue}const U=(ne.quantity||0)-(Y[H.id]||0);console.log(`📊 ${H.name}: מלאי=${ne.quantity}, שמור=${Y[H.id]||0}, זמין=${U}, נדרש=${H.quantity}`),H.quantity>U&&(D=!1,A.push(`${H.name} (זמין: ${U}, נדרש: ${H.quantity})`))}if(!D){console.log("❌ לא כל הפריטים זמינים:",A),alert(`לא ניתן לאשר את הבקשה - פריטים לא זמינים:
${A.join(`
`)}`),u(null);return}console.log("✅ כל הפריטים זמינים, ממשיך ליצירת הזמנה..."),console.log("🔢 יוצר מזהה הזמנה חדש...");const k=(await yr(On(kt,"orders"))).docs.map(H=>H.data().simpleId).filter(H=>typeof H=="number"),R=k.length>0?Math.max(...k)+1:1;console.log("🎯 מזהה הזמנה חדש:",R),console.log("📝 יוצר הזמנה חדשה..."),console.log("👤 פרטי משתמש:",n);const L={clientName:x.clientName,address:x.address,phone:x.phone,email:x.email,eventType:x.eventType,pickupDate:x.pickupDate,eventDate:x.eventDate,returnDate:x.returnDate,items:x.items,simpleId:R,status:"open",volunteerName:`מאושר ע"י ${(n==null?void 0:n.username)||(n==null?void 0:n.email)||"מנהל"}`,createdAt:Ai(),approvedBy:(n==null?void 0:n.uid)||"unknown",approvedByUsername:(n==null?void 0:n.username)||(n==null?void 0:n.email)||"מנהל",approvedAt:Ai(),orderId:null};console.log("💾 שומר הזמנה חדשה:",L);const j=await Em(On(kt,"orders"),L);console.log("✅ הזמנה נשמרה עם ID:",j.id),await Qa(j,{orderId:j.id}),console.log("🔄 עדכון orderId הושלם"),console.log("📋 מעדכן סטטוס בקשה לאושרה..."),await Qa(Ar(kt,"orderRequests",x.id),{status:"approved",approvedBy:(n==null?void 0:n.uid)||"unknown",approvedByUsername:(n==null?void 0:n.username)||(n==null?void 0:n.email)||"מנהל",approvedAt:Ai(),orderId:j.id}),console.log("🎉 תהליך האישור הושלם בהצלחה!"),alert(`✅ הבקשה אושרה בהצלחה! מספר הזמנה: ${R}`),await f()}catch(w){console.error("❌ שגיאה באישור הבקשה:",w),console.error("Stack trace:",w.stack),alert(`שגיאה באישור הבקשה: ${w.message}`)}finally{u(null)}}},p=async x=>{const w=prompt(`מדוע אתה דוחה את הבקשה של ${x.clientName}?
(ההודעה הזו תישלח ללקוח)`);if(w!==null){u(x.id),console.log("🚫 מתחיל דחיית בקשה:",x.id,"סיבה:",w);try{console.log("📝 מעדכן סטטוס בקשה לנדחתה..."),console.log("👤 פרטי משתמש:",n),await Qa(Ar(kt,"orderRequests",x.id),{status:"rejected",rejectedBy:(n==null?void 0:n.uid)||"unknown",rejectedByUsername:(n==null?void 0:n.username)||(n==null?void 0:n.email)||"מנהל",rejectedAt:Ai(),rejectionReason:w}),console.log("✅ בקשה נדחתה בהצלחה"),alert("❌ הבקשה נדחתה. הלקוח יקבל הודעה."),await f()}catch(I){console.error("❌ שגיאה בדחיית הבקשה:",I),console.error("Stack trace:",I.stack),alert(`שגיאה בדחיית הבקשה: ${I.message}`)}finally{u(null)}}},g=x=>new Date(x).toLocaleDateString("he-IL"),m=x=>x?(x.seconds?new Date(x.seconds*1e3):new Date(x)).toLocaleString("he-IL"):"";return r?E.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"50vh",direction:"rtl"},children:E.jsxs("div",{style:{textAlign:"center"},children:[E.jsx("div",{style:{width:"40px",height:"40px",border:"4px solid #e5e7eb",borderTop:"4px solid #3b82f6",borderRadius:"50%",animation:"spin 1s linear infinite",margin:"0 auto 1rem"}}),E.jsx("p",{children:"טוען בקשות..."})]})}):E.jsxs("div",{style:{padding:"2rem",maxWidth:"1200px",margin:"0 auto",direction:"rtl"},children:[E.jsxs("div",{style:{background:"linear-gradient(to right, #f59e0b, #d97706)",color:"white",padding:"2rem",borderRadius:"12px",marginBottom:"2rem",textAlign:"center"},children:[E.jsx("h1",{style:{fontSize:"2rem",fontWeight:"bold",margin:0},children:"📋 בקשות להזמנה"}),E.jsx("p",{style:{fontSize:"1.1rem",opacity:.9,margin:"0.5rem 0 0 0"},children:"בקשות ממתינות לאישור מנהלים"})]}),e.length===0?E.jsxs("div",{style:{background:"white",padding:"3rem",borderRadius:"12px",textAlign:"center",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[E.jsx(Yo,{size:64,style:{color:"#d1d5db",marginBottom:"1rem"}}),E.jsx("h3",{style:{fontSize:"1.5rem",color:"#6b7280",margin:"0 0 0.5rem 0"},children:"אין בקשות ממתינות"}),E.jsx("p",{style:{color:"#9ca3af"},children:"כל הבקשות עובדו או שאין בקשות חדשות"})]}):E.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(350px, 1fr))",gap:"1.5rem"},children:e.map(x=>{var w;return E.jsxs("div",{style:{background:"white",border:"1px solid #e5e7eb",borderRadius:"12px",padding:"1.5rem",boxShadow:"0 2px 8px rgba(0,0,0,0.1)",transition:"transform 0.2s ease, box-shadow 0.2s ease"},onMouseEnter:I=>{I.currentTarget.style.transform="translateY(-2px)",I.currentTarget.style.boxShadow="0 4px 16px rgba(0,0,0,0.15)"},onMouseLeave:I=>{I.currentTarget.style.transform="translateY(0)",I.currentTarget.style.boxShadow="0 2px 8px rgba(0,0,0,0.1)"},children:[E.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"1rem",paddingBottom:"1rem",borderBottom:"1px solid #f3f4f6"},children:[E.jsxs("div",{children:[E.jsx("h3",{style:{fontSize:"1.25rem",fontWeight:"bold",margin:0,color:"#1f2937"},children:x.clientName}),E.jsxs("p",{style:{fontSize:"0.875rem",color:"#6b7280",margin:"0.25rem 0 0 0"},children:["נשלח: ",m(x.requestedAt)]})]}),E.jsx("div",{style:{background:"#fef3c7",color:"#92400e",padding:"0.25rem 0.75rem",borderRadius:"20px",fontSize:"0.75rem",fontWeight:"bold"},children:"ממתין"})]}),E.jsxs("div",{style:{display:"grid",gap:"0.75rem",marginBottom:"1.5rem"},children:[E.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[E.jsx(jS,{size:16,style:{color:"#6b7280"}}),E.jsxs("span",{style:{fontSize:"0.875rem"},children:["מבקש: ",x.requestedByUsername]})]}),E.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[E.jsx(Om,{size:16,style:{color:"#6b7280"}}),E.jsx("span",{style:{fontSize:"0.875rem"},children:x.phone})]}),E.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[E.jsx(PS,{size:16,style:{color:"#6b7280"}}),E.jsx("span",{style:{fontSize:"0.875rem"},children:x.address})]}),E.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[E.jsx(sh,{size:16,style:{color:"#6b7280"}}),E.jsxs("span",{style:{fontSize:"0.875rem"},children:[g(x.pickupDate)," → ",g(x.returnDate)]})]}),E.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[E.jsx(Yo,{size:16,style:{color:"#6b7280"}}),E.jsxs("span",{style:{fontSize:"0.875rem"},children:[(w=x.items)==null?void 0:w.reduce((I,C)=>I+C.quantity,0)," פריטים"]})]})]}),E.jsxs("div",{style:{display:"flex",gap:"0.75rem",justifyContent:"center"},children:[E.jsxs("button",{onClick:()=>o(x),style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 1rem",background:"#3b82f6",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"0.875rem",fontWeight:"500"},children:[E.jsx(px,{size:16}),"הצג פרטים"]}),E.jsxs("button",{onClick:()=>h(x),disabled:s===x.id,style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 1rem",background:s===x.id?"#9ca3af":"#10b981",color:"white",border:"none",borderRadius:"6px",cursor:s===x.id?"not-allowed":"pointer",fontSize:"0.875rem",fontWeight:"500"},children:[E.jsx(lh,{size:16}),s===x.id?"מעבד...":"אשר"]}),E.jsxs("button",{onClick:()=>p(x),disabled:s===x.id,style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 1rem",background:s===x.id?"#9ca3af":"#ef4444",color:"white",border:"none",borderRadius:"6px",cursor:s===x.id?"not-allowed":"pointer",fontSize:"0.875rem",fontWeight:"500"},children:[E.jsx(S0,{size:16}),"דחה"]})]})]},x.id)})}),a&&E.jsx(xU,{request:a,onClose:()=>o(null),onApprove:()=>{o(null),h(a)},onReject:()=>{o(null),p(a)},processing:s===a.id}),E.jsx("style",{children:`
        @keyframes spin {
          0% { transform: rotate(0deg); }
          100% { transform: rotate(360deg); }
        }
      `})]})},xU=({request:n,onClose:e,onApprove:t,onReject:r,processing:i})=>{var s,u;const a=f=>new Date(f).toLocaleDateString("he-IL"),o=f=>{f.target===f.currentTarget&&e()};return E.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",padding:"1rem",zIndex:9999},onClick:o,children:E.jsxs("div",{style:{background:"white",borderRadius:"12px",width:"100%",maxWidth:"42rem",maxHeight:"90vh",overflow:"hidden",direction:"rtl"},onClick:f=>f.stopPropagation(),children:[E.jsxs("div",{style:{background:"#1f2937",color:"white",padding:"1.5rem",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[E.jsxs("h2",{style:{fontSize:"1.5rem",fontWeight:"bold",margin:0},children:["פרטי בקשה - ",n.clientName]}),E.jsx("button",{onClick:e,style:{background:"none",border:"none",color:"white",fontSize:"1.5rem",cursor:"pointer"},children:"×"})]}),E.jsxs("div",{style:{padding:"1.5rem",overflowY:"auto",maxHeight:"calc(90vh - 180px)"},children:[E.jsxs("div",{style:{marginBottom:"2rem"},children:[E.jsx("h3",{style:{fontSize:"1.25rem",fontWeight:"600",marginBottom:"1rem",color:"#1f2937"},children:"פרטי הלקוח"}),E.jsxs("div",{style:{background:"#f9fafb",padding:"1rem",borderRadius:"8px",display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem"},children:[E.jsxs("div",{children:[E.jsx("span",{style:{fontSize:"0.875rem",color:"#6b7280",display:"block"},children:"שם לקוח"}),E.jsx("span",{style:{fontWeight:"bold"},children:n.clientName})]}),E.jsxs("div",{children:[E.jsx("span",{style:{fontSize:"0.875rem",color:"#6b7280",display:"block"},children:"טלפון"}),E.jsx("span",{style:{fontWeight:"bold"},children:n.phone})]}),E.jsxs("div",{children:[E.jsx("span",{style:{fontSize:"0.875rem",color:"#6b7280",display:"block"},children:"כתובת"}),E.jsx("span",{style:{fontWeight:"bold"},children:n.address})]}),E.jsxs("div",{children:[E.jsx("span",{style:{fontSize:"0.875rem",color:"#6b7280",display:"block"},children:"אימייל"}),E.jsx("span",{style:{fontWeight:"bold"},children:n.email||"לא צוין"})]}),E.jsxs("div",{children:[E.jsx("span",{style:{fontSize:"0.875rem",color:"#6b7280",display:"block"},children:"סוג אירוע"}),E.jsx("span",{style:{fontWeight:"bold"},children:n.eventType})]}),E.jsxs("div",{children:[E.jsx("span",{style:{fontSize:"0.875rem",color:"#6b7280",display:"block"},children:"תאריכים"}),E.jsxs("span",{style:{fontWeight:"bold"},children:[a(n.pickupDate)," → ",a(n.returnDate)]})]})]})]}),E.jsxs("div",{children:[E.jsxs("h3",{style:{fontSize:"1.25rem",fontWeight:"600",marginBottom:"1rem",color:"#1f2937"},children:["פריטים מבוקשים (",((s=n.items)==null?void 0:s.length)||0,")"]}),E.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:(u=n.items)==null?void 0:u.map((f,h)=>E.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",padding:"1rem",background:"#f9fafb",borderRadius:"8px",border:"1px solid #e5e7eb"},children:[E.jsx("img",{src:f.imageUrl||"/no-image-available.png",alt:f.name,style:{width:"3rem",height:"3rem",objectFit:"cover",borderRadius:"6px",border:"1px solid #e5e7eb"}}),E.jsxs("div",{style:{flex:1},children:[E.jsx("h4",{style:{fontSize:"1rem",fontWeight:"500",margin:0,color:"#1f2937"},children:f.name}),E.jsxs("p",{style:{fontSize:"0.875rem",color:"#6b7280",margin:"0.25rem 0 0 0"},children:["מזהה: ",f.ItemId]})]}),E.jsxs("div",{style:{background:"#3b82f6",color:"white",padding:"0.5rem 1rem",borderRadius:"20px",fontSize:"0.875rem",fontWeight:"bold"},children:["×",f.quantity]})]},h))})]})]}),E.jsxs("div",{style:{background:"#f9fafb",padding:"1rem 1.5rem",borderTop:"1px solid #e5e7eb",display:"flex",justifyContent:"center",gap:"1rem"},children:[E.jsxs("button",{onClick:t,disabled:i,style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.75rem 1.5rem",background:i?"#9ca3af":"#10b981",color:"white",border:"none",borderRadius:"8px",cursor:i?"not-allowed":"pointer",fontSize:"1rem",fontWeight:"500"},children:[E.jsx(lh,{size:20}),i?"מעבד...":"אשר בקשה"]}),E.jsxs("button",{onClick:r,disabled:i,style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.75rem 1.5rem",background:i?"#9ca3af":"#ef4444",color:"white",border:"none",borderRadius:"8px",cursor:i?"not-allowed":"pointer",fontSize:"1rem",fontWeight:"500"},children:[E.jsx(S0,{size:20}),"דחה בקשה"]}),E.jsx("button",{onClick:e,style:{padding:"0.75rem 1.5rem",background:"#6b7280",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"1rem",fontWeight:"500"},children:"סגור"})]})]})})},_U=()=>{const{user:n}=xf(),[e,t]=ge.useState([]),[r,i]=ge.useState(!0),[a,o]=ge.useState(null),[s,u]=ge.useState(null),f=async()=>{if(!(n!=null&&n.uid)){console.log("❌ אין משתמש מחובר:",n),i(!1);return}try{i(!0),console.log("🔍 מחפש הזמנות עבור משתמש:",n.uid);const x=Gu(On(kt,"orderRequests"),Ju("requestedBy","==",n.uid));console.log("📋 מבצע שאילתה ל-orderRequests...");const w=await yr(x);console.log("📊 נמצאו",w.size,"בקשות");const I=w.docs.map(P=>{const B={id:P.id,type:"request",...P.data()};return console.log("📝 בקשה נמצאה:",B),B});console.log('✅ סה"כ בקשות שנמצאו:',I.length);const C=[...I].sort((P,B)=>{var q,D,A,T;const V=((q=P.requestedAt)==null?void 0:q.seconds)||((D=P.createdAt)==null?void 0:D.seconds)||0;return(((A=B.requestedAt)==null?void 0:A.seconds)||((T=B.createdAt)==null?void 0:T.seconds)||0)-V});console.log("🎯 הזמנות סופיות:",C),t(C)}catch(x){console.error("❌ שגיאה בטעינת ההזמנות:",x),console.error("Stack trace:",x.stack)}finally{i(!1)}},h=async x=>{const w=p(x).text;if(window.confirm(`האם אתה בטוח שברצונך למחוק את ההזמנה?

פרטים:
• לקוח: ${x.clientName}
• סטטוס: ${w}
• תאריך: ${g(x.pickupDate)}

פעולה זו אינה ניתנת לביטול.`)){u(x.id),console.log("🗑️ מוחק הזמנה:",x.id);try{await Am(Ar(kt,"orderRequests",x.id)),console.log("✅ הזמנה נמחקה בהצלחה"),t(I=>I.filter(C=>C.id!==x.id)),alert("🗑️ ההזמנה נמחקה בהצלחה מהרשימה שלך")}catch(I){console.error("❌ שגיאה במחיקת הזמנה:",I),alert(`שגיאה במחיקת ההזמנה: ${I.message}`)}finally{u(null)}}};ge.useEffect(()=>{console.log("👤 משתמש השתנה:",n),n!=null&&n.uid?(console.log("🚀 קורא לטעינת הזמנות..."),f()):(console.log("⏳ מחכה למשתמש להיטען..."),i(!1))},[n]);const p=x=>{switch(x.status){case"pending":return{text:"מחכה לאישור",color:"#f59e0b",bgColor:"#fef3c7",icon:E.jsx(dx,{size:16})};case"approved":return{text:"מאושר",color:"#10b981",bgColor:"#d1fae5",icon:E.jsx(lh,{size:16})};case"rejected":return{text:"נדחה",color:"#ef4444",bgColor:"#fee2e2",icon:E.jsx(S0,{size:16})};default:return{text:"לא ידוע",color:"#6b7280",bgColor:"#f3f4f6",icon:E.jsx(Yo,{size:16})}}},g=x=>new Date(x).toLocaleDateString("he-IL"),m=x=>x?(x.seconds?new Date(x.seconds*1e3):new Date(x)).toLocaleString("he-IL"):"";return r?E.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"50vh",direction:"rtl"},children:E.jsxs("div",{style:{textAlign:"center"},children:[E.jsx("div",{style:{width:"40px",height:"40px",border:"4px solid #e5e7eb",borderTop:"4px solid #3b82f6",borderRadius:"50%",animation:"spin 1s linear infinite",margin:"0 auto 1rem"}}),E.jsx("p",{children:"טוען הזמנות..."})]})}):E.jsxs("div",{style:{padding:"2rem",maxWidth:"1200px",margin:"0 auto",direction:"rtl"},children:[E.jsxs("div",{style:{background:"linear-gradient(to right, #3b82f6, #1e40af)",color:"white",padding:"2rem",borderRadius:"12px",marginBottom:"2rem",textAlign:"center"},children:[E.jsx("h1",{style:{fontSize:"2rem",fontWeight:"bold",margin:0},children:"📋 ההזמנות שלי"}),E.jsx("p",{style:{fontSize:"1.1rem",opacity:.9,margin:"0.5rem 0 0 0"},children:"כל הבקשות וההזמנות שלך במקום אחד"})]}),E.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem",marginBottom:"2rem"},children:[E.jsxs("div",{style:{background:"#fef3c7",padding:"1.5rem",borderRadius:"12px",textAlign:"center",border:"1px solid #fde68a"},children:[E.jsx("div",{style:{fontSize:"2rem",fontWeight:"bold",color:"#92400e"},children:e.filter(x=>x.status==="pending").length}),E.jsx("div",{style:{color:"#92400e",fontSize:"0.875rem"},children:"מחכות לאישור"})]}),E.jsxs("div",{style:{background:"#d1fae5",padding:"1.5rem",borderRadius:"12px",textAlign:"center",border:"1px solid #a7f3d0"},children:[E.jsx("div",{style:{fontSize:"2rem",fontWeight:"bold",color:"#065f46"},children:e.filter(x=>x.status==="approved").length}),E.jsx("div",{style:{color:"#065f46",fontSize:"0.875rem"},children:"מאושרות"})]}),E.jsxs("div",{style:{background:"#fee2e2",padding:"1.5rem",borderRadius:"12px",textAlign:"center",border:"1px solid #fecaca"},children:[E.jsx("div",{style:{fontSize:"2rem",fontWeight:"bold",color:"#991b1b"},children:e.filter(x=>x.status==="rejected").length}),E.jsx("div",{style:{color:"#991b1b",fontSize:"0.875rem"},children:"נדחו"})]}),E.jsxs("div",{style:{background:"#eff6ff",padding:"1.5rem",borderRadius:"12px",textAlign:"center",border:"1px solid #dbeafe"},children:[E.jsx("div",{style:{fontSize:"2rem",fontWeight:"bold",color:"#1e40af"},children:e.length}),E.jsx("div",{style:{color:"#1e40af",fontSize:"0.875rem"},children:'סה"כ הזמנות'})]})]}),e.length===0?E.jsxs("div",{style:{background:"white",padding:"3rem",borderRadius:"12px",textAlign:"center",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[E.jsx(Yo,{size:64,style:{color:"#d1d5db",marginBottom:"1rem"}}),E.jsx("h3",{style:{fontSize:"1.5rem",color:"#6b7280",margin:"0 0 0.5rem 0"},children:"אין הזמנות עדיין"}),E.jsx("p",{style:{color:"#9ca3af",marginBottom:"1.5rem"},children:"עדיין לא שלחת בקשות השאלה"}),E.jsx("a",{href:"/request",style:{display:"inline-block",background:"#3b82f6",color:"white",padding:"0.75rem 1.5rem",borderRadius:"8px",textDecoration:"none",fontWeight:"500"},children:"📝 צור בקשת השאלה ראשונה"})]}):E.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(350px, 1fr))",gap:"1.5rem"},children:e.map(x=>{var I;const w=p(x);return E.jsxs("div",{style:{background:"white",border:"1px solid #e5e7eb",borderRadius:"12px",padding:"1.5rem",boxShadow:"0 2px 8px rgba(0,0,0,0.1)",transition:"transform 0.2s ease, box-shadow 0.2s ease"},onMouseEnter:C=>{C.currentTarget.style.transform="translateY(-2px)",C.currentTarget.style.boxShadow="0 4px 16px rgba(0,0,0,0.15)"},onMouseLeave:C=>{C.currentTarget.style.transform="translateY(0)",C.currentTarget.style.boxShadow="0 2px 8px rgba(0,0,0,0.1)"},children:[E.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"1rem",paddingBottom:"1rem",borderBottom:"1px solid #f3f4f6"},children:[E.jsxs("div",{children:[E.jsx("h3",{style:{fontSize:"1.25rem",fontWeight:"bold",margin:0,color:"#1f2937"},children:x.clientName}),E.jsxs("p",{style:{fontSize:"0.875rem",color:"#6b7280",margin:"0.25rem 0 0 0"},children:["נשלח: ",m(x.requestedAt)]})]}),E.jsxs("div",{style:{background:w.bgColor,color:w.color,padding:"0.25rem 0.75rem",borderRadius:"20px",fontSize:"0.75rem",fontWeight:"bold",display:"flex",alignItems:"center",gap:"0.25rem"},children:[w.icon,w.text]})]}),E.jsxs("div",{style:{display:"grid",gap:"0.75rem",marginBottom:"1.5rem"},children:[E.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[E.jsx(Om,{size:16,style:{color:"#6b7280"}}),E.jsx("span",{style:{fontSize:"0.875rem"},children:x.phone})]}),E.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[E.jsx(PS,{size:16,style:{color:"#6b7280"}}),E.jsx("span",{style:{fontSize:"0.875rem"},children:x.address})]}),E.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[E.jsx(sh,{size:16,style:{color:"#6b7280"}}),E.jsxs("span",{style:{fontSize:"0.875rem"},children:[g(x.pickupDate)," → ",g(x.returnDate)]})]}),E.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[E.jsx(Yo,{size:16,style:{color:"#6b7280"}}),E.jsxs("span",{style:{fontSize:"0.875rem"},children:[(I=x.items)==null?void 0:I.reduce((C,P)=>C+P.quantity,0)," פריטים"]})]}),x.status==="rejected"&&x.rejectionReason&&E.jsxs("div",{style:{background:"#fef2f2",border:"1px solid #fecaca",borderRadius:"6px",padding:"0.75rem",marginTop:"0.5rem"},children:[E.jsx("div",{style:{fontSize:"0.75rem",color:"#991b1b",fontWeight:"bold",marginBottom:"0.25rem"},children:"סיבת דחייה:"}),E.jsx("div",{style:{fontSize:"0.875rem",color:"#7f1d1d"},children:x.rejectionReason})]})]}),E.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"0.5rem"},children:[E.jsxs("button",{onClick:()=>o(x),style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 1rem",background:"#3b82f6",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"0.875rem",fontWeight:"500"},children:[E.jsx(px,{size:16}),"הצג פרטים"]}),E.jsxs("button",{onClick:()=>h(x),disabled:s===x.id,style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 1rem",background:s===x.id?"#9ca3af":"#ef4444",color:"white",border:"none",borderRadius:"6px",cursor:s===x.id?"not-allowed":"pointer",fontSize:"0.875rem",fontWeight:"500",opacity:s===x.id?.6:1},children:[E.jsx(BS,{size:16}),s===x.id?"מוחק...":"מחק"]})]})]},x.id)})}),a&&E.jsx(wU,{order:a,onClose:()=>o(null)}),E.jsx("style",{children:`
        @keyframes spin {
          0% { transform: rotate(0deg); }
          100% { transform: rotate(360deg); }
        }
      `})]})},wU=({order:n,onClose:e})=>{var o,s;const t=u=>{switch(u.status){case"pending":return{text:"מחכה לאישור",color:"#f59e0b",bgColor:"#fef3c7",icon:E.jsx(dx,{size:20})};case"approved":return{text:"מאושר",color:"#10b981",bgColor:"#d1fae5",icon:E.jsx(lh,{size:20})};case"rejected":return{text:"נדחה",color:"#ef4444",bgColor:"#fee2e2",icon:E.jsx(S0,{size:20})};default:return{text:"לא ידוע",color:"#6b7280",bgColor:"#f3f4f6",icon:E.jsx(Yo,{size:20})}}},r=u=>new Date(u).toLocaleDateString("he-IL"),i=t(n),a=u=>{u.target===u.currentTarget&&e()};return E.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",padding:"1rem",zIndex:9999},onClick:a,children:E.jsxs("div",{style:{background:"white",borderRadius:"12px",width:"100%",maxWidth:"42rem",maxHeight:"90vh",overflow:"hidden",direction:"rtl"},onClick:u=>u.stopPropagation(),children:[E.jsxs("div",{style:{background:i.color,color:"white",padding:"1.5rem",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[E.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[i.icon,E.jsxs("div",{children:[E.jsxs("h2",{style:{fontSize:"1.5rem",fontWeight:"bold",margin:0},children:["הזמנה - ",n.clientName]}),E.jsx("p",{style:{fontSize:"0.875rem",margin:"0.25rem 0 0 0",opacity:.9},children:i.text})]})]}),E.jsx("button",{onClick:e,style:{background:"none",border:"none",color:"white",fontSize:"1.5rem",cursor:"pointer"},children:"×"})]}),E.jsxs("div",{style:{padding:"1.5rem",overflowY:"auto",maxHeight:"calc(90vh - 180px)"},children:[E.jsxs("div",{style:{marginBottom:"2rem"},children:[E.jsx("h3",{style:{fontSize:"1.25rem",fontWeight:"600",marginBottom:"1rem",color:"#1f2937"},children:"פרטי ההזמנה"}),E.jsxs("div",{style:{background:"#f9fafb",padding:"1rem",borderRadius:"8px",display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem"},children:[E.jsxs("div",{children:[E.jsx("span",{style:{fontSize:"0.875rem",color:"#6b7280",display:"block"},children:"שם לקוח"}),E.jsx("span",{style:{fontWeight:"bold"},children:n.clientName})]}),E.jsxs("div",{children:[E.jsx("span",{style:{fontSize:"0.875rem",color:"#6b7280",display:"block"},children:"טלפון"}),E.jsx("span",{style:{fontWeight:"bold"},children:n.phone})]}),E.jsxs("div",{children:[E.jsx("span",{style:{fontSize:"0.875rem",color:"#6b7280",display:"block"},children:"כתובת"}),E.jsx("span",{style:{fontWeight:"bold"},children:n.address})]}),E.jsxs("div",{children:[E.jsx("span",{style:{fontSize:"0.875rem",color:"#6b7280",display:"block"},children:"אימייל"}),E.jsx("span",{style:{fontWeight:"bold"},children:n.email||"לא צוין"})]}),E.jsxs("div",{children:[E.jsx("span",{style:{fontSize:"0.875rem",color:"#6b7280",display:"block"},children:"סוג אירוע"}),E.jsx("span",{style:{fontWeight:"bold"},children:n.eventType})]}),E.jsxs("div",{children:[E.jsx("span",{style:{fontSize:"0.875rem",color:"#6b7280",display:"block"},children:"תאריכים"}),E.jsxs("span",{style:{fontWeight:"bold"},children:[r(n.pickupDate)," → ",r(n.returnDate)]})]})]})]}),E.jsxs("div",{children:[E.jsxs("h3",{style:{fontSize:"1.25rem",fontWeight:"600",marginBottom:"1rem",color:"#1f2937"},children:["פריטים (",((o=n.items)==null?void 0:o.length)||0,")"]}),E.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:(s=n.items)==null?void 0:s.map((u,f)=>E.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",padding:"1rem",background:"#f9fafb",borderRadius:"8px",border:"1px solid #e5e7eb"},children:[E.jsx("img",{src:u.imageUrl||"/no-image-available.png",alt:u.name,style:{width:"3rem",height:"3rem",objectFit:"cover",borderRadius:"6px",border:"1px solid #e5e7eb"}}),E.jsxs("div",{style:{flex:1},children:[E.jsx("h4",{style:{fontSize:"1rem",fontWeight:"500",margin:0,color:"#1f2937"},children:u.name}),E.jsxs("p",{style:{fontSize:"0.875rem",color:"#6b7280",margin:"0.25rem 0 0 0"},children:["מזהה: ",u.ItemId]})]}),E.jsxs("div",{style:{background:"#3b82f6",color:"white",padding:"0.5rem 1rem",borderRadius:"20px",fontSize:"0.875rem",fontWeight:"bold"},children:["×",u.quantity]})]},f))})]}),n.status==="rejected"&&n.rejectionReason&&E.jsxs("div",{style:{marginTop:"2rem",background:"#fef2f2",border:"1px solid #fecaca",borderRadius:"8px",padding:"1rem"},children:[E.jsx("h4",{style:{fontSize:"1rem",fontWeight:"bold",color:"#991b1b",margin:"0 0 0.5rem 0"},children:"סיבת דחייה:"}),E.jsx("p",{style:{fontSize:"0.875rem",color:"#7f1d1d",margin:0},children:n.rejectionReason})]})]}),E.jsx("div",{style:{background:"#f9fafb",padding:"1rem 1.5rem",borderTop:"1px solid #e5e7eb",display:"flex",justifyContent:"center"},children:E.jsx("button",{onClick:e,style:{padding:"0.75rem 1.5rem",background:"#6b7280",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"1rem",fontWeight:"500"},children:"סגור"})})]})})},bU=["ינואר","פברואר","מרץ","אפריל","מאי","יוני","יולי","אוגוסט","ספטמבר","אוקטובר","נובמבר","דצמבר"],AU=["א","ב","ג","ד","ה","ו","ש"],EU=n=>new Date(n.getFullYear(),n.getMonth()+1,0).getDate(),SU=n=>{const e=new Date(n.getFullYear(),n.getMonth(),1).getDay();return e===0?6:e-1},CU=({currentDate:n,events:e=[],setCurrentDate:t,setSelectedEvents:r,setSelectedDate:i,setShowReport:a})=>{const o=g=>{if(!Array.isArray(e))return[];const m=new Date(n.getFullYear(),n.getMonth(),g);return e.filter(x=>{if(!x.date)return!1;const w=new Date(x.date);return w.getDate()===m.getDate()&&w.getMonth()===m.getMonth()&&w.getFullYear()===m.getFullYear()})},s=g=>{const m=o(g),x=new Map;return m.forEach(w=>{x.has(w.orderId)||x.set(w.orderId,{...w,allEventsForOrder:m.filter(I=>I.orderId===w.orderId)})}),Array.from(x.values())},u=g=>{const m=o(g);m.length>0&&m.every(w=>w.type==="השאלה פעילה")||m.length>0&&(r(m),i(new Date(n.getFullYear(),n.getMonth(),g)),a(!0))},f=EU(n),h=SU(n),p=[];for(let g=0;g<h;g++)p.push(E.jsx("div",{className:"day-cell empty"},`empty-${g}`));for(let g=1;g<=f;g++){const m=o(g),x=s(g),w=m.filter(V=>V.type==="השאלה"),I=m.filter(V=>V.type==="החזרה");m.filter(V=>V.type==="השאלה פעילה");const C=m.length>0,P=x.length;let B="day-cell";C&&(B+=" has-events"),w.length>0&&(B+=" pickup-day"),I.length>0&&(B+=" return-day"),p.push(E.jsxs("div",{className:B,onClick:()=>u(g),style:{cursor:m.some(V=>V.type!=="השאלה פעילה")?"pointer":"default"},children:[E.jsx("span",{className:"day-number",children:g}),E.jsxs("div",{className:"event-icons",children:[w.length>0&&E.jsxs("div",{className:"event-tag pickup-tag",title:"איסוף מוצרים",children:["📦 ",w.length>1&&w.length]}),I.length>0&&E.jsxs("div",{className:"event-tag return-tag",title:"החזרת מוצרים",children:["🔄 ",I.length>1&&I.length]})]}),P>0&&E.jsx("div",{className:"event-count",title:`${P} הזמנות`,children:P})]},g))}return E.jsxs("div",{className:"calendar-container",children:[E.jsxs("div",{className:"calendar-header",children:[E.jsx("button",{onClick:()=>t(new Date(n.getFullYear(),n.getMonth()-1,1)),children:E.jsx(OS,{size:20})}),E.jsxs("h2",{className:"calendar-title",children:[E.jsx(sh,{size:24})," ",bU[n.getMonth()]," ",n.getFullYear()]}),E.jsx("button",{onClick:()=>t(new Date(n.getFullYear(),n.getMonth()+1,1)),children:E.jsx(DS,{size:20})})]}),E.jsx("div",{className:"day-names",children:AU.map(g=>E.jsx("div",{className:"day-name",children:g},g))}),E.jsx("div",{className:"calendar-grid",children:p}),E.jsxs("div",{className:"calendar-footer",children:[E.jsxs("div",{className:"calendar-legend",children:[E.jsx("span",{className:"legend-item",children:"📦 איסוף מוצרים"}),E.jsx("span",{className:"legend-item",children:"🔄 החזרת מוצרים"})]}),E.jsxs("div",{className:"calendar-stats",children:['לחץ על יום עם אירועים כדי לראות פרטים • סה"כ אירועים: ',Array.isArray(e)?e.length:0]}),(!Array.isArray(e)||e.length===0)&&E.jsx("div",{className:"warning",children:"אין אירועים נטענים - בדוק את החיבור למסד הנתונים"})]})]})},TU=({show:n,selectedDate:e,selectedEvents:t,allItems:r,setShowReport:i,setShowItemsModal:a,setEditItemModal:o,fetchItemsAndOrders:s,onStartReturnInspection:u})=>{if(ge.useEffect(()=>(n?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[n]),!n)return null;const f=async x=>{try{return await Am(Ar(kt,"orders",x)),!0}catch(w){throw console.error("Error deleting order:",w),w}},p=(x=>{const w=new Map;return x.forEach(I=>{w.has(I.orderId)||w.set(I.orderId,{orderId:I.orderId,clientName:I.clientName,phone:I.phone,items:I.items,pickupDate:I.pickupDate,returnDate:I.returnDate,events:[]}),w.get(I.orderId).events.push(I)}),Array.from(w.values())})(t),g=async x=>{if(x&&window.confirm("האם אתה בטוח שברצונך למחוק את ההזמנה?"))try{await f(x),await s(),i(!1),alert("ההזמנה נמחקה בהצלחה.")}catch(w){console.error(w),alert("מחיקה נכשלה. נסה שוב.")}},m=x=>{x.target===x.currentTarget&&i(!1)};return E.jsxs(E.Fragment,{children:[E.jsx("style",{jsx:!0,global:!0,children:`
        .modal-overlay {
          position: fixed !important;
          top: 0 !important;
          left: 0 !important;
          right: 0 !important;
          bottom: 0 !important;
          background-color: rgba(0, 0, 0, 0.5) !important;
          display: flex !important;
          align-items: center !important;
          justify-content: center !important;
          padding: 1rem !important;
          z-index: 99999 !important;
        }
        
        .modal-content {
          background: white !important;
          border-radius: 12px !important;
          box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25) !important;
          width: 100% !important;
          max-width: 32rem !important;
          max-height: 90vh !important;
          overflow: hidden !important;
          position: relative !important;
          z-index: 100000 !important;
        }
        
        @media (min-width: 768px) {
          .modal-content {
            max-width: 42rem !important;
          }
        }
      `}),E.jsx("div",{className:"modal-overlay",onClick:m,children:E.jsxs("div",{className:"modal-content",dir:"rtl",onClick:x=>x.stopPropagation(),children:[E.jsxs("div",{style:{background:"linear-gradient(to right, #2563eb, #1d4ed8)",color:"white",padding:"1.5rem"},children:[E.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[E.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[E.jsx(sh,{size:24}),E.jsxs("h3",{style:{fontSize:"1.25rem",fontWeight:"bold",margin:0},children:["אירועים ליום ",e==null?void 0:e.toLocaleDateString("he-IL")]})]}),E.jsx("button",{onClick:()=>i(!1),style:{background:"none",border:"none",color:"white",fontSize:"1.5rem",cursor:"pointer",padding:"0.25rem"},children:"×"})]}),E.jsxs("div",{style:{marginTop:"0.5rem",color:"#bfdbfe"},children:[p.length," הזמנ",p.length!==1?"ות":"ה"]})]}),E.jsx("div",{style:{padding:"1.5rem",overflowY:"auto",maxHeight:"calc(90vh - 200px)"},children:E.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:p.map((x,w)=>E.jsxs("div",{style:{border:"1px solid #e5e7eb",borderRadius:"8px",background:"white",boxShadow:"0 1px 3px 0 rgba(0, 0, 0, 0.1)"},children:[E.jsxs("div",{style:{padding:"1rem",borderBottom:"1px solid #f3f4f6"},children:[E.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"0.75rem"},children:E.jsxs("div",{style:{flex:1},children:[E.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem"},children:[E.jsx("h4",{style:{fontSize:"1.125rem",fontWeight:"bold",color:"#1f2937",margin:0},children:x.clientName}),E.jsxs("span",{style:{padding:"0.25rem 0.75rem",borderRadius:"9999px",fontSize:"0.75rem",fontWeight:"500",background:"#3b82f6",color:"white"},children:["הזמנה #",w+1]})]}),E.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",fontSize:"0.875rem",color:"#4b5563",marginBottom:"0.5rem"},children:[E.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[E.jsx(Om,{size:16}),E.jsx("span",{children:x.phone})]}),E.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[E.jsx(sh,{size:16}),E.jsxs("span",{children:[new Date(x.pickupDate).toLocaleDateString("he-IL")," - ",new Date(x.returnDate).toLocaleDateString("he-IL")]})]})]}),E.jsx("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap",marginBottom:"0.75rem"},children:x.events.map((I,C)=>E.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem",padding:"0.25rem 0.5rem",borderRadius:"12px",fontSize:"0.75rem",fontWeight:"500",background:I.type==="השאלה"?"#10b981":I.type==="החזרה"?"#f59e0b":"#3b82f6",color:"white"},children:[E.jsx("span",{children:I.icon}),E.jsx("span",{children:I.description}),I.isMultiDay&&E.jsxs("span",{style:{fontSize:"0.65rem",opacity:.8},children:["(יום ",I.dayNumber,"/",I.totalDays,")"]})]},C))})]})}),x.items&&x.items.length>0&&E.jsxs("div",{style:{marginBottom:"1rem"},children:[E.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem"},children:[E.jsx(Yo,{size:16,style:{color:"#6b7280"}}),E.jsxs("span",{style:{fontSize:"0.875rem",fontWeight:"500",color:"#374151"},children:["פריטים (",x.items.reduce((I,C)=>I+(C.quantity||1),0),")"]})]}),E.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem"},children:[x.items.slice(0,3).map((I,C)=>E.jsxs("div",{style:{background:"#f9fafb",padding:"0.25rem 0.75rem",borderRadius:"9999px",fontSize:"0.75rem",color:"#4b5563",border:"1px solid #e5e7eb"},children:[I.name," ",I.quantity>1?`(×${I.quantity})`:""]},C)),x.items.length>3&&E.jsxs("div",{style:{background:"#eff6ff",padding:"0.25rem 0.75rem",borderRadius:"9999px",fontSize:"0.75rem",color:"#2563eb",border:"1px solid #dbeafe"},children:["+",x.items.length-3," נוספים"]})]})]})]}),E.jsx("div",{style:{padding:"1rem",background:"#f9fafb"},children:E.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"0.75rem",flexWrap:"wrap"},children:[x.events.some(I=>I.icon==="📦")&&E.jsxs("button",{onClick:()=>o({open:!0,eventId:`${x.orderId}-edit`,items:x.items.map(I=>({...I}))}),style:{display:"flex",alignItems:"center",gap:"0.5rem",background:"#2563eb",color:"white",padding:"0.5rem 1rem",borderRadius:"8px",border:"none",cursor:"pointer",fontSize:"0.875rem"},children:[E.jsx(MS,{size:16}),"ערוך הזמנה"]}),E.jsxs("button",{onClick:()=>{const I=t.filter(C=>C.orderId===x.orderId);a(I)},style:{display:"flex",alignItems:"center",gap:"0.5rem",background:"#059669",color:"white",padding:"0.5rem 1rem",borderRadius:"8px",border:"none",cursor:"pointer",fontSize:"0.875rem"},children:[E.jsx(px,{size:16}),"הצג פרטים"]}),x.events.some(I=>I.icon==="📦")&&E.jsxs("button",{onClick:()=>g(x.orderId),style:{display:"flex",alignItems:"center",gap:"0.5rem",background:"#dc2626",color:"white",padding:"0.5rem 1rem",borderRadius:"8px",border:"none",cursor:"pointer",fontSize:"0.875rem"},children:[E.jsx(BS,{size:16}),"מחק"]}),u&&x.events.some(I=>I.type==="החזרה")&&E.jsxs("button",{onClick:()=>u(x.orderId),style:{display:"flex",alignItems:"center",gap:"0.5rem",background:"#f59e0b",color:"white",padding:"0.5rem 1rem",borderRadius:"8px",border:"none",cursor:"pointer",fontSize:"0.875rem"},children:[E.jsx(QF,{size:16}),"בדיקת החזרה"]})]})})]},x.orderId))})}),E.jsx("div",{style:{background:"#f9fafb",padding:"1rem 1.5rem",borderTop:"1px solid #e5e7eb"},children:E.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[E.jsxs("div",{style:{fontSize:"0.875rem",color:"#4b5563"},children:['סה"כ ',p.reduce((x,w)=>{var I;return x+(((I=w.items)==null?void 0:I.reduce((C,P)=>C+(P.quantity||1),0))||0)},0)," פריטים"]}),E.jsx("button",{onClick:()=>i(!1),style:{background:"#2563eb",color:"white",padding:"0.5rem 1.5rem",borderRadius:"8px",border:"none",cursor:"pointer"},children:"סגור"})]})})]})})]})},IU=({show:n,setShow:e,selectedEvents:t,allItems:r})=>{var o;if(ge.useEffect(()=>(n?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[n]),!n)return null;const i=((o=t==null?void 0:t[0])==null?void 0:o.items)||[],a=s=>{s.target===s.currentTarget&&e(!1)};return E.jsxs(E.Fragment,{children:[E.jsx("style",{jsx:!0,global:!0,children:`
        .items-modal-overlay {
          position: fixed !important;
          top: 0 !important;
          left: 0 !important;
          right: 0 !important;
          bottom: 0 !important;
          background-color: rgba(0, 0, 0, 0.5) !important;
          display: flex !important;
          align-items: center !important;
          justify-content: center !important;
          padding: 1rem !important;
          z-index: 99999 !important;
        }
        
        .items-modal-content {
          background: white !important;
          border-radius: 12px !important;
          box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25) !important;
          width: 100% !important;
          max-width: 28rem !important;
          max-height: 90vh !important;
          overflow: hidden !important;
          position: relative !important;
          z-index: 100000 !important;
        }
      `}),E.jsx("div",{className:"items-modal-overlay",onClick:a,children:E.jsxs("div",{className:"items-modal-content",dir:"rtl",onClick:s=>s.stopPropagation(),children:[E.jsxs("div",{style:{background:"linear-gradient(to right, #059669, #047857)",color:"white",padding:"1.5rem"},children:[E.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[E.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[E.jsx(Yo,{size:24}),E.jsx("h2",{style:{fontSize:"1.25rem",fontWeight:"bold",margin:0},children:"רשימת מוצרים"})]}),E.jsx("button",{onClick:()=>e(!1),style:{background:"none",border:"none",color:"white",fontSize:"1.5rem",cursor:"pointer",padding:"0.25rem"},children:E.jsx(vU,{size:20})})]}),E.jsxs("div",{style:{marginTop:"0.5rem",color:"#a7f3d0"},children:[i.length," פריט",i.length!==1?"ים":""," בהזמנה"]})]}),E.jsx("div",{style:{padding:"1.5rem",overflowY:"auto",maxHeight:"calc(90vh - 180px)"},children:i.length>0?E.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:i.map((s,u)=>(r.find(f=>f.name===s.name),E.jsx("div",{style:{border:"1px solid #e5e7eb",borderRadius:"8px",padding:"1rem",background:"#f9fafb"},children:E.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[s.imageUrl&&E.jsx("img",{src:s.imageUrl,alt:s.name,style:{width:"4rem",height:"4rem",objectFit:"cover",borderRadius:"8px",border:"2px solid #e5e7eb"}}),E.jsxs("div",{style:{flex:1},children:[E.jsx("div",{style:{fontSize:"1.125rem",fontWeight:"bold",color:"#1f2937",marginBottom:"0.25rem"},children:s.name}),E.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",fontSize:"0.875rem",color:"#6b7280"},children:[E.jsxs("span",{children:[E.jsx("strong",{children:"כמות:"})," ",s.quantity]}),E.jsxs("span",{children:[E.jsx("strong",{children:"מזהה מוצר:"}),E.jsx("code",{style:{background:"#f3f4f6",padding:"0.125rem 0.375rem",borderRadius:"4px",marginRight:"0.25rem"},children:s.itemId||"לא נמצא"})]})]})]}),E.jsxs("div",{style:{background:"#2563eb",color:"white",padding:"0.5rem 1rem",borderRadius:"20px",fontSize:"0.875rem",fontWeight:"bold"},children:["×",s.quantity]})]})},u)))}):E.jsxs("div",{style:{textAlign:"center",padding:"2rem",color:"#6b7280"},children:[E.jsx(Yo,{size:48,style:{color:"#d1d5db",marginBottom:"1rem"}}),E.jsx("p",{children:"אין פריטים בהזמנה זו"})]})}),E.jsx("div",{style:{background:"#f9fafb",padding:"1rem 1.5rem",borderTop:"1px solid #e5e7eb"},children:E.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[E.jsxs("div",{style:{fontSize:"0.875rem",color:"#4b5563"},children:['סה"כ כמות: ',i.reduce((s,u)=>s+(u.quantity||1),0)]}),E.jsx("button",{onClick:()=>e(!1),style:{background:"#059669",color:"white",padding:"0.5rem 1.5rem",borderRadius:"8px",border:"none",cursor:"pointer",fontWeight:"500"},children:"סגור"})]})})]})})]})},RU=({show:n,data:e,setData:t,allItems:r,setShowReport:i,fetchItemsAndOrders:a,allEvents:o})=>{const[s,u]=ge.useState({items:[]}),[f,h]=ge.useState(!1),[p,g]=ge.useState(""),[m,x]=ge.useState({pickupDate:null,returnDate:null});if(ge.useEffect(()=>(n?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[n]),ge.useEffect(()=>{if(n&&e.eventId&&o.length>0){console.log("🚀 Initializing edit modal");const D=e.eventId.split("-")[0],A=o.filter(T=>T.orderId===D);if(A.length>0){const T=A[0];x({pickupDate:new Date(T.pickupDate),returnDate:new Date(T.returnDate)}),console.log("📅 Order dates:",{pickup:T.pickupDate,return:T.returnDate})}u({items:[...e.items||[]]})}},[n,e,o]),!n)return null;const w=D=>{var ne,U;const A=r.find(z=>z.name===D);if(!A)return console.warn(`❌ Stock not found for ${D}`),0;const T=A.quantity||0,k=(ne=e.eventId)==null?void 0:ne.split("-")[0];if(!m.pickupDate||!m.returnDate)return console.warn("⚠️ Missing pickup/return dates for current order."),T;console.log(`🔎 Checking "${D}" availability from ${m.pickupDate.toDateString()} to ${m.returnDate.toDateString()}`),console.log(`📦 Total stock from database: ${T}`);let R=0;const L=new Set;o.forEach(z=>{if(z.orderId===k||L.has(`${z.orderId}-${D}`))return;const ee=new Date(z.pickupDate),le=new Date(z.returnDate);if(ee<=m.returnDate&&le>=m.pickupDate&&z.items){const ve=z.items.find(G=>G.name===D);ve&&(console.log(`➡️ Overlapping Order ID: ${z.orderId}`),console.log(`    Dates: ${ee.toDateString()} - ${le.toDateString()}`),console.log(`    Reserved: ${ve.quantity}`),R+=ve.quantity||0,L.add(`${z.orderId}-${D}`))}});const j=((U=s.items.find(z=>z.name===D))==null?void 0:U.quantity)||0,H=T-R-j;return console.log(`✅ Available: ${H} = ${T} - ${R} - ${j} (already in order)`),Math.max(0,H)},I=D=>{console.log("➕ Trying to add item:",D.name);const A=w(D.name);if(A<=0){alert(`❌ לא ניתן להוסיף מ-${D.name}. זמין: ${A}`);return}const T=s.items.findIndex(k=>k.name===D.name);if(T>=0){const k=[...s.items];k[T]={...k[T],quantity:k[T].quantity+1},u({...s,items:k})}else{const k={name:D.name,quantity:1,ItemId:D.ItemId||D.itemId||D.id,itemId:D.ItemId||D.itemId||D.id,id:D.id,imageUrl:D.imageUrl||""};u({...s,items:[...s.items,k]})}},C=(D,A)=>{var L;if(console.log(`🔄 Updating ${D} to quantity: ${A}`),A<=0){u({...s,items:s.items.filter(j=>j.name!==D)});return}const T=((L=s.items.find(j=>j.name===D))==null?void 0:L.quantity)||0,k=w(D)+T;if(A>k){alert(`❌ לא ניתן להזמין ${A} מ-${D}. זמין: ${k}`);return}const R=s.items.map(j=>j.name===D?{...j,quantity:A}:j);u({...s,items:R})},P=D=>{console.log("🗑️ Removing item:",D),u({...s,items:s.items.filter(A=>A.name!==D)})},B=async()=>{var D;try{h(!0);const A=(D=e.eventId)==null?void 0:D.split("-")[0];if(!A)throw new Error("שגיאה: לא נמצא מזהה הזמנה");console.log("💾 Saving items:",s.items);const T=s.items.map(k=>({...k,ItemId:k.ItemId||k.itemId||k.id,itemId:k.ItemId||k.itemId||k.id}));await Qa(Ar(kt,"orders",A),{items:T}),await a(),t({open:!1,eventId:null,items:[]}),i(!1),alert("🎉 השינויים נשמרו בהצלחה!")}catch(A){console.error("❌ שגיאה בשמירה:",A),alert(A.message||"שמירה נכשלה. נסה שוב.")}finally{h(!1)}},V=()=>{t({open:!1,eventId:null,items:[]})},Y=r.filter(D=>D.name.toLowerCase().includes(p.toLowerCase())),q=D=>{D.target===D.currentTarget&&V()};return E.jsxs(E.Fragment,{children:[E.jsx("style",{jsx:!0,global:!0,children:`
        .edit-modal-overlay {
          position: fixed !important;
          top: 0 !important;
          left: 0 !important;
          right: 0 !important;
          bottom: 0 !important;
          background-color: rgba(0, 0, 0, 0.5) !important;
          display: flex !important;
          align-items: flex-start !important;
          justify-content: center !important;
          padding: 0.5rem !important;
          z-index: 99999 !important;
          overflow-x: hidden !important;
          padding-top: 1rem !important;
        }
        
        .edit-modal-content {
          background: white !important;
          border-radius: 12px !important;
          box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25) !important;
          width: 100% !important;
          max-width: 56rem !important;
          max-height: 96vh !important;
          overflow: hidden !important;
          position: relative !important;
          z-index: 100000 !important;
          display: flex !important;
          flex-direction: column !important;
        }

        @media (max-width: 768px) {
          .edit-modal-overlay {
            padding: 0.25rem !important;
            padding-top: 0.5rem !important;
          }
          
          .edit-modal-content {
            max-height: 98vh !important;
            border-radius: 8px !important;
          }
          
          .modal-footer-mobile {
            flex-direction: column !important;
            gap: 0.5rem !important;
          }
          
          .modal-footer-mobile button {
            width: 100% !important;
          }
        }

        @keyframes spin {
          0% { transform: rotate(0deg); }
          100% { transform: rotate(360deg); }
        }
      `}),E.jsx("div",{className:"edit-modal-overlay",onClick:q,children:E.jsxs("div",{className:"edit-modal-content",dir:"rtl",onClick:D=>D.stopPropagation(),children:[E.jsxs("div",{style:{background:"linear-gradient(to right, #2563eb, #1d4ed8)",color:"white",padding:"1rem",flexShrink:0},children:[E.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[E.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[E.jsx(MS,{size:24}),E.jsx("h3",{style:{fontSize:"1.25rem",fontWeight:"bold",margin:0},children:"עריכת הזמנה"})]}),E.jsx("button",{onClick:V,style:{background:"none",border:"none",color:"white",fontSize:"1.5rem",cursor:"pointer",padding:"0.25rem"},children:"×"})]}),m.pickupDate&&m.returnDate&&E.jsxs("div",{style:{marginTop:"0.5rem",fontSize:"0.875rem",color:"#bfdbfe"},children:["📅 תאריכי ההזמנה: ",m.pickupDate.toLocaleDateString("he-IL")," - ",m.returnDate.toLocaleDateString("he-IL")]})]}),E.jsxs("div",{style:{padding:"1rem",overflowY:"auto",flex:1},children:[E.jsxs("div",{style:{marginBottom:"1.5rem"},children:[E.jsxs("h4",{style:{fontSize:"1.125rem",fontWeight:"600",marginBottom:"1rem",color:"#1f2937"},children:["פריטים נוכחיים בהזמנה (",s.items.length,")"]}),s.items.length>0?E.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:s.items.map((D,A)=>{const T=r.find(L=>L.name===D.name),R=w(D.name)+D.quantity;return E.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",background:"#f9fafb",padding:"0.75rem",borderRadius:"8px",border:"1px solid #e5e7eb"},children:[E.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",flex:1,minWidth:0},children:[(T==null?void 0:T.imageUrl)&&E.jsx("img",{src:T.imageUrl,alt:D.name,style:{width:"2.5rem",height:"2.5rem",objectFit:"cover",borderRadius:"6px",flexShrink:0}}),E.jsxs("div",{style:{minWidth:0,flex:1},children:[E.jsx("div",{style:{fontWeight:"500",color:"#1f2937",fontSize:"0.9rem"},children:D.name}),E.jsxs("div",{style:{fontSize:"0.75rem",color:"#6b7280"},children:["מזהה: ",(T==null?void 0:T.ItemId)||(T==null?void 0:T.itemId)||"לא נמצא"]}),E.jsxs("div",{style:{fontSize:"0.7rem",color:"#059669",fontWeight:"500"},children:["מקסימום: ",R]})]})]}),E.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.4rem",flexShrink:0},children:[E.jsx("button",{onClick:()=>C(D.name,D.quantity-1),style:{background:"#ef4444",color:"white",width:"1.8rem",height:"1.8rem",borderRadius:"50%",border:"none",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},disabled:f,children:E.jsx(iU,{size:12})}),E.jsx("span",{style:{width:"1.5rem",textAlign:"center",fontWeight:"500",fontSize:"0.9rem"},children:D.quantity}),E.jsx("button",{onClick:()=>C(D.name,D.quantity+1),style:{background:D.quantity>=R?"#9ca3af":"#10b981",color:"white",width:"1.8rem",height:"1.8rem",borderRadius:"50%",border:"none",cursor:D.quantity>=R?"not-allowed":"pointer",display:"flex",alignItems:"center",justifyContent:"center"},disabled:f||D.quantity>=R,children:E.jsx(lU,{size:12})}),E.jsx("button",{onClick:()=>P(D.name),style:{background:"#ef4444",color:"white",padding:"0.2rem 0.5rem",borderRadius:"6px",border:"none",cursor:"pointer",marginRight:"0.3rem",fontSize:"0.75rem"},disabled:f,children:"הסר"})]})]},A)})}):E.jsx("div",{style:{textAlign:"center",padding:"1rem",color:"#6b7280"},children:"אין פריטים בהזמנה"})]}),E.jsxs("div",{children:[E.jsx("h4",{style:{fontSize:"1.125rem",fontWeight:"600",marginBottom:"1rem",color:"#1f2937"},children:"הוסף פריטים מהמלאי"}),E.jsx("div",{style:{marginBottom:"1rem"},children:E.jsxs("div",{style:{position:"relative"},children:[E.jsx(kS,{size:18,style:{position:"absolute",right:"0.75rem",top:"50%",transform:"translateY(-50%)",color:"#6b7280"}}),E.jsx("input",{type:"text",placeholder:"חפש פריט...",value:p,onChange:D=>g(D.target.value),style:{width:"100%",padding:"0.75rem 2.8rem 0.75rem 0.75rem",border:"1px solid #d1d5db",borderRadius:"8px",fontSize:"16px",boxSizing:"border-box"},disabled:f})]})}),E.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(160px, 1fr))",gap:"0.75rem",maxHeight:"10rem",overflowY:"auto",overflowX:"hidden"},children:Y.map((D,A)=>{var j;const T=s.items.some(H=>H.name===D.name),k=T?(j=s.items.find(H=>H.name===D.name))==null?void 0:j.quantity:0,R=w(D.name),L=k<R+k;return E.jsx("div",{onClick:()=>!f&&L&&I(D),style:{padding:"0.6rem",borderRadius:"8px",border:T?"2px solid #3b82f6":"1px solid #e5e7eb",background:T?"#eff6ff":"white",cursor:f||!L?"not-allowed":"pointer",transition:"all 0.2s",opacity:f||!L?.6:1},children:E.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[D.imageUrl&&E.jsx("img",{src:D.imageUrl,alt:D.name,style:{width:"2rem",height:"2rem",objectFit:"cover",borderRadius:"6px",flexShrink:0}}),E.jsxs("div",{style:{flex:1,minWidth:0},children:[E.jsx("div",{style:{fontWeight:"500",fontSize:"0.8rem",color:"#1f2937",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:D.name}),E.jsxs("div",{style:{fontSize:"0.7rem",color:"#6b7280"},children:["מזהה: ",D.itemId||D.ItemId]}),E.jsxs("div",{style:{fontSize:"0.65rem",color:R>0?"#059669":"#dc2626",fontWeight:"500"},children:["זמין: ",R]}),T&&E.jsxs("div",{style:{fontSize:"0.65rem",color:"#2563eb",fontWeight:"500"},children:["בהזמנה: ",k]})]})]})},A)})})]})]}),E.jsx("div",{style:{background:"#f9fafb",padding:"1rem",borderTop:"1px solid #e5e7eb",flexShrink:0},children:E.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},className:"modal-footer-mobile",children:[E.jsxs("div",{style:{fontSize:"0.875rem",color:"#4b5563"},children:['סה"כ פריטים: ',s.items.reduce((D,A)=>D+A.quantity,0)]}),E.jsxs("div",{style:{display:"flex",gap:"0.75rem"},className:"modal-footer-mobile",children:[E.jsx("button",{onClick:V,disabled:f,style:{background:"#6b7280",color:"white",padding:"0.5rem 1.5rem",borderRadius:"8px",border:"none",cursor:f?"not-allowed":"pointer",fontSize:"0.875rem",opacity:f?.6:1},children:"ביטול"}),E.jsx("button",{onClick:B,disabled:f||s.items.length===0,style:{background:s.items.length===0?"#9ca3af":"#2563eb",color:"white",padding:"0.5rem 1.5rem",borderRadius:"8px",border:"none",cursor:s.items.length===0||f?"not-allowed":"pointer",fontSize:"0.875rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:f?E.jsxs(E.Fragment,{children:[E.jsx("div",{style:{width:"1rem",height:"1rem",border:"2px solid #ffffff",borderTop:"2px solid transparent",borderRadius:"50%",animation:"spin 1s linear infinite"}}),"שומר..."]}):E.jsxs(E.Fragment,{children:[E.jsx(LS,{size:16}),"שמור שינויים"]})})]})]})})]})})]})},NU=({show:n,order:e,onClose:t,onCompleteInspection:r,allItems:i=[],updateItemQuantities:a})=>{const[o,s]=ge.useState([]),[u,f]=ge.useState(""),[h,p]=ge.useState(!1);if(ge.useEffect(()=>{if(n&&(e!=null&&e.items)){const w=e.items.map(I=>({itemId:I.id||I.itemId,name:I.name,quantityExpected:I.quantity||1,quantityReturned:I.quantity||1,isFullyReturned:!0,condition:"good",damageDescription:"",repairCost:0,notes:""}));s(w),f("")}},[n,e]),ge.useEffect(()=>(n?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[n]),!n||!e)return null;const g=(w,I,C)=>{s(P=>P.map((B,V)=>{if(V===w){const Y={...B,[I]:C};return Y.isFullyReturned=C>=B.quantityExpected,C<B.quantityExpected?Y.condition="lost":Y.condition==="lost"&&(Y.condition="good"),Y}return B}))},m=async()=>{const w=o.reduce((B,V)=>B+V.quantityExpected,0),I=o.reduce((B,V)=>B+V.quantityReturned,0);o.filter(B=>B.condition==="damaged").length,o.filter(B=>B.condition==="lost").length;const C=Math.round(I/w*100),P=`האם אתה בטוח שברצונך לסיים את בדיקת ההחזרה?

סיכום:
• פריטים שהושאלו: ${w}/${w}
• פריטים שחזרו: ${I}/${w}
• אחוז החזרה: ${C}%

ההזמנה תעבור לאיסוף ההזמנות הסגורות.`;if(window.confirm(P))try{p(!0);const B=o.reduce((A,T)=>A+T.quantityExpected,0),V=o.reduce((A,T)=>A+T.quantityReturned,0),Y=o.filter(A=>A.condition==="damaged").length,q=o.reduce((A,T)=>A+(T.repairCost||0),0),D={totalItemsExpected:B,totalItemsReturned:V,totalDamages:Y,totalRepairCost:q,managerNotes:u,customerNotified:!1,customerAgreedToCharges:!1};for(const A of o){const T=i.find(k=>k.id===A.itemId||k.name===A.name);if(T){let k=0;const R=A.quantityExpected-A.quantityReturned,L=A.condition==="damaged"?A.quantityReturned:0;k=R+L;const j=T.quantity-k,H=Math.max(0,j);console.log(`עדכון מלאי - ${T.name}:`,{originalStock:T.quantity,expectedReturn:A.quantityExpected,quantityReturned:A.quantityReturned,condition:A.condition,itemsNotReturned:R,damagedItems:L,totalToRemove:k,newStock:H}),k>0&&await Qa(Ar(kt,"items",T.id),{quantity:H,lastUpdated:Ai()})}}await r(e.id,o,D),a&&await a(),t()}catch(B){console.error("Error completing return inspection:",B),alert("שגיאה בהשלמת בדיקת החזרה. נסה שוב.")}finally{p(!1)}},x=w=>{w.target===w.currentTarget&&window.confirm("האם אתה בטוח שברצונך לסגור את חלון בדיקת החזרה?")&&t()};return E.jsxs(E.Fragment,{children:[E.jsx("style",{jsx:!0,global:!0,children:`
        .return-inspection-overlay {
          position: fixed !important;
          top: 0 !important;
          left: 0 !important;
          right: 0 !important;
          bottom: 0 !important;
          background-color: rgba(0, 0, 0, 0.7) !important;
          display: flex !important;
          align-items: flex-start !important;
          justify-content: center !important;
          padding: 0.5rem !important;
          z-index: 99999 !important;
          overflow-x: hidden !important;
          padding-top: 1rem !important;
        }
        
        .return-inspection-content {
          background: white !important;
          border-radius: 12px !important;
          box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25) !important;
          width: 100% !important;
          max-width: 56rem !important;
          max-height: 96vh !important;
          overflow: hidden !important;
          position: relative !important;
          z-index: 100000 !important;
          display: flex !important;
          flex-direction: column !important;
        }

        @media (max-width: 768px) {
          .return-inspection-overlay {
            padding: 0.25rem !important;
            padding-top: 0.5rem !important;
          }
          
          .return-inspection-content {
            max-height: 98vh !important;
            border-radius: 8px !important;
          }
          
          .footer-mobile {
            flex-direction: column !important;
            gap: 0.5rem !important;
            align-items: stretch !important;
          }
          
          .footer-mobile button {
            width: 100% !important;
          }
          
          .footer-mobile .summary-text {
            text-align: center !important;
            margin-bottom: 0.5rem !important;
          }
        }

        @keyframes spin {
          0% { transform: rotate(0deg); }
          100% { transform: rotate(360deg); }
        }
      `}),E.jsx("div",{className:"return-inspection-overlay",onClick:x,children:E.jsxs("div",{className:"return-inspection-content",dir:"rtl",onClick:w=>w.stopPropagation(),children:[E.jsx("div",{style:{background:"linear-gradient(to right, #fb923c, #f97316)",color:"white",padding:"1rem",flexShrink:0},children:E.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[E.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[E.jsx(lh,{size:24}),E.jsxs("div",{children:[E.jsx("h2",{style:{fontSize:"1.25rem",fontWeight:"bold",margin:0},children:"בדיקת החזרת מוצרים"}),E.jsxs("div",{style:{fontSize:"0.875rem",marginTop:"0.25rem",opacity:.9},children:["לקוח: ",e.clientName," • ",e.phone]})]})]}),E.jsx("button",{onClick:t,style:{background:"none",border:"none",color:"white",fontSize:"1.5rem",cursor:"pointer",padding:"0.25rem"},children:"×"})]})}),E.jsx("div",{style:{padding:"1rem",overflowY:"auto",flex:1},children:E.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:o.map((w,I)=>{var C,P;return E.jsxs("div",{style:{border:"1px solid #e5e7eb",borderRadius:"12px",padding:"1rem",background:"#ffffff",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[E.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:E.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[E.jsx("img",{src:((C=e.items.find(B=>B.id===w.itemId))==null?void 0:C.imageUrl)||"/no-image-available.png",alt:w.name,style:{width:"40px",height:"40px",objectFit:"cover",borderRadius:"8px",border:"1px solid #e5e7eb",flexShrink:0}}),E.jsxs("div",{style:{minWidth:0,flex:1},children:[E.jsx("h4",{style:{fontSize:"1rem",fontWeight:"bold",margin:0,color:"#1f2937"},children:w.name}),E.jsxs("div",{style:{fontSize:"0.75rem",color:"#6b7280",marginTop:"0.25rem"},children:["מזהה: ",w.ItemId||((P=e.items.find(B=>B.id===w.itemId))==null?void 0:P.ItemId)||w.itemId]}),E.jsxs("div",{style:{fontSize:"0.75rem",color:"#6b7280"},children:["כמות מוזמנת: ",w.quantityExpected]})]})]})}),E.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",gap:"1rem"},children:[E.jsx("span",{style:{fontSize:"0.875rem",fontWeight:"500",color:"#374151"},children:"כמות שחזרה:"}),E.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[E.jsx("button",{onClick:()=>{const B=Math.max(0,w.quantityReturned-1);g(I,"quantityReturned",B)},disabled:w.quantityReturned<=0,style:{background:w.quantityReturned<=0?"#d1d5db":"#ef4444",color:"white",border:"none",borderRadius:"50%",width:"36px",height:"36px",fontSize:"18px",fontWeight:"bold",cursor:w.quantityReturned<=0?"not-allowed":"pointer",display:"flex",alignItems:"center",justifyContent:"center",opacity:w.quantityReturned<=0?.6:1},children:"-"}),E.jsx("span",{style:{fontSize:"1.5rem",fontWeight:"bold",minWidth:"40px",textAlign:"center",color:"#1f2937"},children:w.quantityReturned}),E.jsx("button",{onClick:()=>{const B=Math.min(w.quantityExpected,w.quantityReturned+1);g(I,"quantityReturned",B)},disabled:w.quantityReturned>=w.quantityExpected,style:{background:w.quantityReturned>=w.quantityExpected?"#d1d5db":"#10b981",color:"white",border:"none",borderRadius:"50%",width:"36px",height:"36px",fontSize:"18px",fontWeight:"bold",cursor:w.quantityReturned>=w.quantityExpected?"not-allowed":"pointer",display:"flex",alignItems:"center",justifyContent:"center",opacity:w.quantityReturned>=w.quantityExpected?.6:1},children:"+"})]})]}),w.quantityReturned<w.quantityExpected&&E.jsx("div",{style:{marginTop:"0.75rem",padding:"0.5rem",background:"#fef3c7",borderRadius:"6px",textAlign:"center"},children:E.jsxs("span",{style:{fontSize:"0.875rem",color:"#92400e",fontWeight:"500"},children:["⚠️ חסרים ",w.quantityExpected-w.quantityReturned," פריטים"]})})]},I)})})}),E.jsx("div",{style:{background:"#f9fafb",padding:"1rem",borderTop:"1px solid #e5e7eb",flexShrink:0},children:E.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},className:"footer-mobile",children:[E.jsx("div",{style:{fontSize:"0.875rem",color:"#6b7280"},className:"summary-text",children:"בדיקת החזרה תעביר את ההזמנה להיסטוריה"}),E.jsxs("div",{style:{display:"flex",gap:"0.75rem"},className:"footer-mobile",children:[E.jsx("button",{onClick:t,disabled:h,style:{background:"#6b7280",color:"white",padding:"0.75rem 1.5rem",borderRadius:"8px",border:"none",cursor:h?"not-allowed":"pointer",fontSize:"0.875rem",opacity:h?.6:1},children:"ביטול"}),E.jsx("button",{onClick:m,disabled:h,style:{background:"#f59e0b",color:"white",padding:"0.75rem 1.5rem",borderRadius:"8px",border:"none",cursor:h?"not-allowed":"pointer",fontSize:"0.875rem",display:"flex",alignItems:"center",gap:"0.5rem",opacity:h?.6:1,justifyContent:"center"},children:h?E.jsxs(E.Fragment,{children:[E.jsx("div",{style:{width:"1rem",height:"1rem",border:"2px solid #ffffff",borderTop:"2px solid transparent",borderRadius:"50%",animation:"spin 1s linear infinite"}}),"מעבד..."]}):E.jsxs(E.Fragment,{children:[E.jsx(LS,{size:16}),"השלם בדיקת החזרה"]})})]})]})})]})})]})},DU=({allItems:n,itemsMap:e,events:t,setAllItems:r,setItemsMap:i,setEvents:a,fetchItemsAndOrders:o})=>{const[s,u]=ge.useState(new Date),[f,h]=ge.useState([]),[p,g]=ge.useState(!1),[m,x]=ge.useState(null),[w,I]=ge.useState(!1),[C,P]=ge.useState({open:!1,eventId:null,items:[]}),[B,V]=ge.useState({show:!1,order:null}),Y=async A=>{try{const T=t.filter(k=>k.orderId===A);if(T.length>0){const k={id:A,clientName:T[0].clientName,phone:T[0].phone,items:T[0].items,pickupDate:T[0].pickupDate,returnDate:T[0].returnDate};V({show:!0,order:k}),g(!1)}}catch(T){console.error("Error initializing return inspection:",T),alert("שגיאה בהתחלת בדיקת החזרה. נסה שוב.")}},q=async A=>{try{const T={status:"closed","returnInspection.inspectionStatus":"completed","returnInspection.inspectedBy":"סגירה ידנית","returnInspection.inspectionDate":Ai(),"returnInspection.managerNotes":"הזמנה נסגרה ידנית על ידי המנהל","returnInspection.totalItemsReturned":0,"returnInspection.totalDamages":0,"returnInspection.totalRepairCost":0,closedAt:Ai(),manuallyClosedAt:Ai()};await Qa(Ar(kt,"orders",A),T),await o(),g(!1),alert("ההזמנה נסגרה ידנית והועברה להיסטוריה!")}catch(T){console.error("Error manually closing order:",T),alert("שגיאה בסגירת ההזמנה. נסה שוב.")}},D=async(A,T,k)=>{try{const R={status:"closed",returnInspection:{inspectionStatus:"completed",inspectedBy:"מנהל המערכת",inspectionDate:Ai(),itemInspections:T.map(L=>({itemId:L.itemId,name:L.name,quantityExpected:L.quantityExpected,quantityReturned:L.quantityReturned,condition:L.condition,damageDescription:L.damageDescription||"",repairCost:L.repairCost||0,notes:L.notes||"",inspectedAt:new Date().toISOString()})),totalItemsReturned:k.totalItemsReturned,totalItemsExpected:k.totalItemsExpected,totalDamages:k.totalDamages,totalRepairCost:k.totalRepairCost,managerNotes:k.managerNotes,customerNotified:k.customerNotified,customerAgreedToCharges:k.customerAgreedToCharges},closedAt:Ai()};await Qa(Ar(kt,"orders",A),R),await o(),V({show:!1,order:null}),alert("בדיקת החזרה הושלמה בהצלחה! ההזמנה הועברה להיסטוריה.")}catch(R){console.error("Error completing return inspection:",R),alert("שגיאה בהשלמת בדיקת החזרה. נסה שוב.")}};return E.jsxs("div",{className:"mt-6",children:[E.jsx(CU,{currentDate:s,events:t,setCurrentDate:u,setSelectedEvents:h,setSelectedDate:x,setShowReport:g}),E.jsx(TU,{show:p,selectedDate:m,selectedEvents:f,allItems:n,setShowReport:g,setShowItemsModal:I,setEditItemModal:P,fetchItemsAndOrders:o,onStartReturnInspection:Y,onCloseOrderManually:q}),E.jsx(IU,{show:!!w,setShow:()=>I(!1),selectedEvents:w,allItems:n}),E.jsx(RU,{show:C.open,data:C,setData:P,allItems:n,setShowReport:g,fetchItemsAndOrders:o,allEvents:t}),E.jsx(NU,{show:B.show,order:B.order,onClose:()=>V({show:!1,order:null}),onCompleteInspection:D,allItems:n,updateItemQuantities:o})]})},s4=n=>{const e=new Date(n);return e.setHours(0,0,0,0),e},OU=async(n,e)=>{const t=s4(new Date);for(const r of n.docs){const i=r.data();!i.pickupDate||i.stockUpdated||s4(new Date(i.pickupDate))>t||await Qa(Ar(e,"orders",r.id),{stockUpdated:!0})}},PU=(n,e)=>n.docs.flatMap(t=>{const r=t.data();if(r.status==="closed")return[];const i=(o=[])=>o.map(s=>{const u=e.find(f=>f.id===s.id);return{...s,imageUrl:(u==null?void 0:u.imageUrl)||null,itemId:(u==null?void 0:u.itemId)||"לא נמצא"}}),a=[];if(r.pickupDate&&r.returnDate){const o=new Date(r.pickupDate),s=new Date(r.returnDate);o.setHours(0,0,0,0),s.setHours(0,0,0,0);const u=Math.ceil((s-o)/(1e3*60*60*24));for(let f=0;f<=u;f++){if(f!==0&&f!==u)continue;const h=new Date(o);h.setDate(o.getDate()+f);let p,g,m;f===0?(p="השאלה",g="📦",m="איסוף מוצרים"):f===u&&(p="החזרה",g="🔄",m="החזרת מוצרים"),a.push({id:`${t.id}-${h.toISOString().slice(0,10)}`,orderId:t.id,date:new Date(h),clientName:r.clientName,phone:r.phone,type:p,icon:g,description:m,items:i(r.items),pickupDate:r.pickupDate,returnDate:r.returnDate,dayNumber:f+1,totalDays:u+1,isMultiDay:u>0})}}return a}),LU=async(n,e,t,r)=>{try{const a=(await yr(On(n,"items"))).docs.map(f=>{const h=f.data();return{id:f.id,itemId:h.ItemId,name:h.name,imageUrl:h.imageUrl,quantity:h.quantity||0,isDeleted:h.isDeleted||!1}}).filter(f=>!f.isDeleted);console.log("📊 Items loaded with quantities:",a.map(f=>({name:f.name,quantity:f.quantity}))),e(a);const o={};a.forEach(f=>{o[f.name]=f.imageUrl||null}),t(o);const s=await yr(On(n,"orders"));await OU(s,n);const u=PU(s,a);r(u)}catch(i){console.error("שגיאה בטעינת ההזמנות והפריטים:",i)}},kU=()=>{const[n,e]=ge.useState([]),[t,r]=ge.useState({}),[i,a]=ge.useState([]),[o,s]=ge.useState(!0),[u,f]=ge.useState(null),h=async()=>{try{s(!0),f(null),await LU(kt,e,r,a)}catch(p){console.error("Error fetching calendar data:",p),f("שגיאה בטעינת נתוני היומן. אנא נסה שוב.")}finally{s(!1)}};return ge.useEffect(()=>{h()},[]),o?E.jsx("div",{className:"flex justify-center items-center min-h-screen",children:E.jsxs("div",{className:"text-center",children:[E.jsx("div",{className:"spinner-border animate-spin inline-block w-8 h-8 border-4 rounded-full border-blue-600 border-t-transparent"}),E.jsx("p",{className:"mt-4 text-gray-600",children:"טוען נתוני יומן..."})]})}):u?E.jsx("div",{className:"flex justify-center items-center min-h-screen",children:E.jsxs("div",{className:"text-center",children:[E.jsx("p",{className:"text-red-600 mb-4",children:u}),E.jsx("button",{onClick:h,className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"נסה שוב"})]})}):E.jsx("div",{className:"container mx-auto px-4",children:E.jsx(DU,{allItems:n,itemsMap:t,events:i,setAllItems:e,setItemsMap:r,setEvents:a,fetchItemsAndOrders:h})})};function FS(n){var e,t,r="";if(typeof n=="string"||typeof n=="number")r+=n;else if(typeof n=="object")if(Array.isArray(n)){var i=n.length;for(e=0;e<i;e++)n[e]&&(t=FS(n[e]))&&(r&&(r+=" "),r+=t)}else for(t in n)n[t]&&(r&&(r+=" "),r+=t);return r}function Jf(){for(var n,e,t=0,r="",i=arguments.length;t<i;t++)(n=arguments[t])&&(e=FS(n))&&(r&&(r+=" "),r+=e);return r}function MU(n){if(typeof document>"u")return;let e=document.head||document.getElementsByTagName("head")[0],t=document.createElement("style");t.type="text/css",e.firstChild?e.insertBefore(t,e.firstChild):e.appendChild(t),t.styleSheet?t.styleSheet.cssText=n:t.appendChild(document.createTextNode(n))}MU(`:root{--toastify-color-light: #fff;--toastify-color-dark: #121212;--toastify-color-info: #3498db;--toastify-color-success: #07bc0c;--toastify-color-warning: #f1c40f;--toastify-color-error: hsl(6, 78%, 57%);--toastify-color-transparent: rgba(255, 255, 255, .7);--toastify-icon-color-info: var(--toastify-color-info);--toastify-icon-color-success: var(--toastify-color-success);--toastify-icon-color-warning: var(--toastify-color-warning);--toastify-icon-color-error: var(--toastify-color-error);--toastify-container-width: fit-content;--toastify-toast-width: 320px;--toastify-toast-offset: 16px;--toastify-toast-top: max(var(--toastify-toast-offset), env(safe-area-inset-top));--toastify-toast-right: max(var(--toastify-toast-offset), env(safe-area-inset-right));--toastify-toast-left: max(var(--toastify-toast-offset), env(safe-area-inset-left));--toastify-toast-bottom: max(var(--toastify-toast-offset), env(safe-area-inset-bottom));--toastify-toast-background: #fff;--toastify-toast-padding: 14px;--toastify-toast-min-height: 64px;--toastify-toast-max-height: 800px;--toastify-toast-bd-radius: 6px;--toastify-toast-shadow: 0px 4px 12px rgba(0, 0, 0, .1);--toastify-font-family: sans-serif;--toastify-z-index: 9999;--toastify-text-color-light: #757575;--toastify-text-color-dark: #fff;--toastify-text-color-info: #fff;--toastify-text-color-success: #fff;--toastify-text-color-warning: #fff;--toastify-text-color-error: #fff;--toastify-spinner-color: #616161;--toastify-spinner-color-empty-area: #e0e0e0;--toastify-color-progress-light: linear-gradient(to right, #4cd964, #5ac8fa, #007aff, #34aadc, #5856d6, #ff2d55);--toastify-color-progress-dark: #bb86fc;--toastify-color-progress-info: var(--toastify-color-info);--toastify-color-progress-success: var(--toastify-color-success);--toastify-color-progress-warning: var(--toastify-color-warning);--toastify-color-progress-error: var(--toastify-color-error);--toastify-color-progress-bgo: .2}.Toastify__toast-container{z-index:var(--toastify-z-index);-webkit-transform:translate3d(0,0,var(--toastify-z-index));position:fixed;width:var(--toastify-container-width);box-sizing:border-box;color:#fff;display:flex;flex-direction:column}.Toastify__toast-container--top-left{top:var(--toastify-toast-top);left:var(--toastify-toast-left)}.Toastify__toast-container--top-center{top:var(--toastify-toast-top);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--top-right{top:var(--toastify-toast-top);right:var(--toastify-toast-right);align-items:end}.Toastify__toast-container--bottom-left{bottom:var(--toastify-toast-bottom);left:var(--toastify-toast-left)}.Toastify__toast-container--bottom-center{bottom:var(--toastify-toast-bottom);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--bottom-right{bottom:var(--toastify-toast-bottom);right:var(--toastify-toast-right);align-items:end}.Toastify__toast{--y: 0;position:relative;touch-action:none;width:var(--toastify-toast-width);min-height:var(--toastify-toast-min-height);box-sizing:border-box;margin-bottom:1rem;padding:var(--toastify-toast-padding);border-radius:var(--toastify-toast-bd-radius);box-shadow:var(--toastify-toast-shadow);max-height:var(--toastify-toast-max-height);font-family:var(--toastify-font-family);z-index:0;display:flex;flex:1 auto;align-items:center;word-break:break-word}@media only screen and (max-width: 480px){.Toastify__toast-container{width:100vw;left:env(safe-area-inset-left);margin:0}.Toastify__toast-container--top-left,.Toastify__toast-container--top-center,.Toastify__toast-container--top-right{top:env(safe-area-inset-top);transform:translate(0)}.Toastify__toast-container--bottom-left,.Toastify__toast-container--bottom-center,.Toastify__toast-container--bottom-right{bottom:env(safe-area-inset-bottom);transform:translate(0)}.Toastify__toast-container--rtl{right:env(safe-area-inset-right);left:initial}.Toastify__toast{--toastify-toast-width: 100%;margin-bottom:0;border-radius:0}}.Toastify__toast-container[data-stacked=true]{width:var(--toastify-toast-width)}.Toastify__toast--stacked{position:absolute;width:100%;transform:translate3d(0,var(--y),0) scale(var(--s));transition:transform .3s}.Toastify__toast--stacked[data-collapsed] .Toastify__toast-body,.Toastify__toast--stacked[data-collapsed] .Toastify__close-button{transition:opacity .1s}.Toastify__toast--stacked[data-collapsed=false]{overflow:visible}.Toastify__toast--stacked[data-collapsed=true]:not(:last-child)>*{opacity:0}.Toastify__toast--stacked:after{content:"";position:absolute;left:0;right:0;height:calc(var(--g) * 1px);bottom:100%}.Toastify__toast--stacked[data-pos=top]{top:0}.Toastify__toast--stacked[data-pos=bot]{bottom:0}.Toastify__toast--stacked[data-pos=bot].Toastify__toast--stacked:before{transform-origin:top}.Toastify__toast--stacked[data-pos=top].Toastify__toast--stacked:before{transform-origin:bottom}.Toastify__toast--stacked:before{content:"";position:absolute;left:0;right:0;bottom:0;height:100%;transform:scaleY(3);z-index:-1}.Toastify__toast--rtl{direction:rtl}.Toastify__toast--close-on-click{cursor:pointer}.Toastify__toast-icon{margin-inline-end:10px;width:22px;flex-shrink:0;display:flex}.Toastify--animate{animation-fill-mode:both;animation-duration:.5s}.Toastify--animate-icon{animation-fill-mode:both;animation-duration:.3s}.Toastify__toast-theme--dark{background:var(--toastify-color-dark);color:var(--toastify-text-color-dark)}.Toastify__toast-theme--light,.Toastify__toast-theme--colored.Toastify__toast--default{background:var(--toastify-color-light);color:var(--toastify-text-color-light)}.Toastify__toast-theme--colored.Toastify__toast--info{color:var(--toastify-text-color-info);background:var(--toastify-color-info)}.Toastify__toast-theme--colored.Toastify__toast--success{color:var(--toastify-text-color-success);background:var(--toastify-color-success)}.Toastify__toast-theme--colored.Toastify__toast--warning{color:var(--toastify-text-color-warning);background:var(--toastify-color-warning)}.Toastify__toast-theme--colored.Toastify__toast--error{color:var(--toastify-text-color-error);background:var(--toastify-color-error)}.Toastify__progress-bar-theme--light{background:var(--toastify-color-progress-light)}.Toastify__progress-bar-theme--dark{background:var(--toastify-color-progress-dark)}.Toastify__progress-bar--info{background:var(--toastify-color-progress-info)}.Toastify__progress-bar--success{background:var(--toastify-color-progress-success)}.Toastify__progress-bar--warning{background:var(--toastify-color-progress-warning)}.Toastify__progress-bar--error{background:var(--toastify-color-progress-error)}.Toastify__progress-bar-theme--colored.Toastify__progress-bar--info,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--success,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--warning,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--error{background:var(--toastify-color-transparent)}.Toastify__close-button{color:#fff;position:absolute;top:6px;right:6px;background:transparent;outline:none;border:none;padding:0;cursor:pointer;opacity:.7;transition:.3s ease;z-index:1}.Toastify__toast--rtl .Toastify__close-button{left:6px;right:unset}.Toastify__close-button--light{color:#000;opacity:.3}.Toastify__close-button>svg{fill:currentColor;height:16px;width:14px}.Toastify__close-button:hover,.Toastify__close-button:focus{opacity:1}@keyframes Toastify__trackProgress{0%{transform:scaleX(1)}to{transform:scaleX(0)}}.Toastify__progress-bar{position:absolute;bottom:0;left:0;width:100%;height:100%;z-index:1;opacity:.7;transform-origin:left}.Toastify__progress-bar--animated{animation:Toastify__trackProgress linear 1 forwards}.Toastify__progress-bar--controlled{transition:transform .2s}.Toastify__progress-bar--rtl{right:0;left:initial;transform-origin:right;border-bottom-left-radius:initial}.Toastify__progress-bar--wrp{position:absolute;overflow:hidden;bottom:0;left:0;width:100%;height:5px;border-bottom-left-radius:var(--toastify-toast-bd-radius);border-bottom-right-radius:var(--toastify-toast-bd-radius)}.Toastify__progress-bar--wrp[data-hidden=true]{opacity:0}.Toastify__progress-bar--bg{opacity:var(--toastify-color-progress-bgo);width:100%;height:100%}.Toastify__spinner{width:20px;height:20px;box-sizing:border-box;border:2px solid;border-radius:100%;border-color:var(--toastify-spinner-color-empty-area);border-right-color:var(--toastify-spinner-color);animation:Toastify__spin .65s linear infinite}@keyframes Toastify__bounceInRight{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(3000px,0,0)}60%{opacity:1;transform:translate3d(-25px,0,0)}75%{transform:translate3d(10px,0,0)}90%{transform:translate3d(-5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutRight{20%{opacity:1;transform:translate3d(-20px,var(--y),0)}to{opacity:0;transform:translate3d(2000px,var(--y),0)}}@keyframes Toastify__bounceInLeft{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(-3000px,0,0)}60%{opacity:1;transform:translate3d(25px,0,0)}75%{transform:translate3d(-10px,0,0)}90%{transform:translate3d(5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutLeft{20%{opacity:1;transform:translate3d(20px,var(--y),0)}to{opacity:0;transform:translate3d(-2000px,var(--y),0)}}@keyframes Toastify__bounceInUp{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,3000px,0)}60%{opacity:1;transform:translate3d(0,-20px,0)}75%{transform:translate3d(0,10px,0)}90%{transform:translate3d(0,-5px,0)}to{transform:translateZ(0)}}@keyframes Toastify__bounceOutUp{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,-2000px,0)}}@keyframes Toastify__bounceInDown{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,-3000px,0)}60%{opacity:1;transform:translate3d(0,25px,0)}75%{transform:translate3d(0,-10px,0)}90%{transform:translate3d(0,5px,0)}to{transform:none}}@keyframes Toastify__bounceOutDown{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,2000px,0)}}.Toastify__bounce-enter--top-left,.Toastify__bounce-enter--bottom-left{animation-name:Toastify__bounceInLeft}.Toastify__bounce-enter--top-right,.Toastify__bounce-enter--bottom-right{animation-name:Toastify__bounceInRight}.Toastify__bounce-enter--top-center{animation-name:Toastify__bounceInDown}.Toastify__bounce-enter--bottom-center{animation-name:Toastify__bounceInUp}.Toastify__bounce-exit--top-left,.Toastify__bounce-exit--bottom-left{animation-name:Toastify__bounceOutLeft}.Toastify__bounce-exit--top-right,.Toastify__bounce-exit--bottom-right{animation-name:Toastify__bounceOutRight}.Toastify__bounce-exit--top-center{animation-name:Toastify__bounceOutUp}.Toastify__bounce-exit--bottom-center{animation-name:Toastify__bounceOutDown}@keyframes Toastify__zoomIn{0%{opacity:0;transform:scale3d(.3,.3,.3)}50%{opacity:1}}@keyframes Toastify__zoomOut{0%{opacity:1}50%{opacity:0;transform:translate3d(0,var(--y),0) scale3d(.3,.3,.3)}to{opacity:0}}.Toastify__zoom-enter{animation-name:Toastify__zoomIn}.Toastify__zoom-exit{animation-name:Toastify__zoomOut}@keyframes Toastify__flipIn{0%{transform:perspective(400px) rotateX(90deg);animation-timing-function:ease-in;opacity:0}40%{transform:perspective(400px) rotateX(-20deg);animation-timing-function:ease-in}60%{transform:perspective(400px) rotateX(10deg);opacity:1}80%{transform:perspective(400px) rotateX(-5deg)}to{transform:perspective(400px)}}@keyframes Toastify__flipOut{0%{transform:translate3d(0,var(--y),0) perspective(400px)}30%{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(-20deg);opacity:1}to{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(90deg);opacity:0}}.Toastify__flip-enter{animation-name:Toastify__flipIn}.Toastify__flip-exit{animation-name:Toastify__flipOut}@keyframes Toastify__slideInRight{0%{transform:translate3d(110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInLeft{0%{transform:translate3d(-110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInUp{0%{transform:translate3d(0,110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInDown{0%{transform:translate3d(0,-110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideOutRight{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(110%,var(--y),0)}}@keyframes Toastify__slideOutLeft{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(-110%,var(--y),0)}}@keyframes Toastify__slideOutDown{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,500px,0)}}@keyframes Toastify__slideOutUp{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,-500px,0)}}.Toastify__slide-enter--top-left,.Toastify__slide-enter--bottom-left{animation-name:Toastify__slideInLeft}.Toastify__slide-enter--top-right,.Toastify__slide-enter--bottom-right{animation-name:Toastify__slideInRight}.Toastify__slide-enter--top-center{animation-name:Toastify__slideInDown}.Toastify__slide-enter--bottom-center{animation-name:Toastify__slideInUp}.Toastify__slide-exit--top-left,.Toastify__slide-exit--bottom-left{animation-name:Toastify__slideOutLeft;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-right,.Toastify__slide-exit--bottom-right{animation-name:Toastify__slideOutRight;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-center{animation-name:Toastify__slideOutUp;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--bottom-center{animation-name:Toastify__slideOutDown;animation-timing-function:ease-in;animation-duration:.3s}@keyframes Toastify__spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}
`);var C0=n=>typeof n=="number"&&!isNaN(n),uh=n=>typeof n=="string",ec=n=>typeof n=="function",BU=n=>uh(n)||C0(n),Oy=n=>uh(n)||ec(n)?n:null,jU=(n,e)=>n===!1||C0(n)&&n>0?n:e,Py=n=>ge.isValidElement(n)||uh(n)||ec(n)||C0(n);function FU(n,e,t=300){let{scrollHeight:r,style:i}=n;requestAnimationFrame(()=>{i.minHeight="initial",i.height=r+"px",i.transition=`all ${t}ms`,requestAnimationFrame(()=>{i.height="0",i.padding="0",i.margin="0",setTimeout(e,t)})})}function UU({enter:n,exit:e,appendPosition:t=!1,collapse:r=!0,collapseDuration:i=300}){return function({children:a,position:o,preventExitTransition:s,done:u,nodeRef:f,isIn:h,playToast:p}){let g=t?`${n}--${o}`:n,m=t?`${e}--${o}`:e,x=ge.useRef(0);return ge.useLayoutEffect(()=>{let w=f.current,I=g.split(" "),C=P=>{P.target===f.current&&(p(),w.removeEventListener("animationend",C),w.removeEventListener("animationcancel",C),x.current===0&&P.type!=="animationcancel"&&w.classList.remove(...I))};w.classList.add(...I),w.addEventListener("animationend",C),w.addEventListener("animationcancel",C)},[]),ge.useEffect(()=>{let w=f.current,I=()=>{w.removeEventListener("animationend",I),r?FU(w,u,i):u()};h||(s?I():(x.current=1,w.className+=` ${m}`,w.addEventListener("animationend",I)))},[h]),kn.createElement(kn.Fragment,null,a)}}function l4(n,e){return{content:US(n.content,n.props),containerId:n.props.containerId,id:n.props.toastId,theme:n.props.theme,type:n.props.type,data:n.props.data||{},isLoading:n.props.isLoading,icon:n.props.icon,reason:n.removalReason,status:e}}function US(n,e,t=!1){return ge.isValidElement(n)&&!uh(n.type)?ge.cloneElement(n,{closeToast:e.closeToast,toastProps:e,data:e.data,isPaused:t}):ec(n)?n({closeToast:e.closeToast,toastProps:e,data:e.data,isPaused:t}):n}function VU({closeToast:n,theme:e,ariaLabel:t="close"}){return kn.createElement("button",{className:`Toastify__close-button Toastify__close-button--${e}`,type:"button",onClick:r=>{r.stopPropagation(),n(!0)},"aria-label":t},kn.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},kn.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}function zU({delay:n,isRunning:e,closeToast:t,type:r="default",hide:i,className:a,controlledProgress:o,progress:s,rtl:u,isIn:f,theme:h}){let p=i||o&&s===0,g={animationDuration:`${n}ms`,animationPlayState:e?"running":"paused"};o&&(g.transform=`scaleX(${s})`);let m=Jf("Toastify__progress-bar",o?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated",`Toastify__progress-bar-theme--${h}`,`Toastify__progress-bar--${r}`,{"Toastify__progress-bar--rtl":u}),x=ec(a)?a({rtl:u,type:r,defaultClassName:m}):Jf(m,a),w={[o&&s>=1?"onTransitionEnd":"onAnimationEnd"]:o&&s<1?null:()=>{f&&t()}};return kn.createElement("div",{className:"Toastify__progress-bar--wrp","data-hidden":p},kn.createElement("div",{className:`Toastify__progress-bar--bg Toastify__progress-bar-theme--${h} Toastify__progress-bar--${r}`}),kn.createElement("div",{role:"progressbar","aria-hidden":p?"true":"false","aria-label":"notification timer",className:x,style:g,...w}))}var qU=1,VS=()=>`${qU++}`;function HU(n,e,t){let r=1,i=0,a=[],o=[],s=e,u=new Map,f=new Set,h=P=>(f.add(P),()=>f.delete(P)),p=()=>{o=Array.from(u.values()),f.forEach(P=>P())},g=({containerId:P,toastId:B,updateId:V})=>{let Y=P?P!==n:n!==1,q=u.has(B)&&V==null;return Y||q},m=(P,B)=>{u.forEach(V=>{var Y;(B==null||B===V.props.toastId)&&((Y=V.toggle)==null||Y.call(V,P))})},x=P=>{var B,V;(V=(B=P.props)==null?void 0:B.onClose)==null||V.call(B,P.removalReason),P.isActive=!1},w=P=>{if(P==null)u.forEach(x);else{let B=u.get(P);B&&x(B)}p()},I=()=>{i-=a.length,a=[]},C=P=>{var B,V;let{toastId:Y,updateId:q}=P.props,D=q==null;P.staleId&&u.delete(P.staleId),P.isActive=!0,u.set(Y,P),p(),t(l4(P,D?"added":"updated")),D&&((V=(B=P.props).onOpen)==null||V.call(B))};return{id:n,props:s,observe:h,toggle:m,removeToast:w,toasts:u,clearQueue:I,buildToast:(P,B)=>{if(g(B))return;let{toastId:V,updateId:Y,data:q,staleId:D,delay:A}=B,T=Y==null;T&&i++;let k={...s,style:s.toastStyle,key:r++,...Object.fromEntries(Object.entries(B).filter(([L,j])=>j!=null)),toastId:V,updateId:Y,data:q,isIn:!1,className:Oy(B.className||s.toastClassName),progressClassName:Oy(B.progressClassName||s.progressClassName),autoClose:B.isLoading?!1:jU(B.autoClose,s.autoClose),closeToast(L){u.get(V).removalReason=L,w(V)},deleteToast(){let L=u.get(V);if(L!=null){if(t(l4(L,"removed")),u.delete(V),i--,i<0&&(i=0),a.length>0){C(a.shift());return}p()}}};k.closeButton=s.closeButton,B.closeButton===!1||Py(B.closeButton)?k.closeButton=B.closeButton:B.closeButton===!0&&(k.closeButton=Py(s.closeButton)?s.closeButton:!0);let R={content:P,props:k,staleId:D};s.limit&&s.limit>0&&i>s.limit&&T?a.push(R):C0(A)?setTimeout(()=>{C(R)},A):C(R)},setProps(P){s=P},setToggle:(P,B)=>{let V=u.get(P);V&&(V.toggle=B)},isToastActive:P=>{var B;return(B=u.get(P))==null?void 0:B.isActive},getSnapshot:()=>o}}var Ka=new Map,s0=[],Ly=new Set,WU=n=>Ly.forEach(e=>e(n)),zS=()=>Ka.size>0;function GU(){s0.forEach(n=>HS(n.content,n.options)),s0=[]}var $U=(n,{containerId:e})=>{var t;return(t=Ka.get(e||1))==null?void 0:t.toasts.get(n)};function qS(n,e){var t;if(e)return!!((t=Ka.get(e))!=null&&t.isToastActive(n));let r=!1;return Ka.forEach(i=>{i.isToastActive(n)&&(r=!0)}),r}function XU(n){if(!zS()){s0=s0.filter(e=>n!=null&&e.options.toastId!==n);return}if(n==null||BU(n))Ka.forEach(e=>{e.removeToast(n)});else if(n&&("containerId"in n||"id"in n)){let e=Ka.get(n.containerId);e?e.removeToast(n.id):Ka.forEach(t=>{t.removeToast(n.id)})}}var YU=(n={})=>{Ka.forEach(e=>{e.props.limit&&(!n.containerId||e.id===n.containerId)&&e.clearQueue()})};function HS(n,e){Py(n)&&(zS()||s0.push({content:n,options:e}),Ka.forEach(t=>{t.buildToast(n,e)}))}function KU(n){var e;(e=Ka.get(n.containerId||1))==null||e.setToggle(n.id,n.fn)}function WS(n,e){Ka.forEach(t=>{(e==null||!(e!=null&&e.containerId)||(e==null?void 0:e.containerId)===t.id)&&t.toggle(n,e==null?void 0:e.id)})}function QU(n){let e=n.containerId||1;return{subscribe(t){let r=HU(e,n,WU);Ka.set(e,r);let i=r.observe(t);return GU(),()=>{i(),Ka.delete(e)}},setProps(t){var r;(r=Ka.get(e))==null||r.setProps(t)},getSnapshot(){var t;return(t=Ka.get(e))==null?void 0:t.getSnapshot()}}}function ZU(n){return Ly.add(n),()=>{Ly.delete(n)}}function JU(n){return n&&(uh(n.toastId)||C0(n.toastId))?n.toastId:VS()}function T0(n,e){return HS(n,e),e.toastId}function Pm(n,e){return{...e,type:e&&e.type||n,toastId:JU(e)}}function Lm(n){return(e,t)=>T0(e,Pm(n,t))}function mn(n,e){return T0(n,Pm("default",e))}mn.loading=(n,e)=>T0(n,Pm("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...e}));function eV(n,{pending:e,error:t,success:r},i){let a;e&&(a=uh(e)?mn.loading(e,i):mn.loading(e.render,{...i,...e}));let o={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},s=(f,h,p)=>{if(h==null){mn.dismiss(a);return}let g={type:f,...o,...i,data:p},m=uh(h)?{render:h}:h;return a?mn.update(a,{...g,...m}):mn(m.render,{...g,...m}),p},u=ec(n)?n():n;return u.then(f=>s("success",r,f)).catch(f=>s("error",t,f)),u}mn.promise=eV;mn.success=Lm("success");mn.info=Lm("info");mn.error=Lm("error");mn.warning=Lm("warning");mn.warn=mn.warning;mn.dark=(n,e)=>T0(n,Pm("default",{theme:"dark",...e}));function tV(n){XU(n)}mn.dismiss=tV;mn.clearWaitingQueue=YU;mn.isActive=qS;mn.update=(n,e={})=>{let t=$U(n,e);if(t){let{props:r,content:i}=t,a={delay:100,...r,...e,toastId:e.toastId||n,updateId:VS()};a.toastId!==n&&(a.staleId=n);let o=a.render||i;delete a.render,T0(o,a)}};mn.done=n=>{mn.update(n,{progress:1})};mn.onChange=ZU;mn.play=n=>WS(!0,n);mn.pause=n=>WS(!1,n);function nV(n){var e;let{subscribe:t,getSnapshot:r,setProps:i}=ge.useRef(QU(n)).current;i(n);let a=(e=ge.useSyncExternalStore(t,r,r))==null?void 0:e.slice();function o(s){if(!a)return[];let u=new Map;return n.newestOnTop&&a.reverse(),a.forEach(f=>{let{position:h}=f.props;u.has(h)||u.set(h,[]),u.get(h).push(f)}),Array.from(u,f=>s(f[0],f[1]))}return{getToastToRender:o,isToastActive:qS,count:a==null?void 0:a.length}}function rV(n){let[e,t]=ge.useState(!1),[r,i]=ge.useState(!1),a=ge.useRef(null),o=ge.useRef({start:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,didMove:!1}).current,{autoClose:s,pauseOnHover:u,closeToast:f,onClick:h,closeOnClick:p}=n;KU({id:n.toastId,containerId:n.containerId,fn:t}),ge.useEffect(()=>{if(n.pauseOnFocusLoss)return g(),()=>{m()}},[n.pauseOnFocusLoss]);function g(){document.hasFocus()||C(),window.addEventListener("focus",I),window.addEventListener("blur",C)}function m(){window.removeEventListener("focus",I),window.removeEventListener("blur",C)}function x(D){if(n.draggable===!0||n.draggable===D.pointerType){P();let A=a.current;o.canCloseOnClick=!0,o.canDrag=!0,A.style.transition="none",n.draggableDirection==="x"?(o.start=D.clientX,o.removalDistance=A.offsetWidth*(n.draggablePercent/100)):(o.start=D.clientY,o.removalDistance=A.offsetHeight*(n.draggablePercent===80?n.draggablePercent*1.5:n.draggablePercent)/100)}}function w(D){let{top:A,bottom:T,left:k,right:R}=a.current.getBoundingClientRect();D.nativeEvent.type!=="touchend"&&n.pauseOnHover&&D.clientX>=k&&D.clientX<=R&&D.clientY>=A&&D.clientY<=T?C():I()}function I(){t(!0)}function C(){t(!1)}function P(){o.didMove=!1,document.addEventListener("pointermove",V),document.addEventListener("pointerup",Y)}function B(){document.removeEventListener("pointermove",V),document.removeEventListener("pointerup",Y)}function V(D){let A=a.current;if(o.canDrag&&A){o.didMove=!0,e&&C(),n.draggableDirection==="x"?o.delta=D.clientX-o.start:o.delta=D.clientY-o.start,o.start!==D.clientX&&(o.canCloseOnClick=!1);let T=n.draggableDirection==="x"?`${o.delta}px, var(--y)`:`0, calc(${o.delta}px + var(--y))`;A.style.transform=`translate3d(${T},0)`,A.style.opacity=`${1-Math.abs(o.delta/o.removalDistance)}`}}function Y(){B();let D=a.current;if(o.canDrag&&o.didMove&&D){if(o.canDrag=!1,Math.abs(o.delta)>o.removalDistance){i(!0),n.closeToast(!0),n.collapseAll();return}D.style.transition="transform 0.2s, opacity 0.2s",D.style.removeProperty("transform"),D.style.removeProperty("opacity")}}let q={onPointerDown:x,onPointerUp:w};return s&&u&&(q.onMouseEnter=C,n.stacked||(q.onMouseLeave=I)),p&&(q.onClick=D=>{h&&h(D),o.canCloseOnClick&&f(!0)}),{playToast:I,pauseToast:C,isRunning:e,preventExitTransition:r,toastRef:a,eventHandlers:q}}var iV=typeof window<"u"?ge.useLayoutEffect:ge.useEffect,km=({theme:n,type:e,isLoading:t,...r})=>kn.createElement("svg",{viewBox:"0 0 24 24",width:"100%",height:"100%",fill:n==="colored"?"currentColor":`var(--toastify-icon-color-${e})`,...r});function aV(n){return kn.createElement(km,{...n},kn.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))}function oV(n){return kn.createElement(km,{...n},kn.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))}function sV(n){return kn.createElement(km,{...n},kn.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))}function lV(n){return kn.createElement(km,{...n},kn.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))}function uV(){return kn.createElement("div",{className:"Toastify__spinner"})}var ky={info:oV,warning:aV,success:sV,error:lV,spinner:uV},cV=n=>n in ky;function fV({theme:n,type:e,isLoading:t,icon:r}){let i=null,a={theme:n,type:e};return r===!1||(ec(r)?i=r({...a,isLoading:t}):ge.isValidElement(r)?i=ge.cloneElement(r,a):t?i=ky.spinner():cV(e)&&(i=ky[e](a))),i}var hV=n=>{let{isRunning:e,preventExitTransition:t,toastRef:r,eventHandlers:i,playToast:a}=rV(n),{closeButton:o,children:s,autoClose:u,onClick:f,type:h,hideProgressBar:p,closeToast:g,transition:m,position:x,className:w,style:I,progressClassName:C,updateId:P,role:B,progress:V,rtl:Y,toastId:q,deleteToast:D,isIn:A,isLoading:T,closeOnClick:k,theme:R,ariaLabel:L}=n,j=Jf("Toastify__toast",`Toastify__toast-theme--${R}`,`Toastify__toast--${h}`,{"Toastify__toast--rtl":Y},{"Toastify__toast--close-on-click":k}),H=ec(w)?w({rtl:Y,position:x,type:h,defaultClassName:j}):Jf(j,w),ne=fV(n),U=!!V||!u,z={closeToast:g,type:h,theme:R},ee=null;return o===!1||(ec(o)?ee=o(z):ge.isValidElement(o)?ee=ge.cloneElement(o,z):ee=VU(z)),kn.createElement(m,{isIn:A,done:D,position:x,preventExitTransition:t,nodeRef:r,playToast:a},kn.createElement("div",{id:q,tabIndex:0,onClick:f,"data-in":A,className:H,...i,style:I,ref:r,...A&&{role:B,"aria-label":L}},ne!=null&&kn.createElement("div",{className:Jf("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!T})},ne),US(s,n,!e),ee,!n.customProgressBar&&kn.createElement(zU,{...P&&!U?{key:`p-${P}`}:{},rtl:Y,theme:R,delay:u,isRunning:e,isIn:A,closeToast:g,hide:p,type:h,className:C,controlledProgress:U,progress:V||0})))},dV=(n,e=!1)=>({enter:`Toastify--animate Toastify__${n}-enter`,exit:`Toastify--animate Toastify__${n}-exit`,appendPosition:e}),pV=UU(dV("bounce",!0)),gV={position:"top-right",transition:pV,autoClose:5e3,closeButton:!0,pauseOnHover:!0,pauseOnFocusLoss:!0,draggable:"touch",draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light","aria-label":"Notifications Alt+T",hotKeys:n=>n.altKey&&n.code==="KeyT"};function mV(n){let e={...gV,...n},t=n.stacked,[r,i]=ge.useState(!0),a=ge.useRef(null),{getToastToRender:o,isToastActive:s,count:u}=nV(e),{className:f,style:h,rtl:p,containerId:g,hotKeys:m}=e;function x(I){let C=Jf("Toastify__toast-container",`Toastify__toast-container--${I}`,{"Toastify__toast-container--rtl":p});return ec(f)?f({position:I,rtl:p,defaultClassName:C}):Jf(C,Oy(f))}function w(){t&&(i(!0),mn.play())}return iV(()=>{var I;if(t){let C=a.current.querySelectorAll('[data-in="true"]'),P=12,B=(I=e.position)==null?void 0:I.includes("top"),V=0,Y=0;Array.from(C).reverse().forEach((q,D)=>{let A=q;A.classList.add("Toastify__toast--stacked"),D>0&&(A.dataset.collapsed=`${r}`),A.dataset.pos||(A.dataset.pos=B?"top":"bot");let T=V*(r?.2:1)+(r?0:P*D);A.style.setProperty("--y",`${B?T:T*-1}px`),A.style.setProperty("--g",`${P}`),A.style.setProperty("--s",`${1-(r?Y:0)}`),V+=A.offsetHeight,Y+=.025})}},[r,u,t]),ge.useEffect(()=>{function I(C){var P;let B=a.current;m(C)&&((P=B.querySelector('[tabIndex="0"]'))==null||P.focus(),i(!1),mn.pause()),C.key==="Escape"&&(document.activeElement===B||B!=null&&B.contains(document.activeElement))&&(i(!0),mn.play())}return document.addEventListener("keydown",I),()=>{document.removeEventListener("keydown",I)}},[m]),kn.createElement("section",{ref:a,className:"Toastify",id:g,onMouseEnter:()=>{t&&(i(!1),mn.pause())},onMouseLeave:w,"aria-live":"polite","aria-atomic":"false","aria-relevant":"additions text","aria-label":e["aria-label"]},o((I,C)=>{let P=C.length?{...h}:{...h,pointerEvents:"none"};return kn.createElement("div",{tabIndex:-1,className:x(I),"data-stacked":t,style:P,key:`c-${I}`},C.map(({content:B,props:V})=>kn.createElement(hV,{...V,stacked:t,collapseAll:w,isIn:s(V.toastId,V.containerId),key:`t-${V.key}`},B)))}))}var $h={},Sv={exports:{}},Cv,u4;function vV(){if(u4)return Cv;u4=1;var n="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return Cv=n,Cv}var Tv,c4;function yV(){if(c4)return Tv;c4=1;var n=vV();function e(){}function t(){}return t.resetWarningCache=e,Tv=function(){function r(o,s,u,f,h,p){if(p!==n){var g=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw g.name="Invariant Violation",g}}r.isRequired=r;function i(){return r}var a={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:i,element:r,elementType:r,instanceOf:i,node:r,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:t,resetWarningCache:e};return a.PropTypes=a,a},Tv}var f4;function xV(){return f4||(f4=1,Sv.exports=yV()()),Sv.exports}var h4;function _V(){if(h4)return $h;h4=1,Object.defineProperty($h,"__esModule",{value:!0}),$h.default=void 0;var n=Object.assign||function(D){for(var A=1;A<arguments.length;A++){var T=arguments[A];for(var k in T)Object.prototype.hasOwnProperty.call(T,k)&&(D[k]=T[k])}return D},e=function(){function D(A,T){for(var k=0;k<T.length;k++){var R=T[k];R.enumerable=R.enumerable||!1,R.configurable=!0,"value"in R&&(R.writable=!0),Object.defineProperty(A,R.key,R)}}return function(A,T,k){return T&&D(A.prototype,T),k&&D(A,k),A}}(),t,r;$h.confirmAlert=q;var i=Xg(),a=f(i),o=xV(),s=f(o),u=$4();function f(D){return D&&D.__esModule?D:{default:D}}function h(D,A){if(!(D instanceof A))throw new TypeError("Cannot call a class as a function")}function p(D,A){if(!D)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return A&&(typeof A=="object"||typeof A=="function")?A:D}function g(D,A){if(typeof A!="function"&&A!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof A);D.prototype=Object.create(A&&A.prototype,{constructor:{value:D,enumerable:!1,writable:!0,configurable:!0}}),A&&(Object.setPrototypeOf?Object.setPrototypeOf(D,A):D.__proto__=A)}var m=(r=t=function(D){g(A,D);function A(){var T,k,R,L;h(this,A);for(var j=arguments.length,H=Array(j),ne=0;ne<j;ne++)H[ne]=arguments[ne];return L=(k=(R=p(this,(T=A.__proto__||Object.getPrototypeOf(A)).call.apply(T,[this].concat(H))),R),R.handleClickButton=function(U){U.onClick&&U.onClick(),R.close()},R.handleClickOverlay=function(U){var z=R.props,ee=z.closeOnClickOutside,le=z.onClickOutside,$=U.target===R.overlay;ee&&$&&(le(),R.close()),U.stopPropagation()},R.close=function(){var U=R.props.afterClose;Y(),B(R.props),C(U)},R.keyboard=function(U){var z=R.props,ee=z.closeOnEscape,le=z.onKeypressEscape,$=z.onkeyPress,ve=z.keyCodeForClose,G=U.keyCode,Q=G===27;ve.includes(G)&&R.close(),ee&&Q&&(le(U),R.close()),$&&$()},R.componentDidMount=function(){document.addEventListener("keydown",R.keyboard,!1)},R.componentWillUnmount=function(){document.removeEventListener("keydown",R.keyboard,!1),R.props.willUnmount()},R.renderCustomUI=function(){var U=R.props,z=U.title,ee=U.message,le=U.buttons,$=U.customUI,ve={title:z,message:ee,buttons:le,onClose:R.close};return $(ve)},k),p(R,L)}return e(A,[{key:"render",value:function(){var k=this,R=this.props,L=R.title,j=R.message,H=R.buttons,ne=R.childrenElement,U=R.customUI,z=R.overlayClassName;return a.default.createElement("div",{className:"react-confirm-alert-overlay "+z,ref:function(le){return k.overlay=le},onClick:this.handleClickOverlay},a.default.createElement("div",{className:"react-confirm-alert"},U?this.renderCustomUI():a.default.createElement("div",{className:"react-confirm-alert-body"},L&&a.default.createElement("h1",null,L),j,ne(),a.default.createElement("div",{className:"react-confirm-alert-button-group"},H.map(function(ee,le){return a.default.createElement("button",n({key:le,className:ee.className},ee,{onClick:function(ve){return k.handleClickButton(ee)}}),ee.label)})))))}}]),A}(i.Component),t.propTypes={title:s.default.string,message:s.default.string,buttons:s.default.array.isRequired,childrenElement:s.default.func,customUI:s.default.func,closeOnClickOutside:s.default.bool,closeOnEscape:s.default.bool,keyCodeForClose:s.default.arrayOf(s.default.number),willUnmount:s.default.func,afterClose:s.default.func,onClickOutside:s.default.func,onKeypressEscape:s.default.func,onkeyPress:s.default.func,overlayClassName:s.default.string},t.defaultProps={buttons:[{label:"Cancel",onClick:function(){return null},className:null},{label:"Confirm",onClick:function(){return null},className:null}],childrenElement:function(){return null},closeOnClickOutside:!0,closeOnEscape:!0,keyCodeForClose:[],willUnmount:function(){return null},afterClose:function(){return null},onClickOutside:function(){return null},onKeypressEscape:function(){return null}},r);$h.default=m;var x=null,w="react-confirm-alert";function I(){var D=document.getElementById("react-confirm-alert-firm-svg");if(!D){var A="http://www.w3.org/2000/svg",T=document.createElementNS(A,"feGaussianBlur");T.setAttribute("stdDeviation","0.3");var k=document.createElementNS(A,"filter");k.setAttribute("id","gaussian-blur"),k.appendChild(T);var R=document.createElementNS(A,"svg");R.setAttribute("id","react-confirm-alert-firm-svg"),R.setAttribute("class","react-confirm-alert-svg"),R.appendChild(k),document.body.appendChild(R)}}function C(D){var A=document.getElementById("react-confirm-alert-firm-svg");A&&A.parentNode.removeChild(A),document.body.children[0].classList.remove("react-confirm-alert-blur"),D()}function P(D){var A=document.getElementById(D.targetId||w);D.targetId&&!A&&console.error("React Confirm Alert:","Can not get element id (#"+D.targetId+")"),A?(x=(0,u.createRoot)(A),x.render(a.default.createElement(m,D))):(document.body.children[0].classList.add("react-confirm-alert-blur"),A=document.createElement("div"),A.id=w,document.body.appendChild(A),x=(0,u.createRoot)(A),x.render(a.default.createElement(m,D)))}function B(D){var A=document.getElementById(D.targetId||w);A&&x.unmount(A)}function V(){document.body.classList.add("react-confirm-alert-body-element")}function Y(){document.body.classList.remove("react-confirm-alert-body-element")}function q(D){V(),I(),P(D)}return $h}var wV=_V();function bV(n,e){return e.forEach(function(t){t&&typeof t!="string"&&!Array.isArray(t)&&Object.keys(t).forEach(function(r){if(r!=="default"&&!(r in n)){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}})}),Object.freeze(n)}function GS(n,e){return new Promise(function(t,r){let i;return AV(n).then(function(a){try{return i=a,t(new Blob([e.slice(0,2),i,e.slice(2)],{type:"image/jpeg"}))}catch(o){return r(o)}},r)})}const AV=n=>new Promise((e,t)=>{const r=new FileReader;r.addEventListener("load",({target:{result:i}})=>{const a=new DataView(i);let o=0;if(a.getUint16(o)!==65496)return t("not a valid JPEG");for(o+=2;;){const s=a.getUint16(o);if(s===65498)break;const u=a.getUint16(o+2);if(s===65505&&a.getUint32(o+4)===1165519206){const f=o+10;let h;switch(a.getUint16(f)){case 18761:h=!0;break;case 19789:h=!1;break;default:return t("TIFF header contains invalid endian")}if(a.getUint16(f+2,h)!==42)return t("TIFF header contains invalid version");const p=a.getUint32(f+4,h),g=f+p+2+12*a.getUint16(f+p,h);for(let m=f+p+2;m<g;m+=12)if(a.getUint16(m,h)==274){if(a.getUint16(m+2,h)!==3)return t("Orientation data type is invalid");if(a.getUint32(m+4,h)!==1)return t("Orientation data count is invalid");a.setUint16(m+8,1,h);break}return e(i.slice(o,o+2+u))}o+=2+u}return e(new Blob)}),r.readAsArrayBuffer(n)});var Bg={},EV={get exports(){return Bg},set exports(n){Bg=n}};(function(n){var e,t,r={};EV.exports=r,r.parse=function(i,a){for(var o=r.bin.readUshort,s=r.bin.readUint,u=0,f={},h=new Uint8Array(i),p=h.length-4;s(h,p)!=101010256;)p--;u=p,u+=4;var g=o(h,u+=4);o(h,u+=2);var m=s(h,u+=2),x=s(h,u+=4);u+=4,u=x;for(var w=0;w<g;w++){s(h,u),u+=4,u+=4,u+=4,s(h,u+=4),m=s(h,u+=4);var I=s(h,u+=4),C=o(h,u+=4),P=o(h,u+2),B=o(h,u+4);u+=6;var V=s(h,u+=8);u+=4,u+=C+P+B,r._readLocal(h,V,f,m,I,a)}return f},r._readLocal=function(i,a,o,s,u,f){var h=r.bin.readUshort,p=r.bin.readUint;p(i,a),h(i,a+=4),h(i,a+=2);var g=h(i,a+=2);p(i,a+=2),p(i,a+=4),a+=4;var m=h(i,a+=8),x=h(i,a+=2);a+=2;var w=r.bin.readUTF8(i,a,m);if(a+=m,a+=x,f)o[w]={size:u,csize:s};else{var I=new Uint8Array(i.buffer,a);if(g==0)o[w]=new Uint8Array(I.buffer.slice(a,a+s));else{if(g!=8)throw"unknown compression method: "+g;var C=new Uint8Array(u);r.inflateRaw(I,C),o[w]=C}}},r.inflateRaw=function(i,a){return r.F.inflate(i,a)},r.inflate=function(i,a){return i[0],i[1],r.inflateRaw(new Uint8Array(i.buffer,i.byteOffset+2,i.length-6),a)},r.deflate=function(i,a){a==null&&(a={level:6});var o=0,s=new Uint8Array(50+Math.floor(1.1*i.length));s[o]=120,s[o+1]=156,o+=2,o=r.F.deflateRaw(i,s,o,a.level);var u=r.adler(i,0,i.length);return s[o+0]=u>>>24&255,s[o+1]=u>>>16&255,s[o+2]=u>>>8&255,s[o+3]=u>>>0&255,new Uint8Array(s.buffer,0,o+4)},r.deflateRaw=function(i,a){a==null&&(a={level:6});var o=new Uint8Array(50+Math.floor(1.1*i.length)),s=r.F.deflateRaw(i,o,s,a.level);return new Uint8Array(o.buffer,0,s)},r.encode=function(i,a){a==null&&(a=!1);var o=0,s=r.bin.writeUint,u=r.bin.writeUshort,f={};for(var h in i){var p=!r._noNeed(h)&&!a,g=i[h],m=r.crc.crc(g,0,g.length);f[h]={cpr:p,usize:g.length,crc:m,file:p?r.deflateRaw(g):g}}for(var h in f)o+=f[h].file.length+30+46+2*r.bin.sizeUTF8(h);o+=22;var x=new Uint8Array(o),w=0,I=[];for(var h in f){var C=f[h];I.push(w),w=r._writeHeader(x,w,h,C,0)}var P=0,B=w;for(var h in f)C=f[h],I.push(w),w=r._writeHeader(x,w,h,C,1,I[P++]);var V=w-B;return s(x,w,101010256),w+=4,u(x,w+=4,P),u(x,w+=2,P),s(x,w+=2,V),s(x,w+=4,B),w+=4,w+=2,x.buffer},r._noNeed=function(i){var a=i.split(".").pop().toLowerCase();return"png,jpg,jpeg,zip".indexOf(a)!=-1},r._writeHeader=function(i,a,o,s,u,f){var h=r.bin.writeUint,p=r.bin.writeUshort,g=s.file;return h(i,a,u==0?67324752:33639248),a+=4,u==1&&(a+=2),p(i,a,20),p(i,a+=2,0),p(i,a+=2,s.cpr?8:0),h(i,a+=2,0),h(i,a+=4,s.crc),h(i,a+=4,g.length),h(i,a+=4,s.usize),p(i,a+=4,r.bin.sizeUTF8(o)),p(i,a+=2,0),a+=2,u==1&&(a+=2,a+=2,h(i,a+=6,f),a+=4),a+=r.bin.writeUTF8(i,a,o),u==0&&(i.set(g,a),a+=g.length),a},r.crc={table:function(){for(var i=new Uint32Array(256),a=0;a<256;a++){for(var o=a,s=0;s<8;s++)1&o?o=3988292384^o>>>1:o>>>=1;i[a]=o}return i}(),update:function(i,a,o,s){for(var u=0;u<s;u++)i=r.crc.table[255&(i^a[o+u])]^i>>>8;return i},crc:function(i,a,o){return 4294967295^r.crc.update(4294967295,i,a,o)}},r.adler=function(i,a,o){for(var s=1,u=0,f=a,h=a+o;f<h;){for(var p=Math.min(f+5552,h);f<p;)u+=s+=i[f++];s%=65521,u%=65521}return u<<16|s},r.bin={readUshort:function(i,a){return i[a]|i[a+1]<<8},writeUshort:function(i,a,o){i[a]=255&o,i[a+1]=o>>8&255},readUint:function(i,a){return 16777216*i[a+3]+(i[a+2]<<16|i[a+1]<<8|i[a])},writeUint:function(i,a,o){i[a]=255&o,i[a+1]=o>>8&255,i[a+2]=o>>16&255,i[a+3]=o>>24&255},readASCII:function(i,a,o){for(var s="",u=0;u<o;u++)s+=String.fromCharCode(i[a+u]);return s},writeASCII:function(i,a,o){for(var s=0;s<o.length;s++)i[a+s]=o.charCodeAt(s)},pad:function(i){return i.length<2?"0"+i:i},readUTF8:function(i,a,o){for(var s,u="",f=0;f<o;f++)u+="%"+r.bin.pad(i[a+f].toString(16));try{s=decodeURIComponent(u)}catch{return r.bin.readASCII(i,a,o)}return s},writeUTF8:function(i,a,o){for(var s=o.length,u=0,f=0;f<s;f++){var h=o.charCodeAt(f);if((4294967168&h)==0)i[a+u]=h,u++;else if((4294965248&h)==0)i[a+u]=192|h>>6,i[a+u+1]=128|h>>0&63,u+=2;else if((4294901760&h)==0)i[a+u]=224|h>>12,i[a+u+1]=128|h>>6&63,i[a+u+2]=128|h>>0&63,u+=3;else{if((4292870144&h)!=0)throw"e";i[a+u]=240|h>>18,i[a+u+1]=128|h>>12&63,i[a+u+2]=128|h>>6&63,i[a+u+3]=128|h>>0&63,u+=4}}return u},sizeUTF8:function(i){for(var a=i.length,o=0,s=0;s<a;s++){var u=i.charCodeAt(s);if((4294967168&u)==0)o++;else if((4294965248&u)==0)o+=2;else if((4294901760&u)==0)o+=3;else{if((4292870144&u)!=0)throw"e";o+=4}}return o}},r.F={},r.F.deflateRaw=function(i,a,o,s){var u=[[0,0,0,0,0],[4,4,8,4,0],[4,5,16,8,0],[4,6,16,16,0],[4,10,16,32,0],[8,16,32,32,0],[8,16,128,128,0],[8,32,128,256,0],[32,128,258,1024,1],[32,258,258,4096,1]][s],f=r.F.U,h=r.F._goodIndex;r.F._hash;var p=r.F._putsE,g=0,m=o<<3,x=0,w=i.length;if(s==0){for(;g<w;)p(a,m,g+(R=Math.min(65535,w-g))==w?1:0),m=r.F._copyExact(i,g,R,a,m+8),g+=R;return m>>>3}var I=f.lits,C=f.strt,P=f.prev,B=0,V=0,Y=0,q=0,D=0,A=0;for(w>2&&(C[A=r.F._hash(i,0)]=0),g=0;g<w;g++){if(D=A,g+1<w-2){A=r.F._hash(i,g+1);var T=g+1&32767;P[T]=C[A],C[A]=T}if(x<=g){(B>14e3||V>26697)&&w-g>100&&(x<g&&(I[B]=g-x,B+=2,x=g),m=r.F._writeBlock(g==w-1||x==w?1:0,I,B,q,i,Y,g-Y,a,m),B=V=q=0,Y=g);var k=0;g<w-2&&(k=r.F._bestMatch(i,g,P,D,Math.min(u[2],w-g),u[3]));var R=k>>>16,L=65535&k;if(k!=0){L=65535&k;var j=h(R=k>>>16,f.of0);f.lhst[257+j]++;var H=h(L,f.df0);f.dhst[H]++,q+=f.exb[j]+f.dxb[H],I[B]=R<<23|g-x,I[B+1]=L<<16|j<<8|H,B+=2,x=g+R}else f.lhst[i[g]]++;V++}}for(Y==g&&i.length!=0||(x<g&&(I[B]=g-x,B+=2,x=g),m=r.F._writeBlock(1,I,B,q,i,Y,g-Y,a,m),B=0,V=0,B=V=q=0,Y=g);(7&m)!=0;)m++;return m>>>3},r.F._bestMatch=function(i,a,o,s,u,f){var h=32767&a,p=o[h],g=h-p+32768&32767;if(p==h||s!=r.F._hash(i,a-g))return 0;for(var m=0,x=0,w=Math.min(32767,a);g<=w&&--f!=0&&p!=h;){if(m==0||i[a+m]==i[a+m-g]){var I=r.F._howLong(i,a,g);if(I>m){if(x=g,(m=I)>=u)break;g+2<I&&(I=g+2);for(var C=0,P=0;P<I-2;P++){var B=a-g+P+32768&32767,V=B-o[B]+32768&32767;V>C&&(C=V,p=B)}}}g+=(h=p)-(p=o[h])+32768&32767}return m<<16|x},r.F._howLong=function(i,a,o){if(i[a]!=i[a-o]||i[a+1]!=i[a+1-o]||i[a+2]!=i[a+2-o])return 0;var s=a,u=Math.min(i.length,a+258);for(a+=3;a<u&&i[a]==i[a-o];)a++;return a-s},r.F._hash=function(i,a){return(i[a]<<8|i[a+1])+(i[a+2]<<4)&65535},r.saved=0,r.F._writeBlock=function(i,a,o,s,u,f,h,p,g){var m,x,w,I,C,P,B,V,Y,q=r.F.U,D=r.F._putsF,A=r.F._putsE;q.lhst[256]++,x=(m=r.F.getTrees())[0],w=m[1],I=m[2],C=m[3],P=m[4],B=m[5],V=m[6],Y=m[7];var T=32+((g+3&7)==0?0:8-(g+3&7))+(h<<3),k=s+r.F.contSize(q.fltree,q.lhst)+r.F.contSize(q.fdtree,q.dhst),R=s+r.F.contSize(q.ltree,q.lhst)+r.F.contSize(q.dtree,q.dhst);R+=14+3*B+r.F.contSize(q.itree,q.ihst)+(2*q.ihst[16]+3*q.ihst[17]+7*q.ihst[18]);for(var L=0;L<286;L++)q.lhst[L]=0;for(L=0;L<30;L++)q.dhst[L]=0;for(L=0;L<19;L++)q.ihst[L]=0;var j=T<k&&T<R?0:k<R?1:2;if(D(p,g,i),D(p,g+1,j),g+=3,j==0){for(;(7&g)!=0;)g++;g=r.F._copyExact(u,f,h,p,g)}else{var H,ne;if(j==1&&(H=q.fltree,ne=q.fdtree),j==2){r.F.makeCodes(q.ltree,x),r.F.revCodes(q.ltree,x),r.F.makeCodes(q.dtree,w),r.F.revCodes(q.dtree,w),r.F.makeCodes(q.itree,I),r.F.revCodes(q.itree,I),H=q.ltree,ne=q.dtree,A(p,g,C-257),A(p,g+=5,P-1),A(p,g+=5,B-4),g+=4;for(var U=0;U<B;U++)A(p,g+3*U,q.itree[1+(q.ordr[U]<<1)]);g+=3*B,g=r.F._codeTiny(V,q.itree,p,g),g=r.F._codeTiny(Y,q.itree,p,g)}for(var z=f,ee=0;ee<o;ee+=2){for(var le=a[ee],$=le>>>23,ve=z+(8388607&le);z<ve;)g=r.F._writeLit(u[z++],H,p,g);if($!=0){var G=a[ee+1],Q=G>>16,te=G>>8&255,ie=255&G;A(p,g=r.F._writeLit(257+te,H,p,g),$-q.of0[te]),g+=q.exb[te],D(p,g=r.F._writeLit(ie,ne,p,g),Q-q.df0[ie]),g+=q.dxb[ie],z+=$}}g=r.F._writeLit(256,H,p,g)}return g},r.F._copyExact=function(i,a,o,s,u){var f=u>>>3;return s[f]=o,s[f+1]=o>>>8,s[f+2]=255-s[f],s[f+3]=255-s[f+1],f+=4,s.set(new Uint8Array(i.buffer,a,o),f),u+(o+4<<3)},r.F.getTrees=function(){for(var i=r.F.U,a=r.F._hufTree(i.lhst,i.ltree,15),o=r.F._hufTree(i.dhst,i.dtree,15),s=[],u=r.F._lenCodes(i.ltree,s),f=[],h=r.F._lenCodes(i.dtree,f),p=0;p<s.length;p+=2)i.ihst[s[p]]++;for(p=0;p<f.length;p+=2)i.ihst[f[p]]++;for(var g=r.F._hufTree(i.ihst,i.itree,7),m=19;m>4&&i.itree[1+(i.ordr[m-1]<<1)]==0;)m--;return[a,o,g,u,h,m,s,f]},r.F.getSecond=function(i){for(var a=[],o=0;o<i.length;o+=2)a.push(i[o+1]);return a},r.F.nonZero=function(i){for(var a="",o=0;o<i.length;o+=2)i[o+1]!=0&&(a+=(o>>1)+",");return a},r.F.contSize=function(i,a){for(var o=0,s=0;s<a.length;s++)o+=a[s]*i[1+(s<<1)];return o},r.F._codeTiny=function(i,a,o,s){for(var u=0;u<i.length;u+=2){var f=i[u],h=i[u+1];s=r.F._writeLit(f,a,o,s);var p=f==16?2:f==17?3:7;f>15&&(r.F._putsE(o,s,h,p),s+=p)}return s},r.F._lenCodes=function(i,a){for(var o=i.length;o!=2&&i[o-1]==0;)o-=2;for(var s=0;s<o;s+=2){var u=i[s+1],f=s+3<o?i[s+3]:-1,h=s+5<o?i[s+5]:-1,p=s==0?-1:i[s-1];if(u==0&&f==u&&h==u){for(var g=s+5;g+2<o&&i[g+2]==u;)g+=2;(m=Math.min(g+1-s>>>1,138))<11?a.push(17,m-3):a.push(18,m-11),s+=2*m-2}else if(u==p&&f==u&&h==u){for(g=s+5;g+2<o&&i[g+2]==u;)g+=2;var m=Math.min(g+1-s>>>1,6);a.push(16,m-3),s+=2*m-2}else a.push(u,0)}return o>>>1},r.F._hufTree=function(i,a,o){var s=[],u=i.length,f=a.length,h=0;for(h=0;h<f;h+=2)a[h]=0,a[h+1]=0;for(h=0;h<u;h++)i[h]!=0&&s.push({lit:h,f:i[h]});var p=s.length,g=s.slice(0);if(p==0)return 0;if(p==1){var m=s[0].lit;return g=m==0?1:0,a[1+(m<<1)]=1,a[1+(g<<1)]=1,1}s.sort(function(V,Y){return V.f-Y.f});var x=s[0],w=s[1],I=0,C=1,P=2;for(s[0]={lit:-1,f:x.f+w.f,l:x,r:w,d:0};C!=p-1;)x=I!=C&&(P==p||s[I].f<s[P].f)?s[I++]:s[P++],w=I!=C&&(P==p||s[I].f<s[P].f)?s[I++]:s[P++],s[C++]={lit:-1,f:x.f+w.f,l:x,r:w};var B=r.F.setDepth(s[C-1],0);for(B>o&&(r.F.restrictDepth(g,o,B),B=o),h=0;h<p;h++)a[1+(g[h].lit<<1)]=g[h].d;return B},r.F.setDepth=function(i,a){return i.lit!=-1?(i.d=a,a):Math.max(r.F.setDepth(i.l,a+1),r.F.setDepth(i.r,a+1))},r.F.restrictDepth=function(i,a,o){var s=0,u=1<<o-a,f=0;for(i.sort(function(p,g){return g.d==p.d?p.f-g.f:g.d-p.d}),s=0;s<i.length&&i[s].d>a;s++){var h=i[s].d;i[s].d=a,f+=u-(1<<o-h)}for(f>>>=o-a;f>0;)(h=i[s].d)<a?(i[s].d++,f-=1<<a-h-1):s++;for(;s>=0;s--)i[s].d==a&&f<0&&(i[s].d--,f++);f!=0&&console.log("debt left")},r.F._goodIndex=function(i,a){var o=0;return a[16|o]<=i&&(o|=16),a[8|o]<=i&&(o|=8),a[4|o]<=i&&(o|=4),a[2|o]<=i&&(o|=2),a[1|o]<=i&&(o|=1),o},r.F._writeLit=function(i,a,o,s){return r.F._putsF(o,s,a[i<<1]),s+a[1+(i<<1)]},r.F.inflate=function(i,a){var o=Uint8Array;if(i[0]==3&&i[1]==0)return a||new o(0);var s=r.F,u=s._bitsF,f=s._bitsE,h=s._decodeTiny,p=s.makeCodes,g=s.codes2map,m=s._get17,x=s.U,w=a==null;w&&(a=new o(i.length>>>2<<3));for(var I,C,P=0,B=0,V=0,Y=0,q=0,D=0,A=0,T=0,k=0;P==0;)if(P=u(i,k,1),B=u(i,k+1,2),k+=3,B!=0){if(w&&(a=r.F._check(a,T+(1<<17))),B==1&&(I=x.flmap,C=x.fdmap,D=511,A=31),B==2){V=f(i,k,5)+257,Y=f(i,k+5,5)+1,q=f(i,k+10,4)+4,k+=14;for(var R=0;R<38;R+=2)x.itree[R]=0,x.itree[R+1]=0;var L=1;for(R=0;R<q;R++){var j=f(i,k+3*R,3);x.itree[1+(x.ordr[R]<<1)]=j,j>L&&(L=j)}k+=3*q,p(x.itree,L),g(x.itree,L,x.imap),I=x.lmap,C=x.dmap,k=h(x.imap,(1<<L)-1,V+Y,i,k,x.ttree);var H=s._copyOut(x.ttree,0,V,x.ltree);D=(1<<H)-1;var ne=s._copyOut(x.ttree,V,Y,x.dtree);A=(1<<ne)-1,p(x.ltree,H),g(x.ltree,H,I),p(x.dtree,ne),g(x.dtree,ne,C)}for(;;){var U=I[m(i,k)&D];k+=15&U;var z=U>>>4;if(!(z>>>8))a[T++]=z;else{if(z==256)break;var ee=T+z-254;if(z>264){var le=x.ldef[z-257];ee=T+(le>>>3)+f(i,k,7&le),k+=7&le}var $=C[m(i,k)&A];k+=15&$;var ve=$>>>4,G=x.ddef[ve],Q=(G>>>4)+u(i,k,15&G);for(k+=15&G,w&&(a=r.F._check(a,T+(1<<17)));T<ee;)a[T]=a[T++-Q],a[T]=a[T++-Q],a[T]=a[T++-Q],a[T]=a[T++-Q];T=ee}}}else{(7&k)!=0&&(k+=8-(7&k));var te=4+(k>>>3),ie=i[te-4]|i[te-3]<<8;w&&(a=r.F._check(a,T+ie)),a.set(new o(i.buffer,i.byteOffset+te,ie),T),k=te+ie<<3,T+=ie}return a.length==T?a:a.slice(0,T)},r.F._check=function(i,a){var o=i.length;if(a<=o)return i;var s=new Uint8Array(Math.max(o<<1,a));return s.set(i,0),s},r.F._decodeTiny=function(i,a,o,s,u,f){for(var h=r.F._bitsE,p=r.F._get17,g=0;g<o;){var m=i[p(s,u)&a];u+=15&m;var x=m>>>4;if(x<=15)f[g]=x,g++;else{var w=0,I=0;x==16?(I=3+h(s,u,2),u+=2,w=f[g-1]):x==17?(I=3+h(s,u,3),u+=3):x==18&&(I=11+h(s,u,7),u+=7);for(var C=g+I;g<C;)f[g]=w,g++}}return u},r.F._copyOut=function(i,a,o,s){for(var u=0,f=0,h=s.length>>>1;f<o;){var p=i[f+a];s[f<<1]=0,s[1+(f<<1)]=p,p>u&&(u=p),f++}for(;f<h;)s[f<<1]=0,s[1+(f<<1)]=0,f++;return u},r.F.makeCodes=function(i,a){for(var o,s,u,f,h=r.F.U,p=i.length,g=h.bl_count,m=0;m<=a;m++)g[m]=0;for(m=1;m<p;m+=2)g[i[m]]++;var x=h.next_code;for(o=0,g[0]=0,s=1;s<=a;s++)o=o+g[s-1]<<1,x[s]=o;for(u=0;u<p;u+=2)(f=i[u+1])!=0&&(i[u]=x[f],x[f]++)},r.F.codes2map=function(i,a,o){for(var s=i.length,u=r.F.U.rev15,f=0;f<s;f+=2)if(i[f+1]!=0)for(var h=f>>1,p=i[f+1],g=h<<4|p,m=a-p,x=i[f]<<m,w=x+(1<<m);x!=w;)o[u[x]>>>15-a]=g,x++},r.F.revCodes=function(i,a){for(var o=r.F.U.rev15,s=15-a,u=0;u<i.length;u+=2){var f=i[u]<<a-i[u+1];i[u]=o[f]>>>s}},r.F._putsE=function(i,a,o){o<<=7&a;var s=a>>>3;i[s]|=o,i[s+1]|=o>>>8},r.F._putsF=function(i,a,o){o<<=7&a;var s=a>>>3;i[s]|=o,i[s+1]|=o>>>8,i[s+2]|=o>>>16},r.F._bitsE=function(i,a,o){return(i[a>>>3]|i[1+(a>>>3)]<<8)>>>(7&a)&(1<<o)-1},r.F._bitsF=function(i,a,o){return(i[a>>>3]|i[1+(a>>>3)]<<8|i[2+(a>>>3)]<<16)>>>(7&a)&(1<<o)-1},r.F._get17=function(i,a){return(i[a>>>3]|i[1+(a>>>3)]<<8|i[2+(a>>>3)]<<16)>>>(7&a)},r.F._get25=function(i,a){return(i[a>>>3]|i[1+(a>>>3)]<<8|i[2+(a>>>3)]<<16|i[3+(a>>>3)]<<24)>>>(7&a)},r.F.U=(e=Uint16Array,t=Uint32Array,{next_code:new e(16),bl_count:new e(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new e(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new t(32),flmap:new e(512),fltree:[],fdmap:new e(32),fdtree:[],lmap:new e(32768),ltree:[],ttree:[],dmap:new e(32768),dtree:[],imap:new e(512),itree:[],rev15:new e(32768),lhst:new t(286),dhst:new t(30),ihst:new t(19),lits:new t(15e3),strt:new e(65536),prev:new e(32768)}),function(){for(var i=r.F.U,a=0;a<32768;a++){var o=a;o=(4278255360&(o=(4042322160&(o=(3435973836&(o=(2863311530&o)>>>1|(1431655765&o)<<1))>>>2|(858993459&o)<<2))>>>4|(252645135&o)<<4))>>>8|(16711935&o)<<8,i.rev15[a]=(o>>>16|o<<16)>>>17}function s(u,f,h){for(;f--!=0;)u.push(0,h)}for(a=0;a<32;a++)i.ldef[a]=i.of0[a]<<3|i.exb[a],i.ddef[a]=i.df0[a]<<4|i.dxb[a];s(i.fltree,144,8),s(i.fltree,112,9),s(i.fltree,24,7),s(i.fltree,8,8),r.F.makeCodes(i.fltree,9),r.F.codes2map(i.fltree,9,i.flmap),r.F.revCodes(i.fltree,9),s(i.fdtree,32,5),r.F.makeCodes(i.fdtree,5),r.F.codes2map(i.fdtree,5,i.fdmap),r.F.revCodes(i.fdtree,5),s(i.itree,19,0),s(i.ltree,286,0),s(i.dtree,30,0),s(i.ttree,320,0)}()})();var SV=bV({__proto__:null,default:Bg},[Bg]);const rl=function(){var n={nextZero(h,p){for(;h[p]!=0;)p++;return p},readUshort:(h,p)=>h[p]<<8|h[p+1],writeUshort(h,p,g){h[p]=g>>8&255,h[p+1]=255&g},readUint:(h,p)=>16777216*h[p]+(h[p+1]<<16|h[p+2]<<8|h[p+3]),writeUint(h,p,g){h[p]=g>>24&255,h[p+1]=g>>16&255,h[p+2]=g>>8&255,h[p+3]=255&g},readASCII(h,p,g){let m="";for(let x=0;x<g;x++)m+=String.fromCharCode(h[p+x]);return m},writeASCII(h,p,g){for(let m=0;m<g.length;m++)h[p+m]=g.charCodeAt(m)},readBytes(h,p,g){const m=[];for(let x=0;x<g;x++)m.push(h[p+x]);return m},pad:h=>h.length<2?`0${h}`:h,readUTF8(h,p,g){let m,x="";for(let w=0;w<g;w++)x+=`%${n.pad(h[p+w].toString(16))}`;try{m=decodeURIComponent(x)}catch{return n.readASCII(h,p,g)}return m}};function e(h,p,g,m){const x=p*g,w=a(m),I=Math.ceil(p*w/8),C=new Uint8Array(4*x),P=new Uint32Array(C.buffer),{ctype:B}=m,{depth:V}=m,Y=n.readUshort;if(B==6){const le=x<<2;if(V==8)for(var q=0;q<le;q+=4)C[q]=h[q],C[q+1]=h[q+1],C[q+2]=h[q+2],C[q+3]=h[q+3];if(V==16)for(q=0;q<le;q++)C[q]=h[q<<1]}else if(B==2){const le=m.tabs.tRNS;if(le==null){if(V==8)for(q=0;q<x;q++){var D=3*q;P[q]=255<<24|h[D+2]<<16|h[D+1]<<8|h[D]}if(V==16)for(q=0;q<x;q++)D=6*q,P[q]=255<<24|h[D+4]<<16|h[D+2]<<8|h[D]}else{var A=le[0];const $=le[1],ve=le[2];if(V==8)for(q=0;q<x;q++){var T=q<<2;D=3*q,P[q]=255<<24|h[D+2]<<16|h[D+1]<<8|h[D],h[D]==A&&h[D+1]==$&&h[D+2]==ve&&(C[T+3]=0)}if(V==16)for(q=0;q<x;q++)T=q<<2,D=6*q,P[q]=255<<24|h[D+4]<<16|h[D+2]<<8|h[D],Y(h,D)==A&&Y(h,D+2)==$&&Y(h,D+4)==ve&&(C[T+3]=0)}}else if(B==3){const le=m.tabs.PLTE,$=m.tabs.tRNS,ve=$?$.length:0;if(V==1)for(var k=0;k<g;k++){var R=k*I,L=k*p;for(q=0;q<p;q++){T=L+q<<2;var j=3*(H=h[R+(q>>3)]>>7-((7&q)<<0)&1);C[T]=le[j],C[T+1]=le[j+1],C[T+2]=le[j+2],C[T+3]=H<ve?$[H]:255}}if(V==2)for(k=0;k<g;k++)for(R=k*I,L=k*p,q=0;q<p;q++)T=L+q<<2,j=3*(H=h[R+(q>>2)]>>6-((3&q)<<1)&3),C[T]=le[j],C[T+1]=le[j+1],C[T+2]=le[j+2],C[T+3]=H<ve?$[H]:255;if(V==4)for(k=0;k<g;k++)for(R=k*I,L=k*p,q=0;q<p;q++)T=L+q<<2,j=3*(H=h[R+(q>>1)]>>4-((1&q)<<2)&15),C[T]=le[j],C[T+1]=le[j+1],C[T+2]=le[j+2],C[T+3]=H<ve?$[H]:255;if(V==8)for(q=0;q<x;q++){var H;T=q<<2,j=3*(H=h[q]),C[T]=le[j],C[T+1]=le[j+1],C[T+2]=le[j+2],C[T+3]=H<ve?$[H]:255}}else if(B==4){if(V==8)for(q=0;q<x;q++){T=q<<2;var ne=h[U=q<<1];C[T]=ne,C[T+1]=ne,C[T+2]=ne,C[T+3]=h[U+1]}if(V==16)for(q=0;q<x;q++){var U;T=q<<2,ne=h[U=q<<2],C[T]=ne,C[T+1]=ne,C[T+2]=ne,C[T+3]=h[U+2]}}else if(B==0)for(A=m.tabs.tRNS?m.tabs.tRNS:-1,k=0;k<g;k++){const le=k*I,$=k*p;if(V==1)for(var z=0;z<p;z++){var ee=(ne=255*(h[le+(z>>>3)]>>>7-(7&z)&1))==255*A?0:255;P[$+z]=ee<<24|ne<<16|ne<<8|ne}else if(V==2)for(z=0;z<p;z++)ee=(ne=85*(h[le+(z>>>2)]>>>6-((3&z)<<1)&3))==85*A?0:255,P[$+z]=ee<<24|ne<<16|ne<<8|ne;else if(V==4)for(z=0;z<p;z++)ee=(ne=17*(h[le+(z>>>1)]>>>4-((1&z)<<2)&15))==17*A?0:255,P[$+z]=ee<<24|ne<<16|ne<<8|ne;else if(V==8)for(z=0;z<p;z++)ee=(ne=h[le+z])==A?0:255,P[$+z]=ee<<24|ne<<16|ne<<8|ne;else if(V==16)for(z=0;z<p;z++)ne=h[le+(z<<1)],ee=Y(h,le+(z<<1))==A?0:255,P[$+z]=ee<<24|ne<<16|ne<<8|ne}return C}function t(h,p,g,m){const x=a(h),w=Math.ceil(g*x/8),I=new Uint8Array((w+1+h.interlace)*m);return p=h.tabs.CgBI?i(p,I):r(p,I),h.interlace==0?p=o(p,h,0,g,m):h.interlace==1&&(p=function(P,B){const V=B.width,Y=B.height,q=a(B),D=q>>3,A=Math.ceil(V*q/8),T=new Uint8Array(Y*A);let k=0;const R=[0,0,4,0,2,0,1],L=[0,4,0,2,0,1,0],j=[8,8,8,4,4,2,2],H=[8,8,4,4,2,2,1];let ne=0;for(;ne<7;){const z=j[ne],ee=H[ne];let le=0,$=0,ve=R[ne];for(;ve<Y;)ve+=z,$++;let G=L[ne];for(;G<V;)G+=ee,le++;const Q=Math.ceil(le*q/8);o(P,B,k,le,$);let te=0,ie=R[ne];for(;ie<Y;){let de=L[ne],Ae=k+te*Q<<3;for(;de<V;){var U;if(q==1&&(U=(U=P[Ae>>3])>>7-(7&Ae)&1,T[ie*A+(de>>3)]|=U<<7-((7&de)<<0)),q==2&&(U=(U=P[Ae>>3])>>6-(7&Ae)&3,T[ie*A+(de>>2)]|=U<<6-((3&de)<<1)),q==4&&(U=(U=P[Ae>>3])>>4-(7&Ae)&15,T[ie*A+(de>>1)]|=U<<4-((1&de)<<2)),q>=8){const be=ie*A+de*D;for(let Te=0;Te<D;Te++)T[be+Te]=P[(Ae>>3)+Te]}Ae+=q,de+=ee}te++,ie+=z}le*$!=0&&(k+=$*(1+Q)),ne+=1}return T}(p,h)),p}function r(h,p){return i(new Uint8Array(h.buffer,2,h.length-6),p)}var i=function(){const h={H:{}};return h.H.N=function(p,g){const m=Uint8Array;let x,w,I=0,C=0,P=0,B=0,V=0,Y=0,q=0,D=0,A=0;if(p[0]==3&&p[1]==0)return g||new m(0);const T=h.H,k=T.b,R=T.e,L=T.R,j=T.n,H=T.A,ne=T.Z,U=T.m,z=g==null;for(z&&(g=new m(p.length>>>2<<5));I==0;)if(I=k(p,A,1),C=k(p,A+1,2),A+=3,C!=0){if(z&&(g=h.H.W(g,D+(1<<17))),C==1&&(x=U.J,w=U.h,Y=511,q=31),C==2){P=R(p,A,5)+257,B=R(p,A+5,5)+1,V=R(p,A+10,4)+4,A+=14;let le=1;for(var ee=0;ee<38;ee+=2)U.Q[ee]=0,U.Q[ee+1]=0;for(ee=0;ee<V;ee++){const G=R(p,A+3*ee,3);U.Q[1+(U.X[ee]<<1)]=G,G>le&&(le=G)}A+=3*V,j(U.Q,le),H(U.Q,le,U.u),x=U.w,w=U.d,A=L(U.u,(1<<le)-1,P+B,p,A,U.v);const $=T.V(U.v,0,P,U.C);Y=(1<<$)-1;const ve=T.V(U.v,P,B,U.D);q=(1<<ve)-1,j(U.C,$),H(U.C,$,x),j(U.D,ve),H(U.D,ve,w)}for(;;){const le=x[ne(p,A)&Y];A+=15&le;const $=le>>>4;if(!($>>>8))g[D++]=$;else{if($==256)break;{let ve=D+$-254;if($>264){const de=U.q[$-257];ve=D+(de>>>3)+R(p,A,7&de),A+=7&de}const G=w[ne(p,A)&q];A+=15&G;const Q=G>>>4,te=U.c[Q],ie=(te>>>4)+k(p,A,15&te);for(A+=15&te;D<ve;)g[D]=g[D++-ie],g[D]=g[D++-ie],g[D]=g[D++-ie],g[D]=g[D++-ie];D=ve}}}}else{(7&A)!=0&&(A+=8-(7&A));const le=4+(A>>>3),$=p[le-4]|p[le-3]<<8;z&&(g=h.H.W(g,D+$)),g.set(new m(p.buffer,p.byteOffset+le,$),D),A=le+$<<3,D+=$}return g.length==D?g:g.slice(0,D)},h.H.W=function(p,g){const m=p.length;if(g<=m)return p;const x=new Uint8Array(m<<1);return x.set(p,0),x},h.H.R=function(p,g,m,x,w,I){const C=h.H.e,P=h.H.Z;let B=0;for(;B<m;){const V=p[P(x,w)&g];w+=15&V;const Y=V>>>4;if(Y<=15)I[B]=Y,B++;else{let q=0,D=0;Y==16?(D=3+C(x,w,2),w+=2,q=I[B-1]):Y==17?(D=3+C(x,w,3),w+=3):Y==18&&(D=11+C(x,w,7),w+=7);const A=B+D;for(;B<A;)I[B]=q,B++}}return w},h.H.V=function(p,g,m,x){let w=0,I=0;const C=x.length>>>1;for(;I<m;){const P=p[I+g];x[I<<1]=0,x[1+(I<<1)]=P,P>w&&(w=P),I++}for(;I<C;)x[I<<1]=0,x[1+(I<<1)]=0,I++;return w},h.H.n=function(p,g){const m=h.H.m,x=p.length;let w,I,C,P;const B=m.j;for(var V=0;V<=g;V++)B[V]=0;for(V=1;V<x;V+=2)B[p[V]]++;const Y=m.K;for(w=0,B[0]=0,I=1;I<=g;I++)w=w+B[I-1]<<1,Y[I]=w;for(C=0;C<x;C+=2)P=p[C+1],P!=0&&(p[C]=Y[P],Y[P]++)},h.H.A=function(p,g,m){const x=p.length,w=h.H.m.r;for(let I=0;I<x;I+=2)if(p[I+1]!=0){const C=I>>1,P=p[I+1],B=C<<4|P,V=g-P;let Y=p[I]<<V;const q=Y+(1<<V);for(;Y!=q;)m[w[Y]>>>15-g]=B,Y++}},h.H.l=function(p,g){const m=h.H.m.r,x=15-g;for(let w=0;w<p.length;w+=2){const I=p[w]<<g-p[w+1];p[w]=m[I]>>>x}},h.H.M=function(p,g,m){m<<=7&g;const x=g>>>3;p[x]|=m,p[x+1]|=m>>>8},h.H.I=function(p,g,m){m<<=7&g;const x=g>>>3;p[x]|=m,p[x+1]|=m>>>8,p[x+2]|=m>>>16},h.H.e=function(p,g,m){return(p[g>>>3]|p[1+(g>>>3)]<<8)>>>(7&g)&(1<<m)-1},h.H.b=function(p,g,m){return(p[g>>>3]|p[1+(g>>>3)]<<8|p[2+(g>>>3)]<<16)>>>(7&g)&(1<<m)-1},h.H.Z=function(p,g){return(p[g>>>3]|p[1+(g>>>3)]<<8|p[2+(g>>>3)]<<16)>>>(7&g)},h.H.i=function(p,g){return(p[g>>>3]|p[1+(g>>>3)]<<8|p[2+(g>>>3)]<<16|p[3+(g>>>3)]<<24)>>>(7&g)},h.H.m=function(){const p=Uint16Array,g=Uint32Array;return{K:new p(16),j:new p(16),X:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],T:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],q:new p(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],z:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],c:new g(32),J:new p(512),_:[],h:new p(32),$:[],w:new p(32768),C:[],v:[],d:new p(32768),D:[],u:new p(512),Q:[],r:new p(32768),s:new g(286),Y:new g(30),a:new g(19),t:new g(15e3),k:new p(65536),g:new p(32768)}}(),function(){const p=h.H.m;for(var g=0;g<32768;g++){let x=g;x=(2863311530&x)>>>1|(1431655765&x)<<1,x=(3435973836&x)>>>2|(858993459&x)<<2,x=(4042322160&x)>>>4|(252645135&x)<<4,x=(4278255360&x)>>>8|(16711935&x)<<8,p.r[g]=(x>>>16|x<<16)>>>17}function m(x,w,I){for(;w--!=0;)x.push(0,I)}for(g=0;g<32;g++)p.q[g]=p.S[g]<<3|p.T[g],p.c[g]=p.p[g]<<4|p.z[g];m(p._,144,8),m(p._,112,9),m(p._,24,7),m(p._,8,8),h.H.n(p._,9),h.H.A(p._,9,p.J),h.H.l(p._,9),m(p.$,32,5),h.H.n(p.$,5),h.H.A(p.$,5,p.h),h.H.l(p.$,5),m(p.Q,19,0),m(p.C,286,0),m(p.D,30,0),m(p.v,320,0)}(),h.H.N}();function a(h){return[1,null,3,1,2,null,4][h.ctype]*h.depth}function o(h,p,g,m,x){let w=a(p);const I=Math.ceil(m*w/8);let C,P;w=Math.ceil(w/8);let B=h[g],V=0;if(B>1&&(h[g]=[0,0,1][B-2]),B==3)for(V=w;V<I;V++)h[V+1]=h[V+1]+(h[V+1-w]>>>1)&255;for(let Y=0;Y<x;Y++)if(C=g+Y*I,P=C+Y+1,B=h[P-1],V=0,B==0)for(;V<I;V++)h[C+V]=h[P+V];else if(B==1){for(;V<w;V++)h[C+V]=h[P+V];for(;V<I;V++)h[C+V]=h[P+V]+h[C+V-w]}else if(B==2)for(;V<I;V++)h[C+V]=h[P+V]+h[C+V-I];else if(B==3){for(;V<w;V++)h[C+V]=h[P+V]+(h[C+V-I]>>>1);for(;V<I;V++)h[C+V]=h[P+V]+(h[C+V-I]+h[C+V-w]>>>1)}else{for(;V<w;V++)h[C+V]=h[P+V]+s(0,h[C+V-I],0);for(;V<I;V++)h[C+V]=h[P+V]+s(h[C+V-w],h[C+V-I],h[C+V-w-I])}return h}function s(h,p,g){const m=h+p-g,x=m-h,w=m-p,I=m-g;return x*x<=w*w&&x*x<=I*I?h:w*w<=I*I?p:g}function u(h,p,g){g.width=n.readUint(h,p),p+=4,g.height=n.readUint(h,p),p+=4,g.depth=h[p],p++,g.ctype=h[p],p++,g.compress=h[p],p++,g.filter=h[p],p++,g.interlace=h[p],p++}function f(h,p,g,m,x,w,I,C,P){const B=Math.min(p,x),V=Math.min(g,w);let Y=0,q=0;for(let ne=0;ne<V;ne++)for(let U=0;U<B;U++)if(I>=0&&C>=0?(Y=ne*p+U<<2,q=(C+ne)*x+I+U<<2):(Y=(-C+ne)*p-I+U<<2,q=ne*x+U<<2),P==0)m[q]=h[Y],m[q+1]=h[Y+1],m[q+2]=h[Y+2],m[q+3]=h[Y+3];else if(P==1){var D=h[Y+3]*.00392156862745098,A=h[Y]*D,T=h[Y+1]*D,k=h[Y+2]*D,R=m[q+3]*(1/255),L=m[q]*R,j=m[q+1]*R,H=m[q+2]*R;const z=1-D,ee=D+R*z,le=ee==0?0:1/ee;m[q+3]=255*ee,m[q+0]=(A+L*z)*le,m[q+1]=(T+j*z)*le,m[q+2]=(k+H*z)*le}else if(P==2)D=h[Y+3],A=h[Y],T=h[Y+1],k=h[Y+2],R=m[q+3],L=m[q],j=m[q+1],H=m[q+2],D==R&&A==L&&T==j&&k==H?(m[q]=0,m[q+1]=0,m[q+2]=0,m[q+3]=0):(m[q]=A,m[q+1]=T,m[q+2]=k,m[q+3]=D);else if(P==3){if(D=h[Y+3],A=h[Y],T=h[Y+1],k=h[Y+2],R=m[q+3],L=m[q],j=m[q+1],H=m[q+2],D==R&&A==L&&T==j&&k==H)continue;if(D<220&&R>20)return!1}return!0}return{decode:function(p){const g=new Uint8Array(p);let m=8;const x=n,w=x.readUshort,I=x.readUint,C={tabs:{},frames:[]},P=new Uint8Array(g.length);let B,V=0,Y=0;const q=[137,80,78,71,13,10,26,10];for(var D=0;D<8;D++)if(g[D]!=q[D])throw"The input is not a PNG file!";for(;m<g.length;){const ne=x.readUint(g,m);m+=4;const U=x.readASCII(g,m,4);if(m+=4,U=="IHDR")u(g,m,C);else if(U=="iCCP"){for(var A=m;g[A]!=0;)A++;x.readASCII(g,m,A-m),g[A+1];const z=g.slice(A+2,m+ne);let ee=null;try{ee=r(z)}catch{ee=i(z)}C.tabs[U]=ee}else if(U=="CgBI")C.tabs[U]=g.slice(m,m+4);else if(U=="IDAT"){for(D=0;D<ne;D++)P[V+D]=g[m+D];V+=ne}else if(U=="acTL")C.tabs[U]={num_frames:I(g,m),num_plays:I(g,m+4)},B=new Uint8Array(g.length);else if(U=="fcTL"){Y!=0&&((H=C.frames[C.frames.length-1]).data=t(C,B.slice(0,Y),H.rect.width,H.rect.height),Y=0);const z={x:I(g,m+12),y:I(g,m+16),width:I(g,m+4),height:I(g,m+8)};let ee=w(g,m+22);ee=w(g,m+20)/(ee==0?100:ee);const le={rect:z,delay:Math.round(1e3*ee),dispose:g[m+24],blend:g[m+25]};C.frames.push(le)}else if(U=="fdAT"){for(D=0;D<ne-4;D++)B[Y+D]=g[m+D+4];Y+=ne-4}else if(U=="pHYs")C.tabs[U]=[x.readUint(g,m),x.readUint(g,m+4),g[m+8]];else if(U=="cHRM")for(C.tabs[U]=[],D=0;D<8;D++)C.tabs[U].push(x.readUint(g,m+4*D));else if(U=="tEXt"||U=="zTXt"){C.tabs[U]==null&&(C.tabs[U]={});var T=x.nextZero(g,m),k=x.readASCII(g,m,T-m),R=m+ne-T-1;if(U=="tEXt")j=x.readASCII(g,T+1,R);else{var L=r(g.slice(T+2,T+2+R));j=x.readUTF8(L,0,L.length)}C.tabs[U][k]=j}else if(U=="iTXt"){C.tabs[U]==null&&(C.tabs[U]={}),T=0,A=m,T=x.nextZero(g,A),k=x.readASCII(g,A,T-A);const z=g[A=T+1];var j;g[A+1],A+=2,T=x.nextZero(g,A),x.readASCII(g,A,T-A),A=T+1,T=x.nextZero(g,A),x.readUTF8(g,A,T-A),R=ne-((A=T+1)-m),z==0?j=x.readUTF8(g,A,R):(L=r(g.slice(A,A+R)),j=x.readUTF8(L,0,L.length)),C.tabs[U][k]=j}else if(U=="PLTE")C.tabs[U]=x.readBytes(g,m,ne);else if(U=="hIST"){const z=C.tabs.PLTE.length/3;for(C.tabs[U]=[],D=0;D<z;D++)C.tabs[U].push(w(g,m+2*D))}else if(U=="tRNS")C.ctype==3?C.tabs[U]=x.readBytes(g,m,ne):C.ctype==0?C.tabs[U]=w(g,m):C.ctype==2&&(C.tabs[U]=[w(g,m),w(g,m+2),w(g,m+4)]);else if(U=="gAMA")C.tabs[U]=x.readUint(g,m)/1e5;else if(U=="sRGB")C.tabs[U]=g[m];else if(U=="bKGD")C.ctype==0||C.ctype==4?C.tabs[U]=[w(g,m)]:C.ctype==2||C.ctype==6?C.tabs[U]=[w(g,m),w(g,m+2),w(g,m+4)]:C.ctype==3&&(C.tabs[U]=g[m]);else if(U=="IEND")break;m+=ne,x.readUint(g,m),m+=4}var H;return Y!=0&&((H=C.frames[C.frames.length-1]).data=t(C,B.slice(0,Y),H.rect.width,H.rect.height)),C.data=t(C,P,C.width,C.height),delete C.compress,delete C.interlace,delete C.filter,C},toRGBA8:function(p){const g=p.width,m=p.height;if(p.tabs.acTL==null)return[e(p.data,g,m,p).buffer];const x=[];p.frames[0].data==null&&(p.frames[0].data=p.data);const w=g*m*4,I=new Uint8Array(w),C=new Uint8Array(w),P=new Uint8Array(w);for(let V=0;V<p.frames.length;V++){const Y=p.frames[V],q=Y.rect.x,D=Y.rect.y,A=Y.rect.width,T=Y.rect.height,k=e(Y.data,A,T,p);if(V!=0)for(var B=0;B<w;B++)P[B]=I[B];if(Y.blend==0?f(k,A,T,I,g,m,q,D,0):Y.blend==1&&f(k,A,T,I,g,m,q,D,1),x.push(I.buffer.slice(0)),Y.dispose!=0){if(Y.dispose==1)f(C,A,T,I,g,m,q,D,0);else if(Y.dispose==2)for(B=0;B<w;B++)I[B]=P[B]}}return x},_paeth:s,_copyTile:f,_bin:n}}();(function(){const{_copyTile:n}=rl,{_bin:e}=rl,t=rl._paeth;var r={table:function(){const A=new Uint32Array(256);for(let T=0;T<256;T++){let k=T;for(let R=0;R<8;R++)1&k?k=3988292384^k>>>1:k>>>=1;A[T]=k}return A}(),update(A,T,k,R){for(let L=0;L<R;L++)A=r.table[255&(A^T[k+L])]^A>>>8;return A},crc:(A,T,k)=>4294967295^r.update(4294967295,A,T,k)};function i(A,T,k,R){T[k]+=A[0]*R>>4,T[k+1]+=A[1]*R>>4,T[k+2]+=A[2]*R>>4,T[k+3]+=A[3]*R>>4}function a(A){return Math.max(0,Math.min(255,A))}function o(A,T){const k=A[0]-T[0],R=A[1]-T[1],L=A[2]-T[2],j=A[3]-T[3];return k*k+R*R+L*L+j*j}function s(A,T,k,R,L,j,H){H==null&&(H=1);const ne=R.length,U=[];for(var z=0;z<ne;z++){const ie=R[z];U.push([ie>>>0&255,ie>>>8&255,ie>>>16&255,ie>>>24&255])}for(z=0;z<ne;z++){let ie=4294967295;for(var ee=0,le=0;le<ne;le++){var $=o(U[z],U[le]);le!=z&&$<ie&&(ie=$,ee=le)}}const ve=new Uint32Array(L.buffer),G=new Int16Array(T*k*4),Q=[0,8,2,10,12,4,14,6,3,11,1,9,15,7,13,5];for(z=0;z<Q.length;z++)Q[z]=255*((Q[z]+.5)/16-.5);for(let ie=0;ie<k;ie++)for(let de=0;de<T;de++){var te;z=4*(ie*T+de),H!=2?te=[a(A[z]+G[z]),a(A[z+1]+G[z+1]),a(A[z+2]+G[z+2]),a(A[z+3]+G[z+3])]:($=Q[4*(3&ie)+(3&de)],te=[a(A[z]+$),a(A[z+1]+$),a(A[z+2]+$),a(A[z+3]+$)]),ee=0;let Ae=16777215;for(le=0;le<ne;le++){const We=o(te,U[le]);We<Ae&&(Ae=We,ee=le)}const be=U[ee],Te=[te[0]-be[0],te[1]-be[1],te[2]-be[2],te[3]-be[3]];H==1&&(de!=T-1&&i(Te,G,z+4,7),ie!=k-1&&(de!=0&&i(Te,G,z+4*T-4,3),i(Te,G,z+4*T,5),de!=T-1&&i(Te,G,z+4*T+4,1))),j[z>>2]=ee,ve[z>>2]=R[ee]}}function u(A,T,k,R,L){L==null&&(L={});const{crc:j}=r,H=e.writeUint,ne=e.writeUshort,U=e.writeASCII;let z=8;const ee=A.frames.length>1;let le,$=!1,ve=33+(ee?20:0);if(L.sRGB!=null&&(ve+=13),L.pHYs!=null&&(ve+=21),L.iCCP!=null&&(le=pako.deflate(L.iCCP),ve+=21+le.length+4),A.ctype==3){for(var G=A.plte.length,Q=0;Q<G;Q++)A.plte[Q]>>>24!=255&&($=!0);ve+=8+3*G+4+($?8+1*G+4:0)}for(var te=0;te<A.frames.length;te++)ee&&(ve+=38),ve+=(be=A.frames[te]).cimg.length+12,te!=0&&(ve+=4);ve+=12;const ie=new Uint8Array(ve),de=[137,80,78,71,13,10,26,10];for(Q=0;Q<8;Q++)ie[Q]=de[Q];if(H(ie,z,13),z+=4,U(ie,z,"IHDR"),z+=4,H(ie,z,T),z+=4,H(ie,z,k),z+=4,ie[z]=A.depth,z++,ie[z]=A.ctype,z++,ie[z]=0,z++,ie[z]=0,z++,ie[z]=0,z++,H(ie,z,j(ie,z-17,17)),z+=4,L.sRGB!=null&&(H(ie,z,1),z+=4,U(ie,z,"sRGB"),z+=4,ie[z]=L.sRGB,z++,H(ie,z,j(ie,z-5,5)),z+=4),L.iCCP!=null){const Te=13+le.length;H(ie,z,Te),z+=4,U(ie,z,"iCCP"),z+=4,U(ie,z,"ICC profile"),z+=11,z+=2,ie.set(le,z),z+=le.length,H(ie,z,j(ie,z-(Te+4),Te+4)),z+=4}if(L.pHYs!=null&&(H(ie,z,9),z+=4,U(ie,z,"pHYs"),z+=4,H(ie,z,L.pHYs[0]),z+=4,H(ie,z,L.pHYs[1]),z+=4,ie[z]=L.pHYs[2],z++,H(ie,z,j(ie,z-13,13)),z+=4),ee&&(H(ie,z,8),z+=4,U(ie,z,"acTL"),z+=4,H(ie,z,A.frames.length),z+=4,H(ie,z,L.loop!=null?L.loop:0),z+=4,H(ie,z,j(ie,z-12,12)),z+=4),A.ctype==3){for(H(ie,z,3*(G=A.plte.length)),z+=4,U(ie,z,"PLTE"),z+=4,Q=0;Q<G;Q++){const Te=3*Q,We=A.plte[Q],He=255&We,rt=We>>>8&255,st=We>>>16&255;ie[z+Te+0]=He,ie[z+Te+1]=rt,ie[z+Te+2]=st}if(z+=3*G,H(ie,z,j(ie,z-3*G-4,3*G+4)),z+=4,$){for(H(ie,z,G),z+=4,U(ie,z,"tRNS"),z+=4,Q=0;Q<G;Q++)ie[z+Q]=A.plte[Q]>>>24&255;z+=G,H(ie,z,j(ie,z-G-4,G+4)),z+=4}}let Ae=0;for(te=0;te<A.frames.length;te++){var be=A.frames[te];ee&&(H(ie,z,26),z+=4,U(ie,z,"fcTL"),z+=4,H(ie,z,Ae++),z+=4,H(ie,z,be.rect.width),z+=4,H(ie,z,be.rect.height),z+=4,H(ie,z,be.rect.x),z+=4,H(ie,z,be.rect.y),z+=4,ne(ie,z,R[te]),z+=2,ne(ie,z,1e3),z+=2,ie[z]=be.dispose,z++,ie[z]=be.blend,z++,H(ie,z,j(ie,z-30,30)),z+=4);const Te=be.cimg;H(ie,z,(G=Te.length)+(te==0?0:4)),z+=4;const We=z;U(ie,z,te==0?"IDAT":"fdAT"),z+=4,te!=0&&(H(ie,z,Ae++),z+=4),ie.set(Te,z),z+=G,H(ie,z,j(ie,We,z-We)),z+=4}return H(ie,z,0),z+=4,U(ie,z,"IEND"),z+=4,H(ie,z,j(ie,z-4,4)),z+=4,ie.buffer}function f(A,T,k){for(let R=0;R<A.frames.length;R++){const L=A.frames[R];L.rect.width;const j=L.rect.height,H=new Uint8Array(j*L.bpl+j);L.cimg=m(L.img,j,L.bpp,L.bpl,H,T,k)}}function h(A,T,k,R,L){const j=L[0],H=L[1],ne=L[2],U=L[3],z=L[4],ee=L[5];let le=6,$=8,ve=255;for(var G=0;G<A.length;G++){const me=new Uint8Array(A[G]);for(var Q=me.length,te=0;te<Q;te+=4)ve&=me[te+3]}const ie=ve!=255,de=function(gt,lt,Xe,it,at,ot){const ct=[];for(var mt=0;mt<gt.length;mt++){const Dt=new Uint8Array(gt[mt]),ut=new Uint32Array(Dt.buffer);var Rt;let vn=0,zt=0,Yn=lt,Kt=Xe,An=it?1:0;if(mt!=0){const pi=ot||it||mt==1||ct[mt-2].dispose!=0?1:2;let on=0,pa=1e9;for(let Cn=0;Cn<pi;Cn++){var _t=new Uint8Array(gt[mt-1-Cn]);const Mr=new Uint32Array(gt[mt-1-Cn]);let sr=lt,yn=Xe,Tt=-1,nn=-1;for(let Mn=0;Mn<Xe;Mn++)for(let pr=0;pr<lt;pr++)ut[Nt=Mn*lt+pr]!=Mr[Nt]&&(pr<sr&&(sr=pr),pr>Tt&&(Tt=pr),Mn<yn&&(yn=Mn),Mn>nn&&(nn=Mn));Tt==-1&&(sr=yn=Tt=nn=0),at&&((1&sr)==1&&sr--,(1&yn)==1&&yn--);const Si=(Tt-sr+1)*(nn-yn+1);Si<pa&&(pa=Si,on=Cn,vn=sr,zt=yn,Yn=Tt-sr+1,Kt=nn-yn+1)}_t=new Uint8Array(gt[mt-1-on]),on==1&&(ct[mt-1].dispose=2),Rt=new Uint8Array(Yn*Kt*4),n(_t,lt,Xe,Rt,Yn,Kt,-vn,-zt,0),An=n(Dt,lt,Xe,Rt,Yn,Kt,-vn,-zt,3)?1:0,An==1?g(Dt,lt,Xe,Rt,{x:vn,y:zt,width:Yn,height:Kt}):n(Dt,lt,Xe,Rt,Yn,Kt,-vn,-zt,0)}else Rt=Dt.slice(0);ct.push({rect:{x:vn,y:zt,width:Yn,height:Kt},img:Rt,blend:An,dispose:0})}if(it)for(mt=0;mt<ct.length;mt++){if((xt=ct[mt]).blend==1)continue;const Dt=xt.rect,ut=ct[mt-1].rect,vn=Math.min(Dt.x,ut.x),zt=Math.min(Dt.y,ut.y),Yn={x:vn,y:zt,width:Math.max(Dt.x+Dt.width,ut.x+ut.width)-vn,height:Math.max(Dt.y+Dt.height,ut.y+ut.height)-zt};ct[mt-1].dispose=1,mt-1!=0&&p(gt,lt,Xe,ct,mt-1,Yn,at),p(gt,lt,Xe,ct,mt,Yn,at)}let bt=0;if(gt.length!=1)for(var Nt=0;Nt<ct.length;Nt++){var xt;bt+=(xt=ct[Nt]).rect.width*xt.rect.height}return ct}(A,T,k,j,H,ne),Ae={},be=[],Te=[];if(R!=0){const me=[];for(te=0;te<de.length;te++)me.push(de[te].img.buffer);const gt=function(at){let ot=0;for(var ct=0;ct<at.length;ct++)ot+=at[ct].byteLength;const mt=new Uint8Array(ot);let Rt=0;for(ct=0;ct<at.length;ct++){const _t=new Uint8Array(at[ct]),bt=_t.length;for(let Nt=0;Nt<bt;Nt+=4){let xt=_t[Nt],Dt=_t[Nt+1],ut=_t[Nt+2];const vn=_t[Nt+3];vn==0&&(xt=Dt=ut=0),mt[Rt+Nt]=xt,mt[Rt+Nt+1]=Dt,mt[Rt+Nt+2]=ut,mt[Rt+Nt+3]=vn}Rt+=bt}return mt.buffer}(me),lt=w(gt,R);for(te=0;te<lt.plte.length;te++)be.push(lt.plte[te].est.rgba);let Xe=0;for(te=0;te<de.length;te++){const it=(He=de[te]).img.length;var We=new Uint8Array(lt.inds.buffer,Xe>>2,it>>2);Te.push(We);const at=new Uint8Array(lt.abuf,Xe,it);ee&&s(He.img,He.rect.width,He.rect.height,be,at,We),He.img.set(at),Xe+=it}}else for(G=0;G<de.length;G++){var He=de[G];const me=new Uint32Array(He.img.buffer);var rt=He.rect.width;for(Q=me.length,We=new Uint8Array(Q),Te.push(We),te=0;te<Q;te++){const gt=me[te];if(te!=0&&gt==me[te-1])We[te]=We[te-1];else if(te>rt&&gt==me[te-rt])We[te]=We[te-rt];else{let lt=Ae[gt];if(lt==null&&(Ae[gt]=lt=be.length,be.push(gt),be.length>=300))break;We[te]=lt}}}const st=be.length;for(st<=256&&z==0&&($=st<=2?1:st<=4?2:st<=16?4:8,$=Math.max($,U)),G=0;G<de.length;G++){(He=de[G]).rect.x,He.rect.y,rt=He.rect.width;const me=He.rect.height;let gt=He.img;new Uint32Array(gt.buffer);let lt=4*rt,Xe=4;if(st<=256&&z==0){lt=Math.ceil($*rt/8);var wt=new Uint8Array(lt*me);const it=Te[G];for(let at=0;at<me;at++){te=at*lt;const ot=at*rt;if($==8)for(var Be=0;Be<rt;Be++)wt[te+Be]=it[ot+Be];else if($==4)for(Be=0;Be<rt;Be++)wt[te+(Be>>1)]|=it[ot+Be]<<4-4*(1&Be);else if($==2)for(Be=0;Be<rt;Be++)wt[te+(Be>>2)]|=it[ot+Be]<<6-2*(3&Be);else if($==1)for(Be=0;Be<rt;Be++)wt[te+(Be>>3)]|=it[ot+Be]<<7-1*(7&Be)}gt=wt,le=3,Xe=1}else if(ie==0&&de.length==1){wt=new Uint8Array(rt*me*3);const it=rt*me;for(te=0;te<it;te++){const at=3*te,ot=4*te;wt[at]=gt[ot],wt[at+1]=gt[ot+1],wt[at+2]=gt[ot+2]}gt=wt,le=2,Xe=3,lt=3*rt}He.img=gt,He.bpl=lt,He.bpp=Xe}return{ctype:le,depth:$,plte:be,frames:de}}function p(A,T,k,R,L,j,H){const ne=Uint8Array,U=Uint32Array,z=new ne(A[L-1]),ee=new U(A[L-1]),le=L+1<A.length?new ne(A[L+1]):null,$=new ne(A[L]),ve=new U($.buffer);let G=T,Q=k,te=-1,ie=-1;for(let Ae=0;Ae<j.height;Ae++)for(let be=0;be<j.width;be++){const Te=j.x+be,We=j.y+Ae,He=We*T+Te,rt=ve[He];rt==0||R[L-1].dispose==0&&ee[He]==rt&&(le==null||le[4*He+3]!=0)||(Te<G&&(G=Te),Te>te&&(te=Te),We<Q&&(Q=We),We>ie&&(ie=We))}te==-1&&(G=Q=te=ie=0),H&&((1&G)==1&&G--,(1&Q)==1&&Q--),j={x:G,y:Q,width:te-G+1,height:ie-Q+1};const de=R[L];de.rect=j,de.blend=1,de.img=new Uint8Array(j.width*j.height*4),R[L-1].dispose==0?(n(z,T,k,de.img,j.width,j.height,-j.x,-j.y,0),g($,T,k,de.img,j)):n($,T,k,de.img,j.width,j.height,-j.x,-j.y,0)}function g(A,T,k,R,L){n(A,T,k,R,L.width,L.height,-L.x,-L.y,2)}function m(A,T,k,R,L,j,H){const ne=[];let U,z=[0,1,2,3,4];j!=-1?z=[j]:(T*R>5e5||k==1)&&(z=[0]),H&&(U={level:0});const ee=SV;for(var le=0;le<z.length;le++){for(let G=0;G<T;G++)x(L,A,G,R,k,z[le]);ne.push(ee.deflate(L,U))}let $,ve=1e9;for(le=0;le<ne.length;le++)ne[le].length<ve&&($=le,ve=ne[le].length);return ne[$]}function x(A,T,k,R,L,j){const H=k*R;let ne=H+k;if(A[ne]=j,ne++,j==0)if(R<500)for(var U=0;U<R;U++)A[ne+U]=T[H+U];else A.set(new Uint8Array(T.buffer,H,R),ne);else if(j==1){for(U=0;U<L;U++)A[ne+U]=T[H+U];for(U=L;U<R;U++)A[ne+U]=T[H+U]-T[H+U-L]+256&255}else if(k==0){for(U=0;U<L;U++)A[ne+U]=T[H+U];if(j==2)for(U=L;U<R;U++)A[ne+U]=T[H+U];if(j==3)for(U=L;U<R;U++)A[ne+U]=T[H+U]-(T[H+U-L]>>1)+256&255;if(j==4)for(U=L;U<R;U++)A[ne+U]=T[H+U]-t(T[H+U-L],0,0)+256&255}else{if(j==2)for(U=0;U<R;U++)A[ne+U]=T[H+U]+256-T[H+U-R]&255;if(j==3){for(U=0;U<L;U++)A[ne+U]=T[H+U]+256-(T[H+U-R]>>1)&255;for(U=L;U<R;U++)A[ne+U]=T[H+U]+256-(T[H+U-R]+T[H+U-L]>>1)&255}if(j==4){for(U=0;U<L;U++)A[ne+U]=T[H+U]+256-t(0,T[H+U-R],0)&255;for(U=L;U<R;U++)A[ne+U]=T[H+U]+256-t(T[H+U-L],T[H+U-R],T[H+U-L-R])&255}}}function w(A,T){const k=new Uint8Array(A),R=k.slice(0),L=new Uint32Array(R.buffer),j=I(R,T),H=j[0],ne=j[1],U=k.length,z=new Uint8Array(U>>2);let ee;if(k.length<2e7)for(var le=0;le<U;le+=4)ee=C(H,$=k[le]*(1/255),ve=k[le+1]*(1/255),G=k[le+2]*(1/255),Q=k[le+3]*(1/255)),z[le>>2]=ee.ind,L[le>>2]=ee.est.rgba;else for(le=0;le<U;le+=4){var $=k[le]*.00392156862745098,ve=k[le+1]*(1/255),G=k[le+2]*(1/255),Q=k[le+3]*(1/255);for(ee=H;ee.left;)ee=P(ee.est,$,ve,G,Q)<=0?ee.left:ee.right;z[le>>2]=ee.ind,L[le>>2]=ee.est.rgba}return{abuf:R.buffer,inds:z,plte:ne}}function I(A,T,k){k==null&&(k=1e-4);const R=new Uint32Array(A.buffer),L={i0:0,i1:A.length,bst:null,est:null,tdst:0,left:null,right:null};L.bst=Y(A,L.i0,L.i1),L.est=q(L.bst);const j=[L];for(;j.length<T;){let ne=0,U=0;for(var H=0;H<j.length;H++)j[H].est.L>ne&&(ne=j[H].est.L,U=H);if(ne<k)break;const z=j[U],ee=B(A,R,z.i0,z.i1,z.est.e,z.est.eMq255);if(z.i0>=ee||z.i1<=ee){z.est.L=0;continue}const le={i0:z.i0,i1:ee,bst:null,est:null,tdst:0,left:null,right:null};le.bst=Y(A,le.i0,le.i1),le.est=q(le.bst);const $={i0:ee,i1:z.i1,bst:null,est:null,tdst:0,left:null,right:null};for($.bst={R:[],m:[],N:z.bst.N-le.bst.N},H=0;H<16;H++)$.bst.R[H]=z.bst.R[H]-le.bst.R[H];for(H=0;H<4;H++)$.bst.m[H]=z.bst.m[H]-le.bst.m[H];$.est=q($.bst),z.left=le,z.right=$,j[U]=le,j.push($)}for(j.sort((ne,U)=>U.bst.N-ne.bst.N),H=0;H<j.length;H++)j[H].ind=H;return[L,j]}function C(A,T,k,R,L){if(A.left==null)return A.tdst=function(le,$,ve,G,Q){const te=$-le[0],ie=ve-le[1],de=G-le[2],Ae=Q-le[3];return te*te+ie*ie+de*de+Ae*Ae}(A.est.q,T,k,R,L),A;const j=P(A.est,T,k,R,L);let H=A.left,ne=A.right;j>0&&(H=A.right,ne=A.left);const U=C(H,T,k,R,L);if(U.tdst<=j*j)return U;const z=C(ne,T,k,R,L);return z.tdst<U.tdst?z:U}function P(A,T,k,R,L){const{e:j}=A;return j[0]*T+j[1]*k+j[2]*R+j[3]*L-A.eMq}function B(A,T,k,R,L,j){for(R-=4;k<R;){for(;V(A,k,L)<=j;)k+=4;for(;V(A,R,L)>j;)R-=4;if(k>=R)break;const H=T[k>>2];T[k>>2]=T[R>>2],T[R>>2]=H,k+=4,R-=4}for(;V(A,k,L)>j;)k-=4;return k+4}function V(A,T,k){return A[T]*k[0]+A[T+1]*k[1]+A[T+2]*k[2]+A[T+3]*k[3]}function Y(A,T,k){const R=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],L=[0,0,0,0],j=k-T>>2;for(let H=T;H<k;H+=4){const ne=A[H]*.00392156862745098,U=A[H+1]*(1/255),z=A[H+2]*(1/255),ee=A[H+3]*(1/255);L[0]+=ne,L[1]+=U,L[2]+=z,L[3]+=ee,R[0]+=ne*ne,R[1]+=ne*U,R[2]+=ne*z,R[3]+=ne*ee,R[5]+=U*U,R[6]+=U*z,R[7]+=U*ee,R[10]+=z*z,R[11]+=z*ee,R[15]+=ee*ee}return R[4]=R[1],R[8]=R[2],R[9]=R[6],R[12]=R[3],R[13]=R[7],R[14]=R[11],{R,m:L,N:j}}function q(A){const{R:T}=A,{m:k}=A,{N:R}=A,L=k[0],j=k[1],H=k[2],ne=k[3],U=R==0?0:1/R,z=[T[0]-L*L*U,T[1]-L*j*U,T[2]-L*H*U,T[3]-L*ne*U,T[4]-j*L*U,T[5]-j*j*U,T[6]-j*H*U,T[7]-j*ne*U,T[8]-H*L*U,T[9]-H*j*U,T[10]-H*H*U,T[11]-H*ne*U,T[12]-ne*L*U,T[13]-ne*j*U,T[14]-ne*H*U,T[15]-ne*ne*U],ee=z,le=D;let $=[Math.random(),Math.random(),Math.random(),Math.random()],ve=0,G=0;if(R!=0)for(let te=0;te<16&&($=le.multVec(ee,$),G=Math.sqrt(le.dot($,$)),$=le.sml(1/G,$),!(te!=0&&Math.abs(G-ve)<1e-9));te++)ve=G;const Q=[L*U,j*U,H*U,ne*U];return{Cov:z,q:Q,e:$,L:ve,eMq255:le.dot(le.sml(255,Q),$),eMq:le.dot($,Q),rgba:(Math.round(255*Q[3])<<24|Math.round(255*Q[2])<<16|Math.round(255*Q[1])<<8|Math.round(255*Q[0])<<0)>>>0}}var D={multVec:(A,T)=>[A[0]*T[0]+A[1]*T[1]+A[2]*T[2]+A[3]*T[3],A[4]*T[0]+A[5]*T[1]+A[6]*T[2]+A[7]*T[3],A[8]*T[0]+A[9]*T[1]+A[10]*T[2]+A[11]*T[3],A[12]*T[0]+A[13]*T[1]+A[14]*T[2]+A[15]*T[3]],dot:(A,T)=>A[0]*T[0]+A[1]*T[1]+A[2]*T[2]+A[3]*T[3],sml:(A,T)=>[A*T[0],A*T[1],A*T[2],A*T[3]]};rl.encode=function(T,k,R,L,j,H,ne){L==null&&(L=0),ne==null&&(ne=!1);const U=h(T,k,R,L,[!1,!1,!1,0,ne,!1]);return f(U,-1),u(U,k,R,j,H)},rl.encodeLL=function(T,k,R,L,j,H,ne,U){const z={ctype:0+(L==1?0:2)+(j==0?0:4),depth:H,frames:[]},ee=(L+j)*H,le=ee*k;for(let $=0;$<T.length;$++)z.frames.push({rect:{x:0,y:0,width:k,height:R},img:new Uint8Array(T[$]),blend:0,dispose:1,bpp:Math.ceil(ee/8),bpl:Math.ceil(le/8)});return f(z,0,!0),u(z,k,R,ne,U)},rl.encode.compress=h,rl.encode.dither=s,rl.quantize=w,rl.quantize.getKDtree=I,rl.quantize.getNearest=C})();const $S={toArrayBuffer(n,e){const t=n.width,r=n.height,i=t<<2,a=n.getContext("2d").getImageData(0,0,t,r),o=new Uint32Array(a.data.buffer),s=(32*t+31)/32<<2,u=s*r,f=122+u,h=new ArrayBuffer(f),p=new DataView(h),g=1<<20;let m,x,w,I,C=g,P=0,B=0,V=0;function Y(A){p.setUint16(B,A,!0),B+=2}function q(A){p.setUint32(B,A,!0),B+=4}function D(A){B+=A}Y(19778),q(f),D(4),q(122),q(108),q(t),q(-r>>>0),Y(1),Y(32),q(3),q(u),q(2835),q(2835),D(8),q(16711680),q(65280),q(255),q(4278190080),q(1466527264),function A(){for(;P<r&&C>0;){for(I=122+P*s,m=0;m<i;)C--,x=o[V++],w=x>>>24,p.setUint32(I+m,x<<8|w),m+=4;P++}V<o.length?(C=g,setTimeout(A,$S._dly)):e(h)}()},toBlob(n,e){this.toArrayBuffer(n,t=>{e(new Blob([t],{type:"image/bmp"}))})},_dly:9};var vo={CHROME:"CHROME",FIREFOX:"FIREFOX",DESKTOP_SAFARI:"DESKTOP_SAFARI",IE:"IE",IOS:"IOS",ETC:"ETC"},CV={[vo.CHROME]:16384,[vo.FIREFOX]:11180,[vo.DESKTOP_SAFARI]:16384,[vo.IE]:8192,[vo.IOS]:4096,[vo.ETC]:8192};const gx=typeof window<"u",XS=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,jg=gx&&window.cordova&&window.cordova.require&&window.cordova.require("cordova/modulemapper"),TV=(gx||XS)&&(jg&&jg.getOriginalSymbol(window,"File")||typeof File<"u"&&File),YS=(gx||XS)&&(jg&&jg.getOriginalSymbol(window,"FileReader")||typeof FileReader<"u"&&FileReader);function mx(n,e,t=Date.now()){return new Promise(r=>{const i=n.split(","),a=i[0].match(/:(.*?);/)[1],o=globalThis.atob(i[1]);let s=o.length;const u=new Uint8Array(s);for(;s--;)u[s]=o.charCodeAt(s);const f=new Blob([u],{type:a});f.name=e,f.lastModified=t,r(f)})}function KS(n){return new Promise((e,t)=>{const r=new YS;r.onload=()=>e(r.result),r.onerror=i=>t(i),r.readAsDataURL(n)})}function QS(n){return new Promise((e,t)=>{const r=new Image;r.onload=()=>e(r),r.onerror=i=>t(i),r.src=n})}function Qf(){if(Qf.cachedResult!==void 0)return Qf.cachedResult;let n=vo.ETC;const{userAgent:e}=navigator;return/Chrom(e|ium)/i.test(e)?n=vo.CHROME:/iP(ad|od|hone)/i.test(e)&&/WebKit/i.test(e)?n=vo.IOS:/Safari/i.test(e)?n=vo.DESKTOP_SAFARI:/Firefox/i.test(e)?n=vo.FIREFOX:(/MSIE/i.test(e)||document.documentMode)&&(n=vo.IE),Qf.cachedResult=n,Qf.cachedResult}function ZS(n,e){const t=Qf(),r=CV[t];let i=n,a=e,o=i*a;const s=i>a?a/i:i/a;for(;o>r*r;){const u=(r+i)/2,f=(r+a)/2;u<f?(a=f,i=f*s):(a=u*s,i=u),o=i*a}return{width:i,height:a}}function Mm(n,e){let t,r;try{if(t=new OffscreenCanvas(n,e),r=t.getContext("2d"),r===null)throw new Error("getContext of OffscreenCanvas returns null")}catch{t=document.createElement("canvas"),r=t.getContext("2d")}return t.width=n,t.height=e,[t,r]}function JS(n,e){const{width:t,height:r}=ZS(n.width,n.height),[i,a]=Mm(t,r);return e&&/jpe?g/.test(e)&&(a.fillStyle="white",a.fillRect(0,0,i.width,i.height)),a.drawImage(n,0,0,i.width,i.height),i}function ig(){return ig.cachedResult!==void 0||(ig.cachedResult=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&typeof document<"u"&&"ontouchend"in document),ig.cachedResult}function Fg(n,e={}){return new Promise(function(t,r){let i,a;var o=function(){try{return a=JS(i,e.fileType||n.type),t([i,a])}catch(u){return r(u)}},s=function(u){try{var f=function(h){try{throw h}catch(p){return r(p)}};try{let h;return KS(n).then(function(p){try{return h=p,QS(h).then(function(g){try{return i=g,function(){try{return o()}catch(m){return r(m)}}()}catch(m){return f(m)}},f)}catch(g){return f(g)}},f)}catch(h){f(h)}}catch(h){return r(h)}};try{if(ig()||[vo.DESKTOP_SAFARI,vo.MOBILE_SAFARI].includes(Qf()))throw new Error("Skip createImageBitmap on IOS and Safari");return createImageBitmap(n).then(function(u){try{return i=u,o()}catch{return s()}},s)}catch{s()}})}function Ug(n,e,t,r,i=1){return new Promise(function(a,o){let s;if(e==="image/png"){let f,h,p;return f=n.getContext("2d"),{data:h}=f.getImageData(0,0,n.width,n.height),p=rl.encode([h.buffer],n.width,n.height,4096*i),s=new Blob([p],{type:e}),s.name=t,s.lastModified=r,u.call(this)}{let f=function(){return u.call(this)};if(e==="image/bmp")return new Promise(h=>$S.toBlob(n,h)).then((function(h){try{return s=h,s.name=t,s.lastModified=r,f.call(this)}catch(p){return o(p)}}).bind(this),o);{let h=function(){return f.call(this)};if(typeof OffscreenCanvas=="function"&&n instanceof OffscreenCanvas)return n.convertToBlob({type:e,quality:i}).then((function(p){try{return s=p,s.name=t,s.lastModified=r,h.call(this)}catch(g){return o(g)}}).bind(this),o);{let p;return p=n.toDataURL(e,i),mx(p,t,r).then((function(g){try{return s=g,h.call(this)}catch(m){return o(m)}}).bind(this),o)}}}function u(){return a(s)}})}function $l(n){n.width=0,n.height=0}function od(){return new Promise(function(n,e){let t,r,i,a;return od.cachedResult!==void 0?n(od.cachedResult):mx("data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q==","test.jpg",Date.now()).then(function(o){try{return t=o,Fg(t).then(function(s){try{return r=s[1],Ug(r,t.type,t.name,t.lastModified).then(function(u){try{return i=u,$l(r),Fg(i).then(function(f){try{return a=f[0],od.cachedResult=a.width===1&&a.height===2,n(od.cachedResult)}catch(h){return e(h)}},e)}catch(f){return e(f)}},e)}catch(u){return e(u)}},e)}catch(s){return e(s)}},e)})}function e8(n){return new Promise((e,t)=>{const r=new YS;r.onload=i=>{const a=new DataView(i.target.result);if(a.getUint16(0,!1)!=65496)return e(-2);const o=a.byteLength;let s=2;for(;s<o;){if(a.getUint16(s+2,!1)<=8)return e(-1);const u=a.getUint16(s,!1);if(s+=2,u==65505){if(a.getUint32(s+=2,!1)!=1165519206)return e(-1);const f=a.getUint16(s+=6,!1)==18761;s+=a.getUint32(s+4,f);const h=a.getUint16(s,f);s+=2;for(let p=0;p<h;p++)if(a.getUint16(s+12*p,f)==274)return e(a.getUint16(s+12*p+8,f))}else{if((65280&u)!=65280)break;s+=a.getUint16(s,!1)}}return e(-1)},r.onerror=i=>t(i),r.readAsArrayBuffer(n)})}function t8(n,e){const{width:t}=n,{height:r}=n,{maxWidthOrHeight:i}=e;let a,o=n;return isFinite(i)&&(t>i||r>i)&&([o,a]=Mm(t,r),t>r?(o.width=i,o.height=r/t*i):(o.width=t/r*i,o.height=i),a.drawImage(n,0,0,o.width,o.height),$l(n)),o}function n8(n,e){const{width:t}=n,{height:r}=n,[i,a]=Mm(t,r);switch(e>4&&e<9?(i.width=r,i.height=t):(i.width=t,i.height=r),e){case 2:a.transform(-1,0,0,1,t,0);break;case 3:a.transform(-1,0,0,-1,t,r);break;case 4:a.transform(1,0,0,-1,0,r);break;case 5:a.transform(0,1,1,0,0,0);break;case 6:a.transform(0,1,-1,0,r,0);break;case 7:a.transform(0,-1,-1,0,r,t);break;case 8:a.transform(0,-1,1,0,0,t)}return a.drawImage(n,0,0,t,r),$l(n),i}function d4(n,e,t=0){return new Promise(function(r,i){let a,o,s,u,f,h,p,g,m,x,w,I,C,P,B,V,Y,q,D,A;function T(R=5){if(e.signal&&e.signal.aborted)throw e.signal.reason;a+=R,e.onProgress(Math.min(a,100))}function k(R){if(e.signal&&e.signal.aborted)throw e.signal.reason;a=Math.min(Math.max(R,a),100),e.onProgress(a)}return a=t,o=e.maxIteration||10,s=1024*e.maxSizeMB*1024,T(),Fg(n,e).then((function(R){try{return[,u]=R,T(),f=t8(u,e),T(),new Promise(function(L,j){var H;if(!(H=e.exifOrientation))return e8(n).then((function(U){try{return H=U,ne.call(this)}catch(z){return j(z)}}).bind(this),j);function ne(){return L(H)}return ne.call(this)}).then((function(L){try{return h=L,T(),od().then((function(j){try{return p=j?f:n8(f,h),T(),g=e.initialQuality||1,m=e.fileType||n.type,Ug(p,m,n.name,n.lastModified,g).then((function(H){try{{let U=function(){if(o--&&(B>s||B>C)){let ee,le;return ee=A?.95*D.width:D.width,le=A?.95*D.height:D.height,[Y,q]=Mm(ee,le),q.drawImage(D,0,0,ee,le),g*=m==="image/png"?.85:.95,Ug(Y,m,n.name,n.lastModified,g).then(function($){try{return V=$,$l(D),D=Y,B=V.size,k(Math.min(99,Math.floor((P-B)/(P-s)*100))),U}catch(ve){return i(ve)}},i)}return[1]},z=function(){return $l(D),$l(Y),$l(f),$l(p),$l(u),k(100),r(V)};if(x=H,T(),w=x.size>s,I=x.size>n.size,!w&&!I)return k(100),r(x);var ne;return C=n.size,P=x.size,B=P,D=p,A=!e.alwaysKeepResolution&&w,(ne=(function(ee){for(;ee;){if(ee.then)return void ee.then(ne,i);try{if(ee.pop){if(ee.length)return ee.pop()?z.call(this):ee;ee=U}else ee=ee.call(this)}catch(le){return i(le)}}}).bind(this))(U)}}catch(U){return i(U)}}).bind(this),i)}catch(H){return i(H)}}).bind(this),i)}catch(j){return i(j)}}).bind(this),i)}catch(L){return i(L)}}).bind(this),i)})}const IV=`
let scriptImported = false
self.addEventListener('message', async (e) => {
  const { file, id, imageCompressionLibUrl, options } = e.data
  options.onProgress = (progress) => self.postMessage({ progress, id })
  try {
    if (!scriptImported) {
      // console.log('[worker] importScripts', imageCompressionLibUrl)
      self.importScripts(imageCompressionLibUrl)
      scriptImported = true
    }
    // console.log('[worker] self', self)
    const compressedFile = await imageCompression(file, options)
    self.postMessage({ file: compressedFile, id })
  } catch (e) {
    // console.error('[worker] error', e)
    self.postMessage({ error: e.message + '\\n' + e.stack, id })
  }
})
`;let Iv;function RV(n,e){return new Promise((t,r)=>{Iv||(Iv=function(o){const s=[];return s.push(o),URL.createObjectURL(new Blob(s))}(IV));const i=new Worker(Iv);i.addEventListener("message",function(o){if(e.signal&&e.signal.aborted)i.terminate();else if(o.data.progress===void 0){if(o.data.error)return r(new Error(o.data.error)),void i.terminate();t(o.data.file),i.terminate()}else e.onProgress(o.data.progress)}),i.addEventListener("error",r),e.signal&&e.signal.addEventListener("abort",()=>{r(e.signal.reason),i.terminate()}),i.postMessage({file:n,imageCompressionLibUrl:e.libURL,options:{...e,onProgress:void 0,signal:void 0}})})}function Oa(n,e){return new Promise(function(t,r){let i,a,o,s,u,f;if(i={...e},o=0,{onProgress:s}=i,i.maxSizeMB=i.maxSizeMB||Number.POSITIVE_INFINITY,u=typeof i.useWebWorker!="boolean"||i.useWebWorker,delete i.useWebWorker,i.onProgress=m=>{o=m,typeof s=="function"&&s(o)},!(n instanceof Blob||n instanceof TV))return r(new Error("The file given is not an instance of Blob or File"));if(!/^image/.test(n.type))return r(new Error("The file given is not an image"));if(f=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,!u||typeof Worker!="function"||f)return d4(n,i).then((function(m){try{return a=m,g.call(this)}catch(x){return r(x)}}).bind(this),r);var h=(function(){try{return g.call(this)}catch(m){return r(m)}}).bind(this),p=function(m){try{return d4(n,i).then(function(x){try{return a=x,h()}catch(w){return r(w)}},r)}catch(x){return r(x)}};try{return i.libURL=i.libURL||"https://cdn.jsdelivr.net/npm/browser-image-compression@2.0.2/dist/browser-image-compression.js",RV(n,i).then(function(m){try{return a=m,h()}catch{return p()}},p)}catch{p()}function g(){try{a.name=n.name,a.lastModified=n.lastModified}catch{}try{i.preserveExif&&n.type==="image/jpeg"&&(!i.fileType||i.fileType&&i.fileType===n.type)&&(a=GS(n,a))}catch{}return t(a)}})}Oa.getDataUrlFromFile=KS,Oa.getFilefromDataUrl=mx,Oa.loadImage=QS,Oa.drawImageInCanvas=JS,Oa.drawFileInCanvas=Fg,Oa.canvasToFile=Ug,Oa.getExifOrientation=e8,Oa.handleMaxWidthOrHeight=t8,Oa.followExifOrientation=n8,Oa.cleanupCanvasMemory=$l,Oa.isAutoOrientationInBrowser=od,Oa.approximateBelowMaximumCanvasSizeOfBrowser=ZS,Oa.copyExifWithoutOrientation=GS,Oa.getBrowserName=Qf,Oa.version="2.0.2";const l0=n=>n.images&&Array.isArray(n.images)?{...n,images:n.images.filter(e=>e&&e.trim()),primaryImage:n.images[0]||null}:n.imageUrl&&n.imageUrl.trim()?{...n,images:[n.imageUrl],primaryImage:n.imageUrl}:{...n,images:[],primaryImage:null},NV=n=>l0(n).primaryImage,r8=n=>l0(n).images,DV=async(n,e,t,r,i)=>{try{console.log("🔄 מתחיל migration של מוצרים קיימים...");const a=await r(i(n,"items")),o=[];a.docs.forEach(s=>{const u=s.data();u.images&&Array.isArray(u.images)||u.imageUrl&&u.imageUrl.trim()&&o.push({id:s.id,images:[u.imageUrl]})}),console.log(`📊 נמצאו ${o.length} מוצרים לעדכון`);for(const s of o)await e(t(n,"items",s.id),{images:s.images}),console.log(`✅ עודכן מוצר: ${s.id}`);return console.log("🎉 Migration הושלם בהצלחה!"),{success:!0,updatedCount:o.length}}catch(a){return console.error("❌ שגיאה ב-migration:",a),{success:!1,error:a.message}}},Vg=({item:n,width:e="100%",height:t="200px",showNavigation:r=!0,className:i="",style:a={},borderRadius:o="8px"})=>{const s=r8(n),[u,f]=ge.useState(0),[h,p]=ge.useState(!1),[g,m]=ge.useState(!1);if(ge.useEffect(()=>{const C=()=>{const P=window.innerWidth<=768,B=window.location.pathname.includes("/management")||document.querySelector(".product-card-mobile")!==null||i.includes("management")||a.managementMode===!0;p(P),m(B)};return C(),window.addEventListener("resize",C),()=>window.removeEventListener("resize",C)},[i,a]),s.length===0)return E.jsx("div",{style:{width:e,height:t,borderRadius:o,border:"1px solid #e5e7eb",display:"flex",alignItems:"center",justifyContent:"center",background:"#f9fafb",...a},className:i,children:E.jsx("img",{src:"/no-image-available.png",alt:"אין תמונה זמינה",style:{maxWidth:"80%",maxHeight:"80%",objectFit:"contain",opacity:.5}})});if(s.length===1)return E.jsx("div",{style:{width:e,height:t,borderRadius:o,overflow:"hidden",position:"relative",...a},className:i,children:E.jsx("img",{src:s[0],alt:n.name||"תמונת מוצר",style:{width:"100%",height:"100%",objectFit:"contain",background:"white"}})});const x=()=>{f(C=>(C+1)%s.length)},w=()=>{f(C=>(C-1+s.length)%s.length)},I=C=>{f(C)};return E.jsxs("div",{style:{width:e,height:t,borderRadius:o,overflow:"hidden",position:"relative",background:"#f3f4f6",...a},className:i,children:[E.jsx("img",{src:s[u],alt:`${n.name||"מוצר"} - תמונה ${u+1}`,style:{width:"100%",height:"100%",objectFit:"contain",transition:"opacity 0.3s ease",background:"white"}}),s.length>1&&E.jsx(E.Fragment,{children:h&&g?E.jsx("button",{onClick:x,style:{position:"absolute",right:"8px",bottom:"8px",background:"rgba(255, 255, 255, 0.9)",color:"#333",border:"1px solid rgba(0,0,0,0.1)",borderRadius:"50%",width:"28px",height:"28px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",zIndex:10,fontSize:"14px",fontWeight:"bold",boxShadow:"0 2px 4px rgba(0,0,0,0.2)"},"aria-label":"תמונה הבאה",children:"›"}):E.jsxs(E.Fragment,{children:[E.jsx("button",{onClick:w,style:{position:"absolute",left:"2px",top:"50%",transform:"translateY(-50%)",background:"rgba(0, 0, 0, 0.7)",color:"white",border:"none",borderRadius:"50%",width:"36px",height:"36px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",transition:"all 0.2s ease",zIndex:10},onMouseEnter:C=>{C.currentTarget.style.background="rgba(0, 0, 0, 0.9)",C.currentTarget.style.transform="translateY(-50%) scale(1.1)"},onMouseLeave:C=>{C.currentTarget.style.background="rgba(0, 0, 0, 0.7)",C.currentTarget.style.transform="translateY(-50%) scale(1)"},"aria-label":"תמונה קודמת",children:E.jsx(DS,{size:20})}),E.jsx("button",{onClick:x,style:{position:"absolute",right:"2px",top:"50%",transform:"translateY(-50%)",background:"rgba(0, 0, 0, 0.7)",color:"white",border:"none",borderRadius:"50%",width:"36px",height:"36px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",transition:"all 0.2s ease",zIndex:10},onMouseEnter:C=>{C.currentTarget.style.background="rgba(0, 0, 0, 0.9)",C.currentTarget.style.transform="translateY(-50%) scale(1.1)"},onMouseLeave:C=>{C.currentTarget.style.background="rgba(0, 0, 0, 0.7)",C.currentTarget.style.transform="translateY(-50%) scale(1)"},"aria-label":"תמונה הבאה",children:E.jsx(OS,{size:20})})]})}),!(h&&g)&&s.length>1&&s.length<=5&&E.jsx("div",{style:{position:"absolute",bottom:"4px",left:"50%",transform:"translateX(-50%)",display:"flex",gap:"6px",zIndex:10},children:s.map((C,P)=>E.jsx("button",{onClick:()=>I(P),style:{width:"8px",height:"8px",borderRadius:"50%",border:"none",background:P===u?"white":"rgba(255, 255, 255, 0.5)",cursor:"pointer",transition:"all 0.2s ease"},"aria-label":`תמונה ${P+1}`},P))}),!(h&&g)&&s.length>5&&E.jsxs("div",{style:{position:"absolute",bottom:"4px",right:"4px",background:"rgba(0, 0, 0, 0.7)",color:"white",padding:"4px 8px",borderRadius:"10px",fontSize:"12px",fontWeight:"bold",zIndex:10},children:[u+1," / ",s.length]}),h&&g&&s.length>1&&E.jsx("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",zIndex:5},onTouchStart:C=>{const P=C.touches[0];C.currentTarget.startX=P.clientX},onTouchEnd:C=>{const P=C.changedTouches[0];if(!C.currentTarget.startX)return;const B=C.currentTarget.startX-P.clientX;Math.abs(B)>50&&(B>0?x():w())}}),h&&g&&s.length>1&&E.jsxs("div",{style:{position:"absolute",bottom:"2px",right:"2px",background:"rgba(0, 0, 0, 0.5)",color:"white",padding:"1px 4px",borderRadius:"4px",fontSize:"8px",zIndex:10},children:[u+1,"/",s.length]}),E.jsx("div",{tabIndex:0,onKeyDown:C=>{C.key==="ArrowRight"&&x(),C.key==="ArrowLeft"&&w()},style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",outline:"none"},"aria-label":"גלריית תמונות - השתמש בחצים לניווט"})]})},OV=async n=>{const e="https://api.cloudinary.com/v1_1/dpegnxew7/image/upload",t=new FormData;return t.append("file",n),t.append("upload_preset","GmachSystem"),(await(await fetch(e,{method:"POST",body:t})).json()).secure_url},PV=({editingItem:n,name:e,quantity:t,imageUrl:r,imageFile:i,onNameChange:a,onQuantityChange:o,onImageUrlChange:s,onImageFileChange:u,onCancel:f,onSubmit:h,publicComment:p,internalComment:g,onPublicCommentChange:m,onInternalCommentChange:x})=>{const w=ge.useRef(null),[I,C]=ge.useState([]),[P,B]=ge.useState(!1);ge.useEffect(()=>{if(n){const k=r8(n);C(k.map((R,L)=>({id:Date.now()+L,url:R,isUploaded:!0})))}else C([])},[n]),ge.useEffect(()=>{const k=L=>{w.current&&!w.current.contains(L.target)&&f()},R=L=>{L.key==="Escape"&&f()};return document.addEventListener("mousedown",k),document.addEventListener("keydown",R),()=>{document.removeEventListener("mousedown",k),document.removeEventListener("keydown",R)}},[f]);const V=()=>{if(r&&r.trim()){const k={id:Date.now(),url:r.trim(),isUploaded:!0};C(R=>[...R,k]),s({target:{value:""}})}},Y=async k=>{if(k){B(!0);try{const R=await Oa(k,{maxSizeMB:.5,maxWidthOrHeight:1024,useWebWorker:!0}),L=await OV(R),j={id:Date.now(),url:L,isUploaded:!0};C(H=>[...H,j]),mn.success("התמונה הועלתה בהצלחה!")}catch(R){mn.error("שגיאה בהעלאת התמונה: "+R.message)}finally{B(!1)}}},q=k=>{C(R=>R.filter(L=>L.id!==k))},D=k=>{k!==0&&C(R=>{const L=[...R];return[L[k-1],L[k]]=[L[k],L[k-1]],L})},A=k=>{k!==I.length-1&&C(R=>{const L=[...R];return[L[k],L[k+1]]=[L[k+1],L[k]],L})},T=async k=>{k.preventDefault();const R=I.map(j=>j.url);R[0];const L={name:e,quantity:t,publicComment:p,internalComment:g,images:R,imageUrl:R[0]||null};await h(k,L)};return E.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3,direction:"ltr",padding:"1rem"},children:E.jsxs("div",{ref:w,style:{position:"relative",background:"white",padding:"2rem",borderRadius:"12px",width:"95%",maxWidth:"600px",direction:"rtl",textAlign:"initial",maxHeight:"90vh",overflowY:"auto",boxSizing:"border-box"},children:[E.jsx("button",{onClick:f,style:{position:"absolute",top:"1rem",right:"1rem",background:"none",border:"none",fontSize:"1.8rem",cursor:"pointer",lineHeight:1,color:"#666",width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center"},"aria-label":"סגור",children:"×"}),E.jsx("h3",{style:{textAlign:"center",marginBottom:"2rem",fontSize:"1.5rem",color:"#333"},children:n?"עריכת מוצר":"הוספת מוצר חדש"}),E.jsxs("form",{onSubmit:T,children:[E.jsxs("div",{style:C1,children:[E.jsx("label",{style:T1,children:"שם המוצר:"}),E.jsx("input",{dir:"rtl",type:"text",value:e,onChange:a,required:!0,style:Xh})]}),E.jsxs("div",{style:C1,children:[E.jsx("label",{style:T1,children:"כמות:"}),E.jsx("input",{dir:"rtl",type:"number",value:t,onChange:o,required:!0,style:Xh})]}),E.jsxs("div",{style:C1,children:[E.jsx("label",{style:T1,children:"הערה לפרסום (חיצונית):"}),E.jsx("input",{dir:"rtl",type:"text",value:p,onChange:m,style:Xh})]}),E.jsxs("div",{style:C1,children:[E.jsx("label",{style:T1,children:"הערה פנימית:"}),E.jsx("input",{dir:"rtl",type:"text",value:g,onChange:x,style:Xh})]}),E.jsxs("div",{style:C1,children:[E.jsx("label",{style:T1,children:"תמונות המוצר:"}),E.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"1rem"},children:[E.jsx("input",{dir:"rtl",type:"text",value:r,onChange:s,placeholder:"הדבק כתובת תמונה (URL)",style:{...Xh,flex:1,margin:0}}),E.jsx("button",{type:"button",onClick:V,disabled:!r.trim(),style:{padding:"8px 12px",backgroundColor:r.trim()?"#1976d2":"#ccc",color:"white",border:"none",borderRadius:"6px",cursor:r.trim()?"pointer":"not-allowed",whiteSpace:"nowrap"},children:"הוסף"})]}),E.jsxs("div",{style:{marginBottom:"1rem"},children:[E.jsx("input",{type:"file",accept:"image/*",onChange:k=>{const R=k.target.files[0];R&&(Y(R),k.target.value="")},style:{...Xh,padding:"8px"},disabled:P}),P&&E.jsx("div",{style:{fontSize:"0.875rem",color:"#1976d2",marginTop:"0.5rem"},children:"מעלה תמונה..."})]}),I.length>0&&E.jsxs("div",{style:{marginBottom:"1rem"},children:[E.jsxs("h4",{style:{fontSize:"1rem",marginBottom:"0.5rem"},children:["תמונות (",I.length,")"]}),E.jsx("div",{style:{marginBottom:"1rem"},children:E.jsx(Vg,{item:{images:I.map(k=>k.url)},width:"100%",height:"200px",showNavigation:!0})}),E.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(120px, 1fr))",gap:"0.5rem"},children:I.map((k,R)=>E.jsxs("div",{style:{border:"1px solid #e5e7eb",borderRadius:"8px",padding:"0.5rem",background:"#f9fafb",position:"relative"},children:[E.jsx("img",{src:k.url,alt:`תמונה ${R+1}`,style:{width:"100%",height:"80px",objectFit:"cover",borderRadius:"4px",marginBottom:"0.5rem"}}),E.jsx("div",{style:{position:"absolute",top:"0.5rem",right:"0.5rem",background:"rgba(0,0,0,0.7)",color:"white",borderRadius:"50%",width:"20px",height:"20px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"0.75rem",fontWeight:"bold"},children:R+1}),E.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:"0.25rem"},children:[E.jsx("button",{type:"button",onClick:()=>D(R),disabled:R===0,style:{padding:"2px 4px",fontSize:"0.75rem",backgroundColor:R===0?"#ccc":"#1976d2",color:"white",border:"none",borderRadius:"4px",cursor:R===0?"not-allowed":"pointer",flex:1},children:"↑"}),E.jsx("button",{type:"button",onClick:()=>A(R),disabled:R===I.length-1,style:{padding:"2px 4px",fontSize:"0.75rem",backgroundColor:R===I.length-1?"#ccc":"#1976d2",color:"white",border:"none",borderRadius:"4px",cursor:R===I.length-1?"not-allowed":"pointer",flex:1},children:"↓"}),E.jsx("button",{type:"button",onClick:()=>q(k.id),style:{padding:"2px 4px",fontSize:"0.75rem",backgroundColor:"#dc3545",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",flex:1},children:"✕"})]})]},k.id))})]})]}),E.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"center",marginTop:"2rem",flexWrap:"wrap"},children:[E.jsx("button",{type:"submit",disabled:P,style:{...LV,minWidth:"120px",opacity:P?.6:1,cursor:P?"not-allowed":"pointer"},children:P?"מעלה...":n?"שמור שינויים":"הוסף מוצר"}),E.jsx("button",{type:"button",onClick:f,disabled:P,style:{...kV,minWidth:"120px",opacity:P?.6:1,cursor:P?"not-allowed":"pointer"},children:"ביטול"})]})]})]})})},C1={marginBottom:"1.5rem",width:"100%"},T1={display:"block",marginBottom:"0.5rem",fontWeight:"600",color:"#333",fontSize:"1rem"},Xh={width:"100%",padding:"12px",borderRadius:"8px",border:"2px solid #e0e0e0",fontSize:"16px",boxSizing:"border-box",transition:"border-color 0.2s ease",backgroundColor:"#fff",fontFamily:"inherit",outline:"none"},LV={padding:"12px 20px",backgroundColor:"#1976d2",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"16px",fontWeight:"600",transition:"background-color 0.2s ease",flex:"1",maxWidth:"200px"},kV={padding:"12px 20px",backgroundColor:"#6c757d",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"16px",fontWeight:"600",transition:"background-color 0.2s ease",flex:"1",maxWidth:"200px"};var i8={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},p4=kn.createContext&&kn.createContext(i8),MV=["attr","size","title"];function BV(n,e){if(n==null)return{};var t=jV(n,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function jV(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}function zg(){return zg=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},zg.apply(this,arguments)}function g4(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function qg(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?g4(Object(t),!0).forEach(function(r){FV(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):g4(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function FV(n,e,t){return e=UV(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function UV(n){var e=VV(n,"string");return typeof e=="symbol"?e:e+""}function VV(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function a8(n){return n&&n.map((e,t)=>kn.createElement(e.tag,qg({key:t},e.attr),a8(e.child)))}function Bm(n){return e=>kn.createElement(zV,zg({attr:qg({},n.attr)},e),a8(n.child))}function zV(n){var e=t=>{var{attr:r,size:i,title:a}=n,o=BV(n,MV),s=i||t.size||"1em",u;return t.className&&(u=t.className),n.className&&(u=(u?u+" ":"")+n.className),kn.createElement("svg",zg({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,r,o,{className:u,style:qg(qg({color:n.color||t.color},t.style),n.style),height:s,width:s,xmlns:"http://www.w3.org/2000/svg"}),a&&kn.createElement("title",null,a),n.children)};return p4!==void 0?kn.createElement(p4.Consumer,null,t=>e(t)):e(i8)}function qV(n){return Bm({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M402.6 83.2l90.2 90.2c3.8 3.8 3.8 10 0 13.8L274.4 405.6l-92.8 10.3c-12.4 1.4-22.9-9.1-21.5-21.5l10.3-92.8L388.8 83.2c3.8-3.8 10-3.8 13.8 0zm162-22.9l-48.8-48.8c-15.2-15.2-39.9-15.2-55.2 0l-35.4 35.4c-3.8 3.8-3.8 10 0 13.8l90.2 90.2c3.8 3.8 10 3.8 13.8 0l35.4-35.4c15.2-15.3 15.2-40 0-55.2zM384 346.2V448H64V128h229.8c3.2 0 6.2-1.3 8.5-3.5l40-40c7.6-7.6 2.2-20.5-8.5-20.5H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V306.2c0-10.7-12.9-16-20.5-8.5l-40 40c-2.2 2.3-3.5 5.3-3.5 8.5z"},child:[]}]})(n)}function HV(n){return Bm({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"},child:[]}]})(n)}function m4(n){return Bm({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16zM53.2 467a48 48 0 0 0 47.9 45h245.8a48 48 0 0 0 47.9-45L416 128H32z"},child:[]}]})(n)}function WV(n){return Bm({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M212.333 224.333H12c-6.627 0-12-5.373-12-12V12C0 5.373 5.373 0 12 0h48c6.627 0 12 5.373 12 12v78.112C117.773 39.279 184.26 7.47 258.175 8.007c136.906.994 246.448 111.623 246.157 248.532C504.041 393.258 393.12 504 256.333 504c-64.089 0-122.496-24.313-166.51-64.215-5.099-4.622-5.334-12.554-.467-17.42l33.967-33.967c4.474-4.474 11.662-4.717 16.401-.525C170.76 415.336 211.58 432 256.333 432c97.268 0 176-78.716 176-176 0-97.267-78.716-176-176-176-58.496 0-110.28 28.476-142.274 72.333h98.274c6.627 0 12 5.373 12 12v48c0 6.627-5.373 12-12 12z"},child:[]}]})(n)}const GV=()=>{const[n,e]=ge.useState(""),[t,r]=ge.useState(""),[i,a]=ge.useState([]),[o,s]=ge.useState([]),[u,f]=ge.useState(""),[h,p]=ge.useState(""),[g,m]=ge.useState(null),[x,w]=ge.useState(""),[I,C]=ge.useState(!1),[P,B]=ge.useState(!1),[V,Y]=ge.useState(null),[q,D]=ge.useState(""),[A,T]=ge.useState(""),{user:k}=xf(),R=(k==null?void 0:k.username)||"משתמש לא ידוע",L=ge.useRef(null);ge.useEffect(()=>{const $=document.createElement("style");return $.innerHTML=`
      input[type=number]::-webkit-inner-spin-button,
      input[type=number]::-webkit-outer-spin-button {
        -webkit-appearance: none;
        margin: 0;
      }
      input[type=number] { -moz-appearance: textfield; }
      
      /* רספונסיביות משופרת */
      .products-grid-mobile {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
        gap: 1.2rem;
        padding: 0;
      }
      
      .product-card-mobile {
        min-height: 380px;
        padding: 1rem;
      }
      
      .product-card-mobile img {
        height: 140px;
      }
      
      .product-card-mobile h3 {
        font-size: 1rem;
        margin: 0.5rem 0;
      }
      
      .product-card-mobile p {
        font-size: 0.875rem;
        margin: 0.25rem 0;
      }
      
      .product-card-mobile .button-group {
        flex-direction: row;
        gap: 0.5rem;
        width: 100%;
      }
      
      .product-card-mobile button {
        font-size: 0.8rem;
        padding: 6px 10px;
        flex: 1;
      }
      
      /* מובייל בלבד */
      @media (max-width: 768px) {
        .products-grid-mobile {
          grid-template-columns: 1fr 1fr !important;
          gap: 0.75rem !important;
          padding: 0 0.5rem;
        }
        
        .product-card-mobile {
          min-height: 320px !important;
          padding: 0.75rem !important;
        }
        
        .product-card-mobile img {
          height: 100px !important;
        }
        
        .product-card-mobile h3 {
          font-size: 0.9rem !important;
          margin: 0.5rem 0 !important;
        }
        
        .product-card-mobile p {
          font-size: 0.8rem !important;
          margin: 0.25rem 0 !important;
        }
        
        .product-card-mobile .button-group {
          flex-direction: column !important;
          gap: 0.3rem !important;
        }
        
        .product-card-mobile button {
          font-size: 0.75rem !important;
          padding: 4px 8px !important;
          width: 100% !important;
        }
      }
    `,document.head.appendChild($),()=>document.head.removeChild($)},[]);const j=async()=>{const ve=(await yr(On(kt,"orders"))).docs.map(ie=>ie.data()).filter(ie=>ie.status==="open"),G=new Set;ve.forEach(ie=>{var de;(de=ie.items)==null||de.forEach(Ae=>{G.add(Ae.id)})});const te=(await yr(On(kt,"items"))).docs.filter(ie=>ie.data().isDeleted!==!0).map(ie=>{const de=ie.data(),Ae=l0(de);return{id:ie.id,...Ae,inUse:G.has(ie.id)}});a(te)},H=async()=>{const ve=(await yr(On(kt,"deletedItems"))).docs.map(G=>{const Q=G.data();return{id:G.id,...l0(Q)}});s(ve)};ge.useEffect(()=>{const $=async()=>{try{console.log("🔄 בדיקת migration למבנה תמונות חדש...");const G=await DV(kt,Qa,Ar,yr,On);console.log("📊 תוצאות migration:",G)}catch{console.log("⚠️ Migration כבר רץ או שאין צורך בו")}};localStorage.getItem("imagesMigrationComplete")?(j(),H()):$().then(()=>{localStorage.setItem("imagesMigrationComplete","true"),j(),H()})},[]),ge.useEffect(()=>{const $=G=>{P&&L.current&&!L.current.contains(G.target)&&B(!1)},ve=G=>{G.key==="Escape"&&B(!1)};return document.addEventListener("mousedown",$),document.addEventListener("keydown",ve),()=>{document.removeEventListener("mousedown",$),document.removeEventListener("keydown",ve)}},[P]);const ne=i.filter($=>$.name.toLowerCase().includes(u.toLowerCase())),U=o.filter($=>$.name.toLowerCase().includes(h.toLowerCase())),z=async $=>{if(window.confirm("האם את/ה בטוח/ה שברצונך למחוק את המוצר?"))try{await NF($,R),mn.success("המוצר הוסר מהרשימה."),j(),H()}catch{mn.error("שגיאה במחיקת המוצר")}},ee=async $=>{if(window.confirm("האם ברצונך להשיב את המוצר למלאי?"))try{await DF($,R),mn.success("המוצר הושב למלאי בהצלחה."),j(),H()}catch{mn.error("שגיאה בהחזרת המוצר")}},le=async($,ve=null)=>{var G,Q;$.preventDefault();try{const te=ve||{name:n,quantity:parseInt(t),images:x?[x]:[],imageUrl:x,publicComment:q,internalComment:A},ie=Gu(On(kt,"items"),Ju("name","==",te.name.trim())),de=await yr(ie);if(V)await Qa(Ar(kt,"items",V.id),{name:te.name,quantity:parseInt(te.quantity),images:te.images||[],imageUrl:((G=te.images)==null?void 0:G[0])||null,publicComment:te.publicComment,internalComment:te.internalComment,updatedBy:R,updatedAt:Ai()}),mn.success("המוצר עודכן בהצלחה");else if(de.empty)await a4({name:te.name,quantity:parseInt(te.quantity),images:te.images||[],imageUrl:((Q=te.images)==null?void 0:Q[0])||null,publicComment:te.publicComment,internalComment:te.internalComment,createdBy:R,updatedBy:R,createdAt:Ai(),updatedAt:Ai()}),mn.success(`המוצר "${te.name}" נוסף בהצלחה`);else{const Ae=de.docs[0].data();wV.confirmAlert({title:"המוצר כבר קיים",message:`המוצר "${te.name}" כבר קיים בכמות ${Ae.quantity}.
האם להוסיף ${te.quantity}?`,buttons:[{label:"כן",onClick:async()=>{var be;await a4({name:te.name,quantity:parseInt(te.quantity),images:te.images||[],imageUrl:((be=te.images)==null?void 0:be[0])||null,publicComment:te.publicComment,internalComment:te.internalComment,createdBy:R,updatedBy:R,createdAt:Ai(),updatedAt:Ai()}),mn.success("הכמות עודכנה בהצלחה"),j(),H()}},{label:"לא",onClick:()=>mn.info("בוטל")}]});return}e(""),r(""),m(null),w(""),D(""),T(""),C(!1),Y(null),j(),H()}catch(te){console.error("שגיאה בהוספת המוצר:",te),mn.error("הוספת המוצר נכשלה")}};return E.jsxs("div",{className:"page-container",style:{padding:"1rem",direction:"rtl"},children:[E.jsxs("div",{style:{width:"100%"},children:[E.jsx("h2",{children:"ניהול מוצרים"}),E.jsxs("div",{style:{display:"flex",justifyContent:"flex-start",gap:"1rem",marginBottom:"1rem",flexWrap:"wrap"},children:[E.jsxs("button",{onClick:()=>{Y(null),e(""),r(""),w(""),m(null),C(!0),D(""),T("")},className:"btn-primary",style:{backgroundColor:"#1976d2",color:"white",border:"none",borderRadius:"6px",padding:"8px 12px",fontSize:"14px",display:"flex",alignItems:"center",gap:"6px",cursor:"pointer"},children:[E.jsx(HV,{size:14})," הוספת מוצר"]}),E.jsxs("button",{onClick:()=>B(!0),className:"btn-secondary",style:{backgroundColor:"#6c757d",color:"white",border:"none",borderRadius:"6px",padding:"8px 12px",fontSize:"14px",display:"flex",alignItems:"center",gap:"6px",cursor:"pointer"},children:[E.jsx(m4,{size:14})," מוצרים שנמחקו"]})]}),E.jsx("input",{type:"text",dir:"rtl",placeholder:"חיפוש מוצר...",value:u,onChange:$=>f($.target.value),className:"search-input",style:{padding:"10px",borderRadius:"6px",fontSize:"1rem",border:"1px solid #ccc",width:"100%",marginBottom:"1rem",boxSizing:"border-box"}}),E.jsx("div",{className:"products-grid-mobile",children:ne.length===0?E.jsx("p",{style:{gridColumn:"1 / -1",textAlign:"center"},children:"לא נמצא מוצרים במלאי."}):ne.map($=>E.jsxs("div",{className:"product-card product-card-mobile",style:{width:"100%",border:"1px solid #e0e0e0",borderRadius:"10px",backgroundColor:"#fff",padding:"1rem",boxShadow:"0 2px 6px rgba(0,0,0,0.06)",display:"flex",flexDirection:"column",justifyContent:"space-between",alignItems:"center",textAlign:"center",transition:"transform 0.2s",boxSizing:"border-box"},children:[E.jsx(Vg,{item:$,width:"100%",height:"140px",showNavigation:!0,style:{marginBottom:"0.5rem"}}),E.jsx("h3",{style:{margin:"0.5rem 0",fontSize:"1rem"},children:$.name}),E.jsxs("p",{style:{margin:"0.25rem 0"},children:["כמות: ",$.quantity]}),$.internalComment&&E.jsxs("p",{style:{fontSize:"0.8rem",color:"#999",marginTop:"0.25rem",margin:"0.25rem 0"},children:["📌 ",$.internalComment]}),E.jsxs("p",{style:{fontSize:"0.85rem",color:"#555",margin:"0.25rem 0"},children:["מזהה מוצר: ",$.ItemId]}),$.inUse&&E.jsx("p",{style:{color:"#d97706",fontWeight:"bold",fontSize:"0.85rem",margin:"0.25rem 0"},children:"🕐 מוצר זה נמצא בהזמנה פעילה"}),E.jsxs("div",{className:"button-group",style:{display:"flex",gap:"0.5rem",marginTop:"auto",width:"100%"},children:[E.jsxs("button",{onClick:()=>{Y($),e($.name),r($.quantity.toString()),w(NV($)||""),m(null),C(!0),D($.publicComment||""),T($.internalComment||"")},style:{backgroundColor:"#6c757d",color:"white",border:"none",padding:"6px 10px",borderRadius:"5px",fontSize:"14px",display:"flex",alignItems:"center",justifyContent:"center",gap:"6px",cursor:"pointer",flex:"1"},children:[E.jsx(qV,{size:14})," עריכה"]}),E.jsxs("button",{onClick:()=>z($.id),style:{backgroundColor:"#d32f2f",color:"white",border:"none",padding:"6px 10px",borderRadius:"5px",fontSize:"14px",display:"flex",alignItems:"center",justifyContent:"center",gap:"6px",cursor:"pointer",flex:"1"},children:[E.jsx(m4,{size:14})," מחיקה"]})]})]},$.id))})]}),P&&E.jsx("div",{className:"modal-overlay",style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3,padding:"1rem"},children:E.jsxs("div",{className:"modal-content",ref:L,style:{position:"relative",backgroundColor:"white",borderRadius:"8px",width:"90%",maxWidth:"800px",maxHeight:"80%",overflowY:"auto",padding:"2rem",direction:"rtl"},children:[E.jsx("h2",{children:"מוצרים שנמחקו"}),E.jsx("button",{onClick:()=>B(!1),style:{position:"absolute",top:"1rem",right:"1rem",background:"none",border:"none",fontSize:"1.5rem",cursor:"pointer"},children:"×"}),E.jsx("input",{type:"text",dir:"rtl",placeholder:"חיפוש מוצרים שנמחקו...",value:h,onChange:$=>p($.target.value),className:"search-input",style:{padding:"10px",borderRadius:"6px",fontSize:"1rem",border:"1px solid #ccc",width:"100%",margin:"1rem 0",boxSizing:"border-box"}}),E.jsx("div",{className:"products-grid-mobile",children:U.length===0?E.jsx("p",{style:{gridColumn:"1 / -1",textAlign:"center"},children:"אין פריטים שנמחקו."}):U.map($=>E.jsxs("div",{className:"product-card-mobile",style:{width:"100%",border:"1px solid #e0e0e0",borderRadius:"10px",backgroundColor:"#fff",padding:"1rem",boxShadow:"0 2px 6px rgba(0,0,0,0.06)",display:"flex",flexDirection:"column",justifyContent:"space-between",alignItems:"center",textAlign:"center",boxSizing:"border-box"},children:[E.jsx(Vg,{item:$,width:"100%",height:"120px",showNavigation:!0,style:{marginBottom:"0.5rem"}}),E.jsx("h3",{style:{margin:"0.5rem 0"},children:$.name}),E.jsxs("p",{style:{margin:"0.25rem 0"},children:["כמות: ",$.quantity]}),E.jsxs("button",{onClick:()=>ee($.id),style:{backgroundColor:"#28a745",color:"white",border:"none",padding:"6px 10px",borderRadius:"5px",fontSize:"14px",display:"flex",alignItems:"center",gap:"6px",cursor:"pointer",marginTop:"auto"},children:[E.jsx(WV,{size:14})," השבה"]})]},$.id))})]})}),I&&E.jsx(PV,{editingItem:V,name:n,quantity:t,imageUrl:x,imageFile:g,publicComment:q,internalComment:A,onNameChange:$=>e($.target.value.trimStart()),onQuantityChange:$=>r($.target.value.trimStart()),onImageUrlChange:$=>w($.target.value),onImageFileChange:$=>m($.target.files[0]),onPublicCommentChange:$=>D($.target.value),onInternalCommentChange:$=>T($.target.value),onCancel:()=>C(!1),onSubmit:le}),E.jsx(mV,{position:"bottom-right",autoClose:3e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0,theme:"light"})]})},$V=()=>{const{user:n}=xf(),[e,t]=ge.useState([]),[r,i]=ge.useState(""),[a,o]=ge.useState(null);ge.useEffect(()=>{(async()=>{const m=On(kt,"users"),w=(await yr(m)).docs.map(I=>({id:I.id,...I.data()}));t(w)})()},[]),ge.useEffect(()=>{(async()=>{try{const m=Ar(kt,"settings","onlineOrdering"),x=await Ed(m);x.exists()&&o(x.data().enabled)}catch(m){console.error("שגיאה בטעינת ההגדרה:",m)}})()},[]);const s=async(g,m)=>{const x=Ar(kt,"users",g);await Qa(x,{role:m}),t(e.map(w=>w.id===g?{...w,role:m}:w))},u=async()=>{try{const g=!a;await Qa(Ar(kt,"settings","onlineOrdering"),{enabled:g}),o(g)}catch(g){alert("שגיאה בעדכון ההגדרה: "+g.message)}},f={container:{padding:"1rem",direction:"rtl",maxWidth:"100%",overflow:"hidden"},header:{fontSize:"1.8rem",marginBottom:"2rem",textAlign:"center",color:"#333",fontWeight:"600"},toggleBox:{display:"flex",alignItems:"center",justifyContent:"center",gap:"15px",marginBottom:"2rem",backgroundColor:"#f8f9fa",padding:"16px 24px",borderRadius:"15px",border:"2px solid #e9ecef",maxWidth:"400px",margin:"0 auto 2rem auto",boxSizing:"border-box",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},toggleSwitch:{width:"50px",height:"28px",borderRadius:"50px",backgroundColor:a?"#4caf50":"#e74c3c",position:"relative",cursor:"pointer",transition:"0.3s",flexShrink:0},toggleCircle:{position:"absolute",top:"3px",left:a?"25px":"3px",width:"22px",height:"22px",borderRadius:"50%",backgroundColor:"white",transition:"0.3s",boxShadow:"0 2px 4px rgba(0,0,0,0.2)"},searchBox:{padding:"12px 16px",width:"100%",maxWidth:"500px",borderRadius:"10px",border:"2px solid #ddd",fontSize:"16px",marginBottom:"2rem",boxSizing:"border-box",outline:"none",transition:"border-color 0.2s ease",display:"block",margin:"0 auto 2rem auto"},tableContainer:{overflowX:"auto",marginTop:"1rem",borderRadius:"12px",border:"1px solid #ddd",maxWidth:"1200px",margin:"0 auto",boxShadow:"0 4px 12px rgba(0,0,0,0.1)"},table:{width:"100%",borderCollapse:"collapse",minWidth:"600px",backgroundColor:"white"},th:{border:"1px solid #ddd",padding:"12px 8px",backgroundColor:"#f8f9fa",fontWeight:"600",fontSize:"0.9rem",textAlign:"center",whiteSpace:"nowrap"},td:{border:"1px solid #ddd",padding:"12px 8px",textAlign:"center",fontSize:"0.85rem",verticalAlign:"middle"},button:{padding:"8px 12px",borderRadius:"6px",border:"none",cursor:"pointer",fontSize:"0.8rem",fontWeight:"500",whiteSpace:"nowrap",minWidth:"100px",transition:"opacity 0.2s ease"},promoteBtn:{backgroundColor:"#28a745",color:"white"},demoteBtn:{backgroundColor:"#dc3545",color:"white"}};if(!n||n.role!=="MainAdmin")return E.jsx("div",{style:{padding:"2rem",textAlign:"center",direction:"rtl"},children:E.jsx("p",{children:"אין לך גישה לעמוד זה"})});const h=e.filter(g=>g.username&&g.username.toLowerCase().includes(r.toLowerCase())),p=({user:g})=>E.jsxs("div",{style:{backgroundColor:"white",border:"1px solid #ddd",borderRadius:"12px",padding:"1rem",marginBottom:"1rem",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:[E.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"0.5rem"},children:[E.jsx("h4",{style:{margin:0,color:"#333",fontSize:"1.1rem"},children:g.username}),E.jsx("span",{style:{backgroundColor:g.role==="MainAdmin"?"#6f42c1":g.role==="GmachAdmin"?"#17a2b8":"#6c757d",color:"white",padding:"4px 8px",borderRadius:"12px",fontSize:"0.7rem",fontWeight:"500"},children:g.role==="User"?"משתמש רגיל":g.role==="GmachAdmin"?'מנהל גמ"ח':g.role==="MainAdmin"?"מנהל ראשי":g.role})]}),E.jsxs("p",{style:{margin:"0.5rem 0",color:"#666",fontSize:"0.9rem",wordBreak:"break-all"},children:["📧 ",g.email]}),g.role!=="MainAdmin"&&E.jsx("div",{style:{marginTop:"1rem"},children:g.role==="User"?E.jsx("button",{style:{...f.button,...f.promoteBtn,width:"100%"},onClick:()=>s(g.id,"GmachAdmin"),children:'שדרג למנהל גמ"ח'}):E.jsx("button",{style:{...f.button,...f.demoteBtn,width:"100%"},onClick:()=>s(g.id,"User"),children:"החזר למשתמש רגיל"})})]});return E.jsxs(E.Fragment,{children:[E.jsx("style",{children:`
          @media (max-width: 768px) {
            .desktop-table {
              display: none !important;
            }
            .mobile-cards {
              display: block !important;
            }
            .container-mobile {
              padding: 1rem !important;
            }
            .header-mobile {
              font-size: 1.5rem !important;
              margin-bottom: 1.5rem !important;
            }
            .toggle-mobile {
              max-width: 100% !important;
              margin: 0 0 1.5rem 0 !important;
              padding: 12px 16px !important;
            }
            .search-mobile {
              margin: 0 0 1.5rem 0 !important;
              max-width: 100% !important;
            }
          }
          
          @media (min-width: 769px) {
            .desktop-table {
              display: table !important;
            }
            .mobile-cards {
              display: none !important;
            }
            .container-desktop {
              padding: 2rem !important;
              max-width: 1400px !important;
              margin: 0 auto !important;
            }
          }
          
          input:focus {
            border-color: #1976d2 !important;
            box-shadow: 0 0 0 3px rgba(25, 118, 210, 0.1) !important;
          }
          
          button:hover {
            opacity: 0.9;
          }
          
          button:active {
            transform: translateY(1px);
          }
        `}),E.jsxs("div",{style:f.container,className:"container-mobile container-desktop",children:[E.jsx("h2",{style:f.header,className:"header-mobile",children:"ניהול משתמשים"}),a!==null&&E.jsxs("div",{style:f.toggleBox,className:"toggle-mobile",children:[E.jsx("span",{style:{fontWeight:"bold",fontSize:"1.1rem"},children:"הזמנות דרך האתר:"}),E.jsx("div",{style:f.toggleSwitch,onClick:u,children:E.jsx("div",{style:f.toggleCircle})})]}),E.jsx("input",{type:"text",placeholder:"חיפוש משתמש...",value:r,onChange:g=>i(g.target.value),style:f.searchBox,className:"search-mobile",dir:"rtl"}),E.jsx("div",{style:f.tableContainer,className:"desktop-table",children:E.jsxs("table",{style:f.table,children:[E.jsx("thead",{children:E.jsxs("tr",{children:[E.jsx("th",{style:f.th,children:"שם משתמש"}),E.jsx("th",{style:f.th,children:"אימייל"}),E.jsx("th",{style:f.th,children:"הרשאה"}),E.jsx("th",{style:f.th,children:"פעולה"})]})}),E.jsx("tbody",{children:h.length===0?E.jsx("tr",{children:E.jsx("td",{colSpan:"4",style:{textAlign:"center",padding:"2rem",color:"#666"},children:"לא נמצאו משתמשים תואמים"})}):h.map(g=>E.jsxs("tr",{children:[E.jsx("td",{style:f.td,children:g.username}),E.jsx("td",{style:f.td,children:g.email}),E.jsx("td",{style:f.td,children:g.role==="User"?"משתמש רגיל":g.role==="GmachAdmin"?'מנהל גמ"ח':g.role==="MainAdmin"?"מנהל ראשי":g.role}),E.jsxs("td",{style:f.td,children:[g.role!=="MainAdmin"&&(g.role==="User"?E.jsx("button",{style:{...f.button,...f.promoteBtn},onClick:()=>s(g.id,"GmachAdmin"),children:'שדרג למנהל גמ"ח'}):E.jsx("button",{style:{...f.button,...f.demoteBtn},onClick:()=>s(g.id,"User"),children:"החזר למשתמש רגיל"})),g.role==="MainAdmin"&&E.jsx("span",{style:{color:"#999",fontSize:"0.8rem"},children:"---"})]})]},g.id))})]})}),E.jsx("div",{className:"mobile-cards",style:{display:"none"},children:h.length===0?E.jsx("div",{style:{textAlign:"center",padding:"2rem",color:"#666",backgroundColor:"white",borderRadius:"12px",border:"1px solid #ddd"},children:"לא נמצאו משתמשים תואמים"}):h.map(g=>E.jsx(p,{user:g},g.id))})]})]})},XV=()=>{const[n,e]=ge.useState([]),[t,r]=ge.useState(""),[i,a]=ge.useState(!0);if(ge.useEffect(()=>{const s=On(kt,"items"),u=FE(s,f=>{const h=f.docs.map(p=>{const g=p.data(),m=l0(g);return{id:p.id,...m}}).filter(p=>p.isDeleted!==!0);e(h),a(!1)});return()=>u()},[]),i)return E.jsxs("div",{style:{padding:"2rem",textAlign:"center"},children:[E.jsx("h2",{children:"טוען קטלוג"}),E.jsx("div",{className:"spinner"})]});const o=n.filter(s=>s.name.toLowerCase().includes(t.toLowerCase()));return E.jsxs("div",{style:{padding:"2rem",direction:"rtl",textAlign:"right",paddingLeft:"1rem",paddingRight:"1rem"},children:[E.jsx("h2",{children:"קטלוג"}),E.jsx("input",{type:"text",placeholder:"חיפוש פריט",value:t,onChange:s=>r(s.target.value),dir:"rtl",style:{padding:"10px",width:"100%",marginBottom:"1.5rem",borderRadius:"6px",border:"1px solid #ccc",fontSize:"1rem",boxSizing:"border-box"}}),E.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"1rem",marginTop:"1rem"},children:o.length===0?E.jsxs("div",{style:{textAlign:"center",gridColumn:"1 / -1",marginTop:"2rem"},children:[E.jsx("h3",{children:"לא נמצאו פריטים."}),E.jsx("p",{children:"אנה נסה לחפש שוב."})]}):o.map(s=>E.jsxs("div",{style:{border:"1px solid #ccc",padding:"0.8rem",borderRadius:"8px",boxShadow:"2px 2px 6px rgba(0,0,0,0.1)",backgroundColor:"white",display:"flex",flexDirection:"column",justifyContent:"space-between",transition:"transform 0.2s ease-in-out",opacity:1,filter:"none",minHeight:"200px",maxWidth:"100%"},children:[E.jsx(Vg,{item:s,width:"100%",height:"140px",showNavigation:!0,style:{marginBottom:"0.5rem",borderRadius:"4px"}}),E.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",justifyContent:"space-between"},children:[E.jsx("h3",{style:{marginBottom:"0.5rem",fontSize:"0.9rem",lineHeight:"1.2",textAlign:"center"},children:s.name}),s.publicComment&&E.jsxs("p",{style:{fontSize:"0.75rem",color:"#444",textAlign:"center",margin:"0.3rem 0 0 0"},children:["📝 ",s.publicComment]})]})]},s.ItemId))}),E.jsx("style",{jsx:!0,children:`
        @media (max-width: 768px) {
          div[style*="gridTemplateColumns"] {
            grid-template-columns: repeat(2, 1fr) !important;
            gap: 0.8rem !important;
          }
        }
        
        @media (max-width: 480px) {
          div[style*="gridTemplateColumns"] {
            grid-template-columns: repeat(2, 1fr) !important;
            gap: 0.6rem !important;
          }
        }
      `})]})},YV="modulepreload",KV=function(n){return"/"+n},v4={},My=function(e,t,r){let i=Promise.resolve();if(t&&t.length>0){let o=function(f){return Promise.all(f.map(h=>Promise.resolve(h).then(p=>({status:"fulfilled",value:p}),p=>({status:"rejected",reason:p}))))};document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),u=(s==null?void 0:s.nonce)||(s==null?void 0:s.getAttribute("nonce"));i=o(t.map(f=>{if(f=KV(f),f in v4)return;v4[f]=!0;const h=f.endsWith(".css"),p=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${f}"]${p}`))return;const g=document.createElement("link");if(g.rel=h?"stylesheet":YV,h||(g.as="script"),g.crossOrigin="",g.href=f,u&&g.setAttribute("nonce",u),document.head.appendChild(g),h)return new Promise((m,x)=>{g.addEventListener("load",m),g.addEventListener("error",()=>x(new Error(`Unable to preload CSS for ${f}`)))})}))}function a(o){const s=new Event("vite:preloadError",{cancelable:!0});if(s.payload=o,window.dispatchEvent(s),!s.defaultPrevented)throw o}return i.then(o=>{for(const s of o||[])s.status==="rejected"&&a(s.reason);return e().catch(a)})};function or(n){"@babel/helpers - typeof";return or=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},or(n)}var Ma=Uint8Array,Ko=Uint16Array,vx=Int32Array,jm=new Ma([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Fm=new Ma([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),By=new Ma([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),o8=function(n,e){for(var t=new Ko(31),r=0;r<31;++r)t[r]=e+=1<<n[r-1];for(var i=new vx(t[30]),r=1;r<30;++r)for(var a=t[r];a<t[r+1];++a)i[a]=a-t[r]<<5|r;return{b:t,r:i}},s8=o8(jm,2),l8=s8.b,jy=s8.r;l8[28]=258,jy[258]=28;var u8=o8(Fm,0),QV=u8.b,y4=u8.r,Fy=new Ko(32768);for(var Rr=0;Rr<32768;++Rr){var Hc=(Rr&43690)>>1|(Rr&21845)<<1;Hc=(Hc&52428)>>2|(Hc&13107)<<2,Hc=(Hc&61680)>>4|(Hc&3855)<<4,Fy[Rr]=((Hc&65280)>>8|(Hc&255)<<8)>>1}var eu=function(n,e,t){for(var r=n.length,i=0,a=new Ko(e);i<r;++i)n[i]&&++a[n[i]-1];var o=new Ko(e);for(i=1;i<e;++i)o[i]=o[i-1]+a[i-1]<<1;var s;if(t){s=new Ko(1<<e);var u=15-e;for(i=0;i<r;++i)if(n[i])for(var f=i<<4|n[i],h=e-n[i],p=o[n[i]-1]++<<h,g=p|(1<<h)-1;p<=g;++p)s[Fy[p]>>u]=f}else for(s=new Ko(r),i=0;i<r;++i)n[i]&&(s[i]=Fy[o[n[i]-1]++]>>15-n[i]);return s},df=new Ma(288);for(var Rr=0;Rr<144;++Rr)df[Rr]=8;for(var Rr=144;Rr<256;++Rr)df[Rr]=9;for(var Rr=256;Rr<280;++Rr)df[Rr]=7;for(var Rr=280;Rr<288;++Rr)df[Rr]=8;var u0=new Ma(32);for(var Rr=0;Rr<32;++Rr)u0[Rr]=5;var ZV=eu(df,9,0),JV=eu(df,9,1),ez=eu(u0,5,0),tz=eu(u0,5,1),Rv=function(n){for(var e=n[0],t=1;t<n.length;++t)n[t]>e&&(e=n[t]);return e},el=function(n,e,t){var r=e/8|0;return(n[r]|n[r+1]<<8)>>(e&7)&t},Nv=function(n,e){var t=e/8|0;return(n[t]|n[t+1]<<8|n[t+2]<<16)>>(e&7)},yx=function(n){return(n+7)/8|0},c8=function(n,e,t){return(t==null||t>n.length)&&(t=n.length),new Ma(n.subarray(e,t))},nz=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],il=function(n,e,t){var r=new Error(e||nz[n]);if(r.code=n,Error.captureStackTrace&&Error.captureStackTrace(r,il),!t)throw r;return r},rz=function(n,e,t,r){var i=n.length,a=0;if(!i||e.f&&!e.l)return t||new Ma(0);var o=!t,s=o||e.i!=2,u=e.i;o&&(t=new Ma(i*3));var f=function(He){var rt=t.length;if(He>rt){var st=new Ma(Math.max(rt*2,He));st.set(t),t=st}},h=e.f||0,p=e.p||0,g=e.b||0,m=e.l,x=e.d,w=e.m,I=e.n,C=i*8;do{if(!m){h=el(n,p,1);var P=el(n,p+1,3);if(p+=3,P)if(P==1)m=JV,x=tz,w=9,I=5;else if(P==2){var q=el(n,p,31)+257,D=el(n,p+10,15)+4,A=q+el(n,p+5,31)+1;p+=14;for(var T=new Ma(A),k=new Ma(19),R=0;R<D;++R)k[By[R]]=el(n,p+R*3,7);p+=D*3;for(var L=Rv(k),j=(1<<L)-1,H=eu(k,L,1),R=0;R<A;){var ne=H[el(n,p,j)];p+=ne&15;var B=ne>>4;if(B<16)T[R++]=B;else{var U=0,z=0;for(B==16?(z=3+el(n,p,3),p+=2,U=T[R-1]):B==17?(z=3+el(n,p,7),p+=3):B==18&&(z=11+el(n,p,127),p+=7);z--;)T[R++]=U}}var ee=T.subarray(0,q),le=T.subarray(q);w=Rv(ee),I=Rv(le),m=eu(ee,w,1),x=eu(le,I,1)}else il(1);else{var B=yx(p)+4,V=n[B-4]|n[B-3]<<8,Y=B+V;if(Y>i){u&&il(0);break}s&&f(g+V),t.set(n.subarray(B,Y),g),e.b=g+=V,e.p=p=Y*8,e.f=h;continue}if(p>C){u&&il(0);break}}s&&f(g+131072);for(var $=(1<<w)-1,ve=(1<<I)-1,G=p;;G=p){var U=m[Nv(n,p)&$],Q=U>>4;if(p+=U&15,p>C){u&&il(0);break}if(U||il(2),Q<256)t[g++]=Q;else if(Q==256){G=p,m=null;break}else{var te=Q-254;if(Q>264){var R=Q-257,ie=jm[R];te=el(n,p,(1<<ie)-1)+l8[R],p+=ie}var de=x[Nv(n,p)&ve],Ae=de>>4;de||il(3),p+=de&15;var le=QV[Ae];if(Ae>3){var ie=Fm[Ae];le+=Nv(n,p)&(1<<ie)-1,p+=ie}if(p>C){u&&il(0);break}s&&f(g+131072);var be=g+te;if(g<le){var Te=a-le,We=Math.min(le,be);for(Te+g<0&&il(3);g<We;++g)t[g]=r[Te+g]}for(;g<be;++g)t[g]=t[g-le]}}e.l=m,e.p=G,e.b=g,e.f=h,m&&(h=1,e.m=w,e.d=x,e.n=I)}while(!h);return g!=t.length&&o?c8(t,0,g):t.subarray(0,g)},Fu=function(n,e,t){t<<=e&7;var r=e/8|0;n[r]|=t,n[r+1]|=t>>8},I1=function(n,e,t){t<<=e&7;var r=e/8|0;n[r]|=t,n[r+1]|=t>>8,n[r+2]|=t>>16},Dv=function(n,e){for(var t=[],r=0;r<n.length;++r)n[r]&&t.push({s:r,f:n[r]});var i=t.length,a=t.slice();if(!i)return{t:h8,l:0};if(i==1){var o=new Ma(t[0].s+1);return o[t[0].s]=1,{t:o,l:1}}t.sort(function(Y,q){return Y.f-q.f}),t.push({s:-1,f:25001});var s=t[0],u=t[1],f=0,h=1,p=2;for(t[0]={s:-1,f:s.f+u.f,l:s,r:u};h!=i-1;)s=t[t[f].f<t[p].f?f++:p++],u=t[f!=h&&t[f].f<t[p].f?f++:p++],t[h++]={s:-1,f:s.f+u.f,l:s,r:u};for(var g=a[0].s,r=1;r<i;++r)a[r].s>g&&(g=a[r].s);var m=new Ko(g+1),x=Uy(t[h-1],m,0);if(x>e){var r=0,w=0,I=x-e,C=1<<I;for(a.sort(function(q,D){return m[D.s]-m[q.s]||q.f-D.f});r<i;++r){var P=a[r].s;if(m[P]>e)w+=C-(1<<x-m[P]),m[P]=e;else break}for(w>>=I;w>0;){var B=a[r].s;m[B]<e?w-=1<<e-m[B]++-1:++r}for(;r>=0&&w;--r){var V=a[r].s;m[V]==e&&(--m[V],++w)}x=e}return{t:new Ma(m),l:x}},Uy=function(n,e,t){return n.s==-1?Math.max(Uy(n.l,e,t+1),Uy(n.r,e,t+1)):e[n.s]=t},x4=function(n){for(var e=n.length;e&&!n[--e];);for(var t=new Ko(++e),r=0,i=n[0],a=1,o=function(u){t[r++]=u},s=1;s<=e;++s)if(n[s]==i&&s!=e)++a;else{if(!i&&a>2){for(;a>138;a-=138)o(32754);a>2&&(o(a>10?a-11<<5|28690:a-3<<5|12305),a=0)}else if(a>3){for(o(i),--a;a>6;a-=6)o(8304);a>2&&(o(a-3<<5|8208),a=0)}for(;a--;)o(i);a=1,i=n[s]}return{c:t.subarray(0,r),n:e}},R1=function(n,e){for(var t=0,r=0;r<e.length;++r)t+=n[r]*e[r];return t},f8=function(n,e,t){var r=t.length,i=yx(e+2);n[i]=r&255,n[i+1]=r>>8,n[i+2]=n[i]^255,n[i+3]=n[i+1]^255;for(var a=0;a<r;++a)n[i+a+4]=t[a];return(i+4+r)*8},_4=function(n,e,t,r,i,a,o,s,u,f,h){Fu(e,h++,t),++i[256];for(var p=Dv(i,15),g=p.t,m=p.l,x=Dv(a,15),w=x.t,I=x.l,C=x4(g),P=C.c,B=C.n,V=x4(w),Y=V.c,q=V.n,D=new Ko(19),A=0;A<P.length;++A)++D[P[A]&31];for(var A=0;A<Y.length;++A)++D[Y[A]&31];for(var T=Dv(D,7),k=T.t,R=T.l,L=19;L>4&&!k[By[L-1]];--L);var j=f+5<<3,H=R1(i,df)+R1(a,u0)+o,ne=R1(i,g)+R1(a,w)+o+14+3*L+R1(D,k)+2*D[16]+3*D[17]+7*D[18];if(u>=0&&j<=H&&j<=ne)return f8(e,h,n.subarray(u,u+f));var U,z,ee,le;if(Fu(e,h,1+(ne<H)),h+=2,ne<H){U=eu(g,m,0),z=g,ee=eu(w,I,0),le=w;var $=eu(k,R,0);Fu(e,h,B-257),Fu(e,h+5,q-1),Fu(e,h+10,L-4),h+=14;for(var A=0;A<L;++A)Fu(e,h+3*A,k[By[A]]);h+=3*L;for(var ve=[P,Y],G=0;G<2;++G)for(var Q=ve[G],A=0;A<Q.length;++A){var te=Q[A]&31;Fu(e,h,$[te]),h+=k[te],te>15&&(Fu(e,h,Q[A]>>5&127),h+=Q[A]>>12)}}else U=ZV,z=df,ee=ez,le=u0;for(var A=0;A<s;++A){var ie=r[A];if(ie>255){var te=ie>>18&31;I1(e,h,U[te+257]),h+=z[te+257],te>7&&(Fu(e,h,ie>>23&31),h+=jm[te]);var de=ie&31;I1(e,h,ee[de]),h+=le[de],de>3&&(I1(e,h,ie>>5&8191),h+=Fm[de])}else I1(e,h,U[ie]),h+=z[ie]}return I1(e,h,U[256]),h+z[256]},iz=new vx([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),h8=new Ma(0),az=function(n,e,t,r,i,a){var o=a.z||n.length,s=new Ma(r+o+5*(1+Math.ceil(o/7e3))+i),u=s.subarray(r,s.length-i),f=a.l,h=(a.r||0)&7;if(e){h&&(u[0]=a.r>>3);for(var p=iz[e-1],g=p>>13,m=p&8191,x=(1<<t)-1,w=a.p||new Ko(32768),I=a.h||new Ko(x+1),C=Math.ceil(t/3),P=2*C,B=function(wt){return(n[wt]^n[wt+1]<<C^n[wt+2]<<P)&x},V=new vx(25e3),Y=new Ko(288),q=new Ko(32),D=0,A=0,T=a.i||0,k=0,R=a.w||0,L=0;T+2<o;++T){var j=B(T),H=T&32767,ne=I[j];if(w[H]=ne,I[j]=H,R<=T){var U=o-T;if((D>7e3||k>24576)&&(U>423||!f)){h=_4(n,u,0,V,Y,q,A,k,L,T-L,h),k=D=A=0,L=T;for(var z=0;z<286;++z)Y[z]=0;for(var z=0;z<30;++z)q[z]=0}var ee=2,le=0,$=m,ve=H-ne&32767;if(U>2&&j==B(T-ve))for(var G=Math.min(g,U)-1,Q=Math.min(32767,T),te=Math.min(258,U);ve<=Q&&--$&&H!=ne;){if(n[T+ee]==n[T+ee-ve]){for(var ie=0;ie<te&&n[T+ie]==n[T+ie-ve];++ie);if(ie>ee){if(ee=ie,le=ve,ie>G)break;for(var de=Math.min(ve,ie-2),Ae=0,z=0;z<de;++z){var be=T-ve+z&32767,Te=w[be],We=be-Te&32767;We>Ae&&(Ae=We,ne=be)}}}H=ne,ne=w[H],ve+=H-ne&32767}if(le){V[k++]=268435456|jy[ee]<<18|y4[le];var He=jy[ee]&31,rt=y4[le]&31;A+=jm[He]+Fm[rt],++Y[257+He],++q[rt],R=T+ee,++D}else V[k++]=n[T],++Y[n[T]]}}for(T=Math.max(T,R);T<o;++T)V[k++]=n[T],++Y[n[T]];h=_4(n,u,f,V,Y,q,A,k,L,T-L,h),f||(a.r=h&7|u[h/8|0]<<3,h-=7,a.h=I,a.p=w,a.i=T,a.w=R)}else{for(var T=a.w||0;T<o+f;T+=65535){var st=T+65535;st>=o&&(u[h/8|0]=f,st=o),h=f8(u,h+1,n.subarray(T,st))}a.i=o}return c8(s,0,r+yx(h)+i)},d8=function(){var n=1,e=0;return{p:function(t){for(var r=n,i=e,a=t.length|0,o=0;o!=a;){for(var s=Math.min(o+2655,a);o<s;++o)i+=r+=t[o];r=(r&65535)+15*(r>>16),i=(i&65535)+15*(i>>16)}n=r,e=i},d:function(){return n%=65521,e%=65521,(n&255)<<24|(n&65280)<<8|(e&255)<<8|e>>8}}},oz=function(n,e,t,r,i){if(!i&&(i={l:1},e.dictionary)){var a=e.dictionary.subarray(-32768),o=new Ma(a.length+n.length);o.set(a),o.set(n,a.length),n=o,i.w=a.length}return az(n,e.level==null?6:e.level,e.mem==null?i.l?Math.ceil(Math.max(8,Math.min(13,Math.log(n.length)))*1.5):20:12+e.mem,t,r,i)},p8=function(n,e,t){for(;t;++e)n[e]=t,t>>>=8},sz=function(n,e){var t=e.level,r=t==0?0:t<6?1:t==9?3:2;if(n[0]=120,n[1]=r<<6|(e.dictionary&&32),n[1]|=31-(n[0]<<8|n[1])%31,e.dictionary){var i=d8();i.p(e.dictionary),p8(n,2,i.d())}},lz=function(n,e){return((n[0]&15)!=8||n[0]>>4>7||(n[0]<<8|n[1])%31)&&il(6,"invalid zlib data"),(n[1]>>5&1)==1&&il(6,"invalid zlib data: "+(n[1]&32?"need":"unexpected")+" dictionary"),(n[1]>>3&4)+2};function Vy(n,e){e||(e={});var t=d8();t.p(n);var r=oz(n,e,e.dictionary?6:2,4);return sz(r,e),p8(r,r.length-4,t.d()),r}function uz(n,e){return rz(n.subarray(lz(n),-4),{i:2},e,e)}var cz=typeof TextDecoder<"u"&&new TextDecoder,fz=0;try{cz.decode(h8,{stream:!0}),fz=1}catch{}var Gt=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function Ov(){Gt.console&&typeof Gt.console.log=="function"&&Gt.console.log.apply(Gt.console,arguments)}var vr={log:Ov,warn:function(n){Gt.console&&(typeof Gt.console.warn=="function"?Gt.console.warn.apply(Gt.console,arguments):Ov.call(null,arguments))},error:function(n){Gt.console&&(typeof Gt.console.error=="function"?Gt.console.error.apply(Gt.console,arguments):Ov(n))}};function Pv(n,e,t){var r=new XMLHttpRequest;r.open("GET",n),r.responseType="blob",r.onload=function(){Gf(r.response,e,t)},r.onerror=function(){vr.error("could not download file")},r.send()}function w4(n){var e=new XMLHttpRequest;e.open("HEAD",n,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function Fp(n){try{n.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),n.dispatchEvent(e)}}var $1,zy,Gf=Gt.saveAs||((typeof window>"u"?"undefined":or(window))!=="object"||window!==Gt?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(n,e,t){var r=Gt.URL||Gt.webkitURL,i=document.createElement("a");e=e||n.name||"download",i.download=e,i.rel="noopener",typeof n=="string"?(i.href=n,i.origin!==location.origin?w4(i.href)?Pv(n,e,t):Fp(i,i.target="_blank"):Fp(i)):(i.href=r.createObjectURL(n),setTimeout(function(){r.revokeObjectURL(i.href)},4e4),setTimeout(function(){Fp(i)},0))}:"msSaveOrOpenBlob"in navigator?function(n,e,t){if(e=e||n.name||"download",typeof n=="string")if(w4(n))Pv(n,e,t);else{var r=document.createElement("a");r.href=n,r.target="_blank",setTimeout(function(){Fp(r)})}else navigator.msSaveOrOpenBlob(function(i,a){return a===void 0?a={autoBom:!1}:or(a)!=="object"&&(vr.warn("Deprecated: Expected third argument to be a object"),a={autoBom:!a}),a.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob(["\uFEFF",i],{type:i.type}):i}(n,t),e)}:function(n,e,t,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof n=="string")return Pv(n,e,t);var i=n.type==="application/octet-stream",a=/constructor/i.test(Gt.HTMLElement)||Gt.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||i&&a)&&(typeof FileReader>"u"?"undefined":or(FileReader))==="object"){var s=new FileReader;s.onloadend=function(){var h=s.result;h=o?h:h.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=h:location=h,r=null},s.readAsDataURL(n)}else{var u=Gt.URL||Gt.webkitURL,f=u.createObjectURL(n);r?r.location=f:location.href=f,r=null,setTimeout(function(){u.revokeObjectURL(f)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function g8(n){var e;n=n||"",this.ok=!1,n.charAt(0)=="#"&&(n=n.substr(1,6)),n={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[n=(n=n.replace(/ /g,"")).toLowerCase()]||n;for(var t=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(s){return[parseInt(s[1]),parseInt(s[2]),parseInt(s[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(s){return[parseInt(s[1],16),parseInt(s[2],16),parseInt(s[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(s){return[parseInt(s[1]+s[1],16),parseInt(s[2]+s[2],16),parseInt(s[3]+s[3],16)]}}],r=0;r<t.length;r++){var i=t[r].re,a=t[r].process,o=i.exec(n);o&&(e=a(o),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var s=this.r.toString(16),u=this.g.toString(16),f=this.b.toString(16);return s.length==1&&(s="0"+s),u.length==1&&(u="0"+u),f.length==1&&(f="0"+f),"#"+s+u+f}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function Lv(n,e){var t=n[0],r=n[1],i=n[2],a=n[3];t=Ia(t,r,i,a,e[0],7,-680876936),a=Ia(a,t,r,i,e[1],12,-389564586),i=Ia(i,a,t,r,e[2],17,606105819),r=Ia(r,i,a,t,e[3],22,-1044525330),t=Ia(t,r,i,a,e[4],7,-176418897),a=Ia(a,t,r,i,e[5],12,1200080426),i=Ia(i,a,t,r,e[6],17,-1473231341),r=Ia(r,i,a,t,e[7],22,-45705983),t=Ia(t,r,i,a,e[8],7,1770035416),a=Ia(a,t,r,i,e[9],12,-1958414417),i=Ia(i,a,t,r,e[10],17,-42063),r=Ia(r,i,a,t,e[11],22,-1990404162),t=Ia(t,r,i,a,e[12],7,1804603682),a=Ia(a,t,r,i,e[13],12,-40341101),i=Ia(i,a,t,r,e[14],17,-1502002290),t=Ra(t,r=Ia(r,i,a,t,e[15],22,1236535329),i,a,e[1],5,-165796510),a=Ra(a,t,r,i,e[6],9,-1069501632),i=Ra(i,a,t,r,e[11],14,643717713),r=Ra(r,i,a,t,e[0],20,-373897302),t=Ra(t,r,i,a,e[5],5,-701558691),a=Ra(a,t,r,i,e[10],9,38016083),i=Ra(i,a,t,r,e[15],14,-660478335),r=Ra(r,i,a,t,e[4],20,-405537848),t=Ra(t,r,i,a,e[9],5,568446438),a=Ra(a,t,r,i,e[14],9,-1019803690),i=Ra(i,a,t,r,e[3],14,-187363961),r=Ra(r,i,a,t,e[8],20,1163531501),t=Ra(t,r,i,a,e[13],5,-1444681467),a=Ra(a,t,r,i,e[2],9,-51403784),i=Ra(i,a,t,r,e[7],14,1735328473),t=Na(t,r=Ra(r,i,a,t,e[12],20,-1926607734),i,a,e[5],4,-378558),a=Na(a,t,r,i,e[8],11,-2022574463),i=Na(i,a,t,r,e[11],16,1839030562),r=Na(r,i,a,t,e[14],23,-35309556),t=Na(t,r,i,a,e[1],4,-1530992060),a=Na(a,t,r,i,e[4],11,1272893353),i=Na(i,a,t,r,e[7],16,-155497632),r=Na(r,i,a,t,e[10],23,-1094730640),t=Na(t,r,i,a,e[13],4,681279174),a=Na(a,t,r,i,e[0],11,-358537222),i=Na(i,a,t,r,e[3],16,-722521979),r=Na(r,i,a,t,e[6],23,76029189),t=Na(t,r,i,a,e[9],4,-640364487),a=Na(a,t,r,i,e[12],11,-421815835),i=Na(i,a,t,r,e[15],16,530742520),t=Da(t,r=Na(r,i,a,t,e[2],23,-995338651),i,a,e[0],6,-198630844),a=Da(a,t,r,i,e[7],10,1126891415),i=Da(i,a,t,r,e[14],15,-1416354905),r=Da(r,i,a,t,e[5],21,-57434055),t=Da(t,r,i,a,e[12],6,1700485571),a=Da(a,t,r,i,e[3],10,-1894986606),i=Da(i,a,t,r,e[10],15,-1051523),r=Da(r,i,a,t,e[1],21,-2054922799),t=Da(t,r,i,a,e[8],6,1873313359),a=Da(a,t,r,i,e[15],10,-30611744),i=Da(i,a,t,r,e[6],15,-1560198380),r=Da(r,i,a,t,e[13],21,1309151649),t=Da(t,r,i,a,e[4],6,-145523070),a=Da(a,t,r,i,e[11],10,-1120210379),i=Da(i,a,t,r,e[2],15,718787259),r=Da(r,i,a,t,e[9],21,-343485551),n[0]=Zc(t,n[0]),n[1]=Zc(r,n[1]),n[2]=Zc(i,n[2]),n[3]=Zc(a,n[3])}function Um(n,e,t,r,i,a){return e=Zc(Zc(e,n),Zc(r,a)),Zc(e<<i|e>>>32-i,t)}function Ia(n,e,t,r,i,a,o){return Um(e&t|~e&r,n,e,i,a,o)}function Ra(n,e,t,r,i,a,o){return Um(e&r|t&~r,n,e,i,a,o)}function Na(n,e,t,r,i,a,o){return Um(e^t^r,n,e,i,a,o)}function Da(n,e,t,r,i,a,o){return Um(t^(e|~r),n,e,i,a,o)}function m8(n){var e,t=n.length,r=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=n.length;e+=64)Lv(r,hz(n.substring(e-64,e)));n=n.substring(e-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<n.length;e++)i[e>>2]|=n.charCodeAt(e)<<(e%4<<3);if(i[e>>2]|=128<<(e%4<<3),e>55)for(Lv(r,i),e=0;e<16;e++)i[e]=0;return i[14]=8*t,Lv(r,i),r}function hz(n){var e,t=[];for(e=0;e<64;e+=4)t[e>>2]=n.charCodeAt(e)+(n.charCodeAt(e+1)<<8)+(n.charCodeAt(e+2)<<16)+(n.charCodeAt(e+3)<<24);return t}$1=Gt.atob.bind(Gt),zy=Gt.btoa.bind(Gt);var b4="0123456789abcdef".split("");function dz(n){for(var e="",t=0;t<4;t++)e+=b4[n>>8*t+4&15]+b4[n>>8*t&15];return e}function pz(n){return String.fromCharCode((255&n)>>0,(65280&n)>>8,(16711680&n)>>16,(4278190080&n)>>24)}function qy(n){return m8(n).map(pz).join("")}var gz=function(n){for(var e=0;e<n.length;e++)n[e]=dz(n[e]);return n.join("")}(m8("hello"))!="5d41402abc4b2a76b9719d911017c592";function Zc(n,e){if(gz){var t=(65535&n)+(65535&e);return(n>>16)+(e>>16)+(t>>16)<<16|65535&t}return n+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function Hy(n,e){var t,r,i,a;if(n!==t){for(var o=(i=n,a=1+(256/n.length>>0),new Array(a+1).join(i)),s=[],u=0;u<256;u++)s[u]=u;var f=0;for(u=0;u<256;u++){var h=s[u];f=(f+h+o.charCodeAt(u))%256,s[u]=s[f],s[f]=h}t=n,r=s}else s=r;var p=e.length,g=0,m=0,x="";for(u=0;u<p;u++)m=(m+(h=s[g=(g+1)%256]))%256,s[g]=s[m],s[m]=h,o=s[(s[g]+s[m])%256],x+=String.fromCharCode(e.charCodeAt(u)^o);return x}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var A4={print:4,modify:8,copy:16,"annot-forms":32};function td(n,e,t,r){this.v=1,this.r=2;var i=192;n.forEach(function(s){if(A4.perm!==void 0)throw new Error("Invalid permission: "+s);i+=A4[s]}),this.padding="(¿N^NuAd\0NVÿú\b..\0¶Ðh>/\f©þdSiz";var a=(e+this.padding).substr(0,32),o=(t+this.padding).substr(0,32);this.O=this.processOwnerPassword(a,o),this.P=-(1+(255^i)),this.encryptionKey=qy(a+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=Hy(this.encryptionKey,this.padding)}function nd(n){if(/[^\u0000-\u00ff]/.test(n))throw new Error("Invalid PDF Name Object: "+n+", Only accept ASCII characters.");for(var e="",t=n.length,r=0;r<t;r++){var i=n.charCodeAt(r);i<33||i===35||i===37||i===40||i===41||i===47||i===60||i===62||i===91||i===93||i===123||i===125||i>126?e+="#"+("0"+i.toString(16)).slice(-2):e+=n[r]}return e}function E4(n){if(or(n)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(t,r,i){if(i=i||!1,typeof t!="string"||typeof r!="function"||typeof i!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(t)||(e[t]={});var a=Math.random().toString(35);return e[t][a]=[r,!!i],a},this.unsubscribe=function(t){for(var r in e)if(e[r][t])return delete e[r][t],Object.keys(e[r]).length===0&&delete e[r],!0;return!1},this.publish=function(t){if(e.hasOwnProperty(t)){var r=Array.prototype.slice.call(arguments,1),i=[];for(var a in e[t]){var o=e[t][a];try{o[0].apply(n,r)}catch(s){Gt.console&&vr.error("jsPDF PubSub Error",s.message,s)}o[1]&&i.push(a)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function Hg(n){if(!(this instanceof Hg))return new Hg(n);var e="opacity,stroke-opacity".split(",");for(var t in n)n.hasOwnProperty(t)&&e.indexOf(t)>=0&&(this[t]=n[t]);this.id="",this.objectNumber=-1}function v8(n,e){this.gState=n,this.matrix=e,this.id="",this.objectNumber=-1}function $f(n,e,t,r,i){if(!(this instanceof $f))return new $f(n,e,t,r,i);this.type=n==="axial"?2:3,this.coords=e,this.colors=t,v8.call(this,r,i)}function sd(n,e,t,r,i){if(!(this instanceof sd))return new sd(n,e,t,r,i);this.boundingBox=n,this.xStep=e,this.yStep=t,this.stream="",this.cloneIndex=0,v8.call(this,r,i)}function Ht(n){var e,t=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],i=arguments[2],a=arguments[3],o=[],s=1,u=16,f="S",h=null;or(n=n||{})==="object"&&(t=n.orientation,r=n.unit||r,i=n.format||i,a=n.compress||n.compressPdf||a,(h=n.encryption||null)!==null&&(h.userPassword=h.userPassword||"",h.ownerPassword=h.ownerPassword||"",h.userPermissions=h.userPermissions||[]),s=typeof n.userUnit=="number"?Math.abs(n.userUnit):1,n.precision!==void 0&&(e=n.precision),n.floatPrecision!==void 0&&(u=n.floatPrecision),f=n.defaultPathOperation||"S"),o=n.filters||(a===!0?["FlateEncode"]:o),r=r||"mm",t=(""+(t||"P")).toLowerCase();var p=n.putOnlyUsedFonts||!1,g={},m={internal:{},__private__:{}};m.__private__.PubSub=E4;var x="1.3",w=m.__private__.getPdfVersion=function(){return x};m.__private__.setPdfVersion=function(O){x=O};var I={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};m.__private__.getPageFormats=function(){return I};var C=m.__private__.getPageFormat=function(O){return I[O]};i=i||"a4";var P={COMPAT:"compat",ADVANCED:"advanced"},B=P.COMPAT;function V(){this.saveGraphicsState(),me(new vt(ut,0,0,-ut,0,zi()*ut).toString()+" cm"),this.setFontSize(this.getFontSize()/ut),f="n",B=P.ADVANCED}function Y(){this.restoreGraphicsState(),f="S",B=P.COMPAT}var q=m.__private__.combineFontStyleAndFontWeight=function(O,J){if(O=="bold"&&J=="normal"||O=="bold"&&J==400||O=="normal"&&J=="italic"||O=="bold"&&J=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return J&&(O=J==400||J==="normal"?O==="italic"?"italic":"normal":J!=700&&J!=="bold"||O!=="normal"?(J==700?"bold":J)+""+O:"bold"),O};m.advancedAPI=function(O){var J=B===P.COMPAT;return J&&V.call(this),typeof O!="function"||(O(this),J&&Y.call(this)),this},m.compatAPI=function(O){var J=B===P.ADVANCED;return J&&Y.call(this),typeof O!="function"||(O(this),J&&V.call(this)),this},m.isAdvancedAPI=function(){return B===P.ADVANCED};var D,A=function(O){if(B!==P.ADVANCED)throw new Error(O+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},T=m.roundToPrecision=m.__private__.roundToPrecision=function(O,J){var pe=e||J;if(isNaN(O)||isNaN(pe))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return O.toFixed(pe).replace(/0+$/,"")};D=m.hpf=m.__private__.hpf=typeof u=="number"?function(O){if(isNaN(O))throw new Error("Invalid argument passed to jsPDF.hpf");return T(O,u)}:u==="smart"?function(O){if(isNaN(O))throw new Error("Invalid argument passed to jsPDF.hpf");return T(O,O>-1&&O<1?16:5)}:function(O){if(isNaN(O))throw new Error("Invalid argument passed to jsPDF.hpf");return T(O,16)};var k=m.f2=m.__private__.f2=function(O){if(isNaN(O))throw new Error("Invalid argument passed to jsPDF.f2");return T(O,2)},R=m.__private__.f3=function(O){if(isNaN(O))throw new Error("Invalid argument passed to jsPDF.f3");return T(O,3)},L=m.scale=m.__private__.scale=function(O){if(isNaN(O))throw new Error("Invalid argument passed to jsPDF.scale");return B===P.COMPAT?O*ut:B===P.ADVANCED?O:void 0},j=function(O){return B===P.COMPAT?zi()-O:B===P.ADVANCED?O:void 0},H=function(O){return L(j(O))};m.__private__.setPrecision=m.setPrecision=function(O){typeof parseInt(O,10)=="number"&&(e=parseInt(O,10))};var ne,U="00000000000000000000000000000000",z=m.__private__.getFileId=function(){return U},ee=m.__private__.setFileId=function(O){return U=O!==void 0&&/^[a-fA-F0-9]{32}$/.test(O)?O.toUpperCase():U.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),h!==null&&(er=new td(h.userPermissions,h.userPassword,h.ownerPassword,U)),U};m.setFileId=function(O){return ee(O),this},m.getFileId=function(){return z()};var le=m.__private__.convertDateToPDFDate=function(O){var J=O.getTimezoneOffset(),pe=J<0?"+":"-",xe=Math.floor(Math.abs(J/60)),Ie=Math.abs(J%60),Ve=[pe,te(xe),"'",te(Ie),"'"].join("");return["D:",O.getFullYear(),te(O.getMonth()+1),te(O.getDate()),te(O.getHours()),te(O.getMinutes()),te(O.getSeconds()),Ve].join("")},$=m.__private__.convertPDFDateToDate=function(O){var J=parseInt(O.substr(2,4),10),pe=parseInt(O.substr(6,2),10)-1,xe=parseInt(O.substr(8,2),10),Ie=parseInt(O.substr(10,2),10),Ve=parseInt(O.substr(12,2),10),tt=parseInt(O.substr(14,2),10);return new Date(J,pe,xe,Ie,Ve,tt,0)},ve=m.__private__.setCreationDate=function(O){var J;if(O===void 0&&(O=new Date),O instanceof Date)J=le(O);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(O))throw new Error("Invalid argument passed to jsPDF.setCreationDate");J=O}return ne=J},G=m.__private__.getCreationDate=function(O){var J=ne;return O==="jsDate"&&(J=$(ne)),J};m.setCreationDate=function(O){return ve(O),this},m.getCreationDate=function(O){return G(O)};var Q,te=m.__private__.padd2=function(O){return("0"+parseInt(O)).slice(-2)},ie=m.__private__.padd2Hex=function(O){return("00"+(O=O.toString())).substr(O.length)},de=0,Ae=[],be=[],Te=0,We=[],He=[],rt=!1,st=be,wt=function(){de=0,Te=0,be=[],Ae=[],We=[],Ji=Nr(),gi=Nr()};m.__private__.setCustomOutputDestination=function(O){rt=!0,st=O};var Be=function(O){rt||(st=O)};m.__private__.resetCustomOutputDestination=function(){rt=!1,st=be};var me=m.__private__.out=function(O){return O=O.toString(),Te+=O.length+1,st.push(O),st},gt=m.__private__.write=function(O){return me(arguments.length===1?O.toString():Array.prototype.join.call(arguments," "))},lt=m.__private__.getArrayBuffer=function(O){for(var J=O.length,pe=new ArrayBuffer(J),xe=new Uint8Array(pe);J--;)xe[J]=O.charCodeAt(J);return pe},Xe=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];m.__private__.getStandardFonts=function(){return Xe};var it=n.fontSize||16;m.__private__.setFontSize=m.setFontSize=function(O){return it=B===P.ADVANCED?O/ut:O,this};var at,ot=m.__private__.getFontSize=m.getFontSize=function(){return B===P.COMPAT?it:it*ut},ct=n.R2L||!1;m.__private__.setR2L=m.setR2L=function(O){return ct=O,this},m.__private__.getR2L=m.getR2L=function(){return ct};var mt,Rt=m.__private__.setZoomMode=function(O){var J=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(O))at=O;else if(isNaN(O)){if(J.indexOf(O)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+O+'" is not recognized.');at=O}else at=parseInt(O,10)};m.__private__.getZoomMode=function(){return at};var _t,bt=m.__private__.setPageMode=function(O){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(O)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+O+'" is not recognized.');mt=O};m.__private__.getPageMode=function(){return mt};var Nt=m.__private__.setLayoutMode=function(O){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(O)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+O+'" is not recognized.');_t=O};m.__private__.getLayoutMode=function(){return _t},m.__private__.setDisplayMode=m.setDisplayMode=function(O,J,pe){return Rt(O),Nt(J),bt(pe),this};var xt={title:"",subject:"",author:"",keywords:"",creator:""};m.__private__.getDocumentProperty=function(O){if(Object.keys(xt).indexOf(O)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return xt[O]},m.__private__.getDocumentProperties=function(){return xt},m.__private__.setDocumentProperties=m.setProperties=m.setDocumentProperties=function(O){for(var J in xt)xt.hasOwnProperty(J)&&O[J]&&(xt[J]=O[J]);return this},m.__private__.setDocumentProperty=function(O,J){if(Object.keys(xt).indexOf(O)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return xt[O]=J};var Dt,ut,vn,zt,Yn,Kt={},An={},pi=[],on={},pa={},Cn={},Mr={},sr=null,yn=0,Tt=[],nn=new E4(m),Si=n.hotfixes||[],Mn={},pr={},Ua=[],vt=function O(J,pe,xe,Ie,Ve,tt){if(!(this instanceof O))return new O(J,pe,xe,Ie,Ve,tt);isNaN(J)&&(J=1),isNaN(pe)&&(pe=0),isNaN(xe)&&(xe=0),isNaN(Ie)&&(Ie=1),isNaN(Ve)&&(Ve=0),isNaN(tt)&&(tt=0),this._matrix=[J,pe,xe,Ie,Ve,tt]};Object.defineProperty(vt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(O){this._matrix[0]=O}}),Object.defineProperty(vt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(O){this._matrix[1]=O}}),Object.defineProperty(vt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(O){this._matrix[2]=O}}),Object.defineProperty(vt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(O){this._matrix[3]=O}}),Object.defineProperty(vt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(O){this._matrix[4]=O}}),Object.defineProperty(vt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(O){this._matrix[5]=O}}),Object.defineProperty(vt.prototype,"a",{get:function(){return this._matrix[0]},set:function(O){this._matrix[0]=O}}),Object.defineProperty(vt.prototype,"b",{get:function(){return this._matrix[1]},set:function(O){this._matrix[1]=O}}),Object.defineProperty(vt.prototype,"c",{get:function(){return this._matrix[2]},set:function(O){this._matrix[2]=O}}),Object.defineProperty(vt.prototype,"d",{get:function(){return this._matrix[3]},set:function(O){this._matrix[3]=O}}),Object.defineProperty(vt.prototype,"e",{get:function(){return this._matrix[4]},set:function(O){this._matrix[4]=O}}),Object.defineProperty(vt.prototype,"f",{get:function(){return this._matrix[5]},set:function(O){this._matrix[5]=O}}),Object.defineProperty(vt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(vt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(vt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(vt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),vt.prototype.join=function(O){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(D).join(O)},vt.prototype.multiply=function(O){var J=O.sx*this.sx+O.shy*this.shx,pe=O.sx*this.shy+O.shy*this.sy,xe=O.shx*this.sx+O.sy*this.shx,Ie=O.shx*this.shy+O.sy*this.sy,Ve=O.tx*this.sx+O.ty*this.shx+this.tx,tt=O.tx*this.shy+O.ty*this.sy+this.ty;return new vt(J,pe,xe,Ie,Ve,tt)},vt.prototype.decompose=function(){var O=this.sx,J=this.shy,pe=this.shx,xe=this.sy,Ie=this.tx,Ve=this.ty,tt=Math.sqrt(O*O+J*J),ht=(O/=tt)*pe+(J/=tt)*xe;pe-=O*ht,xe-=J*ht;var _=Math.sqrt(pe*pe+xe*xe);return ht/=_,O*(xe/=_)<J*(pe/=_)&&(O=-O,J=-J,ht=-ht,tt=-tt),{scale:new vt(tt,0,0,_,0,0),translate:new vt(1,0,0,1,Ie,Ve),rotate:new vt(O,J,-J,O,0,0),skew:new vt(1,0,ht,1,0,0)}},vt.prototype.toString=function(O){return this.join(" ")},vt.prototype.inversed=function(){var O=this.sx,J=this.shy,pe=this.shx,xe=this.sy,Ie=this.tx,Ve=this.ty,tt=1/(O*xe-J*pe),ht=xe*tt,_=-J*tt,F=-pe*tt,X=O*tt;return new vt(ht,_,F,X,-ht*Ie-F*Ve,-_*Ie-X*Ve)},vt.prototype.applyToPoint=function(O){var J=O.x*this.sx+O.y*this.shx+this.tx,pe=O.x*this.shy+O.y*this.sy+this.ty;return new Ls(J,pe)},vt.prototype.applyToRectangle=function(O){var J=this.applyToPoint(O),pe=this.applyToPoint(new Ls(O.x+O.w,O.y+O.h));return new _l(J.x,J.y,pe.x-J.x,pe.y-J.y)},vt.prototype.clone=function(){var O=this.sx,J=this.shy,pe=this.shx,xe=this.sy,Ie=this.tx,Ve=this.ty;return new vt(O,J,pe,xe,Ie,Ve)},m.Matrix=vt;var Wn=m.matrixMult=function(O,J){return J.multiply(O)},Gn=new vt(1,0,0,1,0,0);m.unitMatrix=m.identityMatrix=Gn;var gr=function(O,J){if(!pa[O]){var pe=(J instanceof $f?"Sh":"P")+(Object.keys(on).length+1).toString(10);J.id=pe,pa[O]=pe,on[pe]=J,nn.publish("addPattern",J)}};m.ShadingPattern=$f,m.TilingPattern=sd,m.addShadingPattern=function(O,J){return A("addShadingPattern()"),gr(O,J),this},m.beginTilingPattern=function(O){A("beginTilingPattern()"),ss(O.boundingBox[0],O.boundingBox[1],O.boundingBox[2]-O.boundingBox[0],O.boundingBox[3]-O.boundingBox[1],O.matrix)},m.endTilingPattern=function(O,J){A("endTilingPattern()"),J.stream=He[Q].join(`
`),gr(O,J),nn.publish("endTilingPattern",J),Ua.pop().restore()};var Er=m.__private__.newObject=function(){var O=Nr();return Gr(O,!0),O},Nr=m.__private__.newObjectDeferred=function(){return de++,Ae[de]=function(){return Te},de},Gr=function(O,J){return J=typeof J=="boolean"&&J,Ae[O]=Te,J&&me(O+" 0 obj"),O},Ts=m.__private__.newAdditionalObject=function(){var O={objId:Nr(),content:""};return We.push(O),O},Ji=Nr(),gi=Nr(),ti=m.__private__.decodeColorString=function(O){var J=O.split(" ");if(J.length!==2||J[1]!=="g"&&J[1]!=="G")J.length===5&&(J[4]==="k"||J[4]==="K")&&(J=[(1-J[0])*(1-J[3]),(1-J[1])*(1-J[3]),(1-J[2])*(1-J[3]),"r"]);else{var pe=parseFloat(J[0]);J=[pe,pe,pe,"r"]}for(var xe="#",Ie=0;Ie<3;Ie++)xe+=("0"+Math.floor(255*parseFloat(J[Ie])).toString(16)).slice(-2);return xe},$r=m.__private__.encodeColorString=function(O){var J;typeof O=="string"&&(O={ch1:O});var pe=O.ch1,xe=O.ch2,Ie=O.ch3,Ve=O.ch4,tt=O.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof pe=="string"&&pe.charAt(0)!=="#"){var ht=new g8(pe);if(ht.ok)pe=ht.toHex();else if(!/^\d*\.?\d*$/.test(pe))throw new Error('Invalid color "'+pe+'" passed to jsPDF.encodeColorString.')}if(typeof pe=="string"&&/^#[0-9A-Fa-f]{3}$/.test(pe)&&(pe="#"+pe[1]+pe[1]+pe[2]+pe[2]+pe[3]+pe[3]),typeof pe=="string"&&/^#[0-9A-Fa-f]{6}$/.test(pe)){var _=parseInt(pe.substr(1),16);pe=_>>16&255,xe=_>>8&255,Ie=255&_}if(xe===void 0||Ve===void 0&&pe===xe&&xe===Ie)if(typeof pe=="string")J=pe+" "+tt[0];else switch(O.precision){case 2:J=k(pe/255)+" "+tt[0];break;case 3:default:J=R(pe/255)+" "+tt[0]}else if(Ve===void 0||or(Ve)==="object"){if(Ve&&!isNaN(Ve.a)&&Ve.a===0)return J=["1.","1.","1.",tt[1]].join(" ");if(typeof pe=="string")J=[pe,xe,Ie,tt[1]].join(" ");else switch(O.precision){case 2:J=[k(pe/255),k(xe/255),k(Ie/255),tt[1]].join(" ");break;default:case 3:J=[R(pe/255),R(xe/255),R(Ie/255),tt[1]].join(" ")}}else if(typeof pe=="string")J=[pe,xe,Ie,Ve,tt[2]].join(" ");else switch(O.precision){case 2:J=[k(pe),k(xe),k(Ie),k(Ve),tt[2]].join(" ");break;case 3:default:J=[R(pe),R(xe),R(Ie),R(Ve),tt[2]].join(" ")}return J},ni=m.__private__.getFilters=function(){return o},lr=m.__private__.putStream=function(O){var J=(O=O||{}).data||"",pe=O.filters||ni(),xe=O.alreadyAppliedFilters||[],Ie=O.addLength1||!1,Ve=J.length,tt=O.objectId,ht=function(Ut){return Ut};if(h!==null&&tt===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");h!==null&&(ht=er.encryptor(tt,0));var _={};pe===!0&&(pe=["FlateEncode"]);var F=O.additionalKeyValues||[],X=(_=Ht.API.processDataByFilters!==void 0?Ht.API.processDataByFilters(J,pe):{data:J,reverseChain:[]}).reverseChain+(Array.isArray(xe)?xe.join(" "):xe.toString());if(_.data.length!==0&&(F.push({key:"Length",value:_.data.length}),Ie===!0&&F.push({key:"Length1",value:Ve})),X.length!=0)if(X.split("/").length-1==1)F.push({key:"Filter",value:X});else{F.push({key:"Filter",value:"["+X+"]"});for(var se=0;se<F.length;se+=1)if(F[se].key==="DecodeParms"){for(var Ce=[],Le=0;Le<_.reverseChain.split("/").length-1;Le+=1)Ce.push("null");Ce.push(F[se].value),F[se].value="["+Ce.join(" ")+"]"}}me("<<");for(var nt=0;nt<F.length;nt++)me("/"+F[nt].key+" "+F[nt].value);me(">>"),_.data.length!==0&&(me("stream"),me(ht(_.data)),me("endstream"))},Bn=m.__private__.putPage=function(O){var J=O.number,pe=O.data,xe=O.objId,Ie=O.contentsObjId;Gr(xe,!0),me("<</Type /Page"),me("/Parent "+O.rootDictionaryObjId+" 0 R"),me("/Resources "+O.resourceDictionaryObjId+" 0 R"),me("/MediaBox ["+parseFloat(D(O.mediaBox.bottomLeftX))+" "+parseFloat(D(O.mediaBox.bottomLeftY))+" "+D(O.mediaBox.topRightX)+" "+D(O.mediaBox.topRightY)+"]"),O.cropBox!==null&&me("/CropBox ["+D(O.cropBox.bottomLeftX)+" "+D(O.cropBox.bottomLeftY)+" "+D(O.cropBox.topRightX)+" "+D(O.cropBox.topRightY)+"]"),O.bleedBox!==null&&me("/BleedBox ["+D(O.bleedBox.bottomLeftX)+" "+D(O.bleedBox.bottomLeftY)+" "+D(O.bleedBox.topRightX)+" "+D(O.bleedBox.topRightY)+"]"),O.trimBox!==null&&me("/TrimBox ["+D(O.trimBox.bottomLeftX)+" "+D(O.trimBox.bottomLeftY)+" "+D(O.trimBox.topRightX)+" "+D(O.trimBox.topRightY)+"]"),O.artBox!==null&&me("/ArtBox ["+D(O.artBox.bottomLeftX)+" "+D(O.artBox.bottomLeftY)+" "+D(O.artBox.topRightX)+" "+D(O.artBox.topRightY)+"]"),typeof O.userUnit=="number"&&O.userUnit!==1&&me("/UserUnit "+O.userUnit),nn.publish("putPage",{objId:xe,pageContext:Tt[J],pageNumber:J,page:pe}),me("/Contents "+Ie+" 0 R"),me(">>"),me("endobj");var Ve=pe.join(`
`);return B===P.ADVANCED&&(Ve+=`
Q`),Gr(Ie,!0),lr({data:Ve,filters:ni(),objectId:Ie}),me("endobj"),xe},So=m.__private__.putPages=function(){var O,J,pe=[];for(O=1;O<=yn;O++)Tt[O].objId=Nr(),Tt[O].contentsObjId=Nr();for(O=1;O<=yn;O++)pe.push(Bn({number:O,data:He[O],objId:Tt[O].objId,contentsObjId:Tt[O].contentsObjId,mediaBox:Tt[O].mediaBox,cropBox:Tt[O].cropBox,bleedBox:Tt[O].bleedBox,trimBox:Tt[O].trimBox,artBox:Tt[O].artBox,userUnit:Tt[O].userUnit,rootDictionaryObjId:Ji,resourceDictionaryObjId:gi}));Gr(Ji,!0),me("<</Type /Pages");var xe="/Kids [";for(J=0;J<yn;J++)xe+=pe[J]+" 0 R ";me(xe+"]"),me("/Count "+yn),me(">>"),me("endobj"),nn.publish("postPutPages")},Co=function(O){nn.publish("putFont",{font:O,out:me,newObject:Er,putStream:lr}),O.isAlreadyPutted!==!0&&(O.objectNumber=Er(),me("<<"),me("/Type /Font"),me("/BaseFont /"+nd(O.postScriptName)),me("/Subtype /Type1"),typeof O.encoding=="string"&&me("/Encoding /"+O.encoding),me("/FirstChar 32"),me("/LastChar 255"),me(">>"),me("endobj"))},ji=function(){for(var O in Kt)Kt.hasOwnProperty(O)&&(p===!1||p===!0&&g.hasOwnProperty(O))&&Co(Kt[O])},ga=function(O){O.objectNumber=Er();var J=[];J.push({key:"Type",value:"/XObject"}),J.push({key:"Subtype",value:"/Form"}),J.push({key:"BBox",value:"["+[D(O.x),D(O.y),D(O.x+O.width),D(O.y+O.height)].join(" ")+"]"}),J.push({key:"Matrix",value:"["+O.matrix.toString()+"]"});var pe=O.pages[1].join(`
`);lr({data:pe,additionalKeyValues:J,objectId:O.objectNumber}),me("endobj")},Is=function(){for(var O in Mn)Mn.hasOwnProperty(O)&&ga(Mn[O])},lu=function(O,J){var pe,xe=[],Ie=1/(J-1);for(pe=0;pe<1;pe+=Ie)xe.push(pe);if(xe.push(1),O[0].offset!=0){var Ve={offset:0,color:O[0].color};O.unshift(Ve)}if(O[O.length-1].offset!=1){var tt={offset:1,color:O[O.length-1].color};O.push(tt)}for(var ht="",_=0,F=0;F<xe.length;F++){for(pe=xe[F];pe>O[_+1].offset;)_++;var X=O[_].offset,se=(pe-X)/(O[_+1].offset-X),Ce=O[_].color,Le=O[_+1].color;ht+=ie(Math.round((1-se)*Ce[0]+se*Le[0]).toString(16))+ie(Math.round((1-se)*Ce[1]+se*Le[1]).toString(16))+ie(Math.round((1-se)*Ce[2]+se*Le[2]).toString(16))}return ht.trim()},Rs=function(O,J){J||(J=21);var pe=Er(),xe=lu(O.colors,J),Ie=[];Ie.push({key:"FunctionType",value:"0"}),Ie.push({key:"Domain",value:"[0.0 1.0]"}),Ie.push({key:"Size",value:"["+J+"]"}),Ie.push({key:"BitsPerSample",value:"8"}),Ie.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Ie.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),lr({data:xe,additionalKeyValues:Ie,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:pe}),me("endobj"),O.objectNumber=Er(),me("<< /ShadingType "+O.type),me("/ColorSpace /DeviceRGB");var Ve="/Coords ["+D(parseFloat(O.coords[0]))+" "+D(parseFloat(O.coords[1]))+" ";O.type===2?Ve+=D(parseFloat(O.coords[2]))+" "+D(parseFloat(O.coords[3])):Ve+=D(parseFloat(O.coords[2]))+" "+D(parseFloat(O.coords[3]))+" "+D(parseFloat(O.coords[4]))+" "+D(parseFloat(O.coords[5])),me(Ve+="]"),O.matrix&&me("/Matrix ["+O.matrix.toString()+"]"),me("/Function "+pe+" 0 R"),me("/Extend [true true]"),me(">>"),me("endobj")},ac=function(O,J){var pe=Nr(),xe=Er();J.push({resourcesOid:pe,objectOid:xe}),O.objectNumber=xe;var Ie=[];Ie.push({key:"Type",value:"/Pattern"}),Ie.push({key:"PatternType",value:"1"}),Ie.push({key:"PaintType",value:"1"}),Ie.push({key:"TilingType",value:"1"}),Ie.push({key:"BBox",value:"["+O.boundingBox.map(D).join(" ")+"]"}),Ie.push({key:"XStep",value:D(O.xStep)}),Ie.push({key:"YStep",value:D(O.yStep)}),Ie.push({key:"Resources",value:pe+" 0 R"}),O.matrix&&Ie.push({key:"Matrix",value:"["+O.matrix.toString()+"]"}),lr({data:O.stream,additionalKeyValues:Ie,objectId:O.objectNumber}),me("endobj")},Va=function(O){var J;for(J in on)on.hasOwnProperty(J)&&(on[J]instanceof $f?Rs(on[J]):on[J]instanceof sd&&ac(on[J],O))},za=function(O){for(var J in O.objectNumber=Er(),me("<<"),O)switch(J){case"opacity":me("/ca "+k(O[J]));break;case"stroke-opacity":me("/CA "+k(O[J]))}me(">>"),me("endobj")},ri=function(){var O;for(O in Cn)Cn.hasOwnProperty(O)&&za(Cn[O])},To=function(){for(var O in me("/XObject <<"),Mn)Mn.hasOwnProperty(O)&&Mn[O].objectNumber>=0&&me("/"+O+" "+Mn[O].objectNumber+" 0 R");nn.publish("putXobjectDict"),me(">>")},oc=function(){er.oid=Er(),me("<<"),me("/Filter /Standard"),me("/V "+er.v),me("/R "+er.r),me("/U <"+er.toHexString(er.U)+">"),me("/O <"+er.toHexString(er.O)+">"),me("/P "+er.P),me(">>"),me("endobj")},Za=function(){for(var O in me("/Font <<"),Kt)Kt.hasOwnProperty(O)&&(p===!1||p===!0&&g.hasOwnProperty(O))&&me("/"+O+" "+Kt[O].objectNumber+" 0 R");me(">>")},pl=function(){if(Object.keys(on).length>0){for(var O in me("/Shading <<"),on)on.hasOwnProperty(O)&&on[O]instanceof $f&&on[O].objectNumber>=0&&me("/"+O+" "+on[O].objectNumber+" 0 R");nn.publish("putShadingPatternDict"),me(">>")}},Io=function(O){if(Object.keys(on).length>0){for(var J in me("/Pattern <<"),on)on.hasOwnProperty(J)&&on[J]instanceof m.TilingPattern&&on[J].objectNumber>=0&&on[J].objectNumber<O&&me("/"+J+" "+on[J].objectNumber+" 0 R");nn.publish("putTilingPatternDict"),me(">>")}},uu=function(){if(Object.keys(Cn).length>0){var O;for(O in me("/ExtGState <<"),Cn)Cn.hasOwnProperty(O)&&Cn[O].objectNumber>=0&&me("/"+O+" "+Cn[O].objectNumber+" 0 R");nn.publish("putGStateDict"),me(">>")}},ur=function(O){Gr(O.resourcesOid,!0),me("<<"),me("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),Za(),pl(),Io(O.objectOid),uu(),To(),me(">>"),me("endobj")},mi=function(){var O=[];ji(),ri(),Is(),Va(O),nn.publish("putResources"),O.forEach(ur),ur({resourcesOid:gi,objectOid:Number.MAX_SAFE_INTEGER}),nn.publish("postPutResources")},gl=function(){nn.publish("putAdditionalObjects");for(var O=0;O<We.length;O++){var J=We[O];Gr(J.objId,!0),me(J.content),me("endobj")}nn.publish("postPutAdditionalObjects")},sc=function(O){An[O.fontName]=An[O.fontName]||{},An[O.fontName][O.fontStyle]=O.id},Zo=function(O,J,pe,xe,Ie){var Ve={id:"F"+(Object.keys(Kt).length+1).toString(10),postScriptName:O,fontName:J,fontStyle:pe,encoding:xe,isStandardFont:Ie||!1,metadata:{}};return nn.publish("addFont",{font:Ve,instance:this}),Kt[Ve.id]=Ve,sc(Ve),Ve.id},cu=function(O){for(var J=0,pe=Xe.length;J<pe;J++){var xe=Zo.call(this,O[J][0],O[J][1],O[J][2],Xe[J][3],!0);p===!1&&(g[xe]=!0);var Ie=O[J][0].split("-");sc({id:xe,fontName:Ie[0],fontStyle:Ie[1]||""})}nn.publish("addFonts",{fonts:Kt,dictionary:An})},Ci=function(O){return O.foo=function(){try{return O.apply(this,arguments)}catch(xe){var J=xe.stack||"";~J.indexOf(" at ")&&(J=J.split(" at ")[1]);var pe="Error in function "+J.split(`
`)[0].split("<")[0]+": "+xe.message;if(!Gt.console)throw new Error(pe);Gt.console.error(pe,xe),Gt.alert&&alert(pe)}},O.foo.bar=O,O.foo},ml=function(O,J){var pe,xe,Ie,Ve,tt,ht,_,F,X;if(Ie=(J=J||{}).sourceEncoding||"Unicode",tt=J.outputEncoding,(J.autoencode||tt)&&Kt[Dt].metadata&&Kt[Dt].metadata[Ie]&&Kt[Dt].metadata[Ie].encoding&&(Ve=Kt[Dt].metadata[Ie].encoding,!tt&&Kt[Dt].encoding&&(tt=Kt[Dt].encoding),!tt&&Ve.codePages&&(tt=Ve.codePages[0]),typeof tt=="string"&&(tt=Ve[tt]),tt)){for(_=!1,ht=[],pe=0,xe=O.length;pe<xe;pe++)(F=tt[O.charCodeAt(pe)])?ht.push(String.fromCharCode(F)):ht.push(O[pe]),ht[pe].charCodeAt(0)>>8&&(_=!0);O=ht.join("")}for(pe=O.length;_===void 0&&pe!==0;)O.charCodeAt(pe-1)>>8&&(_=!0),pe--;if(!_)return O;for(ht=J.noBOM?[]:[254,255],pe=0,xe=O.length;pe<xe;pe++){if((X=(F=O.charCodeAt(pe))>>8)>>8)throw new Error("Character at position "+pe+" of string '"+O+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");ht.push(X),ht.push(F-(X<<8))}return String.fromCharCode.apply(void 0,ht)},En=m.__private__.pdfEscape=m.pdfEscape=function(O,J){return ml(O,J).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Ti=m.__private__.beginPage=function(O){He[++yn]=[],Tt[yn]={objId:0,contentsObjId:0,userUnit:Number(s),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(O[0]),topRightY:Number(O[1])}},Ja(yn),Be(He[Q])},Jo=function(O,J){var pe,xe,Ie;switch(t=J||t,typeof O=="string"&&(pe=C(O.toLowerCase()),Array.isArray(pe)&&(xe=pe[0],Ie=pe[1])),Array.isArray(O)&&(xe=O[0]*ut,Ie=O[1]*ut),isNaN(xe)&&(xe=i[0],Ie=i[1]),(xe>14400||Ie>14400)&&(vr.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),xe=Math.min(14400,xe),Ie=Math.min(14400,Ie)),i=[xe,Ie],t.substr(0,1)){case"l":Ie>xe&&(i=[Ie,xe]);break;case"p":xe>Ie&&(i=[Ie,xe])}Ti(i),pu(rs),me(Ii),gu!==0&&me(gu+" J"),Ps!==0&&me(Ps+" j"),nn.publish("addPage",{pageNumber:yn})},es=function(O){O>0&&O<=yn&&(He.splice(O,1),Tt.splice(O,1),yn--,Q>yn&&(Q=yn),this.setPage(Q))},Ja=function(O){O>0&&O<=yn&&(Q=O)},jn=m.__private__.getNumberOfPages=m.getNumberOfPages=function(){return He.length-1},ts=function(O,J,pe){var xe,Ie=void 0;return pe=pe||{},O=O!==void 0?O:Kt[Dt].fontName,J=J!==void 0?J:Kt[Dt].fontStyle,xe=O.toLowerCase(),An[xe]!==void 0&&An[xe][J]!==void 0?Ie=An[xe][J]:An[O]!==void 0&&An[O][J]!==void 0?Ie=An[O][J]:pe.disableWarning===!1&&vr.warn("Unable to look up font label for font '"+O+"', '"+J+"'. Refer to getFontList() for available fonts."),Ie||pe.noFallback||(Ie=An.times[J])==null&&(Ie=An.times.normal),Ie},ma=m.__private__.putInfo=function(){var O=Er(),J=function(xe){return xe};for(var pe in h!==null&&(J=er.encryptor(O,0)),me("<<"),me("/Producer ("+En(J("jsPDF "+Ht.version))+")"),xt)xt.hasOwnProperty(pe)&&xt[pe]&&me("/"+pe.substr(0,1).toUpperCase()+pe.substr(1)+" ("+En(J(xt[pe]))+")");me("/CreationDate ("+En(J(ne))+")"),me(">>"),me("endobj")},Ro=m.__private__.putCatalog=function(O){var J=(O=O||{}).rootDictionaryObjId||Ji;switch(Er(),me("<<"),me("/Type /Catalog"),me("/Pages "+J+" 0 R"),at||(at="fullwidth"),at){case"fullwidth":me("/OpenAction [3 0 R /FitH null]");break;case"fullheight":me("/OpenAction [3 0 R /FitV null]");break;case"fullpage":me("/OpenAction [3 0 R /Fit]");break;case"original":me("/OpenAction [3 0 R /XYZ null null 1]");break;default:var pe=""+at;pe.substr(pe.length-1)==="%"&&(at=parseInt(at)/100),typeof at=="number"&&me("/OpenAction [3 0 R /XYZ null null "+k(at)+"]")}switch(_t||(_t="continuous"),_t){case"continuous":me("/PageLayout /OneColumn");break;case"single":me("/PageLayout /SinglePage");break;case"two":case"twoleft":me("/PageLayout /TwoColumnLeft");break;case"tworight":me("/PageLayout /TwoColumnRight")}mt&&me("/PageMode /"+mt),nn.publish("putCatalog"),me(">>"),me("endobj")},lc=m.__private__.putTrailer=function(){me("trailer"),me("<<"),me("/Size "+(de+1)),me("/Root "+de+" 0 R"),me("/Info "+(de-1)+" 0 R"),h!==null&&me("/Encrypt "+er.oid+" 0 R"),me("/ID [ <"+U+"> <"+U+"> ]"),me(">>")},fu=m.__private__.putHeader=function(){me("%PDF-"+x),me("%ºß¬à")},hu=m.__private__.putXRef=function(){var O="0000000000";me("xref"),me("0 "+(de+1)),me("0000000000 65535 f ");for(var J=1;J<=de;J++)typeof Ae[J]=="function"?me((O+Ae[J]()).slice(-10)+" 00000 n "):Ae[J]!==void 0?me((O+Ae[J]).slice(-10)+" 00000 n "):me("0000000000 00000 n ")},No=m.__private__.buildDocument=function(){wt(),Be(be),nn.publish("buildDocument"),fu(),So(),gl(),mi(),h!==null&&oc(),ma(),Ro();var O=Te;return hu(),lc(),me("startxref"),me(""+O),me("%%EOF"),Be(He[Q]),be.join(`
`)},vl=m.__private__.getBlob=function(O){return new Blob([lt(O)],{type:"application/pdf"})},Do=m.output=m.__private__.output=Ci(function(O,J){switch(typeof(J=J||{})=="string"?J={filename:J}:J.filename=J.filename||"generated.pdf",O){case void 0:return No();case"save":m.save(J.filename);break;case"arraybuffer":return lt(No());case"blob":return vl(No());case"bloburi":case"bloburl":if(Gt.URL!==void 0&&typeof Gt.URL.createObjectURL=="function")return Gt.URL&&Gt.URL.createObjectURL(vl(No()))||void 0;vr.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var pe="",xe=No();try{pe=zy(xe)}catch{pe=zy(unescape(encodeURIComponent(xe)))}return"data:application/pdf;filename="+J.filename+";base64,"+pe;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Gt)==="[object Window]"){var Ie="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Ve=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';J.pdfObjectUrl&&(Ie=J.pdfObjectUrl,Ve="");var tt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Ie+'"'+Ve+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(J)+");<\/script></body></html>",ht=Gt.open();return ht!==null&&ht.document.write(tt),ht}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Gt)==="[object Window]"){var _='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(J.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+J.filename+'" width="500px" height="400px" /></body></html>',F=Gt.open();if(F!==null){F.document.write(_);var X=this;F.document.documentElement.querySelector("#pdfViewer").onload=function(){F.document.title=J.filename,F.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(X.output("bloburl"))}}return F}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Gt)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var se='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",J)+'"></iframe></body></html>',Ce=Gt.open();if(Ce!==null&&(Ce.document.write(se),Ce.document.title=J.filename),Ce||typeof safari>"u")return Ce;break;case"datauri":case"dataurl":return Gt.document.location.href=this.output("datauristring",J);default:return null}}),eo=function(O){return Array.isArray(Si)===!0&&Si.indexOf(O)>-1};switch(r){case"pt":ut=1;break;case"mm":ut=72/25.4;break;case"cm":ut=72/2.54;break;case"in":ut=72;break;case"px":ut=eo("px_scaling")==1?.75:96/72;break;case"pc":case"em":ut=12;break;case"ex":ut=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);ut=r}var er=null;ve(),ee();var Oo=function(O){return h!==null?er.encryptor(O,0):function(J){return J}},to=m.__private__.getPageInfo=m.getPageInfo=function(O){if(isNaN(O)||O%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Tt[O].objId,pageNumber:O,pageContext:Tt[O]}},Ft=m.__private__.getPageInfoByObjId=function(O){if(isNaN(O)||O%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var J in Tt)if(Tt[J].objId===O)break;return to(J)},no=m.__private__.getCurrentPageInfo=m.getCurrentPageInfo=function(){return{objId:Tt[Q].objId,pageNumber:Q,pageContext:Tt[Q]}};m.addPage=function(){return Jo.apply(this,arguments),this},m.setPage=function(){return Ja.apply(this,arguments),Be.call(this,He[Q]),this},m.insertPage=function(O){return this.addPage(),this.movePage(Q,O),this},m.movePage=function(O,J){var pe,xe;if(O>J){pe=He[O],xe=Tt[O];for(var Ie=O;Ie>J;Ie--)He[Ie]=He[Ie-1],Tt[Ie]=Tt[Ie-1];He[J]=pe,Tt[J]=xe,this.setPage(J)}else if(O<J){pe=He[O],xe=Tt[O];for(var Ve=O;Ve<J;Ve++)He[Ve]=He[Ve+1],Tt[Ve]=Tt[Ve+1];He[J]=pe,Tt[J]=xe,this.setPage(J)}return this},m.deletePage=function(){return es.apply(this,arguments),this},m.__private__.text=m.text=function(O,J,pe,xe,Ie){var Ve,tt,ht,_,F,X,se,Ce,Le,nt=(xe=xe||{}).scope||this;if(typeof O=="number"&&typeof J=="number"&&(typeof pe=="string"||Array.isArray(pe))){var Ut=pe;pe=J,J=O,O=Ut}if(arguments[3]instanceof vt?(A("The transform parameter of text() with a Matrix value"),Le=Ie):(ht=arguments[4],_=arguments[5],or(se=arguments[3])==="object"&&se!==null||(typeof ht=="string"&&(_=ht,ht=null),typeof se=="string"&&(_=se,se=null),typeof se=="number"&&(ht=se,se=null),xe={flags:se,angle:ht,align:_})),isNaN(J)||isNaN(pe)||O==null)throw new Error("Invalid arguments passed to jsPDF.text");if(O.length===0)return nt;var dn="",Qt=!1,Fn=typeof xe.lineHeightFactor=="number"?xe.lineHeightFactor:hn,Kn=nt.internal.scaleFactor;function oo(ln){return ln=ln.split("	").join(Array(xe.TabLen||9).join(" ")),En(ln,se)}function Br(ln){for(var un,cr=ln.concat(),jr=[],lo=cr.length;lo--;)typeof(un=cr.shift())=="string"?jr.push(un):Array.isArray(ln)&&(un.length===1||un[1]===void 0&&un[2]===void 0)?jr.push(un[0]):jr.push([un[0],un[1],un[2]]);return jr}function _a(ln,un){var cr;if(typeof ln=="string")cr=un(ln)[0];else if(Array.isArray(ln)){for(var jr,lo,Dl=ln.concat(),Ol=[],Fs=Dl.length;Fs--;)typeof(jr=Dl.shift())=="string"?Ol.push(un(jr)[0]):Array.isArray(jr)&&typeof jr[0]=="string"&&(lo=un(jr[0],jr[1],jr[2]),Ol.push([lo[0],lo[1],lo[2]]));cr=Ol}return cr}var us=!1,bl=!0;if(typeof O=="string")us=!0;else if(Array.isArray(O)){var hc=O.concat();tt=[];for(var mu,ii=hc.length;ii--;)(typeof(mu=hc.shift())!="string"||Array.isArray(mu)&&typeof mu[0]!="string")&&(bl=!1);us=bl}if(us===!1)throw new Error('Type of text must be string or Array. "'+O+'" is not recognized.');typeof O=="string"&&(O=O.match(/[\r?\n]/)?O.split(/\r\n|\r|\n/g):[O]);var Al=it/nt.internal.scaleFactor,vu=Al*(Fn-1);switch(xe.baseline){case"bottom":pe-=vu;break;case"top":pe+=Al-vu;break;case"hanging":pe+=Al-2*vu;break;case"middle":pe+=Al/2-vu}if((X=xe.maxWidth||0)>0&&(typeof O=="string"?O=nt.splitTextToSize(O,X):Object.prototype.toString.call(O)==="[object Array]"&&(O=O.reduce(function(ln,un){return ln.concat(nt.splitTextToSize(un,X))},[]))),Ve={text:O,x:J,y:pe,options:xe,mutex:{pdfEscape:En,activeFontKey:Dt,fonts:Kt,activeFontSize:it}},nn.publish("preProcessText",Ve),O=Ve.text,ht=(xe=Ve.options).angle,!(Le instanceof vt)&&ht&&typeof ht=="number"){ht*=Math.PI/180,xe.rotationDirection===0&&(ht=-ht),B===P.ADVANCED&&(ht=-ht);var yu=Math.cos(ht),dc=Math.sin(ht);Le=new vt(yu,dc,-dc,yu,0,0)}else ht&&ht instanceof vt&&(Le=ht);B!==P.ADVANCED||Le||(Le=Gn),(F=xe.charSpace||Os)!==void 0&&(dn+=D(L(F))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Ce=xe.horizontalScale)!==void 0&&(dn+=D(100*Ce)+` Tz
`),xe.lang;var wa=-1,kd=xe.renderingMode!==void 0?xe.renderingMode:xe.stroke,_f=nt.internal.getCurrentPageInfo().pageContext;switch(kd){case 0:case!1:case"fill":wa=0;break;case 1:case!0:case"stroke":wa=1;break;case 2:case"fillThenStroke":wa=2;break;case 3:case"invisible":wa=3;break;case 4:case"fillAndAddForClipping":wa=4;break;case 5:case"strokeAndAddPathForClipping":wa=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":wa=6;break;case 7:case"addToPathForClipping":wa=7}var vh=_f.usedRenderingMode!==void 0?_f.usedRenderingMode:-1;wa!==-1?dn+=wa+` Tr
`:vh!==-1&&(dn+=`0 Tr
`),wa!==-1&&(_f.usedRenderingMode=wa),_=xe.align||"left";var so,vi=it*Fn,El=nt.internal.pageSize.getWidth(),wf=Kt[Dt];F=xe.charSpace||Os,X=xe.maxWidth||0,se=Object.assign({autoencode:!0,noBOM:!0},xe.flags);var Bs=[],Sl=function(ln){return nt.getStringUnitWidth(ln,{font:wf,charSpace:F,fontSize:it,doKerning:!1})*it/Kn};if(Object.prototype.toString.call(O)==="[object Array]"){var ta;tt=Br(O),_!=="left"&&(so=tt.map(Sl));var Ri,Cl=0;if(_==="right"){J-=so[0],O=[],ii=tt.length;for(var ba=0;ba<ii;ba++)ba===0?(Ri=Vi(J),ta=Yr(pe)):(Ri=L(Cl-so[ba]),ta=-vi),O.push([tt[ba],Ri,ta]),Cl=so[ba]}else if(_==="center"){J-=so[0]/2,O=[],ii=tt.length;for(var Mo=0;Mo<ii;Mo++)Mo===0?(Ri=Vi(J),ta=Yr(pe)):(Ri=L((Cl-so[Mo])/2),ta=-vi),O.push([tt[Mo],Ri,ta]),Cl=so[Mo]}else if(_==="left"){O=[],ii=tt.length;for(var cs=0;cs<ii;cs++)O.push(tt[cs])}else if(_==="justify"&&wf.encoding==="Identity-H"){O=[],ii=tt.length,X=X!==0?X:El;for(var Bo=0,Dr=0;Dr<ii;Dr++)if(ta=Dr===0?Yr(pe):-vi,Ri=Dr===0?Vi(J):Bo,Dr<ii-1){var jo=L((X-so[Dr])/(tt[Dr].split(" ").length-1)),Kr=tt[Dr].split(" ");O.push([Kr[0]+" ",Ri,ta]),Bo=0;for(var Aa=1;Aa<Kr.length;Aa++){var xu=(Sl(Kr[Aa-1]+" "+Kr[Aa])-Sl(Kr[Aa]))*Kn+jo;Aa==Kr.length-1?O.push([Kr[Aa],xu,0]):O.push([Kr[Aa]+" ",xu,0]),Bo-=xu}}else O.push([tt[Dr],Ri,ta]);O.push(["",Bo,0])}else{if(_!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(O=[],ii=tt.length,X=X!==0?X:El,Dr=0;Dr<ii;Dr++)ta=Dr===0?Yr(pe):-vi,Ri=Dr===0?Vi(J):0,Dr<ii-1?Bs.push(D(L((X-so[Dr])/(tt[Dr].split(" ").length-1)))):Bs.push(0),O.push([tt[Dr],Ri,ta])}}var fs=typeof xe.R2L=="boolean"?xe.R2L:ct;fs===!0&&(O=_a(O,function(ln,un,cr){return[ln.split("").reverse().join(""),un,cr]})),Ve={text:O,x:J,y:pe,options:xe,mutex:{pdfEscape:En,activeFontKey:Dt,fonts:Kt,activeFontSize:it}},nn.publish("postProcessText",Ve),O=Ve.text,Qt=Ve.mutex.isHex||!1;var pc=Kt[Dt].encoding;pc!=="WinAnsiEncoding"&&pc!=="StandardEncoding"||(O=_a(O,function(ln,un,cr){return[oo(ln),un,cr]})),tt=Br(O),O=[];for(var Tl,Il,Rl,_u=0,gc=1,Nl=Array.isArray(tt[0])?gc:_u,js="",wu=function(ln,un,cr){var jr="";return cr instanceof vt?(cr=typeof xe.angle=="number"?Wn(cr,new vt(1,0,0,1,ln,un)):Wn(new vt(1,0,0,1,ln,un),cr),B===P.ADVANCED&&(cr=Wn(new vt(1,0,0,-1,0,0),cr)),jr=cr.join(" ")+` Tm
`):jr=D(ln)+" "+D(un)+` Td
`,jr},Or=0;Or<tt.length;Or++){switch(js="",Nl){case gc:Rl=(Qt?"<":"(")+tt[Or][0]+(Qt?">":")"),Tl=parseFloat(tt[Or][1]),Il=parseFloat(tt[Or][2]);break;case _u:Rl=(Qt?"<":"(")+tt[Or]+(Qt?">":")"),Tl=Vi(J),Il=Yr(pe)}Bs!==void 0&&Bs[Or]!==void 0&&(js=Bs[Or]+` Tw
`),Or===0?O.push(js+wu(Tl,Il,Le)+Rl):Nl===_u?O.push(js+Rl):Nl===gc&&O.push(js+wu(Tl,Il,Le)+Rl)}O=Nl===_u?O.join(` Tj
T* `):O.join(` Tj
`),O+=` Tj
`;var Ha=`BT
/`;return Ha+=Dt+" "+it+` Tf
`,Ha+=D(it*Fn)+` TL
`,Ha+=Lo+`
`,Ha+=dn,Ha+=O,me(Ha+="ET"),g[Dt]=!0,nt};var uc=m.__private__.clip=m.clip=function(O){return me(O==="evenodd"?"W*":"W"),this};m.clipEvenOdd=function(){return uc("evenodd")},m.__private__.discardPath=m.discardPath=function(){return me("n"),this};var Fi=m.__private__.isValidStyle=function(O){var J=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(O)!==-1&&(J=!0),J};m.__private__.setDefaultPathOperation=m.setDefaultPathOperation=function(O){return Fi(O)&&(f=O),this};var va=m.__private__.getStyle=m.getStyle=function(O){var J=f;switch(O){case"D":case"S":J="S";break;case"F":J="f";break;case"FD":case"DF":J="B";break;case"f":case"f*":case"B":case"B*":J=O}return J},ea=m.close=function(){return me("h"),this};m.stroke=function(){return me("S"),this},m.fill=function(O){return ro("f",O),this},m.fillEvenOdd=function(O){return ro("f*",O),this},m.fillStroke=function(O){return ro("B",O),this},m.fillStrokeEvenOdd=function(O){return ro("B*",O),this};var ro=function(O,J){or(J)==="object"?Po(J,O):me(O)},ya=function(O){O===null||B===P.ADVANCED&&O===void 0||(O=va(O),me(O))};function ns(O,J,pe,xe,Ie){var Ve=new sd(J||this.boundingBox,pe||this.xStep,xe||this.yStep,this.gState,Ie||this.matrix);Ve.stream=this.stream;var tt=O+"$$"+this.cloneIndex+++"$$";return gr(tt,Ve),Ve}var Po=function(O,J){var pe=pa[O.key],xe=on[pe];if(xe instanceof $f)me("q"),me(du(J)),xe.gState&&m.setGState(xe.gState),me(O.matrix.toString()+" cm"),me("/"+pe+" sh"),me("Q");else if(xe instanceof sd){var Ie=new vt(1,0,0,-1,0,zi());O.matrix&&(Ie=Ie.multiply(O.matrix||Gn),pe=ns.call(xe,O.key,O.boundingBox,O.xStep,O.yStep,Ie).id),me("q"),me("/Pattern cs"),me("/"+pe+" scn"),xe.gState&&m.setGState(xe.gState),me(J),me("Q")}},du=function(O){switch(O){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},xa=m.moveTo=function(O,J){return me(D(L(O))+" "+D(H(J))+" m"),this},Ui=m.lineTo=function(O,J){return me(D(L(O))+" "+D(H(J))+" l"),this},io=m.curveTo=function(O,J,pe,xe,Ie,Ve){return me([D(L(O)),D(H(J)),D(L(pe)),D(H(xe)),D(L(Ie)),D(H(Ve)),"c"].join(" ")),this};m.__private__.line=m.line=function(O,J,pe,xe,Ie){if(isNaN(O)||isNaN(J)||isNaN(pe)||isNaN(xe)||!Fi(Ie))throw new Error("Invalid arguments passed to jsPDF.line");return B===P.COMPAT?this.lines([[pe-O,xe-J]],O,J,[1,1],Ie||"S"):this.lines([[pe-O,xe-J]],O,J,[1,1]).stroke()},m.__private__.lines=m.lines=function(O,J,pe,xe,Ie,Ve){var tt,ht,_,F,X,se,Ce,Le,nt,Ut,dn,Qt;if(typeof O=="number"&&(Qt=pe,pe=J,J=O,O=Qt),xe=xe||[1,1],Ve=Ve||!1,isNaN(J)||isNaN(pe)||!Array.isArray(O)||!Array.isArray(xe)||!Fi(Ie)||typeof Ve!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(xa(J,pe),tt=xe[0],ht=xe[1],F=O.length,Ut=J,dn=pe,_=0;_<F;_++)(X=O[_]).length===2?(Ut=X[0]*tt+Ut,dn=X[1]*ht+dn,Ui(Ut,dn)):(se=X[0]*tt+Ut,Ce=X[1]*ht+dn,Le=X[2]*tt+Ut,nt=X[3]*ht+dn,Ut=X[4]*tt+Ut,dn=X[5]*ht+dn,io(se,Ce,Le,nt,Ut,dn));return Ve&&ea(),ya(Ie),this},m.path=function(O){for(var J=0;J<O.length;J++){var pe=O[J],xe=pe.c;switch(pe.op){case"m":xa(xe[0],xe[1]);break;case"l":Ui(xe[0],xe[1]);break;case"c":io.apply(this,xe);break;case"h":ea()}}return this},m.__private__.rect=m.rect=function(O,J,pe,xe,Ie){if(isNaN(O)||isNaN(J)||isNaN(pe)||isNaN(xe)||!Fi(Ie))throw new Error("Invalid arguments passed to jsPDF.rect");return B===P.COMPAT&&(xe=-xe),me([D(L(O)),D(H(J)),D(L(pe)),D(L(xe)),"re"].join(" ")),ya(Ie),this},m.__private__.triangle=m.triangle=function(O,J,pe,xe,Ie,Ve,tt){if(isNaN(O)||isNaN(J)||isNaN(pe)||isNaN(xe)||isNaN(Ie)||isNaN(Ve)||!Fi(tt))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[pe-O,xe-J],[Ie-pe,Ve-xe],[O-Ie,J-Ve]],O,J,[1,1],tt,!0),this},m.__private__.roundedRect=m.roundedRect=function(O,J,pe,xe,Ie,Ve,tt){if(isNaN(O)||isNaN(J)||isNaN(pe)||isNaN(xe)||isNaN(Ie)||isNaN(Ve)||!Fi(tt))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var ht=4/3*(Math.SQRT2-1);return Ie=Math.min(Ie,.5*pe),Ve=Math.min(Ve,.5*xe),this.lines([[pe-2*Ie,0],[Ie*ht,0,Ie,Ve-Ve*ht,Ie,Ve],[0,xe-2*Ve],[0,Ve*ht,-Ie*ht,Ve,-Ie,Ve],[2*Ie-pe,0],[-Ie*ht,0,-Ie,-Ve*ht,-Ie,-Ve],[0,2*Ve-xe],[0,-Ve*ht,Ie*ht,-Ve,Ie,-Ve]],O+Ie,J,[1,1],tt,!0),this},m.__private__.ellipse=m.ellipse=function(O,J,pe,xe,Ie){if(isNaN(O)||isNaN(J)||isNaN(pe)||isNaN(xe)||!Fi(Ie))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Ve=4/3*(Math.SQRT2-1)*pe,tt=4/3*(Math.SQRT2-1)*xe;return xa(O+pe,J),io(O+pe,J-tt,O+Ve,J-xe,O,J-xe),io(O-Ve,J-xe,O-pe,J-tt,O-pe,J),io(O-pe,J+tt,O-Ve,J+xe,O,J+xe),io(O+Ve,J+xe,O+pe,J+tt,O+pe,J),ya(Ie),this},m.__private__.circle=m.circle=function(O,J,pe,xe){if(isNaN(O)||isNaN(J)||isNaN(pe)||!Fi(xe))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(O,J,pe,pe,xe)},m.setFont=function(O,J,pe){return pe&&(J=q(J,pe)),Dt=ts(O,J,{disableWarning:!1}),this};var Xr=m.__private__.getFont=m.getFont=function(){return Kt[ts.apply(m,arguments)]};m.__private__.getFontList=m.getFontList=function(){var O,J,pe={};for(O in An)if(An.hasOwnProperty(O))for(J in pe[O]=[],An[O])An[O].hasOwnProperty(J)&&pe[O].push(J);return pe},m.addFont=function(O,J,pe,xe,Ie){var Ve=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Ve.indexOf(arguments[3])!==-1?Ie=arguments[3]:arguments[3]&&Ve.indexOf(arguments[3])==-1&&(pe=q(pe,xe)),Ie=Ie||"Identity-H",Zo.call(this,O,J,pe,Ie)};var hn,rs=n.lineWidth||.200025,ao=m.__private__.getLineWidth=m.getLineWidth=function(){return rs},pu=m.__private__.setLineWidth=m.setLineWidth=function(O){return rs=O,me(D(L(O))+" w"),this};m.__private__.setLineDash=Ht.API.setLineDash=Ht.API.setLineDashPattern=function(O,J){if(O=O||[],J=J||0,isNaN(J)||!Array.isArray(O))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return O=O.map(function(pe){return D(L(pe))}).join(" "),J=D(L(J)),me("["+O+"] "+J+" d"),this};var Ns=m.__private__.getLineHeight=m.getLineHeight=function(){return it*hn};m.__private__.getLineHeight=m.getLineHeight=function(){return it*hn};var Ds=m.__private__.setLineHeightFactor=m.setLineHeightFactor=function(O){return typeof(O=O||1.15)=="number"&&(hn=O),this},qa=m.__private__.getLineHeightFactor=m.getLineHeightFactor=function(){return hn};Ds(n.lineHeight);var Vi=m.__private__.getHorizontalCoordinate=function(O){return L(O)},Yr=m.__private__.getVerticalCoordinate=function(O){return B===P.ADVANCED?O:Tt[Q].mediaBox.topRightY-Tt[Q].mediaBox.bottomLeftY-L(O)},cc=m.__private__.getHorizontalCoordinateString=m.getHorizontalCoordinateString=function(O){return D(Vi(O))},is=m.__private__.getVerticalCoordinateString=m.getVerticalCoordinateString=function(O){return D(Yr(O))},Ii=n.strokeColor||"0 G";m.__private__.getStrokeColor=m.getDrawColor=function(){return ti(Ii)},m.__private__.setStrokeColor=m.setDrawColor=function(O,J,pe,xe){return Ii=$r({ch1:O,ch2:J,ch3:pe,ch4:xe,pdfColorType:"draw",precision:2}),me(Ii),this};var as=n.fillColor||"0 g";m.__private__.getFillColor=m.getFillColor=function(){return ti(as)},m.__private__.setFillColor=m.setFillColor=function(O,J,pe,xe){return as=$r({ch1:O,ch2:J,ch3:pe,ch4:xe,pdfColorType:"fill",precision:2}),me(as),this};var Lo=n.textColor||"0 g",yl=m.__private__.getTextColor=m.getTextColor=function(){return ti(Lo)};m.__private__.setTextColor=m.setTextColor=function(O,J,pe,xe){return Lo=$r({ch1:O,ch2:J,ch3:pe,ch4:xe,pdfColorType:"text",precision:3}),this};var Os=n.charSpace,xl=m.__private__.getCharSpace=m.getCharSpace=function(){return parseFloat(Os||0)};m.__private__.setCharSpace=m.setCharSpace=function(O){if(isNaN(O))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Os=O,this};var gu=0;m.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},m.__private__.setLineCap=m.setLineCap=function(O){var J=m.CapJoinStyles[O];if(J===void 0)throw new Error("Line cap style of '"+O+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return gu=J,me(J+" J"),this};var Ps=0;m.__private__.setLineJoin=m.setLineJoin=function(O){var J=m.CapJoinStyles[O];if(J===void 0)throw new Error("Line join style of '"+O+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Ps=J,me(J+" j"),this},m.__private__.setLineMiterLimit=m.__private__.setMiterLimit=m.setLineMiterLimit=m.setMiterLimit=function(O){if(O=O||0,isNaN(O))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return me(D(L(O))+" M"),this},m.GState=Hg,m.setGState=function(O){(O=typeof O=="string"?Cn[Mr[O]]:os(null,O)).equals(sr)||(me("/"+O.id+" gs"),sr=O)};var os=function(O,J){if(!O||!Mr[O]){var pe=!1;for(var xe in Cn)if(Cn.hasOwnProperty(xe)&&Cn[xe].equals(J)){pe=!0;break}if(pe)J=Cn[xe];else{var Ie="GS"+(Object.keys(Cn).length+1).toString(10);Cn[Ie]=J,J.id=Ie}return O&&(Mr[O]=J.id),nn.publish("addGState",J),J}};m.addGState=function(O,J){return os(O,J),this},m.saveGraphicsState=function(){return me("q"),pi.push({key:Dt,size:it,color:Lo}),this},m.restoreGraphicsState=function(){me("Q");var O=pi.pop();return Dt=O.key,it=O.size,Lo=O.color,sr=null,this},m.setCurrentTransformationMatrix=function(O){return me(O.toString()+" cm"),this},m.comment=function(O){return me("#"+O),this};var Ls=function(O,J){var pe=O||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return pe},set:function(Ve){isNaN(Ve)||(pe=parseFloat(Ve))}});var xe=J||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return xe},set:function(Ve){isNaN(Ve)||(xe=parseFloat(Ve))}});var Ie="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Ie},set:function(Ve){Ie=Ve.toString()}}),this},_l=function(O,J,pe,xe){Ls.call(this,O,J),this.type="rect";var Ie=pe||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Ie},set:function(tt){isNaN(tt)||(Ie=parseFloat(tt))}});var Ve=xe||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Ve},set:function(tt){isNaN(tt)||(Ve=parseFloat(tt))}}),this},ks=function(){this.page=yn,this.currentPage=Q,this.pages=He.slice(0),this.pagesContext=Tt.slice(0),this.x=vn,this.y=zt,this.matrix=Yn,this.width=ls(Q),this.height=zi(Q),this.outputDestination=st,this.id="",this.objectNumber=-1};ks.prototype.restore=function(){yn=this.page,Q=this.currentPage,Tt=this.pagesContext,He=this.pages,vn=this.x,zt=this.y,Yn=this.matrix,Ms(Q,this.width),wl(Q,this.height),st=this.outputDestination};var ss=function(O,J,pe,xe,Ie){Ua.push(new ks),yn=Q=0,He=[],vn=O,zt=J,Yn=Ie,Ti([pe,xe])},fc=function(O){if(pr[O])Ua.pop().restore();else{var J=new ks,pe="Xo"+(Object.keys(Mn).length+1).toString(10);J.id=pe,pr[O]=pe,Mn[pe]=J,nn.publish("addFormObject",J),Ua.pop().restore()}};for(var ko in m.beginFormObject=function(O,J,pe,xe,Ie){return ss(O,J,pe,xe,Ie),this},m.endFormObject=function(O){return fc(O),this},m.doFormObject=function(O,J){var pe=Mn[pr[O]];return me("q"),me(J.toString()+" cm"),me("/"+pe.id+" Do"),me("Q"),this},m.getFormObject=function(O){var J=Mn[pr[O]];return{x:J.x,y:J.y,width:J.width,height:J.height,matrix:J.matrix}},m.save=function(O,J){return O=O||"generated.pdf",(J=J||{}).returnPromise=J.returnPromise||!1,J.returnPromise===!1?(Gf(vl(No()),O),typeof Gf.unload=="function"&&Gt.setTimeout&&setTimeout(Gf.unload,911),this):new Promise(function(pe,xe){try{var Ie=Gf(vl(No()),O);typeof Gf.unload=="function"&&Gt.setTimeout&&setTimeout(Gf.unload,911),pe(Ie)}catch(Ve){xe(Ve.message)}})},Ht.API)Ht.API.hasOwnProperty(ko)&&(ko==="events"&&Ht.API.events.length?function(O,J){var pe,xe,Ie;for(Ie=J.length-1;Ie!==-1;Ie--)pe=J[Ie][0],xe=J[Ie][1],O.subscribe.apply(O,[pe].concat(typeof xe=="function"?[xe]:xe))}(nn,Ht.API.events):m[ko]=Ht.API[ko]);var ls=m.getPageWidth=function(O){return(Tt[O=O||Q].mediaBox.topRightX-Tt[O].mediaBox.bottomLeftX)/ut},Ms=m.setPageWidth=function(O,J){Tt[O].mediaBox.topRightX=J*ut+Tt[O].mediaBox.bottomLeftX},zi=m.getPageHeight=function(O){return(Tt[O=O||Q].mediaBox.topRightY-Tt[O].mediaBox.bottomLeftY)/ut},wl=m.setPageHeight=function(O,J){Tt[O].mediaBox.topRightY=J*ut+Tt[O].mediaBox.bottomLeftY};return m.internal={pdfEscape:En,getStyle:va,getFont:Xr,getFontSize:ot,getCharSpace:xl,getTextColor:yl,getLineHeight:Ns,getLineHeightFactor:qa,getLineWidth:ao,write:gt,getHorizontalCoordinate:Vi,getVerticalCoordinate:Yr,getCoordinateString:cc,getVerticalCoordinateString:is,collections:{},newObject:Er,newAdditionalObject:Ts,newObjectDeferred:Nr,newObjectDeferredBegin:Gr,getFilters:ni,putStream:lr,events:nn,scaleFactor:ut,pageSize:{getWidth:function(){return ls(Q)},setWidth:function(O){Ms(Q,O)},getHeight:function(){return zi(Q)},setHeight:function(O){wl(Q,O)}},encryptionOptions:h,encryption:er,getEncryptor:Oo,output:Do,getNumberOfPages:jn,pages:He,out:me,f2:k,f3:R,getPageInfo:to,getPageInfoByObjId:Ft,getCurrentPageInfo:no,getPDFVersion:w,Point:Ls,Rectangle:_l,Matrix:vt,hasHotfix:eo},Object.defineProperty(m.internal.pageSize,"width",{get:function(){return ls(Q)},set:function(O){Ms(Q,O)},enumerable:!0,configurable:!0}),Object.defineProperty(m.internal.pageSize,"height",{get:function(){return zi(Q)},set:function(O){wl(Q,O)},enumerable:!0,configurable:!0}),cu.call(m,Xe),Dt="F1",Jo(i,t),nn.publish("initialized"),m}td.prototype.lsbFirstWord=function(n){return String.fromCharCode(n>>0&255,n>>8&255,n>>16&255,n>>24&255)},td.prototype.toHexString=function(n){return n.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},td.prototype.hexToBytes=function(n){for(var e=[],t=0;t<n.length;t+=2)e.push(String.fromCharCode(parseInt(n.substr(t,2),16)));return e.join("")},td.prototype.processOwnerPassword=function(n,e){return Hy(qy(e).substr(0,5),n)},td.prototype.encryptor=function(n,e){var t=qy(this.encryptionKey+String.fromCharCode(255&n,n>>8&255,n>>16&255,255&e,e>>8&255)).substr(0,10);return function(r){return Hy(t,r)}},Hg.prototype.equals=function(n){var e,t="id,objectNumber,equals";if(!n||or(n)!==or(this))return!1;var r=0;for(e in this)if(!(t.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!n.hasOwnProperty(e)||this[e]!==n[e])return!1;r++}for(e in n)n.hasOwnProperty(e)&&t.indexOf(e)<0&&r--;return r===0},Ht.API={events:[]},Ht.version="3.0.1";var ei=Ht.API,xx=1,mh=function(n){return n.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Yh=function(n){return n.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},en=function(n){return n.toFixed(2)},Wc=function(n){return n.toFixed(5)};ei.__acroform__={};var Eo=function(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n},S4=function(n){return n*xx},Wl=function(n){var e=new x8,t=Ct.internal.getHeight(n)||0,r=Ct.internal.getWidth(n)||0;return e.BBox=[0,0,Number(en(r)),Number(en(t))],e},mz=ei.__acroform__.setBit=function(n,e){if(n=n||0,e=e||0,isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return n|=1<<e},vz=ei.__acroform__.clearBit=function(n,e){if(n=n||0,e=e||0,isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return n&=~(1<<e)},yz=ei.__acroform__.getBit=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return(n&1<<e)==0?0:1},fi=ei.__acroform__.getBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return yz(n,e-1)},hi=ei.__acroform__.setBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return mz(n,e-1)},di=ei.__acroform__.clearBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return vz(n,e-1)},xz=ei.__acroform__.calculateCoordinates=function(n,e){var t=e.internal.getHorizontalCoordinate,r=e.internal.getVerticalCoordinate,i=n[0],a=n[1],o=n[2],s=n[3],u={};return u.lowerLeft_X=t(i)||0,u.lowerLeft_Y=r(a+s)||0,u.upperRight_X=t(i+o)||0,u.upperRight_Y=r(a)||0,[Number(en(u.lowerLeft_X)),Number(en(u.lowerLeft_Y)),Number(en(u.upperRight_X)),Number(en(u.upperRight_Y))]},_z=function(n){if(n.appearanceStreamContent)return n.appearanceStreamContent;if(n.V||n.DV){var e=[],t=n._V||n.DV,r=Wy(n,t),i=n.scope.internal.getFont(n.fontName,n.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(n.scope.__private__.encodeColorString(n.color)),e.push("/"+i+" "+en(r.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(r.text),e.push("ET"),e.push("Q"),e.push("EMC");var a=Wl(n);return a.scope=n.scope,a.stream=e.join(`
`),a}},Wy=function(n,e){var t=n.fontSize===0?n.maxFontSize:n.fontSize,r={text:"",fontSize:""},i=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");i=n.multiline?i.map(function(R){return R.split(`
`)}):i.map(function(R){return[R]});var a=t,o=Ct.internal.getHeight(n)||0;o=o<0?-o:o;var s=Ct.internal.getWidth(n)||0;s=s<0?-s:s;var u=function(R,L,j){if(R+1<i.length){var H=L+" "+i[R+1][0];return Up(H,n,j).width<=s-4}return!1};a++;e:for(;a>0;){e="",a--;var f,h,p=Up("3",n,a).height,g=n.multiline?o-a:(o-p)/2,m=g+=2,x=0,w=0,I=0;if(a<=0){e=`(...) Tj
`,e+="% Width of Text: "+Up(e,n,a=12).width+", FieldWidth:"+s+`
`;break}for(var C="",P=0,B=0;B<i.length;B++)if(i.hasOwnProperty(B)){var V=!1;if(i[B].length!==1&&I!==i[B].length-1){if((p+2)*(P+2)+2>o)continue e;C+=i[B][I],V=!0,w=B,B--}else{C=(C+=i[B][I]+" ").substr(C.length-1)==" "?C.substr(0,C.length-1):C;var Y=parseInt(B),q=u(Y,C,a),D=B>=i.length-1;if(q&&!D){C+=" ",I=0;continue}if(q||D){if(D)w=Y;else if(n.multiline&&(p+2)*(P+2)+2>o)continue e}else{if(!n.multiline||(p+2)*(P+2)+2>o)continue e;w=Y}}for(var A="",T=x;T<=w;T++){var k=i[T];if(n.multiline){if(T===w){A+=k[I]+" ",I=(I+1)%k.length;continue}if(T===x){A+=k[k.length-1]+" ";continue}}A+=k[0]+" "}switch(A=A.substr(A.length-1)==" "?A.substr(0,A.length-1):A,h=Up(A,n,a).width,n.textAlign){case"right":f=s-h-2;break;case"center":f=(s-h)/2;break;case"left":default:f=2}e+=en(f)+" "+en(m)+` Td
`,e+="("+mh(A)+`) Tj
`,e+=-en(f)+` 0 Td
`,m=-(a+2),h=0,x=V?w:w+1,P++,C=""}break}return r.text=e,r.fontSize=a,r},Up=function(n,e,t){var r=e.scope.internal.getFont(e.fontName,e.fontStyle),i=e.scope.getStringUnitWidth(n,{font:r,fontSize:parseFloat(t),charSpace:0})*parseFloat(t);return{height:e.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(t),charSpace:0})*parseFloat(t)*1.5,width:i}},wz={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},bz=function(n,e){var t={type:"reference",object:n};e.internal.getPageInfo(n.page).pageContext.annotations.find(function(r){return r.type===t.type&&r.object===t.object})===void 0&&e.internal.getPageInfo(n.page).pageContext.annotations.push(t)},Az=function(n,e){for(var t in n)if(n.hasOwnProperty(t)){var r=t,i=n[t];e.internal.newObjectDeferredBegin(i.objId,!0),or(i)==="object"&&typeof i.putStream=="function"&&i.putStream(),delete n[r]}},Ez=function(n,e){if(e.scope=n,n.internal!==void 0&&(n.internal.acroformPlugin===void 0||n.internal.acroformPlugin.isInitialized===!1)){if(hl.FieldNum=0,n.internal.acroformPlugin=JSON.parse(JSON.stringify(wz)),n.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");xx=n.internal.scaleFactor,n.internal.acroformPlugin.acroFormDictionaryRoot=new _8,n.internal.acroformPlugin.acroFormDictionaryRoot.scope=n,n.internal.acroformPlugin.acroFormDictionaryRoot._eventID=n.internal.events.subscribe("postPutResources",function(){(function(t){t.internal.events.unsubscribe(t.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete t.internal.acroformPlugin.acroFormDictionaryRoot._eventID,t.internal.acroformPlugin.printedOut=!0})(n)}),n.internal.events.subscribe("buildDocument",function(){(function(t){t.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=t.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in r)if(r.hasOwnProperty(i)){var a=r[i];a.objId=void 0,a.hasAnnotation&&bz(a,t)}})(n)}),n.internal.events.subscribe("putCatalog",function(){(function(t){if(t.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");t.internal.write("/AcroForm "+t.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(n)}),n.internal.events.subscribe("postPutPages",function(t){(function(r,i){var a=!r;for(var o in r||(i.internal.newObjectDeferredBegin(i.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),i.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||i.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(o)){var s=r[o],u=[],f=s.Rect;if(s.Rect&&(s.Rect=xz(s.Rect,i)),i.internal.newObjectDeferredBegin(s.objId,!0),s.DA=Ct.createDefaultAppearanceStream(s),or(s)==="object"&&typeof s.getKeyValueListForStream=="function"&&(u=s.getKeyValueListForStream()),s.Rect=f,s.hasAppearanceStream&&!s.appearanceStreamContent){var h=_z(s);u.push({key:"AP",value:"<</N "+h+">>"}),i.internal.acroformPlugin.xForms.push(h)}if(s.appearanceStreamContent){var p="";for(var g in s.appearanceStreamContent)if(s.appearanceStreamContent.hasOwnProperty(g)){var m=s.appearanceStreamContent[g];if(p+="/"+g+" ",p+="<<",Object.keys(m).length>=1||Array.isArray(m)){for(var o in m)if(m.hasOwnProperty(o)){var x=m[o];typeof x=="function"&&(x=x.call(i,s)),p+="/"+o+" "+x+" ",i.internal.acroformPlugin.xForms.indexOf(x)>=0||i.internal.acroformPlugin.xForms.push(x)}}else typeof(x=m)=="function"&&(x=x.call(i,s)),p+="/"+o+" "+x,i.internal.acroformPlugin.xForms.indexOf(x)>=0||i.internal.acroformPlugin.xForms.push(x);p+=">>"}u.push({key:"AP",value:`<<
`+p+">>"})}i.internal.putStream({additionalKeyValues:u,objectId:s.objId}),i.internal.out("endobj")}a&&Az(i.internal.acroformPlugin.xForms,i)})(t,n)}),n.internal.acroformPlugin.isInitialized=!0}},y8=ei.__acroform__.arrayToPdfArray=function(n,e,t){var r=function(o){return o};if(Array.isArray(n)){for(var i="[",a=0;a<n.length;a++)switch(a!==0&&(i+=" "),or(n[a])){case"boolean":case"number":case"object":i+=n[a].toString();break;case"string":n[a].substr(0,1)!=="/"?(e!==void 0&&t&&(r=t.internal.getEncryptor(e)),i+="("+mh(r(n[a].toString()))+")"):i+=n[a].toString()}return i+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},kv=function(n,e,t){var r=function(i){return i};return e!==void 0&&t&&(r=t.internal.getEncryptor(e)),(n=n||"").toString(),n="("+mh(r(n))+")"},Yl=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(n){this._objId=n}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Yl.prototype.toString=function(){return this.objId+" 0 R"},Yl.prototype.putStream=function(){var n=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:n,objectId:this.objId}),this.scope.internal.out("endobj")},Yl.prototype.getKeyValueListForStream=function(){var n=[],e=Object.getOwnPropertyNames(this).filter(function(a){return a!="content"&&a!="appearanceStreamContent"&&a!="scope"&&a!="objId"&&a.substring(0,1)!="_"});for(var t in e)if(Object.getOwnPropertyDescriptor(this,e[t]).configurable===!1){var r=e[t],i=this[r];i&&(Array.isArray(i)?n.push({key:r,value:y8(i,this.objId,this.scope)}):i instanceof Yl?(i.scope=this.scope,n.push({key:r,value:i.objId+" 0 R"})):typeof i!="function"&&n.push({key:r,value:i}))}return n};var x8=function(){Yl.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var n,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(t){n=t.trim()},get:function(){return n||null}})};Eo(x8,Yl);var _8=function(){Yl.call(this);var n,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(n){var t=function(r){return r};return this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),"("+mh(t(n))+")"}},set:function(t){n=t}})};Eo(_8,Yl);var hl=function n(){Yl.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(C){if(isNaN(C))throw new Error('Invalid value "'+C+'" for attribute F supplied.');e=C}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!fi(e,3)},set:function(C){C?this.F=hi(e,3):this.F=di(e,3)}});var t=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return t},set:function(C){if(isNaN(C))throw new Error('Invalid value "'+C+'" for attribute Ff supplied.');t=C}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(C){r=C!==void 0?C:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(C){r[0]=C}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(C){r[1]=C}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(C){r[2]=C}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(C){r[3]=C}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(C){switch(C){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=C;break;default:throw new Error('Invalid value "'+C+'" for attribute FT supplied.')}}});var a=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!a||a.length<1){if(this instanceof Wg)return;a="FieldObject"+n.FieldNum++}var C=function(P){return P};return this.scope&&(C=this.scope.internal.getEncryptor(this.objId)),"("+mh(C(a))+")"},set:function(C){a=C.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return a},set:function(C){a=C}});var o="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return o},set:function(C){o=C}});var s="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return s},set:function(C){s=C}});var u=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return u},set:function(C){u=C}});var f=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return f===void 0?50/xx:f},set:function(C){f=C}});var h="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return h},set:function(C){h=C}});var p="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!p||this instanceof Wg||this instanceof eh))return kv(p,this.objId,this.scope)},set:function(C){C=C.toString(),p=C}});var g=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(g)return this instanceof Ki?g:kv(g,this.objId,this.scope)},set:function(C){C=C.toString(),g=this instanceof Ki?C:C.substr(0,1)==="("?Yh(C.substr(1,C.length-2)):Yh(C)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Ki?Yh(g.substr(1,g.length-1)):g},set:function(C){C=C.toString(),g=this instanceof Ki?"/"+C:C}});var m=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(m)return m},set:function(C){this.V=C}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(m)return this instanceof Ki?m:kv(m,this.objId,this.scope)},set:function(C){C=C.toString(),m=this instanceof Ki?C:C.substr(0,1)==="("?Yh(C.substr(1,C.length-2)):Yh(C)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Ki?Yh(m.substr(1,m.length-1)):m},set:function(C){C=C.toString(),m=this instanceof Ki?"/"+C:C}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var x,w=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return w},set:function(C){C=!!C,w=C}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(x)return x},set:function(C){x=C}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!fi(this.Ff,1)},set:function(C){C?this.Ff=hi(this.Ff,1):this.Ff=di(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!fi(this.Ff,2)},set:function(C){C?this.Ff=hi(this.Ff,2):this.Ff=di(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!fi(this.Ff,3)},set:function(C){C?this.Ff=hi(this.Ff,3):this.Ff=di(this.Ff,3)}});var I=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(I!==null)return I},set:function(C){if([0,1,2].indexOf(C)===-1)throw new Error('Invalid value "'+C+'" for attribute Q supplied.');I=C}}),Object.defineProperty(this,"textAlign",{get:function(){var C;switch(I){case 0:default:C="left";break;case 1:C="center";break;case 2:C="right"}return C},configurable:!0,enumerable:!0,set:function(C){switch(C){case"right":case 2:I=2;break;case"center":case 1:I=1;break;case"left":case 0:default:I=0}}})};Eo(hl,Yl);var hd=function(){hl.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var n=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return n},set:function(t){n=t}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return n},set:function(t){n=t}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return y8(e,this.objId,this.scope)},set:function(t){var r,i;i=[],typeof(r=t)=="string"&&(i=function(a,o,s){s||(s=1);for(var u,f=[];u=o.exec(a);)f.push(u[s]);return f}(r,/\((.*?)\)/g)),e=i}}),this.getOptions=function(){return e},this.setOptions=function(t){e=t,this.sort&&e.sort()},this.addOption=function(t){t=(t=t||"").toString(),e.push(t),this.sort&&e.sort()},this.removeOption=function(t,r){for(r=r||!1,t=(t=t||"").toString();e.indexOf(t)!==-1&&(e.splice(e.indexOf(t),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!fi(this.Ff,18)},set:function(t){t?this.Ff=hi(this.Ff,18):this.Ff=di(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!fi(this.Ff,19)},set:function(t){this.combo===!0&&(t?this.Ff=hi(this.Ff,19):this.Ff=di(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!fi(this.Ff,20)},set:function(t){t?(this.Ff=hi(this.Ff,20),e.sort()):this.Ff=di(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!fi(this.Ff,22)},set:function(t){t?this.Ff=hi(this.Ff,22):this.Ff=di(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!fi(this.Ff,23)},set:function(t){t?this.Ff=hi(this.Ff,23):this.Ff=di(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!fi(this.Ff,27)},set:function(t){t?this.Ff=hi(this.Ff,27):this.Ff=di(this.Ff,27)}}),this.hasAppearanceStream=!1};Eo(hd,hl);var dd=function(){hd.call(this),this.fontName="helvetica",this.combo=!1};Eo(dd,hd);var pd=function(){dd.call(this),this.combo=!0};Eo(pd,dd);var ag=function(){pd.call(this),this.edit=!0};Eo(ag,pd);var Ki=function(){hl.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!fi(this.Ff,15)},set:function(t){t?this.Ff=hi(this.Ff,15):this.Ff=di(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!fi(this.Ff,16)},set:function(t){t?this.Ff=hi(this.Ff,16):this.Ff=di(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!fi(this.Ff,17)},set:function(t){t?this.Ff=hi(this.Ff,17):this.Ff=di(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!fi(this.Ff,26)},set:function(t){t?this.Ff=hi(this.Ff,26):this.Ff=di(this.Ff,26)}});var n,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var t=function(a){return a};if(this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var r,i=[];for(r in i.push("<<"),e)i.push("/"+r+" ("+mh(t(e[r]))+")");return i.push(">>"),i.join(`
`)}},set:function(t){or(t)==="object"&&(e=t)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(t){typeof t=="string"&&(e.CA=t)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(t){n=t}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(t){n="/"+t}})};Eo(Ki,hl);var og=function(){Ki.call(this),this.pushButton=!0};Eo(og,Ki);var gd=function(){Ki.call(this),this.radio=!0,this.pushButton=!1;var n=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return n},set:function(e){n=e!==void 0?e:[]}})};Eo(gd,Ki);var Wg=function(){var n,e;hl.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return n},set:function(i){n=i}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(i){e=i}});var t,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(s){return s};this.scope&&(i=this.scope.internal.getEncryptor(this.objId));var a,o=[];for(a in o.push("<<"),r)o.push("/"+a+" ("+mh(i(r[a]))+")");return o.push(">>"),o.join(`
`)},set:function(i){or(i)==="object"&&(r=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(i){typeof i=="string"&&(r.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(i){t=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(i){t="/"+i}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Ct.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Eo(Wg,hl),gd.prototype.setAppearance=function(n){if(!("createAppearanceStream"in n)||!("getCA"in n))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var t=this.Kids[e];t.appearanceStreamContent=n.createAppearanceStream(t.optionName),t.caption=n.getCA()}},gd.prototype.createOption=function(n){var e=new Wg;return e.Parent=this,e.optionName=n,this.Kids.push(e),Sz.call(this.scope,e),e};var sg=function(){Ki.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Ct.CheckBox.createAppearanceStream()};Eo(sg,Ki);var eh=function(){hl.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!fi(this.Ff,13)},set:function(e){e?this.Ff=hi(this.Ff,13):this.Ff=di(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!fi(this.Ff,21)},set:function(e){e?this.Ff=hi(this.Ff,21):this.Ff=di(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!fi(this.Ff,23)},set:function(e){e?this.Ff=hi(this.Ff,23):this.Ff=di(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!fi(this.Ff,24)},set:function(e){e?this.Ff=hi(this.Ff,24):this.Ff=di(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!fi(this.Ff,25)},set:function(e){e?this.Ff=hi(this.Ff,25):this.Ff=di(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!fi(this.Ff,26)},set:function(e){e?this.Ff=hi(this.Ff,26):this.Ff=di(this.Ff,26)}});var n=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return n},set:function(e){n=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return n},set:function(e){Number.isInteger(e)&&(n=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Eo(eh,hl);var lg=function(){eh.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!fi(this.Ff,14)},set:function(n){n?this.Ff=hi(this.Ff,14):this.Ff=di(this.Ff,14)}}),this.password=!0};Eo(lg,eh);var Ct={CheckBox:{createAppearanceStream:function(){return{N:{On:Ct.CheckBox.YesNormal},D:{On:Ct.CheckBox.YesPushDown,Off:Ct.CheckBox.OffPushDown}}},YesPushDown:function(n){var e=Wl(n);e.scope=n.scope;var t=[],r=n.scope.internal.getFont(n.fontName,n.fontStyle).id,i=n.scope.__private__.encodeColorString(n.color),a=Wy(n,n.caption);return t.push("0.749023 g"),t.push("0 0 "+en(Ct.internal.getWidth(n))+" "+en(Ct.internal.getHeight(n))+" re"),t.push("f"),t.push("BMC"),t.push("q"),t.push("0 0 1 rg"),t.push("/"+r+" "+en(a.fontSize)+" Tf "+i),t.push("BT"),t.push(a.text),t.push("ET"),t.push("Q"),t.push("EMC"),e.stream=t.join(`
`),e},YesNormal:function(n){var e=Wl(n);e.scope=n.scope;var t=n.scope.internal.getFont(n.fontName,n.fontStyle).id,r=n.scope.__private__.encodeColorString(n.color),i=[],a=Ct.internal.getHeight(n),o=Ct.internal.getWidth(n),s=Wy(n,n.caption);return i.push("1 g"),i.push("0 0 "+en(o)+" "+en(a)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+en(o-1)+" "+en(a-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+t+" "+en(s.fontSize)+" Tf "+r),i.push(s.text),i.push("ET"),i.push("Q"),e.stream=i.join(`
`),e},OffPushDown:function(n){var e=Wl(n);e.scope=n.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+en(Ct.internal.getWidth(n))+" "+en(Ct.internal.getHeight(n))+" re"),t.push("f"),e.stream=t.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(n){var e={D:{Off:Ct.RadioButton.Circle.OffPushDown},N:{}};return e.N[n]=Ct.RadioButton.Circle.YesNormal,e.D[n]=Ct.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(n){var e=Wl(n);e.scope=n.scope;var t=[],r=Ct.internal.getWidth(n)<=Ct.internal.getHeight(n)?Ct.internal.getWidth(n)/4:Ct.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var i=Ct.internal.Bezier_C,a=Number((r*i).toFixed(5));return t.push("q"),t.push("1 0 0 1 "+Wc(Ct.internal.getWidth(n)/2)+" "+Wc(Ct.internal.getHeight(n)/2)+" cm"),t.push(r+" 0 m"),t.push(r+" "+a+" "+a+" "+r+" 0 "+r+" c"),t.push("-"+a+" "+r+" -"+r+" "+a+" -"+r+" 0 c"),t.push("-"+r+" -"+a+" -"+a+" -"+r+" 0 -"+r+" c"),t.push(a+" -"+r+" "+r+" -"+a+" "+r+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(n){var e=Wl(n);e.scope=n.scope;var t=[],r=Ct.internal.getWidth(n)<=Ct.internal.getHeight(n)?Ct.internal.getWidth(n)/4:Ct.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),a=Number((i*Ct.internal.Bezier_C).toFixed(5)),o=Number((r*Ct.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+Wc(Ct.internal.getWidth(n)/2)+" "+Wc(Ct.internal.getHeight(n)/2)+" cm"),t.push(i+" 0 m"),t.push(i+" "+a+" "+a+" "+i+" 0 "+i+" c"),t.push("-"+a+" "+i+" -"+i+" "+a+" -"+i+" 0 c"),t.push("-"+i+" -"+a+" -"+a+" -"+i+" 0 -"+i+" c"),t.push(a+" -"+i+" "+i+" -"+a+" "+i+" 0 c"),t.push("f"),t.push("Q"),t.push("0 g"),t.push("q"),t.push("1 0 0 1 "+Wc(Ct.internal.getWidth(n)/2)+" "+Wc(Ct.internal.getHeight(n)/2)+" cm"),t.push(r+" 0 m"),t.push(r+" "+o+" "+o+" "+r+" 0 "+r+" c"),t.push("-"+o+" "+r+" -"+r+" "+o+" -"+r+" 0 c"),t.push("-"+r+" -"+o+" -"+o+" -"+r+" 0 -"+r+" c"),t.push(o+" -"+r+" "+r+" -"+o+" "+r+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},OffPushDown:function(n){var e=Wl(n);e.scope=n.scope;var t=[],r=Ct.internal.getWidth(n)<=Ct.internal.getHeight(n)?Ct.internal.getWidth(n)/4:Ct.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),a=Number((i*Ct.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+Wc(Ct.internal.getWidth(n)/2)+" "+Wc(Ct.internal.getHeight(n)/2)+" cm"),t.push(i+" 0 m"),t.push(i+" "+a+" "+a+" "+i+" 0 "+i+" c"),t.push("-"+a+" "+i+" -"+i+" "+a+" -"+i+" 0 c"),t.push("-"+i+" -"+a+" -"+a+" -"+i+" 0 -"+i+" c"),t.push(a+" -"+i+" "+i+" -"+a+" "+i+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e}},Cross:{createAppearanceStream:function(n){var e={D:{Off:Ct.RadioButton.Cross.OffPushDown},N:{}};return e.N[n]=Ct.RadioButton.Cross.YesNormal,e.D[n]=Ct.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(n){var e=Wl(n);e.scope=n.scope;var t=[],r=Ct.internal.calculateCross(n);return t.push("q"),t.push("1 1 "+en(Ct.internal.getWidth(n)-2)+" "+en(Ct.internal.getHeight(n)-2)+" re"),t.push("W"),t.push("n"),t.push(en(r.x1.x)+" "+en(r.x1.y)+" m"),t.push(en(r.x2.x)+" "+en(r.x2.y)+" l"),t.push(en(r.x4.x)+" "+en(r.x4.y)+" m"),t.push(en(r.x3.x)+" "+en(r.x3.y)+" l"),t.push("s"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(n){var e=Wl(n);e.scope=n.scope;var t=Ct.internal.calculateCross(n),r=[];return r.push("0.749023 g"),r.push("0 0 "+en(Ct.internal.getWidth(n))+" "+en(Ct.internal.getHeight(n))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+en(Ct.internal.getWidth(n)-2)+" "+en(Ct.internal.getHeight(n)-2)+" re"),r.push("W"),r.push("n"),r.push(en(t.x1.x)+" "+en(t.x1.y)+" m"),r.push(en(t.x2.x)+" "+en(t.x2.y)+" l"),r.push(en(t.x4.x)+" "+en(t.x4.y)+" m"),r.push(en(t.x3.x)+" "+en(t.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(n){var e=Wl(n);e.scope=n.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+en(Ct.internal.getWidth(n))+" "+en(Ct.internal.getHeight(n))+" re"),t.push("f"),e.stream=t.join(`
`),e}}},createDefaultAppearanceStream:function(n){var e=n.scope.internal.getFont(n.fontName,n.fontStyle).id,t=n.scope.__private__.encodeColorString(n.color);return"/"+e+" "+n.fontSize+" Tf "+t}};Ct.internal={Bezier_C:.551915024494,calculateCross:function(n){var e=Ct.internal.getWidth(n),t=Ct.internal.getHeight(n),r=Math.min(e,t);return{x1:{x:(e-r)/2,y:(t-r)/2+r},x2:{x:(e-r)/2+r,y:(t-r)/2},x3:{x:(e-r)/2,y:(t-r)/2},x4:{x:(e-r)/2+r,y:(t-r)/2+r}}}},Ct.internal.getWidth=function(n){var e=0;return or(n)==="object"&&(e=S4(n.Rect[2])),e},Ct.internal.getHeight=function(n){var e=0;return or(n)==="object"&&(e=S4(n.Rect[3])),e};var Sz=ei.addField=function(n){if(Ez(this,n),!(n instanceof hl))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=n).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),n.page=n.scope.internal.getCurrentPageInfo().pageNumber,this};ei.AcroFormChoiceField=hd,ei.AcroFormListBox=dd,ei.AcroFormComboBox=pd,ei.AcroFormEditBox=ag,ei.AcroFormButton=Ki,ei.AcroFormPushButton=og,ei.AcroFormRadioButton=gd,ei.AcroFormCheckBox=sg,ei.AcroFormTextField=eh,ei.AcroFormPasswordField=lg,ei.AcroFormAppearance=Ct,ei.AcroForm={ChoiceField:hd,ListBox:dd,ComboBox:pd,EditBox:ag,Button:Ki,PushButton:og,RadioButton:gd,CheckBox:sg,TextField:eh,PasswordField:lg,Appearance:Ct},Ht.AcroForm={ChoiceField:hd,ListBox:dd,ComboBox:pd,EditBox:ag,Button:Ki,PushButton:og,RadioButton:gd,CheckBox:sg,TextField:eh,PasswordField:lg,Appearance:Ct};Ht.AcroForm;function w8(n){return n.reduce(function(e,t,r){return e[t]=r,e},{})}(function(n){n.__addimage__={};var e="UNKNOWN",t={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},r=n.__addimage__.getImageFileTypeByImageData=function(R,L){var j,H,ne,U,z,ee=e;if((L=L||e)==="RGBA"||R.data!==void 0&&R.data instanceof Uint8ClampedArray&&"height"in R&&"width"in R)return"RGBA";if(q(R))for(z in t)for(ne=t[z],j=0;j<ne.length;j+=1){for(U=!0,H=0;H<ne[j].length;H+=1)if(ne[j][H]!==void 0&&ne[j][H]!==R[H]){U=!1;break}if(U===!0){ee=z;break}}else for(z in t)for(ne=t[z],j=0;j<ne.length;j+=1){for(U=!0,H=0;H<ne[j].length;H+=1)if(ne[j][H]!==void 0&&ne[j][H]!==R.charCodeAt(H)){U=!1;break}if(U===!0){ee=z;break}}return ee===e&&L!==e&&(ee=L),ee},i=function R(L){for(var j=this.internal.write,H=this.internal.putStream,ne=(0,this.internal.getFilters)();ne.indexOf("FlateEncode")!==-1;)ne.splice(ne.indexOf("FlateEncode"),1);L.objectId=this.internal.newObject();var U=[];if(U.push({key:"Type",value:"/XObject"}),U.push({key:"Subtype",value:"/Image"}),U.push({key:"Width",value:L.width}),U.push({key:"Height",value:L.height}),L.colorSpace===I.INDEXED?U.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(L.palette.length/3-1)+" "+("sMask"in L&&L.sMask!==void 0?L.objectId+2:L.objectId+1)+" 0 R]"}):(U.push({key:"ColorSpace",value:"/"+L.colorSpace}),L.colorSpace===I.DEVICE_CMYK&&U.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),U.push({key:"BitsPerComponent",value:L.bitsPerComponent}),"decodeParameters"in L&&L.decodeParameters!==void 0&&U.push({key:"DecodeParms",value:"<<"+L.decodeParameters+">>"}),"transparency"in L&&Array.isArray(L.transparency)){for(var z="",ee=0,le=L.transparency.length;ee<le;ee++)z+=L.transparency[ee]+" "+L.transparency[ee]+" ";U.push({key:"Mask",value:"["+z+"]"})}L.sMask!==void 0&&U.push({key:"SMask",value:L.objectId+1+" 0 R"});var $=L.filter!==void 0?["/"+L.filter]:void 0;if(H({data:L.data,additionalKeyValues:U,alreadyAppliedFilters:$,objectId:L.objectId}),j("endobj"),"sMask"in L&&L.sMask!==void 0){var ve="/Predictor "+L.predictor+" /Colors 1 /BitsPerComponent "+L.bitsPerComponent+" /Columns "+L.width,G={width:L.width,height:L.height,colorSpace:"DeviceGray",bitsPerComponent:L.bitsPerComponent,decodeParameters:ve,data:L.sMask};"filter"in L&&(G.filter=L.filter),R.call(this,G)}if(L.colorSpace===I.INDEXED){var Q=this.internal.newObject();H({data:A(new Uint8Array(L.palette)),objectId:Q}),j("endobj")}},a=function(){var R=this.internal.collections.addImage_images;for(var L in R)i.call(this,R[L])},o=function(){var R,L=this.internal.collections.addImage_images,j=this.internal.write;for(var H in L)j("/I"+(R=L[H]).index,R.objectId,"0","R")},s=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",a),this.internal.events.subscribe("putXobjectDict",o))},u=function(){var R=this.internal.collections.addImage_images;return s.call(this),R},f=function(){return Object.keys(this.internal.collections.addImage_images).length},h=function(R){return typeof n["process"+R.toUpperCase()]=="function"},p=function(R){return or(R)==="object"&&R.nodeType===1},g=function(R,L){if(R.nodeName==="IMG"&&R.hasAttribute("src")){var j=""+R.getAttribute("src");if(j.indexOf("data:image/")===0)return $1(unescape(j).split("base64,").pop());var H=n.loadFile(j,!0);if(H!==void 0)return H}if(R.nodeName==="CANVAS"){if(R.width===0||R.height===0)throw new Error("Given canvas must have data. Canvas width: "+R.width+", height: "+R.height);var ne;switch(L){case"PNG":ne="image/png";break;case"WEBP":ne="image/webp";break;case"JPEG":case"JPG":default:ne="image/jpeg"}return $1(R.toDataURL(ne,1).split("base64,").pop())}},m=function(R){var L=this.internal.collections.addImage_images;if(L){for(var j in L)if(R===L[j].alias)return L[j]}},x=function(R,L,j){return R||L||(R=-96,L=-96),R<0&&(R=-1*j.width*72/R/this.internal.scaleFactor),L<0&&(L=-1*j.height*72/L/this.internal.scaleFactor),R===0&&(R=L*j.width/j.height),L===0&&(L=R*j.height/j.width),[R,L]},w=function(R,L,j,H,ne,U){var z=x.call(this,j,H,ne),ee=this.internal.getCoordinateString,le=this.internal.getVerticalCoordinateString,$=u.call(this);if(j=z[0],H=z[1],$[ne.index]=ne,U){U*=Math.PI/180;var ve=Math.cos(U),G=Math.sin(U),Q=function(ie){return ie.toFixed(4)},te=[Q(ve),Q(G),Q(-1*G),Q(ve),0,0,"cm"]}this.internal.write("q"),U?(this.internal.write([1,"0","0",1,ee(R),le(L+H),"cm"].join(" ")),this.internal.write(te.join(" ")),this.internal.write([ee(j),"0","0",ee(H),"0","0","cm"].join(" "))):this.internal.write([ee(j),"0","0",ee(H),ee(R),le(L+H),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+ne.index+" Do"),this.internal.write("Q")},I=n.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};n.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var C=n.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},P=n.__addimage__.sHashCode=function(R){var L,j,H=0;if(typeof R=="string")for(j=R.length,L=0;L<j;L++)H=(H<<5)-H+R.charCodeAt(L),H|=0;else if(q(R))for(j=R.byteLength/2,L=0;L<j;L++)H=(H<<5)-H+R[L],H|=0;return H},B=n.__addimage__.validateStringAsBase64=function(R){(R=R||"").toString().trim();var L=!0;return R.length===0&&(L=!1),R.length%4!=0&&(L=!1),/^[A-Za-z0-9+/]+$/.test(R.substr(0,R.length-2))===!1&&(L=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(R.substr(-2))===!1&&(L=!1),L},V=n.__addimage__.extractImageFromDataUrl=function(R){if(R==null||!(R=R.trim()).startsWith("data:"))return null;var L=R.indexOf(",");return L<0?null:R.substring(0,L).trim().endsWith("base64")?R.substring(L+1):null},Y=n.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};n.__addimage__.isArrayBuffer=function(R){return Y()&&R instanceof ArrayBuffer};var q=n.__addimage__.isArrayBufferView=function(R){return Y()&&typeof Uint32Array<"u"&&(R instanceof Int8Array||R instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&R instanceof Uint8ClampedArray||R instanceof Int16Array||R instanceof Uint16Array||R instanceof Int32Array||R instanceof Uint32Array||R instanceof Float32Array||R instanceof Float64Array)},D=n.__addimage__.binaryStringToUint8Array=function(R){for(var L=R.length,j=new Uint8Array(L),H=0;H<L;H++)j[H]=R.charCodeAt(H);return j},A=n.__addimage__.arrayBufferToBinaryString=function(R){for(var L="",j=q(R)?R:new Uint8Array(R),H=0;H<j.length;H+=8192)L+=String.fromCharCode.apply(null,j.subarray(H,H+8192));return L};n.addImage=function(){var R,L,j,H,ne,U,z,ee,le;if(typeof arguments[1]=="number"?(L=e,j=arguments[1],H=arguments[2],ne=arguments[3],U=arguments[4],z=arguments[5],ee=arguments[6],le=arguments[7]):(L=arguments[1],j=arguments[2],H=arguments[3],ne=arguments[4],U=arguments[5],z=arguments[6],ee=arguments[7],le=arguments[8]),or(R=arguments[0])==="object"&&!p(R)&&"imageData"in R){var $=R;R=$.imageData,L=$.format||L||e,j=$.x||j||0,H=$.y||H||0,ne=$.w||$.width||ne,U=$.h||$.height||U,z=$.alias||z,ee=$.compression||ee,le=$.rotation||$.angle||le}var ve=this.internal.getFilters();if(ee===void 0&&ve.indexOf("FlateEncode")!==-1&&(ee="SLOW"),isNaN(j)||isNaN(H))throw new Error("Invalid coordinates passed to jsPDF.addImage");s.call(this);var G=T.call(this,R,L,z,ee);return w.call(this,j,H,ne,U,G,le),this};var T=function(R,L,j,H){var ne,U,z;if(typeof R=="string"&&r(R)===e){R=unescape(R);var ee=k(R,!1);(ee!==""||(ee=n.loadFile(R,!0))!==void 0)&&(R=ee)}if(p(R)&&(R=g(R,L)),L=r(R,L),!h(L))throw new Error("addImage does not support files of type '"+L+"', please ensure that a plugin for '"+L+"' support is added.");if(((z=j)==null||z.length===0)&&(j=function(le){return typeof le=="string"||q(le)?P(le):q(le.data)?P(le.data):null}(R)),(ne=m.call(this,j))||(Y()&&(R instanceof Uint8Array||L==="RGBA"||(U=R,R=D(R))),ne=this["process"+L.toUpperCase()](R,f.call(this),j,function(le){return le&&typeof le=="string"&&(le=le.toUpperCase()),le in n.image_compression?le:C.NONE}(H),U)),!ne)throw new Error("An unknown error occurred whilst processing the image.");return ne},k=n.__addimage__.convertBase64ToBinaryString=function(R,L){L=typeof L!="boolean"||L;var j,H="";if(typeof R=="string"){var ne;j=(ne=V(R))!==null&&ne!==void 0?ne:R;try{H=$1(j)}catch(U){if(L)throw B(j)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+U.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return H};n.getImageProperties=function(R){var L,j,H="";if(p(R)&&(R=g(R)),typeof R=="string"&&r(R)===e&&((H=k(R,!1))===""&&(H=n.loadFile(R)||""),R=H),j=r(R),!h(j))throw new Error("addImage does not support files of type '"+j+"', please ensure that a plugin for '"+j+"' support is added.");if(!Y()||R instanceof Uint8Array||(R=D(R)),!(L=this["process"+j.toUpperCase()](R)))throw new Error("An unknown error occurred whilst processing the image");return L.fileType=j,L}})(Ht.API),function(n){var e=function(t){if(t!==void 0&&t!="")return!0};Ht.API.events.push(["addPage",function(t){this.internal.getPageInfo(t.pageNumber).pageContext.annotations=[]}]),n.events.push(["putPage",function(t){for(var r,i,a,o=this.internal.getCoordinateString,s=this.internal.getVerticalCoordinateString,u=this.internal.getPageInfoByObjId(t.objId),f=t.pageContext.annotations,h=!1,p=0;p<f.length&&!h;p++)switch((r=f[p]).type){case"link":(e(r.options.url)||e(r.options.pageNumber))&&(h=!0);break;case"reference":case"text":case"freetext":h=!0}if(h!=0){this.internal.write("/Annots [");for(var g=0;g<f.length;g++){r=f[g];var m=this.internal.pdfEscape,x=this.internal.getEncryptor(t.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var w=this.internal.newAdditionalObject(),I=this.internal.newAdditionalObject(),C=this.internal.getEncryptor(w.objId),P=r.title||"Note";a="<</Type /Annot /Subtype /Text "+(i="/Rect ["+o(r.bounds.x)+" "+s(r.bounds.y+r.bounds.h)+" "+o(r.bounds.x+r.bounds.w)+" "+s(r.bounds.y)+"] ")+"/Contents ("+m(C(r.contents))+")",a+=" /Popup "+I.objId+" 0 R",a+=" /P "+u.objId+" 0 R",a+=" /T ("+m(C(P))+") >>",w.content=a;var B=w.objId+" 0 R";a="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+o(r.bounds.x+30)+" "+s(r.bounds.y+r.bounds.h)+" "+o(r.bounds.x+r.bounds.w+30)+" "+s(r.bounds.y)+"] ")+" /Parent "+B,r.open&&(a+=" /Open true"),a+=" >>",I.content=a,this.internal.write(w.objId,"0 R",I.objId,"0 R");break;case"freetext":i="/Rect ["+o(r.bounds.x)+" "+s(r.bounds.y)+" "+o(r.bounds.x+r.bounds.w)+" "+s(r.bounds.y+r.bounds.h)+"] ";var V=r.color||"#000000";a="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+m(x(r.contents))+")",a+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+V+")",a+=" /Border [0 0 0]",a+=" >>",this.internal.write(a);break;case"link":if(r.options.name){var Y=this.annotations._nameMap[r.options.name];r.options.pageNumber=Y.page,r.options.top=Y.y}else r.options.top||(r.options.top=0);if(i="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",a="",r.options.url)a="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+m(x(r.options.url))+") >>";else if(r.options.pageNumber)switch(a="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":a+=" /Fit]";break;case"FitH":a+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,a+=" /FitV "+r.options.left+"]";break;case"XYZ":default:var q=s(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),a+=" /XYZ "+r.options.left+" "+q+" "+r.options.zoom+"]"}a!=""&&(a+=" >>",this.internal.write(a))}}this.internal.write("]")}}]),n.createAnnotation=function(t){var r=this.internal.getCurrentPageInfo();switch(t.type){case"link":this.link(t.bounds.x,t.bounds.y,t.bounds.w,t.bounds.h,t);break;case"text":case"freetext":r.pageContext.annotations.push(t)}},n.link=function(t,r,i,a,o){var s=this.internal.getCurrentPageInfo(),u=this.internal.getCoordinateString,f=this.internal.getVerticalCoordinateString;s.pageContext.annotations.push({finalBounds:{x:u(t),y:f(r),w:u(t+i),h:f(r+a)},options:o,type:"link"})},n.textWithLink=function(t,r,i,a){var o,s,u=this.getTextWidth(t),f=this.internal.getLineHeight()/this.internal.scaleFactor;if(a.maxWidth!==void 0){s=a.maxWidth;var h=this.splitTextToSize(t,s).length;o=Math.ceil(f*h)}else s=u,o=f;return this.text(t,r,i,a),i+=.2*f,a.align==="center"&&(r-=u/2),a.align==="right"&&(r-=u),this.link(r,i-f,s,o,a),u},n.getTextWidth=function(t){var r=this.internal.getFontSize();return this.getStringUnitWidth(t)*r/this.internal.scaleFactor}}(Ht.API),function(n){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},t={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];n.__arabicParser__={};var a=n.__arabicParser__.isInArabicSubstitutionA=function(w){return e[w.charCodeAt(0)]!==void 0},o=n.__arabicParser__.isArabicLetter=function(w){return typeof w=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(w)},s=n.__arabicParser__.isArabicEndLetter=function(w){return o(w)&&a(w)&&e[w.charCodeAt(0)].length<=2},u=n.__arabicParser__.isArabicAlfLetter=function(w){return o(w)&&i.indexOf(w.charCodeAt(0))>=0};n.__arabicParser__.arabicLetterHasIsolatedForm=function(w){return o(w)&&a(w)&&e[w.charCodeAt(0)].length>=1};var f=n.__arabicParser__.arabicLetterHasFinalForm=function(w){return o(w)&&a(w)&&e[w.charCodeAt(0)].length>=2};n.__arabicParser__.arabicLetterHasInitialForm=function(w){return o(w)&&a(w)&&e[w.charCodeAt(0)].length>=3};var h=n.__arabicParser__.arabicLetterHasMedialForm=function(w){return o(w)&&a(w)&&e[w.charCodeAt(0)].length==4},p=n.__arabicParser__.resolveLigatures=function(w){var I=0,C=t,P="",B=0;for(I=0;I<w.length;I+=1)C[w.charCodeAt(I)]!==void 0?(B++,typeof(C=C[w.charCodeAt(I)])=="number"&&(P+=String.fromCharCode(C),C=t,B=0),I===w.length-1&&(C=t,P+=w.charAt(I-(B-1)),I-=B-1,B=0)):(C=t,P+=w.charAt(I-B),I-=B,B=0);return P};n.__arabicParser__.isArabicDiacritic=function(w){return w!==void 0&&r[w.charCodeAt(0)]!==void 0};var g=n.__arabicParser__.getCorrectForm=function(w,I,C){return o(w)?a(w)===!1?-1:!f(w)||!o(I)&&!o(C)||!o(C)&&s(I)||s(w)&&!o(I)||s(w)&&u(I)||s(w)&&s(I)?0:h(w)&&o(I)&&!s(I)&&o(C)&&f(C)?3:s(w)||!o(C)?1:2:-1},m=function(w){var I=0,C=0,P=0,B="",V="",Y="",q=(w=w||"").split("\\s+"),D=[];for(I=0;I<q.length;I+=1){for(D.push(""),C=0;C<q[I].length;C+=1)B=q[I][C],V=q[I][C-1],Y=q[I][C+1],o(B)?(P=g(B,V,Y),D[I]+=P!==-1?String.fromCharCode(e[B.charCodeAt(0)][P]):B):D[I]+=B;D[I]=p(D[I])}return D.join(" ")},x=n.__arabicParser__.processArabic=n.processArabic=function(){var w,I=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,C=[];if(Array.isArray(I)){var P=0;for(C=[],P=0;P<I.length;P+=1)Array.isArray(I[P])?C.push([m(I[P][0]),I[P][1],I[P][2]]):C.push([m(I[P])]);w=C}else w=m(I);return typeof arguments[0]=="string"?w:(arguments[0].text=w,arguments[0])};n.events.push(["preProcessText",x])}(Ht.API),Ht.API.autoPrint=function(n){var e;switch((n=n||{}).variant=n.variant||"non-conform",n.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})}return this},function(n){var e=function(){var t=void 0;Object.defineProperty(this,"pdf",{get:function(){return t},set:function(s){t=s}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(s){r=isNaN(s)||Number.isInteger(s)===!1||s<0?150:s,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(s){i=isNaN(s)||Number.isInteger(s)===!1||s<0?300:s,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var a=[];Object.defineProperty(this,"childNodes",{get:function(){return a},set:function(s){a=s}});var o={};Object.defineProperty(this,"style",{get:function(){return o},set:function(s){o=s}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(t,r){var i;if((t=t||"2d")!=="2d")return null;for(i in r)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=r[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},n.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(Ht.API),function(n){var e={left:0,top:0,bottom:0,right:0},t=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new a,this.internal.__cell__.pages=1},a=function(){var u=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return u},set:function(w){u=w}});var f=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return f},set:function(w){f=w}});var h=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return h},set:function(w){h=w}});var p=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return p},set:function(w){p=w}});var g=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return g},set:function(w){g=w}});var m=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return m},set:function(w){m=w}});var x=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return x},set:function(w){x=w}}),this};a.prototype.clone=function(){return new a(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},a.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},n.setHeaderFunction=function(u){return r.call(this),this.internal.__cell__.headerFunction=typeof u=="function"?u:void 0,this},n.getTextDimensions=function(u,f){r.call(this);var h=(f=f||{}).fontSize||this.getFontSize(),p=f.font||this.getFont(),g=f.scaleFactor||this.internal.scaleFactor,m=0,x=0,w=0,I=this;if(!Array.isArray(u)&&typeof u!="string"){if(typeof u!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");u=String(u)}var C=f.maxWidth;C>0?typeof u=="string"?u=this.splitTextToSize(u,C):Object.prototype.toString.call(u)==="[object Array]"&&(u=u.reduce(function(B,V){return B.concat(I.splitTextToSize(V,C))},[])):u=Array.isArray(u)?u:[u];for(var P=0;P<u.length;P++)m<(w=this.getStringUnitWidth(u[P],{font:p})*h)&&(m=w);return m!==0&&(x=u.length),{w:m/=g,h:Math.max((x*h*this.getLineHeightFactor()-h*(this.getLineHeightFactor()-1))/g,0)}},n.cellAddPage=function(){r.call(this),this.addPage();var u=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new a(u.left,u.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var o=n.cell=function(){var u;u=arguments[0]instanceof a?arguments[0]:new a(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),r.call(this);var f=this.internal.__cell__.lastCell,h=this.internal.__cell__.padding,p=this.internal.__cell__.margins||e,g=this.internal.__cell__.tableHeaderRow,m=this.internal.__cell__.printHeaders;return f.lineNumber!==void 0&&(f.lineNumber===u.lineNumber?(u.x=(f.x||0)+(f.width||0),u.y=f.y||0):f.y+f.height+u.height+p.bottom>this.getPageHeight()?(this.cellAddPage(),u.y=p.top,m&&g&&(this.printHeaderRow(u.lineNumber,!0),u.y+=g[0].height)):u.y=f.y+f.height||u.y),u.text[0]!==void 0&&(this.rect(u.x,u.y,u.width,u.height,t===!0?"FD":void 0),u.align==="right"?this.text(u.text,u.x+u.width-h,u.y+h,{align:"right",baseline:"top"}):u.align==="center"?this.text(u.text,u.x+u.width/2,u.y+h,{align:"center",baseline:"top",maxWidth:u.width-h-h}):this.text(u.text,u.x+h,u.y+h,{align:"left",baseline:"top",maxWidth:u.width-h-h})),this.internal.__cell__.lastCell=u,this};n.table=function(u,f,h,p,g){if(r.call(this),!h)throw new Error("No data for PDF table.");var m,x,w,I,C=[],P=[],B=[],V={},Y={},q=[],D=[],A=(g=g||{}).autoSize||!1,T=g.printHeaders!==!1,k=g.css&&g.css["font-size"]!==void 0?16*g.css["font-size"]:g.fontSize||12,R=g.margins||Object.assign({width:this.getPageWidth()},e),L=typeof g.padding=="number"?g.padding:3,j=g.headerBackgroundColor||"#c8c8c8",H=g.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=T,this.internal.__cell__.margins=R,this.internal.__cell__.table_font_size=k,this.internal.__cell__.padding=L,this.internal.__cell__.headerBackgroundColor=j,this.internal.__cell__.headerTextColor=H,this.setFontSize(k),p==null)P=C=Object.keys(h[0]),B=C.map(function(){return"left"});else if(Array.isArray(p)&&or(p[0])==="object")for(C=p.map(function($){return $.name}),P=p.map(function($){return $.prompt||$.name||""}),B=p.map(function($){return $.align||"left"}),m=0;m<p.length;m+=1)Y[p[m].name]=p[m].width*(19.049976/25.4);else Array.isArray(p)&&typeof p[0]=="string"&&(P=C=p,B=C.map(function(){return"left"}));if(A||Array.isArray(p)&&typeof p[0]=="string")for(m=0;m<C.length;m+=1){for(V[I=C[m]]=h.map(function($){return $[I]}),this.setFont(void 0,"bold"),q.push(this.getTextDimensions(P[m],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),x=V[I],this.setFont(void 0,"normal"),w=0;w<x.length;w+=1)q.push(this.getTextDimensions(x[w],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);Y[I]=Math.max.apply(null,q)+L+L,q=[]}if(T){var ne={};for(m=0;m<C.length;m+=1)ne[C[m]]={},ne[C[m]].text=P[m],ne[C[m]].align=B[m];var U=s.call(this,ne,Y);D=C.map(function($){return new a(u,f,Y[$],U,ne[$].text,void 0,ne[$].align)}),this.setTableHeaderRow(D),this.printHeaderRow(1,!1)}var z=p.reduce(function($,ve){return $[ve.name]=ve.align,$},{});for(m=0;m<h.length;m+=1){"rowStart"in g&&g.rowStart instanceof Function&&g.rowStart({row:m,data:h[m]},this);var ee=s.call(this,h[m],Y);for(w=0;w<C.length;w+=1){var le=h[m][C[w]];"cellStart"in g&&g.cellStart instanceof Function&&g.cellStart({row:m,col:w,data:le},this),o.call(this,new a(u,f,Y[C[w]],ee,le,m+2,z[C[w]]))}}return this.internal.__cell__.table_x=u,this.internal.__cell__.table_y=f,this};var s=function(u,f){var h=this.internal.__cell__.padding,p=this.internal.__cell__.table_font_size,g=this.internal.scaleFactor;return Object.keys(u).map(function(m){var x=u[m];return this.splitTextToSize(x.hasOwnProperty("text")?x.text:x,f[m]-h-h)},this).map(function(m){return this.getLineHeightFactor()*m.length*p/g+h+h},this).reduce(function(m,x){return Math.max(m,x)},0)};n.setTableHeaderRow=function(u){r.call(this),this.internal.__cell__.tableHeaderRow=u},n.printHeaderRow=function(u,f){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var h;if(t=!0,typeof this.internal.__cell__.headerFunction=="function"){var p=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new a(p[0],p[1],p[2],p[3],void 0,-1)}this.setFont(void 0,"bold");for(var g=[],m=0;m<this.internal.__cell__.tableHeaderRow.length;m+=1){h=this.internal.__cell__.tableHeaderRow[m].clone(),f&&(h.y=this.internal.__cell__.margins.top||0,g.push(h)),h.lineNumber=u;var x=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),o.call(this,h),this.setTextColor(x)}g.length>0&&this.setTableHeaderRow(g),this.setFont(void 0,"normal"),t=!1}}(Ht.API);var b8={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},A8=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],Gy=w8(A8),E8=[100,200,300,400,500,600,700,800,900],Cz=w8(E8);function $y(n){var e=n.family.replace(/"|'/g,"").toLowerCase(),t=function(a){return b8[a=a||"normal"]?a:"normal"}(n.style),r=function(a){if(!a)return 400;if(typeof a=="number")return a>=100&&a<=900&&a%100==0?a:400;if(/^\d00$/.test(a))return parseInt(a);switch(a){case"bold":return 700;case"normal":default:return 400}}(n.weight),i=function(a){return typeof Gy[a=a||"normal"]=="number"?a:"normal"}(n.stretch);return{family:e,style:t,weight:r,stretch:i,src:n.src||[],ref:n.ref||{name:e,style:[i,t,r].join(" ")}}}function C4(n,e,t,r){var i;for(i=t;i>=0&&i<e.length;i+=r)if(n[e[i]])return n[e[i]];for(i=t;i>=0&&i<e.length;i-=r)if(n[e[i]])return n[e[i]]}var Tz={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},T4={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function I4(n){return[n.stretch,n.style,n.weight,n.family].join(" ")}function Iz(n,e,t){for(var r=(t=t||{}).defaultFontFamily||"times",i=Object.assign({},Tz,t.genericFontFamilies||{}),a=null,o=null,s=0;s<e.length;++s)if(i[(a=$y(e[s])).family]&&(a.family=i[a.family]),n.hasOwnProperty(a.family)){o=n[a.family];break}if(!(o=o||n[r]))throw new Error("Could not find a font-family for the rule '"+I4(a)+"' and default family '"+r+"'.");if(o=function(u,f){if(f[u])return f[u];var h=Gy[u],p=h<=Gy.normal?-1:1,g=C4(f,A8,h,p);if(!g)throw new Error("Could not find a matching font-stretch value for "+u);return g}(a.stretch,o),o=function(u,f){if(f[u])return f[u];for(var h=b8[u],p=0;p<h.length;++p)if(f[h[p]])return f[h[p]];throw new Error("Could not find a matching font-style for "+u)}(a.style,o),!(o=function(u,f){if(f[u])return f[u];if(u===400&&f[500])return f[500];if(u===500&&f[400])return f[400];var h=Cz[u],p=C4(f,E8,h,u<400?-1:1);if(!p)throw new Error("Could not find a matching font-weight for value "+u);return p}(a.weight,o)))throw new Error("Failed to resolve a font for the rule '"+I4(a)+"'.");return o}function R4(n){return n.trimLeft()}function Rz(n,e){for(var t=0;t<n.length;){if(n.charAt(t)===e)return[n.substring(0,t),n.substring(t+1)];t+=1}return null}function Nz(n){var e=n.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],n.substring(e[0].length)]}var Vp,N4,D4,Mv=["times"];(function(n){var e,t,r,i,a,o,s,u,f,h=function(G){return G=G||{},this.isStrokeTransparent=G.isStrokeTransparent||!1,this.strokeOpacity=G.strokeOpacity||1,this.strokeStyle=G.strokeStyle||"#000000",this.fillStyle=G.fillStyle||"#000000",this.isFillTransparent=G.isFillTransparent||!1,this.fillOpacity=G.fillOpacity||1,this.font=G.font||"10px sans-serif",this.textBaseline=G.textBaseline||"alphabetic",this.textAlign=G.textAlign||"left",this.lineWidth=G.lineWidth||1,this.lineJoin=G.lineJoin||"miter",this.lineCap=G.lineCap||"butt",this.path=G.path||[],this.transform=G.transform!==void 0?G.transform.clone():new u,this.globalCompositeOperation=G.globalCompositeOperation||"normal",this.globalAlpha=G.globalAlpha||1,this.clip_path=G.clip_path||[],this.currentPoint=G.currentPoint||new o,this.miterLimit=G.miterLimit||10,this.lastPoint=G.lastPoint||new o,this.lineDashOffset=G.lineDashOffset||0,this.lineDash=G.lineDash||[],this.margin=G.margin||[0,0,0,0],this.prevPageLastElemOffset=G.prevPageLastElemOffset||0,this.ignoreClearRect=typeof G.ignoreClearRect!="boolean"||G.ignoreClearRect,this};n.events.push(["initialized",function(){this.context2d=new p(this),e=this.internal.f2,t=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,a=this.internal.getVerticalCoordinate,o=this.internal.Point,s=this.internal.Rectangle,u=this.internal.Matrix,f=new h}]);var p=function(G){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var Q=G;Object.defineProperty(this,"pdf",{get:function(){return Q}});var te=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return te},set:function(Be){te=!!Be}});var ie=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return ie},set:function(Be){ie=!!Be}});var de=0;Object.defineProperty(this,"posX",{get:function(){return de},set:function(Be){isNaN(Be)||(de=Be)}});var Ae=0;Object.defineProperty(this,"posY",{get:function(){return Ae},set:function(Be){isNaN(Be)||(Ae=Be)}}),Object.defineProperty(this,"margin",{get:function(){return f.margin},set:function(Be){var me;typeof Be=="number"?me=[Be,Be,Be,Be]:((me=new Array(4))[0]=Be[0],me[1]=Be.length>=2?Be[1]:me[0],me[2]=Be.length>=3?Be[2]:me[0],me[3]=Be.length>=4?Be[3]:me[1]),f.margin=me}});var be=!1;Object.defineProperty(this,"autoPaging",{get:function(){return be},set:function(Be){be=Be}});var Te=0;Object.defineProperty(this,"lastBreak",{get:function(){return Te},set:function(Be){Te=Be}});var We=[];Object.defineProperty(this,"pageBreaks",{get:function(){return We},set:function(Be){We=Be}}),Object.defineProperty(this,"ctx",{get:function(){return f},set:function(Be){Be instanceof h&&(f=Be)}}),Object.defineProperty(this,"path",{get:function(){return f.path},set:function(Be){f.path=Be}});var He=[];Object.defineProperty(this,"ctxStack",{get:function(){return He},set:function(Be){He=Be}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(Be){var me;me=g(Be),this.ctx.fillStyle=me.style,this.ctx.isFillTransparent=me.a===0,this.ctx.fillOpacity=me.a,this.pdf.setFillColor(me.r,me.g,me.b,{a:me.a}),this.pdf.setTextColor(me.r,me.g,me.b,{a:me.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(Be){var me=g(Be);this.ctx.strokeStyle=me.style,this.ctx.isStrokeTransparent=me.a===0,this.ctx.strokeOpacity=me.a,me.a===0?this.pdf.setDrawColor(255,255,255):(me.a,this.pdf.setDrawColor(me.r,me.g,me.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(Be){["butt","round","square"].indexOf(Be)!==-1&&(this.ctx.lineCap=Be,this.pdf.setLineCap(Be))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(Be){isNaN(Be)||(this.ctx.lineWidth=Be,this.pdf.setLineWidth(Be))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(Be){["bevel","round","miter"].indexOf(Be)!==-1&&(this.ctx.lineJoin=Be,this.pdf.setLineJoin(Be))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(Be){isNaN(Be)||(this.ctx.miterLimit=Be,this.pdf.setMiterLimit(Be))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(Be){this.ctx.textBaseline=Be}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(Be){["right","end","center","left","start"].indexOf(Be)!==-1&&(this.ctx.textAlign=Be)}});var rt=null;function st(Be,me){if(rt===null){var gt=function(lt){var Xe=[];return Object.keys(lt).forEach(function(it){lt[it].forEach(function(at){var ot=null;switch(at){case"bold":ot={family:it,weight:"bold"};break;case"italic":ot={family:it,style:"italic"};break;case"bolditalic":ot={family:it,weight:"bold",style:"italic"};break;case"":case"normal":ot={family:it}}ot!==null&&(ot.ref={name:it,style:at},Xe.push(ot))})}),Xe}(Be.getFontList());rt=function(lt){for(var Xe={},it=0;it<lt.length;++it){var at=$y(lt[it]),ot=at.family,ct=at.stretch,mt=at.style,Rt=at.weight;Xe[ot]=Xe[ot]||{},Xe[ot][ct]=Xe[ot][ct]||{},Xe[ot][ct][mt]=Xe[ot][ct][mt]||{},Xe[ot][ct][mt][Rt]=at}return Xe}(gt.concat(me))}return rt}var wt=null;Object.defineProperty(this,"fontFaces",{get:function(){return wt},set:function(Be){rt=null,wt=Be}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(Be){var me;if(this.ctx.font=Be,(me=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(Be))!==null){var gt=me[1];me[2];var lt=me[3],Xe=me[4];me[5];var it=me[6],at=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Xe)[2];Xe=Math.floor(at==="px"?parseFloat(Xe)*this.pdf.internal.scaleFactor:at==="em"?parseFloat(Xe)*this.pdf.getFontSize():parseFloat(Xe)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Xe);var ot=function(xt){var Dt,ut,vn=[],zt=xt.trim();if(zt==="")return Mv;if(zt in T4)return[T4[zt]];for(;zt!=="";){switch(ut=null,Dt=(zt=R4(zt)).charAt(0)){case'"':case"'":ut=Rz(zt.substring(1),Dt);break;default:ut=Nz(zt)}if(ut===null||(vn.push(ut[0]),(zt=R4(ut[1]))!==""&&zt.charAt(0)!==","))return Mv;zt=zt.replace(/^,/,"")}return vn}(it);if(this.fontFaces){var ct=Iz(st(this.pdf,this.fontFaces),ot.map(function(xt){return{family:xt,stretch:"normal",weight:lt,style:gt}}));this.pdf.setFont(ct.ref.name,ct.ref.style)}else{var mt="";(lt==="bold"||parseInt(lt,10)>=700||gt==="bold")&&(mt="bold"),gt==="italic"&&(mt+="italic"),mt.length===0&&(mt="normal");for(var Rt="",_t={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},bt=0;bt<ot.length;bt++){if(this.pdf.internal.getFont(ot[bt],mt,{noFallback:!0,disableWarning:!0})!==void 0){Rt=ot[bt];break}if(mt==="bolditalic"&&this.pdf.internal.getFont(ot[bt],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Rt=ot[bt],mt="bold";else if(this.pdf.internal.getFont(ot[bt],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Rt=ot[bt],mt="normal";break}}if(Rt===""){for(var Nt=0;Nt<ot.length;Nt++)if(_t[ot[Nt]]){Rt=_t[ot[Nt]];break}}Rt=Rt===""?"Times":Rt,this.pdf.setFont(Rt,mt)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(Be){this.ctx.globalCompositeOperation=Be}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(Be){this.ctx.globalAlpha=Be}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(Be){this.ctx.lineDashOffset=Be,ve.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(Be){this.ctx.lineDash=Be,ve.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(Be){this.ctx.ignoreClearRect=!!Be}})};p.prototype.setLineDash=function(G){this.lineDash=G},p.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},p.prototype.fill=function(){V.call(this,"fill",!1)},p.prototype.stroke=function(){V.call(this,"stroke",!1)},p.prototype.beginPath=function(){this.path=[{type:"begin"}]},p.prototype.moveTo=function(G,Q){if(isNaN(G)||isNaN(Q))throw vr.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var te=this.ctx.transform.applyToPoint(new o(G,Q));this.path.push({type:"mt",x:te.x,y:te.y}),this.ctx.lastPoint=new o(G,Q)},p.prototype.closePath=function(){var G=new o(0,0),Q=0;for(Q=this.path.length-1;Q!==-1;Q--)if(this.path[Q].type==="begin"&&or(this.path[Q+1])==="object"&&typeof this.path[Q+1].x=="number"){G=new o(this.path[Q+1].x,this.path[Q+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new o(G.x,G.y)},p.prototype.lineTo=function(G,Q){if(isNaN(G)||isNaN(Q))throw vr.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var te=this.ctx.transform.applyToPoint(new o(G,Q));this.path.push({type:"lt",x:te.x,y:te.y}),this.ctx.lastPoint=new o(te.x,te.y)},p.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),V.call(this,null,!0)},p.prototype.quadraticCurveTo=function(G,Q,te,ie){if(isNaN(te)||isNaN(ie)||isNaN(G)||isNaN(Q))throw vr.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var de=this.ctx.transform.applyToPoint(new o(te,ie)),Ae=this.ctx.transform.applyToPoint(new o(G,Q));this.path.push({type:"qct",x1:Ae.x,y1:Ae.y,x:de.x,y:de.y}),this.ctx.lastPoint=new o(de.x,de.y)},p.prototype.bezierCurveTo=function(G,Q,te,ie,de,Ae){if(isNaN(de)||isNaN(Ae)||isNaN(G)||isNaN(Q)||isNaN(te)||isNaN(ie))throw vr.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var be=this.ctx.transform.applyToPoint(new o(de,Ae)),Te=this.ctx.transform.applyToPoint(new o(G,Q)),We=this.ctx.transform.applyToPoint(new o(te,ie));this.path.push({type:"bct",x1:Te.x,y1:Te.y,x2:We.x,y2:We.y,x:be.x,y:be.y}),this.ctx.lastPoint=new o(be.x,be.y)},p.prototype.arc=function(G,Q,te,ie,de,Ae){if(isNaN(G)||isNaN(Q)||isNaN(te)||isNaN(ie)||isNaN(de))throw vr.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(Ae=!!Ae,!this.ctx.transform.isIdentity){var be=this.ctx.transform.applyToPoint(new o(G,Q));G=be.x,Q=be.y;var Te=this.ctx.transform.applyToPoint(new o(0,te)),We=this.ctx.transform.applyToPoint(new o(0,0));te=Math.sqrt(Math.pow(Te.x-We.x,2)+Math.pow(Te.y-We.y,2))}Math.abs(de-ie)>=2*Math.PI&&(ie=0,de=2*Math.PI),this.path.push({type:"arc",x:G,y:Q,radius:te,startAngle:ie,endAngle:de,counterclockwise:Ae})},p.prototype.arcTo=function(G,Q,te,ie,de){throw new Error("arcTo not implemented.")},p.prototype.rect=function(G,Q,te,ie){if(isNaN(G)||isNaN(Q)||isNaN(te)||isNaN(ie))throw vr.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(G,Q),this.lineTo(G+te,Q),this.lineTo(G+te,Q+ie),this.lineTo(G,Q+ie),this.lineTo(G,Q),this.lineTo(G+te,Q),this.lineTo(G,Q)},p.prototype.fillRect=function(G,Q,te,ie){if(isNaN(G)||isNaN(Q)||isNaN(te)||isNaN(ie))throw vr.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!m.call(this)){var de={};this.lineCap!=="butt"&&(de.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(de.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(G,Q,te,ie),this.fill(),de.hasOwnProperty("lineCap")&&(this.lineCap=de.lineCap),de.hasOwnProperty("lineJoin")&&(this.lineJoin=de.lineJoin)}},p.prototype.strokeRect=function(G,Q,te,ie){if(isNaN(G)||isNaN(Q)||isNaN(te)||isNaN(ie))throw vr.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");x.call(this)||(this.beginPath(),this.rect(G,Q,te,ie),this.stroke())},p.prototype.clearRect=function(G,Q,te,ie){if(isNaN(G)||isNaN(Q)||isNaN(te)||isNaN(ie))throw vr.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(G,Q,te,ie))},p.prototype.save=function(G){G=typeof G!="boolean"||G;for(var Q=this.pdf.internal.getCurrentPageInfo().pageNumber,te=0;te<this.pdf.internal.getNumberOfPages();te++)this.pdf.setPage(te+1),this.pdf.internal.out("q");if(this.pdf.setPage(Q),G){this.ctx.fontSize=this.pdf.internal.getFontSize();var ie=new h(this.ctx);this.ctxStack.push(this.ctx),this.ctx=ie}},p.prototype.restore=function(G){G=typeof G!="boolean"||G;for(var Q=this.pdf.internal.getCurrentPageInfo().pageNumber,te=0;te<this.pdf.internal.getNumberOfPages();te++)this.pdf.setPage(te+1),this.pdf.internal.out("Q");this.pdf.setPage(Q),G&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},p.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var g=function(G){var Q,te,ie,de;if(G.isCanvasGradient===!0&&(G=G.getColor()),!G)return{r:0,g:0,b:0,a:0,style:G};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(G))Q=0,te=0,ie=0,de=0;else{var Ae=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(G);if(Ae!==null)Q=parseInt(Ae[1]),te=parseInt(Ae[2]),ie=parseInt(Ae[3]),de=1;else if((Ae=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(G))!==null)Q=parseInt(Ae[1]),te=parseInt(Ae[2]),ie=parseInt(Ae[3]),de=parseFloat(Ae[4]);else{if(de=1,typeof G=="string"&&G.charAt(0)!=="#"){var be=new g8(G);G=be.ok?be.toHex():"#000000"}G.length===4?(Q=G.substring(1,2),Q+=Q,te=G.substring(2,3),te+=te,ie=G.substring(3,4),ie+=ie):(Q=G.substring(1,3),te=G.substring(3,5),ie=G.substring(5,7)),Q=parseInt(Q,16),te=parseInt(te,16),ie=parseInt(ie,16)}}return{r:Q,g:te,b:ie,a:de,style:G}},m=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},x=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};p.prototype.fillText=function(G,Q,te,ie){if(isNaN(Q)||isNaN(te)||typeof G!="string")throw vr.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(ie=isNaN(ie)?void 0:ie,!m.call(this)){var de=ee(this.ctx.transform.rotation),Ae=this.ctx.transform.scaleX;L.call(this,{text:G,x:Q,y:te,scale:Ae,angle:de,align:this.textAlign,maxWidth:ie})}},p.prototype.strokeText=function(G,Q,te,ie){if(isNaN(Q)||isNaN(te)||typeof G!="string")throw vr.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!x.call(this)){ie=isNaN(ie)?void 0:ie;var de=ee(this.ctx.transform.rotation),Ae=this.ctx.transform.scaleX;L.call(this,{text:G,x:Q,y:te,scale:Ae,renderingMode:"stroke",angle:de,align:this.textAlign,maxWidth:ie})}},p.prototype.measureText=function(G){if(typeof G!="string")throw vr.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var Q=this.pdf,te=this.pdf.internal.scaleFactor,ie=Q.internal.getFontSize(),de=Q.getStringUnitWidth(G)*ie/Q.internal.scaleFactor,Ae=function(be){var Te=(be=be||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return Te}}),this};return new Ae({width:de*=Math.round(96*te/72*1e4)/1e4})},p.prototype.scale=function(G,Q){if(isNaN(G)||isNaN(Q))throw vr.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var te=new u(G,0,0,Q,0,0);this.ctx.transform=this.ctx.transform.multiply(te)},p.prototype.rotate=function(G){if(isNaN(G))throw vr.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var Q=new u(Math.cos(G),Math.sin(G),-Math.sin(G),Math.cos(G),0,0);this.ctx.transform=this.ctx.transform.multiply(Q)},p.prototype.translate=function(G,Q){if(isNaN(G)||isNaN(Q))throw vr.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var te=new u(1,0,0,1,G,Q);this.ctx.transform=this.ctx.transform.multiply(te)},p.prototype.transform=function(G,Q,te,ie,de,Ae){if(isNaN(G)||isNaN(Q)||isNaN(te)||isNaN(ie)||isNaN(de)||isNaN(Ae))throw vr.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var be=new u(G,Q,te,ie,de,Ae);this.ctx.transform=this.ctx.transform.multiply(be)},p.prototype.setTransform=function(G,Q,te,ie,de,Ae){G=isNaN(G)?1:G,Q=isNaN(Q)?0:Q,te=isNaN(te)?0:te,ie=isNaN(ie)?1:ie,de=isNaN(de)?0:de,Ae=isNaN(Ae)?0:Ae,this.ctx.transform=new u(G,Q,te,ie,de,Ae)};var w=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};p.prototype.drawImage=function(G,Q,te,ie,de,Ae,be,Te,We){var He=this.pdf.getImageProperties(G),rt=1,st=1,wt=1,Be=1;ie!==void 0&&Te!==void 0&&(wt=Te/ie,Be=We/de,rt=He.width/ie*Te/ie,st=He.height/de*We/de),Ae===void 0&&(Ae=Q,be=te,Q=0,te=0),ie!==void 0&&Te===void 0&&(Te=ie,We=de),ie===void 0&&Te===void 0&&(Te=He.width,We=He.height);for(var me,gt=this.ctx.transform.decompose(),lt=ee(gt.rotate.shx),Xe=new u,it=(Xe=(Xe=(Xe=Xe.multiply(gt.translate)).multiply(gt.skew)).multiply(gt.scale)).applyToRectangle(new s(Ae-Q*wt,be-te*Be,ie*rt,de*st)),at=I.call(this,it),ot=[],ct=0;ct<at.length;ct+=1)ot.indexOf(at[ct])===-1&&ot.push(at[ct]);if(B(ot),this.autoPaging)for(var mt=ot[0],Rt=ot[ot.length-1],_t=mt;_t<Rt+1;_t++){this.pdf.setPage(_t);var bt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Nt=_t===1?this.posY+this.margin[0]:this.margin[0],xt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Dt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],ut=_t===1?0:xt+(_t-2)*Dt;if(this.ctx.clip_path.length!==0){var vn=this.path;me=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=P(me,this.posX+this.margin[3],-ut+Nt+this.ctx.prevPageLastElemOffset),Y.call(this,"fill",!0),this.path=vn}var zt=JSON.parse(JSON.stringify(it));zt=P([zt],this.posX+this.margin[3],-ut+Nt+this.ctx.prevPageLastElemOffset)[0];var Yn=(_t>mt||_t<Rt)&&w.call(this);Yn&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],bt,Dt,null).clip().discardPath()),this.pdf.addImage(G,"JPEG",zt.x,zt.y,zt.w,zt.h,null,null,lt),Yn&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(G,"JPEG",it.x,it.y,it.w,it.h,null,null,lt)};var I=function(G,Q,te){var ie=[];Q=Q||this.pdf.internal.pageSize.width,te=te||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var de=this.posY+this.ctx.prevPageLastElemOffset;switch(G.type){default:case"mt":case"lt":ie.push(Math.floor((G.y+de)/te)+1);break;case"arc":ie.push(Math.floor((G.y+de-G.radius)/te)+1),ie.push(Math.floor((G.y+de+G.radius)/te)+1);break;case"qct":var Ae=le(this.ctx.lastPoint.x,this.ctx.lastPoint.y,G.x1,G.y1,G.x,G.y);ie.push(Math.floor((Ae.y+de)/te)+1),ie.push(Math.floor((Ae.y+Ae.h+de)/te)+1);break;case"bct":var be=$(this.ctx.lastPoint.x,this.ctx.lastPoint.y,G.x1,G.y1,G.x2,G.y2,G.x,G.y);ie.push(Math.floor((be.y+de)/te)+1),ie.push(Math.floor((be.y+be.h+de)/te)+1);break;case"rect":ie.push(Math.floor((G.y+de)/te)+1),ie.push(Math.floor((G.y+G.h+de)/te)+1)}for(var Te=0;Te<ie.length;Te+=1)for(;this.pdf.internal.getNumberOfPages()<ie[Te];)C.call(this);return ie},C=function(){var G=this.fillStyle,Q=this.strokeStyle,te=this.font,ie=this.lineCap,de=this.lineWidth,Ae=this.lineJoin;this.pdf.addPage(),this.fillStyle=G,this.strokeStyle=Q,this.font=te,this.lineCap=ie,this.lineWidth=de,this.lineJoin=Ae},P=function(G,Q,te){for(var ie=0;ie<G.length;ie++)switch(G[ie].type){case"bct":G[ie].x2+=Q,G[ie].y2+=te;case"qct":G[ie].x1+=Q,G[ie].y1+=te;case"mt":case"lt":case"arc":default:G[ie].x+=Q,G[ie].y+=te}return G},B=function(G){return G.sort(function(Q,te){return Q-te})},V=function(G,Q){for(var te,ie,de=this.fillStyle,Ae=this.strokeStyle,be=this.lineCap,Te=this.lineWidth,We=Math.abs(Te*this.ctx.transform.scaleX),He=this.lineJoin,rt=JSON.parse(JSON.stringify(this.path)),st=JSON.parse(JSON.stringify(this.path)),wt=[],Be=0;Be<st.length;Be++)if(st[Be].x!==void 0)for(var me=I.call(this,st[Be]),gt=0;gt<me.length;gt+=1)wt.indexOf(me[gt])===-1&&wt.push(me[gt]);for(var lt=0;lt<wt.length;lt++)for(;this.pdf.internal.getNumberOfPages()<wt[lt];)C.call(this);if(B(wt),this.autoPaging)for(var Xe=wt[0],it=wt[wt.length-1],at=Xe;at<it+1;at++){this.pdf.setPage(at),this.fillStyle=de,this.strokeStyle=Ae,this.lineCap=be,this.lineWidth=We,this.lineJoin=He;var ot=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],ct=at===1?this.posY+this.margin[0]:this.margin[0],mt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Rt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],_t=at===1?0:mt+(at-2)*Rt;if(this.ctx.clip_path.length!==0){var bt=this.path;te=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=P(te,this.posX+this.margin[3],-_t+ct+this.ctx.prevPageLastElemOffset),Y.call(this,G,!0),this.path=bt}if(ie=JSON.parse(JSON.stringify(rt)),this.path=P(ie,this.posX+this.margin[3],-_t+ct+this.ctx.prevPageLastElemOffset),Q===!1||at===0){var Nt=(at>Xe||at<it)&&w.call(this);Nt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ot,Rt,null).clip().discardPath()),Y.call(this,G,Q),Nt&&this.pdf.restoreGraphicsState()}this.lineWidth=Te}else this.lineWidth=We,Y.call(this,G,Q),this.lineWidth=Te;this.path=rt},Y=function(G,Q){if((G!=="stroke"||Q||!x.call(this))&&(G==="stroke"||Q||!m.call(this))){for(var te,ie,de=[],Ae=this.path,be=0;be<Ae.length;be++){var Te=Ae[be];switch(Te.type){case"begin":de.push({begin:!0});break;case"close":de.push({close:!0});break;case"mt":de.push({start:Te,deltas:[],abs:[]});break;case"lt":var We=de.length;if(Ae[be-1]&&!isNaN(Ae[be-1].x)&&(te=[Te.x-Ae[be-1].x,Te.y-Ae[be-1].y],We>0)){for(;We>=0;We--)if(de[We-1].close!==!0&&de[We-1].begin!==!0){de[We-1].deltas.push(te),de[We-1].abs.push(Te);break}}break;case"bct":te=[Te.x1-Ae[be-1].x,Te.y1-Ae[be-1].y,Te.x2-Ae[be-1].x,Te.y2-Ae[be-1].y,Te.x-Ae[be-1].x,Te.y-Ae[be-1].y],de[de.length-1].deltas.push(te);break;case"qct":var He=Ae[be-1].x+2/3*(Te.x1-Ae[be-1].x),rt=Ae[be-1].y+2/3*(Te.y1-Ae[be-1].y),st=Te.x+2/3*(Te.x1-Te.x),wt=Te.y+2/3*(Te.y1-Te.y),Be=Te.x,me=Te.y;te=[He-Ae[be-1].x,rt-Ae[be-1].y,st-Ae[be-1].x,wt-Ae[be-1].y,Be-Ae[be-1].x,me-Ae[be-1].y],de[de.length-1].deltas.push(te);break;case"arc":de.push({deltas:[],abs:[],arc:!0}),Array.isArray(de[de.length-1].abs)&&de[de.length-1].abs.push(Te)}}ie=Q?null:G==="stroke"?"stroke":"fill";for(var gt=!1,lt=0;lt<de.length;lt++)if(de[lt].arc)for(var Xe=de[lt].abs,it=0;it<Xe.length;it++){var at=Xe[it];at.type==="arc"?A.call(this,at.x,at.y,at.radius,at.startAngle,at.endAngle,at.counterclockwise,void 0,Q,!gt):j.call(this,at.x,at.y),gt=!0}else if(de[lt].close===!0)this.pdf.internal.out("h"),gt=!1;else if(de[lt].begin!==!0){var ot=de[lt].start.x,ct=de[lt].start.y;H.call(this,de[lt].deltas,ot,ct),gt=!0}ie&&T.call(this,ie),Q&&k.call(this)}},q=function(G){var Q=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,te=Q*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return G-te;case"top":return G+Q-te;case"hanging":return G+Q-2*te;case"middle":return G+Q/2-te;case"ideographic":return G;case"alphabetic":default:return G}},D=function(G){return G+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};p.prototype.createLinearGradient=function(){var G=function(){};return G.colorStops=[],G.addColorStop=function(Q,te){this.colorStops.push([Q,te])},G.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},G.isCanvasGradient=!0,G},p.prototype.createPattern=function(){return this.createLinearGradient()},p.prototype.createRadialGradient=function(){return this.createLinearGradient()};var A=function(G,Q,te,ie,de,Ae,be,Te,We){for(var He=U.call(this,te,ie,de,Ae),rt=0;rt<He.length;rt++){var st=He[rt];rt===0&&(We?R.call(this,st.x1+G,st.y1+Q):j.call(this,st.x1+G,st.y1+Q)),ne.call(this,G,Q,st.x2,st.y2,st.x3,st.y3,st.x4,st.y4)}Te?k.call(this):T.call(this,be)},T=function(G){switch(G){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},k=function(){this.pdf.clip(),this.pdf.discardPath()},R=function(G,Q){this.pdf.internal.out(t(G)+" "+r(Q)+" m")},L=function(G){var Q;switch(G.align){case"right":case"end":Q="right";break;case"center":Q="center";break;case"left":case"start":default:Q="left"}var te=this.pdf.getTextDimensions(G.text),ie=q.call(this,G.y),de=D.call(this,ie)-te.h,Ae=this.ctx.transform.applyToPoint(new o(G.x,ie)),be=this.ctx.transform.decompose(),Te=new u;Te=(Te=(Te=Te.multiply(be.translate)).multiply(be.skew)).multiply(be.scale);for(var We,He,rt,st=this.ctx.transform.applyToRectangle(new s(G.x,ie,te.w,te.h)),wt=Te.applyToRectangle(new s(G.x,de,te.w,te.h)),Be=I.call(this,wt),me=[],gt=0;gt<Be.length;gt+=1)me.indexOf(Be[gt])===-1&&me.push(Be[gt]);if(B(me),this.autoPaging)for(var lt=me[0],Xe=me[me.length-1],it=lt;it<Xe+1;it++){this.pdf.setPage(it);var at=it===1?this.posY+this.margin[0]:this.margin[0],ot=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],ct=this.pdf.internal.pageSize.height-this.margin[2],mt=ct-this.margin[0],Rt=this.pdf.internal.pageSize.width-this.margin[1],_t=Rt-this.margin[3],bt=it===1?0:ot+(it-2)*mt;if(this.ctx.clip_path.length!==0){var Nt=this.path;We=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=P(We,this.posX+this.margin[3],-1*bt+at),Y.call(this,"fill",!0),this.path=Nt}var xt=P([JSON.parse(JSON.stringify(wt))],this.posX+this.margin[3],-bt+at+this.ctx.prevPageLastElemOffset)[0];G.scale>=.01&&(He=this.pdf.internal.getFontSize(),this.pdf.setFontSize(He*G.scale),rt=this.lineWidth,this.lineWidth=rt*G.scale);var Dt=this.autoPaging!=="text";if(Dt||xt.y+xt.h<=ct){if(Dt||xt.y>=at&&xt.x<=Rt){var ut=Dt?G.text:this.pdf.splitTextToSize(G.text,G.maxWidth||Rt-xt.x)[0],vn=P([JSON.parse(JSON.stringify(st))],this.posX+this.margin[3],-bt+at+this.ctx.prevPageLastElemOffset)[0],zt=Dt&&(it>lt||it<Xe)&&w.call(this);zt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],_t,mt,null).clip().discardPath()),this.pdf.text(ut,vn.x,vn.y,{angle:G.angle,align:Q,renderingMode:G.renderingMode}),zt&&this.pdf.restoreGraphicsState()}}else xt.y<ct&&(this.ctx.prevPageLastElemOffset+=ct-xt.y);G.scale>=.01&&(this.pdf.setFontSize(He),this.lineWidth=rt)}else G.scale>=.01&&(He=this.pdf.internal.getFontSize(),this.pdf.setFontSize(He*G.scale),rt=this.lineWidth,this.lineWidth=rt*G.scale),this.pdf.text(G.text,Ae.x+this.posX,Ae.y+this.posY,{angle:G.angle,align:Q,renderingMode:G.renderingMode,maxWidth:G.maxWidth}),G.scale>=.01&&(this.pdf.setFontSize(He),this.lineWidth=rt)},j=function(G,Q,te,ie){te=te||0,ie=ie||0,this.pdf.internal.out(t(G+te)+" "+r(Q+ie)+" l")},H=function(G,Q,te){return this.pdf.lines(G,Q,te,null,null)},ne=function(G,Q,te,ie,de,Ae,be,Te){this.pdf.internal.out([e(i(te+G)),e(a(ie+Q)),e(i(de+G)),e(a(Ae+Q)),e(i(be+G)),e(a(Te+Q)),"c"].join(" "))},U=function(G,Q,te,ie){for(var de=2*Math.PI,Ae=Math.PI/2;Q>te;)Q-=de;var be=Math.abs(te-Q);be<de&&ie&&(be=de-be);for(var Te=[],We=ie?-1:1,He=Q;be>1e-5;){var rt=He+We*Math.min(be,Ae);Te.push(z.call(this,G,He,rt)),be-=Math.abs(rt-He),He=rt}return Te},z=function(G,Q,te){var ie=(te-Q)/2,de=G*Math.cos(ie),Ae=G*Math.sin(ie),be=de,Te=-Ae,We=be*be+Te*Te,He=We+be*de+Te*Ae,rt=4/3*(Math.sqrt(2*We*He)-He)/(be*Ae-Te*de),st=be-rt*Te,wt=Te+rt*be,Be=st,me=-wt,gt=ie+Q,lt=Math.cos(gt),Xe=Math.sin(gt);return{x1:G*Math.cos(Q),y1:G*Math.sin(Q),x2:st*lt-wt*Xe,y2:st*Xe+wt*lt,x3:Be*lt-me*Xe,y3:Be*Xe+me*lt,x4:G*Math.cos(te),y4:G*Math.sin(te)}},ee=function(G){return 180*G/Math.PI},le=function(G,Q,te,ie,de,Ae){var be=G+.5*(te-G),Te=Q+.5*(ie-Q),We=de+.5*(te-de),He=Ae+.5*(ie-Ae),rt=Math.min(G,de,be,We),st=Math.max(G,de,be,We),wt=Math.min(Q,Ae,Te,He),Be=Math.max(Q,Ae,Te,He);return new s(rt,wt,st-rt,Be-wt)},$=function(G,Q,te,ie,de,Ae,be,Te){var We,He,rt,st,wt,Be,me,gt,lt,Xe,it,at,ot,ct,mt=te-G,Rt=ie-Q,_t=de-te,bt=Ae-ie,Nt=be-de,xt=Te-Ae;for(He=0;He<41;He++)lt=(me=(rt=G+(We=He/40)*mt)+We*((wt=te+We*_t)-rt))+We*(wt+We*(de+We*Nt-wt)-me),Xe=(gt=(st=Q+We*Rt)+We*((Be=ie+We*bt)-st))+We*(Be+We*(Ae+We*xt-Be)-gt),He==0?(it=lt,at=Xe,ot=lt,ct=Xe):(it=Math.min(it,lt),at=Math.min(at,Xe),ot=Math.max(ot,lt),ct=Math.max(ct,Xe));return new s(Math.round(it),Math.round(at),Math.round(ot-it),Math.round(ct-at))},ve=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var G,Q,te=(G=this.ctx.lineDash,Q=this.ctx.lineDashOffset,JSON.stringify({lineDash:G,lineDashOffset:Q}));this.prevLineDash!==te&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=te)}}})(Ht.API),function(n){var e=function(a){var o,s,u,f,h,p,g,m,x,w;for(s=[],u=0,f=(a+=o="\0\0\0\0".slice(a.length%4||4)).length;f>u;u+=4)(h=(a.charCodeAt(u)<<24)+(a.charCodeAt(u+1)<<16)+(a.charCodeAt(u+2)<<8)+a.charCodeAt(u+3))!==0?(p=(h=((h=((h=((h=(h-(w=h%85))/85)-(x=h%85))/85)-(m=h%85))/85)-(g=h%85))/85)%85,s.push(p+33,g+33,m+33,x+33,w+33)):s.push(122);return function(I,C){for(var P=C;P>0;P--)I.pop()}(s,o.length),String.fromCharCode.apply(String,s)+"~>"},t=function(a){var o,s,u,f,h,p=String,g="length",m=255,x="charCodeAt",w="slice",I="replace";for(a[w](-2),a=a[w](0,-2)[I](/\s/g,"")[I]("z","!!!!!"),u=[],f=0,h=(a+=o="uuuuu"[w](a[g]%5||5))[g];h>f;f+=5)s=52200625*(a[x](f)-33)+614125*(a[x](f+1)-33)+7225*(a[x](f+2)-33)+85*(a[x](f+3)-33)+(a[x](f+4)-33),u.push(m&s>>24,m&s>>16,m&s>>8,m&s);return function(C,P){for(var B=P;B>0;B--)C.pop()}(u,o[g]),p.fromCharCode.apply(p,u)},r=function(a){var o=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((a=a.replace(/\s/g,"")).indexOf(">")!==-1&&(a=a.substr(0,a.indexOf(">"))),a.length%2&&(a+="0"),o.test(a)===!1)return"";for(var s="",u=0;u<a.length;u+=2)s+=String.fromCharCode("0x"+(a[u]+a[u+1]));return s},i=function(a){for(var o=new Uint8Array(a.length),s=a.length;s--;)o[s]=a.charCodeAt(s);return a=(o=Vy(o)).reduce(function(u,f){return u+String.fromCharCode(f)},"")};n.processDataByFilters=function(a,o){var s=0,u=a||"",f=[];for(typeof(o=o||[])=="string"&&(o=[o]),s=0;s<o.length;s+=1)switch(o[s]){case"ASCII85Decode":case"/ASCII85Decode":u=t(u),f.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":u=e(u),f.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":u=r(u),f.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":u=u.split("").map(function(h){return("0"+h.charCodeAt().toString(16)).slice(-2)}).join("")+">",f.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":u=i(u),f.push("/FlateDecode");break;default:throw new Error('The filter: "'+o[s]+'" is not implemented')}return{data:u,reverseChain:f.reverse().join(" ")}}}(Ht.API),function(n){n.loadFile=function(e,t,r){return function(i,a,o){a=a!==!1,o=typeof o=="function"?o:function(){};var s=void 0;try{s=function(u,f,h){var p=new XMLHttpRequest,g=0,m=function(x){var w=x.length,I=[],C=String.fromCharCode;for(g=0;g<w;g+=1)I.push(C(255&x.charCodeAt(g)));return I.join("")};if(p.open("GET",u,!f),p.overrideMimeType("text/plain; charset=x-user-defined"),f===!1&&(p.onload=function(){p.status===200?h(m(this.responseText)):h(void 0)}),p.send(null),f&&p.status===200)return m(p.responseText)}(i,a,o)}catch{}return s}(e,t,r)},n.loadImageFile=n.loadFile}(Ht.API),function(n){function e(){return(Gt.html2canvas?Promise.resolve(Gt.html2canvas):My(()=>import("./html2canvas.esm-CBrSDip1.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load html2canvas: "+o))}).then(function(o){return o.default?o.default:o})}function t(){return(Gt.DOMPurify?Promise.resolve(Gt.DOMPurify):My(()=>import("./purify.es-CQJ0hv7W.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load dompurify: "+o))}).then(function(o){return o.default?o.default:o})}var r=function(o){var s=or(o);return s==="undefined"?"undefined":s==="string"||o instanceof String?"string":s==="number"||o instanceof Number?"number":s==="function"||o instanceof Function?"function":o&&o.constructor===Array?"array":o&&o.nodeType===1?"element":s==="object"?"object":"unknown"},i=function(o,s){var u=document.createElement(o);for(var f in s.className&&(u.className=s.className),s.innerHTML&&s.dompurify&&(u.innerHTML=s.dompurify.sanitize(s.innerHTML)),s.style)u.style[f]=s.style[f];return u},a=function o(s){var u=Object.assign(o.convert(Promise.resolve()),JSON.parse(JSON.stringify(o.template))),f=o.convert(Promise.resolve(),u);return f=(f=f.setProgress(1,o,1,[o])).set(s)};(a.prototype=Object.create(Promise.prototype)).constructor=a,a.convert=function(o,s){return o.__proto__=s||a.prototype,o},a.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},a.prototype.from=function(o,s){return this.then(function(){switch(s=s||function(u){switch(r(u)){case"string":return"string";case"element":return u.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(o)){case"string":return this.then(t).then(function(u){return this.set({src:i("div",{innerHTML:o,dompurify:u})})});case"element":return this.set({src:o});case"canvas":return this.set({canvas:o});case"img":return this.set({img:o});default:return this.error("Unknown source type.")}})},a.prototype.to=function(o){switch(o){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},a.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var o={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},s=function u(f,h){for(var p=f.nodeType===3?document.createTextNode(f.nodeValue):f.cloneNode(!1),g=f.firstChild;g;g=g.nextSibling)h!==!0&&g.nodeType===1&&g.nodeName==="SCRIPT"||p.appendChild(u(g,h));return f.nodeType===1&&(f.nodeName==="CANVAS"?(p.width=f.width,p.height=f.height,p.getContext("2d").drawImage(f,0,0)):f.nodeName!=="TEXTAREA"&&f.nodeName!=="SELECT"||(p.value=f.value),p.addEventListener("load",function(){p.scrollTop=f.scrollTop,p.scrollLeft=f.scrollLeft},!0)),p}(this.prop.src,this.opt.html2canvas.javascriptEnabled);s.tagName==="BODY"&&(o.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:o}),this.prop.container.appendChild(s),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},a.prototype.toCanvas=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(e).then(function(s){var u=Object.assign({},this.opt.html2canvas);return delete u.onrendered,s(this.prop.container,u)}).then(function(s){(this.opt.html2canvas.onrendered||function(){})(s),this.prop.canvas=s,document.body.removeChild(this.prop.overlay)})},a.prototype.toContext2d=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(e).then(function(s){var u=this.opt.jsPDF,f=this.opt.fontFaces,h=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,p=Object.assign({async:!0,allowTaint:!0,scale:h,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete p.onrendered,u.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,u.context2d.posX=this.opt.x,u.context2d.posY=this.opt.y,u.context2d.margin=this.opt.margin,u.context2d.fontFaces=f,f)for(var g=0;g<f.length;++g){var m=f[g],x=m.src.find(function(w){return w.format==="truetype"});x&&u.addFont(x.url,m.ref.name,m.ref.style)}return p.windowHeight=p.windowHeight||0,p.windowHeight=p.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):p.windowHeight,u.context2d.save(!0),s(this.prop.container,p)}).then(function(s){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(s),this.prop.canvas=s,document.body.removeChild(this.prop.overlay)})},a.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var o=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=o})},a.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},a.prototype.output=function(o,s,u){return(u=u||"pdf").toLowerCase()==="img"||u.toLowerCase()==="image"?this.outputImg(o,s):this.outputPdf(o,s)},a.prototype.outputPdf=function(o,s){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(o,s)})},a.prototype.outputImg=function(o){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(o){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+o+'" is not supported.'}})},a.prototype.save=function(o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(o?{filename:o}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},a.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},a.prototype.set=function(o){if(r(o)!=="object")return this;var s=Object.keys(o||{}).map(function(u){if(u in a.template.prop)return function(){this.prop[u]=o[u]};switch(u){case"margin":return this.setMargin.bind(this,o.margin);case"jsPDF":return function(){return this.opt.jsPDF=o.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,o.pageSize);default:return function(){this.opt[u]=o[u]}}},this);return this.then(function(){return this.thenList(s)})},a.prototype.get=function(o,s){return this.then(function(){var u=o in a.template.prop?this.prop[o]:this.opt[o];return s?s(u):u})},a.prototype.setMargin=function(o){return this.then(function(){switch(r(o)){case"number":o=[o,o,o,o];case"array":if(o.length===2&&(o=[o[0],o[1],o[0],o[1]]),o.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=o}).then(this.setPageSize)},a.prototype.setPageSize=function(o){function s(u,f){return Math.floor(u*f/72*96)}return this.then(function(){(o=o||Ht.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(o.inner={width:o.width-this.opt.margin[1]-this.opt.margin[3],height:o.height-this.opt.margin[0]-this.opt.margin[2]},o.inner.px={width:s(o.inner.width,o.k),height:s(o.inner.height,o.k)},o.inner.ratio=o.inner.height/o.inner.width),this.prop.pageSize=o})},a.prototype.setProgress=function(o,s,u,f){return o!=null&&(this.progress.val=o),s!=null&&(this.progress.state=s),u!=null&&(this.progress.n=u),f!=null&&(this.progress.stack=f),this.progress.ratio=this.progress.val/this.progress.state,this},a.prototype.updateProgress=function(o,s,u,f){return this.setProgress(o?this.progress.val+o:null,s||null,u?this.progress.n+u:null,f?this.progress.stack.concat(f):null)},a.prototype.then=function(o,s){var u=this;return this.thenCore(o,s,function(f,h){return u.updateProgress(null,null,1,[f]),Promise.prototype.then.call(this,function(p){return u.updateProgress(null,f),p}).then(f,h).then(function(p){return u.updateProgress(1),p})})},a.prototype.thenCore=function(o,s,u){u=u||Promise.prototype.then,o&&(o=o.bind(this)),s&&(s=s.bind(this));var f=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:a.convert(Object.assign({},this),Promise.prototype),h=u.call(f,o,s);return a.convert(h,this.__proto__)},a.prototype.thenExternal=function(o,s){return Promise.prototype.then.call(this,o,s)},a.prototype.thenList=function(o){var s=this;return o.forEach(function(u){s=s.thenCore(u)}),s},a.prototype.catch=function(o){o&&(o=o.bind(this));var s=Promise.prototype.catch.call(this,o);return a.convert(s,this)},a.prototype.catchExternal=function(o){return Promise.prototype.catch.call(this,o)},a.prototype.error=function(o){return this.then(function(){throw new Error(o)})},a.prototype.using=a.prototype.set,a.prototype.saveAs=a.prototype.save,a.prototype.export=a.prototype.output,a.prototype.run=a.prototype.then,Ht.getPageSize=function(o,s,u){if(or(o)==="object"){var f=o;o=f.orientation,s=f.unit||s,u=f.format||u}s=s||"mm",u=u||"a4",o=(""+(o||"P")).toLowerCase();var h,p=(""+u).toLowerCase(),g={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(s){case"pt":h=1;break;case"mm":h=72/25.4;break;case"cm":h=72/2.54;break;case"in":h=72;break;case"px":h=.75;break;case"pc":case"em":h=12;break;case"ex":h=6;break;default:throw"Invalid unit: "+s}var m,x=0,w=0;if(g.hasOwnProperty(p))x=g[p][1]/h,w=g[p][0]/h;else try{x=u[1],w=u[0]}catch{throw new Error("Invalid format: "+u)}if(o==="p"||o==="portrait")o="p",w>x&&(m=w,w=x,x=m);else{if(o!=="l"&&o!=="landscape")throw"Invalid orientation: "+o;o="l",x>w&&(m=w,w=x,x=m)}return{width:w,height:x,unit:s,k:h,orientation:o}},n.html=function(o,s){(s=s||{}).callback=s.callback||function(){},s.html2canvas=s.html2canvas||{},s.html2canvas.canvas=s.html2canvas.canvas||this.canvas,s.jsPDF=s.jsPDF||this,s.fontFaces=s.fontFaces?s.fontFaces.map($y):null;var u=new a(s);return s.worker?u:u.from(o).doCallback()}}(Ht.API),Ht.API.addJS=function(n){return D4=n,this.internal.events.subscribe("postPutResources",function(){Vp=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Vp+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),N4=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+D4+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){Vp!==void 0&&N4!==void 0&&this.internal.out("/Names <</JavaScript "+Vp+" 0 R>>")}),this},function(n){var e;n.events.push(["postPutResources",function(){var t=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=t.outline.render().split(/\r\n/),a=0;a<i.length;a++){var o=i[a],s=r.exec(o);if(s!=null){var u=s[1];t.internal.newObjectDeferredBegin(u,!1)}t.internal.write(o)}if(this.outline.createNamedDestinations){var f=this.internal.pages.length,h=[];for(a=0;a<f;a++){var p=t.internal.newObject();h.push(p);var g=t.internal.getPageInfo(a+1);t.internal.write("<< /D["+g.objId+" 0 R /XYZ null null null]>> endobj")}var m=t.internal.newObject();for(t.internal.write("<< /Names [ "),a=0;a<h.length;a++)t.internal.write("(page_"+(a+1)+")"+h[a]+" 0 R");t.internal.write(" ] >>","endobj"),e=t.internal.newObject(),t.internal.write("<< /Dests "+m+" 0 R"),t.internal.write(">>","endobj")}}]),n.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+e+" 0 R"))}]),n.events.push(["initialized",function(){var t=this;t.outline={createNamedDestinations:!1,root:{children:[]}},t.outline.add=function(r,i,a){var o={title:i,options:a,children:[]};return r==null&&(r=this.root),r.children.push(o),o},t.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=t,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},t.outline.genIds_r=function(r){r.id=t.internal.newObjectDeferred();for(var i=0;i<r.children.length;i++)this.genIds_r(r.children[i])},t.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},t.outline.renderItems=function(r){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,a=0;a<r.children.length;a++){var o=r.children[a];this.objStart(o),this.line("/Title "+this.makeString(o.title)),this.line("/Parent "+this.makeRef(r)),a>0&&this.line("/Prev "+this.makeRef(r.children[a-1])),a<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[a+1])),o.children.length>0&&(this.line("/First "+this.makeRef(o.children[0])),this.line("/Last "+this.makeRef(o.children[o.children.length-1])));var s=this.count=this.count_r({count:0},o);if(s>0&&this.line("/Count "+s),o.options&&o.options.pageNumber){var u=t.internal.getPageInfo(o.options.pageNumber);this.line("/Dest ["+u.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var f=0;f<r.children.length;f++)this.renderItems(r.children[f])},t.outline.line=function(r){this.ctx.val+=r+`\r
`},t.outline.makeRef=function(r){return r.id+" 0 R"},t.outline.makeString=function(r){return"("+t.internal.pdfEscape(r)+")"},t.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},t.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},t.outline.count_r=function(r,i){for(var a=0;a<i.children.length;a++)r.count++,this.count_r(r,i.children[a]);return r.count}}])}(Ht.API),function(n){var e=[192,193,194,195,196,197,198,199];n.processJPEG=function(t,r,i,a,o,s){var u,f=this.decode.DCT_DECODE,h=null;if(typeof t=="string"||this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t)){switch(t=o||t,t=this.__addimage__.isArrayBuffer(t)?new Uint8Array(t):t,(u=function(p){for(var g,m=256*p.charCodeAt(4)+p.charCodeAt(5),x=p.length,w={width:0,height:0,numcomponents:1},I=4;I<x;I+=2){if(I+=m,e.indexOf(p.charCodeAt(I+1))!==-1){g=256*p.charCodeAt(I+5)+p.charCodeAt(I+6),w={width:256*p.charCodeAt(I+7)+p.charCodeAt(I+8),height:g,numcomponents:p.charCodeAt(I+9)};break}m=256*p.charCodeAt(I+2)+p.charCodeAt(I+3)}return w}(t=this.__addimage__.isArrayBufferView(t)?this.__addimage__.arrayBufferToBinaryString(t):t)).numcomponents){case 1:s=this.color_spaces.DEVICE_GRAY;break;case 4:s=this.color_spaces.DEVICE_CMYK;break;case 3:s=this.color_spaces.DEVICE_RGB}h={data:t,width:u.width,height:u.height,colorSpace:s,bitsPerComponent:8,filter:f,index:r,alias:i}}return h}}(Ht.API);var Kh,zp,O4,P4,L4,Dz=function(){var n,e,t;function r(a){var o,s,u,f,h,p,g,m,x,w,I,C,P,B;for(this.data=a,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},p=null;;){switch(o=this.readUInt32(),x=(function(){var V,Y;for(Y=[],V=0;V<4;++V)Y.push(String.fromCharCode(this.data[this.pos++]));return Y}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(o);break;case"fcTL":p&&this.animation.frames.push(p),this.pos+=4,p={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},h=this.readUInt16(),f=this.readUInt16()||100,p.delay=1e3*h/f,p.disposeOp=this.data[this.pos++],p.blendOp=this.data[this.pos++],p.data=[];break;case"IDAT":case"fdAT":for(x==="fdAT"&&(this.pos+=4,o-=4),a=(p!=null?p.data:void 0)||this.imgData,C=0;0<=o?C<o:C>o;0<=o?++C:--C)a.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(u=this.palette.length/3,this.transparency.indexed=this.read(o),this.transparency.indexed.length>u)throw new Error("More transparent colors than palette size");if((w=u-this.transparency.indexed.length)>0)for(P=0;0<=w?P<w:P>w;0<=w?++P:--P)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(o)[0];break;case 2:this.transparency.rgb=this.read(o)}break;case"tEXt":g=(I=this.read(o)).indexOf(0),m=String.fromCharCode.apply(String,I.slice(0,g)),this.text[m]=String.fromCharCode.apply(String,I.slice(g+1));break;case"IEND":return p&&this.animation.frames.push(p),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(B=this.colorType)===4||B===6,s=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*s,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=o}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}r.prototype.read=function(a){var o,s;for(s=[],o=0;0<=a?o<a:o>a;0<=a?++o:--o)s.push(this.data[this.pos++]);return s},r.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.decodePixels=function(a){var o=this.pixelBitlength/8,s=new Uint8Array(this.width*this.height*o),u=0,f=this;if(a==null&&(a=this.imgData),a.length===0)return new Uint8Array(0);function h(p,g,m,x){var w,I,C,P,B,V,Y,q,D,A,T,k,R,L,j,H,ne,U,z,ee,le,$=Math.ceil((f.width-p)/m),ve=Math.ceil((f.height-g)/x),G=f.width==$&&f.height==ve;for(L=o*$,k=G?s:new Uint8Array(L*ve),V=a.length,R=0,I=0;R<ve&&u<V;){switch(a[u++]){case 0:for(P=ne=0;ne<L;P=ne+=1)k[I++]=a[u++];break;case 1:for(P=U=0;U<L;P=U+=1)w=a[u++],B=P<o?0:k[I-o],k[I++]=(w+B)%256;break;case 2:for(P=z=0;z<L;P=z+=1)w=a[u++],C=(P-P%o)/o,j=R&&k[(R-1)*L+C*o+P%o],k[I++]=(j+w)%256;break;case 3:for(P=ee=0;ee<L;P=ee+=1)w=a[u++],C=(P-P%o)/o,B=P<o?0:k[I-o],j=R&&k[(R-1)*L+C*o+P%o],k[I++]=(w+Math.floor((B+j)/2))%256;break;case 4:for(P=le=0;le<L;P=le+=1)w=a[u++],C=(P-P%o)/o,B=P<o?0:k[I-o],R===0?j=H=0:(j=k[(R-1)*L+C*o+P%o],H=C&&k[(R-1)*L+(C-1)*o+P%o]),Y=B+j-H,q=Math.abs(Y-B),A=Math.abs(Y-j),T=Math.abs(Y-H),D=q<=A&&q<=T?B:A<=T?j:H,k[I++]=(w+D)%256;break;default:throw new Error("Invalid filter algorithm: "+a[u-1])}if(!G){var Q=((g+R*x)*f.width+p)*o,te=R*L;for(P=0;P<$;P+=1){for(var ie=0;ie<o;ie+=1)s[Q++]=k[te++];Q+=(m-1)*o}}R++}}return a=uz(a),f.interlaceMethod==1?(h(0,0,8,8),h(4,0,8,8),h(0,4,4,8),h(2,0,4,4),h(0,2,2,4),h(1,0,2,2),h(0,1,1,2)):h(0,0,1,1),s},r.prototype.decodePalette=function(){var a,o,s,u,f,h,p,g,m;for(s=this.palette,h=this.transparency.indexed||[],f=new Uint8Array((h.length||0)+s.length),u=0,a=0,o=p=0,g=s.length;p<g;o=p+=3)f[u++]=s[o],f[u++]=s[o+1],f[u++]=s[o+2],f[u++]=(m=h[a++])!=null?m:255;return f},r.prototype.copyToImageData=function(a,o){var s,u,f,h,p,g,m,x,w,I,C;if(u=this.colors,w=null,s=this.hasAlphaChannel,this.palette.length&&(w=(C=this._decodedPalette)!=null?C:this._decodedPalette=this.decodePalette(),u=4,s=!0),x=(f=a.data||a).length,p=w||o,h=g=0,u===1)for(;h<x;)m=w?4*o[h/4]:g,I=p[m++],f[h++]=I,f[h++]=I,f[h++]=I,f[h++]=s?p[m++]:255,g=m;else for(;h<x;)m=w?4*o[h/4]:g,f[h++]=p[m++],f[h++]=p[m++],f[h++]=p[m++],f[h++]=s?p[m++]:255,g=m},r.prototype.decode=function(){var a;return a=new Uint8Array(this.width*this.height*4),this.copyToImageData(a,this.decodePixels()),a};var i=function(){if(Object.prototype.toString.call(Gt)==="[object Window]"){try{e=Gt.document.createElement("canvas"),t=e.getContext("2d")}catch{return!1}return!0}return!1};return i(),n=function(a){var o;if(i()===!0)return t.width=a.width,t.height=a.height,t.clearRect(0,0,a.width,a.height),t.putImageData(a,0,0),(o=new Image).src=e.toDataURL(),o;throw new Error("This method requires a Browser with Canvas-capability.")},r.prototype.decodeFrames=function(a){var o,s,u,f,h,p,g,m;if(this.animation){for(m=[],s=h=0,p=(g=this.animation.frames).length;h<p;s=++h)o=g[s],u=a.createImageData(o.width,o.height),f=this.decodePixels(new Uint8Array(o.data)),this.copyToImageData(u,f),o.imageData=u,m.push(o.image=n(u));return m}},r.prototype.renderFrame=function(a,o){var s,u,f;return s=(u=this.animation.frames)[o],f=u[o-1],o===0&&a.clearRect(0,0,this.width,this.height),(f!=null?f.disposeOp:void 0)===1?a.clearRect(f.xOffset,f.yOffset,f.width,f.height):(f!=null?f.disposeOp:void 0)===2&&a.putImageData(f.imageData,f.xOffset,f.yOffset),s.blendOp===0&&a.clearRect(s.xOffset,s.yOffset,s.width,s.height),a.drawImage(s.image,s.xOffset,s.yOffset)},r.prototype.animate=function(a){var o,s,u,f,h,p,g=this;return s=0,p=this.animation,f=p.numFrames,u=p.frames,h=p.numPlays,(o=function(){var m,x;if(m=s++%f,x=u[m],g.renderFrame(a,m),f>1&&s/f<h)return g.animation._timeout=setTimeout(o,x.delay)})()},r.prototype.stopAnimation=function(){var a;return clearTimeout((a=this.animation)!=null?a._timeout:void 0)},r.prototype.render=function(a){var o,s;return a._png&&a._png.stopAnimation(),a._png=this,a.width=this.width,a.height=this.height,o=a.getContext("2d"),this.animation?(this.decodeFrames(o),this.animate(o)):(s=o.createImageData(this.width,this.height),this.copyToImageData(s,this.decodePixels()),o.putImageData(s,0,0))},r}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function Oz(n){var e=0;if(n[e++]!==71||n[e++]!==73||n[e++]!==70||n[e++]!==56||(n[e++]+1&253)!=56||n[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var t=n[e++]|n[e++]<<8,r=n[e++]|n[e++]<<8,i=n[e++],a=i>>7,o=1<<(7&i)+1;n[e++],n[e++];var s=null,u=null;a&&(s=e,u=o,e+=3*o);var f=!0,h=[],p=0,g=null,m=0,x=null;for(this.width=t,this.height=r;f&&e<n.length;)switch(n[e++]){case 33:switch(n[e++]){case 255:if(n[e]!==11||n[e+1]==78&&n[e+2]==69&&n[e+3]==84&&n[e+4]==83&&n[e+5]==67&&n[e+6]==65&&n[e+7]==80&&n[e+8]==69&&n[e+9]==50&&n[e+10]==46&&n[e+11]==48&&n[e+12]==3&&n[e+13]==1&&n[e+16]==0)e+=14,x=n[e++]|n[e++]<<8,e++;else for(e+=12;;){if(!((R=n[e++])>=0))throw Error("Invalid block size");if(R===0)break;e+=R}break;case 249:if(n[e++]!==4||n[e+4]!==0)throw new Error("Invalid graphics extension block.");var w=n[e++];p=n[e++]|n[e++]<<8,g=n[e++],(1&w)==0&&(g=null),m=w>>2&7,e++;break;case 254:for(;;){if(!((R=n[e++])>=0))throw Error("Invalid block size");if(R===0)break;e+=R}break;default:throw new Error("Unknown graphic control label: 0x"+n[e-1].toString(16))}break;case 44:var I=n[e++]|n[e++]<<8,C=n[e++]|n[e++]<<8,P=n[e++]|n[e++]<<8,B=n[e++]|n[e++]<<8,V=n[e++],Y=V>>6&1,q=1<<(7&V)+1,D=s,A=u,T=!1;V>>7&&(T=!0,D=e,A=q,e+=3*q);var k=e;for(e++;;){var R;if(!((R=n[e++])>=0))throw Error("Invalid block size");if(R===0)break;e+=R}h.push({x:I,y:C,width:P,height:B,has_local_palette:T,palette_offset:D,palette_size:A,data_offset:k,data_length:e-k,transparent_index:g,interlaced:!!Y,delay:p,disposal:m});break;case 59:f=!1;break;default:throw new Error("Unknown gif block: 0x"+n[e-1].toString(16))}this.numFrames=function(){return h.length},this.loopCount=function(){return x},this.frameInfo=function(L){if(L<0||L>=h.length)throw new Error("Frame index out of range.");return h[L]},this.decodeAndBlitFrameBGRA=function(L,j){var H=this.frameInfo(L),ne=H.width*H.height,U=new Uint8Array(ne);k4(n,H.data_offset,U,ne);var z=H.palette_offset,ee=H.transparent_index;ee===null&&(ee=256);var le=H.width,$=t-le,ve=le,G=4*(H.y*t+H.x),Q=4*((H.y+H.height)*t+H.x),te=G,ie=4*$;H.interlaced===!0&&(ie+=4*t*7);for(var de=8,Ae=0,be=U.length;Ae<be;++Ae){var Te=U[Ae];if(ve===0&&(ve=le,(te+=ie)>=Q&&(ie=4*$+4*t*(de-1),te=G+(le+$)*(de<<1),de>>=1)),Te===ee)te+=4;else{var We=n[z+3*Te],He=n[z+3*Te+1],rt=n[z+3*Te+2];j[te++]=rt,j[te++]=He,j[te++]=We,j[te++]=255}--ve}},this.decodeAndBlitFrameRGBA=function(L,j){var H=this.frameInfo(L),ne=H.width*H.height,U=new Uint8Array(ne);k4(n,H.data_offset,U,ne);var z=H.palette_offset,ee=H.transparent_index;ee===null&&(ee=256);var le=H.width,$=t-le,ve=le,G=4*(H.y*t+H.x),Q=4*((H.y+H.height)*t+H.x),te=G,ie=4*$;H.interlaced===!0&&(ie+=4*t*7);for(var de=8,Ae=0,be=U.length;Ae<be;++Ae){var Te=U[Ae];if(ve===0&&(ve=le,(te+=ie)>=Q&&(ie=4*$+4*t*(de-1),te=G+(le+$)*(de<<1),de>>=1)),Te===ee)te+=4;else{var We=n[z+3*Te],He=n[z+3*Te+1],rt=n[z+3*Te+2];j[te++]=We,j[te++]=He,j[te++]=rt,j[te++]=255}--ve}}}function k4(n,e,t,r){for(var i=n[e++],a=1<<i,o=a+1,s=o+1,u=i+1,f=(1<<u)-1,h=0,p=0,g=0,m=n[e++],x=new Int32Array(4096),w=null;;){for(;h<16&&m!==0;)p|=n[e++]<<h,h+=8,m===1?m=n[e++]:--m;if(h<u)break;var I=p&f;if(p>>=u,h-=u,I!==a){if(I===o)break;for(var C=I<s?I:w,P=0,B=C;B>a;)B=x[B]>>8,++P;var V=B;if(g+P+(C!==I?1:0)>r)return void vr.log("Warning, gif stream longer than expected.");t[g++]=V;var Y=g+=P;for(C!==I&&(t[g++]=V),B=C;P--;)B=x[B],t[--Y]=255&B,B>>=8;w!==null&&s<4096&&(x[s++]=w<<8|V,s>=f+1&&u<12&&(++u,f=f<<1|1)),w=I}else s=o+1,f=(1<<(u=i+1))-1,w=null}return g!==r&&vr.log("Warning, gif stream shorter than expected."),t}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function Bv(n){var e,t,r,i,a,o=Math.floor,s=new Array(64),u=new Array(64),f=new Array(64),h=new Array(64),p=new Array(65535),g=new Array(65535),m=new Array(64),x=new Array(64),w=[],I=0,C=7,P=new Array(64),B=new Array(64),V=new Array(64),Y=new Array(256),q=new Array(2048),D=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],A=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],T=[0,1,2,3,4,5,6,7,8,9,10,11],k=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],R=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],L=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],j=[0,1,2,3,4,5,6,7,8,9,10,11],H=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],ne=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function U(G,Q){for(var te=0,ie=0,de=new Array,Ae=1;Ae<=16;Ae++){for(var be=1;be<=G[Ae];be++)de[Q[ie]]=[],de[Q[ie]][0]=te,de[Q[ie]][1]=Ae,ie++,te++;te*=2}return de}function z(G){for(var Q=G[0],te=G[1]-1;te>=0;)Q&1<<te&&(I|=1<<C),te--,--C<0&&(I==255?(ee(255),ee(0)):ee(I),C=7,I=0)}function ee(G){w.push(G)}function le(G){ee(G>>8&255),ee(255&G)}function $(G,Q,te,ie,de){for(var Ae,be=de[0],Te=de[240],We=function(Xe,it){var at,ot,ct,mt,Rt,_t,bt,Nt,xt,Dt,ut=0;for(xt=0;xt<8;++xt){at=Xe[ut],ot=Xe[ut+1],ct=Xe[ut+2],mt=Xe[ut+3],Rt=Xe[ut+4],_t=Xe[ut+5],bt=Xe[ut+6];var vn=at+(Nt=Xe[ut+7]),zt=at-Nt,Yn=ot+bt,Kt=ot-bt,An=ct+_t,pi=ct-_t,on=mt+Rt,pa=mt-Rt,Cn=vn+on,Mr=vn-on,sr=Yn+An,yn=Yn-An;Xe[ut]=Cn+sr,Xe[ut+4]=Cn-sr;var Tt=.707106781*(yn+Mr);Xe[ut+2]=Mr+Tt,Xe[ut+6]=Mr-Tt;var nn=.382683433*((Cn=pa+pi)-(yn=Kt+zt)),Si=.5411961*Cn+nn,Mn=1.306562965*yn+nn,pr=.707106781*(sr=pi+Kt),Ua=zt+pr,vt=zt-pr;Xe[ut+5]=vt+Si,Xe[ut+3]=vt-Si,Xe[ut+1]=Ua+Mn,Xe[ut+7]=Ua-Mn,ut+=8}for(ut=0,xt=0;xt<8;++xt){at=Xe[ut],ot=Xe[ut+8],ct=Xe[ut+16],mt=Xe[ut+24],Rt=Xe[ut+32],_t=Xe[ut+40],bt=Xe[ut+48];var Wn=at+(Nt=Xe[ut+56]),Gn=at-Nt,gr=ot+bt,Er=ot-bt,Nr=ct+_t,Gr=ct-_t,Ts=mt+Rt,Ji=mt-Rt,gi=Wn+Ts,ti=Wn-Ts,$r=gr+Nr,ni=gr-Nr;Xe[ut]=gi+$r,Xe[ut+32]=gi-$r;var lr=.707106781*(ni+ti);Xe[ut+16]=ti+lr,Xe[ut+48]=ti-lr;var Bn=.382683433*((gi=Ji+Gr)-(ni=Er+Gn)),So=.5411961*gi+Bn,Co=1.306562965*ni+Bn,ji=.707106781*($r=Gr+Er),ga=Gn+ji,Is=Gn-ji;Xe[ut+40]=Is+So,Xe[ut+24]=Is-So,Xe[ut+8]=ga+Co,Xe[ut+56]=ga-Co,ut++}for(xt=0;xt<64;++xt)Dt=Xe[xt]*it[xt],m[xt]=Dt>0?Dt+.5|0:Dt-.5|0;return m}(G,Q),He=0;He<64;++He)x[D[He]]=We[He];var rt=x[0]-te;te=x[0],rt==0?z(ie[0]):(z(ie[g[Ae=32767+rt]]),z(p[Ae]));for(var st=63;st>0&&x[st]==0;)st--;if(st==0)return z(be),te;for(var wt,Be=1;Be<=st;){for(var me=Be;x[Be]==0&&Be<=st;)++Be;var gt=Be-me;if(gt>=16){wt=gt>>4;for(var lt=1;lt<=wt;++lt)z(Te);gt&=15}Ae=32767+x[Be],z(de[(gt<<4)+g[Ae]]),z(p[Ae]),Be++}return st!=63&&z(be),te}function ve(G){G=Math.min(Math.max(G,1),100),a!=G&&(function(Q){for(var te=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],ie=0;ie<64;ie++){var de=o((te[ie]*Q+50)/100);de=Math.min(Math.max(de,1),255),s[D[ie]]=de}for(var Ae=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],be=0;be<64;be++){var Te=o((Ae[be]*Q+50)/100);Te=Math.min(Math.max(Te,1),255),u[D[be]]=Te}for(var We=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],He=0,rt=0;rt<8;rt++)for(var st=0;st<8;st++)f[He]=1/(s[D[He]]*We[rt]*We[st]*8),h[He]=1/(u[D[He]]*We[rt]*We[st]*8),He++}(G<50?Math.floor(5e3/G):Math.floor(200-2*G)),a=G)}this.encode=function(G,Q){Q&&ve(Q),w=new Array,I=0,C=7,le(65496),le(65504),le(16),ee(74),ee(70),ee(73),ee(70),ee(0),ee(1),ee(1),ee(0),le(1),le(1),ee(0),ee(0),function(){le(65499),le(132),ee(0);for(var ot=0;ot<64;ot++)ee(s[ot]);ee(1);for(var ct=0;ct<64;ct++)ee(u[ct])}(),function(ot,ct){le(65472),le(17),ee(8),le(ct),le(ot),ee(3),ee(1),ee(17),ee(0),ee(2),ee(17),ee(1),ee(3),ee(17),ee(1)}(G.width,G.height),function(){le(65476),le(418),ee(0);for(var ot=0;ot<16;ot++)ee(A[ot+1]);for(var ct=0;ct<=11;ct++)ee(T[ct]);ee(16);for(var mt=0;mt<16;mt++)ee(k[mt+1]);for(var Rt=0;Rt<=161;Rt++)ee(R[Rt]);ee(1);for(var _t=0;_t<16;_t++)ee(L[_t+1]);for(var bt=0;bt<=11;bt++)ee(j[bt]);ee(17);for(var Nt=0;Nt<16;Nt++)ee(H[Nt+1]);for(var xt=0;xt<=161;xt++)ee(ne[xt])}(),le(65498),le(12),ee(3),ee(1),ee(0),ee(2),ee(17),ee(3),ee(17),ee(0),ee(63),ee(0);var te=0,ie=0,de=0;I=0,C=7,this.encode.displayName="_encode_";for(var Ae,be,Te,We,He,rt,st,wt,Be,me=G.data,gt=G.width,lt=G.height,Xe=4*gt,it=0;it<lt;){for(Ae=0;Ae<Xe;){for(He=Xe*it+Ae,st=-1,wt=0,Be=0;Be<64;Be++)rt=He+(wt=Be>>3)*Xe+(st=4*(7&Be)),it+wt>=lt&&(rt-=Xe*(it+1+wt-lt)),Ae+st>=Xe&&(rt-=Ae+st-Xe+4),be=me[rt++],Te=me[rt++],We=me[rt++],P[Be]=(q[be]+q[Te+256>>0]+q[We+512>>0]>>16)-128,B[Be]=(q[be+768>>0]+q[Te+1024>>0]+q[We+1280>>0]>>16)-128,V[Be]=(q[be+1280>>0]+q[Te+1536>>0]+q[We+1792>>0]>>16)-128;te=$(P,f,te,e,r),ie=$(B,h,ie,t,i),de=$(V,h,de,t,i),Ae+=32}it+=8}if(C>=0){var at=[];at[1]=C+1,at[0]=(1<<C+1)-1,z(at)}return le(65497),new Uint8Array(w)},n=n||50,function(){for(var G=String.fromCharCode,Q=0;Q<256;Q++)Y[Q]=G(Q)}(),e=U(A,T),t=U(L,j),r=U(k,R),i=U(H,ne),function(){for(var G=1,Q=2,te=1;te<=15;te++){for(var ie=G;ie<Q;ie++)g[32767+ie]=te,p[32767+ie]=[],p[32767+ie][1]=te,p[32767+ie][0]=ie;for(var de=-(Q-1);de<=-G;de++)g[32767+de]=te,p[32767+de]=[],p[32767+de][1]=te,p[32767+de][0]=Q-1+de;G<<=1,Q<<=1}}(),function(){for(var G=0;G<256;G++)q[G]=19595*G,q[G+256>>0]=38470*G,q[G+512>>0]=7471*G+32768,q[G+768>>0]=-11059*G,q[G+1024>>0]=-21709*G,q[G+1280>>0]=32768*G+8421375,q[G+1536>>0]=-27439*G,q[G+1792>>0]=-5329*G}(),ve(n)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function tl(n,e){if(this.pos=0,this.buffer=n,this.datav=new DataView(n.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function M4(n){function e(A){if(!A)throw Error("assert :P")}function t(A,T,k){for(var R=0;4>R;R++)if(A[T+R]!=k.charCodeAt(R))return!0;return!1}function r(A,T,k,R,L){for(var j=0;j<L;j++)A[T+j]=k[R+j]}function i(A,T,k,R){for(var L=0;L<R;L++)A[T+L]=k}function a(A){return new Int32Array(A)}function o(A,T){for(var k=[],R=0;R<A;R++)k.push(new T);return k}function s(A,T){var k=[];return function R(L,j,H){for(var ne=H[j],U=0;U<ne&&(L.push(H.length>j+1?[]:new T),!(H.length<j+1));U++)R(L[U],j+1,H)}(k,0,A),k}var u=function(){var A=this;function T(y,S){for(var M=1<<S-1>>>0;y&M;)M>>>=1;return M?(y&M-1)+M:y}function k(y,S,M,W,Z){e(!(W%M));do y[S+(W-=M)]=Z;while(0<W)}function R(y,S,M,W,Z){if(e(2328>=Z),512>=Z)var re=a(512);else if((re=a(Z))==null)return 0;return function(ae,oe,ce,he,_e,Pe){var De,Re,Ke=oe,Ue=1<<ce,we=a(16),Se=a(16);for(e(_e!=0),e(he!=null),e(ae!=null),e(0<ce),Re=0;Re<_e;++Re){if(15<he[Re])return 0;++we[he[Re]]}if(we[0]==_e)return 0;for(Se[1]=0,De=1;15>De;++De){if(we[De]>1<<De)return 0;Se[De+1]=Se[De]+we[De]}for(Re=0;Re<_e;++Re)De=he[Re],0<he[Re]&&(Pe[Se[De]++]=Re);if(Se[15]==1)return(he=new L).g=0,he.value=Pe[0],k(ae,Ke,1,Ue,he),Ue;var qe,Qe=-1,$e=Ue-1,yt=0,ft=1,Ot=1,dt=1<<ce;for(Re=0,De=1,_e=2;De<=ce;++De,_e<<=1){if(ft+=Ot<<=1,0>(Ot-=we[De]))return 0;for(;0<we[De];--we[De])(he=new L).g=De,he.value=Pe[Re++],k(ae,Ke+yt,_e,dt,he),yt=T(yt,De)}for(De=ce+1,_e=2;15>=De;++De,_e<<=1){if(ft+=Ot<<=1,0>(Ot-=we[De]))return 0;for(;0<we[De];--we[De]){if(he=new L,(yt&$e)!=Qe){for(Ke+=dt,qe=1<<(Qe=De)-ce;15>Qe&&!(0>=(qe-=we[Qe]));)++Qe,qe<<=1;Ue+=dt=1<<(qe=Qe-ce),ae[oe+(Qe=yt&$e)].g=qe+ce,ae[oe+Qe].value=Ke-oe-Qe}he.g=De-ce,he.value=Pe[Re++],k(ae,Ke+(yt>>ce),_e,dt,he),yt=T(yt,De)}}return ft!=2*Se[15]-1?0:Ue}(y,S,M,W,Z,re)}function L(){this.value=this.g=0}function j(){this.value=this.g=0}function H(){this.G=o(5,L),this.H=a(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=o(ii,j)}function ne(y,S,M,W){e(y!=null),e(S!=null),e(2147483648>W),y.Ca=254,y.I=0,y.b=-8,y.Ka=0,y.oa=S,y.pa=M,y.Jd=S,y.Yc=M+W,y.Zc=4<=W?M+W-4+1:M,Ae(y)}function U(y,S){for(var M=0;0<S--;)M|=Te(y,128)<<S;return M}function z(y,S){var M=U(y,S);return be(y)?-M:M}function ee(y,S,M,W){var Z,re=0;for(e(y!=null),e(S!=null),e(4294967288>W),y.Sb=W,y.Ra=0,y.u=0,y.h=0,4<W&&(W=4),Z=0;Z<W;++Z)re+=S[M+Z]<<8*Z;y.Ra=re,y.bb=W,y.oa=S,y.pa=M}function le(y){for(;8<=y.u&&y.bb<y.Sb;)y.Ra>>>=8,y.Ra+=y.oa[y.pa+y.bb]<<yu-8>>>0,++y.bb,y.u-=8;te(y)&&(y.h=1,y.u=0)}function $(y,S){if(e(0<=S),!y.h&&S<=vu){var M=Q(y)&Al[S];return y.u+=S,le(y),M}return y.h=1,y.u=0}function ve(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function G(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function Q(y){return y.Ra>>>(y.u&yu-1)>>>0}function te(y){return e(y.bb<=y.Sb),y.h||y.bb==y.Sb&&y.u>yu}function ie(y,S){y.u=S,y.h=te(y)}function de(y){y.u>=dc&&(e(y.u>=dc),le(y))}function Ae(y){e(y!=null&&y.oa!=null),y.pa<y.Zc?(y.I=(y.oa[y.pa++]|y.I<<8)>>>0,y.b+=8):(e(y!=null&&y.oa!=null),y.pa<y.Yc?(y.b+=8,y.I=y.oa[y.pa++]|y.I<<8):y.Ka?y.b=0:(y.I<<=8,y.b+=8,y.Ka=1))}function be(y){return U(y,1)}function Te(y,S){var M=y.Ca;0>y.b&&Ae(y);var W=y.b,Z=M*S>>>8,re=(y.I>>>W>Z)+0;for(re?(M-=Z,y.I-=Z+1<<W>>>0):M=Z+1,W=M,Z=0;256<=W;)Z+=8,W>>=8;return W=7^Z+wa[W],y.b-=W,y.Ca=(M<<W)-1,re}function We(y,S,M){y[S+0]=M>>24&255,y[S+1]=M>>16&255,y[S+2]=M>>8&255,y[S+3]=M>>0&255}function He(y,S){return y[S+0]<<0|y[S+1]<<8}function rt(y,S){return He(y,S)|y[S+2]<<16}function st(y,S){return He(y,S)|He(y,S+2)<<16}function wt(y,S){var M=1<<S;return e(y!=null),e(0<S),y.X=a(M),y.X==null?0:(y.Mb=32-S,y.Xa=S,1)}function Be(y,S){e(y!=null),e(S!=null),e(y.Xa==S.Xa),r(S.X,0,y.X,0,1<<S.Xa)}function me(){this.X=[],this.Xa=this.Mb=0}function gt(y,S,M,W){e(M!=null),e(W!=null);var Z=M[0],re=W[0];return Z==0&&(Z=(y*re+S/2)/S),re==0&&(re=(S*Z+y/2)/y),0>=Z||0>=re?0:(M[0]=Z,W[0]=re,1)}function lt(y,S){return y+(1<<S)-1>>>S}function Xe(y,S){return((4278255360&y)+(4278255360&S)>>>0&4278255360)+((16711935&y)+(16711935&S)>>>0&16711935)>>>0}function it(y,S){A[S]=function(M,W,Z,re,ae,oe,ce){var he;for(he=0;he<ae;++he){var _e=A[y](oe[ce+he-1],Z,re+he);oe[ce+he]=Xe(M[W+he],_e)}}}function at(){this.ud=this.hd=this.jd=0}function ot(y,S){return((4278124286&(y^S))>>>1)+(y&S)>>>0}function ct(y){return 0<=y&&256>y?y:0>y?0:255<y?255:void 0}function mt(y,S){return ct(y+(y-S+.5>>1))}function Rt(y,S,M){return Math.abs(S-M)-Math.abs(y-M)}function _t(y,S,M,W,Z,re,ae){for(W=re[ae-1],M=0;M<Z;++M)re[ae+M]=W=Xe(y[S+M],W)}function bt(y,S,M,W,Z){var re;for(re=0;re<M;++re){var ae=y[S+re],oe=ae>>8&255,ce=16711935&(ce=(ce=16711935&ae)+((oe<<16)+oe));W[Z+re]=(4278255360&ae)+ce>>>0}}function Nt(y,S){S.jd=y>>0&255,S.hd=y>>8&255,S.ud=y>>16&255}function xt(y,S,M,W,Z,re){var ae;for(ae=0;ae<W;++ae){var oe=S[M+ae],ce=oe>>>8,he=oe,_e=255&(_e=(_e=oe>>>16)+((y.jd<<24>>24)*(ce<<24>>24)>>>5));he=255&(he=(he=he+((y.hd<<24>>24)*(ce<<24>>24)>>>5))+((y.ud<<24>>24)*(_e<<24>>24)>>>5)),Z[re+ae]=(4278255360&oe)+(_e<<16)+he}}function Dt(y,S,M,W,Z){A[S]=function(re,ae,oe,ce,he,_e,Pe,De,Re){for(ce=Pe;ce<De;++ce)for(Pe=0;Pe<Re;++Pe)he[_e++]=Z(oe[W(re[ae++])])},A[y]=function(re,ae,oe,ce,he,_e,Pe){var De=8>>re.b,Re=re.Ea,Ke=re.K[0],Ue=re.w;if(8>De)for(re=(1<<re.b)-1,Ue=(1<<De)-1;ae<oe;++ae){var we,Se=0;for(we=0;we<Re;++we)we&re||(Se=W(ce[he++])),_e[Pe++]=Z(Ke[Se&Ue]),Se>>=De}else A["VP8LMapColor"+M](ce,he,Ke,Ue,_e,Pe,ae,oe,Re)}}function ut(y,S,M,W,Z){for(M=S+M;S<M;){var re=y[S++];W[Z++]=re>>16&255,W[Z++]=re>>8&255,W[Z++]=re>>0&255}}function vn(y,S,M,W,Z){for(M=S+M;S<M;){var re=y[S++];W[Z++]=re>>16&255,W[Z++]=re>>8&255,W[Z++]=re>>0&255,W[Z++]=re>>24&255}}function zt(y,S,M,W,Z){for(M=S+M;S<M;){var re=(ae=y[S++])>>16&240|ae>>12&15,ae=ae>>0&240|ae>>28&15;W[Z++]=re,W[Z++]=ae}}function Yn(y,S,M,W,Z){for(M=S+M;S<M;){var re=(ae=y[S++])>>16&248|ae>>13&7,ae=ae>>5&224|ae>>3&31;W[Z++]=re,W[Z++]=ae}}function Kt(y,S,M,W,Z){for(M=S+M;S<M;){var re=y[S++];W[Z++]=re>>0&255,W[Z++]=re>>8&255,W[Z++]=re>>16&255}}function An(y,S,M,W,Z,re){if(re==0)for(M=S+M;S<M;)We(W,((re=y[S++])[0]>>24|re[1]>>8&65280|re[2]<<8&16711680|re[3]<<24)>>>0),Z+=32;else r(W,Z,y,S,M)}function pi(y,S){A[S][0]=A[y+"0"],A[S][1]=A[y+"1"],A[S][2]=A[y+"2"],A[S][3]=A[y+"3"],A[S][4]=A[y+"4"],A[S][5]=A[y+"5"],A[S][6]=A[y+"6"],A[S][7]=A[y+"7"],A[S][8]=A[y+"8"],A[S][9]=A[y+"9"],A[S][10]=A[y+"10"],A[S][11]=A[y+"11"],A[S][12]=A[y+"12"],A[S][13]=A[y+"13"],A[S][14]=A[y+"0"],A[S][15]=A[y+"0"]}function on(y){return y==Af||y==Pl||y==Vs||y==vc}function pa(){this.eb=[],this.size=this.A=this.fb=0}function Cn(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Mr(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new pa,this.f.kb=new Cn,this.sd=null}function sr(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function yn(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Tt(y){return alert("todo:WebPSamplerProcessPlane"),y.T}function nn(y,S){var M=y.T,W=S.ba.f.RGBA,Z=W.eb,re=W.fb+y.ka*W.A,ae=xi[S.ba.S],oe=y.y,ce=y.O,he=y.f,_e=y.N,Pe=y.ea,De=y.W,Re=S.cc,Ke=S.dc,Ue=S.Mc,we=S.Nc,Se=y.ka,qe=y.ka+y.T,Qe=y.U,$e=Qe+1>>1;for(Se==0?ae(oe,ce,null,null,he,_e,Pe,De,he,_e,Pe,De,Z,re,null,null,Qe):(ae(S.ec,S.fc,oe,ce,Re,Ke,Ue,we,he,_e,Pe,De,Z,re-W.A,Z,re,Qe),++M);Se+2<qe;Se+=2)Re=he,Ke=_e,Ue=Pe,we=De,_e+=y.Rc,De+=y.Rc,re+=2*W.A,ae(oe,(ce+=2*y.fa)-y.fa,oe,ce,Re,Ke,Ue,we,he,_e,Pe,De,Z,re-W.A,Z,re,Qe);return ce+=y.fa,y.j+qe<y.o?(r(S.ec,S.fc,oe,ce,Qe),r(S.cc,S.dc,he,_e,$e),r(S.Mc,S.Nc,Pe,De,$e),M--):1&qe||ae(oe,ce,null,null,he,_e,Pe,De,he,_e,Pe,De,Z,re+W.A,null,null,Qe),M}function Si(y,S,M){var W=y.F,Z=[y.J];if(W!=null){var re=y.U,ae=S.ba.S,oe=ae==Au||ae==Vs;S=S.ba.f.RGBA;var ce=[0],he=y.ka;ce[0]=y.T,y.Kb&&(he==0?--ce[0]:(--he,Z[0]-=y.width),y.j+y.ka+y.T==y.o&&(ce[0]=y.o-y.j-he));var _e=S.eb;he=S.fb+he*S.A,y=un(W,Z[0],y.width,re,ce,_e,he+(oe?0:3),S.A),e(M==ce),y&&on(ae)&&Ha(_e,he,oe,re,ce,S.A)}return 0}function Mn(y){var S=y.ma,M=S.ba.S,W=11>M,Z=M==mc||M==bf||M==Au||M==Us||M==12||on(M);if(S.memory=null,S.Ib=null,S.Jb=null,S.Nd=null,!bl(S.Oa,y,Z?11:12))return 0;if(Z&&on(M)&&tt(),y.da)alert("todo:use_scaling");else{if(W){if(S.Ib=Tt,y.Kb){if(M=y.U+1>>1,S.memory=a(y.U+2*M),S.memory==null)return 0;S.ec=S.memory,S.fc=0,S.cc=S.ec,S.dc=S.fc+y.U,S.Mc=S.cc,S.Nc=S.dc+M,S.Ib=nn,tt()}}else alert("todo:EmitYUV");Z&&(S.Jb=Si,W&&Ie())}if(W&&!O0){for(y=0;256>y;++y)qm[y]=89858*(y-128)+oi>>ms,Cf[y]=-22014*(y-128)+oi,Bd[y]=-45773*(y-128),si[y]=113618*(y-128)+oi>>ms;for(y=Ml;y<Eh;++y)S=76283*(y-16)+oi>>ms,Tf[y-Ml]=Fn(S,255),jd[y-Ml]=Fn(S+8>>4,15);O0=1}return 1}function pr(y){var S=y.ma,M=y.U,W=y.T;return e(!(1&y.ka)),0>=M||0>=W?0:(M=S.Ib(y,S),S.Jb!=null&&S.Jb(y,S,M),S.Dc+=M,1)}function Ua(y){y.ma.memory=null}function vt(y,S,M,W){return $(y,8)!=47?0:(S[0]=$(y,14)+1,M[0]=$(y,14)+1,W[0]=$(y,1),$(y,3)!=0?0:!y.h)}function Wn(y,S){if(4>y)return y+1;var M=y-2>>1;return(2+(1&y)<<M)+$(S,M)+1}function Gn(y,S){return 120<S?S-120:1<=(M=((M=qs[S-1])>>4)*y+(8-(15&M)))?M:1;var M}function gr(y,S,M){var W=Q(M),Z=y[S+=255&W].g-8;return 0<Z&&(ie(M,M.u+8),W=Q(M),S+=y[S].value,S+=W&(1<<Z)-1),ie(M,M.u+y[S].g),y[S].value}function Er(y,S,M){return M.g+=y.g,M.value+=y.value<<S>>>0,e(8>=M.g),y.g}function Nr(y,S,M){var W=y.xc;return e((S=W==0?0:y.vc[y.md*(M>>W)+(S>>W)])<y.Wb),y.Ya[S]}function Gr(y,S,M,W){var Z=y.ab,re=y.c*S,ae=y.C;S=ae+S;var oe=M,ce=W;for(W=y.Ta,M=y.Ua;0<Z--;){var he=y.gc[Z],_e=ae,Pe=S,De=oe,Re=ce,Ke=(ce=W,oe=M,he.Ea);switch(e(_e<Pe),e(Pe<=he.nc),he.hc){case 2:vh(De,Re,(Pe-_e)*Ke,ce,oe);break;case 0:var Ue=_e,we=Pe,Se=ce,qe=oe,Qe=(dt=he).Ea;Ue==0&&(kd(De,Re,null,null,1,Se,qe),_t(De,Re+1,0,0,Qe-1,Se,qe+1),Re+=Qe,qe+=Qe,++Ue);for(var $e=1<<dt.b,yt=$e-1,ft=lt(Qe,dt.b),Ot=dt.K,dt=dt.w+(Ue>>dt.b)*ft;Ue<we;){var Tn=Ot,Un=dt,sn=1;for(_f(De,Re,Se,qe-Qe,1,Se,qe);sn<Qe;){var rn=(sn&~yt)+$e;rn>Qe&&(rn=Qe),(0,Bs[Tn[Un++]>>8&15])(De,Re+ +sn,Se,qe+sn-Qe,rn-sn,Se,qe+sn),sn=rn}Re+=Qe,qe+=Qe,++Ue&yt||(dt+=ft)}Pe!=he.nc&&r(ce,oe-Ke,ce,oe+(Pe-_e-1)*Ke,Ke);break;case 1:for(Ke=De,we=Re,Qe=(De=he.Ea)-(qe=De&~(Se=(Re=1<<he.b)-1)),Ue=lt(De,he.b),$e=he.K,he=he.w+(_e>>he.b)*Ue;_e<Pe;){for(yt=$e,ft=he,Ot=new at,dt=we+qe,Tn=we+De;we<dt;)Nt(yt[ft++],Ot),Sl(Ot,Ke,we,Re,ce,oe),we+=Re,oe+=Re;we<Tn&&(Nt(yt[ft++],Ot),Sl(Ot,Ke,we,Qe,ce,oe),we+=Qe,oe+=Qe),++_e&Se||(he+=Ue)}break;case 3:if(De==ce&&Re==oe&&0<he.b){for(we=ce,De=Ke=oe+(Pe-_e)*Ke-(qe=(Pe-_e)*lt(he.Ea,he.b)),Re=ce,Se=oe,Ue=[],qe=(Qe=qe)-1;0<=qe;--qe)Ue[qe]=Re[Se+qe];for(qe=Qe-1;0<=qe;--qe)we[De+qe]=Ue[qe];so(he,_e,Pe,ce,Ke,ce,oe)}else so(he,_e,Pe,De,Re,ce,oe)}oe=W,ce=M}ce!=M&&r(W,M,oe,ce,re)}function Ts(y,S){var M=y.V,W=y.Ba+y.c*y.C,Z=S-y.C;if(e(S<=y.l.o),e(16>=Z),0<Z){var re=y.l,ae=y.Ta,oe=y.Ua,ce=re.width;if(Gr(y,Z,M,W),Z=oe=[oe],e((M=y.C)<(W=S)),e(re.v<re.va),W>re.o&&(W=re.o),M<re.j){var he=re.j-M;M=re.j,Z[0]+=he*ce}if(M>=W?M=0:(Z[0]+=4*re.v,re.ka=M-re.j,re.U=re.va-re.v,re.T=W-M,M=1),M){if(oe=oe[0],11>(M=y.ca).S){var _e=M.f.RGBA,Pe=(W=M.S,Z=re.U,re=re.T,he=_e.eb,_e.A),De=re;for(_e=_e.fb+y.Ma*_e.A;0<De--;){var Re=ae,Ke=oe,Ue=Z,we=he,Se=_e;switch(W){case qi:ta(Re,Ke,Ue,we,Se);break;case mc:Ri(Re,Ke,Ue,we,Se);break;case Af:Ri(Re,Ke,Ue,we,Se),Ha(we,Se,0,Ue,1,0);break;case hs:Mo(Re,Ke,Ue,we,Se);break;case bf:An(Re,Ke,Ue,we,Se,1);break;case Pl:An(Re,Ke,Ue,we,Se,1),Ha(we,Se,0,Ue,1,0);break;case Au:An(Re,Ke,Ue,we,Se,0);break;case Vs:An(Re,Ke,Ue,we,Se,0),Ha(we,Se,1,Ue,1,0);break;case Us:Cl(Re,Ke,Ue,we,Se);break;case vc:Cl(Re,Ke,Ue,we,Se),ln(we,Se,Ue,1,0);break;case xh:ba(Re,Ke,Ue,we,Se);break;default:e(0)}oe+=ce,_e+=Pe}y.Ma+=re}else alert("todo:EmitRescaledRowsYUVA");e(y.Ma<=M.height)}}y.C=S,e(y.C<=y.i)}function Ji(y){var S;if(0<y.ua)return 0;for(S=0;S<y.Wb;++S){var M=y.Ya[S].G,W=y.Ya[S].H;if(0<M[1][W[1]+0].g||0<M[2][W[2]+0].g||0<M[3][W[3]+0].g)return 0}return 1}function gi(y,S,M,W,Z,re){if(y.Z!=0){var ae=y.qd,oe=y.rd;for(e(ps[y.Z]!=null);S<M;++S)ps[y.Z](ae,oe,W,Z,W,Z,re),ae=W,oe=Z,Z+=re;y.qd=ae,y.rd=oe}}function ti(y,S){var M=y.l.ma,W=M.Z==0||M.Z==1?y.l.j:y.C;if(W=y.C<W?W:y.C,e(S<=y.l.o),S>W){var Z=y.l.width,re=M.ca,ae=M.tb+Z*W,oe=y.V,ce=y.Ba+y.c*W,he=y.gc;e(y.ab==1),e(he[0].hc==3),El(he[0],W,S,oe,ce,re,ae),gi(M,W,S,re,ae,Z)}y.C=y.Ma=S}function $r(y,S,M,W,Z,re,ae){var oe=y.$/W,ce=y.$%W,he=y.m,_e=y.s,Pe=M+y.$,De=Pe;Z=M+W*Z;var Re=M+W*re,Ke=280+_e.ua,Ue=y.Pb?oe:16777216,we=0<_e.ua?_e.Wa:null,Se=_e.wc,qe=Pe<Re?Nr(_e,ce,oe):null;e(y.C<re),e(Re<=Z);var Qe=!1;e:for(;;){for(;Qe||Pe<Re;){var $e=0;if(oe>=Ue){var yt=Pe-M;e((Ue=y).Pb),Ue.wd=Ue.m,Ue.xd=yt,0<Ue.s.ua&&Be(Ue.s.Wa,Ue.s.vb),Ue=oe+R0}if(ce&Se||(qe=Nr(_e,ce,oe)),e(qe!=null),qe.Qb&&(S[Pe]=qe.qb,Qe=!0),!Qe)if(de(he),qe.jc){$e=he,yt=S;var ft=Pe,Ot=qe.pd[Q($e)&ii-1];e(qe.jc),256>Ot.g?(ie($e,$e.u+Ot.g),yt[ft]=Ot.value,$e=0):(ie($e,$e.u+Ot.g-256),e(256<=Ot.value),$e=Ot.value),$e==0&&(Qe=!0)}else $e=gr(qe.G[0],qe.H[0],he);if(he.h)break;if(Qe||256>$e){if(!Qe)if(qe.nd)S[Pe]=(qe.qb|$e<<8)>>>0;else{if(de(he),Qe=gr(qe.G[1],qe.H[1],he),de(he),yt=gr(qe.G[2],qe.H[2],he),ft=gr(qe.G[3],qe.H[3],he),he.h)break;S[Pe]=(ft<<24|Qe<<16|$e<<8|yt)>>>0}if(Qe=!1,++Pe,++ce>=W&&(ce=0,++oe,ae!=null&&oe<=re&&!(oe%16)&&ae(y,oe),we!=null))for(;De<Pe;)$e=S[De++],we.X[(506832829*$e&4294967295)>>>we.Mb]=$e}else if(280>$e){if($e=Wn($e-256,he),yt=gr(qe.G[4],qe.H[4],he),de(he),yt=Gn(W,yt=Wn(yt,he)),he.h)break;if(Pe-M<yt||Z-Pe<$e)break e;for(ft=0;ft<$e;++ft)S[Pe+ft]=S[Pe+ft-yt];for(Pe+=$e,ce+=$e;ce>=W;)ce-=W,++oe,ae!=null&&oe<=re&&!(oe%16)&&ae(y,oe);if(e(Pe<=Z),ce&Se&&(qe=Nr(_e,ce,oe)),we!=null)for(;De<Pe;)$e=S[De++],we.X[(506832829*$e&4294967295)>>>we.Mb]=$e}else{if(!($e<Ke))break e;for(Qe=$e-280,e(we!=null);De<Pe;)$e=S[De++],we.X[(506832829*$e&4294967295)>>>we.Mb]=$e;$e=Pe,e(!(Qe>>>(yt=we).Xa)),S[$e]=yt.X[Qe],Qe=!0}Qe||e(he.h==te(he))}if(y.Pb&&he.h&&Pe<Z)e(y.m.h),y.a=5,y.m=y.wd,y.$=y.xd,0<y.s.ua&&Be(y.s.vb,y.s.Wa);else{if(he.h)break e;ae!=null&&ae(y,oe>re?re:oe),y.a=0,y.$=Pe-M}return 1}return y.a=3,0}function ni(y){e(y!=null),y.vc=null,y.yc=null,y.Ya=null;var S=y.Wa;S!=null&&(S.X=null),y.vb=null,e(y!=null)}function lr(){var y=new fc;return y==null?null:(y.a=0,y.xb=yc,pi("Predictor","VP8LPredictors"),pi("Predictor","VP8LPredictors_C"),pi("PredictorAdd","VP8LPredictorsAdd"),pi("PredictorAdd","VP8LPredictorsAdd_C"),vh=bt,Sl=xt,ta=ut,Ri=vn,Cl=zt,ba=Yn,Mo=Kt,A.VP8LMapColor32b=vi,A.VP8LMapColor8b=wf,y)}function Bn(y,S,M,W,Z){var re=1,ae=[y],oe=[S],ce=W.m,he=W.s,_e=null,Pe=0;e:for(;;){if(M)for(;re&&$(ce,1);){var De=ae,Re=oe,Ke=W,Ue=1,we=Ke.m,Se=Ke.gc[Ke.ab],qe=$(we,2);if(Ke.Oc&1<<qe)re=0;else{switch(Ke.Oc|=1<<qe,Se.hc=qe,Se.Ea=De[0],Se.nc=Re[0],Se.K=[null],++Ke.ab,e(4>=Ke.ab),qe){case 0:case 1:Se.b=$(we,3)+2,Ue=Bn(lt(Se.Ea,Se.b),lt(Se.nc,Se.b),0,Ke,Se.K),Se.K=Se.K[0];break;case 3:var Qe,$e=$(we,8)+1,yt=16<$e?0:4<$e?1:2<$e?2:3;if(De[0]=lt(Se.Ea,yt),Se.b=yt,Qe=Ue=Bn($e,1,0,Ke,Se.K)){var ft,Ot=$e,dt=Se,Tn=1<<(8>>dt.b),Un=a(Tn);if(Un==null)Qe=0;else{var sn=dt.K[0],rn=dt.w;for(Un[0]=dt.K[0][0],ft=1;ft<1*Ot;++ft)Un[ft]=Xe(sn[rn+ft],Un[ft-1]);for(;ft<4*Tn;++ft)Un[ft]=0;dt.K[0]=null,dt.K[0]=Un,Qe=1}}Ue=Qe;break;case 2:break;default:e(0)}re=Ue}}if(ae=ae[0],oe=oe[0],re&&$(ce,1)&&!(re=1<=(Pe=$(ce,4))&&11>=Pe)){W.a=3;break e}var Qn;if(Qn=re)t:{var Vn,Zt,tr,Lt=W,Wt=ae,Sn=oe,In=Pe,_i=M,li=Lt.m,Fr=Lt.s,Ur=[null],Qr=1,fo=0,zn=Su[In];n:for(;;){if(_i&&$(li,1)){var Zr=$(li,3)+2,Fo=lt(Wt,Zr),Bl=lt(Sn,Zr),Iu=Fo*Bl;if(!Bn(Fo,Bl,0,Lt,Ur))break n;for(Ur=Ur[0],Fr.xc=Zr,Vn=0;Vn<Iu;++Vn){var jl=Ur[Vn]>>8&65535;Ur[Vn]=jl,jl>=Qr&&(Qr=jl+1)}}if(li.h)break n;for(Zt=0;5>Zt;++Zt){var xr=Wa[Zt];!Zt&&0<In&&(xr+=1<<In),fo<xr&&(fo=xr)}var If=o(Qr*zn,L),Sh=Qr,ra=o(Sh,H);if(ra==null)var Sr=null;else e(65536>=Sh),Sr=ra;var Ru=a(fo);if(Sr==null||Ru==null||If==null){Lt.a=1;break n}var Fl=If;for(Vn=tr=0;Vn<Qr;++Vn){var Ea=Sr[Vn],Ul=Ea.G,Sa=Ea.H,Rf=0,_c=1,Ch=0;for(Zt=0;5>Zt;++Zt){xr=Wa[Zt],Ul[Zt]=Fl,Sa[Zt]=tr,!Zt&&0<In&&(xr+=1<<In);i:{var Nf,Th=xr,Df=Lt,wc=Ru,k0=Fl,M0=tr,Of=0,$s=Df.m,Wm=$($s,1);if(i(wc,0,0,Th),Wm){var B0=$($s,1)+1,j0=$($s,1),Fd=$($s,j0==0?1:8);wc[Fd]=1,B0==2&&(wc[Fd=$($s,8)]=1);var bc=1}else{var Ud=a(19),Vd=$($s,4)+4;if(19<Vd){Df.a=3;var Pf=0;break i}for(Nf=0;Nf<Vd;++Nf)Ud[zs[Nf]]=$($s,3);var Ih=void 0,Ac=void 0,F0=Df,U0=Ud,Xs=Th,Lf=wc,Rh=0,Uo=F0.m,Ec=8,zd=o(128,L);r:for(;R(zd,0,7,U0,19);){if($(Uo,1)){var V0=2+2*$(Uo,3);if((Ih=2+$(Uo,V0))>Xs)break r}else Ih=Xs;for(Ac=0;Ac<Xs&&Ih--;){de(Uo);var qd=zd[0+(127&Q(Uo))];ie(Uo,Uo.u+qd.g);var Nu=qd.value;if(16>Nu)Lf[Ac++]=Nu,Nu!=0&&(Ec=Nu);else{var z0=Nu==16,Hd=Nu-16,Wd=co[Hd],Gd=$(Uo,_h[Hd])+Wd;if(Ac+Gd>Xs)break r;for(var q0=z0?Ec:0;0<Gd--;)Lf[Ac++]=q0}}Rh=1;break r}Rh||(F0.a=3),bc=Rh}(bc=bc&&!$s.h)&&(Of=R(k0,M0,8,wc,Th)),bc&&Of!=0?Pf=Of:(Df.a=3,Pf=0)}if(Pf==0)break n;if(_c&&Eu[Zt]==1&&(_c=Fl[tr].g==0),Rf+=Fl[tr].g,tr+=Pf,3>=Zt){var Du,Nh=Ru[0];for(Du=1;Du<xr;++Du)Ru[Du]>Nh&&(Nh=Ru[Du]);Ch+=Nh}}if(Ea.nd=_c,Ea.Qb=0,_c&&(Ea.qb=(Ul[3][Sa[3]+0].value<<24|Ul[1][Sa[1]+0].value<<16|Ul[2][Sa[2]+0].value)>>>0,Rf==0&&256>Ul[0][Sa[0]+0].value&&(Ea.Qb=1,Ea.qb+=Ul[0][Sa[0]+0].value<<8)),Ea.jc=!Ea.Qb&&6>Ch,Ea.jc){var kf,Ys=Ea;for(kf=0;kf<ii;++kf){var vs=kf,Ks=Ys.pd[vs],Mf=Ys.G[0][Ys.H[0]+vs];256<=Mf.value?(Ks.g=Mf.g+256,Ks.value=Mf.value):(Ks.g=0,Ks.value=0,vs>>=Er(Mf,8,Ks),vs>>=Er(Ys.G[1][Ys.H[1]+vs],16,Ks),vs>>=Er(Ys.G[2][Ys.H[2]+vs],0,Ks),Er(Ys.G[3][Ys.H[3]+vs],24,Ks))}}}Fr.vc=Ur,Fr.Wb=Qr,Fr.Ya=Sr,Fr.yc=If,Qn=1;break t}Qn=0}if(!(re=Qn)){W.a=3;break e}if(0<Pe){if(he.ua=1<<Pe,!wt(he.Wa,Pe)){W.a=1,re=0;break e}}else he.ua=0;var Bf=W,$d=ae,H0=oe,Xd=Bf.s,Yd=Xd.xc;if(Bf.c=$d,Bf.i=H0,Xd.md=lt($d,Yd),Xd.wc=Yd==0?-1:(1<<Yd)-1,M){W.xb=D0;break e}if((_e=a(ae*oe))==null){W.a=1,re=0;break e}re=(re=$r(W,_e,0,ae,oe,oe,null))&&!ce.h;break e}return re?(Z!=null?Z[0]=_e:(e(_e==null),e(M)),W.$=0,M||ni(he)):ni(he),re}function So(y,S){var M=y.c*y.i,W=M+S+16*S;return e(y.c<=S),y.V=a(W),y.V==null?(y.Ta=null,y.Ua=0,y.a=1,0):(y.Ta=y.V,y.Ua=y.Ba+M+S,1)}function Co(y,S){var M=y.C,W=S-M,Z=y.V,re=y.Ba+y.c*M;for(e(S<=y.l.o);0<W;){var ae=16<W?16:W,oe=y.l.ma,ce=y.l.width,he=ce*ae,_e=oe.ca,Pe=oe.tb+ce*M,De=y.Ta,Re=y.Ua;Gr(y,ae,Z,re),cr(De,Re,_e,Pe,he),gi(oe,M,M+ae,_e,Pe,ce),W-=ae,Z+=ae*y.c,M+=ae}e(M==S),y.C=y.Ma=S}function ji(){this.ub=this.yd=this.td=this.Rb=0}function ga(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Is(){this.Fb=this.Bb=this.Cb=0,this.Zb=a(4),this.Lb=a(4)}function lu(){this.Yb=function(){var y=[];return function S(M,W,Z){for(var re=Z[W],ae=0;ae<re&&(M.push(Z.length>W+1?[]:0),!(Z.length<W+1));ae++)S(M[ae],W+1,Z)}(y,0,[3,11]),y}()}function Rs(){this.jb=a(3),this.Wc=s([4,8],lu),this.Xc=s([4,17],lu)}function ac(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new a(4),this.od=new a(4)}function Va(){this.ld=this.La=this.dd=this.tc=0}function za(){this.Na=this.la=0}function ri(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function To(){this.ad=a(384),this.Za=0,this.Ob=a(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function oc(){this.uc=this.M=this.Nb=0,this.wa=Array(new Va),this.Y=0,this.ya=Array(new To),this.aa=0,this.l=new Io}function Za(){this.y=a(16),this.f=a(8),this.ea=a(8)}function pl(){this.cb=this.a=0,this.sc="",this.m=new ve,this.Od=new ji,this.Kc=new ga,this.ed=new ac,this.Qa=new Is,this.Ic=this.$c=this.Aa=0,this.D=new oc,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=o(8,ve),this.ia=0,this.pb=o(4,ri),this.Pa=new Rs,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Za),this.Hd=0,this.rb=Array(new za),this.sb=0,this.wa=Array(new Va),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new To),this.L=this.aa=0,this.gd=s([4,2],Va),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Io(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function uu(){var y=new pl;return y!=null&&(y.a=0,y.sc="OK",y.cb=0,y.Xb=0,ai||(ai=sc)),y}function ur(y,S,M){return y.a==0&&(y.a=S,y.sc=M,y.cb=0),0}function mi(y,S,M){return 3<=M&&y[S+0]==157&&y[S+1]==1&&y[S+2]==42}function gl(y,S){if(y==null)return 0;if(y.a=0,y.sc="OK",S==null)return ur(y,2,"null VP8Io passed to VP8GetHeaders()");var M=S.data,W=S.w,Z=S.ha;if(4>Z)return ur(y,7,"Truncated header.");var re=M[W+0]|M[W+1]<<8|M[W+2]<<16,ae=y.Od;if(ae.Rb=!(1&re),ae.td=re>>1&7,ae.yd=re>>4&1,ae.ub=re>>5,3<ae.td)return ur(y,3,"Incorrect keyframe parameters.");if(!ae.yd)return ur(y,4,"Frame not displayable.");W+=3,Z-=3;var oe=y.Kc;if(ae.Rb){if(7>Z)return ur(y,7,"cannot parse picture header");if(!mi(M,W,Z))return ur(y,3,"Bad code word");oe.c=16383&(M[W+4]<<8|M[W+3]),oe.Td=M[W+4]>>6,oe.i=16383&(M[W+6]<<8|M[W+5]),oe.Ud=M[W+6]>>6,W+=7,Z-=7,y.za=oe.c+15>>4,y.Ub=oe.i+15>>4,S.width=oe.c,S.height=oe.i,S.Da=0,S.j=0,S.v=0,S.va=S.width,S.o=S.height,S.da=0,S.ib=S.width,S.hb=S.height,S.U=S.width,S.T=S.height,i((re=y.Pa).jb,0,255,re.jb.length),e((re=y.Qa)!=null),re.Cb=0,re.Bb=0,re.Fb=1,i(re.Zb,0,0,re.Zb.length),i(re.Lb,0,0,re.Lb)}if(ae.ub>Z)return ur(y,7,"bad partition length");ne(re=y.m,M,W,ae.ub),W+=ae.ub,Z-=ae.ub,ae.Rb&&(oe.Ld=be(re),oe.Kd=be(re)),oe=y.Qa;var ce,he=y.Pa;if(e(re!=null),e(oe!=null),oe.Cb=be(re),oe.Cb){if(oe.Bb=be(re),be(re)){for(oe.Fb=be(re),ce=0;4>ce;++ce)oe.Zb[ce]=be(re)?z(re,7):0;for(ce=0;4>ce;++ce)oe.Lb[ce]=be(re)?z(re,6):0}if(oe.Bb)for(ce=0;3>ce;++ce)he.jb[ce]=be(re)?U(re,8):255}else oe.Bb=0;if(re.Ka)return ur(y,3,"cannot parse segment header");if((oe=y.ed).zd=be(re),oe.Tb=U(re,6),oe.wb=U(re,3),oe.Pc=be(re),oe.Pc&&be(re)){for(he=0;4>he;++he)be(re)&&(oe.vd[he]=z(re,6));for(he=0;4>he;++he)be(re)&&(oe.od[he]=z(re,6))}if(y.L=oe.Tb==0?0:oe.zd?1:2,re.Ka)return ur(y,3,"cannot parse filter header");var _e=Z;if(Z=ce=W,W=ce+_e,oe=_e,y.Xb=(1<<U(y.m,2))-1,_e<3*(he=y.Xb))M=7;else{for(ce+=3*he,oe-=3*he,_e=0;_e<he;++_e){var Pe=M[Z+0]|M[Z+1]<<8|M[Z+2]<<16;Pe>oe&&(Pe=oe),ne(y.Jc[+_e],M,ce,Pe),ce+=Pe,oe-=Pe,Z+=3}ne(y.Jc[+he],M,ce,oe),M=ce<W?0:5}if(M!=0)return ur(y,M,"cannot parse partitions");for(M=U(ce=y.m,7),Z=be(ce)?z(ce,4):0,W=be(ce)?z(ce,4):0,oe=be(ce)?z(ce,4):0,he=be(ce)?z(ce,4):0,ce=be(ce)?z(ce,4):0,_e=y.Qa,Pe=0;4>Pe;++Pe){if(_e.Cb){var De=_e.Zb[Pe];_e.Fb||(De+=M)}else{if(0<Pe){y.pb[Pe]=y.pb[0];continue}De=M}var Re=y.pb[Pe];Re.Sc[0]=Ef[Fn(De+Z,127)],Re.Sc[1]=Sf[Fn(De+0,127)],Re.Eb[0]=2*Ef[Fn(De+W,127)],Re.Eb[1]=101581*Sf[Fn(De+oe,127)]>>16,8>Re.Eb[1]&&(Re.Eb[1]=8),Re.Qc[0]=Ef[Fn(De+he,117)],Re.Qc[1]=Sf[Fn(De+ce,127)],Re.lc=De+ce}if(!ae.Rb)return ur(y,4,"Not a key frame.");for(be(re),ae=y.Pa,M=0;4>M;++M){for(Z=0;8>Z;++Z)for(W=0;3>W;++W)for(oe=0;11>oe;++oe)he=Te(re,Cu[M][Z][W][oe])?U(re,8):ds[M][Z][W][oe],ae.Wc[M][Z].Yb[W][oe]=he;for(Z=0;17>Z;++Z)ae.Xc[M][Z]=ae.Wc[M][N0[Z]]}return y.kc=be(re),y.kc&&(y.Bd=U(re,8)),y.cb=1}function sc(y,S,M,W,Z,re,ae){var oe=S[Z].Yb[M];for(M=0;16>Z;++Z){if(!Te(y,oe[M+0]))return Z;for(;!Te(y,oe[M+1]);)if(oe=S[++Z].Yb[0],M=0,Z==16)return 16;var ce=S[Z+1].Yb;if(Te(y,oe[M+2])){var he=y,_e=0;if(Te(he,(De=oe)[(Pe=M)+3]))if(Te(he,De[Pe+6])){for(oe=0,Pe=2*(_e=Te(he,De[Pe+8]))+(De=Te(he,De[Pe+9+_e])),_e=0,De=Pr[Pe];De[oe];++oe)_e+=_e+Te(he,De[oe]);_e+=3+(8<<Pe)}else Te(he,De[Pe+7])?(_e=7+2*Te(he,165),_e+=Te(he,145)):_e=5+Te(he,159);else _e=Te(he,De[Pe+4])?3+Te(he,De[Pe+5]):2;oe=ce[2]}else _e=1,oe=ce[1];ce=ae+Pn[Z],0>(he=y).b&&Ae(he);var Pe,De=he.b,Re=(Pe=he.Ca>>1)-(he.I>>De)>>31;--he.b,he.Ca+=Re,he.Ca|=1,he.I-=(Pe+1&Re)<<De,re[ce]=((_e^Re)-Re)*W[(0<Z)+0]}return 16}function Zo(y){var S=y.rb[y.sb-1];S.la=0,S.Na=0,i(y.zc,0,0,y.zc.length),y.ja=0}function cu(y,S){if(y==null)return 0;if(S==null)return ur(y,2,"NULL VP8Io parameter in VP8Decode().");if(!y.cb&&!gl(y,S))return 0;if(e(y.cb),S.ac==null||S.ac(S)){S.ob&&(y.L=0);var M=Gs[y.L];if(y.L==2?(y.yb=0,y.zb=0):(y.yb=S.v-M>>4,y.zb=S.j-M>>4,0>y.yb&&(y.yb=0),0>y.zb&&(y.zb=0)),y.Va=S.o+15+M>>4,y.Hb=S.va+15+M>>4,y.Hb>y.za&&(y.Hb=y.za),y.Va>y.Ub&&(y.Va=y.Ub),0<y.L){var W=y.ed;for(M=0;4>M;++M){var Z;if(y.Qa.Cb){var re=y.Qa.Lb[M];y.Qa.Fb||(re+=W.Tb)}else re=W.Tb;for(Z=0;1>=Z;++Z){var ae=y.gd[M][Z],oe=re;if(W.Pc&&(oe+=W.vd[0],Z&&(oe+=W.od[0])),0<(oe=0>oe?0:63<oe?63:oe)){var ce=oe;0<W.wb&&(ce=4<W.wb?ce>>2:ce>>1)>9-W.wb&&(ce=9-W.wb),1>ce&&(ce=1),ae.dd=ce,ae.tc=2*oe+ce,ae.ld=40<=oe?2:15<=oe?1:0}else ae.tc=0;ae.La=Z}}}M=0}else ur(y,6,"Frame setup failed"),M=y.a;if(M=M==0){if(M){y.$c=0,0<y.Aa||(y.Ic=P0);e:{M=y.Ic,W=4*(ce=y.za);var he=32*ce,_e=ce+1,Pe=0<y.L?ce*(0<y.Aa?2:1):0,De=(y.Aa==2?2:1)*ce;if((ae=W+832+(Z=3*(16*M+Gs[y.L])/2*he)+(re=y.Fa!=null&&0<y.Fa.length?y.Kc.c*y.Kc.i:0))!=ae)M=0;else{if(ae>y.Vb){if(y.Vb=0,y.Ec=a(ae),y.Fc=0,y.Ec==null){M=ur(y,1,"no memory during frame initialization.");break e}y.Vb=ae}ae=y.Ec,oe=y.Fc,y.Ac=ae,y.Bc=oe,oe+=W,y.Gd=o(he,Za),y.Hd=0,y.rb=o(_e+1,za),y.sb=1,y.wa=Pe?o(Pe,Va):null,y.Y=0,y.D.Nb=0,y.D.wa=y.wa,y.D.Y=y.Y,0<y.Aa&&(y.D.Y+=ce),e(!0),y.oc=ae,y.pc=oe,oe+=832,y.ya=o(De,To),y.aa=0,y.D.ya=y.ya,y.D.aa=y.aa,y.Aa==2&&(y.D.aa+=ce),y.R=16*ce,y.B=8*ce,ce=(he=Gs[y.L])*y.R,he=he/2*y.B,y.sa=ae,y.ta=oe+ce,y.qa=y.sa,y.ra=y.ta+16*M*y.R+he,y.Ha=y.qa,y.Ia=y.ra+8*M*y.B+he,y.$c=0,oe+=Z,y.mb=re?ae:null,y.nb=re?oe:null,e(oe+re<=y.Fc+y.Vb),Zo(y),i(y.Ac,y.Bc,0,W),M=1}}if(M){if(S.ka=0,S.y=y.sa,S.O=y.ta,S.f=y.qa,S.N=y.ra,S.ea=y.Ha,S.Vd=y.Ia,S.fa=y.R,S.Rc=y.B,S.F=null,S.J=0,!Fs){for(M=-255;255>=M;++M)jr[255+M]=0>M?-M:M;for(M=-1020;1020>=M;++M)lo[1020+M]=-128>M?-128:127<M?127:M;for(M=-112;112>=M;++M)Dl[112+M]=-16>M?-16:15<M?15:M;for(M=-255;510>=M;++M)Ol[255+M]=0>M?0:255<M?255:M;Fs=1}cs=ma,Bo=es,jo=Ja,Kr=jn,Aa=ts,Dr=Jo,xu=as,fs=Lo,pc=xl,Tl=gu,Il=yl,Rl=Os,_u=Ps,gc=os,Nl=qa,js=Vi,wu=Yr,Or=cc,na[0]=Fi,na[1]=lc,na[2]=no,na[3]=uc,na[4]=va,na[5]=ro,na[6]=ea,na[7]=ya,na[8]=Po,na[9]=ns,Hs[0]=eo,Hs[1]=hu,Hs[2]=No,Hs[3]=vl,Hs[4]=er,Hs[5]=Oo,Hs[6]=to,Ga[0]=io,Ga[1]=fu,Ga[2]=du,Ga[3]=xa,Ga[4]=hn,Ga[5]=Xr,Ga[6]=rs,M=1}else M=0}M&&(M=function(Re,Ke){for(Re.M=0;Re.M<Re.Va;++Re.M){var Ue,we=Re.Jc[Re.M&Re.Xb],Se=Re.m,qe=Re;for(Ue=0;Ue<qe.za;++Ue){var Qe=Se,$e=qe,yt=$e.Ac,ft=$e.Bc+4*Ue,Ot=$e.zc,dt=$e.ya[$e.aa+Ue];if($e.Qa.Bb?dt.$b=Te(Qe,$e.Pa.jb[0])?2+Te(Qe,$e.Pa.jb[2]):Te(Qe,$e.Pa.jb[1]):dt.$b=0,$e.kc&&(dt.Ad=Te(Qe,$e.Bd)),dt.Za=!Te(Qe,145)+0,dt.Za){var Tn=dt.Ob,Un=0;for($e=0;4>$e;++$e){var sn,rn=Ot[0+$e];for(sn=0;4>sn;++sn){rn=Md[yt[ft+sn]][rn];for(var Qn=Ll[Te(Qe,rn[0])];0<Qn;)Qn=Ll[2*Qn+Te(Qe,rn[Qn])];rn=-Qn,yt[ft+sn]=rn}r(Tn,Un,yt,ft,4),Un+=4,Ot[0+$e]=rn}}else rn=Te(Qe,156)?Te(Qe,128)?1:3:Te(Qe,163)?2:0,dt.Ob[0]=rn,i(yt,ft,rn,4),i(Ot,0,rn,4);dt.Dd=Te(Qe,142)?Te(Qe,114)?Te(Qe,183)?1:3:2:0}if(qe.m.Ka)return ur(Re,7,"Premature end-of-partition0 encountered.");for(;Re.ja<Re.za;++Re.ja){if(qe=we,Qe=(Se=Re).rb[Se.sb-1],yt=Se.rb[Se.sb+Se.ja],Ue=Se.ya[Se.aa+Se.ja],ft=Se.kc?Ue.Ad:0)Qe.la=yt.la=0,Ue.Za||(Qe.Na=yt.Na=0),Ue.Hc=0,Ue.Gc=0,Ue.ia=0;else{var Vn,Zt;if(Qe=yt,yt=qe,ft=Se.Pa.Xc,Ot=Se.ya[Se.aa+Se.ja],dt=Se.pb[Ot.$b],$e=Ot.ad,Tn=0,Un=Se.rb[Se.sb-1],rn=sn=0,i($e,Tn,0,384),Ot.Za)var tr=0,Lt=ft[3];else{Qn=a(16);var Wt=Qe.Na+Un.Na;if(Wt=ai(yt,ft[1],Wt,dt.Eb,0,Qn,0),Qe.Na=Un.Na=(0<Wt)+0,1<Wt)cs(Qn,0,$e,Tn);else{var Sn=Qn[0]+3>>3;for(Qn=0;256>Qn;Qn+=16)$e[Tn+Qn]=Sn}tr=1,Lt=ft[0]}var In=15&Qe.la,_i=15&Un.la;for(Qn=0;4>Qn;++Qn){var li=1&_i;for(Sn=Zt=0;4>Sn;++Sn)In=In>>1|(li=(Wt=ai(yt,Lt,Wt=li+(1&In),dt.Sc,tr,$e,Tn))>tr)<<7,Zt=Zt<<2|(3<Wt?3:1<Wt?2:$e[Tn+0]!=0),Tn+=16;In>>=4,_i=_i>>1|li<<7,sn=(sn<<8|Zt)>>>0}for(Lt=In,tr=_i>>4,Vn=0;4>Vn;Vn+=2){for(Zt=0,In=Qe.la>>4+Vn,_i=Un.la>>4+Vn,Qn=0;2>Qn;++Qn){for(li=1&_i,Sn=0;2>Sn;++Sn)Wt=li+(1&In),In=In>>1|(li=0<(Wt=ai(yt,ft[2],Wt,dt.Qc,0,$e,Tn)))<<3,Zt=Zt<<2|(3<Wt?3:1<Wt?2:$e[Tn+0]!=0),Tn+=16;In>>=2,_i=_i>>1|li<<5}rn|=Zt<<4*Vn,Lt|=In<<4<<Vn,tr|=(240&_i)<<Vn}Qe.la=Lt,Un.la=tr,Ot.Hc=sn,Ot.Gc=rn,Ot.ia=43690&rn?0:dt.ia,ft=!(sn|rn)}if(0<Se.L&&(Se.wa[Se.Y+Se.ja]=Se.gd[Ue.$b][Ue.Za],Se.wa[Se.Y+Se.ja].La|=!ft),qe.Ka)return ur(Re,7,"Premature end-of-file encountered.")}if(Zo(Re),Se=Ke,qe=1,Ue=(we=Re).D,Qe=0<we.L&&we.M>=we.zb&&we.M<=we.Va,we.Aa==0)e:{if(Ue.M=we.M,Ue.uc=Qe,_a(we,Ue),qe=1,Ue=(Zt=we.D).Nb,Qe=(rn=Gs[we.L])*we.R,yt=rn/2*we.B,Qn=16*Ue*we.R,Sn=8*Ue*we.B,ft=we.sa,Ot=we.ta-Qe+Qn,dt=we.qa,$e=we.ra-yt+Sn,Tn=we.Ha,Un=we.Ia-yt+Sn,_i=(In=Zt.M)==0,sn=In>=we.Va-1,we.Aa==2&&_a(we,Zt),Zt.uc)for(li=(Wt=we).D.M,e(Wt.D.uc),Zt=Wt.yb;Zt<Wt.Hb;++Zt){tr=Zt,Lt=li;var Fr=(Ur=(xr=Wt).D).Nb;Vn=xr.R;var Ur=Ur.wa[Ur.Y+tr],Qr=xr.sa,fo=xr.ta+16*Fr*Vn+16*tr,zn=Ur.dd,Zr=Ur.tc;if(Zr!=0)if(e(3<=Zr),xr.L==1)0<tr&&js(Qr,fo,Vn,Zr+4),Ur.La&&Or(Qr,fo,Vn,Zr),0<Lt&&Nl(Qr,fo,Vn,Zr+4),Ur.La&&wu(Qr,fo,Vn,Zr);else{var Fo=xr.B,Bl=xr.qa,Iu=xr.ra+8*Fr*Fo+8*tr,jl=xr.Ha,xr=xr.Ia+8*Fr*Fo+8*tr;Fr=Ur.ld,0<tr&&(fs(Qr,fo,Vn,Zr+4,zn,Fr),Tl(Bl,Iu,jl,xr,Fo,Zr+4,zn,Fr)),Ur.La&&(Rl(Qr,fo,Vn,Zr,zn,Fr),gc(Bl,Iu,jl,xr,Fo,Zr,zn,Fr)),0<Lt&&(xu(Qr,fo,Vn,Zr+4,zn,Fr),pc(Bl,Iu,jl,xr,Fo,Zr+4,zn,Fr)),Ur.La&&(Il(Qr,fo,Vn,Zr,zn,Fr),_u(Bl,Iu,jl,xr,Fo,Zr,zn,Fr))}}if(we.ia&&alert("todo:DitherRow"),Se.put!=null){if(Zt=16*In,In=16*(In+1),_i?(Se.y=we.sa,Se.O=we.ta+Qn,Se.f=we.qa,Se.N=we.ra+Sn,Se.ea=we.Ha,Se.W=we.Ia+Sn):(Zt-=rn,Se.y=ft,Se.O=Ot,Se.f=dt,Se.N=$e,Se.ea=Tn,Se.W=Un),sn||(In-=rn),In>Se.o&&(In=Se.o),Se.F=null,Se.J=null,we.Fa!=null&&0<we.Fa.length&&Zt<In&&(Se.J=wl(we,Se,Zt,In-Zt),Se.F=we.mb,Se.F==null&&Se.F.length==0)){qe=ur(we,3,"Could not decode alpha data.");break e}Zt<Se.j&&(rn=Se.j-Zt,Zt=Se.j,e(!(1&rn)),Se.O+=we.R*rn,Se.N+=we.B*(rn>>1),Se.W+=we.B*(rn>>1),Se.F!=null&&(Se.J+=Se.width*rn)),Zt<In&&(Se.O+=Se.v,Se.N+=Se.v>>1,Se.W+=Se.v>>1,Se.F!=null&&(Se.J+=Se.v),Se.ka=Zt-Se.j,Se.U=Se.va-Se.v,Se.T=In-Zt,qe=Se.put(Se))}Ue+1!=we.Ic||sn||(r(we.sa,we.ta-Qe,ft,Ot+16*we.R,Qe),r(we.qa,we.ra-yt,dt,$e+8*we.B,yt),r(we.Ha,we.Ia-yt,Tn,Un+8*we.B,yt))}if(!qe)return ur(Re,6,"Output aborted.")}return 1}(y,S)),S.bc!=null&&S.bc(S),M&=1}return M?(y.cb=0,M):0}function Ci(y,S,M,W,Z){Z=y[S+M+32*W]+(Z>>3),y[S+M+32*W]=-256&Z?0>Z?0:255:Z}function ml(y,S,M,W,Z,re){Ci(y,S,0,M,W+Z),Ci(y,S,1,M,W+re),Ci(y,S,2,M,W-re),Ci(y,S,3,M,W-Z)}function En(y){return(20091*y>>16)+y}function Ti(y,S,M,W){var Z,re=0,ae=a(16);for(Z=0;4>Z;++Z){var oe=y[S+0]+y[S+8],ce=y[S+0]-y[S+8],he=(35468*y[S+4]>>16)-En(y[S+12]),_e=En(y[S+4])+(35468*y[S+12]>>16);ae[re+0]=oe+_e,ae[re+1]=ce+he,ae[re+2]=ce-he,ae[re+3]=oe-_e,re+=4,S++}for(Z=re=0;4>Z;++Z)oe=(y=ae[re+0]+4)+ae[re+8],ce=y-ae[re+8],he=(35468*ae[re+4]>>16)-En(ae[re+12]),Ci(M,W,0,0,oe+(_e=En(ae[re+4])+(35468*ae[re+12]>>16))),Ci(M,W,1,0,ce+he),Ci(M,W,2,0,ce-he),Ci(M,W,3,0,oe-_e),re++,W+=32}function Jo(y,S,M,W){var Z=y[S+0]+4,re=35468*y[S+4]>>16,ae=En(y[S+4]),oe=35468*y[S+1]>>16;ml(M,W,0,Z+ae,y=En(y[S+1]),oe),ml(M,W,1,Z+re,y,oe),ml(M,W,2,Z-re,y,oe),ml(M,W,3,Z-ae,y,oe)}function es(y,S,M,W,Z){Ti(y,S,M,W),Z&&Ti(y,S+16,M,W+4)}function Ja(y,S,M,W){Bo(y,S+0,M,W,1),Bo(y,S+32,M,W+128,1)}function jn(y,S,M,W){var Z;for(y=y[S+0]+4,Z=0;4>Z;++Z)for(S=0;4>S;++S)Ci(M,W,S,Z,y)}function ts(y,S,M,W){y[S+0]&&Kr(y,S+0,M,W),y[S+16]&&Kr(y,S+16,M,W+4),y[S+32]&&Kr(y,S+32,M,W+128),y[S+48]&&Kr(y,S+48,M,W+128+4)}function ma(y,S,M,W){var Z,re=a(16);for(Z=0;4>Z;++Z){var ae=y[S+0+Z]+y[S+12+Z],oe=y[S+4+Z]+y[S+8+Z],ce=y[S+4+Z]-y[S+8+Z],he=y[S+0+Z]-y[S+12+Z];re[0+Z]=ae+oe,re[8+Z]=ae-oe,re[4+Z]=he+ce,re[12+Z]=he-ce}for(Z=0;4>Z;++Z)ae=(y=re[0+4*Z]+3)+re[3+4*Z],oe=re[1+4*Z]+re[2+4*Z],ce=re[1+4*Z]-re[2+4*Z],he=y-re[3+4*Z],M[W+0]=ae+oe>>3,M[W+16]=he+ce>>3,M[W+32]=ae-oe>>3,M[W+48]=he-ce>>3,W+=64}function Ro(y,S,M){var W,Z=S-32,re=yi,ae=255-y[Z-1];for(W=0;W<M;++W){var oe,ce=re,he=ae+y[S-1];for(oe=0;oe<M;++oe)y[S+oe]=ce[he+y[Z+oe]];S+=32}}function lc(y,S){Ro(y,S,4)}function fu(y,S){Ro(y,S,8)}function hu(y,S){Ro(y,S,16)}function No(y,S){var M;for(M=0;16>M;++M)r(y,S+32*M,y,S-32,16)}function vl(y,S){var M;for(M=16;0<M;--M)i(y,S,y[S-1],16),S+=32}function Do(y,S,M){var W;for(W=0;16>W;++W)i(S,M+32*W,y,16)}function eo(y,S){var M,W=16;for(M=0;16>M;++M)W+=y[S-1+32*M]+y[S+M-32];Do(W>>5,y,S)}function er(y,S){var M,W=8;for(M=0;16>M;++M)W+=y[S-1+32*M];Do(W>>4,y,S)}function Oo(y,S){var M,W=8;for(M=0;16>M;++M)W+=y[S+M-32];Do(W>>4,y,S)}function to(y,S){Do(128,y,S)}function Ft(y,S,M){return y+2*S+M+2>>2}function no(y,S){var M,W=S-32;for(W=new Uint8Array([Ft(y[W-1],y[W+0],y[W+1]),Ft(y[W+0],y[W+1],y[W+2]),Ft(y[W+1],y[W+2],y[W+3]),Ft(y[W+2],y[W+3],y[W+4])]),M=0;4>M;++M)r(y,S+32*M,W,0,W.length)}function uc(y,S){var M=y[S-1],W=y[S-1+32],Z=y[S-1+64],re=y[S-1+96];We(y,S+0,16843009*Ft(y[S-1-32],M,W)),We(y,S+32,16843009*Ft(M,W,Z)),We(y,S+64,16843009*Ft(W,Z,re)),We(y,S+96,16843009*Ft(Z,re,re))}function Fi(y,S){var M,W=4;for(M=0;4>M;++M)W+=y[S+M-32]+y[S-1+32*M];for(W>>=3,M=0;4>M;++M)i(y,S+32*M,W,4)}function va(y,S){var M=y[S-1+0],W=y[S-1+32],Z=y[S-1+64],re=y[S-1-32],ae=y[S+0-32],oe=y[S+1-32],ce=y[S+2-32],he=y[S+3-32];y[S+0+96]=Ft(W,Z,y[S-1+96]),y[S+1+96]=y[S+0+64]=Ft(M,W,Z),y[S+2+96]=y[S+1+64]=y[S+0+32]=Ft(re,M,W),y[S+3+96]=y[S+2+64]=y[S+1+32]=y[S+0+0]=Ft(ae,re,M),y[S+3+64]=y[S+2+32]=y[S+1+0]=Ft(oe,ae,re),y[S+3+32]=y[S+2+0]=Ft(ce,oe,ae),y[S+3+0]=Ft(he,ce,oe)}function ea(y,S){var M=y[S+1-32],W=y[S+2-32],Z=y[S+3-32],re=y[S+4-32],ae=y[S+5-32],oe=y[S+6-32],ce=y[S+7-32];y[S+0+0]=Ft(y[S+0-32],M,W),y[S+1+0]=y[S+0+32]=Ft(M,W,Z),y[S+2+0]=y[S+1+32]=y[S+0+64]=Ft(W,Z,re),y[S+3+0]=y[S+2+32]=y[S+1+64]=y[S+0+96]=Ft(Z,re,ae),y[S+3+32]=y[S+2+64]=y[S+1+96]=Ft(re,ae,oe),y[S+3+64]=y[S+2+96]=Ft(ae,oe,ce),y[S+3+96]=Ft(oe,ce,ce)}function ro(y,S){var M=y[S-1+0],W=y[S-1+32],Z=y[S-1+64],re=y[S-1-32],ae=y[S+0-32],oe=y[S+1-32],ce=y[S+2-32],he=y[S+3-32];y[S+0+0]=y[S+1+64]=re+ae+1>>1,y[S+1+0]=y[S+2+64]=ae+oe+1>>1,y[S+2+0]=y[S+3+64]=oe+ce+1>>1,y[S+3+0]=ce+he+1>>1,y[S+0+96]=Ft(Z,W,M),y[S+0+64]=Ft(W,M,re),y[S+0+32]=y[S+1+96]=Ft(M,re,ae),y[S+1+32]=y[S+2+96]=Ft(re,ae,oe),y[S+2+32]=y[S+3+96]=Ft(ae,oe,ce),y[S+3+32]=Ft(oe,ce,he)}function ya(y,S){var M=y[S+0-32],W=y[S+1-32],Z=y[S+2-32],re=y[S+3-32],ae=y[S+4-32],oe=y[S+5-32],ce=y[S+6-32],he=y[S+7-32];y[S+0+0]=M+W+1>>1,y[S+1+0]=y[S+0+64]=W+Z+1>>1,y[S+2+0]=y[S+1+64]=Z+re+1>>1,y[S+3+0]=y[S+2+64]=re+ae+1>>1,y[S+0+32]=Ft(M,W,Z),y[S+1+32]=y[S+0+96]=Ft(W,Z,re),y[S+2+32]=y[S+1+96]=Ft(Z,re,ae),y[S+3+32]=y[S+2+96]=Ft(re,ae,oe),y[S+3+64]=Ft(ae,oe,ce),y[S+3+96]=Ft(oe,ce,he)}function ns(y,S){var M=y[S-1+0],W=y[S-1+32],Z=y[S-1+64],re=y[S-1+96];y[S+0+0]=M+W+1>>1,y[S+2+0]=y[S+0+32]=W+Z+1>>1,y[S+2+32]=y[S+0+64]=Z+re+1>>1,y[S+1+0]=Ft(M,W,Z),y[S+3+0]=y[S+1+32]=Ft(W,Z,re),y[S+3+32]=y[S+1+64]=Ft(Z,re,re),y[S+3+64]=y[S+2+64]=y[S+0+96]=y[S+1+96]=y[S+2+96]=y[S+3+96]=re}function Po(y,S){var M=y[S-1+0],W=y[S-1+32],Z=y[S-1+64],re=y[S-1+96],ae=y[S-1-32],oe=y[S+0-32],ce=y[S+1-32],he=y[S+2-32];y[S+0+0]=y[S+2+32]=M+ae+1>>1,y[S+0+32]=y[S+2+64]=W+M+1>>1,y[S+0+64]=y[S+2+96]=Z+W+1>>1,y[S+0+96]=re+Z+1>>1,y[S+3+0]=Ft(oe,ce,he),y[S+2+0]=Ft(ae,oe,ce),y[S+1+0]=y[S+3+32]=Ft(M,ae,oe),y[S+1+32]=y[S+3+64]=Ft(W,M,ae),y[S+1+64]=y[S+3+96]=Ft(Z,W,M),y[S+1+96]=Ft(re,Z,W)}function du(y,S){var M;for(M=0;8>M;++M)r(y,S+32*M,y,S-32,8)}function xa(y,S){var M;for(M=0;8>M;++M)i(y,S,y[S-1],8),S+=32}function Ui(y,S,M){var W;for(W=0;8>W;++W)i(S,M+32*W,y,8)}function io(y,S){var M,W=8;for(M=0;8>M;++M)W+=y[S+M-32]+y[S-1+32*M];Ui(W>>4,y,S)}function Xr(y,S){var M,W=4;for(M=0;8>M;++M)W+=y[S+M-32];Ui(W>>3,y,S)}function hn(y,S){var M,W=4;for(M=0;8>M;++M)W+=y[S-1+32*M];Ui(W>>3,y,S)}function rs(y,S){Ui(128,y,S)}function ao(y,S,M){var W=y[S-M],Z=y[S+0],re=3*(Z-W)+yh[1020+y[S-2*M]-y[S+M]],ae=bu[112+(re+4>>3)];y[S-M]=yi[255+W+bu[112+(re+3>>3)]],y[S+0]=yi[255+Z-ae]}function pu(y,S,M,W){var Z=y[S+0],re=y[S+M];return uo[255+y[S-2*M]-y[S-M]]>W||uo[255+re-Z]>W}function Ns(y,S,M,W){return 4*uo[255+y[S-M]-y[S+0]]+uo[255+y[S-2*M]-y[S+M]]<=W}function Ds(y,S,M,W,Z){var re=y[S-3*M],ae=y[S-2*M],oe=y[S-M],ce=y[S+0],he=y[S+M],_e=y[S+2*M],Pe=y[S+3*M];return 4*uo[255+oe-ce]+uo[255+ae-he]>W?0:uo[255+y[S-4*M]-re]<=Z&&uo[255+re-ae]<=Z&&uo[255+ae-oe]<=Z&&uo[255+Pe-_e]<=Z&&uo[255+_e-he]<=Z&&uo[255+he-ce]<=Z}function qa(y,S,M,W){var Z=2*W+1;for(W=0;16>W;++W)Ns(y,S+W,M,Z)&&ao(y,S+W,M)}function Vi(y,S,M,W){var Z=2*W+1;for(W=0;16>W;++W)Ns(y,S+W*M,1,Z)&&ao(y,S+W*M,1)}function Yr(y,S,M,W){var Z;for(Z=3;0<Z;--Z)qa(y,S+=4*M,M,W)}function cc(y,S,M,W){var Z;for(Z=3;0<Z;--Z)Vi(y,S+=4,M,W)}function is(y,S,M,W,Z,re,ae,oe){for(re=2*re+1;0<Z--;){if(Ds(y,S,M,re,ae))if(pu(y,S,M,oe))ao(y,S,M);else{var ce=y,he=S,_e=M,Pe=ce[he-2*_e],De=ce[he-_e],Re=ce[he+0],Ke=ce[he+_e],Ue=ce[he+2*_e],we=27*(qe=yh[1020+3*(Re-De)+yh[1020+Pe-Ke]])+63>>7,Se=18*qe+63>>7,qe=9*qe+63>>7;ce[he-3*_e]=yi[255+ce[he-3*_e]+qe],ce[he-2*_e]=yi[255+Pe+Se],ce[he-_e]=yi[255+De+we],ce[he+0]=yi[255+Re-we],ce[he+_e]=yi[255+Ke-Se],ce[he+2*_e]=yi[255+Ue-qe]}S+=W}}function Ii(y,S,M,W,Z,re,ae,oe){for(re=2*re+1;0<Z--;){if(Ds(y,S,M,re,ae))if(pu(y,S,M,oe))ao(y,S,M);else{var ce=y,he=S,_e=M,Pe=ce[he-_e],De=ce[he+0],Re=ce[he+_e],Ke=bu[112+((Ue=3*(De-Pe))+4>>3)],Ue=bu[112+(Ue+3>>3)],we=Ke+1>>1;ce[he-2*_e]=yi[255+ce[he-2*_e]+we],ce[he-_e]=yi[255+Pe+Ue],ce[he+0]=yi[255+De-Ke],ce[he+_e]=yi[255+Re-we]}S+=W}}function as(y,S,M,W,Z,re){is(y,S,M,1,16,W,Z,re)}function Lo(y,S,M,W,Z,re){is(y,S,1,M,16,W,Z,re)}function yl(y,S,M,W,Z,re){var ae;for(ae=3;0<ae;--ae)Ii(y,S+=4*M,M,1,16,W,Z,re)}function Os(y,S,M,W,Z,re){var ae;for(ae=3;0<ae;--ae)Ii(y,S+=4,1,M,16,W,Z,re)}function xl(y,S,M,W,Z,re,ae,oe){is(y,S,Z,1,8,re,ae,oe),is(M,W,Z,1,8,re,ae,oe)}function gu(y,S,M,W,Z,re,ae,oe){is(y,S,1,Z,8,re,ae,oe),is(M,W,1,Z,8,re,ae,oe)}function Ps(y,S,M,W,Z,re,ae,oe){Ii(y,S+4*Z,Z,1,8,re,ae,oe),Ii(M,W+4*Z,Z,1,8,re,ae,oe)}function os(y,S,M,W,Z,re,ae,oe){Ii(y,S+4,1,Z,8,re,ae,oe),Ii(M,W+4,1,Z,8,re,ae,oe)}function Ls(){this.ba=new Mr,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new yn,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function _l(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function ks(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function ss(){this.ua=0,this.Wa=new me,this.vb=new me,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new H,this.yc=new L}function fc(){this.xb=this.a=0,this.l=new Io,this.ca=new Mr,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new G,this.Pb=0,this.wd=new G,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new ss,this.ab=0,this.gc=o(4,ks),this.Oc=0}function ko(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Io,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function ls(y,S,M,W,Z,re,ae){for(y=y==null?0:y[S+0],S=0;S<ae;++S)Z[re+S]=y+M[W+S]&255,y=Z[re+S]}function Ms(y,S,M,W,Z,re,ae){var oe;if(y==null)ls(null,null,M,W,Z,re,ae);else for(oe=0;oe<ae;++oe)Z[re+oe]=y[S+oe]+M[W+oe]&255}function zi(y,S,M,W,Z,re,ae){if(y==null)ls(null,null,M,W,Z,re,ae);else{var oe,ce=y[S+0],he=ce,_e=ce;for(oe=0;oe<ae;++oe)he=_e+(ce=y[S+oe])-he,_e=M[W+oe]+(-256&he?0>he?0:255:he)&255,he=ce,Z[re+oe]=_e}}function wl(y,S,M,W){var Z=S.width,re=S.o;if(e(y!=null&&S!=null),0>M||0>=W||M+W>re)return null;if(!y.Cc){if(y.ga==null){var ae;if(y.ga=new ko,(ae=y.ga==null)||(ae=S.width*S.o,e(y.Gb.length==0),y.Gb=a(ae),y.Uc=0,y.Gb==null?ae=0:(y.mb=y.Gb,y.nb=y.Uc,y.rc=null,ae=1),ae=!ae),!ae){ae=y.ga;var oe=y.Fa,ce=y.P,he=y.qc,_e=y.mb,Pe=y.nb,De=ce+1,Re=he-1,Ke=ae.l;if(e(oe!=null&&_e!=null&&S!=null),ps[0]=null,ps[1]=ls,ps[2]=Ms,ps[3]=zi,ae.ca=_e,ae.tb=Pe,ae.c=S.width,ae.i=S.height,e(0<ae.c&&0<ae.i),1>=he)S=0;else if(ae.$a=oe[ce+0]>>0&3,ae.Z=oe[ce+0]>>2&3,ae.Lc=oe[ce+0]>>4&3,ce=oe[ce+0]>>6&3,0>ae.$a||1<ae.$a||4<=ae.Z||1<ae.Lc||ce)S=0;else if(Ke.put=pr,Ke.ac=Mn,Ke.bc=Ua,Ke.ma=ae,Ke.width=S.width,Ke.height=S.height,Ke.Da=S.Da,Ke.v=S.v,Ke.va=S.va,Ke.j=S.j,Ke.o=S.o,ae.$a)e:{e(ae.$a==1),S=lr();t:for(;;){if(S==null){S=0;break e}if(e(ae!=null),ae.mc=S,S.c=ae.c,S.i=ae.i,S.l=ae.l,S.l.ma=ae,S.l.width=ae.c,S.l.height=ae.i,S.a=0,ee(S.m,oe,De,Re),!Bn(ae.c,ae.i,1,S,null)||(S.ab==1&&S.gc[0].hc==3&&Ji(S.s)?(ae.ic=1,oe=S.c*S.i,S.Ta=null,S.Ua=0,S.V=a(oe),S.Ba=0,S.V==null?(S.a=1,S=0):S=1):(ae.ic=0,S=So(S,ae.c)),!S))break t;S=1;break e}ae.mc=null,S=0}else S=Re>=ae.c*ae.i;ae=!S}if(ae)return null;y.ga.Lc!=1?y.Ga=0:W=re-M}e(y.ga!=null),e(M+W<=re);e:{if(S=(oe=y.ga).c,re=oe.l.o,oe.$a==0){if(De=y.rc,Re=y.Vc,Ke=y.Fa,ce=y.P+1+M*S,he=y.mb,_e=y.nb+M*S,e(ce<=y.P+y.qc),oe.Z!=0)for(e(ps[oe.Z]!=null),ae=0;ae<W;++ae)ps[oe.Z](De,Re,Ke,ce,he,_e,S),De=he,Re=_e,_e+=S,ce+=S;else for(ae=0;ae<W;++ae)r(he,_e,Ke,ce,S),De=he,Re=_e,_e+=S,ce+=S;y.rc=De,y.Vc=Re}else{if(e(oe.mc!=null),S=M+W,e((ae=oe.mc)!=null),e(S<=ae.i),ae.C>=S)S=1;else if(oe.ic||Ie(),oe.ic){oe=ae.V,De=ae.Ba,Re=ae.c;var Ue=ae.i,we=(Ke=1,ce=ae.$/Re,he=ae.$%Re,_e=ae.m,Pe=ae.s,ae.$),Se=Re*Ue,qe=Re*S,Qe=Pe.wc,$e=we<qe?Nr(Pe,he,ce):null;e(we<=Se),e(S<=Ue),e(Ji(Pe));t:for(;;){for(;!_e.h&&we<qe;){if(he&Qe||($e=Nr(Pe,he,ce)),e($e!=null),de(_e),256>(Ue=gr($e.G[0],$e.H[0],_e)))oe[De+we]=Ue,++we,++he>=Re&&(he=0,++ce<=S&&!(ce%16)&&ti(ae,ce));else{if(!(280>Ue)){Ke=0;break t}Ue=Wn(Ue-256,_e);var yt,ft=gr($e.G[4],$e.H[4],_e);if(de(_e),!(we>=(ft=Gn(Re,ft=Wn(ft,_e)))&&Se-we>=Ue)){Ke=0;break t}for(yt=0;yt<Ue;++yt)oe[De+we+yt]=oe[De+we+yt-ft];for(we+=Ue,he+=Ue;he>=Re;)he-=Re,++ce<=S&&!(ce%16)&&ti(ae,ce);we<qe&&he&Qe&&($e=Nr(Pe,he,ce))}e(_e.h==te(_e))}ti(ae,ce>S?S:ce);break t}!Ke||_e.h&&we<Se?(Ke=0,ae.a=_e.h?5:3):ae.$=we,S=Ke}else S=$r(ae,ae.V,ae.Ba,ae.c,ae.i,S,Co);if(!S){W=0;break e}}M+W>=re&&(y.Cc=1),W=1}if(!W)return null;if(y.Cc&&((W=y.ga)!=null&&(W.mc=null),y.ga=null,0<y.Ga))return alert("todo:WebPDequantizeLevels"),null}return y.nb+M*Z}function O(y,S,M,W,Z,re){for(;0<Z--;){var ae,oe=y,ce=S+(M?1:0),he=y,_e=S+(M?0:3);for(ae=0;ae<W;++ae){var Pe=he[_e+4*ae];Pe!=255&&(Pe*=32897,oe[ce+4*ae+0]=oe[ce+4*ae+0]*Pe>>23,oe[ce+4*ae+1]=oe[ce+4*ae+1]*Pe>>23,oe[ce+4*ae+2]=oe[ce+4*ae+2]*Pe>>23)}S+=re}}function J(y,S,M,W,Z){for(;0<W--;){var re;for(re=0;re<M;++re){var ae=y[S+2*re+0],oe=15&(he=y[S+2*re+1]),ce=4369*oe,he=(240&he|he>>4)*ce>>16;y[S+2*re+0]=(240&ae|ae>>4)*ce>>16&240|(15&ae|ae<<4)*ce>>16>>4&15,y[S+2*re+1]=240&he|oe}S+=Z}}function pe(y,S,M,W,Z,re,ae,oe){var ce,he,_e=255;for(he=0;he<Z;++he){for(ce=0;ce<W;++ce){var Pe=y[S+ce];re[ae+4*ce]=Pe,_e&=Pe}S+=M,ae+=oe}return _e!=255}function xe(y,S,M,W,Z){var re;for(re=0;re<Z;++re)M[W+re]=y[S+re]>>8}function Ie(){Ha=O,ln=J,un=pe,cr=xe}function Ve(y,S,M){A[y]=function(W,Z,re,ae,oe,ce,he,_e,Pe,De,Re,Ke,Ue,we,Se,qe,Qe){var $e,yt=Qe-1>>1,ft=oe[ce+0]|he[_e+0]<<16,Ot=Pe[De+0]|Re[Ke+0]<<16;e(W!=null);var dt=3*ft+Ot+131074>>2;for(S(W[Z+0],255&dt,dt>>16,Ue,we),re!=null&&(dt=3*Ot+ft+131074>>2,S(re[ae+0],255&dt,dt>>16,Se,qe)),$e=1;$e<=yt;++$e){var Tn=oe[ce+$e]|he[_e+$e]<<16,Un=Pe[De+$e]|Re[Ke+$e]<<16,sn=ft+Tn+Ot+Un+524296,rn=sn+2*(Tn+Ot)>>3;dt=rn+ft>>1,ft=(sn=sn+2*(ft+Un)>>3)+Tn>>1,S(W[Z+2*$e-1],255&dt,dt>>16,Ue,we+(2*$e-1)*M),S(W[Z+2*$e-0],255&ft,ft>>16,Ue,we+(2*$e-0)*M),re!=null&&(dt=sn+Ot>>1,ft=rn+Un>>1,S(re[ae+2*$e-1],255&dt,dt>>16,Se,qe+(2*$e-1)*M),S(re[ae+2*$e+0],255&ft,ft>>16,Se,qe+(2*$e+0)*M)),ft=Tn,Ot=Un}1&Qe||(dt=3*ft+Ot+131074>>2,S(W[Z+Qe-1],255&dt,dt>>16,Ue,we+(Qe-1)*M),re!=null&&(dt=3*Ot+ft+131074>>2,S(re[ae+Qe-1],255&dt,dt>>16,Se,qe+(Qe-1)*M)))}}function tt(){xi[qi]=Ws,xi[mc]=gs,xi[hs]=kl,xi[bf]=wh,xi[Au]=bh,xi[Us]=xc,xi[xh]=Ah,xi[Af]=gs,xi[Pl]=wh,xi[Vs]=bh,xi[vc]=xc}function ht(y){return y&-16384?0>y?0:255:y>>zm}function _(y,S){return ht((19077*y>>8)+(26149*S>>8)-14234)}function F(y,S,M){return ht((19077*y>>8)-(6419*S>>8)-(13320*M>>8)+8708)}function X(y,S){return ht((19077*y>>8)+(33050*S>>8)-17685)}function se(y,S,M,W,Z){W[Z+0]=_(y,M),W[Z+1]=F(y,S,M),W[Z+2]=X(y,S)}function Ce(y,S,M,W,Z){W[Z+0]=X(y,S),W[Z+1]=F(y,S,M),W[Z+2]=_(y,M)}function Le(y,S,M,W,Z){var re=F(y,S,M);S=re<<3&224|X(y,S)>>3,W[Z+0]=248&_(y,M)|re>>5,W[Z+1]=S}function nt(y,S,M,W,Z){var re=240&X(y,S)|15;W[Z+0]=240&_(y,M)|F(y,S,M)>>4,W[Z+1]=re}function Ut(y,S,M,W,Z){W[Z+0]=255,se(y,S,M,W,Z+1)}function dn(y,S,M,W,Z){Ce(y,S,M,W,Z),W[Z+3]=255}function Qt(y,S,M,W,Z){se(y,S,M,W,Z),W[Z+3]=255}function Fn(y,S){return 0>y?0:y>S?S:y}function Kn(y,S,M){A[y]=function(W,Z,re,ae,oe,ce,he,_e,Pe){for(var De=_e+(-2&Pe)*M;_e!=De;)S(W[Z+0],re[ae+0],oe[ce+0],he,_e),S(W[Z+1],re[ae+0],oe[ce+0],he,_e+M),Z+=2,++ae,++ce,_e+=2*M;1&Pe&&S(W[Z+0],re[ae+0],oe[ce+0],he,_e)}}function oo(y,S,M){return M==0?y==0?S==0?6:5:S==0?4:0:M}function Br(y,S,M,W,Z){switch(y>>>30){case 3:Bo(S,M,W,Z,0);break;case 2:Dr(S,M,W,Z);break;case 1:Kr(S,M,W,Z)}}function _a(y,S){var M,W,Z=S.M,re=S.Nb,ae=y.oc,oe=y.pc+40,ce=y.oc,he=y.pc+584,_e=y.oc,Pe=y.pc+600;for(M=0;16>M;++M)ae[oe+32*M-1]=129;for(M=0;8>M;++M)ce[he+32*M-1]=129,_e[Pe+32*M-1]=129;for(0<Z?ae[oe-1-32]=ce[he-1-32]=_e[Pe-1-32]=129:(i(ae,oe-32-1,127,21),i(ce,he-32-1,127,9),i(_e,Pe-32-1,127,9)),W=0;W<y.za;++W){var De=S.ya[S.aa+W];if(0<W){for(M=-1;16>M;++M)r(ae,oe+32*M-4,ae,oe+32*M+12,4);for(M=-1;8>M;++M)r(ce,he+32*M-4,ce,he+32*M+4,4),r(_e,Pe+32*M-4,_e,Pe+32*M+4,4)}var Re=y.Gd,Ke=y.Hd+W,Ue=De.ad,we=De.Hc;if(0<Z&&(r(ae,oe-32,Re[Ke].y,0,16),r(ce,he-32,Re[Ke].f,0,8),r(_e,Pe-32,Re[Ke].ea,0,8)),De.Za){var Se=ae,qe=oe-32+16;for(0<Z&&(W>=y.za-1?i(Se,qe,Re[Ke].y[15],4):r(Se,qe,Re[Ke+1].y,0,4)),M=0;4>M;M++)Se[qe+128+M]=Se[qe+256+M]=Se[qe+384+M]=Se[qe+0+M];for(M=0;16>M;++M,we<<=2)Se=ae,qe=oe+Tu[M],na[De.Ob[M]](Se,qe),Br(we,Ue,16*+M,Se,qe)}else if(Se=oo(W,Z,De.Ob[0]),Hs[Se](ae,oe),we!=0)for(M=0;16>M;++M,we<<=2)Br(we,Ue,16*+M,ae,oe+Tu[M]);for(M=De.Gc,Se=oo(W,Z,De.Dd),Ga[Se](ce,he),Ga[Se](_e,Pe),we=Ue,Se=ce,qe=he,255&(De=M>>0)&&(170&De?jo(we,256,Se,qe):Aa(we,256,Se,qe)),De=_e,we=Pe,255&(M>>=8)&&(170&M?jo(Ue,320,De,we):Aa(Ue,320,De,we)),Z<y.Ub-1&&(r(Re[Ke].y,0,ae,oe+480,16),r(Re[Ke].f,0,ce,he+224,8),r(Re[Ke].ea,0,_e,Pe+224,8)),M=8*re*y.B,Re=y.sa,Ke=y.ta+16*W+16*re*y.R,Ue=y.qa,De=y.ra+8*W+M,we=y.Ha,Se=y.Ia+8*W+M,M=0;16>M;++M)r(Re,Ke+M*y.R,ae,oe+32*M,16);for(M=0;8>M;++M)r(Ue,De+M*y.B,ce,he+32*M,8),r(we,Se+M*y.B,_e,Pe+32*M,8)}}function us(y,S,M,W,Z,re,ae,oe,ce){var he=[0],_e=[0],Pe=0,De=ce!=null?ce.kd:0,Re=ce??new _l;if(y==null||12>M)return 7;Re.data=y,Re.w=S,Re.ha=M,S=[S],M=[M],Re.gb=[Re.gb];e:{var Ke=S,Ue=M,we=Re.gb;if(e(y!=null),e(Ue!=null),e(we!=null),we[0]=0,12<=Ue[0]&&!t(y,Ke[0],"RIFF")){if(t(y,Ke[0]+8,"WEBP")){we=3;break e}var Se=st(y,Ke[0]+4);if(12>Se||4294967286<Se){we=3;break e}if(De&&Se>Ue[0]-8){we=7;break e}we[0]=Se,Ke[0]+=12,Ue[0]-=12}we=0}if(we!=0)return we;for(Se=0<Re.gb[0],M=M[0];;){e:{var qe=y;Ue=S,we=M;var Qe=he,$e=_e,yt=Ke=[0];if((dt=Pe=[Pe])[0]=0,8>we[0])we=7;else{if(!t(qe,Ue[0],"VP8X")){if(st(qe,Ue[0]+4)!=10){we=3;break e}if(18>we[0]){we=7;break e}var ft=st(qe,Ue[0]+8),Ot=1+rt(qe,Ue[0]+12);if(2147483648<=Ot*(qe=1+rt(qe,Ue[0]+15))){we=3;break e}yt!=null&&(yt[0]=ft),Qe!=null&&(Qe[0]=Ot),$e!=null&&($e[0]=qe),Ue[0]+=18,we[0]-=18,dt[0]=1}we=0}}if(Pe=Pe[0],Ke=Ke[0],we!=0)return we;if(Ue=!!(2&Ke),!Se&&Pe)return 3;if(re!=null&&(re[0]=!!(16&Ke)),ae!=null&&(ae[0]=Ue),oe!=null&&(oe[0]=0),ae=he[0],Ke=_e[0],Pe&&Ue&&ce==null){we=0;break}if(4>M){we=7;break}if(Se&&Pe||!Se&&!Pe&&!t(y,S[0],"ALPH")){M=[M],Re.na=[Re.na],Re.P=[Re.P],Re.Sa=[Re.Sa];e:{ft=y,we=S,Se=M;var dt=Re.gb;Qe=Re.na,$e=Re.P,yt=Re.Sa,Ot=22,e(ft!=null),e(Se!=null),qe=we[0];var Tn=Se[0];for(e(Qe!=null),e(yt!=null),Qe[0]=null,$e[0]=null,yt[0]=0;;){if(we[0]=qe,Se[0]=Tn,8>Tn){we=7;break e}var Un=st(ft,qe+4);if(4294967286<Un){we=3;break e}var sn=8+Un+1&-2;if(Ot+=sn,0<dt&&Ot>dt){we=3;break e}if(!t(ft,qe,"VP8 ")||!t(ft,qe,"VP8L")){we=0;break e}if(Tn[0]<sn){we=7;break e}t(ft,qe,"ALPH")||(Qe[0]=ft,$e[0]=qe+8,yt[0]=Un),qe+=sn,Tn-=sn}}if(M=M[0],Re.na=Re.na[0],Re.P=Re.P[0],Re.Sa=Re.Sa[0],we!=0)break}M=[M],Re.Ja=[Re.Ja],Re.xa=[Re.xa];e:if(dt=y,we=S,Se=M,Qe=Re.gb[0],$e=Re.Ja,yt=Re.xa,ft=we[0],qe=!t(dt,ft,"VP8 "),Ot=!t(dt,ft,"VP8L"),e(dt!=null),e(Se!=null),e($e!=null),e(yt!=null),8>Se[0])we=7;else{if(qe||Ot){if(dt=st(dt,ft+4),12<=Qe&&dt>Qe-12){we=3;break e}if(De&&dt>Se[0]-8){we=7;break e}$e[0]=dt,we[0]+=8,Se[0]-=8,yt[0]=Ot}else yt[0]=5<=Se[0]&&dt[ft+0]==47&&!(dt[ft+4]>>5),$e[0]=Se[0];we=0}if(M=M[0],Re.Ja=Re.Ja[0],Re.xa=Re.xa[0],S=S[0],we!=0)break;if(4294967286<Re.Ja)return 3;if(oe==null||Ue||(oe[0]=Re.xa?2:1),ae=[ae],Ke=[Ke],Re.xa){if(5>M){we=7;break}oe=ae,De=Ke,Ue=re,y==null||5>M?y=0:5<=M&&y[S+0]==47&&!(y[S+4]>>5)?(Se=[0],dt=[0],Qe=[0],ee($e=new G,y,S,M),vt($e,Se,dt,Qe)?(oe!=null&&(oe[0]=Se[0]),De!=null&&(De[0]=dt[0]),Ue!=null&&(Ue[0]=Qe[0]),y=1):y=0):y=0}else{if(10>M){we=7;break}oe=Ke,y==null||10>M||!mi(y,S+3,M-3)?y=0:(De=y[S+0]|y[S+1]<<8|y[S+2]<<16,Ue=16383&(y[S+7]<<8|y[S+6]),y=16383&(y[S+9]<<8|y[S+8]),1&De||3<(De>>1&7)||!(De>>4&1)||De>>5>=Re.Ja||!Ue||!y?y=0:(ae&&(ae[0]=Ue),oe&&(oe[0]=y),y=1))}if(!y||(ae=ae[0],Ke=Ke[0],Pe&&(he[0]!=ae||_e[0]!=Ke)))return 3;ce!=null&&(ce[0]=Re,ce.offset=S-ce.w,e(4294967286>S-ce.w),e(ce.offset==ce.ha-M));break}return we==0||we==7&&Pe&&ce==null?(re!=null&&(re[0]|=Re.na!=null&&0<Re.na.length),W!=null&&(W[0]=ae),Z!=null&&(Z[0]=Ke),0):we}function bl(y,S,M){var W=S.width,Z=S.height,re=0,ae=0,oe=W,ce=Z;if(S.Da=y!=null&&0<y.Da,S.Da&&(oe=y.cd,ce=y.bd,re=y.v,ae=y.j,11>M||(re&=-2,ae&=-2),0>re||0>ae||0>=oe||0>=ce||re+oe>W||ae+ce>Z))return 0;if(S.v=re,S.j=ae,S.va=re+oe,S.o=ae+ce,S.U=oe,S.T=ce,S.da=y!=null&&0<y.da,S.da){if(!gt(oe,ce,M=[y.ib],re=[y.hb]))return 0;S.ib=M[0],S.hb=re[0]}return S.ob=y!=null&&y.ob,S.Kb=y==null||!y.Sd,S.da&&(S.ob=S.ib<3*W/4&&S.hb<3*Z/4,S.Kb=0),1}function hc(y){if(y==null)return 2;if(11>y.S){var S=y.f.RGBA;S.fb+=(y.height-1)*S.A,S.A=-S.A}else S=y.f.kb,y=y.height,S.O+=(y-1)*S.fa,S.fa=-S.fa,S.N+=(y-1>>1)*S.Ab,S.Ab=-S.Ab,S.W+=(y-1>>1)*S.Db,S.Db=-S.Db,S.F!=null&&(S.J+=(y-1)*S.lb,S.lb=-S.lb);return 0}function mu(y,S,M,W){if(W==null||0>=y||0>=S)return 2;if(M!=null){if(M.Da){var Z=M.cd,re=M.bd,ae=-2&M.v,oe=-2&M.j;if(0>ae||0>oe||0>=Z||0>=re||ae+Z>y||oe+re>S)return 2;y=Z,S=re}if(M.da){if(!gt(y,S,Z=[M.ib],re=[M.hb]))return 2;y=Z[0],S=re[0]}}W.width=y,W.height=S;e:{var ce=W.width,he=W.height;if(y=W.S,0>=ce||0>=he||!(y>=qi&&13>y))y=2;else{if(0>=W.Rd&&W.sd==null){ae=re=Z=S=0;var _e=(oe=ce*L0[y])*he;if(11>y||(re=(he+1)/2*(S=(ce+1)/2),y==12&&(ae=(Z=ce)*he)),(he=a(_e+2*re+ae))==null){y=1;break e}W.sd=he,11>y?((ce=W.f.RGBA).eb=he,ce.fb=0,ce.A=oe,ce.size=_e):((ce=W.f.kb).y=he,ce.O=0,ce.fa=oe,ce.Fd=_e,ce.f=he,ce.N=0+_e,ce.Ab=S,ce.Cd=re,ce.ea=he,ce.W=0+_e+re,ce.Db=S,ce.Ed=re,y==12&&(ce.F=he,ce.J=0+_e+2*re),ce.Tc=ae,ce.lb=Z)}if(S=1,Z=W.S,re=W.width,ae=W.height,Z>=qi&&13>Z)if(11>Z)y=W.f.RGBA,S&=(oe=Math.abs(y.A))*(ae-1)+re<=y.size,S&=oe>=re*L0[Z],S&=y.eb!=null;else{y=W.f.kb,oe=(re+1)/2,_e=(ae+1)/2,ce=Math.abs(y.fa),he=Math.abs(y.Ab);var Pe=Math.abs(y.Db),De=Math.abs(y.lb),Re=De*(ae-1)+re;S&=ce*(ae-1)+re<=y.Fd,S&=he*(_e-1)+oe<=y.Cd,S=(S&=Pe*(_e-1)+oe<=y.Ed)&ce>=re&he>=oe&Pe>=oe,S&=y.y!=null,S&=y.f!=null,S&=y.ea!=null,Z==12&&(S&=De>=re,S&=Re<=y.Tc,S&=y.F!=null)}else S=0;y=S?0:2}}return y!=0||M!=null&&M.fd&&(y=hc(W)),y}var ii=64,Al=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],vu=24,yu=32,dc=8,wa=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];it("Predictor0","PredictorAdd0"),A.Predictor0=function(){return 4278190080},A.Predictor1=function(y){return y},A.Predictor2=function(y,S,M){return S[M+0]},A.Predictor3=function(y,S,M){return S[M+1]},A.Predictor4=function(y,S,M){return S[M-1]},A.Predictor5=function(y,S,M){return ot(ot(y,S[M+1]),S[M+0])},A.Predictor6=function(y,S,M){return ot(y,S[M-1])},A.Predictor7=function(y,S,M){return ot(y,S[M+0])},A.Predictor8=function(y,S,M){return ot(S[M-1],S[M+0])},A.Predictor9=function(y,S,M){return ot(S[M+0],S[M+1])},A.Predictor10=function(y,S,M){return ot(ot(y,S[M-1]),ot(S[M+0],S[M+1]))},A.Predictor11=function(y,S,M){var W=S[M+0];return 0>=Rt(W>>24&255,y>>24&255,(S=S[M-1])>>24&255)+Rt(W>>16&255,y>>16&255,S>>16&255)+Rt(W>>8&255,y>>8&255,S>>8&255)+Rt(255&W,255&y,255&S)?W:y},A.Predictor12=function(y,S,M){var W=S[M+0];return(ct((y>>24&255)+(W>>24&255)-((S=S[M-1])>>24&255))<<24|ct((y>>16&255)+(W>>16&255)-(S>>16&255))<<16|ct((y>>8&255)+(W>>8&255)-(S>>8&255))<<8|ct((255&y)+(255&W)-(255&S)))>>>0},A.Predictor13=function(y,S,M){var W=S[M-1];return(mt((y=ot(y,S[M+0]))>>24&255,W>>24&255)<<24|mt(y>>16&255,W>>16&255)<<16|mt(y>>8&255,W>>8&255)<<8|mt(y>>0&255,W>>0&255))>>>0};var kd=A.PredictorAdd0;A.PredictorAdd1=_t,it("Predictor2","PredictorAdd2"),it("Predictor3","PredictorAdd3"),it("Predictor4","PredictorAdd4"),it("Predictor5","PredictorAdd5"),it("Predictor6","PredictorAdd6"),it("Predictor7","PredictorAdd7"),it("Predictor8","PredictorAdd8"),it("Predictor9","PredictorAdd9"),it("Predictor10","PredictorAdd10"),it("Predictor11","PredictorAdd11"),it("Predictor12","PredictorAdd12"),it("Predictor13","PredictorAdd13");var _f=A.PredictorAdd2;Dt("ColorIndexInverseTransform","MapARGB","32b",function(y){return y>>8&255},function(y){return y}),Dt("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(y){return y},function(y){return y>>8&255});var vh,so=A.ColorIndexInverseTransform,vi=A.MapARGB,El=A.VP8LColorIndexInverseTransformAlpha,wf=A.MapAlpha,Bs=A.VP8LPredictorsAdd=[];Bs.length=16,(A.VP8LPredictors=[]).length=16,(A.VP8LPredictorsAdd_C=[]).length=16,(A.VP8LPredictors_C=[]).length=16;var Sl,ta,Ri,Cl,ba,Mo,cs,Bo,Dr,jo,Kr,Aa,xu,fs,pc,Tl,Il,Rl,_u,gc,Nl,js,wu,Or,Ha,ln,un,cr,jr=a(511),lo=a(2041),Dl=a(225),Ol=a(767),Fs=0,yh=lo,bu=Dl,yi=Ol,uo=jr,qi=0,mc=1,hs=2,bf=3,Au=4,Us=5,xh=6,Af=7,Pl=8,Vs=9,vc=10,_h=[2,3,7],co=[3,3,11],Wa=[280,256,256,256,40],Eu=[0,1,1,1,0],zs=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],qs=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Su=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],R0=8,Ef=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Sf=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],ai=null,Pr=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],Pn=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],Ll=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],ds=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],Md=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],Cu=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],N0=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Hs=[],na=[],Ga=[],D0=1,yc=2,ps=[],xi=[];Ve("UpsampleRgbLinePair",se,3),Ve("UpsampleBgrLinePair",Ce,3),Ve("UpsampleRgbaLinePair",Qt,4),Ve("UpsampleBgraLinePair",dn,4),Ve("UpsampleArgbLinePair",Ut,4),Ve("UpsampleRgba4444LinePair",nt,2),Ve("UpsampleRgb565LinePair",Le,2);var Ws=A.UpsampleRgbLinePair,kl=A.UpsampleBgrLinePair,gs=A.UpsampleRgbaLinePair,wh=A.UpsampleBgraLinePair,bh=A.UpsampleArgbLinePair,xc=A.UpsampleRgba4444LinePair,Ah=A.UpsampleRgb565LinePair,ms=16,oi=1<<ms-1,Ml=-227,Eh=482,zm=6,O0=0,qm=a(256),si=a(256),Bd=a(256),Cf=a(256),Tf=a(Eh-Ml),jd=a(Eh-Ml);Kn("YuvToRgbRow",se,3),Kn("YuvToBgrRow",Ce,3),Kn("YuvToRgbaRow",Qt,4),Kn("YuvToBgraRow",dn,4),Kn("YuvToArgbRow",Ut,4),Kn("YuvToRgba4444Row",nt,2),Kn("YuvToRgb565Row",Le,2);var Tu=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Gs=[0,2,8],Hm=[8,7,6,4,4,2,2,2,1,1,1,1],P0=1;this.WebPDecodeRGBA=function(y,S,M,W,Z){var re=mc,ae=new Ls,oe=new Mr;ae.ba=oe,oe.S=re,oe.width=[oe.width],oe.height=[oe.height];var ce=oe.width,he=oe.height,_e=new sr;if(_e==null||y==null)var Pe=2;else e(_e!=null),Pe=us(y,S,M,_e.width,_e.height,_e.Pd,_e.Qd,_e.format,null);if(Pe!=0?ce=0:(ce!=null&&(ce[0]=_e.width[0]),he!=null&&(he[0]=_e.height[0]),ce=1),ce){oe.width=oe.width[0],oe.height=oe.height[0],W!=null&&(W[0]=oe.width),Z!=null&&(Z[0]=oe.height);e:{if(W=new Io,(Z=new _l).data=y,Z.w=S,Z.ha=M,Z.kd=1,S=[0],e(Z!=null),((y=us(Z.data,Z.w,Z.ha,null,null,null,S,null,Z))==0||y==7)&&S[0]&&(y=4),(S=y)==0){if(e(ae!=null),W.data=Z.data,W.w=Z.w+Z.offset,W.ha=Z.ha-Z.offset,W.put=pr,W.ac=Mn,W.bc=Ua,W.ma=ae,Z.xa){if((y=lr())==null){ae=1;break e}if(function(De,Re){var Ke=[0],Ue=[0],we=[0];t:for(;;){if(De==null)return 0;if(Re==null)return De.a=2,0;if(De.l=Re,De.a=0,ee(De.m,Re.data,Re.w,Re.ha),!vt(De.m,Ke,Ue,we)){De.a=3;break t}if(De.xb=yc,Re.width=Ke[0],Re.height=Ue[0],!Bn(Ke[0],Ue[0],1,De,null))break t;return 1}return e(De.a!=0),0}(y,W)){if(W=(S=mu(W.width,W.height,ae.Oa,ae.ba))==0){t:{W=y;n:for(;;){if(W==null){W=0;break t}if(e(W.s.yc!=null),e(W.s.Ya!=null),e(0<W.s.Wb),e((M=W.l)!=null),e((Z=M.ma)!=null),W.xb!=0){if(W.ca=Z.ba,W.tb=Z.tb,e(W.ca!=null),!bl(Z.Oa,M,bf)){W.a=2;break n}if(!So(W,M.width)||M.da)break n;if((M.da||on(W.ca.S))&&Ie(),11>W.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),W.ca.f.kb.F!=null&&Ie()),W.Pb&&0<W.s.ua&&W.s.vb.X==null&&!wt(W.s.vb,W.s.Wa.Xa)){W.a=1;break n}W.xb=0}if(!$r(W,W.V,W.Ba,W.c,W.i,M.o,Ts))break n;Z.Dc=W.Ma,W=1;break t}e(W.a!=0),W=0}W=!W}W&&(S=y.a)}else S=y.a}else{if((y=new uu)==null){ae=1;break e}if(y.Fa=Z.na,y.P=Z.P,y.qc=Z.Sa,gl(y,W)){if((S=mu(W.width,W.height,ae.Oa,ae.ba))==0){if(y.Aa=0,M=ae.Oa,e((Z=y)!=null),M!=null){if(0<(ce=0>(ce=M.Md)?0:100<ce?255:255*ce/100)){for(he=_e=0;4>he;++he)12>(Pe=Z.pb[he]).lc&&(Pe.ia=ce*Hm[0>Pe.lc?0:Pe.lc]>>3),_e|=Pe.ia;_e&&(alert("todo:VP8InitRandom"),Z.ia=1)}Z.Ga=M.Id,100<Z.Ga?Z.Ga=100:0>Z.Ga&&(Z.Ga=0)}cu(y,W)||(S=y.a)}}else S=y.a}S==0&&ae.Oa!=null&&ae.Oa.fd&&(S=hc(ae.ba))}ae=S}re=ae!=0?null:11>re?oe.f.RGBA.eb:oe.f.kb.y}else re=null;return re};var L0=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function f(A,T){for(var k="",R=0;R<4;R++)k+=String.fromCharCode(A[T++]);return k}function h(A,T){return(A[T+0]<<0|A[T+1]<<8|A[T+2]<<16)>>>0}function p(A,T){return(A[T+0]<<0|A[T+1]<<8|A[T+2]<<16|A[T+3]<<24)>>>0}new u;var g=[0],m=[0],x=[],w=new u,I=n,C=function(A,T){var k={},R=0,L=!1,j=0,H=0;if(k.frames=[],!function(Q,te,ie,de){for(var Ae=0;Ae<de;Ae++)if(Q[te+Ae]!=ie.charCodeAt(Ae))return!0;return!1}(A,T,"RIFF",4)){for(p(A,T+=4),T+=8;T<A.length;){var ne=f(A,T),U=p(A,T+=4);T+=4;var z=U+(1&U);switch(ne){case"VP8 ":case"VP8L":k.frames[R]===void 0&&(k.frames[R]={}),($=k.frames[R]).src_off=L?H:T-8,$.src_size=j+U+8,R++,L&&(L=!1,j=0,H=0);break;case"VP8X":($=k.header={}).feature_flags=A[T];var ee=T+4;$.canvas_width=1+h(A,ee),ee+=3,$.canvas_height=1+h(A,ee),ee+=3;break;case"ALPH":L=!0,j=z+8,H=T-8;break;case"ANIM":($=k.header).bgcolor=p(A,T),ee=T+4,$.loop_count=(ve=A)[(G=ee)+0]<<0|ve[G+1]<<8,ee+=2;break;case"ANMF":var le,$;($=k.frames[R]={}).offset_x=2*h(A,T),T+=3,$.offset_y=2*h(A,T),T+=3,$.width=1+h(A,T),T+=3,$.height=1+h(A,T),T+=3,$.duration=h(A,T),T+=3,le=A[T++],$.dispose=1&le,$.blend=le>>1&1}ne!="ANMF"&&(T+=z)}var ve,G;return k}}(I,0);C.response=I,C.rgbaoutput=!0,C.dataurl=!1;var P=C.header?C.header:null,B=C.frames?C.frames:null;if(P){P.loop_counter=P.loop_count,g=[P.canvas_height],m=[P.canvas_width];for(var V=0;V<B.length&&B[V].blend!=0;V++);}var Y=B[0],q=w.WebPDecodeRGBA(I,Y.src_off,Y.src_size,m,g);Y.rgba=q,Y.imgwidth=m[0],Y.imgheight=g[0];for(var D=0;D<m[0]*g[0]*4;D++)x[D]=q[D];return this.width=m,this.height=g,this.data=x,this}(function(n){var e=function(){return typeof Vy=="function"},t=function(g,m,x,w){var I=4,C=o;switch(w){case n.image_compression.FAST:I=1,C=a;break;case n.image_compression.MEDIUM:I=6,C=s;break;case n.image_compression.SLOW:I=9,C=u}g=r(g,m,x,C);var P=Vy(g,{level:I});return n.__addimage__.arrayBufferToBinaryString(P)},r=function(g,m,x,w){for(var I,C,P,B=g.length/m,V=new Uint8Array(g.length+B),Y=h(),q=0;q<B;q+=1){if(P=q*m,I=g.subarray(P,P+m),w)V.set(w(I,x,C),P+q);else{for(var D,A=Y.length,T=[];D<A;D+=1)T[D]=Y[D](I,x,C);var k=p(T.concat());V.set(T[k],P+q)}C=I}return V},i=function(g){var m=Array.apply([],g);return m.unshift(0),m},a=function(g,m){var x,w=[],I=g.length;w[0]=1;for(var C=0;C<I;C+=1)x=g[C-m]||0,w[C+1]=g[C]-x+256&255;return w},o=function(g,m,x){var w,I=[],C=g.length;I[0]=2;for(var P=0;P<C;P+=1)w=x&&x[P]||0,I[P+1]=g[P]-w+256&255;return I},s=function(g,m,x){var w,I,C=[],P=g.length;C[0]=3;for(var B=0;B<P;B+=1)w=g[B-m]||0,I=x&&x[B]||0,C[B+1]=g[B]+256-(w+I>>>1)&255;return C},u=function(g,m,x){var w,I,C,P,B=[],V=g.length;B[0]=4;for(var Y=0;Y<V;Y+=1)w=g[Y-m]||0,I=x&&x[Y]||0,C=x&&x[Y-m]||0,P=f(w,I,C),B[Y+1]=g[Y]-P+256&255;return B},f=function(g,m,x){if(g===m&&m===x)return g;var w=Math.abs(m-x),I=Math.abs(g-x),C=Math.abs(g+m-x-x);return w<=I&&w<=C?g:I<=C?m:x},h=function(){return[i,a,o,s,u]},p=function(g){var m=g.map(function(x){return x.reduce(function(w,I){return w+Math.abs(I)},0)});return m.indexOf(Math.min.apply(null,m))};n.processPNG=function(g,m,x,w){var I,C,P,B,V,Y,q,D,A,T,k,R,L,j,H,ne=this.decode.FLATE_DECODE,U="";if(this.__addimage__.isArrayBuffer(g)&&(g=new Uint8Array(g)),this.__addimage__.isArrayBufferView(g)){if(g=(P=new Dz(g)).imgData,C=P.bits,I=P.colorSpace,V=P.colors,[4,6].indexOf(P.colorType)!==-1){if(P.bits===8){A=(D=P.pixelBitlength==32?new Uint32Array(P.decodePixels().buffer):P.pixelBitlength==16?new Uint16Array(P.decodePixels().buffer):new Uint8Array(P.decodePixels().buffer)).length,k=new Uint8Array(A*P.colors),T=new Uint8Array(A);var z,ee=P.pixelBitlength-P.bits;for(j=0,H=0;j<A;j++){for(L=D[j],z=0;z<ee;)k[H++]=L>>>z&255,z+=P.bits;T[j]=L>>>z&255}}if(P.bits===16){A=(D=new Uint32Array(P.decodePixels().buffer)).length,k=new Uint8Array(A*(32/P.pixelBitlength)*P.colors),T=new Uint8Array(A*(32/P.pixelBitlength)),R=P.colors>1,j=0,H=0;for(var le=0;j<A;)L=D[j++],k[H++]=L>>>0&255,R&&(k[H++]=L>>>16&255,L=D[j++],k[H++]=L>>>0&255),T[le++]=L>>>16&255;C=8}w!==n.image_compression.NONE&&e()?(g=t(k,P.width*P.colors,P.colors,w),q=t(T,P.width,1,w)):(g=k,q=T,ne=void 0)}if(P.colorType===3&&(I=this.color_spaces.INDEXED,Y=P.palette,P.transparency.indexed)){var $=P.transparency.indexed,ve=0;for(j=0,A=$.length;j<A;++j)ve+=$[j];if((ve/=255)===A-1&&$.indexOf(0)!==-1)B=[$.indexOf(0)];else if(ve!==A){for(D=P.decodePixels(),T=new Uint8Array(D.length),j=0,A=D.length;j<A;j++)T[j]=$[D[j]];q=t(T,P.width,1)}}var G=function(Q){var te;switch(Q){case n.image_compression.FAST:te=11;break;case n.image_compression.MEDIUM:te=13;break;case n.image_compression.SLOW:te=14;break;default:te=12}return te}(w);return ne===this.decode.FLATE_DECODE&&(U="/Predictor "+G+" "),U+="/Colors "+V+" /BitsPerComponent "+C+" /Columns "+P.width,(this.__addimage__.isArrayBuffer(g)||this.__addimage__.isArrayBufferView(g))&&(g=this.__addimage__.arrayBufferToBinaryString(g)),(q&&this.__addimage__.isArrayBuffer(q)||this.__addimage__.isArrayBufferView(q))&&(q=this.__addimage__.arrayBufferToBinaryString(q)),{alias:x,data:g,index:m,filter:ne,decodeParameters:U,transparency:B,palette:Y,sMask:q,predictor:G,width:P.width,height:P.height,bitsPerComponent:C,colorSpace:I}}}})(Ht.API),function(n){n.processGIF89A=function(e,t,r,i){var a=new Oz(e),o=a.width,s=a.height,u=[];a.decodeAndBlitFrameRGBA(0,u);var f={data:u,width:o,height:s},h=new Bv(100).encode(f,100);return n.processJPEG.call(this,h,t,r,i)},n.processGIF87A=n.processGIF89A}(Ht.API),tl.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var n=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(n);for(var e=0;e<n;e++){var t=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:i,green:r,blue:t,quad:a}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},tl.prototype.parseBGR=function(){this.pos=this.offset;try{var n="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[n]()}catch(t){vr.log("bit decode error:"+t)}},tl.prototype.bit1=function(){var n,e=Math.ceil(this.width/8),t=e%4;for(n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<e;i++)for(var a=this.datav.getUint8(this.pos++,!0),o=r*this.width*4+8*i*4,s=0;s<8&&8*i+s<this.width;s++){var u=this.palette[a>>7-s&1];this.data[o+4*s]=u.blue,this.data[o+4*s+1]=u.green,this.data[o+4*s+2]=u.red,this.data[o+4*s+3]=255}t!==0&&(this.pos+=4-t)}},tl.prototype.bit4=function(){for(var n=Math.ceil(this.width/2),e=n%4,t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,i=0;i<n;i++){var a=this.datav.getUint8(this.pos++,!0),o=r*this.width*4+2*i*4,s=a>>4,u=15&a,f=this.palette[s];if(this.data[o]=f.blue,this.data[o+1]=f.green,this.data[o+2]=f.red,this.data[o+3]=255,2*i+1>=this.width)break;f=this.palette[u],this.data[o+4]=f.blue,this.data[o+4+1]=f.green,this.data[o+4+2]=f.red,this.data[o+4+3]=255}e!==0&&(this.pos+=4-e)}},tl.prototype.bit8=function(){for(var n=this.width%4,e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var i=this.datav.getUint8(this.pos++,!0),a=t*this.width*4+4*r;if(i<this.palette.length){var o=this.palette[i];this.data[a]=o.red,this.data[a+1]=o.green,this.data[a+2]=o.blue,this.data[a+3]=255}else this.data[a]=255,this.data[a+1]=255,this.data[a+2]=255,this.data[a+3]=255}n!==0&&(this.pos+=4-n)}},tl.prototype.bit15=function(){for(var n=this.width%3,e=parseInt("11111",2),t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,i=0;i<this.width;i++){var a=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(a&e)/e*255|0,s=(a>>5&e)/e*255|0,u=(a>>10&e)/e*255|0,f=a>>15?255:0,h=r*this.width*4+4*i;this.data[h]=u,this.data[h+1]=s,this.data[h+2]=o,this.data[h+3]=f}this.pos+=n}},tl.prototype.bit16=function(){for(var n=this.width%3,e=parseInt("11111",2),t=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var i=this.bottom_up?r:this.height-1-r,a=0;a<this.width;a++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var s=(o&e)/e*255|0,u=(o>>5&t)/t*255|0,f=(o>>11)/e*255|0,h=i*this.width*4+4*a;this.data[h]=f,this.data[h+1]=u,this.data[h+2]=s,this.data[h+3]=255}this.pos+=n}},tl.prototype.bit24=function(){for(var n=this.height-1;n>=0;n--){for(var e=this.bottom_up?n:this.height-1-n,t=0;t<this.width;t++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),o=e*this.width*4+4*t;this.data[o]=a,this.data[o+1]=i,this.data[o+2]=r,this.data[o+3]=255}this.pos+=this.width%4}},tl.prototype.bit32=function(){for(var n=this.height-1;n>=0;n--)for(var e=this.bottom_up?n:this.height-1-n,t=0;t<this.width;t++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),s=e*this.width*4+4*t;this.data[s]=a,this.data[s+1]=i,this.data[s+2]=r,this.data[s+3]=o}},tl.prototype.getData=function(){return this.data},function(n){n.processBMP=function(e,t,r,i){var a=new tl(e,!1),o=a.width,s=a.height,u={data:a.getData(),width:o,height:s},f=new Bv(100).encode(u,100);return n.processJPEG.call(this,f,t,r,i)}}(Ht.API),M4.prototype.getData=function(){return this.data},function(n){n.processWEBP=function(e,t,r,i){var a=new M4(e),o=a.width,s=a.height,u={data:a.getData(),width:o,height:s},f=new Bv(100).encode(u,100);return n.processJPEG.call(this,f,t,r,i)}}(Ht.API),Ht.API.processRGBA=function(n,e,t){for(var r=n.data,i=r.length,a=new Uint8Array(i/4*3),o=new Uint8Array(i/4),s=0,u=0,f=0;f<i;f+=4){var h=r[f],p=r[f+1],g=r[f+2],m=r[f+3];a[s++]=h,a[s++]=p,a[s++]=g,o[u++]=m}var x=this.__addimage__.arrayBufferToBinaryString(a);return{alpha:this.__addimage__.arrayBufferToBinaryString(o),data:x,index:e,alias:t,colorSpace:"DeviceRGB",bitsPerComponent:8,width:n.width,height:n.height}},Ht.API.setLanguage=function(n){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[n]!==void 0&&(this.internal.languageSettings.languageCode=n,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Kh=Ht.API,zp=Kh.getCharWidthsArray=function(n,e){var t,r,i=(e=e||{}).font||this.internal.getFont(),a=e.fontSize||this.internal.getFontSize(),o=e.charSpace||this.internal.getCharSpace(),s=e.widths?e.widths:i.metadata.Unicode.widths,u=s.fof?s.fof:1,f=e.kerning?e.kerning:i.metadata.Unicode.kerning,h=f.fof?f.fof:1,p=e.doKerning!==!1,g=0,m=n.length,x=0,w=s[0]||u,I=[];for(t=0;t<m;t++)r=n.charCodeAt(t),typeof i.metadata.widthOfString=="function"?I.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(r))+o*(1e3/a)||0)/1e3):(g=p&&or(f[r])==="object"&&!isNaN(parseInt(f[r][x],10))?f[r][x]/h:0,I.push((s[r]||w)/u+g)),x=r;return I},O4=Kh.getStringUnitWidth=function(n,e){var t=(e=e||{}).fontSize||this.internal.getFontSize(),r=e.font||this.internal.getFont(),i=e.charSpace||this.internal.getCharSpace();return Kh.processArabic&&(n=Kh.processArabic(n)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(n,t,i)/t:zp.apply(this,arguments).reduce(function(a,o){return a+o},0)},P4=function(n,e,t,r){for(var i=[],a=0,o=n.length,s=0;a!==o&&s+e[a]<t;)s+=e[a],a++;i.push(n.slice(0,a));var u=a;for(s=0;a!==o;)s+e[a]>r&&(i.push(n.slice(u,a)),s=0,u=a),s+=e[a],a++;return u!==a&&i.push(n.slice(u,a)),i},L4=function(n,e,t){t||(t={});var r,i,a,o,s,u,f,h=[],p=[h],g=t.textIndent||0,m=0,x=0,w=n.split(" "),I=zp.apply(this,[" ",t])[0];if(u=t.lineIndent===-1?w[0].length+2:t.lineIndent||0){var C=Array(u).join(" "),P=[];w.map(function(V){(V=V.split(/\s*\n/)).length>1?P=P.concat(V.map(function(Y,q){return(q&&Y.length?`
`:"")+Y})):P.push(V[0])}),w=P,u=O4.apply(this,[C,t])}for(a=0,o=w.length;a<o;a++){var B=0;if(r=w[a],u&&r[0]==`
`&&(r=r.substr(1),B=1),g+m+(x=(i=zp.apply(this,[r,t])).reduce(function(V,Y){return V+Y},0))>e||B){if(x>e){for(s=P4.apply(this,[r,i,e-(g+m),e]),h.push(s.shift()),h=[s.pop()];s.length;)p.push([s.shift()]);x=i.slice(r.length-(h[0]?h[0].length:0)).reduce(function(V,Y){return V+Y},0)}else h=[r];p.push(h),g=x+u,m=I}else h.push(r),g+=m+x,m=I}return f=u?function(V,Y){return(Y?C:"")+V.join(" ")}:function(V){return V.join(" ")},p.map(f)},Kh.splitTextToSize=function(n,e,t){var r,i=(t=t||{}).fontSize||this.internal.getFontSize(),a=(function(h){if(h.widths&&h.kerning)return{widths:h.widths,kerning:h.kerning};var p=this.internal.getFont(h.fontName,h.fontStyle);return p.metadata.Unicode?{widths:p.metadata.Unicode.widths||{0:1},kerning:p.metadata.Unicode.kerning||{}}:{font:p.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,t);r=Array.isArray(n)?n:String(n).split(/\r?\n/);var o=1*this.internal.scaleFactor*e/i;a.textIndent=t.textIndent?1*t.textIndent*this.internal.scaleFactor/i:0,a.lineIndent=t.lineIndent;var s,u,f=[];for(s=0,u=r.length;s<u;s++)f=f.concat(L4.apply(this,[r[s],o,a]));return f},function(n){n.__fontmetrics__=n.__fontmetrics__||{};for(var e="klmnopqrstuvwxyz",t={},r={},i=0;i<e.length;i++)t[e[i]]="0123456789abcdef"[i],r["0123456789abcdef"[i]]=e[i];var a=function(p){return"0x"+parseInt(p,10).toString(16)},o=n.__fontmetrics__.compress=function(p){var g,m,x,w,I=["{"];for(var C in p){if(g=p[C],isNaN(parseInt(C,10))?m="'"+C+"'":(C=parseInt(C,10),m=(m=a(C).slice(2)).slice(0,-1)+r[m.slice(-1)]),typeof g=="number")g<0?(x=a(g).slice(3),w="-"):(x=a(g).slice(2),w=""),x=w+x.slice(0,-1)+r[x.slice(-1)];else{if(or(g)!=="object")throw new Error("Don't know what to do with value type "+or(g)+".");x=o(g)}I.push(m+x)}return I.push("}"),I.join("")},s=n.__fontmetrics__.uncompress=function(p){if(typeof p!="string")throw new Error("Invalid argument passed to uncompress.");for(var g,m,x,w,I={},C=1,P=I,B=[],V="",Y="",q=p.length-1,D=1;D<q;D+=1)(w=p[D])=="'"?g?(x=g.join(""),g=void 0):g=[]:g?g.push(w):w=="{"?(B.push([P,x]),P={},x=void 0):w=="}"?((m=B.pop())[0][m[1]]=P,x=void 0,P=m[0]):w=="-"?C=-1:x===void 0?t.hasOwnProperty(w)?(V+=t[w],x=parseInt(V,16)*C,C=1,V=""):V+=w:t.hasOwnProperty(w)?(Y+=t[w],P[x]=parseInt(Y,16)*C,C=1,x=void 0,Y=""):Y+=w;return I},u={codePages:["WinAnsiEncoding"],WinAnsiEncoding:s("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},f={Unicode:{Courier:u,"Courier-Bold":u,"Courier-BoldOblique":u,"Courier-Oblique":u,Helvetica:u,"Helvetica-Bold":u,"Helvetica-BoldOblique":u,"Helvetica-Oblique":u,"Times-Roman":u,"Times-Bold":u,"Times-BoldItalic":u,"Times-Italic":u}},h={Unicode:{"Courier-Oblique":s("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":s("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":s("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:s("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":s("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":s("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:s("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:s("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":s("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:s("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":s("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":s("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":s("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":s("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};n.events.push(["addFont",function(p){var g=p.font,m=h.Unicode[g.postScriptName];m&&(g.metadata.Unicode={},g.metadata.Unicode.widths=m.widths,g.metadata.Unicode.kerning=m.kerning);var x=f.Unicode[g.postScriptName];x&&(g.metadata.Unicode.encoding=x,g.encoding=x.codePages[0])}])}(Ht.API),function(n){var e=function(t){for(var r=t.length,i=new Uint8Array(r),a=0;a<r;a++)i[a]=t.charCodeAt(a);return i};n.API.events.push(["addFont",function(t){var r=void 0,i=t.font,a=t.instance;if(!i.isStandardFont){if(a===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if(typeof(r=a.existsFileInVFS(i.postScriptName)===!1?a.loadFile(i.postScriptName):a.getFileFromVFS(i.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");(function(o,s){s=/^\x00\x01\x00\x00/.test(s)?e(s):e($1(s)),o.metadata=n.API.TTFFont.open(s),o.metadata.Unicode=o.metadata.Unicode||{encoding:{},kerning:{},widths:[]},o.metadata.glyIdsUsed=[0]})(i,r)}}])}(Ht),function(n){function e(){return(Gt.canvg?Promise.resolve(Gt.canvg):My(()=>import("./index.es-DXFFHRY8.js"),[])).catch(function(t){return Promise.reject(new Error("Could not load canvg: "+t))}).then(function(t){return t.default?t.default:t})}Ht.API.addSvgAsImage=function(t,r,i,a,o,s,u,f){if(isNaN(r)||isNaN(i))throw vr.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(a)||isNaN(o))throw vr.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var h=document.createElement("canvas");h.width=a,h.height=o;var p=h.getContext("2d");p.fillStyle="#fff",p.fillRect(0,0,h.width,h.height);var g={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},m=this;return e().then(function(x){return x.fromString(p,t,g)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(x){return x.render(g)}).then(function(){m.addImage(h.toDataURL("image/jpeg",1),r,i,a,o,u,f)})}}(),Ht.API.putTotalPages=function(n){var e,t=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(n,"g"),t=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(n,this.internal.getFont()),"g"),t=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var i=0;i<this.internal.pages[r].length;i++)this.internal.pages[r][i]=this.internal.pages[r][i].replace(e,t);return this},Ht.API.viewerPreferences=function(n,e){var t;n=n||{},e=e||!1;var r,i,a,o={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},s=Object.keys(o),u=[],f=0,h=0,p=0;function g(x,w){var I,C=!1;for(I=0;I<x.length;I+=1)x[I]===w&&(C=!0);return C}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(o)),this.internal.viewerpreferences.isSubscribed=!1),t=this.internal.viewerpreferences.configuration,n==="reset"||e===!0){var m=s.length;for(p=0;p<m;p+=1)t[s[p]].value=t[s[p]].defaultValue,t[s[p]].explicitSet=!1}if(or(n)==="object"){for(i in n)if(a=n[i],g(s,i)&&a!==void 0){if(t[i].type==="boolean"&&typeof a=="boolean")t[i].value=a;else if(t[i].type==="name"&&g(t[i].valueSet,a))t[i].value=a;else if(t[i].type==="integer"&&Number.isInteger(a))t[i].value=a;else if(t[i].type==="array"){for(f=0;f<a.length;f+=1)if(r=!0,a[f].length===1&&typeof a[f][0]=="number")u.push(String(a[f]-1));else if(a[f].length>1){for(h=0;h<a[f].length;h+=1)typeof a[f][h]!="number"&&(r=!1);r===!0&&u.push([a[f][0]-1,a[f][1]-1].join(" "))}t[i].value="["+u.join(" ")+"]"}else t[i].value=t[i].defaultValue;t[i].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var x,w=[];for(x in t)t[x].explicitSet===!0&&(t[x].type==="name"?w.push("/"+x+" /"+t[x].value):w.push("/"+x+" "+t[x].value));w.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+w.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=t,this},function(n){var e=function(){var r='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',i=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),a=unescape(encodeURIComponent(r)),o=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),s=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),u=unescape(encodeURIComponent("</x:xmpmeta>")),f=a.length+o.length+s.length+i.length+u.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+f+" >>"),this.internal.write("stream"),this.internal.write(i+a+o+s+u),this.internal.write("endstream"),this.internal.write("endobj")},t=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};n.addMetadata=function(r,i){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:r,namespaceuri:i||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",t),this.internal.events.subscribe("postPutResources",e)),this}}(Ht.API),function(n){var e=n.API,t=e.pdfEscape16=function(a,o){for(var s,u=o.metadata.Unicode.widths,f=["","0","00","000","0000"],h=[""],p=0,g=a.length;p<g;++p){if(s=o.metadata.characterToGlyph(a.charCodeAt(p)),o.metadata.glyIdsUsed.push(s),o.metadata.toUnicode[s]=a.charCodeAt(p),u.indexOf(s)==-1&&(u.push(s),u.push([parseInt(o.metadata.widthOfGlyph(s),10)])),s=="0")return h.join("");s=s.toString(16),h.push(f[4-s.length],s)}return h.join("")},r=function(a){var o,s,u,f,h,p,g;for(h=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,u=[],p=0,g=(s=Object.keys(a).sort(function(m,x){return m-x})).length;p<g;p++)o=s[p],u.length>=100&&(h+=`
`+u.length+` beginbfchar
`+u.join(`
`)+`
endbfchar`,u=[]),a[o]!==void 0&&a[o]!==null&&typeof a[o].toString=="function"&&(f=("0000"+a[o].toString(16)).slice(-4),o=("0000"+(+o).toString(16)).slice(-4),u.push("<"+o+"><"+f+">"));return u.length&&(h+=`
`+u.length+` beginbfchar
`+u.join(`
`)+`
endbfchar
`),h+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(a){(function(o){var s=o.font,u=o.out,f=o.newObject,h=o.putStream;if(s.metadata instanceof n.API.TTFFont&&s.encoding==="Identity-H"){for(var p=s.metadata.Unicode.widths,g=s.metadata.subset.encode(s.metadata.glyIdsUsed,1),m="",x=0;x<g.length;x++)m+=String.fromCharCode(g[x]);var w=f();h({data:m,addLength1:!0,objectId:w}),u("endobj");var I=f();h({data:r(s.metadata.toUnicode),addLength1:!0,objectId:I}),u("endobj");var C=f();u("<<"),u("/Type /FontDescriptor"),u("/FontName /"+nd(s.fontName)),u("/FontFile2 "+w+" 0 R"),u("/FontBBox "+n.API.PDFObject.convert(s.metadata.bbox)),u("/Flags "+s.metadata.flags),u("/StemV "+s.metadata.stemV),u("/ItalicAngle "+s.metadata.italicAngle),u("/Ascent "+s.metadata.ascender),u("/Descent "+s.metadata.decender),u("/CapHeight "+s.metadata.capHeight),u(">>"),u("endobj");var P=f();u("<<"),u("/Type /Font"),u("/BaseFont /"+nd(s.fontName)),u("/FontDescriptor "+C+" 0 R"),u("/W "+n.API.PDFObject.convert(p)),u("/CIDToGIDMap /Identity"),u("/DW 1000"),u("/Subtype /CIDFontType2"),u("/CIDSystemInfo"),u("<<"),u("/Supplement 0"),u("/Registry (Adobe)"),u("/Ordering ("+s.encoding+")"),u(">>"),u(">>"),u("endobj"),s.objectNumber=f(),u("<<"),u("/Type /Font"),u("/Subtype /Type0"),u("/ToUnicode "+I+" 0 R"),u("/BaseFont /"+nd(s.fontName)),u("/Encoding /"+s.encoding),u("/DescendantFonts ["+P+" 0 R]"),u(">>"),u("endobj"),s.isAlreadyPutted=!0}})(a)}]),e.events.push(["putFont",function(a){(function(o){var s=o.font,u=o.out,f=o.newObject,h=o.putStream;if(s.metadata instanceof n.API.TTFFont&&s.encoding==="WinAnsiEncoding"){for(var p=s.metadata.rawData,g="",m=0;m<p.length;m++)g+=String.fromCharCode(p[m]);var x=f();h({data:g,addLength1:!0,objectId:x}),u("endobj");var w=f();h({data:r(s.metadata.toUnicode),addLength1:!0,objectId:w}),u("endobj");var I=f();u("<<"),u("/Descent "+s.metadata.decender),u("/CapHeight "+s.metadata.capHeight),u("/StemV "+s.metadata.stemV),u("/Type /FontDescriptor"),u("/FontFile2 "+x+" 0 R"),u("/Flags 96"),u("/FontBBox "+n.API.PDFObject.convert(s.metadata.bbox)),u("/FontName /"+nd(s.fontName)),u("/ItalicAngle "+s.metadata.italicAngle),u("/Ascent "+s.metadata.ascender),u(">>"),u("endobj"),s.objectNumber=f();for(var C=0;C<s.metadata.hmtx.widths.length;C++)s.metadata.hmtx.widths[C]=parseInt(s.metadata.hmtx.widths[C]*(1e3/s.metadata.head.unitsPerEm));u("<</Subtype/TrueType/Type/Font/ToUnicode "+w+" 0 R/BaseFont/"+nd(s.fontName)+"/FontDescriptor "+I+" 0 R/Encoding/"+s.encoding+" /FirstChar 29 /LastChar 255 /Widths "+n.API.PDFObject.convert(s.metadata.hmtx.widths)+">>"),u("endobj"),s.isAlreadyPutted=!0}})(a)}]);var i=function(a){var o,s=a.text||"",u=a.x,f=a.y,h=a.options||{},p=a.mutex||{},g=p.pdfEscape,m=p.activeFontKey,x=p.fonts,w=m,I="",C=0,P="",B=x[w].encoding;if(x[w].encoding!=="Identity-H")return{text:s,x:u,y:f,options:h,mutex:p};for(P=s,w=m,Array.isArray(s)&&(P=s[0]),C=0;C<P.length;C+=1)x[w].metadata.hasOwnProperty("cmap")&&(o=x[w].metadata.cmap.unicode.codeMap[P[C].charCodeAt(0)]),o||P[C].charCodeAt(0)<256&&x[w].metadata.hasOwnProperty("Unicode")?I+=P[C]:I+="";var V="";return parseInt(w.slice(1))<14||B==="WinAnsiEncoding"?V=g(I,w).split("").map(function(Y){return Y.charCodeAt(0).toString(16)}).join(""):B==="Identity-H"&&(V=t(I,x[w])),p.isHex=!0,{text:V,x:u,y:f,options:h,mutex:p}};e.events.push(["postProcessText",function(a){var o=a.text||"",s=[],u={text:o,x:a.x,y:a.y,options:a.options,mutex:a.mutex};if(Array.isArray(o)){var f=0;for(f=0;f<o.length;f+=1)Array.isArray(o[f])&&o[f].length===3?s.push([i(Object.assign({},u,{text:o[f][0]})).text,o[f][1],o[f][2]]):s.push(i(Object.assign({},u,{text:o[f]})).text);a.text=s}else a.text=i(Object.assign({},u,{text:o})).text}])}(Ht),function(n){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};n.existsFileInVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0},n.addFileToVFS=function(t,r){return e.call(this),this.internal.vFS[t]=r,this},n.getFileFromVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0?this.internal.vFS[t]:null}}(Ht.API),function(n){n.__bidiEngine__=n.prototype.__bidiEngine__=function(r){var i,a,o,s,u,f,h,p=e,g=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],m=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],x={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},w={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},I=["(",")","(","<",">","<","[","]","[","{","}","{","«","»","«","‹","›","‹","⁅","⁆","⁅","⁽","⁾","⁽","₍","₎","₍","≤","≥","≤","〈","〉","〈","﹙","﹚","﹙","﹛","﹜","﹛","﹝","﹞","﹝","﹤","﹥","﹤"],C=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),P=!1,B=0;this.__bidiEngine__={};var V=function(R){var L=R.charCodeAt(),j=L>>8,H=w[j];return H!==void 0?p[256*H+(255&L)]:j===252||j===253?"AL":C.test(j)?"L":j===8?"R":"N"},Y=function(R){for(var L,j=0;j<R.length;j++){if((L=V(R.charAt(j)))==="L")return!1;if(L==="R")return!0}return!1},q=function(R,L,j,H){var ne,U,z,ee,le=L[H];switch(le){case"L":case"R":P=!1;break;case"N":case"AN":break;case"EN":P&&(le="AN");break;case"AL":P=!0,le="R";break;case"WS":le="N";break;case"CS":H<1||H+1>=L.length||(ne=j[H-1])!=="EN"&&ne!=="AN"||(U=L[H+1])!=="EN"&&U!=="AN"?le="N":P&&(U="AN"),le=U===ne?U:"N";break;case"ES":le=(ne=H>0?j[H-1]:"B")==="EN"&&H+1<L.length&&L[H+1]==="EN"?"EN":"N";break;case"ET":if(H>0&&j[H-1]==="EN"){le="EN";break}if(P){le="N";break}for(z=H+1,ee=L.length;z<ee&&L[z]==="ET";)z++;le=z<ee&&L[z]==="EN"?"EN":"N";break;case"NSM":if(o&&!s){for(ee=L.length,z=H+1;z<ee&&L[z]==="NSM";)z++;if(z<ee){var $=R[H],ve=$>=1425&&$<=2303||$===64286;if(ne=L[z],ve&&(ne==="R"||ne==="AL")){le="R";break}}}le=H<1||(ne=L[H-1])==="B"?"N":j[H-1];break;case"B":P=!1,i=!0,le=B;break;case"S":a=!0,le="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":P=!1;break;case"BN":le="N"}return le},D=function(R,L,j){var H=R.split("");return j&&A(H,j,{hiLevel:B}),H.reverse(),L&&L.reverse(),H.join("")},A=function(R,L,j){var H,ne,U,z,ee,le=-1,$=R.length,ve=0,G=[],Q=B?m:g,te=[];for(P=!1,i=!1,a=!1,ne=0;ne<$;ne++)te[ne]=V(R[ne]);for(U=0;U<$;U++){if(ee=ve,G[U]=q(R,te,G,U),H=240&(ve=Q[ee][x[G[U]]]),ve&=15,L[U]=z=Q[ve][5],H>0)if(H===16){for(ne=le;ne<U;ne++)L[ne]=1;le=-1}else le=-1;if(Q[ve][6])le===-1&&(le=U);else if(le>-1){for(ne=le;ne<U;ne++)L[ne]=z;le=-1}te[U]==="B"&&(L[U]=0),j.hiLevel|=z}a&&function(ie,de,Ae){for(var be=0;be<Ae;be++)if(ie[be]==="S"){de[be]=B;for(var Te=be-1;Te>=0&&ie[Te]==="WS";Te--)de[Te]=B}}(te,L,$)},T=function(R,L,j,H,ne){if(!(ne.hiLevel<R)){if(R===1&&B===1&&!i)return L.reverse(),void(j&&j.reverse());for(var U,z,ee,le,$=L.length,ve=0;ve<$;){if(H[ve]>=R){for(ee=ve+1;ee<$&&H[ee]>=R;)ee++;for(le=ve,z=ee-1;le<z;le++,z--)U=L[le],L[le]=L[z],L[z]=U,j&&(U=j[le],j[le]=j[z],j[z]=U);ve=ee}ve++}}},k=function(R,L,j){var H=R.split(""),ne={hiLevel:B};return j||(j=[]),A(H,j,ne),function(U,z,ee){if(ee.hiLevel!==0&&h)for(var le,$=0;$<U.length;$++)z[$]===1&&(le=I.indexOf(U[$]))>=0&&(U[$]=I[le+1])}(H,j,ne),T(2,H,L,j,ne),T(1,H,L,j,ne),H.join("")};return this.__bidiEngine__.doBidiReorder=function(R,L,j){if(function(ne,U){if(U)for(var z=0;z<ne.length;z++)U[z]=z;s===void 0&&(s=Y(ne)),f===void 0&&(f=Y(ne))}(R,L),o||!u||f)if(o&&u&&s^f)B=s?1:0,R=D(R,L,j);else if(!o&&u&&f)B=s?1:0,R=k(R,L,j),R=D(R,L);else if(!o||s||u||f){if(o&&!u&&s^f)R=D(R,L),s?(B=0,R=k(R,L,j)):(B=1,R=k(R,L,j),R=D(R,L));else if(o&&s&&!u&&f)B=1,R=k(R,L,j),R=D(R,L);else if(!o&&!u&&s^f){var H=h;s?(B=1,R=k(R,L,j),B=0,h=!1,R=k(R,L,j),h=H):(B=0,R=k(R,L,j),R=D(R,L),B=1,h=!1,R=k(R,L,j),h=H,R=D(R,L))}}else B=0,R=k(R,L,j);else B=s?1:0,R=k(R,L,j);return R},this.__bidiEngine__.setOptions=function(R){R&&(o=R.isInputVisual,u=R.isOutputVisual,s=R.isInputRtl,f=R.isOutputRtl,h=R.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],t=new n.__bidiEngine__({isInputVisual:!0});n.API.events.push(["postProcessText",function(r){var i=r.text;r.x,r.y;var a=r.options||{};r.mutex,a.lang;var o=[];if(a.isInputVisual=typeof a.isInputVisual!="boolean"||a.isInputVisual,t.setOptions(a),Object.prototype.toString.call(i)==="[object Array]"){var s=0;for(o=[],s=0;s<i.length;s+=1)Object.prototype.toString.call(i[s])==="[object Array]"?o.push([t.doBidiReorder(i[s][0]),i[s][1],i[s][2]]):o.push([t.doBidiReorder(i[s])]);r.text=o}else r.text=t.doBidiReorder(i);t.setOptions({isInputVisual:!0})}])}(Ht),Ht.API.TTFFont=function(){function n(e){var t;if(this.rawData=e,t=this.contents=new pf(e),this.contents.pos=4,t.readString(4)==="ttcf")throw new Error("TTCF not supported.");t.pos=0,this.parse(),this.subset=new $z(this),this.registerTTF()}return n.open=function(e){return new n(e)},n.prototype.parse=function(){return this.directory=new Pz(this.contents),this.head=new kz(this),this.name=new Uz(this),this.cmap=new S8(this),this.toUnicode={},this.hhea=new Mz(this),this.maxp=new Vz(this),this.hmtx=new zz(this),this.post=new jz(this),this.os2=new Bz(this),this.loca=new Gz(this),this.glyf=new qz(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},n.prototype.registerTTF=function(){var e,t,r,i,a;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var o,s,u,f;for(f=[],o=0,s=(u=this.bbox).length;o<s;o++)e=u[o],f.push(Math.round(e*this.scaleFactor));return f}).call(this),this.stemV=0,this.post.exists?(r=255&(i=this.post.italic_angle),(32768&(t=i>>16))!=0&&(t=-(1+(65535^t))),this.italicAngle=+(t+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(a=this.familyClass)===1||a===2||a===3||a===4||a===5||a===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},n.prototype.characterToGlyph=function(e){var t;return((t=this.cmap.unicode)!=null?t.codeMap[e]:void 0)||0},n.prototype.widthOfGlyph=function(e){var t;return t=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*t},n.prototype.widthOfString=function(e,t,r){var i,a,o,s;for(o=0,a=0,s=(e=""+e).length;0<=s?a<s:a>s;a=0<=s?++a:--a)i=e.charCodeAt(a),o+=this.widthOfGlyph(this.characterToGlyph(i))+r*(1e3/t)||0;return o*(t/1e3)},n.prototype.lineHeight=function(e,t){var r;return t==null&&(t=!1),r=t?this.lineGap:0,(this.ascender+r-this.decender)/1e3*e},n}();var dl,pf=function(){function n(e){this.data=e??[],this.pos=0,this.length=this.data.length}return n.prototype.readByte=function(){return this.data[this.pos++]},n.prototype.writeByte=function(e){return this.data[this.pos++]=e},n.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},n.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},n.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},n.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},n.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},n.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},n.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},n.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},n.prototype.readString=function(e){var t,r;for(r=[],t=0;0<=e?t<e:t>e;t=0<=e?++t:--t)r[t]=String.fromCharCode(this.readByte());return r.join("")},n.prototype.writeString=function(e){var t,r,i;for(i=[],t=0,r=e.length;0<=r?t<r:t>r;t=0<=r?++t:--t)i.push(this.writeByte(e.charCodeAt(t)));return i},n.prototype.readShort=function(){return this.readInt16()},n.prototype.writeShort=function(e){return this.writeInt16(e)},n.prototype.readLongLong=function(){var e,t,r,i,a,o,s,u;return e=this.readByte(),t=this.readByte(),r=this.readByte(),i=this.readByte(),a=this.readByte(),o=this.readByte(),s=this.readByte(),u=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^t)+1099511627776*(255^r)+4294967296*(255^i)+16777216*(255^a)+65536*(255^o)+256*(255^s)+(255^u)+1):72057594037927940*e+281474976710656*t+1099511627776*r+4294967296*i+16777216*a+65536*o+256*s+u},n.prototype.writeLongLong=function(e){var t,r;return t=Math.floor(e/4294967296),r=4294967295&e,this.writeByte(t>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},n.prototype.readInt=function(){return this.readInt32()},n.prototype.writeInt=function(e){return this.writeInt32(e)},n.prototype.read=function(e){var t,r;for(t=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)t.push(this.readByte());return t},n.prototype.write=function(e){var t,r,i,a;for(a=[],r=0,i=e.length;r<i;r++)t=e[r],a.push(this.writeByte(t));return a},n}(),Pz=function(){var n;function e(t){var r,i,a;for(this.scalarType=t.readInt(),this.tableCount=t.readShort(),this.searchRange=t.readShort(),this.entrySelector=t.readShort(),this.rangeShift=t.readShort(),this.tables={},i=0,a=this.tableCount;0<=a?i<a:i>a;i=0<=a?++i:--i)r={tag:t.readString(4),checksum:t.readInt(),offset:t.readInt(),length:t.readInt()},this.tables[r.tag]=r}return e.prototype.encode=function(t){var r,i,a,o,s,u,f,h,p,g,m,x,w;for(w in m=Object.keys(t).length,u=Math.log(2),p=16*Math.floor(Math.log(m)/u),o=Math.floor(p/u),h=16*m-p,(i=new pf).writeInt(this.scalarType),i.writeShort(m),i.writeShort(p),i.writeShort(o),i.writeShort(h),a=16*m,f=i.pos+a,s=null,x=[],t)for(g=t[w],i.writeString(w),i.writeInt(n(g)),i.writeInt(f),i.writeInt(g.length),x=x.concat(g),w==="head"&&(s=f),f+=g.length;f%4;)x.push(0),f++;return i.write(x),r=2981146554-n(i.data),i.pos=s+8,i.writeUInt32(r),i.data},n=function(t){var r,i,a,o;for(t=C8.call(t);t.length%4;)t.push(0);for(a=new pf(t),i=0,r=0,o=t.length;r<o;r=r+=4)i+=a.readUInt32();return 4294967295&i},e}(),Lz={}.hasOwnProperty,su=function(n,e){for(var t in e)Lz.call(e,t)&&(n[t]=e[t]);function r(){this.constructor=n}return r.prototype=e.prototype,n.prototype=new r,n.__super__=e.prototype,n};dl=function(){function n(e){var t;this.file=e,t=this.file.directory.tables[this.tag],this.exists=!!t,t&&(this.offset=t.offset,this.length=t.length,this.parse(this.file.contents))}return n.prototype.parse=function(){},n.prototype.encode=function(){},n.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},n}();var kz=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return su(e,dl),e.prototype.tag="head",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.revision=t.readInt(),this.checkSumAdjustment=t.readInt(),this.magicNumber=t.readInt(),this.flags=t.readShort(),this.unitsPerEm=t.readShort(),this.created=t.readLongLong(),this.modified=t.readLongLong(),this.xMin=t.readShort(),this.yMin=t.readShort(),this.xMax=t.readShort(),this.yMax=t.readShort(),this.macStyle=t.readShort(),this.lowestRecPPEM=t.readShort(),this.fontDirectionHint=t.readShort(),this.indexToLocFormat=t.readShort(),this.glyphDataFormat=t.readShort()},e.prototype.encode=function(t){var r;return(r=new pf).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(t),r.writeShort(this.glyphDataFormat),r.data},e}(),B4=function(){function n(e,t){var r,i,a,o,s,u,f,h,p,g,m,x,w,I,C,P,B;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=t+e.readInt(),p=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(u=0;u<256;++u)this.codeMap[u]=e.readByte();break;case 4:for(m=e.readUInt16(),g=m/2,e.pos+=6,a=function(){var V,Y;for(Y=[],u=V=0;0<=g?V<g:V>g;u=0<=g?++V:--V)Y.push(e.readUInt16());return Y}(),e.pos+=2,w=function(){var V,Y;for(Y=[],u=V=0;0<=g?V<g:V>g;u=0<=g?++V:--V)Y.push(e.readUInt16());return Y}(),f=function(){var V,Y;for(Y=[],u=V=0;0<=g?V<g:V>g;u=0<=g?++V:--V)Y.push(e.readUInt16());return Y}(),h=function(){var V,Y;for(Y=[],u=V=0;0<=g?V<g:V>g;u=0<=g?++V:--V)Y.push(e.readUInt16());return Y}(),i=(this.length-e.pos+this.offset)/2,s=function(){var V,Y;for(Y=[],u=V=0;0<=i?V<i:V>i;u=0<=i?++V:--V)Y.push(e.readUInt16());return Y}(),u=C=0,B=a.length;C<B;u=++C)for(I=a[u],r=P=x=w[u];x<=I?P<=I:P>=I;r=x<=I?++P:--P)h[u]===0?o=r+f[u]:(o=s[h[u]/2+(r-x)-(g-u)]||0)!==0&&(o+=f[u]),this.codeMap[r]=65535&o}e.pos=p}return n.encode=function(e,t){var r,i,a,o,s,u,f,h,p,g,m,x,w,I,C,P,B,V,Y,q,D,A,T,k,R,L,j,H,ne,U,z,ee,le,$,ve,G,Q,te,ie,de,Ae,be,Te,We,He,rt;switch(H=new pf,o=Object.keys(e).sort(function(st,wt){return st-wt}),t){case"macroman":for(w=0,I=function(){var st=[];for(x=0;x<256;++x)st.push(0);return st}(),P={0:0},a={},ne=0,le=o.length;ne<le;ne++)P[Te=e[i=o[ne]]]==null&&(P[Te]=++w),a[i]={old:e[i],new:P[e[i]]},I[i]=P[e[i]];return H.writeUInt16(1),H.writeUInt16(0),H.writeUInt32(12),H.writeUInt16(0),H.writeUInt16(262),H.writeUInt16(0),H.write(I),{charMap:a,subtable:H.data,maxGlyphID:w+1};case"unicode":for(L=[],p=[],B=0,P={},r={},C=f=null,U=0,$=o.length;U<$;U++)P[Y=e[i=o[U]]]==null&&(P[Y]=++B),r[i]={old:Y,new:P[Y]},s=P[Y]-i,C!=null&&s===f||(C&&p.push(C),L.push(i),f=s),C=i;for(C&&p.push(C),p.push(65535),L.push(65535),k=2*(T=L.length),A=2*Math.pow(Math.log(T)/Math.LN2,2),g=Math.log(A/2)/Math.LN2,D=2*T-A,u=[],q=[],m=[],x=z=0,ve=L.length;z<ve;x=++z){if(R=L[x],h=p[x],R===65535){u.push(0),q.push(0);break}if(R-(j=r[R].new)>=32768)for(u.push(0),q.push(2*(m.length+T-x)),i=ee=R;R<=h?ee<=h:ee>=h;i=R<=h?++ee:--ee)m.push(r[i].new);else u.push(j-R),q.push(0)}for(H.writeUInt16(3),H.writeUInt16(1),H.writeUInt32(12),H.writeUInt16(4),H.writeUInt16(16+8*T+2*m.length),H.writeUInt16(0),H.writeUInt16(k),H.writeUInt16(A),H.writeUInt16(g),H.writeUInt16(D),Ae=0,G=p.length;Ae<G;Ae++)i=p[Ae],H.writeUInt16(i);for(H.writeUInt16(0),be=0,Q=L.length;be<Q;be++)i=L[be],H.writeUInt16(i);for(We=0,te=u.length;We<te;We++)s=u[We],H.writeUInt16(s);for(He=0,ie=q.length;He<ie;He++)V=q[He],H.writeUInt16(V);for(rt=0,de=m.length;rt<de;rt++)w=m[rt],H.writeUInt16(w);return{charMap:r,subtable:H.data,maxGlyphID:B+1}}},n}(),S8=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return su(e,dl),e.prototype.tag="cmap",e.prototype.parse=function(t){var r,i,a;for(t.pos=this.offset,this.version=t.readUInt16(),a=t.readUInt16(),this.tables=[],this.unicode=null,i=0;0<=a?i<a:i>a;i=0<=a?++i:--i)r=new B4(t,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},e.encode=function(t,r){var i,a;return r==null&&(r="macroman"),i=B4.encode(t,r),(a=new pf).writeUInt16(0),a.writeUInt16(1),i.table=a.data.concat(i.subtable),i},e}(),Mz=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return su(e,dl),e.prototype.tag="hhea",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.ascender=t.readShort(),this.decender=t.readShort(),this.lineGap=t.readShort(),this.advanceWidthMax=t.readShort(),this.minLeftSideBearing=t.readShort(),this.minRightSideBearing=t.readShort(),this.xMaxExtent=t.readShort(),this.caretSlopeRise=t.readShort(),this.caretSlopeRun=t.readShort(),this.caretOffset=t.readShort(),t.pos+=8,this.metricDataFormat=t.readShort(),this.numberOfMetrics=t.readUInt16()},e}(),Bz=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return su(e,dl),e.prototype.tag="OS/2",e.prototype.parse=function(t){if(t.pos=this.offset,this.version=t.readUInt16(),this.averageCharWidth=t.readShort(),this.weightClass=t.readUInt16(),this.widthClass=t.readUInt16(),this.type=t.readShort(),this.ySubscriptXSize=t.readShort(),this.ySubscriptYSize=t.readShort(),this.ySubscriptXOffset=t.readShort(),this.ySubscriptYOffset=t.readShort(),this.ySuperscriptXSize=t.readShort(),this.ySuperscriptYSize=t.readShort(),this.ySuperscriptXOffset=t.readShort(),this.ySuperscriptYOffset=t.readShort(),this.yStrikeoutSize=t.readShort(),this.yStrikeoutPosition=t.readShort(),this.familyClass=t.readShort(),this.panose=function(){var r,i;for(i=[],r=0;r<10;++r)i.push(t.readByte());return i}(),this.charRange=function(){var r,i;for(i=[],r=0;r<4;++r)i.push(t.readInt());return i}(),this.vendorID=t.readString(4),this.selection=t.readShort(),this.firstCharIndex=t.readShort(),this.lastCharIndex=t.readShort(),this.version>0&&(this.ascent=t.readShort(),this.descent=t.readShort(),this.lineGap=t.readShort(),this.winAscent=t.readShort(),this.winDescent=t.readShort(),this.codePageRange=function(){var r,i;for(i=[],r=0;r<2;r=++r)i.push(t.readInt());return i}(),this.version>1))return this.xHeight=t.readShort(),this.capHeight=t.readShort(),this.defaultChar=t.readShort(),this.breakChar=t.readShort(),this.maxContext=t.readShort()},e}(),jz=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return su(e,dl),e.prototype.tag="post",e.prototype.parse=function(t){var r,i,a;switch(t.pos=this.offset,this.format=t.readInt(),this.italicAngle=t.readInt(),this.underlinePosition=t.readShort(),this.underlineThickness=t.readShort(),this.isFixedPitch=t.readInt(),this.minMemType42=t.readInt(),this.maxMemType42=t.readInt(),this.minMemType1=t.readInt(),this.maxMemType1=t.readInt(),this.format){case 65536:break;case 131072:var o;for(i=t.readUInt16(),this.glyphNameIndex=[],o=0;0<=i?o<i:o>i;o=0<=i?++o:--o)this.glyphNameIndex.push(t.readUInt16());for(this.names=[],a=[];t.pos<this.offset+this.length;)r=t.readByte(),a.push(this.names.push(t.readString(r)));return a;case 151552:return i=t.readUInt16(),this.offsets=t.read(i);case 196608:break;case 262144:return this.map=(function(){var s,u,f;for(f=[],o=s=0,u=this.file.maxp.numGlyphs;0<=u?s<u:s>u;o=0<=u?++s:--s)f.push(t.readUInt32());return f}).call(this)}},e}(),Fz=function(n,e){this.raw=n,this.length=n.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},Uz=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return su(e,dl),e.prototype.tag="name",e.prototype.parse=function(t){var r,i,a,o,s,u,f,h,p,g,m;for(t.pos=this.offset,t.readShort(),r=t.readShort(),u=t.readShort(),i=[],o=0;0<=r?o<r:o>r;o=0<=r?++o:--o)i.push({platformID:t.readShort(),encodingID:t.readShort(),languageID:t.readShort(),nameID:t.readShort(),length:t.readShort(),offset:this.offset+u+t.readShort()});for(f={},o=p=0,g=i.length;p<g;o=++p)a=i[o],t.pos=a.offset,h=t.readString(a.length),s=new Fz(h,a),f[m=a.nameID]==null&&(f[m]=[]),f[a.nameID].push(s);this.strings=f,this.copyright=f[0],this.fontFamily=f[1],this.fontSubfamily=f[2],this.uniqueSubfamily=f[3],this.fontName=f[4],this.version=f[5];try{this.postscriptName=f[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=f[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=f[7],this.manufacturer=f[8],this.designer=f[9],this.description=f[10],this.vendorUrl=f[11],this.designerUrl=f[12],this.license=f[13],this.licenseUrl=f[14],this.preferredFamily=f[15],this.preferredSubfamily=f[17],this.compatibleFull=f[18],this.sampleText=f[19]},e}(),Vz=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return su(e,dl),e.prototype.tag="maxp",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.numGlyphs=t.readUInt16(),this.maxPoints=t.readUInt16(),this.maxContours=t.readUInt16(),this.maxCompositePoints=t.readUInt16(),this.maxComponentContours=t.readUInt16(),this.maxZones=t.readUInt16(),this.maxTwilightPoints=t.readUInt16(),this.maxStorage=t.readUInt16(),this.maxFunctionDefs=t.readUInt16(),this.maxInstructionDefs=t.readUInt16(),this.maxStackElements=t.readUInt16(),this.maxSizeOfInstructions=t.readUInt16(),this.maxComponentElements=t.readUInt16(),this.maxComponentDepth=t.readUInt16()},e}(),zz=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return su(e,dl),e.prototype.tag="hmtx",e.prototype.parse=function(t){var r,i,a,o,s,u,f;for(t.pos=this.offset,this.metrics=[],r=0,u=this.file.hhea.numberOfMetrics;0<=u?r<u:r>u;r=0<=u?++r:--r)this.metrics.push({advance:t.readUInt16(),lsb:t.readInt16()});for(a=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var h,p;for(p=[],r=h=0;0<=a?h<a:h>a;r=0<=a?++h:--h)p.push(t.readInt16());return p}(),this.widths=(function(){var h,p,g,m;for(m=[],h=0,p=(g=this.metrics).length;h<p;h++)o=g[h],m.push(o.advance);return m}).call(this),i=this.widths[this.widths.length-1],f=[],r=s=0;0<=a?s<a:s>a;r=0<=a?++s:--s)f.push(this.widths.push(i));return f},e.prototype.forGlyph=function(t){return t in this.metrics?this.metrics[t]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[t-this.metrics.length]}},e}(),C8=[].slice,qz=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return su(e,dl),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(t){var r,i,a,o,s,u,f,h,p,g;return t in this.cache?this.cache[t]:(o=this.file.loca,r=this.file.contents,i=o.indexOf(t),(a=o.lengthOf(t))===0?this.cache[t]=null:(r.pos=this.offset+i,s=(u=new pf(r.read(a))).readShort(),h=u.readShort(),g=u.readShort(),f=u.readShort(),p=u.readShort(),this.cache[t]=s===-1?new Wz(u,h,g,f,p):new Hz(u,s,h,g,f,p),this.cache[t]))},e.prototype.encode=function(t,r,i){var a,o,s,u,f;for(s=[],o=[],u=0,f=r.length;u<f;u++)a=t[r[u]],o.push(s.length),a&&(s=s.concat(a.encode(i)));return o.push(s.length),{table:s,offsets:o}},e}(),Hz=function(){function n(e,t,r,i,a,o){this.raw=e,this.numberOfContours=t,this.xMin=r,this.yMin=i,this.xMax=a,this.yMax=o,this.compound=!1}return n.prototype.encode=function(){return this.raw.data},n}(),Wz=function(){function n(e,t,r,i,a){var o,s;for(this.raw=e,this.xMin=t,this.yMin=r,this.xMax=i,this.yMax=a,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],o=this.raw;s=o.readShort(),this.glyphOffsets.push(o.pos),this.glyphIDs.push(o.readUInt16()),32&s;)o.pos+=1&s?4:2,128&s?o.pos+=8:64&s?o.pos+=4:8&s&&(o.pos+=2)}return n.prototype.encode=function(){var e,t,r;for(t=new pf(C8.call(this.raw.data)),e=0,r=this.glyphIDs.length;e<r;++e)t.pos=this.glyphOffsets[e];return t.data},n}(),Gz=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return su(e,dl),e.prototype.tag="loca",e.prototype.parse=function(t){var r,i;return t.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var a,o;for(o=[],i=0,a=this.length;i<a;i+=2)o.push(2*t.readUInt16());return o}).call(this):(function(){var a,o;for(o=[],i=0,a=this.length;i<a;i+=4)o.push(t.readUInt32());return o}).call(this)},e.prototype.indexOf=function(t){return this.offsets[t]},e.prototype.lengthOf=function(t){return this.offsets[t+1]-this.offsets[t]},e.prototype.encode=function(t,r){for(var i=new Uint32Array(this.offsets.length),a=0,o=0,s=0;s<i.length;++s)if(i[s]=a,o<r.length&&r[o]==s){++o,i[s]=a;var u=this.offsets[s],f=this.offsets[s+1]-u;f>0&&(a+=f)}for(var h=new Array(4*i.length),p=0;p<i.length;++p)h[4*p+3]=255&i[p],h[4*p+2]=(65280&i[p])>>8,h[4*p+1]=(16711680&i[p])>>16,h[4*p]=(4278190080&i[p])>>24;return h},e}(),$z=function(){function n(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return n.prototype.generateCmap=function(){var e,t,r,i,a;for(t in i=this.font.cmap.tables[0].codeMap,e={},a=this.subset)r=a[t],e[t]=i[r];return e},n.prototype.glyphsFor=function(e){var t,r,i,a,o,s,u;for(i={},o=0,s=e.length;o<s;o++)i[a=e[o]]=this.font.glyf.glyphFor(a);for(a in t=[],i)(r=i[a])!=null&&r.compound&&t.push.apply(t,r.glyphIDs);if(t.length>0)for(a in u=this.glyphsFor(t))r=u[a],i[a]=r;return i},n.prototype.encode=function(e,t){var r,i,a,o,s,u,f,h,p,g,m,x,w,I,C;for(i in r=S8.encode(this.generateCmap(),"unicode"),o=this.glyphsFor(e),m={0:0},C=r.charMap)m[(u=C[i]).old]=u.new;for(x in g=r.maxGlyphID,o)x in m||(m[x]=g++);return h=function(P){var B,V;for(B in V={},P)V[P[B]]=B;return V}(m),p=Object.keys(h).sort(function(P,B){return P-B}),w=function(){var P,B,V;for(V=[],P=0,B=p.length;P<B;P++)s=p[P],V.push(h[s]);return V}(),a=this.font.glyf.encode(o,w,m),f=this.font.loca.encode(a.offsets,w),I={cmap:this.font.cmap.raw(),glyf:a.table,loca:f,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(t)},this.font.os2.exists&&(I["OS/2"]=this.font.os2.raw()),this.font.directory.encode(I)},n}();Ht.API.PDFObject=function(){var n;function e(){}return n=function(t,r){return(Array(r+1).join("0")+t).slice(-r)},e.convert=function(t){var r,i,a,o;if(Array.isArray(t))return"["+function(){var s,u,f;for(f=[],s=0,u=t.length;s<u;s++)r=t[s],f.push(e.convert(r));return f}().join(" ")+"]";if(typeof t=="string")return"/"+t;if(t!=null&&t.isString)return"("+t+")";if(t instanceof Date)return"(D:"+n(t.getUTCFullYear(),4)+n(t.getUTCMonth(),2)+n(t.getUTCDate(),2)+n(t.getUTCHours(),2)+n(t.getUTCMinutes(),2)+n(t.getUTCSeconds(),2)+"Z)";if({}.toString.call(t)==="[object Object]"){for(i in a=["<<"],t)o=t[i],a.push("/"+i+" "+e.convert(o));return a.push(">>"),a.join(`
`)}return""+t},e}();function T8(n,e,t,r,i){r=r||{};var a=1.15,o=i.internal.scaleFactor,s=i.internal.getFontSize()/o,u=i.getLineHeightFactor?i.getLineHeightFactor():a,f=s*u,h=/\r\n|\r|\n/g,p="",g=1;if((r.valign==="middle"||r.valign==="bottom"||r.halign==="center"||r.halign==="right")&&(p=typeof n=="string"?n.split(h):n,g=p.length||1),t+=s*(2-a),r.valign==="middle"?t-=g/2*f:r.valign==="bottom"&&(t-=g*f),r.halign==="center"||r.halign==="right"){var m=s;if(r.halign==="center"&&(m*=.5),p&&g>=1){for(var x=0;x<p.length;x++)i.text(p[x],e-i.getStringUnitWidth(p[x])*m,t),t+=f;return i}e-=i.getStringUnitWidth(n)*m}return r.halign==="justify"?i.text(n,e,t,{maxWidth:r.maxWidth||100,align:"justify"}):i.text(n,e,t),i}var j4={},md=function(){function n(e){this.jsPDFDocument=e,this.userStyles={textColor:e.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:e.internal.getFontSize(),fontStyle:e.internal.getFont().fontStyle,font:e.internal.getFont().fontName,lineWidth:e.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:e.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return n.setDefaults=function(e,t){t===void 0&&(t=null),t?t.__autoTableDocumentDefaults=e:j4=e},n.unifyColor=function(e){return Array.isArray(e)?e:typeof e=="number"?[e,e,e]:typeof e=="string"?[e]:null},n.prototype.applyStyles=function(e,t){var r,i,a;t===void 0&&(t=!1),e.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(e.fontStyle);var o=this.jsPDFDocument.internal.getFont(),s=o.fontStyle,u=o.fontName;if(e.font&&(u=e.font),e.fontStyle){s=e.fontStyle;var f=this.getFontList()[u];f&&f.indexOf(s)===-1&&this.jsPDFDocument.setFontStyle&&(this.jsPDFDocument.setFontStyle(f[0]),s=f[0])}if(this.jsPDFDocument.setFont(u,s),e.fontSize&&this.jsPDFDocument.setFontSize(e.fontSize),!t){var h=n.unifyColor(e.fillColor);h&&(r=this.jsPDFDocument).setFillColor.apply(r,h),h=n.unifyColor(e.textColor),h&&(i=this.jsPDFDocument).setTextColor.apply(i,h),h=n.unifyColor(e.lineColor),h&&(a=this.jsPDFDocument).setDrawColor.apply(a,h),typeof e.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(e.lineWidth)}},n.prototype.splitTextToSize=function(e,t,r){return this.jsPDFDocument.splitTextToSize(e,t,r)},n.prototype.rect=function(e,t,r,i,a){return this.jsPDFDocument.rect(e,t,r,i,a)},n.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},n.prototype.getTextWidth=function(e){return this.jsPDFDocument.getTextWidth(e)},n.prototype.getDocument=function(){return this.jsPDFDocument},n.prototype.setPage=function(e){this.jsPDFDocument.setPage(e)},n.prototype.addPage=function(){return this.jsPDFDocument.addPage()},n.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},n.prototype.getGlobalOptions=function(){return j4||{}},n.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},n.prototype.pageSize=function(){var e=this.jsPDFDocument.internal.pageSize;return e.width==null&&(e={width:e.getWidth(),height:e.getHeight()}),e},n.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},n.prototype.getLineHeightFactor=function(){var e=this.jsPDFDocument;return e.getLineHeightFactor?e.getLineHeightFactor():1.15},n.prototype.getLineHeight=function(e){return e/this.scaleFactor()*this.getLineHeightFactor()},n.prototype.pageNumber=function(){var e=this.jsPDFDocument.internal.getCurrentPageInfo();return e?e.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},n}(),Xy=function(n,e){return Xy=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},Xy(n,e)};function I8(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Xy(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var R8=function(n){I8(e,n);function e(t){var r=n.call(this)||this;return r._element=t,r}return e}(Array);function Xz(n){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/n,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}function Yz(n){var e={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return e[n]}function Gg(n,e,t){t.applyStyles(e,!0);var r=Array.isArray(n)?n:[n],i=r.map(function(a){return t.getTextWidth(a)}).reduce(function(a,o){return Math.max(a,o)},0);return i}function N8(n,e,t,r){var i=e.settings.tableLineWidth,a=e.settings.tableLineColor;n.applyStyles({lineWidth:i,lineColor:a});var o=D8(i,!1);o&&n.rect(t.x,t.y,e.getWidth(n.pageSize().width),r.y-t.y,o)}function D8(n,e){var t=n>0,r=e||e===0;return t&&r?"DF":t?"S":r?"F":null}function Vm(n,e){var t,r,i,a;if(n=n||e,Array.isArray(n)){if(n.length>=4)return{top:n[0],right:n[1],bottom:n[2],left:n[3]};if(n.length===3)return{top:n[0],right:n[1],bottom:n[2],left:n[1]};if(n.length===2)return{top:n[0],right:n[1],bottom:n[0],left:n[1]};n.length===1?n=n[0]:n=e}return typeof n=="object"?(typeof n.vertical=="number"&&(n.top=n.vertical,n.bottom=n.vertical),typeof n.horizontal=="number"&&(n.right=n.horizontal,n.left=n.horizontal),{left:(t=n.left)!==null&&t!==void 0?t:e,top:(r=n.top)!==null&&r!==void 0?r:e,right:(i=n.right)!==null&&i!==void 0?i:e,bottom:(a=n.bottom)!==null&&a!==void 0?a:e}):(typeof n!="number"&&(n=e),{top:n,right:n,bottom:n,left:n})}function O8(n,e){var t=Vm(e.settings.margin,0);return n.pageSize().width-(t.left+t.right)}function Kz(n,e,t,r,i){var a={},o=1.3333333333333333,s=jv(e,function(B){return i.getComputedStyle(B).backgroundColor});s!=null&&(a.fillColor=s);var u=jv(e,function(B){return i.getComputedStyle(B).color});u!=null&&(a.textColor=u);var f=Zz(r,t);f&&(a.cellPadding=f);var h="borderTopColor",p=o*t,g=r.borderTopWidth;if(r.borderBottomWidth===g&&r.borderRightWidth===g&&r.borderLeftWidth===g){var m=(parseFloat(g)||0)/p;m&&(a.lineWidth=m)}else a.lineWidth={top:(parseFloat(r.borderTopWidth)||0)/p,right:(parseFloat(r.borderRightWidth)||0)/p,bottom:(parseFloat(r.borderBottomWidth)||0)/p,left:(parseFloat(r.borderLeftWidth)||0)/p},a.lineWidth.top||(a.lineWidth.right?h="borderRightColor":a.lineWidth.bottom?h="borderBottomColor":a.lineWidth.left&&(h="borderLeftColor"));var x=jv(e,function(B){return i.getComputedStyle(B)[h]});x!=null&&(a.lineColor=x);var w=["left","right","center","justify"];w.indexOf(r.textAlign)!==-1&&(a.halign=r.textAlign),w=["middle","bottom","top"],w.indexOf(r.verticalAlign)!==-1&&(a.valign=r.verticalAlign);var I=parseInt(r.fontSize||"");isNaN(I)||(a.fontSize=I/o);var C=Qz(r);C&&(a.fontStyle=C);var P=(r.fontFamily||"").toLowerCase();return n.indexOf(P)!==-1&&(a.font=P),a}function Qz(n){var e="";return(n.fontWeight==="bold"||n.fontWeight==="bolder"||parseInt(n.fontWeight)>=700)&&(e="bold"),(n.fontStyle==="italic"||n.fontStyle==="oblique")&&(e+="italic"),e}function jv(n,e){var t=P8(n,e);if(!t)return null;var r=t.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!r||!Array.isArray(r))return null;var i=[parseInt(r[1]),parseInt(r[2]),parseInt(r[3])],a=parseInt(r[4]);return a===0||isNaN(i[0])||isNaN(i[1])||isNaN(i[2])?null:i}function P8(n,e){var t=e(n);return t==="rgba(0, 0, 0, 0)"||t==="transparent"||t==="initial"||t==="inherit"?n.parentElement==null?null:P8(n.parentElement,e):t}function Zz(n,e){var t=[n.paddingTop,n.paddingRight,n.paddingBottom,n.paddingLeft],r=96/(72/e),i=(parseInt(n.lineHeight)-parseInt(n.fontSize))/e/2,a=t.map(function(s){return parseInt(s||"0")/r}),o=Vm(a,0);return i>o.top&&(o.top=i),i>o.bottom&&(o.bottom=i),o}function L8(n,e,t,r,i){var a,o;r===void 0&&(r=!1),i===void 0&&(i=!1);var s;typeof e=="string"?s=t.document.querySelector(e):s=e;var u=Object.keys(n.getFontList()),f=n.scaleFactor(),h=[],p=[],g=[];if(!s)return console.error("Html table could not be found with input: ",e),{head:h,body:p,foot:g};for(var m=0;m<s.rows.length;m++){var x=s.rows[m],w=(o=(a=x==null?void 0:x.parentElement)===null||a===void 0?void 0:a.tagName)===null||o===void 0?void 0:o.toLowerCase(),I=Jz(u,f,t,x,r,i);I&&(w==="thead"?h.push(I):w==="tfoot"?g.push(I):p.push(I))}return{head:h,body:p,foot:g}}function Jz(n,e,t,r,i,a){for(var o=new R8(r),s=0;s<r.cells.length;s++){var u=r.cells[s],f=t.getComputedStyle(u);if(i||f.display!=="none"){var h=void 0;a&&(h=Kz(n,u,e,f,t)),o.push({rowSpan:u.rowSpan,colSpan:u.colSpan,styles:h,_element:u,content:eq(u)})}}var p=t.getComputedStyle(r);if(o.length>0&&(i||p.display!=="none"))return o}function eq(n){var e=n.cloneNode(!0);return e.innerHTML=e.innerHTML.replace(/\n/g,"").replace(/ +/g," "),e.innerHTML=e.innerHTML.split(/<br.*?>/).map(function(t){return t.trim()}).join(`
`),e.innerText||e.textContent||""}function tq(n,e,t){for(var r=0,i=[n,e,t];r<i.length;r++){var a=i[r];a&&typeof a!="object"&&console.error("The options parameter should be of type object, is: "+typeof a),a.startY&&typeof a.startY!="number"&&(console.error("Invalid value for startY option",a.startY),delete a.startY)}}function zu(n,e,t,r,i){if(n==null)throw new TypeError("Cannot convert undefined or null to object");for(var a=Object(n),o=1;o<arguments.length;o++){var s=arguments[o];if(s!=null)for(var u in s)Object.prototype.hasOwnProperty.call(s,u)&&(a[u]=s[u])}return a}function k8(n,e){var t=new md(n),r=t.getDocumentOptions(),i=t.getGlobalOptions();tq(i,r,e);var a=zu({},i,r,e),o;typeof window<"u"&&(o=window);var s=nq(i,r,e),u=rq(i,r,e),f=iq(t,a),h=oq(t,a,o);return{id:e.tableId,content:h,hooks:u,styles:s,settings:f}}function nq(n,e,t){for(var r={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},i=function(u){if(u==="columnStyles"){var f=n[u],h=e[u],p=t[u];r.columnStyles=zu({},f,h,p)}else{var g=[n,e,t],m=g.map(function(x){return x[u]||{}});r[u]=zu({},m[0],m[1],m[2])}},a=0,o=Object.keys(r);a<o.length;a++){var s=o[a];i(s)}return r}function rq(n,e,t){for(var r=[n,e,t],i={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},a=0,o=r;a<o.length;a++){var s=o[a];s.didParseCell&&i.didParseCell.push(s.didParseCell),s.willDrawCell&&i.willDrawCell.push(s.willDrawCell),s.didDrawCell&&i.didDrawCell.push(s.didDrawCell),s.willDrawPage&&i.willDrawPage.push(s.willDrawPage),s.didDrawPage&&i.didDrawPage.push(s.didDrawPage)}return i}function iq(n,e){var t,r,i,a,o,s,u,f,h,p,g,m,x=Vm(e.margin,40/n.scaleFactor()),w=(t=aq(n,e.startY))!==null&&t!==void 0?t:x.top,I;e.showFoot===!0?I="everyPage":e.showFoot===!1?I="never":I=(r=e.showFoot)!==null&&r!==void 0?r:"everyPage";var C;e.showHead===!0?C="everyPage":e.showHead===!1?C="never":C=(i=e.showHead)!==null&&i!==void 0?i:"everyPage";var P=(a=e.useCss)!==null&&a!==void 0?a:!1,B=e.theme||(P?"plain":"striped"),V=!!e.horizontalPageBreak,Y=(o=e.horizontalPageBreakRepeat)!==null&&o!==void 0?o:null;return{includeHiddenHtml:(s=e.includeHiddenHtml)!==null&&s!==void 0?s:!1,useCss:P,theme:B,startY:w,margin:x,pageBreak:(u=e.pageBreak)!==null&&u!==void 0?u:"auto",rowPageBreak:(f=e.rowPageBreak)!==null&&f!==void 0?f:"auto",tableWidth:(h=e.tableWidth)!==null&&h!==void 0?h:"auto",showHead:C,showFoot:I,tableLineWidth:(p=e.tableLineWidth)!==null&&p!==void 0?p:0,tableLineColor:(g=e.tableLineColor)!==null&&g!==void 0?g:200,horizontalPageBreak:V,horizontalPageBreakRepeat:Y,horizontalPageBreakBehaviour:(m=e.horizontalPageBreakBehaviour)!==null&&m!==void 0?m:"afterAllRows"}}function aq(n,e){var t=n.getLastAutoTable(),r=n.scaleFactor(),i=n.pageNumber(),a=!1;if(t&&t.startPageNumber){var o=t.startPageNumber+t.pageNumber-1;a=o===i}return typeof e=="number"?e:(e==null||e===!1)&&a&&(t==null?void 0:t.finalY)!=null?t.finalY+20/r:null}function oq(n,e,t){var r=e.head||[],i=e.body||[],a=e.foot||[];if(e.html){var o=e.includeHiddenHtml;if(t){var s=L8(n,e.html,t,o,e.useCss)||{};r=s.head||r,i=s.body||r,a=s.foot||r}else console.error("Cannot parse html in non browser environment")}var u=e.columns||sq(r,i,a);return{columns:u,head:r,body:i,foot:a}}function sq(n,e,t){var r=n[0]||e[0]||t[0]||[],i=[];return Object.keys(r).filter(function(a){return a!=="_element"}).forEach(function(a){var o=1,s;Array.isArray(r)?s=r[parseInt(a)]:s=r[a],typeof s=="object"&&!Array.isArray(s)&&(o=(s==null?void 0:s.colSpan)||1);for(var u=0;u<o;u++){var f=void 0;Array.isArray(r)?f=i.length:f=a+(u>0?"_".concat(u):"");var h={dataKey:f};i.push(h)}}),i}var Yy=function(){function n(e,t,r){this.table=t,this.pageNumber=t.pageNumber,this.settings=t.settings,this.cursor=r,this.doc=e.getDocument()}return n}(),lq=function(n){I8(e,n);function e(t,r,i,a,o,s){var u=n.call(this,t,r,s)||this;return u.cell=i,u.row=a,u.column=o,u.section=a.section,u}return e}(Yy),uq=function(){function n(e,t){this.pageNumber=1,this.id=e.id,this.settings=e.settings,this.styles=e.styles,this.hooks=e.hooks,this.columns=t.columns,this.head=t.head,this.body=t.body,this.foot=t.foot}return n.prototype.getHeadHeight=function(e){return this.head.reduce(function(t,r){return t+r.getMaxCellHeight(e)},0)},n.prototype.getFootHeight=function(e){return this.foot.reduce(function(t,r){return t+r.getMaxCellHeight(e)},0)},n.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},n.prototype.callCellHooks=function(e,t,r,i,a,o){for(var s=0,u=t;s<u.length;s++){var f=u[s],h=new lq(e,this,r,i,a,o),p=f(h)===!1;if(r.text=Array.isArray(r.text)?r.text:[r.text],p)return!1}return!0},n.prototype.callEndPageHooks=function(e,t){e.applyStyles(e.userStyles);for(var r=0,i=this.hooks.didDrawPage;r<i.length;r++){var a=i[r];a(new Yy(e,this,t))}},n.prototype.callWillDrawPageHooks=function(e,t){for(var r=0,i=this.hooks.willDrawPage;r<i.length;r++){var a=i[r];a(new Yy(e,this,t))}},n.prototype.getWidth=function(e){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var t=this.columns.reduce(function(i,a){return i+a.wrappedWidth},0);return t}else{var r=this.settings.margin;return e-r.left-r.right}},n}(),M8=function(){function n(e,t,r,i,a){a===void 0&&(a=!1),this.height=0,this.raw=e,e instanceof R8&&(this.raw=e._element,this.element=e._element),this.index=t,this.section=r,this.cells=i,this.spansMultiplePages=a}return n.prototype.getMaxCellHeight=function(e){var t=this;return e.reduce(function(r,i){var a;return Math.max(r,((a=t.cells[i.index])===null||a===void 0?void 0:a.height)||0)},0)},n.prototype.hasRowSpan=function(e){var t=this;return e.filter(function(r){var i=t.cells[r.index];return i?i.rowSpan>1:!1}).length>0},n.prototype.canEntireRowFit=function(e,t){return this.getMaxCellHeight(t)<=e},n.prototype.getMinimumRowHeight=function(e,t){var r=this;return e.reduce(function(i,a){var o=r.cells[a.index];if(!o)return 0;var s=t.getLineHeight(o.styles.fontSize),u=o.padding("vertical"),f=u+s;return f>i?f:i},0)},n}(),B8=function(){function n(e,t,r){var i;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=t,this.section=r,this.raw=e;var a=e;e!=null&&typeof e=="object"&&!Array.isArray(e)?(this.rowSpan=e.rowSpan||1,this.colSpan=e.colSpan||1,a=(i=e.content)!==null&&i!==void 0?i:e,e._element&&(this.raw=e._element)):(this.rowSpan=1,this.colSpan=1);var o=a!=null?""+a:"",s=/\r\n|\r|\n/g;this.text=o.split(s)}return n.prototype.getTextPos=function(){var e;if(this.styles.valign==="top")e=this.y+this.padding("top");else if(this.styles.valign==="bottom")e=this.y+this.height-this.padding("bottom");else{var t=this.height-this.padding("vertical");e=this.y+t/2+this.padding("top")}var r;if(this.styles.halign==="right")r=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var i=this.width-this.padding("horizontal");r=this.x+i/2+this.padding("left")}else r=this.x+this.padding("left");return{x:r,y:e}},n.prototype.getContentHeight=function(e,t){t===void 0&&(t=1.15);var r=Array.isArray(this.text)?this.text.length:1,i=this.styles.fontSize/e*t,a=r*i+this.padding("vertical");return Math.max(a,this.styles.minCellHeight)},n.prototype.padding=function(e){var t=Vm(this.styles.cellPadding,0);return e==="vertical"?t.top+t.bottom:e==="horizontal"?t.left+t.right:t[e]},n}(),cq=function(){function n(e,t,r){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=e,this.raw=t,this.index=r}return n.prototype.getMaxCustomCellWidth=function(e){for(var t=0,r=0,i=e.allRows();r<i.length;r++){var a=i[r],o=a.cells[this.index];o&&typeof o.styles.cellWidth=="number"&&(t=Math.max(t,o.styles.cellWidth))}return t},n}();function fq(n,e){hq(n,e);var t=[],r=0;e.columns.forEach(function(a){var o=a.getMaxCustomCellWidth(e);o?a.width=o:(a.width=a.wrappedWidth,t.push(a)),r+=a.width});var i=e.getWidth(n.pageSize().width)-r;i&&(i=Ky(t,i,function(a){return Math.max(a.minReadableWidth,a.minWidth)})),i&&(i=Ky(t,i,function(a){return a.minWidth})),i=Math.abs(i),!e.settings.horizontalPageBreak&&i>.1/n.scaleFactor()&&(i=i<1?i:Math.round(i),console.warn("Of the table content, ".concat(i," units width could not fit page"))),pq(e),gq(e,n),dq(e)}function hq(n,e){var t=n.scaleFactor(),r=e.settings.horizontalPageBreak,i=O8(n,e);e.allRows().forEach(function(a){for(var o=0,s=e.columns;o<s.length;o++){var u=s[o],f=a.cells[u.index];if(f){var h=e.hooks.didParseCell;e.callCellHooks(n,h,f,a,u,null);var p=f.padding("horizontal");f.contentWidth=Gg(f.text,f.styles,n)+p;var g=Gg(f.text.join(" ").split(/[^\S\u00A0]+/),f.styles,n);if(f.minReadableWidth=g+f.padding("horizontal"),typeof f.styles.cellWidth=="number")f.minWidth=f.styles.cellWidth,f.wrappedWidth=f.styles.cellWidth;else if(f.styles.cellWidth==="wrap"||r===!0)f.contentWidth>i?(f.minWidth=i,f.wrappedWidth=i):(f.minWidth=f.contentWidth,f.wrappedWidth=f.contentWidth);else{var m=10/t;f.minWidth=f.styles.minCellWidth||m,f.wrappedWidth=f.contentWidth,f.minWidth>f.wrappedWidth&&(f.wrappedWidth=f.minWidth)}}}}),e.allRows().forEach(function(a){for(var o=0,s=e.columns;o<s.length;o++){var u=s[o],f=a.cells[u.index];if(f&&f.colSpan===1)u.wrappedWidth=Math.max(u.wrappedWidth,f.wrappedWidth),u.minWidth=Math.max(u.minWidth,f.minWidth),u.minReadableWidth=Math.max(u.minReadableWidth,f.minReadableWidth);else{var h=e.styles.columnStyles[u.dataKey]||e.styles.columnStyles[u.index]||{},p=h.cellWidth||h.minCellWidth;p&&typeof p=="number"&&(u.minWidth=p,u.wrappedWidth=p)}f&&(f.colSpan>1&&!u.minWidth&&(u.minWidth=f.minWidth),f.colSpan>1&&!u.wrappedWidth&&(u.wrappedWidth=f.minWidth))}})}function Ky(n,e,t){for(var r=e,i=n.reduce(function(m,x){return m+x.wrappedWidth},0),a=0;a<n.length;a++){var o=n[a],s=o.wrappedWidth/i,u=r*s,f=o.width+u,h=t(o),p=f<h?h:f;e-=p-o.width,o.width=p}if(e=Math.round(e*1e10)/1e10,e){var g=n.filter(function(m){return e<0?m.width>t(m):!0});g.length&&(e=Ky(g,e,t))}return e}function dq(n){for(var e={},t=1,r=n.allRows(),i=0;i<r.length;i++)for(var a=r[i],o=0,s=n.columns;o<s.length;o++){var u=s[o],f=e[u.index];if(t>1)t--,delete a.cells[u.index];else if(f)f.cell.height+=a.height,t=f.cell.colSpan,delete a.cells[u.index],f.left--,f.left<=1&&delete e[u.index];else{var h=a.cells[u.index];if(!h)continue;if(h.height=a.height,h.rowSpan>1){var p=r.length-i,g=h.rowSpan>p?p:h.rowSpan;e[u.index]={cell:h,left:g,row:a}}}}}function pq(n){for(var e=n.allRows(),t=0;t<e.length;t++)for(var r=e[t],i=null,a=0,o=0,s=0;s<n.columns.length;s++){var u=n.columns[s];if(o-=1,o>1&&n.columns[s+1])a+=u.width,delete r.cells[u.index];else if(i){var f=i;delete r.cells[u.index],i=null,f.width=u.width+a}else{var f=r.cells[u.index];if(!f)continue;if(o=f.colSpan,a=0,f.colSpan>1){i=f,a+=u.width;continue}f.width=u.width+a}}}function gq(n,e){for(var t={count:0,height:0},r=0,i=n.allRows();r<i.length;r++){for(var a=i[r],o=0,s=n.columns;o<s.length;o++){var u=s[o],f=a.cells[u.index];if(f){e.applyStyles(f.styles,!0);var h=f.width-f.padding("horizontal");if(f.styles.overflow==="linebreak")f.text=e.splitTextToSize(f.text,h+1/e.scaleFactor(),{fontSize:f.styles.fontSize});else if(f.styles.overflow==="ellipsize")f.text=F4(f.text,h,f.styles,e,"...");else if(f.styles.overflow==="hidden")f.text=F4(f.text,h,f.styles,e,"");else if(typeof f.styles.overflow=="function"){var p=f.styles.overflow(f.text,h);typeof p=="string"?f.text=[p]:f.text=p}f.contentHeight=f.getContentHeight(e.scaleFactor(),e.getLineHeightFactor());var g=f.contentHeight/f.rowSpan;f.rowSpan>1&&t.count*t.height<g*f.rowSpan?t={height:g,count:f.rowSpan}:t&&t.count>0&&t.height>g&&(g=t.height),g>a.height&&(a.height=g)}}t.count--}}function F4(n,e,t,r,i){return n.map(function(a){return mq(a,e,t,r,i)})}function mq(n,e,t,r,i){var a=1e4*r.scaleFactor();if(e=Math.ceil(e*a)/a,e>=Gg(n,t,r))return n;for(;e<Gg(n+i,t,r)&&!(n.length<=1);)n=n.substring(0,n.length-1);return n.trim()+i}function j8(n,e){var t=new md(n),r=vq(e,t.scaleFactor()),i=new uq(e,r);return fq(t,i),t.applyStyles(t.userStyles),i}function vq(n,e){var t=n.content,r=xq(t.columns);if(t.head.length===0){var i=U4(r,"head");i&&t.head.push(i)}if(t.foot.length===0){var i=U4(r,"foot");i&&t.foot.push(i)}var a=n.settings.theme,o=n.styles;return{columns:r,head:Fv("head",t.head,r,o,a,e),body:Fv("body",t.body,r,o,a,e),foot:Fv("foot",t.foot,r,o,a,e)}}function Fv(n,e,t,r,i,a){var o={},s=e.map(function(u,f){for(var h=0,p={},g=0,m=0,x=0,w=t;x<w.length;x++){var I=w[x];if(o[I.index]==null||o[I.index].left===0)if(m===0){var C=void 0;Array.isArray(u)?C=u[I.index-g-h]:C=u[I.dataKey];var P={};typeof C=="object"&&!Array.isArray(C)&&(P=(C==null?void 0:C.styles)||{});var B=_q(n,I,f,i,r,a,P),V=new B8(C,B,n);p[I.dataKey]=V,p[I.index]=V,m=V.colSpan-1,o[I.index]={left:V.rowSpan-1,times:m}}else m--,g++;else o[I.index].left--,m=o[I.index].times,h++}return new M8(u,f,n,p)});return s}function U4(n,e){var t={};return n.forEach(function(r){if(r.raw!=null){var i=yq(e,r.raw);i!=null&&(t[r.dataKey]=i)}}),Object.keys(t).length>0?t:null}function yq(n,e){if(n==="head"){if(typeof e=="object")return e.header||null;if(typeof e=="string"||typeof e=="number")return e}else if(n==="foot"&&typeof e=="object")return e.footer;return null}function xq(n){return n.map(function(e,t){var r,i;return typeof e=="object"?i=(r=e.dataKey)!==null&&r!==void 0?r:t:i=t,new cq(i,e,t)})}function _q(n,e,t,r,i,a,o){var s=Yz(r),u;n==="head"?u=i.headStyles:n==="body"?u=i.bodyStyles:n==="foot"&&(u=i.footStyles);var f=zu({},s.table,s[n],i.styles,u),h=i.columnStyles[e.dataKey]||i.columnStyles[e.index]||{},p=n==="body"?h:{},g=n==="body"&&t%2===0?zu({},s.alternateRow,i.alternateRowStyles):{},m=Xz(a),x=zu({},m,f,g,p);return zu(x,o)}function wq(n,e,t){var r;t===void 0&&(t={});var i=O8(n,e),a=new Map,o=[],s=[],u=[];Array.isArray(e.settings.horizontalPageBreakRepeat)?u=e.settings.horizontalPageBreakRepeat:(typeof e.settings.horizontalPageBreakRepeat=="string"||typeof e.settings.horizontalPageBreakRepeat=="number")&&(u=[e.settings.horizontalPageBreakRepeat]),u.forEach(function(g){var m=e.columns.find(function(x){return x.dataKey===g||x.index===g});m&&!a.has(m.index)&&(a.set(m.index,!0),o.push(m.index),s.push(e.columns[m.index]),i-=m.wrappedWidth)});for(var f=!0,h=(r=t==null?void 0:t.start)!==null&&r!==void 0?r:0;h<e.columns.length;){if(a.has(h)){h++;continue}var p=e.columns[h].wrappedWidth;if(f||i>=p)f=!1,o.push(h),s.push(e.columns[h]),i-=p;else break;h++}return{colIndexes:o,columns:s,lastIndex:h-1}}function bq(n,e){for(var t=[],r=0;r<e.columns.length;r++){var i=wq(n,e,{start:r});i.columns.length&&(t.push(i),r=i.lastIndex)}return t}function F8(n,e){var t=e.settings,r=t.startY,i=t.margin,a={x:i.left,y:r},o=e.getHeadHeight(e.columns)+e.getFootHeight(e.columns),s=r+i.bottom+o;if(t.pageBreak==="avoid"){var u=e.body,f=u.reduce(function(g,m){return g+m.height},0);s+=f}var h=new md(n);(t.pageBreak==="always"||t.startY!=null&&s>h.pageSize().height)&&(V8(h),a.y=i.top),e.callWillDrawPageHooks(h,a);var p=zu({},a);e.startPageNumber=h.pageNumber(),t.horizontalPageBreak?Aq(h,e,p,a):(h.applyStyles(h.userStyles),(t.showHead==="firstPage"||t.showHead==="everyPage")&&e.head.forEach(function(g){return tc(h,e,g,a,e.columns)}),h.applyStyles(h.userStyles),e.body.forEach(function(g,m){var x=m===e.body.length-1;$g(h,e,g,x,p,a,e.columns)}),h.applyStyles(h.userStyles),(t.showFoot==="lastPage"||t.showFoot==="everyPage")&&e.foot.forEach(function(g){return tc(h,e,g,a,e.columns)})),N8(h,e,p,a),e.callEndPageHooks(h,a),e.finalY=a.y,n.lastAutoTable=e,h.applyStyles(h.userStyles)}function Aq(n,e,t,r){var i=bq(n,e),a=e.settings;if(a.horizontalPageBreakBehaviour==="afterAllRows")i.forEach(function(f,h){n.applyStyles(n.userStyles),h>0?X1(n,e,t,r,f.columns,!0):V4(n,e,r,f.columns),Eq(n,e,t,r,f.columns),Uv(n,e,r,f.columns)});else for(var o=-1,s=i[0],u=function(){var f=o;if(s){n.applyStyles(n.userStyles);var h=s.columns;o>=0?X1(n,e,t,r,h,!0):V4(n,e,r,h),f=z4(n,e,o+1,r,h),Uv(n,e,r,h)}var p=f-o;i.slice(1).forEach(function(g){n.applyStyles(n.userStyles),X1(n,e,t,r,g.columns,!0),z4(n,e,o+1,r,g.columns,p),Uv(n,e,r,g.columns)}),o=f};o<e.body.length-1;)u()}function V4(n,e,t,r){var i=e.settings;n.applyStyles(n.userStyles),(i.showHead==="firstPage"||i.showHead==="everyPage")&&e.head.forEach(function(a){return tc(n,e,a,t,r)})}function Eq(n,e,t,r,i){n.applyStyles(n.userStyles),e.body.forEach(function(a,o){var s=o===e.body.length-1;$g(n,e,a,s,t,r,i)})}function z4(n,e,t,r,i,a){n.applyStyles(n.userStyles),a=a??e.body.length;var o=Math.min(t+a,e.body.length),s=-1;return e.body.slice(t,o).forEach(function(u,f){var h=t+f===e.body.length-1,p=U8(n,e,h,r);u.canEntireRowFit(p,i)&&(tc(n,e,u,r,i),s=t+f)}),s}function Uv(n,e,t,r){var i=e.settings;n.applyStyles(n.userStyles),(i.showFoot==="lastPage"||i.showFoot==="everyPage")&&e.foot.forEach(function(a){return tc(n,e,a,t,r)})}function Sq(n,e,t){var r=t.getLineHeight(n.styles.fontSize),i=n.padding("vertical"),a=Math.floor((e-i)/r);return Math.max(0,a)}function Cq(n,e,t,r){var i={};n.spansMultiplePages=!0,n.height=0;for(var a=0,o=0,s=t.columns;o<s.length;o++){var u=s[o],f=n.cells[u.index];if(f){Array.isArray(f.text)||(f.text=[f.text]);var h=new B8(f.raw,f.styles,f.section);h=zu(h,f),h.text=[];var p=Sq(f,e,r);f.text.length>p&&(h.text=f.text.splice(p,f.text.length));var g=r.scaleFactor(),m=r.getLineHeightFactor();f.contentHeight=f.getContentHeight(g,m),f.contentHeight>=e&&(f.contentHeight=e,h.styles.minCellHeight-=e),f.contentHeight>n.height&&(n.height=f.contentHeight),h.contentHeight=h.getContentHeight(g,m),h.contentHeight>a&&(a=h.contentHeight),i[u.index]=h}}var x=new M8(n.raw,-1,n.section,i,!0);x.height=a;for(var w=0,I=t.columns;w<I.length;w++){var u=I[w],h=x.cells[u.index];h&&(h.height=x.height);var f=n.cells[u.index];f&&(f.height=n.height)}return x}function Tq(n,e,t,r){var i=n.pageSize().height,a=r.settings.margin,o=a.top+a.bottom,s=i-o;e.section==="body"&&(s-=r.getHeadHeight(r.columns)+r.getFootHeight(r.columns));var u=e.getMinimumRowHeight(r.columns,n),f=u<t;if(u>s)return console.error("Will not be able to print row ".concat(e.index," correctly since it's minimum height is larger than page height")),!0;if(!f)return!1;var h=e.hasRowSpan(r.columns),p=e.getMaxCellHeight(r.columns)>s;return p?(h&&console.error("The content of row ".concat(e.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(h||r.settings.rowPageBreak==="avoid")}function $g(n,e,t,r,i,a,o){var s=U8(n,e,r,a);if(t.canEntireRowFit(s,o))tc(n,e,t,a,o);else if(Tq(n,t,s,e)){var u=Cq(t,s,e,n);tc(n,e,t,a,o),X1(n,e,i,a,o),$g(n,e,u,r,i,a,o)}else X1(n,e,i,a,o),$g(n,e,t,r,i,a,o)}function tc(n,e,t,r,i){r.x=e.settings.margin.left;for(var a=0,o=i;a<o.length;a++){var s=o[a],u=t.cells[s.index];if(!u){r.x+=s.width;continue}n.applyStyles(u.styles),u.x=r.x,u.y=r.y;var f=e.callCellHooks(n,e.hooks.willDrawCell,u,t,s,r);if(f===!1){r.x+=s.width;continue}Iq(n,u,r);var h=u.getTextPos();T8(u.text,h.x,h.y,{halign:u.styles.halign,valign:u.styles.valign,maxWidth:Math.ceil(u.width-u.padding("left")-u.padding("right"))},n.getDocument()),e.callCellHooks(n,e.hooks.didDrawCell,u,t,s,r),r.x+=s.width}r.y+=t.height}function Iq(n,e,t){var r=e.styles;if(n.getDocument().setFillColor(n.getDocument().getFillColor()),typeof r.lineWidth=="number"){var i=D8(r.lineWidth,r.fillColor);i&&n.rect(e.x,t.y,e.width,e.height,i)}else typeof r.lineWidth=="object"&&(r.fillColor&&n.rect(e.x,t.y,e.width,e.height,"F"),Rq(n,e,t,r.lineWidth))}function Rq(n,e,t,r){var i,a,o,s;r.top&&(i=t.x,a=t.y,o=t.x+e.width,s=t.y,r.right&&(o+=.5*r.right),r.left&&(i-=.5*r.left),u(r.top,i,a,o,s)),r.bottom&&(i=t.x,a=t.y+e.height,o=t.x+e.width,s=t.y+e.height,r.right&&(o+=.5*r.right),r.left&&(i-=.5*r.left),u(r.bottom,i,a,o,s)),r.left&&(i=t.x,a=t.y,o=t.x,s=t.y+e.height,r.top&&(a-=.5*r.top),r.bottom&&(s+=.5*r.bottom),u(r.left,i,a,o,s)),r.right&&(i=t.x+e.width,a=t.y,o=t.x+e.width,s=t.y+e.height,r.top&&(a-=.5*r.top),r.bottom&&(s+=.5*r.bottom),u(r.right,i,a,o,s));function u(f,h,p,g,m){n.getDocument().setLineWidth(f),n.getDocument().line(h,p,g,m,"S")}}function U8(n,e,t,r){var i=e.settings.margin.bottom,a=e.settings.showFoot;return(a==="everyPage"||a==="lastPage"&&t)&&(i+=e.getFootHeight(e.columns)),n.pageSize().height-r.y-i}function X1(n,e,t,r,i,a){i===void 0&&(i=[]),a===void 0&&(a=!1),n.applyStyles(n.userStyles),e.settings.showFoot==="everyPage"&&!a&&e.foot.forEach(function(s){return tc(n,e,s,r,i)}),e.callEndPageHooks(n,r);var o=e.settings.margin;N8(n,e,t,r),V8(n),e.pageNumber++,r.x=o.left,r.y=o.top,t.y=o.top,e.callWillDrawPageHooks(n,r),e.settings.showHead==="everyPage"&&(e.head.forEach(function(s){return tc(n,e,s,r,i)}),n.applyStyles(n.userStyles))}function V8(n){var e=n.pageNumber();n.setPage(e+1);var t=n.pageNumber();return t===e?(n.addPage(),!0):!1}function Nq(n){n.API.autoTable=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=e[0],i=k8(this,r),a=j8(this,i);return F8(this,a),this},n.API.lastAutoTable=!1,n.API.autoTableText=function(e,t,r,i){T8(e,t,r,i,this)},n.API.autoTableSetDefaults=function(e){return md.setDefaults(e,this),this},n.autoTableSetDefaults=function(e,t){md.setDefaults(e,t)},n.API.autoTableHtmlToJson=function(e,t){var r;if(t===void 0&&(t=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var i=new md(this),a=L8(i,e,window,t,!1),o=a.head,s=a.body,u=((r=o[0])===null||r===void 0?void 0:r.map(function(f){return f.content}))||[];return{columns:u,rows:s,data:s}}}var Vv;function Dq(n,e){var t=k8(n,e),r=j8(n,t);F8(n,r)}try{if(typeof window<"u"&&window){var q4=window,H4=q4.jsPDF||((Vv=q4.jspdf)===null||Vv===void 0?void 0:Vv.jsPDF);H4&&Nq(H4)}}catch(n){console.error("Could not apply autoTable plugin",n)}const Oq=({showStatsModal:n,setShowStatsModal:e,loanHistory:t})=>{const r=ge.useMemo(()=>{if(!t||t.length===0)return null;const i=H=>H?H.seconds?new Date(H.seconds*1e3):new Date(H):null,a=t.length,o=a,s=0,u=t.flatMap(H=>H.items||[]),f=u.reduce((H,ne)=>H+(ne.quantity||1),0),h={};u.forEach(H=>{const ne=H.name;h[ne]=(h[ne]||0)+(H.quantity||1)});const p=Object.entries(h).sort(([,H],[,ne])=>ne-H).slice(0,5).map(([H,ne])=>({name:H,count:ne})),g={};t.forEach(H=>{const ne=H.clientName||"לא צוין";g[ne]=(g[ne]||0)+1});const m=Object.entries(g).sort(([,H],[,ne])=>ne-H).slice(0,5).map(([H,ne])=>({name:H,count:ne})),x={};t.forEach(H=>{const ne=H.volunteerName||"לא צוין";x[ne]=(x[ne]||0)+1});const w=Object.entries(x).sort(([,H],[,ne])=>ne-H).slice(0,5).map(([H,ne])=>({name:H,count:ne})),I=new Date().getMonth(),C=new Date().getFullYear(),P=t.filter(H=>{const ne=i(H.pickupDate);return ne?ne.getMonth()===I&&ne.getFullYear()===C:!1}).length,B=I===0?11:I-1,V=I===0?C-1:C,Y=t.filter(H=>{const ne=i(H.pickupDate);return ne?ne.getMonth()===B&&ne.getFullYear()===V:!1}).length,q=t.filter(H=>H.pickupDate&&H.returnDate);let D=0;if(q.length>0){const H=q.reduce((ne,U)=>{const z=i(U.pickupDate),ee=i(U.returnDate);if(!z||!ee)return ne;const le=Math.ceil((ee-z)/(1e3*60*60*24));return ne+Math.max(0,le)},0);D=Math.round(H/q.length)}const A=t.filter(H=>H.returnInspection),T=A.reduce((H,ne)=>{var U;return(U=ne.returnInspection)!=null&&U.itemInspections?H+ne.returnInspection.itemInspections.reduce((z,ee)=>z+(ee.quantityReturned||0),0):H},0),k=A.reduce((H,ne)=>{var U;return(U=ne.returnInspection)!=null&&U.itemInspections?H+ne.returnInspection.itemInspections.filter(z=>z.condition==="damaged").reduce((z,ee)=>z+(ee.quantityReturned||0),0):H},0),R=A.reduce((H,ne)=>{var U;return(U=ne.returnInspection)!=null&&U.itemInspections?H+ne.returnInspection.itemInspections.filter(z=>z.condition==="lost").reduce((z,ee)=>z+Math.max(0,(ee.quantityExpected||0)-(ee.quantityReturned||0)),0):H},0),L={};t.forEach(H=>{const ne=H.eventType||"לא צוין";L[ne]=(L[ne]||0)+1});const j=Object.entries(L).sort(([,H],[,ne])=>ne-H).slice(0,5).map(([H,ne])=>({name:H,count:ne}));return{totalLoans:a,activeLoans:s,completedLoans:o,totalItemsLoaned:f,totalItemsReturned:T,damagedItems:k,lostItems:R,mostPopularItems:p,topBorrowers:m,topVolunteers:w,topEventTypes:j,thisMonthLoans:P,lastMonthLoans:Y,averageDuration:D,loansWithInspection:A.length}},[t]);return n?r?E.jsx("div",{className:"modal-overlay",onClick:()=>e(!1),children:E.jsxs("div",{className:"modal-box",dir:"rtl",onClick:i=>i.stopPropagation(),style:{maxWidth:"800px",maxHeight:"90vh",overflowY:"auto"},children:[E.jsx("h2",{style:{textAlign:"center",marginBottom:"2rem",color:"#2196F3"},children:"📊 סטטיסטיקות השאלות"}),E.jsxs("div",{style:{marginBottom:"2rem"},children:[E.jsx("h3",{style:{borderBottom:"2px solid #2196F3",paddingBottom:"0.5rem",marginBottom:"1rem"},children:"📈 נתונים כלליים"}),E.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"1rem"},children:[E.jsxs("div",{style:{backgroundColor:"#e3f2fd",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[E.jsx("div",{style:{fontSize:"2rem",fontWeight:"bold",color:"#1976d2"},children:r.totalLoans}),E.jsx("div",{children:'סה"כ השאלות'})]}),E.jsxs("div",{style:{backgroundColor:"#e8f5e8",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[E.jsx("div",{style:{fontSize:"2rem",fontWeight:"bold",color:"#388e3c"},children:r.completedLoans}),E.jsx("div",{children:"השאלות שהושלמו"})]}),E.jsxs("div",{style:{backgroundColor:"#fff3e0",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[E.jsx("div",{style:{fontSize:"2rem",fontWeight:"bold",color:"#f57c00"},children:r.totalItemsLoaned}),E.jsx("div",{children:"פריטים הושאלו"})]}),E.jsxs("div",{style:{backgroundColor:"#f0fdf4",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[E.jsx("div",{style:{fontSize:"2rem",fontWeight:"bold",color:"#10b981"},children:r.totalItemsReturned}),E.jsx("div",{children:"פריטים הוחזרו"})]})]})]}),E.jsxs("div",{style:{marginBottom:"2rem"},children:[E.jsx("h3",{style:{borderBottom:"2px solid #2196F3",paddingBottom:"0.5rem",marginBottom:"1rem"},children:"📅 השוואה חודשית"}),E.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[E.jsxs("div",{style:{backgroundColor:"#e3f2fd",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[E.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#1976d2"},children:r.thisMonthLoans}),E.jsx("div",{children:"השאלות החודש"})]}),E.jsxs("div",{style:{backgroundColor:"#f5f5f5",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[E.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#666"},children:r.lastMonthLoans}),E.jsx("div",{children:"השאלות החודש שעבר"})]})]}),r.lastMonthLoans>0&&E.jsx("div",{style:{textAlign:"center",marginTop:"0.5rem",fontSize:"0.9rem"},children:r.thisMonthLoans>r.lastMonthLoans?E.jsxs("span",{style:{color:"#388e3c"},children:["⬆️ עלייה של ",((r.thisMonthLoans-r.lastMonthLoans)/r.lastMonthLoans*100).toFixed(1),"%"]}):r.thisMonthLoans<r.lastMonthLoans?E.jsxs("span",{style:{color:"#d32f2f"},children:["⬇️ ירידה של ",((r.lastMonthLoans-r.thisMonthLoans)/r.lastMonthLoans*100).toFixed(1),"%"]}):E.jsx("span",{style:{color:"#666"},children:"➡️ ללא שינוי"})})]}),E.jsxs("div",{style:{marginBottom:"2rem"},children:[E.jsx("h3",{style:{borderBottom:"2px solid #2196F3",paddingBottom:"0.5rem",marginBottom:"1rem"},children:"📦 סטטיסטיקות פריטים"}),E.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"1rem",marginBottom:"1rem"},children:[E.jsxs("div",{style:{backgroundColor:"#f8f9fa",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[E.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#1976d2"},children:r.totalItemsLoaned}),E.jsx("div",{children:'סה"כ פריטים הושאלו'})]}),E.jsxs("div",{style:{backgroundColor:"#e8f5e8",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[E.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#10b981"},children:r.totalItemsReturned}),E.jsx("div",{children:"פריטים הוחזרו"})]}),r.damagedItems>0&&E.jsxs("div",{style:{backgroundColor:"#fff3e0",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[E.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#f59e0b"},children:r.damagedItems}),E.jsx("div",{children:"פריטים פגומים"})]}),r.lostItems>0&&E.jsxs("div",{style:{backgroundColor:"#ffebee",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[E.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#ef4444"},children:r.lostItems}),E.jsx("div",{children:"פריטים אבודים"})]})]}),r.mostPopularItems.length>0&&E.jsxs("div",{children:[E.jsx("h4",{style:{marginBottom:"0.5rem"},children:"🏆 הפריטים הפופולריים ביותר:"}),r.mostPopularItems.map((i,a)=>E.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0.5rem",backgroundColor:a===0?"#fff3e0":"#f5f5f5",borderRadius:"4px",marginBottom:"0.3rem"},children:[E.jsxs("span",{children:[a+1,". ",i.name]}),E.jsxs("span",{style:{fontWeight:"bold",color:"#1976d2"},children:[i.count," פעמים"]})]},a))]})]}),r.topBorrowers.length>0&&E.jsxs("div",{style:{marginBottom:"2rem"},children:[E.jsx("h3",{style:{borderBottom:"2px solid #2196F3",paddingBottom:"0.5rem",marginBottom:"1rem"},children:"👥 הלקוחות הפעילים ביותר"}),r.topBorrowers.map((i,a)=>E.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0.5rem",backgroundColor:a===0?"#e8f5e8":"#f5f5f5",borderRadius:"4px",marginBottom:"0.3rem"},children:[E.jsxs("span",{children:[a+1,". ",i.name]}),E.jsxs("span",{style:{fontWeight:"bold",color:"#388e3c"},children:[i.count," השאלות"]})]},a))]}),r.topVolunteers.length>0&&E.jsxs("div",{style:{marginBottom:"2rem"},children:[E.jsx("h3",{style:{borderBottom:"2px solid #2196F3",paddingBottom:"0.5rem",marginBottom:"1rem"},children:"🌟 המתנדבות הפעילות ביותר"}),r.topVolunteers.map((i,a)=>E.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0.5rem",backgroundColor:a===0?"#e3f2fd":"#f5f5f5",borderRadius:"4px",marginBottom:"0.3rem"},children:[E.jsxs("span",{children:[a+1,". ",i.name]}),E.jsxs("span",{style:{fontWeight:"bold",color:"#1976d2"},children:[i.count," השאלות"]})]},a))]}),r.topEventTypes.length>0&&E.jsxs("div",{style:{marginBottom:"2rem"},children:[E.jsx("h3",{style:{borderBottom:"2px solid #2196F3",paddingBottom:"0.5rem",marginBottom:"1rem"},children:"🎉 סוגי האירועים הפופולריים"}),r.topEventTypes.map((i,a)=>E.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0.5rem",backgroundColor:a===0?"#f0fdf4":"#f5f5f5",borderRadius:"4px",marginBottom:"0.3rem"},children:[E.jsxs("span",{children:[a+1,". ",i.name]}),E.jsxs("span",{style:{fontWeight:"bold",color:"#10b981"},children:[i.count," פעמים"]})]},a))]}),r.averageDuration>0&&E.jsxs("div",{style:{marginBottom:"2rem"},children:[E.jsx("h3",{style:{borderBottom:"2px solid #2196F3",paddingBottom:"0.5rem",marginBottom:"1rem"},children:"⏱️ משך השאלה ממוצע"}),E.jsxs("div",{style:{backgroundColor:"#f8f9fa",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[E.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#1976d2"},children:[r.averageDuration," ימים"]}),E.jsxs("div",{style:{fontSize:"0.9rem",color:"#666"},children:["(מבוסס על ",t.filter(i=>i.pickupDate&&i.returnDate).length," השאלות)"]})]})]}),r.loansWithInspection>0&&E.jsxs("div",{style:{marginBottom:"2rem"},children:[E.jsx("h3",{style:{borderBottom:"2px solid #2196F3",paddingBottom:"0.5rem",marginBottom:"1rem"},children:"🔍 סיכום בדיקות החזרה"}),E.jsxs("div",{style:{backgroundColor:"#f0fdf4",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[E.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#10b981"},children:r.loansWithInspection}),E.jsxs("div",{style:{fontSize:"0.9rem",color:"#666"},children:["השאלות עם בדיקת החזרה מתוך ",r.totalLoans,' סה"כ']}),E.jsxs("div",{style:{fontSize:"0.8rem",color:"#666",marginTop:"0.5rem"},children:["(",(r.loansWithInspection/r.totalLoans*100).toFixed(1),"% מהשאלות נבדקו)"]})]})]}),E.jsx("div",{className:"modal-actions",children:E.jsx("button",{className:"btn btn-blue",onClick:()=>e(!1),children:"✔️ סגור"})})]})}):E.jsx("div",{className:"modal-overlay",onClick:()=>e(!1),children:E.jsxs("div",{className:"modal-box",dir:"rtl",onClick:i=>i.stopPropagation(),children:[E.jsx("h2",{style:{textAlign:"center",marginBottom:"2rem"},children:"📊 סטטיסטיקות השאלות"}),E.jsx("p",{style:{textAlign:"center"},children:"אין נתונים זמינים"}),E.jsx("div",{className:"modal-actions",children:E.jsx("button",{className:"btn btn-gray",onClick:()=>e(!1),children:"סגור"})})]})}):null};class I0{constructor(e=0,t="Network Error"){this.status=e,this.text=t}}const Pq=()=>{if(!(typeof localStorage>"u"))return{get:n=>Promise.resolve(localStorage.getItem(n)),set:(n,e)=>Promise.resolve(localStorage.setItem(n,e)),remove:n=>Promise.resolve(localStorage.removeItem(n))}},ca={origin:"https://api.emailjs.com",blockHeadless:!1,storageProvider:Pq()},_x=n=>n?typeof n=="string"?{publicKey:n}:n.toString()==="[object Object]"?n:{}:{},Lq=(n,e="https://api.emailjs.com")=>{if(!n)return;const t=_x(n);ca.publicKey=t.publicKey,ca.blockHeadless=t.blockHeadless,ca.storageProvider=t.storageProvider,ca.blockList=t.blockList,ca.limitRate=t.limitRate,ca.origin=t.origin||e},z8=async(n,e,t={})=>{const r=await fetch(ca.origin+n,{method:"POST",headers:t,body:e}),i=await r.text(),a=new I0(r.status,i);if(r.ok)return a;throw a},q8=(n,e,t)=>{if(!n||typeof n!="string")throw"The public key is required. Visit https://dashboard.emailjs.com/admin/account";if(!e||typeof e!="string")throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!t||typeof t!="string")throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates"},kq=n=>{if(n&&n.toString()!=="[object Object]")throw"The template params have to be the object. Visit https://www.emailjs.com/docs/sdk/send/"},H8=n=>n.webdriver||!n.languages||n.languages.length===0,W8=()=>new I0(451,"Unavailable For Headless Browser"),Mq=(n,e)=>{if(!Array.isArray(n))throw"The BlockList list has to be an array";if(typeof e!="string")throw"The BlockList watchVariable has to be a string"},Bq=n=>{var e;return!((e=n.list)!=null&&e.length)||!n.watchVariable},jq=(n,e)=>n instanceof FormData?n.get(e):n[e],G8=(n,e)=>{if(Bq(n))return!1;Mq(n.list,n.watchVariable);const t=jq(e,n.watchVariable);return typeof t!="string"?!1:n.list.includes(t)},$8=()=>new I0(403,"Forbidden"),Fq=(n,e)=>{if(typeof n!="number"||n<0)throw"The LimitRate throttle has to be a positive number";if(e&&typeof e!="string")throw"The LimitRate ID has to be a non-empty string"},Uq=async(n,e,t)=>{const r=Number(await t.get(n)||0);return e-Date.now()+r},X8=async(n,e,t)=>{if(!e.throttle||!t)return!1;Fq(e.throttle,e.id);const r=e.id||n;return await Uq(r,e.throttle,t)>0?!0:(await t.set(r,Date.now().toString()),!1)},Y8=()=>new I0(429,"Too Many Requests"),Vq=async(n,e,t,r)=>{const i=_x(r),a=i.publicKey||ca.publicKey,o=i.blockHeadless||ca.blockHeadless,s=i.storageProvider||ca.storageProvider,u={...ca.blockList,...i.blockList},f={...ca.limitRate,...i.limitRate};return o&&H8(navigator)?Promise.reject(W8()):(q8(a,n,e),kq(t),t&&G8(u,t)?Promise.reject($8()):await X8(location.pathname,f,s)?Promise.reject(Y8()):z8("/api/v1.0/email/send",JSON.stringify({lib_version:"4.4.1",user_id:a,service_id:n,template_id:e,template_params:t}),{"Content-type":"application/json"}))},zq=n=>{if(!n||n.nodeName!=="FORM")throw"The 3rd parameter is expected to be the HTML form element or the style selector of the form"},qq=n=>typeof n=="string"?document.querySelector(n):n,Hq=async(n,e,t,r)=>{const i=_x(r),a=i.publicKey||ca.publicKey,o=i.blockHeadless||ca.blockHeadless,s=ca.storageProvider||i.storageProvider,u={...ca.blockList,...i.blockList},f={...ca.limitRate,...i.limitRate};if(o&&H8(navigator))return Promise.reject(W8());const h=qq(t);q8(a,n,e),zq(h);const p=new FormData(h);return G8(u,p)?Promise.reject($8()):await X8(location.pathname,f,s)?Promise.reject(Y8()):(p.append("lib_version","4.4.1"),p.append("service_id",n),p.append("template_id",e),p.append("user_id",a),z8("/api/v1.0/email/send-form",p))},W4={init:Lq,send:Vq,sendForm:Hq,EmailJSResponseStatus:I0},zv={serviceId:"service_zbzqfa3",templateId:"template_02cqfdn",publicKey:"gJHtAe_l22dY8tKju"},Wq=()=>{const[n,e]=ge.useState(!1),[t,r]=ge.useState(null),[i,a]=ge.useState(null);ge.useEffect(()=>{W4.init(zv.publicKey),s();const f=setInterval(()=>{new Date().getHours()===9&&s()},60*60*1e3);return()=>clearInterval(f)},[]);const o=f=>f?new Date(f).toLocaleDateString("he-IL",{year:"numeric",month:"long",day:"numeric",weekday:"long"}):"",s=async()=>{var f,h;e(!0),a(null);try{const p=new Date,g=new Date(p);g.setDate(p.getDate()+2);const m=g.toISOString().split("T")[0];console.log(`📅 Checking for orders returning on: ${m}`);const x=Gu(On(kt,"orders"),Ju("status","in",["active","confirmed","picked_up","open"]),Ju("returnDate","==",m)),w=await yr(x),I={totalFound:w.size,emailsSent:0,alreadySent:0,errors:[]};if(w.empty){a({...I,message:"לא נמצאו הזמנות הדורשות תזכורת היום"}),r(new Date);return}for(const C of w.docs){const P=C.data(),B=C.id;if(P.reminderSent){I.alreadySent++;continue}try{const V={to_email:P.email,to_name:P.clientName,client_name:P.clientName,return_date:o(P.returnDate),volunteer_name:P.volunteerName||"צוות הארגון",volunteer_phone:P.phone||"לא צוין",organization_name:"גמח שמחת זקנתי",items_list:((f=P.items)==null?void 0:f.map(q=>`• ${q.name} - כמות: ${q.quantity}`).join(`
`))||"לא צוינו פריטים",total_items:((h=P.items)==null?void 0:h.reduce((q,D)=>q+D.quantity,0))||0,event_type:P.eventType||"כללי",pickup_date:o(P.pickupDate),order_id:B},Y=await W4.send(zv.serviceId,zv.templateId,V);console.log("✅ Email sent successfully:",Y),await Qa(Ar(kt,"orders",B),{reminderSent:!0,reminderSentAt:Ei.now(),emailSentResult:{status:Y.status,text:Y.text,sentAt:new Date().toISOString()}}),I.emailsSent++}catch(V){console.error(`❌ Failed to send reminder for order ${B}:`,V),I.errors.push({orderId:B,email:P.email,clientName:P.clientName,error:V.message})}}a({...I,message:`בדיקה הושלמה: ${I.emailsSent} תזכורות נשלחו`})}catch(p){console.error("❌ Error in reminder check:",p),a({totalFound:0,emailsSent:0,errors:[{error:p.message}],message:"שגיאה בבדיקת תזכורות"})}finally{e(!1),r(new Date)}},u=()=>{s()};return E.jsxs("div",{style:{padding:"2rem",maxWidth:"800px",margin:"0 auto",fontFamily:"Arial, sans-serif"},dir:"rtl",children:[E.jsxs("div",{style:{background:"linear-gradient(to right, #3b82f6, #1e40af)",color:"white",padding:"2rem",borderRadius:"12px",marginBottom:"2rem",textAlign:"center"},children:[E.jsx("h1",{style:{margin:0,fontSize:"1.8rem"},children:"📧 מערכת תזכורות אוטומטית"}),E.jsx("p",{style:{margin:"0.5rem 0 0 0",opacity:.9},children:"תזכורות להחזרת פריטים - 2 ימים לפני תאריך החזרה"})]}),E.jsxs("div",{style:{background:"white",border:"1px solid #e5e7eb",borderRadius:"12px",padding:"2rem",marginBottom:"2rem",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[E.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[E.jsx("h2",{style:{margin:0,color:"#1f2937"},children:"סטטוס המערכת"}),E.jsx("button",{onClick:u,disabled:n,style:{background:n?"#9ca3af":"#10b981",color:"white",border:"none",padding:"0.75rem 1.5rem",borderRadius:"8px",cursor:n?"not-allowed":"pointer",fontSize:"1rem",fontWeight:"bold"},children:n?"🔄 בודק...":"🔍 בדוק תזכורות"})]}),t&&E.jsxs("div",{style:{background:"#f3f4f6",padding:"1rem",borderRadius:"8px",marginBottom:"1rem",fontSize:"0.9rem",color:"#6b7280"},children:[E.jsx("strong",{children:"בדיקה אחרונה:"})," ",t.toLocaleString("he-IL")]}),i&&E.jsxs("div",{style:{background:i.errors.length>0?"#fef2f2":"#f0fdf4",border:`1px solid ${i.errors.length>0?"#fecaca":"#bbf7d0"}`,borderRadius:"8px",padding:"1.5rem"},children:[E.jsx("h3",{style:{margin:"0 0 1rem 0",color:i.errors.length>0?"#dc2626":"#059669"},children:i.message}),E.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(120px, 1fr))",gap:"1rem",marginBottom:"1rem"},children:[E.jsxs("div",{style:{textAlign:"center"},children:[E.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#3b82f6"},children:i.totalFound}),E.jsx("div",{style:{fontSize:"0.875rem",color:"#6b7280"},children:"נמצאו"})]}),E.jsxs("div",{style:{textAlign:"center"},children:[E.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#10b981"},children:i.emailsSent}),E.jsx("div",{style:{fontSize:"0.875rem",color:"#6b7280"},children:"נשלחו"})]}),E.jsxs("div",{style:{textAlign:"center"},children:[E.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#f59e0b"},children:i.alreadySent}),E.jsx("div",{style:{fontSize:"0.875rem",color:"#6b7280"},children:"כבר נשלחו"})]}),E.jsxs("div",{style:{textAlign:"center"},children:[E.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#ef4444"},children:i.errors.length}),E.jsx("div",{style:{fontSize:"0.875rem",color:"#6b7280"},children:"שגיאות"})]})]}),i.errors.length>0&&E.jsxs("div",{style:{background:"white",border:"1px solid #fecaca",borderRadius:"6px",padding:"1rem"},children:[E.jsx("h4",{style:{margin:"0 0 0.5rem 0",color:"#dc2626"},children:"שגיאות:"}),i.errors.map((f,h)=>E.jsxs("div",{style:{fontSize:"0.875rem",color:"#7f1d1d",marginBottom:"0.25rem"},children:[f.clientName?`${f.clientName} (${f.email})`:"שגיאה כללית",": ",f.error]},h))]})]})]}),E.jsxs("div",{style:{background:"#fffbeb",border:"1px solid #fed7aa",borderRadius:"12px",padding:"2rem"},children:[E.jsx("h3",{style:{margin:"0 0 1rem 0",color:"#92400e"},children:"🔧 הוראות למנהלי המערכת"}),E.jsxs("ul",{style:{color:"#92400e",paddingRight:"1.5rem"},children:[E.jsx("li",{children:"המערכת בודקת אוטומטית כל יום ב-9:00 בבוקר"}),E.jsx("li",{children:"ניתן להפעיל בדיקה ידנית בכל עת באמצעות הכפתור למעלה"}),E.jsx("li",{children:"תזכורות נשלחות רק פעם אחת לכל הזמנה"}),E.jsx("li",{children:"המערכת שולחת תזכורות 2 ימים לפני תאריך ההחזרה"}),E.jsx("li",{children:"כל התזכורות נרשמות במסד הנתונים למעקב"})]})]})]})},Gq=()=>{var D,A;const[n,e]=ge.useState([]),[t,r]=ge.useState([]),[i,a]=ge.useState(null),[o,s]=ge.useState(""),[u,f]=ge.useState(""),[h,p]=ge.useState(""),[g,m]=ge.useState(!0),[x,w]=ge.useState(!1);ge.useEffect(()=>{(async()=>{try{m(!0),console.log("🔍 מחפש את כל ההזמנות...");const k=Gu(On(kt,"orders")),L=(await yr(k)).docs.map(le=>({id:le.id,...le.data()}));console.log("📋 כל ההזמנות:",L),console.log("📊 סטטוסים:",L.map(le=>({id:le.id,client:le.clientName,status:le.status}))),console.log("🔍 מחפש הזמנות סגורות...");const j=Gu(On(kt,"orders"),Ju("status","==","closed")),ne=(await yr(j)).docs.map(le=>({id:le.id,...le.data()}));console.log("✅ הזמנות סגורות:",ne),e(ne),console.log("🔍 מחפש הזמנות שהוחזרו...");const U=Gu(On(kt,"orders"),Ju("status","==","returned")),ee=(await yr(U)).docs.map(le=>({id:le.id,...le.data()}));console.log("🔄 הזמנות שהוחזרו:",ee)}catch(k){console.error("❌ שגיאה בטעינת ההזמנות:",k)}finally{m(!1)}})()},[]);const I=T=>T?(T.seconds?new Date(T.seconds*1e3):new Date(T)).toLocaleDateString("he-IL",{year:"numeric",month:"2-digit",day:"2-digit"}):"",C=T=>T?(T.seconds?new Date(T.seconds*1e3):new Date(T)).toLocaleString("he-IL",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}):"",P=T=>{var U;if(!((U=T.returnInspection)!=null&&U.itemInspections))return{totalItemsExpected:0,totalItemsReturned:0,totalItemsNotReturned:0,totalDamagedItems:0,totalLostItems:0};const k=T.returnInspection.itemInspections,R=k.reduce((z,ee)=>z+(ee.quantityExpected||0),0),L=k.reduce((z,ee)=>z+(ee.quantityReturned||0),0),j=k.reduce((z,ee)=>z+Math.max(0,(ee.quantityExpected||0)-(ee.quantityReturned||0)),0),H=k.filter(z=>z.condition==="damaged").reduce((z,ee)=>z+(ee.quantityReturned||0),0),ne=k.filter(z=>z.condition==="lost").reduce((z,ee)=>z+Math.max(0,(ee.quantityExpected||0)-(ee.quantityReturned||0)),0);return{totalItemsExpected:R,totalItemsReturned:L,totalItemsNotReturned:j,totalDamagedItems:H,totalLostItems:ne}};ge.useEffect(()=>{const T=u?new Date(u):null,k=h?new Date(h):null,R=n.filter(L=>{var ee,le,$;const j=((ee=L.clientName)==null?void 0:ee.toLowerCase().includes(o.toLowerCase()))||"",H=((le=L.phone)==null?void 0:le.includes(o))||"",ne=j||H,U=($=L.pickupDate)!=null&&$.seconds?new Date(L.pickupDate.seconds*1e3):new Date(L.pickupDate),z=(!T||U>=T)&&(!k||U<=k);return ne&&z});r(R)},[o,u,h,n]);const B=T=>{switch(T){case"good":return E.jsx(lh,{size:16,style:{color:"#10b981"}});case"damaged":return E.jsx(pU,{size:16,style:{color:"#f59e0b"}});case"lost":return E.jsx(S0,{size:16,style:{color:"#ef4444"}});default:return E.jsx(Yo,{size:16,style:{color:"#6b7280"}})}},V=T=>{switch(T){case"good":return"תקין";case"damaged":return"פגום";case"lost":return"אבד/לא הוחזר";default:return"לא נבדק"}},Y=T=>{switch(T){case"good":return"#10b981";case"damaged":return"#f59e0b";case"lost":return"#ef4444";default:return"#6b7280"}},q=T=>{var j,H,ne;const k=new Ht,R=P(T);k.setFont("helvetica"),k.setFontSize(16),k.text(`דוח השאלה - ${T.clientName}`,20,20),k.setFontSize(12),k.text(`מתנדבת: ${T.volunteerName}`,20,35),k.text(`טלפון: ${T.phone}`,20,45),k.text(`כתובת: ${T.address}`,20,55),k.text(`תאריך איסוף: ${I(T.pickupDate)}`,20,65),k.text(`תאריך החזרה: ${I(T.returnDate)}`,20,75),k.text(`סוג אירוע: ${T.eventType}`,20,85);const L=((j=T.items)==null?void 0:j.map((U,z)=>{var ee,le,$,ve,G,Q;return[z+1,U.name,U.quantity,(($=(le=(ee=T.returnInspection)==null?void 0:ee.itemInspections)==null?void 0:le.find(te=>te.itemId===U.id))==null?void 0:$.quantityReturned)||"לא נבדק",((Q=(G=(ve=T.returnInspection)==null?void 0:ve.itemInspections)==null?void 0:G.find(te=>te.itemId===U.id))==null?void 0:Q.condition)||"לא נבדק"]}))||[];if(Dq(k,{head:[["#","פריט","הושאל","הוחזר","מצב"]],body:L,startY:95,styles:{fontSize:10}}),T.returnInspection){const U=k.lastAutoTable.finalY+15;k.setFontSize(14),k.text("סיכום בדיקת החזרה:",20,U),k.setFontSize(11),k.text(`סה"כ פריטים שהושאלו: ${R.totalItemsExpected}`,20,U+15),k.text(`סה"כ פריטים שהוחזרו: ${R.totalItemsReturned}`,20,U+25),k.text(`פריטים שלא הוחזרו: ${R.totalItemsNotReturned}`,20,U+35),k.text(`פריטים פגומים: ${R.totalDamagedItems}`,20,U+45),k.text(`פריטים אבודים: ${R.totalLostItems}`,20,U+55),k.text(`עלות נזקים: ₪${((H=T.returnInspection.summary)==null?void 0:H.totalRepairCost)||0}`,20,U+65),(ne=T.returnInspection.summary)!=null&&ne.managerNotes&&k.text(`הערות: ${T.returnInspection.summary.managerNotes}`,20,U+75),k.text(`תאריך בדיקה: ${C(T.returnInspection.completedAt)}`,20,U+85)}k.save(`השאלה_${T.clientName}_${I(T.pickupDate)}.pdf`)};return g?E.jsx("div",{className:"flex items-center justify-center min-h-screen",children:E.jsxs("div",{className:"text-center",children:[E.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),E.jsx("p",{className:"text-gray-600",children:"טוען היסטוריית השאלות..."})]})}):E.jsxs("div",{style:{padding:"1rem",maxWidth:"1200px",margin:"0 auto",fontFamily:"Arial, sans-serif"},dir:"rtl",children:[E.jsx("style",{children:`
        @media (max-width: 768px) {
          .date-input {
            appearance: none !important;
            -webkit-appearance: none !important;
            -moz-appearance: none !important;
            background: white !important;
            border: 2px solid #e5e7eb !important;
            border-radius: 8px !important;
            padding: 12px !important;
            font-size: 16px !important;
            text-align: center !important;
            direction: ltr !important;
            width: 100% !important;
            box-sizing: border-box !important;
            cursor: pointer !important;
            letter-spacing: 1px !important;
          }
          
          .date-input::-webkit-calendar-picker-indicator {
            opacity: 0 !important;
            position: absolute !important;
            left: 0 !important;
            right: 0 !important;
            width: 100% !important;
            height: 100% !important;
            cursor: pointer !important;
            background: transparent !important;
          }
          
          .date-input::-webkit-inner-spin-button,
          .date-input::-webkit-outer-spin-button {
            opacity: 0 !important;
            -webkit-appearance: none !important;
            margin: 0 !important;
          }
        }
      `}),E.jsxs("div",{style:{background:"linear-gradient(to right, #3b82f6, #1e40af)",color:"white",padding:"1.5rem",borderRadius:"12px",marginBottom:"2rem",display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:"1rem"},children:[E.jsxs("div",{style:{textAlign:window.innerWidth<768?"center":"right",flex:"1"},children:[E.jsx("h1",{style:{fontSize:"1.8rem",fontWeight:"bold",margin:0,marginBottom:"0.5rem"},children:"📚 היסטוריית השאלות"}),E.jsx("p",{style:{fontSize:"0.95rem",opacity:.9,margin:0},children:"כל ההזמנות שהושלמו עם פרטי בדיקת החזרה"})]}),E.jsxs("button",{onClick:()=>w(!0),style:{background:"rgba(255, 255, 255, 0.2)",border:"2px solid rgba(255, 255, 255, 0.3)",color:"white",padding:"0.75rem 1.5rem",borderRadius:"8px",cursor:"pointer",fontSize:"1rem",fontWeight:"bold",display:"flex",alignItems:"center",gap:"0.5rem",transition:"all 0.2s ease",backdropFilter:"blur(10px)",whiteSpace:"nowrap"},onMouseEnter:T=>{T.currentTarget.style.background="rgba(255, 255, 255, 0.3)",T.currentTarget.style.transform="translateY(-2px)"},onMouseLeave:T=>{T.currentTarget.style.background="rgba(255, 255, 255, 0.2)",T.currentTarget.style.transform="translateY(0)"},children:[E.jsx(WF,{size:20}),"📊 סטטיסטיקות"]})]}),!i&&E.jsxs(E.Fragment,{children:[E.jsxs("div",{style:{background:"white",padding:window.innerWidth<768?"1rem":"1.5rem",borderRadius:"12px",marginBottom:"2rem",boxShadow:"0 2px 8px rgba(0,0,0,0.1)",border:"1px solid #e5e7eb"},children:[E.jsxs("div",{style:{display:"flex",flexDirection:window.innerWidth<768?"column":"row",gap:"1rem",alignItems:window.innerWidth<768?"stretch":"end"},children:[E.jsxs("div",{style:{flex:window.innerWidth<768?"none":"2"},children:[E.jsxs("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:"#374151",marginBottom:"0.5rem"},children:[E.jsx(kS,{size:16,style:{display:"inline",marginLeft:"0.25rem"}}),"חיפוש לפי שם לקוח או טלפון"]}),E.jsx("input",{type:"text",value:o,onChange:T=>s(T.target.value),style:{width:"100%",padding:"0.75rem",border:"2px solid #e5e7eb",borderRadius:"8px",fontSize:"1rem",boxSizing:"border-box"},placeholder:"הקלד שם או טלפון..."})]}),E.jsxs("div",{style:{flex:"1"},children:[E.jsxs("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:"#374151",marginBottom:"0.5rem"},children:[E.jsx(sh,{size:16,style:{display:"inline",marginLeft:"0.25rem"}}),"מתאריך"]}),E.jsx("input",{type:"date",value:u,onChange:T=>f(T.target.value),className:"date-input",style:{width:"100%",padding:"0.75rem",border:"2px solid #e5e7eb",borderRadius:"8px",fontSize:"1rem",boxSizing:"border-box"}})]}),E.jsxs("div",{style:{flex:"1"},children:[E.jsxs("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:"#374151",marginBottom:"0.5rem"},children:[E.jsx(sh,{size:16,style:{display:"inline",marginLeft:"0.25rem"}}),"עד תאריך"]}),E.jsx("input",{type:"date",value:h,onChange:T=>p(T.target.value),className:"date-input",style:{width:"100%",padding:"0.75rem",border:"2px solid #e5e7eb",borderRadius:"8px",fontSize:"1rem",boxSizing:"border-box"}})]})]}),E.jsxs("div",{style:{marginTop:"1rem",padding:"0.75rem",background:"#f3f4f6",borderRadius:"8px",fontSize:"0.875rem",color:"#374151"},children:["נמצאו ",t.length," השאלות מתוך ",n.length,' סה"כ']})]}),E.jsx("div",{style:{display:"grid",gridTemplateColumns:window.innerWidth<768?"1fr":window.innerWidth<1024?"repeat(2, 1fr)":"repeat(3, 1fr)",gap:window.innerWidth<768?"1rem":"1.5rem"},children:t.length===0?E.jsxs("div",{style:{gridColumn:"1 / -1",textAlign:"center",padding:"3rem",background:"white",borderRadius:"12px",border:"1px solid #e5e7eb"},children:[E.jsx(Yo,{size:48,style:{color:"#9ca3af",marginBottom:"1rem"}}),E.jsx("h3",{style:{fontSize:"1.25rem",color:"#6b7280",margin:0},children:"לא נמצאו השאלות"}),E.jsx("p",{style:{color:"#9ca3af",margin:"0.5rem 0 0 0"},children:"נסה לשנות את פרמטרי החיפוש"})]}):t.map(T=>{var k;return E.jsxs("div",{onClick:()=>a(T),style:{background:"white",padding:window.innerWidth<768?"1rem":"1.5rem",borderRadius:"12px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)",border:"1px solid #e5e7eb",cursor:"pointer",transition:"all 0.2s ease",width:"100%",boxSizing:"border-box"},onMouseEnter:R=>{R.currentTarget.style.boxShadow="0 4px 12px rgba(0,0,0,0.15)",R.currentTarget.style.transform="translateY(-2px)"},onMouseLeave:R=>{R.currentTarget.style.boxShadow="0 2px 8px rgba(0,0,0,0.1)",R.currentTarget.style.transform="translateY(0)"},children:[E.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"1rem",flexWrap:"wrap",gap:"0.5rem"},children:[E.jsxs("div",{style:{flex:"1",minWidth:"0"},children:[E.jsx("h3",{style:{fontSize:window.innerWidth<768?"1rem":"1.25rem",fontWeight:"bold",margin:0,color:"#1f2937",wordBreak:"break-word"},children:T.clientName}),E.jsxs("p",{style:{fontSize:window.innerWidth<768?"0.75rem":"0.875rem",color:"#6b7280",margin:"0.25rem 0 0 0",display:"flex",alignItems:"center",gap:"0.25rem"},children:[E.jsx(jS,{size:window.innerWidth<768?12:14}),T.volunteerName]})]}),E.jsx("div",{style:{background:"#10b981",color:"white",padding:"0.25rem 0.75rem",borderRadius:"20px",fontSize:window.innerWidth<768?"0.6rem":"0.75rem",fontWeight:"bold",whiteSpace:"nowrap"},children:"הושלם"})]}),E.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr",gap:"0.5rem",fontSize:window.innerWidth<768?"0.75rem":"0.875rem",color:"#6b7280"},children:[E.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[E.jsx(Om,{size:window.innerWidth<768?12:14}),E.jsx("span",{style:{wordBreak:"break-all"},children:T.phone})]}),E.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[E.jsx(dx,{size:window.innerWidth<768?12:14}),E.jsxs("span",{style:{fontSize:window.innerWidth<768?"0.7rem":"0.875rem"},children:[I(T.pickupDate)," → ",I(T.returnDate)]})]}),E.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[E.jsx(Yo,{size:window.innerWidth<768?12:14}),(k=T.items)==null?void 0:k.reduce((R,L)=>R+L.quantity,0)," פריטים"]})]})]},T.id)})})]}),i&&E.jsxs("div",{style:{background:"white",padding:window.innerWidth<768?"1rem":"2rem",borderRadius:"12px",boxShadow:"0 4px 16px rgba(0,0,0,0.1)",border:"1px solid #e5e7eb"},children:[E.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"2rem",paddingBottom:"1rem",borderBottom:"2px solid #e5e7eb",flexWrap:"wrap",gap:"1rem"},children:[E.jsxs("div",{children:[E.jsxs("h2",{style:{fontSize:window.innerWidth<768?"1.25rem":"2rem",fontWeight:"bold",margin:0,color:"#1f2937"},children:["השאלה - ",i.clientName]}),E.jsxs("p",{style:{fontSize:window.innerWidth<768?"0.875rem":"1rem",color:"#6b7280",margin:"0.5rem 0 0 0"},children:["הושלמה ב-",C((D=i.returnInspection)==null?void 0:D.completedAt)]})]}),E.jsxs("button",{onClick:()=>a(null),style:{background:"#6b7280",color:"white",padding:"0.75rem 1.5rem",borderRadius:"8px",border:"none",cursor:"pointer",fontSize:window.innerWidth<768?"0.875rem":"1rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[E.jsx(zF,{size:16}),"חזרה לרשימה"]})]}),E.jsxs("div",{style:{display:"grid",gridTemplateColumns:window.innerWidth<768?"1fr":"repeat(auto-fit, minmax(250px, 1fr))",gap:"1rem",marginBottom:"2rem",padding:"1.5rem",background:"#f9fafb",borderRadius:"8px",border:"1px solid #e5e7eb"},children:[E.jsxs("div",{children:[E.jsx("span",{style:{fontSize:"0.875rem",color:"#6b7280",display:"block"},children:"לקוח"}),E.jsx("span",{style:{fontSize:"1.1rem",fontWeight:"bold",color:"#1f2937"},children:i.clientName})]}),E.jsxs("div",{children:[E.jsx("span",{style:{fontSize:"0.875rem",color:"#6b7280",display:"block"},children:"מתנדבת"}),E.jsx("span",{style:{fontSize:"1.1rem",fontWeight:"bold",color:"#1f2937"},children:i.volunteerName})]}),E.jsxs("div",{children:[E.jsx("span",{style:{fontSize:"0.875rem",color:"#6b7280",display:"block"},children:"טלפון"}),E.jsx("span",{style:{fontSize:"1.1rem",fontWeight:"bold",color:"#1f2937"},children:i.phone})]}),E.jsxs("div",{children:[E.jsx("span",{style:{fontSize:"0.875rem",color:"#6b7280",display:"block"},children:"כתובת"}),E.jsx("span",{style:{fontSize:"1.1rem",fontWeight:"bold",color:"#1f2937"},children:i.address})]}),E.jsxs("div",{children:[E.jsx("span",{style:{fontSize:"0.875rem",color:"#6b7280",display:"block"},children:"תאריכים"}),E.jsxs("span",{style:{fontSize:"1.1rem",fontWeight:"bold",color:"#1f2937"},children:[I(i.pickupDate)," → ",I(i.returnDate)]})]}),E.jsxs("div",{children:[E.jsx("span",{style:{fontSize:"0.875rem",color:"#6b7280",display:"block"},children:"סוג אירוע"}),E.jsx("span",{style:{fontSize:"1.1rem",fontWeight:"bold",color:"#1f2937"},children:i.eventType})]})]}),E.jsxs("div",{style:{marginBottom:"2rem"},children:[E.jsx("h3",{style:{fontSize:"1.5rem",fontWeight:"bold",margin:"0 0 1rem 0",color:"#1f2937"},children:"📦 פריטים וסטטוס החזרה"}),E.jsx("div",{style:{display:"grid",gap:"1rem"},children:(A=i.items)==null?void 0:A.map((T,k)=>{var L,j;const R=(j=(L=i.returnInspection)==null?void 0:L.itemInspections)==null?void 0:j.find(H=>H.itemId===T.id||H.name===T.name);return E.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"1rem",background:"white",border:"1px solid #e5e7eb",borderRadius:"8px",flexWrap:window.innerWidth<768?"wrap":"nowrap",gap:"0.5rem"},children:[E.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",flex:"1",minWidth:"200px"},children:[E.jsx(Yo,{size:20,style:{color:"#6b7280"}}),E.jsxs("div",{children:[E.jsx("h4",{style:{fontSize:"1.1rem",fontWeight:"bold",margin:0,color:"#1f2937"},children:T.name}),E.jsxs("p",{style:{fontSize:"0.875rem",color:"#6b7280",margin:"0.25rem 0 0 0"},children:["הושאל: ",T.quantity," | הוחזר: ",(R==null?void 0:R.quantityReturned)||0]})]})]}),E.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[B(R==null?void 0:R.condition),E.jsx("span",{style:{color:Y(R==null?void 0:R.condition),fontWeight:"bold",fontSize:"0.875rem"},children:V(R==null?void 0:R.condition)})]})]},k)})})]}),i.returnInspection&&(()=>{var k;const T=P(i);return E.jsxs("div",{style:{background:"#f0fdf4",border:"1px solid #10b981",borderRadius:"8px",padding:"1.5rem",marginBottom:"2rem"},children:[E.jsxs("h3",{style:{fontSize:"1.5rem",fontWeight:"bold",margin:"0 0 1rem 0",color:"#059669",display:"flex",alignItems:"center",gap:"0.5rem"},children:[E.jsx(lh,{size:24}),"סיכום בדיקת החזרה"]}),E.jsxs("div",{style:{display:"grid",gridTemplateColumns:window.innerWidth<768?"1fr":"repeat(auto-fit, minmax(250px, 1fr))",gap:"2rem",marginBottom:"1rem"},children:[E.jsxs("div",{style:{textAlign:"center"},children:[E.jsx("span",{style:{fontSize:"1rem",color:"#059669",display:"block",marginBottom:"0.5rem"},children:"✅ פריטים שהוחזרו"}),E.jsx("span",{style:{fontSize:"2.5rem",fontWeight:"bold",color:"#10b981"},children:T.totalItemsReturned}),E.jsxs("span",{style:{fontSize:"0.875rem",color:"#6b7280",display:"block",marginTop:"0.25rem"},children:["מתוך ",T.totalItemsExpected]})]}),E.jsxs("div",{style:{textAlign:"center"},children:[E.jsx("span",{style:{fontSize:"1rem",color:"#059669",display:"block",marginBottom:"0.5rem"},children:"❌ פריטים שלא הוחזרו/פגומים"}),E.jsx("span",{style:{fontSize:"2.5rem",fontWeight:"bold",color:"#ef4444"},children:T.totalItemsNotReturned}),E.jsx("span",{style:{fontSize:"0.875rem",color:"#6b7280",display:"block",marginTop:"0.25rem"},children:"אבודים/פגומים/לא הוחזרו"})]})]}),((k=i.returnInspection.summary)==null?void 0:k.managerNotes)&&E.jsxs("div",{style:{background:"white",padding:"1rem",borderRadius:"8px",marginTop:"1rem"},children:[E.jsx("span",{style:{fontSize:"0.875rem",color:"#059669",display:"block",marginBottom:"0.5rem"},children:"הערות מנהל"}),E.jsx("p",{style:{fontSize:"1rem",color:"#1f2937",margin:0},children:i.returnInspection.summary.managerNotes})]})]})})(),E.jsx("div",{style:{display:"flex",justifyContent:"center",gap:"1rem"},children:E.jsxs("button",{onClick:()=>q(i),style:{background:"linear-gradient(to right, #10b981, #059669)",color:"white",padding:"0.75rem 1.5rem",borderRadius:"8px",border:"none",cursor:"pointer",fontSize:"1rem",fontWeight:"bold",display:"flex",alignItems:"center",gap:"0.5rem",boxShadow:"0 2px 4px rgba(16, 185, 129, 0.2)"},children:[E.jsx(eU,{size:16}),"ייצא כ-PDF"]})})]}),E.jsx(Oq,{showStatsModal:x,setShowStatsModal:w,loanHistory:n}),E.jsx(Wq,{})]})},$q=()=>E.jsxs(dS,{children:[E.jsx(jk,{}),E.jsxs(ZT,{children:[E.jsx(Go,{path:"/",element:E.jsx(Uk,{})}),E.jsx(Go,{path:"/login",element:E.jsx(Vk,{})}),E.jsx(Go,{path:"/register",element:E.jsx(zk,{})}),E.jsx(Go,{path:"/catalog",element:E.jsx(XV,{})}),E.jsx(Go,{path:"/request",element:E.jsx(kF,{})}),E.jsx(Go,{path:"/my-orders",element:E.jsx(_U,{})}),E.jsx(Go,{path:"/requests",element:E.jsx(yU,{})}),E.jsx(Go,{path:"/new-loan",element:E.jsx(LF,{})}),E.jsx(Go,{path:"/calendar",element:E.jsx(kU,{})}),E.jsx(Go,{path:"/manage-product",element:E.jsx(GV,{})}),E.jsx(Go,{path:"/manage-users",element:E.jsx($V,{})}),E.jsx(Go,{path:"/history",element:E.jsx(Gq,{})})]})]});sT.createRoot(document.getElementById("root")).render(E.jsx(kn.StrictMode,{children:E.jsx(dS,{children:E.jsx(bI,{children:E.jsx($q,{})})})}));export{or as _,Xq as c,G4 as g};
